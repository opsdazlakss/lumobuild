function $N(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const l=Object.getOwnPropertyDescriptor(r,a);l&&Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function fd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function qN(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){var a=!1;try{a=this instanceof r}catch{}return a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),n}var f0={exports:{}},Tu={};var o_;function GN(){if(o_)return Tu;o_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:t,type:r,key:c,ref:a!==void 0?a:null,props:l}}return Tu.Fragment=e,Tu.jsx=n,Tu.jsxs=n,Tu}var l_;function YN(){return l_||(l_=1,f0.exports=GN()),f0.exports}var d=YN(),m0={exports:{}},it={};var c_;function KN(){if(c_)return it;c_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),_=Symbol.iterator;function C(H){return H===null||typeof H!="object"?null:(H=_&&H[_]||H["@@iterator"],typeof H=="function"?H:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,k={};function B(H,ee,ae){this.props=H,this.context=ee,this.refs=k,this.updater=ae||N}B.prototype.isReactComponent={},B.prototype.setState=function(H,ee){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ee,"setState")},B.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function $(){}$.prototype=B.prototype;function R(H,ee,ae){this.props=H,this.context=ee,this.refs=k,this.updater=ae||N}var V=R.prototype=new $;V.constructor=R,j(V,B.prototype),V.isPureReactComponent=!0;var z=Array.isArray;function F(){}var S={H:null,A:null,T:null,S:null},E=Object.prototype.hasOwnProperty;function A(H,ee,ae){var de=ae.ref;return{$$typeof:t,type:H,key:ee,ref:de!==void 0?de:null,props:ae}}function M(H,ee){return A(H.type,ee,H.props)}function O(H){return typeof H=="object"&&H!==null&&H.$$typeof===t}function U(H){var ee={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(ae){return ee[ae]})}var P=/\/+/g;function xe(H,ee){return typeof H=="object"&&H!==null&&H.key!=null?U(""+H.key):ee.toString(36)}function Ee(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(F,F):(H.status="pending",H.then(function(ee){H.status==="pending"&&(H.status="fulfilled",H.value=ee)},function(ee){H.status==="pending"&&(H.status="rejected",H.reason=ee)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function G(H,ee,ae,de,je){var _e=typeof H;(_e==="undefined"||_e==="boolean")&&(H=null);var Ce=!1;if(H===null)Ce=!0;else switch(_e){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(H.$$typeof){case t:case e:Ce=!0;break;case v:return Ce=H._init,G(Ce(H._payload),ee,ae,de,je)}}if(Ce)return je=je(H),Ce=de===""?"."+xe(H,0):de,z(je)?(ae="",Ce!=null&&(ae=Ce.replace(P,"$&/")+"/"),G(je,ee,ae,"",function(ve){return ve})):je!=null&&(O(je)&&(je=M(je,ae+(je.key==null||H&&H.key===je.key?"":(""+je.key).replace(P,"$&/")+"/")+Ce)),ee.push(je)),1;Ce=0;var He=de===""?".":de+":";if(z(H))for(var Ge=0;Ge<H.length;Ge++)de=H[Ge],_e=He+xe(de,Ge),Ce+=G(de,ee,ae,_e,je);else if(Ge=C(H),typeof Ge=="function")for(H=Ge.call(H),Ge=0;!(de=H.next()).done;)de=de.value,_e=He+xe(de,Ge++),Ce+=G(de,ee,ae,_e,je);else if(_e==="object"){if(typeof H.then=="function")return G(Ee(H),ee,ae,de,je);throw ee=String(H),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function ne(H,ee,ae){if(H==null)return H;var de=[],je=0;return G(H,de,"","",function(_e){return ee.call(ae,_e,je++)}),de}function X(H){if(H._status===-1){var ee=H._result;ee=ee(),ee.then(function(ae){(H._status===0||H._status===-1)&&(H._status=1,H._result=ae)},function(ae){(H._status===0||H._status===-1)&&(H._status=2,H._result=ae)}),H._status===-1&&(H._status=0,H._result=ee)}if(H._status===1)return H._result.default;throw H._result}var Ae=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},De={map:ne,forEach:function(H,ee,ae){ne(H,function(){ee.apply(this,arguments)},ae)},count:function(H){var ee=0;return ne(H,function(){ee++}),ee},toArray:function(H){return ne(H,function(ee){return ee})||[]},only:function(H){if(!O(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return it.Activity=b,it.Children=De,it.Component=B,it.Fragment=n,it.Profiler=a,it.PureComponent=R,it.StrictMode=r,it.Suspense=m,it.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,it.__COMPILER_RUNTIME={__proto__:null,c:function(H){return S.H.useMemoCache(H)}},it.cache=function(H){return function(){return H.apply(null,arguments)}},it.cacheSignal=function(){return null},it.cloneElement=function(H,ee,ae){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var de=j({},H.props),je=H.key;if(ee!=null)for(_e in ee.key!==void 0&&(je=""+ee.key),ee)!E.call(ee,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&ee.ref===void 0||(de[_e]=ee[_e]);var _e=arguments.length-2;if(_e===1)de.children=ae;else if(1<_e){for(var Ce=Array(_e),He=0;He<_e;He++)Ce[He]=arguments[He+2];de.children=Ce}return A(H.type,je,de)},it.createContext=function(H){return H={$$typeof:c,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:l,_context:H},H},it.createElement=function(H,ee,ae){var de,je={},_e=null;if(ee!=null)for(de in ee.key!==void 0&&(_e=""+ee.key),ee)E.call(ee,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(je[de]=ee[de]);var Ce=arguments.length-2;if(Ce===1)je.children=ae;else if(1<Ce){for(var He=Array(Ce),Ge=0;Ge<Ce;Ge++)He[Ge]=arguments[Ge+2];je.children=He}if(H&&H.defaultProps)for(de in Ce=H.defaultProps,Ce)je[de]===void 0&&(je[de]=Ce[de]);return A(H,_e,je)},it.createRef=function(){return{current:null}},it.forwardRef=function(H){return{$$typeof:h,render:H}},it.isValidElement=O,it.lazy=function(H){return{$$typeof:v,_payload:{_status:-1,_result:H},_init:X}},it.memo=function(H,ee){return{$$typeof:g,type:H,compare:ee===void 0?null:ee}},it.startTransition=function(H){var ee=S.T,ae={};S.T=ae;try{var de=H(),je=S.S;je!==null&&je(ae,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(F,Ae)}catch(_e){Ae(_e)}finally{ee!==null&&ae.types!==null&&(ee.types=ae.types),S.T=ee}},it.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},it.use=function(H){return S.H.use(H)},it.useActionState=function(H,ee,ae){return S.H.useActionState(H,ee,ae)},it.useCallback=function(H,ee){return S.H.useCallback(H,ee)},it.useContext=function(H){return S.H.useContext(H)},it.useDebugValue=function(){},it.useDeferredValue=function(H,ee){return S.H.useDeferredValue(H,ee)},it.useEffect=function(H,ee){return S.H.useEffect(H,ee)},it.useEffectEvent=function(H){return S.H.useEffectEvent(H)},it.useId=function(){return S.H.useId()},it.useImperativeHandle=function(H,ee,ae){return S.H.useImperativeHandle(H,ee,ae)},it.useInsertionEffect=function(H,ee){return S.H.useInsertionEffect(H,ee)},it.useLayoutEffect=function(H,ee){return S.H.useLayoutEffect(H,ee)},it.useMemo=function(H,ee){return S.H.useMemo(H,ee)},it.useOptimistic=function(H,ee){return S.H.useOptimistic(H,ee)},it.useReducer=function(H,ee,ae){return S.H.useReducer(H,ee,ae)},it.useRef=function(H){return S.H.useRef(H)},it.useState=function(H){return S.H.useState(H)},it.useSyncExternalStore=function(H,ee,ae){return S.H.useSyncExternalStore(H,ee,ae)},it.useTransition=function(){return S.H.useTransition()},it.version="19.2.3",it}var u_;function Va(){return u_||(u_=1,m0.exports=KN()),m0.exports}var I=Va();const fe=fd(I);var p0={exports:{}},Cu={},g0={exports:{}},y0={};var d_;function QN(){return d_||(d_=1,(function(t){function e(G,ne){var X=G.length;G.push(ne);e:for(;0<X;){var Ae=X-1>>>1,De=G[Ae];if(0<a(De,ne))G[Ae]=ne,G[X]=De,X=Ae;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var ne=G[0],X=G.pop();if(X!==ne){G[0]=X;e:for(var Ae=0,De=G.length,H=De>>>1;Ae<H;){var ee=2*(Ae+1)-1,ae=G[ee],de=ee+1,je=G[de];if(0>a(ae,X))de<De&&0>a(je,ae)?(G[Ae]=je,G[de]=X,Ae=de):(G[Ae]=ae,G[ee]=X,Ae=ee);else if(de<De&&0>a(je,X))G[Ae]=je,G[de]=X,Ae=de;else break e}}return ne}function a(G,ne){var X=G.sortIndex-ne.sortIndex;return X!==0?X:G.id-ne.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();t.unstable_now=function(){return c.now()-h}}var m=[],g=[],v=1,b=null,_=3,C=!1,N=!1,j=!1,k=!1,B=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function V(G){for(var ne=n(g);ne!==null;){if(ne.callback===null)r(g);else if(ne.startTime<=G)r(g),ne.sortIndex=ne.expirationTime,e(m,ne);else break;ne=n(g)}}function z(G){if(j=!1,V(G),!N)if(n(m)!==null)N=!0,F||(F=!0,U());else{var ne=n(g);ne!==null&&Ee(z,ne.startTime-G)}}var F=!1,S=-1,E=5,A=-1;function M(){return k?!0:!(t.unstable_now()-A<E)}function O(){if(k=!1,F){var G=t.unstable_now();A=G;var ne=!0;try{e:{N=!1,j&&(j=!1,$(S),S=-1),C=!0;var X=_;try{t:{for(V(G),b=n(m);b!==null&&!(b.expirationTime>G&&M());){var Ae=b.callback;if(typeof Ae=="function"){b.callback=null,_=b.priorityLevel;var De=Ae(b.expirationTime<=G);if(G=t.unstable_now(),typeof De=="function"){b.callback=De,V(G),ne=!0;break t}b===n(m)&&r(m),V(G)}else r(m);b=n(m)}if(b!==null)ne=!0;else{var H=n(g);H!==null&&Ee(z,H.startTime-G),ne=!1}}break e}finally{b=null,_=X,C=!1}ne=void 0}}finally{ne?U():F=!1}}}var U;if(typeof R=="function")U=function(){R(O)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,xe=P.port2;P.port1.onmessage=O,U=function(){xe.postMessage(null)}}else U=function(){B(O,0)};function Ee(G,ne){S=B(function(){G(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_next=function(G){switch(_){case 1:case 2:case 3:var ne=3;break;default:ne=_}var X=_;_=ne;try{return G()}finally{_=X}},t.unstable_requestPaint=function(){k=!0},t.unstable_runWithPriority=function(G,ne){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var X=_;_=G;try{return ne()}finally{_=X}},t.unstable_scheduleCallback=function(G,ne,X){var Ae=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Ae+X:Ae):X=Ae,G){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=X+De,G={id:v++,callback:ne,priorityLevel:G,startTime:X,expirationTime:De,sortIndex:-1},X>Ae?(G.sortIndex=X,e(g,G),n(m)===null&&G===n(g)&&(j?($(S),S=-1):j=!0,Ee(z,X-Ae))):(G.sortIndex=De,e(m,G),N||C||(N=!0,F||(F=!0,U()))),G},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(G){var ne=_;return function(){var X=_;_=ne;try{return G.apply(this,arguments)}finally{_=X}}}})(y0)),y0}var h_;function XN(){return h_||(h_=1,g0.exports=QN()),g0.exports}var v0={exports:{}},Xn={};var f_;function WN(){if(f_)return Xn;f_=1;var t=Va();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,g,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:m,containerInfo:g,implementation:v}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Xn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Xn.createPortal=function(m,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(m,g,null,v)},Xn.flushSync=function(m){var g=c.T,v=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=g,r.p=v,r.d.f()}},Xn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(m,g))},Xn.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},Xn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var v=g.as,b=h(v,g.crossOrigin),_=typeof g.integrity=="string"?g.integrity:void 0,C=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?r.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:_,fetchPriority:C}):v==="script"&&r.d.X(m,{crossOrigin:b,integrity:_,fetchPriority:C,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Xn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=h(g.as,g.crossOrigin);r.d.M(m,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(m)},Xn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,b=h(v,g.crossOrigin);r.d.L(m,v,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Xn.preloadModule=function(m,g){if(typeof m=="string")if(g){var v=h(g.as,g.crossOrigin);r.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(m)},Xn.requestFormReset=function(m){r.d.r(m)},Xn.unstable_batchedUpdates=function(m,g){return m(g)},Xn.useFormState=function(m,g,v){return c.H.useFormState(m,g,v)},Xn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Xn.version="19.2.3",Xn}var m_;function rv(){if(m_)return v0.exports;m_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),v0.exports=WN(),v0.exports}var p_;function JN(){if(p_)return Cu;p_=1;var t=XN(),e=Va(),n=rv();function r(s){var i="https://react.dev/errors/"+s;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var i=s,o=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(o=i.return),s=i.return;while(s)}return i.tag===3?o:null}function c(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function h(s){if(s.tag===31){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function m(s){if(l(s)!==s)throw Error(r(188))}function g(s){var i=s.alternate;if(!i){if(i=l(s),i===null)throw Error(r(188));return i!==s?null:s}for(var o=s,u=i;;){var p=o.return;if(p===null)break;var y=p.alternate;if(y===null){if(u=p.return,u!==null){o=u;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===o)return m(p),s;if(y===u)return m(p),i;y=y.sibling}throw Error(r(188))}if(o.return!==u.return)o=p,u=y;else{for(var w=!1,D=p.child;D;){if(D===o){w=!0,o=p,u=y;break}if(D===u){w=!0,u=p,o=y;break}D=D.sibling}if(!w){for(D=y.child;D;){if(D===o){w=!0,o=y,u=p;break}if(D===u){w=!0,u=y,o=p;break}D=D.sibling}if(!w)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?s:i}function v(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s;for(s=s.child;s!==null;){if(i=v(s),i!==null)return i;s=s.sibling}return null}var b=Object.assign,_=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),R=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function U(s){return s===null||typeof s!="object"?null:(s=O&&s[O]||s["@@iterator"],typeof s=="function"?s:null)}var P=Symbol.for("react.client.reference");function xe(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===P?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case j:return"Fragment";case B:return"Profiler";case k:return"StrictMode";case z:return"Suspense";case F:return"SuspenseList";case A:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case N:return"Portal";case R:return s.displayName||"Context";case $:return(s._context.displayName||"Context")+".Consumer";case V:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case S:return i=s.displayName||null,i!==null?i:xe(s.type)||"Memo";case E:i=s._payload,s=s._init;try{return xe(s(i))}catch{}}return null}var Ee=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},Ae=[],De=-1;function H(s){return{current:s}}function ee(s){0>De||(s.current=Ae[De],Ae[De]=null,De--)}function ae(s,i){De++,Ae[De]=s.current,s.current=i}var de=H(null),je=H(null),_e=H(null),Ce=H(null);function He(s,i){switch(ae(_e,i),ae(je,s),ae(de,null),i.nodeType){case 9:case 11:s=(s=i.documentElement)&&(s=s.namespaceURI)?R2(s):0;break;default:if(s=i.tagName,i=i.namespaceURI)i=R2(i),s=j2(i,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ee(de),ae(de,s)}function Ge(){ee(de),ee(je),ee(_e)}function ve(s){s.memoizedState!==null&&ae(Ce,s);var i=de.current,o=j2(i,s.type);i!==o&&(ae(je,s),ae(de,o))}function he(s){je.current===s&&(ee(de),ee(je)),Ce.current===s&&(ee(Ce),_u._currentValue=X)}var $e,oe;function pe(s){if($e===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);$e=i&&i[1]||"",oe=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$e+s+oe}var Ie=!1;function Q(s,i){if(!s||Ie)return"";Ie=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var ye=function(){throw Error()};if(Object.defineProperty(ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ye,[])}catch(se){var te=se}Reflect.construct(s,[],ye)}else{try{ye.call()}catch(se){te=se}s.call(ye.prototype)}}else{try{throw Error()}catch(se){te=se}(ye=s())&&typeof ye.catch=="function"&&ye.catch(function(){})}}catch(se){if(se&&te&&typeof se.stack=="string")return[se.stack,te.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),w=y[0],D=y[1];if(w&&D){var q=w.split(`
`),Z=D.split(`
`);for(p=u=0;u<q.length&&!q[u].includes("DetermineComponentFrameRoot");)u++;for(;p<Z.length&&!Z[p].includes("DetermineComponentFrameRoot");)p++;if(u===q.length||p===Z.length)for(u=q.length-1,p=Z.length-1;1<=u&&0<=p&&q[u]!==Z[p];)p--;for(;1<=u&&0<=p;u--,p--)if(q[u]!==Z[p]){if(u!==1||p!==1)do if(u--,p--,0>p||q[u]!==Z[p]){var ue=`
`+q[u].replace(" at new "," at ");return s.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",s.displayName)),ue}while(1<=u&&0<=p);break}}}finally{Ie=!1,Error.prepareStackTrace=o}return(o=s?s.displayName||s.name:"")?pe(o):""}function le(s,i){switch(s.tag){case 26:case 27:case 5:return pe(s.type);case 16:return pe("Lazy");case 13:return s.child!==i&&i!==null?pe("Suspense Fallback"):pe("Suspense");case 19:return pe("SuspenseList");case 0:case 15:return Q(s.type,!1);case 11:return Q(s.type.render,!1);case 1:return Q(s.type,!0);case 31:return pe("Activity");default:return""}}function ke(s){try{var i="",o=null;do i+=le(s,o),o=s,s=s.return;while(s);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var ie=Object.prototype.hasOwnProperty,ge=t.unstable_scheduleCallback,be=t.unstable_cancelCallback,Me=t.unstable_shouldYield,nt=t.unstable_requestPaint,rt=t.unstable_now,Rn=t.unstable_getCurrentPriorityLevel,Ln=t.unstable_ImmediatePriority,hn=t.unstable_UserBlockingPriority,Kn=t.unstable_NormalPriority,Js=t.unstable_LowPriority,Xt=t.unstable_IdlePriority,cr=t.log,Wt=t.unstable_setDisableYieldValue,Ft=null,Jt=null;function Qn(s){if(typeof cr=="function"&&Wt(s),Jt&&typeof Jt.setStrictMode=="function")try{Jt.setStrictMode(Ft,s)}catch{}}var zt=Math.clz32?Math.clz32:Go,ms=Math.log,Zs=Math.LN2;function Go(s){return s>>>=0,s===0?32:31-(ms(s)/Zs|0)|0}var Te=256,Ve=262144,Ue=4194304;function _t(s){var i=s&42;if(i!==0)return i;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function fn(s,i,o){var u=s.pendingLanes;if(u===0)return 0;var p=0,y=s.suspendedLanes,w=s.pingedLanes;s=s.warmLanes;var D=u&134217727;return D!==0?(u=D&~y,u!==0?p=_t(u):(w&=D,w!==0?p=_t(w):o||(o=D&~s,o!==0&&(p=_t(o))))):(D=u&~y,D!==0?p=_t(D):w!==0?p=_t(w):o||(o=u&~s,o!==0&&(p=_t(o)))),p===0?0:i!==0&&i!==p&&(i&y)===0&&(y=p&-p,o=i&-i,y>=o||y===32&&(o&4194048)!==0)?i:p}function Yt(s,i){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&i)===0}function Zt(s,i){switch(s){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pi(){var s=Ue;return Ue<<=1,(Ue&62914560)===0&&(Ue=4194304),s}function ps(s){for(var i=[],o=0;31>o;o++)i.push(s);return i}function Fa(s,i){s.pendingLanes|=i,i!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function vp(s,i,o,u,p,y){var w=s.pendingLanes;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=o,s.entangledLanes&=o,s.errorRecoveryDisabledLanes&=o,s.shellSuspendCounter=0;var D=s.entanglements,q=s.expirationTimes,Z=s.hiddenUpdates;for(o=w&~o;0<o;){var ue=31-zt(o),ye=1<<ue;D[ue]=0,q[ue]=-1;var te=Z[ue];if(te!==null)for(Z[ue]=null,ue=0;ue<te.length;ue++){var se=te[ue];se!==null&&(se.lane&=-536870913)}o&=~ye}u!==0&&Ha(s,u,0),y!==0&&p===0&&s.tag!==0&&(s.suspendedLanes|=y&~(w&~i))}function Ha(s,i,o){s.pendingLanes|=i,s.suspendedLanes&=~i;var u=31-zt(i);s.entangledLanes|=i,s.entanglements[u]=s.entanglements[u]|1073741824|o&261930}function Cc(s,i){var o=s.entangledLanes|=i;for(s=s.entanglements;o;){var u=31-zt(o),p=1<<u;p&i|s[u]&i&&(s[u]|=i),o&=~p}}function kc(s,i){var o=i&-i;return o=(o&42)!==0?1:$a(o),(o&(s.suspendedLanes|i))!==0?0:o}function $a(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ei(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Md(){var s=ne.p;return s!==0?s:(s=window.event,s===void 0?32:e_(s.type))}function Xr(s,i){var o=ne.p;try{return ne.p=s,i()}finally{ne.p=o}}var Wr=Math.random().toString(36).slice(2),mn="__reactFiber$"+Wr,jn="__reactProps$"+Wr,gs="__reactContainer$"+Wr,Yo="__reactEvents$"+Wr,bp="__reactListeners$"+Wr,Pd="__reactHandles$"+Wr,Od="__reactResources$"+Wr,ys="__reactMarker$"+Wr;function Ko(s){delete s[mn],delete s[jn],delete s[Yo],delete s[bp],delete s[Pd]}function vs(s){var i=s[mn];if(i)return i;for(var o=s.parentNode;o;){if(i=o[gs]||o[mn]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(s=V2(s);s!==null;){if(o=s[mn])return o;s=V2(s)}return i}s=o,o=s.parentNode}return null}function Or(s){if(s=s[mn]||s[gs]){var i=s.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return s}return null}function wr(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s.stateNode;throw Error(r(33))}function bs(s){var i=s[Od];return i||(i=s[Od]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function pn(s){s[ys]=!0}var Ac=new Set,Nc={};function xs(s,i){_s(s,i),_s(s+"Capture",i)}function _s(s,i){for(Nc[s]=i,s=0;s<i.length;s++)Ac.add(i[s])}var Rc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jc={},Ic={};function Ld(s){return ie.call(Ic,s)?!0:ie.call(jc,s)?!1:Rc.test(s)?Ic[s]=!0:(jc[s]=!0,!1)}function Qo(s,i,o){if(Ld(i))if(o===null)s.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":s.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(i);return}}s.setAttribute(i,""+o)}}function Er(s,i,o){if(o===null)s.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(i);return}s.setAttribute(i,""+o)}}function gn(s,i,o,u){if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttributeNS(i,o,""+u)}}function In(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Oi(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Dc(s,i,o){var u=Object.getOwnPropertyDescriptor(s.constructor.prototype,i);if(!s.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,y=u.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return p.call(this)},set:function(w){o=""+w,y.call(this,w)}}),Object.defineProperty(s,i,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(w){o=""+w},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function jt(s){if(!s._valueTracker){var i=Oi(s)?"checked":"value";s._valueTracker=Dc(s,i,""+s[i])}}function qa(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return s&&(u=Oi(s)?s.checked?"true":"false":s.value),s=u,s!==o?(i.setValue(s),!0):!1}function ws(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Ga=/[\n"\\]/g;function ur(s){return s.replace(Ga,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Xo(s,i,o,u,p,y,w,D){s.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?s.type=w:s.removeAttribute("type"),i!=null?w==="number"?(i===0&&s.value===""||s.value!=i)&&(s.value=""+In(i)):s.value!==""+In(i)&&(s.value=""+In(i)):w!=="submit"&&w!=="reset"||s.removeAttribute("value"),i!=null?Mc(s,w,In(i)):o!=null?Mc(s,w,In(o)):u!=null&&s.removeAttribute("value"),p==null&&y!=null&&(s.defaultChecked=!!y),p!=null&&(s.checked=p&&typeof p!="function"&&typeof p!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?s.name=""+In(D):s.removeAttribute("name")}function Vd(s,i,o,u,p,y,w,D){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(s.type=y),i!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||i!=null)){jt(s);return}o=o!=null?""+In(o):"",i=i!=null?""+In(i):o,D||i===s.value||(s.value=i),s.defaultValue=i}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=D?s.checked:!!u,s.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.name=w),jt(s)}function Mc(s,i,o){i==="number"&&ws(s.ownerDocument)===s||s.defaultValue===""+o||(s.defaultValue=""+o)}function Li(s,i,o,u){if(s=s.options,i){i={};for(var p=0;p<o.length;p++)i["$"+o[p]]=!0;for(o=0;o<s.length;o++)p=i.hasOwnProperty("$"+s[o].value),s[o].selected!==p&&(s[o].selected=p),p&&u&&(s[o].defaultSelected=!0)}else{for(o=""+In(o),i=null,p=0;p<s.length;p++){if(s[p].value===o){s[p].selected=!0,u&&(s[p].defaultSelected=!0);return}i!==null||s[p].disabled||(i=s[p])}i!==null&&(i.selected=!0)}}function Ud(s,i,o){if(i!=null&&(i=""+In(i),i!==s.value&&(s.value=i),o==null)){s.defaultValue!==i&&(s.defaultValue=i);return}s.defaultValue=o!=null?""+In(o):""}function Vi(s,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(r(92));if(Ee(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=In(i),s.defaultValue=o,u=s.textContent,u===o&&u!==""&&u!==null&&(s.value=u),jt(s)}function dr(s,i){if(i){var o=s.firstChild;if(o&&o===s.lastChild&&o.nodeType===3){o.nodeValue=i;return}}s.textContent=i}var zd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pc(s,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?s.setProperty(i,""):i==="float"?s.cssFloat="":s[i]="":u?s.setProperty(i,o):typeof o!="number"||o===0||zd.has(i)?i==="float"?s.cssFloat=o:s[i]=(""+o).trim():s[i]=o+"px"}function Oc(s,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(s=s.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var p in i)u=i[p],i.hasOwnProperty(p)&&o[p]!==u&&Pc(s,p,u)}else for(var y in i)i.hasOwnProperty(y)&&Pc(s,y,i[y])}function Wo(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ui=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jo(s){return Ui.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Jr(){}var Lc=null;function Lr(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var zi=null,Es=null;function Ya(s){var i=Or(s);if(i&&(s=i.stateNode)){var o=s[jn]||null;e:switch(s=i.stateNode,i.type){case"input":if(Xo(s,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=s;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+ur(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==s&&u.form===s.form){var p=u[jn]||null;if(!p)throw Error(r(90));Xo(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===s.form&&qa(u)}break e;case"textarea":Ud(s,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Li(s,!!o.multiple,i,!1)}}}var Zo=!1;function Bi(s,i,o){if(Zo)return s(i,o);Zo=!0;try{var u=s(i);return u}finally{if(Zo=!1,(zi!==null||Es!==null)&&(Mh(),zi&&(i=zi,s=Es,Es=zi=null,Ya(i),s)))for(i=0;i<s.length;i++)Ya(s[i])}}function Zr(s,i){var o=s.stateNode;if(o===null)return null;var u=o[jn]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break e;default:s=!1}if(s)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var Vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ka=!1;if(Vr)try{var Mt={};Object.defineProperty(Mt,"passive",{get:function(){Ka=!0}}),window.addEventListener("test",Mt,Mt),window.removeEventListener("test",Mt,Mt)}catch{Ka=!1}var Ss=null,Vc=null,Qa=null;function Uc(){if(Qa)return Qa;var s,i=Vc,o=i.length,u,p="value"in Ss?Ss.value:Ss.textContent,y=p.length;for(s=0;s<o&&i[s]===p[s];s++);var w=o-s;for(u=1;u<=w&&i[o-u]===p[y-u];u++);return Qa=p.slice(s,1<u?1-u:void 0)}function Xa(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function ti(){return!0}function es(){return!1}function Vn(s){function i(o,u,p,y,w){this._reactName=o,this._targetInst=p,this.type=u,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var D in s)s.hasOwnProperty(D)&&(o=s[D],this[D]=o?o(y):y[D]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?ti:es,this.isPropagationStopped=es,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ti)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ti)},persist:function(){},isPersistent:ti}),i}var ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ts=Vn(ni),Fi=b({},ni,{view:0,detail:0}),zc=Vn(Fi),Hi,el,Cs,tl=b({},Fi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$i,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Cs&&(Cs&&s.type==="mousemove"?(Hi=s.screenX-Cs.screenX,el=s.screenY-Cs.screenY):el=Hi=0,Cs=s),Hi)},movementY:function(s){return"movementY"in s?s.movementY:el}}),Bc=Vn(tl),Wa=b({},tl,{dataTransfer:0}),Fd=Vn(Wa),Hd=b({},Fi,{relatedTarget:0}),Ja=Vn(Hd),Fc=b({},ni,{animationName:0,elapsedTime:0,pseudoElement:0}),$d=Vn(Fc),nl=b({},ni,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),qd=Vn(nl),Gd=b({},ni,{data:0}),ks=Vn(Gd),Yd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xd(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=Qd[s])?!!i[s]:!1}function $i(){return Xd}var sr=b({},Fi,{key:function(s){if(s.key){var i=Yd[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=Xa(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Kd[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$i,charCode:function(s){return s.type==="keypress"?Xa(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Xa(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Wd=Vn(sr),Jd=b({},tl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ri=Vn(Jd),f=b({},Fi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$i}),x=Vn(f),T=b({},ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),L=Vn(T),W=b({},tl,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),re=Vn(W),Ne=b({},ni,{newState:0,oldState:0}),ot=Vn(Ne),sn=[9,13,27,32],kt=Vr&&"CompositionEvent"in window,Kt=null;Vr&&"documentMode"in document&&(Kt=document.documentMode);var Ur=Vr&&"TextEvent"in window&&!Kt,As=Vr&&(!kt||Kt&&8<Kt&&11>=Kt),ts=" ",ns=!1;function Za(s,i){switch(s){case"keyup":return sn.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rl(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var sl=!1;function mA(s,i){switch(s){case"compositionend":return rl(i);case"keypress":return i.which!==32?null:(ns=!0,ts);case"textInput":return s=i.data,s===ts&&ns?null:s;default:return null}}function pA(s,i){if(sl)return s==="compositionend"||!kt&&Za(s,i)?(s=Uc(),Qa=Vc=Ss=null,sl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return As&&i.locale!=="ko"?null:i.data;default:return null}}var gA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bb(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!gA[s.type]:i==="textarea"}function Fb(s,i,o,u){zi?Es?Es.push(u):Es=[u]:zi=u,i=Bh(i,"onChange"),0<i.length&&(o=new Ts("onChange","change",null,o,u),s.push({event:o,listeners:i}))}var Hc=null,$c=null;function yA(s){S2(s,0)}function Zd(s){var i=wr(s);if(qa(i))return s}function Hb(s,i){if(s==="change")return i}var $b=!1;if(Vr){var xp;if(Vr){var _p="oninput"in document;if(!_p){var qb=document.createElement("div");qb.setAttribute("oninput","return;"),_p=typeof qb.oninput=="function"}xp=_p}else xp=!1;$b=xp&&(!document.documentMode||9<document.documentMode)}function Gb(){Hc&&(Hc.detachEvent("onpropertychange",Yb),$c=Hc=null)}function Yb(s){if(s.propertyName==="value"&&Zd($c)){var i=[];Fb(i,$c,s,Lr(s)),Bi(yA,i)}}function vA(s,i,o){s==="focusin"?(Gb(),Hc=i,$c=o,Hc.attachEvent("onpropertychange",Yb)):s==="focusout"&&Gb()}function bA(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Zd($c)}function xA(s,i){if(s==="click")return Zd(i)}function _A(s,i){if(s==="input"||s==="change")return Zd(i)}function wA(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var Sr=typeof Object.is=="function"?Object.is:wA;function qc(s,i){if(Sr(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var o=Object.keys(s),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var p=o[u];if(!ie.call(i,p)||!Sr(s[p],i[p]))return!1}return!0}function Kb(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Qb(s,i){var o=Kb(s);s=0;for(var u;o;){if(o.nodeType===3){if(u=s+o.textContent.length,s<=i&&u>=i)return{node:o,offset:i-s};s=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Kb(o)}}function Xb(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?Xb(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function Wb(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var i=ws(s.document);i instanceof s.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)s=i.contentWindow;else break;i=ws(s.document)}return i}function wp(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}var EA=Vr&&"documentMode"in document&&11>=document.documentMode,il=null,Ep=null,Gc=null,Sp=!1;function Jb(s,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Sp||il==null||il!==ws(u)||(u=il,"selectionStart"in u&&wp(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Gc&&qc(Gc,u)||(Gc=u,u=Bh(Ep,"onSelect"),0<u.length&&(i=new Ts("onSelect","select",null,i,o),s.push({event:i,listeners:u}),i.target=il)))}function eo(s,i){var o={};return o[s.toLowerCase()]=i.toLowerCase(),o["Webkit"+s]="webkit"+i,o["Moz"+s]="moz"+i,o}var al={animationend:eo("Animation","AnimationEnd"),animationiteration:eo("Animation","AnimationIteration"),animationstart:eo("Animation","AnimationStart"),transitionrun:eo("Transition","TransitionRun"),transitionstart:eo("Transition","TransitionStart"),transitioncancel:eo("Transition","TransitionCancel"),transitionend:eo("Transition","TransitionEnd")},Tp={},Zb={};Vr&&(Zb=document.createElement("div").style,"AnimationEvent"in window||(delete al.animationend.animation,delete al.animationiteration.animation,delete al.animationstart.animation),"TransitionEvent"in window||delete al.transitionend.transition);function to(s){if(Tp[s])return Tp[s];if(!al[s])return s;var i=al[s],o;for(o in i)if(i.hasOwnProperty(o)&&o in Zb)return Tp[s]=i[o];return s}var e1=to("animationend"),t1=to("animationiteration"),n1=to("animationstart"),SA=to("transitionrun"),TA=to("transitionstart"),CA=to("transitioncancel"),r1=to("transitionend"),s1=new Map,Cp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cp.push("scrollEnd");function rs(s,i){s1.set(s,i),xs(i,[s])}var eh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},zr=[],ol=0,kp=0;function th(){for(var s=ol,i=kp=ol=0;i<s;){var o=zr[i];zr[i++]=null;var u=zr[i];zr[i++]=null;var p=zr[i];zr[i++]=null;var y=zr[i];if(zr[i++]=null,u!==null&&p!==null){var w=u.pending;w===null?p.next=p:(p.next=w.next,w.next=p),u.pending=p}y!==0&&i1(o,p,y)}}function nh(s,i,o,u){zr[ol++]=s,zr[ol++]=i,zr[ol++]=o,zr[ol++]=u,kp|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function Ap(s,i,o,u){return nh(s,i,o,u),rh(s)}function no(s,i){return nh(s,null,null,i),rh(s)}function i1(s,i,o){s.lanes|=o;var u=s.alternate;u!==null&&(u.lanes|=o);for(var p=!1,y=s.return;y!==null;)y.childLanes|=o,u=y.alternate,u!==null&&(u.childLanes|=o),y.tag===22&&(s=y.stateNode,s===null||s._visibility&1||(p=!0)),s=y,y=y.return;return s.tag===3?(y=s.stateNode,p&&i!==null&&(p=31-zt(o),s=y.hiddenUpdates,u=s[p],u===null?s[p]=[i]:u.push(i),i.lane=o|536870912),y):null}function rh(s){if(50<mu)throw mu=0,Lg=null,Error(r(185));for(var i=s.return;i!==null;)s=i,i=s.return;return s.tag===3?s.stateNode:null}var ll={};function kA(s,i,o,u){this.tag=s,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tr(s,i,o,u){return new kA(s,i,o,u)}function Np(s){return s=s.prototype,!(!s||!s.isReactComponent)}function si(s,i){var o=s.alternate;return o===null?(o=Tr(s.tag,i,s.key,s.mode),o.elementType=s.elementType,o.type=s.type,o.stateNode=s.stateNode,o.alternate=s,s.alternate=o):(o.pendingProps=i,o.type=s.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=s.flags&65011712,o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,i=s.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=s.sibling,o.index=s.index,o.ref=s.ref,o.refCleanup=s.refCleanup,o}function a1(s,i){s.flags&=65011714;var o=s.alternate;return o===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,i=o.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s}function sh(s,i,o,u,p,y){var w=0;if(u=s,typeof s=="function")Np(s)&&(w=1);else if(typeof s=="string")w=IN(s,o,de.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case A:return s=Tr(31,o,i,p),s.elementType=A,s.lanes=y,s;case j:return ro(o.children,p,y,i);case k:w=8,p|=24;break;case B:return s=Tr(12,o,i,p|2),s.elementType=B,s.lanes=y,s;case z:return s=Tr(13,o,i,p),s.elementType=z,s.lanes=y,s;case F:return s=Tr(19,o,i,p),s.elementType=F,s.lanes=y,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case R:w=10;break e;case $:w=9;break e;case V:w=11;break e;case S:w=14;break e;case E:w=16,u=null;break e}w=29,o=Error(r(130,s===null?"null":typeof s,"")),u=null}return i=Tr(w,o,i,p),i.elementType=s,i.type=u,i.lanes=y,i}function ro(s,i,o,u){return s=Tr(7,s,u,i),s.lanes=o,s}function Rp(s,i,o){return s=Tr(6,s,null,i),s.lanes=o,s}function o1(s){var i=Tr(18,null,null,0);return i.stateNode=s,i}function jp(s,i,o){return i=Tr(4,s.children!==null?s.children:[],s.key,i),i.lanes=o,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}var l1=new WeakMap;function Br(s,i){if(typeof s=="object"&&s!==null){var o=l1.get(s);return o!==void 0?o:(i={value:s,source:i,stack:ke(i)},l1.set(s,i),i)}return{value:s,source:i,stack:ke(i)}}var cl=[],ul=0,ih=null,Yc=0,Fr=[],Hr=0,qi=null,Ns=1,Rs="";function ii(s,i){cl[ul++]=Yc,cl[ul++]=ih,ih=s,Yc=i}function c1(s,i,o){Fr[Hr++]=Ns,Fr[Hr++]=Rs,Fr[Hr++]=qi,qi=s;var u=Ns;s=Rs;var p=32-zt(u)-1;u&=~(1<<p),o+=1;var y=32-zt(i)+p;if(30<y){var w=p-p%5;y=(u&(1<<w)-1).toString(32),u>>=w,p-=w,Ns=1<<32-zt(i)+p|o<<p|u,Rs=y+s}else Ns=1<<y|o<<p|u,Rs=s}function Ip(s){s.return!==null&&(ii(s,1),c1(s,1,0))}function Dp(s){for(;s===ih;)ih=cl[--ul],cl[ul]=null,Yc=cl[--ul],cl[ul]=null;for(;s===qi;)qi=Fr[--Hr],Fr[Hr]=null,Rs=Fr[--Hr],Fr[Hr]=null,Ns=Fr[--Hr],Fr[Hr]=null}function u1(s,i){Fr[Hr++]=Ns,Fr[Hr++]=Rs,Fr[Hr++]=qi,Ns=i.id,Rs=i.overflow,qi=s}var Un=null,Ht=null,wt=!1,Gi=null,$r=!1,Mp=Error(r(519));function Yi(s){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Kc(Br(i,s)),Mp}function d1(s){var i=s.stateNode,o=s.type,u=s.memoizedProps;switch(i[mn]=s,i[jn]=u,o){case"dialog":pt("cancel",i),pt("close",i);break;case"iframe":case"object":case"embed":pt("load",i);break;case"video":case"audio":for(o=0;o<gu.length;o++)pt(gu[o],i);break;case"source":pt("error",i);break;case"img":case"image":case"link":pt("error",i),pt("load",i);break;case"details":pt("toggle",i);break;case"input":pt("invalid",i),Vd(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":pt("invalid",i);break;case"textarea":pt("invalid",i),Vi(i,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||A2(i.textContent,o)?(u.popover!=null&&(pt("beforetoggle",i),pt("toggle",i)),u.onScroll!=null&&pt("scroll",i),u.onScrollEnd!=null&&pt("scrollend",i),u.onClick!=null&&(i.onclick=Jr),i=!0):i=!1,i||Yi(s,!0)}function h1(s){for(Un=s.return;Un;)switch(Un.tag){case 5:case 31:case 13:$r=!1;return;case 27:case 3:$r=!0;return;default:Un=Un.return}}function dl(s){if(s!==Un)return!1;if(!wt)return h1(s),wt=!0,!1;var i=s.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=s.type,o=!(o!=="form"&&o!=="button")||Jg(s.type,s.memoizedProps)),o=!o),o&&Ht&&Yi(s),h1(s),i===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Ht=L2(s)}else if(i===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Ht=L2(s)}else i===27?(i=Ht,oa(s.type)?(s=r0,r0=null,Ht=s):Ht=i):Ht=Un?Gr(s.stateNode.nextSibling):null;return!0}function so(){Ht=Un=null,wt=!1}function Pp(){var s=Gi;return s!==null&&(pr===null?pr=s:pr.push.apply(pr,s),Gi=null),s}function Kc(s){Gi===null?Gi=[s]:Gi.push(s)}var Op=H(null),io=null,ai=null;function Ki(s,i,o){ae(Op,i._currentValue),i._currentValue=o}function oi(s){s._currentValue=Op.current,ee(Op)}function Lp(s,i,o){for(;s!==null;){var u=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),s===o)break;s=s.return}}function Vp(s,i,o,u){var p=s.child;for(p!==null&&(p.return=s);p!==null;){var y=p.dependencies;if(y!==null){var w=p.child;y=y.firstContext;e:for(;y!==null;){var D=y;y=p;for(var q=0;q<i.length;q++)if(D.context===i[q]){y.lanes|=o,D=y.alternate,D!==null&&(D.lanes|=o),Lp(y.return,o,s),u||(w=null);break e}y=D.next}}else if(p.tag===18){if(w=p.return,w===null)throw Error(r(341));w.lanes|=o,y=w.alternate,y!==null&&(y.lanes|=o),Lp(w,o,s),w=null}else w=p.child;if(w!==null)w.return=p;else for(w=p;w!==null;){if(w===s){w=null;break}if(p=w.sibling,p!==null){p.return=w.return,w=p;break}w=w.return}p=w}}function hl(s,i,o,u){s=null;for(var p=i,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var w=p.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var D=p.type;Sr(p.pendingProps.value,w.value)||(s!==null?s.push(D):s=[D])}}else if(p===Ce.current){if(w=p.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(s!==null?s.push(_u):s=[_u])}p=p.return}s!==null&&Vp(i,s,o,u),i.flags|=262144}function ah(s){for(s=s.firstContext;s!==null;){if(!Sr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ao(s){io=s,ai=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function zn(s){return f1(io,s)}function oh(s,i){return io===null&&ao(s),f1(s,i)}function f1(s,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},ai===null){if(s===null)throw Error(r(308));ai=i,s.dependencies={lanes:0,firstContext:i},s.flags|=524288}else ai=ai.next=i;return o}var AA=typeof AbortController<"u"?AbortController:function(){var s=[],i=this.signal={aborted:!1,addEventListener:function(o,u){s.push(u)}};this.abort=function(){i.aborted=!0,s.forEach(function(o){return o()})}},NA=t.unstable_scheduleCallback,RA=t.unstable_NormalPriority,yn={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Up(){return{controller:new AA,data:new Map,refCount:0}}function Qc(s){s.refCount--,s.refCount===0&&NA(RA,function(){s.controller.abort()})}var Xc=null,zp=0,fl=0,ml=null;function jA(s,i){if(Xc===null){var o=Xc=[];zp=0,fl=Hg(),ml={status:"pending",value:void 0,then:function(u){o.push(u)}}}return zp++,i.then(m1,m1),i}function m1(){if(--zp===0&&Xc!==null){ml!==null&&(ml.status="fulfilled");var s=Xc;Xc=null,fl=0,ml=null;for(var i=0;i<s.length;i++)(0,s[i])()}}function IA(s,i){var o=[],u={status:"pending",value:null,reason:null,then:function(p){o.push(p)}};return s.then(function(){u.status="fulfilled",u.value=i;for(var p=0;p<o.length;p++)(0,o[p])(i)},function(p){for(u.status="rejected",u.reason=p,p=0;p<o.length;p++)(0,o[p])(void 0)}),u}var p1=G.S;G.S=function(s,i){Jx=rt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&jA(s,i),p1!==null&&p1(s,i)};var oo=H(null);function Bp(){var s=oo.current;return s!==null?s:Vt.pooledCache}function lh(s,i){i===null?ae(oo,oo.current):ae(oo,i.pool)}function g1(){var s=Bp();return s===null?null:{parent:yn._currentValue,pool:s}}var pl=Error(r(460)),Fp=Error(r(474)),ch=Error(r(542)),uh={then:function(){}};function y1(s){return s=s.status,s==="fulfilled"||s==="rejected"}function v1(s,i,o){switch(o=s[o],o===void 0?s.push(i):o!==i&&(i.then(Jr,Jr),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,x1(s),s;default:if(typeof i.status=="string")i.then(Jr,Jr);else{if(s=Vt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=i,s.status="pending",s.then(function(u){if(i.status==="pending"){var p=i;p.status="fulfilled",p.value=u}},function(u){if(i.status==="pending"){var p=i;p.status="rejected",p.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,x1(s),s}throw co=i,pl}}function lo(s){try{var i=s._init;return i(s._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(co=o,pl):o}}var co=null;function b1(){if(co===null)throw Error(r(459));var s=co;return co=null,s}function x1(s){if(s===pl||s===ch)throw Error(r(483))}var gl=null,Wc=0;function dh(s){var i=Wc;return Wc+=1,gl===null&&(gl=[]),v1(gl,s,i)}function Jc(s,i){i=i.props.ref,s.ref=i!==void 0?i:null}function hh(s,i){throw i.$$typeof===_?Error(r(525)):(s=Object.prototype.toString.call(i),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s)))}function _1(s){function i(K,Y){if(s){var J=K.deletions;J===null?(K.deletions=[Y],K.flags|=16):J.push(Y)}}function o(K,Y){if(!s)return null;for(;Y!==null;)i(K,Y),Y=Y.sibling;return null}function u(K){for(var Y=new Map;K!==null;)K.key!==null?Y.set(K.key,K):Y.set(K.index,K),K=K.sibling;return Y}function p(K,Y){return K=si(K,Y),K.index=0,K.sibling=null,K}function y(K,Y,J){return K.index=J,s?(J=K.alternate,J!==null?(J=J.index,J<Y?(K.flags|=67108866,Y):J):(K.flags|=67108866,Y)):(K.flags|=1048576,Y)}function w(K){return s&&K.alternate===null&&(K.flags|=67108866),K}function D(K,Y,J,me){return Y===null||Y.tag!==6?(Y=Rp(J,K.mode,me),Y.return=K,Y):(Y=p(Y,J),Y.return=K,Y)}function q(K,Y,J,me){var Qe=J.type;return Qe===j?ue(K,Y,J.props.children,me,J.key):Y!==null&&(Y.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===E&&lo(Qe)===Y.type)?(Y=p(Y,J.props),Jc(Y,J),Y.return=K,Y):(Y=sh(J.type,J.key,J.props,null,K.mode,me),Jc(Y,J),Y.return=K,Y)}function Z(K,Y,J,me){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==J.containerInfo||Y.stateNode.implementation!==J.implementation?(Y=jp(J,K.mode,me),Y.return=K,Y):(Y=p(Y,J.children||[]),Y.return=K,Y)}function ue(K,Y,J,me,Qe){return Y===null||Y.tag!==7?(Y=ro(J,K.mode,me,Qe),Y.return=K,Y):(Y=p(Y,J),Y.return=K,Y)}function ye(K,Y,J){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=Rp(""+Y,K.mode,J),Y.return=K,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case C:return J=sh(Y.type,Y.key,Y.props,null,K.mode,J),Jc(J,Y),J.return=K,J;case N:return Y=jp(Y,K.mode,J),Y.return=K,Y;case E:return Y=lo(Y),ye(K,Y,J)}if(Ee(Y)||U(Y))return Y=ro(Y,K.mode,J,null),Y.return=K,Y;if(typeof Y.then=="function")return ye(K,dh(Y),J);if(Y.$$typeof===R)return ye(K,oh(K,Y),J);hh(K,Y)}return null}function te(K,Y,J,me){var Qe=Y!==null?Y.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Qe!==null?null:D(K,Y,""+J,me);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case C:return J.key===Qe?q(K,Y,J,me):null;case N:return J.key===Qe?Z(K,Y,J,me):null;case E:return J=lo(J),te(K,Y,J,me)}if(Ee(J)||U(J))return Qe!==null?null:ue(K,Y,J,me,null);if(typeof J.then=="function")return te(K,Y,dh(J),me);if(J.$$typeof===R)return te(K,Y,oh(K,J),me);hh(K,J)}return null}function se(K,Y,J,me,Qe){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return K=K.get(J)||null,D(Y,K,""+me,Qe);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case C:return K=K.get(me.key===null?J:me.key)||null,q(Y,K,me,Qe);case N:return K=K.get(me.key===null?J:me.key)||null,Z(Y,K,me,Qe);case E:return me=lo(me),se(K,Y,J,me,Qe)}if(Ee(me)||U(me))return K=K.get(J)||null,ue(Y,K,me,Qe,null);if(typeof me.then=="function")return se(K,Y,J,dh(me),Qe);if(me.$$typeof===R)return se(K,Y,J,oh(Y,me),Qe);hh(Y,me)}return null}function ze(K,Y,J,me){for(var Qe=null,St=null,Ye=Y,ct=Y=0,yt=null;Ye!==null&&ct<J.length;ct++){Ye.index>ct?(yt=Ye,Ye=null):yt=Ye.sibling;var Tt=te(K,Ye,J[ct],me);if(Tt===null){Ye===null&&(Ye=yt);break}s&&Ye&&Tt.alternate===null&&i(K,Ye),Y=y(Tt,Y,ct),St===null?Qe=Tt:St.sibling=Tt,St=Tt,Ye=yt}if(ct===J.length)return o(K,Ye),wt&&ii(K,ct),Qe;if(Ye===null){for(;ct<J.length;ct++)Ye=ye(K,J[ct],me),Ye!==null&&(Y=y(Ye,Y,ct),St===null?Qe=Ye:St.sibling=Ye,St=Ye);return wt&&ii(K,ct),Qe}for(Ye=u(Ye);ct<J.length;ct++)yt=se(Ye,K,ct,J[ct],me),yt!==null&&(s&&yt.alternate!==null&&Ye.delete(yt.key===null?ct:yt.key),Y=y(yt,Y,ct),St===null?Qe=yt:St.sibling=yt,St=yt);return s&&Ye.forEach(function(ha){return i(K,ha)}),wt&&ii(K,ct),Qe}function We(K,Y,J,me){if(J==null)throw Error(r(151));for(var Qe=null,St=null,Ye=Y,ct=Y=0,yt=null,Tt=J.next();Ye!==null&&!Tt.done;ct++,Tt=J.next()){Ye.index>ct?(yt=Ye,Ye=null):yt=Ye.sibling;var ha=te(K,Ye,Tt.value,me);if(ha===null){Ye===null&&(Ye=yt);break}s&&Ye&&ha.alternate===null&&i(K,Ye),Y=y(ha,Y,ct),St===null?Qe=ha:St.sibling=ha,St=ha,Ye=yt}if(Tt.done)return o(K,Ye),wt&&ii(K,ct),Qe;if(Ye===null){for(;!Tt.done;ct++,Tt=J.next())Tt=ye(K,Tt.value,me),Tt!==null&&(Y=y(Tt,Y,ct),St===null?Qe=Tt:St.sibling=Tt,St=Tt);return wt&&ii(K,ct),Qe}for(Ye=u(Ye);!Tt.done;ct++,Tt=J.next())Tt=se(Ye,K,ct,Tt.value,me),Tt!==null&&(s&&Tt.alternate!==null&&Ye.delete(Tt.key===null?ct:Tt.key),Y=y(Tt,Y,ct),St===null?Qe=Tt:St.sibling=Tt,St=Tt);return s&&Ye.forEach(function(HN){return i(K,HN)}),wt&&ii(K,ct),Qe}function Lt(K,Y,J,me){if(typeof J=="object"&&J!==null&&J.type===j&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case C:e:{for(var Qe=J.key;Y!==null;){if(Y.key===Qe){if(Qe=J.type,Qe===j){if(Y.tag===7){o(K,Y.sibling),me=p(Y,J.props.children),me.return=K,K=me;break e}}else if(Y.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===E&&lo(Qe)===Y.type){o(K,Y.sibling),me=p(Y,J.props),Jc(me,J),me.return=K,K=me;break e}o(K,Y);break}else i(K,Y);Y=Y.sibling}J.type===j?(me=ro(J.props.children,K.mode,me,J.key),me.return=K,K=me):(me=sh(J.type,J.key,J.props,null,K.mode,me),Jc(me,J),me.return=K,K=me)}return w(K);case N:e:{for(Qe=J.key;Y!==null;){if(Y.key===Qe)if(Y.tag===4&&Y.stateNode.containerInfo===J.containerInfo&&Y.stateNode.implementation===J.implementation){o(K,Y.sibling),me=p(Y,J.children||[]),me.return=K,K=me;break e}else{o(K,Y);break}else i(K,Y);Y=Y.sibling}me=jp(J,K.mode,me),me.return=K,K=me}return w(K);case E:return J=lo(J),Lt(K,Y,J,me)}if(Ee(J))return ze(K,Y,J,me);if(U(J)){if(Qe=U(J),typeof Qe!="function")throw Error(r(150));return J=Qe.call(J),We(K,Y,J,me)}if(typeof J.then=="function")return Lt(K,Y,dh(J),me);if(J.$$typeof===R)return Lt(K,Y,oh(K,J),me);hh(K,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,Y!==null&&Y.tag===6?(o(K,Y.sibling),me=p(Y,J),me.return=K,K=me):(o(K,Y),me=Rp(J,K.mode,me),me.return=K,K=me),w(K)):o(K,Y)}return function(K,Y,J,me){try{Wc=0;var Qe=Lt(K,Y,J,me);return gl=null,Qe}catch(Ye){if(Ye===pl||Ye===ch)throw Ye;var St=Tr(29,Ye,null,K.mode);return St.lanes=me,St.return=K,St}finally{}}}var uo=_1(!0),w1=_1(!1),Qi=!1;function Hp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $p(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Xi(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Wi(s,i,o){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(At&2)!==0){var p=u.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),u.pending=i,i=rh(s),i1(s,null,o),i}return nh(s,u,i,o),rh(s)}function Zc(s,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=s.pendingLanes,o|=u,i.lanes=o,Cc(s,o)}}function qp(s,i){var o=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var p=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?p=y=w:y=y.next=w,o=o.next}while(o!==null);y===null?p=y=i:y=y.next=i}else p=y=i;o={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},s.updateQueue=o;return}s=o.lastBaseUpdate,s===null?o.firstBaseUpdate=i:s.next=i,o.lastBaseUpdate=i}var Gp=!1;function eu(){if(Gp){var s=ml;if(s!==null)throw s}}function tu(s,i,o,u){Gp=!1;var p=s.updateQueue;Qi=!1;var y=p.firstBaseUpdate,w=p.lastBaseUpdate,D=p.shared.pending;if(D!==null){p.shared.pending=null;var q=D,Z=q.next;q.next=null,w===null?y=Z:w.next=Z,w=q;var ue=s.alternate;ue!==null&&(ue=ue.updateQueue,D=ue.lastBaseUpdate,D!==w&&(D===null?ue.firstBaseUpdate=Z:D.next=Z,ue.lastBaseUpdate=q))}if(y!==null){var ye=p.baseState;w=0,ue=Z=q=null,D=y;do{var te=D.lane&-536870913,se=te!==D.lane;if(se?(gt&te)===te:(u&te)===te){te!==0&&te===fl&&(Gp=!0),ue!==null&&(ue=ue.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var ze=s,We=D;te=i;var Lt=o;switch(We.tag){case 1:if(ze=We.payload,typeof ze=="function"){ye=ze.call(Lt,ye,te);break e}ye=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=We.payload,te=typeof ze=="function"?ze.call(Lt,ye,te):ze,te==null)break e;ye=b({},ye,te);break e;case 2:Qi=!0}}te=D.callback,te!==null&&(s.flags|=64,se&&(s.flags|=8192),se=p.callbacks,se===null?p.callbacks=[te]:se.push(te))}else se={lane:te,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ue===null?(Z=ue=se,q=ye):ue=ue.next=se,w|=te;if(D=D.next,D===null){if(D=p.shared.pending,D===null)break;se=D,D=se.next,se.next=null,p.lastBaseUpdate=se,p.shared.pending=null}}while(!0);ue===null&&(q=ye),p.baseState=q,p.firstBaseUpdate=Z,p.lastBaseUpdate=ue,y===null&&(p.shared.lanes=0),na|=w,s.lanes=w,s.memoizedState=ye}}function E1(s,i){if(typeof s!="function")throw Error(r(191,s));s.call(i)}function S1(s,i){var o=s.callbacks;if(o!==null)for(s.callbacks=null,s=0;s<o.length;s++)E1(o[s],i)}var yl=H(null),fh=H(0);function T1(s,i){s=gi,ae(fh,s),ae(yl,i),gi=s|i.baseLanes}function Yp(){ae(fh,gi),ae(yl,yl.current)}function Kp(){gi=fh.current,ee(yl),ee(fh)}var Cr=H(null),qr=null;function Ji(s){var i=s.alternate;ae(an,an.current&1),ae(Cr,s),qr===null&&(i===null||yl.current!==null||i.memoizedState!==null)&&(qr=s)}function Qp(s){ae(an,an.current),ae(Cr,s),qr===null&&(qr=s)}function C1(s){s.tag===22?(ae(an,an.current),ae(Cr,s),qr===null&&(qr=s)):Zi()}function Zi(){ae(an,an.current),ae(Cr,Cr.current)}function kr(s){ee(Cr),qr===s&&(qr=null),ee(an)}var an=H(0);function mh(s){for(var i=s;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||t0(o)||n0(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var li=0,lt=null,Pt=null,vn=null,ph=!1,vl=!1,ho=!1,gh=0,nu=0,bl=null,DA=0;function tn(){throw Error(r(321))}function Xp(s,i){if(i===null)return!1;for(var o=0;o<i.length&&o<s.length;o++)if(!Sr(s[o],i[o]))return!1;return!0}function Wp(s,i,o,u,p,y){return li=y,lt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,G.H=s===null||s.memoizedState===null?cx:hg,ho=!1,y=o(u,p),ho=!1,vl&&(y=A1(i,o,u,p)),k1(s),y}function k1(s){G.H=iu;var i=Pt!==null&&Pt.next!==null;if(li=0,vn=Pt=lt=null,ph=!1,nu=0,bl=null,i)throw Error(r(300));s===null||bn||(s=s.dependencies,s!==null&&ah(s)&&(bn=!0))}function A1(s,i,o,u){lt=s;var p=0;do{if(vl&&(bl=null),nu=0,vl=!1,25<=p)throw Error(r(301));if(p+=1,vn=Pt=null,s.updateQueue!=null){var y=s.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}G.H=ux,y=i(o,u)}while(vl);return y}function MA(){var s=G.H,i=s.useState()[0];return i=typeof i.then=="function"?ru(i):i,s=s.useState()[0],(Pt!==null?Pt.memoizedState:null)!==s&&(lt.flags|=1024),i}function Jp(){var s=gh!==0;return gh=0,s}function Zp(s,i,o){i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~o}function eg(s){if(ph){for(s=s.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}ph=!1}li=0,vn=Pt=lt=null,vl=!1,nu=gh=0,bl=null}function ir(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vn===null?lt.memoizedState=vn=s:vn=vn.next=s,vn}function on(){if(Pt===null){var s=lt.alternate;s=s!==null?s.memoizedState:null}else s=Pt.next;var i=vn===null?lt.memoizedState:vn.next;if(i!==null)vn=i,Pt=s;else{if(s===null)throw lt.alternate===null?Error(r(467)):Error(r(310));Pt=s,s={memoizedState:Pt.memoizedState,baseState:Pt.baseState,baseQueue:Pt.baseQueue,queue:Pt.queue,next:null},vn===null?lt.memoizedState=vn=s:vn=vn.next=s}return vn}function yh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ru(s){var i=nu;return nu+=1,bl===null&&(bl=[]),s=v1(bl,s,i),i=lt,(vn===null?i.memoizedState:vn.next)===null&&(i=i.alternate,G.H=i===null||i.memoizedState===null?cx:hg),s}function vh(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return ru(s);if(s.$$typeof===R)return zn(s)}throw Error(r(438,String(s)))}function tg(s){var i=null,o=lt.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=lt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(p){return p.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=yh(),lt.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(s),u=0;u<s;u++)o[u]=M;return i.index++,o}function ci(s,i){return typeof i=="function"?i(s):i}function bh(s){var i=on();return ng(i,Pt,s)}function ng(s,i,o){var u=s.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var p=s.baseQueue,y=u.pending;if(y!==null){if(p!==null){var w=p.next;p.next=y.next,y.next=w}i.baseQueue=p=y,u.pending=null}if(y=s.baseState,p===null)s.memoizedState=y;else{i=p.next;var D=w=null,q=null,Z=i,ue=!1;do{var ye=Z.lane&-536870913;if(ye!==Z.lane?(gt&ye)===ye:(li&ye)===ye){var te=Z.revertLane;if(te===0)q!==null&&(q=q.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),ye===fl&&(ue=!0);else if((li&te)===te){Z=Z.next,te===fl&&(ue=!0);continue}else ye={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},q===null?(D=q=ye,w=y):q=q.next=ye,lt.lanes|=te,na|=te;ye=Z.action,ho&&o(y,ye),y=Z.hasEagerState?Z.eagerState:o(y,ye)}else te={lane:ye,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},q===null?(D=q=te,w=y):q=q.next=te,lt.lanes|=ye,na|=ye;Z=Z.next}while(Z!==null&&Z!==i);if(q===null?w=y:q.next=D,!Sr(y,s.memoizedState)&&(bn=!0,ue&&(o=ml,o!==null)))throw o;s.memoizedState=y,s.baseState=w,s.baseQueue=q,u.lastRenderedState=y}return p===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function rg(s){var i=on(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=s;var u=o.dispatch,p=o.pending,y=i.memoizedState;if(p!==null){o.pending=null;var w=p=p.next;do y=s(y,w.action),w=w.next;while(w!==p);Sr(y,i.memoizedState)||(bn=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),o.lastRenderedState=y}return[y,u]}function N1(s,i,o){var u=lt,p=on(),y=wt;if(y){if(o===void 0)throw Error(r(407));o=o()}else o=i();var w=!Sr((Pt||p).memoizedState,o);if(w&&(p.memoizedState=o,bn=!0),p=p.queue,ag(I1.bind(null,u,p,s),[s]),p.getSnapshot!==i||w||vn!==null&&vn.memoizedState.tag&1){if(u.flags|=2048,xl(9,{destroy:void 0},j1.bind(null,u,p,o,i),null),Vt===null)throw Error(r(349));y||(li&127)!==0||R1(u,i,o)}return o}function R1(s,i,o){s.flags|=16384,s={getSnapshot:i,value:o},i=lt.updateQueue,i===null?(i=yh(),lt.updateQueue=i,i.stores=[s]):(o=i.stores,o===null?i.stores=[s]:o.push(s))}function j1(s,i,o,u){i.value=o,i.getSnapshot=u,D1(i)&&M1(s)}function I1(s,i,o){return o(function(){D1(i)&&M1(s)})}function D1(s){var i=s.getSnapshot;s=s.value;try{var o=i();return!Sr(s,o)}catch{return!0}}function M1(s){var i=no(s,2);i!==null&&gr(i,s,2)}function sg(s){var i=ir();if(typeof s=="function"){var o=s;if(s=o(),ho){Qn(!0);try{o()}finally{Qn(!1)}}}return i.memoizedState=i.baseState=s,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:s},i}function P1(s,i,o,u){return s.baseState=o,ng(s,Pt,typeof u=="function"?u:ci)}function PA(s,i,o,u,p){if(wh(s))throw Error(r(485));if(s=i.action,s!==null){var y={payload:p,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){y.listeners.push(w)}};G.T!==null?o(!0):y.isTransition=!1,u(y),o=i.pending,o===null?(y.next=i.pending=y,O1(i,y)):(y.next=o.next,i.pending=o.next=y)}}function O1(s,i){var o=i.action,u=i.payload,p=s.state;if(i.isTransition){var y=G.T,w={};G.T=w;try{var D=o(p,u),q=G.S;q!==null&&q(w,D),L1(s,i,D)}catch(Z){ig(s,i,Z)}finally{y!==null&&w.types!==null&&(y.types=w.types),G.T=y}}else try{y=o(p,u),L1(s,i,y)}catch(Z){ig(s,i,Z)}}function L1(s,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){V1(s,i,u)},function(u){return ig(s,i,u)}):V1(s,i,o)}function V1(s,i,o){i.status="fulfilled",i.value=o,U1(i),s.state=o,i=s.pending,i!==null&&(o=i.next,o===i?s.pending=null:(o=o.next,i.next=o,O1(s,o)))}function ig(s,i,o){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,U1(i),i=i.next;while(i!==u)}s.action=null}function U1(s){s=s.listeners;for(var i=0;i<s.length;i++)(0,s[i])()}function z1(s,i){return i}function B1(s,i){if(wt){var o=Vt.formState;if(o!==null){e:{var u=lt;if(wt){if(Ht){t:{for(var p=Ht,y=$r;p.nodeType!==8;){if(!y){p=null;break t}if(p=Gr(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){Ht=Gr(p.nextSibling),u=p.data==="F!";break e}}Yi(u)}u=!1}u&&(i=o[0])}}return o=ir(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:z1,lastRenderedState:i},o.queue=u,o=ax.bind(null,lt,u),u.dispatch=o,u=sg(!1),y=dg.bind(null,lt,!1,u.queue),u=ir(),p={state:i,dispatch:null,action:s,pending:null},u.queue=p,o=PA.bind(null,lt,p,y,o),p.dispatch=o,u.memoizedState=s,[i,o,!1]}function F1(s){var i=on();return H1(i,Pt,s)}function H1(s,i,o){if(i=ng(s,i,z1)[0],s=bh(ci)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=ru(i)}catch(w){throw w===pl?ch:w}else u=i;i=on();var p=i.queue,y=p.dispatch;return o!==i.memoizedState&&(lt.flags|=2048,xl(9,{destroy:void 0},OA.bind(null,p,o),null)),[u,y,s]}function OA(s,i){s.action=i}function $1(s){var i=on(),o=Pt;if(o!==null)return H1(i,o,s);on(),i=i.memoizedState,o=on();var u=o.queue.dispatch;return o.memoizedState=s,[i,u,!1]}function xl(s,i,o,u){return s={tag:s,create:o,deps:u,inst:i,next:null},i=lt.updateQueue,i===null&&(i=yh(),lt.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=s.next=s:(u=o.next,o.next=s,s.next=u,i.lastEffect=s),s}function q1(){return on().memoizedState}function xh(s,i,o,u){var p=ir();lt.flags|=s,p.memoizedState=xl(1|i,{destroy:void 0},o,u===void 0?null:u)}function _h(s,i,o,u){var p=on();u=u===void 0?null:u;var y=p.memoizedState.inst;Pt!==null&&u!==null&&Xp(u,Pt.memoizedState.deps)?p.memoizedState=xl(i,y,o,u):(lt.flags|=s,p.memoizedState=xl(1|i,y,o,u))}function G1(s,i){xh(8390656,8,s,i)}function ag(s,i){_h(2048,8,s,i)}function LA(s){lt.flags|=4;var i=lt.updateQueue;if(i===null)i=yh(),lt.updateQueue=i,i.events=[s];else{var o=i.events;o===null?i.events=[s]:o.push(s)}}function Y1(s){var i=on().memoizedState;return LA({ref:i,nextImpl:s}),function(){if((At&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function K1(s,i){return _h(4,2,s,i)}function Q1(s,i){return _h(4,4,s,i)}function X1(s,i){if(typeof i=="function"){s=s();var o=i(s);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function W1(s,i,o){o=o!=null?o.concat([s]):null,_h(4,4,X1.bind(null,i,s),o)}function og(){}function J1(s,i){var o=on();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&Xp(i,u[1])?u[0]:(o.memoizedState=[s,i],s)}function Z1(s,i){var o=on();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&Xp(i,u[1]))return u[0];if(u=s(),ho){Qn(!0);try{s()}finally{Qn(!1)}}return o.memoizedState=[u,i],u}function lg(s,i,o){return o===void 0||(li&1073741824)!==0&&(gt&261930)===0?s.memoizedState=i:(s.memoizedState=o,s=e2(),lt.lanes|=s,na|=s,o)}function ex(s,i,o,u){return Sr(o,i)?o:yl.current!==null?(s=lg(s,o,u),Sr(s,i)||(bn=!0),s):(li&42)===0||(li&1073741824)!==0&&(gt&261930)===0?(bn=!0,s.memoizedState=o):(s=e2(),lt.lanes|=s,na|=s,i)}function tx(s,i,o,u,p){var y=ne.p;ne.p=y!==0&&8>y?y:8;var w=G.T,D={};G.T=D,dg(s,!1,i,o);try{var q=p(),Z=G.S;if(Z!==null&&Z(D,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var ue=IA(q,u);su(s,i,ue,Rr(s))}else su(s,i,u,Rr(s))}catch(ye){su(s,i,{then:function(){},status:"rejected",reason:ye},Rr())}finally{ne.p=y,w!==null&&D.types!==null&&(w.types=D.types),G.T=w}}function VA(){}function cg(s,i,o,u){if(s.tag!==5)throw Error(r(476));var p=nx(s).queue;tx(s,p,i,X,o===null?VA:function(){return rx(s),o(u)})}function nx(s){var i=s.memoizedState;if(i!==null)return i;i={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:X},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:o},next:null},s.memoizedState=i,s=s.alternate,s!==null&&(s.memoizedState=i),i}function rx(s){var i=nx(s);i.next===null&&(i=s.alternate.memoizedState),su(s,i.next.queue,{},Rr())}function ug(){return zn(_u)}function sx(){return on().memoizedState}function ix(){return on().memoizedState}function UA(s){for(var i=s.return;i!==null;){switch(i.tag){case 24:case 3:var o=Rr();s=Xi(o);var u=Wi(i,s,o);u!==null&&(gr(u,i,o),Zc(u,i,o)),i={cache:Up()},s.payload=i;return}i=i.return}}function zA(s,i,o){var u=Rr();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},wh(s)?ox(i,o):(o=Ap(s,i,o,u),o!==null&&(gr(o,s,u),lx(o,i,u)))}function ax(s,i,o){var u=Rr();su(s,i,o,u)}function su(s,i,o,u){var p={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(wh(s))ox(i,p);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var w=i.lastRenderedState,D=y(w,o);if(p.hasEagerState=!0,p.eagerState=D,Sr(D,w))return nh(s,i,p,0),Vt===null&&th(),!1}catch{}finally{}if(o=Ap(s,i,p,u),o!==null)return gr(o,s,u),lx(o,i,u),!0}return!1}function dg(s,i,o,u){if(u={lane:2,revertLane:Hg(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},wh(s)){if(i)throw Error(r(479))}else i=Ap(s,o,u,2),i!==null&&gr(i,s,2)}function wh(s){var i=s.alternate;return s===lt||i!==null&&i===lt}function ox(s,i){vl=ph=!0;var o=s.pending;o===null?i.next=i:(i.next=o.next,o.next=i),s.pending=i}function lx(s,i,o){if((o&4194048)!==0){var u=i.lanes;u&=s.pendingLanes,o|=u,i.lanes=o,Cc(s,o)}}var iu={readContext:zn,use:vh,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useLayoutEffect:tn,useInsertionEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useSyncExternalStore:tn,useId:tn,useHostTransitionStatus:tn,useFormState:tn,useActionState:tn,useOptimistic:tn,useMemoCache:tn,useCacheRefresh:tn};iu.useEffectEvent=tn;var cx={readContext:zn,use:vh,useCallback:function(s,i){return ir().memoizedState=[s,i===void 0?null:i],s},useContext:zn,useEffect:G1,useImperativeHandle:function(s,i,o){o=o!=null?o.concat([s]):null,xh(4194308,4,X1.bind(null,i,s),o)},useLayoutEffect:function(s,i){return xh(4194308,4,s,i)},useInsertionEffect:function(s,i){xh(4,2,s,i)},useMemo:function(s,i){var o=ir();i=i===void 0?null:i;var u=s();if(ho){Qn(!0);try{s()}finally{Qn(!1)}}return o.memoizedState=[u,i],u},useReducer:function(s,i,o){var u=ir();if(o!==void 0){var p=o(i);if(ho){Qn(!0);try{o(i)}finally{Qn(!1)}}}else p=i;return u.memoizedState=u.baseState=p,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:p},u.queue=s,s=s.dispatch=zA.bind(null,lt,s),[u.memoizedState,s]},useRef:function(s){var i=ir();return s={current:s},i.memoizedState=s},useState:function(s){s=sg(s);var i=s.queue,o=ax.bind(null,lt,i);return i.dispatch=o,[s.memoizedState,o]},useDebugValue:og,useDeferredValue:function(s,i){var o=ir();return lg(o,s,i)},useTransition:function(){var s=sg(!1);return s=tx.bind(null,lt,s.queue,!0,!1),ir().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,i,o){var u=lt,p=ir();if(wt){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),Vt===null)throw Error(r(349));(gt&127)!==0||R1(u,i,o)}p.memoizedState=o;var y={value:o,getSnapshot:i};return p.queue=y,G1(I1.bind(null,u,y,s),[s]),u.flags|=2048,xl(9,{destroy:void 0},j1.bind(null,u,y,o,i),null),o},useId:function(){var s=ir(),i=Vt.identifierPrefix;if(wt){var o=Rs,u=Ns;o=(u&~(1<<32-zt(u)-1)).toString(32)+o,i="_"+i+"R_"+o,o=gh++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=DA++,i="_"+i+"r_"+o.toString(32)+"_";return s.memoizedState=i},useHostTransitionStatus:ug,useFormState:B1,useActionState:B1,useOptimistic:function(s){var i=ir();i.memoizedState=i.baseState=s;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=dg.bind(null,lt,!0,o),o.dispatch=i,[s,i]},useMemoCache:tg,useCacheRefresh:function(){return ir().memoizedState=UA.bind(null,lt)},useEffectEvent:function(s){var i=ir(),o={impl:s};return i.memoizedState=o,function(){if((At&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},hg={readContext:zn,use:vh,useCallback:J1,useContext:zn,useEffect:ag,useImperativeHandle:W1,useInsertionEffect:K1,useLayoutEffect:Q1,useMemo:Z1,useReducer:bh,useRef:q1,useState:function(){return bh(ci)},useDebugValue:og,useDeferredValue:function(s,i){var o=on();return ex(o,Pt.memoizedState,s,i)},useTransition:function(){var s=bh(ci)[0],i=on().memoizedState;return[typeof s=="boolean"?s:ru(s),i]},useSyncExternalStore:N1,useId:sx,useHostTransitionStatus:ug,useFormState:F1,useActionState:F1,useOptimistic:function(s,i){var o=on();return P1(o,Pt,s,i)},useMemoCache:tg,useCacheRefresh:ix};hg.useEffectEvent=Y1;var ux={readContext:zn,use:vh,useCallback:J1,useContext:zn,useEffect:ag,useImperativeHandle:W1,useInsertionEffect:K1,useLayoutEffect:Q1,useMemo:Z1,useReducer:rg,useRef:q1,useState:function(){return rg(ci)},useDebugValue:og,useDeferredValue:function(s,i){var o=on();return Pt===null?lg(o,s,i):ex(o,Pt.memoizedState,s,i)},useTransition:function(){var s=rg(ci)[0],i=on().memoizedState;return[typeof s=="boolean"?s:ru(s),i]},useSyncExternalStore:N1,useId:sx,useHostTransitionStatus:ug,useFormState:$1,useActionState:$1,useOptimistic:function(s,i){var o=on();return Pt!==null?P1(o,Pt,s,i):(o.baseState=s,[s,o.queue.dispatch])},useMemoCache:tg,useCacheRefresh:ix};ux.useEffectEvent=Y1;function fg(s,i,o,u){i=s.memoizedState,o=o(u,i),o=o==null?i:b({},i,o),s.memoizedState=o,s.lanes===0&&(s.updateQueue.baseState=o)}var mg={enqueueSetState:function(s,i,o){s=s._reactInternals;var u=Rr(),p=Xi(u);p.payload=i,o!=null&&(p.callback=o),i=Wi(s,p,u),i!==null&&(gr(i,s,u),Zc(i,s,u))},enqueueReplaceState:function(s,i,o){s=s._reactInternals;var u=Rr(),p=Xi(u);p.tag=1,p.payload=i,o!=null&&(p.callback=o),i=Wi(s,p,u),i!==null&&(gr(i,s,u),Zc(i,s,u))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var o=Rr(),u=Xi(o);u.tag=2,i!=null&&(u.callback=i),i=Wi(s,u,o),i!==null&&(gr(i,s,o),Zc(i,s,o))}};function dx(s,i,o,u,p,y,w){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,y,w):i.prototype&&i.prototype.isPureReactComponent?!qc(o,u)||!qc(p,y):!0}function hx(s,i,o,u){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==s&&mg.enqueueReplaceState(i,i.state,null)}function fo(s,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(s=s.defaultProps){o===i&&(o=b({},o));for(var p in s)o[p]===void 0&&(o[p]=s[p])}return o}function fx(s){eh(s)}function mx(s){console.error(s)}function px(s){eh(s)}function Eh(s,i){try{var o=s.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function gx(s,i,o){try{var u=s.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function pg(s,i,o){return o=Xi(o),o.tag=3,o.payload={element:null},o.callback=function(){Eh(s,i)},o}function yx(s){return s=Xi(s),s.tag=3,s}function vx(s,i,o,u){var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var y=u.value;s.payload=function(){return p(y)},s.callback=function(){gx(i,o,u)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(s.callback=function(){gx(i,o,u),typeof p!="function"&&(ra===null?ra=new Set([this]):ra.add(this));var D=u.stack;this.componentDidCatch(u.value,{componentStack:D!==null?D:""})})}function BA(s,i,o,u,p){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&hl(i,o,p,!0),o=Cr.current,o!==null){switch(o.tag){case 31:case 13:return qr===null?Ph():o.alternate===null&&nn===0&&(nn=3),o.flags&=-257,o.flags|=65536,o.lanes=p,u===uh?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),zg(s,u,p)),!1;case 22:return o.flags|=65536,u===uh?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),zg(s,u,p)),!1}throw Error(r(435,o.tag))}return zg(s,u,p),Ph(),!1}if(wt)return i=Cr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=p,u!==Mp&&(s=Error(r(422),{cause:u}),Kc(Br(s,o)))):(u!==Mp&&(i=Error(r(423),{cause:u}),Kc(Br(i,o))),s=s.current.alternate,s.flags|=65536,p&=-p,s.lanes|=p,u=Br(u,o),p=pg(s.stateNode,u,p),qp(s,p),nn!==4&&(nn=2)),!1;var y=Error(r(520),{cause:u});if(y=Br(y,o),fu===null?fu=[y]:fu.push(y),nn!==4&&(nn=2),i===null)return!0;u=Br(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,s=p&-p,o.lanes|=s,s=pg(o.stateNode,u,s),qp(o,s),!1;case 1:if(i=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ra===null||!ra.has(y))))return o.flags|=65536,p&=-p,o.lanes|=p,p=yx(p),vx(p,s,o,u),qp(o,p),!1}o=o.return}while(o!==null);return!1}var gg=Error(r(461)),bn=!1;function Bn(s,i,o,u){i.child=s===null?w1(i,null,o,u):uo(i,s.child,o,u)}function bx(s,i,o,u,p){o=o.render;var y=i.ref;if("ref"in u){var w={};for(var D in u)D!=="ref"&&(w[D]=u[D])}else w=u;return ao(i),u=Wp(s,i,o,w,y,p),D=Jp(),s!==null&&!bn?(Zp(s,i,p),ui(s,i,p)):(wt&&D&&Ip(i),i.flags|=1,Bn(s,i,u,p),i.child)}function xx(s,i,o,u,p){if(s===null){var y=o.type;return typeof y=="function"&&!Np(y)&&y.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=y,_x(s,i,y,u,p)):(s=sh(o.type,null,u,i,i.mode,p),s.ref=i.ref,s.return=i,i.child=s)}if(y=s.child,!Sg(s,p)){var w=y.memoizedProps;if(o=o.compare,o=o!==null?o:qc,o(w,u)&&s.ref===i.ref)return ui(s,i,p)}return i.flags|=1,s=si(y,u),s.ref=i.ref,s.return=i,i.child=s}function _x(s,i,o,u,p){if(s!==null){var y=s.memoizedProps;if(qc(y,u)&&s.ref===i.ref)if(bn=!1,i.pendingProps=u=y,Sg(s,p))(s.flags&131072)!==0&&(bn=!0);else return i.lanes=s.lanes,ui(s,i,p)}return yg(s,i,o,u,p)}function wx(s,i,o,u){var p=u.children,y=s!==null?s.memoizedState:null;if(s===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(y=y!==null?y.baseLanes|o:o,s!==null){for(u=i.child=s.child,p=0;u!==null;)p=p|u.lanes|u.childLanes,u=u.sibling;u=p&~y}else u=0,i.child=null;return Ex(s,i,y,o,u)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},s!==null&&lh(i,y!==null?y.cachePool:null),y!==null?T1(i,y):Yp(),C1(i);else return u=i.lanes=536870912,Ex(s,i,y!==null?y.baseLanes|o:o,o,u)}else y!==null?(lh(i,y.cachePool),T1(i,y),Zi(),i.memoizedState=null):(s!==null&&lh(i,null),Yp(),Zi());return Bn(s,i,p,o),i.child}function au(s,i){return s!==null&&s.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Ex(s,i,o,u,p){var y=Bp();return y=y===null?null:{parent:yn._currentValue,pool:y},i.memoizedState={baseLanes:o,cachePool:y},s!==null&&lh(i,null),Yp(),C1(i),s!==null&&hl(s,i,u,!0),i.childLanes=p,null}function Sh(s,i){return i=Ch({mode:i.mode,children:i.children},s.mode),i.ref=s.ref,s.child=i,i.return=s,i}function Sx(s,i,o){return uo(i,s.child,null,o),s=Sh(i,i.pendingProps),s.flags|=2,kr(i),i.memoizedState=null,s}function FA(s,i,o){var u=i.pendingProps,p=(i.flags&128)!==0;if(i.flags&=-129,s===null){if(wt){if(u.mode==="hidden")return s=Sh(i,u),i.lanes=536870912,au(null,s);if(Qp(i),(s=Ht)?(s=O2(s,$r),s=s!==null&&s.data==="&"?s:null,s!==null&&(i.memoizedState={dehydrated:s,treeContext:qi!==null?{id:Ns,overflow:Rs}:null,retryLane:536870912,hydrationErrors:null},o=o1(s),o.return=i,i.child=o,Un=i,Ht=null)):s=null,s===null)throw Yi(i);return i.lanes=536870912,null}return Sh(i,u)}var y=s.memoizedState;if(y!==null){var w=y.dehydrated;if(Qp(i),p)if(i.flags&256)i.flags&=-257,i=Sx(s,i,o);else if(i.memoizedState!==null)i.child=s.child,i.flags|=128,i=null;else throw Error(r(558));else if(bn||hl(s,i,o,!1),p=(o&s.childLanes)!==0,bn||p){if(u=Vt,u!==null&&(w=kc(u,o),w!==0&&w!==y.retryLane))throw y.retryLane=w,no(s,w),gr(u,s,w),gg;Ph(),i=Sx(s,i,o)}else s=y.treeContext,Ht=Gr(w.nextSibling),Un=i,wt=!0,Gi=null,$r=!1,s!==null&&u1(i,s),i=Sh(i,u),i.flags|=4096;return i}return s=si(s.child,{mode:u.mode,children:u.children}),s.ref=i.ref,i.child=s,s.return=i,s}function Th(s,i){var o=i.ref;if(o===null)s!==null&&s.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(s===null||s.ref!==o)&&(i.flags|=4194816)}}function yg(s,i,o,u,p){return ao(i),o=Wp(s,i,o,u,void 0,p),u=Jp(),s!==null&&!bn?(Zp(s,i,p),ui(s,i,p)):(wt&&u&&Ip(i),i.flags|=1,Bn(s,i,o,p),i.child)}function Tx(s,i,o,u,p,y){return ao(i),i.updateQueue=null,o=A1(i,u,o,p),k1(s),u=Jp(),s!==null&&!bn?(Zp(s,i,y),ui(s,i,y)):(wt&&u&&Ip(i),i.flags|=1,Bn(s,i,o,y),i.child)}function Cx(s,i,o,u,p){if(ao(i),i.stateNode===null){var y=ll,w=o.contextType;typeof w=="object"&&w!==null&&(y=zn(w)),y=new o(u,y),i.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=mg,i.stateNode=y,y._reactInternals=i,y=i.stateNode,y.props=u,y.state=i.memoizedState,y.refs={},Hp(i),w=o.contextType,y.context=typeof w=="object"&&w!==null?zn(w):ll,y.state=i.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(fg(i,o,w,u),y.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(w=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),w!==y.state&&mg.enqueueReplaceState(y,y.state,null),tu(i,u,y,p),eu(),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(s===null){y=i.stateNode;var D=i.memoizedProps,q=fo(o,D);y.props=q;var Z=y.context,ue=o.contextType;w=ll,typeof ue=="object"&&ue!==null&&(w=zn(ue));var ye=o.getDerivedStateFromProps;ue=typeof ye=="function"||typeof y.getSnapshotBeforeUpdate=="function",D=i.pendingProps!==D,ue||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(D||Z!==w)&&hx(i,y,u,w),Qi=!1;var te=i.memoizedState;y.state=te,tu(i,u,y,p),eu(),Z=i.memoizedState,D||te!==Z||Qi?(typeof ye=="function"&&(fg(i,o,ye,u),Z=i.memoizedState),(q=Qi||dx(i,o,q,u,te,Z,w))?(ue||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(i.flags|=4194308)):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=Z),y.props=u,y.state=Z,y.context=w,u=q):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{y=i.stateNode,$p(s,i),w=i.memoizedProps,ue=fo(o,w),y.props=ue,ye=i.pendingProps,te=y.context,Z=o.contextType,q=ll,typeof Z=="object"&&Z!==null&&(q=zn(Z)),D=o.getDerivedStateFromProps,(Z=typeof D=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(w!==ye||te!==q)&&hx(i,y,u,q),Qi=!1,te=i.memoizedState,y.state=te,tu(i,u,y,p),eu();var se=i.memoizedState;w!==ye||te!==se||Qi||s!==null&&s.dependencies!==null&&ah(s.dependencies)?(typeof D=="function"&&(fg(i,o,D,u),se=i.memoizedState),(ue=Qi||dx(i,o,ue,u,te,se,q)||s!==null&&s.dependencies!==null&&ah(s.dependencies))?(Z||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,se,q),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,se,q)),typeof y.componentDidUpdate=="function"&&(i.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof y.componentDidUpdate!="function"||w===s.memoizedProps&&te===s.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&te===s.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=se),y.props=u,y.state=se,y.context=q,u=ue):(typeof y.componentDidUpdate!="function"||w===s.memoizedProps&&te===s.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&te===s.memoizedState||(i.flags|=1024),u=!1)}return y=u,Th(s,i),u=(i.flags&128)!==0,y||u?(y=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:y.render(),i.flags|=1,s!==null&&u?(i.child=uo(i,s.child,null,p),i.child=uo(i,null,o,p)):Bn(s,i,o,p),i.memoizedState=y.state,s=i.child):s=ui(s,i,p),s}function kx(s,i,o,u){return so(),i.flags|=256,Bn(s,i,o,u),i.child}var vg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bg(s){return{baseLanes:s,cachePool:g1()}}function xg(s,i,o){return s=s!==null?s.childLanes&~o:0,i&&(s|=Nr),s}function Ax(s,i,o){var u=i.pendingProps,p=!1,y=(i.flags&128)!==0,w;if((w=y)||(w=s!==null&&s.memoizedState===null?!1:(an.current&2)!==0),w&&(p=!0,i.flags&=-129),w=(i.flags&32)!==0,i.flags&=-33,s===null){if(wt){if(p?Ji(i):Zi(),(s=Ht)?(s=O2(s,$r),s=s!==null&&s.data!=="&"?s:null,s!==null&&(i.memoizedState={dehydrated:s,treeContext:qi!==null?{id:Ns,overflow:Rs}:null,retryLane:536870912,hydrationErrors:null},o=o1(s),o.return=i,i.child=o,Un=i,Ht=null)):s=null,s===null)throw Yi(i);return n0(s)?i.lanes=32:i.lanes=536870912,null}var D=u.children;return u=u.fallback,p?(Zi(),p=i.mode,D=Ch({mode:"hidden",children:D},p),u=ro(u,p,o,null),D.return=i,u.return=i,D.sibling=u,i.child=D,u=i.child,u.memoizedState=bg(o),u.childLanes=xg(s,w,o),i.memoizedState=vg,au(null,u)):(Ji(i),_g(i,D))}var q=s.memoizedState;if(q!==null&&(D=q.dehydrated,D!==null)){if(y)i.flags&256?(Ji(i),i.flags&=-257,i=wg(s,i,o)):i.memoizedState!==null?(Zi(),i.child=s.child,i.flags|=128,i=null):(Zi(),D=u.fallback,p=i.mode,u=Ch({mode:"visible",children:u.children},p),D=ro(D,p,o,null),D.flags|=2,u.return=i,D.return=i,u.sibling=D,i.child=u,uo(i,s.child,null,o),u=i.child,u.memoizedState=bg(o),u.childLanes=xg(s,w,o),i.memoizedState=vg,i=au(null,u));else if(Ji(i),n0(D)){if(w=D.nextSibling&&D.nextSibling.dataset,w)var Z=w.dgst;w=Z,u=Error(r(419)),u.stack="",u.digest=w,Kc({value:u,source:null,stack:null}),i=wg(s,i,o)}else if(bn||hl(s,i,o,!1),w=(o&s.childLanes)!==0,bn||w){if(w=Vt,w!==null&&(u=kc(w,o),u!==0&&u!==q.retryLane))throw q.retryLane=u,no(s,u),gr(w,s,u),gg;t0(D)||Ph(),i=wg(s,i,o)}else t0(D)?(i.flags|=192,i.child=s.child,i=null):(s=q.treeContext,Ht=Gr(D.nextSibling),Un=i,wt=!0,Gi=null,$r=!1,s!==null&&u1(i,s),i=_g(i,u.children),i.flags|=4096);return i}return p?(Zi(),D=u.fallback,p=i.mode,q=s.child,Z=q.sibling,u=si(q,{mode:"hidden",children:u.children}),u.subtreeFlags=q.subtreeFlags&65011712,Z!==null?D=si(Z,D):(D=ro(D,p,o,null),D.flags|=2),D.return=i,u.return=i,u.sibling=D,i.child=u,au(null,u),u=i.child,D=s.child.memoizedState,D===null?D=bg(o):(p=D.cachePool,p!==null?(q=yn._currentValue,p=p.parent!==q?{parent:q,pool:q}:p):p=g1(),D={baseLanes:D.baseLanes|o,cachePool:p}),u.memoizedState=D,u.childLanes=xg(s,w,o),i.memoizedState=vg,au(s.child,u)):(Ji(i),o=s.child,s=o.sibling,o=si(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,s!==null&&(w=i.deletions,w===null?(i.deletions=[s],i.flags|=16):w.push(s)),i.child=o,i.memoizedState=null,o)}function _g(s,i){return i=Ch({mode:"visible",children:i},s.mode),i.return=s,s.child=i}function Ch(s,i){return s=Tr(22,s,null,i),s.lanes=0,s}function wg(s,i,o){return uo(i,s.child,null,o),s=_g(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function Nx(s,i,o){s.lanes|=i;var u=s.alternate;u!==null&&(u.lanes|=i),Lp(s.return,i,o)}function Eg(s,i,o,u,p,y){var w=s.memoizedState;w===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:p,treeForkCount:y}:(w.isBackwards=i,w.rendering=null,w.renderingStartTime=0,w.last=u,w.tail=o,w.tailMode=p,w.treeForkCount=y)}function Rx(s,i,o){var u=i.pendingProps,p=u.revealOrder,y=u.tail;u=u.children;var w=an.current,D=(w&2)!==0;if(D?(w=w&1|2,i.flags|=128):w&=1,ae(an,w),Bn(s,i,u,o),u=wt?Yc:0,!D&&s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Nx(s,o,i);else if(s.tag===19)Nx(s,o,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(p){case"forwards":for(o=i.child,p=null;o!==null;)s=o.alternate,s!==null&&mh(s)===null&&(p=o),o=o.sibling;o=p,o===null?(p=i.child,i.child=null):(p=o.sibling,o.sibling=null),Eg(i,!1,p,o,y,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,p=i.child,i.child=null;p!==null;){if(s=p.alternate,s!==null&&mh(s)===null){i.child=p;break}s=p.sibling,p.sibling=o,o=p,p=s}Eg(i,!0,o,null,y,u);break;case"together":Eg(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function ui(s,i,o){if(s!==null&&(i.dependencies=s.dependencies),na|=i.lanes,(o&i.childLanes)===0)if(s!==null){if(hl(s,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(s!==null&&i.child!==s.child)throw Error(r(153));if(i.child!==null){for(s=i.child,o=si(s,s.pendingProps),i.child=o,o.return=i;s.sibling!==null;)s=s.sibling,o=o.sibling=si(s,s.pendingProps),o.return=i;o.sibling=null}return i.child}function Sg(s,i){return(s.lanes&i)!==0?!0:(s=s.dependencies,!!(s!==null&&ah(s)))}function HA(s,i,o){switch(i.tag){case 3:He(i,i.stateNode.containerInfo),Ki(i,yn,s.memoizedState.cache),so();break;case 27:case 5:ve(i);break;case 4:He(i,i.stateNode.containerInfo);break;case 10:Ki(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Qp(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Ji(i),i.flags|=128,null):(o&i.child.childLanes)!==0?Ax(s,i,o):(Ji(i),s=ui(s,i,o),s!==null?s.sibling:null);Ji(i);break;case 19:var p=(s.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(hl(s,i,o,!1),u=(o&i.childLanes)!==0),p){if(u)return Rx(s,i,o);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),ae(an,an.current),u)break;return null;case 22:return i.lanes=0,wx(s,i,o,i.pendingProps);case 24:Ki(i,yn,s.memoizedState.cache)}return ui(s,i,o)}function jx(s,i,o){if(s!==null)if(s.memoizedProps!==i.pendingProps)bn=!0;else{if(!Sg(s,o)&&(i.flags&128)===0)return bn=!1,HA(s,i,o);bn=(s.flags&131072)!==0}else bn=!1,wt&&(i.flags&1048576)!==0&&c1(i,Yc,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(s=lo(i.elementType),i.type=s,typeof s=="function")Np(s)?(u=fo(s,u),i.tag=1,i=Cx(null,i,s,u,o)):(i.tag=0,i=yg(null,i,s,u,o));else{if(s!=null){var p=s.$$typeof;if(p===V){i.tag=11,i=bx(null,i,s,u,o);break e}else if(p===S){i.tag=14,i=xx(null,i,s,u,o);break e}}throw i=xe(s)||s,Error(r(306,i,""))}}return i;case 0:return yg(s,i,i.type,i.pendingProps,o);case 1:return u=i.type,p=fo(u,i.pendingProps),Cx(s,i,u,p,o);case 3:e:{if(He(i,i.stateNode.containerInfo),s===null)throw Error(r(387));u=i.pendingProps;var y=i.memoizedState;p=y.element,$p(s,i),tu(i,u,null,o);var w=i.memoizedState;if(u=w.cache,Ki(i,yn,u),u!==y.cache&&Vp(i,[yn],o,!0),eu(),u=w.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:w.cache},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){i=kx(s,i,u,o);break e}else if(u!==p){p=Br(Error(r(424)),i),Kc(p),i=kx(s,i,u,o);break e}else{switch(s=i.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Ht=Gr(s.firstChild),Un=i,wt=!0,Gi=null,$r=!0,o=w1(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(so(),u===p){i=ui(s,i,o);break e}Bn(s,i,u,o)}i=i.child}return i;case 26:return Th(s,i),s===null?(o=F2(i.type,null,i.pendingProps,null))?i.memoizedState=o:wt||(o=i.type,s=i.pendingProps,u=Fh(_e.current).createElement(o),u[mn]=i,u[jn]=s,Fn(u,o,s),pn(u),i.stateNode=u):i.memoizedState=F2(i.type,s.memoizedProps,i.pendingProps,s.memoizedState),null;case 27:return ve(i),s===null&&wt&&(u=i.stateNode=U2(i.type,i.pendingProps,_e.current),Un=i,$r=!0,p=Ht,oa(i.type)?(r0=p,Ht=Gr(u.firstChild)):Ht=p),Bn(s,i,i.pendingProps.children,o),Th(s,i),s===null&&(i.flags|=4194304),i.child;case 5:return s===null&&wt&&((p=u=Ht)&&(u=bN(u,i.type,i.pendingProps,$r),u!==null?(i.stateNode=u,Un=i,Ht=Gr(u.firstChild),$r=!1,p=!0):p=!1),p||Yi(i)),ve(i),p=i.type,y=i.pendingProps,w=s!==null?s.memoizedProps:null,u=y.children,Jg(p,y)?u=null:w!==null&&Jg(p,w)&&(i.flags|=32),i.memoizedState!==null&&(p=Wp(s,i,MA,null,null,o),_u._currentValue=p),Th(s,i),Bn(s,i,u,o),i.child;case 6:return s===null&&wt&&((s=o=Ht)&&(o=xN(o,i.pendingProps,$r),o!==null?(i.stateNode=o,Un=i,Ht=null,s=!0):s=!1),s||Yi(i)),null;case 13:return Ax(s,i,o);case 4:return He(i,i.stateNode.containerInfo),u=i.pendingProps,s===null?i.child=uo(i,null,u,o):Bn(s,i,u,o),i.child;case 11:return bx(s,i,i.type,i.pendingProps,o);case 7:return Bn(s,i,i.pendingProps,o),i.child;case 8:return Bn(s,i,i.pendingProps.children,o),i.child;case 12:return Bn(s,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,Ki(i,i.type,u.value),Bn(s,i,u.children,o),i.child;case 9:return p=i.type._context,u=i.pendingProps.children,ao(i),p=zn(p),u=u(p),i.flags|=1,Bn(s,i,u,o),i.child;case 14:return xx(s,i,i.type,i.pendingProps,o);case 15:return _x(s,i,i.type,i.pendingProps,o);case 19:return Rx(s,i,o);case 31:return FA(s,i,o);case 22:return wx(s,i,o,i.pendingProps);case 24:return ao(i),u=zn(yn),s===null?(p=Bp(),p===null&&(p=Vt,y=Up(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=o),p=y),i.memoizedState={parent:u,cache:p},Hp(i),Ki(i,yn,p)):((s.lanes&o)!==0&&($p(s,i),tu(i,null,null,o),eu()),p=s.memoizedState,y=i.memoizedState,p.parent!==u?(p={parent:u,cache:u},i.memoizedState=p,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=p),Ki(i,yn,u)):(u=y.cache,Ki(i,yn,u),u!==p.cache&&Vp(i,[yn],o,!0))),Bn(s,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function di(s){s.flags|=4}function Tg(s,i,o,u,p){if((i=(s.mode&32)!==0)&&(i=!1),i){if(s.flags|=16777216,(p&335544128)===p)if(s.stateNode.complete)s.flags|=8192;else if(s2())s.flags|=8192;else throw co=uh,Fp}else s.flags&=-16777217}function Ix(s,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Y2(i))if(s2())s.flags|=8192;else throw co=uh,Fp}function kh(s,i){i!==null&&(s.flags|=4),s.flags&16384&&(i=s.tag!==22?Pi():536870912,s.lanes|=i,Sl|=i)}function ou(s,i){if(!wt)switch(s.tailMode){case"hidden":i=s.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?s.tail=null:o.sibling=null;break;case"collapsed":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function $t(s){var i=s.alternate!==null&&s.alternate.child===s.child,o=0,u=0;if(i)for(var p=s.child;p!==null;)o|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=s,p=p.sibling;else for(p=s.child;p!==null;)o|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=s,p=p.sibling;return s.subtreeFlags|=u,s.childLanes=o,i}function $A(s,i,o){var u=i.pendingProps;switch(Dp(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(i),null;case 1:return $t(i),null;case 3:return o=i.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),oi(yn),Ge(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(s===null||s.child===null)&&(dl(i)?di(i):s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Pp())),$t(i),null;case 26:var p=i.type,y=i.memoizedState;return s===null?(di(i),y!==null?($t(i),Ix(i,y)):($t(i),Tg(i,p,null,u,o))):y?y!==s.memoizedState?(di(i),$t(i),Ix(i,y)):($t(i),i.flags&=-16777217):(s=s.memoizedProps,s!==u&&di(i),$t(i),Tg(i,p,s,u,o)),null;case 27:if(he(i),o=_e.current,p=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==u&&di(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return $t(i),null}s=de.current,dl(i)?d1(i):(s=U2(p,u,o),i.stateNode=s,di(i))}return $t(i),null;case 5:if(he(i),p=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==u&&di(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return $t(i),null}if(y=de.current,dl(i))d1(i);else{var w=Fh(_e.current);switch(y){case 1:y=w.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:y=w.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":y=w.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":y=w.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":y=w.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?w.createElement("select",{is:u.is}):w.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?w.createElement(p,{is:u.is}):w.createElement(p)}}y[mn]=i,y[jn]=u;e:for(w=i.child;w!==null;){if(w.tag===5||w.tag===6)y.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===i)break e;for(;w.sibling===null;){if(w.return===null||w.return===i)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}i.stateNode=y;e:switch(Fn(y,p,u),p){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&di(i)}}return $t(i),Tg(i,i.type,s===null?null:s.memoizedProps,i.pendingProps,o),null;case 6:if(s&&i.stateNode!=null)s.memoizedProps!==u&&di(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(r(166));if(s=_e.current,dl(i)){if(s=i.stateNode,o=i.memoizedProps,u=null,p=Un,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}s[mn]=i,s=!!(s.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||A2(s.nodeValue,o)),s||Yi(i,!0)}else s=Fh(s).createTextNode(u),s[mn]=i,i.stateNode=s}return $t(i),null;case 31:if(o=i.memoizedState,s===null||s.memoizedState!==null){if(u=dl(i),o!==null){if(s===null){if(!u)throw Error(r(318));if(s=i.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[mn]=i}else so(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;$t(i),s=!1}else o=Pp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=o),s=!0;if(!s)return i.flags&256?(kr(i),i):(kr(i),null);if((i.flags&128)!==0)throw Error(r(558))}return $t(i),null;case 13:if(u=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(p=dl(i),u!==null&&u.dehydrated!==null){if(s===null){if(!p)throw Error(r(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[mn]=i}else so(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;$t(i),p=!1}else p=Pp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=p),p=!0;if(!p)return i.flags&256?(kr(i),i):(kr(i),null)}return kr(i),(i.flags&128)!==0?(i.lanes=o,i):(o=u!==null,s=s!==null&&s.memoizedState!==null,o&&(u=i.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==p&&(u.flags|=2048)),o!==s&&o&&(i.child.flags|=8192),kh(i,i.updateQueue),$t(i),null);case 4:return Ge(),s===null&&Yg(i.stateNode.containerInfo),$t(i),null;case 10:return oi(i.type),$t(i),null;case 19:if(ee(an),u=i.memoizedState,u===null)return $t(i),null;if(p=(i.flags&128)!==0,y=u.rendering,y===null)if(p)ou(u,!1);else{if(nn!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(y=mh(s),y!==null){for(i.flags|=128,ou(u,!1),s=y.updateQueue,i.updateQueue=s,kh(i,s),i.subtreeFlags=0,s=o,o=i.child;o!==null;)a1(o,s),o=o.sibling;return ae(an,an.current&1|2),wt&&ii(i,u.treeForkCount),i.child}s=s.sibling}u.tail!==null&&rt()>Ih&&(i.flags|=128,p=!0,ou(u,!1),i.lanes=4194304)}else{if(!p)if(s=mh(y),s!==null){if(i.flags|=128,p=!0,s=s.updateQueue,i.updateQueue=s,kh(i,s),ou(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!wt)return $t(i),null}else 2*rt()-u.renderingStartTime>Ih&&o!==536870912&&(i.flags|=128,p=!0,ou(u,!1),i.lanes=4194304);u.isBackwards?(y.sibling=i.child,i.child=y):(s=u.last,s!==null?s.sibling=y:i.child=y,u.last=y)}return u.tail!==null?(s=u.tail,u.rendering=s,u.tail=s.sibling,u.renderingStartTime=rt(),s.sibling=null,o=an.current,ae(an,p?o&1|2:o&1),wt&&ii(i,u.treeForkCount),s):($t(i),null);case 22:case 23:return kr(i),Kp(),u=i.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&($t(i),i.subtreeFlags&6&&(i.flags|=8192)):$t(i),o=i.updateQueue,o!==null&&kh(i,o.retryQueue),o=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),s!==null&&ee(oo),null;case 24:return o=null,s!==null&&(o=s.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),oi(yn),$t(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function qA(s,i){switch(Dp(i),i.tag){case 1:return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return oi(yn),Ge(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 26:case 27:case 5:return he(i),null;case 31:if(i.memoizedState!==null){if(kr(i),i.alternate===null)throw Error(r(340));so()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 13:if(kr(i),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(r(340));so()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return ee(an),null;case 4:return Ge(),null;case 10:return oi(i.type),null;case 22:case 23:return kr(i),Kp(),s!==null&&ee(oo),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 24:return oi(yn),null;case 25:return null;default:return null}}function Dx(s,i){switch(Dp(i),i.tag){case 3:oi(yn),Ge();break;case 26:case 27:case 5:he(i);break;case 4:Ge();break;case 31:i.memoizedState!==null&&kr(i);break;case 13:kr(i);break;case 19:ee(an);break;case 10:oi(i.type);break;case 22:case 23:kr(i),Kp(),s!==null&&ee(oo);break;case 24:oi(yn)}}function lu(s,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var p=u.next;o=p;do{if((o.tag&s)===s){u=void 0;var y=o.create,w=o.inst;u=y(),w.destroy=u}o=o.next}while(o!==p)}}catch(D){Dt(i,i.return,D)}}function ea(s,i,o){try{var u=i.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var y=p.next;u=y;do{if((u.tag&s)===s){var w=u.inst,D=w.destroy;if(D!==void 0){w.destroy=void 0,p=i;var q=o,Z=D;try{Z()}catch(ue){Dt(p,q,ue)}}}u=u.next}while(u!==y)}}catch(ue){Dt(i,i.return,ue)}}function Mx(s){var i=s.updateQueue;if(i!==null){var o=s.stateNode;try{S1(i,o)}catch(u){Dt(s,s.return,u)}}}function Px(s,i,o){o.props=fo(s.type,s.memoizedProps),o.state=s.memoizedState;try{o.componentWillUnmount()}catch(u){Dt(s,i,u)}}function cu(s,i){try{var o=s.ref;if(o!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof o=="function"?s.refCleanup=o(u):o.current=u}}catch(p){Dt(s,i,p)}}function js(s,i){var o=s.ref,u=s.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(p){Dt(s,i,p)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(p){Dt(s,i,p)}else o.current=null}function Ox(s){var i=s.type,o=s.memoizedProps,u=s.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(p){Dt(s,s.return,p)}}function Cg(s,i,o){try{var u=s.stateNode;fN(u,s.type,o,i),u[jn]=i}catch(p){Dt(s,s.return,p)}}function Lx(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&oa(s.type)||s.tag===4}function kg(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Lx(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&oa(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Ag(s,i,o){var u=s.tag;if(u===5||u===6)s=s.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(s,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(s),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Jr));else if(u!==4&&(u===27&&oa(s.type)&&(o=s.stateNode,i=null),s=s.child,s!==null))for(Ag(s,i,o),s=s.sibling;s!==null;)Ag(s,i,o),s=s.sibling}function Ah(s,i,o){var u=s.tag;if(u===5||u===6)s=s.stateNode,i?o.insertBefore(s,i):o.appendChild(s);else if(u!==4&&(u===27&&oa(s.type)&&(o=s.stateNode),s=s.child,s!==null))for(Ah(s,i,o),s=s.sibling;s!==null;)Ah(s,i,o),s=s.sibling}function Vx(s){var i=s.stateNode,o=s.memoizedProps;try{for(var u=s.type,p=i.attributes;p.length;)i.removeAttributeNode(p[0]);Fn(i,u,o),i[mn]=s,i[jn]=o}catch(y){Dt(s,s.return,y)}}var hi=!1,xn=!1,Ng=!1,Ux=typeof WeakSet=="function"?WeakSet:Set,Dn=null;function GA(s,i){if(s=s.containerInfo,Xg=Qh,s=Wb(s),wp(s)){if("selectionStart"in s)var o={start:s.selectionStart,end:s.selectionEnd};else e:{o=(o=s.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var p=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var w=0,D=-1,q=-1,Z=0,ue=0,ye=s,te=null;t:for(;;){for(var se;ye!==o||p!==0&&ye.nodeType!==3||(D=w+p),ye!==y||u!==0&&ye.nodeType!==3||(q=w+u),ye.nodeType===3&&(w+=ye.nodeValue.length),(se=ye.firstChild)!==null;)te=ye,ye=se;for(;;){if(ye===s)break t;if(te===o&&++Z===p&&(D=w),te===y&&++ue===u&&(q=w),(se=ye.nextSibling)!==null)break;ye=te,te=ye.parentNode}ye=se}o=D===-1||q===-1?null:{start:D,end:q}}else o=null}o=o||{start:0,end:0}}else o=null;for(Wg={focusedElem:s,selectionRange:o},Qh=!1,Dn=i;Dn!==null;)if(i=Dn,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,Dn=s;else for(;Dn!==null;){switch(i=Dn,y=i.alternate,s=i.flags,i.tag){case 0:if((s&4)!==0&&(s=i.updateQueue,s=s!==null?s.events:null,s!==null))for(o=0;o<s.length;o++)p=s[o],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&y!==null){s=void 0,o=i,p=y.memoizedProps,y=y.memoizedState,u=o.stateNode;try{var ze=fo(o.type,p);s=u.getSnapshotBeforeUpdate(ze,y),u.__reactInternalSnapshotBeforeUpdate=s}catch(We){Dt(o,o.return,We)}}break;case 3:if((s&1024)!==0){if(s=i.stateNode.containerInfo,o=s.nodeType,o===9)e0(s);else if(o===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":e0(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=i.sibling,s!==null){s.return=i.return,Dn=s;break}Dn=i.return}}function zx(s,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:mi(s,o),u&4&&lu(5,o);break;case 1:if(mi(s,o),u&4)if(s=o.stateNode,i===null)try{s.componentDidMount()}catch(w){Dt(o,o.return,w)}else{var p=fo(o.type,i.memoizedProps);i=i.memoizedState;try{s.componentDidUpdate(p,i,s.__reactInternalSnapshotBeforeUpdate)}catch(w){Dt(o,o.return,w)}}u&64&&Mx(o),u&512&&cu(o,o.return);break;case 3:if(mi(s,o),u&64&&(s=o.updateQueue,s!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{S1(s,i)}catch(w){Dt(o,o.return,w)}}break;case 27:i===null&&u&4&&Vx(o);case 26:case 5:mi(s,o),i===null&&u&4&&Ox(o),u&512&&cu(o,o.return);break;case 12:mi(s,o);break;case 31:mi(s,o),u&4&&Hx(s,o);break;case 13:mi(s,o),u&4&&$x(s,o),u&64&&(s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(o=tN.bind(null,o),_N(s,o))));break;case 22:if(u=o.memoizedState!==null||hi,!u){i=i!==null&&i.memoizedState!==null||xn,p=hi;var y=xn;hi=u,(xn=i)&&!y?pi(s,o,(o.subtreeFlags&8772)!==0):mi(s,o),hi=p,xn=y}break;case 30:break;default:mi(s,o)}}function Bx(s){var i=s.alternate;i!==null&&(s.alternate=null,Bx(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&Ko(i)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Qt=null,hr=!1;function fi(s,i,o){for(o=o.child;o!==null;)Fx(s,i,o),o=o.sibling}function Fx(s,i,o){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(Ft,o)}catch{}switch(o.tag){case 26:xn||js(o,i),fi(s,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:xn||js(o,i);var u=Qt,p=hr;oa(o.type)&&(Qt=o.stateNode,hr=!1),fi(s,i,o),vu(o.stateNode),Qt=u,hr=p;break;case 5:xn||js(o,i);case 6:if(u=Qt,p=hr,Qt=null,fi(s,i,o),Qt=u,hr=p,Qt!==null)if(hr)try{(Qt.nodeType===9?Qt.body:Qt.nodeName==="HTML"?Qt.ownerDocument.body:Qt).removeChild(o.stateNode)}catch(y){Dt(o,i,y)}else try{Qt.removeChild(o.stateNode)}catch(y){Dt(o,i,y)}break;case 18:Qt!==null&&(hr?(s=Qt,M2(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,o.stateNode),Il(s)):M2(Qt,o.stateNode));break;case 4:u=Qt,p=hr,Qt=o.stateNode.containerInfo,hr=!0,fi(s,i,o),Qt=u,hr=p;break;case 0:case 11:case 14:case 15:ea(2,o,i),xn||ea(4,o,i),fi(s,i,o);break;case 1:xn||(js(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Px(o,i,u)),fi(s,i,o);break;case 21:fi(s,i,o);break;case 22:xn=(u=xn)||o.memoizedState!==null,fi(s,i,o),xn=u;break;default:fi(s,i,o)}}function Hx(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Il(s)}catch(o){Dt(i,i.return,o)}}}function $x(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Il(s)}catch(o){Dt(i,i.return,o)}}function YA(s){switch(s.tag){case 31:case 13:case 19:var i=s.stateNode;return i===null&&(i=s.stateNode=new Ux),i;case 22:return s=s.stateNode,i=s._retryCache,i===null&&(i=s._retryCache=new Ux),i;default:throw Error(r(435,s.tag))}}function Nh(s,i){var o=YA(s);i.forEach(function(u){if(!o.has(u)){o.add(u);var p=nN.bind(null,s,u);u.then(p,p)}})}function fr(s,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var p=o[u],y=s,w=i,D=w;e:for(;D!==null;){switch(D.tag){case 27:if(oa(D.type)){Qt=D.stateNode,hr=!1;break e}break;case 5:Qt=D.stateNode,hr=!1;break e;case 3:case 4:Qt=D.stateNode.containerInfo,hr=!0;break e}D=D.return}if(Qt===null)throw Error(r(160));Fx(y,w,p),Qt=null,hr=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)qx(i,s),i=i.sibling}var ss=null;function qx(s,i){var o=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:fr(i,s),mr(s),u&4&&(ea(3,s,s.return),lu(3,s),ea(5,s,s.return));break;case 1:fr(i,s),mr(s),u&512&&(xn||o===null||js(o,o.return)),u&64&&hi&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(o=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var p=ss;if(fr(i,s),mr(s),u&512&&(xn||o===null||js(o,o.return)),u&4){var y=o!==null?o.memoizedState:null;if(u=s.memoizedState,o===null)if(u===null)if(s.stateNode===null){e:{u=s.type,o=s.memoizedProps,p=p.ownerDocument||p;t:switch(u){case"title":y=p.getElementsByTagName("title")[0],(!y||y[ys]||y[mn]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(u),p.head.insertBefore(y,p.querySelector("head > title"))),Fn(y,u,o),y[mn]=s,pn(y),u=y;break e;case"link":var w=q2("link","href",p).get(u+(o.href||""));if(w){for(var D=0;D<w.length;D++)if(y=w[D],y.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(D,1);break t}}y=p.createElement(u),Fn(y,u,o),p.head.appendChild(y);break;case"meta":if(w=q2("meta","content",p).get(u+(o.content||""))){for(D=0;D<w.length;D++)if(y=w[D],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(D,1);break t}}y=p.createElement(u),Fn(y,u,o),p.head.appendChild(y);break;default:throw Error(r(468,u))}y[mn]=s,pn(y),u=y}s.stateNode=u}else G2(p,s.type,s.stateNode);else s.stateNode=$2(p,u,s.memoizedProps);else y!==u?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,u===null?G2(p,s.type,s.stateNode):$2(p,u,s.memoizedProps)):u===null&&s.stateNode!==null&&Cg(s,s.memoizedProps,o.memoizedProps)}break;case 27:fr(i,s),mr(s),u&512&&(xn||o===null||js(o,o.return)),o!==null&&u&4&&Cg(s,s.memoizedProps,o.memoizedProps);break;case 5:if(fr(i,s),mr(s),u&512&&(xn||o===null||js(o,o.return)),s.flags&32){p=s.stateNode;try{dr(p,"")}catch(ze){Dt(s,s.return,ze)}}u&4&&s.stateNode!=null&&(p=s.memoizedProps,Cg(s,p,o!==null?o.memoizedProps:p)),u&1024&&(Ng=!0);break;case 6:if(fr(i,s),mr(s),u&4){if(s.stateNode===null)throw Error(r(162));u=s.memoizedProps,o=s.stateNode;try{o.nodeValue=u}catch(ze){Dt(s,s.return,ze)}}break;case 3:if(qh=null,p=ss,ss=Hh(i.containerInfo),fr(i,s),ss=p,mr(s),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Il(i.containerInfo)}catch(ze){Dt(s,s.return,ze)}Ng&&(Ng=!1,Gx(s));break;case 4:u=ss,ss=Hh(s.stateNode.containerInfo),fr(i,s),mr(s),ss=u;break;case 12:fr(i,s),mr(s);break;case 31:fr(i,s),mr(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Nh(s,u)));break;case 13:fr(i,s),mr(s),s.child.flags&8192&&s.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(jh=rt()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Nh(s,u)));break;case 22:p=s.memoizedState!==null;var q=o!==null&&o.memoizedState!==null,Z=hi,ue=xn;if(hi=Z||p,xn=ue||q,fr(i,s),xn=ue,hi=Z,mr(s),u&8192)e:for(i=s.stateNode,i._visibility=p?i._visibility&-2:i._visibility|1,p&&(o===null||q||hi||xn||mo(s)),o=null,i=s;;){if(i.tag===5||i.tag===26){if(o===null){q=o=i;try{if(y=q.stateNode,p)w=y.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{D=q.stateNode;var ye=q.memoizedProps.style,te=ye!=null&&ye.hasOwnProperty("display")?ye.display:null;D.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(ze){Dt(q,q.return,ze)}}}else if(i.tag===6){if(o===null){q=i;try{q.stateNode.nodeValue=p?"":q.memoizedProps}catch(ze){Dt(q,q.return,ze)}}}else if(i.tag===18){if(o===null){q=i;try{var se=q.stateNode;p?P2(se,!0):P2(q.stateNode,!1)}catch(ze){Dt(q,q.return,ze)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===s)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=s.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Nh(s,o))));break;case 19:fr(i,s),mr(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Nh(s,u)));break;case 30:break;case 21:break;default:fr(i,s),mr(s)}}function mr(s){var i=s.flags;if(i&2){try{for(var o,u=s.return;u!==null;){if(Lx(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var p=o.stateNode,y=kg(s);Ah(s,y,p);break;case 5:var w=o.stateNode;o.flags&32&&(dr(w,""),o.flags&=-33);var D=kg(s);Ah(s,D,w);break;case 3:case 4:var q=o.stateNode.containerInfo,Z=kg(s);Ag(s,Z,q);break;default:throw Error(r(161))}}catch(ue){Dt(s,s.return,ue)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function Gx(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var i=s;Gx(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),s=s.sibling}}function mi(s,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)zx(s,i.alternate,i),i=i.sibling}function mo(s){for(s=s.child;s!==null;){var i=s;switch(i.tag){case 0:case 11:case 14:case 15:ea(4,i,i.return),mo(i);break;case 1:js(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&Px(i,i.return,o),mo(i);break;case 27:vu(i.stateNode);case 26:case 5:js(i,i.return),mo(i);break;case 22:i.memoizedState===null&&mo(i);break;case 30:mo(i);break;default:mo(i)}s=s.sibling}}function pi(s,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,p=s,y=i,w=y.flags;switch(y.tag){case 0:case 11:case 15:pi(p,y,o),lu(4,y);break;case 1:if(pi(p,y,o),u=y,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(Z){Dt(u,u.return,Z)}if(u=y,p=u.updateQueue,p!==null){var D=u.stateNode;try{var q=p.shared.hiddenCallbacks;if(q!==null)for(p.shared.hiddenCallbacks=null,p=0;p<q.length;p++)E1(q[p],D)}catch(Z){Dt(u,u.return,Z)}}o&&w&64&&Mx(y),cu(y,y.return);break;case 27:Vx(y);case 26:case 5:pi(p,y,o),o&&u===null&&w&4&&Ox(y),cu(y,y.return);break;case 12:pi(p,y,o);break;case 31:pi(p,y,o),o&&w&4&&Hx(p,y);break;case 13:pi(p,y,o),o&&w&4&&$x(p,y);break;case 22:y.memoizedState===null&&pi(p,y,o),cu(y,y.return);break;case 30:break;default:pi(p,y,o)}i=i.sibling}}function Rg(s,i){var o=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==o&&(s!=null&&s.refCount++,o!=null&&Qc(o))}function jg(s,i){s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&Qc(s))}function is(s,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Yx(s,i,o,u),i=i.sibling}function Yx(s,i,o,u){var p=i.flags;switch(i.tag){case 0:case 11:case 15:is(s,i,o,u),p&2048&&lu(9,i);break;case 1:is(s,i,o,u);break;case 3:is(s,i,o,u),p&2048&&(s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&Qc(s)));break;case 12:if(p&2048){is(s,i,o,u),s=i.stateNode;try{var y=i.memoizedProps,w=y.id,D=y.onPostCommit;typeof D=="function"&&D(w,i.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(q){Dt(i,i.return,q)}}else is(s,i,o,u);break;case 31:is(s,i,o,u);break;case 13:is(s,i,o,u);break;case 23:break;case 22:y=i.stateNode,w=i.alternate,i.memoizedState!==null?y._visibility&2?is(s,i,o,u):uu(s,i):y._visibility&2?is(s,i,o,u):(y._visibility|=2,_l(s,i,o,u,(i.subtreeFlags&10256)!==0||!1)),p&2048&&Rg(w,i);break;case 24:is(s,i,o,u),p&2048&&jg(i.alternate,i);break;default:is(s,i,o,u)}}function _l(s,i,o,u,p){for(p=p&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var y=s,w=i,D=o,q=u,Z=w.flags;switch(w.tag){case 0:case 11:case 15:_l(y,w,D,q,p),lu(8,w);break;case 23:break;case 22:var ue=w.stateNode;w.memoizedState!==null?ue._visibility&2?_l(y,w,D,q,p):uu(y,w):(ue._visibility|=2,_l(y,w,D,q,p)),p&&Z&2048&&Rg(w.alternate,w);break;case 24:_l(y,w,D,q,p),p&&Z&2048&&jg(w.alternate,w);break;default:_l(y,w,D,q,p)}i=i.sibling}}function uu(s,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=s,u=i,p=u.flags;switch(u.tag){case 22:uu(o,u),p&2048&&Rg(u.alternate,u);break;case 24:uu(o,u),p&2048&&jg(u.alternate,u);break;default:uu(o,u)}i=i.sibling}}var du=8192;function wl(s,i,o){if(s.subtreeFlags&du)for(s=s.child;s!==null;)Kx(s,i,o),s=s.sibling}function Kx(s,i,o){switch(s.tag){case 26:wl(s,i,o),s.flags&du&&s.memoizedState!==null&&DN(o,ss,s.memoizedState,s.memoizedProps);break;case 5:wl(s,i,o);break;case 3:case 4:var u=ss;ss=Hh(s.stateNode.containerInfo),wl(s,i,o),ss=u;break;case 22:s.memoizedState===null&&(u=s.alternate,u!==null&&u.memoizedState!==null?(u=du,du=16777216,wl(s,i,o),du=u):wl(s,i,o));break;default:wl(s,i,o)}}function Qx(s){var i=s.alternate;if(i!==null&&(s=i.child,s!==null)){i.child=null;do i=s.sibling,s.sibling=null,s=i;while(s!==null)}}function hu(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Dn=u,Wx(u,s)}Qx(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Xx(s),s=s.sibling}function Xx(s){switch(s.tag){case 0:case 11:case 15:hu(s),s.flags&2048&&ea(9,s,s.return);break;case 3:hu(s);break;case 12:hu(s);break;case 22:var i=s.stateNode;s.memoizedState!==null&&i._visibility&2&&(s.return===null||s.return.tag!==13)?(i._visibility&=-3,Rh(s)):hu(s);break;default:hu(s)}}function Rh(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Dn=u,Wx(u,s)}Qx(s)}for(s=s.child;s!==null;){switch(i=s,i.tag){case 0:case 11:case 15:ea(8,i,i.return),Rh(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Rh(i));break;default:Rh(i)}s=s.sibling}}function Wx(s,i){for(;Dn!==null;){var o=Dn;switch(o.tag){case 0:case 11:case 15:ea(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Qc(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Dn=u;else e:for(o=s;Dn!==null;){u=Dn;var p=u.sibling,y=u.return;if(Bx(u),u===o){Dn=null;break e}if(p!==null){p.return=y,Dn=p;break e}Dn=y}}}var KA={getCacheForType:function(s){var i=zn(yn),o=i.data.get(s);return o===void 0&&(o=s(),i.data.set(s,o)),o},cacheSignal:function(){return zn(yn).controller.signal}},QA=typeof WeakMap=="function"?WeakMap:Map,At=0,Vt=null,mt=null,gt=0,It=0,Ar=null,ta=!1,El=!1,Ig=!1,gi=0,nn=0,na=0,po=0,Dg=0,Nr=0,Sl=0,fu=null,pr=null,Mg=!1,jh=0,Jx=0,Ih=1/0,Dh=null,ra=null,kn=0,sa=null,Tl=null,yi=0,Pg=0,Og=null,Zx=null,mu=0,Lg=null;function Rr(){return(At&2)!==0&&gt!==0?gt&-gt:G.T!==null?Hg():Md()}function e2(){if(Nr===0)if((gt&536870912)===0||wt){var s=Ve;Ve<<=1,(Ve&3932160)===0&&(Ve=262144),Nr=s}else Nr=536870912;return s=Cr.current,s!==null&&(s.flags|=32),Nr}function gr(s,i,o){(s===Vt&&(It===2||It===9)||s.cancelPendingCommit!==null)&&(Cl(s,0),ia(s,gt,Nr,!1)),Fa(s,o),((At&2)===0||s!==Vt)&&(s===Vt&&((At&2)===0&&(po|=o),nn===4&&ia(s,gt,Nr,!1)),Is(s))}function t2(s,i,o){if((At&6)!==0)throw Error(r(327));var u=!o&&(i&127)===0&&(i&s.expiredLanes)===0||Yt(s,i),p=u?JA(s,i):Ug(s,i,!0),y=u;do{if(p===0){El&&!u&&ia(s,i,0,!1);break}else{if(o=s.current.alternate,y&&!XA(o)){p=Ug(s,i,!1),y=!1;continue}if(p===2){if(y=i,s.errorRecoveryDisabledLanes&y)var w=0;else w=s.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){i=w;e:{var D=s;p=fu;var q=D.current.memoizedState.isDehydrated;if(q&&(Cl(D,w).flags|=256),w=Ug(D,w,!1),w!==2){if(Ig&&!q){D.errorRecoveryDisabledLanes|=y,po|=y,p=4;break e}y=pr,pr=p,y!==null&&(pr===null?pr=y:pr.push.apply(pr,y))}p=w}if(y=!1,p!==2)continue}}if(p===1){Cl(s,0),ia(s,i,0,!0);break}e:{switch(u=s,y=p,y){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:ia(u,i,Nr,!ta);break e;case 2:pr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(p=jh+300-rt(),10<p)){if(ia(u,i,Nr,!ta),fn(u,0,!0)!==0)break e;yi=i,u.timeoutHandle=I2(n2.bind(null,u,o,pr,Dh,Mg,i,Nr,po,Sl,ta,y,"Throttled",-0,0),p);break e}n2(u,o,pr,Dh,Mg,i,Nr,po,Sl,ta,y,null,-0,0)}}break}while(!0);Is(s)}function n2(s,i,o,u,p,y,w,D,q,Z,ue,ye,te,se){if(s.timeoutHandle=-1,ye=i.subtreeFlags,ye&8192||(ye&16785408)===16785408){ye={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Jr},Kx(i,y,ye);var ze=(y&62914560)===y?jh-rt():(y&4194048)===y?Jx-rt():0;if(ze=MN(ye,ze),ze!==null){yi=y,s.cancelPendingCommit=ze(u2.bind(null,s,i,y,o,u,p,w,D,q,ue,ye,null,te,se)),ia(s,y,w,!Z);return}}u2(s,i,y,o,u,p,w,D,q)}function XA(s){for(var i=s;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var p=o[u],y=p.getSnapshot;p=p.value;try{if(!Sr(y(),p))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ia(s,i,o,u){i&=~Dg,i&=~po,s.suspendedLanes|=i,s.pingedLanes&=~i,u&&(s.warmLanes|=i),u=s.expirationTimes;for(var p=i;0<p;){var y=31-zt(p),w=1<<y;u[y]=-1,p&=~w}o!==0&&Ha(s,o,i)}function Mh(){return(At&6)===0?(pu(0),!1):!0}function Vg(){if(mt!==null){if(It===0)var s=mt.return;else s=mt,ai=io=null,eg(s),gl=null,Wc=0,s=mt;for(;s!==null;)Dx(s.alternate,s),s=s.return;mt=null}}function Cl(s,i){var o=s.timeoutHandle;o!==-1&&(s.timeoutHandle=-1,gN(o)),o=s.cancelPendingCommit,o!==null&&(s.cancelPendingCommit=null,o()),yi=0,Vg(),Vt=s,mt=o=si(s.current,null),gt=i,It=0,Ar=null,ta=!1,El=Yt(s,i),Ig=!1,Sl=Nr=Dg=po=na=nn=0,pr=fu=null,Mg=!1,(i&8)!==0&&(i|=i&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=i;0<u;){var p=31-zt(u),y=1<<p;i|=s[p],u&=~y}return gi=i,th(),o}function r2(s,i){lt=null,G.H=iu,i===pl||i===ch?(i=b1(),It=3):i===Fp?(i=b1(),It=4):It=i===gg?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Ar=i,mt===null&&(nn=1,Eh(s,Br(i,s.current)))}function s2(){var s=Cr.current;return s===null?!0:(gt&4194048)===gt?qr===null:(gt&62914560)===gt||(gt&536870912)!==0?s===qr:!1}function i2(){var s=G.H;return G.H=iu,s===null?iu:s}function a2(){var s=G.A;return G.A=KA,s}function Ph(){nn=4,ta||(gt&4194048)!==gt&&Cr.current!==null||(El=!0),(na&134217727)===0&&(po&134217727)===0||Vt===null||ia(Vt,gt,Nr,!1)}function Ug(s,i,o){var u=At;At|=2;var p=i2(),y=a2();(Vt!==s||gt!==i)&&(Dh=null,Cl(s,i)),i=!1;var w=nn;e:do try{if(It!==0&&mt!==null){var D=mt,q=Ar;switch(It){case 8:Vg(),w=6;break e;case 3:case 2:case 9:case 6:Cr.current===null&&(i=!0);var Z=It;if(It=0,Ar=null,kl(s,D,q,Z),o&&El){w=0;break e}break;default:Z=It,It=0,Ar=null,kl(s,D,q,Z)}}WA(),w=nn;break}catch(ue){r2(s,ue)}while(!0);return i&&s.shellSuspendCounter++,ai=io=null,At=u,G.H=p,G.A=y,mt===null&&(Vt=null,gt=0,th()),w}function WA(){for(;mt!==null;)o2(mt)}function JA(s,i){var o=At;At|=2;var u=i2(),p=a2();Vt!==s||gt!==i?(Dh=null,Ih=rt()+500,Cl(s,i)):El=Yt(s,i);e:do try{if(It!==0&&mt!==null){i=mt;var y=Ar;t:switch(It){case 1:It=0,Ar=null,kl(s,i,y,1);break;case 2:case 9:if(y1(y)){It=0,Ar=null,l2(i);break}i=function(){It!==2&&It!==9||Vt!==s||(It=7),Is(s)},y.then(i,i);break e;case 3:It=7;break e;case 4:It=5;break e;case 7:y1(y)?(It=0,Ar=null,l2(i)):(It=0,Ar=null,kl(s,i,y,7));break;case 5:var w=null;switch(mt.tag){case 26:w=mt.memoizedState;case 5:case 27:var D=mt;if(w?Y2(w):D.stateNode.complete){It=0,Ar=null;var q=D.sibling;if(q!==null)mt=q;else{var Z=D.return;Z!==null?(mt=Z,Oh(Z)):mt=null}break t}}It=0,Ar=null,kl(s,i,y,5);break;case 6:It=0,Ar=null,kl(s,i,y,6);break;case 8:Vg(),nn=6;break e;default:throw Error(r(462))}}ZA();break}catch(ue){r2(s,ue)}while(!0);return ai=io=null,G.H=u,G.A=p,At=o,mt!==null?0:(Vt=null,gt=0,th(),nn)}function ZA(){for(;mt!==null&&!Me();)o2(mt)}function o2(s){var i=jx(s.alternate,s,gi);s.memoizedProps=s.pendingProps,i===null?Oh(s):mt=i}function l2(s){var i=s,o=i.alternate;switch(i.tag){case 15:case 0:i=Tx(o,i,i.pendingProps,i.type,void 0,gt);break;case 11:i=Tx(o,i,i.pendingProps,i.type.render,i.ref,gt);break;case 5:eg(i);default:Dx(o,i),i=mt=a1(i,gi),i=jx(o,i,gi)}s.memoizedProps=s.pendingProps,i===null?Oh(s):mt=i}function kl(s,i,o,u){ai=io=null,eg(i),gl=null,Wc=0;var p=i.return;try{if(BA(s,p,i,o,gt)){nn=1,Eh(s,Br(o,s.current)),mt=null;return}}catch(y){if(p!==null)throw mt=p,y;nn=1,Eh(s,Br(o,s.current)),mt=null;return}i.flags&32768?(wt||u===1?s=!0:El||(gt&536870912)!==0?s=!1:(ta=s=!0,(u===2||u===9||u===3||u===6)&&(u=Cr.current,u!==null&&u.tag===13&&(u.flags|=16384))),c2(i,s)):Oh(i)}function Oh(s){var i=s;do{if((i.flags&32768)!==0){c2(i,ta);return}s=i.return;var o=$A(i.alternate,i,gi);if(o!==null){mt=o;return}if(i=i.sibling,i!==null){mt=i;return}mt=i=s}while(i!==null);nn===0&&(nn=5)}function c2(s,i){do{var o=qA(s.alternate,s);if(o!==null){o.flags&=32767,mt=o;return}if(o=s.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(s=s.sibling,s!==null)){mt=s;return}mt=s=o}while(s!==null);nn=6,mt=null}function u2(s,i,o,u,p,y,w,D,q){s.cancelPendingCommit=null;do Lh();while(kn!==0);if((At&6)!==0)throw Error(r(327));if(i!==null){if(i===s.current)throw Error(r(177));if(y=i.lanes|i.childLanes,y|=kp,vp(s,o,y,w,D,q),s===Vt&&(mt=Vt=null,gt=0),Tl=i,sa=s,yi=o,Pg=y,Og=p,Zx=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,rN(Kn,function(){return p2(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=G.T,G.T=null,p=ne.p,ne.p=2,w=At,At|=4;try{GA(s,i,o)}finally{At=w,ne.p=p,G.T=u}}kn=1,d2(),h2(),f2()}}function d2(){if(kn===1){kn=0;var s=sa,i=Tl,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=G.T,G.T=null;var u=ne.p;ne.p=2;var p=At;At|=4;try{qx(i,s);var y=Wg,w=Wb(s.containerInfo),D=y.focusedElem,q=y.selectionRange;if(w!==D&&D&&D.ownerDocument&&Xb(D.ownerDocument.documentElement,D)){if(q!==null&&wp(D)){var Z=q.start,ue=q.end;if(ue===void 0&&(ue=Z),"selectionStart"in D)D.selectionStart=Z,D.selectionEnd=Math.min(ue,D.value.length);else{var ye=D.ownerDocument||document,te=ye&&ye.defaultView||window;if(te.getSelection){var se=te.getSelection(),ze=D.textContent.length,We=Math.min(q.start,ze),Lt=q.end===void 0?We:Math.min(q.end,ze);!se.extend&&We>Lt&&(w=Lt,Lt=We,We=w);var K=Qb(D,We),Y=Qb(D,Lt);if(K&&Y&&(se.rangeCount!==1||se.anchorNode!==K.node||se.anchorOffset!==K.offset||se.focusNode!==Y.node||se.focusOffset!==Y.offset)){var J=ye.createRange();J.setStart(K.node,K.offset),se.removeAllRanges(),We>Lt?(se.addRange(J),se.extend(Y.node,Y.offset)):(J.setEnd(Y.node,Y.offset),se.addRange(J))}}}}for(ye=[],se=D;se=se.parentNode;)se.nodeType===1&&ye.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<ye.length;D++){var me=ye[D];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}Qh=!!Xg,Wg=Xg=null}finally{At=p,ne.p=u,G.T=o}}s.current=i,kn=2}}function h2(){if(kn===2){kn=0;var s=sa,i=Tl,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=G.T,G.T=null;var u=ne.p;ne.p=2;var p=At;At|=4;try{zx(s,i.alternate,i)}finally{At=p,ne.p=u,G.T=o}}kn=3}}function f2(){if(kn===4||kn===3){kn=0,nt();var s=sa,i=Tl,o=yi,u=Zx;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?kn=5:(kn=0,Tl=sa=null,m2(s,s.pendingLanes));var p=s.pendingLanes;if(p===0&&(ra=null),ei(o),i=i.stateNode,Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(Ft,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=G.T,p=ne.p,ne.p=2,G.T=null;try{for(var y=s.onRecoverableError,w=0;w<u.length;w++){var D=u[w];y(D.value,{componentStack:D.stack})}}finally{G.T=i,ne.p=p}}(yi&3)!==0&&Lh(),Is(s),p=s.pendingLanes,(o&261930)!==0&&(p&42)!==0?s===Lg?mu++:(mu=0,Lg=s):mu=0,pu(0)}}function m2(s,i){(s.pooledCacheLanes&=i)===0&&(i=s.pooledCache,i!=null&&(s.pooledCache=null,Qc(i)))}function Lh(){return d2(),h2(),f2(),p2()}function p2(){if(kn!==5)return!1;var s=sa,i=Pg;Pg=0;var o=ei(yi),u=G.T,p=ne.p;try{ne.p=32>o?32:o,G.T=null,o=Og,Og=null;var y=sa,w=yi;if(kn=0,Tl=sa=null,yi=0,(At&6)!==0)throw Error(r(331));var D=At;if(At|=4,Xx(y.current),Yx(y,y.current,w,o),At=D,pu(0,!1),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(Ft,y)}catch{}return!0}finally{ne.p=p,G.T=u,m2(s,i)}}function g2(s,i,o){i=Br(o,i),i=pg(s.stateNode,i,2),s=Wi(s,i,2),s!==null&&(Fa(s,2),Is(s))}function Dt(s,i,o){if(s.tag===3)g2(s,s,o);else for(;i!==null;){if(i.tag===3){g2(i,s,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ra===null||!ra.has(u))){s=Br(o,s),o=yx(2),u=Wi(i,o,2),u!==null&&(vx(o,u,i,s),Fa(u,2),Is(u));break}}i=i.return}}function zg(s,i,o){var u=s.pingCache;if(u===null){u=s.pingCache=new QA;var p=new Set;u.set(i,p)}else p=u.get(i),p===void 0&&(p=new Set,u.set(i,p));p.has(o)||(Ig=!0,p.add(o),s=eN.bind(null,s,i,o),i.then(s,s))}function eN(s,i,o){var u=s.pingCache;u!==null&&u.delete(i),s.pingedLanes|=s.suspendedLanes&o,s.warmLanes&=~o,Vt===s&&(gt&o)===o&&(nn===4||nn===3&&(gt&62914560)===gt&&300>rt()-jh?(At&2)===0&&Cl(s,0):Dg|=o,Sl===gt&&(Sl=0)),Is(s)}function y2(s,i){i===0&&(i=Pi()),s=no(s,i),s!==null&&(Fa(s,i),Is(s))}function tN(s){var i=s.memoizedState,o=0;i!==null&&(o=i.retryLane),y2(s,o)}function nN(s,i){var o=0;switch(s.tag){case 31:case 13:var u=s.stateNode,p=s.memoizedState;p!==null&&(o=p.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(i),y2(s,o)}function rN(s,i){return ge(s,i)}var Vh=null,Al=null,Bg=!1,Uh=!1,Fg=!1,aa=0;function Is(s){s!==Al&&s.next===null&&(Al===null?Vh=Al=s:Al=Al.next=s),Uh=!0,Bg||(Bg=!0,iN())}function pu(s,i){if(!Fg&&Uh){Fg=!0;do for(var o=!1,u=Vh;u!==null;){if(s!==0){var p=u.pendingLanes;if(p===0)var y=0;else{var w=u.suspendedLanes,D=u.pingedLanes;y=(1<<31-zt(42|s)+1)-1,y&=p&~(w&~D),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(o=!0,_2(u,y))}else y=gt,y=fn(u,u===Vt?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||Yt(u,y)||(o=!0,_2(u,y));u=u.next}while(o);Fg=!1}}function sN(){v2()}function v2(){Uh=Bg=!1;var s=0;aa!==0&&pN()&&(s=aa);for(var i=rt(),o=null,u=Vh;u!==null;){var p=u.next,y=b2(u,i);y===0?(u.next=null,o===null?Vh=p:o.next=p,p===null&&(Al=o)):(o=u,(s!==0||(y&3)!==0)&&(Uh=!0)),u=p}kn!==0&&kn!==5||pu(s),aa!==0&&(aa=0)}function b2(s,i){for(var o=s.suspendedLanes,u=s.pingedLanes,p=s.expirationTimes,y=s.pendingLanes&-62914561;0<y;){var w=31-zt(y),D=1<<w,q=p[w];q===-1?((D&o)===0||(D&u)!==0)&&(p[w]=Zt(D,i)):q<=i&&(s.expiredLanes|=D),y&=~D}if(i=Vt,o=gt,o=fn(s,s===i?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,o===0||s===i&&(It===2||It===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&be(u),s.callbackNode=null,s.callbackPriority=0;if((o&3)===0||Yt(s,o)){if(i=o&-o,i===s.callbackPriority)return i;switch(u!==null&&be(u),ei(o)){case 2:case 8:o=hn;break;case 32:o=Kn;break;case 268435456:o=Xt;break;default:o=Kn}return u=x2.bind(null,s),o=ge(o,u),s.callbackPriority=i,s.callbackNode=o,i}return u!==null&&u!==null&&be(u),s.callbackPriority=2,s.callbackNode=null,2}function x2(s,i){if(kn!==0&&kn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var o=s.callbackNode;if(Lh()&&s.callbackNode!==o)return null;var u=gt;return u=fn(s,s===Vt?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(t2(s,u,i),b2(s,rt()),s.callbackNode!=null&&s.callbackNode===o?x2.bind(null,s):null)}function _2(s,i){if(Lh())return null;t2(s,i,!0)}function iN(){yN(function(){(At&6)!==0?ge(Ln,sN):v2()})}function Hg(){if(aa===0){var s=fl;s===0&&(s=Te,Te<<=1,(Te&261888)===0&&(Te=256)),aa=s}return aa}function w2(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Jo(""+s)}function E2(s,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,s.id&&o.setAttribute("form",s.id),i.parentNode.insertBefore(o,i),s=new FormData(s),o.parentNode.removeChild(o),s}function aN(s,i,o,u,p){if(i==="submit"&&o&&o.stateNode===p){var y=w2((p[jn]||null).action),w=u.submitter;w&&(i=(i=w[jn]||null)?w2(i.formAction):w.getAttribute("formAction"),i!==null&&(y=i,w=null));var D=new Ts("action","action",null,u,p);s.push({event:D,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(aa!==0){var q=w?E2(p,w):new FormData(p);cg(o,{pending:!0,data:q,method:p.method,action:y},null,q)}}else typeof y=="function"&&(D.preventDefault(),q=w?E2(p,w):new FormData(p),cg(o,{pending:!0,data:q,method:p.method,action:y},y,q))},currentTarget:p}]})}}for(var $g=0;$g<Cp.length;$g++){var qg=Cp[$g],oN=qg.toLowerCase(),lN=qg[0].toUpperCase()+qg.slice(1);rs(oN,"on"+lN)}rs(e1,"onAnimationEnd"),rs(t1,"onAnimationIteration"),rs(n1,"onAnimationStart"),rs("dblclick","onDoubleClick"),rs("focusin","onFocus"),rs("focusout","onBlur"),rs(SA,"onTransitionRun"),rs(TA,"onTransitionStart"),rs(CA,"onTransitionCancel"),rs(r1,"onTransitionEnd"),_s("onMouseEnter",["mouseout","mouseover"]),_s("onMouseLeave",["mouseout","mouseover"]),_s("onPointerEnter",["pointerout","pointerover"]),_s("onPointerLeave",["pointerout","pointerover"]),xs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xs("onBeforeInput",["compositionend","keypress","textInput","paste"]),xs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gu));function S2(s,i){i=(i&4)!==0;for(var o=0;o<s.length;o++){var u=s[o],p=u.event;u=u.listeners;e:{var y=void 0;if(i)for(var w=u.length-1;0<=w;w--){var D=u[w],q=D.instance,Z=D.currentTarget;if(D=D.listener,q!==y&&p.isPropagationStopped())break e;y=D,p.currentTarget=Z;try{y(p)}catch(ue){eh(ue)}p.currentTarget=null,y=q}else for(w=0;w<u.length;w++){if(D=u[w],q=D.instance,Z=D.currentTarget,D=D.listener,q!==y&&p.isPropagationStopped())break e;y=D,p.currentTarget=Z;try{y(p)}catch(ue){eh(ue)}p.currentTarget=null,y=q}}}}function pt(s,i){var o=i[Yo];o===void 0&&(o=i[Yo]=new Set);var u=s+"__bubble";o.has(u)||(T2(i,s,2,!1),o.add(u))}function Gg(s,i,o){var u=0;i&&(u|=4),T2(o,s,u,i)}var zh="_reactListening"+Math.random().toString(36).slice(2);function Yg(s){if(!s[zh]){s[zh]=!0,Ac.forEach(function(o){o!=="selectionchange"&&(cN.has(o)||Gg(o,!1,s),Gg(o,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[zh]||(i[zh]=!0,Gg("selectionchange",!1,i))}}function T2(s,i,o,u){switch(e_(i)){case 2:var p=LN;break;case 8:p=VN;break;default:p=l0}o=p.bind(null,i,o,s),p=void 0,!Ka||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),u?p!==void 0?s.addEventListener(i,o,{capture:!0,passive:p}):s.addEventListener(i,o,!0):p!==void 0?s.addEventListener(i,o,{passive:p}):s.addEventListener(i,o,!1)}function Kg(s,i,o,u,p){var y=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var D=u.stateNode.containerInfo;if(D===p)break;if(w===4)for(w=u.return;w!==null;){var q=w.tag;if((q===3||q===4)&&w.stateNode.containerInfo===p)return;w=w.return}for(;D!==null;){if(w=vs(D),w===null)return;if(q=w.tag,q===5||q===6||q===26||q===27){u=y=w;continue e}D=D.parentNode}}u=u.return}Bi(function(){var Z=y,ue=Lr(o),ye=[];e:{var te=s1.get(s);if(te!==void 0){var se=Ts,ze=s;switch(s){case"keypress":if(Xa(o)===0)break e;case"keydown":case"keyup":se=Wd;break;case"focusin":ze="focus",se=Ja;break;case"focusout":ze="blur",se=Ja;break;case"beforeblur":case"afterblur":se=Ja;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=Bc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=Fd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=x;break;case e1:case t1:case n1:se=$d;break;case r1:se=L;break;case"scroll":case"scrollend":se=zc;break;case"wheel":se=re;break;case"copy":case"cut":case"paste":se=qd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=ri;break;case"toggle":case"beforetoggle":se=ot}var We=(i&4)!==0,Lt=!We&&(s==="scroll"||s==="scrollend"),K=We?te!==null?te+"Capture":null:te;We=[];for(var Y=Z,J;Y!==null;){var me=Y;if(J=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||J===null||K===null||(me=Zr(Y,K),me!=null&&We.push(yu(Y,me,J))),Lt)break;Y=Y.return}0<We.length&&(te=new se(te,ze,null,o,ue),ye.push({event:te,listeners:We}))}}if((i&7)===0){e:{if(te=s==="mouseover"||s==="pointerover",se=s==="mouseout"||s==="pointerout",te&&o!==Lc&&(ze=o.relatedTarget||o.fromElement)&&(vs(ze)||ze[gs]))break e;if((se||te)&&(te=ue.window===ue?ue:(te=ue.ownerDocument)?te.defaultView||te.parentWindow:window,se?(ze=o.relatedTarget||o.toElement,se=Z,ze=ze?vs(ze):null,ze!==null&&(Lt=l(ze),We=ze.tag,ze!==Lt||We!==5&&We!==27&&We!==6)&&(ze=null)):(se=null,ze=Z),se!==ze)){if(We=Bc,me="onMouseLeave",K="onMouseEnter",Y="mouse",(s==="pointerout"||s==="pointerover")&&(We=ri,me="onPointerLeave",K="onPointerEnter",Y="pointer"),Lt=se==null?te:wr(se),J=ze==null?te:wr(ze),te=new We(me,Y+"leave",se,o,ue),te.target=Lt,te.relatedTarget=J,me=null,vs(ue)===Z&&(We=new We(K,Y+"enter",ze,o,ue),We.target=J,We.relatedTarget=Lt,me=We),Lt=me,se&&ze)t:{for(We=uN,K=se,Y=ze,J=0,me=K;me;me=We(me))J++;me=0;for(var Qe=Y;Qe;Qe=We(Qe))me++;for(;0<J-me;)K=We(K),J--;for(;0<me-J;)Y=We(Y),me--;for(;J--;){if(K===Y||Y!==null&&K===Y.alternate){We=K;break t}K=We(K),Y=We(Y)}We=null}else We=null;se!==null&&C2(ye,te,se,We,!1),ze!==null&&Lt!==null&&C2(ye,Lt,ze,We,!0)}}e:{if(te=Z?wr(Z):window,se=te.nodeName&&te.nodeName.toLowerCase(),se==="select"||se==="input"&&te.type==="file")var St=Hb;else if(Bb(te))if($b)St=_A;else{St=bA;var Ye=vA}else se=te.nodeName,!se||se.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?Z&&Wo(Z.elementType)&&(St=Hb):St=xA;if(St&&(St=St(s,Z))){Fb(ye,St,o,ue);break e}Ye&&Ye(s,te,Z),s==="focusout"&&Z&&te.type==="number"&&Z.memoizedProps.value!=null&&Mc(te,"number",te.value)}switch(Ye=Z?wr(Z):window,s){case"focusin":(Bb(Ye)||Ye.contentEditable==="true")&&(il=Ye,Ep=Z,Gc=null);break;case"focusout":Gc=Ep=il=null;break;case"mousedown":Sp=!0;break;case"contextmenu":case"mouseup":case"dragend":Sp=!1,Jb(ye,o,ue);break;case"selectionchange":if(EA)break;case"keydown":case"keyup":Jb(ye,o,ue)}var ct;if(kt)e:{switch(s){case"compositionstart":var yt="onCompositionStart";break e;case"compositionend":yt="onCompositionEnd";break e;case"compositionupdate":yt="onCompositionUpdate";break e}yt=void 0}else sl?Za(s,o)&&(yt="onCompositionEnd"):s==="keydown"&&o.keyCode===229&&(yt="onCompositionStart");yt&&(As&&o.locale!=="ko"&&(sl||yt!=="onCompositionStart"?yt==="onCompositionEnd"&&sl&&(ct=Uc()):(Ss=ue,Vc="value"in Ss?Ss.value:Ss.textContent,sl=!0)),Ye=Bh(Z,yt),0<Ye.length&&(yt=new ks(yt,s,null,o,ue),ye.push({event:yt,listeners:Ye}),ct?yt.data=ct:(ct=rl(o),ct!==null&&(yt.data=ct)))),(ct=Ur?mA(s,o):pA(s,o))&&(yt=Bh(Z,"onBeforeInput"),0<yt.length&&(Ye=new ks("onBeforeInput","beforeinput",null,o,ue),ye.push({event:Ye,listeners:yt}),Ye.data=ct)),aN(ye,s,Z,o,ue)}S2(ye,i)})}function yu(s,i,o){return{instance:s,listener:i,currentTarget:o}}function Bh(s,i){for(var o=i+"Capture",u=[];s!==null;){var p=s,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=Zr(s,o),p!=null&&u.unshift(yu(s,p,y)),p=Zr(s,i),p!=null&&u.push(yu(s,p,y))),s.tag===3)return u;s=s.return}return[]}function uN(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function C2(s,i,o,u,p){for(var y=i._reactName,w=[];o!==null&&o!==u;){var D=o,q=D.alternate,Z=D.stateNode;if(D=D.tag,q!==null&&q===u)break;D!==5&&D!==26&&D!==27||Z===null||(q=Z,p?(Z=Zr(o,y),Z!=null&&w.unshift(yu(o,Z,q))):p||(Z=Zr(o,y),Z!=null&&w.push(yu(o,Z,q)))),o=o.return}w.length!==0&&s.push({event:i,listeners:w})}var dN=/\r\n?/g,hN=/\u0000|\uFFFD/g;function k2(s){return(typeof s=="string"?s:""+s).replace(dN,`
`).replace(hN,"")}function A2(s,i){return i=k2(i),k2(s)===i}function Ot(s,i,o,u,p,y){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||dr(s,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&dr(s,""+u);break;case"className":Er(s,"class",u);break;case"tabIndex":Er(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Er(s,o,u);break;case"style":Oc(s,u,y);break;case"data":if(i!=="object"){Er(s,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){s.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(o);break}u=Jo(""+u),s.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(i!=="input"&&Ot(s,i,"name",p.name,p,null),Ot(s,i,"formEncType",p.formEncType,p,null),Ot(s,i,"formMethod",p.formMethod,p,null),Ot(s,i,"formTarget",p.formTarget,p,null)):(Ot(s,i,"encType",p.encType,p,null),Ot(s,i,"method",p.method,p,null),Ot(s,i,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(o);break}u=Jo(""+u),s.setAttribute(o,u);break;case"onClick":u!=null&&(s.onclick=Jr);break;case"onScroll":u!=null&&pt("scroll",s);break;case"onScrollEnd":u!=null&&pt("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(p.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}o=Jo(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,""+u):s.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,""):s.removeAttribute(o);break;case"capture":case"download":u===!0?s.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,u):s.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(o,u):s.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(o):s.setAttribute(o,u);break;case"popover":pt("beforetoggle",s),pt("toggle",s),Qo(s,"popover",u);break;case"xlinkActuate":gn(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":gn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":gn(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":gn(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":gn(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":gn(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":gn(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":gn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":gn(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Qo(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Bd.get(o)||o,Qo(s,o,u))}}function Qg(s,i,o,u,p,y){switch(o){case"style":Oc(s,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(p.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"children":typeof u=="string"?dr(s,u):(typeof u=="number"||typeof u=="bigint")&&dr(s,""+u);break;case"onScroll":u!=null&&pt("scroll",s);break;case"onScrollEnd":u!=null&&pt("scrollend",s);break;case"onClick":u!=null&&(s.onclick=Jr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Nc.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(p=o.endsWith("Capture"),i=o.slice(2,p?o.length-7:void 0),y=s[jn]||null,y=y!=null?y[o]:null,typeof y=="function"&&s.removeEventListener(i,y,p),typeof u=="function")){typeof y!="function"&&y!==null&&(o in s?s[o]=null:s.hasAttribute(o)&&s.removeAttribute(o)),s.addEventListener(i,u,p);break e}o in s?s[o]=u:u===!0?s.setAttribute(o,""):Qo(s,o,u)}}}function Fn(s,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pt("error",s),pt("load",s);var u=!1,p=!1,y;for(y in o)if(o.hasOwnProperty(y)){var w=o[y];if(w!=null)switch(y){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Ot(s,i,y,w,o,null)}}p&&Ot(s,i,"srcSet",o.srcSet,o,null),u&&Ot(s,i,"src",o.src,o,null);return;case"input":pt("invalid",s);var D=y=w=p=null,q=null,Z=null;for(u in o)if(o.hasOwnProperty(u)){var ue=o[u];if(ue!=null)switch(u){case"name":p=ue;break;case"type":w=ue;break;case"checked":q=ue;break;case"defaultChecked":Z=ue;break;case"value":y=ue;break;case"defaultValue":D=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,i));break;default:Ot(s,i,u,ue,o,null)}}Vd(s,y,D,q,Z,w,p,!1);return;case"select":pt("invalid",s),u=w=y=null;for(p in o)if(o.hasOwnProperty(p)&&(D=o[p],D!=null))switch(p){case"value":y=D;break;case"defaultValue":w=D;break;case"multiple":u=D;default:Ot(s,i,p,D,o,null)}i=y,o=w,s.multiple=!!u,i!=null?Li(s,!!u,i,!1):o!=null&&Li(s,!!u,o,!0);return;case"textarea":pt("invalid",s),y=p=u=null;for(w in o)if(o.hasOwnProperty(w)&&(D=o[w],D!=null))switch(w){case"value":u=D;break;case"defaultValue":p=D;break;case"children":y=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(r(91));break;default:Ot(s,i,w,D,o,null)}Vi(s,u,p,y);return;case"option":for(q in o)if(o.hasOwnProperty(q)&&(u=o[q],u!=null))switch(q){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Ot(s,i,q,u,o,null)}return;case"dialog":pt("beforetoggle",s),pt("toggle",s),pt("cancel",s),pt("close",s);break;case"iframe":case"object":pt("load",s);break;case"video":case"audio":for(u=0;u<gu.length;u++)pt(gu[u],s);break;case"image":pt("error",s),pt("load",s);break;case"details":pt("toggle",s);break;case"embed":case"source":case"link":pt("error",s),pt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in o)if(o.hasOwnProperty(Z)&&(u=o[Z],u!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Ot(s,i,Z,u,o,null)}return;default:if(Wo(i)){for(ue in o)o.hasOwnProperty(ue)&&(u=o[ue],u!==void 0&&Qg(s,i,ue,u,o,void 0));return}}for(D in o)o.hasOwnProperty(D)&&(u=o[D],u!=null&&Ot(s,i,D,u,o,null))}function fN(s,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,w=null,D=null,q=null,Z=null,ue=null;for(se in o){var ye=o[se];if(o.hasOwnProperty(se)&&ye!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":q=ye;default:u.hasOwnProperty(se)||Ot(s,i,se,null,u,ye)}}for(var te in u){var se=u[te];if(ye=o[te],u.hasOwnProperty(te)&&(se!=null||ye!=null))switch(te){case"type":y=se;break;case"name":p=se;break;case"checked":Z=se;break;case"defaultChecked":ue=se;break;case"value":w=se;break;case"defaultValue":D=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,i));break;default:se!==ye&&Ot(s,i,te,se,u,ye)}}Xo(s,w,D,q,Z,ue,y,p);return;case"select":se=w=D=te=null;for(y in o)if(q=o[y],o.hasOwnProperty(y)&&q!=null)switch(y){case"value":break;case"multiple":se=q;default:u.hasOwnProperty(y)||Ot(s,i,y,null,u,q)}for(p in u)if(y=u[p],q=o[p],u.hasOwnProperty(p)&&(y!=null||q!=null))switch(p){case"value":te=y;break;case"defaultValue":D=y;break;case"multiple":w=y;default:y!==q&&Ot(s,i,p,y,u,q)}i=D,o=w,u=se,te!=null?Li(s,!!o,te,!1):!!u!=!!o&&(i!=null?Li(s,!!o,i,!0):Li(s,!!o,o?[]:"",!1));return;case"textarea":se=te=null;for(D in o)if(p=o[D],o.hasOwnProperty(D)&&p!=null&&!u.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:Ot(s,i,D,null,u,p)}for(w in u)if(p=u[w],y=o[w],u.hasOwnProperty(w)&&(p!=null||y!=null))switch(w){case"value":te=p;break;case"defaultValue":se=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(r(91));break;default:p!==y&&Ot(s,i,w,p,u,y)}Ud(s,te,se);return;case"option":for(var ze in o)if(te=o[ze],o.hasOwnProperty(ze)&&te!=null&&!u.hasOwnProperty(ze))switch(ze){case"selected":s.selected=!1;break;default:Ot(s,i,ze,null,u,te)}for(q in u)if(te=u[q],se=o[q],u.hasOwnProperty(q)&&te!==se&&(te!=null||se!=null))switch(q){case"selected":s.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:Ot(s,i,q,te,u,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var We in o)te=o[We],o.hasOwnProperty(We)&&te!=null&&!u.hasOwnProperty(We)&&Ot(s,i,We,null,u,te);for(Z in u)if(te=u[Z],se=o[Z],u.hasOwnProperty(Z)&&te!==se&&(te!=null||se!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,i));break;default:Ot(s,i,Z,te,u,se)}return;default:if(Wo(i)){for(var Lt in o)te=o[Lt],o.hasOwnProperty(Lt)&&te!==void 0&&!u.hasOwnProperty(Lt)&&Qg(s,i,Lt,void 0,u,te);for(ue in u)te=u[ue],se=o[ue],!u.hasOwnProperty(ue)||te===se||te===void 0&&se===void 0||Qg(s,i,ue,te,u,se);return}}for(var K in o)te=o[K],o.hasOwnProperty(K)&&te!=null&&!u.hasOwnProperty(K)&&Ot(s,i,K,null,u,te);for(ye in u)te=u[ye],se=o[ye],!u.hasOwnProperty(ye)||te===se||te==null&&se==null||Ot(s,i,ye,te,u,se)}function N2(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function mN(){if(typeof performance.getEntriesByType=="function"){for(var s=0,i=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var p=o[u],y=p.transferSize,w=p.initiatorType,D=p.duration;if(y&&D&&N2(w)){for(w=0,D=p.responseEnd,u+=1;u<o.length;u++){var q=o[u],Z=q.startTime;if(Z>D)break;var ue=q.transferSize,ye=q.initiatorType;ue&&N2(ye)&&(q=q.responseEnd,w+=ue*(q<D?1:(D-Z)/(q-Z)))}if(--u,i+=8*(y+w)/(p.duration/1e3),s++,10<s)break}}if(0<s)return i/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Xg=null,Wg=null;function Fh(s){return s.nodeType===9?s:s.ownerDocument}function R2(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function j2(s,i){if(s===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&i==="foreignObject"?0:s}function Jg(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Zg=null;function pN(){var s=window.event;return s&&s.type==="popstate"?s===Zg?!1:(Zg=s,!0):(Zg=null,!1)}var I2=typeof setTimeout=="function"?setTimeout:void 0,gN=typeof clearTimeout=="function"?clearTimeout:void 0,D2=typeof Promise=="function"?Promise:void 0,yN=typeof queueMicrotask=="function"?queueMicrotask:typeof D2<"u"?function(s){return D2.resolve(null).then(s).catch(vN)}:I2;function vN(s){setTimeout(function(){throw s})}function oa(s){return s==="head"}function M2(s,i){var o=i,u=0;do{var p=o.nextSibling;if(s.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"||o==="/&"){if(u===0){s.removeChild(p),Il(i);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")vu(s.ownerDocument.documentElement);else if(o==="head"){o=s.ownerDocument.head,vu(o);for(var y=o.firstChild;y;){var w=y.nextSibling,D=y.nodeName;y[ys]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&y.rel.toLowerCase()==="stylesheet"||o.removeChild(y),y=w}}else o==="body"&&vu(s.ownerDocument.body);o=p}while(o);Il(i)}function P2(s,i){var o=s;s=0;do{var u=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(s===0)break;s--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||s++;o=u}while(o)}function e0(s){var i=s.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":e0(o),Ko(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}s.removeChild(o)}}function bN(s,i,o,u){for(;s.nodeType===1;){var p=o;if(s.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[ys])switch(i){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(y=s.getAttribute("rel"),y==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(y!==p.rel||s.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||s.getAttribute("title")!==(p.title==null?null:p.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(y=s.getAttribute("src"),(y!==(p.src==null?null:p.src)||s.getAttribute("type")!==(p.type==null?null:p.type)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(i==="input"&&s.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&s.getAttribute("name")===y)return s}else return s;if(s=Gr(s.nextSibling),s===null)break}return null}function xN(s,i,o){if(i==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=Gr(s.nextSibling),s===null))return null;return s}function O2(s,i){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!i||(s=Gr(s.nextSibling),s===null))return null;return s}function t0(s){return s.data==="$?"||s.data==="$~"}function n0(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function _N(s,i){var o=s.ownerDocument;if(s.data==="$~")s._reactRetry=i;else if(s.data!=="$?"||o.readyState!=="loading")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function Gr(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return s}var r0=null;function L2(s){s=s.nextSibling;for(var i=0;s;){if(s.nodeType===8){var o=s.data;if(o==="/$"||o==="/&"){if(i===0)return Gr(s.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}s=s.nextSibling}return null}function V2(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var o=s.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return s;i--}else o!=="/$"&&o!=="/&"||i++}s=s.previousSibling}return null}function U2(s,i,o){switch(i=Fh(o),s){case"html":if(s=i.documentElement,!s)throw Error(r(452));return s;case"head":if(s=i.head,!s)throw Error(r(453));return s;case"body":if(s=i.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function vu(s){for(var i=s.attributes;i.length;)s.removeAttributeNode(i[0]);Ko(s)}var Yr=new Map,z2=new Set;function Hh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var vi=ne.d;ne.d={f:wN,r:EN,D:SN,C:TN,L:CN,m:kN,X:NN,S:AN,M:RN};function wN(){var s=vi.f(),i=Mh();return s||i}function EN(s){var i=Or(s);i!==null&&i.tag===5&&i.type==="form"?rx(i):vi.r(s)}var Nl=typeof document>"u"?null:document;function B2(s,i,o){var u=Nl;if(u&&typeof i=="string"&&i){var p=ur(i);p='link[rel="'+s+'"][href="'+p+'"]',typeof o=="string"&&(p+='[crossorigin="'+o+'"]'),z2.has(p)||(z2.add(p),s={rel:s,crossOrigin:o,href:i},u.querySelector(p)===null&&(i=u.createElement("link"),Fn(i,"link",s),pn(i),u.head.appendChild(i)))}}function SN(s){vi.D(s),B2("dns-prefetch",s,null)}function TN(s,i){vi.C(s,i),B2("preconnect",s,i)}function CN(s,i,o){vi.L(s,i,o);var u=Nl;if(u&&s&&i){var p='link[rel="preload"][as="'+ur(i)+'"]';i==="image"&&o&&o.imageSrcSet?(p+='[imagesrcset="'+ur(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(p+='[imagesizes="'+ur(o.imageSizes)+'"]')):p+='[href="'+ur(s)+'"]';var y=p;switch(i){case"style":y=Rl(s);break;case"script":y=jl(s)}Yr.has(y)||(s=b({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:s,as:i},o),Yr.set(y,s),u.querySelector(p)!==null||i==="style"&&u.querySelector(bu(y))||i==="script"&&u.querySelector(xu(y))||(i=u.createElement("link"),Fn(i,"link",s),pn(i),u.head.appendChild(i)))}}function kN(s,i){vi.m(s,i);var o=Nl;if(o&&s){var u=i&&typeof i.as=="string"?i.as:"script",p='link[rel="modulepreload"][as="'+ur(u)+'"][href="'+ur(s)+'"]',y=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=jl(s)}if(!Yr.has(y)&&(s=b({rel:"modulepreload",href:s},i),Yr.set(y,s),o.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(xu(y)))return}u=o.createElement("link"),Fn(u,"link",s),pn(u),o.head.appendChild(u)}}}function AN(s,i,o){vi.S(s,i,o);var u=Nl;if(u&&s){var p=bs(u).hoistableStyles,y=Rl(s);i=i||"default";var w=p.get(y);if(!w){var D={loading:0,preload:null};if(w=u.querySelector(bu(y)))D.loading=5;else{s=b({rel:"stylesheet",href:s,"data-precedence":i},o),(o=Yr.get(y))&&s0(s,o);var q=w=u.createElement("link");pn(q),Fn(q,"link",s),q._p=new Promise(function(Z,ue){q.onload=Z,q.onerror=ue}),q.addEventListener("load",function(){D.loading|=1}),q.addEventListener("error",function(){D.loading|=2}),D.loading|=4,$h(w,i,u)}w={type:"stylesheet",instance:w,count:1,state:D},p.set(y,w)}}}function NN(s,i){vi.X(s,i);var o=Nl;if(o&&s){var u=bs(o).hoistableScripts,p=jl(s),y=u.get(p);y||(y=o.querySelector(xu(p)),y||(s=b({src:s,async:!0},i),(i=Yr.get(p))&&i0(s,i),y=o.createElement("script"),pn(y),Fn(y,"link",s),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function RN(s,i){vi.M(s,i);var o=Nl;if(o&&s){var u=bs(o).hoistableScripts,p=jl(s),y=u.get(p);y||(y=o.querySelector(xu(p)),y||(s=b({src:s,async:!0,type:"module"},i),(i=Yr.get(p))&&i0(s,i),y=o.createElement("script"),pn(y),Fn(y,"link",s),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function F2(s,i,o,u){var p=(p=_e.current)?Hh(p):null;if(!p)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Rl(o.href),o=bs(p).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){s=Rl(o.href);var y=bs(p).hoistableStyles,w=y.get(s);if(w||(p=p.ownerDocument||p,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(s,w),(y=p.querySelector(bu(s)))&&!y._p&&(w.instance=y,w.state.loading=5),Yr.has(s)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Yr.set(s,o),y||jN(p,s,o,w.state))),i&&u===null)throw Error(r(528,""));return w}if(i&&u!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=jl(o),o=bs(p).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Rl(s){return'href="'+ur(s)+'"'}function bu(s){return'link[rel="stylesheet"]['+s+"]"}function H2(s){return b({},s,{"data-precedence":s.precedence,precedence:null})}function jN(s,i,o,u){s.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=s.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Fn(i,"link",o),pn(i),s.head.appendChild(i))}function jl(s){return'[src="'+ur(s)+'"]'}function xu(s){return"script[async]"+s}function $2(s,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=s.querySelector('style[data-href~="'+ur(o.href)+'"]');if(u)return i.instance=u,pn(u),u;var p=b({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),pn(u),Fn(u,"style",p),$h(u,o.precedence,s),i.instance=u;case"stylesheet":p=Rl(o.href);var y=s.querySelector(bu(p));if(y)return i.state.loading|=4,i.instance=y,pn(y),y;u=H2(o),(p=Yr.get(p))&&s0(u,p),y=(s.ownerDocument||s).createElement("link"),pn(y);var w=y;return w._p=new Promise(function(D,q){w.onload=D,w.onerror=q}),Fn(y,"link",u),i.state.loading|=4,$h(y,o.precedence,s),i.instance=y;case"script":return y=jl(o.src),(p=s.querySelector(xu(y)))?(i.instance=p,pn(p),p):(u=o,(p=Yr.get(y))&&(u=b({},o),i0(u,p)),s=s.ownerDocument||s,p=s.createElement("script"),pn(p),Fn(p,"link",u),s.head.appendChild(p),i.instance=p);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,$h(u,o.precedence,s));return i.instance}function $h(s,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,y=p,w=0;w<u.length;w++){var D=u[w];if(D.dataset.precedence===i)y=D;else if(y!==p)break}y?y.parentNode.insertBefore(s,y.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(s,i.firstChild))}function s0(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.title==null&&(s.title=i.title)}function i0(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.integrity==null&&(s.integrity=i.integrity)}var qh=null;function q2(s,i,o){if(qh===null){var u=new Map,p=qh=new Map;p.set(o,u)}else p=qh,u=p.get(o),u||(u=new Map,p.set(o,u));if(u.has(s))return u;for(u.set(s,null),o=o.getElementsByTagName(s),p=0;p<o.length;p++){var y=o[p];if(!(y[ys]||y[mn]||s==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var w=y.getAttribute(i)||"";w=s+w;var D=u.get(w);D?D.push(y):u.set(w,[y])}}return u}function G2(s,i,o){s=s.ownerDocument||s,s.head.insertBefore(o,i==="title"?s.querySelector("head > title"):null)}function IN(s,i,o){if(o===1||i.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return s=i.disabled,typeof i.precedence=="string"&&s==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Y2(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function DN(s,i,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var p=Rl(u.href),y=i.querySelector(bu(p));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(s.count++,s=Gh.bind(s),i.then(s,s)),o.state.loading|=4,o.instance=y,pn(y);return}y=i.ownerDocument||i,u=H2(u),(p=Yr.get(p))&&s0(u,p),y=y.createElement("link"),pn(y);var w=y;w._p=new Promise(function(D,q){w.onload=D,w.onerror=q}),Fn(y,"link",u),o.instance=y}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(s.count++,o=Gh.bind(s),i.addEventListener("load",o),i.addEventListener("error",o))}}var a0=0;function MN(s,i){return s.stylesheets&&s.count===0&&Kh(s,s.stylesheets),0<s.count||0<s.imgCount?function(o){var u=setTimeout(function(){if(s.stylesheets&&Kh(s,s.stylesheets),s.unsuspend){var y=s.unsuspend;s.unsuspend=null,y()}},6e4+i);0<s.imgBytes&&a0===0&&(a0=62500*mN());var p=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Kh(s,s.stylesheets),s.unsuspend)){var y=s.unsuspend;s.unsuspend=null,y()}},(s.imgBytes>a0?50:800)+i);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(u),clearTimeout(p)}}:null}function Gh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Kh(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Yh=null;function Kh(s,i){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Yh=new Map,i.forEach(PN,s),Yh=null,Gh.call(s))}function PN(s,i){if(!(i.state.loading&4)){var o=Yh.get(s);if(o)var u=o.get(null);else{o=new Map,Yh.set(s,o);for(var p=s.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var w=p[y];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),u=w)}u&&o.set(null,u)}p=i.instance,w=p.getAttribute("data-precedence"),y=o.get(w)||u,y===u&&o.set(null,p),o.set(w,p),this.count++,u=Gh.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),y?y.parentNode.insertBefore(p,y.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(p,s.firstChild)),i.state.loading|=4}}var _u={$$typeof:R,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function ON(s,i,o,u,p,y,w,D,q){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ps(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ps(0),this.hiddenUpdates=ps(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function K2(s,i,o,u,p,y,w,D,q,Z,ue,ye){return s=new ON(s,i,o,w,q,Z,ue,ye,D),i=1,y===!0&&(i|=24),y=Tr(3,null,null,i),s.current=y,y.stateNode=s,i=Up(),i.refCount++,s.pooledCache=i,i.refCount++,y.memoizedState={element:u,isDehydrated:o,cache:i},Hp(y),s}function Q2(s){return s?(s=ll,s):ll}function X2(s,i,o,u,p,y){p=Q2(p),u.context===null?u.context=p:u.pendingContext=p,u=Xi(i),u.payload={element:o},y=y===void 0?null:y,y!==null&&(u.callback=y),o=Wi(s,u,i),o!==null&&(gr(o,s,i),Zc(o,s,i))}function W2(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var o=s.retryLane;s.retryLane=o!==0&&o<i?o:i}}function o0(s,i){W2(s,i),(s=s.alternate)&&W2(s,i)}function J2(s){if(s.tag===13||s.tag===31){var i=no(s,67108864);i!==null&&gr(i,s,67108864),o0(s,67108864)}}function Z2(s){if(s.tag===13||s.tag===31){var i=Rr();i=$a(i);var o=no(s,i);o!==null&&gr(o,s,i),o0(s,i)}}var Qh=!0;function LN(s,i,o,u){var p=G.T;G.T=null;var y=ne.p;try{ne.p=2,l0(s,i,o,u)}finally{ne.p=y,G.T=p}}function VN(s,i,o,u){var p=G.T;G.T=null;var y=ne.p;try{ne.p=8,l0(s,i,o,u)}finally{ne.p=y,G.T=p}}function l0(s,i,o,u){if(Qh){var p=c0(u);if(p===null)Kg(s,i,u,Xh,o),t_(s,u);else if(zN(p,s,i,o,u))u.stopPropagation();else if(t_(s,u),i&4&&-1<UN.indexOf(s)){for(;p!==null;){var y=Or(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var w=_t(y.pendingLanes);if(w!==0){var D=y;for(D.pendingLanes|=2,D.entangledLanes|=2;w;){var q=1<<31-zt(w);D.entanglements[1]|=q,w&=~q}Is(y),(At&6)===0&&(Ih=rt()+500,pu(0))}}break;case 31:case 13:D=no(y,2),D!==null&&gr(D,y,2),Mh(),o0(y,2)}if(y=c0(u),y===null&&Kg(s,i,u,Xh,o),y===p)break;p=y}p!==null&&u.stopPropagation()}else Kg(s,i,u,null,o)}}function c0(s){return s=Lr(s),u0(s)}var Xh=null;function u0(s){if(Xh=null,s=vs(s),s!==null){var i=l(s);if(i===null)s=null;else{var o=i.tag;if(o===13){if(s=c(i),s!==null)return s;s=null}else if(o===31){if(s=h(i),s!==null)return s;s=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null)}}return Xh=s,null}function e_(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Rn()){case Ln:return 2;case hn:return 8;case Kn:case Js:return 32;case Xt:return 268435456;default:return 32}default:return 32}}var d0=!1,la=null,ca=null,ua=null,wu=new Map,Eu=new Map,da=[],UN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function t_(s,i){switch(s){case"focusin":case"focusout":la=null;break;case"dragenter":case"dragleave":ca=null;break;case"mouseover":case"mouseout":ua=null;break;case"pointerover":case"pointerout":wu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eu.delete(i.pointerId)}}function Su(s,i,o,u,p,y){return s===null||s.nativeEvent!==y?(s={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:y,targetContainers:[p]},i!==null&&(i=Or(i),i!==null&&J2(i)),s):(s.eventSystemFlags|=u,i=s.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),s)}function zN(s,i,o,u,p){switch(i){case"focusin":return la=Su(la,s,i,o,u,p),!0;case"dragenter":return ca=Su(ca,s,i,o,u,p),!0;case"mouseover":return ua=Su(ua,s,i,o,u,p),!0;case"pointerover":var y=p.pointerId;return wu.set(y,Su(wu.get(y)||null,s,i,o,u,p)),!0;case"gotpointercapture":return y=p.pointerId,Eu.set(y,Su(Eu.get(y)||null,s,i,o,u,p)),!0}return!1}function n_(s){var i=vs(s.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){s.blockedOn=i,Xr(s.priority,function(){Z2(o)});return}}else if(i===31){if(i=h(o),i!==null){s.blockedOn=i,Xr(s.priority,function(){Z2(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){s.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Wh(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var o=c0(s.nativeEvent);if(o===null){o=s.nativeEvent;var u=new o.constructor(o.type,o);Lc=u,o.target.dispatchEvent(u),Lc=null}else return i=Or(o),i!==null&&J2(i),s.blockedOn=o,!1;i.shift()}return!0}function r_(s,i,o){Wh(s)&&o.delete(i)}function BN(){d0=!1,la!==null&&Wh(la)&&(la=null),ca!==null&&Wh(ca)&&(ca=null),ua!==null&&Wh(ua)&&(ua=null),wu.forEach(r_),Eu.forEach(r_)}function Jh(s,i){s.blockedOn===i&&(s.blockedOn=null,d0||(d0=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,BN)))}var Zh=null;function s_(s){Zh!==s&&(Zh=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Zh===s&&(Zh=null);for(var i=0;i<s.length;i+=3){var o=s[i],u=s[i+1],p=s[i+2];if(typeof u!="function"){if(u0(u||o)===null)continue;break}var y=Or(o);y!==null&&(s.splice(i,3),i-=3,cg(y,{pending:!0,data:p,method:o.method,action:u},u,p))}}))}function Il(s){function i(q){return Jh(q,s)}la!==null&&Jh(la,s),ca!==null&&Jh(ca,s),ua!==null&&Jh(ua,s),wu.forEach(i),Eu.forEach(i);for(var o=0;o<da.length;o++){var u=da[o];u.blockedOn===s&&(u.blockedOn=null)}for(;0<da.length&&(o=da[0],o.blockedOn===null);)n_(o),o.blockedOn===null&&da.shift();if(o=(s.ownerDocument||s).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var p=o[u],y=o[u+1],w=p[jn]||null;if(typeof y=="function")w||s_(o);else if(w){var D=null;if(y&&y.hasAttribute("formAction")){if(p=y,w=y[jn]||null)D=w.formAction;else if(u0(p)!==null)continue}else D=w.action;typeof D=="function"?o[u+1]=D:(o.splice(u,3),u-=3),s_(o)}}}function i_(){function s(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(w){return p=w})},focusReset:"manual",scroll:"manual"})}function i(){p!==null&&(p(),p=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,p=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),p!==null&&(p(),p=null)}}}function h0(s){this._internalRoot=s}ef.prototype.render=h0.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,u=Rr();X2(o,u,s,i,null,null)},ef.prototype.unmount=h0.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;X2(s.current,2,null,s,null,null),Mh(),i[gs]=null}};function ef(s){this._internalRoot=s}ef.prototype.unstable_scheduleHydration=function(s){if(s){var i=Md();s={blockedOn:null,target:s,priority:i};for(var o=0;o<da.length&&i!==0&&i<da[o].priority;o++);da.splice(o,0,s),o===0&&n_(s)}};var a_=e.version;if(a_!=="19.2.3")throw Error(r(527,a_,"19.2.3"));ne.findDOMNode=function(s){var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=g(i),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var FN={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tf.isDisabled&&tf.supportsFiber)try{Ft=tf.inject(FN),Jt=tf}catch{}}return Cu.createRoot=function(s,i){if(!a(s))throw Error(r(299));var o=!1,u="",p=fx,y=mx,w=px;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(p=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError)),i=K2(s,1,!1,null,null,o,u,null,p,y,w,i_),s[gs]=i.current,Yg(s),new h0(i)},Cu.hydrateRoot=function(s,i,o){if(!a(s))throw Error(r(299));var u=!1,p="",y=fx,w=mx,D=px,q=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(D=o.onRecoverableError),o.formState!==void 0&&(q=o.formState)),i=K2(s,1,!0,i,o??null,u,p,q,y,w,D,i_),i.context=Q2(null),o=i.current,u=Rr(),u=$a(u),p=Xi(u),p.callback=null,Wi(o,p,u),o=u,i.current.lanes=o,Fa(i,o),Is(i),s[gs]=i.current,Yg(s),new ef(i)},Cu.version="19.2.3",Cu}var g_;function ZN(){if(g_)return p0.exports;g_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),p0.exports=JN(),p0.exports}var eR=ZN();const tR=()=>{};var y_={};const VS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let a=t.charCodeAt(r);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},nR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const a=t[n++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=t[n++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=t[n++],c=t[n++],h=t[n++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const l=t[n++],c=t[n++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},US={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<t.length;a+=3){const l=t[a],c=a+1<t.length,h=c?t[a+1]:0,m=a+2<t.length,g=m?t[a+2]:0,v=l>>2,b=(l&3)<<4|h>>4;let _=(h&15)<<2|g>>6,C=g&63;m||(C=64,c||(_=64)),r.push(n[v],n[b],n[_],n[C])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(VS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):nR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<t.length;){const l=n[t.charAt(a++)],h=a<t.length?n[t.charAt(a)]:0;++a;const g=a<t.length?n[t.charAt(a)]:64;++a;const b=a<t.length?n[t.charAt(a)]:64;if(++a,l==null||h==null||g==null||b==null)throw new rR;const _=l<<2|h>>4;if(r.push(_),g!==64){const C=h<<4&240|g>>2;if(r.push(C),b!==64){const N=g<<6&192|b;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class rR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sR=function(t){const e=VS(t);return US.encodeByteArray(e,!0)},qf=function(t){return sR(t).replace(/\./g,"")},zS=function(t){try{return US.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function iR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const aR=()=>iR().__FIREBASE_DEFAULTS__,oR=()=>{if(typeof process>"u"||typeof y_>"u")return;const t=y_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&zS(t[1]);return e&&JSON.parse(e)},Nm=()=>{try{return tR()||aR()||oR()||lR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},BS=t=>Nm()?.emulatorHosts?.[t],FS=t=>{const e=BS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},HS=()=>Nm()?.config,$S=t=>Nm()?.[`_${t}`];class cR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function Po(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function sv(t){return(await fetch(t,{credentials:"include"})).ok}function qS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",a=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...t};return[qf(JSON.stringify(n)),qf(JSON.stringify(c)),""].join(".")}const Fu={};function uR(){const t={prod:[],emulator:[]};for(const e of Object.keys(Fu))Fu[e]?t.emulator.push(e):t.prod.push(e);return t}function dR(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let v_=!1;function iv(t,e){if(typeof window>"u"||typeof document>"u"||!Po(window.location.host)||Fu[t]===e||Fu[t]||v_)return;Fu[t]=e;function n(_){return`__firebase__banner__${_}`}const r="__firebase__banner",l=uR().prod.length>0;function c(){const _=document.getElementById(r);_&&_.remove()}function h(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function m(_,C){_.setAttribute("width","24"),_.setAttribute("id",C),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function g(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{v_=!0,c()},_}function v(_,C){_.setAttribute("id",C),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function b(){const _=dR(r),C=n("text"),N=document.getElementById(C)||document.createElement("span"),j=n("learnmore"),k=document.getElementById(j)||document.createElement("a"),B=n("preprendIcon"),$=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const R=_.element;h(R),v(k,j);const V=g();m($,B),R.append($,N,k,V),document.body.appendChild(R)}l?(N.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function tr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tr())}function fR(){const t=Nm()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function gR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yR(){const t=tr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function vR(){return!fR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bR(){try{return typeof indexedDB=="object"}catch{return!1}}function xR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(n){e(n)}})}const _R="FirebaseError";class Ks extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=_R,Object.setPrototypeOf(this,Ks.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,md.prototype.create)}}class md{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?wR(l,r):"Error",h=`${this.serviceName}: ${c} (${a}).`;return new Ks(a,h,r)}}function wR(t,e){return t.replace(ER,(n,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const ER=/\{\$([^}]+)}/g;function SR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ai(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const a of n){if(!r.includes(a))return!1;const l=t[a],c=e[a];if(b_(l)&&b_(c)){if(!Ai(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!n.includes(a))return!1;return!0}function b_(t){return t!==null&&typeof t=="object"}function pd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Du(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Mu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function TR(t,e){const n=new CR(t,e);return n.subscribe.bind(n)}class CR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let a;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");kR(e,["next","error","complete"])?a=e:a={next:e,error:n,complete:r},a.next===void 0&&(a.next=b0),a.error===void 0&&(a.error=b0),a.complete===void 0&&(a.complete=b0);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function b0(){}function Bt(t){return t&&t._delegate?t._delegate:t}class ja{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const vo="[DEFAULT]";class AR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new cR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(RR(e))try{this.getOrInitializeService({instanceIdentifier:vo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=vo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vo){return this.instances.has(e)}getOptions(e=vo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[l,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);r===h&&c.resolve(a)}return a}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const a of r)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:NR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=vo){return this.component?this.component.multipleInstances?e:vo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NR(t){return t===vo?void 0:t}function RR(t){return t.instantiationMode==="EAGER"}class jR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new AR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var vt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(vt||(vt={}));const IR={debug:vt.DEBUG,verbose:vt.VERBOSE,info:vt.INFO,warn:vt.WARN,error:vt.ERROR,silent:vt.SILENT},DR=vt.INFO,MR={[vt.DEBUG]:"log",[vt.VERBOSE]:"log",[vt.INFO]:"info",[vt.WARN]:"warn",[vt.ERROR]:"error"},PR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),a=MR[e];if(a)console[a](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let av=class{constructor(e){this.name=e,this._logLevel=DR,this._logHandler=PR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in vt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?IR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,vt.DEBUG,...e),this._logHandler(this,vt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,vt.VERBOSE,...e),this._logHandler(this,vt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,vt.INFO,...e),this._logHandler(this,vt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,vt.WARN,...e),this._logHandler(this,vt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,vt.ERROR,...e),this._logHandler(this,vt.ERROR,...e)}};const OR=(t,e)=>e.some(n=>t instanceof n);let x_,__;function LR(){return x_||(x_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VR(){return __||(__=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GS=new WeakMap,ty=new WeakMap,YS=new WeakMap,x0=new WeakMap,ov=new WeakMap;function UR(t){const e=new Promise((n,r)=>{const a=()=>{t.removeEventListener("success",l),t.removeEventListener("error",c)},l=()=>{n(Ca(t.result)),a()},c=()=>{r(t.error),a()};t.addEventListener("success",l),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&GS.set(n,t)}).catch(()=>{}),ov.set(e,t),e}function zR(t){if(ty.has(t))return;const e=new Promise((n,r)=>{const a=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",c),t.removeEventListener("abort",c)},l=()=>{n(),a()},c=()=>{r(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",l),t.addEventListener("error",c),t.addEventListener("abort",c)});ty.set(t,e)}let ny={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ty.get(t);if(e==="objectStoreNames")return t.objectStoreNames||YS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ca(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function BR(t){ny=t(ny)}function FR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(_0(this),e,...n);return YS.set(r,e.sort?e.sort():[e]),Ca(r)}:VR().includes(t)?function(...e){return t.apply(_0(this),e),Ca(GS.get(this))}:function(...e){return Ca(t.apply(_0(this),e))}}function HR(t){return typeof t=="function"?FR(t):(t instanceof IDBTransaction&&zR(t),OR(t,LR())?new Proxy(t,ny):t)}function Ca(t){if(t instanceof IDBRequest)return UR(t);if(x0.has(t))return x0.get(t);const e=HR(t);return e!==t&&(x0.set(t,e),ov.set(e,t)),e}const _0=t=>ov.get(t);function $R(t,e,{blocked:n,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(t,e),h=Ca(c);return r&&c.addEventListener("upgradeneeded",m=>{r(Ca(c.result),m.oldVersion,m.newVersion,Ca(c.transaction),m)}),n&&c.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),h.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}const qR=["get","getKey","getAll","getAllKeys","count"],GR=["put","add","delete","clear"],w0=new Map;function w_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(w0.get(e))return w0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,a=GR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(a||qR.includes(n)))return;const l=async function(c,...h){const m=this.transaction(c,a?"readwrite":"readonly");let g=m.store;return r&&(g=g.index(h.shift())),(await Promise.all([g[n](...h),a&&m.done]))[0]};return w0.set(e,l),l}BR(t=>({...t,get:(e,n,r)=>w_(e,n)||t.get(e,n,r),has:(e,n)=>!!w_(e,n)||t.has(e,n)}));class YR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(KR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function KR(t){return t.getComponent()?.type==="VERSION"}const ry="@firebase/app",E_="0.14.6";const Ni=new av("@firebase/app"),QR="@firebase/app-compat",XR="@firebase/analytics-compat",WR="@firebase/analytics",JR="@firebase/app-check-compat",ZR="@firebase/app-check",e6="@firebase/auth",t6="@firebase/auth-compat",n6="@firebase/database",r6="@firebase/data-connect",s6="@firebase/database-compat",i6="@firebase/functions",a6="@firebase/functions-compat",o6="@firebase/installations",l6="@firebase/installations-compat",c6="@firebase/messaging",u6="@firebase/messaging-compat",d6="@firebase/performance",h6="@firebase/performance-compat",f6="@firebase/remote-config",m6="@firebase/remote-config-compat",p6="@firebase/storage",g6="@firebase/storage-compat",y6="@firebase/firestore",v6="@firebase/ai",b6="@firebase/firestore-compat",x6="firebase",_6="12.6.0";const sy="[DEFAULT]",w6={[ry]:"fire-core",[QR]:"fire-core-compat",[WR]:"fire-analytics",[XR]:"fire-analytics-compat",[ZR]:"fire-app-check",[JR]:"fire-app-check-compat",[e6]:"fire-auth",[t6]:"fire-auth-compat",[n6]:"fire-rtdb",[r6]:"fire-data-connect",[s6]:"fire-rtdb-compat",[i6]:"fire-fn",[a6]:"fire-fn-compat",[o6]:"fire-iid",[l6]:"fire-iid-compat",[c6]:"fire-fcm",[u6]:"fire-fcm-compat",[d6]:"fire-perf",[h6]:"fire-perf-compat",[f6]:"fire-rc",[m6]:"fire-rc-compat",[p6]:"fire-gcs",[g6]:"fire-gcs-compat",[y6]:"fire-fst",[b6]:"fire-fst-compat",[v6]:"fire-vertex","fire-js":"fire-js",[x6]:"fire-js-all"};const Gf=new Map,E6=new Map,iy=new Map;function S_(t,e){try{t.container.addComponent(e)}catch(n){Ni.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Co(t){const e=t.name;if(iy.has(e))return Ni.debug(`There were multiple attempts to register component ${e}.`),!1;iy.set(e,t);for(const n of Gf.values())S_(n,t);for(const n of E6.values())S_(n,t);return!0}function Rm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Mr(t){return t==null?!1:t.settings!==void 0}const S6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ka=new md("app","Firebase",S6);class T6{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ja("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ka.create("app-deleted",{appName:this._name})}}const Oo=_6;function KS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:sy,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw ka.create("bad-app-name",{appName:String(a)});if(n||(n=HS()),!n)throw ka.create("no-options");const l=Gf.get(a);if(l){if(Ai(n,l.options)&&Ai(r,l.config))return l;throw ka.create("duplicate-app",{appName:a})}const c=new jR(a);for(const m of iy.values())c.addComponent(m);const h=new T6(n,r,c);return Gf.set(a,h),h}function lv(t=sy){const e=Gf.get(t);if(!e&&t===sy&&HS())return KS();if(!e)throw ka.create("no-app",{appName:t});return e}function Ls(t,e,n){let r=w6[t]??t;n&&(r+=`-${n}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${r}" with version "${e}":`];a&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ni.warn(c.join(" "));return}Co(new ja(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const C6="firebase-heartbeat-database",k6=1,Ku="firebase-heartbeat-store";let E0=null;function QS(){return E0||(E0=$R(C6,k6,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ku)}catch(n){console.warn(n)}}}}).catch(t=>{throw ka.create("idb-open",{originalErrorMessage:t.message})})),E0}async function A6(t){try{const n=(await QS()).transaction(Ku),r=await n.objectStore(Ku).get(XS(t));return await n.done,r}catch(e){if(e instanceof Ks)Ni.warn(e.message);else{const n=ka.create("idb-get",{originalErrorMessage:e?.message});Ni.warn(n.message)}}}async function T_(t,e){try{const r=(await QS()).transaction(Ku,"readwrite");await r.objectStore(Ku).put(e,XS(t)),await r.done}catch(n){if(n instanceof Ks)Ni.warn(n.message);else{const r=ka.create("idb-set",{originalErrorMessage:n?.message});Ni.warn(r.message)}}}function XS(t){return`${t.name}!${t.options.appId}`}const N6=1024,R6=30;class j6{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new D6(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=C_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>R6){const a=M6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ni.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=C_(),{heartbeatsToSend:n,unsentEntries:r}=I6(this._heartbeatsCache.heartbeats),a=qf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Ni.warn(e),""}}}function C_(){return new Date().toISOString().substring(0,10)}function I6(t,e=N6){const n=[];let r=t.slice();for(const a of t){const l=n.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),k_(n)>e){l.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),k_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class D6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bR()?xR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await A6(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return T_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return T_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function k_(t){return qf(JSON.stringify({version:2,heartbeats:t})).length}function M6(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function P6(t){Co(new ja("platform-logger",e=>new YR(e),"PRIVATE")),Co(new ja("heartbeat",e=>new j6(e),"PRIVATE")),Ls(ry,E_,t),Ls(ry,E_,"esm2020"),Ls("fire-js","")}P6("");var O6="firebase",L6="12.6.0";Ls(O6,L6,"app");function WS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const V6=WS,JS=new md("auth","Firebase",WS());const Yf=new av("@firebase/auth");function U6(t,...e){Yf.logLevel<=vt.WARN&&Yf.warn(`Auth (${Oo}): ${t}`,...e)}function wf(t,...e){Yf.logLevel<=vt.ERROR&&Yf.error(`Auth (${Oo}): ${t}`,...e)}function ds(t,...e){throw cv(t,...e)}function Vs(t,...e){return cv(t,...e)}function ZS(t,e,n){const r={...V6(),[e]:n};return new md("auth","Firebase",r).create(e,{appName:t.name})}function Ti(t){return ZS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return JS.create(t,...e)}function Je(t,e,...n){if(!t)throw cv(e,...n)}function wi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw wf(e),new Error(e)}function Ri(t,e){t||wi(e)}function ay(){return typeof self<"u"&&self.location?.href||""}function z6(){return A_()==="http:"||A_()==="https:"}function A_(){return typeof self<"u"&&self.location?.protocol||null}function B6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(z6()||pR()||"connection"in navigator)?navigator.onLine:!0}function F6(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class gd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ri(n>e,"Short delay should be less than long delay!"),this.isMobile=hR()||gR()}get(){return B6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function uv(t,e){Ri(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class e4{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const H6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const $6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],q6=new gd(3e4,6e4);function Mi(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Qs(t,e,n,r,a={}){return t4(t,a,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const h=pd({key:t.config.apiKey,...c}).slice(1),m=await t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);const g={method:e,headers:m,...l};return mR()||(g.referrerPolicy="no-referrer"),t.emulatorConfig&&Po(t.emulatorConfig.host)&&(g.credentials="include"),e4.fetch()(await n4(t,t.config.apiHost,n,h),g)})}async function t4(t,e,n){t._canInitEmulator=!1;const r={...H6,...e};try{const a=new Y6(t),l=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw nf(t,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const h=l.ok?c.errorMessage:c.error.message,[m,g]=h.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw nf(t,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw nf(t,"email-already-in-use",c);if(m==="USER_DISABLED")throw nf(t,"user-disabled",c);const v=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw ZS(t,v,g);ds(t,v)}}catch(a){if(a instanceof Ks)throw a;ds(t,"network-request-failed",{message:String(a)})}}async function yd(t,e,n,r,a={}){const l=await Qs(t,e,n,r,a);return"mfaPendingCredential"in l&&ds(t,"multi-factor-auth-required",{_serverResponse:l}),l}async function n4(t,e,n,r){const a=`${e}${n}?${r}`,l=t,c=l.config.emulator?uv(t.config,a):`${t.config.apiScheme}://${a}`;return $6.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function G6(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Y6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Vs(this.auth,"network-request-failed")),q6.get())})}}function nf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const a=Vs(t,e,r);return a.customData._tokenResponse=n,a}function N_(t){return t!==void 0&&t.enterprise!==void 0}class K6{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return G6(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Q6(t,e){return Qs(t,"GET","/v2/recaptchaConfig",Mi(t,e))}async function X6(t,e){return Qs(t,"POST","/v1/accounts:delete",e)}async function Kf(t,e){return Qs(t,"POST","/v1/accounts:lookup",e)}function Hu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function W6(t,e=!1){const n=Bt(t),r=await n.getIdToken(e),a=dv(r);Je(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:r,authTime:Hu(S0(a.auth_time)),issuedAtTime:Hu(S0(a.iat)),expirationTime:Hu(S0(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function S0(t){return Number(t)*1e3}function dv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return wf("JWT malformed, contained fewer than 3 sections"),null;try{const a=zS(n);return a?JSON.parse(a):(wf("Failed to decode base64 JWT payload"),null)}catch(a){return wf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function R_(t){const e=dv(t);return Je(e,"internal-error"),Je(typeof e.exp<"u","internal-error"),Je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Jl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ks&&J6(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function J6({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class Z6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class oy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hu(this.lastLoginAt),this.creationTime=Hu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Qf(t){const e=t.auth,n=await t.getIdToken(),r=await Jl(t,Kf(e,{idToken:n}));Je(r?.users.length,e,"internal-error");const a=r.users[0];t._notifyReloadListener(a);const l=a.providerUserInfo?.length?r4(a.providerUserInfo):[],c=t5(t.providerData,l),h=t.isAnonymous,m=!(t.email&&a.passwordHash)&&!c?.length,g=h?m:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new oy(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(t,v)}async function e5(t){const e=Bt(t);await Qf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function t5(t,e){return[...t.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function r4(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function n5(t,e){const n=await t4(t,{},async()=>{const r=pd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=t.config,c=await n4(t,a,"/v1/token",`key=${l}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:h,body:r};return t.emulatorConfig&&Po(t.emulatorConfig.host)&&(m.credentials="include"),e4.fetch()(c,m)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function r5(t,e){return Qs(t,"POST","/v2/accounts:revokeToken",Mi(t,e))}class Hl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Je(e.idToken,"internal-error"),Je(typeof e.idToken<"u","internal-error"),Je(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):R_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Je(e.length!==0,"internal-error");const n=R_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:a,expiresIn:l}=await n5(e,n);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:a,expirationTime:l}=n,c=new Hl;return r&&(Je(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(Je(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Je(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Hl,this.toJSON())}_performRefresh(){return wi("not implemented")}}function fa(t,e){Je(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ls{constructor({uid:e,auth:n,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new Z6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new oy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Jl(this,this.stsTokenManager.getToken(this.auth,e));return Je(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return W6(this,e)}reload(){return e5(this)}_assign(e){this!==e&&(Je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ls({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Qf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mr(this.auth.app))return Promise.reject(Ti(this.auth));const e=await this.getIdToken();return await Jl(this,X6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,a=n.email??void 0,l=n.phoneNumber??void 0,c=n.photoURL??void 0,h=n.tenantId??void 0,m=n._redirectEventId??void 0,g=n.createdAt??void 0,v=n.lastLoginAt??void 0,{uid:b,emailVerified:_,isAnonymous:C,providerData:N,stsTokenManager:j}=n;Je(b&&j,e,"internal-error");const k=Hl.fromJSON(this.name,j);Je(typeof b=="string",e,"internal-error"),fa(r,e.name),fa(a,e.name),Je(typeof _=="boolean",e,"internal-error"),Je(typeof C=="boolean",e,"internal-error"),fa(l,e.name),fa(c,e.name),fa(h,e.name),fa(m,e.name),fa(g,e.name),fa(v,e.name);const B=new ls({uid:b,auth:e,email:a,emailVerified:_,displayName:r,isAnonymous:C,photoURL:c,phoneNumber:l,tenantId:h,stsTokenManager:k,createdAt:g,lastLoginAt:v});return N&&Array.isArray(N)&&(B.providerData=N.map($=>({...$}))),m&&(B._redirectEventId=m),B}static async _fromIdTokenResponse(e,n,r=!1){const a=new Hl;a.updateFromServerResponse(n);const l=new ls({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await Qf(l),l}static async _fromGetAccountInfoResponse(e,n,r){const a=n.users[0];Je(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?r4(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,h=new Hl;h.updateFromIdToken(r);const m=new ls({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new oy(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(m,g),m}}const j_=new Map;function Ei(t){Ri(t instanceof Function,"Expected a class definition");let e=j_.get(t);return e?(Ri(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,j_.set(t,e),e)}class s4{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}s4.type="NONE";const I_=s4;function Ef(t,e,n){return`firebase:${t}:${e}:${n}`}class $l{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=Ef(this.userKey,a.apiKey,l),this.fullPersistenceKey=Ef("persistence",a.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Kf(this.auth,{idToken:e}).catch(()=>{});return n?ls._fromGetAccountInfoResponse(this.auth,n,e):null}return ls._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new $l(Ei(I_),e,r);const a=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||Ei(I_);const c=Ef(r,e.config.apiKey,e.name);let h=null;for(const g of n)try{const v=await g._get(c);if(v){let b;if(typeof v=="string"){const _=await Kf(e,{idToken:v}).catch(()=>{});if(!_)break;b=await ls._fromGetAccountInfoResponse(e,_,v)}else b=ls._fromJSON(e,v);g!==l&&(h=b),l=g;break}}catch{}const m=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new $l(l,e,r):(l=m[0],h&&await l._set(c,h.toJSON()),await Promise.all(n.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new $l(l,e,r))}}function D_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(l4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(i4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(u4(e))return"Blackberry";if(d4(e))return"Webos";if(a4(e))return"Safari";if((e.includes("chrome/")||o4(e))&&!e.includes("edge/"))return"Chrome";if(c4(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function i4(t=tr()){return/firefox\//i.test(t)}function a4(t=tr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function o4(t=tr()){return/crios\//i.test(t)}function l4(t=tr()){return/iemobile/i.test(t)}function c4(t=tr()){return/android/i.test(t)}function u4(t=tr()){return/blackberry/i.test(t)}function d4(t=tr()){return/webos/i.test(t)}function hv(t=tr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function s5(t=tr()){return hv(t)&&!!window.navigator?.standalone}function i5(){return yR()&&document.documentMode===10}function h4(t=tr()){return hv(t)||c4(t)||d4(t)||u4(t)||/windows phone/i.test(t)||l4(t)}function f4(t,e=[]){let n;switch(t){case"Browser":n=D_(tr());break;case"Worker":n=`${D_(tr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Oo}/${r}`}class a5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=l=>new Promise((c,h)=>{try{const m=e(l);c(m)}catch(m){h(m)}});r.onAbort=n,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function o5(t,e={}){return Qs(t,"GET","/v2/passwordPolicy",Mi(t,e))}const l5=6;class c5{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??l5,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),a&&(n.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class u5{constructor(e,n,r,a){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new M_(this),this.idTokenSubscription=new M_(this),this.beforeStateQueue=new a5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ei(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await $l.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Kf(this,{idToken:e}),r=await ls._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Mr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=r?._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===c)&&h?.user&&(r=h.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Qf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=F6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mr(this.app))return Promise.reject(Ti(this));const n=e?Bt(e):null;return n&&Je(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mr(this.app)?Promise.reject(Ti(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mr(this.app)?Promise.reject(Ti(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ei(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await o5(this),n=new c5(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new md("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await r5(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ei(e)||this._popupRedirectResolver;Je(n,this,"argument-error"),this.redirectPersistenceManager=await $l.create(this,[Ei(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,a){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Je(h,this,"internal-error"),h.then(()=>{c||l(this.currentUser)}),typeof n=="function"){const m=e.addObserver(n,r,a);return()=>{c=!0,m()}}else{const m=e.addObserver(n);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=f4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Mr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&U6(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ua(t){return Bt(t)}class M_{constructor(e){this.auth=e,this.observer=null,this.addObserver=TR(n=>this.observer=n)}get next(){return Je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let jm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function d5(t){jm=t}function m4(t){return jm.loadJS(t)}function h5(){return jm.recaptchaEnterpriseScript}function f5(){return jm.gapiScript}function m5(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class p5{constructor(){this.enterprise=new g5}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class g5{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const y5="recaptcha-enterprise",p4="NO_RECAPTCHA";class v5{constructor(e){this.type=y5,this.auth=Ua(e)}async verify(e="verify",n=!1){async function r(l){if(!n){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,h)=>{Q6(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const g=new K6(m);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(m=>{h(m)})})}function a(l,c,h){const m=window.grecaptcha;N_(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(g=>{c(g)}).catch(()=>{c(p4)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new p5().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{r(this.auth).then(h=>{if(!n&&N_(window.grecaptcha))a(h,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=h5();m.length!==0&&(m+=h),m4(m).then(()=>{a(h,l,c)}).catch(g=>{c(g)})}}).catch(h=>{c(h)})})}}async function P_(t,e,n,r=!1,a=!1){const l=new v5(t);let c;if(a)c=p4;else try{c=await l.verify(n)}catch{c=await l.verify(n,!0)}const h={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const m=h.phoneEnrollmentInfo.phoneNumber,g=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const m=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Xf(t,e,n,r,a){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await P_(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await P_(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(l)})}function b5(t,e){const n=Rm(t,"auth");if(n.isInitialized()){const a=n.getImmediate(),l=n.getOptions();if(Ai(l,e??{}))return a;ds(a,"already-initialized")}return n.initialize({options:e})}function x5(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ei);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function _5(t,e,n){const r=Ua(t);Je(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=g4(e),{host:c,port:h}=w5(e),m=h===null?"":`:${h}`,g={url:`${l}//${c}${m}/`},v=Object.freeze({host:c,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){Je(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Je(Ai(g,r.config.emulator)&&Ai(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,Po(c)?(sv(`${l}//${c}${m}`),iv("Auth",!0)):E5()}function g4(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function w5(t){const e=g4(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:O_(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:O_(c)}}}function O_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function E5(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class fv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return wi("not implemented")}_getIdTokenResponse(e){return wi("not implemented")}_linkToIdToken(e,n){return wi("not implemented")}_getReauthenticationResolver(e){return wi("not implemented")}}async function S5(t,e){return Qs(t,"POST","/v1/accounts:update",e)}async function T5(t,e){return Qs(t,"POST","/v1/accounts:signUp",e)}async function C5(t,e){return yd(t,"POST","/v1/accounts:signInWithPassword",Mi(t,e))}async function y4(t,e){return Qs(t,"POST","/v1/accounts:sendOobCode",Mi(t,e))}async function k5(t,e){return y4(t,e)}async function A5(t,e){return y4(t,e)}async function N5(t,e){return yd(t,"POST","/v1/accounts:signInWithEmailLink",Mi(t,e))}async function R5(t,e){return yd(t,"POST","/v1/accounts:signInWithEmailLink",Mi(t,e))}class Qu extends fv{constructor(e,n,r,a=null){super("password",r),this._email=e,this._password=n,this._tenantId=a}static _fromEmailAndPassword(e,n){return new Qu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Qu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xf(e,n,"signInWithPassword",C5);case"emailLink":return N5(e,{email:this._email,oobCode:this._password});default:ds(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xf(e,r,"signUpPassword",T5);case"emailLink":return R5(e,{idToken:n,email:this._email,oobCode:this._password});default:ds(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ql(t,e){return yd(t,"POST","/v1/accounts:signInWithIdp",Mi(t,e))}const j5="http://localhost";class ko extends fv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ko(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ds("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=n;if(!r||!a)return null;const c=new ko(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return ql(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ql(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ql(e,n)}buildRequest(){const e={requestUri:j5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=pd(n)}return e}}function I5(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function D5(t){const e=Du(Mu(t)).link,n=e?Du(Mu(e)).deep_link_id:null,r=Du(Mu(t)).deep_link_id;return(r?Du(Mu(r)).link:null)||r||n||e||t}class mv{constructor(e){const n=Du(Mu(e)),r=n.apiKey??null,a=n.oobCode??null,l=I5(n.mode??null);Je(r&&a&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=a,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=D5(e);try{return new mv(n)}catch{return null}}}class Lo{constructor(){this.providerId=Lo.PROVIDER_ID}static credential(e,n){return Qu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=mv.parseLink(n);return Je(r,"argument-error"),Qu._fromEmailAndCode(e,r.code,r.tenantId)}}Lo.PROVIDER_ID="password";Lo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Lo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class v4{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class vd extends v4{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ba extends vd{constructor(){super("facebook.com")}static credential(e){return ko._fromParams({providerId:ba.PROVIDER_ID,signInMethod:ba.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ba.credentialFromTaggedObject(e)}static credentialFromError(e){return ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ba.credential(e.oauthAccessToken)}catch{return null}}}ba.FACEBOOK_SIGN_IN_METHOD="facebook.com";ba.PROVIDER_ID="facebook.com";class xa extends vd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ko._fromParams({providerId:xa.PROVIDER_ID,signInMethod:xa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return xa.credentialFromTaggedObject(e)}static credentialFromError(e){return xa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return xa.credential(n,r)}catch{return null}}}xa.GOOGLE_SIGN_IN_METHOD="google.com";xa.PROVIDER_ID="google.com";class _a extends vd{constructor(){super("github.com")}static credential(e){return ko._fromParams({providerId:_a.PROVIDER_ID,signInMethod:_a.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _a.credentialFromTaggedObject(e)}static credentialFromError(e){return _a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _a.credential(e.oauthAccessToken)}catch{return null}}}_a.GITHUB_SIGN_IN_METHOD="github.com";_a.PROVIDER_ID="github.com";class wa extends vd{constructor(){super("twitter.com")}static credential(e,n){return ko._fromParams({providerId:wa.PROVIDER_ID,signInMethod:wa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return wa.credentialFromTaggedObject(e)}static credentialFromError(e){return wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return wa.credential(n,r)}catch{return null}}}wa.TWITTER_SIGN_IN_METHOD="twitter.com";wa.PROVIDER_ID="twitter.com";async function M5(t,e){return yd(t,"POST","/v1/accounts:signUp",Mi(t,e))}class Ao{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,a=!1){const l=await ls._fromIdTokenResponse(e,r,a),c=L_(r);return new Ao({user:l,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const a=L_(r);return new Ao({user:e,providerId:a,_tokenResponse:r,operationType:n})}}function L_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Wf extends Ks{constructor(e,n,r,a){super(n.code,n.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,Wf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,a){return new Wf(e,n,r,a)}}function b4(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Wf._fromErrorAndOperation(t,l,e,r):l})}async function P5(t,e,n=!1){const r=await Jl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ao._forOperation(t,"link",r)}async function x4(t,e,n=!1){const{auth:r}=t;if(Mr(r.app))return Promise.reject(Ti(r));const a="reauthenticate";try{const l=await Jl(t,b4(r,a,e,t),n);Je(l.idToken,r,"internal-error");const c=dv(l.idToken);Je(c,r,"internal-error");const{sub:h}=c;return Je(t.uid===h,r,"user-mismatch"),Ao._forOperation(t,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&ds(r,"user-mismatch"),l}}async function _4(t,e,n=!1){if(Mr(t.app))return Promise.reject(Ti(t));const r="signIn",a=await b4(t,r,e),l=await Ao._fromIdTokenResponse(t,r,a);return n||await t._updateCurrentUser(l.user),l}async function O5(t,e){return _4(Ua(t),e)}async function L5(t,e){return x4(Bt(t),e)}async function w4(t){const e=Ua(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function E4(t,e,n){const r=Ua(t);await Xf(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",A5)}async function V5(t,e,n){if(Mr(t.app))return Promise.reject(Ti(t));const r=Ua(t),c=await Xf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",M5).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&w4(t),m}),h=await Ao._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(h.user),h}function U5(t,e,n){return Mr(t.app)?Promise.reject(Ti(t)):O5(Bt(t),Lo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&w4(t),r})}async function V_(t,e){const n=Bt(t),a={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:l}=await k5(n.auth,a);l!==t.email&&await t.reload()}function z5(t,e){return B5(Bt(t),null,e)}async function B5(t,e,n){const{auth:r}=t,l={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(l.password=n);const c=await Jl(t,S5(r,l));await t._updateTokensIfNecessary(c,!0)}function F5(t,e,n,r){return Bt(t).onIdTokenChanged(e,n,r)}function H5(t,e,n){return Bt(t).beforeAuthStateChanged(e,n)}function $5(t,e,n,r){return Bt(t).onAuthStateChanged(e,n,r)}function q5(t){return Bt(t).signOut()}const Jf="__sak";class S4{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Jf,"1"),this.storage.removeItem(Jf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const G5=1e3,Y5=10;class T4 extends S4{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=h4(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),a=this.localCache[n];r!==a&&e(n,a,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,h,m)=>{this.notifyListeners(c,m)});return}const r=e.key;n?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);i5()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Y5):a()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},G5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}T4.type="LOCAL";const K5=T4;class C4 extends S4{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}C4.type="SESSION";const k4=C4;function Q5(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Im{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(a=>a.isListeningto(e));if(n)return n;const r=new Im(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:a,data:l}=n.data,c=this.handlersMap[a];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const h=Array.from(c).map(async g=>g(n.origin,l)),m=await Q5(h);n.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:m})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Im.receivers=[];function pv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class X5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((h,m)=>{const g=pv("",20);a.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(b){const _=b;if(_.data.eventId===g)switch(_.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(_.data.response);break;default:clearTimeout(v),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Us(){return window}function W5(t){Us().location.href=t}function A4(){return typeof Us().WorkerGlobalScope<"u"&&typeof Us().importScripts=="function"}async function J5(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Z5(){return navigator?.serviceWorker?.controller||null}function ej(){return A4()?self:null}const N4="firebaseLocalStorageDb",tj=1,Zf="firebaseLocalStorage",R4="fbase_key";class bd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Dm(t,e){return t.transaction([Zf],e?"readwrite":"readonly").objectStore(Zf)}function nj(){const t=indexedDB.deleteDatabase(N4);return new bd(t).toPromise()}function ly(){const t=indexedDB.open(N4,tj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Zf,{keyPath:R4})}catch(a){n(a)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Zf)?e(r):(r.close(),await nj(),e(await ly()))})})}async function U_(t,e,n){const r=Dm(t,!0).put({[R4]:e,value:n});return new bd(r).toPromise()}async function rj(t,e){const n=Dm(t,!1).get(e),r=await new bd(n).toPromise();return r===void 0?null:r.value}function z_(t,e){const n=Dm(t,!0).delete(e);return new bd(n).toPromise()}const sj=800,ij=3;class j4{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ly(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>ij)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return A4()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Im._getInstance(ej()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await J5(),!this.activeServiceWorker)return;this.sender=new X5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Z5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ly();return await U_(e,Jf,"1"),await z_(e,Jf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>U_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>rj(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>z_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Dm(a,!1).getAll();return new bd(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}j4.type="LOCAL";const aj=j4;new gd(3e4,6e4);function oj(t,e){return e?Ei(e):(Je(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class gv extends fv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ql(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ql(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ql(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function lj(t){return _4(t.auth,new gv(t),t.bypassAuthState)}function cj(t){const{auth:e,user:n}=t;return Je(n,e,"internal-error"),x4(n,new gv(t),t.bypassAuthState)}async function uj(t){const{auth:e,user:n}=t;return Je(n,e,"internal-error"),P5(n,new gv(t),t.bypassAuthState)}class I4{constructor(e,n,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:a,tenantId:l,error:c,type:h}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:n,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lj;case"linkViaPopup":case"linkViaRedirect":return uj;case"reauthViaPopup":case"reauthViaRedirect":return cj;default:ds(this.auth,"internal-error")}}resolve(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const dj=new gd(2e3,1e4);class Bl extends I4{constructor(e,n,r,a,l){super(e,n,a,l),this.provider=r,this.authWindow=null,this.pollId=null,Bl.currentPopupAction&&Bl.currentPopupAction.cancel(),Bl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Je(e,this.auth,"internal-error"),e}async onExecution(){Ri(this.filter.length===1,"Popup operations only handle one event");const e=pv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Vs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Vs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dj.get())};e()}}Bl.currentPopupAction=null;const hj="pendingRedirect",Sf=new Map;class fj extends I4{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Sf.get(this.auth._key());if(!e){try{const r=await mj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Sf.set(this.auth._key(),e)}return this.bypassAuthState||Sf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mj(t,e){const n=yj(e),r=gj(t);if(!await r._isAvailable())return!1;const a=await r._get(n)==="true";return await r._remove(n),a}function pj(t,e){Sf.set(t._key(),e)}function gj(t){return Ei(t._redirectPersistence)}function yj(t){return Ef(hj,t.config.apiKey,t.name)}async function vj(t,e,n=!1){if(Mr(t.app))return Promise.reject(Ti(t));const r=Ua(t),a=oj(r,e),c=await new fj(r,a,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}const bj=600*1e3;class xj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_j(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!D4(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Vs(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=bj&&this.cachedEventUids.clear(),this.cachedEventUids.has(B_(e))}saveEventToCache(e){this.cachedEventUids.add(B_(e)),this.lastProcessedEventTime=Date.now()}}function B_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function D4({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function _j(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return D4(t);default:return!1}}async function wj(t,e={}){return Qs(t,"GET","/v1/projects",e)}const Ej=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sj=/^https?/;async function Tj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await wj(t);for(const n of e)try{if(Cj(n))return}catch{}ds(t,"unauthorized-domain")}function Cj(t){const e=ay(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!Sj.test(n))return!1;if(Ej.test(t))return r===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const kj=new gd(3e4,6e4);function F_(){const t=Us().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Aj(t){return new Promise((e,n)=>{function r(){F_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{F_(),n(Vs(t,"network-request-failed"))},timeout:kj.get()})}if(Us().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Us().gapi?.load)r();else{const a=m5("iframefcb");return Us()[a]=()=>{gapi.load?r():n(Vs(t,"network-request-failed"))},m4(`${f5()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Tf=null,e})}let Tf=null;function Nj(t){return Tf=Tf||Aj(t),Tf}const Rj=new gd(5e3,15e3),jj="__/auth/iframe",Ij="emulator/auth/iframe",Dj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Mj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pj(t){const e=t.config;Je(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?uv(e,Ij):`https://${t.config.authDomain}/${jj}`,r={apiKey:e.apiKey,appName:t.name,v:Oo},a=Mj.get(t.config.apiHost);a&&(r.eid=a);const l=t._getFrameworks();return l.length&&(r.fw=l.join(",")),`${n}?${pd(r).slice(1)}`}async function Oj(t){const e=await Nj(t),n=Us().gapi;return Je(n,t,"internal-error"),e.open({where:document.body,url:Pj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Dj,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=Vs(t,"network-request-failed"),h=Us().setTimeout(()=>{l(c)},Rj.get());function m(){Us().clearTimeout(h),a(r)}r.ping(m).then(m,()=>{l(c)})}))}const Lj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Vj=500,Uj=600,zj="_blank",Bj="http://localhost";class H_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Fj(t,e,n,r=Vj,a=Uj){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const m={...Lj,width:r.toString(),height:a.toString(),top:l,left:c},g=tr().toLowerCase();n&&(h=o4(g)?zj:n),i4(g)&&(e=e||Bj,m.scrollbars="yes");const v=Object.entries(m).reduce((_,[C,N])=>`${_}${C}=${N},`,"");if(s5(g)&&h!=="_self")return Hj(e||"",h),new H_(null);const b=window.open(e||"",h,v);Je(b,t,"popup-blocked");try{b.focus()}catch{}return new H_(b)}function Hj(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const $j="__/auth/handler",qj="emulator/auth/handler",Gj=encodeURIComponent("fac");async function $_(t,e,n,r,a,l){Je(t.config.authDomain,t,"auth-domain-config-required"),Je(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Oo,eventId:a};if(e instanceof v4){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",SR(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,b]of Object.entries({}))c[v]=b}if(e instanceof vd){const v=e.getScopes().filter(b=>b!=="");v.length>0&&(c.scopes=v.join(","))}t.tenantId&&(c.tid=t.tenantId);const h=c;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const m=await t._getAppCheckToken(),g=m?`#${Gj}=${encodeURIComponent(m)}`:"";return`${Yj(t)}?${pd(h).slice(1)}${g}`}function Yj({config:t}){return t.emulator?uv(t,qj):`https://${t.authDomain}/${$j}`}const T0="webStorageSupport";class Kj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=k4,this._completeRedirectFn=vj,this._overrideRedirectResult=pj}async _openPopup(e,n,r,a){Ri(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await $_(e,n,r,ay(),a);return Fj(e,l,pv())}async _openRedirect(e,n,r,a){await this._originValidation(e);const l=await $_(e,n,r,ay(),a);return W5(l),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:a,promise:l}=this.eventManagers[n];return a?Promise.resolve(a):(Ri(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Oj(e),r=new xj(e);return n.register("authEvent",a=>(Je(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(T0,{type:T0},a=>{const l=a?.[0]?.[T0];l!==void 0&&n(!!l),ds(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Tj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return h4()||a4()||hv()}}const Qj=Kj;var q_="@firebase/auth",G_="1.11.1";class Xj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Wj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Jj(t){Co(new ja("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=r.options;Je(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:c,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:f4(t)},g=new u5(r,a,l,m);return x5(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Co(new ja("auth-internal",e=>{const n=Ua(e.getProvider("auth").getImmediate());return(r=>new Xj(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ls(q_,G_,Wj(t)),Ls(q_,G_,"esm2020")}const Zj=300,e9=$S("authIdTokenMaxAge")||Zj;let Y_=null;const t9=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>e9)return;const a=n?.token;Y_!==a&&(Y_=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function n9(t=lv()){const e=Rm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=b5(t,{popupRedirectResolver:Qj,persistence:[aj,K5,k4]}),r=$S("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=t9(l.toString());H5(n,c,()=>c(n.currentUser)),F5(n,h=>c(h))}}const a=BS("auth");return a&&_5(n,`http://${a}`),n}function r9(){return document.getElementsByTagName("head")?.[0]??document}d5({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=a=>{const l=Vs("internal-error");l.customData=a,n(l)},r.type="text/javascript",r.charset="UTF-8",r9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Jj("Browser");var K_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Aa,M4;(function(){var t;function e(S,E){function A(){}A.prototype=E.prototype,S.F=E.prototype,S.prototype=new A,S.prototype.constructor=S,S.D=function(M,O,U){for(var P=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)P[xe-2]=arguments[xe];return E.prototype[O].apply(M,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(S,E,A){A||(A=0);const M=Array(16);if(typeof E=="string")for(var O=0;O<16;++O)M[O]=E.charCodeAt(A++)|E.charCodeAt(A++)<<8|E.charCodeAt(A++)<<16|E.charCodeAt(A++)<<24;else for(O=0;O<16;++O)M[O]=E[A++]|E[A++]<<8|E[A++]<<16|E[A++]<<24;E=S.g[0],A=S.g[1],O=S.g[2];let U=S.g[3],P;P=E+(U^A&(O^U))+M[0]+3614090360&4294967295,E=A+(P<<7&4294967295|P>>>25),P=U+(O^E&(A^O))+M[1]+3905402710&4294967295,U=E+(P<<12&4294967295|P>>>20),P=O+(A^U&(E^A))+M[2]+606105819&4294967295,O=U+(P<<17&4294967295|P>>>15),P=A+(E^O&(U^E))+M[3]+3250441966&4294967295,A=O+(P<<22&4294967295|P>>>10),P=E+(U^A&(O^U))+M[4]+4118548399&4294967295,E=A+(P<<7&4294967295|P>>>25),P=U+(O^E&(A^O))+M[5]+1200080426&4294967295,U=E+(P<<12&4294967295|P>>>20),P=O+(A^U&(E^A))+M[6]+2821735955&4294967295,O=U+(P<<17&4294967295|P>>>15),P=A+(E^O&(U^E))+M[7]+4249261313&4294967295,A=O+(P<<22&4294967295|P>>>10),P=E+(U^A&(O^U))+M[8]+1770035416&4294967295,E=A+(P<<7&4294967295|P>>>25),P=U+(O^E&(A^O))+M[9]+2336552879&4294967295,U=E+(P<<12&4294967295|P>>>20),P=O+(A^U&(E^A))+M[10]+4294925233&4294967295,O=U+(P<<17&4294967295|P>>>15),P=A+(E^O&(U^E))+M[11]+2304563134&4294967295,A=O+(P<<22&4294967295|P>>>10),P=E+(U^A&(O^U))+M[12]+1804603682&4294967295,E=A+(P<<7&4294967295|P>>>25),P=U+(O^E&(A^O))+M[13]+4254626195&4294967295,U=E+(P<<12&4294967295|P>>>20),P=O+(A^U&(E^A))+M[14]+2792965006&4294967295,O=U+(P<<17&4294967295|P>>>15),P=A+(E^O&(U^E))+M[15]+1236535329&4294967295,A=O+(P<<22&4294967295|P>>>10),P=E+(O^U&(A^O))+M[1]+4129170786&4294967295,E=A+(P<<5&4294967295|P>>>27),P=U+(A^O&(E^A))+M[6]+3225465664&4294967295,U=E+(P<<9&4294967295|P>>>23),P=O+(E^A&(U^E))+M[11]+643717713&4294967295,O=U+(P<<14&4294967295|P>>>18),P=A+(U^E&(O^U))+M[0]+3921069994&4294967295,A=O+(P<<20&4294967295|P>>>12),P=E+(O^U&(A^O))+M[5]+3593408605&4294967295,E=A+(P<<5&4294967295|P>>>27),P=U+(A^O&(E^A))+M[10]+38016083&4294967295,U=E+(P<<9&4294967295|P>>>23),P=O+(E^A&(U^E))+M[15]+3634488961&4294967295,O=U+(P<<14&4294967295|P>>>18),P=A+(U^E&(O^U))+M[4]+3889429448&4294967295,A=O+(P<<20&4294967295|P>>>12),P=E+(O^U&(A^O))+M[9]+568446438&4294967295,E=A+(P<<5&4294967295|P>>>27),P=U+(A^O&(E^A))+M[14]+3275163606&4294967295,U=E+(P<<9&4294967295|P>>>23),P=O+(E^A&(U^E))+M[3]+4107603335&4294967295,O=U+(P<<14&4294967295|P>>>18),P=A+(U^E&(O^U))+M[8]+1163531501&4294967295,A=O+(P<<20&4294967295|P>>>12),P=E+(O^U&(A^O))+M[13]+2850285829&4294967295,E=A+(P<<5&4294967295|P>>>27),P=U+(A^O&(E^A))+M[2]+4243563512&4294967295,U=E+(P<<9&4294967295|P>>>23),P=O+(E^A&(U^E))+M[7]+1735328473&4294967295,O=U+(P<<14&4294967295|P>>>18),P=A+(U^E&(O^U))+M[12]+2368359562&4294967295,A=O+(P<<20&4294967295|P>>>12),P=E+(A^O^U)+M[5]+4294588738&4294967295,E=A+(P<<4&4294967295|P>>>28),P=U+(E^A^O)+M[8]+2272392833&4294967295,U=E+(P<<11&4294967295|P>>>21),P=O+(U^E^A)+M[11]+1839030562&4294967295,O=U+(P<<16&4294967295|P>>>16),P=A+(O^U^E)+M[14]+4259657740&4294967295,A=O+(P<<23&4294967295|P>>>9),P=E+(A^O^U)+M[1]+2763975236&4294967295,E=A+(P<<4&4294967295|P>>>28),P=U+(E^A^O)+M[4]+1272893353&4294967295,U=E+(P<<11&4294967295|P>>>21),P=O+(U^E^A)+M[7]+4139469664&4294967295,O=U+(P<<16&4294967295|P>>>16),P=A+(O^U^E)+M[10]+3200236656&4294967295,A=O+(P<<23&4294967295|P>>>9),P=E+(A^O^U)+M[13]+681279174&4294967295,E=A+(P<<4&4294967295|P>>>28),P=U+(E^A^O)+M[0]+3936430074&4294967295,U=E+(P<<11&4294967295|P>>>21),P=O+(U^E^A)+M[3]+3572445317&4294967295,O=U+(P<<16&4294967295|P>>>16),P=A+(O^U^E)+M[6]+76029189&4294967295,A=O+(P<<23&4294967295|P>>>9),P=E+(A^O^U)+M[9]+3654602809&4294967295,E=A+(P<<4&4294967295|P>>>28),P=U+(E^A^O)+M[12]+3873151461&4294967295,U=E+(P<<11&4294967295|P>>>21),P=O+(U^E^A)+M[15]+530742520&4294967295,O=U+(P<<16&4294967295|P>>>16),P=A+(O^U^E)+M[2]+3299628645&4294967295,A=O+(P<<23&4294967295|P>>>9),P=E+(O^(A|~U))+M[0]+4096336452&4294967295,E=A+(P<<6&4294967295|P>>>26),P=U+(A^(E|~O))+M[7]+1126891415&4294967295,U=E+(P<<10&4294967295|P>>>22),P=O+(E^(U|~A))+M[14]+2878612391&4294967295,O=U+(P<<15&4294967295|P>>>17),P=A+(U^(O|~E))+M[5]+4237533241&4294967295,A=O+(P<<21&4294967295|P>>>11),P=E+(O^(A|~U))+M[12]+1700485571&4294967295,E=A+(P<<6&4294967295|P>>>26),P=U+(A^(E|~O))+M[3]+2399980690&4294967295,U=E+(P<<10&4294967295|P>>>22),P=O+(E^(U|~A))+M[10]+4293915773&4294967295,O=U+(P<<15&4294967295|P>>>17),P=A+(U^(O|~E))+M[1]+2240044497&4294967295,A=O+(P<<21&4294967295|P>>>11),P=E+(O^(A|~U))+M[8]+1873313359&4294967295,E=A+(P<<6&4294967295|P>>>26),P=U+(A^(E|~O))+M[15]+4264355552&4294967295,U=E+(P<<10&4294967295|P>>>22),P=O+(E^(U|~A))+M[6]+2734768916&4294967295,O=U+(P<<15&4294967295|P>>>17),P=A+(U^(O|~E))+M[13]+1309151649&4294967295,A=O+(P<<21&4294967295|P>>>11),P=E+(O^(A|~U))+M[4]+4149444226&4294967295,E=A+(P<<6&4294967295|P>>>26),P=U+(A^(E|~O))+M[11]+3174756917&4294967295,U=E+(P<<10&4294967295|P>>>22),P=O+(E^(U|~A))+M[2]+718787259&4294967295,O=U+(P<<15&4294967295|P>>>17),P=A+(U^(O|~E))+M[9]+3951481745&4294967295,S.g[0]=S.g[0]+E&4294967295,S.g[1]=S.g[1]+(O+(P<<21&4294967295|P>>>11))&4294967295,S.g[2]=S.g[2]+O&4294967295,S.g[3]=S.g[3]+U&4294967295}r.prototype.v=function(S,E){E===void 0&&(E=S.length);const A=E-this.blockSize,M=this.C;let O=this.h,U=0;for(;U<E;){if(O==0)for(;U<=A;)a(this,S,U),U+=this.blockSize;if(typeof S=="string"){for(;U<E;)if(M[O++]=S.charCodeAt(U++),O==this.blockSize){a(this,M),O=0;break}}else for(;U<E;)if(M[O++]=S[U++],O==this.blockSize){a(this,M),O=0;break}}this.h=O,this.o+=E},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var E=1;E<S.length-8;++E)S[E]=0;E=this.o*8;for(var A=S.length-8;A<S.length;++A)S[A]=E&255,E/=256;for(this.v(S),S=Array(16),E=0,A=0;A<4;++A)for(let M=0;M<32;M+=8)S[E++]=this.g[A]>>>M&255;return S};function l(S,E){var A=h;return Object.prototype.hasOwnProperty.call(A,S)?A[S]:A[S]=E(S)}function c(S,E){this.h=E;const A=[];let M=!0;for(let O=S.length-1;O>=0;O--){const U=S[O]|0;M&&U==E||(A[O]=U,M=!1)}this.g=A}var h={};function m(S){return-128<=S&&S<128?l(S,function(E){return new c([E|0],E<0?-1:0)}):new c([S|0],S<0?-1:0)}function g(S){if(isNaN(S)||!isFinite(S))return b;if(S<0)return k(g(-S));const E=[];let A=1;for(let M=0;S>=A;M++)E[M]=S/A|0,A*=4294967296;return new c(E,0)}function v(S,E){if(S.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(S.charAt(0)=="-")return k(v(S.substring(1),E));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=g(Math.pow(E,8));let M=b;for(let U=0;U<S.length;U+=8){var O=Math.min(8,S.length-U);const P=parseInt(S.substring(U,U+O),E);O<8?(O=g(Math.pow(E,O)),M=M.j(O).add(g(P))):(M=M.j(A),M=M.add(g(P)))}return M}var b=m(0),_=m(1),C=m(16777216);t=c.prototype,t.m=function(){if(j(this))return-k(this).m();let S=0,E=1;for(let A=0;A<this.g.length;A++){const M=this.i(A);S+=(M>=0?M:4294967296+M)*E,E*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(N(this))return"0";if(j(this))return"-"+k(this).toString(S);const E=g(Math.pow(S,6));var A=this;let M="";for(;;){const O=V(A,E).g;A=B(A,O.j(E));let U=((A.g.length>0?A.g[0]:A.h)>>>0).toString(S);if(A=O,N(A))return U+M;for(;U.length<6;)U="0"+U;M=U+M}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function N(S){if(S.h!=0)return!1;for(let E=0;E<S.g.length;E++)if(S.g[E]!=0)return!1;return!0}function j(S){return S.h==-1}t.l=function(S){return S=B(this,S),j(S)?-1:N(S)?0:1};function k(S){const E=S.g.length,A=[];for(let M=0;M<E;M++)A[M]=~S.g[M];return new c(A,~S.h).add(_)}t.abs=function(){return j(this)?k(this):this},t.add=function(S){const E=Math.max(this.g.length,S.g.length),A=[];let M=0;for(let O=0;O<=E;O++){let U=M+(this.i(O)&65535)+(S.i(O)&65535),P=(U>>>16)+(this.i(O)>>>16)+(S.i(O)>>>16);M=P>>>16,U&=65535,P&=65535,A[O]=P<<16|U}return new c(A,A[A.length-1]&-2147483648?-1:0)};function B(S,E){return S.add(k(E))}t.j=function(S){if(N(this)||N(S))return b;if(j(this))return j(S)?k(this).j(k(S)):k(k(this).j(S));if(j(S))return k(this.j(k(S)));if(this.l(C)<0&&S.l(C)<0)return g(this.m()*S.m());const E=this.g.length+S.g.length,A=[];for(var M=0;M<2*E;M++)A[M]=0;for(M=0;M<this.g.length;M++)for(let O=0;O<S.g.length;O++){const U=this.i(M)>>>16,P=this.i(M)&65535,xe=S.i(O)>>>16,Ee=S.i(O)&65535;A[2*M+2*O]+=P*Ee,$(A,2*M+2*O),A[2*M+2*O+1]+=U*Ee,$(A,2*M+2*O+1),A[2*M+2*O+1]+=P*xe,$(A,2*M+2*O+1),A[2*M+2*O+2]+=U*xe,$(A,2*M+2*O+2)}for(S=0;S<E;S++)A[S]=A[2*S+1]<<16|A[2*S];for(S=E;S<2*E;S++)A[S]=0;return new c(A,0)};function $(S,E){for(;(S[E]&65535)!=S[E];)S[E+1]+=S[E]>>>16,S[E]&=65535,E++}function R(S,E){this.g=S,this.h=E}function V(S,E){if(N(E))throw Error("division by zero");if(N(S))return new R(b,b);if(j(S))return E=V(k(S),E),new R(k(E.g),k(E.h));if(j(E))return E=V(S,k(E)),new R(k(E.g),E.h);if(S.g.length>30){if(j(S)||j(E))throw Error("slowDivide_ only works with positive integers.");for(var A=_,M=E;M.l(S)<=0;)A=z(A),M=z(M);var O=F(A,1),U=F(M,1);for(M=F(M,2),A=F(A,2);!N(M);){var P=U.add(M);P.l(S)<=0&&(O=O.add(A),U=P),M=F(M,1),A=F(A,1)}return E=B(S,O.j(E)),new R(O,E)}for(O=b;S.l(E)>=0;){for(A=Math.max(1,Math.floor(S.m()/E.m())),M=Math.ceil(Math.log(A)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),U=g(A),P=U.j(E);j(P)||P.l(S)>0;)A-=M,U=g(A),P=U.j(E);N(U)&&(U=_),O=O.add(U),S=B(S,P)}return new R(O,S)}t.B=function(S){return V(this,S).h},t.and=function(S){const E=Math.max(this.g.length,S.g.length),A=[];for(let M=0;M<E;M++)A[M]=this.i(M)&S.i(M);return new c(A,this.h&S.h)},t.or=function(S){const E=Math.max(this.g.length,S.g.length),A=[];for(let M=0;M<E;M++)A[M]=this.i(M)|S.i(M);return new c(A,this.h|S.h)},t.xor=function(S){const E=Math.max(this.g.length,S.g.length),A=[];for(let M=0;M<E;M++)A[M]=this.i(M)^S.i(M);return new c(A,this.h^S.h)};function z(S){const E=S.g.length+1,A=[];for(let M=0;M<E;M++)A[M]=S.i(M)<<1|S.i(M-1)>>>31;return new c(A,S.h)}function F(S,E){const A=E>>5;E%=32;const M=S.g.length-A,O=[];for(let U=0;U<M;U++)O[U]=E>0?S.i(U+A)>>>E|S.i(U+A+1)<<32-E:S.i(U+A);return new c(O,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,M4=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=v,Aa=c}).apply(typeof K_<"u"?K_:typeof self<"u"?self:typeof window<"u"?window:{});var rf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var P4,Pu,O4,Cf,cy,L4,V4,U4;(function(){var t,e=Object.defineProperty;function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof rf=="object"&&rf];for(var x=0;x<f.length;++x){var T=f[x];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=n(this);function a(f,x){if(x)e:{var T=r;f=f.split(".");for(var L=0;L<f.length-1;L++){var W=f[L];if(!(W in T))break e;T=T[W]}f=f[f.length-1],L=T[f],x=x(L),x!=L&&x!=null&&e(T,f,{configurable:!0,writable:!0,value:x})}}a("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(f){return f||function(x){var T=[],L;for(L in x)Object.prototype.hasOwnProperty.call(x,L)&&T.push([L,x[L]]);return T}});var l=l||{},c=this||self;function h(f){var x=typeof f;return x=="object"&&f!=null||x=="function"}function m(f,x,T){return f.call.apply(f.bind,arguments)}function g(f,x,T){return g=m,g.apply(null,arguments)}function v(f,x){var T=Array.prototype.slice.call(arguments,1);return function(){var L=T.slice();return L.push.apply(L,arguments),f.apply(this,L)}}function b(f,x){function T(){}T.prototype=x.prototype,f.Z=x.prototype,f.prototype=new T,f.prototype.constructor=f,f.Ob=function(L,W,re){for(var Ne=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)Ne[ot-2]=arguments[ot];return x.prototype[W].apply(L,Ne)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function C(f){const x=f.length;if(x>0){const T=Array(x);for(let L=0;L<x;L++)T[L]=f[L];return T}return[]}function N(f,x){for(let L=1;L<arguments.length;L++){const W=arguments[L];var T=typeof W;if(T=T!="object"?T:W?Array.isArray(W)?"array":T:"null",T=="array"||T=="object"&&typeof W.length=="number"){T=f.length||0;const re=W.length||0;f.length=T+re;for(let Ne=0;Ne<re;Ne++)f[T+Ne]=W[Ne]}else f.push(W)}}class j{constructor(x,T){this.i=x,this.j=T,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function k(f){c.setTimeout(()=>{throw f},0)}function B(){var f=S;let x=null;return f.g&&(x=f.g,f.g=f.g.next,f.g||(f.h=null),x.next=null),x}class ${constructor(){this.h=this.g=null}add(x,T){const L=R.get();L.set(x,T),this.h?this.h.next=L:this.g=L,this.h=L}}var R=new j(()=>new V,f=>f.reset());class V{constructor(){this.next=this.g=this.h=null}set(x,T){this.h=x,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let z,F=!1,S=new $,E=()=>{const f=Promise.resolve(void 0);z=()=>{f.then(A)}};function A(){for(var f;f=B();){try{f.h.call(f.g)}catch(T){k(T)}var x=R;x.j(f),x.h<100&&(x.h++,f.next=x.g,x.g=f)}F=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(f,x){this.type=f,this.g=this.target=x,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var f=!1,x=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const T=()=>{};c.addEventListener("test",T,x),c.removeEventListener("test",T,x)}catch{}return f})();function P(f){return/^[\s\xa0]*$/.test(f)}function xe(f,x){O.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,x)}b(xe,O),xe.prototype.init=function(f,x){const T=this.type=f.type,L=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=x,x=f.relatedTarget,x||(T=="mouseover"?x=f.fromElement:T=="mouseout"&&(x=f.toElement)),this.relatedTarget=x,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&xe.Z.h.call(this)},xe.prototype.h=function(){xe.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Ee="closure_listenable_"+(Math.random()*1e6|0),G=0;function ne(f,x,T,L,W){this.listener=f,this.proxy=null,this.src=x,this.type=T,this.capture=!!L,this.ha=W,this.key=++G,this.da=this.fa=!1}function X(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Ae(f,x,T){for(const L in f)x.call(T,f[L],L,f)}function De(f,x){for(const T in f)x.call(void 0,f[T],T,f)}function H(f){const x={};for(const T in f)x[T]=f[T];return x}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ae(f,x){let T,L;for(let W=1;W<arguments.length;W++){L=arguments[W];for(T in L)f[T]=L[T];for(let re=0;re<ee.length;re++)T=ee[re],Object.prototype.hasOwnProperty.call(L,T)&&(f[T]=L[T])}}function de(f){this.src=f,this.g={},this.h=0}de.prototype.add=function(f,x,T,L,W){const re=f.toString();f=this.g[re],f||(f=this.g[re]=[],this.h++);const Ne=_e(f,x,L,W);return Ne>-1?(x=f[Ne],T||(x.fa=!1)):(x=new ne(x,this.src,re,!!L,W),x.fa=T,f.push(x)),x};function je(f,x){const T=x.type;if(T in f.g){var L=f.g[T],W=Array.prototype.indexOf.call(L,x,void 0),re;(re=W>=0)&&Array.prototype.splice.call(L,W,1),re&&(X(x),f.g[T].length==0&&(delete f.g[T],f.h--))}}function _e(f,x,T,L){for(let W=0;W<f.length;++W){const re=f[W];if(!re.da&&re.listener==x&&re.capture==!!T&&re.ha==L)return W}return-1}var Ce="closure_lm_"+(Math.random()*1e6|0),He={};function Ge(f,x,T,L,W){if(Array.isArray(x)){for(let re=0;re<x.length;re++)Ge(f,x[re],T,L,W);return null}return T=ke(T),f&&f[Ee]?f.J(x,T,h(L)?!!L.capture:!1,W):ve(f,x,T,!1,L,W)}function ve(f,x,T,L,W,re){if(!x)throw Error("Invalid event type");const Ne=h(W)?!!W.capture:!!W;let ot=Q(f);if(ot||(f[Ce]=ot=new de(f)),T=ot.add(x,T,L,Ne,re),T.proxy)return T;if(L=he(),T.proxy=L,L.src=f,L.listener=T,f.addEventListener)U||(W=Ne),W===void 0&&(W=!1),f.addEventListener(x.toString(),L,W);else if(f.attachEvent)f.attachEvent(pe(x.toString()),L);else if(f.addListener&&f.removeListener)f.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return T}function he(){function f(T){return x.call(f.src,f.listener,T)}const x=Ie;return f}function $e(f,x,T,L,W){if(Array.isArray(x))for(var re=0;re<x.length;re++)$e(f,x[re],T,L,W);else L=h(L)?!!L.capture:!!L,T=ke(T),f&&f[Ee]?(f=f.i,re=String(x).toString(),re in f.g&&(x=f.g[re],T=_e(x,T,L,W),T>-1&&(X(x[T]),Array.prototype.splice.call(x,T,1),x.length==0&&(delete f.g[re],f.h--)))):f&&(f=Q(f))&&(x=f.g[x.toString()],f=-1,x&&(f=_e(x,T,L,W)),(T=f>-1?x[f]:null)&&oe(T))}function oe(f){if(typeof f!="number"&&f&&!f.da){var x=f.src;if(x&&x[Ee])je(x.i,f);else{var T=f.type,L=f.proxy;x.removeEventListener?x.removeEventListener(T,L,f.capture):x.detachEvent?x.detachEvent(pe(T),L):x.addListener&&x.removeListener&&x.removeListener(L),(T=Q(x))?(je(T,f),T.h==0&&(T.src=null,x[Ce]=null)):X(f)}}}function pe(f){return f in He?He[f]:He[f]="on"+f}function Ie(f,x){if(f.da)f=!0;else{x=new xe(x,this);const T=f.listener,L=f.ha||f.src;f.fa&&oe(f),f=T.call(L,x)}return f}function Q(f){return f=f[Ce],f instanceof de?f:null}var le="__closure_events_fn_"+(Math.random()*1e9>>>0);function ke(f){return typeof f=="function"?f:(f[le]||(f[le]=function(x){return f.handleEvent(x)}),f[le])}function ie(){M.call(this),this.i=new de(this),this.M=this,this.G=null}b(ie,M),ie.prototype[Ee]=!0,ie.prototype.removeEventListener=function(f,x,T,L){$e(this,f,x,T,L)};function ge(f,x){var T,L=f.G;if(L)for(T=[];L;L=L.G)T.push(L);if(f=f.M,L=x.type||x,typeof x=="string")x=new O(x,f);else if(x instanceof O)x.target=x.target||f;else{var W=x;x=new O(L,f),ae(x,W)}W=!0;let re,Ne;if(T)for(Ne=T.length-1;Ne>=0;Ne--)re=x.g=T[Ne],W=be(re,L,!0,x)&&W;if(re=x.g=f,W=be(re,L,!0,x)&&W,W=be(re,L,!1,x)&&W,T)for(Ne=0;Ne<T.length;Ne++)re=x.g=T[Ne],W=be(re,L,!1,x)&&W}ie.prototype.N=function(){if(ie.Z.N.call(this),this.i){var f=this.i;for(const x in f.g){const T=f.g[x];for(let L=0;L<T.length;L++)X(T[L]);delete f.g[x],f.h--}}this.G=null},ie.prototype.J=function(f,x,T,L){return this.i.add(String(f),x,!1,T,L)},ie.prototype.K=function(f,x,T,L){return this.i.add(String(f),x,!0,T,L)};function be(f,x,T,L){if(x=f.i.g[String(x)],!x)return!0;x=x.concat();let W=!0;for(let re=0;re<x.length;++re){const Ne=x[re];if(Ne&&!Ne.da&&Ne.capture==T){const ot=Ne.listener,sn=Ne.ha||Ne.src;Ne.fa&&je(f.i,Ne),W=ot.call(sn,L)!==!1&&W}}return W&&!L.defaultPrevented}function Me(f,x){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=g(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:c.setTimeout(f,x||0)}function nt(f){f.g=Me(()=>{f.g=null,f.i&&(f.i=!1,nt(f))},f.l);const x=f.h;f.h=null,f.m.apply(null,x)}class rt extends M{constructor(x,T){super(),this.m=x,this.l=T,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:nt(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rn(f){M.call(this),this.h=f,this.g={}}b(Rn,M);var Ln=[];function hn(f){Ae(f.g,function(x,T){this.g.hasOwnProperty(T)&&oe(x)},f),f.g={}}Rn.prototype.N=function(){Rn.Z.N.call(this),hn(this)},Rn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kn=c.JSON.stringify,Js=c.JSON.parse,Xt=class{stringify(f){return c.JSON.stringify(f,void 0)}parse(f){return c.JSON.parse(f,void 0)}};function cr(){}function Wt(){}var Ft={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Jt(){O.call(this,"d")}b(Jt,O);function Qn(){O.call(this,"c")}b(Qn,O);var zt={},ms=null;function Zs(){return ms=ms||new ie}zt.Ia="serverreachability";function Go(f){O.call(this,zt.Ia,f)}b(Go,O);function Te(f){const x=Zs();ge(x,new Go(x))}zt.STAT_EVENT="statevent";function Ve(f,x){O.call(this,zt.STAT_EVENT,f),this.stat=x}b(Ve,O);function Ue(f){const x=Zs();ge(x,new Ve(x,f))}zt.Ja="timingevent";function _t(f,x){O.call(this,zt.Ja,f),this.size=x}b(_t,O);function fn(f,x){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){f()},x)}function Yt(){this.g=!0}Yt.prototype.ua=function(){this.g=!1};function Zt(f,x,T,L,W,re){f.info(function(){if(f.g)if(re){var Ne="",ot=re.split("&");for(let kt=0;kt<ot.length;kt++){var sn=ot[kt].split("=");if(sn.length>1){const Kt=sn[0];sn=sn[1];const Ur=Kt.split("_");Ne=Ur.length>=2&&Ur[1]=="type"?Ne+(Kt+"="+sn+"&"):Ne+(Kt+"=redacted&")}}}else Ne=null;else Ne=re;return"XMLHTTP REQ ("+L+") [attempt "+W+"]: "+x+`
`+T+`
`+Ne})}function Pi(f,x,T,L,W,re,Ne){f.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+W+"]: "+x+`
`+T+`
`+re+" "+Ne})}function ps(f,x,T,L){f.info(function(){return"XMLHTTP TEXT ("+x+"): "+vp(f,T)+(L?" "+L:"")})}function Fa(f,x){f.info(function(){return"TIMEOUT: "+x})}Yt.prototype.info=function(){};function vp(f,x){if(!f.g)return x;if(!x)return null;try{const re=JSON.parse(x);if(re){for(f=0;f<re.length;f++)if(Array.isArray(re[f])){var T=re[f];if(!(T.length<2)){var L=T[1];if(Array.isArray(L)&&!(L.length<1)){var W=L[0];if(W!="noop"&&W!="stop"&&W!="close")for(let Ne=1;Ne<L.length;Ne++)L[Ne]=""}}}}return Kn(re)}catch{return x}}var Ha={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Cc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},kc;function $a(){}b($a,cr),$a.prototype.g=function(){return new XMLHttpRequest},kc=new $a;function ei(f){return encodeURIComponent(String(f))}function Md(f){var x=1;f=f.split(":");const T=[];for(;x>0&&f.length;)T.push(f.shift()),x--;return f.length&&T.push(f.join(":")),T}function Xr(f,x,T,L){this.j=f,this.i=x,this.l=T,this.S=L||1,this.V=new Rn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Wr}function Wr(){this.i=null,this.g="",this.h=!1}var mn={},jn={};function gs(f,x,T){f.M=1,f.A=qa(gn(x)),f.u=T,f.R=!0,Yo(f,null)}function Yo(f,x){f.F=Date.now(),ys(f),f.B=gn(f.A);var T=f.B,L=f.S;Array.isArray(L)||(L=[String(L)]),Wo(T.i,"t",L),f.C=0,T=f.j.L,f.h=new Wr,f.g=Qd(f.j,T?x:null,!f.u),f.P>0&&(f.O=new rt(g(f.Y,f,f.g),f.P)),x=f.V,T=f.g,L=f.ba;var W="readystatechange";Array.isArray(W)||(W&&(Ln[0]=W.toString()),W=Ln);for(let re=0;re<W.length;re++){const Ne=Ge(T,W[re],L||x.handleEvent,!1,x.h||x);if(!Ne)break;x.g[Ne.key]=Ne}x=f.J?H(f.J):{},f.u?(f.v||(f.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,x)):(f.v="GET",f.g.ea(f.B,f.v,null,x)),Te(),Zt(f.i,f.v,f.B,f.l,f.S,f.u)}Xr.prototype.ba=function(f){f=f.target;const x=this.O;x&&es(f)==3?x.j():this.Y(f)},Xr.prototype.Y=function(f){try{if(f==this.g)e:{const ot=es(this.g),sn=this.g.ya(),kt=this.g.ca();if(!(ot<3)&&(ot!=3||this.g&&(this.h.h||this.g.la()||Vn(this.g)))){this.K||ot!=4||sn==7||(sn==8||kt<=0?Te(3):Te(2)),vs(this);var x=this.g.ca();this.X=x;var T=bp(this);if(this.o=x==200,Pi(this.i,this.v,this.B,this.l,this.S,ot,x),this.o){if(this.U&&!this.L){t:{if(this.g){var L,W=this.g;if((L=W.g?W.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(L)){var re=L;break t}}re=null}if(f=re)ps(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,bs(this,f);else{this.o=!1,this.m=3,Ue(12),wr(this),Or(this);break e}}if(this.R){f=!0;let Kt;for(;!this.K&&this.C<T.length;)if(Kt=Od(this,T),Kt==jn){ot==4&&(this.m=4,Ue(14),f=!1),ps(this.i,this.l,null,"[Incomplete Response]");break}else if(Kt==mn){this.m=4,Ue(15),ps(this.i,this.l,T,"[Invalid Chunk]"),f=!1;break}else ps(this.i,this.l,Kt,null),bs(this,Kt);if(Pd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||T.length!=0||this.h.h||(this.m=1,Ue(16),f=!1),this.o=this.o&&f,!f)ps(this.i,this.l,T,"[Invalid Chunked Response]"),wr(this),Or(this);else if(T.length>0&&!this.W){this.W=!0;var Ne=this.j;Ne.g==this&&Ne.aa&&!Ne.P&&(Ne.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Fc(Ne),Ne.P=!0,Ue(11))}}else ps(this.i,this.l,T,null),bs(this,T);ot==4&&wr(this),this.o&&!this.K&&(ot==4?qd(this.j,this):(this.o=!1,ys(this)))}else ni(this.g),x==400&&T.indexOf("Unknown SID")>0?(this.m=3,Ue(12)):(this.m=0,Ue(13)),wr(this),Or(this)}}}catch{}finally{}};function bp(f){if(!Pd(f))return f.g.la();const x=Vn(f.g);if(x==="")return"";let T="";const L=x.length,W=es(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return wr(f),Or(f),"";f.h.i=new c.TextDecoder}for(let re=0;re<L;re++)f.h.h=!0,T+=f.h.i.decode(x[re],{stream:!(W&&re==L-1)});return x.length=0,f.h.g+=T,f.C=0,f.h.g}function Pd(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function Od(f,x){var T=f.C,L=x.indexOf(`
`,T);return L==-1?jn:(T=Number(x.substring(T,L)),isNaN(T)?mn:(L+=1,L+T>x.length?jn:(x=x.slice(L,L+T),f.C=L+T,x)))}Xr.prototype.cancel=function(){this.K=!0,wr(this)};function ys(f){f.T=Date.now()+f.H,Ko(f,f.H)}function Ko(f,x){if(f.D!=null)throw Error("WatchDog timer not null");f.D=fn(g(f.aa,f),x)}function vs(f){f.D&&(c.clearTimeout(f.D),f.D=null)}Xr.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(Fa(this.i,this.B),this.M!=2&&(Te(),Ue(17)),wr(this),this.m=2,Or(this)):Ko(this,this.T-f)};function Or(f){f.j.I==0||f.K||qd(f.j,f)}function wr(f){vs(f);var x=f.O;x&&typeof x.dispose=="function"&&x.dispose(),f.O=null,hn(f.V),f.g&&(x=f.g,f.g=null,x.abort(),x.dispose())}function bs(f,x){try{var T=f.j;if(T.I!=0&&(T.g==f||_s(T.h,f))){if(!f.L&&_s(T.h,f)&&T.I==3){try{var L=T.Ba.g.parse(x)}catch{L=null}if(Array.isArray(L)&&L.length==3){var W=L;if(W[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<f.F)nl(T),Hi(T);else break e;Ja(T),Ue(18)}}else T.xa=W[1],0<T.xa-T.K&&W[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=fn(g(T.Va,T),6e3));xs(T.h)<=1&&T.ta&&(T.ta=void 0)}else ks(T,11)}else if((f.L||T.g==f)&&nl(T),!P(x))for(W=T.Ba.g.parse(x),x=0;x<W.length;x++){let kt=W[x];const Kt=kt[0];if(!(Kt<=T.K))if(T.K=Kt,kt=kt[1],T.I==2)if(kt[0]=="c"){T.M=kt[1],T.ba=kt[2];const Ur=kt[3];Ur!=null&&(T.ka=Ur,T.j.info("VER="+T.ka));const As=kt[4];As!=null&&(T.za=As,T.j.info("SVER="+T.za));const ts=kt[5];ts!=null&&typeof ts=="number"&&ts>0&&(L=1.5*ts,T.O=L,T.j.info("backChannelRequestTimeoutMs_="+L)),L=T;const ns=f.g;if(ns){const Za=ns.g?ns.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Za){var re=L.h;re.g||Za.indexOf("spdy")==-1&&Za.indexOf("quic")==-1&&Za.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(Rc(re,re.h),re.h=null))}if(L.G){const rl=ns.g?ns.g.getResponseHeader("X-HTTP-Session-Id"):null;rl&&(L.wa=rl,jt(L.J,L.G,rl))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-f.F,T.j.info("Handshake RTT: "+T.T+"ms")),L=T;var Ne=f;if(L.na=Kd(L,L.L?L.ba:null,L.W),Ne.L){jc(L.h,Ne);var ot=Ne,sn=L.O;sn&&(ot.H=sn),ot.D&&(vs(ot),ys(ot)),L.g=Ne}else Hd(L);T.i.length>0&&Cs(T)}else kt[0]!="stop"&&kt[0]!="close"||ks(T,7);else T.I==3&&(kt[0]=="stop"||kt[0]=="close"?kt[0]=="stop"?ks(T,7):zc(T):kt[0]!="noop"&&T.l&&T.l.qa(kt),T.A=0)}}Te(4)}catch{}}var pn=class{constructor(f,x){this.g=f,this.map=x}};function Ac(f){this.l=f||10,c.PerformanceNavigationTiming?(f=c.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Nc(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function xs(f){return f.h?1:f.g?f.g.size:0}function _s(f,x){return f.h?f.h==x:f.g?f.g.has(x):!1}function Rc(f,x){f.g?f.g.add(x):f.h=x}function jc(f,x){f.h&&f.h==x?f.h=null:f.g&&f.g.has(x)&&f.g.delete(x)}Ac.prototype.cancel=function(){if(this.i=Ic(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Ic(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let x=f.i;for(const T of f.g.values())x=x.concat(T.G);return x}return C(f.i)}var Ld=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qo(f,x){if(f){f=f.split("&");for(let T=0;T<f.length;T++){const L=f[T].indexOf("=");let W,re=null;L>=0?(W=f[T].substring(0,L),re=f[T].substring(L+1)):W=f[T],x(W,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function Er(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;f instanceof Er?(this.l=f.l,In(this,f.j),this.o=f.o,this.g=f.g,Oi(this,f.u),this.h=f.h,Dc(this,Bd(f.i)),this.m=f.m):f&&(x=String(f).match(Ld))?(this.l=!1,In(this,x[1]||"",!0),this.o=ws(x[2]||""),this.g=ws(x[3]||"",!0),Oi(this,x[4]),this.h=ws(x[5]||"",!0),Dc(this,x[6]||"",!0),this.m=ws(x[7]||"")):(this.l=!1,this.i=new Vi(null,this.l))}Er.prototype.toString=function(){const f=[];var x=this.j;x&&f.push(Ga(x,Xo,!0),":");var T=this.g;return(T||x=="file")&&(f.push("//"),(x=this.o)&&f.push(Ga(x,Xo,!0),"@"),f.push(ei(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&f.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&f.push("/"),f.push(Ga(T,T.charAt(0)=="/"?Mc:Vd,!0))),(T=this.i.toString())&&f.push("?",T),(T=this.m)&&f.push("#",Ga(T,Ud)),f.join("")},Er.prototype.resolve=function(f){const x=gn(this);let T=!!f.j;T?In(x,f.j):T=!!f.o,T?x.o=f.o:T=!!f.g,T?x.g=f.g:T=f.u!=null;var L=f.h;if(T)Oi(x,f.u);else if(T=!!f.h){if(L.charAt(0)!="/")if(this.g&&!this.h)L="/"+L;else{var W=x.h.lastIndexOf("/");W!=-1&&(L=x.h.slice(0,W+1)+L)}if(W=L,W==".."||W==".")L="";else if(W.indexOf("./")!=-1||W.indexOf("/.")!=-1){L=W.lastIndexOf("/",0)==0,W=W.split("/");const re=[];for(let Ne=0;Ne<W.length;){const ot=W[Ne++];ot=="."?L&&Ne==W.length&&re.push(""):ot==".."?((re.length>1||re.length==1&&re[0]!="")&&re.pop(),L&&Ne==W.length&&re.push("")):(re.push(ot),L=!0)}L=re.join("/")}else L=W}return T?x.h=L:T=f.i.toString()!=="",T?Dc(x,Bd(f.i)):T=!!f.m,T&&(x.m=f.m),x};function gn(f){return new Er(f)}function In(f,x,T){f.j=T?ws(x,!0):x,f.j&&(f.j=f.j.replace(/:$/,""))}function Oi(f,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);f.u=x}else f.u=null}function Dc(f,x,T){x instanceof Vi?(f.i=x,Jo(f.i,f.l)):(T||(x=Ga(x,Li)),f.i=new Vi(x,f.l))}function jt(f,x,T){f.i.set(x,T)}function qa(f){return jt(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function ws(f,x){return f?x?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Ga(f,x,T){return typeof f=="string"?(f=encodeURI(f).replace(x,ur),T&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function ur(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Xo=/[#\/\?@]/g,Vd=/[#\?:]/g,Mc=/[#\?]/g,Li=/[#\?@]/g,Ud=/#/g;function Vi(f,x){this.h=this.g=null,this.i=f||null,this.j=!!x}function dr(f){f.g||(f.g=new Map,f.h=0,f.i&&Qo(f.i,function(x,T){f.add(decodeURIComponent(x.replace(/\+/g," ")),T)}))}t=Vi.prototype,t.add=function(f,x){dr(this),this.i=null,f=Ui(this,f);let T=this.g.get(f);return T||this.g.set(f,T=[]),T.push(x),this.h+=1,this};function zd(f,x){dr(f),x=Ui(f,x),f.g.has(x)&&(f.i=null,f.h-=f.g.get(x).length,f.g.delete(x))}function Pc(f,x){return dr(f),x=Ui(f,x),f.g.has(x)}t.forEach=function(f,x){dr(this),this.g.forEach(function(T,L){T.forEach(function(W){f.call(x,W,L,this)},this)},this)};function Oc(f,x){dr(f);let T=[];if(typeof x=="string")Pc(f,x)&&(T=T.concat(f.g.get(Ui(f,x))));else for(f=Array.from(f.g.values()),x=0;x<f.length;x++)T=T.concat(f[x]);return T}t.set=function(f,x){return dr(this),this.i=null,f=Ui(this,f),Pc(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[x]),this.h+=1,this},t.get=function(f,x){return f?(f=Oc(this,f),f.length>0?String(f[0]):x):x};function Wo(f,x,T){zd(f,x),T.length>0&&(f.i=null,f.g.set(Ui(f,x),C(T)),f.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],x=Array.from(this.g.keys());for(let L=0;L<x.length;L++){var T=x[L];const W=ei(T);T=Oc(this,T);for(let re=0;re<T.length;re++){let Ne=W;T[re]!==""&&(Ne+="="+ei(T[re])),f.push(Ne)}}return this.i=f.join("&")};function Bd(f){const x=new Vi;return x.i=f.i,f.g&&(x.g=new Map(f.g),x.h=f.h),x}function Ui(f,x){return x=String(x),f.j&&(x=x.toLowerCase()),x}function Jo(f,x){x&&!f.j&&(dr(f),f.i=null,f.g.forEach(function(T,L){const W=L.toLowerCase();L!=W&&(zd(this,L),Wo(this,W,T))},f)),f.j=x}function Jr(f,x){const T=new Yt;if(c.Image){const L=new Image;L.onload=v(Lr,T,"TestLoadImage: loaded",!0,x,L),L.onerror=v(Lr,T,"TestLoadImage: error",!1,x,L),L.onabort=v(Lr,T,"TestLoadImage: abort",!1,x,L),L.ontimeout=v(Lr,T,"TestLoadImage: timeout",!1,x,L),c.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=f}else x(!1)}function Lc(f,x){const T=new Yt,L=new AbortController,W=setTimeout(()=>{L.abort(),Lr(T,"TestPingServer: timeout",!1,x)},1e4);fetch(f,{signal:L.signal}).then(re=>{clearTimeout(W),re.ok?Lr(T,"TestPingServer: ok",!0,x):Lr(T,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(W),Lr(T,"TestPingServer: error",!1,x)})}function Lr(f,x,T,L,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),L(T)}catch{}}function zi(){this.g=new Xt}function Es(f){this.i=f.Sb||null,this.h=f.ab||!1}b(Es,cr),Es.prototype.g=function(){return new Ya(this.i,this.h)};function Ya(f,x){ie.call(this),this.H=f,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(Ya,ie),t=Ya.prototype,t.open=function(f,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=x,this.readyState=1,Zr(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(x.body=f),(this.H||c).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Bi(this)),this.readyState=0},t.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Zr(this)),this.g&&(this.readyState=3,Zr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Zo(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function Zo(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}t.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var x=f.value?f.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!f.done}))&&(this.response=this.responseText+=x)}f.done?Bi(this):Zr(this),this.readyState==3&&Zo(this)}},t.Oa=function(f){this.g&&(this.response=this.responseText=f,Bi(this))},t.Na=function(f){this.g&&(this.response=f,Bi(this))},t.ga=function(){this.g&&Bi(this)};function Bi(f){f.readyState=4,f.l=null,f.j=null,f.B=null,Zr(f)}t.setRequestHeader=function(f,x){this.A.append(f,x)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],x=this.h.entries();for(var T=x.next();!T.done;)T=T.value,f.push(T[0]+": "+T[1]),T=x.next();return f.join(`\r
`)};function Zr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Ya.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Vr(f){let x="";return Ae(f,function(T,L){x+=L,x+=":",x+=T,x+=`\r
`}),x}function Ka(f,x,T){e:{for(L in T){var L=!1;break e}L=!0}L||(T=Vr(T),typeof f=="string"?T!=null&&ei(T):jt(f,x,T))}function Mt(f){ie.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(Mt,ie);var Ss=/^https?$/i,Vc=["POST","PUT"];t=Mt.prototype,t.Fa=function(f){this.H=f},t.ea=function(f,x,T,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);x=x?x.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():kc.g(),this.g.onreadystatechange=_(g(this.Ca,this));try{this.B=!0,this.g.open(x,String(f),!0),this.B=!1}catch(re){Qa(this,re);return}if(f=T||"",T=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var W in L)T.set(W,L[W]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const re of L.keys())T.set(re,L.get(re));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(T.keys()).find(re=>re.toLowerCase()=="content-type"),W=c.FormData&&f instanceof c.FormData,!(Array.prototype.indexOf.call(Vc,x,void 0)>=0)||L||W||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,Ne]of T)this.g.setRequestHeader(re,Ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(re){Qa(this,re)}};function Qa(f,x){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=x,f.o=5,Uc(f),ti(f)}function Uc(f){f.A||(f.A=!0,ge(f,"complete"),ge(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,ge(this,"complete"),ge(this,"abort"),ti(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ti(this,!0)),Mt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Xa(this):this.Xa())},t.Xa=function(){Xa(this)};function Xa(f){if(f.h&&typeof l<"u"){if(f.v&&es(f)==4)setTimeout(f.Ca.bind(f),0);else if(ge(f,"readystatechange"),es(f)==4){f.h=!1;try{const re=f.ca();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var T;if(!(T=x)){var L;if(L=re===0){let Ne=String(f.D).match(Ld)[1]||null;!Ne&&c.self&&c.self.location&&(Ne=c.self.location.protocol.slice(0,-1)),L=!Ss.test(Ne?Ne.toLowerCase():"")}T=L}if(T)ge(f,"complete"),ge(f,"success");else{f.o=6;try{var W=es(f)>2?f.g.statusText:""}catch{W=""}f.l=W+" ["+f.ca()+"]",Uc(f)}}finally{ti(f)}}}}function ti(f,x){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const T=f.g;f.g=null,x||ge(f,"ready");try{T.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function es(f){return f.g?f.g.readyState:0}t.ca=function(){try{return es(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(f){if(this.g){var x=this.g.responseText;return f&&x.indexOf(f)==0&&(x=x.substring(f.length)),Js(x)}};function Vn(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function ni(f){const x={};f=(f.g&&es(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<f.length;L++){if(P(f[L]))continue;var T=Md(f[L]);const W=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const re=x[W]||[];x[W]=re,re.push(T)}De(x,function(L){return L.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ts(f,x,T){return T&&T.internalChannelParams&&T.internalChannelParams[f]||x}function Fi(f){this.za=0,this.i=[],this.j=new Yt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ts("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ts("baseRetryDelayMs",5e3,f),this.Za=Ts("retryDelaySeedMs",1e4,f),this.Ta=Ts("forwardChannelMaxRetries",2,f),this.va=Ts("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new Ac(f&&f.concurrentRequestLimit),this.Ba=new zi,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Fi.prototype,t.ka=8,t.I=1,t.connect=function(f,x,T,L){Ue(0),this.W=f,this.H=x||{},T&&L!==void 0&&(this.H.OSID=T,this.H.OAID=L),this.F=this.X,this.J=Kd(this,null,this.W),Cs(this)};function zc(f){if(el(f),f.I==3){var x=f.V++,T=gn(f.J);if(jt(T,"SID",f.M),jt(T,"RID",x),jt(T,"TYPE","terminate"),Wa(f,T),x=new Xr(f,f.j,x),x.M=2,x.A=qa(gn(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(x.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=x.A,T=!0),T||(x.g=Qd(x.j,null),x.g.ea(x.A)),x.F=Date.now(),ys(x)}Yd(f)}function Hi(f){f.g&&(Fc(f),f.g.cancel(),f.g=null)}function el(f){Hi(f),f.v&&(c.clearTimeout(f.v),f.v=null),nl(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&c.clearTimeout(f.m),f.m=null)}function Cs(f){if(!Nc(f.h)&&!f.m){f.m=!0;var x=f.Ea;z||E(),F||(z(),F=!0),S.add(x,f),f.D=0}}function tl(f,x){return xs(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=x.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=fn(g(f.Ea,f,x),Gd(f,f.D)),f.D++,!0)}t.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const W=new Xr(this,this.j,f);let re=this.o;if(this.U&&(re?(re=H(re),ae(re,this.U)):re=this.U),this.u!==null||this.R||(W.J=re,re=null),this.S)e:{for(var x=0,T=0;T<this.i.length;T++){t:{var L=this.i[T];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(x+=L,x>4096){x=T;break e}if(x===4096||T===this.i.length-1){x=T+1;break e}}x=1e3}else x=1e3;x=Fd(this,W,x),T=gn(this.J),jt(T,"RID",f),jt(T,"CVER",22),this.G&&jt(T,"X-HTTP-Session-Id",this.G),Wa(this,T),re&&(this.R?x="headers="+ei(Vr(re))+"&"+x:this.u&&Ka(T,this.u,re)),Rc(this.h,W),this.Ra&&jt(T,"TYPE","init"),this.S?(jt(T,"$req",x),jt(T,"SID","null"),W.U=!0,gs(W,T,null)):gs(W,T,x),this.I=2}}else this.I==3&&(f?Bc(this,f):this.i.length==0||Nc(this.h)||Bc(this))};function Bc(f,x){var T;x?T=x.l:T=f.V++;const L=gn(f.J);jt(L,"SID",f.M),jt(L,"RID",T),jt(L,"AID",f.K),Wa(f,L),f.u&&f.o&&Ka(L,f.u,f.o),T=new Xr(f,f.j,T,f.D+1),f.u===null&&(T.J=f.o),x&&(f.i=x.G.concat(f.i)),x=Fd(f,T,1e3),T.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),Rc(f.h,T),gs(T,L,x)}function Wa(f,x){f.H&&Ae(f.H,function(T,L){jt(x,L,T)}),f.l&&Ae({},function(T,L){jt(x,L,T)})}function Fd(f,x,T){T=Math.min(f.i.length,T);const L=f.l?g(f.l.Ka,f.l,f):null;e:{var W=f.i;let ot=-1;for(;;){const sn=["count="+T];ot==-1?T>0?(ot=W[0].g,sn.push("ofs="+ot)):ot=0:sn.push("ofs="+ot);let kt=!0;for(let Kt=0;Kt<T;Kt++){var re=W[Kt].g;const Ur=W[Kt].map;if(re-=ot,re<0)ot=Math.max(0,W[Kt].g-100),kt=!1;else try{re="req"+re+"_"||"";try{var Ne=Ur instanceof Map?Ur:Object.entries(Ur);for(const[As,ts]of Ne){let ns=ts;h(ts)&&(ns=Kn(ts)),sn.push(re+As+"="+encodeURIComponent(ns))}}catch(As){throw sn.push(re+"type="+encodeURIComponent("_badmap")),As}}catch{L&&L(Ur)}}if(kt){Ne=sn.join("&");break e}}Ne=void 0}return f=f.i.splice(0,T),x.G=f,Ne}function Hd(f){if(!f.g&&!f.v){f.Y=1;var x=f.Da;z||E(),F||(z(),F=!0),S.add(x,f),f.A=0}}function Ja(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=fn(g(f.Da,f),Gd(f,f.A)),f.A++,!0)}t.Da=function(){if(this.v=null,$d(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=fn(g(this.Wa,this),f)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ue(10),Hi(this),$d(this))};function Fc(f){f.B!=null&&(c.clearTimeout(f.B),f.B=null)}function $d(f){f.g=new Xr(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var x=gn(f.na);jt(x,"RID","rpc"),jt(x,"SID",f.M),jt(x,"AID",f.K),jt(x,"CI",f.F?"0":"1"),!f.F&&f.ia&&jt(x,"TO",f.ia),jt(x,"TYPE","xmlhttp"),Wa(f,x),f.u&&f.o&&Ka(x,f.u,f.o),f.O&&(f.g.H=f.O);var T=f.g;f=f.ba,T.M=1,T.A=qa(gn(x)),T.u=null,T.R=!0,Yo(T,f)}t.Va=function(){this.C!=null&&(this.C=null,Hi(this),Ja(this),Ue(19))};function nl(f){f.C!=null&&(c.clearTimeout(f.C),f.C=null)}function qd(f,x){var T=null;if(f.g==x){nl(f),Fc(f),f.g=null;var L=2}else if(_s(f.h,x))T=x.G,jc(f.h,x),L=1;else return;if(f.I!=0){if(x.o)if(L==1){T=x.u?x.u.length:0,x=Date.now()-x.F;var W=f.D;L=Zs(),ge(L,new _t(L,T)),Cs(f)}else Hd(f);else if(W=x.m,W==3||W==0&&x.X>0||!(L==1&&tl(f,x)||L==2&&Ja(f)))switch(T&&T.length>0&&(x=f.h,x.i=x.i.concat(T)),W){case 1:ks(f,5);break;case 4:ks(f,10);break;case 3:ks(f,6);break;default:ks(f,2)}}}function Gd(f,x){let T=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(T*=2),T*x}function ks(f,x){if(f.j.info("Error code "+x),x==2){var T=g(f.bb,f),L=f.Ua;const W=!L;L=new Er(L||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||In(L,"https"),qa(L),W?Jr(L.toString(),T):Lc(L.toString(),T)}else Ue(2);f.I=0,f.l&&f.l.pa(x),Yd(f),el(f)}t.bb=function(f){f?(this.j.info("Successfully pinged google.com"),Ue(2)):(this.j.info("Failed to ping google.com"),Ue(1))};function Yd(f){if(f.I=0,f.ja=[],f.l){const x=Ic(f.h);(x.length!=0||f.i.length!=0)&&(N(f.ja,x),N(f.ja,f.i),f.h.i.length=0,C(f.i),f.i.length=0),f.l.oa()}}function Kd(f,x,T){var L=T instanceof Er?gn(T):new Er(T);if(L.g!="")x&&(L.g=x+"."+L.g),Oi(L,L.u);else{var W=c.location;L=W.protocol,x=x?x+"."+W.hostname:W.hostname,W=+W.port;const re=new Er(null);L&&In(re,L),x&&(re.g=x),W&&Oi(re,W),T&&(re.h=T),L=re}return T=f.G,x=f.wa,T&&x&&jt(L,T,x),jt(L,"VER",f.ka),Wa(f,L),L}function Qd(f,x,T){if(x&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=f.Aa&&!f.ma?new Mt(new Es({ab:T})):new Mt(f.ma),x.Fa(f.L),x}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xd(){}t=Xd.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function $i(){}$i.prototype.g=function(f,x){return new sr(f,x)};function sr(f,x){ie.call(this),this.g=new Fi(x),this.l=f,this.h=x&&x.messageUrlParams||null,f=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(f?f["X-WebChannel-Content-Type"]=x.messageContentType:f={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(f?f["X-WebChannel-Client-Profile"]=x.sa:f={"X-WebChannel-Client-Profile":x.sa}),this.g.U=f,(f=x&&x.Qb)&&!P(f)&&(this.g.u=f),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!P(x)&&(this.g.G=x,f=this.h,f!==null&&x in f&&(f=this.h,x in f&&delete f[x])),this.j=new ri(this)}b(sr,ie),sr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},sr.prototype.close=function(){zc(this.g)},sr.prototype.o=function(f){var x=this.g;if(typeof f=="string"){var T={};T.__data__=f,f=T}else this.v&&(T={},T.__data__=Kn(f),f=T);x.i.push(new pn(x.Ya++,f)),x.I==3&&Cs(x)},sr.prototype.N=function(){this.g.l=null,delete this.j,zc(this.g),delete this.g,sr.Z.N.call(this)};function Wd(f){Jt.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var x=f.__sm__;if(x){e:{for(const T in x){f=T;break e}f=void 0}(this.i=f)&&(f=this.i,x=x!==null&&f in x?x[f]:void 0),this.data=x}else this.data=f}b(Wd,Jt);function Jd(){Qn.call(this),this.status=1}b(Jd,Qn);function ri(f){this.g=f}b(ri,Xd),ri.prototype.ra=function(){ge(this.g,"a")},ri.prototype.qa=function(f){ge(this.g,new Wd(f))},ri.prototype.pa=function(f){ge(this.g,new Jd)},ri.prototype.oa=function(){ge(this.g,"b")},$i.prototype.createWebChannel=$i.prototype.g,sr.prototype.send=sr.prototype.o,sr.prototype.open=sr.prototype.m,sr.prototype.close=sr.prototype.close,U4=function(){return new $i},V4=function(){return Zs()},L4=zt,cy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ha.NO_ERROR=0,Ha.TIMEOUT=8,Ha.HTTP_ERROR=6,Cf=Ha,Cc.COMPLETE="complete",O4=Cc,Wt.EventType=Ft,Ft.OPEN="a",Ft.CLOSE="b",Ft.ERROR="c",Ft.MESSAGE="d",ie.prototype.listen=ie.prototype.J,Pu=Wt,Mt.prototype.listenOnce=Mt.prototype.K,Mt.prototype.getLastError=Mt.prototype.Ha,Mt.prototype.getLastErrorCode=Mt.prototype.ya,Mt.prototype.getStatus=Mt.prototype.ca,Mt.prototype.getResponseJson=Mt.prototype.La,Mt.prototype.getResponseText=Mt.prototype.la,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Fa,P4=Mt}).apply(typeof rf<"u"?rf:typeof self<"u"?self:typeof window<"u"?window:{});const Q_="@firebase/firestore",X_="4.9.2";let Jn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Jn.UNAUTHENTICATED=new Jn(null),Jn.GOOGLE_CREDENTIALS=new Jn("google-credentials-uid"),Jn.FIRST_PARTY=new Jn("first-party-uid"),Jn.MOCK_USER=new Jn("mock-user");let yc="12.3.0";const No=new av("@firebase/firestore");function Ol(){return No.logLevel}function Le(t,...e){if(No.logLevel<=vt.DEBUG){const n=e.map(yv);No.debug(`Firestore (${yc}): ${t}`,...n)}}function ji(t,...e){if(No.logLevel<=vt.ERROR){const n=e.map(yv);No.error(`Firestore (${yc}): ${t}`,...n)}}function Zl(t,...e){if(No.logLevel<=vt.WARN){const n=e.map(yv);No.warn(`Firestore (${yc}): ${t}`,...n)}}function yv(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Ze(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,z4(t,r,n)}function z4(t,e,n){let r=`FIRESTORE (${yc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ji(r),new Error(r)}function Rt(t,e,n,r){let a="Unexpected state";typeof n=="string"?a=n:r=n,t||z4(e,a,r)}function at(t,e){return t}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends Ks{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ci{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class B4{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class s9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Jn.UNAUTHENTICATED)))}shutdown(){}}class i9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class a9{constructor(e){this.t=e,this.currentUser=Jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Rt(this.o===void 0,42304);let r=this.i;const a=m=>this.i!==r?(r=this.i,n(m)):Promise.resolve();let l=new Ci;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ci,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},h=m=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>h(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?h(m):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ci)}}),0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Rt(typeof r.accessToken=="string",31837,{l:r}),new B4(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Rt(e===null||typeof e=="string",2055,{h:e}),new Jn(e)}}class o9{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Jn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class l9{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new o9(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Jn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class W_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class c9{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Mr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Rt(this.o===void 0,3512);const r=l=>{l.error!=null&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Le("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new W_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Rt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new W_(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function u9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class vv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=u9(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<n&&(r+=e.charAt(a[l]%62))}return r}}function bt(t,e){return t<e?-1:t>e?1:0}function uy(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const a=t.charAt(r),l=e.charAt(r);if(a!==l)return C0(a)===C0(l)?bt(a,l):C0(a)?1:-1}return bt(t.length,e.length)}const d9=55296,h9=57343;function C0(t){const e=t.charCodeAt(0);return e>=d9&&e<=h9}function ec(t,e,n){return t.length===e.length&&t.every(((r,a)=>n(r,e[a])))}const J_="__name__";class Ps{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ze(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ze(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ps.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ps?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let a=0;a<r;a++){const l=Ps.compareSegments(e.get(a),n.get(a));if(l!==0)return l}return bt(e.length,n.length)}static compareSegments(e,n){const r=Ps.isNumericId(e),a=Ps.isNumericId(n);return r&&!a?-1:!r&&a?1:r&&a?Ps.extractNumericId(e).compare(Ps.extractNumericId(n)):uy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Aa.fromString(e.substring(4,e.length-2))}}class Ut extends Ps{construct(e,n,r){return new Ut(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((a=>a.length>0)))}return new Ut(n)}static emptyPath(){return new Ut([])}}const f9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gn extends Ps{construct(e,n,r){return new Gn(e,n,r)}static isValidIdentifier(e){return f9.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===J_}static keyField(){return new Gn([J_])}static fromServerFormat(e){const n=[];let r="",a=0;const l=()=>{if(r.length===0)throw new Re(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new Re(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Re(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,a+=2}else h==="`"?(c=!c,a++):h!=="."||c?(r+=h,a++):(l(),a++)}if(l(),c)throw new Re(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gn(n)}static emptyPath(){return new Gn([])}}class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(Ut.fromString(e))}static fromName(e){return new Ke(Ut.fromString(e).popFirst(5))}static empty(){return new Ke(Ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ut.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new Ut(e.slice()))}}function F4(t,e,n){if(!n)throw new Re(ce.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function m9(t,e,n,r){if(e===!0&&r===!0)throw new Re(ce.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Z_(t){if(!Ke.isDocumentKey(t))throw new Re(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ew(t){if(Ke.isDocumentKey(t))throw new Re(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function H4(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Mm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ze(12329,{type:typeof t})}function ar(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Re(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Mm(t);throw new Re(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function p9(t,e){if(e<=0)throw new Re(ce.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function Cn(t,e){const n={typeString:t};return e&&(n.value=e),n}function xd(t,e){if(!H4(t))throw new Re(ce.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const c=t[r];if(a&&typeof c!==a){n=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){n=`Expected '${r}' field to equal '${l.value}'`;break}}if(n)throw new Re(ce.INVALID_ARGUMENT,n);return!0}const tw=-62135596800,nw=1e6;class Gt{static now(){return Gt.fromMillis(Date.now())}static fromDate(e){return Gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*nw);return new Gt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Re(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Re(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<tw)throw new Re(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/nw}_compareTo(e){return this.seconds===e.seconds?bt(this.nanoseconds,e.nanoseconds):bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(xd(e,Gt._jsonSchema))return new Gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-tw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Gt._jsonSchemaVersion="firestore/timestamp/1.0",Gt._jsonSchema={type:Cn("string",Gt._jsonSchemaVersion),seconds:Cn("number"),nanoseconds:Cn("number")};class st{static fromTimestamp(e){return new st(e)}static min(){return new st(new Gt(0,0))}static max(){return new st(new Gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Xu=-1;function g9(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,a=st.fromTimestamp(r===1e9?new Gt(n+1,0):new Gt(n,r));return new Ia(a,Ke.empty(),e)}function y9(t){return new Ia(t.readTime,t.key,Xu)}class Ia{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ia(st.min(),Ke.empty(),Xu)}static max(){return new Ia(st.max(),Ke.empty(),Xu)}}function v9(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ke.comparator(t.documentKey,e.documentKey),n!==0?n:bt(t.largestBatchId,e.largestBatchId))}const b9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class x9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function vc(t){if(t.code!==ce.FAILED_PRECONDITION||t.message!==b9)throw t;Le("LocalStore","Unexpectedly lost primary lease")}class Se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ze(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Se(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(n,l).next(r,a)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Se?n:Se.resolve(n)}catch(n){return Se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Se.reject(n)}static resolve(e){return new Se(((n,r)=>{n(e)}))}static reject(e){return new Se(((n,r)=>{r(e)}))}static waitFor(e){return new Se(((n,r)=>{let a=0,l=0,c=!1;e.forEach((h=>{++a,h.next((()=>{++l,c&&l===a&&n()}),(m=>r(m)))})),c=!0,l===a&&n()}))}static or(e){let n=Se.resolve(!1);for(const r of e)n=n.next((a=>a?Se.resolve(a):r()));return n}static forEach(e,n){const r=[];return e.forEach(((a,l)=>{r.push(n.call(this,a,l))})),this.waitFor(r)}static mapArray(e,n){return new Se(((r,a)=>{const l=e.length,c=new Array(l);let h=0;for(let m=0;m<l;m++){const g=m;n(e[g]).next((v=>{c[g]=v,++h,h===l&&r(c)}),(v=>a(v)))}}))}static doWhile(e,n){return new Se(((r,a)=>{const l=()=>{e()===!0?n().next((()=>{l()}),a):r()};l()}))}}function _9(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function bc(t){return t.name==="IndexedDbTransactionError"}class Pm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Pm.ce=-1;const bv=-1;function Om(t){return t==null}function em(t){return t===0&&1/t==-1/0}function w9(t){return typeof t=="number"&&Number.isInteger(t)&&!em(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const $4="";function E9(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=rw(e)),e=S9(t.get(n),e);return rw(e)}function S9(t,e){let n=e;const r=t.length;for(let a=0;a<r;a++){const l=t.charAt(a);switch(l){case"\0":n+="";break;case $4:n+="";break;default:n+=l}}return n}function rw(t){return t+$4+""}function sw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function za(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function q4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class en{constructor(e,n){this.comparator=e,this.root=n||qn.EMPTY}insert(e,n){return new en(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,qn.BLACK,null,null))}remove(e){return new en(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return n+r.left.size;a<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sf(this.root,e,this.comparator,!1)}getReverseIterator(){return new sf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sf(this.root,e,this.comparator,!0)}}class sf{constructor(e,n,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?r(e.key,n):1,n&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qn{constructor(e,n,r,a,l){this.key=e,this.value=n,this.color=r??qn.RED,this.left=a??qn.EMPTY,this.right=l??qn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,a,l){return new qn(e??this.key,n??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,n,r),null):l===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return qn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return qn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ze(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ze(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ze(27949);return e+(this.isRed()?0:1)}}qn.EMPTY=null,qn.RED=!0,qn.BLACK=!1;qn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ze(57766)}get value(){throw Ze(16141)}get color(){throw Ze(16727)}get left(){throw Ze(29726)}get right(){throw Ze(36894)}copy(e,n,r,a,l){return this}insert(e,n,r){return new qn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Nn{constructor(e){this.comparator=e,this.data=new en(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new iw(this.data.getIterator())}getIteratorFrom(e){return new iw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Nn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Nn(this.comparator);return n.data=e,n}}class iw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Pr{constructor(e){this.fields=e,e.sort(Gn.comparator)}static empty(){return new Pr([])}unionWith(e){let n=new Nn(Gn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Pr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ec(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class G4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Yn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new G4("Invalid base64 string: "+l):l}})(e);return new Yn(n)}static fromUint8Array(e){const n=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new Yn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yn.EMPTY_BYTE_STRING=new Yn("");const T9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Da(t){if(Rt(!!t,39018),typeof t=="string"){let e=0;const n=T9.exec(t);if(Rt(!!n,46558,{timestamp:t}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:un(t.seconds),nanos:un(t.nanos)}}function un(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ma(t){return typeof t=="string"?Yn.fromBase64String(t):Yn.fromUint8Array(t)}const Y4="server_timestamp",K4="__type__",Q4="__previous_value__",X4="__local_write_time__";function Lm(t){return(t?.mapValue?.fields||{})[K4]?.stringValue===Y4}function Vm(t){const e=t.mapValue.fields[Q4];return Lm(e)?Vm(e):e}function Wu(t){const e=Da(t.mapValue.fields[X4].timestampValue);return new Gt(e.seconds,e.nanos)}class C9{constructor(e,n,r,a,l,c,h,m,g,v){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=v}}const tm="(default)";class Ju{constructor(e,n){this.projectId=e,this.database=n||tm}static empty(){return new Ju("","")}get isDefaultDatabase(){return this.database===tm}isEqual(e){return e instanceof Ju&&e.projectId===this.projectId&&e.database===this.database}}const W4="__type__",k9="__max__",af={mapValue:{}},J4="__vector__",nm="value";function Pa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Lm(t)?4:N9(t)?9007199254740991:A9(t)?10:11:Ze(28295,{value:t})}function qs(t,e){if(t===e)return!0;const n=Pa(t);if(n!==Pa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wu(t).isEqual(Wu(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Da(a.timestampValue),h=Da(l.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(a,l){return Ma(a.bytesValue).isEqual(Ma(l.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(a,l){return un(a.geoPointValue.latitude)===un(l.geoPointValue.latitude)&&un(a.geoPointValue.longitude)===un(l.geoPointValue.longitude)})(t,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return un(a.integerValue)===un(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=un(a.doubleValue),h=un(l.doubleValue);return c===h?em(c)===em(h):isNaN(c)&&isNaN(h)}return!1})(t,e);case 9:return ec(t.arrayValue.values||[],e.arrayValue.values||[],qs);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},h=l.mapValue.fields||{};if(sw(c)!==sw(h))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(h[m]===void 0||!qs(c[m],h[m])))return!1;return!0})(t,e);default:return Ze(52216,{left:t})}}function Zu(t,e){return(t.values||[]).find((n=>qs(n,e)))!==void 0}function tc(t,e){if(t===e)return 0;const n=Pa(t),r=Pa(e);if(n!==r)return bt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return bt(t.booleanValue,e.booleanValue);case 2:return(function(l,c){const h=un(l.integerValue||l.doubleValue),m=un(c.integerValue||c.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1})(t,e);case 3:return aw(t.timestampValue,e.timestampValue);case 4:return aw(Wu(t),Wu(e));case 5:return uy(t.stringValue,e.stringValue);case 6:return(function(l,c){const h=Ma(l),m=Ma(c);return h.compareTo(m)})(t.bytesValue,e.bytesValue);case 7:return(function(l,c){const h=l.split("/"),m=c.split("/");for(let g=0;g<h.length&&g<m.length;g++){const v=bt(h[g],m[g]);if(v!==0)return v}return bt(h.length,m.length)})(t.referenceValue,e.referenceValue);case 8:return(function(l,c){const h=bt(un(l.latitude),un(c.latitude));return h!==0?h:bt(un(l.longitude),un(c.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return ow(t.arrayValue,e.arrayValue);case 10:return(function(l,c){const h=l.fields||{},m=c.fields||{},g=h[nm]?.arrayValue,v=m[nm]?.arrayValue,b=bt(g?.values?.length||0,v?.values?.length||0);return b!==0?b:ow(g,v)})(t.mapValue,e.mapValue);case 11:return(function(l,c){if(l===af.mapValue&&c===af.mapValue)return 0;if(l===af.mapValue)return 1;if(c===af.mapValue)return-1;const h=l.fields||{},m=Object.keys(h),g=c.fields||{},v=Object.keys(g);m.sort(),v.sort();for(let b=0;b<m.length&&b<v.length;++b){const _=uy(m[b],v[b]);if(_!==0)return _;const C=tc(h[m[b]],g[v[b]]);if(C!==0)return C}return bt(m.length,v.length)})(t.mapValue,e.mapValue);default:throw Ze(23264,{he:n})}}function aw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return bt(t,e);const n=Da(t),r=Da(e),a=bt(n.seconds,r.seconds);return a!==0?a:bt(n.nanos,r.nanos)}function ow(t,e){const n=t.values||[],r=e.values||[];for(let a=0;a<n.length&&a<r.length;++a){const l=tc(n[a],r[a]);if(l)return l}return bt(n.length,r.length)}function nc(t){return dy(t)}function dy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Da(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Ma(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ke.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",a=!0;for(const l of n.values||[])a?a=!1:r+=",",r+=dy(l);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${dy(n.fields[c])}`;return a+"}"})(t.mapValue):Ze(61005,{value:t})}function kf(t){switch(Pa(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vm(t);return e?16+kf(e):16;case 5:return 2*t.stringValue.length;case 6:return Ma(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+kf(l)),0)})(t.arrayValue);case 10:case 11:return(function(r){let a=0;return za(r.fields,((l,c)=>{a+=l.length+kf(c)})),a})(t.mapValue);default:throw Ze(13486,{value:t})}}function rm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function hy(t){return!!t&&"integerValue"in t}function xv(t){return!!t&&"arrayValue"in t}function lw(t){return!!t&&"nullValue"in t}function cw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Af(t){return!!t&&"mapValue"in t}function A9(t){return(t?.mapValue?.fields||{})[W4]?.stringValue===J4}function $u(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return za(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=$u(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$u(t.arrayValue.values[n]);return e}return{...t}}function N9(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===k9}class xr{constructor(e){this.value=e}static empty(){return new xr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Af(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$u(n)}setAll(e){let n=Gn.emptyPath(),r={},a=[];e.forEach(((c,h)=>{if(!n.isImmediateParentOf(h)){const m=this.getFieldsMap(n);this.applyChanges(m,r,a),r={},a=[],n=h.popLast()}c?r[h.lastSegment()]=$u(c):a.push(h.lastSegment())}));const l=this.getFieldsMap(n);this.applyChanges(l,r,a)}delete(e){const n=this.field(e.popLast());Af(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=n.mapValue.fields[e.get(r)];Af(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,r){za(n,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new xr($u(this.value))}}function Z4(t){const e=[];return za(t.fields,((n,r)=>{const a=new Gn([n]);if(Af(r)){const l=Z4(r.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new Pr(e)}class er{constructor(e,n,r,a,l,c,h){this.key=e,this.documentType=n,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=h}static newInvalidDocument(e){return new er(e,0,st.min(),st.min(),st.min(),xr.empty(),0)}static newFoundDocument(e,n,r,a){return new er(e,1,n,st.min(),r,a,0)}static newNoDocument(e,n){return new er(e,2,n,st.min(),st.min(),xr.empty(),0)}static newUnknownDocument(e,n){return new er(e,3,n,st.min(),st.min(),xr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(st.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=st.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof er&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new er(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class rc{constructor(e,n){this.position=e,this.inclusive=n}}function uw(t,e,n){let r=0;for(let a=0;a<t.position.length;a++){const l=e[a],c=t.position[a];if(l.field.isKeyField()?r=Ke.comparator(Ke.fromName(c.referenceValue),n.key):r=tc(c,n.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function dw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!qs(t.position[n],e.position[n]))return!1;return!0}class ed{constructor(e,n="asc"){this.field=e,this.dir=n}}function R9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class eT{}class Tn extends eT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new I9(e,n,r):n==="array-contains"?new P9(e,r):n==="in"?new O9(e,r):n==="not-in"?new L9(e,r):n==="array-contains-any"?new V9(e,r):new Tn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new D9(e,r):new M9(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(tc(n,this.value)):n!==null&&Pa(this.value)===Pa(n)&&this.matchesComparison(tc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ze(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hs extends eT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new hs(e,n)}matches(e){return tT(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function tT(t){return t.op==="and"}function nT(t){return j9(t)&&tT(t)}function j9(t){for(const e of t.filters)if(e instanceof hs)return!1;return!0}function fy(t){if(t instanceof Tn)return t.field.canonicalString()+t.op.toString()+nc(t.value);if(nT(t))return t.filters.map((e=>fy(e))).join(",");{const e=t.filters.map((n=>fy(n))).join(",");return`${t.op}(${e})`}}function rT(t,e){return t instanceof Tn?(function(r,a){return a instanceof Tn&&r.op===a.op&&r.field.isEqual(a.field)&&qs(r.value,a.value)})(t,e):t instanceof hs?(function(r,a){return a instanceof hs&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,c,h)=>l&&rT(c,a.filters[h])),!0):!1})(t,e):void Ze(19439)}function sT(t){return t instanceof Tn?(function(n){return`${n.field.canonicalString()} ${n.op} ${nc(n.value)}`})(t):t instanceof hs?(function(n){return n.op.toString()+" {"+n.getFilters().map(sT).join(" ,")+"}"})(t):"Filter"}class I9 extends Tn{constructor(e,n,r){super(e,n,r),this.key=Ke.fromName(r.referenceValue)}matches(e){const n=Ke.comparator(e.key,this.key);return this.matchesComparison(n)}}class D9 extends Tn{constructor(e,n){super(e,"in",n),this.keys=iT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class M9 extends Tn{constructor(e,n){super(e,"not-in",n),this.keys=iT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function iT(t,e){return(e.arrayValue?.values||[]).map((n=>Ke.fromName(n.referenceValue)))}class P9 extends Tn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return xv(n)&&Zu(n.arrayValue,this.value)}}class O9 extends Tn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Zu(this.value.arrayValue,n)}}class L9 extends Tn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Zu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Zu(this.value.arrayValue,n)}}class V9 extends Tn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!xv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Zu(this.value.arrayValue,r)))}}class U9{constructor(e,n=null,r=[],a=[],l=null,c=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=h,this.Te=null}}function hw(t,e=null,n=[],r=[],a=null,l=null,c=null){return new U9(t,e,n,r,a,l,c)}function _v(t){const e=at(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>fy(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),Om(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>nc(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>nc(r))).join(",")),e.Te=n}return e.Te}function wv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!R9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!rT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!dw(t.startAt,e.startAt)&&dw(t.endAt,e.endAt)}function my(t){return Ke.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Vo{constructor(e,n=null,r=[],a=[],l=null,c="F",h=null,m=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=h,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function z9(t,e,n,r,a,l,c,h){return new Vo(t,e,n,r,a,l,c,h)}function Um(t){return new Vo(t)}function fw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ev(t){return t.collectionGroup!==null}function Gl(t){const e=at(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),n.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new Nn(Gn.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(h=h.add(g.field))}))})),h})(e).forEach((l=>{n.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new ed(l,r))})),n.has(Gn.keyField().canonicalString())||e.Ie.push(new ed(Gn.keyField(),r))}return e.Ie}function zs(t){const e=at(t);return e.Ee||(e.Ee=B9(e,Gl(t))),e.Ee}function B9(t,e){if(t.limitType==="F")return hw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new ed(a.field,l)}));const n=t.endAt?new rc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new rc(t.startAt.position,t.startAt.inclusive):null;return hw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function py(t,e){const n=t.filters.concat([e]);return new Vo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function sm(t,e,n){return new Vo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zm(t,e){return wv(zs(t),zs(e))&&t.limitType===e.limitType}function aT(t){return`${_v(zs(t))}|lt:${t.limitType}`}function Ll(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((a=>sT(a))).join(", ")}]`),Om(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((a=>nc(a))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((a=>nc(a))).join(",")),`Target(${r})`})(zs(t))}; limitType=${t.limitType})`}function Bm(t,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):Ke.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(t,e)&&(function(r,a){for(const l of Gl(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(t,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(t,e)&&(function(r,a){return!(r.startAt&&!(function(c,h,m){const g=uw(c,h,m);return c.inclusive?g<=0:g<0})(r.startAt,Gl(r),a)||r.endAt&&!(function(c,h,m){const g=uw(c,h,m);return c.inclusive?g>=0:g>0})(r.endAt,Gl(r),a))})(t,e)}function F9(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function oT(t){return(e,n)=>{let r=!1;for(const a of Gl(t)){const l=H9(a,e,n);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function H9(t,e,n){const r=t.field.isKeyField()?Ke.comparator(e.key,n.key):(function(l,c,h){const m=c.data.field(l),g=h.data.field(l);return m!==null&&g!==null?tc(m,g):Ze(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ze(19790,{direction:t.dir})}}class Uo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[n]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){za(this.inner,((n,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return q4(this.inner)}size(){return this.innerSize}}const $9=new en(Ke.comparator);function Ii(){return $9}const lT=new en(Ke.comparator);function Ou(...t){let e=lT;for(const n of t)e=e.insert(n.key,n);return e}function cT(t){let e=lT;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function xo(){return qu()}function uT(){return qu()}function qu(){return new Uo((t=>t.toString()),((t,e)=>t.isEqual(e)))}const q9=new en(Ke.comparator),G9=new Nn(Ke.comparator);function xt(...t){let e=G9;for(const n of t)e=e.add(n);return e}const Y9=new Nn(bt);function K9(){return Y9}function Sv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:em(e)?"-0":e}}function dT(t){return{integerValue:""+t}}function hT(t,e){return w9(e)?dT(e):Sv(t,e)}class Fm{constructor(){this._=void 0}}function Q9(t,e,n){return t instanceof td?(function(a,l){const c={fields:{[K4]:{stringValue:Y4},[X4]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Lm(l)&&(l=Vm(l)),l&&(c.fields[Q4]=l),{mapValue:c}})(n,e):t instanceof sc?mT(t,e):t instanceof ic?pT(t,e):(function(a,l){const c=fT(a,l),h=mw(c)+mw(a.Ae);return hy(c)&&hy(a.Ae)?dT(h):Sv(a.serializer,h)})(t,e)}function X9(t,e,n){return t instanceof sc?mT(t,e):t instanceof ic?pT(t,e):n}function fT(t,e){return t instanceof nd?(function(r){return hy(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class td extends Fm{}class sc extends Fm{constructor(e){super(),this.elements=e}}function mT(t,e){const n=gT(e);for(const r of t.elements)n.some((a=>qs(a,r)))||n.push(r);return{arrayValue:{values:n}}}class ic extends Fm{constructor(e){super(),this.elements=e}}function pT(t,e){let n=gT(e);for(const r of t.elements)n=n.filter((a=>!qs(a,r)));return{arrayValue:{values:n}}}class nd extends Fm{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function mw(t){return un(t.integerValue||t.doubleValue)}function gT(t){return xv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Hm{constructor(e,n){this.field=e,this.transform=n}}function W9(t,e){return t.field.isEqual(e.field)&&(function(r,a){return r instanceof sc&&a instanceof sc||r instanceof ic&&a instanceof ic?ec(r.elements,a.elements,qs):r instanceof nd&&a instanceof nd?qs(r.Ae,a.Ae):r instanceof td&&a instanceof td})(t.transform,e.transform)}class J9{constructor(e,n){this.version=e,this.transformResults=n}}class or{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new or}static exists(e){return new or(void 0,e)}static updateTime(e){return new or(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class $m{}function yT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new qm(t.key,or.none()):new _d(t.key,t.data,or.none());{const n=t.data,r=xr.empty();let a=new Nn(Gn.comparator);for(let l of e.fields)if(!a.has(l)){let c=n.field(l);c===null&&l.length>1&&(l=l.popLast(),c=n.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new Ba(t.key,r,new Pr(a.toArray()),or.none())}}function Z9(t,e,n){t instanceof _d?(function(a,l,c){const h=a.value.clone(),m=gw(a.fieldTransforms,l,c.transformResults);h.setAll(m),l.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(t,e,n):t instanceof Ba?(function(a,l,c){if(!Nf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const h=gw(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(vT(a)),m.setAll(h),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(t,e,n):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,n)}function Gu(t,e,n,r){return t instanceof _d?(function(l,c,h,m){if(!Nf(l.precondition,c))return h;const g=l.value.clone(),v=yw(l.fieldTransforms,m,c);return g.setAll(v),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(t,e,n,r):t instanceof Ba?(function(l,c,h,m){if(!Nf(l.precondition,c))return h;const g=yw(l.fieldTransforms,m,c),v=c.data;return v.setAll(vT(l)),v.setAll(g),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((b=>b.field)))})(t,e,n,r):(function(l,c,h){return Nf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h})(t,e,n)}function eI(t,e){let n=null;for(const r of t.fieldTransforms){const a=e.data.field(r.field),l=fT(r.transform,a||null);l!=null&&(n===null&&(n=xr.empty()),n.set(r.field,l))}return n||null}function pw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&ec(r,a,((l,c)=>W9(l,c)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class _d extends $m{constructor(e,n,r,a=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ba extends $m{constructor(e,n,r,a,l=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function vT(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function gw(t,e,n){const r=new Map;Rt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let a=0;a<n.length;a++){const l=t[a],c=l.transform,h=e.data.field(l.field);r.set(l.field,X9(c,h,n[a]))}return r}function yw(t,e,n){const r=new Map;for(const a of t){const l=a.transform,c=n.data.field(a.field);r.set(a.field,Q9(l,c,e))}return r}class qm extends $m{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tI extends $m{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class nI{constructor(e,n,r,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&Z9(l,e,r[a])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Gu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Gu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=uT();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let h=this.applyToLocalView(c,l.mutatedFields);h=n.has(a.key)?null:h;const m=yT(c,h);m!==null&&r.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(st.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),xt())}isEqual(e){return this.batchId===e.batchId&&ec(this.mutations,e.mutations,((n,r)=>pw(n,r)))&&ec(this.baseMutations,e.baseMutations,((n,r)=>pw(n,r)))}}class Tv{constructor(e,n,r,a){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=a}static from(e,n,r){Rt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return q9})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new Tv(e,n,r,a)}}class rI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class sI{constructor(e,n){this.count=e,this.unchangedNames=n}}var _n,Et;function iI(t){switch(t){case ce.OK:return Ze(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return Ze(15467,{code:t})}}function bT(t){if(t===void 0)return ji("GRPC error has no .code"),ce.UNKNOWN;switch(t){case _n.OK:return ce.OK;case _n.CANCELLED:return ce.CANCELLED;case _n.UNKNOWN:return ce.UNKNOWN;case _n.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case _n.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case _n.INTERNAL:return ce.INTERNAL;case _n.UNAVAILABLE:return ce.UNAVAILABLE;case _n.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case _n.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case _n.NOT_FOUND:return ce.NOT_FOUND;case _n.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case _n.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case _n.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case _n.ABORTED:return ce.ABORTED;case _n.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case _n.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case _n.DATA_LOSS:return ce.DATA_LOSS;default:return Ze(39323,{code:t})}}(Et=_n||(_n={}))[Et.OK=0]="OK",Et[Et.CANCELLED=1]="CANCELLED",Et[Et.UNKNOWN=2]="UNKNOWN",Et[Et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Et[Et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Et[Et.NOT_FOUND=5]="NOT_FOUND",Et[Et.ALREADY_EXISTS=6]="ALREADY_EXISTS",Et[Et.PERMISSION_DENIED=7]="PERMISSION_DENIED",Et[Et.UNAUTHENTICATED=16]="UNAUTHENTICATED",Et[Et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Et[Et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Et[Et.ABORTED=10]="ABORTED",Et[Et.OUT_OF_RANGE=11]="OUT_OF_RANGE",Et[Et.UNIMPLEMENTED=12]="UNIMPLEMENTED",Et[Et.INTERNAL=13]="INTERNAL",Et[Et.UNAVAILABLE=14]="UNAVAILABLE",Et[Et.DATA_LOSS=15]="DATA_LOSS";function aI(){return new TextEncoder}const oI=new Aa([4294967295,4294967295],0);function vw(t){const e=aI().encode(t),n=new M4;return n.update(e),new Uint8Array(n.digest())}function bw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Aa([n,r],0),new Aa([a,l],0)]}class Cv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Lu(`Invalid padding: ${n}`);if(r<0)throw new Lu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Lu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Lu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Aa.fromNumber(this.ge)}ye(e,n,r){let a=e.add(n.multiply(Aa.fromNumber(r)));return a.compare(oI)===1&&(a=new Aa([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=vw(e),[r,a]=bw(n);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);if(!this.we(c))return!1}return!0}static create(e,n,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Cv(l,a,n);return r.forEach((h=>c.insert(h))),c}insert(e){if(this.ge===0)return;const n=vw(e),[r,a]=bw(n);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);this.Se(c)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Lu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Gm{constructor(e,n,r,a,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const a=new Map;return a.set(e,wd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Gm(st.min(),a,new en(bt),Ii(),xt())}}class wd{constructor(e,n,r,a,l){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new wd(r,n,xt(),xt(),xt())}}class Rf{constructor(e,n,r,a){this.be=e,this.removedTargetIds=n,this.key=r,this.De=a}}class xT{constructor(e,n){this.targetId=e,this.Ce=n}}class _T{constructor(e,n,r=Yn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=a}}class xw{constructor(){this.ve=0,this.Fe=_w(),this.Me=Yn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=xt(),n=xt(),r=xt();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:r=r.add(a);break;default:Ze(38017,{changeType:l})}})),new wd(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=_w()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Rt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class lI{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ii(),this.Je=of(),this.He=of(),this.Ye=new en(bt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ze(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,a)=>{this.rt(a)&&n(a)}))}st(e){const n=e.targetId,r=e.Ce.count,a=this.ot(n);if(a){const l=a.target;if(my(l))if(r===0){const c=new Ke(l.path);this.et(n,c,er.newNoDocument(c,st.min()))}else Rt(r===1,20013,{expectedCount:r});else{const c=this._t(n);if(c!==r){const h=this.ut(e),m=h?this.ct(h,e,c):1;if(m!==0){this.it(n);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,g)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=n;let c,h;try{c=Ma(r).toUint8Array()}catch(m){if(m instanceof G4)return Zl("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{h=new Cv(c,a,l)}catch(m){return Zl(m instanceof Lu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return h.ge===0?null:h}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let a=0;return r.forEach((l=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(n,l,null),a++)})),a}Tt(e){const n=new Map;this.ze.forEach(((l,c)=>{const h=this.ot(c);if(h){if(l.current&&my(h.target)){const m=new Ke(h.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,er.newNoDocument(m,e))}l.Be&&(n.set(c,l.ke()),l.qe())}}));let r=xt();this.He.forEach(((l,c)=>{let h=!0;c.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new Gm(e,n,this.Ye,this.je,r);return this.je=Ii(),this.Je=of(),this.He=of(),this.Ye=new en(bt),a}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,n)?a.Qe(n,1):a.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new xw,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Nn(bt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Nn(bt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Le("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new xw),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function of(){return new en(Ke.comparator)}function _w(){return new en(Ke.comparator)}const cI={asc:"ASCENDING",desc:"DESCENDING"},uI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dI={and:"AND",or:"OR"};class hI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function gy(t,e){return t.useProto3Json||Om(e)?e:{value:e}}function im(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function fI(t,e){return im(t,e.toTimestamp())}function Bs(t){return Rt(!!t,49232),st.fromTimestamp((function(n){const r=Da(n);return new Gt(r.seconds,r.nanos)})(t))}function kv(t,e){return yy(t,e).canonicalString()}function yy(t,e){const n=(function(a){return new Ut(["projects",a.projectId,"databases",a.database])})(t).child("documents");return e===void 0?n:n.child(e)}function ET(t){const e=Ut.fromString(t);return Rt(AT(e),10190,{key:e.toString()}),e}function vy(t,e){return kv(t.databaseId,e.path)}function k0(t,e){const n=ET(e);if(n.get(1)!==t.databaseId.projectId)throw new Re(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Re(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ke(TT(n))}function ST(t,e){return kv(t.databaseId,e)}function mI(t){const e=ET(t);return e.length===4?Ut.emptyPath():TT(e)}function by(t){return new Ut(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function TT(t){return Rt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function ww(t,e,n){return{name:vy(t,e),fields:n.value.mapValue.fields}}function pI(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ze(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,v){return g.useProto3Json?(Rt(v===void 0||typeof v=="string",58123),Yn.fromBase64String(v||"")):(Rt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Yn.fromUint8Array(v||new Uint8Array))})(t,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&(function(g){const v=g.code===void 0?ce.UNKNOWN:bT(g.code);return new Re(v,g.message||"")})(c);n=new _T(r,a,l,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=k0(t,r.document.name),l=Bs(r.document.updateTime),c=r.document.createTime?Bs(r.document.createTime):st.min(),h=new xr({mapValue:{fields:r.document.fields}}),m=er.newFoundDocument(a,l,c,h),g=r.targetIds||[],v=r.removedTargetIds||[];n=new Rf(g,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=k0(t,r.document),l=r.readTime?Bs(r.readTime):st.min(),c=er.newNoDocument(a,l),h=r.removedTargetIds||[];n=new Rf([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=k0(t,r.document),l=r.removedTargetIds||[];n=new Rf([],l,a,null)}else{if(!("filter"in e))return Ze(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new sI(a,l),h=r.targetId;n=new xT(h,c)}}return n}function gI(t,e){let n;if(e instanceof _d)n={update:ww(t,e.key,e.value)};else if(e instanceof qm)n={delete:vy(t,e.key)};else if(e instanceof Ba)n={update:ww(t,e.key,e.data),updateMask:TI(e.fieldMask)};else{if(!(e instanceof tI))return Ze(16599,{Vt:e.type});n={verify:vy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const h=c.transform;if(h instanceof td)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof sc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof ic)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof nd)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw Ze(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:fI(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ze(27497)})(t,e.precondition)),n}function yI(t,e){return t&&t.length>0?(Rt(e!==void 0,14353),t.map((n=>(function(a,l){let c=a.updateTime?Bs(a.updateTime):Bs(l);return c.isEqual(st.min())&&(c=Bs(l)),new J9(c,a.transformResults||[])})(n,e)))):[]}function vI(t,e){return{documents:[ST(t,e.path)]}}function bI(t,e){const n={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ST(t,a);const l=(function(g){if(g.length!==0)return kT(hs.create(g,"and"))})(e.filters);l&&(n.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((v=>(function(_){return{field:Vl(_.field),direction:wI(_.dir)}})(v)))})(e.orderBy);c&&(n.structuredQuery.orderBy=c);const h=gy(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:n,parent:a}}function xI(t){let e=mI(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let a=null;if(r>0){Rt(r===1,65062);const v=n.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];n.where&&(l=(function(b){const _=CT(b);return _ instanceof hs&&nT(_)?_.getFilters():[_]})(n.where));let c=[];n.orderBy&&(c=(function(b){return b.map((_=>(function(N){return new ed(Ul(N.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(_)))})(n.orderBy));let h=null;n.limit&&(h=(function(b){let _;return _=typeof b=="object"?b.value:b,Om(_)?null:_})(n.limit));let m=null;n.startAt&&(m=(function(b){const _=!!b.before,C=b.values||[];return new rc(C,_)})(n.startAt));let g=null;return n.endAt&&(g=(function(b){const _=!b.before,C=b.values||[];return new rc(C,_)})(n.endAt)),z9(e,a,c,l,h,"F",m,g)}function _I(t,e){const n=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ze(28987,{purpose:a})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function CT(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ul(n.unaryFilter.field);return Tn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Ul(n.unaryFilter.field);return Tn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Ul(n.unaryFilter.field);return Tn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Ul(n.unaryFilter.field);return Tn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ze(61313);default:return Ze(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Tn.create(Ul(n.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ze(58110);default:return Ze(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return hs.create(n.compositeFilter.filters.map((r=>CT(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ze(1026)}})(n.compositeFilter.op))})(t):Ze(30097,{filter:t})}function wI(t){return cI[t]}function EI(t){return uI[t]}function SI(t){return dI[t]}function Vl(t){return{fieldPath:t.canonicalString()}}function Ul(t){return Gn.fromServerFormat(t.fieldPath)}function kT(t){return t instanceof Tn?(function(n){if(n.op==="=="){if(cw(n.value))return{unaryFilter:{field:Vl(n.field),op:"IS_NAN"}};if(lw(n.value))return{unaryFilter:{field:Vl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(cw(n.value))return{unaryFilter:{field:Vl(n.field),op:"IS_NOT_NAN"}};if(lw(n.value))return{unaryFilter:{field:Vl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vl(n.field),op:EI(n.op),value:n.value}}})(t):t instanceof hs?(function(n){const r=n.getFilters().map((a=>kT(a)));return r.length===1?r[0]:{compositeFilter:{op:SI(n.op),filters:r}}})(t):Ze(54877,{filter:t})}function TI(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function AT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class Ea{constructor(e,n,r,a,l=st.min(),c=st.min(),h=Yn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new Ea(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class CI{constructor(e){this.yt=e}}function kI(t){const e=xI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?sm(e,e.limit,"L"):e}class AI{constructor(){this.Cn=new NI}addToCollectionParentIndex(e,n){return this.Cn.add(n),Se.resolve()}getCollectionParents(e,n){return Se.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Se.resolve()}deleteFieldIndex(e,n){return Se.resolve()}deleteAllFieldIndexes(e){return Se.resolve()}createTargetIndexes(e,n){return Se.resolve()}getDocumentsMatchingTarget(e,n){return Se.resolve(null)}getIndexType(e,n){return Se.resolve(0)}getFieldIndexes(e,n){return Se.resolve([])}getNextCollectionGroupToUpdate(e){return Se.resolve(null)}getMinOffset(e,n){return Se.resolve(Ia.min())}getMinOffsetFromCollectionGroup(e,n){return Se.resolve(Ia.min())}updateCollectionGroup(e,n,r){return Se.resolve()}updateIndexEntries(e,n){return Se.resolve()}}class NI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),a=this.index[n]||new Nn(Ut.comparator),l=!a.has(r);return this.index[n]=a.add(r),l}has(e){const n=e.lastSegment(),r=e.popLast(),a=this.index[n];return a&&a.has(r)}getEntries(e){return(this.index[e]||new Nn(Ut.comparator)).toArray()}}const Ew={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},NT=41943040;class br{static withCacheSize(e){return new br(e,br.DEFAULT_COLLECTION_PERCENTILE,br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}br.DEFAULT_COLLECTION_PERCENTILE=10,br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,br.DEFAULT=new br(NT,br.DEFAULT_COLLECTION_PERCENTILE,br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),br.DISABLED=new br(-1,0,0);class ac{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ac(0)}static cr(){return new ac(-1)}}const Sw="LruGarbageCollector",RI=1048576;function Tw([t,e],[n,r]){const a=bt(t,n);return a===0?bt(e,r):a}class jI{constructor(e){this.Ir=e,this.buffer=new Nn(Tw),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Tw(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class II{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Le(Sw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){bc(n)?Le(Sw,"Ignoring IndexedDB error during garbage collection: ",n):await vc(n)}await this.Vr(3e5)}))}}class DI{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return Se.resolve(Pm.ce);const r=new jI(n);return this.mr.forEachTarget(e,(a=>r.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>r.Ar(a))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),Se.resolve(Ew)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ew):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,a,l,c,h,m,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),a=this.params.maximumSequenceNumbersToCollect):a=b,c=Date.now(),this.nthSequenceNumber(e,a)))).next((b=>(r=b,h=Date.now(),this.removeTargets(e,r,n)))).next((b=>(l=b,m=Date.now(),this.removeOrphanedDocuments(e,r)))).next((b=>(g=Date.now(),Ol()<=vt.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${a} in `+(h-c)+`ms
	Removed ${l} targets in `+(m-h)+`ms
	Removed ${b} documents in `+(g-m)+`ms
Total Duration: ${g-v}ms`),Se.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:b}))))}}function MI(t,e){return new DI(t,e)}class PI{constructor(){this.changes=new Uo((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,er.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Se.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class OI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class LI{constructor(e,n,r,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,n)))).next((a=>(r!==null&&Gu(r.mutation,a,Pr.empty(),Gt.now()),a)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,xt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=xt()){const a=xo();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,r).next((l=>{let c=Ou();return l.forEach(((h,m)=>{c=c.insert(h,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,n){const r=xo();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,xt())))}populateOverlays(e,n,r){const a=[];return r.forEach((l=>{n.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,h)=>{n.set(c,h)}))}))}computeViews(e,n,r,a){let l=Ii();const c=qu(),h=(function(){return qu()})();return n.forEach(((m,g)=>{const v=r.get(g.key);a.has(g.key)&&(v===void 0||v.mutation instanceof Ba)?l=l.insert(g.key,g):v!==void 0?(c.set(g.key,v.mutation.getFieldMask()),Gu(v.mutation,g,v.mutation.getFieldMask(),Gt.now())):c.set(g.key,Pr.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((g,v)=>c.set(g,v))),n.forEach(((g,v)=>h.set(g,new OI(v,c.get(g)??null)))),h)))}recalculateAndSaveOverlays(e,n){const r=qu();let a=new en(((c,h)=>c-h)),l=xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((c=>{for(const h of c)h.keys().forEach((m=>{const g=n.get(m);if(g===null)return;let v=r.get(m)||Pr.empty();v=h.applyToLocalView(g,v),r.set(m,v);const b=(a.get(h.batchId)||xt()).add(m);a=a.insert(h.batchId,b)}))})).next((()=>{const c=[],h=a.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),g=m.key,v=m.value,b=uT();v.forEach((_=>{if(!l.has(_)){const C=yT(n.get(_),r.get(_));C!==null&&b.set(_,C),l=l.add(_)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,b))}return Se.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,a){return(function(c){return Ke.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ev(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,a):this.getDocumentsMatchingCollectionQuery(e,n,r,a)}getNextDocuments(e,n,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,a-l.size):Se.resolve(xo());let h=Xu,m=l;return c.next((g=>Se.forEach(g,((v,b)=>(h<b.largestBatchId&&(h=b.largestBatchId),l.get(v)?Se.resolve():this.remoteDocumentCache.getEntry(e,v).next((_=>{m=m.insert(v,_)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,m,g,xt()))).next((v=>({batchId:h,changes:cT(v)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ke(n)).next((r=>{let a=Ou();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,a){const l=n.collectionGroup;let c=Ou();return this.indexManager.getCollectionParents(e,l).next((h=>Se.forEach(h,(m=>{const g=(function(b,_){return new Vo(_,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(n,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,r,a).next((v=>{v.forEach(((b,_)=>{c=c.insert(b,_)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,n,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,l,a)))).next((c=>{l.forEach(((m,g)=>{const v=g.getKey();c.get(v)===null&&(c=c.insert(v,er.newInvalidDocument(v)))}));let h=Ou();return c.forEach(((m,g)=>{const v=l.get(m);v!==void 0&&Gu(v.mutation,g,Pr.empty(),Gt.now()),Bm(n,g)&&(h=h.insert(m,g))})),h}))}}class VI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Se.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(a){return{id:a.id,version:a.version,createTime:Bs(a.createTime)}})(n)),Se.resolve()}getNamedQuery(e,n){return Se.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(a){return{name:a.name,query:kI(a.bundledQuery),readTime:Bs(a.readTime)}})(n)),Se.resolve()}}class UI{constructor(){this.overlays=new en(Ke.comparator),this.qr=new Map}getOverlay(e,n){return Se.resolve(this.overlays.get(n))}getOverlays(e,n){const r=xo();return Se.forEach(n,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((a,l)=>{this.St(e,n,l)})),Se.resolve()}removeOverlaysForBatchId(e,n,r){const a=this.qr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(r)),Se.resolve()}getOverlaysForCollection(e,n,r){const a=xo(),l=n.length+1,c=new Ke(n.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const m=h.getNext().value,g=m.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>r&&a.set(m.getKey(),m)}return Se.resolve(a)}getOverlaysForCollectionGroup(e,n,r,a){let l=new en(((g,v)=>g-v));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>r){let v=l.get(g.largestBatchId);v===null&&(v=xo(),l=l.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const h=xo(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,v)=>h.set(g,v))),!(h.size()>=a)););return Se.resolve(h)}St(e,n,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(r.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new rI(n,r));let l=this.qr.get(n);l===void 0&&(l=xt(),this.qr.set(n,l)),this.qr.set(n,l.add(r.key))}}class zI{constructor(){this.sessionToken=Yn.EMPTY_BYTE_STRING}getSessionToken(e){return Se.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Se.resolve()}}class Av{constructor(){this.Qr=new Nn(Mn.$r),this.Ur=new Nn(Mn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Mn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Mn(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new Ke(new Ut([])),r=new Mn(n,e),a=new Mn(n,e+1),l=[];return this.Ur.forEachInRange([r,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ke(new Ut([])),r=new Mn(n,e),a=new Mn(n,e+1);let l=xt();return this.Ur.forEachInRange([r,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const n=new Mn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Mn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ke.comparator(e.key,n.key)||bt(e.Yr,n.Yr)}static Kr(e,n){return bt(e.Yr,n.Yr)||Ke.comparator(e.key,n.key)}}class BI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Nn(Mn.$r)}checkEmpty(e){return Se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new nI(l,n,r,a);this.mutationQueue.push(c);for(const h of a)this.Zr=this.Zr.add(new Mn(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return Se.resolve(c)}lookupMutationBatch(e,n){return Se.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,a=this.ei(r),l=a<0?0:a;return Se.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Se.resolve(this.mutationQueue.length===0?bv:this.tr-1)}getAllMutationBatches(e){return Se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Mn(n,0),a=new Mn(n,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([r,a],(c=>{const h=this.Xr(c.Yr);l.push(h)})),Se.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Nn(bt);return n.forEach((a=>{const l=new Mn(a,0),c=new Mn(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(h=>{r=r.add(h.Yr)}))})),Se.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,a=r.length+1;let l=r;Ke.isDocumentKey(l)||(l=l.child(""));const c=new Mn(new Ke(l),0);let h=new Nn(bt);return this.Zr.forEachWhile((m=>{const g=m.key.path;return!!r.isPrefixOf(g)&&(g.length===a&&(h=h.add(m.Yr)),!0)}),c),Se.resolve(this.ti(h))}ti(e){const n=[];return e.forEach((r=>{const a=this.Xr(r);a!==null&&n.push(a)})),n}removeMutationBatch(e,n){Rt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Se.forEach(n.mutations,(a=>{const l=new Mn(a.key,n.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Mn(n,0),a=this.Zr.firstAfterOrEqual(r);return Se.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Se.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class FI{constructor(e){this.ri=e,this.docs=(function(){return new en(Ke.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,a=this.docs.get(r),l=a?a.size:0,c=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Se.resolve(r?r.document.mutableCopy():er.newInvalidDocument(n))}getEntries(e,n){let r=Ii();return n.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():er.newInvalidDocument(a))})),Se.resolve(r)}getDocumentsMatchingQuery(e,n,r,a){let l=Ii();const c=n.path,h=new Ke(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:g,value:{document:v}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||v9(y9(v),r)<=0||(a.has(v.key)||Bm(n,v))&&(l=l.insert(v.key,v.mutableCopy()))}return Se.resolve(l)}getAllFromCollectionGroup(e,n,r,a){Ze(9500)}ii(e,n){return Se.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new HI(this)}getSize(e){return Se.resolve(this.size)}}class HI extends PI{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?n.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(r)})),Se.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class $I{constructor(e){this.persistence=e,this.si=new Uo((n=>_v(n)),wv),this.lastRemoteSnapshotVersion=st.min(),this.highestTargetId=0,this.oi=0,this._i=new Av,this.targetCount=0,this.ai=ac.ur()}forEachTarget(e,n){return this.si.forEach(((r,a)=>n(a))),Se.resolve()}getLastRemoteSnapshotVersion(e){return Se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),Se.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ac(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Se.resolve()}updateTargetData(e,n){return this.Pr(n),Se.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Se.resolve()}removeTargets(e,n,r){let a=0;const l=[];return this.si.forEach(((c,h)=>{h.sequenceNumber<=n&&r.get(h.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)})),Se.waitFor(l).next((()=>a))}getTargetCount(e){return Se.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return Se.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),Se.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const a=this.persistence.referenceDelegate,l=[];return a&&n.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),Se.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Se.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return Se.resolve(r)}containsKey(e,n){return Se.resolve(this._i.containsKey(n))}}class RT{constructor(e,n){this.ui={},this.overlays={},this.ci=new Pm(0),this.li=!1,this.li=!0,this.hi=new zI,this.referenceDelegate=e(this),this.Pi=new $I(this),this.indexManager=new AI,this.remoteDocumentCache=(function(a){return new FI(a)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new CI(n),this.Ii=new VI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new UI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new BI(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Le("MemoryPersistence","Starting transaction:",e);const a=new qI(this.ci.next());return this.referenceDelegate.Ei(),r(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,n){return Se.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class qI extends x9{constructor(e){super(),this.currentSequenceNumber=e}}class Nv{constructor(e){this.persistence=e,this.Ri=new Av,this.Vi=null}static mi(e){return new Nv(e)}get fi(){if(this.Vi)return this.Vi;throw Ze(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),Se.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),Se.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Se.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((a=>this.fi.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Se.forEach(this.fi,(r=>{const a=Ke.fromPath(r);return this.gi(e,a).next((l=>{l||n.removeEntry(a,st.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return Se.or([()=>Se.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class am{constructor(e,n){this.persistence=e,this.pi=new Uo((r=>E9(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=MI(this,n)}static mi(e,n){return new am(e,n)}Ei(){}di(e){return Se.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((a=>r+a))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return Se.forEach(this.pi,((r,a)=>this.br(e,r,a).next((l=>l?Se.resolve():n(a)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,n).next((h=>{h||(r++,l.removeEntry(c,st.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Se.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Se.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Se.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Se.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=kf(e.data.value)),n}br(e,n,r){return Se.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.pi.get(n);return Se.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Rv{constructor(e,n,r,a){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=a}static As(e,n){let r=xt(),a=xt();for(const l of n.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Rv(e,n.fromCache,r,a)}}class GI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class YI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return vR()?8:_9(tr())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,a){const l={result:null};return this.ys(e,n).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,n,a,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new GI;return this.Ss(e,n,c).next((h=>{if(l.result=h,this.Vs)return this.bs(e,n,c,h.size)}))})).next((()=>l.result))}bs(e,n,r,a){return r.documentReadCount<this.fs?(Ol()<=vt.DEBUG&&Le("QueryEngine","SDK will not create cache indexes for query:",Ll(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Se.resolve()):(Ol()<=vt.DEBUG&&Le("QueryEngine","Query:",Ll(n),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.gs*a?(Ol()<=vt.DEBUG&&Le("QueryEngine","The SDK decides to create cache indexes for query:",Ll(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zs(n))):Se.resolve())}ys(e,n){if(fw(n))return Se.resolve(null);let r=zs(n);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(n.limit!==null&&a===1&&(n=sm(n,null,"F"),r=zs(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=xt(...l);return this.ps.getDocuments(e,c).next((h=>this.indexManager.getMinOffset(e,r).next((m=>{const g=this.Ds(n,h);return this.Cs(n,g,c,m.readTime)?this.ys(e,sm(n,null,"F")):this.vs(e,g,n,m)}))))})))))}ws(e,n,r,a){return fw(n)||a.isEqual(st.min())?Se.resolve(null):this.ps.getDocuments(e,r).next((l=>{const c=this.Ds(n,l);return this.Cs(n,c,r,a)?Se.resolve(null):(Ol()<=vt.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ll(n)),this.vs(e,c,n,g9(a,Xu)).next((h=>h)))}))}Ds(e,n){let r=new Nn(oT(e));return n.forEach(((a,l)=>{Bm(e,l)&&(r=r.add(l))})),r}Cs(e,n,r,a){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,n,r){return Ol()<=vt.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",Ll(n)),this.ps.getDocumentsMatchingQuery(e,n,Ia.min(),r)}vs(e,n,r,a){return this.ps.getDocumentsMatchingQuery(e,r,a).next((l=>(n.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const jv="LocalStore",KI=3e8;class QI{constructor(e,n,r,a){this.persistence=e,this.Fs=n,this.serializer=a,this.Ms=new en(bt),this.xs=new Uo((l=>_v(l)),wv),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function XI(t,e,n,r){return new QI(t,e,n,r)}async function jT(t,e){const n=at(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return n.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],h=[];let m=xt();for(const g of a){c.push(g.batchId);for(const v of g.mutations)m=m.add(v.key)}for(const g of l){h.push(g.batchId);for(const v of g.mutations)m=m.add(v.key)}return n.localDocuments.getDocuments(r,m).next((g=>({Ls:g,removedBatchIds:c,addedBatchIds:h})))}))}))}function WI(t,e){const n=at(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,m,g,v){const b=g.batch,_=b.keys();let C=Se.resolve();return _.forEach((N=>{C=C.next((()=>v.getEntry(m,N))).next((j=>{const k=g.docVersions.get(N);Rt(k!==null,48541),j.version.compareTo(k)<0&&(b.applyToRemoteDocument(j,g),j.isValidDocument()&&(j.setReadTime(g.commitVersion),v.addEntry(j)))}))})),C.next((()=>h.mutationQueue.removeMutationBatch(m,b)))})(n,r,e,l).next((()=>l.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let m=xt();for(let g=0;g<h.mutationResults.length;++g)h.mutationResults[g].transformResults.length>0&&(m=m.add(h.batch.mutations[g].key));return m})(e)))).next((()=>n.localDocuments.getDocuments(r,a)))}))}function IT(t){const e=at(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function JI(t,e){const n=at(t),r=e.snapshotVersion;let a=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=n.Ns.newChangeBuffer({trackRemovals:!0});a=n.Ms;const h=[];e.targetChanges.forEach(((v,b)=>{const _=a.get(b);if(!_)return;h.push(n.Pi.removeMatchingKeys(l,v.removedDocuments,b).next((()=>n.Pi.addMatchingKeys(l,v.addedDocuments,b))));let C=_.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(b)!==null?C=C.withResumeToken(Yn.EMPTY_BYTE_STRING,st.min()).withLastLimboFreeSnapshotVersion(st.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,r)),a=a.insert(b,C),(function(j,k,B){return j.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=KI?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(_,C,v)&&h.push(n.Pi.updateTargetData(l,C))}));let m=Ii(),g=xt();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(l,v))})),h.push(ZI(l,c,e.documentUpdates).next((v=>{m=v.ks,g=v.qs}))),!r.isEqual(st.min())){const v=n.Pi.getLastRemoteSnapshotVersion(l).next((b=>n.Pi.setTargetsMetadata(l,l.currentSequenceNumber,r)));h.push(v)}return Se.waitFor(h).next((()=>c.apply(l))).next((()=>n.localDocuments.getLocalViewOfDocuments(l,m,g))).next((()=>m))})).then((l=>(n.Ms=a,l)))}function ZI(t,e,n){let r=xt(),a=xt();return n.forEach((l=>r=r.add(l))),e.getEntries(t,r).next((l=>{let c=Ii();return n.forEach(((h,m)=>{const g=l.get(h);m.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(h)),m.isNoDocument()&&m.version.isEqual(st.min())?(e.removeEntry(h,m.readTime),c=c.insert(h,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),c=c.insert(h,m)):Le(jv,"Ignoring outdated watch update for ",h,". Current version:",g.version," Watch version:",m.version)})),{ks:c,qs:a}}))}function e8(t,e){const n=at(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=bv),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function t8(t,e){const n=at(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return n.Pi.getTargetData(r,e).next((l=>l?(a=l,Se.resolve(a)):n.Pi.allocateTargetId(r).next((c=>(a=new Ea(e,c,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=n.Ms.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function xy(t,e,n){const r=at(t),a=r.Ms.get(e),l=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!bc(c))throw c;Le(jv,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(a.target)}function Cw(t,e,n){const r=at(t);let a=st.min(),l=xt();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,g,v){const b=at(m),_=b.xs.get(v);return _!==void 0?Se.resolve(b.Ms.get(_)):b.Pi.getTargetData(g,v)})(r,c,zs(e)).next((h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,h.targetId).next((m=>{l=m}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,n?a:st.min(),n?l:xt()))).next((h=>(n8(r,F9(e),h),{documents:h,Qs:l})))))}function n8(t,e,n){let r=t.Os.get(e)||st.min();n.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),t.Os.set(e,r)}class kw{constructor(){this.activeTargetIds=K9()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class r8{constructor(){this.Mo=new kw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new kw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class s8{Oo(e){}shutdown(){}}const Aw="ConnectivityMonitor";class Nw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Le(Aw,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Le(Aw,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let lf=null;function _y(){return lf===null?lf=(function(){return 268435456+Math.round(2147483648*Math.random())})():lf++,"0x"+lf.toString(16)}const A0="RestConnection",i8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class a8{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${a}`,this.Wo=this.databaseId.database===tm?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Go(e,n,r,a,l){const c=_y(),h=this.zo(e,n.toUriEncodedString());Le(A0,`Sending RPC '${e}' ${c}:`,h,r);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,l);const{host:g}=new URL(h),v=Po(g);return this.Jo(e,h,m,r,v).then((b=>(Le(A0,`Received RPC '${e}' ${c}: `,b),b)),(b=>{throw Zl(A0,`RPC '${e}' ${c} failed with error: `,b,"url: ",h,"request:",r),b}))}Ho(e,n,r,a,l,c){return this.Go(e,n,r,a,l)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+yc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}zo(e,n){const r=i8[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class o8{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Wn="WebChannelConnection";class l8 extends a8{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,a,l){const c=_y();return new Promise(((h,m)=>{const g=new P4;g.setWithCredentials(!0),g.listenOnce(O4.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Cf.NO_ERROR:const b=g.getResponseJson();Le(Wn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(b)),h(b);break;case Cf.TIMEOUT:Le(Wn,`RPC '${e}' ${c} timed out`),m(new Re(ce.DEADLINE_EXCEEDED,"Request time out"));break;case Cf.HTTP_ERROR:const _=g.getStatus();if(Le(Wn,`RPC '${e}' ${c} failed with status:`,_,"response text:",g.getResponseText()),_>0){let C=g.getResponseJson();Array.isArray(C)&&(C=C[0]);const N=C?.error;if(N&&N.status&&N.message){const j=(function(B){const $=B.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf($)>=0?$:ce.UNKNOWN})(N.status);m(new Re(j,N.message))}else m(new Re(ce.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new Re(ce.UNAVAILABLE,"Connection failed."));break;default:Ze(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{Le(Wn,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(a);Le(Wn,`RPC '${e}' ${c} sending request:`,a),g.send(n,"POST",v,r,15)}))}T_(e,n,r){const a=_y(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=U4(),h=V4(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,n,r),m.encodeInitMessageHeaders=!0;const v=l.join("");Le(Wn,`Creating RPC '${e}' stream ${a}: ${v}`,m);const b=c.createWebChannel(v,m);this.I_(b);let _=!1,C=!1;const N=new o8({Yo:k=>{C?Le(Wn,`Not sending because RPC '${e}' stream ${a} is closed:`,k):(_||(Le(Wn,`Opening RPC '${e}' stream ${a} transport.`),b.open(),_=!0),Le(Wn,`RPC '${e}' stream ${a} sending:`,k),b.send(k))},Zo:()=>b.close()}),j=(k,B,$)=>{k.listen(B,(R=>{try{$(R)}catch(V){setTimeout((()=>{throw V}),0)}}))};return j(b,Pu.EventType.OPEN,(()=>{C||(Le(Wn,`RPC '${e}' stream ${a} transport opened.`),N.o_())})),j(b,Pu.EventType.CLOSE,(()=>{C||(C=!0,Le(Wn,`RPC '${e}' stream ${a} transport closed`),N.a_(),this.E_(b))})),j(b,Pu.EventType.ERROR,(k=>{C||(C=!0,Zl(Wn,`RPC '${e}' stream ${a} transport errored. Name:`,k.name,"Message:",k.message),N.a_(new Re(ce.UNAVAILABLE,"The operation could not be completed")))})),j(b,Pu.EventType.MESSAGE,(k=>{if(!C){const B=k.data[0];Rt(!!B,16349);const $=B,R=$?.error||$[0]?.error;if(R){Le(Wn,`RPC '${e}' stream ${a} received error:`,R);const V=R.status;let z=(function(E){const A=_n[E];if(A!==void 0)return bT(A)})(V),F=R.message;z===void 0&&(z=ce.INTERNAL,F="Unknown error status: "+V+" with message "+R.message),C=!0,N.a_(new Re(z,F)),b.close()}else Le(Wn,`RPC '${e}' stream ${a} received:`,B),N.u_(B)}})),j(h,L4.STAT_EVENT,(k=>{k.stat===cy.PROXY?Le(Wn,`RPC '${e}' stream ${a} detected buffering proxy`):k.stat===cy.NOPROXY&&Le(Wn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{N.__()}),0),N}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function N0(){return typeof document<"u"?document:null}function Ym(t){return new hI(t,!0)}class DT{constructor(e,n,r=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,n-r);a>0&&Le("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Rw="PersistentStream";class MT{constructor(e,n,r,a,l,c,h,m){this.Mi=e,this.S_=r,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new DT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ce.RESOURCE_EXHAUSTED?(ji(n.toString()),ji("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===n&&this.G_(r,a)}),(r=>{e((()=>{const a=new Re(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Le(Rw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Le(Rw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class c8 extends MT{constructor(e,n,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,a,c),this.serializer=l}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=pI(this.serializer,e),r=(function(l){if(!("targetChange"in l))return st.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?st.min():c.readTime?Bs(c.readTime):st.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=by(this.serializer),n.addTarget=(function(l,c){let h;const m=c.target;if(h=my(m)?{documents:vI(l,m)}:{query:bI(l,m).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=wT(l,c.resumeToken);const g=gy(l,c.expectedCount);g!==null&&(h.expectedCount=g)}else if(c.snapshotVersion.compareTo(st.min())>0){h.readTime=im(l,c.snapshotVersion.toTimestamp());const g=gy(l,c.expectedCount);g!==null&&(h.expectedCount=g)}return h})(this.serializer,e);const r=_I(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=by(this.serializer),n.removeTarget=e,this.q_(n)}}class u8 extends MT{constructor(e,n,r,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Rt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Rt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Rt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=yI(e.writeResults,e.commitTime),r=Bs(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=by(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>gI(this.serializer,r)))};this.q_(n)}}class d8{}class h8 extends d8{constructor(e,n,r,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Re(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,yy(n,r),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Re(ce.UNKNOWN,l.toString())}))}Ho(e,n,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Ho(e,yy(n,r),a,c,h,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Re(ce.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class f8{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ji(n),this.aa=!1):Le("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ro="RemoteStore";class m8{constructor(e,n,r,a,l){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{zo(this)&&(Le(Ro,"Restarting streams for network reachability change."),await(async function(m){const g=at(m);g.Ea.add(4),await Ed(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Km(g)})(this))}))})),this.Ra=new f8(r,a)}}async function Km(t){if(zo(t))for(const e of t.da)await e(!0)}async function Ed(t){for(const e of t.da)await e(!1)}function PT(t,e){const n=at(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Pv(n)?Mv(n):xc(n).O_()&&Dv(n,e))}function Iv(t,e){const n=at(t),r=xc(n);n.Ia.delete(e),r.O_()&&OT(n,e),n.Ia.size===0&&(r.O_()?r.L_():zo(n)&&n.Ra.set("Unknown"))}function Dv(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(st.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}xc(t).Y_(e)}function OT(t,e){t.Va.Ue(e),xc(t).Z_(e)}function Mv(t){t.Va=new lI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),xc(t).start(),t.Ra.ua()}function Pv(t){return zo(t)&&!xc(t).x_()&&t.Ia.size>0}function zo(t){return at(t).Ea.size===0}function LT(t){t.Va=void 0}async function p8(t){t.Ra.set("Online")}async function g8(t){t.Ia.forEach(((e,n)=>{Dv(t,e)}))}async function y8(t,e){LT(t),Pv(t)?(t.Ra.ha(e),Mv(t)):t.Ra.set("Unknown")}async function v8(t,e,n){if(t.Ra.set("Online"),e instanceof _T&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const h of l.targetIds)a.Ia.has(h)&&(await a.remoteSyncer.rejectListen(h,c),a.Ia.delete(h),a.Va.removeTarget(h))})(t,e)}catch(r){Le(Ro,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await om(t,r)}else if(e instanceof Rf?t.Va.Ze(e):e instanceof xT?t.Va.st(e):t.Va.tt(e),!n.isEqual(st.min()))try{const r=await IT(t.localStore);n.compareTo(r)>=0&&await(function(l,c){const h=l.Va.Tt(c);return h.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const v=l.Ia.get(g);v&&l.Ia.set(g,v.withResumeToken(m.resumeToken,c))}})),h.targetMismatches.forEach(((m,g)=>{const v=l.Ia.get(m);if(!v)return;l.Ia.set(m,v.withResumeToken(Yn.EMPTY_BYTE_STRING,v.snapshotVersion)),OT(l,m);const b=new Ea(v.target,m,g,v.sequenceNumber);Dv(l,b)})),l.remoteSyncer.applyRemoteEvent(h)})(t,n)}catch(r){Le(Ro,"Failed to raise snapshot:",r),await om(t,r)}}async function om(t,e,n){if(!bc(e))throw e;t.Ea.add(1),await Ed(t),t.Ra.set("Offline"),n||(n=()=>IT(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Le(Ro,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Km(t)}))}function VT(t,e){return e().catch((n=>om(t,n,e)))}async function Qm(t){const e=at(t),n=Oa(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:bv;for(;b8(e);)try{const a=await e8(e.localStore,r);if(a===null){e.Ta.length===0&&n.L_();break}r=a.batchId,x8(e,a)}catch(a){await om(e,a)}UT(e)&&zT(e)}function b8(t){return zo(t)&&t.Ta.length<10}function x8(t,e){t.Ta.push(e);const n=Oa(t);n.O_()&&n.X_&&n.ea(e.mutations)}function UT(t){return zo(t)&&!Oa(t).x_()&&t.Ta.length>0}function zT(t){Oa(t).start()}async function _8(t){Oa(t).ra()}async function w8(t){const e=Oa(t);for(const n of t.Ta)e.ea(n.mutations)}async function E8(t,e,n){const r=t.Ta.shift(),a=Tv.from(r,e,n);await VT(t,(()=>t.remoteSyncer.applySuccessfulWrite(a))),await Qm(t)}async function S8(t,e){e&&Oa(t).X_&&await(async function(r,a){if((function(c){return iI(c)&&c!==ce.ABORTED})(a.code)){const l=r.Ta.shift();Oa(r).B_(),await VT(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Qm(r)}})(t,e),UT(t)&&zT(t)}async function jw(t,e){const n=at(t);n.asyncQueue.verifyOperationInProgress(),Le(Ro,"RemoteStore received new credentials");const r=zo(n);n.Ea.add(3),await Ed(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Km(n)}async function T8(t,e){const n=at(t);e?(n.Ea.delete(2),await Km(n)):e||(n.Ea.add(2),await Ed(n),n.Ra.set("Unknown"))}function xc(t){return t.ma||(t.ma=(function(n,r,a){const l=at(n);return l.sa(),new c8(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(t.datastore,t.asyncQueue,{Xo:p8.bind(null,t),t_:g8.bind(null,t),r_:y8.bind(null,t),H_:v8.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),Pv(t)?Mv(t):t.Ra.set("Unknown")):(await t.ma.stop(),LT(t))}))),t.ma}function Oa(t){return t.fa||(t.fa=(function(n,r,a){const l=at(n);return l.sa(),new u8(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:_8.bind(null,t),r_:S8.bind(null,t),ta:w8.bind(null,t),na:E8.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Qm(t)):(await t.fa.stop(),t.Ta.length>0&&(Le(Ro,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class Ov{constructor(e,n,r,a,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Ci,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,a,l){const c=Date.now()+r,h=new Ov(e,n,c,a,l);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Re(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lv(t,e){if(ji("AsyncQueue",`${e}: ${t}`),bc(t))return new Re(ce.UNAVAILABLE,`${e}: ${t}`);throw t}class Yl{static emptySet(e){return new Yl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ke.comparator(n.key,r.key):(n,r)=>Ke.comparator(n.key,r.key),this.keyedMap=Ou(),this.sortedSet=new en(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Yl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Yl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class Iw{constructor(){this.ga=new en(Ke.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ze(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class oc{constructor(e,n,r,a,l,c,h,m,g){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,n,r,a,l){const c=[];return n.forEach((h=>{c.push({type:0,doc:h})})),new oc(e,n,Yl.emptySet(n),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==r[a].type||!n[a].doc.isEqual(r[a].doc))return!1;return!0}}class C8{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class k8{constructor(){this.queries=Dw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const a=at(n),l=a.queries;a.queries=Dw(),l.forEach(((c,h)=>{for(const m of h.Sa)m.onError(r)}))})(this,new Re(ce.ABORTED,"Firestore shutting down"))}}function Dw(){return new Uo((t=>aT(t)),zm)}async function Vv(t,e){const n=at(t);let r=3;const a=e.query;let l=n.queries.get(a);l?!l.ba()&&e.Da()&&(r=2):(l=new C8,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await n.onListen(a,!0);break;case 1:l.wa=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(c){const h=Lv(c,`Initialization of query '${Ll(e.query)}' failed`);return void e.onError(h)}n.queries.set(a,l),l.Sa.push(e),e.va(n.onlineState),l.wa&&e.Fa(l.wa)&&zv(n)}async function Uv(t,e){const n=at(t),r=e.query;let a=3;const l=n.queries.get(r);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function A8(t,e){const n=at(t);let r=!1;for(const a of e){const l=a.query,c=n.queries.get(l);if(c){for(const h of c.Sa)h.Fa(a)&&(r=!0);c.wa=a}}r&&zv(n)}function N8(t,e,n){const r=at(t),a=r.queries.get(e);if(a)for(const l of a.Sa)l.onError(n);r.queries.delete(e)}function zv(t){t.Ca.forEach((e=>{e.next()}))}var wy,Mw;(Mw=wy||(wy={})).Ma="default",Mw.Cache="cache";class Bv{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new oc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=oc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==wy.Cache}}class BT{constructor(e){this.key=e}}class FT{constructor(e){this.key=e}}class R8{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=xt(),this.mutatedKeys=xt(),this.eu=oT(e),this.tu=new Yl(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Iw,a=n?n.tu:this.tu;let l=n?n.mutatedKeys:this.mutatedKeys,c=a,h=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,b)=>{const _=a.get(v),C=Bm(this.query,b)?b:null,N=!!_&&this.mutatedKeys.has(_.key),j=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let k=!1;_&&C?_.data.isEqual(C.data)?N!==j&&(r.track({type:3,doc:C}),k=!0):this.su(_,C)||(r.track({type:2,doc:C}),k=!0,(m&&this.eu(C,m)>0||g&&this.eu(C,g)<0)&&(h=!0)):!_&&C?(r.track({type:0,doc:C}),k=!0):_&&!C&&(r.track({type:1,doc:_}),k=!0,(m||g)&&(h=!0)),k&&(C?(c=c.add(C),l=j?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),r.track({type:1,doc:v})}return{tu:c,iu:r,Cs:h,mutatedKeys:l}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,b)=>(function(C,N){const j=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ze(20277,{Rt:k})}};return j(C)-j(N)})(v.type,b.type)||this.eu(v.doc,b.doc))),this.ou(r),a=a??!1;const h=n&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,g=m!==this.Za;return this.Za=m,c.length!==0||g?{snapshot:new oc(this.query,e.tu,l,c,e.mutatedKeys,m===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Iw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=xt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new FT(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new BT(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=xt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return oc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Fv="SyncEngine";class j8{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class I8{constructor(e){this.key=e,this.hu=!1}}class D8{constructor(e,n,r,a,l,c){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Uo((h=>aT(h)),zm),this.Iu=new Map,this.Eu=new Set,this.du=new en(Ke.comparator),this.Au=new Map,this.Ru=new Av,this.Vu={},this.mu=new Map,this.fu=ac.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function M8(t,e,n=!0){const r=KT(t);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await HT(r,e,n,!0),a}async function P8(t,e){const n=KT(t);await HT(n,e,!0,!1)}async function HT(t,e,n,r){const a=await t8(t.localStore,zs(e)),l=a.targetId,c=t.sharedClientState.addLocalQueryTarget(l,n);let h;return r&&(h=await O8(t,e,l,c==="current",a.resumeToken)),t.isPrimaryClient&&n&&PT(t.remoteStore,a),h}async function O8(t,e,n,r,a){t.pu=(b,_,C)=>(async function(j,k,B,$){let R=k.view.ru(B);R.Cs&&(R=await Cw(j.localStore,k.query,!1).then((({documents:S})=>k.view.ru(S,R))));const V=$&&$.targetChanges.get(k.targetId),z=$&&$.targetMismatches.get(k.targetId)!=null,F=k.view.applyChanges(R,j.isPrimaryClient,V,z);return Ow(j,k.targetId,F.au),F.snapshot})(t,b,_,C);const l=await Cw(t.localStore,e,!0),c=new R8(e,l.Qs),h=c.ru(l.documents),m=wd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",a),g=c.applyChanges(h,t.isPrimaryClient,m);Ow(t,n,g.au);const v=new j8(e,n,c);return t.Tu.set(e,v),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),g.snapshot}async function L8(t,e,n){const r=at(t),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter((c=>!zm(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await xy(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),n&&Iv(r.remoteStore,a.targetId),Ey(r,a.targetId)})).catch(vc)):(Ey(r,a.targetId),await xy(r.localStore,a.targetId,!0))}async function V8(t,e){const n=at(t),r=n.Tu.get(e),a=n.Iu.get(r.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Iv(n.remoteStore,r.targetId))}async function U8(t,e,n){const r=G8(t);try{const a=await(function(c,h){const m=at(c),g=Gt.now(),v=h.reduce(((C,N)=>C.add(N.key)),xt());let b,_;return m.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let N=Ii(),j=xt();return m.Ns.getEntries(C,v).next((k=>{N=k,N.forEach(((B,$)=>{$.isValidDocument()||(j=j.add(B))}))})).next((()=>m.localDocuments.getOverlayedDocuments(C,N))).next((k=>{b=k;const B=[];for(const $ of h){const R=eI($,b.get($.key).overlayedDocument);R!=null&&B.push(new Ba($.key,R,Z4(R.value.mapValue),or.exists(!0)))}return m.mutationQueue.addMutationBatch(C,g,B,h)})).next((k=>{_=k;const B=k.applyToLocalDocumentSet(b,j);return m.documentOverlayCache.saveOverlays(C,k.batchId,B)}))})).then((()=>({batchId:_.batchId,changes:cT(b)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(c,h,m){let g=c.Vu[c.currentUser.toKey()];g||(g=new en(bt)),g=g.insert(h,m),c.Vu[c.currentUser.toKey()]=g})(r,a.batchId,n),await Sd(r,a.changes),await Qm(r.remoteStore)}catch(a){const l=Lv(a,"Failed to persist write");n.reject(l)}}async function $T(t,e){const n=at(t);try{const r=await JI(n.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=n.Au.get(l);c&&(Rt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?Rt(c.hu,14607):a.removedDocuments.size>0&&(Rt(c.hu,42227),c.hu=!1))})),await Sd(n,r,e)}catch(r){await vc(r)}}function Pw(t,e,n){const r=at(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const a=[];r.Tu.forEach(((l,c)=>{const h=c.view.va(e);h.snapshot&&a.push(h.snapshot)})),(function(c,h){const m=at(c);m.onlineState=h;let g=!1;m.queries.forEach(((v,b)=>{for(const _ of b.Sa)_.va(h)&&(g=!0)})),g&&zv(m)})(r.eventManager,e),a.length&&r.Pu.H_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function z8(t,e,n){const r=at(t);r.sharedClientState.updateQueryState(e,"rejected",n);const a=r.Au.get(e),l=a&&a.key;if(l){let c=new en(Ke.comparator);c=c.insert(l,er.newNoDocument(l,st.min()));const h=xt().add(l),m=new Gm(st.min(),new Map,new en(bt),c,h);await $T(r,m),r.du=r.du.remove(l),r.Au.delete(e),Hv(r)}else await xy(r.localStore,e,!1).then((()=>Ey(r,e,n))).catch(vc)}async function B8(t,e){const n=at(t),r=e.batch.batchId;try{const a=await WI(n.localStore,e);GT(n,r,null),qT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Sd(n,a)}catch(a){await vc(a)}}async function F8(t,e,n){const r=at(t);try{const a=await(function(c,h){const m=at(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return m.mutationQueue.lookupMutationBatch(g,h).next((b=>(Rt(b!==null,37113),v=b.keys(),m.mutationQueue.removeMutationBatch(g,b)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,v,h))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>m.localDocuments.getDocuments(g,v)))}))})(r.localStore,e);GT(r,e,n),qT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Sd(r,a)}catch(a){await vc(a)}}function qT(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function GT(t,e,n){const r=at(t);let a=r.Vu[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(n?l.reject(n):l.resolve(),a=a.remove(e)),r.Vu[r.currentUser.toKey()]=a}}function Ey(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||YT(t,r)}))}function YT(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Iv(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Hv(t))}function Ow(t,e,n){for(const r of n)r instanceof BT?(t.Ru.addReference(r.key,e),H8(t,r)):r instanceof FT?(Le(Fv,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||YT(t,r.key)):Ze(19791,{wu:r})}function H8(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Le(Fv,"New document in limbo: "+n),t.Eu.add(r),Hv(t))}function Hv(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Ke(Ut.fromString(e)),r=t.fu.next();t.Au.set(r,new I8(n)),t.du=t.du.insert(n,r),PT(t.remoteStore,new Ea(zs(Um(n.path)),r,"TargetPurposeLimboResolution",Pm.ce))}}async function Sd(t,e,n){const r=at(t),a=[],l=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((h,m)=>{c.push(r.pu(m,e,n).then((g=>{if((g||n)&&r.isPrimaryClient){const v=g?!g.fromCache:n?.targetChanges.get(m.targetId)?.current;r.sharedClientState.updateQueryState(m.targetId,v?"current":"not-current")}if(g){a.push(g);const v=Rv.As(m.targetId,g);l.push(v)}})))})),await Promise.all(c),r.Pu.H_(a),await(async function(m,g){const v=at(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>Se.forEach(g,(_=>Se.forEach(_.Es,(C=>v.persistence.referenceDelegate.addReference(b,_.targetId,C))).next((()=>Se.forEach(_.ds,(C=>v.persistence.referenceDelegate.removeReference(b,_.targetId,C)))))))))}catch(b){if(!bc(b))throw b;Le(jv,"Failed to update sequence numbers: "+b)}for(const b of g){const _=b.targetId;if(!b.fromCache){const C=v.Ms.get(_),N=C.snapshotVersion,j=C.withLastLimboFreeSnapshotVersion(N);v.Ms=v.Ms.insert(_,j)}}})(r.localStore,l))}async function $8(t,e){const n=at(t);if(!n.currentUser.isEqual(e)){Le(Fv,"User change. New user:",e.toKey());const r=await jT(n.localStore,e);n.currentUser=e,(function(l,c){l.mu.forEach((h=>{h.forEach((m=>{m.reject(new Re(ce.CANCELLED,c))}))})),l.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Sd(n,r.Ls)}}function q8(t,e){const n=at(t),r=n.Au.get(e);if(r&&r.hu)return xt().add(r.key);{let a=xt();const l=n.Iu.get(e);if(!l)return a;for(const c of l){const h=n.Tu.get(c);a=a.unionWith(h.view.nu)}return a}}function KT(t){const e=at(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=$T.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=q8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=z8.bind(null,e),e.Pu.H_=A8.bind(null,e.eventManager),e.Pu.yu=N8.bind(null,e.eventManager),e}function G8(t){const e=at(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=B8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=F8.bind(null,e),e}class lm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ym(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return XI(this.persistence,new YI,e.initialUser,this.serializer)}Cu(e){return new RT(Nv.mi,this.serializer)}Du(e){return new r8}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}lm.provider={build:()=>new lm};class Y8 extends lm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Rt(this.persistence.referenceDelegate instanceof am,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new II(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?br.withCacheSize(this.cacheSizeBytes):br.DEFAULT;return new RT((r=>am.mi(r,n)),this.serializer)}}class Sy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Pw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$8.bind(null,this.syncEngine),await T8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new k8})()}createDatastore(e){const n=Ym(e.databaseInfo.databaseId),r=(function(l){return new l8(l)})(e.databaseInfo);return(function(l,c,h,m){return new h8(l,c,h,m)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,a,l,c,h){return new m8(r,a,l,c,h)})(this.localStore,this.datastore,e.asyncQueue,(n=>Pw(this.syncEngine,n,0)),(function(){return Nw.v()?new Nw:new s8})())}createSyncEngine(e,n){return(function(a,l,c,h,m,g,v){const b=new D8(a,l,c,h,m,g);return v&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=at(n);Le(Ro,"RemoteStore shutting down."),r.Ea.add(5),await Ed(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Sy.provider={build:()=>new Sy};class $v{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ji("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const La="FirestoreClient";class K8{constructor(e,n,r,a,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=a,this.user=Jn.UNAUTHENTICATED,this.clientId=vv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{Le(La,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(Le(La,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ci;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Lv(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function R0(t,e){t.asyncQueue.verifyOperationInProgress(),Le(La,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async a=>{r.isEqual(a)||(await jT(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Lw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Q8(t);Le(La,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>jw(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,a)=>jw(e.remoteStore,a))),t._onlineComponents=e}async function Q8(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Le(La,"Using user provided OfflineComponentProvider");try{await R0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ce.FAILED_PRECONDITION||a.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(n))throw n;Zl("Error using user provided cache. Falling back to memory cache: "+n),await R0(t,new lm)}}else Le(La,"Using default OfflineComponentProvider"),await R0(t,new Y8(void 0));return t._offlineComponents}async function QT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Le(La,"Using user provided OnlineComponentProvider"),await Lw(t,t._uninitializedComponentsProvider._online)):(Le(La,"Using default OnlineComponentProvider"),await Lw(t,new Sy))),t._onlineComponents}function X8(t){return QT(t).then((e=>e.syncEngine))}async function cm(t){const e=await QT(t),n=e.eventManager;return n.onListen=M8.bind(null,e.syncEngine),n.onUnlisten=L8.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=P8.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=V8.bind(null,e.syncEngine),n}function W8(t,e,n={}){const r=new Ci;return t.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,m,g){const v=new $v({next:_=>{v.Nu(),c.enqueueAndForget((()=>Uv(l,b)));const C=_.docs.has(h);!C&&_.fromCache?g.reject(new Re(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&_.fromCache&&m&&m.source==="server"?g.reject(new Re(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(_)},error:_=>g.reject(_)}),b=new Bv(Um(h.path),v,{includeMetadataChanges:!0,qa:!0});return Vv(l,b)})(await cm(t),t.asyncQueue,e,n,r))),r.promise}function J8(t,e,n={}){const r=new Ci;return t.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,m,g){const v=new $v({next:_=>{v.Nu(),c.enqueueAndForget((()=>Uv(l,b))),_.fromCache&&m.source==="server"?g.reject(new Re(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(_)},error:_=>g.reject(_)}),b=new Bv(h,v,{includeMetadataChanges:!0,qa:!0});return Vv(l,b)})(await cm(t),t.asyncQueue,e,n,r))),r.promise}function XT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const Vw=new Map;const WT="firestore.googleapis.com",Uw=!0;class zw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Re(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=WT,this.ssl=Uw}else this.host=e.host,this.ssl=e.ssl??Uw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=NT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<RI)throw new Re(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}m9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Re(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Re(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Re(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xm{constructor(e,n,r,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Re(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Re(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new s9;switch(r.type){case"firstParty":return new l9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Re(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Vw.get(n);r&&(Le("ComponentProvider","Removing Datastore"),Vw.delete(n),r.terminate())})(this),Promise.resolve()}}function Z8(t,e,n,r={}){t=ar(t,Xm);const a=Po(e),l=t._getSettings(),c={...l,emulatorOptions:t._getEmulatorOptions()},h=`${e}:${n}`;a&&(sv(`https://${h}`),iv("Firestore",!0)),l.host!==WT&&l.host!==h&&Zl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:h,ssl:a,emulatorOptions:r};if(!Ai(m,c)&&(t._setSettings(m),r.mockUserToken)){let g,v;if(typeof r.mockUserToken=="string")g=r.mockUserToken,v=Jn.MOCK_USER;else{g=qS(r.mockUserToken,t._app?.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new Re(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Jn(b)}t._authCredentials=new i9(new B4(g,v))}}class Xs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xs(this.firestore,e,this._query)}}class rn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Na(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rn(this.firestore,e,this._key)}toJSON(){return{type:rn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(xd(n,rn._jsonSchema))return new rn(e,r||null,new Ke(Ut.fromString(n.referencePath)))}}rn._jsonSchemaVersion="firestore/documentReference/1.0",rn._jsonSchema={type:Cn("string",rn._jsonSchemaVersion),referencePath:Cn("string")};class Na extends Xs{constructor(e,n,r){super(e,n,Um(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rn(this.firestore,null,new Ke(e))}withConverter(e){return new Na(this.firestore,e,this._path)}}function dt(t,e,...n){if(t=Bt(t),F4("collection","path",e),t instanceof Xm){const r=Ut.fromString(e,...n);return ew(r),new Na(t,null,r)}{if(!(t instanceof rn||t instanceof Na))throw new Re(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ut.fromString(e,...n));return ew(r),new Na(t.firestore,null,r)}}function Oe(t,e,...n){if(t=Bt(t),arguments.length===1&&(e=vv.newId()),F4("doc","path",e),t instanceof Xm){const r=Ut.fromString(e,...n);return Z_(r),new rn(t,null,new Ke(r))}{if(!(t instanceof rn||t instanceof Na))throw new Re(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ut.fromString(e,...n));return Z_(r),new rn(t.firestore,t instanceof Na?t.converter:null,new Ke(r))}}const Bw="AsyncQueue";class Fw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new DT(this,"async_queue_retry"),this._c=()=>{const r=N0();r&&Le(Bw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=N0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=N0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ci;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!bc(e))throw e;Le(Bw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,ji("INTERNAL UNHANDLED ERROR: ",Hw(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const a=Ov.createAndSchedule(this,e,n,r,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&Ze(47125,{Pc:Hw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Hw(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function $w(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const a=n;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1})(t,["next","error","complete"])}class Gs extends Xm{constructor(e,n,r,a){super(e,n,r,a),this.type="firestore",this._queue=new Fw,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Fw(e),this._firestoreClient=void 0,await e}}}function eD(t,e){const n=typeof t=="object"?t:lv(),r=typeof t=="string"?t:tm,a=Rm(n,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=FS("firestore");l&&Z8(a,...l)}return a}function Td(t){if(t._terminated)throw new Re(ce.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||tD(t),t._firestoreClient}function tD(t){const e=t._freezeSettings(),n=(function(a,l,c,h){return new C9(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,XT(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new K8(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(t._componentsProvider))}class Kr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kr(Yn.fromBase64String(e))}catch(n){throw new Re(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Kr(Yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(xd(e,Kr._jsonSchema))return Kr.fromBase64String(e.bytes)}}Kr._jsonSchemaVersion="firestore/bytes/1.0",Kr._jsonSchema={type:Cn("string",Kr._jsonSchemaVersion),bytes:Cn("string")};class Cd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Re(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Bo{constructor(e){this._methodName=e}}class Fs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Re(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Re(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return bt(this._lat,e._lat)||bt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Fs._jsonSchemaVersion}}static fromJSON(e){if(xd(e,Fs._jsonSchema))return new Fs(e.latitude,e.longitude)}}Fs._jsonSchemaVersion="firestore/geoPoint/1.0",Fs._jsonSchema={type:Cn("string",Fs._jsonSchemaVersion),latitude:Cn("number"),longitude:Cn("number")};class Hs{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Hs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(xd(e,Hs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Hs(e.vectorValues);throw new Re(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Hs._jsonSchemaVersion="firestore/vectorValue/1.0",Hs._jsonSchema={type:Cn("string",Hs._jsonSchemaVersion),vectorValues:Cn("object")};const nD=/^__.*__$/;class rD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ba(e,this.data,this.fieldMask,n,this.fieldTransforms):new _d(e,this.data,n,this.fieldTransforms)}}class JT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ba(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ZT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ze(40011,{Ac:t})}}class Wm{constructor(e,n,r,a,l,c){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Wm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return um(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(ZT(this.Ac)&&nD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class sD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ym(e)}Cc(e,n,r,a=!1){return new Wm({Ac:e,methodName:n,Dc:r,path:Gn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _c(t){const e=t._freezeSettings(),n=Ym(t._databaseId);return new sD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function qv(t,e,n,r,a,l={}){const c=t.Cc(l.merge||l.mergeFields?2:0,e,n,a);Xv("Data must be an object, but it was:",c,r);const h=sC(r,c);let m,g;if(l.merge)m=new Pr(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const b of l.mergeFields){const _=Ty(e,b,n);if(!c.contains(_))throw new Re(ce.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);aC(v,_)||v.push(_)}m=new Pr(v),g=c.fieldTransforms.filter((b=>m.covers(b.field)))}else m=null,g=c.fieldTransforms;return new rD(new xr(h),m,g)}class kd extends Bo{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kd}}function eC(t,e,n){return new Wm({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Gv extends Bo{_toFieldTransform(e){return new Hm(e.path,new td)}isEqual(e){return e instanceof Gv}}class Yv extends Bo{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=eC(this,e,!0),r=this.vc.map((l=>Fo(l,n))),a=new sc(r);return new Hm(e.path,a)}isEqual(e){return e instanceof Yv&&Ai(this.vc,e.vc)}}class Kv extends Bo{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=eC(this,e,!0),r=this.vc.map((l=>Fo(l,n))),a=new ic(r);return new Hm(e.path,a)}isEqual(e){return e instanceof Kv&&Ai(this.vc,e.vc)}}class Qv extends Bo{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new nd(e.serializer,hT(e.serializer,this.Fc));return new Hm(e.path,n)}isEqual(e){return e instanceof Qv&&this.Fc===e.Fc}}function tC(t,e,n,r){const a=t.Cc(1,e,n);Xv("Data must be an object, but it was:",a,r);const l=[],c=xr.empty();za(r,((m,g)=>{const v=Wv(e,m,n);g=Bt(g);const b=a.yc(v);if(g instanceof kd)l.push(v);else{const _=Fo(g,b);_!=null&&(l.push(v),c.set(v,_))}}));const h=new Pr(l);return new JT(c,h,a.fieldTransforms)}function nC(t,e,n,r,a,l){const c=t.Cc(1,e,n),h=[Ty(e,r,n)],m=[a];if(l.length%2!=0)throw new Re(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<l.length;_+=2)h.push(Ty(e,l[_])),m.push(l[_+1]);const g=[],v=xr.empty();for(let _=h.length-1;_>=0;--_)if(!aC(g,h[_])){const C=h[_];let N=m[_];N=Bt(N);const j=c.yc(C);if(N instanceof kd)g.push(C);else{const k=Fo(N,j);k!=null&&(g.push(C),v.set(C,k))}}const b=new Pr(g);return new JT(v,b,c.fieldTransforms)}function rC(t,e,n,r=!1){return Fo(n,t.Cc(r?4:3,e))}function Fo(t,e){if(iC(t=Bt(t)))return Xv("Unsupported field value:",e,t),sC(t,e);if(t instanceof Bo)return(function(r,a){if(!ZT(a.Ac))throw a.Sc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,a){const l=[];let c=0;for(const h of r){let m=Fo(h,a.wc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(t,e)}return(function(r,a){if((r=Bt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return hT(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=Gt.fromDate(r);return{timestampValue:im(a.serializer,l)}}if(r instanceof Gt){const l=new Gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:im(a.serializer,l)}}if(r instanceof Fs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Kr)return{bytesValue:wT(a.serializer,r._byteString)};if(r instanceof rn){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:kv(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Hs)return(function(c,h){return{mapValue:{fields:{[W4]:{stringValue:J4},[nm]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw h.Sc("VectorValues must only contain numeric values.");return Sv(h.serializer,g)}))}}}}}})(r,a);throw a.Sc(`Unsupported field value: ${Mm(r)}`)})(t,e)}function sC(t,e){const n={};return q4(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):za(t,((r,a)=>{const l=Fo(a,e.mc(r));l!=null&&(n[r]=l)})),{mapValue:{fields:n}}}function iC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Gt||t instanceof Fs||t instanceof Kr||t instanceof rn||t instanceof Bo||t instanceof Hs)}function Xv(t,e,n){if(!iC(n)||!H4(n)){const r=Mm(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Ty(t,e,n){if((e=Bt(e))instanceof Cd)return e._internalPath;if(typeof e=="string")return Wv(t,e);throw um("Field path arguments must be of type string or ",t,!1,void 0,n)}const iD=new RegExp("[~\\*/\\[\\]]");function Wv(t,e,n){if(e.search(iD)>=0)throw um(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Cd(...e.split("."))._internalPath}catch{throw um(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function um(t,e,n,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${r}`),c&&(m+=` in document ${a}`),m+=")"),new Re(ce.INVALID_ARGUMENT,h+t+m)}function aC(t,e){return t.some((n=>n.isEqual(e)))}class Jv{constructor(e,n,r,a,l){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Jm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class aD extends Jv{data(){return super.data()}}function Jm(t,e){return typeof e=="string"?Wv(t,e):e instanceof Cd?e._internalPath:e._delegate._internalPath}function oC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Re(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Zv{}class Zm extends Zv{}function os(t,e,...n){let r=[];e instanceof Zv&&r.push(e),r=r.concat(n),(function(l){const c=l.filter((m=>m instanceof eb)).length,h=l.filter((m=>m instanceof ep)).length;if(c>1||c>0&&h>0)throw new Re(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)t=a._apply(t);return t}class ep extends Zm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ep(e,n,r)}_apply(e){const n=this._parse(e);return lC(e._query,n),new Xs(e.firestore,e.converter,py(e._query,n))}_parse(e){const n=_c(e.firestore);return(function(l,c,h,m,g,v,b){let _;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Gw(b,v);const N=[];for(const j of b)N.push(qw(m,l,j));_={arrayValue:{values:N}}}else _=qw(m,l,b)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Gw(b,v),_=rC(h,c,b,v==="in"||v==="not-in");return Tn.create(g,v,_)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function bo(t,e,n){const r=e,a=Jm("where",t);return ep._create(a,r,n)}class eb extends Zv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new eb(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:hs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(a,l){let c=a;const h=l.getFlattenedFilters();for(const m of h)lC(c,m),c=py(c,m)})(e._query,n),new Xs(e.firestore,e.converter,py(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class tb extends Zm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new tb(e,n)}_apply(e){const n=(function(a,l,c){if(a.startAt!==null)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ed(l,c)})(e._query,this._field,this._direction);return new Xs(e.firestore,e.converter,(function(a,l){const c=a.explicitOrderBy.concat([l]);return new Vo(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,n))}}function Cy(t,e="asc"){const n=e,r=Jm("orderBy",t);return tb._create(r,n)}class nb extends Zm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new nb(e,n,r)}_apply(e){return new Xs(e.firestore,e.converter,sm(e._query,this._limit,this._limitType))}}function ky(t){return p9("limit",t),nb._create("limit",t,"F")}class rb extends Zm{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new rb(e,n,r)}_apply(e){const n=lD(e,this.type,this._docOrFields,this._inclusive);return new Xs(e.firestore,e.converter,(function(a,l){return new Vo(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)})(e._query,n))}}function oD(...t){return rb._create("startAfter",t,!1)}function lD(t,e,n,r){if(n[0]=Bt(n[0]),n[0]instanceof Jv)return(function(l,c,h,m,g){if(!m)throw new Re(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const v=[];for(const b of Gl(l))if(b.field.isKeyField())v.push(rm(c,m.key));else{const _=m.data.field(b.field);if(Lm(_))throw new Re(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(_===null){const C=b.field.canonicalString();throw new Re(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${C}' (used as the orderBy) does not exist.`)}v.push(_)}return new rc(v,g)})(t._query,t.firestore._databaseId,e,n[0]._document,r);{const a=_c(t.firestore);return(function(c,h,m,g,v,b){const _=c.explicitOrderBy;if(v.length>_.length)throw new Re(ce.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const C=[];for(let N=0;N<v.length;N++){const j=v[N];if(_[N].field.isKeyField()){if(typeof j!="string")throw new Re(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof j}`);if(!Ev(c)&&j.indexOf("/")!==-1)throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${j}' contains a slash.`);const k=c.path.child(Ut.fromString(j));if(!Ke.isDocumentKey(k))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${k}' is not because it contains an odd number of segments.`);const B=new Ke(k);C.push(rm(h,B))}else{const k=rC(m,g,j);C.push(k)}}return new rc(C,b)})(t._query,t.firestore._databaseId,a,e,n,r)}}function qw(t,e,n){if(typeof(n=Bt(n))=="string"){if(n==="")throw new Re(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ev(e)&&n.indexOf("/")!==-1)throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ut.fromString(n));if(!Ke.isDocumentKey(r))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return rm(t,new Ke(r))}if(n instanceof rn)return rm(t,n._key);throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Mm(n)}.`)}function Gw(t,e){if(!Array.isArray(t)||t.length===0)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lC(t,e){const n=(function(a,l){for(const c of a)for(const h of c.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null})(t.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Re(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Re(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class cD{convertValue(e,n="none"){switch(Pa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return un(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ma(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ze(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return za(e,((a,l)=>{r[a]=this.convertValue(l,n)})),r}convertVectorValue(e){const n=e.fields?.[nm].arrayValue?.values?.map((r=>un(r.doubleValue)));return new Hs(n)}convertGeoPoint(e){return new Fs(un(e.latitude),un(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Vm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Wu(e));default:return null}}convertTimestamp(e){const n=Da(e);return new Gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ut.fromString(e);Rt(AT(r),9688,{name:e});const a=new Ju(r.get(1),r.get(3)),l=new Ke(r.popFirst(5));return a.isEqual(n)||ji(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}function sb(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Vu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wo extends Jv{constructor(e,n,r,a,l,c){super(e,n,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Jm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=wo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}wo._jsonSchemaVersion="firestore/documentSnapshot/1.0",wo._jsonSchema={type:Cn("string",wo._jsonSchemaVersion),bundleSource:Cn("string","DocumentSnapshot"),bundleName:Cn("string"),bundle:Cn("string")};class jf extends wo{data(e={}){return super.data(e)}}class Eo{constructor(e,n,r,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new Vu(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new jf(this._firestore,this._userDataWriter,r.key,r,new Vu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Re(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((h=>{const m=new jf(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Vu(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const m=new jf(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Vu(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,v=-1;return h.type!==0&&(g=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),v=c.indexOf(h.doc.key)),{type:uD(h.type),doc:m,oldIndex:g,newIndex:v}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Eo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=vv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(n.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function uD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ze(61501,{type:t})}}function tp(t){t=ar(t,rn);const e=ar(t.firestore,Gs);return W8(Td(e),t._key).then((n=>cC(e,t,n)))}Eo._jsonSchemaVersion="firestore/querySnapshot/1.0",Eo._jsonSchema={type:Cn("string",Eo._jsonSchemaVersion),bundleSource:Cn("string","QuerySnapshot"),bundleName:Cn("string"),bundle:Cn("string")};class ib extends cD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new rn(this.firestore,null,n)}}function jo(t){t=ar(t,Xs);const e=ar(t.firestore,Gs),n=Td(e),r=new ib(e);return oC(t._query),J8(n,t._query).then((a=>new Eo(e,r,t,a)))}function rd(t,e,n){t=ar(t,rn);const r=ar(t.firestore,Gs),a=sb(t.converter,e,n);return Ad(r,[qv(_c(r),"setDoc",t._key,a,t.converter!==null,n).toMutation(t._key,or.none())])}function tt(t,e,n,...r){t=ar(t,rn);const a=ar(t.firestore,Gs),l=_c(a);let c;return c=typeof(e=Bt(e))=="string"||e instanceof Cd?nC(l,"updateDoc",t._key,e,n,r):tC(l,"updateDoc",t._key,e),Ad(a,[c.toMutation(t._key,or.exists(!0))])}function lc(t){return Ad(ar(t.firestore,Gs),[new qm(t._key,or.none())])}function cn(t,e){const n=ar(t.firestore,Gs),r=Oe(t),a=sb(t.converter,e);return Ad(n,[qv(_c(t.firestore),"addDoc",r._key,a,t.converter!==null,{}).toMutation(r._key,or.exists(!1))]).then((()=>r))}function Dr(t,...e){t=Bt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||$w(e[r])||(n=e[r++]);const a={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if($w(e[r])){const m=e[r];e[r]=m.next?.bind(m),e[r+1]=m.error?.bind(m),e[r+2]=m.complete?.bind(m)}let l,c,h;if(t instanceof rn)c=ar(t.firestore,Gs),h=Um(t._key.path),l={next:m=>{e[r]&&e[r](cC(c,t,m))},error:e[r+1],complete:e[r+2]};else{const m=ar(t,Xs);c=ar(m.firestore,Gs),h=m._query;const g=new ib(c);l={next:v=>{e[r]&&e[r](new Eo(c,g,m,v))},error:e[r+1],complete:e[r+2]},oC(t._query)}return(function(g,v,b,_){const C=new $v(_),N=new Bv(v,C,b);return g.asyncQueue.enqueueAndForget((async()=>Vv(await cm(g),N))),()=>{C.Nu(),g.asyncQueue.enqueueAndForget((async()=>Uv(await cm(g),N)))}})(Td(c),h,a,l)}function Ad(t,e){return(function(r,a){const l=new Ci;return r.asyncQueue.enqueueAndForget((async()=>U8(await X8(r),a,l))),l.promise})(Td(t),e)}function cC(t,e,n){const r=n.docs.get(e._key),a=new ib(t);return new wo(t,a,e._key,r,new Vu(n.hasPendingWrites,n.fromCache),e.converter)}class dD{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=_c(e)}set(e,n,r){this._verifyNotCommitted();const a=j0(e,this._firestore),l=sb(a.converter,n,r),c=qv(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,r);return this._mutations.push(c.toMutation(a._key,or.none())),this}update(e,n,r,...a){this._verifyNotCommitted();const l=j0(e,this._firestore);let c;return c=typeof(n=Bt(n))=="string"||n instanceof Cd?nC(this._dataReader,"WriteBatch.update",l._key,n,r,a):tC(this._dataReader,"WriteBatch.update",l._key,n),this._mutations.push(c.toMutation(l._key,or.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=j0(e,this._firestore);return this._mutations=this._mutations.concat(new qm(n._key,or.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function j0(t,e){if((t=Bt(t)).firestore!==e)throw new Re(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function hD(){return new kd("deleteField")}function ft(){return new Gv("serverTimestamp")}function Nd(...t){return new Yv("arrayUnion",t)}function dm(...t){return new Kv("arrayRemove",t)}function hm(t){return new Qv("increment",t)}function Yw(t){return Td(t=ar(t,Gs)),new dD(t,(e=>Ad(t,e)))}(function(e,n=!0){(function(a){yc=a})(Oo),Co(new ja("firestore",((r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),h=new Gs(new a9(r.getProvider("auth-internal")),new c9(c,r.getProvider("app-check-internal")),(function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Re(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ju(g.options.projectId,v)})(c,a),c);return l={useFetchStreams:n,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),Ls(Q_,X_,e),Ls(Q_,X_,"esm2020")})();const uC="firebasestorage.googleapis.com",fD="storageBucket",mD=120*1e3,pD=600*1e3;class Ws extends Ks{constructor(e,n,r=0){super(I0(e),`Firebase Storage: ${n} (${I0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ws.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return I0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ys;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ys||(Ys={}));function I0(t){return"storage/"+t}function gD(){const t="An unknown error occurred, please check the error payload for server response.";return new Ws(Ys.UNKNOWN,t)}function yD(){return new Ws(Ys.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function vD(){return new Ws(Ys.CANCELED,"User canceled the upload/download.")}function bD(t){return new Ws(Ys.INVALID_URL,"Invalid URL '"+t+"'.")}function xD(t){return new Ws(Ys.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Kw(t){return new Ws(Ys.INVALID_ARGUMENT,t)}function dC(){return new Ws(Ys.APP_DELETED,"The Firebase app was deleted.")}function _D(t){return new Ws(Ys.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class cs{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=cs.makeFromUrl(e,n)}catch{return new cs(e,"")}if(r.path==="")return r;throw xD(e)}static makeFromUrl(e,n){let r=null;const a="([A-Za-z0-9.\\-_]+)";function l(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}const c="(/(.*))?$",h=new RegExp("^gs://"+a+c,"i"),m={bucket:1,path:3};function g(V){V.path_=decodeURIComponent(V.path)}const v="v[A-Za-z0-9_]+",b=n.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",C=new RegExp(`^https?://${b}/${v}/b/${a}/o${_}`,"i"),N={bucket:1,path:3},j=n===uC?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",B=new RegExp(`^https?://${j}/${a}/${k}`,"i"),R=[{regex:h,indices:m,postModify:l},{regex:C,indices:N,postModify:g},{regex:B,indices:{bucket:1,path:2},postModify:g}];for(let V=0;V<R.length;V++){const z=R[V],F=z.regex.exec(e);if(F){const S=F[z.indices.bucket];let E=F[z.indices.path];E||(E=""),r=new cs(S,E),z.postModify(r);break}}if(r==null)throw bD(e);return r}}class wD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function ED(t,e,n){let r=1,a=null,l=null,c=!1,h=0;function m(){return h===2}let g=!1;function v(...k){g||(g=!0,e.apply(null,k))}function b(k){a=setTimeout(()=>{a=null,t(C,m())},k)}function _(){l&&clearTimeout(l)}function C(k,...B){if(g){_();return}if(k){_(),v.call(null,k,...B);return}if(m()||c){_(),v.call(null,k,...B);return}r<64&&(r*=2);let R;h===1?(h=2,R=0):R=(r+Math.random())*1e3,b(R)}let N=!1;function j(k){N||(N=!0,_(),!g&&(a!==null?(k||(h=2),clearTimeout(a),b(0)):k||(h=1)))}return b(0),l=setTimeout(()=>{c=!0,j(!0)},n),j}function SD(t){t(!1)}function TD(t){return t!==void 0}function Qw(t,e,n,r){if(r<e)throw Kw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Kw(`Invalid value for '${t}'. Expected ${n} or less.`)}function CD(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const a=e(r)+"="+e(t[r]);n=n+a+"&"}return n=n.slice(0,-1),n}var fm;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(fm||(fm={}));function kD(t,e){const n=t>=500&&t<600,a=[408,429].indexOf(t)!==-1,l=e.indexOf(t)!==-1;return n||a||l}class AD{constructor(e,n,r,a,l,c,h,m,g,v,b,_=!0,C=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=m,this.timeout_=g,this.progressCallback_=v,this.connectionFactory_=b,this.retry=_,this.isUsingEmulator=C,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,j)=>{this.resolve_=N,this.reject_=j,this.start_()})}start_(){const e=(r,a)=>{if(a){r(!1,new cf(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=h=>{const m=h.loaded,g=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,g)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const h=l.getErrorCode()===fm.NO_ERROR,m=l.getStatus();if(!h||kD(m,this.additionalRetryCodes_)&&this.retry){const v=l.getErrorCode()===fm.ABORT;r(!1,new cf(!1,null,v));return}const g=this.successCodes_.indexOf(m)!==-1;r(!0,new cf(g,l))})},n=(r,a)=>{const l=this.resolve_,c=this.reject_,h=a.connection;if(a.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());TD(m)?l(m):l()}catch(m){c(m)}else if(h!==null){const m=gD();m.serverResponse=h.getErrorText(),this.errorCallback_?c(this.errorCallback_(h,m)):c(m)}else if(a.canceled){const m=this.appDelete_?dC():vD();c(m)}else{const m=yD();c(m)}};this.canceled_?n(!1,new cf(!1,null,!0)):this.backoffId_=ED(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&SD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class cf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function ND(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function RD(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function jD(t,e){e&&(t["X-Firebase-GMPID"]=e)}function ID(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function DD(t,e,n,r,a,l,c=!0,h=!1){const m=CD(t.urlParams),g=t.url+m,v=Object.assign({},t.headers);return jD(v,e),ND(v,n),RD(v,l),ID(v,r),new AD(g,t.method,v,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,a,c,h)}function MD(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function PD(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}class mm{constructor(e,n){this._service=e,n instanceof cs?this._location=n:this._location=cs.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new mm(e,n)}get root(){const e=new cs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return PD(this._location.path)}get storage(){return this._service}get parent(){const e=MD(this._location.path);if(e===null)return null;const n=new cs(this._location.bucket,e);return new mm(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw _D(e)}}function Xw(t,e){const n=e?.[fD];return n==null?null:cs.makeFromBucketSpec(n,t)}function OD(t,e,n,r={}){t.host=`${e}:${n}`;const a=Po(e);a&&(sv(`https://${t.host}/b`),iv("Storage",!0)),t._isUsingEmulator=!0,t._protocol=a?"https":"http";const{mockUserToken:l}=r;l&&(t._overrideAuthToken=typeof l=="string"?l:qS(l,t.app.options.projectId))}class LD{constructor(e,n,r,a,l,c=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=c,this._bucket=null,this._host=uC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=mD,this._maxUploadRetryTime=pD,this._requests=new Set,a!=null?this._bucket=cs.makeFromBucketSpec(a,this._host):this._bucket=Xw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=cs.makeFromBucketSpec(this._url,e):this._bucket=Xw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Qw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Qw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Mr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new mm(this,e)}_makeRequest(e,n,r,a,l=!0){if(this._deleted)return new wD(dC());{const c=DD(e,this._appId,r,a,n,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,n){const[r,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,a).getPromise()}}const Ww="@firebase/storage",Jw="0.14.0";const hC="storage";function VD(t=lv(),e){t=Bt(t);const r=Rm(t,hC).getImmediate({identifier:e}),a=FS("storage");return a&&UD(r,...a),r}function UD(t,e,n,r={}){OD(t,e,n,r)}function zD(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new LD(n,r,a,e,Oo)}function BD(){Co(new ja(hC,zD,"PUBLIC").setMultipleInstances(!0)),Ls(Ww,Jw,""),Ls(Ww,Jw,"esm2020")}BD();const FD={apiKey:"AIzaSyAaaBO8Nw49Xsyo4QG1ropL0UYWeY2zrlU",authDomain:"meydan-academy.firebaseapp.com",projectId:"meydan-academy",storageBucket:"meydan-academy.firebasestorage.app",messagingSenderId:"267697346186",appId:"1:267697346186:web:d53b7d91fe0fabf8d37f73"},ab=KS(FD),zl=n9(ab),we=eD(ab);VD(ab);const fC=I.createContext({}),nr=()=>{const t=I.useContext(fC);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},HD=({children:t})=>{const[e,n]=I.useState(null),[r,a]=I.useState(null),[l,c]=I.useState(!0),h=async(N,j=!0)=>{if(N)try{await rd(Oe(we,"users",N),{isOnline:j,lastSeen:ft()},{merge:!0})}catch(k){console.error("Presence update failed:",k)}};I.useEffect(()=>$5(zl,async j=>{if(n(j),j){const k=Dr(Oe(we,"users",j.uid),R=>{R.exists()&&a({id:R.id,...R.data()})});await h(j.uid);const B=setInterval(()=>{h(j.uid)},120*1e3),$=()=>{Oe(we,"users",j.uid),navigator.sendBeacon(`https://firestore.googleapis.com/v1/projects/meydan-academy/databases/(default)/documents/users/${j.uid}`,JSON.stringify({fields:{lastSeen:{timestampValue:new Date().toISOString()}}}))};return window.addEventListener("beforeunload",$),c(!1),()=>{k(),clearInterval(B),window.removeEventListener("beforeunload",$)}}else a(null),c(!1)}),[]);const C={currentUser:e,userProfile:r,register:async(N,j,k)=>{const B=await V5(zl,N,j);try{await V_(B.user)}catch($){console.error("Error sending verification email:",$)}return await rd(Oe(we,"users",B.user.uid),{displayName:k,email:N,role:"member",createdAt:ft(),isOnline:!0,lastSeen:ft()}),B},login:async(N,j)=>{const k=await U5(zl,N,j);return await h(k.user.uid,!0),k},logout:async()=>{if(e)try{await h(e.uid,!1)}catch(N){console.log("Final presence update failed (expected):",N.code)}return q5(zl)},resetPassword:N=>E4(zl,N),resendVerification:()=>{if(e)return V_(e)}};return d.jsx(fC.Provider,{value:C,children:!l&&t})};let D0=null;const $D=()=>(D0||(D0=new(window.AudioContext||window.webkitAudioContext)),D0),Ay=()=>{try{const t=$D(),e=t.currentTime,n=t.createOscillator(),r=t.createGain();n.connect(r),r.connect(t.destination),n.frequency.value=880,n.type="sine",r.gain.setValueAtTime(0,e),r.gain.linearRampToValueAtTime(.2,e+.01),r.gain.linearRampToValueAtTime(0,e+.1),n.start(e),n.stop(e+.1);const a=t.createOscillator(),l=t.createGain();a.connect(l),l.connect(t.destination),a.frequency.value=660,a.type="sine",l.gain.setValueAtTime(0,e+.08),l.gain.linearRampToValueAtTime(.2,e+.09),l.gain.linearRampToValueAtTime(0,e+.25),a.start(e+.08),a.stop(e+.25)}catch(t){console.error("Error playing notification sound:",t)}},qD=(t,e)=>!t||!e?!1:/@everyone\b/i.test(t)?!0:new RegExp(`@${e}\\b`,"i").test(t),mC=I.createContext(),Rd=()=>{const t=I.useContext(mC);if(!t)throw new Error("useData must be used within DataProvider");return t},GD=({children:t})=>{const{currentUser:e}=nr(),[n,r]=I.useState([]),[a,l]=I.useState([]),[c,h]=I.useState(null),[m,g]=I.useState([]),[v,b]=I.useState(null),[_,C]=I.useState({}),[N,j]=I.useState([]),k=I.useRef({}),B=I.useRef(!0);I.useEffect(()=>{if(r([]),!c)return;const z=Dr(dt(we,"servers",c,"members"),async E=>{const A=[],M=[],O=new Map;if(E.docChanges().forEach(U=>{const P=U.doc.data();U.type==="added"&&(A.push(P.userId),O.set(P.userId,P.role)),U.type==="removed"&&M.push(P.userId),U.type==="modified"&&O.set(P.userId,P.role)}),n.length===0&&A.length>0){const U=new Map;E.docs.forEach(Ee=>{U.set(Ee.data().userId,Ee.data().role||"member")});const P=Array.from(U.keys()),xe=[];for(let Ee=0;Ee<P.length;Ee+=10){const G=P.slice(Ee,Ee+10),ne=os(dt(we,"users"),bo("__name__","in",G));(await jo(ne)).forEach(Ae=>{xe.push({id:Ae.id,...Ae.data(),serverRole:U.get(Ae.id)})})}r(xe);return}if(A.length>0&&n.length>0){const U=[];for(let P=0;P<A.length;P+=10){const xe=A.slice(P,P+10),Ee=os(dt(we,"users"),bo("__name__","in",xe));(await jo(Ee)).forEach(ne=>{U.push({id:ne.id,...ne.data(),serverRole:O.get(ne.id)})})}r(P=>[...P,...U])}M.length>0&&r(U=>U.filter(P=>!M.includes(P.id))),E.docChanges().some(U=>U.type==="modified")&&r(U=>U.map(P=>O.has(P.id)?{...P,serverRole:O.get(P.id)}:P))}),F=os(dt(we,"users"),bo("servers","array-contains",c),bo("isOnline","==",!0)),S=Dr(F,E=>{r(A=>{const M=new Map;return E.forEach(O=>{const U=O.data();M.set(O.id,{presence:U.presence,isOnline:U.isOnline,status:U.status,lastSeen:U.lastSeen,displayName:U.displayName,photoUrl:U.photoUrl||U.photoURL,bio:U.bio,role:U.role})}),A.map(O=>{const U=M.get(O.id);return U?{...O,...U}:{...O,isOnline:!1,presence:"offline",status:null}})})});return()=>{z(),S()}},[c]);const[$,R]=I.useState([]);I.useEffect(()=>{if(!e){l([]),h(null),R([]);return}return Dr(Oe(we,"users",e.uid),F=>{if(!F.exists())return;const S=F.data(),E=S?.servers||[],A=S?.unreadMentions||{};Object.keys(A).forEach(M=>{const O=k.current[M]||0;(A[M]?.count||0)>O&&M!==c&&Ay()}),k.current=Object.fromEntries(Object.entries(A).map(([M,O])=>[M,O.count])),C(A),R(M=>JSON.stringify(M)!==JSON.stringify(E)?E:M),h(M=>{const O=S?.currentServer;return M?M==="home"||E.includes(M)?M:E.length>0?E[0]:"home":O&&(O==="home"||E.includes(O))?O:E.length>0?E[0]:"home"})})},[e]),I.useEffect(()=>{if(l(F=>F.filter(S=>$.includes(S.id))),$.length===0){l([]);return}const z=[];for(let F=0;F<$.length;F+=10){const S=$.slice(F,F+10),E=os(dt(we,"servers"),bo("__name__","in",S)),A=Dr(E,M=>{const O=[];M.forEach(U=>{O.push({id:U.id,...U.data()})}),l(U=>[...U.filter(Ee=>!S.includes(Ee.id)),...O].sort((Ee,G)=>$.indexOf(Ee.id)-$.indexOf(G.id)))});z.push(A)}return()=>{z.forEach(F=>F())}},[$]),I.useEffect(()=>{if(!e){j([]);return}B.current=!0;const z=os(dt(we,"dms"),bo("participants","array-contains",e.uid)),F=Dr(z,S=>{const E=[];S.forEach(M=>{E.push({id:M.id,...M.data()})}),E.sort((M,O)=>{const U=M.updatedAt?.toMillis()||0;return(O.updatedAt?.toMillis()||0)-U});const A=E.filter(M=>!M.hiddenFor||!M.hiddenFor.includes(e.uid));j(A),B.current||S.docChanges().forEach(M=>{if(M.type==="modified"||M.type==="added"){const O=M.doc.data();if(O.lastMessage&&O.lastMessage.userId!==e.uid){const U=Date.now(),P=O.lastMessage.timestamp?.toMillis()||0;U-P<3e4&&Ay()}}}),B.current=!1});return()=>F()},[e]),I.useEffect(()=>{if(!c){g([]),b(null);return}const z=a.find(S=>S.id===c);b(z||null);const F=Dr(dt(we,"servers",c,"channels"),S=>{const E=[];S.forEach(A=>{E.push({id:A.id,...A.data()})}),g(E.sort((A,M)=>A.position-M.position))});return()=>{F()}},[c,a]);const V={users:n,servers:a,currentServer:c,setCurrentServer:h,channels:m,server:v,dms:N,unreadMentions:_};return d.jsx(mC.Provider,{value:V,children:t})};var pC={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Zw=fe.createContext&&fe.createContext(pC),YD=["attr","size","title"];function KD(t,e){if(t==null)return{};var n=QD(t,e),r,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(a=0;a<l.length;a++)r=l[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function QD(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function pm(){return pm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pm.apply(this,arguments)}function eE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function gm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eE(Object(n),!0).forEach(function(r){XD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function XD(t,e,n){return e=WD(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WD(t){var e=JD(t,"string");return typeof e=="symbol"?e:e+""}function JD(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gC(t){return t&&t.map((e,n)=>fe.createElement(e.tag,gm({key:n},e.attr),gC(e.child)))}function Pe(t){return e=>fe.createElement(ZD,pm({attr:gm({},t.attr)},e),gC(t.child))}function ZD(t){var e=n=>{var{attr:r,size:a,title:l}=t,c=KD(t,YD),h=a||n.size||"1em",m;return n.className&&(m=n.className),t.className&&(m=(m?m+" ":"")+t.className),fe.createElement("svg",pm({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,c,{className:m,style:gm(gm({color:t.color||n.color},n.style),t.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),l&&fe.createElement("title",null,l),t.children)};return Zw!==void 0?fe.createElement(Zw.Consumer,null,n=>e(n)):e(pC)}function yC(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6z"},child:[]},{tag:"path",attr:{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12zm0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17z"},child:[]}]})(t)}function vC(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m17.6 9.48 1.84-3.18c.16-.31.04-.69-.26-.85a.637.637 0 0 0-.83.22l-1.88 3.24a11.463 11.463 0 0 0-8.94 0L5.65 5.67a.643.643 0 0 0-.87-.2c-.28.18-.37.54-.22.83L6.4 9.48A10.78 10.78 0 0 0 1 18h22a10.78 10.78 0 0 0-5.4-8.52zM7 15.25a1.25 1.25 0 1 1 0-2.5 1.25 1.25 0 0 1 0 2.5zm10 0a1.25 1.25 0 1 1 0-2.5 1.25 1.25 0 0 1 0 2.5z"},child:[]}]})(t)}function eM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"},child:[]}]})(t)}function tM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"},child:[]}]})(t)}function ki(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(t)}function nM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10.09 15.59 11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5a2 2 0 0 0-2 2v4h2V5h14v14H5v-4H3v4a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"},child:[]}]})(t)}function rM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 3a9 9 0 0 0-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42A8.954 8.954 0 0 0 13 21a9 9 0 0 0 0-18zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"},child:[]}]})(t)}function ob(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"},child:[]}]})(t)}function sM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"},child:[]}]})(t)}function iM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"},child:[]}]})(t)}function lb(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 19H5V5h7V3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"},child:[]}]})(t)}function Io(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9.19 6.35c-2.04 2.29-3.44 5.58-3.57 5.89L2 10.69l4.05-4.05c.47-.47 1.15-.68 1.81-.55l1.33.26zM11.17 17s3.74-1.55 5.89-3.7c5.4-5.4 4.5-9.62 4.21-10.57-.95-.3-5.17-1.19-10.57 4.21C8.55 9.09 7 12.83 7 12.83L11.17 17zm6.48-2.19c-2.29 2.04-5.58 3.44-5.89 3.57L13.31 22l4.05-4.05c.47-.47.68-1.15.55-1.81l-.26-1.33zM9 18c0 .83-.34 1.58-.88 2.12C6.94 21.3 2 22 2 22s.7-4.94 1.88-6.12A2.996 2.996 0 0 1 9 18zm4-9c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2z"},child:[]}]})(t)}function cb(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"},child:[]}]})(t)}function np(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(t)}function aM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m23 12-2.44-2.79.34-3.69-3.61-.82-1.89-3.2L12 2.96 8.6 1.5 6.71 4.69 3.1 5.5l.34 3.7L1 12l2.44 2.79-.34 3.7 3.61.82L8.6 22.5l3.4-1.47 3.4 1.46 1.89-3.19 3.61-.82-.34-3.69L23 12zm-12.91 4.72-3.8-3.81 1.48-1.48 2.32 2.33 5.85-5.87 1.48 1.48-7.33 7.35z"},child:[]}]})(t)}function oM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"},child:[]}]})(t)}function lM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"},child:[]}]})(t)}function Ny(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28zm-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18l5.98 5.99zM4.27 3 3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73 4.27 3z"},child:[]}]})(t)}function sd(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"},child:[]}]})(t)}function cM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM9.5 16.5v-9l7 4.5-7 4.5z"},child:[]}]})(t)}function uM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 6h12v12H6z"},child:[]}]})(t)}function Ry(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m21 6.5-4 4V7c0-.55-.45-1-1-1H9.82L21 17.18V6.5zM3.27 2 2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.54-.18L19.73 21 21 19.73 3.27 2z"},child:[]}]})(t)}function id(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"},child:[]}]})(t)}function dM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 9v6h4l5 5V4l-5 5H7z"},child:[]}]})(t)}function tE(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16.5 12A4.5 4.5 0 0 0 14 7.97v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51A8.796 8.796 0 0 0 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06a8.99 8.99 0 0 0 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4 9.91 6.09 12 8.18V4z"},child:[]}]})(t)}function nE(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3A4.5 4.5 0 0 0 14 7.97v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"},child:[]}]})(t)}function M0(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.7.28-.28 0-.53-.11-.71-.29L.29 13.08a.956.956 0 0 1-.29-.7c0-.28.11-.53.29-.71C3.34 8.78 7.46 7 12 7s8.66 1.78 11.71 4.67c.18.18.29.43.29.71 0 .28-.11.53-.29.71l-2.48 2.48c-.18.18-.43.29-.71.29-.27 0-.52-.11-.7-.28a11.27 11.27 0 0 0-2.67-1.85.996.996 0 0 1-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z"},child:[]}]})(t)}function hM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20.01 15.38c-1.23 0-2.42-.2-3.53-.56a.977.977 0 0 0-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"},child:[]}]})(t)}function fM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"},child:[]}]})(t)}function mM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"},child:[]}]})(t)}function ym(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M20 18c1.1 0 1.99-.9 1.99-2L22 6a2 2 0 0 0-2-2H4c-1.11 0-2 .89-2 2v10a2 2 0 0 0 2 2H0v2h24v-2h-4zm-7-3.53v-2.19c-2.78 0-4.61.85-6 2.72.56-2.67 2.11-5.33 6-5.87V7l4 3.73-4 3.74z"},child:[]}]})(t)}function pM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m21.22 18.02 2 2H24v-2h-2.78zm.77-2 .01-10a2 2 0 0 0-2-2H7.22l5.23 5.23c.18-.04.36-.07.55-.1V7.02l4 3.73-1.58 1.47 5.54 5.54c.61-.33 1.03-.99 1.03-1.74zM2.39 1.73 1.11 3l1.54 1.54c-.4.36-.65.89-.65 1.48v10a2 2 0 0 0 2 2H0v2h18.13l2.71 2.71 1.27-1.27L2.39 1.73zM7 15.02c.31-1.48.92-2.95 2.07-4.06l1.59 1.59c-1.54.38-2.7 1.18-3.66 2.47z"},child:[]}]})(t)}function rE(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"},child:[]}]})(t)}function Kl(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(t)}function gM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(t)}function Ql(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M16 9V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3z"},child:[]}]})(t)}function yM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"},child:[]}]})(t)}function P0(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"},child:[]}]})(t)}function bC(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 10V8h-4V4h-2v4h-4V4H8v4H4v2h4v4H4v2h4v4h2v-4h4v4h2v-4h4v-2h-4v-4h4zm-6 4h-4v-4h4v4z"},child:[]}]})(t)}function jy(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 18h2V6H7v12zm4 4h2V2h-2v20zm-8-8h2v-4H3v4zm12 4h2V6h-2v12zm4-8v4h2v-4h-2z"},child:[]}]})(t)}function vM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 9H4v2h16V9zM4 15h16v-2H4v2z"},child:[]}]})(t)}function bM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"},child:[]}]})(t)}function Iy(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zm0-10h4v6h6v-6h4l-7-7-7 7z"},child:[]}]})(t)}function xM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 3H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h6v2H8v2h8v-2h-2v-2h6c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"},child:[]}]})(t)}function _M(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"},child:[]}]})(t)}function wM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"},child:[]}]})(t)}function EM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 7v2.99s-1.99.01-2 0V7h-3s.01-1.99 0-2h3V2h2v3h3v2h-3zm-3 4V8h-3V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8h-3zM5 19l3-4 2 3 3-4 4 5H5z"},child:[]}]})(t)}function SM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m19 9 1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25L19 9zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12l-5.5-2.5zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25L19 15z"},child:[]}]})(t)}function Xl(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},child:[]}]})(t)}function vm(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"},child:[]}]})(t)}function TM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"},child:[]}]})(t)}function CM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10a2.5 2.5 0 0 0 2.5-2.5c0-.61-.23-1.2-.64-1.67a.528.528 0 0 1-.13-.33c0-.28.22-.5.5-.5H16c3.31 0 6-2.69 6-6 0-4.96-4.49-9-10-9zm5.5 11c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm-3-4c-.83 0-1.5-.67-1.5-1.5S13.67 6 14.5 6s1.5.67 1.5 1.5S15.33 9 14.5 9zM5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S7.33 13 6.5 13 5 12.33 5 11.5zm6-4c0 .83-.67 1.5-1.5 1.5S8 8.33 8 7.5 8.67 6 9.5 6s1.5.67 1.5 1.5z"},child:[]}]})(t)}function kM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 11h-1V3c0-1.1-.9-2-2-2h-2c-1.1 0-2 .9-2 2v8H8c-2.76 0-5 2.24-5 5v7h18v-7c0-2.76-2.24-5-5-5zm3 10h-2v-3c0-.55-.45-1-1-1s-1 .45-1 1v3h-2v-3c0-.55-.45-1-1-1s-1 .45-1 1v3H9v-3c0-.55-.45-1-1-1s-1 .45-1 1v3H5v-5c0-1.65 1.35-3 3-3h8c1.65 0 3 1.35 3 3v5z"},child:[]}]})(t)}function AM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.16 3h-.32L9.21 8.25h5.58zM16.46 8.25h5.16L19 3h-5.16zM21.38 9.75h-8.63V20.1zM11.25 20.1V9.75H2.62zM7.54 8.25 10.16 3H5L2.38 8.25z"},child:[]}]})(t)}function Do(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"},child:[]}]})(t)}function On(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(t)}function NM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"},child:[]}]})(t)}function RM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"},child:[]}]})(t)}function sE(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"},child:[]}]})(t)}function jM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(t)}function IM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"},child:[]}]})(t)}function DM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 12.22C21 6.73 16.74 3 12 3c-4.69 0-9 3.65-9 9.28-.6.34-1 .98-1 1.72v2c0 1.1.9 2 2 2h1v-6.1c0-3.87 3.13-7 7-7s7 3.13 7 7V19h-8v2h8c1.1 0 2-.9 2-2v-1.22c.59-.31 1-.92 1-1.64v-2.3c0-.7-.41-1.31-1-1.62z"},child:[]},{tag:"circle",attr:{cx:"9",cy:"13",r:"1"},child:[]},{tag:"circle",attr:{cx:"15",cy:"13",r:"1"},child:[]},{tag:"path",attr:{d:"M18 11.03A6.04 6.04 0 0 0 12.05 6c-3.03 0-6.29 2.51-6.03 6.45a8.075 8.075 0 0 0 4.86-5.89c1.31 2.63 4 4.44 7.12 4.47z"},child:[]}]})(t)}function MM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 1.01 7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14zm-1-6h-3V8h-2v5H8l4 4 4-4z"},child:[]}]})(t)}function PM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 11V3H5c-1.1 0-2 .9-2 2v6h8zm2 0h8V5c0-1.1-.9-2-2-2h-6v8zm-2 2H3v6c0 1.1.9 2 2 2h6v-8zm2 0v8h6c1.1 0 2-.9 2-2v-6h-8z"},child:[]}]})(t)}function iE(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 9V7h-2V2.84A9.929 9.929 0 0 0 11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12c0-1.05-.17-2.05-.47-3H18zm-2.5-1c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5.67-1.5 1.5-1.5zm-7 0c.83 0 1.5.67 1.5 1.5S9.33 11 8.5 11 7 10.33 7 9.5 7.67 8 8.5 8zm3.5 9.5c-2.33 0-4.31-1.46-5.11-3.5h10.22c-.8 2.04-2.78 3.5-5.11 3.5zM22 3h2v2h-2v2h-2V5h-2V3h2V1h2v2z"},child:[]}]})(t)}function xC(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM8.5 8c.83 0 1.5.67 1.5 1.5S9.33 11 8.5 11 7 10.33 7 9.5 7.67 8 8.5 8zM12 18c-2.28 0-4.22-1.66-5-4h10c-.78 2.34-2.72 4-5 4zm3.5-7c-.83 0-1.5-.67-1.5-1.5S14.67 8 15.5 8s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"},child:[]}]})(t)}function ub(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"},child:[]}]})(t)}function OM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"},child:[]}]})(t)}function LM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"},child:[]}]})(t)}function db(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"},child:[]}]})(t)}function VM(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"},child:[]}]})(t)}const _C=I.createContext(),fs=()=>{const t=I.useContext(_C);if(!t)throw new Error("useToast must be used within ToastProvider");return t},UM=({children:t})=>{const[e,n]=I.useState([]),r=I.useCallback((g,v="info")=>{const b=Date.now();n(_=>[..._,{id:b,message:g,type:v}]),setTimeout(()=>{n(_=>_.filter(C=>C.id!==b))},4e3)},[]),a=I.useCallback(g=>{n(v=>v.filter(b=>b.id!==g))},[]),l=I.useCallback(g=>r(g,"success"),[r]),c=I.useCallback(g=>r(g,"error"),[r]),h=I.useCallback(g=>r(g,"info"),[r]),m=I.useCallback(g=>r(g,"warning"),[r]);return d.jsxs(_C.Provider,{value:{success:l,error:c,info:h,warning:m},children:[t,d.jsx(zM,{toasts:e,removeToast:a})]})},zM=({toasts:t,removeToast:e})=>d.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(n=>d.jsx(BM,{toast:n,onClose:()=>e(n.id)},n.id))}),BM=({toast:t,onClose:e})=>{const n={success:d.jsx(eM,{size:20}),error:d.jsx(oM,{size:20}),warning:d.jsx(lM,{size:20}),info:d.jsx(ob,{size:20})},r={success:"bg-green-600 border-green-500",error:"bg-red-600 border-red-500",warning:"bg-yellow-600 border-yellow-500",info:"bg-blue-600 border-blue-500"};return d.jsxs("div",{className:`${r[t.type]} border-l-4 text-white px-4 py-3 rounded-lg shadow-lg 
                  flex items-center gap-3 min-w-[300px] max-w-md animate-slide-in`,children:[d.jsx("div",{className:"flex-shrink-0",children:n[t.type]}),d.jsx("div",{className:"flex-1 text-sm font-medium",children:t.message}),d.jsx("button",{onClick:e,className:"flex-shrink-0 hover:bg-white/20 rounded p-1 transition-colors",children:d.jsx(On,{size:18})})]})};function wC(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(n=wC(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function FM(){for(var t,e,n=0,r="",a=arguments.length;n<a;n++)(t=arguments[n])&&(e=wC(t))&&(r&&(r+=" "),r+=e);return r}const HM=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},$M=(t,e)=>({classGroupId:t,validator:e}),EC=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),bm="-",aE=[],qM="arbitrary..",GM=t=>{const e=KM(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:c=>{if(c.startsWith("[")&&c.endsWith("]"))return YM(c);const h=c.split(bm),m=h[0]===""&&h.length>1?1:0;return SC(h,m,e)},getConflictingClassGroupIds:(c,h)=>{if(h){const m=r[c],g=n[c];return m?g?HM(g,m):m:g||aE}return n[c]||aE}}},SC=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const a=t[e],l=n.nextPart.get(a);if(l){const g=SC(t,e+1,l);if(g)return g}const c=n.validators;if(c===null)return;const h=e===0?t.join(bm):t.slice(e).join(bm),m=c.length;for(let g=0;g<m;g++){const v=c[g];if(v.validator(h))return v.classGroupId}},YM=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?qM+r:void 0})(),KM=t=>{const{theme:e,classGroups:n}=t;return QM(n,e)},QM=(t,e)=>{const n=EC();for(const r in t){const a=t[r];hb(a,n,r,e)}return n},hb=(t,e,n,r)=>{const a=t.length;for(let l=0;l<a;l++){const c=t[l];XM(c,e,n,r)}},XM=(t,e,n,r)=>{if(typeof t=="string"){WM(t,e,n);return}if(typeof t=="function"){JM(t,e,n,r);return}ZM(t,e,n,r)},WM=(t,e,n)=>{const r=t===""?e:TC(e,t);r.classGroupId=n},JM=(t,e,n,r)=>{if(eP(t)){hb(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push($M(n,t))},ZM=(t,e,n,r)=>{const a=Object.entries(t),l=a.length;for(let c=0;c<l;c++){const[h,m]=a[c];hb(m,TC(e,h),n,r)}},TC=(t,e)=>{let n=t;const r=e.split(bm),a=r.length;for(let l=0;l<a;l++){const c=r[l];let h=n.nextPart.get(c);h||(h=EC(),n.nextPart.set(c,h)),n=h}return n},eP=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,tP=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const a=(l,c)=>{n[l]=c,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(l){let c=n[l];if(c!==void 0)return c;if((c=r[l])!==void 0)return a(l,c),c},set(l,c){l in n?n[l]=c:a(l,c)}}},Dy="!",oE=":",nP=[],lE=(t,e,n,r,a)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:a}),rP=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=a=>{const l=[];let c=0,h=0,m=0,g;const v=a.length;for(let j=0;j<v;j++){const k=a[j];if(c===0&&h===0){if(k===oE){l.push(a.slice(m,j)),m=j+1;continue}if(k==="/"){g=j;continue}}k==="["?c++:k==="]"?c--:k==="("?h++:k===")"&&h--}const b=l.length===0?a:a.slice(m);let _=b,C=!1;b.endsWith(Dy)?(_=b.slice(0,-1),C=!0):b.startsWith(Dy)&&(_=b.slice(1),C=!0);const N=g&&g>m?g-m:void 0;return lE(l,C,_,N)};if(e){const a=e+oE,l=r;r=c=>c.startsWith(a)?l(c.slice(a.length)):lE(nP,!1,c,void 0,!0)}if(n){const a=r;r=l=>n({className:l,parseClassName:a})}return r},sP=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let a=[];for(let l=0;l<n.length;l++){const c=n[l],h=c[0]==="[",m=e.has(c);h||m?(a.length>0&&(a.sort(),r.push(...a),a=[]),r.push(c)):a.push(c)}return a.length>0&&(a.sort(),r.push(...a)),r}},iP=t=>({cache:tP(t.cacheSize),parseClassName:rP(t),sortModifiers:sP(t),...GM(t)}),aP=/\s+/,oP=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:l}=e,c=[],h=t.trim().split(aP);let m="";for(let g=h.length-1;g>=0;g-=1){const v=h[g],{isExternal:b,modifiers:_,hasImportantModifier:C,baseClassName:N,maybePostfixModifierPosition:j}=n(v);if(b){m=v+(m.length>0?" "+m:m);continue}let k=!!j,B=r(k?N.substring(0,j):N);if(!B){if(!k){m=v+(m.length>0?" "+m:m);continue}if(B=r(N),!B){m=v+(m.length>0?" "+m:m);continue}k=!1}const $=_.length===0?"":_.length===1?_[0]:l(_).join(":"),R=C?$+Dy:$,V=R+B;if(c.indexOf(V)>-1)continue;c.push(V);const z=a(B,k);for(let F=0;F<z.length;++F){const S=z[F];c.push(R+S)}m=v+(m.length>0?" "+m:m)}return m},lP=(...t)=>{let e=0,n,r,a="";for(;e<t.length;)(n=t[e++])&&(r=CC(n))&&(a&&(a+=" "),a+=r);return a},CC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=CC(t[r]))&&(n&&(n+=" "),n+=e);return n},cP=(t,...e)=>{let n,r,a,l;const c=m=>{const g=e.reduce((v,b)=>b(v),t());return n=iP(g),r=n.cache.get,a=n.cache.set,l=h,h(m)},h=m=>{const g=r(m);if(g)return g;const v=oP(m,n);return a(m,v),v};return l=c,(...m)=>l(lP(...m))},uP=[],An=t=>{const e=n=>n[t]||uP;return e.isThemeGetter=!0,e},kC=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,AC=/^\((?:(\w[\w-]*):)?(.+)\)$/i,dP=/^\d+\/\d+$/,hP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,fP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,mP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,pP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,gP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Dl=t=>dP.test(t),ht=t=>!!t&&!Number.isNaN(Number(t)),ma=t=>!!t&&Number.isInteger(Number(t)),O0=t=>t.endsWith("%")&&ht(t.slice(0,-1)),bi=t=>hP.test(t),yP=()=>!0,vP=t=>fP.test(t)&&!mP.test(t),NC=()=>!1,bP=t=>pP.test(t),xP=t=>gP.test(t),_P=t=>!Be(t)&&!Fe(t),wP=t=>wc(t,IC,NC),Be=t=>kC.test(t),go=t=>wc(t,DC,vP),L0=t=>wc(t,kP,ht),cE=t=>wc(t,RC,NC),EP=t=>wc(t,jC,xP),uf=t=>wc(t,MC,bP),Fe=t=>AC.test(t),ku=t=>Ec(t,DC),SP=t=>Ec(t,AP),uE=t=>Ec(t,RC),TP=t=>Ec(t,IC),CP=t=>Ec(t,jC),df=t=>Ec(t,MC,!0),wc=(t,e,n)=>{const r=kC.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Ec=(t,e,n=!1)=>{const r=AC.exec(t);return r?r[1]?e(r[1]):n:!1},RC=t=>t==="position"||t==="percentage",jC=t=>t==="image"||t==="url",IC=t=>t==="length"||t==="size"||t==="bg-size",DC=t=>t==="length",kP=t=>t==="number",AP=t=>t==="family-name",MC=t=>t==="shadow",NP=()=>{const t=An("color"),e=An("font"),n=An("text"),r=An("font-weight"),a=An("tracking"),l=An("leading"),c=An("breakpoint"),h=An("container"),m=An("spacing"),g=An("radius"),v=An("shadow"),b=An("inset-shadow"),_=An("text-shadow"),C=An("drop-shadow"),N=An("blur"),j=An("perspective"),k=An("aspect"),B=An("ease"),$=An("animate"),R=()=>["auto","avoid","all","avoid-page","page","left","right","column"],V=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],z=()=>[...V(),Fe,Be],F=()=>["auto","hidden","clip","visible","scroll"],S=()=>["auto","contain","none"],E=()=>[Fe,Be,m],A=()=>[Dl,"full","auto",...E()],M=()=>[ma,"none","subgrid",Fe,Be],O=()=>["auto",{span:["full",ma,Fe,Be]},ma,Fe,Be],U=()=>[ma,"auto",Fe,Be],P=()=>["auto","min","max","fr",Fe,Be],xe=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Ee=()=>["start","end","center","stretch","center-safe","end-safe"],G=()=>["auto",...E()],ne=()=>[Dl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...E()],X=()=>[t,Fe,Be],Ae=()=>[...V(),uE,cE,{position:[Fe,Be]}],De=()=>["no-repeat",{repeat:["","x","y","space","round"]}],H=()=>["auto","cover","contain",TP,wP,{size:[Fe,Be]}],ee=()=>[O0,ku,go],ae=()=>["","none","full",g,Fe,Be],de=()=>["",ht,ku,go],je=()=>["solid","dashed","dotted","double"],_e=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ce=()=>[ht,O0,uE,cE],He=()=>["","none",N,Fe,Be],Ge=()=>["none",ht,Fe,Be],ve=()=>["none",ht,Fe,Be],he=()=>[ht,Fe,Be],$e=()=>[Dl,"full",...E()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[bi],breakpoint:[bi],color:[yP],container:[bi],"drop-shadow":[bi],ease:["in","out","in-out"],font:[_P],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[bi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[bi],shadow:[bi],spacing:["px",ht],text:[bi],"text-shadow":[bi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Dl,Be,Fe,k]}],container:["container"],columns:[{columns:[ht,Be,Fe,h]}],"break-after":[{"break-after":R()}],"break-before":[{"break-before":R()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:z()}],overflow:[{overflow:F()}],"overflow-x":[{"overflow-x":F()}],"overflow-y":[{"overflow-y":F()}],overscroll:[{overscroll:S()}],"overscroll-x":[{"overscroll-x":S()}],"overscroll-y":[{"overscroll-y":S()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:A()}],"inset-x":[{"inset-x":A()}],"inset-y":[{"inset-y":A()}],start:[{start:A()}],end:[{end:A()}],top:[{top:A()}],right:[{right:A()}],bottom:[{bottom:A()}],left:[{left:A()}],visibility:["visible","invisible","collapse"],z:[{z:[ma,"auto",Fe,Be]}],basis:[{basis:[Dl,"full","auto",h,...E()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ht,Dl,"auto","initial","none",Be]}],grow:[{grow:["",ht,Fe,Be]}],shrink:[{shrink:["",ht,Fe,Be]}],order:[{order:[ma,"first","last","none",Fe,Be]}],"grid-cols":[{"grid-cols":M()}],"col-start-end":[{col:O()}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":M()}],"row-start-end":[{row:O()}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":P()}],"auto-rows":[{"auto-rows":P()}],gap:[{gap:E()}],"gap-x":[{"gap-x":E()}],"gap-y":[{"gap-y":E()}],"justify-content":[{justify:[...xe(),"normal"]}],"justify-items":[{"justify-items":[...Ee(),"normal"]}],"justify-self":[{"justify-self":["auto",...Ee()]}],"align-content":[{content:["normal",...xe()]}],"align-items":[{items:[...Ee(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Ee(),{baseline:["","last"]}]}],"place-content":[{"place-content":xe()}],"place-items":[{"place-items":[...Ee(),"baseline"]}],"place-self":[{"place-self":["auto",...Ee()]}],p:[{p:E()}],px:[{px:E()}],py:[{py:E()}],ps:[{ps:E()}],pe:[{pe:E()}],pt:[{pt:E()}],pr:[{pr:E()}],pb:[{pb:E()}],pl:[{pl:E()}],m:[{m:G()}],mx:[{mx:G()}],my:[{my:G()}],ms:[{ms:G()}],me:[{me:G()}],mt:[{mt:G()}],mr:[{mr:G()}],mb:[{mb:G()}],ml:[{ml:G()}],"space-x":[{"space-x":E()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":E()}],"space-y-reverse":["space-y-reverse"],size:[{size:ne()}],w:[{w:[h,"screen",...ne()]}],"min-w":[{"min-w":[h,"screen","none",...ne()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[c]},...ne()]}],h:[{h:["screen","lh",...ne()]}],"min-h":[{"min-h":["screen","lh","none",...ne()]}],"max-h":[{"max-h":["screen","lh",...ne()]}],"font-size":[{text:["base",n,ku,go]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Fe,L0]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",O0,Be]}],"font-family":[{font:[SP,Be,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,Fe,Be]}],"line-clamp":[{"line-clamp":[ht,"none",Fe,L0]}],leading:[{leading:[l,...E()]}],"list-image":[{"list-image":["none",Fe,Be]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Fe,Be]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:X()}],"text-color":[{text:X()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...je(),"wavy"]}],"text-decoration-thickness":[{decoration:[ht,"from-font","auto",Fe,go]}],"text-decoration-color":[{decoration:X()}],"underline-offset":[{"underline-offset":[ht,"auto",Fe,Be]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Fe,Be]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Fe,Be]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Ae()}],"bg-repeat":[{bg:De()}],"bg-size":[{bg:H()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ma,Fe,Be],radial:["",Fe,Be],conic:[ma,Fe,Be]},CP,EP]}],"bg-color":[{bg:X()}],"gradient-from-pos":[{from:ee()}],"gradient-via-pos":[{via:ee()}],"gradient-to-pos":[{to:ee()}],"gradient-from":[{from:X()}],"gradient-via":[{via:X()}],"gradient-to":[{to:X()}],rounded:[{rounded:ae()}],"rounded-s":[{"rounded-s":ae()}],"rounded-e":[{"rounded-e":ae()}],"rounded-t":[{"rounded-t":ae()}],"rounded-r":[{"rounded-r":ae()}],"rounded-b":[{"rounded-b":ae()}],"rounded-l":[{"rounded-l":ae()}],"rounded-ss":[{"rounded-ss":ae()}],"rounded-se":[{"rounded-se":ae()}],"rounded-ee":[{"rounded-ee":ae()}],"rounded-es":[{"rounded-es":ae()}],"rounded-tl":[{"rounded-tl":ae()}],"rounded-tr":[{"rounded-tr":ae()}],"rounded-br":[{"rounded-br":ae()}],"rounded-bl":[{"rounded-bl":ae()}],"border-w":[{border:de()}],"border-w-x":[{"border-x":de()}],"border-w-y":[{"border-y":de()}],"border-w-s":[{"border-s":de()}],"border-w-e":[{"border-e":de()}],"border-w-t":[{"border-t":de()}],"border-w-r":[{"border-r":de()}],"border-w-b":[{"border-b":de()}],"border-w-l":[{"border-l":de()}],"divide-x":[{"divide-x":de()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":de()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...je(),"hidden","none"]}],"divide-style":[{divide:[...je(),"hidden","none"]}],"border-color":[{border:X()}],"border-color-x":[{"border-x":X()}],"border-color-y":[{"border-y":X()}],"border-color-s":[{"border-s":X()}],"border-color-e":[{"border-e":X()}],"border-color-t":[{"border-t":X()}],"border-color-r":[{"border-r":X()}],"border-color-b":[{"border-b":X()}],"border-color-l":[{"border-l":X()}],"divide-color":[{divide:X()}],"outline-style":[{outline:[...je(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ht,Fe,Be]}],"outline-w":[{outline:["",ht,ku,go]}],"outline-color":[{outline:X()}],shadow:[{shadow:["","none",v,df,uf]}],"shadow-color":[{shadow:X()}],"inset-shadow":[{"inset-shadow":["none",b,df,uf]}],"inset-shadow-color":[{"inset-shadow":X()}],"ring-w":[{ring:de()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:X()}],"ring-offset-w":[{"ring-offset":[ht,go]}],"ring-offset-color":[{"ring-offset":X()}],"inset-ring-w":[{"inset-ring":de()}],"inset-ring-color":[{"inset-ring":X()}],"text-shadow":[{"text-shadow":["none",_,df,uf]}],"text-shadow-color":[{"text-shadow":X()}],opacity:[{opacity:[ht,Fe,Be]}],"mix-blend":[{"mix-blend":[..._e(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":_e()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ht]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ce()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ce()}],"mask-image-linear-from-color":[{"mask-linear-from":X()}],"mask-image-linear-to-color":[{"mask-linear-to":X()}],"mask-image-t-from-pos":[{"mask-t-from":Ce()}],"mask-image-t-to-pos":[{"mask-t-to":Ce()}],"mask-image-t-from-color":[{"mask-t-from":X()}],"mask-image-t-to-color":[{"mask-t-to":X()}],"mask-image-r-from-pos":[{"mask-r-from":Ce()}],"mask-image-r-to-pos":[{"mask-r-to":Ce()}],"mask-image-r-from-color":[{"mask-r-from":X()}],"mask-image-r-to-color":[{"mask-r-to":X()}],"mask-image-b-from-pos":[{"mask-b-from":Ce()}],"mask-image-b-to-pos":[{"mask-b-to":Ce()}],"mask-image-b-from-color":[{"mask-b-from":X()}],"mask-image-b-to-color":[{"mask-b-to":X()}],"mask-image-l-from-pos":[{"mask-l-from":Ce()}],"mask-image-l-to-pos":[{"mask-l-to":Ce()}],"mask-image-l-from-color":[{"mask-l-from":X()}],"mask-image-l-to-color":[{"mask-l-to":X()}],"mask-image-x-from-pos":[{"mask-x-from":Ce()}],"mask-image-x-to-pos":[{"mask-x-to":Ce()}],"mask-image-x-from-color":[{"mask-x-from":X()}],"mask-image-x-to-color":[{"mask-x-to":X()}],"mask-image-y-from-pos":[{"mask-y-from":Ce()}],"mask-image-y-to-pos":[{"mask-y-to":Ce()}],"mask-image-y-from-color":[{"mask-y-from":X()}],"mask-image-y-to-color":[{"mask-y-to":X()}],"mask-image-radial":[{"mask-radial":[Fe,Be]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ce()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ce()}],"mask-image-radial-from-color":[{"mask-radial-from":X()}],"mask-image-radial-to-color":[{"mask-radial-to":X()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":V()}],"mask-image-conic-pos":[{"mask-conic":[ht]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ce()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ce()}],"mask-image-conic-from-color":[{"mask-conic-from":X()}],"mask-image-conic-to-color":[{"mask-conic-to":X()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Ae()}],"mask-repeat":[{mask:De()}],"mask-size":[{mask:H()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Fe,Be]}],filter:[{filter:["","none",Fe,Be]}],blur:[{blur:He()}],brightness:[{brightness:[ht,Fe,Be]}],contrast:[{contrast:[ht,Fe,Be]}],"drop-shadow":[{"drop-shadow":["","none",C,df,uf]}],"drop-shadow-color":[{"drop-shadow":X()}],grayscale:[{grayscale:["",ht,Fe,Be]}],"hue-rotate":[{"hue-rotate":[ht,Fe,Be]}],invert:[{invert:["",ht,Fe,Be]}],saturate:[{saturate:[ht,Fe,Be]}],sepia:[{sepia:["",ht,Fe,Be]}],"backdrop-filter":[{"backdrop-filter":["","none",Fe,Be]}],"backdrop-blur":[{"backdrop-blur":He()}],"backdrop-brightness":[{"backdrop-brightness":[ht,Fe,Be]}],"backdrop-contrast":[{"backdrop-contrast":[ht,Fe,Be]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ht,Fe,Be]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ht,Fe,Be]}],"backdrop-invert":[{"backdrop-invert":["",ht,Fe,Be]}],"backdrop-opacity":[{"backdrop-opacity":[ht,Fe,Be]}],"backdrop-saturate":[{"backdrop-saturate":[ht,Fe,Be]}],"backdrop-sepia":[{"backdrop-sepia":["",ht,Fe,Be]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":E()}],"border-spacing-x":[{"border-spacing-x":E()}],"border-spacing-y":[{"border-spacing-y":E()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Fe,Be]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ht,"initial",Fe,Be]}],ease:[{ease:["linear","initial",B,Fe,Be]}],delay:[{delay:[ht,Fe,Be]}],animate:[{animate:["none",$,Fe,Be]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[j,Fe,Be]}],"perspective-origin":[{"perspective-origin":z()}],rotate:[{rotate:Ge()}],"rotate-x":[{"rotate-x":Ge()}],"rotate-y":[{"rotate-y":Ge()}],"rotate-z":[{"rotate-z":Ge()}],scale:[{scale:ve()}],"scale-x":[{"scale-x":ve()}],"scale-y":[{"scale-y":ve()}],"scale-z":[{"scale-z":ve()}],"scale-3d":["scale-3d"],skew:[{skew:he()}],"skew-x":[{"skew-x":he()}],"skew-y":[{"skew-y":he()}],transform:[{transform:[Fe,Be,"","none","gpu","cpu"]}],"transform-origin":[{origin:z()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:$e()}],"translate-x":[{"translate-x":$e()}],"translate-y":[{"translate-y":$e()}],"translate-z":[{"translate-z":$e()}],"translate-none":["translate-none"],accent:[{accent:X()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:X()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Fe,Be]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Fe,Be]}],fill:[{fill:["none",...X()]}],"stroke-w":[{stroke:[ht,ku,go,L0]}],stroke:[{stroke:["none",...X()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},RP=cP(NP);function Ct(...t){return RP(FM(t))}function rp(t){if(!t)return"";const e=t.toDate?t.toDate():new Date(t),r=new Date-e;return r<6e4?"Just now":r<36e5?`${Math.floor(r/6e4)}m ago`:r<864e5?`${Math.floor(r/36e5)}h ago`:r<6048e5?`${Math.floor(r/864e5)}d ago`:e.toLocaleDateString()}function PC(t){switch(t){case"admin":return"bg-admin/20 text-admin border-admin/30";case"moderator":return"bg-moderator/20 text-moderator border-moderator/30";default:return"bg-member/20 text-member border-member/30"}}const dn=({label:t,error:e,className:n,containerClassName:r,...a})=>d.jsxs("div",{className:Ct("flex flex-col gap-1.5",r),children:[t&&d.jsx("label",{className:"text-sm font-medium text-dark-text",children:t}),d.jsx("input",{className:Ct("bg-dark-input text-dark-text px-4 py-2.5 rounded-md","border border-transparent focus:border-brand-primary","outline-none transition-colors duration-200","placeholder:text-dark-muted",e&&"border-admin",n),...a}),e&&d.jsx("span",{className:"text-sm text-admin",children:e})]}),et=({children:t,variant:e="primary",size:n="md",className:r,disabled:a,...l})=>{const c="font-medium rounded-md transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",h={primary:"bg-brand-primary hover:bg-brand-hover text-white",secondary:"bg-dark-input hover:bg-dark-hover text-dark-text",danger:"bg-admin hover:bg-admin/80 text-white",ghost:"hover:bg-dark-hover text-dark-text"},m={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};return d.jsx("button",{className:Ct(c,h[e],m[n],r),disabled:a,...l,children:t})},jP=({isOpen:t,onClose:e})=>{const[n,r]=I.useState(""),[a,l]=I.useState(!1),[c,h]=I.useState(!1),{success:m,error:g}=fs(),v=async b=>{b.preventDefault(),l(!0);try{await E4(zl,n),h(!0),m("Password reset email sent! Check your inbox."),setTimeout(()=>{e(),h(!1),r("")},3e3)}catch(_){console.error("Password reset error:",_),_.code==="auth/user-not-found"?g("No account found with this email address."):_.code==="auth/invalid-email"?g("Invalid email address."):g("Failed to send reset email. Please try again.")}finally{l(!1)}};return t?d.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-dark-sidebar rounded-lg shadow-2xl w-full max-w-md p-6 relative",children:[d.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-dark-muted hover:text-dark-text transition-colors",children:d.jsx(On,{size:24})}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-dark-text mb-2",children:"Reset Password"}),d.jsx("p",{className:"text-dark-muted text-sm",children:"Enter your email address and we'll send you a link to reset your password."})]}),c?d.jsx("div",{className:"bg-green-500/10 border border-green-500/30 text-green-400 px-4 py-3 rounded-md text-sm text-center",children:" Reset email sent successfully! Check your inbox."}):d.jsxs("form",{onSubmit:v,className:"space-y-4",children:[d.jsx(dn,{label:"Email Address",type:"email",placeholder:"your@email.com",value:n,onChange:b=>r(b.target.value),required:!0,autoFocus:!0}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx(et,{type:"button",variant:"secondary",onClick:e,className:"flex-1",children:"Cancel"}),d.jsx(et,{type:"submit",variant:"primary",className:"flex-1",disabled:a||!n,children:a?"Sending...":"Send Reset Link"})]})]})]})}):null},IP=({onSwitchToRegister:t,onSwitchToReset:e})=>{const{login:n}=nr(),[r,a]=I.useState({email:"",password:""}),[l,c]=I.useState(""),[h,m]=I.useState(!1),[g,v]=I.useState(!1),b=async _=>{_.preventDefault(),c(""),m(!0);try{await n(r.email,r.password)}catch(C){c(C.message||"Failed to login")}finally{m(!1)}};return d.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-dark-bg p-4",children:[d.jsxs("div",{className:"w-full max-w-md bg-dark-sidebar rounded-lg shadow-2xl p-8",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("h1",{className:"text-3xl font-bold text-dark-text mb-2",children:"Welcome Back!"}),d.jsx("p",{className:"text-dark-muted",children:"Login to Lumo"})]}),d.jsxs("form",{onSubmit:b,className:"space-y-4",children:[d.jsx(dn,{label:"Email",type:"email",placeholder:"Enter your email",value:r.email,onChange:_=>a({...r,email:_.target.value}),required:!0}),d.jsxs("div",{children:[d.jsx(dn,{label:"Password",type:"password",placeholder:"Enter your password",value:r.password,onChange:_=>a({...r,password:_.target.value}),required:!0}),d.jsx("div",{className:"mt-2 text-right",children:d.jsx("button",{type:"button",onClick:()=>v(!0),className:"text-sm text-brand-primary hover:underline",children:"Forgot Password?"})})]}),l&&d.jsx("div",{className:"bg-admin/10 border border-admin/30 text-admin px-4 py-3 rounded-md text-sm",children:l}),d.jsx(et,{type:"submit",variant:"primary",className:"w-full",disabled:h,children:h?"Logging in...":"Login"})]}),d.jsx("div",{className:"mt-6 text-center",children:d.jsxs("div",{className:"text-dark-muted text-sm",children:["Don't have an account?"," ",d.jsx("button",{onClick:t,className:"text-brand-primary hover:underline",children:"Register"})]})})]}),d.jsx(jP,{isOpen:g,onClose:()=>v(!1)})]})},DP=({onSwitchToLogin:t})=>{const{register:e}=nr(),[n,r]=I.useState({displayName:"",email:"",password:"",confirmPassword:""}),[a,l]=I.useState(""),[c,h]=I.useState(""),[m,g]=I.useState(!1),[v,b]=I.useState([]);I.useEffect(()=>{(async()=>{try{const N=dt(we,"users"),j=await jo(N),k=[];j.forEach(B=>{const $=B.data().displayName;$&&k.push($.toLowerCase())}),b(k)}catch(N){console.error("Error loading usernames:",N)}})()},[]),I.useEffect(()=>{const C=n.displayName;if(C){if(C.length<3){h("Username must be at least 3 characters");return}if(!/^[a-zA-Z0-9-_]+$/.test(C)){h("Only letters, numbers, hyphens (-) and underscores (_) allowed");return}const N=C.toLowerCase();v.includes(N)?h("This username is already taken"):h("")}else h("")},[n.displayName,v]);const _=async C=>{if(C.preventDefault(),l(""),c){l(c);return}if(n.password!==n.confirmPassword){l("Passwords do not match");return}if(n.password.length<6){l("Password must be at least 6 characters");return}g(!0);try{await e(n.email,n.password,n.displayName)}catch(N){l(N.message||"Failed to register")}finally{g(!1)}};return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-bg p-4",children:d.jsxs("div",{className:"w-full max-w-md bg-dark-sidebar rounded-lg shadow-2xl p-8",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("h1",{className:"text-3xl font-bold text-dark-text mb-2",children:"Create Account"}),d.jsx("p",{className:"text-dark-muted",children:"Join Lumo"})]}),d.jsxs("form",{onSubmit:_,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx(dn,{label:"Display Name",type:"text",placeholder:"Enter your display name",value:n.displayName,onChange:C=>r({...n,displayName:C.target.value}),required:!0}),c&&d.jsx("p",{className:"text-xs text-admin mt-1",children:c}),n.displayName&&!c&&d.jsx("p",{className:"text-xs text-green-500 mt-1",children:" Username available"})]}),d.jsx(dn,{label:"Email",type:"email",placeholder:"Enter your email",value:n.email,onChange:C=>r({...n,email:C.target.value}),required:!0}),d.jsx(dn,{label:"Password",type:"password",placeholder:"Enter your password",value:n.password,onChange:C=>r({...n,password:C.target.value}),required:!0}),d.jsx(dn,{label:"Confirm Password",type:"password",placeholder:"Confirm your password",value:n.confirmPassword,onChange:C=>r({...n,confirmPassword:C.target.value}),required:!0}),a&&d.jsx("div",{className:"bg-admin/10 border border-admin/30 text-admin px-4 py-3 rounded-md text-sm",children:a}),d.jsx(et,{type:"submit",variant:"primary",className:"w-full",disabled:m||!!c,children:m?"Creating account...":"Register"})]}),d.jsx("div",{className:"mt-6 text-center",children:d.jsxs("div",{className:"text-dark-muted text-sm",children:["Already have an account?"," ",d.jsx("button",{onClick:t,className:"text-brand-primary hover:underline",children:"Login"})]})})]})})},MP=({onSwitchToLogin:t})=>{const{resetPassword:e}=nr(),[n,r]=I.useState(""),[a,l]=I.useState(""),[c,h]=I.useState(!1),[m,g]=I.useState(!1),v=async b=>{b.preventDefault(),l(""),h(!1),g(!0);try{await e(n),h(!0)}catch(_){l(_.message||"Failed to send reset email")}finally{g(!1)}};return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-bg p-4",children:d.jsxs("div",{className:"w-full max-w-md bg-dark-sidebar rounded-lg shadow-2xl p-8",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("h1",{className:"text-3xl font-bold text-dark-text mb-2",children:"Reset Password"}),d.jsx("p",{className:"text-dark-muted",children:"Enter your email to receive a reset link"})]}),d.jsxs("form",{onSubmit:v,className:"space-y-4",children:[d.jsx(dn,{label:"Email",type:"email",placeholder:"Enter your email",value:n,onChange:b=>r(b.target.value),required:!0}),a&&d.jsx("div",{className:"bg-admin/10 border border-admin/30 text-admin px-4 py-3 rounded-md text-sm",children:a}),c&&d.jsx("div",{className:"bg-green-500/10 border border-green-500/30 text-green-500 px-4 py-3 rounded-md text-sm",children:"Password reset email sent! Check your inbox."}),d.jsx(et,{type:"submit",variant:"primary",className:"w-full",disabled:m,children:m?"Sending...":"Send Reset Link"})]}),d.jsx("div",{className:"mt-6 text-center",children:d.jsx("button",{onClick:t,className:"text-brand-primary hover:underline text-sm",children:"Back to Login"})})]})})},PP=({onSwipeLeft:t,onSwipeRight:e,minSwipeDistance:n=50})=>{const r=I.useRef(null),a=I.useRef(null);return{onTouchStart:m=>{a.current=null,r.current=m.targetTouches[0].clientX},onTouchMove:m=>{a.current=m.targetTouches[0].clientX},onTouchEnd:()=>{if(!r.current||!a.current)return;const m=r.current-a.current,g=m>n,v=m<-n;g&&t&&t(),v&&e&&e()}}};function OP(t){return Pe({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111.1 8 0 119.1 0 256s111.1 248 248 248 248-111.1 248-248S384.9 8 248 8zm100.7 364.9c-4.2 0-6.8-1.3-10.7-3.6-62.4-37.6-135-39.2-206.7-24.5-3.9 1-9 2.6-11.9 2.6-9.7 0-15.8-7.7-15.8-15.8 0-10.3 6.1-15.2 13.6-16.8 81.9-18.1 165.6-16.5 237 26.2 6.1 3.9 9.7 7.4 9.7 16.5s-7.1 15.4-15.2 15.4zm26.9-65.6c-5.2 0-8.7-2.3-12.3-4.2-62.5-37-155.7-51.9-238.6-29.4-4.8 1.3-7.4 2.6-11.9 2.6-10.7 0-19.4-8.7-19.4-19.4s5.2-17.8 15.5-20.7c27.8-7.8 56.2-13.6 97.8-13.6 64.9 0 127.6 16.1 177 45.5 8.1 4.8 11.3 11 11.3 19.7-.1 10.8-8.5 19.5-19.4 19.5zm31-76.2c-5.2 0-8.4-1.3-12.9-3.9-71.2-42.5-198.5-52.7-280.9-29.7-3.6 1-8.1 2.6-12.9 2.6-13.2 0-23.3-10.3-23.3-23.6 0-13.6 8.4-21.3 17.4-23.9 35.2-10.3 74.6-15.2 117.5-15.2 73 0 149.5 15.2 205.4 47.8 7.8 4.5 12.9 10.7 12.9 22.6 0 13.6-11 23.3-23.2 23.3z"},child:[]}]})(t)}function dE(t){return Pe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(t)}function LP(t){return Pe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(t)}function sp(t){return Pe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M440.667 182.109l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l14.623-81.891C377.123 38.754 371.468 32 363.997 32h-40.632a12 12 0 0 0-11.813 9.891L296.175 128H197.54l14.623-81.891C213.477 38.754 207.822 32 200.35 32h-40.632a12 12 0 0 0-11.813 9.891L132.528 128H53.432a12 12 0 0 0-11.813 9.891l-7.143 40C33.163 185.246 38.818 192 46.289 192h74.81L98.242 320H19.146a12 12 0 0 0-11.813 9.891l-7.143 40C-1.123 377.246 4.532 384 12.003 384h74.81L72.19 465.891C70.877 473.246 76.532 480 84.003 480h40.632a12 12 0 0 0 11.813-9.891L151.826 384h98.634l-14.623 81.891C234.523 473.246 240.178 480 247.65 480h40.632a12 12 0 0 0 11.813-9.891L315.472 384h79.096a12 12 0 0 0 11.813-9.891l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l22.857-128h79.096a12 12 0 0 0 11.813-9.891zM261.889 320h-98.634l22.857-128h98.634l-22.857 128z"},child:[]}]})(t)}function hE(t){return Pe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(t)}const $s=({isOpen:t,onClose:e,title:n,children:r,size:a="md",showCloseButton:l=!0})=>{if(I.useEffect(()=>{const h=m=>{m.key==="Escape"&&t&&e()};return t?(document.body.style.overflow="hidden",document.addEventListener("keydown",h)):document.body.style.overflow="unset",()=>{document.body.style.overflow="unset",document.removeEventListener("keydown",h)}},[t,e]),!t)return null;const c={sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl"};return d.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center",children:[d.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:e}),d.jsxs("div",{className:Ct("relative bg-dark-sidebar rounded-lg shadow-2xl","w-full mx-4 max-h-[90vh] overflow-y-auto",c[a]),children:[(n||l)&&d.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-dark-hover",children:[d.jsx("h2",{className:"text-xl font-semibold text-dark-text",children:n}),l&&d.jsx("button",{onClick:e,className:"text-dark-muted hover:text-dark-text transition-colors",children:d.jsx(On,{size:24})})]}),d.jsx("div",{className:"p-6",children:r})]})]})},VP={premium:{id:"premium",label:"Premium Member",description:"Premium Member",icon:Io,color:"#F47FFF"},admin:{id:"admin",label:"Admin",description:"Server Administrator",icon:yC,color:"#f23f42"},verified:{id:"verified",label:"Verified",description:"Verified Member",icon:aM,color:"#3ba55c"},developer:{id:"developer",label:"Developer",description:"App Developer",icon:tM,color:"#5865F2"}};class UP{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const n of this._parts)e.push(n);return zP(e).buffer}}function zP(t){let e=0;for(const a of t)e+=a.byteLength;const n=new Uint8Array(e);let r=0;for(const a of t){const l=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);n.set(l,r),r+=a.byteLength}return n}function OC(t){return new BP(t).unpack()}function LC(t){const e=new FP,n=e.pack(t);return n instanceof Promise?n.then(()=>e.getBuffer()):e.getBuffer()}class BP{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let n;if((n=e^160)<=15)return this.unpack_raw(n);if((n=e^176)<=15)return this.unpack_string(n);if((n=e^144)<=15)return this.unpack_array(n);if((n=e^128)<=15)return this.unpack_map(n);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),n=(e[0]&255)*256+(e[1]&255);return this.index+=2,n}unpack_uint32(){const e=this.read(4),n=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,n}unpack_uint64(){const e=this.read(8),n=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,n}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,n}unpack_string(e){const n=this.read(e);let r=0,a="",l,c;for(;r<e;)l=n[r],l<160?(c=l,r++):(l^192)<32?(c=(l&31)<<6|n[r+1]&63,r+=2):(l^224)<16?(c=(l&15)<<12|(n[r+1]&63)<<6|n[r+2]&63,r+=3):(c=(l&7)<<18|(n[r+1]&63)<<12|(n[r+2]&63)<<6|n[r+3]&63,r+=4),a+=String.fromCodePoint(c);return this.index+=e,a}unpack_array(e){const n=new Array(e);for(let r=0;r<e;r++)n[r]=this.unpack();return n}unpack_map(e){const n={};for(let r=0;r<e;r++){const a=this.unpack();n[a]=this.unpack()}return n}unpack_float(){const e=this.unpack_uint32(),n=e>>31,r=(e>>23&255)-127,a=e&8388607|8388608;return(n===0?1:-1)*a*2**(r-23)}unpack_double(){const e=this.unpack_uint32(),n=this.unpack_uint32(),r=e>>31,a=(e>>20&2047)-1023,c=(e&1048575|1048576)*2**(a-20)+n*2**(a-52);return(r===0?1:-1)*c}read(e){const n=this.index;if(n+e<=this.length)return this.dataView.subarray(n,n+e);throw new Error("BinaryPackFailure: read index out of range")}}class FP{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const n=e.constructor;if(e instanceof Array){const r=this.pack_array(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const r=e;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const r=this.pack_object(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const n=e.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const n=this._textEncoder.encode(e),r=n.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(e){const n=e.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const r=a=>{if(a<n){const l=this.pack(e[a]);return l instanceof Promise?l.then(()=>r(a+1)):r(a+1)}};return r(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let n=0;e<0&&(n=1,e=-e);const r=Math.floor(Math.log(e)/Math.LN2),a=e/2**r-1,l=Math.floor(a*2**52),c=2**32,h=n<<31|r+1023<<20|l/c&1048575,m=l%c;this._bufferBuilder.append(203),this.pack_int32(h),this.pack_int32(m)}pack_object(e){const n=Object.keys(e),r=n.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const a=l=>{if(l<n.length){const c=n[l];if(e.hasOwnProperty(c)){this.pack(c);const h=this.pack(e[c]);if(h instanceof Promise)return h.then(()=>a(l+1))}return a(l+1)}};return a(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const n=e&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(e){const n=e/4294967296,r=e%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const n=Math.floor(e/4294967296),r=e%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new UP,this._textEncoder=new TextEncoder}}let VC=!0,UC=!0;function Uu(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseFloat(r[n],10)}function Ho(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,a=r.addEventListener;r.addEventListener=function(c,h){if(c!==e)return a.apply(this,arguments);const m=g=>{const v=n(g);v&&(h.handleEvent?h.handleEvent(v):h(v))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(h,m),a.apply(this,[c,m])};const l=r.removeEventListener;r.removeEventListener=function(c,h){if(c!==e||!this._eventMap||!this._eventMap[e])return l.apply(this,arguments);if(!this._eventMap[e].has(h))return l.apply(this,arguments);const m=this._eventMap[e].get(h);return this._eventMap[e].delete(h),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,l.apply(this,[c,m])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(c){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),c&&this.addEventListener(e,this["_on"+e]=c)},enumerable:!0,configurable:!0})}function HP(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(VC=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function $P(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(UC=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function zC(){if(typeof window=="object"){if(VC)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function fb(t,e){UC&&console.warn(t+" is deprecated, please use "+e+" instead.")}function qP(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(a=>a.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=parseInt(Uu(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(Uu(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(Uu(n.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=Uu(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function fE(t){return Object.prototype.toString.call(t)==="[object Object]"}function BC(t){return fE(t)?Object.keys(t).reduce(function(e,n){const r=fE(t[n]),a=r?BC(t[n]):t[n],l=r&&!Object.keys(a).length;return a===void 0||l?e:Object.assign(e,{[n]:a})},{}):t}function My(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?My(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(a=>{My(t,t.get(a),n)})}))}function mE(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",a=new Map;if(e===null)return a;const l=[];return t.forEach(c=>{c.type==="track"&&c.trackIdentifier===e.id&&l.push(c)}),l.forEach(c=>{t.forEach(h=>{h.type===r&&h.trackId===c.id&&My(t,h,a)})}),a}const pE=zC;function FC(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(h){if(typeof h!="object"||h.mandatory||h.optional)return h;const m={};return Object.keys(h).forEach(g=>{if(g==="require"||g==="advanced"||g==="mediaSource")return;const v=typeof h[g]=="object"?h[g]:{ideal:h[g]};v.exact!==void 0&&typeof v.exact=="number"&&(v.min=v.max=v.exact);const b=function(_,C){return _?_+C.charAt(0).toUpperCase()+C.slice(1):C==="deviceId"?"sourceId":C};if(v.ideal!==void 0){m.optional=m.optional||[];let _={};typeof v.ideal=="number"?(_[b("min",g)]=v.ideal,m.optional.push(_),_={},_[b("max",g)]=v.ideal,m.optional.push(_)):(_[b("",g)]=v.ideal,m.optional.push(_))}v.exact!==void 0&&typeof v.exact!="number"?(m.mandatory=m.mandatory||{},m.mandatory[b("",g)]=v.exact):["min","max"].forEach(_=>{v[_]!==void 0&&(m.mandatory=m.mandatory||{},m.mandatory[b(_,g)]=v[_])})}),h.advanced&&(m.optional=(m.optional||[]).concat(h.advanced)),m},a=function(h,m){if(e.version>=61)return m(h);if(h=JSON.parse(JSON.stringify(h)),h&&typeof h.audio=="object"){const g=function(v,b,_){b in v&&!(_ in v)&&(v[_]=v[b],delete v[b])};h=JSON.parse(JSON.stringify(h)),g(h.audio,"autoGainControl","googAutoGainControl"),g(h.audio,"noiseSuppression","googNoiseSuppression"),h.audio=r(h.audio)}if(h&&typeof h.video=="object"){let g=h.video.facingMode;g=g&&(typeof g=="object"?g:{ideal:g});const v=e.version<66;if(g&&(g.exact==="user"||g.exact==="environment"||g.ideal==="user"||g.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!v)){delete h.video.facingMode;let b;if(g.exact==="environment"||g.ideal==="environment"?b=["back","rear"]:(g.exact==="user"||g.ideal==="user")&&(b=["front"]),b)return n.mediaDevices.enumerateDevices().then(_=>{_=_.filter(N=>N.kind==="videoinput");let C=_.find(N=>b.some(j=>N.label.toLowerCase().includes(j)));return!C&&_.length&&b.includes("back")&&(C=_[_.length-1]),C&&(h.video.deviceId=g.exact?{exact:C.deviceId}:{ideal:C.deviceId}),h.video=r(h.video),pE("chrome: "+JSON.stringify(h)),m(h)})}h.video=r(h.video)}return pE("chrome: "+JSON.stringify(h)),m(h)},l=function(h){return e.version>=64?h:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[h.name]||h.name,message:h.message,constraint:h.constraint||h.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},c=function(h,m,g){a(h,v=>{n.webkitGetUserMedia(v,m,b=>{g&&g(l(b))})})};if(n.getUserMedia=c.bind(n),n.mediaDevices.getUserMedia){const h=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(m){return a(m,g=>h(g).then(v=>{if(g.audio&&!v.getAudioTracks().length||g.video&&!v.getVideoTracks().length)throw v.getTracks().forEach(b=>{b.stop()}),new DOMException("","NotFoundError");return v},v=>Promise.reject(l(v))))}}}function HC(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function $C(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",a=>{let l;t.RTCPeerConnection.prototype.getReceivers?l=this.getReceivers().find(h=>h.track&&h.track.id===a.track.id):l={track:a.track};const c=new Event("track");c.track=a.track,c.receiver=l,c.transceiver={receiver:l},c.streams=[r.stream],this.dispatchEvent(c)}),r.stream.getTracks().forEach(a=>{let l;t.RTCPeerConnection.prototype.getReceivers?l=this.getReceivers().find(h=>h.track&&h.track.id===a.id):l={track:a};const c=new Event("track");c.track=a,c.receiver=l,c.transceiver={receiver:l},c.streams=[r.stream],this.dispatchEvent(c)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Ho(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function qC(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(a,l){return{track:l,get dtmf(){return this._dtmf===void 0&&(l.kind==="audio"?this._dtmf=a.createDTMFSender(l):this._dtmf=null),this._dtmf},_pc:a}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const a=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(h,m){let g=a.apply(this,arguments);return g||(g=e(this,h),this._senders.push(g)),g};const l=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(h){l.apply(this,arguments);const m=this._senders.indexOf(h);m!==-1&&this._senders.splice(m,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(l){this._senders=this._senders||[],n.apply(this,[l]),l.getTracks().forEach(c=>{this._senders.push(e(this,c))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(l){this._senders=this._senders||[],r.apply(this,[l]),l.getTracks().forEach(c=>{const h=this._senders.find(m=>m.track===c);h&&this._senders.splice(this._senders.indexOf(h),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(a=>a._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function GC(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const l=n.apply(this,[]);return l.forEach(c=>c._pc=this),l});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const l=r.apply(this,arguments);return l._pc=this,l}),t.RTCRtpSender.prototype.getStats=function(){const l=this;return this._pc.getStats().then(c=>mE(c,l.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const a=n.apply(this,[]);return a.forEach(l=>l._pc=this),a}),Ho(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const a=this;return this._pc.getStats().then(l=>mE(l,a.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let a,l,c;return this.getSenders().forEach(h=>{h.track===r&&(a?c=!0:a=h)}),this.getReceivers().forEach(h=>(h.track===r&&(l?c=!0:l=h),h.track===r)),c||a&&l?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):a?a.getStats():l?l.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function YC(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(c=>this._shimmedLocalStreams[c][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(c,h){if(!h)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const m=e.apply(this,arguments);return this._shimmedLocalStreams[h.id]?this._shimmedLocalStreams[h.id].indexOf(m)===-1&&this._shimmedLocalStreams[h.id].push(m):this._shimmedLocalStreams[h.id]=[h,m],m};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(c){this._shimmedLocalStreams=this._shimmedLocalStreams||{},c.getTracks().forEach(g=>{if(this.getSenders().find(b=>b.track===g))throw new DOMException("Track already exists.","InvalidAccessError")});const h=this.getSenders();n.apply(this,arguments);const m=this.getSenders().filter(g=>h.indexOf(g)===-1);this._shimmedLocalStreams[c.id]=[c].concat(m)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[c.id],r.apply(this,arguments)};const a=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},c&&Object.keys(this._shimmedLocalStreams).forEach(h=>{const m=this._shimmedLocalStreams[h].indexOf(c);m!==-1&&this._shimmedLocalStreams[h].splice(m,1),this._shimmedLocalStreams[h].length===1&&delete this._shimmedLocalStreams[h]}),a.apply(this,arguments)}}function KC(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return YC(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const v=n.apply(this);return this._reverseStreams=this._reverseStreams||{},v.map(b=>this._reverseStreams[b.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(v){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},v.getTracks().forEach(b=>{if(this.getSenders().find(C=>C.track===b))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[v.id]){const b=new t.MediaStream(v.getTracks());this._streams[v.id]=b,this._reverseStreams[b.id]=v,v=b}r.apply(this,[v])};const a=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(v){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},a.apply(this,[this._streams[v.id]||v]),delete this._reverseStreams[this._streams[v.id]?this._streams[v.id].id:v.id],delete this._streams[v.id]},t.RTCPeerConnection.prototype.addTrack=function(v,b){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const _=[].slice.call(arguments,1);if(_.length!==1||!_[0].getTracks().find(j=>j===v))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(j=>j.track===v))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const N=this._streams[b.id];if(N)N.addTrack(v),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const j=new t.MediaStream([v]);this._streams[b.id]=j,this._reverseStreams[j.id]=b,this.addStream(j)}return this.getSenders().find(j=>j.track===v)};function l(g,v){let b=v.sdp;return Object.keys(g._reverseStreams||[]).forEach(_=>{const C=g._reverseStreams[_],N=g._streams[C.id];b=b.replace(new RegExp(N.id,"g"),C.id)}),new RTCSessionDescription({type:v.type,sdp:b})}function c(g,v){let b=v.sdp;return Object.keys(g._reverseStreams||[]).forEach(_=>{const C=g._reverseStreams[_],N=g._streams[C.id];b=b.replace(new RegExp(C.id,"g"),N.id)}),new RTCSessionDescription({type:v.type,sdp:b})}["createOffer","createAnswer"].forEach(function(g){const v=t.RTCPeerConnection.prototype[g],b={[g](){const _=arguments;return arguments.length&&typeof arguments[0]=="function"?v.apply(this,[N=>{const j=l(this,N);_[0].apply(null,[j])},N=>{_[1]&&_[1].apply(null,N)},arguments[2]]):v.apply(this,arguments).then(N=>l(this,N))}};t.RTCPeerConnection.prototype[g]=b[g]});const h=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?h.apply(this,arguments):(arguments[0]=c(this,arguments[0]),h.apply(this,arguments))};const m=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const g=m.get.apply(this);return g.type===""?g:l(this,g)}}),t.RTCPeerConnection.prototype.removeTrack=function(v){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!v._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(v._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let _;Object.keys(this._streams).forEach(C=>{this._streams[C].getTracks().find(j=>v.track===j)&&(_=this._streams[C])}),_&&(_.getTracks().length===1?this.removeStream(this._reverseStreams[_.id]):_.removeTrack(v.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Py(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],a={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=a[n]})}function QC(t,e){Ho(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const gE=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:QC,shimAddTrackRemoveTrack:KC,shimAddTrackRemoveTrackWithNative:YC,shimGetSendersWithDtmf:qC,shimGetUserMedia:FC,shimMediaStream:HC,shimOnTrack:$C,shimPeerConnection:Py,shimSenderReceiverGetStats:GC},Symbol.toStringTag,{value:"Module"}));function XC(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(a,l,c){fb("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(a).then(l,c)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const a=function(c,h,m){h in c&&!(m in c)&&(c[m]=c[h],delete c[h])},l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(c){return typeof c=="object"&&typeof c.audio=="object"&&(c=JSON.parse(JSON.stringify(c)),a(c.audio,"autoGainControl","mozAutoGainControl"),a(c.audio,"noiseSuppression","mozNoiseSuppression")),l(c)},r&&r.prototype.getSettings){const c=r.prototype.getSettings;r.prototype.getSettings=function(){const h=c.apply(this,arguments);return a(h,"mozAutoGainControl","autoGainControl"),a(h,"mozNoiseSuppression","noiseSuppression"),h}}if(r&&r.prototype.applyConstraints){const c=r.prototype.applyConstraints;r.prototype.applyConstraints=function(h){return this.kind==="audio"&&typeof h=="object"&&(h=JSON.parse(JSON.stringify(h)),a(h,"autoGainControl","mozAutoGainControl"),a(h,"noiseSuppression","mozNoiseSuppression")),c.apply(this,[h])}}}}function GP(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const a=new DOMException("getDisplayMedia without video constraints is undefined");return a.name="NotFoundError",a.code=8,Promise.reject(a)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function WC(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Oy(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(a){const l=t.RTCPeerConnection.prototype[a],c={[a](){return arguments[0]=new(a==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),l.apply(this,arguments)}};t.RTCPeerConnection.prototype[a]=c[a]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[l,c,h]=arguments;return r.apply(this,[l||null]).then(m=>{if(e.version<53&&!c)try{m.forEach(g=>{g.type=n[g.type]||g.type})}catch(g){if(g.name!=="TypeError")throw g;m.forEach((v,b)=>{m.set(b,Object.assign({},v,{type:n[v.type]||v.type}))})}return m}).then(c,h)}}function JC(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const a=e.apply(this,[]);return a.forEach(l=>l._pc=this),a});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const a=n.apply(this,arguments);return a._pc=this,a}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function ZC(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(a=>a._pc=this),r}),Ho(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function ek(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){fb("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function tk(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function nk(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const a=r.length>0;a&&r.forEach(c=>{if("rid"in c&&!/^[a-z0-9]{0,16}$/i.test(c.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in c&&!(parseFloat(c.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in c&&!(parseFloat(c.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const l=e.apply(this,arguments);if(a){const{sender:c}=l,h=c.getParameters();(!("encodings"in h)||h.encodings.length===1&&Object.keys(h.encodings[0]).length===0)&&(h.encodings=r,c.sendEncodings=r,this.setParametersPromises.push(c.setParameters(h).then(()=>{delete c.sendEncodings}).catch(()=>{delete c.sendEncodings})))}return l})}function rk(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function sk(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function ik(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const yE=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:nk,shimCreateAnswer:ik,shimCreateOffer:sk,shimGetDisplayMedia:GP,shimGetParameters:rk,shimGetUserMedia:XC,shimOnTrack:WC,shimPeerConnection:Oy,shimRTCDataChannel:tk,shimReceiverGetStats:ZC,shimRemoveStream:ek,shimSenderGetStats:JC},Symbol.toStringTag,{value:"Module"}));function ak(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(a=>e.call(this,a,r)),r.getVideoTracks().forEach(a=>e.call(this,a,r))},t.RTCPeerConnection.prototype.addTrack=function(r,...a){return a&&a.forEach(l=>{this._localStreams?this._localStreams.includes(l)||this._localStreams.push(l):this._localStreams=[l]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const a=n.getTracks();this.getSenders().forEach(l=>{a.includes(l.track)&&this.removeTrack(l)})})}}function ok(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(a=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(a))return;this._remoteStreams.push(a);const l=new Event("addstream");l.stream=a,this.dispatchEvent(l)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(a){a.streams.forEach(l=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(l)>=0)return;r._remoteStreams.push(l);const c=new Event("addstream");c.stream=l,r.dispatchEvent(c)})}),e.apply(r,arguments)}}}function lk(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,a=e.setLocalDescription,l=e.setRemoteDescription,c=e.addIceCandidate;e.createOffer=function(g,v){const b=arguments.length>=2?arguments[2]:arguments[0],_=n.apply(this,[b]);return v?(_.then(g,v),Promise.resolve()):_},e.createAnswer=function(g,v){const b=arguments.length>=2?arguments[2]:arguments[0],_=r.apply(this,[b]);return v?(_.then(g,v),Promise.resolve()):_};let h=function(m,g,v){const b=a.apply(this,[m]);return v?(b.then(g,v),Promise.resolve()):b};e.setLocalDescription=h,h=function(m,g,v){const b=l.apply(this,[m]);return v?(b.then(g,v),Promise.resolve()):b},e.setRemoteDescription=h,h=function(m,g,v){const b=c.apply(this,[m]);return v?(b.then(g,v),Promise.resolve()):b},e.addIceCandidate=h}function ck(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=a=>r(uk(a))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,a,l){e.mediaDevices.getUserMedia(r).then(a,l)}).bind(e))}function uk(t){return t&&t.video!==void 0?Object.assign({},t,{video:BC(t.video)}):t}function dk(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,a){if(r&&r.iceServers){const l=[];for(let c=0;c<r.iceServers.length;c++){let h=r.iceServers[c];h.urls===void 0&&h.url?(fb("RTCIceServer.url","RTCIceServer.urls"),h=JSON.parse(JSON.stringify(h)),h.urls=h.url,delete h.url,l.push(h)):l.push(r.iceServers[c])}r.iceServers=l}return new e(r,a)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function hk(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function fk(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const a=this.getTransceivers().find(c=>c.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):r.offerToReceiveAudio===!0&&!a&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const l=this.getTransceivers().find(c=>c.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&l?l.direction==="sendrecv"?l.setDirection?l.setDirection("sendonly"):l.direction="sendonly":l.direction==="recvonly"&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive"):r.offerToReceiveVideo===!0&&!l&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function mk(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const vE=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:mk,shimCallbacksAPI:lk,shimConstraints:uk,shimCreateOfferLegacy:fk,shimGetUserMedia:ck,shimLocalStreamsAPI:ak,shimRTCIceServerUrls:dk,shimRemoteStreamsAPI:ok,shimTrackEventTransceiver:hk},Symbol.toStringTag,{value:"Module"}));var V0={exports:{}},bE;function YP(){return bE||(bE=1,(function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(n){return n.split(`
m=`).map((a,l)=>(l>0?"m="+a:a).trim()+`\r
`)},e.getDescription=function(n){const r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){const r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(a=>a.indexOf(r)===0)},e.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const a={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let l=8;l<r.length;l+=2)switch(r[l]){case"raddr":a.relatedAddress=r[l+1];break;case"rport":a.relatedPort=parseInt(r[l+1],10);break;case"tcptype":a.tcpType=r[l+1];break;case"ufrag":a.ufrag=r[l+1],a.usernameFragment=r[l+1];break;default:a[r[l]]===void 0&&(a[r[l]]=r[l+1]);break}return a},e.writeCandidate=function(n){const r=[];r.push(n.foundation);const a=n.component;a==="rtp"?r.push(1):a==="rtcp"?r.push(2):r.push(a),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const l=n.type;return r.push("typ"),r.push(l),l!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let r=n.substring(9).split(" ");const a={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),a.name=r[0],a.clockRate=parseInt(r[1],10),a.channels=r.length===3?parseInt(r[2],10):1,a.numChannels=a.channels,a},e.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const a=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(a!==1?"/"+a:"")+`\r
`},e.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const r={};let a;const l=n.substring(n.indexOf(" ")+1).split(";");for(let c=0;c<l.length;c++)a=l[c].trim().split("="),r[a[0].trim()]=a[1];return r},e.writeFmtp=function(n){let r="",a=n.payloadType;if(n.preferredPayloadType!==void 0&&(a=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const l=[];Object.keys(n.parameters).forEach(c=>{n.parameters[c]!==void 0?l.push(c+"="+n.parameters[c]):l.push(c)}),r+="a=fmtp:"+a+" "+l.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){let r="",a=n.payloadType;return n.preferredPayloadType!==void 0&&(a=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(l=>{r+="a=rtcp-fb:"+a+" "+l.type+(l.parameter&&l.parameter.length?" "+l.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){const r=n.indexOf(" "),a={ssrc:parseInt(n.substring(7,r),10)},l=n.indexOf(":",r);return l>-1?(a.attribute=n.substring(r+1,l),a.value=n.substring(l+1)):a.attribute=n.substring(r+1),a},e.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(a=>parseInt(a,10))}},e.getMid=function(n){const r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:e.matchPrefix(n+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){let a="a=setup:"+r+`\r
`;return n.fingerprints.forEach(l=>{a+="a=fingerprint:"+l.algorithm+" "+l.value+`\r
`}),a},e.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){return e.matchPrefix(n+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,r){const a=e.matchPrefix(n+r,"a=ice-ufrag:")[0],l=e.matchPrefix(n+r,"a=ice-pwd:")[0];return a&&l?{usernameFragment:a.substring(12),password:l.substring(10)}:null},e.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},l=e.splitLines(n)[0].split(" ");r.profile=l[2];for(let h=3;h<l.length;h++){const m=l[h],g=e.matchPrefix(n,"a=rtpmap:"+m+" ")[0];if(g){const v=e.parseRtpMap(g),b=e.matchPrefix(n,"a=fmtp:"+m+" ");switch(v.parameters=b.length?e.parseFmtp(b[0]):{},v.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+m+" ").map(e.parseRtcpFb),r.codecs.push(v),v.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(v.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(h=>{r.headerExtensions.push(e.parseExtmap(h))});const c=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(h=>{c.forEach(m=>{h.rtcpFeedback.find(v=>v.type===m.type&&v.parameter===m.parameter)||h.rtcpFeedback.push(m)})}),r},e.writeRtpDescription=function(n,r){let a="";a+="m="+n+" ",a+=r.codecs.length>0?"9":"0",a+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",a+=r.codecs.map(c=>c.preferredPayloadType!==void 0?c.preferredPayloadType:c.payloadType).join(" ")+`\r
`,a+=`c=IN IP4 0.0.0.0\r
`,a+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(c=>{a+=e.writeRtpMap(c),a+=e.writeFmtp(c),a+=e.writeRtcpFb(c)});let l=0;return r.codecs.forEach(c=>{c.maxptime>l&&(l=c.maxptime)}),l>0&&(a+="a=maxptime:"+l+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(c=>{a+=e.writeExtmap(c)}),a},e.parseRtpEncodingParameters=function(n){const r=[],a=e.parseRtpParameters(n),l=a.fecMechanisms.indexOf("RED")!==-1,c=a.fecMechanisms.indexOf("ULPFEC")!==-1,h=e.matchPrefix(n,"a=ssrc:").map(_=>e.parseSsrcMedia(_)).filter(_=>_.attribute==="cname"),m=h.length>0&&h[0].ssrc;let g;const v=e.matchPrefix(n,"a=ssrc-group:FID").map(_=>_.substring(17).split(" ").map(N=>parseInt(N,10)));v.length>0&&v[0].length>1&&v[0][0]===m&&(g=v[0][1]),a.codecs.forEach(_=>{if(_.name.toUpperCase()==="RTX"&&_.parameters.apt){let C={ssrc:m,codecPayloadType:parseInt(_.parameters.apt,10)};m&&g&&(C.rtx={ssrc:g}),r.push(C),l&&(C=JSON.parse(JSON.stringify(C)),C.fec={ssrc:m,mechanism:c?"red+ulpfec":"red"},r.push(C))}}),r.length===0&&m&&r.push({ssrc:m});let b=e.matchPrefix(n,"b=");return b.length&&(b[0].indexOf("b=TIAS:")===0?b=parseInt(b[0].substring(7),10):b[0].indexOf("b=AS:")===0?b=parseInt(b[0].substring(5),10)*1e3*.95-2e3*8:b=void 0,r.forEach(_=>{_.maxBitrate=b})),r},e.parseRtcpParameters=function(n){const r={},a=e.matchPrefix(n,"a=ssrc:").map(h=>e.parseSsrcMedia(h)).filter(h=>h.attribute==="cname")[0];a&&(r.cname=a.value,r.ssrc=a.ssrc);const l=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=l.length>0,r.compound=l.length===0;const c=e.matchPrefix(n,"a=rtcp-mux");return r.mux=c.length>0,r},e.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},e.parseMsid=function(n){let r;const a=e.matchPrefix(n,"a=msid:");if(a.length===1)return r=a[0].substring(7).split(" "),{stream:r[0],track:r[1]};const l=e.matchPrefix(n,"a=ssrc:").map(c=>e.parseSsrcMedia(c)).filter(c=>c.attribute==="msid");if(l.length>0)return r=l[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){const r=e.parseMLine(n),a=e.matchPrefix(n,"a=max-message-size:");let l;a.length>0&&(l=parseInt(a[0].substring(19),10)),isNaN(l)&&(l=65536);const c=e.matchPrefix(n,"a=sctp-port:");if(c.length>0)return{port:parseInt(c[0].substring(12),10),protocol:r.fmt,maxMessageSize:l};const h=e.matchPrefix(n,"a=sctpmap:");if(h.length>0){const m=h[0].substring(10).split(" ");return{port:parseInt(m[0],10),protocol:m[1],maxMessageSize:l}}},e.writeSctpDescription=function(n,r){let a=[];return n.protocol!=="DTLS/SCTP"?a=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:a=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&a.push("a=max-message-size:"+r.maxMessageSize+`\r
`),a.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,r,a){let l;const c=r!==void 0?r:2;return n?l=n:l=e.generateSessionId(),`v=0\r
o=`+(a||"thisisadapterortc")+" "+l+" "+c+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,r){const a=e.splitLines(n);for(let l=0;l<a.length;l++)switch(a[l]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return a[l].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const a=e.splitLines(n)[0].substring(2).split(" ");return{kind:a[0],port:parseInt(a[1],10),protocol:a[2],fmt:a.slice(3).join(" ")}},e.parseOLine=function(n){const a=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:a[0],sessionId:a[1],sessionVersion:parseInt(a[2],10),netType:a[3],addressType:a[4],address:a[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=e.splitLines(n);for(let a=0;a<r.length;a++)if(r[a].length<2||r[a].charAt(1)!=="=")return!1;return!0},t.exports=e})(V0)),V0.exports}var pk=YP();const Wl=fd(pk),KP=$N({__proto__:null,default:Wl},[pk]);function If(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const a=new e(r),l=Wl.parseCandidate(r.candidate);for(const c in l)c in a||Object.defineProperty(a,c,{value:l[c]});return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,Ho(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Ly(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||Ho(t,"icecandidate",e=>{if(e.candidate){const n=Wl.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function Df(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(h){if(!h||!h.sdp)return!1;const m=Wl.splitSections(h.sdp);return m.shift(),m.some(g=>{const v=Wl.parseMLine(g);return v&&v.kind==="application"&&v.protocol.indexOf("SCTP")!==-1})},r=function(h){const m=h.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(m===null||m.length<2)return-1;const g=parseInt(m[1],10);return g!==g?-1:g},a=function(h){let m=65536;return e.browser==="firefox"&&(e.version<57?h===-1?m=16384:m=2147483637:e.version<60?m=e.version===57?65535:65536:m=2147483637),m},l=function(h,m){let g=65536;e.browser==="firefox"&&e.version===57&&(g=65535);const v=Wl.matchPrefix(h.sdp,"a=max-message-size:");return v.length>0?g=parseInt(v[0].substring(19),10):e.browser==="firefox"&&m!==-1&&(g=2147483637),g},c=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:m}=this.getConfiguration();m==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const m=r(arguments[0]),g=a(m),v=l(arguments[0],m);let b;g===0&&v===0?b=Number.POSITIVE_INFINITY:g===0||v===0?b=Math.max(g,v):b=Math.min(g,v);const _={};Object.defineProperty(_,"maxMessageSize",{get(){return b}}),this._sctp=_}return c.apply(this,arguments)}}function Mf(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,a){const l=r.send;r.send=function(){const h=arguments[0],m=h.length||h.size||h.byteLength;if(r.readyState==="open"&&a.sctp&&m>a.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+a.sctp.maxMessageSize+" bytes)");return l.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const a=n.apply(this,arguments);return e(a,this),a},Ho(t,"datachannel",r=>(e(r.channel,r.target),r))}function Vy(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=a=>{const l=a.target;if(l._lastConnectionState!==l.connectionState){l._lastConnectionState=l.connectionState;const c=new Event("connectionstatechange",a);l.dispatchEvent(c)}return a},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Uy(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(a){if(a&&a.sdp&&a.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const l=a.sdp.split(`
`).filter(c=>c.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&a instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:a.type,sdp:l}):a.sdp=l}return n.apply(this,arguments)}}function Pf(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Of(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let a=arguments[0]||{};if(typeof a!="object"||a.type&&a.sdp)return n.apply(this,arguments);if(a={type:a.type,sdp:a.sdp},!a.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":a.type="offer";break;default:a.type="answer";break}return a.sdp||a.type!=="offer"&&a.type!=="answer"?n.apply(this,[a]):(a.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(c=>n.apply(this,[c]))})}const QP=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Uy,shimAddIceCandidateNullOrEmpty:Pf,shimConnectionState:Vy,shimMaxMessageSize:Df,shimParameterlessSetLocalDescription:Of,shimRTCIceCandidate:If,shimRTCIceCandidateRelayProtocol:Ly,shimSendThrowTypeError:Mf},Symbol.toStringTag,{value:"Module"}));function XP({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=zC,r=qP(t),a={browserDetails:r,commonShim:QP,extractVersion:Uu,disableLog:HP,disableWarnings:$P,sdp:KP};switch(r.browser){case"chrome":if(!gE||!Py||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),a;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),a;n("adapter.js shimming chrome."),a.browserShim=gE,Pf(t,r),Of(t),FC(t,r),HC(t),Py(t,r),$C(t),KC(t,r),qC(t),GC(t),QC(t,r),If(t),Ly(t),Vy(t),Df(t,r),Mf(t),Uy(t,r);break;case"firefox":if(!yE||!Oy||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),a;n("adapter.js shimming firefox."),a.browserShim=yE,Pf(t,r),Of(t),XC(t,r),Oy(t,r),WC(t),ek(t),JC(t),ZC(t),tk(t),nk(t),rk(t),sk(t),ik(t),If(t),Vy(t),Df(t,r),Mf(t);break;case"safari":if(!vE||!e.shimSafari)return n("Safari shim is not included in this adapter release."),a;n("adapter.js shimming safari."),a.browserShim=vE,Pf(t,r),Of(t),dk(t),fk(t),lk(t),ak(t),ok(t),hk(t),ck(t),mk(t),If(t),Ly(t),Df(t,r),Mf(t),Uy(t,r);break;default:n("Unsupported browser!");break}return a}const xE=XP({window:typeof window>"u"?void 0:window});function $o(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}class gk{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const n=[],r=e.byteLength,a=Math.ceil(r/this.chunkedMTU);let l=0,c=0;for(;c<r;){const h=Math.min(r,c+this.chunkedMTU),m=e.slice(c,h),g={__peerData:this._dataCount,n:l,data:m,total:a};n.push(g),c=h,l++}return this._dataCount++,n}}}function WP(t){let e=0;for(const a of t)e+=a.byteLength;const n=new Uint8Array(e);let r=0;for(const a of t)n.set(a,r),r+=a.byteLength;return n}const U0=xE.default||xE,Au=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const t=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(t)?t==="chrome"?e>=this.minChromeVersion:t==="firefox"?e>=this.minFirefoxVersion:t==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return U0.browserDetails.browser}getVersion(){return U0.browserDetails.version||0}isUnifiedPlanSupported(){const t=this.getBrowser(),e=U0.browserDetails.version||0;if(t==="chrome"&&e<this.minChromeVersion)return!1;if(t==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch{}finally{n&&n.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},JP=t=>!t||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(t),yk=()=>Math.random().toString(36).slice(2),_E={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class ZP extends gk{noop(){}blobToArrayBuffer(e,n){const r=new FileReader;return r.onload=function(a){a.target&&n(a.target.result)},r.readAsArrayBuffer(e),r}binaryStringToArrayBuffer(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=_E,this.browser=Au.getBrowser(),this.browserVersion=Au.getVersion(),this.pack=LC,this.unpack=OC,this.supports=(function(){const n={browser:Au.isBrowserSupported(),webRTC:Au.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let r;try{r=new RTCPeerConnection(_E),n.audioVideo=!0;let a;try{a=r.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!a.ordered;try{a.binaryType="blob",n.binaryBlob=!Au.isIOS}catch{}}catch{}finally{a&&a.close()}}catch{}finally{r&&r.close()}return n})(),this.validateId=JP,this.randomToken=yk}}const vr=new ZP,eO="PeerJS: ";class tO{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...n){const r=[eO,...n];for(const a in r)r[a]instanceof Error&&(r[a]="("+r[a].name+") "+r[a].message);e>=3?console.log(...r):e>=2?console.warn("WARNING",...r):e>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var qe=new tO,mb={},nO=Object.prototype.hasOwnProperty,lr="~";function ad(){}Object.create&&(ad.prototype=Object.create(null),new ad().__proto__||(lr=!1));function rO(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function vk(t,e,n,r,a){if(typeof n!="function")throw new TypeError("The listener must be a function");var l=new rO(n,r||t,a),c=lr?lr+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],l]:t._events[c].push(l):(t._events[c]=l,t._eventsCount++),t}function Lf(t,e){--t._eventsCount===0?t._events=new ad:delete t._events[e]}function rr(){this._events=new ad,this._eventsCount=0}rr.prototype.eventNames=function(){var e=[],n,r;if(this._eventsCount===0)return e;for(r in n=this._events)nO.call(n,r)&&e.push(lr?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(n)):e};rr.prototype.listeners=function(e){var n=lr?lr+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var a=0,l=r.length,c=new Array(l);a<l;a++)c[a]=r[a].fn;return c};rr.prototype.listenerCount=function(e){var n=lr?lr+e:e,r=this._events[n];return r?r.fn?1:r.length:0};rr.prototype.emit=function(e,n,r,a,l,c){var h=lr?lr+e:e;if(!this._events[h])return!1;var m=this._events[h],g=arguments.length,v,b;if(m.fn){switch(m.once&&this.removeListener(e,m.fn,void 0,!0),g){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,n),!0;case 3:return m.fn.call(m.context,n,r),!0;case 4:return m.fn.call(m.context,n,r,a),!0;case 5:return m.fn.call(m.context,n,r,a,l),!0;case 6:return m.fn.call(m.context,n,r,a,l,c),!0}for(b=1,v=new Array(g-1);b<g;b++)v[b-1]=arguments[b];m.fn.apply(m.context,v)}else{var _=m.length,C;for(b=0;b<_;b++)switch(m[b].once&&this.removeListener(e,m[b].fn,void 0,!0),g){case 1:m[b].fn.call(m[b].context);break;case 2:m[b].fn.call(m[b].context,n);break;case 3:m[b].fn.call(m[b].context,n,r);break;case 4:m[b].fn.call(m[b].context,n,r,a);break;default:if(!v)for(C=1,v=new Array(g-1);C<g;C++)v[C-1]=arguments[C];m[b].fn.apply(m[b].context,v)}}return!0};rr.prototype.on=function(e,n,r){return vk(this,e,n,r,!1)};rr.prototype.once=function(e,n,r){return vk(this,e,n,r,!0)};rr.prototype.removeListener=function(e,n,r,a){var l=lr?lr+e:e;if(!this._events[l])return this;if(!n)return Lf(this,l),this;var c=this._events[l];if(c.fn)c.fn===n&&(!a||c.once)&&(!r||c.context===r)&&Lf(this,l);else{for(var h=0,m=[],g=c.length;h<g;h++)(c[h].fn!==n||a&&!c[h].once||r&&c[h].context!==r)&&m.push(c[h]);m.length?this._events[l]=m.length===1?m[0]:m:Lf(this,l)}return this};rr.prototype.removeAllListeners=function(e){var n;return e?(n=lr?lr+e:e,this._events[n]&&Lf(this,n)):(this._events=new ad,this._eventsCount=0),this};rr.prototype.off=rr.prototype.removeListener;rr.prototype.addListener=rr.prototype.on;rr.prefixed=lr;rr.EventEmitter=rr;mb=rr;var qo={};$o(qo,"ConnectionType",()=>Ra);$o(qo,"PeerErrorType",()=>wn);$o(qo,"BaseConnectionErrorType",()=>zy);$o(qo,"DataConnectionErrorType",()=>pb);$o(qo,"SerializationType",()=>ip);$o(qo,"SocketEventType",()=>Sa);$o(qo,"ServerMessageType",()=>Zn);var Ra=(function(t){return t.Data="data",t.Media="media",t})({}),wn=(function(t){return t.BrowserIncompatible="browser-incompatible",t.Disconnected="disconnected",t.InvalidID="invalid-id",t.InvalidKey="invalid-key",t.Network="network",t.PeerUnavailable="peer-unavailable",t.SslUnavailable="ssl-unavailable",t.ServerError="server-error",t.SocketError="socket-error",t.SocketClosed="socket-closed",t.UnavailableID="unavailable-id",t.WebRTC="webrtc",t})({}),zy=(function(t){return t.NegotiationFailed="negotiation-failed",t.ConnectionClosed="connection-closed",t})({}),pb=(function(t){return t.NotOpenYet="not-open-yet",t.MessageToBig="message-too-big",t})({}),ip=(function(t){return t.Binary="binary",t.BinaryUTF8="binary-utf8",t.JSON="json",t.None="raw",t})({}),Sa=(function(t){return t.Message="message",t.Disconnected="disconnected",t.Error="error",t.Close="close",t})({}),Zn=(function(t){return t.Heartbeat="HEARTBEAT",t.Candidate="CANDIDATE",t.Offer="OFFER",t.Answer="ANSWER",t.Open="OPEN",t.Error="ERROR",t.IdTaken="ID-TAKEN",t.InvalidKey="INVALID-KEY",t.Leave="LEAVE",t.Expire="EXPIRE",t})({});const bk="1.5.5";class sO extends mb.EventEmitter{constructor(e,n,r,a,l,c=5e3){super(),this.pingInterval=c,this._disconnected=!0,this._messagesQueue=[];const h=e?"wss://":"ws://";this._baseUrl=h+n+":"+r+a+"peerjs?key="+l}start(e,n){this._id=e;const r=`${this._baseUrl}&id=${e}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+bk),this._disconnected=!1,this._socket.onmessage=a=>{let l;try{l=JSON.parse(a.data),qe.log("Server message received:",l)}catch{qe.log("Invalid server message",a.data);return}this.emit(Sa.Message,l)},this._socket.onclose=a=>{this._disconnected||(qe.log("Socket closed.",a),this._cleanup(),this._disconnected=!0,this.emit(Sa.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),qe.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){qe.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:Zn.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const n of e)this.send(n)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(Sa.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(e);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class xk{constructor(e){this.connection=e}startConnection(e){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===Ra.Media&&e._stream&&this._addTracksToConnection(e._stream,n),e.originator){const r=this.connection,a={ordered:!!e.reliable},l=n.createDataChannel(r.label,a);r._initializeDataChannel(l),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){qe.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const n=this.connection.peer,r=this.connection.connectionId,a=this.connection.type,l=this.connection.provider;qe.log("Listening for ICE candidates."),e.onicecandidate=c=>{!c.candidate||!c.candidate.candidate||(qe.log(`Received ICE candidates for ${n}:`,c.candidate),l.socket.send({type:Zn.Candidate,payload:{candidate:c.candidate,type:a,connectionId:r},dst:n}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":qe.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(zy.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":qe.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(zy.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":qe.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},qe.log("Listening for data channel"),e.ondatachannel=c=>{qe.log("Received data channel");const h=c.channel;l.getConnection(n,r)._initializeDataChannel(h)},qe.log("Listening for remote stream"),e.ontrack=c=>{qe.log("Received remote stream");const h=c.streams[0],m=l.getConnection(n,r);if(m.type===Ra.Media){const g=m;this._addStreamToMediaConnection(h,g)}}}cleanup(){qe.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const n=e.signalingState!=="closed";let r=!1;const a=this.connection.dataChannel;a&&(r=!!a.readyState&&a.readyState!=="closed"),(n||r)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,n=this.connection.provider;try{const r=await e.createOffer(this.connection.options.constraints);qe.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),qe.log("Set localDescription:",r,`for:${this.connection.peer}`);let a={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Ra.Data){const l=this.connection;a={...a,label:l.label,reliable:l.reliable,serialization:l.serialization}}n.socket.send({type:Zn.Offer,payload:a,dst:this.connection.peer})}catch(a){a!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(wn.WebRTC,a),qe.log("Failed to setLocalDescription, ",a))}}catch(r){n.emitError(wn.WebRTC,r),qe.log("Failed to createOffer, ",r)}}async _makeAnswer(){const e=this.connection.peerConnection,n=this.connection.provider;try{const r=await e.createAnswer();qe.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),qe.log("Set localDescription:",r,`for:${this.connection.peer}`),n.socket.send({type:Zn.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(a){n.emitError(wn.WebRTC,a),qe.log("Failed to setLocalDescription, ",a)}}catch(r){n.emitError(wn.WebRTC,r),qe.log("Failed to create answer, ",r)}}async handleSDP(e,n){n=new RTCSessionDescription(n);const r=this.connection.peerConnection,a=this.connection.provider;qe.log("Setting remote description",n);const l=this;try{await r.setRemoteDescription(n),qe.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await l._makeAnswer()}catch(c){a.emitError(wn.WebRTC,c),qe.log("Failed to setRemoteDescription, ",c)}}async handleCandidate(e){qe.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),qe.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(wn.WebRTC,n),qe.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(e,n){if(qe.log(`add tracks from stream ${e.id} to peer connection`),!n.addTrack)return qe.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(r=>{n.addTrack(r,e)})}_addStreamToMediaConnection(e,n){qe.log(`add stream ${e.id} to media connection ${n.connectionId}`),n.addStream(e)}}class _k extends mb.EventEmitter{emitError(e,n){qe.error("Error:",n),this.emit("error",new iO(`${e}`,n))}}class iO extends Error{constructor(e,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=e}}class wk extends _k{get open(){return this._open}constructor(e,n,r){super(),this.peer=e,this.provider=n,this.options=r,this._open=!1,this.metadata=r.metadata}}class xm extends wk{static#e=this.ID_PREFIX="mc_";get type(){return Ra.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,n,r){super(e,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||xm.ID_PREFIX+vr.randomToken(),this._negotiator=new xk(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{qe.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{qe.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){qe.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const n=e.type,r=e.payload;switch(e.type){case Zn.Answer:this._negotiator.handleSDP(n,r.sdp),this._open=!0;break;case Zn.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:qe.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(e,n={}){if(this._localStream){qe.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const r=this.provider._getMessages(this.connectionId);for(const a of r)this.handleMessage(a);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class aO{constructor(e){this._options=e}_buildRequest(e){const n=this._options.secure?"https":"http",{host:r,port:a,path:l,key:c}=this._options,h=new URL(`${n}://${r}:${a}${l}${c}/${e}`);return h.searchParams.set("ts",`${Date.now()}${Math.random()}`),h.searchParams.set("version",bk),fetch(h.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){qe.error("Error retrieving ID",e);let n="";throw this._options.path==="/"&&this._options.host!==vr.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let n="";throw this._options.host===vr.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw qe.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}class _m extends wk{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return Ra.Data}constructor(e,n,r){super(e,n,r),this.connectionId=this.options.connectionId||_m.ID_PREFIX+yk(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new xk(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{qe.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{qe.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{qe.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,n=!1){if(!this.open){this.emitError(pb.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,n)}async handleMessage(e){const n=e.payload;switch(e.type){case Zn.Answer:await this._negotiator.handleSDP(e.type,n.sdp);break;case Zn.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:qe.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}}class gb extends _m{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>_m.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(n){return qe.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class z0 extends gb{close(e){super.close(e),this._chunkedData={}}constructor(e,n,r){super(e,n,r),this.chunker=new gk,this.serialization=ip.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const n=OC(e),r=n.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(e){const n=e.__peerData,r=this._chunkedData[n]||{data:[],count:0,total:e.total};if(r.data[e.n]=new Uint8Array(e.data),r.count++,this._chunkedData[n]=r,r.total===r.count){delete this._chunkedData[n];const a=WP(r.data);this._handleDataMessage({data:a})}}_send(e,n){const r=LC(e);if(r instanceof Promise)return this._send_blob(r);if(!n&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(e){const n=await e;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(e){const n=this.chunker.chunk(e);qe.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const r of n)this.send(r,!0)}}class oO extends gb{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,n){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=ip.None}}class lO extends gb{_handleDataMessage({data:e}){const n=this.parse(this.decoder.decode(e)),r=n.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",n)}_send(e,n){const r=this.encoder.encode(this.stringify(e));if(r.byteLength>=vr.chunkedMTU){this.emitError(pb.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...e){super(...e),this.serialization=ip.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class yb extends _k{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[n,r]of this._connections)e[n]=r;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,n){super(),this._serializers={raw:oO,json:lO,binary:z0,"binary-utf8":z0,default:z0},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(e&&e.constructor==Object?n=e:e&&(r=e.toString()),n={debug:0,host:vr.CLOUD_HOST,port:vr.CLOUD_PORT,path:"/",key:yb.DEFAULT_KEY,token:vr.randomToken(),config:vr.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==vr.CLOUD_HOST?this._options.secure=vr.isSecure():this._options.host==vr.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&qe.setLogFunction(this._options.logFunction),qe.logLevel=this._options.debug||0,this._api=new aO(n),this._socket=this._createServerConnection(),!vr.supports.audioVideo&&!vr.supports.data){this._delayedAbort(wn.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!vr.validateId(r)){this._delayedAbort(wn.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(a=>this._initialize(a)).catch(a=>this._abort(wn.ServerError,a))}_createServerConnection(){const e=new sO(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(Sa.Message,n=>{this._handleMessage(n)}),e.on(Sa.Error,n=>{this._abort(wn.SocketError,n)}),e.on(Sa.Disconnected,()=>{this.disconnected||(this.emitError(wn.Network,"Lost connection to server."),this.disconnect())}),e.on(Sa.Close,()=>{this.disconnected||this._abort(wn.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const n=e.type,r=e.payload,a=e.src;switch(n){case Zn.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Zn.Error:this._abort(wn.ServerError,r.msg);break;case Zn.IdTaken:this._abort(wn.UnavailableID,`ID "${this.id}" is taken`);break;case Zn.InvalidKey:this._abort(wn.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case Zn.Leave:qe.log(`Received leave message from ${a}`),this._cleanupPeer(a),this._connections.delete(a);break;case Zn.Expire:this.emitError(wn.PeerUnavailable,`Could not connect to peer ${a}`);break;case Zn.Offer:{const l=r.connectionId;let c=this.getConnection(a,l);if(c&&(c.close(),qe.warn(`Offer received for existing Connection ID:${l}`)),r.type===Ra.Media){const m=new xm(a,this,{connectionId:l,_payload:r,metadata:r.metadata});c=m,this._addConnection(a,c),this.emit("call",m)}else if(r.type===Ra.Data){const m=new this._serializers[r.serialization](a,this,{connectionId:l,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});c=m,this._addConnection(a,c),this.emit("connection",m)}else{qe.warn(`Received malformed connection type:${r.type}`);return}const h=this._getMessages(l);for(const m of h)c.handleMessage(m);break}default:{if(!r){qe.warn(`You received a malformed message from ${a} of type ${n}`);return}const l=r.connectionId,c=this.getConnection(a,l);c&&c.peerConnection?c.handleMessage(e):l?this._storeMessage(l,e):qe.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,n){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(n)}_getMessages(e){const n=this._lostMessages.get(e);return n?(this._lostMessages.delete(e),n):[]}connect(e,n={}){if(n={serialization:"default",...n},this.disconnected){qe.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(wn.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[n.serialization](e,this,n);return this._addConnection(e,r),r}call(e,n,r={}){if(this.disconnected){qe.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(wn.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){qe.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const a=new xm(e,this,{...r,_stream:n});return this._addConnection(e,a),a}_addConnection(e,n){qe.log(`add connection ${n.type}:${n.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(n)}_removeConnection(e){const n=this._connections.get(e.peer);if(n){const r=n.indexOf(e);r!==-1&&n.splice(r,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,n){const r=this._connections.get(e);if(!r)return null;for(const a of r)if(a.connectionId===n)return a;return null}_delayedAbort(e,n){setTimeout(()=>{this._abort(e,n)},0)}_abort(e,n){qe.error("Aborting!"),this.emitError(e,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(qe.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const n=this._connections.get(e);if(n)for(const r of n)r.close()}disconnect(){if(this.disconnected)return;const e=this.id;qe.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)qe.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)qe.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=n=>{}){this._api.listAllPeers().then(n=>e(n)).catch(n=>this._abort(wn.ServerError,n))}}var cO=yb;let B0=null,od=[],wm=[];const Ek=()=>(B0||(B0=new(window.AudioContext||window.webkitAudioContext)),B0),ld=()=>{od.forEach(t=>{try{t.stop(),t.disconnect()}catch{}}),od=[],wm.forEach(t=>{try{t.disconnect()}catch{}}),wm=[]},uO=()=>{try{const t=Ek();t.state==="suspended"&&t.resume(),ld();const e=t.createOscillator(),n=t.createGain();e.type="sine",e.frequency.value=440,e.connect(n),n.connect(t.destination);const r=t.currentTime;let a=!0;const l=()=>{if(!a)return;const h=t.createOscillator(),m=t.createGain();h.connect(m),m.connect(t.destination),h.frequency.value=425,h.type="sine";const g=t.currentTime,v=t.createOscillator();v.type="sine",v.frequency.value=20;const b=t.createGain();b.gain.value=500,v.connect(b),b.connect(h.frequency),v.start(g),v.stop(g+2),m.gain.setValueAtTime(0,g),m.gain.linearRampToValueAtTime(.1,g+.1),m.gain.setValueAtTime(.1,g+1.8),m.gain.linearRampToValueAtTime(0,g+2),h.start(g),h.stop(g+2),od.push(h),od.push(v),wm.push(m)};l();const c=setInterval(l,4e3);return()=>{a=!1,clearInterval(c),ld()}}catch(t){return console.error("Error playing outgoing ring:",t),()=>{}}},dO=()=>{try{const t=Ek();t.state==="suspended"&&t.resume(),ld();let e=!0;const n=()=>{if(!e)return;const a=t.currentTime,l=(c,h)=>{const m=t.createOscillator(),g=t.createGain();m.connect(g),g.connect(t.destination),m.frequency.value=h,m.type="square",g.gain.setValueAtTime(0,c),g.gain.linearRampToValueAtTime(.1,c+.05),g.gain.setValueAtTime(.1,c+.2),g.gain.linearRampToValueAtTime(0,c+.25),m.start(c),m.stop(c+.3),od.push(m),wm.push(g)};l(a,880),l(a+.4,880),l(a+.8,880)};n();const r=setInterval(n,3e3);return()=>{e=!1,clearInterval(r),ld()}}catch(t){return console.error("Error playing incoming ring:",t),()=>{}}},wE=()=>{ld()},Si={SCREEN_SHARE:"screen_share",HIGH_QUALITY:"high_quality"},hO={admin:[Si.SCREEN_SHARE,Si.HIGH_QUALITY],moderator:[Si.SCREEN_SHARE],member:[]},fO={premium:[Si.SCREEN_SHARE,Si.HIGH_QUALITY],developer:[Si.SCREEN_SHARE,Si.HIGH_QUALITY],verified:[]},Sk=(t,e)=>{if(!t)return!1;const n=t.role||"member";if((hO[n]||[]).includes(e))return!0;const a=t.badges||[];for(const l of a)if((fO[l]||[]).includes(e))return!0;return!1},EE=10,SE=300,Tk=I.createContext(),jd=()=>{const t=I.useContext(Tk);if(!t)throw new Error("useCall must be used within CallProvider");return t},mO=({children:t})=>{const{currentUser:e,userProfile:n}=nr(),{error:r}=fs(),[a,l]=I.useState(null),[c,h]=I.useState(null),[m,g]=I.useState("idle"),[v,b]=I.useState(null),[_,C]=I.useState(null),[N,j]=I.useState(null),[k,B]=I.useState(null),[$,R]=I.useState(null),[V,z]=I.useState(null),[F,S]=I.useState(()=>{try{const ie=localStorage.getItem("dss_custom_sounds");return ie?JSON.parse(ie):[]}catch{return[]}});I.useEffect(()=>{localStorage.setItem("dss_custom_sounds",JSON.stringify(F))},[F]);const E=async(ie,ge)=>F.length>=EE?(r(`Maximum ${EE} sounds allowed.`),!1):ge.size>SE*1024?(r(`File too large. Max ${SE}KB.`),!1):new Promise(be=>{const Me=new FileReader;Me.onload=nt=>{const rt={id:Date.now().toString(),name:ie.trim()||"Sound",src:nt.target.result};S(Rn=>[...Rn,rt]),be(!0)},Me.readAsDataURL(ge)}),A=ie=>{S(ge=>ge.filter(be=>be.id!==ie))},[M,O]=I.useState(!1),[U,P]=I.useState(!1),[xe,Ee]=I.useState({audioInputs:[],videoInputs:[],audioOutputs:[]}),[G,ne]=I.useState(""),[X,Ae]=I.useState(""),De=ie=>{const ge=F.find(Me=>Me.id===ie);if(!ge)return;const be=new Audio(ge.src);be.volume=.5,de.current.push(be),be.onended=()=>{de.current=de.current.filter(Me=>Me!==be)},be.play().catch(Me=>console.error("Error playing sound:",Me)),V&&V.open?(console.log("Sending sound effect:",ge.name),V.send({type:"SOUND_EFFECT",payload:{src:ge.src,name:ge.name}})):console.warn("Cannot send sound effect. Data connection missing or closed.")};I.useRef(null),I.useRef(null);const H=I.useRef(null),ee=I.useRef(null),ae=I.useRef(null),de=I.useRef([]),je=()=>{de.current.forEach(ie=>{ie.pause(),ie.currentTime=0}),de.current=[]},_e=I.useRef(null);I.useEffect(()=>{ee.current=k},[k]),I.useEffect(()=>{ae.current=N},[N]),I.useEffect(()=>(_e.current&&(_e.current(),_e.current=null),wE(),m==="incoming"?_e.current=dO():m==="outgoing"&&(_e.current=uO()),()=>{_e.current&&_e.current(),wE()}),[m]),I.useEffect(()=>{if(!e)return;const ie=new cO;return ie.on("open",ge=>{console.log("My Peer ID is:",ge),h(ge),l(ie)}),ie.on("call",ge=>{console.log("Receiving PeerJS call connection..."),ae.current&&ae.current.peer===ge.peer&&(console.log("Replacing existing call (upgrade/renegotiation detected)"),ae.current.removeAllListeners&&ae.current.removeAllListeners("close"),ae.current.close());const be=ee.current||Ie.current;be?(console.log("Answering call with local stream"),ge.answer(be)):(console.warn("No local stream found when answering! Answering audio-only or empty."),ge.answer()),ge.on("stream",Me=>{console.log("Received remote stream"),R(Me)}),ge.on("close",()=>{he()}),j(ge),g("connected")}),ie.on("error",ge=>{console.error("PeerJS Error:",ge),ge.type}),ie.on("connection",ge=>{console.log("Data connection received from peer:",ge.peer),ge.on("open",()=>{console.log("Data connection open event fired."),z(ge)}),ge.on("data",be=>{if(be&&be.type==="SOUND_EFFECT"&&be.payload?.src){console.log("Received sound effect:",be.payload.name);const Me=new Audio(be.payload.src);Me.volume=.5,de.current.push(Me),Me.onended=()=>{de.current=de.current.filter(nt=>nt!==Me)},Me.play().catch(nt=>console.error("Error playing remote sound:",nt))}}),ge.on("close",()=>{console.log("Data connection closed."),z(null)}),ge.on("error",be=>console.error("Data connection error:",be)),ge.open&&(console.log("Data connection already open."),z(ge))}),()=>{ie.destroy()}},[e]),I.useEffect(()=>{if(!e)return;const ie=os(dt(we,"users",e.uid,"incomingCalls"),bo("status","==","pending")),ge=Dr(ie,be=>{be.docChanges().forEach(Me=>{if(Me.type==="added"){const nt=Me.doc.data();b({id:Me.doc.id,...nt}),g("incoming")}Me.type==="removed"&&b(nt=>nt&&nt.id===Me.doc.id?(g(rt=>(rt!=="connected"&&he(!1),rt)),null):nt)})});return()=>ge()},[e]);const Ce=async()=>{try{const ie=await navigator.mediaDevices.enumerateDevices(),ge=ie.filter(nt=>nt.kind==="audioinput"),be=ie.filter(nt=>nt.kind==="videoinput"),Me=ie.filter(nt=>nt.kind==="audiooutput");return Ee({audioInputs:ge,videoInputs:be,audioOutputs:Me}),!G&&ge.length>0&&ne(ge[0].deviceId),!X&&be.length>0&&Ae(be[0].deviceId),console.log("Devices enumerated:",{audioInputs:ge.length,videoInputs:be.length}),{audioInputs:ge,videoInputs:be,audioOutputs:Me}}catch(ie){return console.error("Failed to enumerate devices:",ie),{audioInputs:[],videoInputs:[],audioOutputs:[]}}};I.useEffect(()=>(Ce(),navigator.mediaDevices.addEventListener("devicechange",Ce),()=>navigator.mediaDevices.removeEventListener("devicechange",Ce)),[]);const He=async(ie=!0)=>{try{xe.audioInputs.length===0&&await Ce();const ge={echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,channelCount:1,sampleRate:48e3,sampleSize:16,...G&&{deviceId:{exact:G}}},be=ie?{width:1280,height:720,...X&&{deviceId:{exact:X}}}:!1,Me=await navigator.mediaDevices.getUserMedia({video:be,audio:ge});return console.log("Media stream acquired with selected devices"),B(Me),Me}catch(ge){return console.error("Failed to get local stream",ge),r("Could not access camera/microphone"),null}},Ge=async(ie,ge="video")=>{if(!a||!c){r("Connection not ready. Please wait a moment.");return}if(C(ie),g("outgoing"),!await He(ge==="video")){g("idle");return}P(ge==="voice");try{const Me=e.displayName||n?.displayName||"Unknown",nt=e.photoURL||n?.photoURL||n?.photoUrl||null,rt=await cn(dt(we,"users",ie.id,"incomingCalls"),{callerId:e.uid,callerName:Me,callerPhotoUrl:nt,peerId:c,type:ge,status:"pending",timestamp:ft()});H.current=rt.id;const Rn=Dr(Oe(we,"users",ie.id,"incomingCalls",rt.id),Ln=>{const hn=H.current===rt.id;if(!Ln.exists())hn&&m==="outgoing"&&(r("Call ended or declined"),he(!1)),Rn();else{const Kn=Ln.data();Kn.status==="accepted"?hn&&g("connected"):Kn.status==="rejected"&&hn&&(r("Call declined"),he(!0))}},Ln=>{console.warn("Call snapshot error:",Ln),H.current===rt.id&&(r("Call declined"),he(!1))})}catch(Me){console.error("Signaling failed:",Me),r("Failed to direct call"),he()}};I.useEffect(()=>{if(!N||!N.peerConnection)return;const ie=()=>{const ge=N.peerConnection.connectionState,be=N.peerConnection.iceConnectionState;console.log(`Connection State: ${ge}, ICE State: ${be}`),(be==="disconnected"||be==="failed"||be==="closed")&&(console.warn("Peer connection lost/failed. Ending call..."),be==="failed"||be==="closed"?he():be==="disconnected"&&ae.current===N&&setTimeout(()=>{ae.current&&ae.current.peerConnection.iceConnectionState==="disconnected"&&(console.log("Connection still disconnected after timeout. Ending."),he())},3e3))};return N.peerConnection.addEventListener("iceconnectionstatechange",ie),N.peerConnection.addEventListener("connectionstatechange",ie),()=>{N&&N.peerConnection&&(N.peerConnection.removeEventListener("iceconnectionstatechange",ie),N.peerConnection.removeEventListener("connectionstatechange",ie))}},[N]);const ve=async()=>{if(!v||!a)return;g("connected");const ie=v.type==="video",ge=await He(ie);if(!ge){console.error("Stream failed, rejecting call signal.");try{await tt(Oe(we,"users",e.uid,"incomingCalls",v.id),{status:"rejected"})}catch{}he(!1);return}if(ie||P(!0),console.log("Connecting to peer:",v.peerId),(!a||a.disconnected)&&(r("Peer connection lost. Reconnecting..."),a?.reconnect(),await new Promise(be=>setTimeout(be,1e3)),!a||a.disconnected)){r("Could not establish P2P connection."),he();return}try{const be=a.call(v.peerId,ge);if(!be){r("Call failed to initialize."),he();return}be.on("stream",Me=>{R(Me)}),be.on("close",()=>{he()}),be.on("error",Me=>{console.error("Call error:",Me),he()}),j(be);try{await tt(Oe(we,"users",e.uid,"incomingCalls",v.id),{status:"accepted"})}catch(Me){console.error("Error updating signal doc",Me)}}catch(be){console.error("Error calling peer:",be),r("Failed to connect to peer."),he()}try{console.log("Establishing data connection to caller:",v.peerId);const be=a.connect(v.peerId);be.on("open",()=>{console.log("Data connection opened (Callee side)!"),z(be)}),be.on("data",Me=>{if(Me&&Me.type==="SOUND_EFFECT"&&Me.payload?.src){const nt=new Audio(Me.payload.src);nt.volume=.5,de.current.push(nt),nt.onended=()=>{de.current=de.current.filter(rt=>rt!==nt)},nt.play().catch(rt=>console.error(rt))}}),be.on("close",()=>z(null)),be.on("error",Me=>console.error("Data connection error (Callee):",Me))}catch(be){console.error("Failed to establish data connection",be)}},he=async(ie=!0)=>{pe.current&&(pe.current.getTracks().forEach(be=>be.stop()),pe.current=null),Ie.current=null;const ge=ee.current;if(ge&&ge.getTracks().forEach(be=>{be.stop(),console.log("Stopped track:",be.kind)}),k&&k.getTracks().forEach(be=>be.stop()),B(null),ee.current=null,N&&(N.close(),j(null)),R(null),g("idle"),b(null),C(null),O(!1),O(!1),P(!1),V&&(V.close(),z(null)),je(),H.current&&ie&&_)try{await lc(Oe(we,"users",_.id,"incomingCalls",H.current))}catch{}if(v&&ie)try{m==="incoming"?await tt(Oe(we,"users",e.uid,"incomingCalls",v.id),{status:"rejected"}):await lc(Oe(we,"users",e.uid,"incomingCalls",v.id))}catch{}H.current=null},$e=()=>{if(k){const ie=k.getAudioTracks()[0];ie&&(ie.enabled=!ie.enabled,O(!ie.enabled))}},oe=()=>{if(k){const ie=k.getVideoTracks()[0];ie&&(ie.enabled=!ie.enabled,P(!ie.enabled))}},pe=I.useRef(null),Ie=I.useRef(null),Q=async(ie=null)=>{if(pe.current){await le();return}try{console.log("Requesting display media...",ie);let ge={},be=ie?.width||1280,Me=ie?.height||720,nt=ie?.frameRate||30;ie||Sk(n,Si.HIGH_QUALITY)&&(be=1920,Me=1080,nt=60);let rt;if(ie?.sourceId&&window.require){console.log("Using Electron getUserMedia with sourceId:",ie.sourceId);try{rt=await navigator.mediaDevices.getUserMedia({audio:{mandatory:{chromeMediaSource:"desktop"}},video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:ie.sourceId,maxWidth:be,maxHeight:Me,maxFrameRate:nt}}})}catch(Xt){throw console.error("Electron getUserMedia failed:",Xt),Xt}}else{const Xt={video:{width:{ideal:be},height:{ideal:Me},frameRate:{ideal:nt},displaySurface:ie?.displaySurface},audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!1}};console.log("Using Web getDisplayMedia with constraints:",Xt),rt=await navigator.mediaDevices.getDisplayMedia(Xt)}const Rn=rt.getVideoTracks()[0];P(!1),console.log("Display media obtained:",Rn.label);const Ln=rt.getAudioTracks()[0];let hn=null;if(Ln){console.log("System audio captured! Mixing with microphone...");let Xt=k;if(!Xt&&xe.audioInputs.length>0)try{Xt=await navigator.mediaDevices.getUserMedia({audio:!0})}catch{console.warn("Failed to get mic for mixing")}if(Xt&&Xt.getAudioTracks().length>0){const cr=Xt.getAudioTracks()[0],Wt=new(window.AudioContext||window.webkitAudioContext),Ft=Wt.createMediaStreamDestination(),Jt=Wt.createMediaStreamSource(new MediaStream([cr])),Qn=Wt.createMediaStreamSource(new MediaStream([Ln])),zt=Wt.createGain(),ms=Wt.createGain();zt.gain.value=1,ms.gain.value=1,Jt.connect(zt).connect(Ft),Qn.connect(ms).connect(Ft),hn=Ft.stream.getAudioTracks()[0],pe.currentAudioContext=Wt}else hn=Ln}k&&!Ie.current&&(Ie.current=k),Rn.onended=()=>{console.log("Screen track ended by user/browser UI"),le()},pe.current=rt;const Kn=hn?[hn]:k?k.getAudioTracks():[],Js=new MediaStream([Rn,...Kn]);if(B(Js),N&&N.peerConnection){const Xt=N.peerConnection.getSenders(),cr=Xt.find(Wt=>Wt.track&&Wt.track.kind==="video");if(cr&&await cr.replaceTrack(Rn),hn){const Wt=Xt.find(Ft=>Ft.track&&Ft.track.kind==="audio");Wt&&(console.log("Replacing audio sender with mixed track..."),await Wt.replaceTrack(hn))}if(!cr){console.log("Audio-only -> Screen Share upgrade. Renegotiating...");const Wt=N.peer;if(a&&Wt){N.removeAllListeners("close");const Ft=a.call(Wt,Js);Ft.on("stream",Jt=>R(Jt)),Ft.on("close",()=>he()),Ft.on("error",()=>he()),j(Ft)}}}}catch(ge){console.error("Error starting screen share:",ge),r("Failed to start screen share")}},le=async()=>{if(pe.current)if(console.log("Stopping screen share..."),pe.currentAudioContext&&(pe.currentAudioContext.close(),pe.currentAudioContext=null),pe.current.getTracks().forEach(ie=>ie.stop()),pe.current=null,Ie.current){console.log("Reverting to previous stream state...");const ie=Ie.current.getVideoTracks()[0],ge=Ie.current.getAudioTracks();if(N&&N.peerConnection){const be=N.peerConnection.getSenders(),Me=be.find(rt=>rt.track&&rt.track.kind==="video");if(ie&&Me)try{await Me.replaceTrack(ie)}catch{}const nt=be.find(rt=>rt.track&&rt.track.kind==="audio");nt&&ge.length>0&&(console.log("Reverting audio sender to original mic..."),await nt.replaceTrack(ge[0]))}B(Ie.current),Ie.current=null}else{console.log("No stored camera stream, requesting new user media...");try{const ie=await He(!0);if(ie&&N&&N.peerConnection){const ge=ie.getVideoTracks()[0],be=N.peerConnection.getSenders().find(Me=>Me.track&&Me.track.kind==="video");be&&await be.replaceTrack(ge)}}catch(ie){console.error("Failed to restore camera:",ie)}}},ke={startCall:Ge,answerCall:ve,endCall:he,toggleAudio:$e,toggleVideo:oe,callStatus:m,incomingCall:v,outgoingCallUser:_,localStream:k,remoteStream:$,isMuted:M,isVideoOff:U,activeCall:N,isScreenSharing:!!pe.current,toggleScreenShare:Q,availableDevices:xe,selectedMicId:G,selectedCameraId:X,setSelectedMicId:ne,setSelectedCameraId:Ae,playSound:De,customSounds:F,addSound:E,removeSound:A};return d.jsx(Tk.Provider,{value:ke,children:t})},vb=({user:t,isOpen:e,onClose:n,onMessage:r})=>{if(!t)return null;const a=c=>({admin:"#f23f42",moderator:"#faa81a",member:"#80848e"})[c]||"#80848e",{startCall:l}=jd();return d.jsx($s,{isOpen:e,onClose:n,title:"",size:"sm",showCloseButton:!1,children:d.jsxs("div",{className:"relative overflow-hidden rounded-lg -m-6 min-h-[400px] flex flex-col",children:[d.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-colors",style:{backgroundColor:t.themeColor||"#6366f1",backgroundImage:t.bannerUrl?`url(${t.bannerUrl})`:`linear-gradient(to bottom right, ${t.themeColor||"#6366f1"}, #000)`}}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/95 via-black/50 to-transparent"}),d.jsx("button",{onClick:n,className:"absolute top-4 right-4 p-2 bg-black/40 hover:bg-black/60 rounded-full text-white/80 hover:text-white transition-colors z-20 backdrop-blur-sm",children:d.jsxs("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:[d.jsx("path",{fill:"none",d:"M0 0h24v24H0z"}),d.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})]})}),d.jsxs("div",{className:"relative z-10 p-6 mt-auto flex flex-col items-center text-center",children:[d.jsxs("div",{className:"relative group mb-4",children:[t.photoUrl?d.jsx("img",{src:t.photoUrl,alt:t.displayName,className:"w-32 h-32 rounded-full border-4 object-cover shadow-2xl",style:{borderColor:t.themeColor||"#1e1f22"},onError:c=>{c.target.style.display="none",c.target.nextSibling.style.display="flex"}},t.photoUrl):null,d.jsx("div",{className:"w-32 h-32 rounded-full border-4 flex items-center justify-center text-white font-bold text-5xl shadow-2xl",style:{display:t.photoUrl?"none":"flex",borderColor:t.themeColor||"#1e1f22",backgroundColor:t.themeColor||"#6366f1"},children:t.displayName?.[0]?.toUpperCase()||"U"})]}),d.jsxs("div",{className:"space-y-1 w-full",children:[d.jsxs("h2",{className:"text-3xl font-bold text-white flex items-center justify-center gap-2 drop-shadow-md",children:[t.displayName||"Unknown",(t.role==="admin"||t.role==="premium")&&d.jsx("div",{className:"text-brand-primary drop-shadow-none",title:"Premium Member",children:d.jsx(Io,{size:24,color:t.themeColor||"#6366f1"})})]}),d.jsx("div",{className:"flex justify-center mt-2",children:d.jsx("span",{className:"px-4 py-1.5 rounded-full text-sm font-semibold border backdrop-blur-md shadow-lg",style:{backgroundColor:`${a(t.role)}30`,color:"#fff",borderColor:`${a(t.role)}80`},children:t.role?.charAt(0).toUpperCase()+t.role?.slice(1)})})]}),d.jsx("div",{className:"flex justify-center gap-2 mt-4 flex-wrap",children:(()=>{const c=new Set(t.badges||[]);t.role==="admin"&&c.add("admin");const h=Array.from(c).filter(m=>m!=="premium").map(m=>VP[m]).filter(Boolean);return h.length===0?null:d.jsx("div",{className:"p-1.5 rounded-xl bg-black/40 backdrop-blur-md border border-white/10 flex gap-2",children:h.map(m=>{const g=m.icon;return d.jsxs("div",{className:"relative group cursor-help p-1 hover:bg-white/10 rounded transition-colors",children:[d.jsx(g,{size:20,color:m.color}),d.jsxs("div",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 px-2 py-1 bg-black text-white text-xs rounded shadow-lg whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-50",children:[d.jsx("div",{className:"font-bold",children:m.label}),m.description&&d.jsx("div",{className:"text-gray-300 font-normal text-[10px]",children:m.description}),d.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-black"})]})]},m.id)})})})()}),d.jsxs("div",{className:"flex items-center gap-3 mt-4 bg-black/30 px-4 py-2 rounded-full backdrop-blur-sm border border-white/5",children:[d.jsx("div",{className:Ct("w-3 h-3 rounded-full shadow-lg shadow-white/20",t.presence==="online"||!t.presence&&t.isOnline?"bg-green-500":t.presence==="idle"?"bg-yellow-500":t.presence==="dnd"?"bg-red-500":"bg-gray-500")}),t.status?d.jsxs("span",{className:"text-sm text-gray-200 flex gap-2",children:[d.jsx("span",{children:t.status.emoji}),d.jsx("span",{children:t.status.text})]}):d.jsx("span",{className:"text-sm text-gray-300",children:t.presence==="online"||!t.presence&&t.isOnline?"Online":"Offline"})]}),t.id!==nr().currentUser?.uid&&d.jsxs("div",{className:"flex gap-4 justify-center mt-6 w-full max-w-xs",children:[d.jsxs("button",{onClick:()=>r&&r(t),className:"flex-1 py-3 bg-white text-black font-bold rounded-xl hover:bg-gray-200 transition-colors shadow-lg flex items-center justify-center gap-2",children:[d.jsx(fM,{size:20})," Message"]}),d.jsx("button",{onClick:()=>l(t,"voice"),className:"p-3 bg-black/50 text-white rounded-xl hover:bg-black/70 border border-white/10 transition-colors backdrop-blur-sm",title:"Voice Call",children:d.jsx(mM,{size:22})}),d.jsx("button",{onClick:()=>l(t,"video"),className:"p-3 bg-black/50 text-white rounded-xl hover:bg-black/70 border border-white/10 transition-colors backdrop-blur-sm",title:"Video Call",children:d.jsx(id,{size:22})})]}),t.bio&&d.jsxs("div",{className:"mt-6 w-full text-left bg-black/20 p-4 rounded-xl backdrop-blur-sm border border-white/5",children:[d.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase mb-2 tracking-wider",children:"About Me"}),d.jsx("p",{className:"text-gray-200 text-sm leading-relaxed whitespace-pre-wrap",children:t.bio})]}),d.jsxs("div",{className:"mt-4 text-xs text-gray-500 font-medium uppercase tracking-widest",children:["Member since ",t.createdAt?new Date(t.createdAt.seconds*1e3).toLocaleDateString("en-US",{month:"short",year:"numeric"}):"Unknown"]})]})]})})},cc=({isOpen:t,onClose:e,onConfirm:n,title:r="Confirm Action",message:a="Are you sure you want to proceed?",confirmText:l="Confirm",cancelText:c="Cancel",variant:h="danger"})=>{const m=()=>{n(),e()};return d.jsx($s,{isOpen:t,onClose:e,title:r,size:"sm",children:d.jsxs("div",{className:"space-y-6",children:[d.jsx("p",{className:"text-dark-text",children:a}),d.jsxs("div",{className:"flex gap-3 justify-end",children:[d.jsx(et,{variant:"secondary",onClick:e,children:c}),d.jsx(et,{variant:h,onClick:m,children:l})]})]})})},pO=()=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let n=0;n<8;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},gO=({isOpen:t,onClose:e,serverId:n})=>{const[r,a]=I.useState(""),[l,c]=I.useState(!1),[h,m]=I.useState(!1),[g,v]=I.useState(!1),{success:b,error:_}=fs(),C=async()=>{c(!0);try{const j=pO();await rd(Oe(we,"inviteCodes",j),{serverId:n,createdAt:ft(),expiresAt:new Date(Date.now()+(g?365*24*60*60*1e3:1440*60*1e3)),maxUses:g?-1:1,uses:0,isActive:!0,isUnlimited:g}),a(j),b("Invite code generated!")}catch(j){console.error("Error generating invite:",j),_("Failed to generate invite code")}finally{c(!1)}},N=()=>{navigator.clipboard.writeText(r),m(!0),b("Copied to clipboard!"),setTimeout(()=>m(!1),2e3)};return d.jsx($s,{isOpen:t,onClose:e,title:"Invite Code",size:"sm",children:d.jsx("div",{className:"space-y-4",children:r?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"bg-dark-bg p-4 rounded-lg text-center",children:[d.jsx("div",{className:"text-3xl font-mono font-bold text-brand-primary mb-2",children:r}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(et,{variant:"secondary",onClick:N,className:"flex-1 flex items-center justify-center gap-2",children:h?d.jsxs(d.Fragment,{children:[d.jsx(Do,{size:20}),"Copied!"]}):d.jsxs(d.Fragment,{children:[d.jsx(gM,{size:20}),"Copy Code"]})}),d.jsx(et,{variant:"secondary",onClick:()=>{a(""),m(!1),v(!1)},className:"flex items-center justify-center gap-2 px-4",title:"Generate new code",children:d.jsx(IM,{size:20})})]})]}),d.jsxs("div",{className:"text-xs text-dark-muted space-y-1",children:[d.jsxs("div",{children:[" ",g?"Expires in 1 year":"Expires in 24 hours"]}),d.jsxs("div",{children:[" ",g?"Unlimited uses":"One-time use only"]}),d.jsx("div",{children:" Share with trusted users"})]}),d.jsx(et,{variant:"secondary",onClick:e,className:"w-full",children:"Close"})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("p",{className:"text-dark-text text-sm",children:"Generate an invite code for this server."}),d.jsxs("label",{className:"flex items-center gap-2 p-3 rounded bg-dark-bg cursor-pointer hover:bg-opacity-80 transition-colors",children:[d.jsx("input",{type:"checkbox",checked:g,onChange:j=>v(j.target.checked),className:"w-4 h-4 rounded border-gray-600 bg-dark-bg text-brand-primary focus:ring-brand-primary"}),d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-white text-sm font-medium",children:"Unlimited Uses"}),d.jsx("span",{className:"text-dark-muted text-xs",children:"Code will not expire after one use"})]})]})]}),d.jsx(et,{variant:"primary",onClick:C,disabled:l,className:"w-full",children:l?"Generating...":"Generate Invite Code"})]})})})},yO=[{emoji:"",text:"Gaming",type:"gaming"},{emoji:"",text:"Working",type:"working"},{emoji:"",text:"Listening to music",type:"music"},{emoji:"",text:"Watching",type:"watching"},{emoji:"",text:"Eating",type:"eating"},{emoji:"",text:"AFK",type:"afk"},{emoji:"",text:"Focusing",type:"focusing"},{emoji:"",text:"Studying",type:"studying"}],TE={online:{color:"bg-green-500",label:"Online",icon:""},idle:{color:"bg-yellow-500",label:"Idle",icon:""},dnd:{color:"bg-red-500",label:"Do Not Disturb",icon:""},invisible:{color:"bg-gray-500",label:"Invisible",icon:""},offline:{color:"bg-gray-500",label:"Offline",icon:""}},vO=t=>TE[t]||TE.offline,Ck=({status:t,size:e="md",className:n})=>{const r=vO(t),a={sm:"w-2.5 h-2.5",md:"w-3 h-3",lg:"w-4 h-4"};return t==="invisible"?null:d.jsx("div",{className:Ct("rounded-full border-2 border-dark-bg",r.color,a[e]||a.md,n),title:r.label})},bO=({dm:t,currentUserId:e,isSelected:n,onClick:r,onContextMenu:a})=>{const l=t.participants.find(m=>m!==e),[c,h]=I.useState(null);return I.useEffect(()=>{(async()=>{if(l)try{const g=await tp(Oe(we,"users",l));g.exists()&&h({id:g.id,...g.data()})}catch(g){console.error("Error fetching DM user:",g)}})()},[l]),c?d.jsxs("button",{onClick:r,onContextMenu:a,className:Ct("w-full flex items-center gap-3 px-2 py-2 rounded mb-1 group relative","text-dark-muted hover:bg-dark-hover hover:text-dark-text","transition-colors duration-150",n&&"bg-dark-hover text-dark-text"),children:[d.jsx("div",{className:"relative",children:c.photoUrl?d.jsx("img",{src:c.photoUrl,alt:c.displayName,className:"w-8 h-8 rounded-full object-cover"}):d.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white text-sm font-bold",children:c.displayName?.[0]?.toUpperCase()})}),d.jsxs("div",{className:"flex-1 text-left overflow-hidden",children:[d.jsxs("div",{className:"text-sm font-medium truncate flex justify-between items-center",children:[d.jsx("span",{children:c.displayName}),t.updatedAt&&d.jsx("span",{className:"text-[10px] text-gray-500 hidden group-hover:block",children:rp(t.updatedAt)})]}),d.jsx("div",{className:"text-xs truncate opacity-70",children:t.lastMessage?.text||"Start a conversation"})]})]}):null},xO=({dms:t,selectedDmId:e,onSelectDm:n})=>{const{currentUser:r}=nr(),[a,l]=I.useState(null),[c,h]=I.useState([]),m=(b,_)=>{b.preventDefault(),l({x:b.pageX,y:b.pageY,dmId:_.id})},g=async b=>{if(h(_=>[..._,b]),l(null),!!r)try{const _=Oe(we,"dms",b);await tt(_,{hiddenFor:Nd(r.uid)}),e===b&&n(null)}catch(_){console.error("Error deleting DM:",_),h(C=>C.filter(N=>N!==b))}};I.useEffect(()=>{const b=()=>l(null);return window.addEventListener("click",b),()=>window.removeEventListener("click",b)},[]);const v=t?.filter(b=>!c.includes(b.id))||[];return v.length===0?d.jsxs("div",{className:"px-4 py-8 text-center text-dark-muted text-sm",children:[d.jsx("p",{children:"No conversations yet."}),d.jsx("p",{className:"mt-2",children:"Start a DM from the friends list!"})]}):d.jsxs("div",{className:"flex-1 overflow-y-auto py-3",children:[d.jsxs("div",{className:"px-2",children:[d.jsx("div",{className:"text-xs font-semibold text-dark-muted uppercase px-2 mb-2 flex justify-between items-center",children:d.jsx("span",{children:"Direct Messages"})}),d.jsx("div",{className:"space-y-0.5",children:v.map(b=>d.jsx(bO,{dm:b,currentUserId:r.uid,isSelected:e===b.id,onClick:()=>n(b),onContextMenu:_=>m(_,b)},b.id))})]}),a&&d.jsx("div",{className:"fixed bg-dark-sidebar border border-dark-hover shadow-xl rounded-md z-50 py-1 min-w-[160px]",style:{top:a.y,left:a.x},children:d.jsxs("button",{onClick:()=>g(a.dmId),className:"w-full text-left px-4 py-2 hover:bg-red-500/10 text-red-400 hover:text-red-500 text-sm flex items-center gap-2 transition-colors",children:[d.jsx(ki,{size:16}),"Delete Conversation"]})})]})},CE=({server:t,channels:e,selectedChannel:n,onSelectChannel:r,onOpenSettings:a,onOpenAdmin:l,onLogout:c,userProfile:h,serverId:m,userRole:g,userId:v,dms:b,selectedDm:_,onSelectDm:C})=>{const[N,j]=I.useState(!1),[k,B]=I.useState(!1),[$,R]=I.useState(!1),V=()=>{B(!1),c()};return d.jsxs("div",{className:"w-60 bg-dark-sidebar flex flex-col h-full",children:[d.jsxs("div",{className:"h-12 px-4 flex items-center justify-between border-b border-dark-hover shadow-md",children:[d.jsx("h2",{className:"font-semibold text-dark-text truncate",children:t?.name||"Lumo"}),d.jsxs("div",{className:"flex items-center gap-1",children:[m&&g==="admin"&&d.jsx("button",{onClick:()=>R(!0),className:"p-1.5 hover:bg-dark-hover rounded transition-colors",title:"Generate Invite",children:d.jsx(OM,{className:"text-green-500",size:20})}),h?.role==="admin"&&d.jsx("button",{onClick:l,className:"p-1.5 hover:bg-dark-hover rounded transition-colors",title:"Admin Panel",children:d.jsx(yC,{className:"text-admin",size:20})})]})]}),d.jsx("div",{className:"flex-1 overflow-y-auto py-3",children:m==="home"?d.jsx(xO,{dms:b,selectedDmId:_?.id,onSelectDm:C}):d.jsxs("div",{className:"px-2",children:[d.jsx("div",{className:"text-xs font-semibold text-dark-muted uppercase px-2 mb-1",children:"Text Channels"}),e.map(z=>d.jsxs("button",{onClick:()=>r(z),className:Ct("w-full flex items-center gap-2 px-2 py-1.5 rounded","text-dark-muted hover:bg-dark-hover hover:text-dark-text","transition-colors duration-150",n?.id===z.id&&"bg-dark-hover text-dark-text"),children:[d.jsx(sp,{className:"flex-shrink-0"}),d.jsx("span",{className:"truncate text-sm flex-1 text-left",children:z.name}),z.locked&&d.jsx(sM,{className:"flex-shrink-0 text-yellow-500",size:14,title:"Locked channel"})]},z.id))]})}),d.jsxs("div",{className:"h-20 bg-dark-bg px-2 flex items-center justify-between gap-2 border-t border-dark-hover -ml-[72px] w-[calc(100%+72px)] relative z-10",children:[d.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1 cursor-pointer hover:bg-dark-hover rounded p-2 transition-colors",onClick:()=>j(!0),children:[d.jsxs("div",{className:"relative flex-shrink-0",children:[h?.photoUrl?d.jsx("img",{src:h.photoUrl,alt:h.displayName,className:"w-12 h-12 rounded-full object-cover",onError:z=>{z.target.style.display="none",z.target.nextSibling.style.display="flex"}},h.photoUrl):null,d.jsx("div",{className:"w-12 h-12 rounded-full bg-brand-primary flex items-center justify-center text-white font-bold text-lg",style:{display:h?.photoUrl?"none":"flex"},children:h?.displayName?.[0]?.toUpperCase()||"U"},`fallback-${h?.photoUrl}`),d.jsx("div",{className:"absolute bottom-0 right-0",children:d.jsx(Ck,{status:h?.presence||"online",size:"md"})})]}),d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("div",{className:"text-base font-semibold text-dark-text truncate",children:h?.displayName||"User"}),d.jsx("div",{className:"text-sm text-dark-muted truncate",children:h?.role||"member"})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:a,className:"p-2.5 hover:bg-dark-hover rounded-lg transition-colors",title:"Settings",children:d.jsx(np,{className:"text-dark-muted hover:text-dark-text",size:24})}),d.jsx("button",{onClick:()=>B(!0),className:"p-2.5 hover:bg-dark-hover rounded-lg transition-colors",title:"Logout",children:d.jsx(iM,{className:"text-dark-muted hover:text-admin",size:24})})]})]}),d.jsx(vb,{user:h,isOpen:N,onClose:()=>j(!1)}),d.jsx(cc,{isOpen:k,onClose:()=>B(!1),onConfirm:V,title:"Logout",message:"Are you sure you want to logout?",confirmText:"Logout",variant:"danger"}),d.jsx(gO,{isOpen:$,onClose:()=>R(!1),serverId:m})]})},_O=(t,e)=>{if(e===0)return"0 KB/s";const n=t/e;return n>1024*1024?`${(n/(1024*1024)).toFixed(1)} MB/s`:`${(n/1024).toFixed(0)} KB/s`},bb=(t,e)=>new Promise((n,r)=>{const a="5c1c5b7cae2edd508a2f35f98c4eec96",l=new FormData;l.append("image",t);const c=new XMLHttpRequest;c.open("POST",`https://api.imgbb.com/1/upload?key=${a}`);const h=Date.now();c.upload.onprogress=m=>{if(m.lengthComputable){const g=m.loaded/m.total*100,v=(Date.now()-h)/1e3,b=_O(m.loaded,v);e&&e(g,b)}},c.onload=()=>{if(c.status===200)try{const m=JSON.parse(c.responseText);m.success?n(m.data.url):r(new Error(m.error?.message||"Failed to upload image"))}catch{r(new Error("Invalid response from ImgBB"))}else r(new Error(`Upload failed with status ${c.status}`))},c.onerror=()=>r(new Error("Network error during upload")),c.send(l)}),wO=({server:t,onClose:e,onDelete:n,position:r,userRole:a,userId:l})=>{const[c,h]=I.useState(!1),[m,g]=I.useState(t.name),[v,b]=I.useState(!1),[_,C]=I.useState(!1),[N,j]=I.useState(t.icon||null),[k,B]=I.useState(null),[$,R]=I.useState({progress:0,speed:""}),[V,z]=I.useState(!1),[F,S]=I.useState(!1),E=I.useRef(null),{success:A,error:M}=fs(),O=async()=>{if(!m.trim()){M("Server name is required");return}b(!0);try{await tt(Oe(we,"servers",t.id),{name:m.trim()}),A("Server updated!"),h(!1),e()}catch(G){console.error("Error updating server:",G),M("Failed to update server")}finally{b(!1)}},U=async()=>{try{const G=dt(we,"servers",t.id,"members"),ne=await jo(G),X=[];ne.forEach(Ae=>{const De=Ae.data().userId;X.push(tt(Oe(we,"users",De),{servers:dm(t.id),...Ae.data().currentServer===t.id?{currentServer:null}:{}}))}),await Promise.all(X),await lc(Oe(we,"servers",t.id)),A("Server deleted"),z(!1),n(),e()}catch(G){console.error("Error deleting server:",G),M("Failed to delete server"),z(!1)}},P=async()=>{try{await tt(Oe(we,"users",l),{servers:dm(t.id),currentServer:null}),await lc(Oe(we,"servers",t.id,"members",l)),await tt(Oe(we,"servers",t.id),{memberCount:hm(-1)}),A("Left server"),S(!1),e()}catch(G){console.error("Error leaving server:",G),S(!1),e()}},xe=G=>{const ne=G.target.files?.[0];if(ne){if(!ne.type.startsWith("image/")){M("Please select an image file");return}if(ne.size>10*1024*1024){M("Image size must be less than 10MB");return}B(ne),j(URL.createObjectURL(ne))}},Ee=async()=>{if(!k){M("Please select an image first");return}b(!0);try{const G=await bb(k,(ne,X)=>{R({progress:ne,speed:X})});await tt(Oe(we,"servers",t.id),{icon:G}),A("Server icon updated!"),C(!1),e()}catch(G){console.error("Error updating icon:",G),M("Failed to update icon")}finally{b(!1),R({progress:0,speed:""})}};return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 z-40",onClick:e}),d.jsx("div",{className:"fixed bg-dark-sidebar border border-dark-hover rounded-lg shadow-xl py-2 z-50 w-64",style:{top:r.y,left:r.x},children:c?d.jsxs("div",{className:"px-3 py-2 space-y-2",children:[d.jsx(dn,{value:m,onChange:G=>g(G.target.value),placeholder:"Server name",autoFocus:!0}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(et,{variant:"secondary",onClick:()=>h(!1),className:"flex-1 text-xs py-1",children:"Cancel"}),d.jsx(et,{variant:"primary",onClick:O,disabled:v,className:"flex-1 text-xs py-1",children:v?"Saving...":"Save"})]})]}):_?d.jsxs("div",{className:"px-3 py-2 space-y-3",children:[d.jsx("input",{type:"file",ref:E,onChange:xe,accept:"image/*",className:"hidden"}),d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx("button",{onClick:()=>E.current?.click(),className:"w-16 h-16 rounded-full bg-dark-hover border-2 border-dashed border-dark-muted hover:border-brand-primary flex items-center justify-center transition-colors overflow-hidden",children:N?d.jsx("img",{src:N,alt:"Preview",className:"w-full h-full object-cover"}):d.jsx(Iy,{size:24,className:"text-dark-muted"})}),d.jsx("span",{className:"text-xs text-dark-muted mt-2",children:"Click to select image"})]}),v&&$.progress>0&&d.jsxs("div",{className:"text-xs text-center text-dark-muted",children:[Math.round($.progress),"% (",$.speed,")"]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(et,{variant:"secondary",onClick:()=>{C(!1),B(null),j(t.icon||null)},className:"flex-1 text-xs py-1",children:"Cancel"}),d.jsx(et,{variant:"primary",onClick:Ee,disabled:v||!k,className:"flex-1 text-xs py-1",children:v?"Uploading...":"Save"})]})]}):d.jsx(d.Fragment,{children:a==="admin"?d.jsxs(d.Fragment,{children:[d.jsxs("button",{onClick:()=>h(!0),className:"w-full px-4 py-2 text-left text-sm text-dark-text hover:bg-dark-hover transition-colors flex items-center gap-2",children:[d.jsx(Xl,{size:16}),"Edit Server Name"]}),d.jsxs("button",{onClick:()=>C(!0),className:"w-full px-4 py-2 text-left text-sm text-dark-text hover:bg-dark-hover transition-colors flex items-center gap-2",children:[d.jsx(Iy,{size:16}),"Change Icon"]}),d.jsxs("button",{onClick:()=>z(!0),className:"w-full px-4 py-2 text-left text-sm text-admin hover:bg-dark-hover transition-colors flex items-center gap-2",children:[d.jsx(ki,{size:16}),"Delete Server"]})]}):d.jsxs("button",{onClick:()=>S(!0),className:"w-full px-4 py-2 text-left text-sm text-orange-500 hover:bg-dark-hover transition-colors flex items-center gap-2",children:[d.jsx(nM,{size:16}),"Leave Server"]})})}),d.jsx(cc,{isOpen:V,onClose:()=>z(!1),onConfirm:U,title:"Delete Server",message:`Are you sure you want to delete "${t.name}"? This action cannot be undone!`,confirmText:"Delete",confirmVariant:"danger"}),d.jsx(cc,{isOpen:F,onClose:()=>S(!1),onConfirm:P,title:"Leave Server",message:`Are you sure you want to leave "${t.name}"?`,confirmText:"Leave",confirmVariant:"warning"})]})},EO=""+new URL("lumo-logo-DYOsjf-q.png",import.meta.url).href,kE=({servers:t,currentServerId:e,onServerChange:n,onCreateServer:r,onJoinServer:a,userRole:l,userId:c,unreadMentions:h={}})=>{const[m,g]=I.useState(!1),[v,b]=I.useState(null),_=(C,N)=>{C.preventDefault(),b({server:N,position:{x:C.clientX,y:C.clientY}})};return d.jsxs("div",{className:"w-20 bg-dark-bg h-full flex flex-col items-center",children:[d.jsx("div",{className:"flex flex-col items-center",children:d.jsx("button",{onClick:()=>n("home"),className:Ct("transition-all duration-200 rounded-2xl overflow-hidden",e==="home"||!e?"rounded-xl ring-2 ring-brand-primary ring-offset-2 ring-offset-dark-bg":"hover:rounded-xl"),children:d.jsx("img",{src:EO,alt:"Home",className:"w-16 h-16 object-contain cursor-pointer bg-dark-bg p-1"})})}),d.jsx("div",{className:"w-8 h-0.5 bg-dark-hover my-2"}),d.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1 overflow-y-auto",children:[t.map(C=>d.jsxs("div",{className:"relative",children:[d.jsx("button",{onClick:()=>n(C.id),onContextMenu:N=>_(N,C),className:Ct("w-12 h-12 rounded-2xl flex items-center justify-center transition-all duration-200","hover:rounded-xl",e===C.id?"bg-brand-primary text-white rounded-xl":"bg-dark-sidebar text-dark-text hover:bg-brand-primary hover:text-white"),title:C.name,children:C.icon?d.jsx("img",{src:C.icon,alt:C.name,className:"w-full h-full rounded-2xl object-cover"}):d.jsx("span",{className:"text-xl font-bold",children:C.name.charAt(0).toUpperCase()})}),h[C.id]?.count>0&&d.jsx("div",{className:"absolute -top-1 -right-1 min-w-5 h-5 bg-red-500 rounded-full flex items-center justify-center border-2 border-dark-bg pointer-events-none",children:d.jsx("span",{className:"text-white text-xs font-bold px-1",children:h[C.id].count>99?"99+":h[C.id].count})})]},C.id)),d.jsx("div",{className:"w-8 h-0.5 bg-dark-hover my-1"}),d.jsxs("div",{className:"relative pb-2",children:[d.jsx("button",{id:"add-server-btn",onClick:C=>{const N=C.currentTarget.getBoundingClientRect();document.documentElement.style.setProperty("--btn-top",`${N.top}px`),g(!m)},className:"w-12 h-12 rounded-2xl bg-dark-sidebar text-green-500 flex items-center justify-center hover:bg-green-500 hover:text-white hover:rounded-xl transition-all duration-200",title:"Add Server",children:d.jsx(Kl,{size:28})}),m&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 z-50",onClick:()=>g(!1)}),d.jsxs("div",{className:"fixed left-[80px] bg-dark-sidebar border border-dark-hover rounded-lg shadow-lg py-2 z-50 w-48",style:{top:"var(--btn-top)"},children:[l==="admin"&&d.jsx("button",{onClick:()=>{r(),g(!1)},className:"w-full px-4 py-2 text-left text-sm text-dark-text hover:bg-dark-hover transition-colors",children:"Create Server"}),d.jsx("button",{onClick:()=>{a(),g(!1)},className:"w-full px-4 py-2 text-left text-sm text-dark-text hover:bg-dark-hover transition-colors",children:"Join Server"})]})]})]})]}),v&&d.jsx(wO,{server:v.server,position:v.position,userRole:l,userId:c,onClose:()=>b(null),onDelete:()=>{b(null)}})]})},SO=300*1e3,TO=t=>{const e=I.useRef(null);I.useEffect(()=>{if(!t)return;const n=async()=>{try{await tt(Oe(we,"users",t),{lastSeen:ft(),isOnline:!0})}catch(a){console.error("Error updating presence:",a)}};n(),e.current=setInterval(n,SO);const r=()=>{navigator.sendBeacon&&n()};return window.addEventListener("beforeunload",r),()=>{e.current&&clearInterval(e.current),window.removeEventListener("beforeunload",r)}},[t])},CO=(t,e=6)=>{if(!t)return!1;const n=t.toMillis?t.toMillis():new Date(t).getTime(),r=Date.now(),a=e*60*1e3;return r-n<a},AE=({users:t,currentUserId:e,onStartDm:n})=>{const{currentServer:r}=Rd(),[a,l]=I.useState(null),[c,h]=I.useState([]);I.useEffect(()=>{if(!r||r==="home"){h([]);return}const k=os(dt(we,"servers",r,"roles"));return Dr(k,$=>{const R=[];$.forEach(V=>{R.push({id:V.id,...V.data()})}),h(R)})},[r]);const m=k=>k.presence==="invisible"?!1:CO(k.lastSeen),g=t.filter(k=>m(k)),v=t.filter(k=>!m(k)),b=g.reduce((k,B)=>{const $=B.serverRole||B.role||"member";return k[$]||(k[$]=[]),k[$].push(B),k},{}),N=[...[{name:"admin",position:-3},{name:"moderator",position:-2},{name:"member",position:-1}],...c.map(k=>({name:k.name,position:k.position??999}))].sort((k,B)=>k.position-B.position).map(k=>k.name).filter(k=>b[k]?.length>0),j=k=>{const B=m(k);return d.jsxs("div",{onClick:()=>l(k),className:Ct("flex items-center gap-2 px-2 py-1.5 rounded cursor-pointer","hover:bg-dark-hover transition-colors",k.id===e&&"bg-dark-hover/50",!B&&"opacity-50"),children:[d.jsxs("div",{className:"relative flex-shrink-0",children:[k.photoUrl?d.jsx("img",{src:k.photoUrl,alt:k.displayName,className:"w-8 h-8 rounded-full object-cover",onError:$=>{$.target.style.display="none",$.target.nextSibling.style.display="flex"}}):null,d.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold text-sm",style:{display:k.photoUrl?"none":"flex"},children:k.displayName?.[0]?.toUpperCase()||"U"}),d.jsx("div",{className:"absolute bottom-0 right-0",children:d.jsx(Ck,{status:B?k.presence||"online":"offline",size:"sm"})})]}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-sm text-dark-text truncate",children:k.displayName||"Unknown"}),d.jsx("span",{className:Ct("text-xs px-1.5 py-0.5 rounded border",PC(k.serverRole||k.role)),children:(k.serverRole||k.role)?.charAt(0).toUpperCase()+(k.serverRole||k.role)?.slice(1)})]}),k.status&&d.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[d.jsx("span",{className:"text-xs",children:k.status.emoji}),d.jsx("span",{className:"text-xs text-dark-muted truncate",children:k.status.text})]})]})]},k.id)};return d.jsxs("div",{className:"w-60 bg-dark-sidebar h-full overflow-y-auto py-3",children:[d.jsxs("div",{className:"px-2",children:[N.map(k=>{const B=b[k]||[];return B.length===0?null:d.jsxs("div",{className:"mb-4",children:[d.jsxs("div",{className:"text-xs font-semibold text-dark-muted uppercase px-2 mb-2",children:[k.charAt(0).toUpperCase()+k.slice(1),"s  ",B.length]}),B.map(j)]},k)}),v.length>0&&d.jsxs("div",{className:"mt-4",children:[d.jsxs("div",{className:"text-xs font-semibold text-gray-500 uppercase px-2 mb-2",children:["Offline  ",v.length]}),v.map(j)]})]}),d.jsx(vb,{user:a,isOpen:!!a,onClose:()=>l(null),onMessage:k=>{n&&n(k),l(null)}})]})},kO=({isOpen:t,onClose:e,onConfirm:n,url:r})=>{const[a,l]=I.useState(!1),c=()=>{a&&localStorage.setItem("dontAskExternalLinks","true"),n(),e()};return d.jsx($s,{isOpen:t,onClose:e,title:"External Link Warning",size:"sm",children:d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:d.jsxs("p",{className:"text-dark-text text-sm",children:[d.jsx("span",{className:"font-semibold text-yellow-500",children:" Security Warning"}),d.jsx("br",{}),d.jsx("br",{}),"You are about to open an external link. External links may lead to harmful or malicious websites. Please ensure you trust the source before proceeding."]})}),d.jsxs("div",{className:"bg-dark-bg p-3 rounded-lg",children:[d.jsx("p",{className:"text-xs text-dark-muted mb-1",children:"Link:"}),d.jsx("p",{className:"text-dark-text text-sm break-all font-mono",children:r})]}),d.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:a,onChange:h=>l(h.target.checked),className:`w-4 h-4 rounded border-dark-hover bg-dark-input text-brand-primary 
                       focus:ring-2 focus:ring-brand-primary cursor-pointer`}),d.jsx("span",{className:"text-sm text-dark-text",children:"Don't ask me again"})]}),d.jsxs("div",{className:"flex gap-3 justify-end pt-2",children:[d.jsx(et,{variant:"secondary",onClick:e,children:"Cancel"}),d.jsx(et,{variant:"primary",onClick:c,children:"Open Link"})]})]})})},AO=t=>{if(!t)return t;let e=t;return e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=e.replace(/```([^`]+)```/g,'<pre class="bg-dark-input text-dark-text p-2 rounded my-1 overflow-x-auto"><code>$1</code></pre>'),e=e.replace(/`([^`]+)`/g,'<code class="bg-dark-input text-dark-text px-1 py-0.5 rounded text-sm">$1</code>'),e=e.replace(/\*\*([^*]+)\*\*/g,'<strong class="font-bold">$1</strong>'),e=e.replace(/\*([^*]+)\*/g,'<em class="italic">$1</em>'),e=e.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer" class="text-brand-primary hover:underline">$1</a>'),e=e.replace(/@(everyone|[a-zA-Z0-9_]+)\b/g,'<span class="text-brand-primary font-medium cursor-pointer hover:underline" data-mention="$1">$1</span>'),e=e.replace(/\n/g,"<br>"),e},kk=({children:t,onMentionClick:e})=>{const n=AO(t),r=a=>{const l=a.target.getAttribute("data-mention");l&&e&&e(l)};return d.jsx("div",{dangerouslySetInnerHTML:{__html:n},className:"markdown-content",onClick:r})},NO=["","","","","","","","","",""],NE=({onSelect:t,onClose:e})=>d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 z-40",onClick:e}),d.jsx("div",{className:"absolute left-0 bottom-full mb-2 bg-dark-sidebar border border-dark-hover rounded-lg shadow-lg p-2 z-50",children:d.jsx("div",{className:"flex gap-1",children:NO.map(n=>d.jsx("button",{onClick:()=>t(n),className:"w-8 h-8 flex items-center justify-center text-lg hover:bg-dark-hover rounded transition-colors",title:n,children:n},n))})})]}),RO=({message:t,currentUserId:e,serverId:n,channelId:r,users:a})=>{const[l,c]=I.useState(!1),h=t.poll;if(!h)return null;const m=t.userId===e,g=h.ended===!0,v=h.options.reduce((j,k,B)=>j+(h.votes?.[`option_${B}`]?.length||0),0),b=h.options.map((j,k)=>h.votes?.[`option_${k}`]?.includes(e)?k:-1).filter(j=>j!==-1);b.length>0;const _=async j=>{if(!(l||g)){c(!0);try{const k=`poll.votes.option_${j}`,B=Oe(we,"servers",n,"channels",r,"messages",t.id);if(h.votes?.[`option_${j}`]?.includes(e))await tt(B,{[k]:dm(e)});else{if(!h.multipleChoice&&b.length>0)for(const R of b)await tt(B,{[`poll.votes.option_${R}`]:dm(e)});await tt(B,{[k]:Nd(e)})}}catch(k){console.error("Error voting:",k)}finally{c(!1)}}},C=async()=>{if(!(!m||g))try{const j=Oe(we,"servers",n,"channels",r,"messages",t.id);await tt(j,{"poll.ended":!0})}catch(j){console.error("Error ending poll:",j)}},N=j=>h.anonymous?null:(h.votes?.[`option_${j}`]||[]).map(B=>a?.find($=>$.id===B)?.displayName||"Unknown").join(", ");return d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4 mt-2 border border-dark-hover max-w-md",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx(db,{className:"text-brand-primary",size:20}),d.jsx("span",{className:"text-xs text-dark-muted uppercase tracking-wide font-semibold",children:"Poll"}),h.multipleChoice&&d.jsx("span",{className:"text-xs text-dark-muted bg-dark-hover px-2 py-0.5 rounded",children:"Multiple Choice"}),g&&d.jsx("span",{className:"text-xs text-red-400 bg-red-400/10 px-2 py-0.5 rounded",children:"Ended"})]}),d.jsx("h3",{className:"text-dark-text font-semibold mb-4",children:h.question}),d.jsx("div",{className:"space-y-2",children:h.options.map((j,k)=>{const B=h.votes?.[`option_${k}`]?.length||0,$=v>0?Math.round(B/v*100):0,R=b.includes(k),V=N(k);return d.jsxs("button",{onClick:()=>_(k),disabled:l||g,className:`w-full text-left p-3 rounded-lg relative overflow-hidden transition-all group ${R?"bg-brand-primary/20 border-2 border-brand-primary":"bg-dark-sidebar border border-dark-hover hover:border-dark-muted"} ${g?"cursor-not-allowed opacity-80":""}`,children:[v>0&&d.jsx("div",{className:`absolute inset-0 transition-all duration-500 ${R?"bg-brand-primary/30":"bg-dark-hover/50"}`,style:{width:`${$}%`}}),d.jsxs("div",{className:"relative flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[R&&d.jsx("div",{className:"w-5 h-5 bg-brand-primary rounded-full flex items-center justify-center",children:d.jsx(Do,{className:"text-white",size:14})}),d.jsx("span",{className:`text-sm ${R?"text-dark-text font-medium":"text-dark-muted"}`,children:j})]}),v>0&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("span",{className:"text-xs text-dark-muted",children:[B," vote",B!==1?"s":""]}),d.jsxs("span",{className:"text-sm font-semibold text-dark-text",children:[$,"%"]})]})]}),V&&B>0&&d.jsx("div",{className:"text-xs text-dark-muted mt-1 truncate opacity-0 group-hover:opacity-100 transition-opacity",children:V})]},k)})}),d.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-dark-hover",children:[d.jsxs("div",{className:"flex items-center gap-1 text-xs text-dark-muted",children:[d.jsx(ub,{size:14}),d.jsxs("span",{children:[v," total vote",v!==1?"s":""]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[h.anonymous&&d.jsx("span",{className:"text-xs text-dark-muted",children:"Anonymous"}),m&&!g&&d.jsxs("button",{onClick:C,className:"flex items-center gap-1.5 text-xs font-medium text-red-400 bg-red-400/10 hover:bg-red-400/20 px-3 py-1.5 rounded transition-all border border-red-400/20 hover:border-red-400/30",children:[d.jsx(uM,{size:14}),"End Poll"]})]})]})]})},Ak=/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:watch\?v=|embed\/|shorts\/)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,Nk=/(?:https?:\/\/)?(?:open\.)?spotify\.com\/(track|album|playlist|artist|episode|show)\/([a-zA-Z0-9]+)/,Rk=/(?:https?:\/\/)?(?:www\.)?(?:twitter\.com|x\.com)\/(\w+)\/status\/(\d+)/,jO=/\.(jpg|jpeg|png|gif|webp|bmp|svg)(\?.*)?$/i,IO=/\.(mp4|webm|ogg|mov)(\?.*)?$/i,DO=/\.(mp3|wav|ogg|m4a)(\?.*)?$/i,MO=t=>{const e=t.match(Ak);return e?e[1]:null},PO=t=>{const e=t.match(Nk);return e?{type:e[1],id:e[2]}:null},OO=t=>{const e=t.match(Rk);return e?{user:e[1],id:e[2]}:null},jk=t=>Ak.test(t)?"youtube":Nk.test(t)?"spotify":Rk.test(t)?"twitter":jO.test(t)?"image":IO.test(t)?"video":DO.test(t)?"audio":t.includes("/raw/upload/")||/\.(zip|rar|7z|exe|pdf|docx|xlsx|txt|iso|yml|json|xml|csv)$/i.test(t)?"file":"generic",Ik=t=>{const e=/(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/g;return t.match(e)||[]},LO=({url:t})=>{const e=MO(t),[n,r]=I.useState(!1);if(!e)return null;const a=`https://img.youtube.com/vi/${e}/mqdefault.jpg`;return d.jsxs("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar",children:[d.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border-b border-dark-hover",children:[d.jsx(LP,{className:"text-red-500",size:18}),d.jsx("span",{className:"text-xs text-dark-muted font-medium",children:"YouTube"})]}),n?d.jsx("div",{className:"relative pt-[56.25%]",children:d.jsx("iframe",{className:"absolute inset-0 w-full h-full",src:`https://www.youtube.com/embed/${e}?autoplay=1`,title:"YouTube video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):d.jsxs("div",{className:"relative cursor-pointer group",onClick:()=>r(!0),children:[d.jsx("img",{src:a,alt:"YouTube thumbnail",className:"w-full h-auto",onError:l=>{l.target.src=`https://img.youtube.com/vi/${e}/default.jpg`}}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 group-hover:bg-black/50 transition-colors",children:d.jsx(cM,{className:"text-white/90 group-hover:text-white group-hover:scale-110 transition-all",size:64})})]}),d.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[d.jsx("span",{className:"text-xs text-dark-muted truncate",children:t}),d.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-dark-muted hover:text-brand-primary transition-colors",onClick:l=>l.stopPropagation(),children:d.jsx(lb,{size:16})})]})]})},VO=({url:t})=>{const e=PO(t);if(!e)return null;const r={track:152,album:352,playlist:352,artist:352,episode:232,show:232}[e.type]||152;return d.jsxs("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar",children:[d.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border-b border-dark-hover",children:[d.jsx(OP,{className:"text-green-500",size:18}),d.jsxs("span",{className:"text-xs text-dark-muted font-medium",children:["Spotify ",e.type]})]}),d.jsx("iframe",{src:`https://open.spotify.com/embed/${e.type}/${e.id}?utm_source=generator&theme=0`,width:"100%",height:r,frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",className:"bg-transparent"}),d.jsxs("div",{className:"px-3 py-2 flex items-center justify-between border-t border-dark-hover",children:[d.jsx("span",{className:"text-xs text-dark-muted truncate",children:t}),d.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-dark-muted hover:text-green-500 transition-colors",children:d.jsx(lb,{size:16})})]})]})},UO=({url:t})=>d.jsx("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar",children:d.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"block cursor-pointer",children:d.jsx("img",{src:t,alt:"Attachment",className:"w-full h-auto max-h-[400px] object-contain bg-black/50",loading:"lazy",onError:e=>{e.target.style.display="none"}})})}),zO=({url:t})=>{const e=I.useRef(null),[n,r]=I.useState(!1),[a,l]=I.useState(!1);I.useEffect(()=>{if(window.twttr)c();else{const h=document.createElement("script");h.src="https://platform.twitter.com/widgets.js",h.async=!0,h.onload=()=>{window.twttr&&e.current&&c()},h.onerror=()=>l(!0),document.body.appendChild(h)}},[t]);const c=()=>{window.twttr&&e.current&&(e.current.innerHTML="",window.twttr.widgets.createTweet(OO(t)?.id,e.current,{theme:"dark",conversation:"none"}).then(h=>{r(!!h),h||l(!0)}).catch(()=>l(!0)))};return a?d.jsx("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar p-3",children:d.jsxs("div",{className:"flex items-center gap-2 text-dark-muted",children:[d.jsx(dE,{className:"text-sky-400",size:18}),d.jsx("span",{className:"text-sm",children:"Tweet could not be loaded"}),d.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"ml-auto text-brand-primary hover:underline text-sm",children:"View on X"})]})}):d.jsxs("div",{className:"mt-2 max-w-md",children:[!n&&d.jsx("div",{className:"rounded-lg border border-dark-hover bg-dark-sidebar p-4 animate-pulse",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(dE,{className:"text-sky-400",size:18}),d.jsx("span",{className:"text-sm text-dark-muted",children:"Loading tweet..."})]})}),d.jsx("div",{ref:e,className:n?"":"hidden"})]})},BO=({url:t})=>d.jsx("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar",children:d.jsx("video",{src:t,controls:!0,className:"w-full max-h-[400px] bg-black"})}),FO=({url:t})=>d.jsxs("div",{className:"mt-2 max-w-md rounded-lg border border-dark-hover bg-dark-sidebar p-3 flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-primary/20 flex items-center justify-center flex-shrink-0",children:d.jsx(TM,{className:"text-brand-primary",size:24})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"text-xs text-dark-muted mb-1 truncate",children:t.split("/").pop()}),d.jsx("audio",{src:t,controls:!0,className:"w-full h-8"})]})]}),HO=({url:t})=>{const e=t.split("/").pop().split("?")[0]||"file",n=e.split(".").pop();return d.jsxs("div",{className:"mt-2 max-w-md rounded-lg border border-dark-hover bg-dark-sidebar p-3 flex items-center gap-3 hover:bg-dark-hover transition-colors",children:[d.jsx("div",{className:"w-12 h-12 rounded bg-dark-input flex items-center justify-center flex-shrink-0",children:d.jsx("span",{className:"text-xs font-bold text-dark-text uppercase",children:n.length<5?n:"FILE"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"text-sm font-medium text-dark-text truncate",children:e}),d.jsx("div",{className:"text-xs text-dark-muted",children:"Attachment"})]}),d.jsx("a",{href:t,download:!0,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-full hover:bg-white/10 text-dark-muted hover:text-white transition-colors",title:"Download",children:d.jsx(bM,{size:20})})]})},$O=({url:t})=>{let e="";try{e=new URL(t).hostname.replace("www.","")}catch{e=t}return d.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"mt-2 flex items-center gap-3 max-w-md rounded-lg border border-dark-hover bg-dark-sidebar p-3 hover:bg-dark-hover transition-colors group",children:[d.jsx("div",{className:"w-10 h-10 rounded-lg bg-brand-primary/20 flex items-center justify-center",children:d.jsx(lb,{className:"text-brand-primary",size:20})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"text-sm font-medium text-dark-text truncate group-hover:text-brand-primary transition-colors",children:e}),d.jsx("div",{className:"text-xs text-dark-muted truncate",children:t})]})]})},qO=({url:t})=>{switch(jk(t)){case"youtube":return d.jsx(LO,{url:t});case"spotify":return d.jsx(VO,{url:t});case"twitter":return d.jsx(zO,{url:t});case"image":return d.jsx(UO,{url:t});case"video":return d.jsx(BO,{url:t});case"audio":return d.jsx(FO,{url:t});case"file":return d.jsx(HO,{url:t});default:return d.jsx($O,{url:t})}},GO=({text:t})=>{const n=Ik(t).slice(0,3);return n.length===0?null:d.jsx("div",{className:"space-y-2",children:n.map((r,a)=>d.jsx(qO,{url:r},`${r}-${a}`))})},Dk=({serverId:t,channelId:e,users:n,currentUserId:r,userRole:a,onReply:l,onMessagesChange:c})=>{const[h,m]=I.useState([]),[g,v]=I.useState(null),[b,_]=I.useState(null),[C,N]=I.useState(null),[j,k]=I.useState(null),[B,$]=I.useState(""),[R,V]=I.useState(null),[z,F]=I.useState("bottom"),[S,E]=I.useState(null),[A,M]=I.useState(!0),[O,U]=I.useState(!1),[P,xe]=I.useState(null),Ee=I.useRef(null),G=I.useRef(null),ne=I.useRef(0),X=I.useRef(!0),Ae=I.useRef(n);I.useEffect(()=>{Ae.current=n},[n]);const{success:De,error:H}=fs(),ee=()=>{Ee.current?.scrollIntoView({behavior:"smooth"})};I.useEffect(()=>{if(!e||!e)return;const pe=os(t?dt(we,"servers",t,"channels",e,"messages"):dt(we,"dms",e,"messages"),Cy("timestamp","desc"),ky(20)),Ie=Dr(pe,Q=>{const le=[];if(Q.forEach(ke=>{le.push({id:ke.id,...ke.data()})}),le.reverse(),!X.current&&le.length>ne.current&&r){const ke=Ae.current?.find(ie=>ie.id===r);if(ke?.displayName){const ie=le.slice(ne.current),ge=ie.some(Me=>Me.userId!==r&&qD(Me.text,ke.displayName)),be=ie.some(Me=>{const nt=Me.userId!==r&&Me.replyTo?.userId===r;return nt&&console.log("Reply notification:",Me),nt});(ge||be)&&(console.log("Playing notification sound",{hasMention:ge,hasReply:be}),Ay())}}ne.current=le.length,m(le),X.current&&(X.current=!1),le.length>0&&xe(le[0]),M(le.length===20),c&&c(le),setTimeout(ee,100)});return()=>{Ie(),X.current=!0}},[e,t,r,c]);const ae=async()=>{if(!e||!P||O||!A)return;U(!0);const oe=G.current,pe=oe?.scrollHeight||0;try{const Ie=os(t?dt(we,"servers",t,"channels",e,"messages"):dt(we,"dms",e,"messages"),Cy("timestamp","desc"),oD(P.timestamp),ky(20)),Q=await jo(Ie),le=[];Q.forEach(ke=>{le.push({id:ke.id,...ke.data()})}),le.length>0?(le.reverse(),m(ke=>[...le,...ke]),xe(le[0]),M(le.length===20),setTimeout(()=>{oe&&(oe.scrollTop=oe.scrollHeight-pe)},0)):M(!1)}catch(Ie){console.error("Error loading more messages:",Ie),H("Failed to load more messages")}finally{U(!1)}},de=oe=>n.find(pe=>pe.id===oe)||{displayName:"Unknown",role:"member"},je=oe=>r===oe||a==="admin",_e=oe=>{if(oe.userId!==r)return!1;if(!oe.timestamp)return!0;const pe=oe.timestamp.toDate();return(new Date-pe)/1e3/60<15},Ce=async()=>{if(g)try{const oe=n.find(Ie=>Ie.id===g.userId),pe=t?Oe(we,"servers",t,"channels",e,"messages",g.id):Oe(we,"dms",e,"messages",g.id);await lc(pe),await cn(dt(we,"adminLogs"),{type:"message_delete",channelId:e,messageId:g.id,userId:r,deletedText:g.text||"(empty)",originalUserId:g.userId,originalUserName:oe?.displayName||"Unknown User",timestamp:ft()}),De("Message deleted successfully")}catch(oe){console.error("Error deleting message:",oe),H("Failed to delete message")}finally{v(null)}},He=oe=>{k(oe.id),$(oe.text)},Ge=()=>{k(null),$("")},ve=async()=>{if(!j)return;if(!B.trim()){H("Message cannot be empty");return}const oe=j,pe=B.trim(),Q=h.find(le=>le.id===oe)?.text||"";k(null),$("");try{const le=t?Oe(we,"servers",t,"channels",e,"messages",oe):Oe(we,"dms",e,"messages",oe);await tt(le,{text:pe,edited:!0,editedAt:ft()}),await cn(dt(we,"adminLogs"),{type:"message_edit",channelId:e,messageId:oe,userId:r,originalText:Q,newText:pe,timestamp:ft()}),De("Message updated successfully")}catch(le){console.error("Error editing message:",le),le.code==="resource-exhausted"?H("Quota exceeded. Please try again tomorrow."):H("Failed to edit message")}},he=async(oe,pe)=>{try{const Ie=h.find(ie=>ie.id===oe);if(!Ie)return;const Q={...Ie.reactions},le=Q[pe]||[];if(le.includes(r)){const ie=le.filter(ge=>ge!==r);ie.length===0?delete Q[pe]:Q[pe]=ie}else Q[pe]=[...le,r];const ke=t?Oe(we,"servers",t,"channels",e,"messages",oe):Oe(we,"dms",e,"messages",oe);await tt(ke,{reactions:Q})}catch(Ie){console.error("Error toggling reaction:",Ie),H("Failed to update reaction")}},$e=async oe=>{if(a!=="admin"&&a!=="moderator"){H("Only admins and moderators can pin messages");return}try{const pe=!oe.pinned,Ie=t?Oe(we,"servers",t,"channels",e,"messages",oe.id):Oe(we,"dms",e,"messages",oe.id);await tt(Ie,{pinned:pe,pinnedBy:pe?r:null,pinnedAt:pe?ft():null}),await cn(dt(we,"adminLogs"),{type:pe?"message_pin":"message_unpin",channelId:e,messageId:oe.id,userId:r,messageText:oe.text,timestamp:ft()}),De(pe?"Message pinned":"Message unpinned")}catch(pe){console.error("Error toggling pin:",pe),H("Failed to pin message")}};return d.jsxs("div",{ref:G,className:"flex-1 overflow-y-auto px-4 py-4 space-y-4",children:[A&&h.length>0&&d.jsx("div",{className:"flex justify-center mb-4",children:d.jsx("button",{onClick:ae,disabled:O,className:"px-4 py-2 bg-brand-primary hover:bg-brand-primary/80 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:O?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Loading..."]}):"Load More Messages"})}),h.length===0?d.jsx("div",{className:"text-center text-dark-muted py-8",children:"No messages yet. Start the conversation!"}):h.map(oe=>{const pe=de(oe.userId);return d.jsxs("div",{id:`message-${oe.id}`,className:"flex gap-3 hover:bg-dark-hover/30 px-2 py-1 rounded group transition-colors",children:[d.jsxs("div",{className:"relative flex-shrink-0",children:[pe.photoUrl?d.jsx("img",{src:pe.photoUrl,alt:pe.displayName,onClick:()=>N(pe),className:"w-10 h-10 rounded-full object-cover cursor-pointer hover:opacity-80 transition-opacity",onError:Ie=>{Ie.target.style.display="none",Ie.target.nextSibling.style.display="flex"}}):null,d.jsx("div",{onClick:()=>N(pe),className:"w-10 h-10 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold cursor-pointer hover:opacity-80 transition-opacity",style:{display:pe.photoUrl?"none":"flex"},children:pe.displayName?.[0]?.toUpperCase()||"U"})]}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("span",{className:"font-semibold text-dark-text hover:underline cursor-pointer",onClick:()=>N(pe),children:pe.displayName||"Unknown"}),d.jsx("span",{className:Ct("text-xs px-1.5 py-0.5 rounded border",PC(pe.role)),children:pe.role?.charAt(0).toUpperCase()+pe.role?.slice(1)}),d.jsx("span",{className:"text-xs text-dark-muted",children:rp(oe.timestamp)}),oe.edited&&d.jsx("span",{className:"text-xs text-dark-muted italic",children:"(edited)"}),j!==oe.id&&d.jsxs("div",{className:"ml-auto relative z-50",children:[d.jsx("button",{onClick:Ie=>{const Q=Ie.clientY,le=window.innerHeight,ke=Q<le/2;F(ke?"bottom":"top"),V(R===oe.id?null:oe.id)},className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-dark-hover rounded transition-all",title:"More options",children:d.jsx(jM,{size:18,className:"text-dark-muted"})}),R===oe.id&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>V(null)}),d.jsxs("div",{className:`absolute right-0 ${z==="top"?"bottom-full mb-1":"top-full mt-1"} bg-dark-sidebar border border-dark-hover rounded-lg shadow-lg py-1 z-50 min-w-[120px]`,children:[d.jsxs("button",{onClick:()=>{l&&l(oe),V(null)},className:"w-full px-3 py-2 text-left text-sm text-dark-text hover:bg-dark-hover flex items-center gap-2",children:[d.jsx(yM,{size:16,className:"text-green-400"}),"Reply"]}),_e(oe)&&d.jsxs("button",{onClick:()=>{He(oe),V(null)},className:"w-full px-3 py-2 text-left text-sm text-dark-text hover:bg-dark-hover flex items-center gap-2",children:[d.jsx(Xl,{size:16,className:"text-blue-400"}),"Edit"]}),(a==="admin"||a==="moderator")&&d.jsxs("button",{onClick:()=>{$e(oe),V(null)},className:"w-full px-3 py-2 text-left text-sm text-dark-text hover:bg-dark-hover flex items-center gap-2",children:[d.jsx(Ql,{size:16,className:"text-blue-400"}),oe.pinned?"Unpin":"Pin"]}),je(oe.userId)&&d.jsxs("button",{onClick:()=>{v({id:oe.id,text:oe.text,userId:oe.userId}),V(null)},className:"w-full px-3 py-2 text-left text-sm text-admin hover:bg-dark-hover flex items-center gap-2",children:[d.jsx(ki,{size:16}),"Delete"]})]})]})]})]}),j===oe.id?d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"text",value:B,onChange:Ie=>$(Ie.target.value),onKeyDown:Ie=>{Ie.key==="Enter"&&ve(),Ie.key==="Escape"&&Ge()},className:`flex-1 bg-dark-input text-dark-text px-3 py-1.5 rounded
                                 border border-brand-primary outline-none`,autoFocus:!0}),d.jsx("button",{onClick:ve,className:"text-green-500 hover:text-green-400 transition-colors",title:"Save (Enter)",children:d.jsx(Do,{size:20})}),d.jsx("button",{onClick:Ge,className:"text-admin hover:text-admin/80 transition-colors",title:"Cancel (Esc)",children:d.jsx(On,{size:20})})]}):d.jsxs(d.Fragment,{children:[oe.replyTo&&d.jsxs("div",{className:"mb-2 ml-2 pl-3 border-l-2 border-green-400 text-sm bg-dark-sidebar/30 rounded py-1",children:[d.jsxs("div",{className:"text-xs text-green-400 font-semibold",children:["Replying to ",de(oe.replyTo.userId).displayName]}),d.jsx("div",{className:"text-dark-muted italic truncate",children:oe.replyTo.text})]}),oe.pinned&&d.jsxs("div",{className:"flex items-center gap-1 text-xs text-blue-400 mb-1",children:[d.jsx(Ql,{size:14}),d.jsx("span",{children:"Pinned"})]}),oe.type==="audio"&&d.jsxs("div",{className:"mt-1 mb-1 max-w-[300px] w-full bg-dark-hover/50 rounded-lg p-2 border border-dark-hover flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-primary/20 flex items-center justify-center text-brand-primary flex-shrink-0",children:d.jsx(sd,{size:20})}),d.jsx("div",{className:"flex-1 min-w-0",children:d.jsx("audio",{controls:!0,src:oe.text,className:"w-full h-8",controlsList:"nodownload noplaybackrate"})})]}),oe.type!=="sticker"&&oe.type!=="audio"&&(()=>{const Ie=Ik(oe.text);let Q=oe.text;return Ie.filter(ke=>{const ie=jk(ke);return["youtube","spotify","twitter","image","video","audio","file"].includes(ie)}).forEach(ke=>{Q=Q.replace(ke,"")}),Q=Q.trim(),Q.length>0&&d.jsx("div",{className:"text-dark-text whitespace-pre-wrap break-words select-text",children:d.jsx(kk,{onMentionClick:ke=>{const ie=n.find(ge=>ge.displayName?.toLowerCase()===ke.toLowerCase());ie&&N(ie)},children:Q})})})(),oe.type==="sticker"&&d.jsx("div",{className:"mt-1 mb-1",children:d.jsx("img",{src:oe.text,alt:"Sticker",className:"w-40 h-40 object-contain drop-shadow-md hover:scale-110 transition-transform origin-bottom-left select-none cursor-pointer",onClick:()=>window.open(oe.text,"_blank")})}),oe.type!=="sticker"&&oe.type!=="audio"&&d.jsx(GO,{text:oe.text}),oe.type==="poll"&&d.jsx(RO,{message:oe,currentUserId:r,serverId:t,channelId:e,users:n}),oe.reactions&&Object.keys(oe.reactions).length>0&&d.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[Object.entries(oe.reactions).map(([Ie,Q])=>d.jsxs("button",{onClick:()=>he(oe.id,Ie),className:Ct("px-2 py-1 rounded-full text-sm flex items-center gap-1 transition-colors",Q.includes(r)?"bg-brand-primary/20 border border-brand-primary text-brand-primary":"bg-dark-hover border border-dark-hover text-dark-text hover:border-dark-muted"),title:`${Q.map(le=>de(le).displayName).join(", ")}`,children:[d.jsx("span",{children:Ie}),d.jsx("span",{className:"text-xs",children:Q.length})]},Ie)),d.jsxs("div",{className:"relative",children:[d.jsx("button",{onClick:()=>E(S===oe.id?null:oe.id),className:"px-2 py-1 rounded-full text-sm bg-dark-hover border border-dark-hover hover:border-dark-muted transition-colors",title:"Add reaction",children:d.jsx(iE,{size:16,className:"text-dark-muted"})}),S===oe.id&&d.jsx(NE,{onSelect:Ie=>{he(oe.id,Ie),E(null)},onClose:()=>E(null)})]})]}),(!oe.reactions||Object.keys(oe.reactions).length===0)&&d.jsxs("div",{className:"relative mt-2",children:[d.jsxs("button",{onClick:()=>E(S===oe.id?null:oe.id),className:"opacity-0 group-hover:opacity-100 px-2 py-1 rounded text-xs bg-dark-hover hover:bg-dark-input transition-all flex items-center gap-1",title:"Add reaction",children:[d.jsx(iE,{size:14}),d.jsx("span",{className:"text-dark-muted",children:"Add reaction"})]}),S===oe.id&&d.jsx(NE,{onSelect:Ie=>{he(oe.id,Ie),E(null)},onClose:()=>E(null)})]})]})]})]},oe.id)}),d.jsx("div",{ref:Ee}),d.jsx(cc,{isOpen:!!g,onClose:()=>v(null),onConfirm:Ce,title:"Delete Message",message:"Are you sure you want to delete this message? This action cannot be undone.",confirmText:"Delete",variant:"danger"}),d.jsx(kO,{isOpen:!!b,onClose:()=>_(null),onConfirm:()=>window.open(b?.url,"_blank","noopener,noreferrer"),url:b?.url}),d.jsx(vb,{user:C,isOpen:!!C,onClose:()=>N(null)})]})},RE={smileys:{name:"Smileys & People",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},animals:{name:"Animals & Nature",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},food:{name:"Food & Drink",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},activities:{name:"Activities",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},travel:{name:"Travel & Places",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},objects:{name:"Objects",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},symbols:{name:"Symbols",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","0","1","2","3","4","5","6","7","8","9","","","#","*","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},flags:{name:"Flags",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]}},YO=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],KO=({onSelect:t,onClose:e})=>{const[n,r]=I.useState("smileys");return d.jsxs("div",{className:"absolute bottom-full right-0 mb-2 bg-dark-sidebar border border-dark-hover rounded-lg shadow-xl w-80 z-50",children:[d.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-dark-hover",children:[d.jsx("span",{className:"text-sm font-semibold text-dark-text",children:"Emoji Picker"}),d.jsx("button",{onClick:e,className:"text-dark-muted hover:text-dark-text transition-colors",children:d.jsx(On,{size:18})})]}),d.jsxs("div",{className:"p-3 border-b border-dark-hover",children:[d.jsx("div",{className:"text-xs text-dark-muted mb-2 font-semibold",children:"POPULAR"}),d.jsx("div",{className:"grid grid-cols-10 gap-1",children:YO.map((a,l)=>d.jsx("button",{onClick:()=>t(a),className:"text-2xl hover:bg-dark-hover rounded p-1 transition-colors",title:a,children:a},l))})]}),d.jsx("div",{className:"flex gap-1 p-2 border-b border-dark-hover overflow-x-auto",children:Object.entries(RE).map(([a,l])=>d.jsx("button",{onClick:()=>r(a),className:`text-xl p-2 rounded transition-colors ${n===a?"bg-brand-primary/20 text-brand-primary":"hover:bg-dark-hover text-dark-muted"}`,title:l.name,children:l.icon},a))}),d.jsx("div",{className:"p-3 h-64 overflow-y-auto",children:d.jsx("div",{className:"grid grid-cols-8 gap-1",children:RE[n].emojis.map((a,l)=>d.jsx("button",{onClick:()=>t(a),className:"text-2xl hover:bg-dark-hover rounded p-1 transition-colors",title:a,children:a},l))})})]})};let hf;const QO=new Uint8Array(16);function XO(){if(!hf&&(hf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!hf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return hf(QO)}const Hn=[];for(let t=0;t<256;++t)Hn.push((t+256).toString(16).slice(1));function WO(t,e=0){return Hn[t[e+0]]+Hn[t[e+1]]+Hn[t[e+2]]+Hn[t[e+3]]+"-"+Hn[t[e+4]]+Hn[t[e+5]]+"-"+Hn[t[e+6]]+Hn[t[e+7]]+"-"+Hn[t[e+8]]+Hn[t[e+9]]+"-"+Hn[t[e+10]]+Hn[t[e+11]]+Hn[t[e+12]]+Hn[t[e+13]]+Hn[t[e+14]]+Hn[t[e+15]]}const JO=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),jE={randomUUID:JO};function ZO(t,e,n){if(jE.randomUUID&&!t)return jE.randomUUID();t=t||{};const r=t.random||(t.rng||XO)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,WO(r)}var e7=Object.defineProperty,t7=Object.defineProperties,n7=Object.getOwnPropertyDescriptors,IE=Object.getOwnPropertySymbols,r7=Object.prototype.hasOwnProperty,s7=Object.prototype.propertyIsEnumerable,DE=(t,e,n)=>e in t?e7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xb=(t,e)=>{for(var n in e||(e={}))r7.call(e,n)&&DE(t,n,e[n]);if(IE)for(var n of IE(e))s7.call(e,n)&&DE(t,n,e[n]);return t},i7=(t,e)=>t7(t,n7(e)),$n={ENABLED:typeof window<"u"&&typeof location<"u"&&location.search.indexOf("giphy-debug")!==-1,LEVEL:0,PREFIX:"GiphyJS",debug:(...t)=>{$n.ENABLED&&$n.LEVEL<=0&&console.debug($n.PREFIX,...t)},info:(...t)=>{$n.ENABLED&&$n.LEVEL<=1&&console.info($n.PREFIX,...t)},warn:(...t)=>{$n.ENABLED&&$n.LEVEL<=2&&console.warn($n.PREFIX,...t)},error:(...t)=>{$n.ENABLED&&$n.LEVEL<=3&&console.error($n.PREFIX,...t)}},a7=(t,e,n)=>{let r=1/0,a;return n.forEach(l=>{const c=l.width/t,h=l.height/e,m=c*h,g=Math.abs(1-m);g<r&&(r=g,a=l)}),a},o7=50;function l7(t,e,n,r=o7){let[a]=t;const l=t.filter(c=>(c.width*c.height>a.width*a.height&&(a=c),e-c.width<=r&&n-c.height<=r));return l.length===0?a:a7(e,n,l)}var Mk=l7;function c7(t,e=0){return t.slice(0,e)}function u7(t,e){return t.filter(n=>e.indexOf(n)===-1)}function By(t,e){const n={};return e.forEach(r=>{t[r]!==void 0&&(n[r]=t[r])}),n}var d7=t=>{let e=0,n=0;const r=t.offsetWidth,a=t.offsetHeight;do e+=t.offsetLeft,n+=t.offsetTop,t=t.offsetParent;while(t);const l={left:e,top:n,width:r,height:a,right:e+r,bottom:n+a,x:e,y:n};return i7(xb({},l),{toJSON:()=>JSON.stringify(l)})},h7=d7,yo="",Pk=16,Ok=()=>{let t="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=e.length;for(let r=0;r<Pk;r++)t+=e.charAt(Math.floor(Math.random()*n));return t},f7=()=>{if(!yo){try{yo=sessionStorage.getItem("giphyPingbackId")}catch{}if(!yo){const t=new Date().getTime().toString(16);try{yo=`${t}${ZO().replace(/-/g,"")}`.substring(0,Pk)}catch{yo=Ok()}try{sessionStorage.setItem("giphyPingbackId",yo)}catch{}}}return yo},_b=f7,ff=null;new Promise(t=>{typeof Image>"u"&&t(!1);const e=new Image;e.onload=()=>{ff=!0,t(ff)},e.onerror=()=>{ff=!1,t(ff)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"});var ME=(t,e,n)=>{let r=t?.assets;if(r){r=xb({},r),delete r.source;const a=Object.values(r).sort((l,c)=>l.width-c.width);return Mk(a,e,n)}},m7=(t,e,n,r)=>{const a=By(t,["original","fixed_width","fixed_height","fixed_width_small","fixed_height_small"]),l=Object.entries(a).map(([c,h])=>xb({renditionName:c},h));return Mk(l,e,n,r)},ap=({images:t},e)=>{const{fixed_width:n}=t;if(n){const{width:r,height:a}=n,l=r/a;return Math.round(e/l)}return 0},p7=({images:t},e)=>{const{fixed_width:n}=t;if(n){const{width:r,height:a}=n,l=r/a;return Math.round(e*l)}return 0},g7=({alt_text:t,user:e,tags:n=[],is_sticker:r=!1,title:a=""})=>{if(t)return t;if(a)return a;const l=e&&e.username||"",c=c7(u7(n,["transparent"]),l?4:5);return`${l?`${l} `:""}${c.join(" ")} ${r?"Sticker":"GIF"}`},zu=(typeof window<"u"?window:global)||{};zu._GIPHY_SDK_HEADERS_=zu._GIPHY_SDK_HEADERS_||(zu.Headers?new zu.Headers({"X-GIPHY-SDK-PLATFORM":"web"}):void 0);var wb=()=>zu._GIPHY_SDK_HEADERS_,Fy=(t,e)=>{var n;return(n=wb())==null?void 0:n.set(t,e)},y7=Object.defineProperty,v7=Object.defineProperties,b7=Object.getOwnPropertyDescriptors,x7=Object.getOwnPropertyNames,PE=Object.getOwnPropertySymbols,_7=Object.prototype.hasOwnProperty,w7=Object.prototype.propertyIsEnumerable,OE=(t,e,n)=>e in t?y7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ms=(t,e)=>{for(var n in e||(e={}))_7.call(e,n)&&OE(t,n,e[n]);if(PE)for(var n of PE(e))w7.call(e,n)&&OE(t,n,e[n]);return t},F0=(t,e)=>v7(t,b7(e)),E7=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,n)=>(typeof require<"u"?require:e)[n]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')}),S7=(t,e)=>function(){return e||(0,t[x7(t)[0]])((e={exports:{}}).exports,e),e.exports},Lk=(t,e,n)=>new Promise((r,a)=>{var l=m=>{try{h(n.next(m))}catch(g){a(g)}},c=m=>{try{h(n.throw(m))}catch(g){a(g)}},h=m=>m.done?r(m.value):Promise.resolve(m.value).then(l,c);h((n=n.apply(t,e)).next())}),T7=S7({"package.json"(t,e){e.exports={scripts:{lint:"run -T eslint . --ext .ts,.tsx",clean:"rm -rf ./dist",dev:"parcel public/test.html",docs:"typedoc src/index.ts",build:"run -T tsup src/index.ts --format cjs,esm --dts && run -T publint",prepublish:"npm run clean && npm run build",test:"run -T jest --config ./jestconfig.js","test:watch":"run -T jest --config ./jestconfig.js --watchAll"},name:"@giphy/js-fetch-api",version:"5.7.0",description:"Javascript API to fetch gifs and stickers from the GIPHY API.",homepage:"https://github.com/Giphy/giphy-js/tree/master/packages/fetch-api",main:"dist/index.cjs",types:"dist/index.d.ts",module:"dist/index.js",type:"module",sideEffects:!1,exports:{".":{types:"./dist/index.d.ts",import:"./dist/index.js",require:"./dist/index.cjs"},"./package.json":"./package.json"},files:["dist/","src/**/*"],license:"MIT",publishConfig:{access:"public"},dependencies:{"@giphy/js-types":"*","@giphy/js-util":"*"},devDependencies:{"jest-fetch-mock":"^3.0.3","parcel-bundler":"latest",typedoc:"^0.20.37","typedoc-thunder-theme":"^0.0.3",typescript:"^5.0.4"}}}}),C7=["is_anonymous","is_community","is_featured","is_hidden","is_indexable","is_preserve_size","is_realtime","is_removed","is_sticker","is_dynamic"],k7=["suppress_chrome","is_public","is_verified"],LE=t=>e=>t[e]=!!t[e],A7=t=>typeof t=="string"?t:t.text,Vk=(t,e="")=>{const n=Ms({},t);n.id=String(n.id),n.tags=(n.tags||[]).map(A7),n.bottle_data||(n.bottle_data={}),n.response_id=e,C7.forEach(LE(n)),Object.keys(n.images||{}).forEach(a=>{const l=n.images[a];l.width=parseInt(l.width),l.height=parseInt(l.height)});const{user:r}=n;if(r){const a=Ms({},r);k7.forEach(LE(a)),n.user=a}return n},VE=t=>{const{response_id:e}=t.meta;return t.data=Vk(t.data,e),t},xi=t=>{const{response_id:e}=t.meta;return t.data=t.data.map(n=>Vk(n,e)),t},N7=(typeof window<"u"?window:global)||{},R7=N7.GIPHY_API_URL||"https://api.giphy.com/v1/",Uk=class extends Error{constructor(e,n,r=0,a=""){super(e),this.url=n,this.status=r,this.statusText=a}},j7=class extends Uk{},UE=Uk,I7="@giphy/js-fetch-api: ",D7="Error fetching",M7=t=>t,as={},P7=6e4,O7=6e3,L7=()=>{const t=Date.now();Object.keys(as).forEach(e=>{const n=as[e].isError?O7:P7;t-as[e].ts>=n&&delete as[e]})};function V7(t,e={}){const{apiVersion:n=1,noCache:r=!1,normalizer:a=M7}=e,l=R7.replace(/\/v\d+\/$/,`/v${n}/`);if(L7(),!as[t]||r){const c=`${l}${t}`,h=()=>Lk(this,null,function*(){var m,g;let v;try{const b=yield fetch(c,{method:"get"});if(b.ok){const _=yield b.json();if((m=_.meta)!=null&&m.response_id)return a(_);throw{message:"synthetic response"}}else{let _=D7;try{const N=yield b.json();N.message&&(_=N.message),(g=N.meta)!=null&&g.msg&&(_=N.meta.msg)}catch{}as[t]&&(as[t].isError=!0);let C=UE;_==="This content is not available in your location"&&(C=j7),v=new C(`${I7}${_}`,c,b.status,b.statusText)}}catch(b){v=new UE(b.message,c),as[t]&&(as[t].isError=!0)}throw v});as[t]={request:h(),ts:Date.now()}}return as[t].request}var yr=V7,H0=t=>t&&t.type?t.type:"gifs",U7=class{constructor(t,e={}){this.getQS=(n={})=>new URLSearchParams(Ms(F0(Ms({},n),{api_key:this.apiKey,pingback_id:_b()}),this.qsParams)).toString(),this.apiKey=t,this.qsParams=e}categories(t){return yr(`gifs/categories?${this.getQS(t)}`)}gif(t,e){const n=e?.internal?"internal/":"";return yr(`${n}gifs/${t}?${this.getQS()}`,{normalizer:VE})}gifs(t,e){return Array.isArray(t)?yr(`gifs?${this.getQS({ids:t.join(",")})}`,{normalizer:xi}):yr(`gifs/categories/${t}/${e}?${this.getQS()}`,{normalizer:xi})}emoji(t){return yr(`emoji?${this.getQS(t)}`,{normalizer:xi})}emojiDefaultVariations(t){return yr(`emoji?${this.getQS(t)}`,{apiVersion:2,normalizer:xi})}emojiVariations(t){return yr(`emoji/${t}/variations?${this.getQS()}`,{apiVersion:2,normalizer:xi})}animate(t,e={}){const n=this.getQS(F0(Ms({},e),{m:t}));return yr(`text/animate?${n}`,{normalizer:xi})}search(t,e={}){const n=e.channel?`@${e.channel} ${t}`:t;let r;e.type==="text"&&(r=!0);const a=this.getQS(F0(Ms({rating:"pg-13"},e),{q:n,excludeDynamicResults:r}));return yr(`${H0(e)}/search?${a}`,{normalizer:xi})}subcategories(t,e){return yr(`gifs/categories/${t}?${this.getQS(e)}`)}trending(t={}){return yr(`${H0(t)}/trending?${this.getQS(Ms({rating:"pg-13"},t))}`,{normalizer:xi})}random(t){return yr(`${H0(t)}/random?${this.getQS(Ms({rating:"pg-13"},t))}`,{noCache:!0,normalizer:VE})}related(t,e={}){const{type:n="gifs"}=e;return yr(`${n}/related?${this.getQS(Ms({gif_id:t,rating:"pg-13"},e))}`,{normalizer:xi})}channels(t,e={}){return yr(`channels/search?${this.getQS(Ms({q:t,rating:"pg-13"},e))}`)}},zk=U7,z7=Symbol("has inivisible gifs"),Bk=(t,e=[])=>{let n=[...e],r=e.map(c=>c.id),a=e.length,l=!1;return c=>Lk(void 0,null,function*(){if(c&&(n=c,r=c.map(b=>b.id)),l)return n;const h=yield t(a),{pagination:m,data:g}=h;a=m.count+m.offset,l=a===m.total_count,g.forEach(b=>{const{id:_}=b;r.includes(_)||(n.push(b),r.push(_))});const v=[...n];return m.hasMoreGifs&&(v.skipCountCheck=z7),v})},zE;if(typeof E7<"u"){const{version:t}=T7();(zE=wb())!=null&&zE.get("X-GIPHY-SDK-NAME")||(Fy("X-GIPHY-SDK-NAME","FetchAPI"),Fy("X-GIPHY-SDK-VERSION",t))}var _r=function(){return _r=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},_r.apply(this,arguments)};function cd(t,e,n){if(n||arguments.length===2)for(var r=0,a=e.length,l;r<a;r++)(l||!(r in e))&&(l||(l=Array.prototype.slice.call(e,0,r)),l[r]=e[r]);return t.concat(l||Array.prototype.slice.call(e))}var qt="-ms-",Yu="-moz-",Nt="-webkit-",Fk="comm",op="rule",Eb="decl",B7="@import",Hk="@keyframes",F7="@layer",$k=Math.abs,Sb=String.fromCharCode,Hy=Object.assign;function H7(t,e){return Pn(t,0)^45?(((e<<2^Pn(t,0))<<2^Pn(t,1))<<2^Pn(t,2))<<2^Pn(t,3):0}function qk(t){return t.trim()}function _i(t,e){return(t=e.exec(t))?t[0]:t}function ut(t,e,n){return t.replace(e,n)}function Vf(t,e,n){return t.indexOf(e,n)}function Pn(t,e){return t.charCodeAt(e)|0}function uc(t,e,n){return t.slice(e,n)}function Os(t){return t.length}function Gk(t){return t.length}function Bu(t,e){return e.push(t),t}function $7(t,e){return t.map(e).join("")}function BE(t,e){return t.filter(function(n){return!_i(n,e)})}var lp=1,dc=1,Yk=0,Qr=0,Sn=0,Sc="";function cp(t,e,n,r,a,l,c,h){return{value:t,root:e,parent:n,type:r,props:a,children:l,line:lp,column:dc,length:c,return:"",siblings:h}}function va(t,e){return Hy(cp("",null,null,"",null,null,0,t.siblings),t,{length:-t.length},e)}function Ml(t){for(;t.root;)t=va(t.root,{children:[t]});Bu(t,t.siblings)}function q7(){return Sn}function G7(){return Sn=Qr>0?Pn(Sc,--Qr):0,dc--,Sn===10&&(dc=1,lp--),Sn}function us(){return Sn=Qr<Yk?Pn(Sc,Qr++):0,dc++,Sn===10&&(dc=1,lp++),Sn}function So(){return Pn(Sc,Qr)}function Uf(){return Qr}function up(t,e){return uc(Sc,t,e)}function $y(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Y7(t){return lp=dc=1,Yk=Os(Sc=t),Qr=0,[]}function K7(t){return Sc="",t}function $0(t){return qk(up(Qr-1,qy(t===91?t+2:t===40?t+1:t)))}function Q7(t){for(;(Sn=So())&&Sn<33;)us();return $y(t)>2||$y(Sn)>3?"":" "}function X7(t,e){for(;--e&&us()&&!(Sn<48||Sn>102||Sn>57&&Sn<65||Sn>70&&Sn<97););return up(t,Uf()+(e<6&&So()==32&&us()==32))}function qy(t){for(;us();)switch(Sn){case t:return Qr;case 34:case 39:t!==34&&t!==39&&qy(Sn);break;case 40:t===41&&qy(t);break;case 92:us();break}return Qr}function W7(t,e){for(;us()&&t+Sn!==57;)if(t+Sn===84&&So()===47)break;return"/*"+up(e,Qr-1)+"*"+Sb(t===47?t:us())}function J7(t){for(;!$y(So());)us();return up(t,Qr)}function Z7(t){return K7(zf("",null,null,null,[""],t=Y7(t),0,[0],t))}function zf(t,e,n,r,a,l,c,h,m){for(var g=0,v=0,b=c,_=0,C=0,N=0,j=1,k=1,B=1,$=0,R="",V=a,z=l,F=r,S=R;k;)switch(N=$,$=us()){case 40:if(N!=108&&Pn(S,b-1)==58){Vf(S+=ut($0($),"&","&\f"),"&\f",$k(g?h[g-1]:0))!=-1&&(B=-1);break}case 34:case 39:case 91:S+=$0($);break;case 9:case 10:case 13:case 32:S+=Q7(N);break;case 92:S+=X7(Uf()-1,7);continue;case 47:switch(So()){case 42:case 47:Bu(eL(W7(us(),Uf()),e,n,m),m);break;default:S+="/"}break;case 123*j:h[g++]=Os(S)*B;case 125*j:case 59:case 0:switch($){case 0:case 125:k=0;case 59+v:B==-1&&(S=ut(S,/\f/g,"")),C>0&&Os(S)-b&&Bu(C>32?HE(S+";",r,n,b-1,m):HE(ut(S," ","")+";",r,n,b-2,m),m);break;case 59:S+=";";default:if(Bu(F=FE(S,e,n,g,v,a,h,R,V=[],z=[],b,l),l),$===123)if(v===0)zf(S,e,F,F,V,l,b,h,z);else switch(_===99&&Pn(S,3)===110?100:_){case 100:case 108:case 109:case 115:zf(t,F,F,r&&Bu(FE(t,F,F,0,0,a,h,R,a,V=[],b,z),z),a,z,b,h,r?V:z);break;default:zf(S,F,F,F,[""],z,0,h,z)}}g=v=C=0,j=B=1,R=S="",b=c;break;case 58:b=1+Os(S),C=N;default:if(j<1){if($==123)--j;else if($==125&&j++==0&&G7()==125)continue}switch(S+=Sb($),$*j){case 38:B=v>0?1:(S+="\f",-1);break;case 44:h[g++]=(Os(S)-1)*B,B=1;break;case 64:So()===45&&(S+=$0(us())),_=So(),v=b=Os(R=S+=J7(Uf())),$++;break;case 45:N===45&&Os(S)==2&&(j=0)}}return l}function FE(t,e,n,r,a,l,c,h,m,g,v,b){for(var _=a-1,C=a===0?l:[""],N=Gk(C),j=0,k=0,B=0;j<r;++j)for(var $=0,R=uc(t,_+1,_=$k(k=c[j])),V=t;$<N;++$)(V=qk(k>0?C[$]+" "+R:ut(R,/&\f/g,C[$])))&&(m[B++]=V);return cp(t,e,n,a===0?op:h,m,g,v,b)}function eL(t,e,n,r){return cp(t,e,n,Fk,Sb(q7()),uc(t,2,-2),0,r)}function HE(t,e,n,r,a){return cp(t,e,n,Eb,uc(t,0,r),uc(t,r+1,-1),r,a)}function Kk(t,e,n){switch(H7(t,e)){case 5103:return Nt+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Nt+t+t;case 4789:return Yu+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Nt+t+Yu+t+qt+t+t;case 5936:switch(Pn(t,e+11)){case 114:return Nt+t+qt+ut(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Nt+t+qt+ut(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Nt+t+qt+ut(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return Nt+t+qt+t+t;case 6165:return Nt+t+qt+"flex-"+t+t;case 5187:return Nt+t+ut(t,/(\w+).+(:[^]+)/,Nt+"box-$1$2"+qt+"flex-$1$2")+t;case 5443:return Nt+t+qt+"flex-item-"+ut(t,/flex-|-self/g,"")+(_i(t,/flex-|baseline/)?"":qt+"grid-row-"+ut(t,/flex-|-self/g,""))+t;case 4675:return Nt+t+qt+"flex-line-pack"+ut(t,/align-content|flex-|-self/g,"")+t;case 5548:return Nt+t+qt+ut(t,"shrink","negative")+t;case 5292:return Nt+t+qt+ut(t,"basis","preferred-size")+t;case 6060:return Nt+"box-"+ut(t,"-grow","")+Nt+t+qt+ut(t,"grow","positive")+t;case 4554:return Nt+ut(t,/([^-])(transform)/g,"$1"+Nt+"$2")+t;case 6187:return ut(ut(ut(t,/(zoom-|grab)/,Nt+"$1"),/(image-set)/,Nt+"$1"),t,"")+t;case 5495:case 3959:return ut(t,/(image-set\([^]*)/,Nt+"$1$`$1");case 4968:return ut(ut(t,/(.+:)(flex-)?(.*)/,Nt+"box-pack:$3"+qt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Nt+t+t;case 4200:if(!_i(t,/flex-|baseline/))return qt+"grid-column-align"+uc(t,e)+t;break;case 2592:case 3360:return qt+ut(t,"template-","")+t;case 4384:case 3616:return n&&n.some(function(r,a){return e=a,_i(r.props,/grid-\w+-end/)})?~Vf(t+(n=n[e].value),"span",0)?t:qt+ut(t,"-start","")+t+qt+"grid-row-span:"+(~Vf(n,"span",0)?_i(n,/\d+/):+_i(n,/\d+/)-+_i(t,/\d+/))+";":qt+ut(t,"-start","")+t;case 4896:case 4128:return n&&n.some(function(r){return _i(r.props,/grid-\w+-start/)})?t:qt+ut(ut(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return ut(t,/(.+)-inline(.+)/,Nt+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Os(t)-1-e>6)switch(Pn(t,e+1)){case 109:if(Pn(t,e+4)!==45)break;case 102:return ut(t,/(.+:)(.+)-([^]+)/,"$1"+Nt+"$2-$3$1"+Yu+(Pn(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~Vf(t,"stretch",0)?Kk(ut(t,"stretch","fill-available"),e,n)+t:t}break;case 5152:case 5920:return ut(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,a,l,c,h,m,g){return qt+a+":"+l+g+(c?qt+a+"-span:"+(h?m:+m-+l)+g:"")+t});case 4949:if(Pn(t,e+6)===121)return ut(t,":",":"+Nt)+t;break;case 6444:switch(Pn(t,Pn(t,14)===45?18:11)){case 120:return ut(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Nt+(Pn(t,14)===45?"inline-":"")+"box$3$1"+Nt+"$2$3$1"+qt+"$2box$3")+t;case 100:return ut(t,":",":"+qt)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return ut(t,"scroll-","scroll-snap-")+t}return t}function Em(t,e){for(var n="",r=0;r<t.length;r++)n+=e(t[r],r,t,e)||"";return n}function tL(t,e,n,r){switch(t.type){case F7:if(t.children.length)break;case B7:case Eb:return t.return=t.return||t.value;case Fk:return"";case Hk:return t.return=t.value+"{"+Em(t.children,r)+"}";case op:if(!Os(t.value=t.props.join(",")))return""}return Os(n=Em(t.children,r))?t.return=t.value+"{"+n+"}":""}function nL(t){var e=Gk(t);return function(n,r,a,l){for(var c="",h=0;h<e;h++)c+=t[h](n,r,a,l)||"";return c}}function rL(t){return function(e){e.root||(e=e.return)&&t(e)}}function sL(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case Eb:t.return=Kk(t.value,t.length,n);return;case Hk:return Em([va(t,{value:ut(t.value,"@","@"+Nt)})],r);case op:if(t.length)return $7(n=t.props,function(a){switch(_i(a,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Ml(va(t,{props:[ut(a,/:(read-\w+)/,":"+Yu+"$1")]})),Ml(va(t,{props:[a]})),Hy(t,{props:BE(n,r)});break;case"::placeholder":Ml(va(t,{props:[ut(a,/:(plac\w+)/,":"+Nt+"input-$1")]})),Ml(va(t,{props:[ut(a,/:(plac\w+)/,":"+Yu+"$1")]})),Ml(va(t,{props:[ut(a,/:(plac\w+)/,qt+"input-$1")]})),Ml(va(t,{props:[a]})),Hy(t,{props:BE(n,r)});break}return""})}}var iL={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Ir={},hc=typeof process<"u"&&Ir!==void 0&&(Ir.REACT_APP_SC_ATTR||Ir.SC_ATTR)||"data-styled",Qk="active",Xk="data-styled-version",dp="6.1.19",Tb=`/*!sc*/
`,Sm=typeof window<"u"&&typeof document<"u",aL=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&Ir!==void 0&&Ir.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&Ir.REACT_APP_SC_DISABLE_SPEEDY!==""?Ir.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&Ir.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&Ir!==void 0&&Ir.SC_DISABLE_SPEEDY!==void 0&&Ir.SC_DISABLE_SPEEDY!==""&&Ir.SC_DISABLE_SPEEDY!=="false"&&Ir.SC_DISABLE_SPEEDY),hp=Object.freeze([]),fc=Object.freeze({});function oL(t,e,n){return n===void 0&&(n=fc),t.theme!==n.theme&&t.theme||e||n.theme}var Wk=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),lL=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,cL=/(^-|-$)/g;function $E(t){return t.replace(lL,"-").replace(cL,"")}var uL=/(a)(d)/gi,mf=52,qE=function(t){return String.fromCharCode(t+(t>25?39:97))};function Gy(t){var e,n="";for(e=Math.abs(t);e>mf;e=e/mf|0)n=qE(e%mf)+n;return(qE(e%mf)+n).replace(uL,"$1-$2")}var q0,Jk=5381,Fl=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},Zk=function(t){return Fl(Jk,t)};function e3(t){return Gy(Zk(t)>>>0)}function dL(t){return t.displayName||t.name||"Component"}function G0(t){return typeof t=="string"&&!0}var t3=typeof Symbol=="function"&&Symbol.for,n3=t3?Symbol.for("react.memo"):60115,hL=t3?Symbol.for("react.forward_ref"):60112,fL={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},mL={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r3={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},pL=((q0={})[hL]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},q0[n3]=r3,q0);function GE(t){return("type"in(e=t)&&e.type.$$typeof)===n3?r3:"$$typeof"in t?pL[t.$$typeof]:fL;var e}var gL=Object.defineProperty,yL=Object.getOwnPropertyNames,YE=Object.getOwnPropertySymbols,vL=Object.getOwnPropertyDescriptor,bL=Object.getPrototypeOf,KE=Object.prototype;function s3(t,e,n){if(typeof e!="string"){if(KE){var r=bL(e);r&&r!==KE&&s3(t,r,n)}var a=yL(e);YE&&(a=a.concat(YE(e)));for(var l=GE(t),c=GE(e),h=0;h<a.length;++h){var m=a[h];if(!(m in mL||n&&n[m]||c&&m in c||l&&m in l)){var g=vL(e,m);try{gL(t,m,g)}catch{}}}}return t}function mc(t){return typeof t=="function"}function Cb(t){return typeof t=="object"&&"styledComponentId"in t}function _o(t,e){return t&&e?"".concat(t," ").concat(e):t||e||""}function Yy(t,e){if(t.length===0)return"";for(var n=t[0],r=1;r<t.length;r++)n+=t[r];return n}function ud(t){return t!==null&&typeof t=="object"&&t.constructor.name===Object.name&&!("props"in t&&t.$$typeof)}function Ky(t,e,n){if(n===void 0&&(n=!1),!n&&!ud(t)&&!Array.isArray(t))return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)t[r]=Ky(t[r],e[r]);else if(ud(e))for(var r in e)t[r]=Ky(t[r],e[r]);return t}function kb(t,e){Object.defineProperty(t,"toString",{value:e})}function Id(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(t," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var xL=(function(){function t(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return t.prototype.indexOfGroup=function(e){for(var n=0,r=0;r<e;r++)n+=this.groupSizes[r];return n},t.prototype.insertRules=function(e,n){if(e>=this.groupSizes.length){for(var r=this.groupSizes,a=r.length,l=a;e>=l;)if((l<<=1)<0)throw Id(16,"".concat(e));this.groupSizes=new Uint32Array(l),this.groupSizes.set(r),this.length=l;for(var c=a;c<l;c++)this.groupSizes[c]=0}for(var h=this.indexOfGroup(e+1),m=(c=0,n.length);c<m;c++)this.tag.insertRule(h,n[c])&&(this.groupSizes[e]++,h++)},t.prototype.clearGroup=function(e){if(e<this.length){var n=this.groupSizes[e],r=this.indexOfGroup(e),a=r+n;this.groupSizes[e]=0;for(var l=r;l<a;l++)this.tag.deleteRule(r)}},t.prototype.getGroup=function(e){var n="";if(e>=this.length||this.groupSizes[e]===0)return n;for(var r=this.groupSizes[e],a=this.indexOfGroup(e),l=a+r,c=a;c<l;c++)n+="".concat(this.tag.getRule(c)).concat(Tb);return n},t})(),Bf=new Map,Tm=new Map,Ff=1,pf=function(t){if(Bf.has(t))return Bf.get(t);for(;Tm.has(Ff);)Ff++;var e=Ff++;return Bf.set(t,e),Tm.set(e,t),e},_L=function(t,e){Ff=e+1,Bf.set(t,e),Tm.set(e,t)},wL="style[".concat(hc,"][").concat(Xk,'="').concat(dp,'"]'),EL=new RegExp("^".concat(hc,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),SL=function(t,e,n){for(var r,a=n.split(","),l=0,c=a.length;l<c;l++)(r=a[l])&&t.registerName(e,r)},TL=function(t,e){for(var n,r=((n=e.textContent)!==null&&n!==void 0?n:"").split(Tb),a=[],l=0,c=r.length;l<c;l++){var h=r[l].trim();if(h){var m=h.match(EL);if(m){var g=0|parseInt(m[1],10),v=m[2];g!==0&&(_L(v,g),SL(t,v,m[3]),t.getTag().insertRules(g,a)),a.length=0}else a.push(h)}}},QE=function(t){for(var e=document.querySelectorAll(wL),n=0,r=e.length;n<r;n++){var a=e[n];a&&a.getAttribute(hc)!==Qk&&(TL(t,a),a.parentNode&&a.parentNode.removeChild(a))}};function CL(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var i3=function(t){var e=document.head,n=t||e,r=document.createElement("style"),a=(function(h){var m=Array.from(h.querySelectorAll("style[".concat(hc,"]")));return m[m.length-1]})(n),l=a!==void 0?a.nextSibling:null;r.setAttribute(hc,Qk),r.setAttribute(Xk,dp);var c=CL();return c&&r.setAttribute("nonce",c),n.insertBefore(r,l),r},kL=(function(){function t(e){this.element=i3(e),this.element.appendChild(document.createTextNode("")),this.sheet=(function(n){if(n.sheet)return n.sheet;for(var r=document.styleSheets,a=0,l=r.length;a<l;a++){var c=r[a];if(c.ownerNode===n)return c}throw Id(17)})(this.element),this.length=0}return t.prototype.insertRule=function(e,n){try{return this.sheet.insertRule(n,e),this.length++,!0}catch{return!1}},t.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.prototype.getRule=function(e){var n=this.sheet.cssRules[e];return n&&n.cssText?n.cssText:""},t})(),AL=(function(){function t(e){this.element=i3(e),this.nodes=this.element.childNodes,this.length=0}return t.prototype.insertRule=function(e,n){if(e<=this.length&&e>=0){var r=document.createTextNode(n);return this.element.insertBefore(r,this.nodes[e]||null),this.length++,!0}return!1},t.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},t})(),NL=(function(){function t(e){this.rules=[],this.length=0}return t.prototype.insertRule=function(e,n){return e<=this.length&&(this.rules.splice(e,0,n),this.length++,!0)},t.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},t})(),XE=Sm,RL={isServer:!Sm,useCSSOMInjection:!aL},a3=(function(){function t(e,n,r){e===void 0&&(e=fc),n===void 0&&(n={});var a=this;this.options=_r(_r({},RL),e),this.gs=n,this.names=new Map(r),this.server=!!e.isServer,!this.server&&Sm&&XE&&(XE=!1,QE(this)),kb(this,function(){return(function(l){for(var c=l.getTag(),h=c.length,m="",g=function(b){var _=(function(B){return Tm.get(B)})(b);if(_===void 0)return"continue";var C=l.names.get(_),N=c.getGroup(b);if(C===void 0||!C.size||N.length===0)return"continue";var j="".concat(hc,".g").concat(b,'[id="').concat(_,'"]'),k="";C!==void 0&&C.forEach(function(B){B.length>0&&(k+="".concat(B,","))}),m+="".concat(N).concat(j,'{content:"').concat(k,'"}').concat(Tb)},v=0;v<h;v++)g(v);return m})(a)})}return t.registerId=function(e){return pf(e)},t.prototype.rehydrate=function(){!this.server&&Sm&&QE(this)},t.prototype.reconstructWithOptions=function(e,n){return n===void 0&&(n=!0),new t(_r(_r({},this.options),e),this.gs,n&&this.names||void 0)},t.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.prototype.getTag=function(){return this.tag||(this.tag=(e=(function(n){var r=n.useCSSOMInjection,a=n.target;return n.isServer?new NL(a):r?new kL(a):new AL(a)})(this.options),new xL(e)));var e},t.prototype.hasNameForId=function(e,n){return this.names.has(e)&&this.names.get(e).has(n)},t.prototype.registerName=function(e,n){if(pf(e),this.names.has(e))this.names.get(e).add(n);else{var r=new Set;r.add(n),this.names.set(e,r)}},t.prototype.insertRules=function(e,n,r){this.registerName(e,n),this.getTag().insertRules(pf(e),r)},t.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.prototype.clearRules=function(e){this.getTag().clearGroup(pf(e)),this.clearNames(e)},t.prototype.clearTag=function(){this.tag=void 0},t})(),jL=/&/g,IL=/^\s*\/\/.*$/gm;function o3(t,e){return t.map(function(n){return n.type==="rule"&&(n.value="".concat(e," ").concat(n.value),n.value=n.value.replaceAll(",",",".concat(e," ")),n.props=n.props.map(function(r){return"".concat(e," ").concat(r)})),Array.isArray(n.children)&&n.type!=="@keyframes"&&(n.children=o3(n.children,e)),n})}function DL(t){var e,n,r,a=fc,l=a.options,c=l===void 0?fc:l,h=a.plugins,m=h===void 0?hp:h,g=function(_,C,N){return N.startsWith(n)&&N.endsWith(n)&&N.replaceAll(n,"").length>0?".".concat(e):_},v=m.slice();v.push(function(_){_.type===op&&_.value.includes("&")&&(_.props[0]=_.props[0].replace(jL,n).replace(r,g))}),c.prefix&&v.push(sL),v.push(tL);var b=function(_,C,N,j){C===void 0&&(C=""),N===void 0&&(N=""),j===void 0&&(j="&"),e=j,n=C,r=new RegExp("\\".concat(n,"\\b"),"g");var k=_.replace(IL,""),B=Z7(N||C?"".concat(N," ").concat(C," { ").concat(k," }"):k);c.namespace&&(B=o3(B,c.namespace));var $=[];return Em(B,nL(v.concat(rL(function(R){return $.push(R)})))),$};return b.hash=m.length?m.reduce(function(_,C){return C.name||Id(15),Fl(_,C.name)},Jk).toString():"",b}var ML=new a3,Qy=DL(),l3=fe.createContext({shouldForwardProp:void 0,styleSheet:ML,stylis:Qy});l3.Consumer;fe.createContext(void 0);function WE(){return I.useContext(l3)}var c3=(function(){function t(e,n){var r=this;this.inject=function(a,l){l===void 0&&(l=Qy);var c=r.name+l.hash;a.hasNameForId(r.id,c)||a.insertRules(r.id,c,l(r.rules,c,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=n,kb(this,function(){throw Id(12,String(r.name))})}return t.prototype.getName=function(e){return e===void 0&&(e=Qy),this.name+e.hash},t})(),PL=function(t){return t>="A"&&t<="Z"};function JE(t){for(var e="",n=0;n<t.length;n++){var r=t[n];if(n===1&&r==="-"&&t[0]==="-")return t;PL(r)?e+="-"+r.toLowerCase():e+=r}return e.startsWith("ms-")?"-"+e:e}var u3=function(t){return t==null||t===!1||t===""},d3=function(t){var e,n,r=[];for(var a in t){var l=t[a];t.hasOwnProperty(a)&&!u3(l)&&(Array.isArray(l)&&l.isCss||mc(l)?r.push("".concat(JE(a),":"),l,";"):ud(l)?r.push.apply(r,cd(cd(["".concat(a," {")],d3(l),!1),["}"],!1)):r.push("".concat(JE(a),": ").concat((e=a,(n=l)==null||typeof n=="boolean"||n===""?"":typeof n!="number"||n===0||e in iL||e.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function To(t,e,n,r){if(u3(t))return[];if(Cb(t))return[".".concat(t.styledComponentId)];if(mc(t)){if(!mc(l=t)||l.prototype&&l.prototype.isReactComponent||!e)return[t];var a=t(e);return To(a,e,n,r)}var l;return t instanceof c3?n?(t.inject(n,r),[t.getName(r)]):[t]:ud(t)?d3(t):Array.isArray(t)?Array.prototype.concat.apply(hp,t.map(function(c){return To(c,e,n,r)})):[t.toString()]}function OL(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(mc(n)&&!Cb(n))return!1}return!0}var LL=Zk(dp),VL=(function(){function t(e,n,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&OL(e),this.componentId=n,this.baseHash=Fl(LL,n),this.baseStyle=r,a3.registerId(n)}return t.prototype.generateAndInjectStyles=function(e,n,r){var a=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,n,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(this.componentId,this.staticRulesId))a=_o(a,this.staticRulesId);else{var l=Yy(To(this.rules,e,n,r)),c=Gy(Fl(this.baseHash,l)>>>0);if(!n.hasNameForId(this.componentId,c)){var h=r(l,".".concat(c),void 0,this.componentId);n.insertRules(this.componentId,c,h)}a=_o(a,c),this.staticRulesId=c}else{for(var m=Fl(this.baseHash,r.hash),g="",v=0;v<this.rules.length;v++){var b=this.rules[v];if(typeof b=="string")g+=b;else if(b){var _=Yy(To(b,e,n,r));m=Fl(m,_+v),g+=_}}if(g){var C=Gy(m>>>0);n.hasNameForId(this.componentId,C)||n.insertRules(this.componentId,C,r(g,".".concat(C),void 0,this.componentId)),a=_o(a,C)}}return a},t})(),h3=fe.createContext(void 0);h3.Consumer;var Y0={};function UL(t,e,n){var r=Cb(t),a=t,l=!G0(t),c=e.attrs,h=c===void 0?hp:c,m=e.componentId,g=m===void 0?(function(V,z){var F=typeof V!="string"?"sc":$E(V);Y0[F]=(Y0[F]||0)+1;var S="".concat(F,"-").concat(e3(dp+F+Y0[F]));return z?"".concat(z,"-").concat(S):S})(e.displayName,e.parentComponentId):m,v=e.displayName,b=v===void 0?(function(V){return G0(V)?"styled.".concat(V):"Styled(".concat(dL(V),")")})(t):v,_=e.displayName&&e.componentId?"".concat($E(e.displayName),"-").concat(e.componentId):e.componentId||g,C=r&&a.attrs?a.attrs.concat(h).filter(Boolean):h,N=e.shouldForwardProp;if(r&&a.shouldForwardProp){var j=a.shouldForwardProp;if(e.shouldForwardProp){var k=e.shouldForwardProp;N=function(V,z){return j(V,z)&&k(V,z)}}else N=j}var B=new VL(n,_,r?a.componentStyle:void 0);function $(V,z){return(function(F,S,E){var A=F.attrs,M=F.componentStyle,O=F.defaultProps,U=F.foldedComponentIds,P=F.styledComponentId,xe=F.target,Ee=fe.useContext(h3),G=WE(),ne=F.shouldForwardProp||G.shouldForwardProp,X=oL(S,Ee,O)||fc,Ae=(function(je,_e,Ce){for(var He,Ge=_r(_r({},_e),{className:void 0,theme:Ce}),ve=0;ve<je.length;ve+=1){var he=mc(He=je[ve])?He(Ge):He;for(var $e in he)Ge[$e]=$e==="className"?_o(Ge[$e],he[$e]):$e==="style"?_r(_r({},Ge[$e]),he[$e]):he[$e]}return _e.className&&(Ge.className=_o(Ge.className,_e.className)),Ge})(A,S,X),De=Ae.as||xe,H={};for(var ee in Ae)Ae[ee]===void 0||ee[0]==="$"||ee==="as"||ee==="theme"&&Ae.theme===X||(ee==="forwardedAs"?H.as=Ae.forwardedAs:ne&&!ne(ee,De)||(H[ee]=Ae[ee]));var ae=(function(je,_e){var Ce=WE(),He=je.generateAndInjectStyles(_e,Ce.styleSheet,Ce.stylis);return He})(M,Ae),de=_o(U,P);return ae&&(de+=" "+ae),Ae.className&&(de+=" "+Ae.className),H[G0(De)&&!Wk.has(De)?"class":"className"]=de,E&&(H.ref=E),I.createElement(De,H)})(R,V,z)}$.displayName=b;var R=fe.forwardRef($);return R.attrs=C,R.componentStyle=B,R.displayName=b,R.shouldForwardProp=N,R.foldedComponentIds=r?_o(a.foldedComponentIds,a.styledComponentId):"",R.styledComponentId=_,R.target=r?a.target:t,Object.defineProperty(R,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(V){this._foldedDefaultProps=r?(function(z){for(var F=[],S=1;S<arguments.length;S++)F[S-1]=arguments[S];for(var E=0,A=F;E<A.length;E++)Ky(z,A[E],!0);return z})({},a.defaultProps,V):V}}),kb(R,function(){return".".concat(R.styledComponentId)}),l&&s3(R,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),R}function ZE(t,e){for(var n=[t[0]],r=0,a=e.length;r<a;r+=1)n.push(e[r],t[r+1]);return n}var eS=function(t){return Object.assign(t,{isCss:!0})};function fp(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(mc(t)||ud(t))return eS(To(ZE(hp,cd([t],e,!0))));var r=t;return e.length===0&&r.length===1&&typeof r[0]=="string"?To(r):eS(To(ZE(r,e)))}function Xy(t,e,n){if(n===void 0&&(n=fc),!e)throw Id(1,e);var r=function(a){for(var l=[],c=1;c<arguments.length;c++)l[c-1]=arguments[c];return t(e,n,fp.apply(void 0,cd([a],l,!1)))};return r.attrs=function(a){return Xy(t,e,_r(_r({},n),{attrs:Array.prototype.concat(n.attrs,a).filter(Boolean)}))},r.withConfig=function(a){return Xy(t,e,_r(_r({},n),a))},r}var f3=function(t){return Xy(UL,t)},Xe=f3;Wk.forEach(function(t){Xe[t]=f3(t)});function Dd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Yy(fp.apply(void 0,cd([t],e,!1))),a=e3(r);return new c3(a,r)}var Wy="#121212",m3="#212121",zL="#3e3e3e",BL="#4a4a4a",p3="#a6a6a6",FL="#ececec",Hf="#ffffff",Ab="#00ccff",g3="#00ff99",y3="#9933ff",v3="#ff6666",b3="#fff35c",HL="#6157ff";function tS(t,e,n,r){var a,l=!1,c=0;function h(){a&&clearTimeout(a)}function m(){h(),l=!0}typeof e!="boolean"&&(r=n,n=e,e=void 0);function g(){for(var v=arguments.length,b=new Array(v),_=0;_<v;_++)b[_]=arguments[_];var C=this,N=Date.now()-c;if(l)return;function j(){c=Date.now(),n.apply(C,b)}function k(){a=void 0}r&&!a&&j(),h(),r===void 0&&N>t?j():e!==!0&&(a=setTimeout(r?k:j,r===void 0?t-N:t))}return g.cancel=m,g}function Nb(t,e,n){return n===void 0?tS(t,e,!1):tS(t,n,e!==!1)}var nS={},rS;function $L(){return rS||(rS=1,(function(){if(typeof window!="object")return;if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});return}function t(R){try{return R.defaultView&&R.defaultView.frameElement||null}catch{return null}}var e=(function(R){for(var V=R,z=t(V);z;)V=z.ownerDocument,z=t(V);return V})(window.document),n=[],r=null,a=null;function l(R){this.time=R.time,this.target=R.target,this.rootBounds=N(R.rootBounds),this.boundingClientRect=N(R.boundingClientRect),this.intersectionRect=N(R.intersectionRect||C()),this.isIntersecting=!!R.intersectionRect;var V=this.boundingClientRect,z=V.width*V.height,F=this.intersectionRect,S=F.width*F.height;z?this.intersectionRatio=Number((S/z).toFixed(4)):this.intersectionRatio=this.isIntersecting?1:0}function c(R,V){var z=V||{};if(typeof R!="function")throw new Error("callback must be a function");if(z.root&&z.root.nodeType!=1&&z.root.nodeType!=9)throw new Error("root must be a Document or Element");this._checkForIntersections=m(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=R,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(z.rootMargin),this.thresholds=this._initThresholds(z.threshold),this.root=z.root||null,this.rootMargin=this._rootMarginValues.map(function(F){return F.value+F.unit}).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}c.prototype.THROTTLE_TIMEOUT=100,c.prototype.POLL_INTERVAL=null,c.prototype.USE_MUTATION_OBSERVER=!0,c._setupCrossOriginUpdater=function(){return r||(r=function(R,V){!R||!V?a=C():a=j(R,V),n.forEach(function(z){z._checkForIntersections()})}),r},c._resetCrossOriginUpdater=function(){r=null,a=null},c.prototype.observe=function(R){var V=this._observationTargets.some(function(z){return z.element==R});if(!V){if(!(R&&R.nodeType==1))throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:R,entry:null}),this._monitorIntersections(R.ownerDocument),this._checkForIntersections()}},c.prototype.unobserve=function(R){this._observationTargets=this._observationTargets.filter(function(V){return V.element!=R}),this._unmonitorIntersections(R.ownerDocument),this._observationTargets.length==0&&this._unregisterInstance()},c.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},c.prototype.takeRecords=function(){var R=this._queuedEntries.slice();return this._queuedEntries=[],R},c.prototype._initThresholds=function(R){var V=R||[0];return Array.isArray(V)||(V=[V]),V.sort().filter(function(z,F,S){if(typeof z!="number"||isNaN(z)||z<0||z>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return z!==S[F-1]})},c.prototype._parseRootMargin=function(R){var V=R||"0px",z=V.split(/\s+/).map(function(F){var S=/^(-?\d*\.?\d+)(px|%)$/.exec(F);if(!S)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(S[1]),unit:S[2]}});return z[1]=z[1]||z[0],z[2]=z[2]||z[0],z[3]=z[3]||z[1],z},c.prototype._monitorIntersections=function(R){var V=R.defaultView;if(V&&this._monitoringDocuments.indexOf(R)==-1){var z=this._checkForIntersections,F=null,S=null;this.POLL_INTERVAL?F=V.setInterval(z,this.POLL_INTERVAL):(g(V,"resize",z,!0),g(R,"scroll",z,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in V&&(S=new V.MutationObserver(z),S.observe(R,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))),this._monitoringDocuments.push(R),this._monitoringUnsubscribes.push(function(){var M=R.defaultView;M&&(F&&M.clearInterval(F),v(M,"resize",z,!0)),v(R,"scroll",z,!0),S&&S.disconnect()});var E=this.root&&(this.root.ownerDocument||this.root)||e;if(R!=E){var A=t(R);A&&this._monitorIntersections(A.ownerDocument)}}},c.prototype._unmonitorIntersections=function(R){var V=this._monitoringDocuments.indexOf(R);if(V!=-1){var z=this.root&&(this.root.ownerDocument||this.root)||e,F=this._observationTargets.some(function(A){var M=A.element.ownerDocument;if(M==R)return!0;for(;M&&M!=z;){var O=t(M);if(M=O&&O.ownerDocument,M==R)return!0}return!1});if(!F){var S=this._monitoringUnsubscribes[V];if(this._monitoringDocuments.splice(V,1),this._monitoringUnsubscribes.splice(V,1),S(),R!=z){var E=t(R);E&&this._unmonitorIntersections(E.ownerDocument)}}}},c.prototype._unmonitorAllIntersections=function(){var R=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var V=0;V<R.length;V++)R[V]()},c.prototype._checkForIntersections=function(){if(!(!this.root&&r&&!a)){var R=this._rootIsInDom(),V=R?this._getRootRect():C();this._observationTargets.forEach(function(z){var F=z.element,S=_(F),E=this._rootContainsTarget(F),A=z.entry,M=R&&E&&this._computeTargetAndRootIntersection(F,S,V),O=null;this._rootContainsTarget(F)?(!r||this.root)&&(O=V):O=C();var U=z.entry=new l({time:h(),target:F,boundingClientRect:S,rootBounds:O,intersectionRect:M});A?R&&E?this._hasCrossedThreshold(A,U)&&this._queuedEntries.push(U):A&&A.isIntersecting&&this._queuedEntries.push(U):this._queuedEntries.push(U)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},c.prototype._computeTargetAndRootIntersection=function(R,V,z){if(window.getComputedStyle(R).display!="none"){for(var F=V,S=B(R),E=!1;!E&&S;){var A=null,M=S.nodeType==1?window.getComputedStyle(S):{};if(M.display=="none")return null;if(S==this.root||S.nodeType==9)if(E=!0,S==this.root||S==e)r&&!this.root?!a||a.width==0&&a.height==0?(S=null,A=null,F=null):A=a:A=z;else{var O=B(S),U=O&&_(O),P=O&&this._computeTargetAndRootIntersection(O,U,z);U&&P?(S=O,A=j(U,P)):(S=null,F=null)}else{var xe=S.ownerDocument;S!=xe.body&&S!=xe.documentElement&&M.overflow!="visible"&&(A=_(S))}if(A&&(F=b(A,F)),!F)break;S=S&&B(S)}return F}},c.prototype._getRootRect=function(){var R;if(this.root&&!$(this.root))R=_(this.root);else{var V=$(this.root)?this.root:e,z=V.documentElement,F=V.body;R={top:0,left:0,right:z.clientWidth||F.clientWidth,width:z.clientWidth||F.clientWidth,bottom:z.clientHeight||F.clientHeight,height:z.clientHeight||F.clientHeight}}return this._expandRectByRootMargin(R)},c.prototype._expandRectByRootMargin=function(R){var V=this._rootMarginValues.map(function(F,S){return F.unit=="px"?F.value:F.value*(S%2?R.width:R.height)/100}),z={top:R.top-V[0],right:R.right+V[1],bottom:R.bottom+V[2],left:R.left-V[3]};return z.width=z.right-z.left,z.height=z.bottom-z.top,z},c.prototype._hasCrossedThreshold=function(R,V){var z=R&&R.isIntersecting?R.intersectionRatio||0:-1,F=V.isIntersecting?V.intersectionRatio||0:-1;if(z!==F)for(var S=0;S<this.thresholds.length;S++){var E=this.thresholds[S];if(E==z||E==F||E<z!=E<F)return!0}},c.prototype._rootIsInDom=function(){return!this.root||k(e,this.root)},c.prototype._rootContainsTarget=function(R){var V=this.root&&(this.root.ownerDocument||this.root)||e;return k(V,R)&&(!this.root||V==R.ownerDocument)},c.prototype._registerInstance=function(){n.indexOf(this)<0&&n.push(this)},c.prototype._unregisterInstance=function(){var R=n.indexOf(this);R!=-1&&n.splice(R,1)};function h(){return window.performance&&performance.now&&performance.now()}function m(R,V){var z=null;return function(){z||(z=setTimeout(function(){R(),z=null},V))}}function g(R,V,z,F){typeof R.addEventListener=="function"?R.addEventListener(V,z,F):typeof R.attachEvent=="function"&&R.attachEvent("on"+V,z)}function v(R,V,z,F){typeof R.removeEventListener=="function"?R.removeEventListener(V,z,F):typeof R.detachEvent=="function"&&R.detachEvent("on"+V,z)}function b(R,V){var z=Math.max(R.top,V.top),F=Math.min(R.bottom,V.bottom),S=Math.max(R.left,V.left),E=Math.min(R.right,V.right),A=E-S,M=F-z;return A>=0&&M>=0&&{top:z,bottom:F,left:S,right:E,width:A,height:M}||null}function _(R){var V;try{V=R.getBoundingClientRect()}catch{}return V?(V.width&&V.height||(V={top:V.top,right:V.right,bottom:V.bottom,left:V.left,width:V.right-V.left,height:V.bottom-V.top}),V):C()}function C(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function N(R){return!R||"x"in R?R:{top:R.top,y:R.top,bottom:R.bottom,left:R.left,x:R.left,right:R.right,width:R.width,height:R.height}}function j(R,V){var z=V.top-R.top,F=V.left-R.left;return{top:z,left:F,height:V.height,width:V.width,bottom:z+V.height,right:F+V.width}}function k(R,V){for(var z=V;z;){if(z==R)return!0;z=B(z)}return!1}function B(R){var V=R.parentNode;return R.nodeType==9&&R!=e?t(R):(V&&V.assignedSlot&&(V=V.assignedSlot.parentNode),V&&V.nodeType==11&&V.host?V.host:V)}function $(R){return R&&R.nodeType===9}window.IntersectionObserver=c,window.IntersectionObserverEntry=l})()),nS}$L();var qL=Object.defineProperty,sS=Object.getOwnPropertySymbols,GL=Object.prototype.hasOwnProperty,YL=Object.prototype.propertyIsEnumerable,iS=(t,e,n)=>e in t?qL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Nu=(t,e)=>{for(var n in e||(e={}))GL.call(e,n)&&iS(t,n,e[n]);if(sS)for(var n of sS(e))YL.call(e,n)&&iS(t,n,e[n]);return t},KL=(t,e,n)=>{const r=By(t,[n]),a=By(e,[n]);return r[n]&&a[n]?Nu(Nu(Nu({},t),e),{[n]:r[n]+", "+a[n]}):Nu(Nu({},t),e)},QL=KL,Rb=(typeof window<"u"?window:global)||{},aS,XL=((aS=Rb)==null?void 0:aS.GIPHY_PINGBACK_URL)||"https://pingback.giphy.com",WL=`${XL}/v2/pingback?apikey=l0HlIwPWyBBUDAUgM`,JL=t=>{const e=wb();return e?.set("Content-Type","application/json"),$n.debug("Pingback session",t),t.length?fetch(WL,{method:"POST",body:JSON.stringify({events:t}),headers:e}).catch(n=>{$n.warn(`pingbacks failing to post ${n}`)}):new Promise(n=>n())},Jy=[];Rb.giphyRandomId=_b();var gf="";function jb(){const t=[...Jy];Jy=[],JL(t)}var ZL=Nb(1e3,jb),oS,lS;(lS=(oS=Rb).addEventListener)==null||lS.call(oS,"beforeunload",jb);var eV=({userId:t,eventType:e,actionType:n,attributes:r,queueEvents:a=!0,analyticsResponsePayload:l})=>{gf=t?String(t):gf;const c={ts:Date.now(),attributes:r,action_type:n,user_id:_b(),analytics_response_payload:l};gf&&(c.logged_in_user_id=gf),c.analytics_response_payload&&(c.analytics_response_payload=`${c.analytics_response_payload}${$n.ENABLED?"&mode=verification":""}`),e&&(c.event_type=e),Jy.push(c),a?ZL():jb()},Ib=eV,Zy=function(t,e){return Zy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},Zy(t,e)};function x3(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Zy(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Cm=function(){return Cm=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},Cm.apply(this,arguments)};function _3(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function w3(t,e,n,r){var a=arguments.length,l=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(t,e,n,r);else for(var h=t.length-1;h>=0;h--)(c=t[h])&&(l=(a<3?c(l):a>3?c(e,n,l):c(e,n))||l);return a>3&&l&&Object.defineProperty(e,n,l),l}function E3(t,e){return function(n,r){e(n,r,t)}}function S3(t,e,n,r,a,l){function c(B){if(B!==void 0&&typeof B!="function")throw new TypeError("Function expected");return B}for(var h=r.kind,m=h==="getter"?"get":h==="setter"?"set":"value",g=!e&&t?r.static?t:t.prototype:null,v=e||(g?Object.getOwnPropertyDescriptor(g,r.name):{}),b,_=!1,C=n.length-1;C>=0;C--){var N={};for(var j in r)N[j]=j==="access"?{}:r[j];for(var j in r.access)N.access[j]=r.access[j];N.addInitializer=function(B){if(_)throw new TypeError("Cannot add initializers after decoration has completed");l.push(c(B||null))};var k=(0,n[C])(h==="accessor"?{get:v.get,set:v.set}:v[m],N);if(h==="accessor"){if(k===void 0)continue;if(k===null||typeof k!="object")throw new TypeError("Object expected");(b=c(k.get))&&(v.get=b),(b=c(k.set))&&(v.set=b),(b=c(k.init))&&a.unshift(b)}else(b=c(k))&&(h==="field"?a.unshift(b):v[m]=b)}g&&Object.defineProperty(g,r.name,v),_=!0}function T3(t,e,n){for(var r=arguments.length>2,a=0;a<e.length;a++)n=r?e[a].call(t,n):e[a].call(t);return r?n:void 0}function C3(t){return typeof t=="symbol"?t:"".concat(t)}function k3(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function A3(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function N3(t,e,n,r){function a(l){return l instanceof n?l:new n(function(c){c(l)})}return new(n||(n=Promise))(function(l,c){function h(v){try{g(r.next(v))}catch(b){c(b)}}function m(v){try{g(r.throw(v))}catch(b){c(b)}}function g(v){v.done?l(v.value):a(v.value).then(h,m)}g((r=r.apply(t,e||[])).next())})}function R3(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,a,l,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=h(0),c.throw=h(1),c.return=h(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(g){return function(v){return m([g,v])}}function m(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(n=0)),n;)try{if(r=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,a=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){n.label=g[1];break}if(g[0]===6&&n.label<l[1]){n.label=l[1],l=g;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(g);break}l[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(v){g=[6,v],a=0}finally{r=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}var mp=Object.create?(function(t,e,n,r){r===void 0&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]});function j3(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&mp(e,t,n)}function km(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Db(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),a,l=[],c;try{for(;(e===void 0||e-- >0)&&!(a=r.next()).done;)l.push(a.value)}catch(h){c={error:h}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(c)throw c.error}}return l}function I3(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Db(arguments[e]));return t}function D3(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var l=arguments[e],c=0,h=l.length;c<h;c++,a++)r[a]=l[c];return r}function M3(t,e,n){if(n||arguments.length===2)for(var r=0,a=e.length,l;r<a;r++)(l||!(r in e))&&(l||(l=Array.prototype.slice.call(e,0,r)),l[r]=e[r]);return t.concat(l||Array.prototype.slice.call(e))}function pc(t){return this instanceof pc?(this.v=t,this):new pc(t)}function P3(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(C){return function(N){return Promise.resolve(N).then(C,b)}}function h(C,N){r[C]&&(a[C]=function(j){return new Promise(function(k,B){l.push([C,j,k,B])>1||m(C,j)})},N&&(a[C]=N(a[C])))}function m(C,N){try{g(r[C](N))}catch(j){_(l[0][3],j)}}function g(C){C.value instanceof pc?Promise.resolve(C.value.v).then(v,b):_(l[0][2],C)}function v(C){m("next",C)}function b(C){m("throw",C)}function _(C,N){C(N),l.shift(),l.length&&m(l[0][0],l[0][1])}}function O3(t){var e,n;return e={},r("next"),r("throw",function(a){throw a}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(a,l){e[a]=t[a]?function(c){return(n=!n)?{value:pc(t[a](c)),done:!1}:l?l(c):c}:l}}function L3(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof km=="function"?km(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(l){n[l]=t[l]&&function(c){return new Promise(function(h,m){c=t[l](c),a(h,m,c.done,c.value)})}}function a(l,c,h,m){Promise.resolve(m).then(function(g){l({value:g,done:h})},c)}}function V3(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var tV=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},ev=function(t){return ev=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},ev(t)};function U3(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=ev(t),r=0;r<n.length;r++)n[r]!=="default"&&mp(e,t,n[r]);return tV(e,t),e}function z3(t){return t&&t.__esModule?t:{default:t}}function B3(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function F3(t,e,n,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(t,n):a?a.value=n:e.set(t,n),n}function H3(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function $3(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(l){return Promise.reject(l)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var nV=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function q3(t){function e(l){t.error=t.hasError?new nV(l,t.error,"An error was suppressed during disposal."):l,t.hasError=!0}var n,r=0;function a(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(a);if(n.dispose){var l=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(l).then(a,function(c){return e(c),a()})}else r|=1}catch(c){e(c)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return a()}function G3(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,a,l,c){return r?e?".jsx":".js":a&&(!l||!c)?n:a+l+"."+c.toLowerCase()+"js"}):t}const rV={__extends:x3,__assign:Cm,__rest:_3,__decorate:w3,__param:E3,__esDecorate:S3,__runInitializers:T3,__propKey:C3,__setFunctionName:k3,__metadata:A3,__awaiter:N3,__generator:R3,__createBinding:mp,__exportStar:j3,__values:km,__read:Db,__spread:I3,__spreadArrays:D3,__spreadArray:M3,__await:pc,__asyncGenerator:P3,__asyncDelegator:O3,__asyncValues:L3,__makeTemplateObject:V3,__importStar:U3,__importDefault:z3,__classPrivateFieldGet:B3,__classPrivateFieldSet:F3,__classPrivateFieldIn:H3,__addDisposableResource:$3,__disposeResources:q3,__rewriteRelativeImportExtension:G3},sV=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:$3,get __assign(){return Cm},__asyncDelegator:O3,__asyncGenerator:P3,__asyncValues:L3,__await:pc,__awaiter:N3,__classPrivateFieldGet:B3,__classPrivateFieldIn:H3,__classPrivateFieldSet:F3,__createBinding:mp,__decorate:w3,__disposeResources:q3,__esDecorate:S3,__exportStar:j3,__extends:x3,__generator:R3,__importDefault:z3,__importStar:U3,__makeTemplateObject:V3,__metadata:A3,__param:E3,__propKey:C3,__read:Db,__rest:_3,__rewriteRelativeImportExtension:G3,__runInitializers:T3,__setFunctionName:k3,__spread:I3,__spreadArray:M3,__spreadArrays:D3,__values:km,default:rV},Symbol.toStringTag,{value:"Module"})),iV=qN(sV);var yf={},cS;function aV(){if(cS)return yf;cS=1,Object.defineProperty(yf,"__esModule",{value:!0});var t=Va();function e(n,r){r===void 0&&(r=0);var a=t.useRef(!1),l=t.useRef(),c=t.useRef(n),h=t.useCallback(function(){return a.current},[]),m=t.useCallback(function(){a.current=!1,l.current&&clearTimeout(l.current),l.current=setTimeout(function(){a.current=!0,c.current()},r)},[r]),g=t.useCallback(function(){a.current=null,l.current&&clearTimeout(l.current)},[]);return t.useEffect(function(){c.current=n},[n]),t.useEffect(function(){return m(),g},[r]),[h,g,m]}return yf.default=e,yf}var oV=aV();const lV=fd(oV);var vf={},bf={},jr={},uS;function cV(){if(uS)return jr;uS=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.isNavigator=jr.isBrowser=jr.off=jr.on=jr.noop=void 0;var t=function(){};jr.noop=t;function e(r){for(var a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];r&&r.addEventListener&&r.addEventListener.apply(r,a)}jr.on=e;function n(r){for(var a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];r&&r.removeEventListener&&r.removeEventListener.apply(r,a)}return jr.off=n,jr.isBrowser=typeof window<"u",jr.isNavigator=typeof navigator<"u",jr}var dS;function uV(){if(dS)return bf;dS=1,Object.defineProperty(bf,"__esModule",{value:!0});var t=Va(),e=cV(),n=e.isBrowser?t.useLayoutEffect:t.useEffect;return bf.default=n,bf}var hS;function dV(){if(hS)return vf;hS=1,Object.defineProperty(vf,"__esModule",{value:!0});var t=iV,e=Va(),n=t.__importDefault(uV()),r=function(a,l){a===void 0&&(a=1e12),l===void 0&&(l=0);var c=e.useState(0),h=c[0],m=c[1];return n.default(function(){var g,v,b,_=function(){var k=Math.min(1,(Date.now()-b)/a);m(k),C()},C=function(){g=requestAnimationFrame(_)},N=function(){v=setTimeout(function(){cancelAnimationFrame(g),m(1)},a),b=Date.now(),C()},j=setTimeout(N,l);return function(){clearTimeout(v),clearTimeout(j),cancelAnimationFrame(g)}},[a,l]),h};return vf.default=r,vf}var hV=dV();const fV=fd(hV);var mV=Object.defineProperty,pV=Object.defineProperties,gV=Object.getOwnPropertyDescriptors,fS=Object.getOwnPropertySymbols,yV=Object.prototype.hasOwnProperty,vV=Object.prototype.propertyIsEnumerable,mS=(t,e,n)=>e in t?mV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Di=(t,e)=>{for(var n in e||(e={}))yV.call(e,n)&&mS(t,n,e[n]);if(fS)for(var n of fS(e))vV.call(e,n)&&mS(t,n,e[n]);return t},Mb=(t,e)=>pV(t,gV(e)),Pb=(t,e,n)=>new Promise((r,a)=>{var l=m=>{try{h(n.next(m))}catch(g){a(g)}},c=m=>{try{h(n.throw(m))}catch(g){a(g)}},h=m=>m.done?r(m.value):Promise.resolve(m.value).then(l,c);h((n=n.apply(t,e)).next())}),bV=t=>{var e,n;if(!t)return"";const r=(n=(e=t?.split("."))==null?void 0:e.pop())==null?void 0:n.toLowerCase();return t.replace(`.${r}`,`/80h.${r}`)},xV=Xe.img`
    object-fit: cover;
    width: 32px;
    height: 32px;
    margin-right: 8px;
`,_V=({user:t,className:e=""})=>{const n=I.useRef(Math.floor(Math.random()*5)+1),r=t.avatar_url?bV(t.avatar_url):`https://media.giphy.com/avatars/default${n.current}.gif`;return fe.createElement(xV,{src:r,className:e})},pp=_V,dd=({className:t="",size:e=17,fill:n="#15CDFF"})=>fe.createElement("svg",{className:[dd.className,t].join(" "),height:e,width:"19px",viewBox:"0 0 19 17"},fe.createElement("path",{className:dd.checkMarkClassName,d:"M9.32727273,9.44126709 L9.32727273,3.03016561 L6.55027155,3.03016561 L6.55027155,10.8150746 L6.55027155,12.188882 L12.1042739,12.188882 L12.1042739,9.44126709 L9.32727273,9.44126709 Z",fill:Wy,transform:"translate(9.327273, 7.609524) scale(-1, 1) rotate(-45.000000) translate(-9.327273, -7.609524) "}),fe.createElement("g",{transform:"translate(-532.000000, -466.000000)",fill:n},fe.createElement("g",{transform:"translate(141.000000, 235.000000)"},fe.createElement("g",{transform:"translate(264.000000, 0.000000)"},fe.createElement("g",{transform:"translate(10.000000, 224.000000)"},fe.createElement("g",{transform:"translate(114.000000, 2.500000)"},fe.createElement("path",{d:"M15.112432,4.80769231 L16.8814194,6.87556817 L19.4157673,7.90116318 L19.6184416,10.6028916 L21.0594951,12.9065042 L19.6184416,15.2101168 L19.4157673,17.9118452 L16.8814194,18.9374402 L15.112432,21.0053161 L12.4528245,20.3611511 L9.79321699,21.0053161 L8.02422954,18.9374402 L5.48988167,17.9118452 L5.28720734,15.2101168 L3.84615385,12.9065042 L5.28720734,10.6028916 L5.48988167,7.90116318 L8.02422954,6.87556817 L9.79321699,4.80769231 L12.4528245,5.4518573 L15.112432,4.80769231 Z M17.8163503,10.8991009 L15.9282384,9.01098901 L11.5681538,13.3696923 L9.68115218,11.4818515 L7.81302031,13.3499833 L9.7011322,15.2380952 L11.5892441,17.1262071 L17.8163503,10.8991009 Z"})))))));dd.className="giphy-verified-badge";dd.checkMarkClassName="giphy-verified-checkmark";var tv=dd,wV=Xe.div`
    color: white;
    font-size: 16px;
    font-weight: 700;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    -webkit-font-smoothing: antialiased;
`,EV=Xe(tv)`
    margin-left: 4px;
    flex-shrink: 0;
`,SV=Xe.div`
    display: flex;
    align-items: center;
    min-width: 0;
`,TV=({user:t})=>{const{display_name:e,username:n}=t;return fe.createElement(SV,null,fe.createElement(wV,null,e||`@${n}`),t.is_verified?fe.createElement(EV,{size:14}):null)},Y3=TV,CV=Xe.div`
    display: flex;
    align-items: center;
    font-family: interface, helvetica, arial;
`,kV=Xe(pp)`
    flex-shrink: 0;
`,Ob=({gif:t,className:e,onClick:n})=>{const{user:r}=t;return!r?.username&&!r?.display_name?null:fe.createElement(CV,{className:[Ob.className,e].join(" "),onClick:a=>{if(a.preventDefault(),a.stopPropagation(),n)n(t);else{const l=r.profile_url;l&&window.open(l,"_blank")}}},fe.createElement(kV,{user:r}),fe.createElement(Y3,{user:t.user}))};Ob.className="giphy-attribution";var AV=Ob,NV=Xe.div`
    background: linear-gradient(rgba(0, 0, 0, 0), rgba(18, 18, 18, 0.6));
    cursor: default;
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 75px;
    pointer-events: none;
`,RV=Xe(AV)`
    position: absolute;
    bottom: 10px;
    left: 10px;
    right: 10px;
`,jV=Xe.div`
    transition: opacity 150ms ease-in;
`,IV=({gif:t,isHovered:e,onClick:n})=>{const r=I.useRef(e);return e&&(r.current=!0),t.user&&r.current?fe.createElement(jV,{style:{opacity:e?1:0}},fe.createElement(NV,null),fe.createElement(RV,{gif:t,onClick:n})):null},DV=IV,MV=({children:t,className:e,onVisibleChange:n,config:r})=>{const a=I.useRef(null);return I.useEffect(()=>{let l;return a.current&&(l=new IntersectionObserver(([c])=>{n&&n(c.isIntersecting)},r),l.observe(a.current)),()=>l?.disconnect()},[n,a,r]),fe.createElement("div",{ref:a,className:e},t)},K3=MV,Q3=t=>(e,n,r,a={})=>{e.analytics_response_payload&&Ib({analyticsResponsePayload:e.analytics_response_payload,userId:n,actionType:t,attributes:Di({position:JSON.stringify(h7(r))},a)})},PV=(t,e,n,r={})=>{t.analytics_response_payload&&Ib({analyticsResponsePayload:t.analytics_response_payload,userId:e,actionType:"SEEN",attributes:Di({position:JSON.stringify(n)},r)})},OV=Q3("CLICK"),LV=Q3("HOVER");function VV(t){return t=t.replace("%%CACHEBUSTER%%",Ok()),t=t.replace("%%TIMESTAMP%%",`${Date.now()}`),t=t.replace("%%APPBUNDLE%%","web"),typeof window<"u"&&(t=t.replace("%%APP_WINDOW_SIZE%%",`${window.innerWidth},${window.innerHeight}`),t=t.replace("%%DEVICE_LANGUAGE%%",`${navigator.language}`)),t}function UV({src:t}){const e=I.useRef(VV(t)),[n,r]=I.useState(!1);return I.useEffect(()=>{r(!0)},[]),n?fe.createElement("img",{src:e.current,width:0,height:0}):null}var zV=UV,nv=I.createContext({}),BV=({attributes:t,children:e})=>{const{attributes:n={}}=I.useContext(nv);return fe.createElement(nv.Provider,{value:{attributes:QL(n,t,"layout_type")}},e)},X3=BV,FV=Xe.div`
    position: relative;
    display: block;
    picture {
        display: block;
        width: 100%;
        height: 100%;
    }
    img {
        display: block;
    }
    .${tv.className} {
        g {
            fill: white;
        }
    }
    .${tv.checkMarkClassName} {
        opacity: 0;
    }
`,pS=[Ab,g3,y3,v3,b3],HV=()=>pS[Math.round(Math.random()*(pS.length-1))],$V=200,gS="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",qV=!!(typeof window<"u"&&window.document&&window.document.createElement),Pl=()=>{},GV=({children:t})=>{const[e,n]=I.useState(!1);return I.useEffect(()=>{n(!0)},[]),e?fe.createElement(fe.Fragment,null,t):null},Ta=({gif:t,gif:{bottle_data:e={}},width:n,percentWidth:r,percentHeight:a,height:l,onGifRightClick:c=Pl,className:h="",onGifClick:m=Pl,onGifKeyPress:g=Pl,onGifSeen:v=Pl,onGifVisible:b=Pl,user:_={},backgroundColor:C,overlay:N,hideAttribution:j=!1,noLink:k=!1,borderRadius:B=4,style:$,tabIndex:R,lazyLoad:V=!0})=>{var z;const[F,S]=I.useState(!1),[E,A]=I.useState(!1),[M,O]=I.useState(!qV||!V),[U,P]=I.useState(""),xe=I.useRef(HV()),Ee=I.useRef(null),G=I.useRef(null),ne=I.useRef(),X=I.useRef(),Ae=I.useRef(),De=I.useRef(Pl),H=Object.keys(e).length>0,{attributes:ee}=I.useContext(nv);let ae=N;!ae&&!j&&(ae=DV);const de=le=>{clearTimeout(Ae.current),le.persist(),A(!0),Ae.current=window.setTimeout(()=>{LV(t,_?.id,le.target,ee)},$V)},je=()=>{clearTimeout(Ae.current),A(!1)},_e=le=>{OV(t,_?.id,le.target,ee),m(t,le)},Ce=le=>{g(t,le)};De.current=le=>{S(!0),$n.debug(`GIF ${t.id} seen. ${t.title}`),PV(t,_?.id,le.boundingClientRect,ee),v?.(t,le.boundingClientRect),X.current&&X.current.disconnect()};const He=()=>{X.current||(X.current=new IntersectionObserver(([le])=>{le.isIntersecting&&De.current(le)},{threshold:[.99]})),!F&&Ee.current&&X.current&&X.current.observe(Ee.current)},Ge=le=>{He(),b(t,le),P(Ta.imgLoadedClassName)};I.useEffect(()=>{var le,ke;(le=G.current)!=null&&le.complete&&(He(),b(t)),(ke=X.current)==null||ke.disconnect(),S(!1)},[t.id]),I.useEffect(()=>(ne.current=new IntersectionObserver(([le])=>{const{isIntersecting:ke}=le;O(ke),!ke&&X.current&&X.current.disconnect()}),ne.current.observe(Ee.current),()=>{ne.current&&ne.current.disconnect(),X.current&&X.current.disconnect(),Ae.current&&clearTimeout(Ae.current)}),[]);const ve=ap(t,n);let he=l;!$?.aspectRatio&&!l&&(he=ve);const $e=m7(t.images,n,l||ve);if(!$e)return t.images?console.error(`no rendition for ${t.id}, rendition names: ${Object.keys(t.images).join(", ")}`):console.error(`no rendition for ${t.id} - no images`),null;const oe=t.images[$e.renditionName],Ie=U===Ta.imgLoadedClassName&&!t.is_sticker?"unset":C||(t.is_sticker?"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4AQMAAACSSKldAAAABlBMVEUhIiIWFhYoSqvJAAAAGElEQVQY02MAAv7///8PWxqIPwDZw5UGABtgwz2xhFKxAAAAAElFTkSuQmCC') 0 0":xe.current),Q=B?"hidden":"unset";return fe.createElement(FV,{as:k?"div":"a",href:k?void 0:t.url,"data-giphy-id":t.id,"data-giphy-is-sticker":t.is_sticker,style:Di({width:r||n,height:a||he,overflow:Q,borderRadius:B},$),className:[Ta.className,h].join(" "),onMouseOver:de,onMouseLeave:je,onClick:_e,onContextMenu:le=>c(t,le),onKeyPress:Ce,tabIndex:R,ref:Ee},fe.createElement("picture",null,fe.createElement("source",{type:"image/webp",srcSet:M?oe.webp:gS,suppressHydrationWarning:!0}),fe.createElement("img",{ref:G,suppressHydrationWarning:!0,className:[Ta.imgClassName,U].join(" "),src:M?oe.url:gS,style:{background:Ie},width:"100%",height:"100%",alt:g7(t),onLoad:M?Ge:()=>{}})),H&&((z=e?.tags)==null?void 0:z.map((le,ke)=>fe.createElement(zV,{src:le,key:ke}))),ae&&fe.createElement(GV,null,M&&fe.createElement(ae,{gif:t,isHovered:E,width:n,height:he})))};Ta.className="giphy-gif";Ta.imgClassName="giphy-gif-img";Ta.imgLoadedClassName="giphy-img-loaded";var hd=Ta,YV=Xe.div`
    -webkit-overflow-scrolling: touch;
    overflow-x: auto;
    overflow-y: hidden;
    white-space: nowrap;
    position: relative;
`,KV=Xe(hd)`
    position: relative;
    display: inline-block;
    list-style: none;
    margin-left: ${t=>t.$ml}px;
    /* make sure gifs are fully visible with a scrollbar */
    margin-bottom: 1px;

    &:first-of-type {
        margin-left: 0;
    }
    .${hd.imgClassName} {
        position: absolute;
        top: 0;
        left: 0;
    }
`,QV=Xe(K3)`
    display: inline-block;
`,XV=Xe.div`
    width: 30px;
    display: inline-block;
    opacity: ${t=>t.$isFirstLoad?0:1};
    height: ${t=>t.$height}px;
`,WV=Object.freeze({gutter:6,user:{},initialGifs:[]}),JV=Object.freeze({isFetching:!1,gifs:[],isLoaderVisible:!1,isDoneFetching:!1}),W3=class J3 extends I.PureComponent{constructor(){super(...arguments),this.state=Mb(Di({},JV),{gifs:this.props.initialGifs||[]}),this.unmounted=!1,this.paginator=Bk(this.props.fetchGifs,this.state.gifs),this.onLoaderVisible=e=>{this.unmounted||this.setState({isLoaderVisible:e},this.onFetch)},this.onFetch=Nb(100,()=>Pb(this,null,function*(){if(this.unmounted)return;const{isFetching:e,isLoaderVisible:n,gifs:r}=this.state;if(!e&&n){this.setState({isFetching:!0});let a;try{a=yield this.paginator()}catch{this.setState({isFetching:!1})}if(a)if(!!!a?.skipCountCheck&&r.length===a.length)this.setState({isDoneFetching:!0});else{this.setState({gifs:a,isFetching:!1});const{onGifsFetched:c}=this.props;c&&c(a),this.onFetch()}}}))}componentDidMount(){this.unmounted=!1,this.onFetch()}componentWillUnmount(){this.unmounted=!0}render(){const{onGifVisible:e,onGifRightClick:n,gifHeight:r,gifWidth:a,gutter:l,className:c=J3.className,onGifSeen:h,onGifClick:m,onGifKeyPress:g,user:v,overlay:b,hideAttribution:_,noLink:C,noResultsMessage:N,backgroundColor:j,borderRadius:k,tabIndex:B=0,loaderConfig:$}=this.props,{gifs:R,isDoneFetching:V}=this.state,z=!V,F=R.length===0;return fe.createElement(X3,{attributes:{layout_type:"CAROUSEL"}},fe.createElement(YV,{className:c},R.map(S=>fe.createElement(KV,{gif:S,key:S.id,tabIndex:B,width:a||p7(S,r),height:r,onGifClick:m,onGifKeyPress:g,onGifSeen:h,onGifVisible:e,onGifRightClick:n,user:v,$ml:l,overlay:b,hideAttribution:_,noLink:C,borderRadius:k,backgroundColor:j})),!z&&R.length===0&&N,z&&fe.createElement(QV,{onVisibleChange:this.onLoaderVisible,config:$},fe.createElement(XV,{$isFirstLoad:F,$height:r}))))}};W3.className="giphy-carousel";W3.defaultProps=WV;var ZV=Xe.div`
    color: ${p3};
    display: flex;
    justify-content: center;
    margin: 30px 0;
    font-family: interface, Helvetica Neue, helvetica, sans-serif;
    font-size: 16px;
    font-weight: 600;
    a {
        color: ${Ab};
        cursor: pointer;
        &:hover {
            color: white;
        }
    }
`,eU=({onClick:t})=>fe.createElement(ZV,null,"Error loading GIFs.",fe.createElement("a",{onClick:t},"Try again?")),tU=eU,nU=.75;Xe.div`
    align-items: center;
    background-color: ${({$backgroundColor:t})=>t};
    border-radius: 16px;
    display: flex;
    max-width: fit-content;
    overflow: hidden;
    padding: 4px 5px 5px 6px;
`;Xe.div`
    overflow-x: auto;
    overflow-y: hidden;
    position: relative;
    -webkit-overflow-scrolling: touch;
`;Xe.div`
    display: inline-flex;
    justify-content: space-between;
    overflow: hidden;
    white-space: nowrap;
    width: ${({$width:t})=>`${t}px`};
`;Xe.div`
    background-color: ${({$color:t})=>t};
    box-sizing: border-box;
    height: ${({$gifHeight:t})=>`${Math.round(t*nU)}px`};
    margin: ${({$gutter:t})=>`0 ${t}px`};
    width: 2px;
`;Xe(hd)`
    display: inline-block;
    flex-shrink: 0;
    list-style: none;
    /* make sure gifs are fully visible with a scrollbar */
    margin-bottom: 1px;
    position: relative;

    .${hd.imgClassName} {
        position: absolute;
        top: 0;
        left: 0;
    }
`;var rU=Dd`
     to {
    transform: scale(1.75) translateY(-20px);
  }
`,Z3=52,sU=Xe.div`
    display: flex;
    align-items: center;
    height: ${Z3}px;
    margin: 0 auto;
    text-align: center;
    justify-content: center;
    animation: pulse 0.8s ease-in-out 0s infinite alternate backwards;
`,Ru=Xe.div`
    display: inline-block;
    height: 10px;
    width: 10px;
    margin: ${Z3}px 10px 10px 10px;
    position: relative;
    box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.3);
    animation: ${rU} cubic-bezier(0.455, 0.03, 0.515, 0.955) 0.75s infinite alternate;
    background: ${t=>t.$color};
    animation-delay: ${t=>t.$delay};
`,iU=({className:t=""})=>fe.createElement(sU,{className:t},fe.createElement(Ru,{$color:g3,$delay:"0"}),fe.createElement(Ru,{$color:Ab,$delay:".1s"}),fe.createElement(Ru,{$color:y3,$delay:".2s"}),fe.createElement(Ru,{$color:v3,$delay:".3s"}),fe.createElement(Ru,{$color:b3,$delay:".4s"})),aU=iU,oU=Xe.div`
    opacity: ${t=>t.$isFirstLoad?0:1};
`;function yS(t,e,n=[]){return Array.apply(null,Array(t)).map((r,a)=>n[a]||e)}function lU(t,e,n,r){const a=yS(t,[]),l=yS(t,0,e);return n.forEach(c=>{const h=l.indexOf(Math.min(...l));a[h]=[...a[h],c],l[h]+=ap(c,r)}),a}var cU=Object.freeze({gutter:6,user:{},initialGifs:[]}),uU=Object.freeze({isFetching:!1,isError:!1,gifs:[],isLoaderVisible:!1,isDoneFetching:!1}),Tc=class $f extends I.PureComponent{constructor(){super(...arguments),this.state=Mb(Di({},uU),{gifs:this.props.initialGifs||[]}),this.unmounted=!1,this.paginator=Bk(this.props.fetchGifs,this.state.gifs),this.onLoaderVisible=e=>{this.unmounted||this.setState({isLoaderVisible:e},this.onFetch)},this.onFetch=Nb($f.fetchDebounce,()=>Pb(this,null,function*(){if(this.unmounted)return;const{isFetching:e,isLoaderVisible:n}=this.state,{externalGifs:r}=this.props,a=(r||this.state.gifs).length;if(!e&&n){this.setState({isFetching:!0,isError:!1});let l;try{if(l=yield this.paginator(r),this.unmounted)return}catch(c){if(this.unmounted)return;this.setState({isFetching:!1,isError:!0});const{onGifsFetchError:h}=this.props;h&&h(c)}if(l)if(!!!l?.skipCountCheck&&a===l.length)this.setState({isDoneFetching:!0});else{this.setState({gifs:l,isFetching:!1});const{onGifsFetched:h}=this.props;h&&h(l),this.onFetch()}}}))}componentDidMount(){this.unmounted=!1,this.onFetch()}componentWillUnmount(){this.unmounted=!0}render(){const{onGifVisible:e,onGifRightClick:n,className:r=$f.className,onGifSeen:a,onGifClick:l,onGifKeyPress:c,user:h,overlay:m,hideAttribution:g,noLink:v,borderRadius:b,noResultsMessage:_,columns:C,width:N,gutter:j,percentWidth:k,columnOffsets:B,backgroundColor:$,loaderConfig:R,tabIndex:V=0,layoutType:z="GRID",loader:F=aU,eagerIds:S}=this.props,{gifs:E,isError:A,isDoneFetching:M}=this.state,O=!M,U=E.length===0,P=j*(C-1),xe=(N-P)/C,Ee=lU(C,B,E,xe);return fe.createElement(X3,{attributes:{layout_type:z}},fe.createElement("div",{className:r},fe.createElement("div",{style:{width:k||N,display:"flex",gap:j}},Ee.map((G=[],ne)=>fe.createElement("div",{key:ne,style:{display:"flex",flexDirection:"column",gap:j,width:k?"100%":xe,marginTop:B?.[ne]}},G.map(X=>fe.createElement(hd,{style:{aspectRatio:X.images.original.width/X.images.original.height},gif:X,tabIndex:V,key:X.id,width:xe,percentWidth:k?"100%":void 0,onGifClick:l,onGifKeyPress:c,onGifSeen:a,onGifVisible:e,onGifRightClick:n,user:h,overlay:m,backgroundColor:$,hideAttribution:g,noLink:v,borderRadius:b,lazyLoad:!S?.includes(X.id)}))))),!O&&E.length===0&&_,A?fe.createElement(tU,{onClick:this.onFetch}):O&&fe.createElement(K3,{onVisibleChange:this.onLoaderVisible,config:R},fe.createElement(oU,{$isFirstLoad:U},fe.createElement(F,{className:$f.loaderClassName})))))}};Tc.className="giphy-grid";Tc.loaderClassName="loader";Tc.fetchDebounce=250;Tc.defaultProps=cU;Tc.getDerivedStateFromProps=({externalGifs:t},e)=>t&&t!==e.gifs?{gifs:t}:null;var dU=Tc,eA=dU,En={searchbarHeight:"--searchbar-height",bgColor:"--searchbar-bg-color",bgColor2:"--searchbar-bg-color-2",fgColor:"--searchbar-fg-color",cancelButtonDisplay:"--searchbar-cancel-button-display"};Xe.div`
    ${En.searchbarHeight}: ${t=>t.$searchbarHeight||42}px;
    @media (${t=>t.$mobileMediaQuery}) {
        ${En.searchbarHeight}: ${t=>t.$mobileSearchbarHeight||35}px;
    }
    ${En.bgColor}: ${Hf};
    ${En.bgColor2}: ${Hf};
    ${En.fgColor}: ${Wy};
    ${t=>t.$darkMode&&fp`
            ${En.fgColor}: ${Hf};
            ${En.bgColor}: ${Wy};
            ${En.bgColor2}: ${BL};
        `}
    ${En.cancelButtonDisplay}: ${t=>t.$hideCancelButton?"none":"block"};
`;I.createContext({});I.createContext({});Xe.svg`
    position: relative;
    right: 10px;
    margin-left: 5px;
    cursor: pointer;
    display: var(${En.cancelButtonDisplay});
`;var tA=6,Lb=`calc(var(${En.searchbarHeight}) - ${tA*2}px)`,hU=Dd`
to {
    width: ${Lb};
}
`;Xe(pp)`
    height: ${Lb};
    margin: 0;
    width: 0;
    animation: ${hU} 100ms ease-in-out forwards;
`;Xe.div`
    background: var(${En.bgColor2});
    display: flex;
    align-items: center;
    padding-left: ${tA}px;
`;Xe.div`
    background: ${FL};
    display: flex;
    padding: 0 4px;
    color: ${zL};
    font-family: interface, Helvetica Neue, helvetica, sans-serif;
    font-weight: 600;
    font-size: 12px;
    align-items: center;
    height: ${Lb};
    @media (max-width: 480px) {
        display: none;
    }
`;var fU=({className:t=""})=>fe.createElement("svg",{viewBox:"0 0 30 30",version:"1.1",className:t},fe.createElement("defs",null,fe.createElement("path",{d:"M11.5482521,20.4090671 L4.24727698,28.2009189 C3.68084207,28.8054377 2.73159653,28.8363108 2.12707771,28.2698759 C1.5225589,27.703441 1.4916858,26.7541954 2.0581207,26.1496766 L9.40599838,18.3077689 C7.95982241,16.4371424 7.0978836,14.0789715 7.0978836,11.5181818 C7.0978836,5.44914339 11.9392549,0.518181818 17.9252787,0.518181818 C23.9113026,0.518181818 28.7526738,5.44914339 28.7526738,11.5181818 C28.7526738,17.5872202 23.9113026,22.5181818 17.9252787,22.5181818 C15.539851,22.5181818 13.3361963,21.7351359 11.5482521,20.4090671 Z M17.9252787,19.5181818 C22.242011,19.5181818 25.7526738,15.9425536 25.7526738,11.5181818 C25.7526738,7.09381 22.242011,3.51818182 17.9252787,3.51818182 C13.6085464,3.51818182 10.0978836,7.09381 10.0978836,11.5181818 C10.0978836,15.9425536 13.6085464,19.5181818 17.9252787,19.5181818 Z",id:"giphy-search-icon-path-1"})),fe.createElement("g",{id:"search",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},fe.createElement("g",{id:"icons/search"},fe.createElement("mask",{id:"giphy-search-icon-mask-2",fill:"white"},fe.createElement("use",{xlinkHref:"#giphy-search-icon-path-1"})),fe.createElement("use",{id:"Mask",fill:"#FFFFFF",fillRule:"nonzero",xlinkHref:"#giphy-search-icon-path-1"}),fe.createElement("g",{mask:"url(#giphy-search-icon-mask-2)"},fe.createElement("g",{transform:"translate(0.250000, 0.250000)"},fe.createElement("g",null)))))),mU=fU,pU="2s",K0="#E646B6",vS="#FF6666",nA="cubic-bezier(0.920, 0.240, 0.185, 0.730)",gU=Dd`
    0% {
      transform: rotate(34deg) translate(-10px, 80px);
    };
    
    100% {
      transform: rotate(34deg) translate(-10px, -20px);
    }
`,yU=Dd`
    0% { 
      transform: translate(0px, 0px);
      opacity: 0;
    }
    50% {
      opacity: 1;
    }
    100% {
      transform: translate(10px, -17px);
      opacity: 0;
    }
`,vU=Dd`
    0% {
      opacity: 0;
      transform: translateX(-400%);
    }
    50% {
      opacity: 1;
    }
    100% {
      opacity: 0;
      transform: translateX(0);
    }
`;Xe.div`
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    cursor: pointer;
    @media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {
        display: none;
    }
    height: var(${En.searchbarHeight});
    width: var(${En.searchbarHeight});
`;Xe.div`
    position: absolute;
    height: 100%;
    width: 100%;
    background: linear-gradient(45deg, ${K0} 0%, ${vS} 100%);
    border-radius: 0 4px 4px 0;
    overflow: hidden;
    &:before {
        animation: ${vU} ${pU} linear 0s infinite;
        background-image: linear-gradient(45deg, ${K0} 0%, ${vS} 50%, ${K0} 100%);
        background-size: 400%;
        background-position: 0% 100%;
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        width: 400%;
    }
`;Xe.div`
    width: 100%;
    height: 100%;
    position: absolute;
    overflow: hidden;
    &::after {
        content: '+';
        color: white;
        font-family: 'SS Standard';
        font-size: 8px;
        position: absolute;
        top: 65%;
        left: 66%;
        animation: ${yU} 1s ${nA} 0s 1 forwards;
    }
`;Xe.div`
    position: absolute;
    width: 200%;
    height: 20px;
    background: rgba(255, 255, 255, 0.5);
    transform: rotate(34deg) translate(-10px, -20px);
    animation: ${gU} 1s ${nA} 0s 1;
    filter: blur(1px);
`;Xe(mU)`
    z-index: 1;
    display: flex;
    width: 50%;
    height: 50%;
`;Xe.div`
    display: flex;
    background: white;
    align-items: center;
    border-radius: 4px;
    height: var(${En.searchbarHeight});
    background: var(${En.bgColor2});
`;Xe.input`
    background: inherit;
    box-sizing: border-box;
    border: 0;
    appearance: none;
    font-weight: normal;
    font-family: interface, Helvetica Neue, helvetica, sans-serif;
    outline: 0;
    font-size: 15px;
    padding: 0 10px;
    border-radius: 0;
    text-overflow: ellipsis;
    color: var(${En.fgColor});
    &::placeholder {
        color: ${p3};
    }
    min-width: 150px;
    flex: 1;
    ${t=>t.$isUsernameSearch&&fp`
            color: ${HL};
        `}
`;var bU=({size:t=18,className:e})=>fe.createElement("svg",{width:t,height:t,viewBox:"0 0 18 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:e},fe.createElement("g",{id:"trending",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},fe.createElement("g",null,fe.createElement("rect",{id:"Rectangle",stroke:"#979797",fill:"#D8D8D8",opacity:"0",x:"0.5",y:"0.5",width:"17",height:"17"}),fe.createElement("path",{d:"M12.6093329,3.12057664 L15.156896,3.12057664 L9.64199318,9.04253019 L6.88133868,6.8175119 C6.7544587,6.67603813 6.56616874,6.60087259 6.38404017,6.61897279 C6.2490402,6.63288422 6.11891631,6.69661171 6.02063992,6.79697337 C2.21226835,10.5943119 0.308082561,12.4929812 0.308082561,12.4929812 C0.308082561,12.4929812 0.527106106,12.8074292 0.710953088,13.0215425 C0.833517743,13.1642848 0.975497751,13.3098497 1.13689311,13.4582373 L6.47329888,8.13191205 L9.16381134,10.2953038 C9.40800276,10.5710787 9.68933701,10.7021044 10.019278,10.4570223 L16.0239805,4.04474473 C16.0239805,5.87956383 16.0239805,6.79697337 16.0239805,6.79697337 C16.0239805,6.79697337 16.4320205,6.79697337 17.2481004,6.79697337 L17.2481004,1.80604505 C14.1555887,1.80604505 12.6093329,1.80604505 12.6093329,1.80604505 C12.6093329,1.80604505 12.6093329,2.24422225 12.6093329,3.12057664 Z",id:"Shape",stroke:"#00CCFF",strokeWidth:"0.4",fill:"#00CCFF",fillRule:"nonzero",transform:"translate(8.778091, 7.632141) rotate(-2.000000) translate(-8.778091, -7.632141) "})))),xU=bU,rA=9;Xe.div`
    background: ${m3};
    display: flex;
    padding-right: 4px;
    align-items: center;
    margin-right: ${rA}px;
    cursor: pointer;
`;Xe.div`
    background: ${m3};
    display: flex;
    padding: 14px;
    align-items: center;
    margin-right: ${rA}px;
    white-space: nowrap;
    cursor: pointer;
    font-style: italic;
    border-radius: 20px;
`;Xe(pp)`
    height: var(${En.searchbarHeight});
    width: var(${En.searchbarHeight});
`;Xe(xU)`
    margin-right: 2px;
`;Xe.div`
    display: flex;
    color: white;
    flex-direction: row;
    font-family: 'interface';
    font-weight: 600;
    font-size: 14px;
    -webkit-overflow-scrolling: touch;
    overflow-x: auto;
    overflow-y: hidden;
    padding-bottom: 10px;
    height: var(${En.searchbarHeight});
`;var _U=({onClick:t})=>fe.createElement("svg",{width:"66px",height:"13px",viewBox:"0 0 66 13",onClick:t},fe.createElement("g",{stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},fe.createElement("g",{transform:"translate(-1060.000000, -462.000000)",fill:"#FFFFFF",fillRule:"nonzero"},fe.createElement("g",{transform:"translate(931.000000, 286.375671)"},fe.createElement("g",{transform:"translate(86.000000, 136.124329)"},fe.createElement("path",{d:"M47.968,49.1962322 C49.588,49.1962322 51.052,48.6202322 51.58,47.5522322 L51.58,43.8202322 L47.476,43.8202322 L47.476,45.6802322 L49.6,45.6802322 L49.6,46.7602322 C49.12,47.1082322 48.424,47.1922322 47.98,47.1922322 C46.288,47.1922322 45.724,45.8602322 45.724,44.7802322 C45.724,43.1362322 46.612,42.3202322 47.98,42.3202322 C48.544,42.3202322 49.288,42.4762322 49.9,43.0522322 L51.28,41.6842322 C50.176,40.5682322 49.144,40.3282322 47.98,40.3282322 C44.824,40.3282322 43.384,42.5842322 43.384,44.7802322 C43.384,46.9762322 44.644,49.1962322 47.968,49.1962322 Z M54.928,48.9682322 L54.928,40.5682322 L52.564,40.5682322 L52.564,48.9682322 L54.928,48.9682322 Z M58.648,48.9682322 L58.648,46.7002322 L60.352,46.7002322 C62.596,46.6762322 63.724,45.3442322 63.724,43.6282322 C63.724,41.9842322 62.608,40.5682322 60.352,40.5682322 L56.272,40.5682322 L56.272,48.9682322 L58.648,48.9682322 Z M60.352,44.6962322 L58.648,44.6962322 L58.648,42.6082322 L60.352,42.6082322 C61,42.6082322 61.348,43.1122322 61.348,43.6642322 C61.348,44.2162322 61.012,44.6962322 60.352,44.6962322 Z M66.796,48.9802322 L66.796,45.8002322 L69.82,45.8002322 L69.82,48.9802322 L72.172,48.9802322 L72.172,40.5802322 L69.82,40.5802322 L69.82,43.7722322 L66.796,43.7722322 L66.796,40.5802322 L64.42,40.5802322 L64.42,48.9802322 L66.796,48.9802322 Z M78.16,48.9682322 L78.16,45.6202322 L81.496,40.6762322 L81.496,40.5682322 L78.82,40.5682322 L77.008,43.4482322 L75.268,40.5682322 L72.592,40.5682322 L72.592,40.6642322 L75.784,45.6202322 L75.784,48.9682322 L78.16,48.9682322 Z M87.796,49.1362322 C88.972,49.1362322 90.088,48.7402322 90.952,47.8882322 L90.028,46.9642322 C89.44,47.5522322 88.576,47.8762322 87.796,47.8762322 C85.624,47.8762322 84.712,46.3522322 84.7,44.8162322 C84.688,43.2682322 85.66,41.6962322 87.796,41.6962322 C88.576,41.6962322 89.368,41.9722322 89.968,42.5602322 L90.868,41.6962322 C90.016,40.8442322 88.924,40.4242322 87.796,40.4242322 C84.796,40.4242322 83.356,42.6202322 83.3679256,44.8282322 C83.38,47.0362322 84.748,49.1362322 87.796,49.1362322 Z M93.028,48.9682322 L93.028,40.5802322 L91.792,40.5802322 L91.792,48.9682322 L93.028,48.9682322 Z M94.252,41.3122322 C94.252,42.3322322 95.788,42.3322322 95.788,41.3122322 C95.788,40.3042322 94.252,40.3042322 94.252,41.3122322 Z M95.632,48.9682322 L95.632,43.0282322 L94.396,43.0282322 L94.396,48.9682322 L95.632,48.9682322 Z M98.188,51.7162322 L98.188,48.1042322 C98.632,48.8362322 99.556,49.1002322 100.276,49.1002322 C102.112,49.1002322 103.264,47.8042322 103.264,46.0162322 C103.264,44.2282322 102.04,42.9442322 100.276,42.9322322 C99.484,42.9322322 98.644,43.2922322 98.188,44.0122322 L98.116,43.0522322 L96.952,43.0522322 L96.952,51.7162322 L98.188,51.7162322 Z M100.156,47.9002322 C99.076,47.9002322 98.296,47.0722322 98.296,46.0162322 C98.296,44.9602322 99.016,44.1322322 100.156,44.1322322 C101.284,44.1322322 102.028,44.9002322 102.028,46.0162322 C102.028,47.1202322 101.236,47.9002322 100.156,47.9002322 Z M106.456,49.1482322 C107.992,49.1482322 108.964,48.3802322 108.976,47.2762322 C108.988,45.7522322 107.56,45.5122322 106.468,45.4162322 C105.712,45.3442322 105.196,45.1522322 105.184,44.6602322 C105.184,44.1922322 105.688,43.9402322 106.444,43.9522322 C107.032,43.9522322 107.536,44.0722322 108.004,44.5042322 L108.7,43.6882322 C108.04,43.1002322 107.332,42.8962322 106.42,42.8962322 C105.316,42.8962322 103.96,43.3882322 103.96,44.6962322 C103.972,46.0042322 105.256,46.3642322 106.372,46.4722322 C107.248,46.5562322 107.752,46.7602322 107.74,47.2882322 C107.728,47.8402322 107.068,48.0562322 106.48,48.0562322 C105.784,48.0442322 104.956,47.7922322 104.404,47.1802322 L103.756,48.0562322 C104.536,48.9322322 105.496,49.1482322 106.456,49.1482322 Z",id:"GIPHYClips"})))))),wU=_U,EU=Xe.div`
    display: flex;
    align-items: center;
    font-family: interface, helvetica, arial;
    cursor: pointer;
`,SU=Xe(pp)`
    flex-shrink: 0;
`,TU=Xe.div`
    display: flex;
    flex-direction: column;
`,Vb=({gif:t,className:e,onClick:n})=>{const{user:r}=t;return!r?.username&&!r?.display_name?null:fe.createElement(EU,{className:[Vb.className,e].join(" "),onClick:a=>{if(a.preventDefault(),a.stopPropagation(),n)n(t);else{const l=r.profile_url;l&&window.open(l,"_blank")}}},fe.createElement(SU,{user:r}),fe.createElement(TU,null,fe.createElement(wU,{onClick:a=>{a.preventDefault(),a.stopPropagation(),n?n(t):t.url&&window.open(t.url,"_blank")}}),fe.createElement(Y3,{user:r})))};Vb.className="giphy-attribution";var CU=Vb,sA=25,kU=({size:t=sA,onClick:e=()=>{}})=>fe.createElement("svg",{width:t,height:t,viewBox:"0 0 26 23",onClick:e},fe.createElement("g",{stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},fe.createElement("g",{transform:"translate(1.000000, 0.000000)",fill:"#FFF",fillRule:"nonzero"},fe.createElement("path",{d:"M11.9625091,0.572584405 L11.9625091,22.2272644 C11.9625091,22.4856644 11.8466091,22.6635044 11.6151891,22.7611644 C11.3480491,22.8413444 11.1390491,22.7968844 10.9878091,22.6277844 L4.8732291,15.9143244 L0.573909096,15.9143244 C0.413549096,15.9143244 0.277509096,15.8588444 0.166549096,15.7475044 C0.0573082348,15.6406091 -0.00292164572,15.4933347 -1.77635684e-15,15.3405244 L-1.77635684e-15,7.45058441 C-1.77635684e-15,7.29022441 0.0555890961,7.15456441 0.167309096,7.04322441 C0.278269096,6.93226441 0.414309096,6.87640441 0.573909096,6.87640441 L4.8732291,6.87640441 L10.9874291,0.172064405 C11.1390491,0.00296440549 11.3484291,-0.0414955945 11.6151891,0.0386844055 C11.8466091,0.136344405 11.9621291,0.314564405 11.9621291,0.572584405 L11.9625091,0.572584405 Z"}),fe.createElement("path",{d:"M15.7579491,16.0914044 L14.6798891,13.6594044 C15.5739159,13.2635547 16.1503537,12.3776671 16.1501091,11.3999244 C16.150386,10.4242626 15.5763999,9.53983269 14.6852091,9.14272441 L15.7697291,6.71376441 C17.6193585,7.53872062 18.810518,9.37466359 18.8101092,11.3999244 C18.8105521,13.4298903 17.6139475,15.2691931 15.7579491,16.0914044 L15.7579491,16.0914044 Z"}),fe.createElement("path",{d:"M18.3647491,20.2619044 L17.2863091,17.8299044 C19.8302925,16.7031661 21.4705725,14.1822599 21.4701091,11.3999244 C21.4701091,8.59818441 19.8167291,6.09892441 17.3022691,4.97678441 L18.3864091,2.54782441 C21.8804724,4.10607079 24.1307363,7.57414217 24.1301093,11.3999244 C24.1308375,15.2343934 21.8705556,18.7086904 18.3647491,20.2619044 Z"})))),AU=({size:t=sA,onClick:e=()=>{}})=>fe.createElement("svg",{onClick:e,height:t,width:t,viewBox:"0 0 26 23",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},fe.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},fe.createElement("g",{id:"Group",transform:"translate(1.000000, 0.000000)",fill:"#FFFFFF",fillRule:"nonzero"},fe.createElement("path",{d:"M11.9625091,0.572584405 L11.9625091,22.2272644 C11.9625091,22.4856644 11.8466091,22.6635044 11.6151891,22.7611644 C11.3480491,22.8413444 11.1390491,22.7968844 10.9878091,22.6277844 L4.8732291,15.9143244 L0.573909096,15.9143244 C0.413549096,15.9143244 0.277509096,15.8588444 0.166549096,15.7475044 C0.0573082348,15.6406091 -0.00292164572,15.4933347 0,15.3405244 L0,7.45058441 C0,7.29022441 0.0555890961,7.15456441 0.167309096,7.04322441 C0.278269096,6.93226441 0.414309096,6.87640441 0.573909096,6.87640441 L4.8732291,6.87640441 L10.9874291,0.172064405 C11.1390491,0.00296440549 11.3484291,-0.0414955945 11.6151891,0.0386844055 C11.8466091,0.136344405 11.9621291,0.314564405 11.9621291,0.572584405 L11.9625091,0.572584405 Z",id:"Path"})),fe.createElement("g",{id:"Group",transform:"translate(14.887009, 6.947630)",fill:"#FFFFFF",fillRule:"nonzero"},fe.createElement("path",{d:"M7.88199149,6.27905236 C7.94693088,6.35707599 7.94693088,6.47033309 7.88199149,6.54835671 L6.54835671,7.88199149 C6.47033309,7.94693088 6.35707599,7.94693088 6.27905236,7.88199149 L3.96534802,5.56828715 L1.65164367,7.88199149 C1.57362004,7.94693088 1.46036294,7.94693088 1.38233932,7.88199149 L0.0487045381,6.54835671 C-0.016234846,6.47033309 -0.016234846,6.35707599 0.0487045381,6.27905236 L2.36240889,3.96534802 L0.0487045381,1.65164367 C-0.016234846,1.57362004 -0.016234846,1.46036294 0.0487045381,1.38233932 L1.38233932,0.0487045381 C1.46036294,-0.016234846 1.57362004,-0.016234846 1.65164367,0.0487045381 L3.96534802,2.36240889 L6.27905236,0.0487045381 C6.35707599,-0.016234846 6.47033309,-0.016234846 6.54835671,0.0487045381 L7.88199149,1.38233932 C7.94693088,1.46036294 7.94693088,1.57362004 7.88199149,1.65164367 L5.56828715,3.96534802 L7.88199149,6.27905236 Z",id:"Shape"})))),NU=Xe.div`
    background: ${Hf};
    height: ${t=>t.$barHeight}px;
    position: absolute;
    width: 5px;
    bottom: 0;
    left: 0;
    opacity: 0.95;
`,RU=({videoEl:t})=>{fV(2147483647,100);const e=t?.currentTime||0,n=t?.duration||0,r=e/n;let a=Math.round(r*100),l=5;return t?.height<200?l=3:t?.height<300&&(l=4),a=n<10&&a>98?100:a,fe.createElement(NU,{style:{width:`${a}%`},$barHeight:l,className:"hide-in-percy"})},jU=RU,IU=(t,e="")=>{switch(t){case 1:return"Aborted. The fetching process for the media resource was aborted by the user agent at the user's request.";case 2:return"Network Error. A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.";case 3:return"Decode Error. An error of some description occurred while decoding the media resource, after the resource was established to be usable.";case 4:return`Can not play a video of type "${e.split(".").pop()}" on this platform.`;default:return""}},DU=(t,e,n,r,a)=>{const l=a+t;return!r.has(l)&&n>0&&e>n*t?(r.add(l),!0):!1},MU=[.25,.5,.75],iA="giphy-video",PU={IDLE:1},aA=({muted:t,ccEnabled:e=!1,ccLanguage:n="en",loop:r=!0,onStateChange:a,onTimeUpdate:l,onCanPlay:c,onFirstPlay:h,onWaiting:m,onMuted:g,onError:v,onEnded:b,onLoop:_,onQuartile:C,onEndFullscreen:N,setVideoEl:j,gif:k,width:B,percentWidth:$,height:R,volume:V=.7,className:z=iA,isInPlayer:F})=>{var S,E,A;const M=R||ap(k,B);let O;$&&(O=`${Math.round(M/B*100)}%`);const[U,P]=I.useState(ME(k.video,B,M)),xe=I.useRef(0);U||console.warn(`GiphyJS No video content for id: ${k.id}`);const Ee=I.useRef(Date.now()),G=I.useRef(!1),ne=I.useRef(0),X=I.useRef(0),Ae=I.useRef(new Set);I.useEffect(()=>{Ee.current=Date.now(),G.current=!1,ne.current=1,X.current=0,Ae.current=new Set},[k.id]);const De=I.useRef(null);I.useEffect(()=>{const he=ME(k.video,B,M);De.current&&U?.url&&he.url!==U.url&&(U.url.indexOf(String(k.id))!==-1&&(xe.current=De.current.currentTime),P(he))},[B,R,k.video,M,U?.url,k.id]),I.useEffect(()=>{De.current&&U?.url&&xe.current&&(De.current.currentTime=xe.current,xe.current=0)},[U?.url,xe]);const H=I.useCallback(()=>{var he;const $e=De.current,oe=(he=$e?.error)==null?void 0:he.code;if(oe&&$e?.src){const pe=IU(oe,$e?.src);console.error(pe),v?.(oe)}},[v]),ee=I.useCallback(()=>{a?.("playing"),G.current||(G.current=!0,k.analytics_response_payload&&Ib({actionType:"START",analyticsResponsePayload:k.analytics_response_payload}),h?.(Date.now()-Ee.current))},[h,a,k]),ae=I.useCallback(()=>a?.("paused"),[a]),de=I.useCallback(()=>{const he=De.current;if(he){const $e=he.currentTime;MU.some(oe=>DU(oe,$e,he.duration,Ae.current,ne.current)?(C?.(oe),!0):!1),l?.($e||0)}},[C,l]),je=I.useCallback(()=>c?.(),[c]),_e=I.useCallback(()=>{const he=De.current;he?.currentTime!==0&&he?.networkState!==PU.IDLE&&m?.(++X.current)},[m]),Ce=I.useCallback(()=>{r&&De.current&&De.current.play(),_?.(ne.current),ne.current=ne.current+1,G.current&&b?.()},[b,r,_]),He=I.useCallback(()=>N?.(),[N]),Ge=I.useCallback(he=>Pb(void 0,null,function*(){if(he){const $e=he.play();if($e!==void 0)try{yield $e,g?.(!1)}catch{he.muted=!0,g?.(!0),he.play()}}}),[g]);I.useEffect(()=>{const he=De.current;he&&(Ge(he),j?.(he),isNaN(V)||(he.volume=V))},[]),I.useEffect(()=>{const he=De.current;return he&&(he.addEventListener("play",ee),he.addEventListener("pause",ae),he.addEventListener("error",H),he.addEventListener("timeupdate",de),he.addEventListener("canplay",je),he.addEventListener("ended",Ce),he.addEventListener("waiting",_e),he.addEventListener("webkitendfullscreen",He)),()=>{he&&(he.removeEventListener("play",ee),he.removeEventListener("pause",ae),he.removeEventListener("error",H),he.removeEventListener("timeupdate",de),he.removeEventListener("canplay",je),he.removeEventListener("ended",Ce),he.removeEventListener("waiting",_e),he.removeEventListener("webkitendfullscreen",He))}},[ee,ae,H,de,je,Ce,_e,He]);const ve=(A=(E=(S=k.video)==null?void 0:S.captions)==null?void 0:E[n])==null?void 0:A.vtt;return U?.url?fe.createElement("video",{crossOrigin:"anonymous",draggable:!0,className:z,width:F?"100%":$||B,height:F?"100%":O||M,muted:t,autoPlay:!0,playsInline:!0,ref:De,src:U?.url,"data-giphy-id":k.id},e&&ve&&fe.createElement("track",{label:"English",kind:"subtitles",srcLang:n,src:ve,default:!0})):null};aA.className=iA;var oA=aA,OU=Xe.div`
    position: relative;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: black;
    font-family: interface, helvetica, arial;
    -webkit-font-smoothing: antialiased;
`,LU=Xe.div`
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    cursor: pointer;
`,VU=Xe.div`
    position: absolute;
    top: 10px;
    right: 10px;
    left: 10px;
    bottom: 0;
    display: flex;
    justify-content: space-between;
    opacity: ${t=>t.$isHovered?1:0};
    transition: opacity ease-out 250ms;
    align-items: flex-start;
`,UU=Xe.div`
    font-size: 22px;
    color: white;
    margin-bottom: 5px;
    font-weight: bold;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    user-select: none;
    cursor: pointer;
`,zU=Xe.div`
    position: relative;
    min-width: 0;
`,BU=Xe.div`
    &:before {
        background: linear-gradient(rgba(18, 18, 18, 0.6), rgba(0, 0, 0, 0));
        content: '';
        height: ${t=>t.$isLargePlayer?125:75}px;
        left: 0;
        pointer-events: none;
        position: absolute;
        top: 0;
        width: 100%;
    }
    &:after {
        background: linear-gradient(rgba(0, 0, 0, 0), rgba(18, 18, 18, 0.6));
        content: '';
        height: ${t=>t.$isLargePlayer?125:75}px;
        left: 0;
        pointer-events: none;
        position: absolute;
        bottom: 0;
        width: 100%;
    }
`,FU=300,HU=4e3,$U=t=>{const{style:e,width:n,percentWidth:r,hideMute:a,hideAttribution:l,hideProgressBar:c,hideTitle:h,className:m,persistentControls:g,gif:v,overlay:b}=t,[_,C]=I.useState(!1),[N,j]=I.useState(null),[k,B]=I.useState(t.muted),[$,R]=I.useState(!1),{setVideoEl:V,onMuted:z,onUserMuted:F}=t,S=t.height||ap(v,n);let E;r&&(E=`${Math.round(S/n*100)}%`);const[,A,M]=lV(()=>{C(!1)},HU),O=I.useCallback(G=>{z?.(G),R(G)},[R,z]),U=I.useCallback(G=>{V?.(G),j(G)},[V,j]),P=()=>{$?(R(!1),B(!1)):B(!k)};I.useEffect(()=>{B(t.muted)},[t.muted]);const xe=g||_,Ee=S>=FU;return I.useEffect(()=>(xe?M():A(),()=>A()),[xe,A,M]),fe.createElement(OU,{className:m,style:Di({width:r||n,height:E||S},e),onMouseOver:()=>C(!0),onMouseLeave:()=>C(!1),onMouseMove:()=>{C(!0),M()},onClick:G=>{F?.(!(k||$)),N?.play(),G.preventDefault(),P()}},fe.createElement(oA,Mb(Di({},t),{isInPlayer:!0,onMuted:O,setVideoEl:U,muted:k})),xe&&fe.createElement(BU,{$isLargePlayer:Ee}),fe.createElement(VU,{$isHovered:xe},fe.createElement(zU,null,!h&&Ee&&fe.createElement(UU,{onClick:G=>{G.preventDefault(),G.stopPropagation(),window.open(v.url,"_blank")}},v.title),N&&!l?fe.createElement(CU,{gif:v}):null),!a&&fe.createElement(LU,null,k||$?fe.createElement(AU,null):fe.createElement(kU,null))),xe&&!c&&N?fe.createElement(jU,{videoEl:N}):null,b&&fe.createElement(b,{gif:v,isHovered:_,width:n,height:S}))},qU=t=>(t.overlay&&!t.controls&&console.warn(`${$n.PREFIX}: Overlays only work when controls are enabled`),t.controls?fe.createElement($U,Di({},t)):fe.createElement(oA,Di({},t))),GU=qU;Xe.div`
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    height: 100%;
    width: 100%;
`;Xe(GU)`
    height: 100%;
    display: inline-block;
    object-fit: fill;
    pointer-events: none;
    background: rgb(0, 0, 0, 0);
`;Xe.div`
    position: absolute;
    top: 6px;
    right: 6px;
    cursor: pointer;
    opacity: ${t=>t.$isHovered?1:.8};
    transition: opacity ease-out 800ms;
`;Fy("X-GIPHY-SDK-NAME","ReactSDK");const YU="9S3bPWJJTZZdynuLXHFSBstNA5B6tes9",bS=new zk(YU),KU=({onSelect:t})=>{const[e,n]=I.useState(""),[r,a]=I.useState(400),l=I.useRef(null);I.useEffect(()=>{l.current&&a(l.current.offsetWidth)},[]);const c=h=>e?bS.search(e,{offset:h,limit:10}):bS.trending({offset:h,limit:10});return d.jsxs("div",{className:"w-full h-full flex flex-col bg-dark-sidebar rounded-lg overflow-hidden border border-dark-hover",children:[d.jsx("div",{className:"p-3 border-b border-dark-hover",children:d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"text",placeholder:"Search GIFs...",value:e,onChange:h=>n(h.target.value),className:"w-full bg-dark-input text-dark-text px-4 py-2 pl-10 rounded outline-none border border-transparent focus:border-brand-primary transition-all",autoFocus:!0}),d.jsx(cb,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-dark-muted",size:20})]})}),d.jsx("div",{ref:l,className:"flex-1 overflow-y-auto overflow-x-hidden p-2 custom-scrollbar",children:r>0&&d.jsx(eA,{width:r-20,columns:3,fetchGifs:c,onGifClick:(h,m)=>{m.preventDefault(),t(h.images.original.url)},noLink:!0,hideAttribution:!0,gutter:6},e)})]})},QU="9S3bPWJJTZZdynuLXHFSBstNA5B6tes9",xS=new zk(QU),XU=({onSelect:t})=>{const[e,n]=I.useState(""),[r,a]=I.useState(400),l=I.useRef(null);I.useEffect(()=>{l.current&&a(l.current.offsetWidth)},[]);const c=h=>e?xS.search(e,{offset:h,limit:10,type:"stickers"}):xS.trending({offset:h,limit:10,type:"stickers"});return d.jsxs("div",{className:"w-full h-full flex flex-col bg-dark-sidebar rounded-lg overflow-hidden border border-dark-hover",children:[d.jsx("div",{className:"p-3 border-b border-dark-hover bg-brand-primary/10",children:d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"text",placeholder:"Search Premium Stickers...",value:e,onChange:h=>n(h.target.value),className:"w-full bg-dark-input text-dark-text px-4 py-2 pl-10 rounded outline-none border border-transparent focus:border-brand-primary transition-all placeholder:text-dark-muted",autoFocus:!0}),d.jsx(cb,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-dark-muted",size:20})]})}),d.jsx("div",{className:"px-3 py-1 bg-brand-primary/5 text-[10px] text-brand-primary text-center font-bold tracking-wider uppercase",children:"Premium Stickers"}),d.jsx("div",{ref:l,className:"flex-1 overflow-y-auto overflow-x-hidden p-2 custom-scrollbar",children:r>0&&d.jsx(eA,{width:r-20,columns:3,fetchGifs:c,onGifClick:(h,m)=>{m.preventDefault(),t(h.images.original.url)},noLink:!0,hideAttribution:!0,gutter:6},e)})]})},WU=({onSubmit:t,onClose:e})=>{const[n,r]=I.useState(""),[a,l]=I.useState(["",""]),[c,h]=I.useState(!1),[m,g]=I.useState(!1),v=()=>{a.length<10&&l([...a,""])},b=j=>{a.length>2&&l(a.filter((k,B)=>B!==j))},_=(j,k)=>{const B=[...a];B[j]=k,l(B)},C=()=>{const j=a.filter(k=>k.trim()!=="");n.trim()&&j.length>=2&&(t({question:n.trim(),options:j,multipleChoice:c,anonymous:m}),e())},N=n.trim()&&a.filter(j=>j.trim()).length>=2;return d.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-dark-sidebar rounded-lg w-full max-w-md mx-4 shadow-2xl animate-fadeIn",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-hover",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(db,{className:"text-brand-primary",size:24}),d.jsx("h2",{className:"text-lg font-semibold text-dark-text",children:"Create Poll"})]}),d.jsx("button",{onClick:e,className:"p-1 hover:bg-dark-hover rounded transition-colors",children:d.jsx(On,{className:"text-dark-muted",size:20})})]}),d.jsxs("div",{className:"p-4 space-y-4 max-h-[60vh] overflow-y-auto custom-scrollbar",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-dark-muted mb-2",children:"Question"}),d.jsx("input",{type:"text",value:n,onChange:j=>r(j.target.value),placeholder:"Ask a question...",maxLength:300,className:`w-full bg-dark-input text-dark-text px-4 py-3 rounded-lg
                         border border-transparent focus:border-brand-primary
                         outline-none transition-colors`,autoFocus:!0}),d.jsxs("div",{className:"text-xs text-dark-muted mt-1 text-right",children:[n.length,"/300"]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-dark-muted mb-2",children:"Options"}),d.jsx("div",{className:"space-y-2",children:a.map((j,k)=>d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("span",{className:"text-dark-muted text-sm w-6",children:[k+1,"."]}),d.jsx("input",{type:"text",value:j,onChange:B=>_(k,B.target.value),placeholder:`Option ${k+1}`,maxLength:100,className:`flex-1 bg-dark-input text-dark-text px-3 py-2 rounded
                               border border-transparent focus:border-brand-primary
                               outline-none transition-colors text-sm`}),a.length>2&&d.jsx("button",{onClick:()=>b(k),className:"p-1 hover:bg-red-500/20 text-red-400 rounded transition-colors",children:d.jsx(On,{size:18})})]},k))}),a.length<10&&d.jsxs("button",{onClick:v,className:"mt-2 flex items-center gap-1 text-sm text-brand-primary hover:text-brand-primary/80 transition-colors",children:[d.jsx(Kl,{size:18}),"Add Option"]})]}),d.jsxs("div",{className:"space-y-3 pt-2 border-t border-dark-hover",children:[d.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[d.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${c?"bg-brand-primary border-brand-primary":"border-dark-muted group-hover:border-dark-text"}`,children:c&&d.jsx(Do,{size:14,className:"text-white"})}),d.jsx("span",{className:"text-dark-text text-sm",children:"Allow multiple selections"}),d.jsx("input",{type:"checkbox",checked:c,onChange:j=>h(j.target.checked),className:"sr-only"})]}),d.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[d.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${m?"bg-brand-primary border-brand-primary":"border-dark-muted group-hover:border-dark-text"}`,children:m&&d.jsx(Do,{size:14,className:"text-white"})}),d.jsx("span",{className:"text-dark-text text-sm",children:"Anonymous voting"}),d.jsx("input",{type:"checkbox",checked:m,onChange:j=>g(j.target.checked),className:"sr-only"})]})]})]}),d.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t border-dark-hover",children:[d.jsx(et,{variant:"secondary",onClick:e,children:"Cancel"}),d.jsx(et,{variant:"primary",onClick:C,disabled:!N,children:"Create Poll"})]})]})})},JU=(t,e)=>{if(e===0)return"0 KB/s";const n=t/e;return n>1024*1024?`${(n/(1024*1024)).toFixed(1)} MB/s`:`${(n/1024).toFixed(0)} KB/s`},ZU=t=>t.type.startsWith("image/")?"image":t.type.startsWith("video/")||t.type.startsWith("audio/")?"video":"auto",Am=(t,e)=>new Promise((n,r)=>{const a="dcqipv1hn",l="lumo_upload",c=ZU(t),h=`https://api.cloudinary.com/v1_1/${a}/${c}/upload`,m=new FormData;m.append("file",t),m.append("upload_preset",l);const g=t.name.replace(/\.[^/.]+$/,"").replace(/[^a-zA-Z0-9_-]/g,"_");m.append("public_id",g);const v=new XMLHttpRequest;v.open("POST",h);const b=Date.now();v.upload.onprogress=_=>{if(_.lengthComputable){const C=_.loaded/_.total*100,N=(Date.now()-b)/1e3,j=JU(_.loaded,N);e&&e(C,j)}},v.onload=()=>{if(v.status===200)try{const _=JSON.parse(v.responseText);n({url:_.secure_url,name:_.original_filename||t.name,type:_.resource_type,format:_.format,bytes:_.bytes})}catch{r(new Error("Invalid response from Cloudinary"))}else try{const _=JSON.parse(v.responseText);r(new Error(_.error?.message||`Upload failed with status ${v.status}`))}catch{r(new Error(`Upload failed with status ${v.status}`))}},v.onerror=()=>r(new Error("Network error during upload")),v.send(m)}),lA=({serverId:t,channelId:e,channel:n,userId:r,userProfile:a,userRole:l,users:c,replyingTo:h,onCancelReply:m})=>{const[g,v]=I.useState(""),[b,_]=I.useState(!1),[C,N]=I.useState(!1),[j,k]=I.useState(""),[B,$]=I.useState(0),[R,V]=I.useState(!1),[z,F]=I.useState(!1),[S,E]=I.useState(!1),[A,M]=I.useState(!1),[O,U]=I.useState(!1),[P,xe]=I.useState({uploading:!1,progress:0,speed:""}),[Ee,G]=I.useState(null),[ne,X]=I.useState(null),[Ae,De]=I.useState(""),[H,ee]=I.useState(!1),[ae,de]=I.useState(!1),[je,_e]=I.useState(0),Ce=I.useRef(null),He=I.useRef([]),Ge=I.useRef(null),ve=I.useRef(!1),he=I.useRef(0),$e=I.useRef(null),oe=I.useRef(null),{warning:pe,error:Ie,info:Q}=fs(),le=["owner","admin","moderator"].includes(l),ke=!n?.locked||le,ie="This channel is locked. Only staff can send messages.",ge=Te=>{const Ve=oe.current?.selectionStart||g.length,Ue=g.slice(0,Ve)+Te+g.slice(Ve);v(Ue),V(!1),oe.current?.focus()},be=async Te=>{if(F(!1),!(!g.trim()&&!ke))try{_(!0);const Ve={text:Te,userId:r,timestamp:ft(),mentions:[],replyTo:null};t?await cn(dt(we,"servers",t,"channels",e,"messages"),Ve):(await cn(dt(we,"dms",e,"messages"),Ve),await tt(Oe(we,"dms",e),{lastMessage:{text:"GIF",userId:r,timestamp:ft()},updatedAt:ft(),hiddenFor:[]}))}catch(Ve){console.error("Error sending GIF:",Ve),Ie("Failed to send GIF")}finally{_(!1)}},Me=async Te=>{if(E(!1),!(l==="admin"||l==="premium")){Ie("Stickers are for Premium members only!");return}try{_(!0);const Ue={type:"sticker",text:Te,userId:r,timestamp:ft(),mentions:[],replyTo:null};t?await cn(dt(we,"servers",t,"channels",e,"messages"),Ue):(await cn(dt(we,"dms",e,"messages"),Ue),await tt(Oe(we,"dms",e),{lastMessage:{text:" Sticker",userId:r,timestamp:ft()},updatedAt:ft(),hiddenFor:[]}))}catch(Ue){console.error("Error sending Sticker:",Ue),Ie("Failed to send Sticker")}finally{_(!1)}},nt=async Te=>{if(ke)try{_(!0);const Ve={type:"poll",text:Te.question,poll:{question:Te.question,options:Te.options,votes:{},multipleChoice:Te.multipleChoice,anonymous:Te.anonymous},userId:r,timestamp:ft(),mentions:[]};t?await cn(dt(we,"servers",t,"channels",e,"messages"),Ve):(await cn(dt(we,"dms",e,"messages"),Ve),await tt(Oe(we,"dms",e),{lastMessage:{text:` Poll: ${Te.question}`,userId:r,timestamp:ft()},updatedAt:ft(),hiddenFor:[]}))}catch(Ve){console.error("Error creating poll:",Ve),Ie("Failed to create poll")}finally{_(!1)}},rt=Te=>{if(!Te)return;const Ve=l==="admin"||l==="premium"||a?.plan==="premium",Ue=Ve?200*1024*1024:10*1024*1024;if(Te.size>Ue){Ie(`File too large! The limit is ${Ve?"200MB":"10MB"}. ${Ve?"":"Upgrade to Premium for larger uploads."}`);return}let _t=null;(Te.type.startsWith("image/")||Te.type.startsWith("video/"))&&(_t=URL.createObjectURL(Te)),G(Te),X(_t),De(""),M(!1),$e.current&&($e.current.value="")},Rn=Te=>{rt(Te.target.files?.[0])},Ln=()=>document.querySelector('[role="dialog"]')!==null||document.querySelector(".modal-overlay")!==null||document.body.style.overflow==="hidden",hn=Te=>{if(Te.preventDefault(),Te.stopPropagation(),Ln())return;he.current++,Te.dataTransfer.types&&Array.from(Te.dataTransfer.types).includes("Files")&&ee(!0)},Kn=Te=>{Te.preventDefault(),Te.stopPropagation(),he.current--,he.current===0&&ee(!1)},Js=Te=>{Te.preventDefault(),Te.stopPropagation()},Xt=Te=>{if(Te.preventDefault(),Te.stopPropagation(),ee(!1),he.current=0,Ln())return;const Ve=Te.dataTransfer.files;Ve&&Ve.length>0&&rt(Ve[0])};I.useEffect(()=>(window.addEventListener("dragenter",hn),window.addEventListener("dragleave",Kn),window.addEventListener("dragover",Js),window.addEventListener("drop",Xt),()=>{window.removeEventListener("dragenter",hn),window.removeEventListener("dragleave",Kn),window.removeEventListener("dragover",Js),window.removeEventListener("drop",Xt)}),[]);const cr=()=>{ne&&URL.revokeObjectURL(ne),G(null),X(null),De("")},Wt=async()=>{if(Ee)try{xe({uploading:!0,progress:0,speed:"0 KB/s"});let Te,Ve;if(Ee.type.startsWith("image/"))Te=await bb(Ee,(Yt,Zt)=>{xe({uploading:!0,progress:Yt,speed:Zt})});else{const fn=await Am(Ee,(Yt,Zt)=>{xe({uploading:!0,progress:Yt,speed:Zt})});Te=fn.url,Ve=fn}const _t={text:Ae.trim()?`${Te}
${Ae}`:Te,userId:r,timestamp:ft(),mentions:[],replyTo:null};t?await cn(dt(we,"servers",t,"channels",e,"messages"),_t):(await cn(dt(we,"dms",e,"messages"),_t),await tt(Oe(we,"dms",e),{lastMessage:{text:Ee.type.startsWith("image/")?" Image":" Attachment",userId:r,timestamp:ft()},updatedAt:ft(),hiddenFor:[]})),cr()}catch(Te){console.error("Error uploading file:",Te),Ie("Failed to upload file")}finally{xe({uploading:!1,progress:0,speed:"",statusText:""})}},Ft=async()=>{if(ke)try{const Te=await navigator.mediaDevices.getUserMedia({audio:!0}),Ve=new MediaRecorder(Te);Ce.current=Ve,He.current=[],ve.current=!1,Ve.ondataavailable=Ue=>{Ue.data.size>0&&He.current.push(Ue.data)},Ve.onstop=()=>{if(Te.getTracks().forEach(Ue=>Ue.stop()),ve.current){const Ue=new Blob(He.current,{type:"audio/webm"});zt(Ue)}He.current=[]},Ve.start(),de(!0),_e(0),Ge.current=setInterval(()=>{_e(Ue=>Ue+1)},1e3)}catch(Te){console.error("Error accessing microphone:",Te),Te.name==="NotAllowedError"?Ie("Microphone permission denied. Please enable it in browser settings."):Ie("Could not access microphone.")}},Jt=()=>{Ce.current&&ae&&(ve.current=!0,Ce.current.stop(),clearInterval(Ge.current),de(!1))},Qn=()=>{Ce.current&&ae&&(ve.current=!1,Ce.current.stop(),clearInterval(Ge.current),de(!1))},zt=async Te=>{if(!Te||Te.size===0)return;const Ve=`voice_message_${Date.now()}.webm`,Ue=new File([Te],Ve,{type:"audio/webm"});try{xe({uploading:!0,progress:0,speed:"0 KB/s",statusText:"Sending Voice Message..."});const _t=await Am(Ue,(Yt,Zt)=>{xe({uploading:!0,progress:Yt,speed:Zt,statusText:"Sending Voice Message..."})}),fn={type:"audio",text:_t.url,metadata:{duration:je,format:_t.format,bytes:_t.bytes},userId:r,timestamp:ft(),mentions:[],replyTo:null};t?await cn(dt(we,"servers",t,"channels",e,"messages"),fn):(await cn(dt(we,"dms",e,"messages"),fn),await tt(Oe(we,"dms",e),{lastMessage:{text:" Voice Message",userId:r,timestamp:ft()},updatedAt:ft(),hiddenFor:[]}))}catch(_t){console.error("Error sending voice message:",_t),Ie("Failed to send voice message")}finally{xe({uploading:!1,progress:0,speed:"",statusText:""})}};I.useEffect(()=>{const Te=g.length,Ve=g.slice(0,Te),Ue=Ve.lastIndexOf("@");if(Ue!==-1){const _t=Ve.slice(Ue+1);if(!_t.includes(" ")){k(_t.toLowerCase()),$(Ue),N(!0);return}}N(!1)},[g]);const ms=()=>{const Te=[];return t&&("everyone".startsWith(j.toLowerCase())&&Te.push({id:"everyone",displayName:"everyone",type:"special"}),["admin","moderator","member"].forEach(Ue=>{Ue.startsWith(j.toLowerCase())&&Te.push({id:`role-${Ue}`,displayName:Ue,type:"role"})})),c&&c.filter(Ue=>Ue.id!==r&&Ue.displayName.toLowerCase().startsWith(j.toLowerCase())).forEach(Ue=>{Te.push({...Ue,type:"user"})}),Te.slice(0,8)},Zs=Te=>{const Ve=g.slice(0,B),Ue=g.slice(B+j.length+1),_t=`${Ve}@${Te.displayName} ${Ue}`;v(_t),N(!1)};I.useEffect(()=>{const Te=Ve=>{document.activeElement!==oe.current&&(document.activeElement?.tagName==="INPUT"||document.activeElement?.tagName==="TEXTAREA"||Ve.ctrlKey||Ve.metaKey||Ve.altKey||["Escape","Tab","Enter","Backspace","Delete"].includes(Ve.key)||document.querySelector('[role="dialog"]')||Ve.key.length===1&&oe.current?.focus())};return window.addEventListener("keydown",Te),()=>window.removeEventListener("keydown",Te)},[]);const Go=async Te=>{if(Te.preventDefault(),!!g.trim()&&!(!e||!r)){a?.isMuted&&pe("You are muted and cannot send messages"),_(!0);try{const Ve=/@(\w+)/g,Ue=[];let _t;for(;(_t=Ve.exec(g))!==null;){const Yt=_t[1].toLowerCase();if(Yt==="everyone")c.forEach(Zt=>{Zt.id!==r&&Ue.push(Zt.id)});else if(["admin","moderator","member"].includes(Yt))c.forEach(Zt=>{Zt.role===Yt&&Zt.id!==r&&Ue.push(Zt.id)});else{const Zt=c.find(Pi=>Pi.displayName.toLowerCase()===Yt);Zt&&Zt.id!==r&&Ue.push(Zt.id)}}const fn={text:g.trim(),userId:r,timestamp:ft(),mentions:[...new Set(Ue)],replyTo:h?{messageId:h.id,userId:h.userId,text:h.text.substring(0,100)}:null};if(t){if(await cn(dt(we,"servers",t,"channels",e,"messages"),fn),Ue.length>0){const Yt=Ue.map(Zt=>tt(Oe(we,"users",Zt),{[`unreadMentions.${t}.count`]:hm(1),[`unreadMentions.${t}.lastMentionAt`]:ft(),[`unreadMentions.${t}.lastMentionText`]:g.trim().substring(0,50)}).catch(Pi=>{console.error("Error updating mention for user:",Zt,Pi)}));await Promise.all(Yt)}}else await cn(dt(we,"dms",e,"messages"),fn),await tt(Oe(we,"dms",e),{lastMessage:{text:g.trim().substring(0,100),userId:r,timestamp:ft()},updatedAt:ft(),hiddenFor:[]});v(""),m&&m()}catch(Ve){console.error("Error sending message:",Ve),Ie("Failed to send message")}finally{_(!1)}}};return d.jsxs("div",{className:"px-4 pb-6 relative",children:[h&&d.jsxs("div",{className:"mb-2 bg-dark-sidebar border-l-4 border-green-400 p-3 rounded flex items-start justify-between",children:[d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"text-xs text-green-400 font-semibold mb-1",children:["Replying to ",c.find(Te=>Te.id===h.userId)?.displayName||"Unknown"]}),d.jsx("div",{className:"text-sm text-dark-muted truncate",children:h.text})]}),d.jsx("button",{onClick:m,className:"ml-2 text-dark-muted hover:text-dark-text transition-colors",title:"Cancel reply",children:d.jsx(On,{size:18})})]}),C&&d.jsx("div",{className:"absolute bottom-full left-4 right-4 mb-2 bg-dark-sidebar rounded-lg shadow-lg border border-dark-hover max-h-48 overflow-y-auto",children:ms().map(Te=>d.jsx("button",{onClick:()=>Zs(Te),className:"w-full px-4 py-2 text-left hover:bg-dark-hover transition-colors flex items-center gap-2",children:Te.type==="special"||Te.type==="role"?d.jsxs("span",{className:"text-dark-text font-medium",children:["@",Te.displayName,Te.type==="role"&&d.jsx("span",{className:"ml-2 text-xs text-dark-muted",children:"(role)"})]}):d.jsxs(d.Fragment,{children:[Te.photoUrl?d.jsx("img",{src:Te.photoUrl,alt:Te.displayName,className:"w-8 h-8 rounded-full object-cover",onError:Ve=>{Ve.target.style.display="none",Ve.target.nextSibling.style.display="flex"}}):null,d.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold text-sm",style:{display:Te.photoUrl?"none":"flex"},children:Te.displayName[0].toUpperCase()}),d.jsxs("span",{className:"text-dark-text",children:["@",Te.displayName]})]})},Te.id))}),d.jsxs("form",{onSubmit:Go,className:"relative",children:[R&&d.jsx(KO,{onSelect:ge,onClose:()=>V(!1)}),ae?d.jsxs("div",{className:"absolute inset-x-0 top-0 bottom-0 bg-dark-input rounded-lg flex items-center justify-between px-4 z-20 border border-red-500/50 animate-pulse-border",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 animate-pulse"}),d.jsxs("span",{className:"text-dark-text font-mono font-medium",children:[Math.floor(je/60),":",(je%60).toString().padStart(2,"0")]})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("button",{type:"button",onClick:Qn,className:"p-2 text-dark-muted hover:text-red-400 transition-colors",title:"Cancel",children:d.jsx(ki,{size:22})}),d.jsx("button",{type:"button",onClick:Jt,className:"p-2 text-red-500 hover:text-red-400 transition-colors bg-red-500/10 rounded-full",title:"Send",children:d.jsx(P0,{size:22})})]})]}):null,P.uploading&&d.jsxs("div",{className:"absolute -top-12 left-0 right-0 bg-dark-sidebar border border-dark-hover rounded-lg p-2 shadow-lg animate-fade-in-up z-50",children:[d.jsxs("div",{className:"flex items-center justify-between text-xs text-dark-text mb-1",children:[d.jsx("span",{className:"font-semibold",children:P.statusText||"Uploading..."}),d.jsxs("span",{className:"text-dark-muted",children:[Math.round(P.progress),"%  ",P.speed]})]}),d.jsx("div",{className:"h-1.5 bg-dark-hover rounded-full overflow-hidden",children:d.jsx("div",{className:"h-full bg-brand-primary transition-all duration-200 ease-out",style:{width:`${P.progress}%`}})})]}),Ee&&d.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-dark-bg border border-dark-hover rounded-lg shadow-2xl max-w-lg w-full overflow-hidden flex flex-col p-4",children:[d.jsxs("h3",{className:"text-dark-text font-semibold mb-4 flex items-center gap-2",children:[d.jsx(vm,{className:"text-brand-primary"}),"Upload Attachment"]}),d.jsx("div",{className:"flex-1 w-full bg-black/50 rounded-lg overflow-hidden flex items-center justify-center mb-4 border border-dark-hover min-h-[200px] max-h-[400px]",children:ne?d.jsx("img",{src:ne,alt:"Preview",className:"max-w-full max-h-full object-contain"}):d.jsxs("div",{className:"flex flex-col items-center gap-2 text-dark-muted",children:[d.jsx("div",{className:"text-6xl",children:""}),d.jsx("div",{className:"text-sm font-medium text-dark-text max-w-xs truncate px-4",children:Ee.name}),d.jsxs("div",{className:"text-xs",children:[(Ee.size/1024/1024).toFixed(2)," MB"]})]})}),d.jsx("input",{type:"text",value:Ae,onChange:Te=>De(Te.target.value),placeholder:"Add a caption... (optional)",className:"w-full bg-dark-input text-dark-text px-4 py-2 rounded-lg border border-dark-hover focus:border-brand-primary outline-none mb-4",onKeyDown:Te=>{Te.key==="Enter"&&!P.uploading&&Wt()}}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("button",{onClick:cr,className:"px-4 py-2 text-dark-text hover:text-dark-muted transition-colors font-medium",disabled:P.uploading,children:"Cancel"}),d.jsx("button",{onClick:Wt,className:"px-6 py-2 bg-brand-primary hover:bg-brand-secondary text-white rounded-md transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",disabled:P.uploading,children:P.uploading?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Uploading..."]}):d.jsxs(d.Fragment,{children:[d.jsx(P0,{size:18}),"Send"]})})]}),P.uploading&&d.jsxs("div",{className:"mt-4",children:[d.jsxs("div",{className:"flex justify-between text-xs text-dark-muted mb-1",children:[d.jsx("span",{children:P.speed}),d.jsxs("span",{children:[Math.round(P.progress),"%"]})]}),d.jsx("div",{className:"h-1 bg-dark-hover rounded-full overflow-hidden",children:d.jsx("div",{className:"h-full bg-brand-primary transition-all duration-200",style:{width:`${P.progress}%`}})})]})]})}),S&&d.jsxs("div",{className:"absolute bottom-full right-0 mb-4 w-[85vw] max-w-[400px] h-[450px] shadow-2xl rounded-lg z-50 animate-fade-in-up",children:[d.jsx("div",{className:"fixed inset-0 z-[-1]",onClick:()=>E(!1)}),d.jsx(XU,{onSelect:Me})]}),z&&d.jsxs("div",{className:"absolute bottom-full right-0 mb-4 w-[85vw] max-w-[400px] h-[450px] shadow-2xl rounded-lg z-50",children:[d.jsx("div",{className:"fixed inset-0 z-[-1]",onClick:()=>F(!1)}),d.jsx(KU,{onSelect:be})]}),d.jsx("input",{ref:oe,type:"text",value:g,onChange:Te=>v(Te.target.value),onKeyDown:Te=>{if(Te.key==="Tab"&&C){Te.preventDefault();const Ve=ms();Ve.length>0&&Zs(Ve[0])}},onPaste:async Te=>{const Ve=Te.clipboardData.items;for(let Ue=0;Ue<Ve.length;Ue++)for(let _t=0;_t<Ve.length;_t++)if(Ve[_t].kind==="file"){Te.preventDefault(),rt(Ve[_t].getAsFile());break}},placeholder:ke?a?.isMuted?"You are muted":"Type a message...":ie,disabled:b||a?.isMuted||!ke||Ee!==null,className:`w-full bg-dark-input text-dark-text px-12 py-3 pr-48 rounded-lg
                     border border-transparent focus:border-brand-primary
                     outline-none transition-colors duration-200
                     placeholder:text-dark-muted
                     disabled:opacity-50 disabled:cursor-not-allowed select-text`}),H&&d.jsxs("div",{className:"fixed inset-0 z-[200] bg-brand-primary/90 flex flex-col items-center justify-center animate-fade-in pointer-events-none",children:[d.jsx("div",{className:"bg-white/10 p-8 rounded-full mb-6",children:d.jsx(rE,{size:64,className:"text-white animate-bounce"})}),d.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Drop your file here"}),d.jsx("p",{className:"text-white/80",children:"to upload instantly"})]}),d.jsxs("div",{className:"absolute left-3 top-0 bottom-0 flex items-center plus-menu-container",children:[" ",d.jsx("button",{type:"button",onClick:()=>M(!A),className:`text-dark-muted hover:text-brand-primary transition-colors flex items-center justify-center ${A?"text-brand-primary":""}`,title:"Add attachment",disabled:!ke,children:d.jsx(rE,{size:26})}),A&&d.jsxs("div",{className:"absolute bottom-full left-0 mb-2 w-48 bg-dark-sidebar border border-dark-hover rounded-lg shadow-xl overflow-hidden z-50 animate-fade-in-up",children:[d.jsxs("button",{type:"button",onClick:()=>{$e.current?.click(),M(!1)},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-dark-hover text-left transition-colors",children:[d.jsx(vm,{className:"text-green-400",size:20}),d.jsx("span",{className:"text-sm text-dark-text font-medium",children:"Upload File"})]}),d.jsxs("button",{type:"button",onClick:()=>{U(!0),M(!1)},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-dark-hover text-left transition-colors",disabled:!t,children:[d.jsx(db,{className:"text-brand-primary",size:20}),d.jsx("span",{className:"text-sm text-dark-text font-medium",children:"Create Poll"})]})]})]}),d.jsx("input",{type:"file",ref:$e,onChange:Rn,className:"hidden"}),d.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[d.jsx("button",{type:"button",onClick:()=>F(!z),className:`text-dark-muted hover:text-brand-primary
                        transition-colors border-2 border-current rounded px-1 text-[10px] font-bold h-6 flex items-center justify-center mr-1`,title:"Add GIF",children:"GIF"}),l==="admin"||l==="premium"||a?.badges?.includes("premium")||a?.plan==="premium"?d.jsx("button",{type:"button",onClick:()=>E(!S),className:`transition-colors ${S?"text-brand-primary":"text-dark-muted hover:text-brand-primary"}`,title:"Premium Stickers",children:d.jsx(SM,{size:24})}):null,d.jsx("button",{type:"button",onClick:()=>V(!R),className:`text-dark-muted hover:text-brand-primary
                       transition-colors`,title:"Add emoji",children:d.jsx(xC,{size:24})}),!g.trim()&&d.jsx("button",{type:"button",onClick:Ft,className:"text-dark-muted hover:text-brand-primary transition-colors",title:"Record Voice Message",disabled:b||a?.isMuted||!ke,children:d.jsx(sd,{size:24})}),d.jsx("button",{type:"submit",disabled:!g.trim()||b||a?.isMuted||!ke,className:`text-dark-muted hover:text-brand-primary
                       transition-colors disabled:opacity-50 disabled:cursor-not-allowed ml-1`,children:d.jsx(P0,{size:24})})]})]}),O&&d.jsx(WU,{onSubmit:nt,onClose:()=>U(!1)})]})},cA=({messages:t,users:e,onResultClick:n})=>{const[r,a]=I.useState(""),[l,c]=I.useState([]),[h,m]=I.useState(!1),g=b=>{if(a(b),!b.trim()){c([]);return}const _=t.filter(C=>C.text.toLowerCase().includes(b.toLowerCase())).slice(0,20);c(_)},v=b=>e.find(_=>_.id===b)||{displayName:"Unknown"};return h?d.jsxs("div",{className:"relative flex-1 max-w-md",children:[d.jsx("input",{type:"text",value:r,onChange:b=>g(b.target.value),placeholder:"Search messages...",autoFocus:!0,className:`w-full bg-dark-input text-dark-text px-4 py-2 pr-10 rounded-lg
                   border border-transparent focus:border-brand-primary
                   outline-none transition-colors placeholder:text-dark-muted`}),d.jsx("button",{onClick:()=>{m(!1),a(""),c([])},className:"absolute right-2 top-1/2 -translate-y-1/2 text-dark-muted hover:text-dark-text",children:d.jsx(On,{size:20})}),l.length>0&&d.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-dark-sidebar border border-dark-hover rounded-lg shadow-xl max-h-96 overflow-y-auto z-50",children:l.map(b=>d.jsxs("button",{onClick:()=>{n&&n(b),m(!1),a(""),c([])},className:"w-full px-4 py-3 text-left hover:bg-dark-hover transition-colors border-b border-dark-hover last:border-b-0",children:[d.jsx("div",{className:"text-xs text-brand-primary font-semibold mb-1",children:v(b.userId).displayName}),d.jsx("div",{className:"text-sm text-dark-text line-clamp-2",children:b.text})]},b.id))})]}):d.jsx("button",{onClick:()=>m(!0),className:"p-2 hover:bg-dark-hover rounded transition-colors",title:"Search messages",children:d.jsx(cb,{size:20,className:"text-dark-muted"})})},ez=({messages:t,users:e,onClose:n,onJumpToMessage:r})=>{const a=t.filter(c=>c.pinned),l=c=>e.find(h=>h.id===c)||{displayName:"Unknown"};return a.length===0?d.jsxs("div",{className:"w-80 bg-dark-sidebar border-l border-dark-hover h-full flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-hover",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Ql,{className:"text-blue-400",size:20}),d.jsx("h3",{className:"font-semibold text-dark-text",children:"Pinned Messages"})]}),d.jsx("button",{onClick:n,className:"text-dark-muted hover:text-dark-text transition-colors",children:d.jsx(On,{size:20})})]}),d.jsx("div",{className:"flex-1 flex items-center justify-center text-dark-muted text-sm",children:"No pinned messages"})]}):d.jsxs("div",{className:"w-80 bg-dark-sidebar border-l border-dark-hover h-full flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-hover",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Ql,{className:"text-blue-400",size:20}),d.jsx("h3",{className:"font-semibold text-dark-text",children:"Pinned Messages"}),d.jsxs("span",{className:"text-xs text-dark-muted",children:["(",a.length,")"]})]}),d.jsx("button",{onClick:n,className:"text-dark-muted hover:text-dark-text transition-colors",children:d.jsx(On,{size:20})})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:a.map(c=>{const h=l(c.userId);return d.jsx("div",{onClick:()=>r(c.id),className:"bg-dark-bg p-3 rounded-lg cursor-pointer hover:bg-dark-hover transition-colors border border-transparent hover:border-brand-primary",children:d.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[h.photoUrl?d.jsx("img",{src:h.photoUrl,alt:h.displayName,className:"w-8 h-8 rounded-full object-cover",onError:m=>{m.target.style.display="none",m.target.nextSibling.style.display="flex"}}):null,d.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold text-sm",style:{display:h.photoUrl?"none":"flex"},children:h.displayName?.[0]?.toUpperCase()||"U"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"font-semibold text-dark-text text-sm",children:h.displayName}),d.jsx("span",{className:"text-xs text-dark-muted",children:rp(c.timestamp)})]}),d.jsx("div",{className:"text-dark-text text-sm mt-1 line-clamp-3",children:d.jsx(kk,{children:c.text})}),c.pinnedBy&&d.jsxs("div",{className:"text-xs text-blue-400 mt-2 flex items-center gap-1",children:[d.jsx(Ql,{size:12}),d.jsxs("span",{children:["Pinned by ",l(c.pinnedBy).displayName]})]})]})]})},c.id)})})]})},tz=({currentStatus:t,onStatusChange:e,onClose:n})=>{const[r,a]=I.useState(!1),[l,c]=I.useState(""),[h,m]=I.useState(""),g=_=>{e(_),n()},v=()=>{h.trim()&&(e({emoji:l,text:h.trim(),type:"custom"}),n())},b=()=>{e(null),n()};return d.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-dark-sidebar rounded-lg p-6 w-96 max-w-full mx-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h3",{className:"text-lg font-semibold text-dark-text",children:"Set Status"}),d.jsx("button",{onClick:n,className:"text-dark-muted hover:text-dark-text transition-colors",children:d.jsx(On,{size:24})})]}),r?d.jsx(d.Fragment,{children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-sm text-dark-muted mb-2 block",children:"Emoji"}),d.jsx("input",{type:"text",value:l,onChange:_=>c(_.target.value.slice(0,2)),className:"w-full bg-dark-input text-dark-text px-4 py-2 rounded-lg text-2xl text-center",placeholder:"",maxLength:2})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm text-dark-muted mb-2 block",children:"Status Text"}),d.jsx("input",{type:"text",value:h,onChange:_=>m(_.target.value),className:"w-full bg-dark-input text-dark-text px-4 py-2 rounded-lg",placeholder:"What's on your mind?",maxLength:50,autoFocus:!0}),d.jsxs("div",{className:"text-xs text-dark-muted mt-1 text-right",children:[h.length,"/50"]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>a(!1),className:"flex-1 px-4 py-2 rounded-lg bg-dark-bg hover:bg-dark-hover transition-colors text-dark-text",children:"Back"}),d.jsx("button",{onClick:v,disabled:!h.trim(),className:"flex-1 px-4 py-2 rounded-lg bg-brand-primary hover:bg-brand-primary/80 transition-colors text-white font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Set Status"})]})]})}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"space-y-2 mb-4",children:yO.map(_=>d.jsxs("button",{onClick:()=>g(_),className:"w-full px-4 py-3 rounded-lg bg-dark-bg hover:bg-dark-hover transition-colors text-left flex items-center gap-3",children:[d.jsx("span",{className:"text-2xl",children:_.emoji}),d.jsx("span",{className:"text-dark-text",children:_.text})]},_.type))}),d.jsx("button",{onClick:()=>a(!0),className:"w-full px-4 py-3 rounded-lg bg-brand-primary hover:bg-brand-primary/80 transition-colors text-white font-medium",children:" Custom Status"}),t&&d.jsx("button",{onClick:b,className:"w-full mt-2 px-4 py-2 rounded-lg bg-dark-bg hover:bg-dark-hover transition-colors text-admin text-sm",children:"Clear Status"})]})]})})},nz=()=>{const t=[{name:"Screen Sharing",free:"",premium:"1080p 60fps"},{name:"Profile Badge",free:"",premium:""},{name:"Custom Backgrounds",free:"",premium:""},{name:"Upload Limit",free:"10MB",premium:"200MB"},{name:"GIF Avatar",free:"",premium:""},{name:"Animated Banner",free:"",premium:""},{name:"Profile Themes",free:"",premium:""},{name:"Exclusive Stickers",free:"",premium:""},{name:"Soundboard",free:"",premium:""}];return d.jsxs("div",{className:"bg-dark-sidebar/50 rounded-xl overflow-hidden border border-dark-hover",children:[d.jsxs("div",{className:"grid grid-cols-3 bg-dark-hover/50 p-4 text-sm font-bold text-dark-text uppercase tracking-wider",children:[d.jsx("div",{children:"Feature"}),d.jsx("div",{className:"text-center text-dark-muted",children:"Free"}),d.jsx("div",{className:"text-center text-brand-primary",children:"Premium"})]}),d.jsx("div",{className:"divide-y divide-dark-hover",children:t.map((e,n)=>d.jsxs("div",{className:"grid grid-cols-3 p-4 text-sm hover:bg-white/5 transition-colors",children:[d.jsx("div",{className:"font-medium text-dark-text",children:e.name}),d.jsx("div",{className:"text-center text-dark-muted",children:e.free}),d.jsx("div",{className:"text-center font-bold text-white",children:e.premium})]},n))})]})},rz=({question:t,answer:e})=>{const[n,r]=I.useState(!1);return d.jsxs("div",{className:"",children:[d.jsxs("button",{className:"w-full flex items-center justify-between p-5 text-left font-medium text-dark-text hover:text-white transition-colors",onClick:()=>r(!n),children:[d.jsx("span",{children:t}),d.jsx(_M,{className:`transform transition-transform duration-300 ${n?"rotate-180":""}`,size:20})]}),d.jsx("div",{className:`overflow-hidden transition-all duration-300 ${n?"max-h-40 opacity-100":"max-h-0 opacity-0"}`,children:d.jsx("p",{className:"text-sm text-dark-muted leading-relaxed px-5 pb-5 pt-0",children:e})})]})},sz=()=>{const{info:t}=fs(),e=[{icon:ym,title:"HD Screen Sharing",description:"Share your screen in 1080p 60fps quality with friends.",color:"text-blue-400",bg:"bg-blue-400/10"},{icon:AM,title:"Exclusive Profile Badge",description:"Stand out with the shiny Premium badge on your profile.",color:"text-purple-400",bg:"bg-purple-400/10"},{icon:VM,title:"Custom Profile Backgrounds",description:"Personalize your profile with custom banner images.",color:"text-yellow-400",bg:"bg-yellow-400/10"},{icon:xC,title:"Exclusive Stickers",description:"Access a library of premium stickers and custom emojis.",color:"text-orange-400",bg:"bg-orange-400/10"},{icon:jy,title:"Soundboard",description:"Play fun sound effects in voice channels.",color:"text-pink-400",bg:"bg-pink-400/10"},{icon:DM,title:"Priority Support",description:"Get faster responses for all your support tickets.",color:"text-green-400",bg:"bg-green-400/10"}],n=[{q:"Can I cancel anytime?",a:"Yes, you can cancel your subscription at any time from your account settings. Your benefits will continue until the end of the billing period."},{q:"Is payment secure?",a:"Absolutely. We use Stripe for payment processing, which is the industry standard for security. We never store your card details."},{q:"Do benefits apply to all servers?",a:"Yes! Your Premium benefits travel with you to any server you join on Lumo Chat."}];return d.jsxs("div",{className:"animate-fade-in pb-10",children:[d.jsx("style",{children:`
        @keyframes shine {
          0% { transform: translateX(-100%); }
          100% { transform: translateX(100%); }
        }
        @keyframes float {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-10px); }
        }
        .shine-effect::after {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          width: 50%;
          height: 100%;
          background: linear-gradient(to right, transparent, rgba(255,255,255,0.3), transparent);
          transform: skewX(-20deg) translateX(-150%);
          animation: shine 3s infinite;
        }
        .float-animation {
          animation: float 6s ease-in-out infinite;
        }
      `}),d.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-600 p-8 text-white shadow-2xl transform transition-all hover:scale-[1.005] mb-8",children:[d.jsx("div",{className:"absolute top-0 right-0 -mr-16 -mt-16 w-80 h-80 rounded-full bg-white/10 blur-3xl animate-pulse"}),d.jsx("div",{className:"absolute bottom-0 left-0 -ml-16 -mb-16 w-64 h-64 rounded-full bg-black/20 blur-3xl animate-pulse",style:{animationDelay:"1s"}}),d.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center gap-6",children:[d.jsx("div",{className:"float-animation p-5 bg-white/10 backdrop-blur-md rounded-full shadow-inner ring-4 ring-white/20 shrink-0",children:d.jsx(Io,{size:56,className:"text-white drop-shadow-[0_0_15px_rgba(255,255,255,0.5)]"})}),d.jsxs("div",{className:"text-center md:text-left",children:[d.jsxs("h1",{className:"text-4xl font-extrabold tracking-tight mb-2 drop-shadow-md",children:["Release the ",d.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 to-orange-300",children:"Boost!"})]}),d.jsx("p",{className:"text-indigo-100 font-medium text-lg leading-relaxed max-w-2xl",children:"Unlock the full potential of Lumo Chat. Get special perks, enhanced quality, and support the development."})]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{children:[d.jsxs("h2",{className:"text-xl font-bold text-dark-text mb-6 flex items-center gap-2",children:[d.jsx("span",{className:"w-1 h-6 bg-brand-primary rounded-full box-shadow-glow"}),"Premium Perks"]}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:e.map((r,a)=>d.jsxs("div",{className:"group relative overflow-hidden p-5 rounded-xl bg-dark-sidebar border border-dark-hover hover:border-brand-primary/50 transition-all duration-300 hover:shadow-xl hover:shadow-brand-primary/10 hover:-translate-y-1",style:{animationDelay:`${a*100}ms`},children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700 ease-in-out pointer-events-none"}),d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:`p-3 rounded-lg ${r.bg} group-hover:scale-110 transition-transform duration-300`,children:d.jsx(r.icon,{size:28,className:`${r.color} drop-shadow-sm`})}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-bold text-dark-text mb-1 group-hover:text-white transition-colors text-lg",children:r.title}),d.jsx("p",{className:"text-sm text-dark-muted leading-relaxed group-hover:text-gray-300",children:r.description})]})]})]},a))})]}),d.jsxs("div",{className:"bg-dark-bg rounded-2xl p-1 border-2 border-brand-primary/30 group hover:border-brand-primary/60 transition-colors relative overflow-hidden shadow-2xl",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 opacity-20 group-hover:opacity-40 transition-opacity"}),d.jsxs("div",{className:"bg-dark-sidebar/90 backdrop-blur-xl rounded-xl p-8 flex flex-col sm:flex-row items-center justify-between gap-6 relative z-10",children:[d.jsxs("div",{children:[d.jsx("div",{className:"inline-block px-3 py-1 rounded-full bg-gradient-to-r from-indigo-500 to-pink-500 text-[10px] font-bold text-white uppercase tracking-widest mb-3 shadow-lg",children:"BEST VALUE"}),d.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:"Monthly"}),d.jsxs("p",{className:"text-dark-muted text-sm flex items-center gap-2",children:[d.jsx(Do,{size:16,className:"text-green-500"})," Secure payment"]})]}),d.jsxs("div",{className:"flex flex-col items-center gap-4",children:[d.jsxs("div",{className:"text-4xl font-extrabold text-white",children:["$4.99",d.jsx("span",{className:"text-sm text-dark-muted font-normal ml-1",children:"/mo"})]}),d.jsx("button",{className:"relative overflow-hidden px-10 py-4 bg-gradient-to-r from-indigo-600 to-pink-600 hover:from-indigo-500 hover:to-pink-500 rounded-xl text-white font-bold shadow-lg transform transition-all hover:scale-105 active:scale-95 shine-effect whitespace-nowrap",onClick:()=>t("deme sistemi u anda bakmda."),children:d.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["Subscribe Now ",d.jsx(Io,{})]})})]})]})]})]}),d.jsx("div",{className:"space-y-8",children:d.jsxs("div",{children:[d.jsxs("h2",{className:"text-xl font-bold text-dark-text mb-6 flex items-center gap-2",children:[d.jsx("span",{className:"w-1 h-6 bg-purple-500 rounded-full box-shadow-glow"}),"Why Go Premium?"]}),d.jsx(nz,{})]})})]}),d.jsxs("div",{className:"mt-12",children:[d.jsxs("h2",{className:"text-xl font-bold text-dark-text mb-6 flex items-center gap-2",children:[d.jsx("span",{className:"w-1 h-6 bg-gray-500 rounded-full"}),"Common Questions"]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map((r,a)=>d.jsx("div",{className:"bg-dark-sidebar rounded-xl border border-dark-hover overflow-hidden",children:d.jsx(rz,{question:r.q,answer:r.a})},a))})]})]})},iz=[{id:"premium",label:"Premium",icon:Io,category:"User Settings"},{id:"account",label:"My Account",icon:LM,category:"User Settings"},{id:"security",label:"Privacy & Security",icon:wM,category:"User Settings"},{id:"about",label:"About",icon:ob,category:"App Settings"}],az=({isOpen:t,onClose:e})=>{const{currentUser:n,userProfile:r}=nr(),{success:a,error:l,info:c}=fs(),[h,m]=I.useState("account"),[g,v]=I.useState(r?.photoUrl||""),[b,_]=I.useState(r?.bannerUrl||""),[C,N]=I.useState(r?.themeColor||"#6366f1"),[j,k]=I.useState(r?.bio||""),[B,$]=I.useState(!1),[R,V]=I.useState(!1),[z,F]=I.useState({progress:0,speed:""}),[S,E]=I.useState(!1),[A,M]=I.useState({progress:0,speed:""}),O=I.useRef(null),U=I.useRef(null),[P,xe]=I.useState(!1),[Ee,G]=I.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[ne,X]=I.useState(!1),Ae=r?.role==="admin"||r?.role==="premium";I.useEffect(()=>{v(r?.photoUrl||""),_(r?.bannerUrl||""),N(r?.themeColor||"#6366f1"),k(r?.bio||"")},[r]),I.useEffect(()=>{const ve=he=>{he.key==="Escape"&&t&&e()};return t&&(document.addEventListener("keydown",ve),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",ve),document.body.style.overflow="unset"}},[t,e]);const De=async ve=>{if(!(!ve||!n)){if(!ve.type.startsWith("image/")){l("Please select an image file");return}if(ve.type==="image/gif"&&!Ae){l("Animated GIF avatars are for Premium members only!");return}if(ve.size>10*1024*1024){l("Image size must be less than 10MB");return}V(!0);try{const he=await Am(ve,($e,oe)=>{F({progress:$e,speed:oe})});await tt(Oe(we,"users",n.uid),{photoUrl:he.url}),v(he.url),a("Profile photo updated successfully!")}catch(he){console.error("Error uploading photo:",he),l("Failed to upload photo")}finally{V(!1),F({progress:0,speed:""}),O.current&&(O.current.value="")}}},H=async ve=>{if(!(!ve||!n)){if(!Ae){c("Custom banners are a Premium feature. Upgrade to unlock!");return}if(!ve.type.startsWith("image/")){l("Please select an image file");return}if(ve.size>10*1024*1024){l("Image size must be less than 10MB");return}E(!0);try{const he=await Am(ve,($e,oe)=>{M({progress:$e,speed:oe})});await tt(Oe(we,"users",n.uid),{bannerUrl:he.url}),_(he.url),a("Banner updated successfully!")}catch(he){console.error("Error uploading banner:",he),l("Failed to upload banner")}finally{E(!1),M({progress:0,speed:""}),U.current&&(U.current.value="")}}},ee=async ve=>{const he=ve.target.value;N(he)},ae=async()=>{if(n){if(!Ae){c("Custom themes are a Premium feature!"),N(r?.themeColor||"#6366f1");return}$(!0);try{await tt(Oe(we,"users",n.uid),{themeColor:C}),a("Appearance updated!")}catch(ve){console.error("Error updating appearance:",ve),l("Failed to update appearance")}finally{$(!1)}}},de=async()=>{if(n){$(!0);try{await tt(Oe(we,"users",n.uid),{bio:j.trim()}),a("Bio updated successfully")}catch(ve){console.error("Error updating bio:",ve),l("Failed to update bio")}finally{$(!1)}}},je=async()=>{if(!(!n||!n.email)){if(!Ee.currentPassword||!Ee.newPassword||!Ee.confirmPassword){l("Please fill in all password fields");return}if(Ee.newPassword.length<6){l("New password must be at least 6 characters");return}if(Ee.newPassword!==Ee.confirmPassword){l("New passwords do not match");return}X(!0);try{const ve=Lo.credential(n.email,Ee.currentPassword);await L5(n,ve),await z5(n,Ee.newPassword),a("Password changed successfully"),G({currentPassword:"",newPassword:"",confirmPassword:""})}catch(ve){console.error("Error changing password:",ve),ve.code==="auth/wrong-password"?l("Current password is incorrect"):ve.code==="auth/weak-password"?l("New password is too weak"):l("Failed to change password")}finally{X(!1)}}},_e=async ve=>{if(n)try{await tt(Oe(we,"users",n.uid),{status:ve}),a(ve?"Status updated":"Status cleared")}catch(he){console.error("Error updating status:",he),l("Failed to update status")}},Ce=async ve=>{if(n)try{await tt(Oe(we,"users",n.uid),{presence:ve}),a(`Status set to ${ve}`)}catch{l("Failed to update status")}};if(!t)return null;const He=iz.reduce((ve,he)=>(ve[he.category]||(ve[he.category]=[]),ve[he.category].push(he),ve),{}),Ge=()=>{switch(h){case"premium":return d.jsx(sz,{});case"account":return d.jsxs("div",{className:"space-y-8",children:[d.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"My Account"}),d.jsxs("div",{className:"rounded-lg overflow-hidden border border-dark-hover relative min-h-[300px]",style:{borderColor:C},children:[d.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-colors",style:{backgroundColor:C,backgroundImage:b?`url(${b})`:`linear-gradient(to bottom right, ${C}, #000)`}}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent"}),b?.endsWith(".gif")&&d.jsx("div",{className:"absolute top-2 right-2 px-2 py-1 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm font-bold z-10",children:"GIF"}),d.jsxs("div",{className:"relative z-10 p-6 flex flex-col items-center justify-end h-full min-h-[300px] text-center mt-auto",children:[d.jsxs("div",{className:"relative group mb-4",children:[g?d.jsx("img",{src:g,alt:"Profile",className:"w-28 h-28 rounded-full object-cover border-4",style:{borderColor:C},onError:ve=>{ve.target.style.display="none",ve.target.nextSibling.style.display="flex"}},g):null,d.jsx("div",{className:"w-28 h-28 rounded-full flex items-center justify-center text-white font-bold text-4xl border-4",style:{display:g?"none":"flex",backgroundColor:C,borderColor:C},children:r?.displayName?.[0]?.toUpperCase()||"U"}),d.jsx("div",{className:"absolute inset-0 rounded-full bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer border-4 border-transparent",onClick:()=>O.current?.click(),children:d.jsx(vm,{className:"text-white",size:32})})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center justify-center gap-2 shadow-black drop-shadow-md",children:[r?.displayName,Ae&&d.jsx(Io,{className:"text-brand-primary",title:"Premium Member"})]}),d.jsx("p",{className:"text-gray-200 text-sm font-medium shadow-black drop-shadow-md",children:n?.email}),d.jsx("div",{className:"flex justify-center gap-2 mt-3",children:d.jsx("span",{className:"text-xs px-3 py-1 rounded-full bg-black/40 backdrop-blur-md border border-white/20 text-white capitalize font-medium",children:r?.role||"member"})})]})]})]}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Profile Photo"}),d.jsx("input",{type:"file",ref:O,onChange:ve=>De(ve.target.files?.[0]),accept:"image/*",className:"hidden"}),d.jsx("div",{className:"flex gap-3 mb-4",children:d.jsx("button",{onClick:()=>O.current?.click(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-dark-sidebar hover:bg-dark-hover border border-dark-hover text-dark-text rounded-lg transition-colors disabled:opacity-50",disabled:R,children:R?d.jsxs("span",{className:"text-sm",children:["Uploading ",Math.round(z.progress),"%..."]}):d.jsxs(d.Fragment,{children:[d.jsx(Iy,{size:20}),"Upload New Photo"]})})})]}),d.jsxs("div",{className:`rounded-lg p-4 relative ${Ae?"bg-dark-bg":"bg-dark-bg/50"}`,children:[!Ae&&d.jsxs("div",{className:"absolute inset-0 z-10 bg-black/60 backdrop-blur-[1px] rounded-lg flex flex-col items-center justify-center text-center p-4",children:[d.jsx(Io,{size:32,className:"text-brand-primary mb-2 animate-bounce"}),d.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:"Unlock Profile Appearance"}),d.jsx("p",{className:"text-sm text-dark-muted mb-4 max-w-xs",children:"Customize your banner, theme colors, and use animated GIFs with Premium."}),d.jsx(et,{variant:"primary",onClick:()=>m("premium"),children:"View Premium Plans"})]}),d.jsxs("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-6 flex items-center gap-2",children:[d.jsx(CM,{})," Profile Appearance ",d.jsx("span",{className:"text-xs normal-case px-2 py-0.5 bg-brand-primary/20 text-brand-primary rounded",children:"Premium"})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{className:"block text-sm font-medium text-dark-text mb-2",children:"Profile Banner"}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("input",{type:"file",ref:U,onChange:ve=>H(ve.target.files?.[0]),accept:"image/*",className:"hidden"}),d.jsx("button",{onClick:()=>U.current?.click(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-8 border-2 border-dashed border-dark-hover hover:border-brand-primary rounded-lg text-dark-muted hover:text-brand-primary transition-colors disabled:opacity-50",disabled:S,children:S?d.jsxs("span",{children:["Uploading ",Math.round(A.progress),"%..."]}):d.jsxs("div",{className:"text-center",children:[d.jsx(vm,{size:24,className:"mx-auto mb-1"}),d.jsx("div",{children:"Upload Banner Image"}),d.jsx("div",{className:"text-xs opacity-70",children:"JPG, PNG, GIF"})]})}),b&&d.jsxs("div",{className:"w-32 h-24 rounded-lg overflow-hidden relative group shrink-0",children:[d.jsx("img",{src:b,className:"w-full h-full object-cover"}),d.jsx("button",{onClick:()=>{_(""),tt(Oe(we,"users",n.uid),{bannerUrl:""})},className:"absolute inset-0 bg-black/60 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity text-red-500 font-bold",children:"Remove"})]})]})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{className:"block text-sm font-medium text-dark-text mb-2",children:"Theme Color"}),d.jsxs("div",{className:"flex gap-4 items-center",children:[d.jsx("input",{type:"color",value:C,onChange:ee,className:"w-16 h-16 rounded-lg cursor-pointer bg-transparent border-0 p-0"}),d.jsxs("div",{children:[d.jsx("div",{className:"text-dark-text font-mono bg-dark-input px-3 py-1 rounded border border-dark-hover",children:C}),d.jsx("div",{className:"text-xs text-dark-muted mt-1",children:"Select a color to accent your profile."})]}),d.jsx("div",{className:"flex-1 text-right",children:d.jsx(et,{onClick:ae,disabled:C===r?.themeColor,children:"Save Color"})})]})]})]}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Online Status"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[{key:"online",label:"Online",color:"bg-green-500",desc:"Visible"},{key:"idle",label:"Idle",color:"bg-yellow-500",desc:"Away"},{key:"dnd",label:"Do Not Disturb",color:"bg-red-500",desc:"No notifications"},{key:"invisible",label:"Invisible",color:"bg-gray-500",desc:"Hidden"}].map(ve=>d.jsxs("button",{onClick:()=>Ce(ve.key),className:`p-3 rounded-lg border transition-all text-left flex items-center gap-3 ${r?.presence===ve.key||!r?.presence&&ve.key==="online"?"border-brand-primary bg-brand-primary/10":"border-dark-hover hover:border-dark-muted bg-dark-sidebar"}`,children:[d.jsx("span",{className:`w-3 h-3 rounded-full ${ve.color}`}),d.jsxs("div",{children:[d.jsx("div",{className:"text-sm font-medium text-dark-text",children:ve.label}),d.jsx("div",{className:"text-[10px] text-dark-muted",children:ve.desc})]})]},ve.key))})]}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Custom Status"}),r?.status?d.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-sidebar rounded-lg",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("span",{className:"text-2xl",children:r.status.emoji}),d.jsx("span",{className:"text-dark-text",children:r.status.text})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(et,{variant:"secondary",onClick:()=>xe(!0),children:"Edit"}),d.jsx(et,{variant:"danger",onClick:()=>_e(null),children:"Clear"})]})]}):d.jsxs("div",{className:"text-center py-4 border border-dashed border-dark-hover rounded-lg",children:[d.jsx("p",{className:"text-dark-muted text-sm mb-3",children:"No custom status set"}),d.jsx(et,{variant:"primary",size:"sm",onClick:()=>xe(!0),children:"Set a Status"})]})]}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"About Me"}),d.jsx("textarea",{placeholder:"Tell others about yourself...",value:j,onChange:ve=>k(ve.target.value),maxLength:190,rows:4,className:`w-full bg-dark-input text-dark-text px-4 py-3 rounded-lg
                           border border-transparent focus:border-brand-primary
                           outline-none transition-colors duration-200
                           placeholder:text-dark-muted resize-none`}),d.jsxs("div",{className:"flex justify-between items-center mt-2",children:[d.jsxs("span",{className:"text-xs text-dark-muted",children:[j.length,"/190"]}),d.jsx(et,{variant:"primary",onClick:de,disabled:B||j===r?.bio,children:B?"Updating...":"Save"})]})]}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Account Info"}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"flex justify-between items-center py-2 border-b border-dark-hover",children:d.jsxs("div",{children:[d.jsx("div",{className:"text-xs text-dark-muted uppercase",children:"Display Name"}),d.jsx("div",{className:"text-dark-text font-medium",children:r?.displayName})]})}),d.jsx("div",{className:"flex justify-between items-center py-2 border-b border-dark-hover",children:d.jsxs("div",{children:[d.jsx("div",{className:"text-xs text-dark-muted uppercase",children:"Email"}),d.jsx("div",{className:"text-dark-text font-medium",children:n?.email})]})}),d.jsx("div",{className:"flex justify-between items-center py-2",children:d.jsxs("div",{children:[d.jsx("div",{className:"text-xs text-dark-muted uppercase",children:"Role"}),d.jsx("div",{className:"text-dark-text font-medium capitalize",children:r?.role||"member"})]})})]})]})]});case"security":return d.jsxs("div",{className:"space-y-8",children:[d.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Privacy & Security"}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Change Password"}),d.jsxs("div",{className:"space-y-4 max-w-md",children:[d.jsx(dn,{label:"Current Password",type:"password",placeholder:"Enter current password",value:Ee.currentPassword,onChange:ve=>G({...Ee,currentPassword:ve.target.value})}),d.jsx(dn,{label:"New Password",type:"password",placeholder:"Enter new password (min 6 characters)",value:Ee.newPassword,onChange:ve=>G({...Ee,newPassword:ve.target.value})}),d.jsx(dn,{label:"Confirm New Password",type:"password",placeholder:"Confirm new password",value:Ee.confirmPassword,onChange:ve=>G({...Ee,confirmPassword:ve.target.value})}),d.jsx(et,{variant:"primary",onClick:je,disabled:ne||!Ee.currentPassword||!Ee.newPassword||!Ee.confirmPassword,children:ne?"Changing Password...":"Change Password"})]})]})]});case"about":return d.jsxs("div",{className:"space-y-8",children:[d.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"About"}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-6",children:[d.jsx("h2",{className:"text-xl font-bold text-dark-text mb-2",children:"Lumo Chat"}),d.jsxs("div",{className:"space-y-4 text-dark-muted text-sm",children:[d.jsx("p",{children:"A modern real-time chat application built for seamless communication."}),d.jsxs("div",{children:[d.jsx("div",{className:"font-semibold text-dark-text",children:"Version"}),d.jsx("div",{children:"1.6.6"})]}),d.jsxs("div",{children:[d.jsx("div",{className:"font-semibold text-dark-text",children:"Developer"}),d.jsx("div",{children:"Dazlakss"})]}),d.jsxs("div",{children:[d.jsx("div",{className:"font-semibold text-dark-text",children:"Tech Stack"}),d.jsx("div",{children:"React, Firebase, TailwindCSS, Electron"})]})]})]}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Acknowledgments"}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"flex items-center gap-4 p-3 bg-dark-sidebar rounded-lg border border-dark-hover",children:d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"text-dark-text font-medium",children:"GIPHY"}),d.jsx("div",{className:"text-xs text-dark-muted",children:"We use GIPHY for finding and sharing GIFs."}),d.jsx("a",{href:"https://giphy.com",target:"_blank",rel:"noopener noreferrer",className:"mt-2 text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500 block w-fit hover:opacity-80 transition-opacity",children:"Powered by GIPHY"})]})}),d.jsx("div",{className:"flex items-center gap-4 p-3 bg-dark-sidebar rounded-lg border border-dark-hover",children:d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"text-dark-text font-medium",children:"Cloudinary"}),d.jsx("div",{className:"text-xs text-dark-muted",children:"Robust cloud storage and delivery for images and files."}),d.jsx("a",{href:"https://cloudinary.com",target:"_blank",rel:"noopener noreferrer",className:"mt-2 text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-sky-400 block w-fit hover:opacity-80 transition-opacity",children:"Powered by Cloudinary"})]})}),d.jsx("div",{className:"flex items-center gap-4 p-3 bg-dark-sidebar rounded-lg border border-dark-hover",children:d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"text-dark-text font-medium",children:"ImgBB"}),d.jsx("div",{className:"text-xs text-dark-muted",children:"Simple and fast image hosting service."}),d.jsx("a",{href:"https://imgbb.com",target:"_blank",rel:"noopener noreferrer",className:"mt-2 text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-gray-200 to-gray-400 block w-fit hover:opacity-80 transition-opacity",children:"Powered by ImgBB"})]})})]})]})]});default:return null}};return d.jsxs("div",{className:"fixed inset-0 bg-black/80 z-50 flex flex-col md:flex-row",role:"dialog","aria-modal":"true",children:[d.jsx("div",{className:"w-full md:w-56 bg-dark-sidebar flex flex-col shrink-0 border-b md:border-b-0 md:border-r border-dark-hover",children:d.jsx("div",{className:"flex md:flex-col overflow-x-auto md:overflow-y-auto py-2 md:py-4 px-2 gap-2 md:gap-0 no-scrollbar",children:Object.entries(He).map(([ve,he])=>d.jsxs("div",{className:"mb-0 md:mb-4 flex md:block gap-2 md:gap-0 shrink-0",children:[d.jsx("div",{className:"hidden md:block px-3 py-2 text-xs font-semibold text-dark-muted uppercase tracking-wide",children:ve}),he.map($e=>{const oe=$e.icon;return d.jsxs("button",{onClick:()=>m($e.id),className:`whitespace-nowrap flex items-center gap-2 md:gap-3 px-3 py-2 rounded-md text-left transition-colors ${h===$e.id?"bg-dark-hover text-dark-text":"text-dark-muted hover:text-dark-text hover:bg-dark-hover/50"}`,children:[d.jsx(oe,{size:18}),d.jsx("span",{className:"text-sm",children:$e.label})]},$e.id)})]},ve))})}),d.jsxs("div",{className:"flex-1 flex flex-col bg-dark-bg overflow-hidden min-w-0",children:[d.jsx("div",{className:"flex justify-end p-4 shrink-0",children:d.jsx("button",{onClick:e,className:"p-2 hover:bg-dark-hover rounded-full transition-colors group",title:"Close",children:d.jsx(On,{size:24,className:"text-dark-muted group-hover:text-dark-text"})})}),d.jsx("div",{className:"flex-1 overflow-y-auto px-4 md:px-10 pb-10",children:d.jsx("div",{className:h==="premium"?"w-full":"max-w-2xl mx-auto md:mx-0",children:Ge()})})]}),P&&d.jsx(tz,{currentStatus:r?.status,onStatusChange:_e,onClose:()=>xe(!1)})]})},oz=()=>{const[t,e]=I.useState([]),{channels:n}=Rd();I.useEffect(()=>{const a=os(dt(we,"adminLogs"),Cy("timestamp","desc"),ky(100));return Dr(a,c=>{const h=[];c.forEach(m=>{h.push({id:m.id,...m.data()})}),e(h)})},[]);const r=a=>{const l=n.find(c=>c.id===a);return l?`#${l.name}`:"Unknown Channel"};return d.jsxs("div",{children:[d.jsx("h3",{className:"text-2xl font-bold text-dark-text mb-6",children:"Admin Logs"}),d.jsx("div",{className:"space-y-3 max-h-[520px] overflow-y-auto pr-2",children:t.length===0?d.jsx("div",{className:"text-center text-dark-muted py-8",children:"No logs yet"}):t.map(a=>d.jsxs("div",{className:"bg-dark-bg p-5 rounded-xl hover:bg-dark-hover transition-colors",children:[d.jsxs("div",{className:"flex items-start justify-between mb-2",children:[d.jsx("div",{className:"flex items-center gap-2",children:a.type==="message_delete"?d.jsxs(d.Fragment,{children:[d.jsx(ki,{className:"text-admin",size:20}),d.jsx("span",{className:"font-semibold text-dark-text",children:"Message Deleted"})]}):a.type==="message_edit"?d.jsxs(d.Fragment,{children:[d.jsx(Xl,{className:"text-blue-400",size:20}),d.jsx("span",{className:"font-semibold text-dark-text",children:"Message Edited"})]}):d.jsx("span",{className:"font-semibold text-dark-text",children:a.type})}),d.jsx("span",{className:"text-xs text-dark-muted",children:a.timestamp&&rp(a.timestamp)})]}),d.jsxs("div",{className:"space-y-1 text-sm",children:[d.jsxs("div",{className:"flex gap-2",children:[d.jsx("span",{className:"text-dark-muted",children:"Channel:"}),d.jsx("span",{className:"text-dark-text font-medium",children:r(a.channelId)})]}),a.type==="message_delete"&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex gap-2",children:[d.jsx("span",{className:"text-dark-muted",children:"Original Author:"}),d.jsx("span",{className:"text-dark-text",children:a.originalAuthorName||a.originalUserName||"Unknown"})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("span",{className:"text-dark-muted",children:"Message:"}),d.jsxs("span",{className:"text-dark-text italic",children:['"',a.messageText||a.deletedText||"(empty message)",'"']})]})]}),a.type==="message_edit"&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex gap-2",children:[d.jsx("span",{className:"text-dark-muted",children:"Before:"}),d.jsxs("span",{className:"text-dark-text italic",children:['"',a.originalText,'"']})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("span",{className:"text-dark-muted",children:"After:"}),d.jsxs("span",{className:"text-blue-400 italic",children:['"',a.newText,'"']})]})]})]})]},a.id))})]})},lz=[{id:"users",label:"Users",icon:ub,category:"Moderation"},{id:"roles",label:"Roles",icon:bC,category:"Moderation"},{id:"channels",label:"Channels",icon:sp,category:"Server Settings"},{id:"server",label:"Overview",icon:ob,category:"Server Settings"},{id:"logs",label:"Audit Log",icon:rM,category:"Server Settings"},{id:"cleanup",label:"Cleanup",icon:kM,category:"Maintenance"}],cz=({isOpen:t,onClose:e})=>{const{userProfile:n}=nr(),{users:r,channels:a,server:l,currentServer:c}=Rd(),[h,m]=I.useState("users"),[g,v]=I.useState(null),[b,_]=I.useState(""),[C,N]=I.useState(""),[j,k]=I.useState(null),[B,$]=I.useState([]),[R,V]=I.useState(null),[z,F]=I.useState({name:"",color:"#5865f2"}),[S,E]=I.useState(null),[A,M]=I.useState(null),{success:O,error:U}=fs(),[P,xe]=I.useState(0),[Ee,G]=I.useState(!1),[ne,X]=I.useState(null);I.useEffect(()=>{const Q=le=>{le.key==="Escape"&&t&&e()};return t&&(document.addEventListener("keydown",Q),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",Q),document.body.style.overflow="unset"}},[t,e]),I.useEffect(()=>{if(!c||c==="home")return;const Q=os(dt(we,"servers",c,"roles"));return Dr(Q,ke=>{const ie=[];ke.forEach(ge=>{ie.push({id:ge.id,...ge.data()})}),$(ie)})},[c]),I.useEffect(()=>{if(h!=="cleanup")return;(async()=>{try{const le=await jo(dt(we,"inviteCodes")),ke=new Date;let ie=0;le.forEach(ge=>{const be=ge.data(),Me=be.expiresAt?.toDate()<ke,nt=!be.isActive||be.uses>=be.maxUses;(Me||nt)&&ie++}),xe(ie)}catch(le){console.error("Error fetching cleanup stats:",le)}})()},[h]);const Ae=async()=>{G(!0);try{const Q=await jo(dt(we,"inviteCodes")),le=new Date,ke=Yw(we);let ie=0;Q.forEach(ge=>{const be=ge.data(),Me=be.expiresAt?.toDate()<le,nt=!be.isActive||be.uses>=be.maxUses;(Me||nt)&&(ke.delete(Oe(we,"inviteCodes",ge.id)),ie++)}),ie>0?(await ke.commit(),O(`${ie} expired invite code(s) deleted`),xe(0)):O("No expired invite codes to delete")}catch(Q){console.error("Error cleaning invite codes:",Q),U("Failed to clean invite codes")}finally{G(!1),X(null)}};if(!t||n?.role!=="admin")return null;const De=async(Q,le)=>{try{await tt(Oe(we,"users",Q),{role:le}),c&&await tt(Oe(we,"servers",c,"members",Q),{role:le}),O(`Role updated to ${le}`),v(null)}catch(ke){console.error("Error updating user role:",ke),U(`Failed to update role: ${ke.message}`)}},H=async(Q,le)=>{try{await tt(Oe(we,"users",Q),{isMuted:!le})}catch(ke){console.error("Error toggling mute:",ke)}},ee=async(Q,le)=>{try{await tt(Oe(we,"users",Q),{isBanned:!le})}catch(ke){console.error("Error toggling ban:",ke)}},ae=async()=>{if(!(!b.trim()||!c))try{await cn(dt(we,"servers",c,"channels"),{name:b.trim(),type:"text",description:C.trim(),position:a.length,createdAt:ft()}),_(""),N("")}catch(Q){console.error("Error creating channel:",Q)}},de=async(Q,le)=>{try{await tt(Oe(we,"servers",c,"channels",Q),le),k(null)}catch(ke){console.error("Error updating channel:",ke)}},je=async()=>{if(!(!A?.data||!c))try{await lc(Oe(we,"servers",c,"channels",A.data))}catch(Q){console.error("Error deleting channel:",Q)}},_e=async(Q,le)=>{if(c)try{await tt(Oe(we,"servers",c,"channels",Q),{locked:!le})}catch(ke){console.error("Error toggling channel lock:",ke)}},Ce=async()=>{if(z.name.trim())try{const Q=B.reduce((le,ke)=>Math.max(le,ke.position||0),0);c&&await cn(dt(we,"servers",c,"roles"),{name:z.name.trim(),color:z.color,position:Q+1,createdAt:ft()}),F({name:"",color:"#5865f2"})}catch(Q){console.error("Error creating role:",Q)}},He=async(Q,le)=>{if(c)try{await tt(Oe(we,"servers",c,"roles",Q),le),V(null)}catch(ke){console.error("Error updating role:",ke)}},Ge=async()=>{if(!A?.data)return;const Q=A.data;try{const le=B.find(be=>be.id===Q);if(!le)return;const ke=le.name,ie=Yw(we),ge=r.filter(be=>(be.serverRole||be.role)===ke);if(ge.forEach(be=>{if(be.role===ke){const Me=Oe(we,"users",be.id);ie.update(Me,{role:"member"})}if(c){const Me=Oe(we,"servers",c,"members",be.id);ie.update(Me,{role:"member"})}}),c){const be=Oe(we,"servers",c,"roles",Q);ie.delete(be),await ie.commit(),O(`Role '${ke}' deleted and ${ge.length} users reassigned to Member`)}}catch(le){console.error("Error deleting role:",le),U(`Failed to delete role: ${le.message}`)}},ve=[{id:"admin",name:"admin",color:"#f23f42",isDefault:!0,position:-3},{id:"moderator",name:"moderator",color:"#faa81a",isDefault:!0,position:-2},{id:"member",name:"member",color:"#80848e",isDefault:!0,position:-1},...B].sort((Q,le)=>(Q.position??999)-(le.position??999)),he=(Q,le)=>{E(le),Q.dataTransfer.effectAllowed="move"},$e=Q=>{Q.preventDefault(),Q.dataTransfer.dropEffect="move"},oe=async(Q,le)=>{if(Q.preventDefault(),!S||S===le){E(null);return}const ke=ve.find(ge=>ge.id===S),ie=ve.find(ge=>ge.id===le);if(ke?.isDefault||ie?.isDefault){E(null);return}try{const ge=ke.position??0,be=ie.position??0;c&&(await tt(Oe(we,"servers",c,"roles",S),{position:be}),await tt(Oe(we,"servers",c,"roles",le),{position:ge}))}catch(ge){console.error("Error reordering roles:",ge)}E(null)},pe=lz.reduce((Q,le)=>(Q[le.category]||(Q[le.category]=[]),Q[le.category].push(le),Q),{}),Ie=()=>{switch(h){case"users":return d.jsxs("div",{className:"space-y-6",children:[d.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"User Management"}),d.jsx("p",{className:"text-dark-muted",children:"Manage server members, assign roles, and moderate users."}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[d.jsxs("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:["Members  ",r.length]}),d.jsx("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:r.map(Q=>d.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-dark-hover transition-colors",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold",children:Q.displayName?.[0]?.toUpperCase()||"U"}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"font-medium text-dark-text",children:Q.displayName}),d.jsx("span",{className:"text-xs px-2 py-0.5 rounded",style:{backgroundColor:`${ve.find(le=>le.name===(Q.serverRole||Q.role))?.color}20`,color:ve.find(le=>le.name===(Q.serverRole||Q.role))?.color},children:Q.serverRole||Q.role}),Q.isMuted&&d.jsx("span",{className:"text-xs text-yellow-500",children:"MUTED"}),Q.isBanned&&d.jsx("span",{className:"text-xs text-red-500",children:"BANNED"})]}),d.jsx("div",{className:"text-sm text-dark-muted",children:Q.email})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(et,{size:"sm",variant:Q.isMuted?"warning":"secondary",onClick:()=>H(Q.id,Q.isMuted),children:Q.isMuted?"Unmute":"Mute"}),d.jsx(et,{size:"sm",variant:Q.isBanned?"danger":"secondary",onClick:()=>ee(Q.id,Q.isBanned),children:Q.isBanned?"Unban":"Ban"}),d.jsx(et,{size:"sm",variant:"ghost",onClick:()=>v(Q),children:d.jsx(Xl,{size:16})})]})]},Q.id))})]})]});case"roles":return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Roles"}),d.jsx("p",{className:"text-dark-muted mt-1",children:"Use roles to organize your members and customize permissions."})]}),d.jsxs("div",{className:"bg-dark-bg rounded-xl p-6 border border-dark-hover",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-primary/20 flex items-center justify-center",children:d.jsx(Kl,{className:"text-brand-primary",size:24})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-dark-text",children:"Create New Role"}),d.jsx("p",{className:"text-sm text-dark-muted",children:"Add a custom role with a unique color"})]})]}),d.jsxs("div",{className:"flex gap-4 items-end",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("label",{className:"block text-xs font-medium text-dark-muted uppercase tracking-wide mb-2",children:"Role Name"}),d.jsx(dn,{placeholder:"e.g. VIP, Helper, Supporter...",value:z.name,onChange:Q=>F({...z,name:Q.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-dark-muted uppercase tracking-wide mb-2",children:"Color"}),d.jsx("div",{className:"relative",children:d.jsx("input",{type:"color",value:z.color,onChange:Q=>F({...z,color:Q.target.value}),className:"w-14 h-10 rounded-lg cursor-pointer border-2 border-dark-hover hover:border-brand-primary transition-colors",style:{backgroundColor:z.color}})})]}),d.jsxs(et,{onClick:Ce,disabled:!z.name.trim(),className:"px-6",children:[d.jsx(Kl,{size:18,className:"mr-1"}),"Create Role"]})]})]}),d.jsxs("div",{className:"bg-dark-bg rounded-xl border border-dark-hover overflow-hidden",children:[d.jsxs("div",{className:"px-6 py-4 border-b border-dark-hover flex items-center justify-between",children:[d.jsxs("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide",children:["Roles  ",ve.length]}),d.jsx("span",{className:"text-xs text-dark-muted",children:"Drag custom roles to reorder hierarchy"})]}),d.jsxs("div",{className:"divide-y divide-dark-hover",children:[ve.map((Q,le)=>d.jsxs("div",{draggable:!Q.isDefault,onDragStart:ke=>he(ke,Q.id),onDragOver:$e,onDrop:ke=>oe(ke,Q.id),className:Ct("group flex items-center justify-between px-6 py-4 transition-colors",!Q.isDefault&&"cursor-grab active:cursor-grabbing hover:bg-dark-sidebar/50",Q.isDefault&&"opacity-70",S===Q.id&&"opacity-50 bg-brand-primary/10"),children:[d.jsxs("div",{className:"flex items-center gap-4",children:[!Q.isDefault&&d.jsx("div",{className:"text-dark-muted opacity-0 group-hover:opacity-100 transition-opacity",children:d.jsx(vM,{size:20})}),d.jsx("div",{className:"w-5 h-5 rounded-full ring-2 ring-offset-2 ring-offset-dark-bg",style:{backgroundColor:Q.color,ringColor:Q.color}}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"font-semibold text-dark-text",style:{color:Q.color},children:Q.name}),Q.isDefault&&d.jsx("span",{className:"text-[10px] px-2 py-0.5 bg-dark-hover text-dark-muted rounded-full uppercase font-medium",children:"System"})]}),d.jsx("p",{className:"text-xs text-dark-muted mt-0.5",children:Q.isDefault?"Default system role":`Position: ${Q.position??0}`})]})]}),!Q.isDefault&&d.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[d.jsx("button",{onClick:()=>V(Q),className:"p-2 rounded-lg hover:bg-dark-hover text-dark-muted hover:text-brand-primary transition-colors",title:"Edit Role",children:d.jsx(Xl,{size:18})}),d.jsx("button",{onClick:()=>M({type:"role",data:Q.id,name:Q.name}),className:"p-2 rounded-lg hover:bg-red-500/20 text-dark-muted hover:text-red-500 transition-colors",title:"Delete Role",children:d.jsx(ki,{size:18})})]})]},Q.id)),ve.length===0&&d.jsxs("div",{className:"px-6 py-12 text-center",children:[d.jsx(bC,{className:"mx-auto text-dark-muted mb-3",size:40}),d.jsx("p",{className:"text-dark-muted",children:"No roles created yet"}),d.jsx("p",{className:"text-xs text-dark-muted mt-1",children:"Create your first role above!"})]})]})]})]});case"channels":return d.jsxs("div",{className:"space-y-6",children:[d.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Channels"}),d.jsx("p",{className:"text-dark-muted",children:"Create and manage server channels."}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Create New Channel"}),d.jsxs("div",{className:"flex gap-3",children:[d.jsxs("div",{className:"flex-1 space-y-2",children:[d.jsx(dn,{placeholder:"Channel name (#general)",value:b,onChange:Q=>_(Q.target.value)}),d.jsx(dn,{placeholder:"Channel topic/description (Optional)",value:C,onChange:Q=>N(Q.target.value)})]}),d.jsxs(et,{onClick:ae,className:"h-fit mt-auto",children:[d.jsx(Kl,{size:20}),"Create"]})]})]}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[d.jsxs("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:["Text Channels  ",a.length]}),d.jsx("div",{className:"space-y-2",children:a.map(Q=>d.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-dark-hover transition-colors",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(sp,{className:"text-dark-muted"}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"font-medium text-dark-text",children:Q.name}),Q.description&&d.jsx("span",{className:"text-xs text-dark-muted ml-2 truncate max-w-[200px]",children:Q.description}),Q.locked&&d.jsxs("span",{className:"text-xs px-2 py-0.5 rounded bg-yellow-500/20 text-yellow-500 flex items-center gap-1",children:[d.jsx(np,{size:12}),"LOCKED"]})]}),d.jsx("div",{className:"text-xs text-dark-muted",children:Q.locked?"Only admins can send messages":"Everyone can send messages"})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(et,{size:"sm",variant:"ghost",onClick:()=>k(Q),children:d.jsx(Xl,{size:16})}),d.jsx(et,{size:"sm",variant:Q.locked?"warning":"secondary",onClick:()=>_e(Q.id,Q.locked),children:Q.locked?"Unlock":"Lock"}),d.jsx(et,{size:"sm",variant:"danger",onClick:()=>M({type:"channel",data:Q.id,name:Q.name}),children:d.jsx(ki,{size:16})})]})]},Q.id))})]})]});case"server":return d.jsxs("div",{className:"space-y-6",children:[d.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Server Overview"}),d.jsx("p",{className:"text-dark-muted",children:"View server statistics and information."}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-6",children:[d.jsxs("div",{className:"mb-6",children:[d.jsx("div",{className:"text-xs text-dark-muted uppercase tracking-wide mb-1",children:"Server Name"}),d.jsx("div",{className:"text-2xl font-bold text-dark-text",children:l?.name||"Unknown"})]}),d.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d.jsxs("div",{className:"bg-dark-sidebar p-4 rounded-lg text-center",children:[d.jsx("div",{className:"text-3xl font-bold text-brand-primary mb-1",children:r.length}),d.jsx("div",{className:"text-sm text-dark-muted",children:"Members"})]}),d.jsxs("div",{className:"bg-dark-sidebar p-4 rounded-lg text-center",children:[d.jsx("div",{className:"text-3xl font-bold text-green-500 mb-1",children:a.length}),d.jsx("div",{className:"text-sm text-dark-muted",children:"Channels"})]}),d.jsxs("div",{className:"bg-dark-sidebar p-4 rounded-lg text-center",children:[d.jsx("div",{className:"text-3xl font-bold text-purple-500 mb-1",children:ve.length}),d.jsx("div",{className:"text-sm text-dark-muted",children:"Roles"})]})]})]})]});case"logs":return d.jsxs("div",{className:"space-y-6",children:[d.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Audit Log"}),d.jsx("p",{className:"text-dark-muted",children:"View server activity and moderation history."}),d.jsx(oz,{})]});case"cleanup":return d.jsxs("div",{className:"space-y-6",children:[d.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Database Cleanup"}),d.jsx("p",{className:"text-dark-muted",children:"Remove unused data to keep your database clean and reduce storage costs."}),d.jsx("div",{className:"grid gap-4",children:d.jsxs("div",{className:"bg-dark-bg rounded-lg p-6 border border-dark-hover",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-dark-text",children:"Expired Invite Codes"}),d.jsx("p",{className:"text-sm text-dark-muted mt-1",children:"Expired, used, or deactivated invite codes that are no longer valid."})]}),d.jsx("div",{className:"text-3xl font-bold text-yellow-500",children:P})]}),d.jsxs(et,{variant:"warning",onClick:()=>X("invites"),disabled:P===0||Ee,className:"w-full",children:[d.jsx(ki,{size:20}),Ee?"Cleaning...":"Clean Invite Codes"]})]})}),d.jsxs("div",{className:"text-xs text-dark-muted bg-dark-sidebar p-4 rounded-lg",children:[d.jsx("strong",{children:"Note:"})," These actions are irreversible. Deleted data cannot be recovered. Running cleanup periodically helps keep your Firestore quota usage low."]})]});default:return null}};return d.jsxs("div",{className:"fixed inset-0 bg-black/80 z-[100] flex flex-col md:flex-row",children:[d.jsx("div",{className:"w-full md:w-56 bg-dark-sidebar flex flex-col shrink-0 border-b md:border-b-0 md:border-r border-dark-hover",children:d.jsx("div",{className:"flex md:flex-col overflow-x-auto md:overflow-y-auto py-2 md:py-4 px-2 gap-2 md:gap-0 no-scrollbar",children:Object.entries(pe).map(([Q,le])=>d.jsxs("div",{className:"mb-0 md:mb-4 flex md:block gap-2 md:gap-0 shrink-0",children:[d.jsx("div",{className:"hidden md:block px-3 py-2 text-xs font-semibold text-dark-muted uppercase tracking-wide",children:Q}),le.map(ke=>{const ie=ke.icon;return d.jsxs("button",{onClick:()=>m(ke.id),className:Ct("whitespace-nowrap flex items-center gap-2 md:gap-3 px-3 py-2 rounded-md text-left transition-colors",h===ke.id?"bg-dark-hover text-dark-text":"text-dark-muted hover:text-dark-text hover:bg-dark-hover/50"),children:[d.jsx(ie,{size:18}),d.jsx("span",{className:"text-sm",children:ke.label})]},ke.id)})]},Q))})}),d.jsxs("div",{className:"flex-1 flex flex-col bg-dark-bg overflow-hidden min-w-0",children:[d.jsx("div",{className:"flex justify-end p-4 shrink-0",children:d.jsx("button",{onClick:e,className:"p-2 hover:bg-dark-hover rounded-full transition-colors group",title:"Close (ESC)",children:d.jsx(On,{size:24,className:"text-dark-muted group-hover:text-dark-text"})})}),d.jsx("div",{className:"flex-1 overflow-y-auto px-4 md:px-10 pb-10",children:d.jsx("div",{className:"max-w-3xl mx-auto md:mx-0",children:Ie()})})]}),g&&(()=>{const Q=r.find(le=>le.id===g.id)||g;return d.jsx($s,{isOpen:!!g,onClose:()=>v(null),title:"Edit User Role",size:"sm",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-sm text-dark-muted mb-1",children:"User"}),d.jsx("div",{className:"font-medium text-dark-text",children:Q.displayName})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-sm text-dark-muted mb-2",children:"Select Role"}),d.jsx("div",{className:"space-y-2",children:ve.map(le=>d.jsxs("button",{onClick:()=>De(g.id,le.name),className:Ct("w-full px-3 py-2 rounded-lg border text-left transition-all flex items-center gap-3",(Q.serverRole||Q.role)===le.name?"border-brand-primary bg-brand-primary/20":"border-dark-hover hover:bg-dark-hover"),children:[d.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:le.color}}),d.jsx("span",{className:"text-dark-text",children:le.name})]},le.id))})]})]})})})(),R&&d.jsx($s,{isOpen:!!R,onClose:()=>V(null),title:"Edit Role",size:"sm",children:d.jsxs("div",{className:"space-y-4",children:[d.jsx(dn,{label:"Role Name",value:R.name,onChange:Q=>V({...R,name:Q.target.value})}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium text-dark-text mb-2 block",children:"Role Color"}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("input",{type:"color",value:R.color,onChange:Q=>V({...R,color:Q.target.value}),className:"w-14 h-10 rounded cursor-pointer"}),d.jsx(dn,{value:R.color,onChange:Q=>V({...R,color:Q.target.value}),className:"flex-1"})]})]}),d.jsx(et,{variant:"primary",className:"w-full",onClick:()=>He(R.id,{name:R.name,color:R.color}),children:"Save Changes"})]})}),j&&d.jsx($s,{isOpen:!!j,onClose:()=>k(null),title:"Edit Channel",size:"sm",children:d.jsxs("div",{className:"space-y-4",children:[d.jsx(dn,{label:"Channel Name",value:j.name,onChange:Q=>k({...j,name:Q.target.value})}),d.jsx(dn,{label:"Channel Topic / Description",value:j.description||"",onChange:Q=>k({...j,description:Q.target.value})}),d.jsx(et,{variant:"primary",className:"w-full",onClick:()=>de(j.id,{name:j.name,description:j.description}),children:"Save Changes"})]})}),d.jsx(cc,{isOpen:!!A,onClose:()=>M(null),onConfirm:A?.type==="channel"?je:Ge,title:`Delete ${A?.type==="channel"?"Channel":"Role"}`,message:`Are you sure you want to delete "${A?.name}"? This cannot be undone.`,confirmText:"Delete",variant:"danger"}),d.jsx(cc,{isOpen:!!ne,onClose:()=>X(null),onConfirm:Ae,title:"Clean Invite Codes",message:`Are you sure you want to delete ${P} expired/used invite code(s)? This action cannot be undone.`,confirmText:"Clean",variant:"danger"})]})},uz=({isOpen:t,onClose:e,userId:n,onSuccess:r})=>{const[a,l]=I.useState(""),[c,h]=I.useState(null),[m,g]=I.useState(null),[v,b]=I.useState(!1),[_,C]=I.useState({progress:0,speed:""}),N=I.useRef(null),{success:j,error:k}=fs(),B=R=>{const V=R.target.files?.[0];if(V){if(!V.type.startsWith("image/")){k("Please select an image file");return}if(V.size>10*1024*1024){k("Image size must be less than 10MB");return}h(V),g(URL.createObjectURL(V))}},$=async()=>{if(!a.trim()){k("Server name is required");return}b(!0);try{let R=null;c&&(R=await bb(c,(z,F)=>{C({progress:z,speed:F})}));const V=await cn(dt(we,"servers"),{name:a.trim(),icon:R,ownerId:n,createdAt:ft(),isDefault:!1,memberCount:1});await rd(Oe(we,"servers",V.id,"members",n),{userId:n,joinedAt:ft(),role:"admin"}),await cn(dt(we,"servers",V.id,"channels"),{name:"general",type:"text",description:"General discussion",position:0,createdAt:ft()}),await tt(Oe(we,"users",n),{servers:Nd(V.id),currentServer:V.id}),j("Server created successfully!"),l(""),h(null),m&&URL.revokeObjectURL(m),g(null),r&&r(V.id),e()}catch(R){console.error("Error creating server:",R),k("Failed to create server")}finally{b(!1),C({progress:0,speed:""})}};return d.jsx($s,{isOpen:t,onClose:e,title:"Create Server",size:"sm",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx("input",{type:"file",ref:N,onChange:B,accept:"image/*",className:"hidden"}),d.jsx("button",{onClick:()=>N.current?.click(),className:"w-20 h-20 rounded-full bg-dark-hover border-2 border-dashed border-dark-muted hover:border-brand-primary flex items-center justify-center transition-colors overflow-hidden",children:m?d.jsx("img",{src:m,alt:"Preview",className:"w-full h-full object-cover"}):d.jsx(EM,{size:32,className:"text-dark-muted"})}),d.jsx("span",{className:"text-xs text-dark-muted mt-2",children:"Server Icon (Optional)"})]}),v&&c&&_.progress>0&&d.jsxs("div",{className:"text-xs text-dark-muted text-center",children:["Uploading icon: ",Math.round(_.progress),"% (",_.speed,")"]}),d.jsx(dn,{label:"Server Name",placeholder:"My Awesome Server",value:a,onChange:R=>l(R.target.value),maxLength:50,autoFocus:!0}),d.jsxs("div",{className:"text-xs text-dark-muted",children:[a.length,"/50 characters"]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(et,{variant:"secondary",onClick:e,className:"flex-1",children:"Cancel"}),d.jsx(et,{variant:"primary",onClick:$,disabled:!a.trim()||v,className:"flex-1",children:v?"Creating...":"Create Server"})]})]})})},dz=({isOpen:t,onClose:e,userId:n,onSuccess:r})=>{const[a,l]=I.useState(""),[c,h]=I.useState(!1),{success:m,error:g}=fs(),v=async()=>{if(!a.trim()){g("Invite code is required");return}h(!0);try{const b=a.trim().toUpperCase(),_=Oe(we,"inviteCodes",b),C=await tp(_);if(!C.exists()){g("Invalid invite code");return}const N=C.data();if(!N.isActive){g("This invite code has already been used");return}const j=N.isUnlimited===!0||N.maxUses===-1;if(!j&&N.uses>=N.maxUses){g("This invite code has reached its usage limit");return}if(N.expiresAt.toDate()<new Date){g("This invite code has expired");return}await rd(Oe(we,"servers",N.serverId,"members",n),{userId:n,joinedAt:ft(),role:"member"}),await tt(Oe(we,"users",n),{servers:Nd(N.serverId),currentServer:N.serverId});const k={uses:hm(1)};j||(k.isActive=!1),await tt(_,k),await tt(Oe(we,"servers",N.serverId),{memberCount:hm(1)}),m("Successfully joined server!"),l(""),r&&r(N.serverId),e()}catch(b){console.error("Error joining server:",b),console.error("Error code:",b.code),console.error("Error message:",b.message),b.code!=="permission-denied"?b.code==="not-found"?g("Server not found"):g(`Failed to join server: ${b.message}`):e()}finally{h(!1)}};return d.jsx($s,{isOpen:t,onClose:e,title:"Join Server",size:"sm",children:d.jsxs("div",{className:"space-y-4",children:[d.jsx(dn,{label:"Invite Code",placeholder:"ABC12XYZ",value:a,onChange:b=>l(b.target.value.toUpperCase()),maxLength:8,autoFocus:!0}),d.jsx("div",{className:"text-xs text-dark-muted",children:"Enter the 8-character invite code"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(et,{variant:"secondary",onClick:e,className:"flex-1",children:"Cancel"}),d.jsx(et,{variant:"primary",onClick:v,disabled:a.length!==8||c,className:"flex-1",children:c?"Joining...":"Join Server"})]})]})})},_S=()=>{if(window.electron&&window.electron.desktopCapturer)return window.electron.desktopCapturer;if(window.require)try{return window.require("electron").desktopCapturer}catch{return null}return null},hz=({isOpen:t,onClose:e,onConfirm:n})=>{const[r,a]=I.useState(720),[l,c]=I.useState(30),[h,m]=I.useState("screens"),[g,v]=I.useState({screens:[],windows:[]}),[b,_]=I.useState(null),[C,N]=I.useState(!1),j=!!_S();I.useEffect(()=>{if(t&&j){k();const $=setInterval(k,3e3);return()=>clearInterval($)}},[t,j]);const k=async()=>{const $=_S();if($)try{const R=await $.getSources({types:["window","screen"],thumbnailSize:{width:300,height:200}}),V=R.filter(F=>F.id.startsWith("screen:")),z=R.filter(F=>!F.id.startsWith("screen:"));v({screens:V,windows:z}),!b&&V.length>0&&_(V[0].id)}catch(R){console.error("Error loading sources:",R)}};if(!t)return null;const B=()=>{let $,R;r===1080?($=1920,R=1080):($=1280,R=720),n({width:$,height:R,frameRate:l,sourceId:b,displaySurface:h==="screens"?"monitor":"window"}),e()};return d.jsx("div",{className:"fixed inset-0 bg-black/80 z-[100] flex items-center justify-center animate-fade-in",children:d.jsxs("div",{className:"bg-dark-elem w-full max-w-2xl rounded-2xl shadow-2xl border border-dark-hover overflow-hidden transform transition-all scale-100 p-6 relative flex flex-col max-h-[90vh]",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6 shrink-0",children:[d.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[d.jsx(ym,{className:"text-brand-primary"}),"Screen Share"]}),d.jsx("button",{onClick:e,className:"p-1 hover:bg-dark-hover rounded-full transition-colors text-dark-muted hover:text-white",children:d.jsx(On,{size:24})})]}),d.jsxs("div",{className:"flex gap-6 overflow-hidden flex-1",children:[d.jsxs("div",{className:"w-64 flex flex-col gap-6 shrink-0 border-r border-dark-hover pr-6",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-xs font-bold text-dark-muted uppercase tracking-wider mb-3",children:"Resolution"}),d.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[d.jsx("button",{onClick:()=>a(720),className:`p-2 rounded-lg border text-xs font-bold ${r===720?"border-brand-primary bg-brand-primary/10 text-white":"border-dark-hover bg-dark-input text-gray-400"}`,children:"720p"}),d.jsx("button",{onClick:()=>a(1080),className:`p-2 rounded-lg border text-xs font-bold ${r===1080?"border-brand-primary bg-brand-primary/10 text-white":"border-dark-hover bg-dark-input text-gray-400"}`,children:"1080p"})]})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-xs font-bold text-dark-muted uppercase tracking-wider mb-3",children:"Frame Rate"}),d.jsx("div",{className:"grid grid-cols-3 gap-2",children:[15,30,60].map($=>d.jsx("button",{onClick:()=>c($),className:`p-2 rounded-lg border text-xs font-bold ${l===$?"border-brand-primary bg-brand-primary/10 text-white":"border-dark-hover bg-dark-input text-gray-400"}`,children:$},$))})]})]}),d.jsx("div",{className:"flex-1 flex flex-col min-h-0",children:j?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex gap-4 border-b border-dark-hover mb-4 shrink-0",children:[d.jsxs("button",{onClick:()=>m("screens"),className:`pb-2 text-sm font-bold flex items-center gap-2 transition-colors ${h==="screens"?"text-brand-primary border-b-2 border-brand-primary":"text-gray-400 hover:text-white"}`,children:[d.jsx(xM,{size:18})," Screens"]}),d.jsxs("button",{onClick:()=>m("windows"),className:`pb-2 text-sm font-bold flex items-center gap-2 transition-colors ${h==="windows"?"text-brand-primary border-b-2 border-brand-primary":"text-gray-400 hover:text-white"}`,children:[d.jsx(PM,{size:18})," Windows"]})]}),d.jsx("div",{className:"grid grid-cols-2 gap-3 overflow-y-auto pr-2 custom-scrollbar content-start",children:(h==="screens"?g.screens:g.windows).map($=>d.jsxs("button",{onClick:()=>_($.id),className:`group relative rounded-lg overflow-hidden border-2 transition-all text-left ${b===$.id?"border-brand-primary ring-2 ring-brand-primary/20":"border-transparent hover:border-gray-600 bg-black/40"}`,children:[d.jsxs("div",{className:"aspect-video bg-black relative",children:[d.jsx("img",{src:$.thumbnail.toDataURL(),alt:$.name,className:"w-full h-full object-contain"}),b===$.id&&d.jsx("div",{className:"absolute inset-0 bg-brand-primary/10 flex items-center justify-center",children:d.jsx(Do,{className:"text-brand-primary drop-shadow-lg",size:48})})]}),d.jsx("div",{className:"p-2 bg-dark-input truncate text-xs font-medium text-gray-300 group-hover:text-white",children:$.name})]},$.id))})]}):d.jsx("div",{className:"flex items-center justify-center h-full text-center text-gray-500",children:d.jsxs("div",{className:"max-w-xs",children:[d.jsx(ym,{size:48,className:"mx-auto mb-4 opacity-50"}),d.jsxs("p",{className:"text-sm",children:["Browser limits source selection here.",d.jsx("br",{}),'Click "Go Live" to pick a screen or window.']})]})})})]}),d.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-dark-hover mt-4 shrink-0",children:[d.jsx(et,{variant:"ghost",onClick:e,className:"text-dark-text hover:text-white",children:"Cancel"}),d.jsx(et,{variant:"primary",onClick:B,className:"px-8 shadow-lg shadow-brand-primary/20",disabled:j&&!b,children:"Go Live"})]})]})})},fz=({isOpen:t,onClose:e})=>{const{availableDevices:n,selectedMicId:r,setSelectedMicId:a,selectedCameraId:l,setSelectedCameraId:c}=jd();return t?d.jsx("div",{className:"fixed inset-0 bg-black/80 z-[100] flex items-center justify-center animate-fade-in",children:d.jsxs("div",{className:"bg-dark-elem w-full max-w-md rounded-2xl shadow-2xl border border-dark-hover overflow-hidden p-6 relative",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[d.jsx(np,{size:28,className:"text-brand-primary"}),"Device Settings"]}),d.jsx("button",{onClick:e,className:"p-1 hover:bg-dark-hover rounded-full transition-colors text-dark-muted hover:text-white",children:d.jsx(On,{size:24})})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"block text-xs font-bold text-dark-muted uppercase tracking-wider mb-2 flex items-center gap-2",children:[d.jsx(sd,{size:16})," Microphone"]}),d.jsxs("select",{className:"w-full bg-dark-input border border-dark-hover rounded-lg p-3 text-white focus:ring-2 focus:ring-brand-primary outline-none transition-all",value:r,onChange:h=>a(h.target.value),children:[n.audioInputs.map(h=>d.jsx("option",{value:h.deviceId,children:h.label||`Microphone ${h.deviceId.slice(0,5)}...`},h.deviceId)),n.audioInputs.length===0&&d.jsx("option",{value:"",children:"No microphone found"})]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-xs font-bold text-dark-muted uppercase tracking-wider mb-2 flex items-center gap-2",children:[d.jsx(id,{size:16})," Camera"]}),d.jsxs("select",{className:"w-full bg-dark-input border border-dark-hover rounded-lg p-3 text-white focus:ring-2 focus:ring-brand-primary outline-none transition-all",value:l,onChange:h=>c(h.target.value),children:[n.videoInputs.map(h=>d.jsx("option",{value:h.deviceId,children:h.label||`Camera ${h.deviceId.slice(0,5)}...`},h.deviceId)),n.videoInputs.length===0&&d.jsx("option",{value:"",children:"No camera found"})]})]}),d.jsx("div",{className:"pt-4 border-t border-dark-hover flex justify-end",children:d.jsx(et,{variant:"primary",onClick:e,children:"Done"})})]})]})}):null};var ju={exports:{}},Q0={},X0={exports:{}},W0,wS;function mz(){if(wS)return W0;wS=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return W0=t,W0}var J0,ES;function pz(){if(ES)return J0;ES=1;var t=mz();function e(){}function n(){}return n.resetWarningCache=e,J0=function(){function r(c,h,m,g,v,b){if(b!==t){var _=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw _.name="Invariant Violation",_}}r.isRequired=r;function a(){return r}var l={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:a,element:r,elementType:r,instanceOf:a,node:r,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:n,resetWarningCache:e};return l.PropTypes=l,l},J0}var SS;function uA(){return SS||(SS=1,X0.exports=pz()()),X0.exports}var xf={exports:{}},TS;function gz(){if(TS)return xf.exports;TS=1;function t(n){var r,a,l="";if(typeof n=="string"||typeof n=="number")l+=n;else if(typeof n=="object")if(Array.isArray(n)){var c=n.length;for(r=0;r<c;r++)n[r]&&(a=t(n[r]))&&(l&&(l+=" "),l+=a)}else for(a in n)n[a]&&(l&&(l+=" "),l+=a);return l}function e(){for(var n,r,a=0,l="",c=arguments.length;a<c;a++)(n=arguments[a])&&(r=t(n))&&(l&&(l+=" "),l+=r);return l}return xf.exports=e,xf.exports.clsx=e,xf.exports}var ln={},pa={},CS;function gp(){if(CS)return pa;CS=1,Object.defineProperty(pa,"__esModule",{value:!0}),pa.dontSetMe=a,pa.findInArray=t,pa.int=r,pa.isFunction=e,pa.isNum=n;function t(l,c){for(let h=0,m=l.length;h<m;h++)if(c.apply(c,[l[h],h,l]))return l[h]}function e(l){return typeof l=="function"||Object.prototype.toString.call(l)==="[object Function]"}function n(l){return typeof l=="number"&&!isNaN(l)}function r(l){return parseInt(l,10)}function a(l,c,h){if(l[c])return new Error(`Invalid prop ${c} passed to ${h} - do not set this, set it on the child.`)}return pa}var ga={},kS;function yz(){if(kS)return ga;kS=1,Object.defineProperty(ga,"__esModule",{value:!0}),ga.browserPrefixToKey=n,ga.browserPrefixToStyle=r,ga.default=void 0,ga.getPrefix=e;const t=["Moz","Webkit","O","ms"];function e(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const c=window.document?.documentElement?.style;if(!c||l in c)return"";for(let h=0;h<t.length;h++)if(n(l,t[h])in c)return t[h];return""}function n(l,c){return c?`${c}${a(l)}`:l}function r(l,c){return c?`-${c.toLowerCase()}-${l}`:l}function a(l){let c="",h=!0;for(let m=0;m<l.length;m++)h?(c+=l[m].toUpperCase(),h=!1):l[m]==="-"?h=!0:c+=l[m];return c}return ga.default=e(),ga}var AS;function Ub(){if(AS)return ln;AS=1,Object.defineProperty(ln,"__esModule",{value:!0}),ln.addClassName=z,ln.addEvent=c,ln.addUserSelectStyles=$,ln.createCSSTransform=C,ln.createSVGTransform=N,ln.getTouch=k,ln.getTouchIdentifier=B,ln.getTranslation=j,ln.innerHeight=v,ln.innerWidth=b,ln.matchesSelector=a,ln.matchesSelectorAndParentsTo=l,ln.offsetXYFromParent=_,ln.outerHeight=m,ln.outerWidth=g,ln.removeClassName=F,ln.removeEvent=h,ln.scheduleRemoveUserSelectStyles=R;var t=gp(),e=n(yz());function n(S,E){if(typeof WeakMap=="function")var A=new WeakMap,M=new WeakMap;return(n=function(O,U){if(!U&&O&&O.__esModule)return O;var P,xe,Ee={__proto__:null,default:O};if(O===null||typeof O!="object"&&typeof O!="function")return Ee;if(P=U?M:A){if(P.has(O))return P.get(O);P.set(O,Ee)}for(const G in O)G!=="default"&&{}.hasOwnProperty.call(O,G)&&((xe=(P=Object.defineProperty)&&Object.getOwnPropertyDescriptor(O,G))&&(xe.get||xe.set)?P(Ee,G,xe):Ee[G]=O[G]);return Ee})(S,E)}let r="";function a(S,E){return r||(r=(0,t.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(A){return(0,t.isFunction)(S[A])})),(0,t.isFunction)(S[r])?S[r](E):!1}function l(S,E,A){let M=S;do{if(a(M,E))return!0;if(M===A)return!1;M=M.parentNode}while(M);return!1}function c(S,E,A,M){if(!S)return;const O={capture:!0,...M};S.addEventListener?S.addEventListener(E,A,O):S.attachEvent?S.attachEvent("on"+E,A):S["on"+E]=A}function h(S,E,A,M){if(!S)return;const O={capture:!0,...M};S.removeEventListener?S.removeEventListener(E,A,O):S.detachEvent?S.detachEvent("on"+E,A):S["on"+E]=null}function m(S){let E=S.clientHeight;const A=S.ownerDocument.defaultView.getComputedStyle(S);return E+=(0,t.int)(A.borderTopWidth),E+=(0,t.int)(A.borderBottomWidth),E}function g(S){let E=S.clientWidth;const A=S.ownerDocument.defaultView.getComputedStyle(S);return E+=(0,t.int)(A.borderLeftWidth),E+=(0,t.int)(A.borderRightWidth),E}function v(S){let E=S.clientHeight;const A=S.ownerDocument.defaultView.getComputedStyle(S);return E-=(0,t.int)(A.paddingTop),E-=(0,t.int)(A.paddingBottom),E}function b(S){let E=S.clientWidth;const A=S.ownerDocument.defaultView.getComputedStyle(S);return E-=(0,t.int)(A.paddingLeft),E-=(0,t.int)(A.paddingRight),E}function _(S,E,A){const O=E===E.ownerDocument.body?{left:0,top:0}:E.getBoundingClientRect(),U=(S.clientX+E.scrollLeft-O.left)/A,P=(S.clientY+E.scrollTop-O.top)/A;return{x:U,y:P}}function C(S,E){const A=j(S,E,"px");return{[(0,e.browserPrefixToKey)("transform",e.default)]:A}}function N(S,E){return j(S,E,"")}function j(S,E,A){let{x:M,y:O}=S,U=`translate(${M}${A},${O}${A})`;if(E){const P=`${typeof E.x=="string"?E.x:E.x+A}`,xe=`${typeof E.y=="string"?E.y:E.y+A}`;U=`translate(${P}, ${xe})`+U}return U}function k(S,E){return S.targetTouches&&(0,t.findInArray)(S.targetTouches,A=>E===A.identifier)||S.changedTouches&&(0,t.findInArray)(S.changedTouches,A=>E===A.identifier)}function B(S){if(S.targetTouches&&S.targetTouches[0])return S.targetTouches[0].identifier;if(S.changedTouches&&S.changedTouches[0])return S.changedTouches[0].identifier}function $(S){if(!S)return;let E=S.getElementById("react-draggable-style-el");E||(E=S.createElement("style"),E.type="text/css",E.id="react-draggable-style-el",E.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,E.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,S.getElementsByTagName("head")[0].appendChild(E)),S.body&&z(S.body,"react-draggable-transparent-selection")}function R(S){window.requestAnimationFrame?window.requestAnimationFrame(()=>{V(S)}):V(S)}function V(S){if(S)try{if(S.body&&F(S.body,"react-draggable-transparent-selection"),S.selection)S.selection.empty();else{const E=(S.defaultView||window).getSelection();E&&E.type!=="Caret"&&E.removeAllRanges()}}catch{}}function z(S,E){S.classList?S.classList.add(E):S.className.match(new RegExp(`(?:^|\\s)${E}(?!\\S)`))||(S.className+=` ${E}`)}function F(S,E){S.classList?S.classList.remove(E):S.className=S.className.replace(new RegExp(`(?:^|\\s)${E}(?!\\S)`,"g"),"")}return ln}var Ds={},NS;function dA(){if(NS)return Ds;NS=1,Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.canDragX=a,Ds.canDragY=l,Ds.createCoreData=h,Ds.createDraggableData=m,Ds.getBoundPosition=n,Ds.getControlPosition=c,Ds.snapToGrid=r;var t=gp(),e=Ub();function n(b,_,C){if(!b.props.bounds)return[_,C];let{bounds:N}=b.props;N=typeof N=="string"?N:g(N);const j=v(b);if(typeof N=="string"){const{ownerDocument:k}=j,B=k.defaultView;let $;if(N==="parent"?$=j.parentNode:$=j.getRootNode().querySelector(N),!($ instanceof B.HTMLElement))throw new Error('Bounds selector "'+N+'" could not find an element.');const R=$,V=B.getComputedStyle(j),z=B.getComputedStyle(R);N={left:-j.offsetLeft+(0,t.int)(z.paddingLeft)+(0,t.int)(V.marginLeft),top:-j.offsetTop+(0,t.int)(z.paddingTop)+(0,t.int)(V.marginTop),right:(0,e.innerWidth)(R)-(0,e.outerWidth)(j)-j.offsetLeft+(0,t.int)(z.paddingRight)-(0,t.int)(V.marginRight),bottom:(0,e.innerHeight)(R)-(0,e.outerHeight)(j)-j.offsetTop+(0,t.int)(z.paddingBottom)-(0,t.int)(V.marginBottom)}}return(0,t.isNum)(N.right)&&(_=Math.min(_,N.right)),(0,t.isNum)(N.bottom)&&(C=Math.min(C,N.bottom)),(0,t.isNum)(N.left)&&(_=Math.max(_,N.left)),(0,t.isNum)(N.top)&&(C=Math.max(C,N.top)),[_,C]}function r(b,_,C){const N=Math.round(_/b[0])*b[0],j=Math.round(C/b[1])*b[1];return[N,j]}function a(b){return b.props.axis==="both"||b.props.axis==="x"}function l(b){return b.props.axis==="both"||b.props.axis==="y"}function c(b,_,C){const N=typeof _=="number"?(0,e.getTouch)(b,_):null;if(typeof _=="number"&&!N)return null;const j=v(C),k=C.props.offsetParent||j.offsetParent||j.ownerDocument.body;return(0,e.offsetXYFromParent)(N||b,k,C.props.scale)}function h(b,_,C){const N=!(0,t.isNum)(b.lastX),j=v(b);return N?{node:j,deltaX:0,deltaY:0,lastX:_,lastY:C,x:_,y:C}:{node:j,deltaX:_-b.lastX,deltaY:C-b.lastY,lastX:b.lastX,lastY:b.lastY,x:_,y:C}}function m(b,_){const C=b.props.scale;return{node:_.node,x:b.state.x+_.deltaX/C,y:b.state.y+_.deltaY/C,deltaX:_.deltaX/C,deltaY:_.deltaY/C,lastX:b.state.x,lastY:b.state.y}}function g(b){return{left:b.left,top:b.top,right:b.right,bottom:b.bottom}}function v(b){const _=b.findDOMNode();if(!_)throw new Error("<DraggableCore>: Unmounted during event!");return _}return Ds}var Iu={},_f={},RS;function hA(){if(RS)return _f;RS=1,Object.defineProperty(_f,"__esModule",{value:!0}),_f.default=t;function t(){}return _f}var jS;function vz(){if(jS)return Iu;jS=1,Object.defineProperty(Iu,"__esModule",{value:!0}),Iu.default=void 0;var t=m(Va()),e=h(uA()),n=h(rv()),r=Ub(),a=dA(),l=gp(),c=h(hA());function h(j){return j&&j.__esModule?j:{default:j}}function m(j,k){if(typeof WeakMap=="function")var B=new WeakMap,$=new WeakMap;return(m=function(R,V){if(!V&&R&&R.__esModule)return R;var z,F,S={__proto__:null,default:R};if(R===null||typeof R!="object"&&typeof R!="function")return S;if(z=V?$:B){if(z.has(R))return z.get(R);z.set(R,S)}for(const E in R)E!=="default"&&{}.hasOwnProperty.call(R,E)&&((F=(z=Object.defineProperty)&&Object.getOwnPropertyDescriptor(R,E))&&(F.get||F.set)?z(S,E,F):S[E]=R[E]);return S})(j,k)}function g(j,k,B){return(k=v(k))in j?Object.defineProperty(j,k,{value:B,enumerable:!0,configurable:!0,writable:!0}):j[k]=B,j}function v(j){var k=b(j,"string");return typeof k=="symbol"?k:k+""}function b(j,k){if(typeof j!="object"||!j)return j;var B=j[Symbol.toPrimitive];if(B!==void 0){var $=B.call(j,k);if(typeof $!="object")return $;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(j)}const _={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let C=_.mouse,N=class extends t.Component{constructor(){super(...arguments),g(this,"dragging",!1),g(this,"lastX",NaN),g(this,"lastY",NaN),g(this,"touchIdentifier",null),g(this,"mounted",!1),g(this,"handleDragStart",k=>{if(this.props.onMouseDown(k),!this.props.allowAnyClick&&typeof k.button=="number"&&k.button!==0)return!1;const B=this.findDOMNode();if(!B||!B.ownerDocument||!B.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:$}=B;if(this.props.disabled||!(k.target instanceof $.defaultView.Node)||this.props.handle&&!(0,r.matchesSelectorAndParentsTo)(k.target,this.props.handle,B)||this.props.cancel&&(0,r.matchesSelectorAndParentsTo)(k.target,this.props.cancel,B))return;k.type==="touchstart"&&!this.props.allowMobileScroll&&k.preventDefault();const R=(0,r.getTouchIdentifier)(k);this.touchIdentifier=R;const V=(0,a.getControlPosition)(k,R,this);if(V==null)return;const{x:z,y:F}=V,S=(0,a.createCoreData)(this,z,F);(0,c.default)("DraggableCore: handleDragStart: %j",S),(0,c.default)("calling",this.props.onStart),!(this.props.onStart(k,S)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,r.addUserSelectStyles)($),this.dragging=!0,this.lastX=z,this.lastY=F,(0,r.addEvent)($,C.move,this.handleDrag),(0,r.addEvent)($,C.stop,this.handleDragStop))}),g(this,"handleDrag",k=>{const B=(0,a.getControlPosition)(k,this.touchIdentifier,this);if(B==null)return;let{x:$,y:R}=B;if(Array.isArray(this.props.grid)){let F=$-this.lastX,S=R-this.lastY;if([F,S]=(0,a.snapToGrid)(this.props.grid,F,S),!F&&!S)return;$=this.lastX+F,R=this.lastY+S}const V=(0,a.createCoreData)(this,$,R);if((0,c.default)("DraggableCore: handleDrag: %j",V),this.props.onDrag(k,V)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const S=document.createEvent("MouseEvents");S.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(S)}return}this.lastX=$,this.lastY=R}),g(this,"handleDragStop",k=>{if(!this.dragging)return;const B=(0,a.getControlPosition)(k,this.touchIdentifier,this);if(B==null)return;let{x:$,y:R}=B;if(Array.isArray(this.props.grid)){let S=$-this.lastX||0,E=R-this.lastY||0;[S,E]=(0,a.snapToGrid)(this.props.grid,S,E),$=this.lastX+S,R=this.lastY+E}const V=(0,a.createCoreData)(this,$,R);if(this.props.onStop(k,V)===!1||this.mounted===!1)return!1;const F=this.findDOMNode();F&&this.props.enableUserSelectHack&&(0,r.scheduleRemoveUserSelectStyles)(F.ownerDocument),(0,c.default)("DraggableCore: handleDragStop: %j",V),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,F&&((0,c.default)("DraggableCore: Removing handlers"),(0,r.removeEvent)(F.ownerDocument,C.move,this.handleDrag),(0,r.removeEvent)(F.ownerDocument,C.stop,this.handleDragStop))}),g(this,"onMouseDown",k=>(C=_.mouse,this.handleDragStart(k))),g(this,"onMouseUp",k=>(C=_.mouse,this.handleDragStop(k))),g(this,"onTouchStart",k=>(C=_.touch,this.handleDragStart(k))),g(this,"onTouchEnd",k=>(C=_.touch,this.handleDragStop(k)))}componentDidMount(){this.mounted=!0;const k=this.findDOMNode();k&&(0,r.addEvent)(k,_.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const k=this.findDOMNode();if(k){const{ownerDocument:B}=k;(0,r.removeEvent)(B,_.mouse.move,this.handleDrag),(0,r.removeEvent)(B,_.touch.move,this.handleDrag),(0,r.removeEvent)(B,_.mouse.stop,this.handleDragStop),(0,r.removeEvent)(B,_.touch.stop,this.handleDragStop),(0,r.removeEvent)(k,_.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,r.scheduleRemoveUserSelectStyles)(B)}}findDOMNode(){return this.props?.nodeRef?this.props?.nodeRef?.current:n.default.findDOMNode(this)}render(){return t.cloneElement(t.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};return Iu.default=N,g(N,"displayName","DraggableCore"),g(N,"propTypes",{allowAnyClick:e.default.bool,allowMobileScroll:e.default.bool,children:e.default.node.isRequired,disabled:e.default.bool,enableUserSelectHack:e.default.bool,offsetParent:function(j,k){if(j[k]&&j[k].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:e.default.arrayOf(e.default.number),handle:e.default.string,cancel:e.default.string,nodeRef:e.default.object,onStart:e.default.func,onDrag:e.default.func,onStop:e.default.func,onMouseDown:e.default.func,scale:e.default.number,className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),g(N,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),Iu}var IS;function bz(){return IS||(IS=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return m.default}}),t.default=void 0;var e=b(Va()),n=v(uA()),r=v(rv()),a=gz(),l=Ub(),c=dA(),h=gp(),m=v(vz()),g=v(hA());function v(B){return B&&B.__esModule?B:{default:B}}function b(B,$){if(typeof WeakMap=="function")var R=new WeakMap,V=new WeakMap;return(b=function(z,F){if(!F&&z&&z.__esModule)return z;var S,E,A={__proto__:null,default:z};if(z===null||typeof z!="object"&&typeof z!="function")return A;if(S=F?V:R){if(S.has(z))return S.get(z);S.set(z,A)}for(const M in z)M!=="default"&&{}.hasOwnProperty.call(z,M)&&((E=(S=Object.defineProperty)&&Object.getOwnPropertyDescriptor(z,M))&&(E.get||E.set)?S(A,M,E):A[M]=z[M]);return A})(B,$)}function _(){return _=Object.assign?Object.assign.bind():function(B){for(var $=1;$<arguments.length;$++){var R=arguments[$];for(var V in R)({}).hasOwnProperty.call(R,V)&&(B[V]=R[V])}return B},_.apply(null,arguments)}function C(B,$,R){return($=N($))in B?Object.defineProperty(B,$,{value:R,enumerable:!0,configurable:!0,writable:!0}):B[$]=R,B}function N(B){var $=j(B,"string");return typeof $=="symbol"?$:$+""}function j(B,$){if(typeof B!="object"||!B)return B;var R=B[Symbol.toPrimitive];if(R!==void 0){var V=R.call(B,$);if(typeof V!="object")return V;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(B)}class k extends e.Component{static getDerivedStateFromProps($,R){let{position:V}=$,{prevPropsPosition:z}=R;return V&&(!z||V.x!==z.x||V.y!==z.y)?((0,g.default)("Draggable: getDerivedStateFromProps %j",{position:V,prevPropsPosition:z}),{x:V.x,y:V.y,prevPropsPosition:{...V}}):null}constructor($){super($),C(this,"onDragStart",(R,V)=>{if((0,g.default)("Draggable: onDragStart: %j",V),this.props.onStart(R,(0,c.createDraggableData)(this,V))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),C(this,"onDrag",(R,V)=>{if(!this.state.dragging)return!1;(0,g.default)("Draggable: onDrag: %j",V);const z=(0,c.createDraggableData)(this,V),F={x:z.x,y:z.y,slackX:0,slackY:0};if(this.props.bounds){const{x:E,y:A}=F;F.x+=this.state.slackX,F.y+=this.state.slackY;const[M,O]=(0,c.getBoundPosition)(this,F.x,F.y);F.x=M,F.y=O,F.slackX=this.state.slackX+(E-F.x),F.slackY=this.state.slackY+(A-F.y),z.x=F.x,z.y=F.y,z.deltaX=F.x-this.state.x,z.deltaY=F.y-this.state.y}if(this.props.onDrag(R,z)===!1)return!1;this.setState(F)}),C(this,"onDragStop",(R,V)=>{if(!this.state.dragging||this.props.onStop(R,(0,c.createDraggableData)(this,V))===!1)return!1;(0,g.default)("Draggable: onDragStop: %j",V);const F={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:E,y:A}=this.props.position;F.x=E,F.y=A}this.setState(F)}),this.state={dragging:!1,dragged:!1,x:$.position?$.position.x:$.defaultPosition.x,y:$.position?$.position.y:$.defaultPosition.y,prevPropsPosition:{...$.position},slackX:0,slackY:0,isElementSVG:!1},$.position&&!($.onDrag||$.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){return this.props?.nodeRef?.current??r.default.findDOMNode(this)}render(){const{axis:$,bounds:R,children:V,defaultPosition:z,defaultClassName:F,defaultClassNameDragging:S,defaultClassNameDragged:E,position:A,positionOffset:M,scale:O,...U}=this.props;let P={},xe=null;const G=!!!A||this.state.dragging,ne=A||z,X={x:(0,c.canDragX)(this)&&G?this.state.x:ne.x,y:(0,c.canDragY)(this)&&G?this.state.y:ne.y};this.state.isElementSVG?xe=(0,l.createSVGTransform)(X,M):P=(0,l.createCSSTransform)(X,M);const Ae=(0,a.clsx)(V.props.className||"",F,{[S]:this.state.dragging,[E]:this.state.dragged});return e.createElement(m.default,_({},U,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(V),{className:Ae,style:{...V.props.style,...P},transform:xe}))}}t.default=k,C(k,"displayName","Draggable"),C(k,"propTypes",{...m.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:h.dontSetMe,style:h.dontSetMe,transform:h.dontSetMe}),C(k,"defaultProps",{...m.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(Q0)),Q0}var DS;function xz(){if(DS)return ju.exports;DS=1;const{default:t,DraggableCore:e}=bz();return ju.exports=t,ju.exports.default=t,ju.exports.DraggableCore=e,ju.exports}var _z=xz();const fA=fd(_z);var gc;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(gc||(gc={}));class Z0 extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const wz=t=>{var e,n;return t?.androidBridge?"android":!((n=(e=t?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},Ez=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},a=()=>e!==null?e.name:wz(t),l=()=>a()!=="web",c=b=>{const _=g.get(b);return!!(_?.platforms.has(a())||h(b))},h=b=>{var _;return(_=n.PluginHeaders)===null||_===void 0?void 0:_.find(C=>C.name===b)},m=b=>t.console.error(b),g=new Map,v=(b,_={})=>{const C=g.get(b);if(C)return console.warn(`Capacitor plugin "${b}" already registered. Cannot register plugins twice.`),C.proxy;const N=a(),j=h(b);let k;const B=async()=>(!k&&N in _?k=typeof _[N]=="function"?k=await _[N]():k=_[N]:e!==null&&!k&&"web"in _&&(k=typeof _.web=="function"?k=await _.web():k=_.web),k),$=(E,A)=>{var M,O;if(j){const U=j?.methods.find(P=>A===P.name);if(U)return U.rtype==="promise"?P=>n.nativePromise(b,A.toString(),P):(P,xe)=>n.nativeCallback(b,A.toString(),P,xe);if(E)return(M=E[A])===null||M===void 0?void 0:M.bind(E)}else{if(E)return(O=E[A])===null||O===void 0?void 0:O.bind(E);throw new Z0(`"${b}" plugin is not implemented on ${N}`,gc.Unimplemented)}},R=E=>{let A;const M=(...O)=>{const U=B().then(P=>{const xe=$(P,E);if(xe){const Ee=xe(...O);return A=Ee?.remove,Ee}else throw new Z0(`"${b}.${E}()" is not implemented on ${N}`,gc.Unimplemented)});return E==="addListener"&&(U.remove=async()=>A()),U};return M.toString=()=>`${E.toString()}() { [capacitor code] }`,Object.defineProperty(M,"name",{value:E,writable:!1,configurable:!1}),M},V=R("addListener"),z=R("removeListener"),F=(E,A)=>{const M=V({eventName:E},A),O=async()=>{const P=await M;z({eventName:E,callbackId:P},A)},U=new Promise(P=>M.then(()=>P({remove:O})));return U.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await O()},U},S=new Proxy({},{get(E,A){switch(A){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return j?F:V;case"removeListener":return z;default:return R(A)}}});return r[b]=S,g.set(b,{name:b,proxy:S,platforms:new Set([...Object.keys(_),...j?[N]:[]])}),S};return n.convertFileSrc||(n.convertFileSrc=b=>b),n.getPlatform=a,n.handleError=m,n.isNativePlatform=l,n.isPluginAvailable=c,n.registerPlugin=v,n.Exception=Z0,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},Sz=t=>t.Capacitor=Ez(t),Mo=Sz(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),yp=Mo.registerPlugin;class zb{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const l=this.windowListeners[e];l&&!l.registered&&this.addWindowListener(l),r&&this.sendRetainedArgumentsForEvent(e);const c=async()=>this.removeListener(e,n);return Promise.resolve({remove:c})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const a=this.listeners[e];if(!a){if(r){let l=this.retainedEventArguments[e];l||(l=[]),l.push(n),this.retainedEventArguments[e]=l}return}a.forEach(l=>l(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new Mo.Exception(e,gc.Unimplemented)}unavailable(e="not available"){return new Mo.Exception(e,gc.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const a=r.indexOf(n);this.listeners[e].splice(a,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const MS=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),PS=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Tz extends zb{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[a,l]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=PS(a).trim(),l=PS(l).trim(),n[a]=l}),n}async setCookie(e){try{const n=MS(e.key),r=MS(e.value),a=`; expires=${(e.expires||"").replace("expires=","")}`,l=(e.path||"/").replace("path=",""),c=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${a}; path=${l}; ${c};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}yp("CapacitorCookies",{web:()=>new Tz});const Cz=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const a=r.result;e(a.indexOf(",")>=0?a.split(",")[1]:a)},r.onerror=a=>n(a),r.readAsDataURL(t)}),kz=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(a=>a.toLocaleLowerCase()).reduce((a,l,c)=>(a[l]=t[e[c]],a),{})},Az=(t,e=!0)=>t?Object.entries(t).reduce((r,a)=>{const[l,c]=a;let h,m;return Array.isArray(c)?(m="",c.forEach(g=>{h=e?encodeURIComponent(g):g,m+=`${l}=${h}&`}),m.slice(0,-1)):(h=e?encodeURIComponent(c):c,m=`${l}=${h}`),`${r}&${m}`},"").substr(1):null,Nz=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),a=kz(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(a.includes("application/x-www-form-urlencoded")){const l=new URLSearchParams;for(const[c,h]of Object.entries(t.data||{}))l.set(c,h);n.body=l.toString()}else if(a.includes("multipart/form-data")||t.data instanceof FormData){const l=new FormData;if(t.data instanceof FormData)t.data.forEach((h,m)=>{l.append(m,h)});else for(const h of Object.keys(t.data))l.append(h,t.data[h]);n.body=l;const c=new Headers(n.headers);c.delete("content-type"),n.headers=c}else(a.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class Rz extends zb{async request(e){const n=Nz(e,e.webFetchExtra),r=Az(e.params,e.shouldEncodeUrlParams),a=r?`${e.url}?${r}`:e.url,l=await fetch(a,n),c=l.headers.get("content-type")||"";let{responseType:h="text"}=l.ok?e:{};c.includes("application/json")&&(h="json");let m,g;switch(h){case"arraybuffer":case"blob":g=await l.blob(),m=await Cz(g);break;case"json":m=await l.json();break;case"document":case"text":default:m=await l.text()}const v={};return l.headers.forEach((b,_)=>{v[_]=b}),{data:m,headers:v,status:l.status,url:l.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}yp("CapacitorHttp",{web:()=>new Rz});var OS;(function(t){t.Dark="DARK",t.Light="LIGHT",t.Default="DEFAULT"})(OS||(OS={}));var LS;(function(t){t.StatusBar="StatusBar",t.NavigationBar="NavigationBar"})(LS||(LS={}));class jz extends zb{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}yp("SystemBars",{web:()=>new jz});const Iz=()=>{const{callStatus:t,incomingCall:e,outgoingCallUser:n,answerCall:r,endCall:a,localStream:l,remoteStream:c,toggleAudio:h,toggleVideo:m,isMuted:g,isVideoOff:v,activeCall:b,isScreenSharing:_,toggleScreenShare:C,availableDevices:N,selectedMicId:j,selectedCameraId:k,setSelectedMicId:B,setSelectedCameraId:$,playSound:R,customSounds:V,addSound:z,removeSound:F}=jd(),S=I.useRef(null),E=I.useRef(null),A=I.useRef(null),[M,O]=I.useState(!1),[U,P]=I.useState(!1),[xe,Ee]=I.useState(100),[G,ne]=I.useState(!1),[X,Ae]=I.useState(!1),[De,H]=I.useState(!1),[ee,ae]=I.useState(!1),[de,je]=I.useState(!1),{userProfile:_e}=nr(),{role:Ce}=nr(),He=_e?.roles?.includes("premium")||_e?.roles?.includes("admin")||_e?.plan==="premium"||_e?.badges?.includes("premium"),Ge=Sk(_e,Si.SCREEN_SHARE),ve=I.useRef(null),he=async pe=>{const Ie=pe.target.files[0];if(!Ie)return;const Q=Ie.name.split(".")[0].slice(0,10);await z(Q,Ie),ve.current&&(ve.current.value="")},[$e,oe]=I.useState(!1);return I.useEffect(()=>{S.current&&l&&(S.current.srcObject=l)},[l,t]),I.useEffect(()=>{E.current&&c&&(E.current.srcObject=c)},[c,t]),I.useEffect(()=>{if(c){const pe=c.getVideoTracks()[0];if(pe){const Ie=!pe.muted&&pe.readyState==="live";oe(Ie);const Q=()=>oe(!1),le=()=>oe(!0),ke=()=>oe(!1);return pe.addEventListener("mute",Q),pe.addEventListener("unmute",le),pe.addEventListener("ended",ke),()=>{pe.removeEventListener("mute",Q),pe.removeEventListener("unmute",le),pe.removeEventListener("ended",ke)}}else oe(!1)}else oe(!1)},[c]),I.useEffect(()=>{E.current&&(E.current.volume=xe/100)},[xe,c]),I.useEffect(()=>{t==="idle"&&(O(!1),je(!1),Ae(!1),ae(!1),ne(!1),H(!1))},[t]),t==="idle"?null:t==="incoming"?d.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in",role:"dialog","aria-modal":"true",children:d.jsxs("div",{className:"bg-dark-sidebar p-6 rounded-2xl shadow-2xl w-80 text-center border border-dark-hover",children:[d.jsxs("div",{className:"w-24 h-24 mx-auto mb-4 relative",children:[e?.callerPhotoUrl?d.jsx("img",{src:e.callerPhotoUrl,alt:"Caller",className:"w-full h-full rounded-full object-cover border-4 border-dark-bg"}):d.jsx("div",{className:"w-full h-full rounded-full bg-brand-primary flex items-center justify-center text-3xl font-bold text-white border-4 border-dark-bg",children:e?.callerName?.[0]?.toUpperCase()}),d.jsx("div",{className:"absolute -bottom-1 -right-1 bg-green-500 rounded-full p-2 animate-bounce",children:d.jsx(hE,{size:16,className:"text-white"})})]}),d.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:e?.callerName}),d.jsxs("p",{className:"text-dark-muted mb-6",children:["Incoming ",e?.type," call..."]}),d.jsxs("div",{className:"flex gap-4 justify-center",children:[d.jsx("button",{onClick:()=>a(!0),className:"w-12 h-12 rounded-full bg-red-500 flex items-center justify-center text-white hover:bg-red-600 transition-colors",children:d.jsx(M0,{size:24})}),d.jsx("button",{onClick:r,className:"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center text-white hover:bg-green-600 transition-colors",children:d.jsx(hE,{size:20})})]})]})}):d.jsx(fA,{nodeRef:A,disabled:!M,bounds:"body",onStart:()=>P(!0),onStop:()=>P(!1),children:d.jsxs("div",{role:"dialog","aria-modal":"true",ref:A,style:M?void 0:{transform:"none !important"},className:Ct("fixed z-[100] bg-gray-900 shadow-2xl overflow-hidden border border-gray-700 group",!U&&"transition-all duration-300",M?"bottom-4 right-4 w-64 h-48 rounded-lg cursor-move":"inset-0 flex flex-col !transform-none"),children:[d.jsxs("div",{className:Ct("absolute top-0 left-0 right-0 p-4 z-50 flex justify-between items-start bg-gradient-to-b from-black/80 to-transparent transition-opacity duration-200 opacity-100"),children:[d.jsx("div",{className:"flex gap-2",children:d.jsxs("div",{className:"bg-black/40 backdrop-blur px-3 py-1 rounded-full flex items-center gap-2",children:[d.jsx("span",{className:Ct("w-2 h-2 rounded-full",b?"bg-green-500":"bg-yellow-500 animate-pulse")}),d.jsx("span",{className:"text-xs text-white font-medium",children:b?"Connected":"Calling..."})]})}),d.jsx("button",{onClick:()=>O(!M),className:"p-2 rounded-full bg-black/40 hover:bg-white/10 text-white backdrop-blur transition-colors",title:M?"Maximize":"Minimize",children:M?d.jsx(RM,{size:20}):d.jsx(NM,{size:20})})]}),d.jsxs("div",{className:"relative flex-1 bg-black flex items-center justify-center w-full h-full",children:[d.jsx("video",{ref:E,autoPlay:!0,playsInline:!0,className:Ct("w-full h-full object-contain",(!c||!$e)&&"hidden")}),(!c||!$e)&&d.jsxs("div",{className:"text-center absolute inset-0 flex flex-col items-center justify-center z-10",children:[d.jsx("div",{className:"w-32 h-32 mx-auto mb-4 rounded-full bg-gray-800 flex items-center justify-center text-6xl font-bold text-gray-500 animate-pulse",children:n?.displayName?.[0]||b?.metadata?.name?.[0]||"?"}),d.jsx("p",{className:"text-xl text-white font-medium",children:t==="outgoing"?"Calling...":t==="connected"?"No Video / Audio Only":"Connecting..."}),d.jsx("p",{className:"text-gray-400 text-sm mt-1",children:n?.displayName})]}),!M&&l&&d.jsx(Dz,{})]}),d.jsxs("div",{className:Ct("absolute bottom-4 md:bottom-8 left-1/2 -translate-x-1/2 z-50 flex flex-wrap justify-center items-center gap-2 md:gap-4 p-2 md:p-3 bg-gray-900/80 backdrop-blur-md rounded-xl md:rounded-2xl border border-gray-700 shadow-xl transition-opacity duration-300 hover:opacity-100 w-[95%] md:w-auto max-w-screen-sm",M&&"hidden"),children:[d.jsx("button",{onClick:h,className:Ct("p-3 rounded-xl transition-all hover:scale-110 active:scale-95",g?"bg-red-500/20 text-red-500":"bg-gray-700/50 text-white hover:bg-gray-600"),title:g?"Unmute":"Mute",children:g?d.jsx(Ny,{size:22}):d.jsx(sd,{size:22})}),d.jsx("button",{onClick:m,className:Ct("p-3 rounded-xl transition-all hover:scale-110 active:scale-95",v?"bg-red-500/20 text-red-500":"bg-gray-700/50 text-white hover:bg-gray-600"),title:v?"Turn Video On":"Turn Video Off",children:v?d.jsx(Ry,{size:22}):d.jsx(id,{size:22})}),!Mo.isNativePlatform()&&d.jsxs("div",{className:"relative",onMouseEnter:()=>H(!0),onMouseLeave:()=>H(!1),children:[d.jsx("button",{onClick:()=>{_?C():ae(!0)},disabled:!b||!Ge,className:Ct("p-3 rounded-xl transition-all hover:scale-110 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",_?"bg-green-500 text-white":Ge?"bg-gray-700/50 text-white hover:bg-gray-600":"bg-gray-800 text-gray-500 cursor-not-allowed"),title:Ge?_?"Stop Sharing":"Share Screen":void 0,children:_?d.jsx(pM,{size:22}):d.jsx(ym,{size:22})}),!Ge&&d.jsxs("div",{className:Ct("absolute bottom-full mb-2 left-1/2 -translate-x-1/2 px-2 py-1 bg-black text-rose-500 text-xs font-bold rounded shadow-lg whitespace-nowrap transition-opacity pointer-events-none z-50",De?"opacity-100":"opacity-0"),children:["Requires Premium ",d.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-black"})]})]}),d.jsx("div",{className:"w-px h-8 bg-gray-700 mx-2"}),d.jsxs("div",{className:"relative",children:[d.jsx("button",{onClick:()=>ne(!G),onDoubleClick:()=>Ee(xe>0?0:100),className:Ct("p-3 rounded-xl transition-all hover:scale-110 active:scale-95",xe===0?"bg-red-500/20 text-red-500":"bg-gray-700/50 text-white hover:bg-gray-600"),title:`Volume: ${xe}% (click to show slider, double-click to mute)`,children:xe===0?d.jsx(tE,{size:22}):xe<50?d.jsx(dM,{size:22}):d.jsx(nE,{size:22})}),G&&d.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-3 p-3 bg-gray-900/95 backdrop-blur-md rounded-xl border border-gray-700 shadow-xl",children:d.jsxs("div",{className:"flex flex-col items-center gap-2",children:[d.jsxs("span",{className:"text-xs text-gray-400 font-medium",children:[xe,"%"]}),d.jsx("input",{type:"range",min:"0",max:"100",value:xe,onChange:pe=>Ee(Number(pe.target.value)),className:`w-24 h-2 appearance-none bg-gray-700 rounded-full cursor-pointer accent-brand-primary
                     [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 
                     [&::-webkit-slider-thumb]:bg-brand-primary [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer
                     [&::-webkit-slider-thumb]:shadow-lg [&::-webkit-slider-thumb]:hover:scale-110 [&::-webkit-slider-thumb]:transition-transform`,style:{background:`linear-gradient(to right, rgb(88, 101, 242) ${xe}%, rgb(55, 65, 81) ${xe}%)`}}),d.jsx("span",{className:"text-[10px] text-gray-500",children:"Remote Volume"})]})})]}),d.jsxs("div",{className:"relative",children:[d.jsx("button",{onClick:()=>je(!de),className:Ct("p-3 rounded-xl transition-all hover:scale-110 active:scale-95",de?"bg-brand-primary/20 text-brand-primary":"bg-gray-700/50 text-white hover:bg-gray-600"),title:"Soundboard",children:d.jsx(jy,{size:22})}),de&&d.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-3 w-64 bg-gray-900/95 backdrop-blur-md border border-gray-700 rounded-xl shadow-2xl p-4 animate-fade-in-up z-50",children:[d.jsxs("h4",{className:"text-white text-sm font-semibold mb-3 flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(jy,{className:"text-brand-primary"}),"Soundboard"]}),d.jsxs("span",{className:"text-[10px] text-gray-400",children:[V.length,"/10"]})]}),d.jsxs("div",{className:"flex flex-col gap-1 mb-3 max-h-48 overflow-y-auto custom-scrollbar",children:[V.length===0&&d.jsx("div",{className:"text-center text-gray-500 text-xs py-4 italic",children:"No sounds added yet."}),V.map(pe=>d.jsxs("div",{className:"relative group flex items-center gap-2",children:[d.jsxs("button",{onClick:()=>{He&&R(pe.id)},className:"flex-1 bg-gray-800 hover:bg-gray-700 text-white text-xs py-2 px-3 rounded-lg transition-colors border border-gray-700 hover:border-brand-primary flex items-center gap-3 active:scale-95",children:[d.jsx("span",{className:"text-sm",children:""}),d.jsx("span",{className:"text-xs font-medium truncate flex-1 text-left",children:pe.name})]}),d.jsx("button",{onClick:Ie=>{Ie.stopPropagation(),F(pe.id)},className:"bg-red-500/10 hover:bg-red-500 text-red-500 hover:text-white rounded-lg p-2 transition-colors opacity-0 group-hover:opacity-100",title:"Remove sound",children:d.jsx(ki,{size:14})})]},pe.id))]}),V.length<10&&d.jsxs("button",{onClick:()=>ve.current?.click(),className:"w-full py-2 border border-dashed border-gray-600 text-gray-400 rounded-lg hover:border-brand-primary hover:text-brand-primary transition-colors flex items-center justify-center gap-2 text-xs",children:[d.jsx(Kl,{size:14})," Add Sound (MP3/WAV)"]}),d.jsx("input",{type:"file",ref:ve,className:"hidden",accept:"audio/mp3,audio/wav,audio/mpeg",onChange:he}),!He&&d.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center rounded-xl p-4 text-center",children:d.jsxs("div",{children:[d.jsx("p",{className:"text-brand-primary font-bold mb-1",children:"Premium Only"}),d.jsx("p",{className:"text-white text-xs",children:"Unlock Soundboard with Premium!"})]})})]})]}),d.jsxs("div",{className:"relative",children:[d.jsx("button",{onClick:()=>Ae(!X),className:Ct("p-3 rounded-xl transition-all hover:scale-110 active:scale-95",X?"bg-brand-primary/20 text-brand-primary":"bg-gray-700/50 text-white hover:bg-gray-600"),title:"Audio/Video Settings",children:d.jsx(np,{size:22})}),X&&d.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-3 p-4 bg-gray-900/95 backdrop-blur-md rounded-xl border border-gray-700 shadow-xl w-64",children:d.jsxs("div",{className:"space-y-4",children:[d.jsx("h4",{className:"text-sm font-semibold text-white mb-3",children:"Device Settings"}),d.jsxs("div",{children:[d.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Microphone"}),d.jsx("select",{value:j,onChange:pe=>B(pe.target.value),className:"w-full bg-gray-800 text-white text-sm rounded-lg px-3 py-2 border border-gray-700 focus:border-brand-primary outline-none cursor-pointer",children:N.audioInputs.map(pe=>d.jsx("option",{value:pe.deviceId,children:pe.label||`Microphone ${pe.deviceId.slice(0,8)}...`},pe.deviceId))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Camera"}),d.jsx("select",{value:k,onChange:pe=>$(pe.target.value),className:"w-full bg-gray-800 text-white text-sm rounded-lg px-3 py-2 border border-gray-700 focus:border-brand-primary outline-none cursor-pointer",children:N.videoInputs.map(pe=>d.jsx("option",{value:pe.deviceId,children:pe.label||`Camera ${pe.deviceId.slice(0,8)}...`},pe.deviceId))})]}),d.jsx("p",{className:"text-[10px] text-gray-500 mt-2",children:"Changes apply on next call"})]})})]}),d.jsx("div",{className:"w-px h-8 bg-gray-700 mx-2"}),d.jsx("button",{onClick:()=>a(!0),className:"p-3 rounded-xl bg-red-600 text-white hover:bg-red-700 transition-all hover:scale-110 active:scale-95 shadow-lg shadow-red-900/20",title:"End Call",children:d.jsx(M0,{size:24})})]}),M&&d.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 flex justify-center gap-2 bg-gradient-to-t from-black/90 to-transparent opacity-0 group-hover:opacity-100 transition-opacity z-50",children:[d.jsx("button",{onMouseDown:pe=>pe.stopPropagation(),onClick:h,className:Ct("p-1.5 rounded-full text-white hover:bg-white/20",g&&"bg-red-500/50 text-red-100"),title:"Mute",children:g?d.jsx(Ny,{size:16}):d.jsx(sd,{size:16})}),d.jsx("button",{onMouseDown:pe=>pe.stopPropagation(),onClick:m,className:Ct("p-1.5 rounded-full text-white hover:bg-white/20",v&&"bg-red-500/50 text-red-100"),title:"Camera",children:v?d.jsx(Ry,{size:16}):d.jsx(id,{size:16})}),d.jsx("button",{onMouseDown:pe=>pe.stopPropagation(),onClick:()=>Ee(xe===0?100:0),className:Ct("p-1.5 rounded-full text-white hover:bg-white/20",xe===0&&"bg-red-500/50 text-red-100"),title:"Volume Toggle",children:xe===0?d.jsx(tE,{size:16}):d.jsx(nE,{size:16})}),d.jsx("button",{onMouseDown:pe=>pe.stopPropagation(),onClick:()=>a(!0),className:"p-1.5 rounded-full bg-red-600/80 text-white hover:bg-red-600",title:"End Call",children:d.jsx(M0,{size:16})})]}),X&&d.jsx(fz,{isOpen:X,onClose:()=>Ae(!1)}),d.jsx(hz,{isOpen:ee,onClose:()=>ae(!1),onConfirm:pe=>C(pe)})]})})},Dz=()=>{const t=I.useRef(null),{localStream:e,isMuted:n,isVideoOff:r}=jd(),a=I.useRef(null);return I.useEffect(()=>{a.current&&e&&(a.current.srcObject=e)},[e]),d.jsx(fA,{bounds:"parent",nodeRef:t,children:d.jsxs("div",{ref:t,className:"absolute bottom-24 right-4 w-48 h-36 bg-gray-800 rounded-lg overflow-hidden shadow-lg border border-gray-700 cursor-move hover:scale-105 transition-transform z-50",children:[d.jsx("video",{ref:a,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),d.jsxs("div",{className:"absolute bottom-2 left-2 flex gap-1",children:[n&&d.jsx("div",{className:"bg-red-500/80 p-1 rounded",children:d.jsx(Ny,{size:12,className:"text-white"})}),r&&d.jsx("div",{className:"bg-red-500/80 p-1 rounded",children:d.jsx(Ry,{size:12,className:"text-white"})})]})]})})},Mz=()=>{const{currentUser:t,logout:e,resendVerification:n}=nr(),[r,a]=I.useState(!1),[l,c]=I.useState(""),h=async()=>{a(!0);try{await n(),c("Verification email sent! Check your inbox.")}catch(g){c("Error sending email: "+g.message)}finally{a(!1)}},m=async()=>{a(!0);try{await t.reload(),t.emailVerified?window.location.reload():c("Email is not verified yet. Please check your inbox.")}catch(g){console.error(g)}finally{a(!1)}};return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-bg p-4",children:d.jsxs("div",{className:"w-full max-w-md bg-dark-sidebar rounded-lg shadow-2xl p-8 text-center space-y-6",children:[d.jsx("div",{className:"bg-brand-primary/10 w-16 h-16 rounded-full flex items-center justify-center mx-auto text-3xl",children:""}),d.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Verify Your Email"}),d.jsxs("p",{className:"text-dark-muted",children:["We've sent a verification email to ",d.jsx("br",{}),d.jsx("span",{className:"font-semibold text-white",children:t?.email})]}),d.jsxs("div",{className:"bg-yellow-500/10 text-yellow-500 p-3 rounded-md text-sm",children:[" Please check your ",d.jsx("b",{children:"Spam/Junk"})," folder if you don't see the email in your inbox."]}),d.jsx("p",{className:"text-sm text-dark-muted",children:"You must verify your email address to access Lumo. To prevent spam, unverified accounts are restricted."}),l&&d.jsx("div",{className:"p-3 bg-brand-primary/20 text-brand-primary rounded-md text-sm",children:l}),d.jsxs("div",{className:"space-y-3 pt-4",children:[d.jsx(et,{onClick:m,className:"w-full",disabled:r,children:"I've Verified My Email"}),d.jsx(et,{onClick:h,variant:"secondary",className:"w-full",disabled:r,children:"Resend Verification Email"}),d.jsx("button",{onClick:e,className:"text-sm text-dark-muted hover:text-dark-text underline mt-4",children:"Logout"})]})]})})},Pz=({dmId:t,dms:e})=>{const{currentUser:n,userProfile:r}=nr(),{users:a}=Rd(),{startCall:l}=jd(),[c,h]=I.useState(null),[m,g]=I.useState(null),[v,b]=I.useState([]),_=e.find(j=>j.id===t),C=_?.participants.find(j=>j!==n?.uid);I.useEffect(()=>{(async()=>{if(C)try{const k=await tp(Oe(we,"users",C));k.exists()&&h({id:k.id,...k.data()})}catch(k){console.error("Error fetching DM user:",k)}})()},[C]);const N=I.useMemo(()=>[{id:n.uid,displayName:n.displayName||r?.displayName||"User",photoUrl:n.photoURL||r?.photoUrl,role:r?.role},c].filter(Boolean),[n,r,c]);return _?d.jsxs("div",{className:"flex-1 flex flex-col h-full bg-dark-bg",children:[d.jsxs("div",{className:"h-12 px-4 flex items-center justify-between border-b border-dark-hover shadow-sm bg-dark-bg",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"relative",children:c?.photoUrl?d.jsx("img",{src:c.photoUrl,alt:c.displayName,className:"w-8 h-8 rounded-full object-cover"}):d.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white text-sm font-bold",children:c?.displayName?.[0]?.toUpperCase()||"?"})}),d.jsx("span",{className:"font-semibold text-dark-text",children:c?.displayName||"Loading..."})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("button",{onClick:()=>l(c,"voice"),className:"text-dark-muted hover:text-dark-text transition-colors p-1 rounded hover:bg-dark-hover",title:"Start Voice Call",disabled:!c,children:d.jsx(hM,{size:22})}),d.jsx("button",{onClick:()=>l(c,"video"),className:"text-dark-muted hover:text-dark-text transition-colors p-1 rounded hover:bg-dark-hover",title:"Start Video Call",disabled:!c,children:d.jsx(id,{size:22})}),d.jsx("div",{className:"w-px h-6 bg-dark-hover mx-1"}),d.jsx(cA,{messages:v,users:N,onResultClick:j=>document.getElementById(`message-${j.id}`)?.scrollIntoView({behavior:"smooth",block:"center"})})]})]}),d.jsx(Dk,{serverId:null,channelId:t,users:N,currentUserId:n?.uid,userRole:r?.role,onReply:g,onMessagesChange:b}),d.jsx(lA,{serverId:null,channelId:t,channel:{id:t,name:c?.displayName},userId:n?.uid,userProfile:r,userRole:r?.role,users:N,replyingTo:m,onCancelReply:()=>g(null)})]}):d.jsx("div",{className:"flex-1 flex items-center justify-center text-dark-muted",children:"Select a conversation"})},Oz="lumo",Lz="1.6.6",Vz="module",Uz="electron/main.cjs",zz={dev:"vite",build:"vite build",lint:"eslint .",preview:"vite preview",predeploy:"npm run build",deploy:"gh-pages -d dist","electron:dev":'concurrently -k "npm run dev" "wait-on tcp:5173 && electron ."',"electron:build":"vite build && electron-builder","build:electron":"npm run electron:build"},Bz={"@capacitor/android":"^8.0.0","@capacitor/cli":"^8.0.0","@capacitor/core":"^8.0.0","@capacitor/push-notifications":"^8.0.0","@giphy/js-fetch-api":"^5.7.0","@giphy/react-components":"^10.1.0","@livekit/components-react":"^2.9.17","@livekit/components-styles":"^1.2.0",clsx:"^2.1.1","date-fns":"^4.1.0",dotenv:"^17.2.3","electron-log":"^5.4.3","electron-updater":"^6.6.2","emoji-picker-react":"^4.16.1",firebase:"^12.6.0","livekit-client":"^2.16.1","livekit-server-sdk":"^2.15.0",peerjs:"^1.5.5",react:"^19.2.3","react-color":"^2.19.3","react-dom":"^19.2.3","react-draggable":"^4.5.0","react-icons":"^5.5.0","react-router-dom":"^7.10.0","simple-peer":"^9.11.1","tailwind-merge":"^3.4.0"},Fz="Lumo - Modern Chat Application",Hz="Hasan",$z={appId:"com.hasan.lumo",productName:"Lumo",files:["dist/**/*","electron/**/*","public/**/*"],directories:{output:"dist"},win:{target:"nsis",icon:"public/lumo-logo.png",artifactName:"LumoSetup_win-${version}.${ext}"},mac:{target:"dmg",icon:"public/lumo-logo.png",category:"public.app-category.social-networking",extendInfo:{NSCameraUsageDescription:"Lumo needs access to your camera for video calls.",NSMicrophoneUsageDescription:"Lumo needs access to your microphone for voice and video calls.",NSScreenCaptureUsageDescription:"Lumo needs access to share your screen."},artifactName:"LumoSetup_mac-${version}.${ext}"},linux:{target:"AppImage",icon:"public/lumo-logo.png",category:"Network",artifactName:"LumoSetup_linux-${version}.${ext}"},publish:[{provider:"github",owner:"opsdazlakss",repo:"lumobuild"}]},qz={type:"git",url:"https://github.com/opsdazlakss/lumobuild.git"},Gz={"@eslint/js":"^9.39.1","@types/react":"^19.2.5","@types/react-dom":"^19.2.3","@vitejs/plugin-react":"^5.1.1",autoprefixer:"^10.4.22",concurrently:"^9.2.1",electron:"^39.2.6","electron-builder":"^26.0.12",eslint:"^9.39.1","eslint-plugin-react-hooks":"^7.0.1","eslint-plugin-react-refresh":"^0.4.24","gh-pages":"^6.3.0",globals:"^16.5.0",postcss:"^8.5.6",tailwindcss:"^3.4.18",vite:"^7.2.4","wait-on":"^9.0.3"},ey={name:Oz,private:!0,version:Lz,type:Vz,main:Uz,scripts:zz,dependencies:Bz,description:Fz,author:Hz,build:$z,repository:qz,devDependencies:Gz},Yz=({isOpen:t,onClose:e,version:n,downloadUrl:r,forceUpdate:a})=>d.jsx($s,{isOpen:t,onClose:a?()=>{}:e,title:"Update Available",size:"sm",children:d.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[d.jsx("div",{className:"w-16 h-16 bg-brand-primary/20 rounded-full flex items-center justify-center animate-bounce",children:d.jsx(MM,{size:32,className:"text-brand-primary"})}),d.jsxs("div",{children:[d.jsxs("h3",{className:"text-lg font-semibold text-white",children:["New Version ",n," Available!"]}),d.jsx("p",{className:"text-dark-muted text-sm mt-2",children:"A new version of Lumo is available. Please update to get the latest features and fixes."})]}),d.jsxs("div",{className:"w-full space-y-2 pt-2",children:[d.jsxs(et,{variant:"primary",className:"w-full flex items-center justify-center gap-2",onClick:()=>{window.open(r,"_system")},children:[d.jsx(vC,{size:20}),"Download Update"]}),!a&&d.jsx(et,{variant:"secondary",className:"w-full",onClick:e,children:"Update Later"})]})]})}),Kz=()=>{const{currentUser:t,userProfile:e,logout:n}=nr(),{users:r,channels:a,server:l,servers:c,currentServer:h,setCurrentServer:m,unreadMentions:g,dms:v}=Rd();TO(t?.uid);const[b,_]=I.useState(null),[C,N]=I.useState(null),[j,k]=I.useState(!1),[B,$]=I.useState(!1),[R,V]=I.useState(!1),[z,F]=I.useState(!1),[S,E]=I.useState(!1),A=PP({onSwipeLeft:()=>{if(z){F(!1);return}h!=="home"&&E(!0)},onSwipeRight:()=>{if(S){E(!1);return}F(!0)}}),[M,O]=I.useState(!1),[U,P]=I.useState(!1),[xe,Ee]=I.useState(null),[G,ne]=I.useState([]),[X,Ae]=I.useState(!1),[De,H]=I.useState(null),[ee,ae]=I.useState("idle");I.useEffect(()=>{if(!Mo.isNativePlatform())return;(async()=>{ae("checking");const Ce=Date.now();try{const He=Oe(we,"system","app_version"),Ge=await tp(He);let ve=!1,he=null;if(Ge.exists()){const oe=Ge.data(),pe=ey.version,Ie=oe.android;if(Ie&&Ie!==pe){const Q=pe.split(".").map(Number),le=Ie.split(".").map(Number);for(let ke=0;ke<Math.max(Q.length,le.length);ke++){const ie=Q[ke]||0,ge=le[ke]||0;if(ge>ie){ve=!0;break}else if(ge<ie)break}ve&&(he={version:Ie,downloadUrl:oe.downloadUrl,forceUpdate:oe.forceUpdate||!1})}}const $e=Date.now()-Ce;$e<1500&&await new Promise(oe=>setTimeout(oe,1500-$e)),ve?(H(he),ae("available"),Ae(!0)):(ae("uptodate"),setTimeout(()=>{ae("idle")},1500))}catch(He){console.error("Failed to check for updates:",He),ae("idle")}})()},[]),I.useEffect(()=>{!t||!h||!g||g[h]?.count>0&&tt(Oe(we,"users",t.uid),{[`unreadMentions.${h}`]:hD()}).catch(_e=>{console.error("Error clearing unread mentions:",_e)})},[h,t,g]),I.useEffect(()=>{const _e=()=>{window.innerWidth<768&&!b&&!C&&F(!0)};return window.innerWidth<768&&F(!0),window.addEventListener("resize",_e),()=>window.removeEventListener("resize",_e)},[b,C]),I.useEffect(()=>{a.length>0?_(a[0]):_(null)},[h,a]);const de=async _e=>{if(m(_e),t)try{await tt(Oe(we,"users",t.uid),{currentServer:_e})}catch(Ce){console.error("Failed to persist server selection:",Ce)}},je=async _e=>{if(!t||!_e)return;const Ce=v.find(He=>He.participants.includes(_e.id)&&He.participants.includes(t.uid));if(Ce)N(Ce),de("home");else try{const He=await cn(dt(we,"dms"),{participants:[t.uid,_e.id],createdAt:ft(),updatedAt:ft(),lastMessage:null});de("home")}catch(He){console.error("Error creating DM:",He)}};return t&&!t.emailVerified?d.jsx(Mz,{}):d.jsx(mO,{children:d.jsxs("div",{className:"flex h-screen bg-dark-bg overflow-hidden",...A,children:[d.jsxs("div",{className:"hidden md:flex h-full",children:[d.jsx(kE,{servers:c,currentServerId:h,onServerChange:de,onCreateServer:()=>O(!0),onJoinServer:()=>P(!0),userRole:e?.role,userId:t?.uid,unreadMentions:g}),d.jsx(CE,{server:l,channels:a,selectedChannel:b,onSelectChannel:_,onOpenSettings:()=>k(!0),onOpenAdmin:()=>$(!0),onLogout:n,userProfile:e,serverId:h,userRole:e?.role,userId:t?.uid,dms:v,selectedDm:C,onSelectDm:N})]}),z&&d.jsxs("div",{className:"fixed inset-0 z-50 flex md:hidden",children:[d.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>F(!1)}),d.jsxs("div",{className:"relative flex h-full animate-slide-in-left",children:[d.jsx(kE,{servers:c,currentServerId:h,onServerChange:_e=>{de(_e)},onCreateServer:()=>O(!0),onJoinServer:()=>P(!0),userRole:e?.role,userId:t?.uid,unreadMentions:g}),d.jsx(CE,{server:l,channels:a,selectedChannel:b,onSelectChannel:_e=>{_(_e),F(!1)},onOpenSettings:()=>{k(!0),F(!1)},onOpenAdmin:()=>{$(!0),F(!1)},onLogout:n,userProfile:e,serverId:h,userRole:e?.role,userId:t?.uid,dms:v,selectedDm:C,onSelectDm:_e=>{N(_e),F(!1)}}),d.jsx("button",{onClick:()=>F(!1),className:"absolute top-2 right-2 p-2 bg-dark-bg/50 rounded-full text-white md:hidden",style:{right:"-3rem"},children:d.jsx(On,{size:24})})]})]}),d.jsx("div",{className:"flex-1 flex flex-col",children:h==="home"?C?d.jsx(Pz,{dmId:C.id,dms:v}):d.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-dark-muted relative",children:[d.jsx("button",{onClick:()=>F(!0),className:"absolute top-4 left-4 md:hidden p-2 text-dark-muted hover:text-dark-text",children:d.jsx(sE,{size:32})}),d.jsxs("div",{className:"text-center",children:[d.jsx("p",{className:"mb-2 text-lg",children:" Welcome!"}),d.jsx("p",{children:"Select a conversation to start chatting"})]})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"h-12 px-4 flex items-center justify-between border-b border-dark-hover shadow-sm bg-dark-bg",children:[d.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[d.jsx("button",{onClick:()=>F(!0),className:"md:hidden p-1 mr-1 text-dark-muted hover:text-dark-text",children:d.jsx(sE,{size:24})}),d.jsx(sp,{className:"text-dark-muted flex-shrink-0"}),d.jsxs("h2",{className:"font-semibold text-dark-text flex items-center min-w-0",children:[d.jsx("span",{className:"truncate",children:b?.name||"Select a channel"}),b?.description&&d.jsx("span",{className:"hidden md:block ml-4 text-sm text-dark-muted font-normal border-l border-dark-muted/30 pl-4 truncate max-w-md",children:b.description})]})]}),d.jsx("div",{className:"flex items-center gap-3",children:b&&d.jsxs(d.Fragment,{children:[G.filter(_e=>_e.pinned).length>0&&d.jsxs("button",{onClick:()=>V(!R),className:`hidden sm:flex items-center gap-2 px-3 py-1.5 rounded transition-colors ${R?"bg-brand-primary text-white":"bg-dark-hover text-dark-text hover:bg-dark-input"}`,children:[d.jsx(Ql,{size:16}),d.jsxs("span",{className:"text-sm font-medium",children:[G.filter(_e=>_e.pinned).length," Pinned"]})]}),d.jsx("div",{className:"hidden sm:block",children:d.jsx(cA,{messages:G,users:r,onResultClick:_e=>console.log("Scroll to:",_e)})}),h!=="home"&&d.jsx("button",{onClick:()=>E(!0),className:"lg:hidden p-2 text-dark-muted hover:text-dark-text",children:d.jsx(ub,{size:24})})]})})]}),b?d.jsxs(d.Fragment,{children:[d.jsx(Dk,{serverId:h,channelId:b.id,users:r,currentUserId:t?.uid,userRole:e?.role,onReply:Ee,onMessagesChange:ne}),d.jsx(lA,{serverId:h,channelId:b.id,channel:b,userId:t?.uid,userProfile:e,userRole:e?.role,users:r,replyingTo:xe,onCancelReply:()=>Ee(null)})]}):d.jsx("div",{className:"flex-1 flex items-center justify-center text-dark-muted",children:"Select a channel to start chatting"})]})}),d.jsx("div",{className:"hidden lg:block h-full",children:h!=="home"&&d.jsx(AE,{users:r,currentUserId:t?.uid,onStartDm:je})}),S&&h!=="home"&&d.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end lg:hidden",children:[d.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>E(!1)}),d.jsxs("div",{className:"relative h-full bg-dark-sidebar shadow-xl w-64 animate-slide-in-right",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-hover",children:[d.jsx("h3",{className:"font-semibold text-dark-text",children:"Members"}),d.jsx("button",{onClick:()=>E(!1),children:d.jsx(On,{size:24,className:"text-dark-muted"})})]}),d.jsx("div",{className:"h-[calc(100%-60px)]",children:d.jsx(AE,{users:r,currentUserId:t?.uid,onStartDm:_e=>{je(_e),E(!1)}})})]})]}),R&&b&&d.jsx(ez,{messages:G,users:r,onClose:()=>V(!1),onJumpToMessage:_e=>{const Ce=document.getElementById(`message-${_e}`);Ce&&(Ce.scrollIntoView({behavior:"smooth",block:"center"}),Ce.classList.add("bg-brand-primary/10"),setTimeout(()=>{Ce.classList.remove("bg-brand-primary/10")},2e3)),V(!1)}}),d.jsx(Iz,{}),d.jsx(az,{isOpen:j,onClose:()=>k(!1),onOpenAdmin:()=>$(!0)}),d.jsx(cz,{isOpen:B,onClose:()=>$(!1)}),d.jsx(uz,{isOpen:M,onClose:()=>O(!1),userId:t?.uid,onSuccess:_e=>m(_e)}),d.jsx(dz,{isOpen:U,onClose:()=>P(!1),userId:t?.uid,onSuccess:_e=>m(_e)}),X&&d.jsx(Yz,{isOpen:X,onClose:()=>!De?.forceUpdate&&Ae(!1),version:De?.version,downloadUrl:De?.downloadUrl,forceUpdate:De?.forceUpdate}),["checking","uptodate"].includes(ee)&&d.jsxs("div",{className:"fixed inset-0 z-[60] bg-dark-bg flex flex-col items-center justify-center text-white transition-opacity duration-300",children:[ee==="checking"&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-brand-primary mb-6"}),d.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Checking for updates..."}),d.jsxs("p",{className:"text-dark-muted font-mono text-sm",children:["v",ey.version]})]}),ee==="uptodate"&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"rounded-full bg-green-500/20 p-4 mb-6",children:d.jsx(vC,{size:48,className:"text-green-500"})}),d.jsx("h2",{className:"text-xl font-semibold mb-2 text-green-400",children:"You are up to date!"}),d.jsxs("p",{className:"text-dark-muted font-mono text-sm",children:["v",ey.version]})]})]})]})})},ya=yp("PushNotifications",{}),Qz={initialize:async t=>{if(!Mo.isNativePlatform()){console.log("Push notifications not supported on web/PWA");return}let e=await ya.checkPermissions();if(e.receive==="prompt"&&(e=await ya.requestPermissions()),e.receive!=="granted"){console.error("User denied permissions!");return}await ya.register(),ya.addListener("registration",async n=>{if(console.log("Push Registration Token:",n.value),t)try{const r=Oe(we,"users",t);await tt(r,{fcmTokens:Nd(n.value)}),console.log("FCM token saved to Firestore")}catch(r){console.error("Error saving FCM token to Firestore:",r)}}),ya.addListener("registrationError",n=>{console.error("Error on registration:",n)}),ya.addListener("pushNotificationReceived",n=>{console.log("Push notification received: ",n)}),ya.addListener("pushNotificationActionPerformed",n=>{console.log("Push notification action performed",n.actionId,n.inputValue)})},cleanup:async()=>{Mo.isNativePlatform()&&await ya.removeAllListeners()}};class Xz extends fe.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n),this.setState({errorInfo:n})}render(){return this.state.hasError?d.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-8 flex flex-col items-center justify-center text-center",children:[d.jsx("h1",{className:"text-2xl font-bold text-red-500 mb-4",children:"Something went wrong"}),d.jsxs("div",{className:"bg-gray-800 p-4 rounded overflow-auto max-w-full text-left font-mono text-xs",children:[d.jsx("p",{className:"font-bold text-yellow-400 mb-2",children:this.state.error&&this.state.error.toString()}),d.jsx("pre",{className:"text-gray-400 whitespace-pre-wrap",children:this.state.errorInfo&&this.state.errorInfo.componentStack})]}),d.jsx("button",{className:"mt-6 px-4 py-2 bg-blue-600 rounded hover:bg-blue-700",onClick:()=>window.location.reload(),children:"Reload App"})]}):this.props.children}}function Wz(){const{currentUser:t,userProfile:e,loading:n}=nr(),[r,a]=I.useState("login");return n?d.jsx("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center",children:d.jsx("div",{className:"text-dark-text text-xl",children:"Loading..."})}):t&&e?.isBanned?d.jsx("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-dark-sidebar p-8 rounded-xl max-w-md w-full text-center border border-admin",children:[d.jsx("div",{className:"text-6xl mb-4",children:""}),d.jsx("h1",{className:"text-2xl font-bold text-dark-text mb-2",children:"Account Banned"}),d.jsx("p",{className:"text-dark-muted mb-6",children:"Your account has been banned from this server. Please contact an administrator if you believe this is a mistake."}),d.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-hover transition-colors",children:"Refresh"})]})}):t?d.jsx(GD,{children:d.jsx(Kz,{})}):d.jsxs(d.Fragment,{children:[r==="login"&&d.jsx(IP,{onSwitchToRegister:()=>a("register"),onSwitchToReset:()=>a("reset")}),r==="register"&&d.jsx(DP,{onSwitchToLogin:()=>a("login")}),r==="reset"&&d.jsx(MP,{onSwitchToLogin:()=>a("login")})]})}function Jz(){return d.jsx(UM,{children:d.jsx(Xz,{children:d.jsx(HD,{children:d.jsx(Zz,{children:d.jsx(Wz,{})})})})})}const Zz=({children:t})=>{const{currentUser:e}=nr();return I.useEffect(()=>{Qz.initialize(e?.uid)},[e]),t};eR.createRoot(document.getElementById("root")).render(d.jsx(I.StrictMode,{children:d.jsx(Jz,{})}));
