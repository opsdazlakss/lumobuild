function HR(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in n)){const l=Object.getOwnPropertyDescriptor(r,a);l&&Object.defineProperty(n,a,l.get?l:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function ud(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function $R(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){var a=!1;try{a=this instanceof r}catch{}return a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var a=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,a.get?a:{enumerable:!0,get:function(){return n[r]}})}),t}var my={exports:{}},vu={};var o2;function qR(){if(o2)return vu;o2=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:n,type:r,key:c,ref:a!==void 0?a:null,props:l}}return vu.Fragment=e,vu.jsx=t,vu.jsxs=t,vu}var l2;function GR(){return l2||(l2=1,my.exports=qR()),my.exports}var d=GR(),py={exports:{}},et={};var c2;function YR(){if(c2)return et;c2=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),_=Symbol.iterator;function C(H){return H===null||typeof H!="object"?null:(H=_&&H[_]||H["@@iterator"],typeof H=="function"?H:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,k={};function B(H,q,re){this.props=H,this.context=q,this.refs=k,this.updater=re||R}B.prototype.isReactComponent={},B.prototype.setState=function(H,q){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,q,"setState")},B.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function $(){}$.prototype=B.prototype;function N(H,q,re){this.props=H,this.context=q,this.refs=k,this.updater=re||R}var V=N.prototype=new $;V.constructor=N,I(V,B.prototype),V.isPureReactComponent=!0;var z=Array.isArray;function F(){}var E={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function A(H,q,re){var ne=re.ref;return{$$typeof:n,type:H,key:q,ref:ne!==void 0?ne:null,props:re}}function D(H,q){return A(H.type,q,H.props)}function M(H){return typeof H=="object"&&H!==null&&H.$$typeof===n}function U(H){var q={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(re){return q[re]})}var P=/\/+/g;function xe(H,q){return typeof H=="object"&&H!==null&&H.key!=null?U(""+H.key):q.toString(36)}function Ee(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(F,F):(H.status="pending",H.then(function(q){H.status==="pending"&&(H.status="fulfilled",H.value=q)},function(q){H.status==="pending"&&(H.status="rejected",H.reason=q)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function Y(H,q,re,ne,we){var ye=typeof H;(ye==="undefined"||ye==="boolean")&&(H=null);var Te=!1;if(H===null)Te=!0;else switch(ye){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(H.$$typeof){case n:case e:Te=!0;break;case v:return Te=H._init,Y(Te(H._payload),q,re,ne,we)}}if(Te)return we=we(H),Te=ne===""?"."+xe(H,0):ne,z(we)?(re="",Te!=null&&(re=Te.replace(P,"$&/")+"/"),Y(we,q,re,"",function(be){return be})):we!=null&&(M(we)&&(we=D(we,re+(we.key==null||H&&H.key===we.key?"":(""+we.key).replace(P,"$&/")+"/")+Te)),q.push(we)),1;Te=0;var Fe=ne===""?".":ne+":";if(z(H))for(var Ye=0;Ye<H.length;Ye++)ne=H[Ye],ye=Fe+xe(ne,Ye),Te+=Y(ne,q,re,ye,we);else if(Ye=C(H),typeof Ye=="function")for(H=Ye.call(H),Ye=0;!(ne=H.next()).done;)ne=ne.value,ye=Fe+xe(ne,Ye++),Te+=Y(ne,q,re,ye,we);else if(ye==="object"){if(typeof H.then=="function")return Y(Ee(H),q,re,ne,we);throw q=String(H),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return Te}function se(H,q,re){if(H==null)return H;var ne=[],we=0;return Y(H,ne,"","",function(ye){return q.call(re,ye,we++)}),ne}function J(H){if(H._status===-1){var q=H._result;q=q(),q.then(function(re){(H._status===0||H._status===-1)&&(H._status=1,H._result=re)},function(re){(H._status===0||H._status===-1)&&(H._status=2,H._result=re)}),H._status===-1&&(H._status=0,H._result=q)}if(H._status===1)return H._result.default;throw H._result}var Ce=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},Ne={map:se,forEach:function(H,q,re){se(H,function(){q.apply(this,arguments)},re)},count:function(H){var q=0;return se(H,function(){q++}),q},toArray:function(H){return se(H,function(q){return q})||[]},only:function(H){if(!M(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return et.Activity=b,et.Children=Ne,et.Component=B,et.Fragment=t,et.Profiler=a,et.PureComponent=N,et.StrictMode=r,et.Suspense=m,et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,et.__COMPILER_RUNTIME={__proto__:null,c:function(H){return E.H.useMemoCache(H)}},et.cache=function(H){return function(){return H.apply(null,arguments)}},et.cacheSignal=function(){return null},et.cloneElement=function(H,q,re){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var ne=I({},H.props),we=H.key;if(q!=null)for(ye in q.key!==void 0&&(we=""+q.key),q)!S.call(q,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&q.ref===void 0||(ne[ye]=q[ye]);var ye=arguments.length-2;if(ye===1)ne.children=re;else if(1<ye){for(var Te=Array(ye),Fe=0;Fe<ye;Fe++)Te[Fe]=arguments[Fe+2];ne.children=Te}return A(H.type,we,ne)},et.createContext=function(H){return H={$$typeof:c,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:l,_context:H},H},et.createElement=function(H,q,re){var ne,we={},ye=null;if(q!=null)for(ne in q.key!==void 0&&(ye=""+q.key),q)S.call(q,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(we[ne]=q[ne]);var Te=arguments.length-2;if(Te===1)we.children=re;else if(1<Te){for(var Fe=Array(Te),Ye=0;Ye<Te;Ye++)Fe[Ye]=arguments[Ye+2];we.children=Fe}if(H&&H.defaultProps)for(ne in Te=H.defaultProps,Te)we[ne]===void 0&&(we[ne]=Te[ne]);return A(H,ye,we)},et.createRef=function(){return{current:null}},et.forwardRef=function(H){return{$$typeof:h,render:H}},et.isValidElement=M,et.lazy=function(H){return{$$typeof:v,_payload:{_status:-1,_result:H},_init:J}},et.memo=function(H,q){return{$$typeof:g,type:H,compare:q===void 0?null:q}},et.startTransition=function(H){var q=E.T,re={};E.T=re;try{var ne=H(),we=E.S;we!==null&&we(re,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(F,Ce)}catch(ye){Ce(ye)}finally{q!==null&&re.types!==null&&(q.types=re.types),E.T=q}},et.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},et.use=function(H){return E.H.use(H)},et.useActionState=function(H,q,re){return E.H.useActionState(H,q,re)},et.useCallback=function(H,q){return E.H.useCallback(H,q)},et.useContext=function(H){return E.H.useContext(H)},et.useDebugValue=function(){},et.useDeferredValue=function(H,q){return E.H.useDeferredValue(H,q)},et.useEffect=function(H,q){return E.H.useEffect(H,q)},et.useEffectEvent=function(H){return E.H.useEffectEvent(H)},et.useId=function(){return E.H.useId()},et.useImperativeHandle=function(H,q,re){return E.H.useImperativeHandle(H,q,re)},et.useInsertionEffect=function(H,q){return E.H.useInsertionEffect(H,q)},et.useLayoutEffect=function(H,q){return E.H.useLayoutEffect(H,q)},et.useMemo=function(H,q){return E.H.useMemo(H,q)},et.useOptimistic=function(H,q){return E.H.useOptimistic(H,q)},et.useReducer=function(H,q,re){return E.H.useReducer(H,q,re)},et.useRef=function(H){return E.H.useRef(H)},et.useState=function(H){return E.H.useState(H)},et.useSyncExternalStore=function(H,q,re){return E.H.useSyncExternalStore(H,q,re)},et.useTransition=function(){return E.H.useTransition()},et.version="19.2.0",et}var u2;function ja(){return u2||(u2=1,py.exports=YR()),py.exports}var O=ja();const de=ud(O);var gy={exports:{}},bu={},yy={exports:{}},vy={};var d2;function KR(){return d2||(d2=1,(function(n){function e(Y,se){var J=Y.length;Y.push(se);e:for(;0<J;){var Ce=J-1>>>1,Ne=Y[Ce];if(0<a(Ne,se))Y[Ce]=se,Y[J]=Ne,J=Ce;else break e}}function t(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var se=Y[0],J=Y.pop();if(J!==se){Y[0]=J;e:for(var Ce=0,Ne=Y.length,H=Ne>>>1;Ce<H;){var q=2*(Ce+1)-1,re=Y[q],ne=q+1,we=Y[ne];if(0>a(re,J))ne<Ne&&0>a(we,re)?(Y[Ce]=we,Y[ne]=J,Ce=ne):(Y[Ce]=re,Y[q]=J,Ce=q);else if(ne<Ne&&0>a(we,J))Y[Ce]=we,Y[ne]=J,Ce=ne;else break e}}return se}function a(Y,se){var J=Y.sortIndex-se.sortIndex;return J!==0?J:Y.id-se.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var m=[],g=[],v=1,b=null,_=3,C=!1,R=!1,I=!1,k=!1,B=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function V(Y){for(var se=t(g);se!==null;){if(se.callback===null)r(g);else if(se.startTime<=Y)r(g),se.sortIndex=se.expirationTime,e(m,se);else break;se=t(g)}}function z(Y){if(I=!1,V(Y),!R)if(t(m)!==null)R=!0,F||(F=!0,U());else{var se=t(g);se!==null&&Ee(z,se.startTime-Y)}}var F=!1,E=-1,S=5,A=-1;function D(){return k?!0:!(n.unstable_now()-A<S)}function M(){if(k=!1,F){var Y=n.unstable_now();A=Y;var se=!0;try{e:{R=!1,I&&(I=!1,$(E),E=-1),C=!0;var J=_;try{t:{for(V(Y),b=t(m);b!==null&&!(b.expirationTime>Y&&D());){var Ce=b.callback;if(typeof Ce=="function"){b.callback=null,_=b.priorityLevel;var Ne=Ce(b.expirationTime<=Y);if(Y=n.unstable_now(),typeof Ne=="function"){b.callback=Ne,V(Y),se=!0;break t}b===t(m)&&r(m),V(Y)}else r(m);b=t(m)}if(b!==null)se=!0;else{var H=t(g);H!==null&&Ee(z,H.startTime-Y),se=!1}}break e}finally{b=null,_=J,C=!1}se=void 0}}finally{se?U():F=!1}}}var U;if(typeof N=="function")U=function(){N(M)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,xe=P.port2;P.port1.onmessage=M,U=function(){xe.postMessage(null)}}else U=function(){B(M,0)};function Ee(Y,se){E=B(function(){Y(n.unstable_now())},se)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(Y){switch(_){case 1:case 2:case 3:var se=3;break;default:se=_}var J=_;_=se;try{return Y()}finally{_=J}},n.unstable_requestPaint=function(){k=!0},n.unstable_runWithPriority=function(Y,se){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var J=_;_=Y;try{return se()}finally{_=J}},n.unstable_scheduleCallback=function(Y,se,J){var Ce=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?Ce+J:Ce):J=Ce,Y){case 1:var Ne=-1;break;case 2:Ne=250;break;case 5:Ne=1073741823;break;case 4:Ne=1e4;break;default:Ne=5e3}return Ne=J+Ne,Y={id:v++,callback:se,priorityLevel:Y,startTime:J,expirationTime:Ne,sortIndex:-1},J>Ce?(Y.sortIndex=J,e(g,Y),t(m)===null&&Y===t(g)&&(I?($(E),E=-1):I=!0,Ee(z,J-Ce))):(Y.sortIndex=Ne,e(m,Y),R||C||(R=!0,F||(F=!0,U()))),Y},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(Y){var se=_;return function(){var J=_;_=se;try{return Y.apply(this,arguments)}finally{_=J}}}})(vy)),vy}var h2;function QR(){return h2||(h2=1,yy.exports=KR()),yy.exports}var by={exports:{}},Bn={};var f2;function XR(){if(f2)return Bn;f2=1;var n=ja();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,g,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:m,containerInfo:g,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Bn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Bn.createPortal=function(m,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(m,g,null,v)},Bn.flushSync=function(m){var g=c.T,v=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=g,r.p=v,r.d.f()}},Bn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(m,g))},Bn.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},Bn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var v=g.as,b=h(v,g.crossOrigin),_=typeof g.integrity=="string"?g.integrity:void 0,C=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?r.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:_,fetchPriority:C}):v==="script"&&r.d.X(m,{crossOrigin:b,integrity:_,fetchPriority:C,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Bn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=h(g.as,g.crossOrigin);r.d.M(m,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(m)},Bn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,b=h(v,g.crossOrigin);r.d.L(m,v,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Bn.preloadModule=function(m,g){if(typeof m=="string")if(g){var v=h(g.as,g.crossOrigin);r.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(m)},Bn.requestFormReset=function(m){r.d.r(m)},Bn.unstable_batchedUpdates=function(m,g){return m(g)},Bn.useFormState=function(m,g,v){return c.H.useFormState(m,g,v)},Bn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Bn.version="19.2.0",Bn}var m2;function iv(){if(m2)return by.exports;m2=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),by.exports=XR(),by.exports}var p2;function WR(){if(p2)return bu;p2=1;var n=QR(),e=ja(),t=iv();function r(s){var i="https://react.dev/errors/"+s;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var i=s,o=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(o=i.return),s=i.return;while(s)}return i.tag===3?o:null}function c(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function h(s){if(s.tag===31){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function m(s){if(l(s)!==s)throw Error(r(188))}function g(s){var i=s.alternate;if(!i){if(i=l(s),i===null)throw Error(r(188));return i!==s?null:s}for(var o=s,u=i;;){var p=o.return;if(p===null)break;var y=p.alternate;if(y===null){if(u=p.return,u!==null){o=u;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===o)return m(p),s;if(y===u)return m(p),i;y=y.sibling}throw Error(r(188))}if(o.return!==u.return)o=p,u=y;else{for(var w=!1,j=p.child;j;){if(j===o){w=!0,o=p,u=y;break}if(j===u){w=!0,u=p,o=y;break}j=j.sibling}if(!w){for(j=y.child;j;){if(j===o){w=!0,o=y,u=p;break}if(j===u){w=!0,u=y,o=p;break}j=j.sibling}if(!w)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?s:i}function v(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s;for(s=s.child;s!==null;){if(i=v(s),i!==null)return i;s=s.sibling}return null}var b=Object.assign,_=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),N=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function U(s){return s===null||typeof s!="object"?null:(s=M&&s[M]||s["@@iterator"],typeof s=="function"?s:null)}var P=Symbol.for("react.client.reference");function xe(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===P?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case I:return"Fragment";case B:return"Profiler";case k:return"StrictMode";case z:return"Suspense";case F:return"SuspenseList";case A:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case R:return"Portal";case N:return s.displayName||"Context";case $:return(s._context.displayName||"Context")+".Consumer";case V:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case E:return i=s.displayName||null,i!==null?i:xe(s.type)||"Memo";case S:i=s._payload,s=s._init;try{return xe(s(i))}catch{}}return null}var Ee=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},Ce=[],Ne=-1;function H(s){return{current:s}}function q(s){0>Ne||(s.current=Ce[Ne],Ce[Ne]=null,Ne--)}function re(s,i){Ne++,Ce[Ne]=s.current,s.current=i}var ne=H(null),we=H(null),ye=H(null),Te=H(null);function Fe(s,i){switch(re(ye,i),re(we,s),re(ne,null),i.nodeType){case 9:case 11:s=(s=i.documentElement)&&(s=s.namespaceURI)?N_(s):0;break;default:if(s=i.tagName,i=i.namespaceURI)i=N_(i),s=I_(i,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}q(ne),re(ne,s)}function Ye(){q(ne),q(we),q(ye)}function be(s){s.memoizedState!==null&&re(Te,s);var i=ne.current,o=I_(i,s.type);i!==o&&(re(we,s),re(ne,o))}function he(s){we.current===s&&(q(ne),q(we)),Te.current===s&&(q(Te),mu._currentValue=J)}var _e,ae;function Re(s){if(_e===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);_e=i&&i[1]||"",ae=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_e+s+ae}var Ie=!1;function X(s,i){if(!s||Ie)return"";Ie=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(oe){var te=oe}Reflect.construct(s,[],me)}else{try{me.call()}catch(oe){te=oe}s.call(me.prototype)}}else{try{throw Error()}catch(oe){te=oe}(me=s())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(oe){if(oe&&te&&typeof oe.stack=="string")return[oe.stack,te.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),w=y[0],j=y[1];if(w&&j){var G=w.split(`
`),ee=j.split(`
`);for(p=u=0;u<G.length&&!G[u].includes("DetermineComponentFrameRoot");)u++;for(;p<ee.length&&!ee[p].includes("DetermineComponentFrameRoot");)p++;if(u===G.length||p===ee.length)for(u=G.length-1,p=ee.length-1;1<=u&&0<=p&&G[u]!==ee[p];)p--;for(;1<=u&&0<=p;u--,p--)if(G[u]!==ee[p]){if(u!==1||p!==1)do if(u--,p--,0>p||G[u]!==ee[p]){var ue=`
`+G[u].replace(" at new "," at ");return s.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",s.displayName)),ue}while(1<=u&&0<=p);break}}}finally{Ie=!1,Error.prepareStackTrace=o}return(o=s?s.displayName||s.name:"")?Re(o):""}function le(s,i){switch(s.tag){case 26:case 27:case 5:return Re(s.type);case 16:return Re("Lazy");case 13:return s.child!==i&&i!==null?Re("Suspense Fallback"):Re("Suspense");case 19:return Re("SuspenseList");case 0:case 15:return X(s.type,!1);case 11:return X(s.type.render,!1);case 1:return X(s.type,!0);case 31:return Re("Activity");default:return""}}function Se(s){try{var i="",o=null;do i+=le(s,o),o=s,s=s.return;while(s);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Oe=Object.prototype.hasOwnProperty,qe=n.unstable_scheduleCallback,Ke=n.unstable_cancelCallback,It=n.unstable_shouldYield,kt=n.unstable_requestPaint,ge=n.unstable_now,ze=n.unstable_getCurrentPriorityLevel,gt=n.unstable_ImmediatePriority,Ht=n.unstable_UserBlockingPriority,wn=n.unstable_NormalPriority,er=n.unstable_LowPriority,Yt=n.unstable_IdlePriority,Ai=n.log,Id=n.unstable_setDisableYieldValue,Fr=null,Rn=null;function kr(s){if(typeof Ai=="function"&&Id(s),Rn&&typeof Rn.setStrictMode=="function")try{Rn.setStrictMode(Fr,s)}catch{}}var Jt=Math.clz32?Math.clz32:Dd,jd=Math.log,zo=Math.LN2;function Dd(s){return s>>>=0,s===0?32:31-(jd(s)/zo|0)|0}var os=256,Pa=262144,sn=4194304;function ls(s){var i=s&42;if(i!==0)return i;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function cs(s,i,o){var u=s.pendingLanes;if(u===0)return 0;var p=0,y=s.suspendedLanes,w=s.pingedLanes;s=s.warmLanes;var j=u&134217727;return j!==0?(u=j&~y,u!==0?p=ls(u):(w&=j,w!==0?p=ls(w):o||(o=j&~s,o!==0&&(p=ls(o))))):(j=u&~y,j!==0?p=ls(j):w!==0?p=ls(w):o||(o=u&~s,o!==0&&(p=ls(o)))),p===0?0:i!==0&&i!==p&&(i&y)===0&&(y=p&-p,o=i&-i,y>=o||y===32&&(o&4194048)!==0)?i:p}function Hr(s,i){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&i)===0}function vp(s,i){switch(s){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Md(){var s=sn;return sn<<=1,(sn&62914560)===0&&(sn=4194304),s}function us(s){for(var i=[],o=0;31>o;o++)i.push(s);return i}function La(s,i){s.pendingLanes|=i,i!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function bp(s,i,o,u,p,y){var w=s.pendingLanes;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=o,s.entangledLanes&=o,s.errorRecoveryDisabledLanes&=o,s.shellSuspendCounter=0;var j=s.entanglements,G=s.expirationTimes,ee=s.hiddenUpdates;for(o=w&~o;0<o;){var ue=31-Jt(o),me=1<<ue;j[ue]=0,G[ue]=-1;var te=ee[ue];if(te!==null)for(ee[ue]=null,ue=0;ue<te.length;ue++){var oe=te[ue];oe!==null&&(oe.lane&=-536870913)}o&=~me}u!==0&&Va(s,u,0),y!==0&&p===0&&s.tag!==0&&(s.suspendedLanes|=y&~(w&~i))}function Va(s,i,o){s.pendingLanes|=i,s.suspendedLanes&=~i;var u=31-Jt(i);s.entangledLanes|=i,s.entanglements[u]=s.entanglements[u]|1073741824|o&261930}function bc(s,i){var o=s.entangledLanes|=i;for(s=s.entanglements;o;){var u=31-Jt(o),p=1<<u;p&i|s[u]&i&&(s[u]|=i),o&=~p}}function xc(s,i){var o=i&-i;return o=(o&42)!==0?1:Ua(o),(o&(s.suspendedLanes|i))!==0?0:o}function Ua(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ks(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Od(){var s=se.p;return s!==0?s:(s=window.event,s===void 0?32:e2(s.type))}function $r(s,i){var o=se.p;try{return se.p=s,i()}finally{se.p=o}}var qr=Math.random().toString(36).slice(2),an="__reactFiber$"+qr,En="__reactProps$"+qr,ds="__reactContainer$"+qr,Bo="__reactEvents$"+qr,xp="__reactListeners$"+qr,Pd="__reactHandles$"+qr,Ld="__reactResources$"+qr,hs="__reactMarker$"+qr;function Fo(s){delete s[an],delete s[En],delete s[Bo],delete s[xp],delete s[Pd]}function fs(s){var i=s[an];if(i)return i;for(var o=s.parentNode;o;){if(i=o[ds]||o[an]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(s=V_(s);s!==null;){if(o=s[an])return o;s=V_(s)}return i}s=o,o=s.parentNode}return null}function Ar(s){if(s=s[an]||s[ds]){var i=s.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return s}return null}function fr(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s.stateNode;throw Error(r(33))}function ms(s){var i=s[Ld];return i||(i=s[Ld]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function on(s){s[hs]=!0}var _c=new Set,wc={};function ps(s,i){gs(s,i),gs(s+"Capture",i)}function gs(s,i){for(wc[s]=i,s=0;s<i.length;s++)_c.add(i[s])}var Ec=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Sc={},Tc={};function Vd(s){return Oe.call(Tc,s)?!0:Oe.call(Sc,s)?!1:Ec.test(s)?Tc[s]=!0:(Sc[s]=!0,!1)}function Ho(s,i,o){if(Vd(i))if(o===null)s.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":s.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(i);return}}s.setAttribute(i,""+o)}}function mr(s,i,o){if(o===null)s.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(i);return}s.setAttribute(i,""+o)}}function ln(s,i,o,u){if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttributeNS(i,o,""+u)}}function Sn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ri(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Cc(s,i,o){var u=Object.getOwnPropertyDescriptor(s.constructor.prototype,i);if(!s.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,y=u.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return p.call(this)},set:function(w){o=""+w,y.call(this,w)}}),Object.defineProperty(s,i,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(w){o=""+w},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function At(s){if(!s._valueTracker){var i=Ri(s)?"checked":"value";s._valueTracker=Cc(s,i,""+s[i])}}function za(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return s&&(u=Ri(s)?s.checked?"true":"false":s.value),s=u,s!==o?(i.setValue(s),!0):!1}function ys(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Ba=/[\n"\\]/g;function tr(s){return s.replace(Ba,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function $o(s,i,o,u,p,y,w,j){s.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?s.type=w:s.removeAttribute("type"),i!=null?w==="number"?(i===0&&s.value===""||s.value!=i)&&(s.value=""+Sn(i)):s.value!==""+Sn(i)&&(s.value=""+Sn(i)):w!=="submit"&&w!=="reset"||s.removeAttribute("value"),i!=null?kc(s,w,Sn(i)):o!=null?kc(s,w,Sn(o)):u!=null&&s.removeAttribute("value"),p==null&&y!=null&&(s.defaultChecked=!!y),p!=null&&(s.checked=p&&typeof p!="function"&&typeof p!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?s.name=""+Sn(j):s.removeAttribute("name")}function Ud(s,i,o,u,p,y,w,j){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(s.type=y),i!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||i!=null)){At(s);return}o=o!=null?""+Sn(o):"",i=i!=null?""+Sn(i):o,j||i===s.value||(s.value=i),s.defaultValue=i}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=j?s.checked:!!u,s.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.name=w),At(s)}function kc(s,i,o){i==="number"&&ys(s.ownerDocument)===s||s.defaultValue===""+o||(s.defaultValue=""+o)}function Ni(s,i,o,u){if(s=s.options,i){i={};for(var p=0;p<o.length;p++)i["$"+o[p]]=!0;for(o=0;o<s.length;o++)p=i.hasOwnProperty("$"+s[o].value),s[o].selected!==p&&(s[o].selected=p),p&&u&&(s[o].defaultSelected=!0)}else{for(o=""+Sn(o),i=null,p=0;p<s.length;p++){if(s[p].value===o){s[p].selected=!0,u&&(s[p].defaultSelected=!0);return}i!==null||s[p].disabled||(i=s[p])}i!==null&&(i.selected=!0)}}function zd(s,i,o){if(i!=null&&(i=""+Sn(i),i!==s.value&&(s.value=i),o==null)){s.defaultValue!==i&&(s.defaultValue=i);return}s.defaultValue=o!=null?""+Sn(o):""}function Ii(s,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(r(92));if(Ee(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=Sn(i),s.defaultValue=o,u=s.textContent,u===o&&u!==""&&u!==null&&(s.value=u),At(s)}function nr(s,i){if(i){var o=s.firstChild;if(o&&o===s.lastChild&&o.nodeType===3){o.nodeValue=i;return}}s.textContent=i}var Bd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ac(s,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?s.setProperty(i,""):i==="float"?s.cssFloat="":s[i]="":u?s.setProperty(i,o):typeof o!="number"||o===0||Bd.has(i)?i==="float"?s.cssFloat=o:s[i]=(""+o).trim():s[i]=o+"px"}function Rc(s,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(s=s.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var p in i)u=i[p],i.hasOwnProperty(p)&&o[p]!==u&&Ac(s,p,u)}else for(var y in i)i.hasOwnProperty(y)&&Ac(s,y,i[y])}function qo(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ji=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Go(s){return ji.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Gr(){}var Nc=null;function Rr(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Di=null,vs=null;function Fa(s){var i=Ar(s);if(i&&(s=i.stateNode)){var o=s[En]||null;e:switch(s=i.stateNode,i.type){case"input":if($o(s,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=s;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+tr(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==s&&u.form===s.form){var p=u[En]||null;if(!p)throw Error(r(90));$o(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===s.form&&za(u)}break e;case"textarea":zd(s,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Ni(s,!!o.multiple,i,!1)}}}var Yo=!1;function Mi(s,i,o){if(Yo)return s(i,o);Yo=!0;try{var u=s(i);return u}finally{if(Yo=!1,(Di!==null||vs!==null)&&(Oh(),Di&&(i=Di,s=vs,vs=Di=null,Fa(i),s)))for(i=0;i<s.length;i++)Fa(s[i])}}function Yr(s,i){var o=s.stateNode;if(o===null)return null;var u=o[En]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break e;default:s=!1}if(s)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var Nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ha=!1;if(Nr)try{var jt={};Object.defineProperty(jt,"passive",{get:function(){Ha=!0}}),window.addEventListener("test",jt,jt),window.removeEventListener("test",jt,jt)}catch{Ha=!1}var bs=null,Ic=null,$a=null;function jc(){if($a)return $a;var s,i=Ic,o=i.length,u,p="value"in bs?bs.value:bs.textContent,y=p.length;for(s=0;s<o&&i[s]===p[s];s++);var w=o-s;for(u=1;u<=w&&i[o-u]===p[y-u];u++);return $a=p.slice(s,1<u?1-u:void 0)}function qa(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function Qs(){return!0}function Kr(){return!1}function Nn(s){function i(o,u,p,y,w){this._reactName=o,this._targetInst=p,this.type=u,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var j in s)s.hasOwnProperty(j)&&(o=s[j],this[j]=o?o(y):y[j]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Qs:Kr,this.isPropagationStopped=Kr,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Qs)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Qs)},persist:function(){},isPersistent:Qs}),i}var Xs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xs=Nn(Xs),Oi=b({},Xs,{view:0,detail:0}),Dc=Nn(Oi),Pi,Ko,_s,Qo=b({},Oi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Li,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==_s&&(_s&&s.type==="mousemove"?(Pi=s.screenX-_s.screenX,Ko=s.screenY-_s.screenY):Ko=Pi=0,_s=s),Pi)},movementY:function(s){return"movementY"in s?s.movementY:Ko}}),Mc=Nn(Qo),Ga=b({},Qo,{dataTransfer:0}),Hd=Nn(Ga),$d=b({},Oi,{relatedTarget:0}),Ya=Nn($d),Oc=b({},Xs,{animationName:0,elapsedTime:0,pseudoElement:0}),qd=Nn(Oc),Xo=b({},Xs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Gd=Nn(Xo),Yd=b({},Xs,{data:0}),ws=Nn(Yd),Kd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wd(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=Xd[s])?!!i[s]:!1}function Li(){return Wd}var Kn=b({},Oi,{key:function(s){if(s.key){var i=Kd[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=qa(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Qd[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Li,charCode:function(s){return s.type==="keypress"?qa(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?qa(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Jd=Nn(Kn),Zd=b({},Qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ws=Nn(Zd),f=b({},Oi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Li}),x=Nn(f),T=b({},Xs,{propertyName:0,elapsedTime:0,pseudoElement:0}),L=Nn(T),W=b({},Qo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ie=Nn(W),ke=b({},Xs,{newState:0,oldState:0}),rt=Nn(ke),Zt=[9,13,27,32],wt=Nr&&"CompositionEvent"in window,$t=null;Nr&&"documentMode"in document&&($t=document.documentMode);var Ir=Nr&&"TextEvent"in window&&!$t,Es=Nr&&(!wt||$t&&8<$t&&11>=$t),Qr=" ",Xr=!1;function Ka(s,i){switch(s){case"keyup":return Zt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wo(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Jo=!1;function f3(s,i){switch(s){case"compositionend":return Wo(i);case"keypress":return i.which!==32?null:(Xr=!0,Qr);case"textInput":return s=i.data,s===Qr&&Xr?null:s;default:return null}}function m3(s,i){if(Jo)return s==="compositionend"||!wt&&Ka(s,i)?(s=jc(),$a=Ic=bs=null,Jo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Es&&i.locale!=="ko"?null:i.data;default:return null}}var p3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bb(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!p3[s.type]:i==="textarea"}function Fb(s,i,o,u){Di?vs?vs.push(u):vs=[u]:Di=u,i=Fh(i,"onChange"),0<i.length&&(o=new xs("onChange","change",null,o,u),s.push({event:o,listeners:i}))}var Pc=null,Lc=null;function g3(s){S_(s,0)}function eh(s){var i=fr(s);if(za(i))return s}function Hb(s,i){if(s==="change")return i}var $b=!1;if(Nr){var _p;if(Nr){var wp="oninput"in document;if(!wp){var qb=document.createElement("div");qb.setAttribute("oninput","return;"),wp=typeof qb.oninput=="function"}_p=wp}else _p=!1;$b=_p&&(!document.documentMode||9<document.documentMode)}function Gb(){Pc&&(Pc.detachEvent("onpropertychange",Yb),Lc=Pc=null)}function Yb(s){if(s.propertyName==="value"&&eh(Lc)){var i=[];Fb(i,Lc,s,Rr(s)),Mi(g3,i)}}function y3(s,i,o){s==="focusin"?(Gb(),Pc=i,Lc=o,Pc.attachEvent("onpropertychange",Yb)):s==="focusout"&&Gb()}function v3(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return eh(Lc)}function b3(s,i){if(s==="click")return eh(i)}function x3(s,i){if(s==="input"||s==="change")return eh(i)}function _3(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var pr=typeof Object.is=="function"?Object.is:_3;function Vc(s,i){if(pr(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var o=Object.keys(s),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var p=o[u];if(!Oe.call(i,p)||!pr(s[p],i[p]))return!1}return!0}function Kb(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Qb(s,i){var o=Kb(s);s=0;for(var u;o;){if(o.nodeType===3){if(u=s+o.textContent.length,s<=i&&u>=i)return{node:o,offset:i-s};s=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Kb(o)}}function Xb(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?Xb(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function Wb(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var i=ys(s.document);i instanceof s.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)s=i.contentWindow;else break;i=ys(s.document)}return i}function Ep(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}var w3=Nr&&"documentMode"in document&&11>=document.documentMode,Zo=null,Sp=null,Uc=null,Tp=!1;function Jb(s,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Tp||Zo==null||Zo!==ys(u)||(u=Zo,"selectionStart"in u&&Ep(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Uc&&Vc(Uc,u)||(Uc=u,u=Fh(Sp,"onSelect"),0<u.length&&(i=new xs("onSelect","select",null,i,o),s.push({event:i,listeners:u}),i.target=Zo)))}function Qa(s,i){var o={};return o[s.toLowerCase()]=i.toLowerCase(),o["Webkit"+s]="webkit"+i,o["Moz"+s]="moz"+i,o}var el={animationend:Qa("Animation","AnimationEnd"),animationiteration:Qa("Animation","AnimationIteration"),animationstart:Qa("Animation","AnimationStart"),transitionrun:Qa("Transition","TransitionRun"),transitionstart:Qa("Transition","TransitionStart"),transitioncancel:Qa("Transition","TransitionCancel"),transitionend:Qa("Transition","TransitionEnd")},Cp={},Zb={};Nr&&(Zb=document.createElement("div").style,"AnimationEvent"in window||(delete el.animationend.animation,delete el.animationiteration.animation,delete el.animationstart.animation),"TransitionEvent"in window||delete el.transitionend.transition);function Xa(s){if(Cp[s])return Cp[s];if(!el[s])return s;var i=el[s],o;for(o in i)if(i.hasOwnProperty(o)&&o in Zb)return Cp[s]=i[o];return s}var e1=Xa("animationend"),t1=Xa("animationiteration"),n1=Xa("animationstart"),E3=Xa("transitionrun"),S3=Xa("transitionstart"),T3=Xa("transitioncancel"),r1=Xa("transitionend"),s1=new Map,kp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kp.push("scrollEnd");function Wr(s,i){s1.set(s,i),ps(i,[s])}var th=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},jr=[],tl=0,Ap=0;function nh(){for(var s=tl,i=Ap=tl=0;i<s;){var o=jr[i];jr[i++]=null;var u=jr[i];jr[i++]=null;var p=jr[i];jr[i++]=null;var y=jr[i];if(jr[i++]=null,u!==null&&p!==null){var w=u.pending;w===null?p.next=p:(p.next=w.next,w.next=p),u.pending=p}y!==0&&i1(o,p,y)}}function rh(s,i,o,u){jr[tl++]=s,jr[tl++]=i,jr[tl++]=o,jr[tl++]=u,Ap|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function Rp(s,i,o,u){return rh(s,i,o,u),sh(s)}function Wa(s,i){return rh(s,null,null,i),sh(s)}function i1(s,i,o){s.lanes|=o;var u=s.alternate;u!==null&&(u.lanes|=o);for(var p=!1,y=s.return;y!==null;)y.childLanes|=o,u=y.alternate,u!==null&&(u.childLanes|=o),y.tag===22&&(s=y.stateNode,s===null||s._visibility&1||(p=!0)),s=y,y=y.return;return s.tag===3?(y=s.stateNode,p&&i!==null&&(p=31-Jt(o),s=y.hiddenUpdates,u=s[p],u===null?s[p]=[i]:u.push(i),i.lane=o|536870912),y):null}function sh(s){if(50<ou)throw ou=0,Vg=null,Error(r(185));for(var i=s.return;i!==null;)s=i,i=s.return;return s.tag===3?s.stateNode:null}var nl={};function C3(s,i,o,u){this.tag=s,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gr(s,i,o,u){return new C3(s,i,o,u)}function Np(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Js(s,i){var o=s.alternate;return o===null?(o=gr(s.tag,i,s.key,s.mode),o.elementType=s.elementType,o.type=s.type,o.stateNode=s.stateNode,o.alternate=s,s.alternate=o):(o.pendingProps=i,o.type=s.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=s.flags&65011712,o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,i=s.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=s.sibling,o.index=s.index,o.ref=s.ref,o.refCleanup=s.refCleanup,o}function a1(s,i){s.flags&=65011714;var o=s.alternate;return o===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,i=o.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s}function ih(s,i,o,u,p,y){var w=0;if(u=s,typeof s=="function")Np(s)&&(w=1);else if(typeof s=="string")w=IR(s,o,ne.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case A:return s=gr(31,o,i,p),s.elementType=A,s.lanes=y,s;case I:return Ja(o.children,p,y,i);case k:w=8,p|=24;break;case B:return s=gr(12,o,i,p|2),s.elementType=B,s.lanes=y,s;case z:return s=gr(13,o,i,p),s.elementType=z,s.lanes=y,s;case F:return s=gr(19,o,i,p),s.elementType=F,s.lanes=y,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case N:w=10;break e;case $:w=9;break e;case V:w=11;break e;case E:w=14;break e;case S:w=16,u=null;break e}w=29,o=Error(r(130,s===null?"null":typeof s,"")),u=null}return i=gr(w,o,i,p),i.elementType=s,i.type=u,i.lanes=y,i}function Ja(s,i,o,u){return s=gr(7,s,u,i),s.lanes=o,s}function Ip(s,i,o){return s=gr(6,s,null,i),s.lanes=o,s}function o1(s){var i=gr(18,null,null,0);return i.stateNode=s,i}function jp(s,i,o){return i=gr(4,s.children!==null?s.children:[],s.key,i),i.lanes=o,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}var l1=new WeakMap;function Dr(s,i){if(typeof s=="object"&&s!==null){var o=l1.get(s);return o!==void 0?o:(i={value:s,source:i,stack:Se(i)},l1.set(s,i),i)}return{value:s,source:i,stack:Se(i)}}var rl=[],sl=0,ah=null,zc=0,Mr=[],Or=0,Vi=null,Ss=1,Ts="";function Zs(s,i){rl[sl++]=zc,rl[sl++]=ah,ah=s,zc=i}function c1(s,i,o){Mr[Or++]=Ss,Mr[Or++]=Ts,Mr[Or++]=Vi,Vi=s;var u=Ss;s=Ts;var p=32-Jt(u)-1;u&=~(1<<p),o+=1;var y=32-Jt(i)+p;if(30<y){var w=p-p%5;y=(u&(1<<w)-1).toString(32),u>>=w,p-=w,Ss=1<<32-Jt(i)+p|o<<p|u,Ts=y+s}else Ss=1<<y|o<<p|u,Ts=s}function Dp(s){s.return!==null&&(Zs(s,1),c1(s,1,0))}function Mp(s){for(;s===ah;)ah=rl[--sl],rl[sl]=null,zc=rl[--sl],rl[sl]=null;for(;s===Vi;)Vi=Mr[--Or],Mr[Or]=null,Ts=Mr[--Or],Mr[Or]=null,Ss=Mr[--Or],Mr[Or]=null}function u1(s,i){Mr[Or++]=Ss,Mr[Or++]=Ts,Mr[Or++]=Vi,Ss=i.id,Ts=i.overflow,Vi=s}var In=null,Ut=null,yt=!1,Ui=null,Pr=!1,Op=Error(r(519));function zi(s){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Bc(Dr(i,s)),Op}function d1(s){var i=s.stateNode,o=s.type,u=s.memoizedProps;switch(i[an]=s,i[En]=u,o){case"dialog":ct("cancel",i),ct("close",i);break;case"iframe":case"object":case"embed":ct("load",i);break;case"video":case"audio":for(o=0;o<cu.length;o++)ct(cu[o],i);break;case"source":ct("error",i);break;case"img":case"image":case"link":ct("error",i),ct("load",i);break;case"details":ct("toggle",i);break;case"input":ct("invalid",i),Ud(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":ct("invalid",i);break;case"textarea":ct("invalid",i),Ii(i,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||A_(i.textContent,o)?(u.popover!=null&&(ct("beforetoggle",i),ct("toggle",i)),u.onScroll!=null&&ct("scroll",i),u.onScrollEnd!=null&&ct("scrollend",i),u.onClick!=null&&(i.onclick=Gr),i=!0):i=!1,i||zi(s,!0)}function h1(s){for(In=s.return;In;)switch(In.tag){case 5:case 31:case 13:Pr=!1;return;case 27:case 3:Pr=!0;return;default:In=In.return}}function il(s){if(s!==In)return!1;if(!yt)return h1(s),yt=!0,!1;var i=s.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=s.type,o=!(o!=="form"&&o!=="button")||Zg(s.type,s.memoizedProps)),o=!o),o&&Ut&&zi(s),h1(s),i===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Ut=L_(s)}else if(i===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Ut=L_(s)}else i===27?(i=Ut,ea(s.type)?(s=sy,sy=null,Ut=s):Ut=i):Ut=In?Vr(s.stateNode.nextSibling):null;return!0}function Za(){Ut=In=null,yt=!1}function Pp(){var s=Ui;return s!==null&&(ar===null?ar=s:ar.push.apply(ar,s),Ui=null),s}function Bc(s){Ui===null?Ui=[s]:Ui.push(s)}var Lp=H(null),eo=null,ei=null;function Bi(s,i,o){re(Lp,i._currentValue),i._currentValue=o}function ti(s){s._currentValue=Lp.current,q(Lp)}function Vp(s,i,o){for(;s!==null;){var u=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),s===o)break;s=s.return}}function Up(s,i,o,u){var p=s.child;for(p!==null&&(p.return=s);p!==null;){var y=p.dependencies;if(y!==null){var w=p.child;y=y.firstContext;e:for(;y!==null;){var j=y;y=p;for(var G=0;G<i.length;G++)if(j.context===i[G]){y.lanes|=o,j=y.alternate,j!==null&&(j.lanes|=o),Vp(y.return,o,s),u||(w=null);break e}y=j.next}}else if(p.tag===18){if(w=p.return,w===null)throw Error(r(341));w.lanes|=o,y=w.alternate,y!==null&&(y.lanes|=o),Vp(w,o,s),w=null}else w=p.child;if(w!==null)w.return=p;else for(w=p;w!==null;){if(w===s){w=null;break}if(p=w.sibling,p!==null){p.return=w.return,w=p;break}w=w.return}p=w}}function al(s,i,o,u){s=null;for(var p=i,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var w=p.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var j=p.type;pr(p.pendingProps.value,w.value)||(s!==null?s.push(j):s=[j])}}else if(p===Te.current){if(w=p.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(s!==null?s.push(mu):s=[mu])}p=p.return}s!==null&&Up(i,s,o,u),i.flags|=262144}function oh(s){for(s=s.firstContext;s!==null;){if(!pr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function to(s){eo=s,ei=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function jn(s){return f1(eo,s)}function lh(s,i){return eo===null&&to(s),f1(s,i)}function f1(s,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},ei===null){if(s===null)throw Error(r(308));ei=i,s.dependencies={lanes:0,firstContext:i},s.flags|=524288}else ei=ei.next=i;return o}var k3=typeof AbortController<"u"?AbortController:function(){var s=[],i=this.signal={aborted:!1,addEventListener:function(o,u){s.push(u)}};this.abort=function(){i.aborted=!0,s.forEach(function(o){return o()})}},A3=n.unstable_scheduleCallback,R3=n.unstable_NormalPriority,cn={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zp(){return{controller:new k3,data:new Map,refCount:0}}function Fc(s){s.refCount--,s.refCount===0&&A3(R3,function(){s.controller.abort()})}var Hc=null,Bp=0,ol=0,ll=null;function N3(s,i){if(Hc===null){var o=Hc=[];Bp=0,ol=$g(),ll={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Bp++,i.then(m1,m1),i}function m1(){if(--Bp===0&&Hc!==null){ll!==null&&(ll.status="fulfilled");var s=Hc;Hc=null,ol=0,ll=null;for(var i=0;i<s.length;i++)(0,s[i])()}}function I3(s,i){var o=[],u={status:"pending",value:null,reason:null,then:function(p){o.push(p)}};return s.then(function(){u.status="fulfilled",u.value=i;for(var p=0;p<o.length;p++)(0,o[p])(i)},function(p){for(u.status="rejected",u.reason=p,p=0;p<o.length;p++)(0,o[p])(void 0)}),u}var p1=Y.S;Y.S=function(s,i){Jx=ge(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&N3(s,i),p1!==null&&p1(s,i)};var no=H(null);function Fp(){var s=no.current;return s!==null?s:Pt.pooledCache}function ch(s,i){i===null?re(no,no.current):re(no,i.pool)}function g1(){var s=Fp();return s===null?null:{parent:cn._currentValue,pool:s}}var cl=Error(r(460)),Hp=Error(r(474)),uh=Error(r(542)),dh={then:function(){}};function y1(s){return s=s.status,s==="fulfilled"||s==="rejected"}function v1(s,i,o){switch(o=s[o],o===void 0?s.push(i):o!==i&&(i.then(Gr,Gr),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,x1(s),s;default:if(typeof i.status=="string")i.then(Gr,Gr);else{if(s=Pt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=i,s.status="pending",s.then(function(u){if(i.status==="pending"){var p=i;p.status="fulfilled",p.value=u}},function(u){if(i.status==="pending"){var p=i;p.status="rejected",p.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,x1(s),s}throw so=i,cl}}function ro(s){try{var i=s._init;return i(s._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(so=o,cl):o}}var so=null;function b1(){if(so===null)throw Error(r(459));var s=so;return so=null,s}function x1(s){if(s===cl||s===uh)throw Error(r(483))}var ul=null,$c=0;function hh(s){var i=$c;return $c+=1,ul===null&&(ul=[]),v1(ul,s,i)}function qc(s,i){i=i.props.ref,s.ref=i!==void 0?i:null}function fh(s,i){throw i.$$typeof===_?Error(r(525)):(s=Object.prototype.toString.call(i),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s)))}function _1(s){function i(Q,K){if(s){var Z=Q.deletions;Z===null?(Q.deletions=[K],Q.flags|=16):Z.push(K)}}function o(Q,K){if(!s)return null;for(;K!==null;)i(Q,K),K=K.sibling;return null}function u(Q){for(var K=new Map;Q!==null;)Q.key!==null?K.set(Q.key,Q):K.set(Q.index,Q),Q=Q.sibling;return K}function p(Q,K){return Q=Js(Q,K),Q.index=0,Q.sibling=null,Q}function y(Q,K,Z){return Q.index=Z,s?(Z=Q.alternate,Z!==null?(Z=Z.index,Z<K?(Q.flags|=67108866,K):Z):(Q.flags|=67108866,K)):(Q.flags|=1048576,K)}function w(Q){return s&&Q.alternate===null&&(Q.flags|=67108866),Q}function j(Q,K,Z,fe){return K===null||K.tag!==6?(K=Ip(Z,Q.mode,fe),K.return=Q,K):(K=p(K,Z),K.return=Q,K)}function G(Q,K,Z,fe){var $e=Z.type;return $e===I?ue(Q,K,Z.props.children,fe,Z.key):K!==null&&(K.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===S&&ro($e)===K.type)?(K=p(K,Z.props),qc(K,Z),K.return=Q,K):(K=ih(Z.type,Z.key,Z.props,null,Q.mode,fe),qc(K,Z),K.return=Q,K)}function ee(Q,K,Z,fe){return K===null||K.tag!==4||K.stateNode.containerInfo!==Z.containerInfo||K.stateNode.implementation!==Z.implementation?(K=jp(Z,Q.mode,fe),K.return=Q,K):(K=p(K,Z.children||[]),K.return=Q,K)}function ue(Q,K,Z,fe,$e){return K===null||K.tag!==7?(K=Ja(Z,Q.mode,fe,$e),K.return=Q,K):(K=p(K,Z),K.return=Q,K)}function me(Q,K,Z){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=Ip(""+K,Q.mode,Z),K.return=Q,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case C:return Z=ih(K.type,K.key,K.props,null,Q.mode,Z),qc(Z,K),Z.return=Q,Z;case R:return K=jp(K,Q.mode,Z),K.return=Q,K;case S:return K=ro(K),me(Q,K,Z)}if(Ee(K)||U(K))return K=Ja(K,Q.mode,Z,null),K.return=Q,K;if(typeof K.then=="function")return me(Q,hh(K),Z);if(K.$$typeof===N)return me(Q,lh(Q,K),Z);fh(Q,K)}return null}function te(Q,K,Z,fe){var $e=K!==null?K.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return $e!==null?null:j(Q,K,""+Z,fe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case C:return Z.key===$e?G(Q,K,Z,fe):null;case R:return Z.key===$e?ee(Q,K,Z,fe):null;case S:return Z=ro(Z),te(Q,K,Z,fe)}if(Ee(Z)||U(Z))return $e!==null?null:ue(Q,K,Z,fe,null);if(typeof Z.then=="function")return te(Q,K,hh(Z),fe);if(Z.$$typeof===N)return te(Q,K,lh(Q,Z),fe);fh(Q,Z)}return null}function oe(Q,K,Z,fe,$e){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return Q=Q.get(Z)||null,j(K,Q,""+fe,$e);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case C:return Q=Q.get(fe.key===null?Z:fe.key)||null,G(K,Q,fe,$e);case R:return Q=Q.get(fe.key===null?Z:fe.key)||null,ee(K,Q,fe,$e);case S:return fe=ro(fe),oe(Q,K,Z,fe,$e)}if(Ee(fe)||U(fe))return Q=Q.get(Z)||null,ue(K,Q,fe,$e,null);if(typeof fe.then=="function")return oe(Q,K,Z,hh(fe),$e);if(fe.$$typeof===N)return oe(Q,K,Z,lh(K,fe),$e);fh(K,fe)}return null}function Pe(Q,K,Z,fe){for(var $e=null,bt=null,Be=K,it=K=0,dt=null;Be!==null&&it<Z.length;it++){Be.index>it?(dt=Be,Be=null):dt=Be.sibling;var xt=te(Q,Be,Z[it],fe);if(xt===null){Be===null&&(Be=dt);break}s&&Be&&xt.alternate===null&&i(Q,Be),K=y(xt,K,it),bt===null?$e=xt:bt.sibling=xt,bt=xt,Be=dt}if(it===Z.length)return o(Q,Be),yt&&Zs(Q,it),$e;if(Be===null){for(;it<Z.length;it++)Be=me(Q,Z[it],fe),Be!==null&&(K=y(Be,K,it),bt===null?$e=Be:bt.sibling=Be,bt=Be);return yt&&Zs(Q,it),$e}for(Be=u(Be);it<Z.length;it++)dt=oe(Be,Q,it,Z[it],fe),dt!==null&&(s&&dt.alternate!==null&&Be.delete(dt.key===null?it:dt.key),K=y(dt,K,it),bt===null?$e=dt:bt.sibling=dt,bt=dt);return s&&Be.forEach(function(ia){return i(Q,ia)}),yt&&Zs(Q,it),$e}function Qe(Q,K,Z,fe){if(Z==null)throw Error(r(151));for(var $e=null,bt=null,Be=K,it=K=0,dt=null,xt=Z.next();Be!==null&&!xt.done;it++,xt=Z.next()){Be.index>it?(dt=Be,Be=null):dt=Be.sibling;var ia=te(Q,Be,xt.value,fe);if(ia===null){Be===null&&(Be=dt);break}s&&Be&&ia.alternate===null&&i(Q,Be),K=y(ia,K,it),bt===null?$e=ia:bt.sibling=ia,bt=ia,Be=dt}if(xt.done)return o(Q,Be),yt&&Zs(Q,it),$e;if(Be===null){for(;!xt.done;it++,xt=Z.next())xt=me(Q,xt.value,fe),xt!==null&&(K=y(xt,K,it),bt===null?$e=xt:bt.sibling=xt,bt=xt);return yt&&Zs(Q,it),$e}for(Be=u(Be);!xt.done;it++,xt=Z.next())xt=oe(Be,Q,it,xt.value,fe),xt!==null&&(s&&xt.alternate!==null&&Be.delete(xt.key===null?it:xt.key),K=y(xt,K,it),bt===null?$e=xt:bt.sibling=xt,bt=xt);return s&&Be.forEach(function(FR){return i(Q,FR)}),yt&&Zs(Q,it),$e}function Ot(Q,K,Z,fe){if(typeof Z=="object"&&Z!==null&&Z.type===I&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case C:e:{for(var $e=Z.key;K!==null;){if(K.key===$e){if($e=Z.type,$e===I){if(K.tag===7){o(Q,K.sibling),fe=p(K,Z.props.children),fe.return=Q,Q=fe;break e}}else if(K.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===S&&ro($e)===K.type){o(Q,K.sibling),fe=p(K,Z.props),qc(fe,Z),fe.return=Q,Q=fe;break e}o(Q,K);break}else i(Q,K);K=K.sibling}Z.type===I?(fe=Ja(Z.props.children,Q.mode,fe,Z.key),fe.return=Q,Q=fe):(fe=ih(Z.type,Z.key,Z.props,null,Q.mode,fe),qc(fe,Z),fe.return=Q,Q=fe)}return w(Q);case R:e:{for($e=Z.key;K!==null;){if(K.key===$e)if(K.tag===4&&K.stateNode.containerInfo===Z.containerInfo&&K.stateNode.implementation===Z.implementation){o(Q,K.sibling),fe=p(K,Z.children||[]),fe.return=Q,Q=fe;break e}else{o(Q,K);break}else i(Q,K);K=K.sibling}fe=jp(Z,Q.mode,fe),fe.return=Q,Q=fe}return w(Q);case S:return Z=ro(Z),Ot(Q,K,Z,fe)}if(Ee(Z))return Pe(Q,K,Z,fe);if(U(Z)){if($e=U(Z),typeof $e!="function")throw Error(r(150));return Z=$e.call(Z),Qe(Q,K,Z,fe)}if(typeof Z.then=="function")return Ot(Q,K,hh(Z),fe);if(Z.$$typeof===N)return Ot(Q,K,lh(Q,Z),fe);fh(Q,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,K!==null&&K.tag===6?(o(Q,K.sibling),fe=p(K,Z),fe.return=Q,Q=fe):(o(Q,K),fe=Ip(Z,Q.mode,fe),fe.return=Q,Q=fe),w(Q)):o(Q,K)}return function(Q,K,Z,fe){try{$c=0;var $e=Ot(Q,K,Z,fe);return ul=null,$e}catch(Be){if(Be===cl||Be===uh)throw Be;var bt=gr(29,Be,null,Q.mode);return bt.lanes=fe,bt.return=Q,bt}finally{}}}var io=_1(!0),w1=_1(!1),Fi=!1;function $p(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qp(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Hi(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function $i(s,i,o){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(Et&2)!==0){var p=u.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),u.pending=i,i=sh(s),i1(s,null,o),i}return rh(s,u,i,o),sh(s)}function Gc(s,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=s.pendingLanes,o|=u,i.lanes=o,bc(s,o)}}function Gp(s,i){var o=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var p=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?p=y=w:y=y.next=w,o=o.next}while(o!==null);y===null?p=y=i:y=y.next=i}else p=y=i;o={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},s.updateQueue=o;return}s=o.lastBaseUpdate,s===null?o.firstBaseUpdate=i:s.next=i,o.lastBaseUpdate=i}var Yp=!1;function Yc(){if(Yp){var s=ll;if(s!==null)throw s}}function Kc(s,i,o,u){Yp=!1;var p=s.updateQueue;Fi=!1;var y=p.firstBaseUpdate,w=p.lastBaseUpdate,j=p.shared.pending;if(j!==null){p.shared.pending=null;var G=j,ee=G.next;G.next=null,w===null?y=ee:w.next=ee,w=G;var ue=s.alternate;ue!==null&&(ue=ue.updateQueue,j=ue.lastBaseUpdate,j!==w&&(j===null?ue.firstBaseUpdate=ee:j.next=ee,ue.lastBaseUpdate=G))}if(y!==null){var me=p.baseState;w=0,ue=ee=G=null,j=y;do{var te=j.lane&-536870913,oe=te!==j.lane;if(oe?(ut&te)===te:(u&te)===te){te!==0&&te===ol&&(Yp=!0),ue!==null&&(ue=ue.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var Pe=s,Qe=j;te=i;var Ot=o;switch(Qe.tag){case 1:if(Pe=Qe.payload,typeof Pe=="function"){me=Pe.call(Ot,me,te);break e}me=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Qe.payload,te=typeof Pe=="function"?Pe.call(Ot,me,te):Pe,te==null)break e;me=b({},me,te);break e;case 2:Fi=!0}}te=j.callback,te!==null&&(s.flags|=64,oe&&(s.flags|=8192),oe=p.callbacks,oe===null?p.callbacks=[te]:oe.push(te))}else oe={lane:te,tag:j.tag,payload:j.payload,callback:j.callback,next:null},ue===null?(ee=ue=oe,G=me):ue=ue.next=oe,w|=te;if(j=j.next,j===null){if(j=p.shared.pending,j===null)break;oe=j,j=oe.next,oe.next=null,p.lastBaseUpdate=oe,p.shared.pending=null}}while(!0);ue===null&&(G=me),p.baseState=G,p.firstBaseUpdate=ee,p.lastBaseUpdate=ue,y===null&&(p.shared.lanes=0),Qi|=w,s.lanes=w,s.memoizedState=me}}function E1(s,i){if(typeof s!="function")throw Error(r(191,s));s.call(i)}function S1(s,i){var o=s.callbacks;if(o!==null)for(s.callbacks=null,s=0;s<o.length;s++)E1(o[s],i)}var dl=H(null),mh=H(0);function T1(s,i){s=ui,re(mh,s),re(dl,i),ui=s|i.baseLanes}function Kp(){re(mh,ui),re(dl,dl.current)}function Qp(){ui=mh.current,q(dl),q(mh)}var yr=H(null),Lr=null;function qi(s){var i=s.alternate;re(en,en.current&1),re(yr,s),Lr===null&&(i===null||dl.current!==null||i.memoizedState!==null)&&(Lr=s)}function Xp(s){re(en,en.current),re(yr,s),Lr===null&&(Lr=s)}function C1(s){s.tag===22?(re(en,en.current),re(yr,s),Lr===null&&(Lr=s)):Gi()}function Gi(){re(en,en.current),re(yr,yr.current)}function vr(s){q(yr),Lr===s&&(Lr=null),q(en)}var en=H(0);function ph(s){for(var i=s;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||ny(o)||ry(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ni=0,st=null,Dt=null,un=null,gh=!1,hl=!1,ao=!1,yh=0,Qc=0,fl=null,j3=0;function Kt(){throw Error(r(321))}function Wp(s,i){if(i===null)return!1;for(var o=0;o<i.length&&o<s.length;o++)if(!pr(s[o],i[o]))return!1;return!0}function Jp(s,i,o,u,p,y){return ni=y,st=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Y.H=s===null||s.memoizedState===null?cx:fg,ao=!1,y=o(u,p),ao=!1,hl&&(y=A1(i,o,u,p)),k1(s),y}function k1(s){Y.H=Jc;var i=Dt!==null&&Dt.next!==null;if(ni=0,un=Dt=st=null,gh=!1,Qc=0,fl=null,i)throw Error(r(300));s===null||dn||(s=s.dependencies,s!==null&&oh(s)&&(dn=!0))}function A1(s,i,o,u){st=s;var p=0;do{if(hl&&(fl=null),Qc=0,hl=!1,25<=p)throw Error(r(301));if(p+=1,un=Dt=null,s.updateQueue!=null){var y=s.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}Y.H=ux,y=i(o,u)}while(hl);return y}function D3(){var s=Y.H,i=s.useState()[0];return i=typeof i.then=="function"?Xc(i):i,s=s.useState()[0],(Dt!==null?Dt.memoizedState:null)!==s&&(st.flags|=1024),i}function Zp(){var s=yh!==0;return yh=0,s}function eg(s,i,o){i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~o}function tg(s){if(gh){for(s=s.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}gh=!1}ni=0,un=Dt=st=null,hl=!1,Qc=yh=0,fl=null}function Qn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return un===null?st.memoizedState=un=s:un=un.next=s,un}function tn(){if(Dt===null){var s=st.alternate;s=s!==null?s.memoizedState:null}else s=Dt.next;var i=un===null?st.memoizedState:un.next;if(i!==null)un=i,Dt=s;else{if(s===null)throw st.alternate===null?Error(r(467)):Error(r(310));Dt=s,s={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},un===null?st.memoizedState=un=s:un=un.next=s}return un}function vh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xc(s){var i=Qc;return Qc+=1,fl===null&&(fl=[]),s=v1(fl,s,i),i=st,(un===null?i.memoizedState:un.next)===null&&(i=i.alternate,Y.H=i===null||i.memoizedState===null?cx:fg),s}function bh(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Xc(s);if(s.$$typeof===N)return jn(s)}throw Error(r(438,String(s)))}function ng(s){var i=null,o=st.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=st.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(p){return p.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=vh(),st.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(s),u=0;u<s;u++)o[u]=D;return i.index++,o}function ri(s,i){return typeof i=="function"?i(s):i}function xh(s){var i=tn();return rg(i,Dt,s)}function rg(s,i,o){var u=s.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var p=s.baseQueue,y=u.pending;if(y!==null){if(p!==null){var w=p.next;p.next=y.next,y.next=w}i.baseQueue=p=y,u.pending=null}if(y=s.baseState,p===null)s.memoizedState=y;else{i=p.next;var j=w=null,G=null,ee=i,ue=!1;do{var me=ee.lane&-536870913;if(me!==ee.lane?(ut&me)===me:(ni&me)===me){var te=ee.revertLane;if(te===0)G!==null&&(G=G.next={lane:0,revertLane:0,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),me===ol&&(ue=!0);else if((ni&te)===te){ee=ee.next,te===ol&&(ue=!0);continue}else me={lane:0,revertLane:ee.revertLane,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},G===null?(j=G=me,w=y):G=G.next=me,st.lanes|=te,Qi|=te;me=ee.action,ao&&o(y,me),y=ee.hasEagerState?ee.eagerState:o(y,me)}else te={lane:me,revertLane:ee.revertLane,gesture:ee.gesture,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},G===null?(j=G=te,w=y):G=G.next=te,st.lanes|=me,Qi|=me;ee=ee.next}while(ee!==null&&ee!==i);if(G===null?w=y:G.next=j,!pr(y,s.memoizedState)&&(dn=!0,ue&&(o=ll,o!==null)))throw o;s.memoizedState=y,s.baseState=w,s.baseQueue=G,u.lastRenderedState=y}return p===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function sg(s){var i=tn(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=s;var u=o.dispatch,p=o.pending,y=i.memoizedState;if(p!==null){o.pending=null;var w=p=p.next;do y=s(y,w.action),w=w.next;while(w!==p);pr(y,i.memoizedState)||(dn=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),o.lastRenderedState=y}return[y,u]}function R1(s,i,o){var u=st,p=tn(),y=yt;if(y){if(o===void 0)throw Error(r(407));o=o()}else o=i();var w=!pr((Dt||p).memoizedState,o);if(w&&(p.memoizedState=o,dn=!0),p=p.queue,og(j1.bind(null,u,p,s),[s]),p.getSnapshot!==i||w||un!==null&&un.memoizedState.tag&1){if(u.flags|=2048,ml(9,{destroy:void 0},I1.bind(null,u,p,o,i),null),Pt===null)throw Error(r(349));y||(ni&127)!==0||N1(u,i,o)}return o}function N1(s,i,o){s.flags|=16384,s={getSnapshot:i,value:o},i=st.updateQueue,i===null?(i=vh(),st.updateQueue=i,i.stores=[s]):(o=i.stores,o===null?i.stores=[s]:o.push(s))}function I1(s,i,o,u){i.value=o,i.getSnapshot=u,D1(i)&&M1(s)}function j1(s,i,o){return o(function(){D1(i)&&M1(s)})}function D1(s){var i=s.getSnapshot;s=s.value;try{var o=i();return!pr(s,o)}catch{return!0}}function M1(s){var i=Wa(s,2);i!==null&&or(i,s,2)}function ig(s){var i=Qn();if(typeof s=="function"){var o=s;if(s=o(),ao){kr(!0);try{o()}finally{kr(!1)}}}return i.memoizedState=i.baseState=s,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:s},i}function O1(s,i,o,u){return s.baseState=o,rg(s,Dt,typeof u=="function"?u:ri)}function M3(s,i,o,u,p){if(Eh(s))throw Error(r(485));if(s=i.action,s!==null){var y={payload:p,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){y.listeners.push(w)}};Y.T!==null?o(!0):y.isTransition=!1,u(y),o=i.pending,o===null?(y.next=i.pending=y,P1(i,y)):(y.next=o.next,i.pending=o.next=y)}}function P1(s,i){var o=i.action,u=i.payload,p=s.state;if(i.isTransition){var y=Y.T,w={};Y.T=w;try{var j=o(p,u),G=Y.S;G!==null&&G(w,j),L1(s,i,j)}catch(ee){ag(s,i,ee)}finally{y!==null&&w.types!==null&&(y.types=w.types),Y.T=y}}else try{y=o(p,u),L1(s,i,y)}catch(ee){ag(s,i,ee)}}function L1(s,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){V1(s,i,u)},function(u){return ag(s,i,u)}):V1(s,i,o)}function V1(s,i,o){i.status="fulfilled",i.value=o,U1(i),s.state=o,i=s.pending,i!==null&&(o=i.next,o===i?s.pending=null:(o=o.next,i.next=o,P1(s,o)))}function ag(s,i,o){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,U1(i),i=i.next;while(i!==u)}s.action=null}function U1(s){s=s.listeners;for(var i=0;i<s.length;i++)(0,s[i])()}function z1(s,i){return i}function B1(s,i){if(yt){var o=Pt.formState;if(o!==null){e:{var u=st;if(yt){if(Ut){t:{for(var p=Ut,y=Pr;p.nodeType!==8;){if(!y){p=null;break t}if(p=Vr(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){Ut=Vr(p.nextSibling),u=p.data==="F!";break e}}zi(u)}u=!1}u&&(i=o[0])}}return o=Qn(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:z1,lastRenderedState:i},o.queue=u,o=ax.bind(null,st,u),u.dispatch=o,u=ig(!1),y=hg.bind(null,st,!1,u.queue),u=Qn(),p={state:i,dispatch:null,action:s,pending:null},u.queue=p,o=M3.bind(null,st,p,y,o),p.dispatch=o,u.memoizedState=s,[i,o,!1]}function F1(s){var i=tn();return H1(i,Dt,s)}function H1(s,i,o){if(i=rg(s,i,z1)[0],s=xh(ri)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Xc(i)}catch(w){throw w===cl?uh:w}else u=i;i=tn();var p=i.queue,y=p.dispatch;return o!==i.memoizedState&&(st.flags|=2048,ml(9,{destroy:void 0},O3.bind(null,p,o),null)),[u,y,s]}function O3(s,i){s.action=i}function $1(s){var i=tn(),o=Dt;if(o!==null)return H1(i,o,s);tn(),i=i.memoizedState,o=tn();var u=o.queue.dispatch;return o.memoizedState=s,[i,u,!1]}function ml(s,i,o,u){return s={tag:s,create:o,deps:u,inst:i,next:null},i=st.updateQueue,i===null&&(i=vh(),st.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=s.next=s:(u=o.next,o.next=s,s.next=u,i.lastEffect=s),s}function q1(){return tn().memoizedState}function _h(s,i,o,u){var p=Qn();st.flags|=s,p.memoizedState=ml(1|i,{destroy:void 0},o,u===void 0?null:u)}function wh(s,i,o,u){var p=tn();u=u===void 0?null:u;var y=p.memoizedState.inst;Dt!==null&&u!==null&&Wp(u,Dt.memoizedState.deps)?p.memoizedState=ml(i,y,o,u):(st.flags|=s,p.memoizedState=ml(1|i,y,o,u))}function G1(s,i){_h(8390656,8,s,i)}function og(s,i){wh(2048,8,s,i)}function P3(s){st.flags|=4;var i=st.updateQueue;if(i===null)i=vh(),st.updateQueue=i,i.events=[s];else{var o=i.events;o===null?i.events=[s]:o.push(s)}}function Y1(s){var i=tn().memoizedState;return P3({ref:i,nextImpl:s}),function(){if((Et&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function K1(s,i){return wh(4,2,s,i)}function Q1(s,i){return wh(4,4,s,i)}function X1(s,i){if(typeof i=="function"){s=s();var o=i(s);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function W1(s,i,o){o=o!=null?o.concat([s]):null,wh(4,4,X1.bind(null,i,s),o)}function lg(){}function J1(s,i){var o=tn();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&Wp(i,u[1])?u[0]:(o.memoizedState=[s,i],s)}function Z1(s,i){var o=tn();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&Wp(i,u[1]))return u[0];if(u=s(),ao){kr(!0);try{s()}finally{kr(!1)}}return o.memoizedState=[u,i],u}function cg(s,i,o){return o===void 0||(ni&1073741824)!==0&&(ut&261930)===0?s.memoizedState=i:(s.memoizedState=o,s=e_(),st.lanes|=s,Qi|=s,o)}function ex(s,i,o,u){return pr(o,i)?o:dl.current!==null?(s=cg(s,o,u),pr(s,i)||(dn=!0),s):(ni&42)===0||(ni&1073741824)!==0&&(ut&261930)===0?(dn=!0,s.memoizedState=o):(s=e_(),st.lanes|=s,Qi|=s,i)}function tx(s,i,o,u,p){var y=se.p;se.p=y!==0&&8>y?y:8;var w=Y.T,j={};Y.T=j,hg(s,!1,i,o);try{var G=p(),ee=Y.S;if(ee!==null&&ee(j,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var ue=I3(G,u);Wc(s,i,ue,_r(s))}else Wc(s,i,u,_r(s))}catch(me){Wc(s,i,{then:function(){},status:"rejected",reason:me},_r())}finally{se.p=y,w!==null&&j.types!==null&&(w.types=j.types),Y.T=w}}function L3(){}function ug(s,i,o,u){if(s.tag!==5)throw Error(r(476));var p=nx(s).queue;tx(s,p,i,J,o===null?L3:function(){return rx(s),o(u)})}function nx(s){var i=s.memoizedState;if(i!==null)return i;i={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:J},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:o},next:null},s.memoizedState=i,s=s.alternate,s!==null&&(s.memoizedState=i),i}function rx(s){var i=nx(s);i.next===null&&(i=s.alternate.memoizedState),Wc(s,i.next.queue,{},_r())}function dg(){return jn(mu)}function sx(){return tn().memoizedState}function ix(){return tn().memoizedState}function V3(s){for(var i=s.return;i!==null;){switch(i.tag){case 24:case 3:var o=_r();s=Hi(o);var u=$i(i,s,o);u!==null&&(or(u,i,o),Gc(u,i,o)),i={cache:zp()},s.payload=i;return}i=i.return}}function U3(s,i,o){var u=_r();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Eh(s)?ox(i,o):(o=Rp(s,i,o,u),o!==null&&(or(o,s,u),lx(o,i,u)))}function ax(s,i,o){var u=_r();Wc(s,i,o,u)}function Wc(s,i,o,u){var p={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Eh(s))ox(i,p);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var w=i.lastRenderedState,j=y(w,o);if(p.hasEagerState=!0,p.eagerState=j,pr(j,w))return rh(s,i,p,0),Pt===null&&nh(),!1}catch{}finally{}if(o=Rp(s,i,p,u),o!==null)return or(o,s,u),lx(o,i,u),!0}return!1}function hg(s,i,o,u){if(u={lane:2,revertLane:$g(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Eh(s)){if(i)throw Error(r(479))}else i=Rp(s,o,u,2),i!==null&&or(i,s,2)}function Eh(s){var i=s.alternate;return s===st||i!==null&&i===st}function ox(s,i){hl=gh=!0;var o=s.pending;o===null?i.next=i:(i.next=o.next,o.next=i),s.pending=i}function lx(s,i,o){if((o&4194048)!==0){var u=i.lanes;u&=s.pendingLanes,o|=u,i.lanes=o,bc(s,o)}}var Jc={readContext:jn,use:bh,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useLayoutEffect:Kt,useInsertionEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useSyncExternalStore:Kt,useId:Kt,useHostTransitionStatus:Kt,useFormState:Kt,useActionState:Kt,useOptimistic:Kt,useMemoCache:Kt,useCacheRefresh:Kt};Jc.useEffectEvent=Kt;var cx={readContext:jn,use:bh,useCallback:function(s,i){return Qn().memoizedState=[s,i===void 0?null:i],s},useContext:jn,useEffect:G1,useImperativeHandle:function(s,i,o){o=o!=null?o.concat([s]):null,_h(4194308,4,X1.bind(null,i,s),o)},useLayoutEffect:function(s,i){return _h(4194308,4,s,i)},useInsertionEffect:function(s,i){_h(4,2,s,i)},useMemo:function(s,i){var o=Qn();i=i===void 0?null:i;var u=s();if(ao){kr(!0);try{s()}finally{kr(!1)}}return o.memoizedState=[u,i],u},useReducer:function(s,i,o){var u=Qn();if(o!==void 0){var p=o(i);if(ao){kr(!0);try{o(i)}finally{kr(!1)}}}else p=i;return u.memoizedState=u.baseState=p,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:p},u.queue=s,s=s.dispatch=U3.bind(null,st,s),[u.memoizedState,s]},useRef:function(s){var i=Qn();return s={current:s},i.memoizedState=s},useState:function(s){s=ig(s);var i=s.queue,o=ax.bind(null,st,i);return i.dispatch=o,[s.memoizedState,o]},useDebugValue:lg,useDeferredValue:function(s,i){var o=Qn();return cg(o,s,i)},useTransition:function(){var s=ig(!1);return s=tx.bind(null,st,s.queue,!0,!1),Qn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,i,o){var u=st,p=Qn();if(yt){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),Pt===null)throw Error(r(349));(ut&127)!==0||N1(u,i,o)}p.memoizedState=o;var y={value:o,getSnapshot:i};return p.queue=y,G1(j1.bind(null,u,y,s),[s]),u.flags|=2048,ml(9,{destroy:void 0},I1.bind(null,u,y,o,i),null),o},useId:function(){var s=Qn(),i=Pt.identifierPrefix;if(yt){var o=Ts,u=Ss;o=(u&~(1<<32-Jt(u)-1)).toString(32)+o,i="_"+i+"R_"+o,o=yh++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=j3++,i="_"+i+"r_"+o.toString(32)+"_";return s.memoizedState=i},useHostTransitionStatus:dg,useFormState:B1,useActionState:B1,useOptimistic:function(s){var i=Qn();i.memoizedState=i.baseState=s;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=hg.bind(null,st,!0,o),o.dispatch=i,[s,i]},useMemoCache:ng,useCacheRefresh:function(){return Qn().memoizedState=V3.bind(null,st)},useEffectEvent:function(s){var i=Qn(),o={impl:s};return i.memoizedState=o,function(){if((Et&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},fg={readContext:jn,use:bh,useCallback:J1,useContext:jn,useEffect:og,useImperativeHandle:W1,useInsertionEffect:K1,useLayoutEffect:Q1,useMemo:Z1,useReducer:xh,useRef:q1,useState:function(){return xh(ri)},useDebugValue:lg,useDeferredValue:function(s,i){var o=tn();return ex(o,Dt.memoizedState,s,i)},useTransition:function(){var s=xh(ri)[0],i=tn().memoizedState;return[typeof s=="boolean"?s:Xc(s),i]},useSyncExternalStore:R1,useId:sx,useHostTransitionStatus:dg,useFormState:F1,useActionState:F1,useOptimistic:function(s,i){var o=tn();return O1(o,Dt,s,i)},useMemoCache:ng,useCacheRefresh:ix};fg.useEffectEvent=Y1;var ux={readContext:jn,use:bh,useCallback:J1,useContext:jn,useEffect:og,useImperativeHandle:W1,useInsertionEffect:K1,useLayoutEffect:Q1,useMemo:Z1,useReducer:sg,useRef:q1,useState:function(){return sg(ri)},useDebugValue:lg,useDeferredValue:function(s,i){var o=tn();return Dt===null?cg(o,s,i):ex(o,Dt.memoizedState,s,i)},useTransition:function(){var s=sg(ri)[0],i=tn().memoizedState;return[typeof s=="boolean"?s:Xc(s),i]},useSyncExternalStore:R1,useId:sx,useHostTransitionStatus:dg,useFormState:$1,useActionState:$1,useOptimistic:function(s,i){var o=tn();return Dt!==null?O1(o,Dt,s,i):(o.baseState=s,[s,o.queue.dispatch])},useMemoCache:ng,useCacheRefresh:ix};ux.useEffectEvent=Y1;function mg(s,i,o,u){i=s.memoizedState,o=o(u,i),o=o==null?i:b({},i,o),s.memoizedState=o,s.lanes===0&&(s.updateQueue.baseState=o)}var pg={enqueueSetState:function(s,i,o){s=s._reactInternals;var u=_r(),p=Hi(u);p.payload=i,o!=null&&(p.callback=o),i=$i(s,p,u),i!==null&&(or(i,s,u),Gc(i,s,u))},enqueueReplaceState:function(s,i,o){s=s._reactInternals;var u=_r(),p=Hi(u);p.tag=1,p.payload=i,o!=null&&(p.callback=o),i=$i(s,p,u),i!==null&&(or(i,s,u),Gc(i,s,u))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var o=_r(),u=Hi(o);u.tag=2,i!=null&&(u.callback=i),i=$i(s,u,o),i!==null&&(or(i,s,o),Gc(i,s,o))}};function dx(s,i,o,u,p,y,w){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,y,w):i.prototype&&i.prototype.isPureReactComponent?!Vc(o,u)||!Vc(p,y):!0}function hx(s,i,o,u){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==s&&pg.enqueueReplaceState(i,i.state,null)}function oo(s,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(s=s.defaultProps){o===i&&(o=b({},o));for(var p in s)o[p]===void 0&&(o[p]=s[p])}return o}function fx(s){th(s)}function mx(s){console.error(s)}function px(s){th(s)}function Sh(s,i){try{var o=s.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function gx(s,i,o){try{var u=s.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function gg(s,i,o){return o=Hi(o),o.tag=3,o.payload={element:null},o.callback=function(){Sh(s,i)},o}function yx(s){return s=Hi(s),s.tag=3,s}function vx(s,i,o,u){var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var y=u.value;s.payload=function(){return p(y)},s.callback=function(){gx(i,o,u)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(s.callback=function(){gx(i,o,u),typeof p!="function"&&(Xi===null?Xi=new Set([this]):Xi.add(this));var j=u.stack;this.componentDidCatch(u.value,{componentStack:j!==null?j:""})})}function z3(s,i,o,u,p){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&al(i,o,p,!0),o=yr.current,o!==null){switch(o.tag){case 31:case 13:return Lr===null?Ph():o.alternate===null&&Qt===0&&(Qt=3),o.flags&=-257,o.flags|=65536,o.lanes=p,u===dh?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),Bg(s,u,p)),!1;case 22:return o.flags|=65536,u===dh?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),Bg(s,u,p)),!1}throw Error(r(435,o.tag))}return Bg(s,u,p),Ph(),!1}if(yt)return i=yr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=p,u!==Op&&(s=Error(r(422),{cause:u}),Bc(Dr(s,o)))):(u!==Op&&(i=Error(r(423),{cause:u}),Bc(Dr(i,o))),s=s.current.alternate,s.flags|=65536,p&=-p,s.lanes|=p,u=Dr(u,o),p=gg(s.stateNode,u,p),Gp(s,p),Qt!==4&&(Qt=2)),!1;var y=Error(r(520),{cause:u});if(y=Dr(y,o),au===null?au=[y]:au.push(y),Qt!==4&&(Qt=2),i===null)return!0;u=Dr(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,s=p&-p,o.lanes|=s,s=gg(o.stateNode,u,s),Gp(o,s),!1;case 1:if(i=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Xi===null||!Xi.has(y))))return o.flags|=65536,p&=-p,o.lanes|=p,p=yx(p),vx(p,s,o,u),Gp(o,p),!1}o=o.return}while(o!==null);return!1}var yg=Error(r(461)),dn=!1;function Dn(s,i,o,u){i.child=s===null?w1(i,null,o,u):io(i,s.child,o,u)}function bx(s,i,o,u,p){o=o.render;var y=i.ref;if("ref"in u){var w={};for(var j in u)j!=="ref"&&(w[j]=u[j])}else w=u;return to(i),u=Jp(s,i,o,w,y,p),j=Zp(),s!==null&&!dn?(eg(s,i,p),si(s,i,p)):(yt&&j&&Dp(i),i.flags|=1,Dn(s,i,u,p),i.child)}function xx(s,i,o,u,p){if(s===null){var y=o.type;return typeof y=="function"&&!Np(y)&&y.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=y,_x(s,i,y,u,p)):(s=ih(o.type,null,u,i,i.mode,p),s.ref=i.ref,s.return=i,i.child=s)}if(y=s.child,!Tg(s,p)){var w=y.memoizedProps;if(o=o.compare,o=o!==null?o:Vc,o(w,u)&&s.ref===i.ref)return si(s,i,p)}return i.flags|=1,s=Js(y,u),s.ref=i.ref,s.return=i,i.child=s}function _x(s,i,o,u,p){if(s!==null){var y=s.memoizedProps;if(Vc(y,u)&&s.ref===i.ref)if(dn=!1,i.pendingProps=u=y,Tg(s,p))(s.flags&131072)!==0&&(dn=!0);else return i.lanes=s.lanes,si(s,i,p)}return vg(s,i,o,u,p)}function wx(s,i,o,u){var p=u.children,y=s!==null?s.memoizedState:null;if(s===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(y=y!==null?y.baseLanes|o:o,s!==null){for(u=i.child=s.child,p=0;u!==null;)p=p|u.lanes|u.childLanes,u=u.sibling;u=p&~y}else u=0,i.child=null;return Ex(s,i,y,o,u)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},s!==null&&ch(i,y!==null?y.cachePool:null),y!==null?T1(i,y):Kp(),C1(i);else return u=i.lanes=536870912,Ex(s,i,y!==null?y.baseLanes|o:o,o,u)}else y!==null?(ch(i,y.cachePool),T1(i,y),Gi(),i.memoizedState=null):(s!==null&&ch(i,null),Kp(),Gi());return Dn(s,i,p,o),i.child}function Zc(s,i){return s!==null&&s.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Ex(s,i,o,u,p){var y=Fp();return y=y===null?null:{parent:cn._currentValue,pool:y},i.memoizedState={baseLanes:o,cachePool:y},s!==null&&ch(i,null),Kp(),C1(i),s!==null&&al(s,i,u,!0),i.childLanes=p,null}function Th(s,i){return i=kh({mode:i.mode,children:i.children},s.mode),i.ref=s.ref,s.child=i,i.return=s,i}function Sx(s,i,o){return io(i,s.child,null,o),s=Th(i,i.pendingProps),s.flags|=2,vr(i),i.memoizedState=null,s}function B3(s,i,o){var u=i.pendingProps,p=(i.flags&128)!==0;if(i.flags&=-129,s===null){if(yt){if(u.mode==="hidden")return s=Th(i,u),i.lanes=536870912,Zc(null,s);if(Xp(i),(s=Ut)?(s=P_(s,Pr),s=s!==null&&s.data==="&"?s:null,s!==null&&(i.memoizedState={dehydrated:s,treeContext:Vi!==null?{id:Ss,overflow:Ts}:null,retryLane:536870912,hydrationErrors:null},o=o1(s),o.return=i,i.child=o,In=i,Ut=null)):s=null,s===null)throw zi(i);return i.lanes=536870912,null}return Th(i,u)}var y=s.memoizedState;if(y!==null){var w=y.dehydrated;if(Xp(i),p)if(i.flags&256)i.flags&=-257,i=Sx(s,i,o);else if(i.memoizedState!==null)i.child=s.child,i.flags|=128,i=null;else throw Error(r(558));else if(dn||al(s,i,o,!1),p=(o&s.childLanes)!==0,dn||p){if(u=Pt,u!==null&&(w=xc(u,o),w!==0&&w!==y.retryLane))throw y.retryLane=w,Wa(s,w),or(u,s,w),yg;Ph(),i=Sx(s,i,o)}else s=y.treeContext,Ut=Vr(w.nextSibling),In=i,yt=!0,Ui=null,Pr=!1,s!==null&&u1(i,s),i=Th(i,u),i.flags|=4096;return i}return s=Js(s.child,{mode:u.mode,children:u.children}),s.ref=i.ref,i.child=s,s.return=i,s}function Ch(s,i){var o=i.ref;if(o===null)s!==null&&s.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(s===null||s.ref!==o)&&(i.flags|=4194816)}}function vg(s,i,o,u,p){return to(i),o=Jp(s,i,o,u,void 0,p),u=Zp(),s!==null&&!dn?(eg(s,i,p),si(s,i,p)):(yt&&u&&Dp(i),i.flags|=1,Dn(s,i,o,p),i.child)}function Tx(s,i,o,u,p,y){return to(i),i.updateQueue=null,o=A1(i,u,o,p),k1(s),u=Zp(),s!==null&&!dn?(eg(s,i,y),si(s,i,y)):(yt&&u&&Dp(i),i.flags|=1,Dn(s,i,o,y),i.child)}function Cx(s,i,o,u,p){if(to(i),i.stateNode===null){var y=nl,w=o.contextType;typeof w=="object"&&w!==null&&(y=jn(w)),y=new o(u,y),i.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=pg,i.stateNode=y,y._reactInternals=i,y=i.stateNode,y.props=u,y.state=i.memoizedState,y.refs={},$p(i),w=o.contextType,y.context=typeof w=="object"&&w!==null?jn(w):nl,y.state=i.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(mg(i,o,w,u),y.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(w=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),w!==y.state&&pg.enqueueReplaceState(y,y.state,null),Kc(i,u,y,p),Yc(),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(s===null){y=i.stateNode;var j=i.memoizedProps,G=oo(o,j);y.props=G;var ee=y.context,ue=o.contextType;w=nl,typeof ue=="object"&&ue!==null&&(w=jn(ue));var me=o.getDerivedStateFromProps;ue=typeof me=="function"||typeof y.getSnapshotBeforeUpdate=="function",j=i.pendingProps!==j,ue||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(j||ee!==w)&&hx(i,y,u,w),Fi=!1;var te=i.memoizedState;y.state=te,Kc(i,u,y,p),Yc(),ee=i.memoizedState,j||te!==ee||Fi?(typeof me=="function"&&(mg(i,o,me,u),ee=i.memoizedState),(G=Fi||dx(i,o,G,u,te,ee,w))?(ue||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(i.flags|=4194308)):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=ee),y.props=u,y.state=ee,y.context=w,u=G):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{y=i.stateNode,qp(s,i),w=i.memoizedProps,ue=oo(o,w),y.props=ue,me=i.pendingProps,te=y.context,ee=o.contextType,G=nl,typeof ee=="object"&&ee!==null&&(G=jn(ee)),j=o.getDerivedStateFromProps,(ee=typeof j=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(w!==me||te!==G)&&hx(i,y,u,G),Fi=!1,te=i.memoizedState,y.state=te,Kc(i,u,y,p),Yc();var oe=i.memoizedState;w!==me||te!==oe||Fi||s!==null&&s.dependencies!==null&&oh(s.dependencies)?(typeof j=="function"&&(mg(i,o,j,u),oe=i.memoizedState),(ue=Fi||dx(i,o,ue,u,te,oe,G)||s!==null&&s.dependencies!==null&&oh(s.dependencies))?(ee||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,oe,G),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,oe,G)),typeof y.componentDidUpdate=="function"&&(i.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof y.componentDidUpdate!="function"||w===s.memoizedProps&&te===s.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&te===s.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=oe),y.props=u,y.state=oe,y.context=G,u=ue):(typeof y.componentDidUpdate!="function"||w===s.memoizedProps&&te===s.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&te===s.memoizedState||(i.flags|=1024),u=!1)}return y=u,Ch(s,i),u=(i.flags&128)!==0,y||u?(y=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:y.render(),i.flags|=1,s!==null&&u?(i.child=io(i,s.child,null,p),i.child=io(i,null,o,p)):Dn(s,i,o,p),i.memoizedState=y.state,s=i.child):s=si(s,i,p),s}function kx(s,i,o,u){return Za(),i.flags|=256,Dn(s,i,o,u),i.child}var bg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xg(s){return{baseLanes:s,cachePool:g1()}}function _g(s,i,o){return s=s!==null?s.childLanes&~o:0,i&&(s|=xr),s}function Ax(s,i,o){var u=i.pendingProps,p=!1,y=(i.flags&128)!==0,w;if((w=y)||(w=s!==null&&s.memoizedState===null?!1:(en.current&2)!==0),w&&(p=!0,i.flags&=-129),w=(i.flags&32)!==0,i.flags&=-33,s===null){if(yt){if(p?qi(i):Gi(),(s=Ut)?(s=P_(s,Pr),s=s!==null&&s.data!=="&"?s:null,s!==null&&(i.memoizedState={dehydrated:s,treeContext:Vi!==null?{id:Ss,overflow:Ts}:null,retryLane:536870912,hydrationErrors:null},o=o1(s),o.return=i,i.child=o,In=i,Ut=null)):s=null,s===null)throw zi(i);return ry(s)?i.lanes=32:i.lanes=536870912,null}var j=u.children;return u=u.fallback,p?(Gi(),p=i.mode,j=kh({mode:"hidden",children:j},p),u=Ja(u,p,o,null),j.return=i,u.return=i,j.sibling=u,i.child=j,u=i.child,u.memoizedState=xg(o),u.childLanes=_g(s,w,o),i.memoizedState=bg,Zc(null,u)):(qi(i),wg(i,j))}var G=s.memoizedState;if(G!==null&&(j=G.dehydrated,j!==null)){if(y)i.flags&256?(qi(i),i.flags&=-257,i=Eg(s,i,o)):i.memoizedState!==null?(Gi(),i.child=s.child,i.flags|=128,i=null):(Gi(),j=u.fallback,p=i.mode,u=kh({mode:"visible",children:u.children},p),j=Ja(j,p,o,null),j.flags|=2,u.return=i,j.return=i,u.sibling=j,i.child=u,io(i,s.child,null,o),u=i.child,u.memoizedState=xg(o),u.childLanes=_g(s,w,o),i.memoizedState=bg,i=Zc(null,u));else if(qi(i),ry(j)){if(w=j.nextSibling&&j.nextSibling.dataset,w)var ee=w.dgst;w=ee,u=Error(r(419)),u.stack="",u.digest=w,Bc({value:u,source:null,stack:null}),i=Eg(s,i,o)}else if(dn||al(s,i,o,!1),w=(o&s.childLanes)!==0,dn||w){if(w=Pt,w!==null&&(u=xc(w,o),u!==0&&u!==G.retryLane))throw G.retryLane=u,Wa(s,u),or(w,s,u),yg;ny(j)||Ph(),i=Eg(s,i,o)}else ny(j)?(i.flags|=192,i.child=s.child,i=null):(s=G.treeContext,Ut=Vr(j.nextSibling),In=i,yt=!0,Ui=null,Pr=!1,s!==null&&u1(i,s),i=wg(i,u.children),i.flags|=4096);return i}return p?(Gi(),j=u.fallback,p=i.mode,G=s.child,ee=G.sibling,u=Js(G,{mode:"hidden",children:u.children}),u.subtreeFlags=G.subtreeFlags&65011712,ee!==null?j=Js(ee,j):(j=Ja(j,p,o,null),j.flags|=2),j.return=i,u.return=i,u.sibling=j,i.child=u,Zc(null,u),u=i.child,j=s.child.memoizedState,j===null?j=xg(o):(p=j.cachePool,p!==null?(G=cn._currentValue,p=p.parent!==G?{parent:G,pool:G}:p):p=g1(),j={baseLanes:j.baseLanes|o,cachePool:p}),u.memoizedState=j,u.childLanes=_g(s,w,o),i.memoizedState=bg,Zc(s.child,u)):(qi(i),o=s.child,s=o.sibling,o=Js(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,s!==null&&(w=i.deletions,w===null?(i.deletions=[s],i.flags|=16):w.push(s)),i.child=o,i.memoizedState=null,o)}function wg(s,i){return i=kh({mode:"visible",children:i},s.mode),i.return=s,s.child=i}function kh(s,i){return s=gr(22,s,null,i),s.lanes=0,s}function Eg(s,i,o){return io(i,s.child,null,o),s=wg(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function Rx(s,i,o){s.lanes|=i;var u=s.alternate;u!==null&&(u.lanes|=i),Vp(s.return,i,o)}function Sg(s,i,o,u,p,y){var w=s.memoizedState;w===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:p,treeForkCount:y}:(w.isBackwards=i,w.rendering=null,w.renderingStartTime=0,w.last=u,w.tail=o,w.tailMode=p,w.treeForkCount=y)}function Nx(s,i,o){var u=i.pendingProps,p=u.revealOrder,y=u.tail;u=u.children;var w=en.current,j=(w&2)!==0;if(j?(w=w&1|2,i.flags|=128):w&=1,re(en,w),Dn(s,i,u,o),u=yt?zc:0,!j&&s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Rx(s,o,i);else if(s.tag===19)Rx(s,o,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(p){case"forwards":for(o=i.child,p=null;o!==null;)s=o.alternate,s!==null&&ph(s)===null&&(p=o),o=o.sibling;o=p,o===null?(p=i.child,i.child=null):(p=o.sibling,o.sibling=null),Sg(i,!1,p,o,y,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,p=i.child,i.child=null;p!==null;){if(s=p.alternate,s!==null&&ph(s)===null){i.child=p;break}s=p.sibling,p.sibling=o,o=p,p=s}Sg(i,!0,o,null,y,u);break;case"together":Sg(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function si(s,i,o){if(s!==null&&(i.dependencies=s.dependencies),Qi|=i.lanes,(o&i.childLanes)===0)if(s!==null){if(al(s,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(s!==null&&i.child!==s.child)throw Error(r(153));if(i.child!==null){for(s=i.child,o=Js(s,s.pendingProps),i.child=o,o.return=i;s.sibling!==null;)s=s.sibling,o=o.sibling=Js(s,s.pendingProps),o.return=i;o.sibling=null}return i.child}function Tg(s,i){return(s.lanes&i)!==0?!0:(s=s.dependencies,!!(s!==null&&oh(s)))}function F3(s,i,o){switch(i.tag){case 3:Fe(i,i.stateNode.containerInfo),Bi(i,cn,s.memoizedState.cache),Za();break;case 27:case 5:be(i);break;case 4:Fe(i,i.stateNode.containerInfo);break;case 10:Bi(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Xp(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(qi(i),i.flags|=128,null):(o&i.child.childLanes)!==0?Ax(s,i,o):(qi(i),s=si(s,i,o),s!==null?s.sibling:null);qi(i);break;case 19:var p=(s.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(al(s,i,o,!1),u=(o&i.childLanes)!==0),p){if(u)return Nx(s,i,o);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),re(en,en.current),u)break;return null;case 22:return i.lanes=0,wx(s,i,o,i.pendingProps);case 24:Bi(i,cn,s.memoizedState.cache)}return si(s,i,o)}function Ix(s,i,o){if(s!==null)if(s.memoizedProps!==i.pendingProps)dn=!0;else{if(!Tg(s,o)&&(i.flags&128)===0)return dn=!1,F3(s,i,o);dn=(s.flags&131072)!==0}else dn=!1,yt&&(i.flags&1048576)!==0&&c1(i,zc,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(s=ro(i.elementType),i.type=s,typeof s=="function")Np(s)?(u=oo(s,u),i.tag=1,i=Cx(null,i,s,u,o)):(i.tag=0,i=vg(null,i,s,u,o));else{if(s!=null){var p=s.$$typeof;if(p===V){i.tag=11,i=bx(null,i,s,u,o);break e}else if(p===E){i.tag=14,i=xx(null,i,s,u,o);break e}}throw i=xe(s)||s,Error(r(306,i,""))}}return i;case 0:return vg(s,i,i.type,i.pendingProps,o);case 1:return u=i.type,p=oo(u,i.pendingProps),Cx(s,i,u,p,o);case 3:e:{if(Fe(i,i.stateNode.containerInfo),s===null)throw Error(r(387));u=i.pendingProps;var y=i.memoizedState;p=y.element,qp(s,i),Kc(i,u,null,o);var w=i.memoizedState;if(u=w.cache,Bi(i,cn,u),u!==y.cache&&Up(i,[cn],o,!0),Yc(),u=w.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:w.cache},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){i=kx(s,i,u,o);break e}else if(u!==p){p=Dr(Error(r(424)),i),Bc(p),i=kx(s,i,u,o);break e}else{switch(s=i.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Ut=Vr(s.firstChild),In=i,yt=!0,Ui=null,Pr=!0,o=w1(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Za(),u===p){i=si(s,i,o);break e}Dn(s,i,u,o)}i=i.child}return i;case 26:return Ch(s,i),s===null?(o=F_(i.type,null,i.pendingProps,null))?i.memoizedState=o:yt||(o=i.type,s=i.pendingProps,u=Hh(ye.current).createElement(o),u[an]=i,u[En]=s,Mn(u,o,s),on(u),i.stateNode=u):i.memoizedState=F_(i.type,s.memoizedProps,i.pendingProps,s.memoizedState),null;case 27:return be(i),s===null&&yt&&(u=i.stateNode=U_(i.type,i.pendingProps,ye.current),In=i,Pr=!0,p=Ut,ea(i.type)?(sy=p,Ut=Vr(u.firstChild)):Ut=p),Dn(s,i,i.pendingProps.children,o),Ch(s,i),s===null&&(i.flags|=4194304),i.child;case 5:return s===null&&yt&&((p=u=Ut)&&(u=vR(u,i.type,i.pendingProps,Pr),u!==null?(i.stateNode=u,In=i,Ut=Vr(u.firstChild),Pr=!1,p=!0):p=!1),p||zi(i)),be(i),p=i.type,y=i.pendingProps,w=s!==null?s.memoizedProps:null,u=y.children,Zg(p,y)?u=null:w!==null&&Zg(p,w)&&(i.flags|=32),i.memoizedState!==null&&(p=Jp(s,i,D3,null,null,o),mu._currentValue=p),Ch(s,i),Dn(s,i,u,o),i.child;case 6:return s===null&&yt&&((s=o=Ut)&&(o=bR(o,i.pendingProps,Pr),o!==null?(i.stateNode=o,In=i,Ut=null,s=!0):s=!1),s||zi(i)),null;case 13:return Ax(s,i,o);case 4:return Fe(i,i.stateNode.containerInfo),u=i.pendingProps,s===null?i.child=io(i,null,u,o):Dn(s,i,u,o),i.child;case 11:return bx(s,i,i.type,i.pendingProps,o);case 7:return Dn(s,i,i.pendingProps,o),i.child;case 8:return Dn(s,i,i.pendingProps.children,o),i.child;case 12:return Dn(s,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,Bi(i,i.type,u.value),Dn(s,i,u.children,o),i.child;case 9:return p=i.type._context,u=i.pendingProps.children,to(i),p=jn(p),u=u(p),i.flags|=1,Dn(s,i,u,o),i.child;case 14:return xx(s,i,i.type,i.pendingProps,o);case 15:return _x(s,i,i.type,i.pendingProps,o);case 19:return Nx(s,i,o);case 31:return B3(s,i,o);case 22:return wx(s,i,o,i.pendingProps);case 24:return to(i),u=jn(cn),s===null?(p=Fp(),p===null&&(p=Pt,y=zp(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=o),p=y),i.memoizedState={parent:u,cache:p},$p(i),Bi(i,cn,p)):((s.lanes&o)!==0&&(qp(s,i),Kc(i,null,null,o),Yc()),p=s.memoizedState,y=i.memoizedState,p.parent!==u?(p={parent:u,cache:u},i.memoizedState=p,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=p),Bi(i,cn,u)):(u=y.cache,Bi(i,cn,u),u!==p.cache&&Up(i,[cn],o,!0))),Dn(s,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function ii(s){s.flags|=4}function Cg(s,i,o,u,p){if((i=(s.mode&32)!==0)&&(i=!1),i){if(s.flags|=16777216,(p&335544128)===p)if(s.stateNode.complete)s.flags|=8192;else if(s_())s.flags|=8192;else throw so=dh,Hp}else s.flags&=-16777217}function jx(s,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Y_(i))if(s_())s.flags|=8192;else throw so=dh,Hp}function Ah(s,i){i!==null&&(s.flags|=4),s.flags&16384&&(i=s.tag!==22?Md():536870912,s.lanes|=i,vl|=i)}function eu(s,i){if(!yt)switch(s.tailMode){case"hidden":i=s.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?s.tail=null:o.sibling=null;break;case"collapsed":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function zt(s){var i=s.alternate!==null&&s.alternate.child===s.child,o=0,u=0;if(i)for(var p=s.child;p!==null;)o|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=s,p=p.sibling;else for(p=s.child;p!==null;)o|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=s,p=p.sibling;return s.subtreeFlags|=u,s.childLanes=o,i}function H3(s,i,o){var u=i.pendingProps;switch(Mp(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(i),null;case 1:return zt(i),null;case 3:return o=i.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),ti(cn),Ye(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(s===null||s.child===null)&&(il(i)?ii(i):s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Pp())),zt(i),null;case 26:var p=i.type,y=i.memoizedState;return s===null?(ii(i),y!==null?(zt(i),jx(i,y)):(zt(i),Cg(i,p,null,u,o))):y?y!==s.memoizedState?(ii(i),zt(i),jx(i,y)):(zt(i),i.flags&=-16777217):(s=s.memoizedProps,s!==u&&ii(i),zt(i),Cg(i,p,s,u,o)),null;case 27:if(he(i),o=ye.current,p=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==u&&ii(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return zt(i),null}s=ne.current,il(i)?d1(i):(s=U_(p,u,o),i.stateNode=s,ii(i))}return zt(i),null;case 5:if(he(i),p=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==u&&ii(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return zt(i),null}if(y=ne.current,il(i))d1(i);else{var w=Hh(ye.current);switch(y){case 1:y=w.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:y=w.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":y=w.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":y=w.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":y=w.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?w.createElement("select",{is:u.is}):w.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?w.createElement(p,{is:u.is}):w.createElement(p)}}y[an]=i,y[En]=u;e:for(w=i.child;w!==null;){if(w.tag===5||w.tag===6)y.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===i)break e;for(;w.sibling===null;){if(w.return===null||w.return===i)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}i.stateNode=y;e:switch(Mn(y,p,u),p){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ii(i)}}return zt(i),Cg(i,i.type,s===null?null:s.memoizedProps,i.pendingProps,o),null;case 6:if(s&&i.stateNode!=null)s.memoizedProps!==u&&ii(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(r(166));if(s=ye.current,il(i)){if(s=i.stateNode,o=i.memoizedProps,u=null,p=In,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}s[an]=i,s=!!(s.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||A_(s.nodeValue,o)),s||zi(i,!0)}else s=Hh(s).createTextNode(u),s[an]=i,i.stateNode=s}return zt(i),null;case 31:if(o=i.memoizedState,s===null||s.memoizedState!==null){if(u=il(i),o!==null){if(s===null){if(!u)throw Error(r(318));if(s=i.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[an]=i}else Za(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;zt(i),s=!1}else o=Pp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=o),s=!0;if(!s)return i.flags&256?(vr(i),i):(vr(i),null);if((i.flags&128)!==0)throw Error(r(558))}return zt(i),null;case 13:if(u=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(p=il(i),u!==null&&u.dehydrated!==null){if(s===null){if(!p)throw Error(r(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[an]=i}else Za(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;zt(i),p=!1}else p=Pp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=p),p=!0;if(!p)return i.flags&256?(vr(i),i):(vr(i),null)}return vr(i),(i.flags&128)!==0?(i.lanes=o,i):(o=u!==null,s=s!==null&&s.memoizedState!==null,o&&(u=i.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==p&&(u.flags|=2048)),o!==s&&o&&(i.child.flags|=8192),Ah(i,i.updateQueue),zt(i),null);case 4:return Ye(),s===null&&Kg(i.stateNode.containerInfo),zt(i),null;case 10:return ti(i.type),zt(i),null;case 19:if(q(en),u=i.memoizedState,u===null)return zt(i),null;if(p=(i.flags&128)!==0,y=u.rendering,y===null)if(p)eu(u,!1);else{if(Qt!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(y=ph(s),y!==null){for(i.flags|=128,eu(u,!1),s=y.updateQueue,i.updateQueue=s,Ah(i,s),i.subtreeFlags=0,s=o,o=i.child;o!==null;)a1(o,s),o=o.sibling;return re(en,en.current&1|2),yt&&Zs(i,u.treeForkCount),i.child}s=s.sibling}u.tail!==null&&ge()>Dh&&(i.flags|=128,p=!0,eu(u,!1),i.lanes=4194304)}else{if(!p)if(s=ph(y),s!==null){if(i.flags|=128,p=!0,s=s.updateQueue,i.updateQueue=s,Ah(i,s),eu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!yt)return zt(i),null}else 2*ge()-u.renderingStartTime>Dh&&o!==536870912&&(i.flags|=128,p=!0,eu(u,!1),i.lanes=4194304);u.isBackwards?(y.sibling=i.child,i.child=y):(s=u.last,s!==null?s.sibling=y:i.child=y,u.last=y)}return u.tail!==null?(s=u.tail,u.rendering=s,u.tail=s.sibling,u.renderingStartTime=ge(),s.sibling=null,o=en.current,re(en,p?o&1|2:o&1),yt&&Zs(i,u.treeForkCount),s):(zt(i),null);case 22:case 23:return vr(i),Qp(),u=i.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(zt(i),i.subtreeFlags&6&&(i.flags|=8192)):zt(i),o=i.updateQueue,o!==null&&Ah(i,o.retryQueue),o=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),s!==null&&q(no),null;case 24:return o=null,s!==null&&(o=s.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),ti(cn),zt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function $3(s,i){switch(Mp(i),i.tag){case 1:return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return ti(cn),Ye(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 26:case 27:case 5:return he(i),null;case 31:if(i.memoizedState!==null){if(vr(i),i.alternate===null)throw Error(r(340));Za()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 13:if(vr(i),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Za()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return q(en),null;case 4:return Ye(),null;case 10:return ti(i.type),null;case 22:case 23:return vr(i),Qp(),s!==null&&q(no),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 24:return ti(cn),null;case 25:return null;default:return null}}function Dx(s,i){switch(Mp(i),i.tag){case 3:ti(cn),Ye();break;case 26:case 27:case 5:he(i);break;case 4:Ye();break;case 31:i.memoizedState!==null&&vr(i);break;case 13:vr(i);break;case 19:q(en);break;case 10:ti(i.type);break;case 22:case 23:vr(i),Qp(),s!==null&&q(no);break;case 24:ti(cn)}}function tu(s,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var p=u.next;o=p;do{if((o.tag&s)===s){u=void 0;var y=o.create,w=o.inst;u=y(),w.destroy=u}o=o.next}while(o!==p)}}catch(j){Nt(i,i.return,j)}}function Yi(s,i,o){try{var u=i.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var y=p.next;u=y;do{if((u.tag&s)===s){var w=u.inst,j=w.destroy;if(j!==void 0){w.destroy=void 0,p=i;var G=o,ee=j;try{ee()}catch(ue){Nt(p,G,ue)}}}u=u.next}while(u!==y)}}catch(ue){Nt(i,i.return,ue)}}function Mx(s){var i=s.updateQueue;if(i!==null){var o=s.stateNode;try{S1(i,o)}catch(u){Nt(s,s.return,u)}}}function Ox(s,i,o){o.props=oo(s.type,s.memoizedProps),o.state=s.memoizedState;try{o.componentWillUnmount()}catch(u){Nt(s,i,u)}}function nu(s,i){try{var o=s.ref;if(o!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof o=="function"?s.refCleanup=o(u):o.current=u}}catch(p){Nt(s,i,p)}}function Cs(s,i){var o=s.ref,u=s.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(p){Nt(s,i,p)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(p){Nt(s,i,p)}else o.current=null}function Px(s){var i=s.type,o=s.memoizedProps,u=s.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(p){Nt(s,s.return,p)}}function kg(s,i,o){try{var u=s.stateNode;hR(u,s.type,o,i),u[En]=i}catch(p){Nt(s,s.return,p)}}function Lx(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&ea(s.type)||s.tag===4}function Ag(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Lx(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&ea(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Rg(s,i,o){var u=s.tag;if(u===5||u===6)s=s.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(s,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(s),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Gr));else if(u!==4&&(u===27&&ea(s.type)&&(o=s.stateNode,i=null),s=s.child,s!==null))for(Rg(s,i,o),s=s.sibling;s!==null;)Rg(s,i,o),s=s.sibling}function Rh(s,i,o){var u=s.tag;if(u===5||u===6)s=s.stateNode,i?o.insertBefore(s,i):o.appendChild(s);else if(u!==4&&(u===27&&ea(s.type)&&(o=s.stateNode),s=s.child,s!==null))for(Rh(s,i,o),s=s.sibling;s!==null;)Rh(s,i,o),s=s.sibling}function Vx(s){var i=s.stateNode,o=s.memoizedProps;try{for(var u=s.type,p=i.attributes;p.length;)i.removeAttributeNode(p[0]);Mn(i,u,o),i[an]=s,i[En]=o}catch(y){Nt(s,s.return,y)}}var ai=!1,hn=!1,Ng=!1,Ux=typeof WeakSet=="function"?WeakSet:Set,Tn=null;function q3(s,i){if(s=s.containerInfo,Wg=Xh,s=Wb(s),Ep(s)){if("selectionStart"in s)var o={start:s.selectionStart,end:s.selectionEnd};else e:{o=(o=s.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var p=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var w=0,j=-1,G=-1,ee=0,ue=0,me=s,te=null;t:for(;;){for(var oe;me!==o||p!==0&&me.nodeType!==3||(j=w+p),me!==y||u!==0&&me.nodeType!==3||(G=w+u),me.nodeType===3&&(w+=me.nodeValue.length),(oe=me.firstChild)!==null;)te=me,me=oe;for(;;){if(me===s)break t;if(te===o&&++ee===p&&(j=w),te===y&&++ue===u&&(G=w),(oe=me.nextSibling)!==null)break;me=te,te=me.parentNode}me=oe}o=j===-1||G===-1?null:{start:j,end:G}}else o=null}o=o||{start:0,end:0}}else o=null;for(Jg={focusedElem:s,selectionRange:o},Xh=!1,Tn=i;Tn!==null;)if(i=Tn,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,Tn=s;else for(;Tn!==null;){switch(i=Tn,y=i.alternate,s=i.flags,i.tag){case 0:if((s&4)!==0&&(s=i.updateQueue,s=s!==null?s.events:null,s!==null))for(o=0;o<s.length;o++)p=s[o],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&y!==null){s=void 0,o=i,p=y.memoizedProps,y=y.memoizedState,u=o.stateNode;try{var Pe=oo(o.type,p);s=u.getSnapshotBeforeUpdate(Pe,y),u.__reactInternalSnapshotBeforeUpdate=s}catch(Qe){Nt(o,o.return,Qe)}}break;case 3:if((s&1024)!==0){if(s=i.stateNode.containerInfo,o=s.nodeType,o===9)ty(s);else if(o===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":ty(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=i.sibling,s!==null){s.return=i.return,Tn=s;break}Tn=i.return}}function zx(s,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:li(s,o),u&4&&tu(5,o);break;case 1:if(li(s,o),u&4)if(s=o.stateNode,i===null)try{s.componentDidMount()}catch(w){Nt(o,o.return,w)}else{var p=oo(o.type,i.memoizedProps);i=i.memoizedState;try{s.componentDidUpdate(p,i,s.__reactInternalSnapshotBeforeUpdate)}catch(w){Nt(o,o.return,w)}}u&64&&Mx(o),u&512&&nu(o,o.return);break;case 3:if(li(s,o),u&64&&(s=o.updateQueue,s!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{S1(s,i)}catch(w){Nt(o,o.return,w)}}break;case 27:i===null&&u&4&&Vx(o);case 26:case 5:li(s,o),i===null&&u&4&&Px(o),u&512&&nu(o,o.return);break;case 12:li(s,o);break;case 31:li(s,o),u&4&&Hx(s,o);break;case 13:li(s,o),u&4&&$x(s,o),u&64&&(s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(o=eR.bind(null,o),xR(s,o))));break;case 22:if(u=o.memoizedState!==null||ai,!u){i=i!==null&&i.memoizedState!==null||hn,p=ai;var y=hn;ai=u,(hn=i)&&!y?ci(s,o,(o.subtreeFlags&8772)!==0):li(s,o),ai=p,hn=y}break;case 30:break;default:li(s,o)}}function Bx(s){var i=s.alternate;i!==null&&(s.alternate=null,Bx(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&Fo(i)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var qt=null,rr=!1;function oi(s,i,o){for(o=o.child;o!==null;)Fx(s,i,o),o=o.sibling}function Fx(s,i,o){if(Rn&&typeof Rn.onCommitFiberUnmount=="function")try{Rn.onCommitFiberUnmount(Fr,o)}catch{}switch(o.tag){case 26:hn||Cs(o,i),oi(s,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:hn||Cs(o,i);var u=qt,p=rr;ea(o.type)&&(qt=o.stateNode,rr=!1),oi(s,i,o),du(o.stateNode),qt=u,rr=p;break;case 5:hn||Cs(o,i);case 6:if(u=qt,p=rr,qt=null,oi(s,i,o),qt=u,rr=p,qt!==null)if(rr)try{(qt.nodeType===9?qt.body:qt.nodeName==="HTML"?qt.ownerDocument.body:qt).removeChild(o.stateNode)}catch(y){Nt(o,i,y)}else try{qt.removeChild(o.stateNode)}catch(y){Nt(o,i,y)}break;case 18:qt!==null&&(rr?(s=qt,M_(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,o.stateNode),Cl(s)):M_(qt,o.stateNode));break;case 4:u=qt,p=rr,qt=o.stateNode.containerInfo,rr=!0,oi(s,i,o),qt=u,rr=p;break;case 0:case 11:case 14:case 15:Yi(2,o,i),hn||Yi(4,o,i),oi(s,i,o);break;case 1:hn||(Cs(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Ox(o,i,u)),oi(s,i,o);break;case 21:oi(s,i,o);break;case 22:hn=(u=hn)||o.memoizedState!==null,oi(s,i,o),hn=u;break;default:oi(s,i,o)}}function Hx(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Cl(s)}catch(o){Nt(i,i.return,o)}}}function $x(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Cl(s)}catch(o){Nt(i,i.return,o)}}function G3(s){switch(s.tag){case 31:case 13:case 19:var i=s.stateNode;return i===null&&(i=s.stateNode=new Ux),i;case 22:return s=s.stateNode,i=s._retryCache,i===null&&(i=s._retryCache=new Ux),i;default:throw Error(r(435,s.tag))}}function Nh(s,i){var o=G3(s);i.forEach(function(u){if(!o.has(u)){o.add(u);var p=tR.bind(null,s,u);u.then(p,p)}})}function sr(s,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var p=o[u],y=s,w=i,j=w;e:for(;j!==null;){switch(j.tag){case 27:if(ea(j.type)){qt=j.stateNode,rr=!1;break e}break;case 5:qt=j.stateNode,rr=!1;break e;case 3:case 4:qt=j.stateNode.containerInfo,rr=!0;break e}j=j.return}if(qt===null)throw Error(r(160));Fx(y,w,p),qt=null,rr=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)qx(i,s),i=i.sibling}var Jr=null;function qx(s,i){var o=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:sr(i,s),ir(s),u&4&&(Yi(3,s,s.return),tu(3,s),Yi(5,s,s.return));break;case 1:sr(i,s),ir(s),u&512&&(hn||o===null||Cs(o,o.return)),u&64&&ai&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(o=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var p=Jr;if(sr(i,s),ir(s),u&512&&(hn||o===null||Cs(o,o.return)),u&4){var y=o!==null?o.memoizedState:null;if(u=s.memoizedState,o===null)if(u===null)if(s.stateNode===null){e:{u=s.type,o=s.memoizedProps,p=p.ownerDocument||p;t:switch(u){case"title":y=p.getElementsByTagName("title")[0],(!y||y[hs]||y[an]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(u),p.head.insertBefore(y,p.querySelector("head > title"))),Mn(y,u,o),y[an]=s,on(y),u=y;break e;case"link":var w=q_("link","href",p).get(u+(o.href||""));if(w){for(var j=0;j<w.length;j++)if(y=w[j],y.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(j,1);break t}}y=p.createElement(u),Mn(y,u,o),p.head.appendChild(y);break;case"meta":if(w=q_("meta","content",p).get(u+(o.content||""))){for(j=0;j<w.length;j++)if(y=w[j],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(j,1);break t}}y=p.createElement(u),Mn(y,u,o),p.head.appendChild(y);break;default:throw Error(r(468,u))}y[an]=s,on(y),u=y}s.stateNode=u}else G_(p,s.type,s.stateNode);else s.stateNode=$_(p,u,s.memoizedProps);else y!==u?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,u===null?G_(p,s.type,s.stateNode):$_(p,u,s.memoizedProps)):u===null&&s.stateNode!==null&&kg(s,s.memoizedProps,o.memoizedProps)}break;case 27:sr(i,s),ir(s),u&512&&(hn||o===null||Cs(o,o.return)),o!==null&&u&4&&kg(s,s.memoizedProps,o.memoizedProps);break;case 5:if(sr(i,s),ir(s),u&512&&(hn||o===null||Cs(o,o.return)),s.flags&32){p=s.stateNode;try{nr(p,"")}catch(Pe){Nt(s,s.return,Pe)}}u&4&&s.stateNode!=null&&(p=s.memoizedProps,kg(s,p,o!==null?o.memoizedProps:p)),u&1024&&(Ng=!0);break;case 6:if(sr(i,s),ir(s),u&4){if(s.stateNode===null)throw Error(r(162));u=s.memoizedProps,o=s.stateNode;try{o.nodeValue=u}catch(Pe){Nt(s,s.return,Pe)}}break;case 3:if(Gh=null,p=Jr,Jr=$h(i.containerInfo),sr(i,s),Jr=p,ir(s),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Cl(i.containerInfo)}catch(Pe){Nt(s,s.return,Pe)}Ng&&(Ng=!1,Gx(s));break;case 4:u=Jr,Jr=$h(s.stateNode.containerInfo),sr(i,s),ir(s),Jr=u;break;case 12:sr(i,s),ir(s);break;case 31:sr(i,s),ir(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Nh(s,u)));break;case 13:sr(i,s),ir(s),s.child.flags&8192&&s.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(jh=ge()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Nh(s,u)));break;case 22:p=s.memoizedState!==null;var G=o!==null&&o.memoizedState!==null,ee=ai,ue=hn;if(ai=ee||p,hn=ue||G,sr(i,s),hn=ue,ai=ee,ir(s),u&8192)e:for(i=s.stateNode,i._visibility=p?i._visibility&-2:i._visibility|1,p&&(o===null||G||ai||hn||lo(s)),o=null,i=s;;){if(i.tag===5||i.tag===26){if(o===null){G=o=i;try{if(y=G.stateNode,p)w=y.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{j=G.stateNode;var me=G.memoizedProps.style,te=me!=null&&me.hasOwnProperty("display")?me.display:null;j.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Pe){Nt(G,G.return,Pe)}}}else if(i.tag===6){if(o===null){G=i;try{G.stateNode.nodeValue=p?"":G.memoizedProps}catch(Pe){Nt(G,G.return,Pe)}}}else if(i.tag===18){if(o===null){G=i;try{var oe=G.stateNode;p?O_(oe,!0):O_(G.stateNode,!1)}catch(Pe){Nt(G,G.return,Pe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===s)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=s.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Nh(s,o))));break;case 19:sr(i,s),ir(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Nh(s,u)));break;case 30:break;case 21:break;default:sr(i,s),ir(s)}}function ir(s){var i=s.flags;if(i&2){try{for(var o,u=s.return;u!==null;){if(Lx(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var p=o.stateNode,y=Ag(s);Rh(s,y,p);break;case 5:var w=o.stateNode;o.flags&32&&(nr(w,""),o.flags&=-33);var j=Ag(s);Rh(s,j,w);break;case 3:case 4:var G=o.stateNode.containerInfo,ee=Ag(s);Rg(s,ee,G);break;default:throw Error(r(161))}}catch(ue){Nt(s,s.return,ue)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function Gx(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var i=s;Gx(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),s=s.sibling}}function li(s,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)zx(s,i.alternate,i),i=i.sibling}function lo(s){for(s=s.child;s!==null;){var i=s;switch(i.tag){case 0:case 11:case 14:case 15:Yi(4,i,i.return),lo(i);break;case 1:Cs(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&Ox(i,i.return,o),lo(i);break;case 27:du(i.stateNode);case 26:case 5:Cs(i,i.return),lo(i);break;case 22:i.memoizedState===null&&lo(i);break;case 30:lo(i);break;default:lo(i)}s=s.sibling}}function ci(s,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,p=s,y=i,w=y.flags;switch(y.tag){case 0:case 11:case 15:ci(p,y,o),tu(4,y);break;case 1:if(ci(p,y,o),u=y,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(ee){Nt(u,u.return,ee)}if(u=y,p=u.updateQueue,p!==null){var j=u.stateNode;try{var G=p.shared.hiddenCallbacks;if(G!==null)for(p.shared.hiddenCallbacks=null,p=0;p<G.length;p++)E1(G[p],j)}catch(ee){Nt(u,u.return,ee)}}o&&w&64&&Mx(y),nu(y,y.return);break;case 27:Vx(y);case 26:case 5:ci(p,y,o),o&&u===null&&w&4&&Px(y),nu(y,y.return);break;case 12:ci(p,y,o);break;case 31:ci(p,y,o),o&&w&4&&Hx(p,y);break;case 13:ci(p,y,o),o&&w&4&&$x(p,y);break;case 22:y.memoizedState===null&&ci(p,y,o),nu(y,y.return);break;case 30:break;default:ci(p,y,o)}i=i.sibling}}function Ig(s,i){var o=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==o&&(s!=null&&s.refCount++,o!=null&&Fc(o))}function jg(s,i){s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&Fc(s))}function Zr(s,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Yx(s,i,o,u),i=i.sibling}function Yx(s,i,o,u){var p=i.flags;switch(i.tag){case 0:case 11:case 15:Zr(s,i,o,u),p&2048&&tu(9,i);break;case 1:Zr(s,i,o,u);break;case 3:Zr(s,i,o,u),p&2048&&(s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&Fc(s)));break;case 12:if(p&2048){Zr(s,i,o,u),s=i.stateNode;try{var y=i.memoizedProps,w=y.id,j=y.onPostCommit;typeof j=="function"&&j(w,i.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(G){Nt(i,i.return,G)}}else Zr(s,i,o,u);break;case 31:Zr(s,i,o,u);break;case 13:Zr(s,i,o,u);break;case 23:break;case 22:y=i.stateNode,w=i.alternate,i.memoizedState!==null?y._visibility&2?Zr(s,i,o,u):ru(s,i):y._visibility&2?Zr(s,i,o,u):(y._visibility|=2,pl(s,i,o,u,(i.subtreeFlags&10256)!==0||!1)),p&2048&&Ig(w,i);break;case 24:Zr(s,i,o,u),p&2048&&jg(i.alternate,i);break;default:Zr(s,i,o,u)}}function pl(s,i,o,u,p){for(p=p&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var y=s,w=i,j=o,G=u,ee=w.flags;switch(w.tag){case 0:case 11:case 15:pl(y,w,j,G,p),tu(8,w);break;case 23:break;case 22:var ue=w.stateNode;w.memoizedState!==null?ue._visibility&2?pl(y,w,j,G,p):ru(y,w):(ue._visibility|=2,pl(y,w,j,G,p)),p&&ee&2048&&Ig(w.alternate,w);break;case 24:pl(y,w,j,G,p),p&&ee&2048&&jg(w.alternate,w);break;default:pl(y,w,j,G,p)}i=i.sibling}}function ru(s,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=s,u=i,p=u.flags;switch(u.tag){case 22:ru(o,u),p&2048&&Ig(u.alternate,u);break;case 24:ru(o,u),p&2048&&jg(u.alternate,u);break;default:ru(o,u)}i=i.sibling}}var su=8192;function gl(s,i,o){if(s.subtreeFlags&su)for(s=s.child;s!==null;)Kx(s,i,o),s=s.sibling}function Kx(s,i,o){switch(s.tag){case 26:gl(s,i,o),s.flags&su&&s.memoizedState!==null&&jR(o,Jr,s.memoizedState,s.memoizedProps);break;case 5:gl(s,i,o);break;case 3:case 4:var u=Jr;Jr=$h(s.stateNode.containerInfo),gl(s,i,o),Jr=u;break;case 22:s.memoizedState===null&&(u=s.alternate,u!==null&&u.memoizedState!==null?(u=su,su=16777216,gl(s,i,o),su=u):gl(s,i,o));break;default:gl(s,i,o)}}function Qx(s){var i=s.alternate;if(i!==null&&(s=i.child,s!==null)){i.child=null;do i=s.sibling,s.sibling=null,s=i;while(s!==null)}}function iu(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Tn=u,Wx(u,s)}Qx(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Xx(s),s=s.sibling}function Xx(s){switch(s.tag){case 0:case 11:case 15:iu(s),s.flags&2048&&Yi(9,s,s.return);break;case 3:iu(s);break;case 12:iu(s);break;case 22:var i=s.stateNode;s.memoizedState!==null&&i._visibility&2&&(s.return===null||s.return.tag!==13)?(i._visibility&=-3,Ih(s)):iu(s);break;default:iu(s)}}function Ih(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Tn=u,Wx(u,s)}Qx(s)}for(s=s.child;s!==null;){switch(i=s,i.tag){case 0:case 11:case 15:Yi(8,i,i.return),Ih(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Ih(i));break;default:Ih(i)}s=s.sibling}}function Wx(s,i){for(;Tn!==null;){var o=Tn;switch(o.tag){case 0:case 11:case 15:Yi(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Fc(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Tn=u;else e:for(o=s;Tn!==null;){u=Tn;var p=u.sibling,y=u.return;if(Bx(u),u===o){Tn=null;break e}if(p!==null){p.return=y,Tn=p;break e}Tn=y}}}var Y3={getCacheForType:function(s){var i=jn(cn),o=i.data.get(s);return o===void 0&&(o=s(),i.data.set(s,o)),o},cacheSignal:function(){return jn(cn).controller.signal}},K3=typeof WeakMap=="function"?WeakMap:Map,Et=0,Pt=null,lt=null,ut=0,Rt=0,br=null,Ki=!1,yl=!1,Dg=!1,ui=0,Qt=0,Qi=0,co=0,Mg=0,xr=0,vl=0,au=null,ar=null,Og=!1,jh=0,Jx=0,Dh=1/0,Mh=null,Xi=null,bn=0,Wi=null,bl=null,di=0,Pg=0,Lg=null,Zx=null,ou=0,Vg=null;function _r(){return(Et&2)!==0&&ut!==0?ut&-ut:Y.T!==null?$g():Od()}function e_(){if(xr===0)if((ut&536870912)===0||yt){var s=Pa;Pa<<=1,(Pa&3932160)===0&&(Pa=262144),xr=s}else xr=536870912;return s=yr.current,s!==null&&(s.flags|=32),xr}function or(s,i,o){(s===Pt&&(Rt===2||Rt===9)||s.cancelPendingCommit!==null)&&(xl(s,0),Ji(s,ut,xr,!1)),La(s,o),((Et&2)===0||s!==Pt)&&(s===Pt&&((Et&2)===0&&(co|=o),Qt===4&&Ji(s,ut,xr,!1)),ks(s))}function t_(s,i,o){if((Et&6)!==0)throw Error(r(327));var u=!o&&(i&127)===0&&(i&s.expiredLanes)===0||Hr(s,i),p=u?W3(s,i):zg(s,i,!0),y=u;do{if(p===0){yl&&!u&&Ji(s,i,0,!1);break}else{if(o=s.current.alternate,y&&!Q3(o)){p=zg(s,i,!1),y=!1;continue}if(p===2){if(y=i,s.errorRecoveryDisabledLanes&y)var w=0;else w=s.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){i=w;e:{var j=s;p=au;var G=j.current.memoizedState.isDehydrated;if(G&&(xl(j,w).flags|=256),w=zg(j,w,!1),w!==2){if(Dg&&!G){j.errorRecoveryDisabledLanes|=y,co|=y,p=4;break e}y=ar,ar=p,y!==null&&(ar===null?ar=y:ar.push.apply(ar,y))}p=w}if(y=!1,p!==2)continue}}if(p===1){xl(s,0),Ji(s,i,0,!0);break}e:{switch(u=s,y=p,y){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Ji(u,i,xr,!Ki);break e;case 2:ar=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(p=jh+300-ge(),10<p)){if(Ji(u,i,xr,!Ki),cs(u,0,!0)!==0)break e;di=i,u.timeoutHandle=j_(n_.bind(null,u,o,ar,Mh,Og,i,xr,co,vl,Ki,y,"Throttled",-0,0),p);break e}n_(u,o,ar,Mh,Og,i,xr,co,vl,Ki,y,null,-0,0)}}break}while(!0);ks(s)}function n_(s,i,o,u,p,y,w,j,G,ee,ue,me,te,oe){if(s.timeoutHandle=-1,me=i.subtreeFlags,me&8192||(me&16785408)===16785408){me={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Gr},Kx(i,y,me);var Pe=(y&62914560)===y?jh-ge():(y&4194048)===y?Jx-ge():0;if(Pe=DR(me,Pe),Pe!==null){di=y,s.cancelPendingCommit=Pe(u_.bind(null,s,i,y,o,u,p,w,j,G,ue,me,null,te,oe)),Ji(s,y,w,!ee);return}}u_(s,i,y,o,u,p,w,j,G)}function Q3(s){for(var i=s;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var p=o[u],y=p.getSnapshot;p=p.value;try{if(!pr(y(),p))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ji(s,i,o,u){i&=~Mg,i&=~co,s.suspendedLanes|=i,s.pingedLanes&=~i,u&&(s.warmLanes|=i),u=s.expirationTimes;for(var p=i;0<p;){var y=31-Jt(p),w=1<<y;u[y]=-1,p&=~w}o!==0&&Va(s,o,i)}function Oh(){return(Et&6)===0?(lu(0),!1):!0}function Ug(){if(lt!==null){if(Rt===0)var s=lt.return;else s=lt,ei=eo=null,tg(s),ul=null,$c=0,s=lt;for(;s!==null;)Dx(s.alternate,s),s=s.return;lt=null}}function xl(s,i){var o=s.timeoutHandle;o!==-1&&(s.timeoutHandle=-1,pR(o)),o=s.cancelPendingCommit,o!==null&&(s.cancelPendingCommit=null,o()),di=0,Ug(),Pt=s,lt=o=Js(s.current,null),ut=i,Rt=0,br=null,Ki=!1,yl=Hr(s,i),Dg=!1,vl=xr=Mg=co=Qi=Qt=0,ar=au=null,Og=!1,(i&8)!==0&&(i|=i&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=i;0<u;){var p=31-Jt(u),y=1<<p;i|=s[p],u&=~y}return ui=i,nh(),o}function r_(s,i){st=null,Y.H=Jc,i===cl||i===uh?(i=b1(),Rt=3):i===Hp?(i=b1(),Rt=4):Rt=i===yg?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,br=i,lt===null&&(Qt=1,Sh(s,Dr(i,s.current)))}function s_(){var s=yr.current;return s===null?!0:(ut&4194048)===ut?Lr===null:(ut&62914560)===ut||(ut&536870912)!==0?s===Lr:!1}function i_(){var s=Y.H;return Y.H=Jc,s===null?Jc:s}function a_(){var s=Y.A;return Y.A=Y3,s}function Ph(){Qt=4,Ki||(ut&4194048)!==ut&&yr.current!==null||(yl=!0),(Qi&134217727)===0&&(co&134217727)===0||Pt===null||Ji(Pt,ut,xr,!1)}function zg(s,i,o){var u=Et;Et|=2;var p=i_(),y=a_();(Pt!==s||ut!==i)&&(Mh=null,xl(s,i)),i=!1;var w=Qt;e:do try{if(Rt!==0&&lt!==null){var j=lt,G=br;switch(Rt){case 8:Ug(),w=6;break e;case 3:case 2:case 9:case 6:yr.current===null&&(i=!0);var ee=Rt;if(Rt=0,br=null,_l(s,j,G,ee),o&&yl){w=0;break e}break;default:ee=Rt,Rt=0,br=null,_l(s,j,G,ee)}}X3(),w=Qt;break}catch(ue){r_(s,ue)}while(!0);return i&&s.shellSuspendCounter++,ei=eo=null,Et=u,Y.H=p,Y.A=y,lt===null&&(Pt=null,ut=0,nh()),w}function X3(){for(;lt!==null;)o_(lt)}function W3(s,i){var o=Et;Et|=2;var u=i_(),p=a_();Pt!==s||ut!==i?(Mh=null,Dh=ge()+500,xl(s,i)):yl=Hr(s,i);e:do try{if(Rt!==0&&lt!==null){i=lt;var y=br;t:switch(Rt){case 1:Rt=0,br=null,_l(s,i,y,1);break;case 2:case 9:if(y1(y)){Rt=0,br=null,l_(i);break}i=function(){Rt!==2&&Rt!==9||Pt!==s||(Rt=7),ks(s)},y.then(i,i);break e;case 3:Rt=7;break e;case 4:Rt=5;break e;case 7:y1(y)?(Rt=0,br=null,l_(i)):(Rt=0,br=null,_l(s,i,y,7));break;case 5:var w=null;switch(lt.tag){case 26:w=lt.memoizedState;case 5:case 27:var j=lt;if(w?Y_(w):j.stateNode.complete){Rt=0,br=null;var G=j.sibling;if(G!==null)lt=G;else{var ee=j.return;ee!==null?(lt=ee,Lh(ee)):lt=null}break t}}Rt=0,br=null,_l(s,i,y,5);break;case 6:Rt=0,br=null,_l(s,i,y,6);break;case 8:Ug(),Qt=6;break e;default:throw Error(r(462))}}J3();break}catch(ue){r_(s,ue)}while(!0);return ei=eo=null,Y.H=u,Y.A=p,Et=o,lt!==null?0:(Pt=null,ut=0,nh(),Qt)}function J3(){for(;lt!==null&&!It();)o_(lt)}function o_(s){var i=Ix(s.alternate,s,ui);s.memoizedProps=s.pendingProps,i===null?Lh(s):lt=i}function l_(s){var i=s,o=i.alternate;switch(i.tag){case 15:case 0:i=Tx(o,i,i.pendingProps,i.type,void 0,ut);break;case 11:i=Tx(o,i,i.pendingProps,i.type.render,i.ref,ut);break;case 5:tg(i);default:Dx(o,i),i=lt=a1(i,ui),i=Ix(o,i,ui)}s.memoizedProps=s.pendingProps,i===null?Lh(s):lt=i}function _l(s,i,o,u){ei=eo=null,tg(i),ul=null,$c=0;var p=i.return;try{if(z3(s,p,i,o,ut)){Qt=1,Sh(s,Dr(o,s.current)),lt=null;return}}catch(y){if(p!==null)throw lt=p,y;Qt=1,Sh(s,Dr(o,s.current)),lt=null;return}i.flags&32768?(yt||u===1?s=!0:yl||(ut&536870912)!==0?s=!1:(Ki=s=!0,(u===2||u===9||u===3||u===6)&&(u=yr.current,u!==null&&u.tag===13&&(u.flags|=16384))),c_(i,s)):Lh(i)}function Lh(s){var i=s;do{if((i.flags&32768)!==0){c_(i,Ki);return}s=i.return;var o=H3(i.alternate,i,ui);if(o!==null){lt=o;return}if(i=i.sibling,i!==null){lt=i;return}lt=i=s}while(i!==null);Qt===0&&(Qt=5)}function c_(s,i){do{var o=$3(s.alternate,s);if(o!==null){o.flags&=32767,lt=o;return}if(o=s.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(s=s.sibling,s!==null)){lt=s;return}lt=s=o}while(s!==null);Qt=6,lt=null}function u_(s,i,o,u,p,y,w,j,G){s.cancelPendingCommit=null;do Vh();while(bn!==0);if((Et&6)!==0)throw Error(r(327));if(i!==null){if(i===s.current)throw Error(r(177));if(y=i.lanes|i.childLanes,y|=Ap,bp(s,o,y,w,j,G),s===Pt&&(lt=Pt=null,ut=0),bl=i,Wi=s,di=o,Pg=y,Lg=p,Zx=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,nR(wn,function(){return p_(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=Y.T,Y.T=null,p=se.p,se.p=2,w=Et,Et|=4;try{q3(s,i,o)}finally{Et=w,se.p=p,Y.T=u}}bn=1,d_(),h_(),f_()}}function d_(){if(bn===1){bn=0;var s=Wi,i=bl,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=Y.T,Y.T=null;var u=se.p;se.p=2;var p=Et;Et|=4;try{qx(i,s);var y=Jg,w=Wb(s.containerInfo),j=y.focusedElem,G=y.selectionRange;if(w!==j&&j&&j.ownerDocument&&Xb(j.ownerDocument.documentElement,j)){if(G!==null&&Ep(j)){var ee=G.start,ue=G.end;if(ue===void 0&&(ue=ee),"selectionStart"in j)j.selectionStart=ee,j.selectionEnd=Math.min(ue,j.value.length);else{var me=j.ownerDocument||document,te=me&&me.defaultView||window;if(te.getSelection){var oe=te.getSelection(),Pe=j.textContent.length,Qe=Math.min(G.start,Pe),Ot=G.end===void 0?Qe:Math.min(G.end,Pe);!oe.extend&&Qe>Ot&&(w=Ot,Ot=Qe,Qe=w);var Q=Qb(j,Qe),K=Qb(j,Ot);if(Q&&K&&(oe.rangeCount!==1||oe.anchorNode!==Q.node||oe.anchorOffset!==Q.offset||oe.focusNode!==K.node||oe.focusOffset!==K.offset)){var Z=me.createRange();Z.setStart(Q.node,Q.offset),oe.removeAllRanges(),Qe>Ot?(oe.addRange(Z),oe.extend(K.node,K.offset)):(Z.setEnd(K.node,K.offset),oe.addRange(Z))}}}}for(me=[],oe=j;oe=oe.parentNode;)oe.nodeType===1&&me.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<me.length;j++){var fe=me[j];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}Xh=!!Wg,Jg=Wg=null}finally{Et=p,se.p=u,Y.T=o}}s.current=i,bn=2}}function h_(){if(bn===2){bn=0;var s=Wi,i=bl,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=Y.T,Y.T=null;var u=se.p;se.p=2;var p=Et;Et|=4;try{zx(s,i.alternate,i)}finally{Et=p,se.p=u,Y.T=o}}bn=3}}function f_(){if(bn===4||bn===3){bn=0,kt();var s=Wi,i=bl,o=di,u=Zx;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?bn=5:(bn=0,bl=Wi=null,m_(s,s.pendingLanes));var p=s.pendingLanes;if(p===0&&(Xi=null),Ks(o),i=i.stateNode,Rn&&typeof Rn.onCommitFiberRoot=="function")try{Rn.onCommitFiberRoot(Fr,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=Y.T,p=se.p,se.p=2,Y.T=null;try{for(var y=s.onRecoverableError,w=0;w<u.length;w++){var j=u[w];y(j.value,{componentStack:j.stack})}}finally{Y.T=i,se.p=p}}(di&3)!==0&&Vh(),ks(s),p=s.pendingLanes,(o&261930)!==0&&(p&42)!==0?s===Vg?ou++:(ou=0,Vg=s):ou=0,lu(0)}}function m_(s,i){(s.pooledCacheLanes&=i)===0&&(i=s.pooledCache,i!=null&&(s.pooledCache=null,Fc(i)))}function Vh(){return d_(),h_(),f_(),p_()}function p_(){if(bn!==5)return!1;var s=Wi,i=Pg;Pg=0;var o=Ks(di),u=Y.T,p=se.p;try{se.p=32>o?32:o,Y.T=null,o=Lg,Lg=null;var y=Wi,w=di;if(bn=0,bl=Wi=null,di=0,(Et&6)!==0)throw Error(r(331));var j=Et;if(Et|=4,Xx(y.current),Yx(y,y.current,w,o),Et=j,lu(0,!1),Rn&&typeof Rn.onPostCommitFiberRoot=="function")try{Rn.onPostCommitFiberRoot(Fr,y)}catch{}return!0}finally{se.p=p,Y.T=u,m_(s,i)}}function g_(s,i,o){i=Dr(o,i),i=gg(s.stateNode,i,2),s=$i(s,i,2),s!==null&&(La(s,2),ks(s))}function Nt(s,i,o){if(s.tag===3)g_(s,s,o);else for(;i!==null;){if(i.tag===3){g_(i,s,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Xi===null||!Xi.has(u))){s=Dr(o,s),o=yx(2),u=$i(i,o,2),u!==null&&(vx(o,u,i,s),La(u,2),ks(u));break}}i=i.return}}function Bg(s,i,o){var u=s.pingCache;if(u===null){u=s.pingCache=new K3;var p=new Set;u.set(i,p)}else p=u.get(i),p===void 0&&(p=new Set,u.set(i,p));p.has(o)||(Dg=!0,p.add(o),s=Z3.bind(null,s,i,o),i.then(s,s))}function Z3(s,i,o){var u=s.pingCache;u!==null&&u.delete(i),s.pingedLanes|=s.suspendedLanes&o,s.warmLanes&=~o,Pt===s&&(ut&o)===o&&(Qt===4||Qt===3&&(ut&62914560)===ut&&300>ge()-jh?(Et&2)===0&&xl(s,0):Mg|=o,vl===ut&&(vl=0)),ks(s)}function y_(s,i){i===0&&(i=Md()),s=Wa(s,i),s!==null&&(La(s,i),ks(s))}function eR(s){var i=s.memoizedState,o=0;i!==null&&(o=i.retryLane),y_(s,o)}function tR(s,i){var o=0;switch(s.tag){case 31:case 13:var u=s.stateNode,p=s.memoizedState;p!==null&&(o=p.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(i),y_(s,o)}function nR(s,i){return qe(s,i)}var Uh=null,wl=null,Fg=!1,zh=!1,Hg=!1,Zi=0;function ks(s){s!==wl&&s.next===null&&(wl===null?Uh=wl=s:wl=wl.next=s),zh=!0,Fg||(Fg=!0,sR())}function lu(s,i){if(!Hg&&zh){Hg=!0;do for(var o=!1,u=Uh;u!==null;){if(s!==0){var p=u.pendingLanes;if(p===0)var y=0;else{var w=u.suspendedLanes,j=u.pingedLanes;y=(1<<31-Jt(42|s)+1)-1,y&=p&~(w&~j),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(o=!0,__(u,y))}else y=ut,y=cs(u,u===Pt?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||Hr(u,y)||(o=!0,__(u,y));u=u.next}while(o);Hg=!1}}function rR(){v_()}function v_(){zh=Fg=!1;var s=0;Zi!==0&&mR()&&(s=Zi);for(var i=ge(),o=null,u=Uh;u!==null;){var p=u.next,y=b_(u,i);y===0?(u.next=null,o===null?Uh=p:o.next=p,p===null&&(wl=o)):(o=u,(s!==0||(y&3)!==0)&&(zh=!0)),u=p}bn!==0&&bn!==5||lu(s),Zi!==0&&(Zi=0)}function b_(s,i){for(var o=s.suspendedLanes,u=s.pingedLanes,p=s.expirationTimes,y=s.pendingLanes&-62914561;0<y;){var w=31-Jt(y),j=1<<w,G=p[w];G===-1?((j&o)===0||(j&u)!==0)&&(p[w]=vp(j,i)):G<=i&&(s.expiredLanes|=j),y&=~j}if(i=Pt,o=ut,o=cs(s,s===i?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,o===0||s===i&&(Rt===2||Rt===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&Ke(u),s.callbackNode=null,s.callbackPriority=0;if((o&3)===0||Hr(s,o)){if(i=o&-o,i===s.callbackPriority)return i;switch(u!==null&&Ke(u),Ks(o)){case 2:case 8:o=Ht;break;case 32:o=wn;break;case 268435456:o=Yt;break;default:o=wn}return u=x_.bind(null,s),o=qe(o,u),s.callbackPriority=i,s.callbackNode=o,i}return u!==null&&u!==null&&Ke(u),s.callbackPriority=2,s.callbackNode=null,2}function x_(s,i){if(bn!==0&&bn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var o=s.callbackNode;if(Vh()&&s.callbackNode!==o)return null;var u=ut;return u=cs(s,s===Pt?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(t_(s,u,i),b_(s,ge()),s.callbackNode!=null&&s.callbackNode===o?x_.bind(null,s):null)}function __(s,i){if(Vh())return null;t_(s,i,!0)}function sR(){gR(function(){(Et&6)!==0?qe(gt,rR):v_()})}function $g(){if(Zi===0){var s=ol;s===0&&(s=os,os<<=1,(os&261888)===0&&(os=256)),Zi=s}return Zi}function w_(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Go(""+s)}function E_(s,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,s.id&&o.setAttribute("form",s.id),i.parentNode.insertBefore(o,i),s=new FormData(s),o.parentNode.removeChild(o),s}function iR(s,i,o,u,p){if(i==="submit"&&o&&o.stateNode===p){var y=w_((p[En]||null).action),w=u.submitter;w&&(i=(i=w[En]||null)?w_(i.formAction):w.getAttribute("formAction"),i!==null&&(y=i,w=null));var j=new xs("action","action",null,u,p);s.push({event:j,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Zi!==0){var G=w?E_(p,w):new FormData(p);ug(o,{pending:!0,data:G,method:p.method,action:y},null,G)}}else typeof y=="function"&&(j.preventDefault(),G=w?E_(p,w):new FormData(p),ug(o,{pending:!0,data:G,method:p.method,action:y},y,G))},currentTarget:p}]})}}for(var qg=0;qg<kp.length;qg++){var Gg=kp[qg],aR=Gg.toLowerCase(),oR=Gg[0].toUpperCase()+Gg.slice(1);Wr(aR,"on"+oR)}Wr(e1,"onAnimationEnd"),Wr(t1,"onAnimationIteration"),Wr(n1,"onAnimationStart"),Wr("dblclick","onDoubleClick"),Wr("focusin","onFocus"),Wr("focusout","onBlur"),Wr(E3,"onTransitionRun"),Wr(S3,"onTransitionStart"),Wr(T3,"onTransitionCancel"),Wr(r1,"onTransitionEnd"),gs("onMouseEnter",["mouseout","mouseover"]),gs("onMouseLeave",["mouseout","mouseover"]),gs("onPointerEnter",["pointerout","pointerover"]),gs("onPointerLeave",["pointerout","pointerover"]),ps("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ps("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ps("onBeforeInput",["compositionend","keypress","textInput","paste"]),ps("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ps("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ps("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cu));function S_(s,i){i=(i&4)!==0;for(var o=0;o<s.length;o++){var u=s[o],p=u.event;u=u.listeners;e:{var y=void 0;if(i)for(var w=u.length-1;0<=w;w--){var j=u[w],G=j.instance,ee=j.currentTarget;if(j=j.listener,G!==y&&p.isPropagationStopped())break e;y=j,p.currentTarget=ee;try{y(p)}catch(ue){th(ue)}p.currentTarget=null,y=G}else for(w=0;w<u.length;w++){if(j=u[w],G=j.instance,ee=j.currentTarget,j=j.listener,G!==y&&p.isPropagationStopped())break e;y=j,p.currentTarget=ee;try{y(p)}catch(ue){th(ue)}p.currentTarget=null,y=G}}}}function ct(s,i){var o=i[Bo];o===void 0&&(o=i[Bo]=new Set);var u=s+"__bubble";o.has(u)||(T_(i,s,2,!1),o.add(u))}function Yg(s,i,o){var u=0;i&&(u|=4),T_(o,s,u,i)}var Bh="_reactListening"+Math.random().toString(36).slice(2);function Kg(s){if(!s[Bh]){s[Bh]=!0,_c.forEach(function(o){o!=="selectionchange"&&(lR.has(o)||Yg(o,!1,s),Yg(o,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[Bh]||(i[Bh]=!0,Yg("selectionchange",!1,i))}}function T_(s,i,o,u){switch(e2(i)){case 2:var p=PR;break;case 8:p=LR;break;default:p=cy}o=p.bind(null,i,o,s),p=void 0,!Ha||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),u?p!==void 0?s.addEventListener(i,o,{capture:!0,passive:p}):s.addEventListener(i,o,!0):p!==void 0?s.addEventListener(i,o,{passive:p}):s.addEventListener(i,o,!1)}function Qg(s,i,o,u,p){var y=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var j=u.stateNode.containerInfo;if(j===p)break;if(w===4)for(w=u.return;w!==null;){var G=w.tag;if((G===3||G===4)&&w.stateNode.containerInfo===p)return;w=w.return}for(;j!==null;){if(w=fs(j),w===null)return;if(G=w.tag,G===5||G===6||G===26||G===27){u=y=w;continue e}j=j.parentNode}}u=u.return}Mi(function(){var ee=y,ue=Rr(o),me=[];e:{var te=s1.get(s);if(te!==void 0){var oe=xs,Pe=s;switch(s){case"keypress":if(qa(o)===0)break e;case"keydown":case"keyup":oe=Jd;break;case"focusin":Pe="focus",oe=Ya;break;case"focusout":Pe="blur",oe=Ya;break;case"beforeblur":case"afterblur":oe=Ya;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=Mc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=Hd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=x;break;case e1:case t1:case n1:oe=qd;break;case r1:oe=L;break;case"scroll":case"scrollend":oe=Dc;break;case"wheel":oe=ie;break;case"copy":case"cut":case"paste":oe=Gd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=Ws;break;case"toggle":case"beforetoggle":oe=rt}var Qe=(i&4)!==0,Ot=!Qe&&(s==="scroll"||s==="scrollend"),Q=Qe?te!==null?te+"Capture":null:te;Qe=[];for(var K=ee,Z;K!==null;){var fe=K;if(Z=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||Z===null||Q===null||(fe=Yr(K,Q),fe!=null&&Qe.push(uu(K,fe,Z))),Ot)break;K=K.return}0<Qe.length&&(te=new oe(te,Pe,null,o,ue),me.push({event:te,listeners:Qe}))}}if((i&7)===0){e:{if(te=s==="mouseover"||s==="pointerover",oe=s==="mouseout"||s==="pointerout",te&&o!==Nc&&(Pe=o.relatedTarget||o.fromElement)&&(fs(Pe)||Pe[ds]))break e;if((oe||te)&&(te=ue.window===ue?ue:(te=ue.ownerDocument)?te.defaultView||te.parentWindow:window,oe?(Pe=o.relatedTarget||o.toElement,oe=ee,Pe=Pe?fs(Pe):null,Pe!==null&&(Ot=l(Pe),Qe=Pe.tag,Pe!==Ot||Qe!==5&&Qe!==27&&Qe!==6)&&(Pe=null)):(oe=null,Pe=ee),oe!==Pe)){if(Qe=Mc,fe="onMouseLeave",Q="onMouseEnter",K="mouse",(s==="pointerout"||s==="pointerover")&&(Qe=Ws,fe="onPointerLeave",Q="onPointerEnter",K="pointer"),Ot=oe==null?te:fr(oe),Z=Pe==null?te:fr(Pe),te=new Qe(fe,K+"leave",oe,o,ue),te.target=Ot,te.relatedTarget=Z,fe=null,fs(ue)===ee&&(Qe=new Qe(Q,K+"enter",Pe,o,ue),Qe.target=Z,Qe.relatedTarget=Ot,fe=Qe),Ot=fe,oe&&Pe)t:{for(Qe=cR,Q=oe,K=Pe,Z=0,fe=Q;fe;fe=Qe(fe))Z++;fe=0;for(var $e=K;$e;$e=Qe($e))fe++;for(;0<Z-fe;)Q=Qe(Q),Z--;for(;0<fe-Z;)K=Qe(K),fe--;for(;Z--;){if(Q===K||K!==null&&Q===K.alternate){Qe=Q;break t}Q=Qe(Q),K=Qe(K)}Qe=null}else Qe=null;oe!==null&&C_(me,te,oe,Qe,!1),Pe!==null&&Ot!==null&&C_(me,Ot,Pe,Qe,!0)}}e:{if(te=ee?fr(ee):window,oe=te.nodeName&&te.nodeName.toLowerCase(),oe==="select"||oe==="input"&&te.type==="file")var bt=Hb;else if(Bb(te))if($b)bt=x3;else{bt=v3;var Be=y3}else oe=te.nodeName,!oe||oe.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?ee&&qo(ee.elementType)&&(bt=Hb):bt=b3;if(bt&&(bt=bt(s,ee))){Fb(me,bt,o,ue);break e}Be&&Be(s,te,ee),s==="focusout"&&ee&&te.type==="number"&&ee.memoizedProps.value!=null&&kc(te,"number",te.value)}switch(Be=ee?fr(ee):window,s){case"focusin":(Bb(Be)||Be.contentEditable==="true")&&(Zo=Be,Sp=ee,Uc=null);break;case"focusout":Uc=Sp=Zo=null;break;case"mousedown":Tp=!0;break;case"contextmenu":case"mouseup":case"dragend":Tp=!1,Jb(me,o,ue);break;case"selectionchange":if(w3)break;case"keydown":case"keyup":Jb(me,o,ue)}var it;if(wt)e:{switch(s){case"compositionstart":var dt="onCompositionStart";break e;case"compositionend":dt="onCompositionEnd";break e;case"compositionupdate":dt="onCompositionUpdate";break e}dt=void 0}else Jo?Ka(s,o)&&(dt="onCompositionEnd"):s==="keydown"&&o.keyCode===229&&(dt="onCompositionStart");dt&&(Es&&o.locale!=="ko"&&(Jo||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&Jo&&(it=jc()):(bs=ue,Ic="value"in bs?bs.value:bs.textContent,Jo=!0)),Be=Fh(ee,dt),0<Be.length&&(dt=new ws(dt,s,null,o,ue),me.push({event:dt,listeners:Be}),it?dt.data=it:(it=Wo(o),it!==null&&(dt.data=it)))),(it=Ir?f3(s,o):m3(s,o))&&(dt=Fh(ee,"onBeforeInput"),0<dt.length&&(Be=new ws("onBeforeInput","beforeinput",null,o,ue),me.push({event:Be,listeners:dt}),Be.data=it)),iR(me,s,ee,o,ue)}S_(me,i)})}function uu(s,i,o){return{instance:s,listener:i,currentTarget:o}}function Fh(s,i){for(var o=i+"Capture",u=[];s!==null;){var p=s,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=Yr(s,o),p!=null&&u.unshift(uu(s,p,y)),p=Yr(s,i),p!=null&&u.push(uu(s,p,y))),s.tag===3)return u;s=s.return}return[]}function cR(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function C_(s,i,o,u,p){for(var y=i._reactName,w=[];o!==null&&o!==u;){var j=o,G=j.alternate,ee=j.stateNode;if(j=j.tag,G!==null&&G===u)break;j!==5&&j!==26&&j!==27||ee===null||(G=ee,p?(ee=Yr(o,y),ee!=null&&w.unshift(uu(o,ee,G))):p||(ee=Yr(o,y),ee!=null&&w.push(uu(o,ee,G)))),o=o.return}w.length!==0&&s.push({event:i,listeners:w})}var uR=/\r\n?/g,dR=/\u0000|\uFFFD/g;function k_(s){return(typeof s=="string"?s:""+s).replace(uR,`
`).replace(dR,"")}function A_(s,i){return i=k_(i),k_(s)===i}function Mt(s,i,o,u,p,y){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||nr(s,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&nr(s,""+u);break;case"className":mr(s,"class",u);break;case"tabIndex":mr(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":mr(s,o,u);break;case"style":Rc(s,u,y);break;case"data":if(i!=="object"){mr(s,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){s.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(o);break}u=Go(""+u),s.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(i!=="input"&&Mt(s,i,"name",p.name,p,null),Mt(s,i,"formEncType",p.formEncType,p,null),Mt(s,i,"formMethod",p.formMethod,p,null),Mt(s,i,"formTarget",p.formTarget,p,null)):(Mt(s,i,"encType",p.encType,p,null),Mt(s,i,"method",p.method,p,null),Mt(s,i,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(o);break}u=Go(""+u),s.setAttribute(o,u);break;case"onClick":u!=null&&(s.onclick=Gr);break;case"onScroll":u!=null&&ct("scroll",s);break;case"onScrollEnd":u!=null&&ct("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(p.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}o=Go(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,""+u):s.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,""):s.removeAttribute(o);break;case"capture":case"download":u===!0?s.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,u):s.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(o,u):s.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(o):s.setAttribute(o,u);break;case"popover":ct("beforetoggle",s),ct("toggle",s),Ho(s,"popover",u);break;case"xlinkActuate":ln(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":ln(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":ln(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":ln(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":ln(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":ln(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":ln(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":ln(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":ln(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ho(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Fd.get(o)||o,Ho(s,o,u))}}function Xg(s,i,o,u,p,y){switch(o){case"style":Rc(s,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(p.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"children":typeof u=="string"?nr(s,u):(typeof u=="number"||typeof u=="bigint")&&nr(s,""+u);break;case"onScroll":u!=null&&ct("scroll",s);break;case"onScrollEnd":u!=null&&ct("scrollend",s);break;case"onClick":u!=null&&(s.onclick=Gr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wc.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(p=o.endsWith("Capture"),i=o.slice(2,p?o.length-7:void 0),y=s[En]||null,y=y!=null?y[o]:null,typeof y=="function"&&s.removeEventListener(i,y,p),typeof u=="function")){typeof y!="function"&&y!==null&&(o in s?s[o]=null:s.hasAttribute(o)&&s.removeAttribute(o)),s.addEventListener(i,u,p);break e}o in s?s[o]=u:u===!0?s.setAttribute(o,""):Ho(s,o,u)}}}function Mn(s,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ct("error",s),ct("load",s);var u=!1,p=!1,y;for(y in o)if(o.hasOwnProperty(y)){var w=o[y];if(w!=null)switch(y){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Mt(s,i,y,w,o,null)}}p&&Mt(s,i,"srcSet",o.srcSet,o,null),u&&Mt(s,i,"src",o.src,o,null);return;case"input":ct("invalid",s);var j=y=w=p=null,G=null,ee=null;for(u in o)if(o.hasOwnProperty(u)){var ue=o[u];if(ue!=null)switch(u){case"name":p=ue;break;case"type":w=ue;break;case"checked":G=ue;break;case"defaultChecked":ee=ue;break;case"value":y=ue;break;case"defaultValue":j=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,i));break;default:Mt(s,i,u,ue,o,null)}}Ud(s,y,j,G,ee,w,p,!1);return;case"select":ct("invalid",s),u=w=y=null;for(p in o)if(o.hasOwnProperty(p)&&(j=o[p],j!=null))switch(p){case"value":y=j;break;case"defaultValue":w=j;break;case"multiple":u=j;default:Mt(s,i,p,j,o,null)}i=y,o=w,s.multiple=!!u,i!=null?Ni(s,!!u,i,!1):o!=null&&Ni(s,!!u,o,!0);return;case"textarea":ct("invalid",s),y=p=u=null;for(w in o)if(o.hasOwnProperty(w)&&(j=o[w],j!=null))switch(w){case"value":u=j;break;case"defaultValue":p=j;break;case"children":y=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(91));break;default:Mt(s,i,w,j,o,null)}Ii(s,u,p,y);return;case"option":for(G in o)if(o.hasOwnProperty(G)&&(u=o[G],u!=null))switch(G){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Mt(s,i,G,u,o,null)}return;case"dialog":ct("beforetoggle",s),ct("toggle",s),ct("cancel",s),ct("close",s);break;case"iframe":case"object":ct("load",s);break;case"video":case"audio":for(u=0;u<cu.length;u++)ct(cu[u],s);break;case"image":ct("error",s),ct("load",s);break;case"details":ct("toggle",s);break;case"embed":case"source":case"link":ct("error",s),ct("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in o)if(o.hasOwnProperty(ee)&&(u=o[ee],u!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Mt(s,i,ee,u,o,null)}return;default:if(qo(i)){for(ue in o)o.hasOwnProperty(ue)&&(u=o[ue],u!==void 0&&Xg(s,i,ue,u,o,void 0));return}}for(j in o)o.hasOwnProperty(j)&&(u=o[j],u!=null&&Mt(s,i,j,u,o,null))}function hR(s,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,w=null,j=null,G=null,ee=null,ue=null;for(oe in o){var me=o[oe];if(o.hasOwnProperty(oe)&&me!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":G=me;default:u.hasOwnProperty(oe)||Mt(s,i,oe,null,u,me)}}for(var te in u){var oe=u[te];if(me=o[te],u.hasOwnProperty(te)&&(oe!=null||me!=null))switch(te){case"type":y=oe;break;case"name":p=oe;break;case"checked":ee=oe;break;case"defaultChecked":ue=oe;break;case"value":w=oe;break;case"defaultValue":j=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,i));break;default:oe!==me&&Mt(s,i,te,oe,u,me)}}$o(s,w,j,G,ee,ue,y,p);return;case"select":oe=w=j=te=null;for(y in o)if(G=o[y],o.hasOwnProperty(y)&&G!=null)switch(y){case"value":break;case"multiple":oe=G;default:u.hasOwnProperty(y)||Mt(s,i,y,null,u,G)}for(p in u)if(y=u[p],G=o[p],u.hasOwnProperty(p)&&(y!=null||G!=null))switch(p){case"value":te=y;break;case"defaultValue":j=y;break;case"multiple":w=y;default:y!==G&&Mt(s,i,p,y,u,G)}i=j,o=w,u=oe,te!=null?Ni(s,!!o,te,!1):!!u!=!!o&&(i!=null?Ni(s,!!o,i,!0):Ni(s,!!o,o?[]:"",!1));return;case"textarea":oe=te=null;for(j in o)if(p=o[j],o.hasOwnProperty(j)&&p!=null&&!u.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:Mt(s,i,j,null,u,p)}for(w in u)if(p=u[w],y=o[w],u.hasOwnProperty(w)&&(p!=null||y!=null))switch(w){case"value":te=p;break;case"defaultValue":oe=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(r(91));break;default:p!==y&&Mt(s,i,w,p,u,y)}zd(s,te,oe);return;case"option":for(var Pe in o)if(te=o[Pe],o.hasOwnProperty(Pe)&&te!=null&&!u.hasOwnProperty(Pe))switch(Pe){case"selected":s.selected=!1;break;default:Mt(s,i,Pe,null,u,te)}for(G in u)if(te=u[G],oe=o[G],u.hasOwnProperty(G)&&te!==oe&&(te!=null||oe!=null))switch(G){case"selected":s.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:Mt(s,i,G,te,u,oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Qe in o)te=o[Qe],o.hasOwnProperty(Qe)&&te!=null&&!u.hasOwnProperty(Qe)&&Mt(s,i,Qe,null,u,te);for(ee in u)if(te=u[ee],oe=o[ee],u.hasOwnProperty(ee)&&te!==oe&&(te!=null||oe!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,i));break;default:Mt(s,i,ee,te,u,oe)}return;default:if(qo(i)){for(var Ot in o)te=o[Ot],o.hasOwnProperty(Ot)&&te!==void 0&&!u.hasOwnProperty(Ot)&&Xg(s,i,Ot,void 0,u,te);for(ue in u)te=u[ue],oe=o[ue],!u.hasOwnProperty(ue)||te===oe||te===void 0&&oe===void 0||Xg(s,i,ue,te,u,oe);return}}for(var Q in o)te=o[Q],o.hasOwnProperty(Q)&&te!=null&&!u.hasOwnProperty(Q)&&Mt(s,i,Q,null,u,te);for(me in u)te=u[me],oe=o[me],!u.hasOwnProperty(me)||te===oe||te==null&&oe==null||Mt(s,i,me,te,u,oe)}function R_(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function fR(){if(typeof performance.getEntriesByType=="function"){for(var s=0,i=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var p=o[u],y=p.transferSize,w=p.initiatorType,j=p.duration;if(y&&j&&R_(w)){for(w=0,j=p.responseEnd,u+=1;u<o.length;u++){var G=o[u],ee=G.startTime;if(ee>j)break;var ue=G.transferSize,me=G.initiatorType;ue&&R_(me)&&(G=G.responseEnd,w+=ue*(G<j?1:(j-ee)/(G-ee)))}if(--u,i+=8*(y+w)/(p.duration/1e3),s++,10<s)break}}if(0<s)return i/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Wg=null,Jg=null;function Hh(s){return s.nodeType===9?s:s.ownerDocument}function N_(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function I_(s,i){if(s===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&i==="foreignObject"?0:s}function Zg(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var ey=null;function mR(){var s=window.event;return s&&s.type==="popstate"?s===ey?!1:(ey=s,!0):(ey=null,!1)}var j_=typeof setTimeout=="function"?setTimeout:void 0,pR=typeof clearTimeout=="function"?clearTimeout:void 0,D_=typeof Promise=="function"?Promise:void 0,gR=typeof queueMicrotask=="function"?queueMicrotask:typeof D_<"u"?function(s){return D_.resolve(null).then(s).catch(yR)}:j_;function yR(s){setTimeout(function(){throw s})}function ea(s){return s==="head"}function M_(s,i){var o=i,u=0;do{var p=o.nextSibling;if(s.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"||o==="/&"){if(u===0){s.removeChild(p),Cl(i);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")du(s.ownerDocument.documentElement);else if(o==="head"){o=s.ownerDocument.head,du(o);for(var y=o.firstChild;y;){var w=y.nextSibling,j=y.nodeName;y[hs]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&y.rel.toLowerCase()==="stylesheet"||o.removeChild(y),y=w}}else o==="body"&&du(s.ownerDocument.body);o=p}while(o);Cl(i)}function O_(s,i){var o=s;s=0;do{var u=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(s===0)break;s--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||s++;o=u}while(o)}function ty(s){var i=s.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":ty(o),Fo(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}s.removeChild(o)}}function vR(s,i,o,u){for(;s.nodeType===1;){var p=o;if(s.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[hs])switch(i){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(y=s.getAttribute("rel"),y==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(y!==p.rel||s.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||s.getAttribute("title")!==(p.title==null?null:p.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(y=s.getAttribute("src"),(y!==(p.src==null?null:p.src)||s.getAttribute("type")!==(p.type==null?null:p.type)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(i==="input"&&s.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&s.getAttribute("name")===y)return s}else return s;if(s=Vr(s.nextSibling),s===null)break}return null}function bR(s,i,o){if(i==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=Vr(s.nextSibling),s===null))return null;return s}function P_(s,i){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!i||(s=Vr(s.nextSibling),s===null))return null;return s}function ny(s){return s.data==="$?"||s.data==="$~"}function ry(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function xR(s,i){var o=s.ownerDocument;if(s.data==="$~")s._reactRetry=i;else if(s.data!=="$?"||o.readyState!=="loading")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function Vr(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return s}var sy=null;function L_(s){s=s.nextSibling;for(var i=0;s;){if(s.nodeType===8){var o=s.data;if(o==="/$"||o==="/&"){if(i===0)return Vr(s.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}s=s.nextSibling}return null}function V_(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var o=s.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return s;i--}else o!=="/$"&&o!=="/&"||i++}s=s.previousSibling}return null}function U_(s,i,o){switch(i=Hh(o),s){case"html":if(s=i.documentElement,!s)throw Error(r(452));return s;case"head":if(s=i.head,!s)throw Error(r(453));return s;case"body":if(s=i.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function du(s){for(var i=s.attributes;i.length;)s.removeAttributeNode(i[0]);Fo(s)}var Ur=new Map,z_=new Set;function $h(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var hi=se.d;se.d={f:_R,r:wR,D:ER,C:SR,L:TR,m:CR,X:AR,S:kR,M:RR};function _R(){var s=hi.f(),i=Oh();return s||i}function wR(s){var i=Ar(s);i!==null&&i.tag===5&&i.type==="form"?rx(i):hi.r(s)}var El=typeof document>"u"?null:document;function B_(s,i,o){var u=El;if(u&&typeof i=="string"&&i){var p=tr(i);p='link[rel="'+s+'"][href="'+p+'"]',typeof o=="string"&&(p+='[crossorigin="'+o+'"]'),z_.has(p)||(z_.add(p),s={rel:s,crossOrigin:o,href:i},u.querySelector(p)===null&&(i=u.createElement("link"),Mn(i,"link",s),on(i),u.head.appendChild(i)))}}function ER(s){hi.D(s),B_("dns-prefetch",s,null)}function SR(s,i){hi.C(s,i),B_("preconnect",s,i)}function TR(s,i,o){hi.L(s,i,o);var u=El;if(u&&s&&i){var p='link[rel="preload"][as="'+tr(i)+'"]';i==="image"&&o&&o.imageSrcSet?(p+='[imagesrcset="'+tr(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(p+='[imagesizes="'+tr(o.imageSizes)+'"]')):p+='[href="'+tr(s)+'"]';var y=p;switch(i){case"style":y=Sl(s);break;case"script":y=Tl(s)}Ur.has(y)||(s=b({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:s,as:i},o),Ur.set(y,s),u.querySelector(p)!==null||i==="style"&&u.querySelector(hu(y))||i==="script"&&u.querySelector(fu(y))||(i=u.createElement("link"),Mn(i,"link",s),on(i),u.head.appendChild(i)))}}function CR(s,i){hi.m(s,i);var o=El;if(o&&s){var u=i&&typeof i.as=="string"?i.as:"script",p='link[rel="modulepreload"][as="'+tr(u)+'"][href="'+tr(s)+'"]',y=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Tl(s)}if(!Ur.has(y)&&(s=b({rel:"modulepreload",href:s},i),Ur.set(y,s),o.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(fu(y)))return}u=o.createElement("link"),Mn(u,"link",s),on(u),o.head.appendChild(u)}}}function kR(s,i,o){hi.S(s,i,o);var u=El;if(u&&s){var p=ms(u).hoistableStyles,y=Sl(s);i=i||"default";var w=p.get(y);if(!w){var j={loading:0,preload:null};if(w=u.querySelector(hu(y)))j.loading=5;else{s=b({rel:"stylesheet",href:s,"data-precedence":i},o),(o=Ur.get(y))&&iy(s,o);var G=w=u.createElement("link");on(G),Mn(G,"link",s),G._p=new Promise(function(ee,ue){G.onload=ee,G.onerror=ue}),G.addEventListener("load",function(){j.loading|=1}),G.addEventListener("error",function(){j.loading|=2}),j.loading|=4,qh(w,i,u)}w={type:"stylesheet",instance:w,count:1,state:j},p.set(y,w)}}}function AR(s,i){hi.X(s,i);var o=El;if(o&&s){var u=ms(o).hoistableScripts,p=Tl(s),y=u.get(p);y||(y=o.querySelector(fu(p)),y||(s=b({src:s,async:!0},i),(i=Ur.get(p))&&ay(s,i),y=o.createElement("script"),on(y),Mn(y,"link",s),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function RR(s,i){hi.M(s,i);var o=El;if(o&&s){var u=ms(o).hoistableScripts,p=Tl(s),y=u.get(p);y||(y=o.querySelector(fu(p)),y||(s=b({src:s,async:!0,type:"module"},i),(i=Ur.get(p))&&ay(s,i),y=o.createElement("script"),on(y),Mn(y,"link",s),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function F_(s,i,o,u){var p=(p=ye.current)?$h(p):null;if(!p)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Sl(o.href),o=ms(p).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){s=Sl(o.href);var y=ms(p).hoistableStyles,w=y.get(s);if(w||(p=p.ownerDocument||p,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(s,w),(y=p.querySelector(hu(s)))&&!y._p&&(w.instance=y,w.state.loading=5),Ur.has(s)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Ur.set(s,o),y||NR(p,s,o,w.state))),i&&u===null)throw Error(r(528,""));return w}if(i&&u!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Tl(o),o=ms(p).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Sl(s){return'href="'+tr(s)+'"'}function hu(s){return'link[rel="stylesheet"]['+s+"]"}function H_(s){return b({},s,{"data-precedence":s.precedence,precedence:null})}function NR(s,i,o,u){s.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=s.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Mn(i,"link",o),on(i),s.head.appendChild(i))}function Tl(s){return'[src="'+tr(s)+'"]'}function fu(s){return"script[async]"+s}function $_(s,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=s.querySelector('style[data-href~="'+tr(o.href)+'"]');if(u)return i.instance=u,on(u),u;var p=b({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),on(u),Mn(u,"style",p),qh(u,o.precedence,s),i.instance=u;case"stylesheet":p=Sl(o.href);var y=s.querySelector(hu(p));if(y)return i.state.loading|=4,i.instance=y,on(y),y;u=H_(o),(p=Ur.get(p))&&iy(u,p),y=(s.ownerDocument||s).createElement("link"),on(y);var w=y;return w._p=new Promise(function(j,G){w.onload=j,w.onerror=G}),Mn(y,"link",u),i.state.loading|=4,qh(y,o.precedence,s),i.instance=y;case"script":return y=Tl(o.src),(p=s.querySelector(fu(y)))?(i.instance=p,on(p),p):(u=o,(p=Ur.get(y))&&(u=b({},o),ay(u,p)),s=s.ownerDocument||s,p=s.createElement("script"),on(p),Mn(p,"link",u),s.head.appendChild(p),i.instance=p);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,qh(u,o.precedence,s));return i.instance}function qh(s,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,y=p,w=0;w<u.length;w++){var j=u[w];if(j.dataset.precedence===i)y=j;else if(y!==p)break}y?y.parentNode.insertBefore(s,y.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(s,i.firstChild))}function iy(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.title==null&&(s.title=i.title)}function ay(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.integrity==null&&(s.integrity=i.integrity)}var Gh=null;function q_(s,i,o){if(Gh===null){var u=new Map,p=Gh=new Map;p.set(o,u)}else p=Gh,u=p.get(o),u||(u=new Map,p.set(o,u));if(u.has(s))return u;for(u.set(s,null),o=o.getElementsByTagName(s),p=0;p<o.length;p++){var y=o[p];if(!(y[hs]||y[an]||s==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var w=y.getAttribute(i)||"";w=s+w;var j=u.get(w);j?j.push(y):u.set(w,[y])}}return u}function G_(s,i,o){s=s.ownerDocument||s,s.head.insertBefore(o,i==="title"?s.querySelector("head > title"):null)}function IR(s,i,o){if(o===1||i.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return s=i.disabled,typeof i.precedence=="string"&&s==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Y_(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function jR(s,i,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var p=Sl(u.href),y=i.querySelector(hu(p));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(s.count++,s=Yh.bind(s),i.then(s,s)),o.state.loading|=4,o.instance=y,on(y);return}y=i.ownerDocument||i,u=H_(u),(p=Ur.get(p))&&iy(u,p),y=y.createElement("link"),on(y);var w=y;w._p=new Promise(function(j,G){w.onload=j,w.onerror=G}),Mn(y,"link",u),o.instance=y}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(s.count++,o=Yh.bind(s),i.addEventListener("load",o),i.addEventListener("error",o))}}var oy=0;function DR(s,i){return s.stylesheets&&s.count===0&&Qh(s,s.stylesheets),0<s.count||0<s.imgCount?function(o){var u=setTimeout(function(){if(s.stylesheets&&Qh(s,s.stylesheets),s.unsuspend){var y=s.unsuspend;s.unsuspend=null,y()}},6e4+i);0<s.imgBytes&&oy===0&&(oy=62500*fR());var p=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Qh(s,s.stylesheets),s.unsuspend)){var y=s.unsuspend;s.unsuspend=null,y()}},(s.imgBytes>oy?50:800)+i);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(u),clearTimeout(p)}}:null}function Yh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qh(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Kh=null;function Qh(s,i){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Kh=new Map,i.forEach(MR,s),Kh=null,Yh.call(s))}function MR(s,i){if(!(i.state.loading&4)){var o=Kh.get(s);if(o)var u=o.get(null);else{o=new Map,Kh.set(s,o);for(var p=s.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var w=p[y];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),u=w)}u&&o.set(null,u)}p=i.instance,w=p.getAttribute("data-precedence"),y=o.get(w)||u,y===u&&o.set(null,p),o.set(w,p),this.count++,u=Yh.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),y?y.parentNode.insertBefore(p,y.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(p,s.firstChild)),i.state.loading|=4}}var mu={$$typeof:N,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function OR(s,i,o,u,p,y,w,j,G){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=us(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=us(0),this.hiddenUpdates=us(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=G,this.incompleteTransitions=new Map}function K_(s,i,o,u,p,y,w,j,G,ee,ue,me){return s=new OR(s,i,o,w,G,ee,ue,me,j),i=1,y===!0&&(i|=24),y=gr(3,null,null,i),s.current=y,y.stateNode=s,i=zp(),i.refCount++,s.pooledCache=i,i.refCount++,y.memoizedState={element:u,isDehydrated:o,cache:i},$p(y),s}function Q_(s){return s?(s=nl,s):nl}function X_(s,i,o,u,p,y){p=Q_(p),u.context===null?u.context=p:u.pendingContext=p,u=Hi(i),u.payload={element:o},y=y===void 0?null:y,y!==null&&(u.callback=y),o=$i(s,u,i),o!==null&&(or(o,s,i),Gc(o,s,i))}function W_(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var o=s.retryLane;s.retryLane=o!==0&&o<i?o:i}}function ly(s,i){W_(s,i),(s=s.alternate)&&W_(s,i)}function J_(s){if(s.tag===13||s.tag===31){var i=Wa(s,67108864);i!==null&&or(i,s,67108864),ly(s,67108864)}}function Z_(s){if(s.tag===13||s.tag===31){var i=_r();i=Ua(i);var o=Wa(s,i);o!==null&&or(o,s,i),ly(s,i)}}var Xh=!0;function PR(s,i,o,u){var p=Y.T;Y.T=null;var y=se.p;try{se.p=2,cy(s,i,o,u)}finally{se.p=y,Y.T=p}}function LR(s,i,o,u){var p=Y.T;Y.T=null;var y=se.p;try{se.p=8,cy(s,i,o,u)}finally{se.p=y,Y.T=p}}function cy(s,i,o,u){if(Xh){var p=uy(u);if(p===null)Qg(s,i,u,Wh,o),t2(s,u);else if(UR(p,s,i,o,u))u.stopPropagation();else if(t2(s,u),i&4&&-1<VR.indexOf(s)){for(;p!==null;){var y=Ar(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var w=ls(y.pendingLanes);if(w!==0){var j=y;for(j.pendingLanes|=2,j.entangledLanes|=2;w;){var G=1<<31-Jt(w);j.entanglements[1]|=G,w&=~G}ks(y),(Et&6)===0&&(Dh=ge()+500,lu(0))}}break;case 31:case 13:j=Wa(y,2),j!==null&&or(j,y,2),Oh(),ly(y,2)}if(y=uy(u),y===null&&Qg(s,i,u,Wh,o),y===p)break;p=y}p!==null&&u.stopPropagation()}else Qg(s,i,u,null,o)}}function uy(s){return s=Rr(s),dy(s)}var Wh=null;function dy(s){if(Wh=null,s=fs(s),s!==null){var i=l(s);if(i===null)s=null;else{var o=i.tag;if(o===13){if(s=c(i),s!==null)return s;s=null}else if(o===31){if(s=h(i),s!==null)return s;s=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null)}}return Wh=s,null}function e2(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ze()){case gt:return 2;case Ht:return 8;case wn:case er:return 32;case Yt:return 268435456;default:return 32}default:return 32}}var hy=!1,ta=null,na=null,ra=null,pu=new Map,gu=new Map,sa=[],VR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function t2(s,i){switch(s){case"focusin":case"focusout":ta=null;break;case"dragenter":case"dragleave":na=null;break;case"mouseover":case"mouseout":ra=null;break;case"pointerover":case"pointerout":pu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":gu.delete(i.pointerId)}}function yu(s,i,o,u,p,y){return s===null||s.nativeEvent!==y?(s={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:y,targetContainers:[p]},i!==null&&(i=Ar(i),i!==null&&J_(i)),s):(s.eventSystemFlags|=u,i=s.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),s)}function UR(s,i,o,u,p){switch(i){case"focusin":return ta=yu(ta,s,i,o,u,p),!0;case"dragenter":return na=yu(na,s,i,o,u,p),!0;case"mouseover":return ra=yu(ra,s,i,o,u,p),!0;case"pointerover":var y=p.pointerId;return pu.set(y,yu(pu.get(y)||null,s,i,o,u,p)),!0;case"gotpointercapture":return y=p.pointerId,gu.set(y,yu(gu.get(y)||null,s,i,o,u,p)),!0}return!1}function n2(s){var i=fs(s.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){s.blockedOn=i,$r(s.priority,function(){Z_(o)});return}}else if(i===31){if(i=h(o),i!==null){s.blockedOn=i,$r(s.priority,function(){Z_(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){s.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Jh(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var o=uy(s.nativeEvent);if(o===null){o=s.nativeEvent;var u=new o.constructor(o.type,o);Nc=u,o.target.dispatchEvent(u),Nc=null}else return i=Ar(o),i!==null&&J_(i),s.blockedOn=o,!1;i.shift()}return!0}function r2(s,i,o){Jh(s)&&o.delete(i)}function zR(){hy=!1,ta!==null&&Jh(ta)&&(ta=null),na!==null&&Jh(na)&&(na=null),ra!==null&&Jh(ra)&&(ra=null),pu.forEach(r2),gu.forEach(r2)}function Zh(s,i){s.blockedOn===i&&(s.blockedOn=null,hy||(hy=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,zR)))}var ef=null;function s2(s){ef!==s&&(ef=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ef===s&&(ef=null);for(var i=0;i<s.length;i+=3){var o=s[i],u=s[i+1],p=s[i+2];if(typeof u!="function"){if(dy(u||o)===null)continue;break}var y=Ar(o);y!==null&&(s.splice(i,3),i-=3,ug(y,{pending:!0,data:p,method:o.method,action:u},u,p))}}))}function Cl(s){function i(G){return Zh(G,s)}ta!==null&&Zh(ta,s),na!==null&&Zh(na,s),ra!==null&&Zh(ra,s),pu.forEach(i),gu.forEach(i);for(var o=0;o<sa.length;o++){var u=sa[o];u.blockedOn===s&&(u.blockedOn=null)}for(;0<sa.length&&(o=sa[0],o.blockedOn===null);)n2(o),o.blockedOn===null&&sa.shift();if(o=(s.ownerDocument||s).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var p=o[u],y=o[u+1],w=p[En]||null;if(typeof y=="function")w||s2(o);else if(w){var j=null;if(y&&y.hasAttribute("formAction")){if(p=y,w=y[En]||null)j=w.formAction;else if(dy(p)!==null)continue}else j=w.action;typeof j=="function"?o[u+1]=j:(o.splice(u,3),u-=3),s2(o)}}}function i2(){function s(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(w){return p=w})},focusReset:"manual",scroll:"manual"})}function i(){p!==null&&(p(),p=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,p=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),p!==null&&(p(),p=null)}}}function fy(s){this._internalRoot=s}tf.prototype.render=fy.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,u=_r();X_(o,u,s,i,null,null)},tf.prototype.unmount=fy.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;X_(s.current,2,null,s,null,null),Oh(),i[ds]=null}};function tf(s){this._internalRoot=s}tf.prototype.unstable_scheduleHydration=function(s){if(s){var i=Od();s={blockedOn:null,target:s,priority:i};for(var o=0;o<sa.length&&i!==0&&i<sa[o].priority;o++);sa.splice(o,0,s),o===0&&n2(s)}};var a2=e.version;if(a2!=="19.2.0")throw Error(r(527,a2,"19.2.0"));se.findDOMNode=function(s){var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=g(i),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var BR={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nf.isDisabled&&nf.supportsFiber)try{Fr=nf.inject(BR),Rn=nf}catch{}}return bu.createRoot=function(s,i){if(!a(s))throw Error(r(299));var o=!1,u="",p=fx,y=mx,w=px;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(p=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError)),i=K_(s,1,!1,null,null,o,u,null,p,y,w,i2),s[ds]=i.current,Kg(s),new fy(i)},bu.hydrateRoot=function(s,i,o){if(!a(s))throw Error(r(299));var u=!1,p="",y=fx,w=mx,j=px,G=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(j=o.onRecoverableError),o.formState!==void 0&&(G=o.formState)),i=K_(s,1,!0,i,o??null,u,p,G,y,w,j,i2),i.context=Q_(null),o=i.current,u=_r(),u=Ua(u),p=Hi(u),p.callback=null,$i(o,p,u),o=u,i.current.lanes=o,La(i,o),ks(i),s[ds]=i.current,Kg(s),new tf(i)},bu.version="19.2.0",bu}var g2;function JR(){if(g2)return gy.exports;g2=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),gy.exports=WR(),gy.exports}var ZR=JR();const eN=()=>{};var y2={};const VS=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let a=n.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},tN=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const a=n[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],c=n[t++],h=n[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},US={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<n.length;a+=3){const l=n[a],c=a+1<n.length,h=c?n[a+1]:0,m=a+2<n.length,g=m?n[a+2]:0,v=l>>2,b=(l&3)<<4|h>>4;let _=(h&15)<<2|g>>6,C=g&63;m||(C=64,c||(_=64)),r.push(t[v],t[b],t[_],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(VS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):tN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],h=a<n.length?t[n.charAt(a)]:0;++a;const g=a<n.length?t[n.charAt(a)]:64;++a;const b=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||h==null||g==null||b==null)throw new nN;const _=l<<2|h>>4;if(r.push(_),g!==64){const C=h<<4&240|g>>2;if(r.push(C),b!==64){const R=g<<6&192|b;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class nN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rN=function(n){const e=VS(n);return US.encodeByteArray(e,!0)},Gf=function(n){return rN(n).replace(/\./g,"")},zS=function(n){try{return US.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function sN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const iN=()=>sN().__FIREBASE_DEFAULTS__,aN=()=>{if(typeof process>"u"||typeof y2>"u")return;const n=y2.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},oN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&zS(n[1]);return e&&JSON.parse(e)},Am=()=>{try{return eN()||iN()||aN()||oN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},BS=n=>Am()?.emulatorHosts?.[n],FS=n=>{const e=BS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},HS=()=>Am()?.config,$S=n=>Am()?.[`_${n}`];class lN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Ro(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function av(n){return(await fetch(n,{credentials:"include"})).ok}function qS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Gf(JSON.stringify(t)),Gf(JSON.stringify(c)),""].join(".")}const Lu={};function cN(){const n={prod:[],emulator:[]};for(const e of Object.keys(Lu))Lu[e]?n.emulator.push(e):n.prod.push(e);return n}function uN(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let v2=!1;function ov(n,e){if(typeof window>"u"||typeof document>"u"||!Ro(window.location.host)||Lu[n]===e||Lu[n]||v2)return;Lu[n]=e;function t(_){return`__firebase__banner__${_}`}const r="__firebase__banner",l=cN().prod.length>0;function c(){const _=document.getElementById(r);_&&_.remove()}function h(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function m(_,C){_.setAttribute("width","24"),_.setAttribute("id",C),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function g(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{v2=!0,c()},_}function v(_,C){_.setAttribute("id",C),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function b(){const _=uN(r),C=t("text"),R=document.getElementById(C)||document.createElement("span"),I=t("learnmore"),k=document.getElementById(I)||document.createElement("a"),B=t("preprendIcon"),$=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const N=_.element;h(N),v(k,I);const V=g();m($,B),N.append($,R,k,V),document.body.appendChild(N)}l?(R.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function Gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gn())}function hN(){const n=Am()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mN(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function pN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gN(){const n=Gn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function yN(){return!hN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vN(){try{return typeof indexedDB=="object"}catch{return!1}}function bN(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const xN="FirebaseError";class Hs extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=xN,Object.setPrototypeOf(this,Hs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dd.prototype.create)}}class dd{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?_N(l,r):"Error",h=`${this.serviceName}: ${c} (${a}).`;return new Hs(a,h,r)}}function _N(n,e){return n.replace(wN,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const wN=/\{\$([^}]+)}/g;function EN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function _i(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=n[a],c=e[a];if(b2(l)&&b2(c)){if(!_i(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function b2(n){return n!==null&&typeof n=="object"}function hd(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Au(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Ru(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function SN(n,e){const t=new TN(n,e);return t.subscribe.bind(t)}class TN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");CN(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=xy),a.error===void 0&&(a.error=xy),a.complete===void 0&&(a.complete=xy);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CN(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function xy(){}function Vt(n){return n&&n._delegate?n._delegate:n}class Sa{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const fo="[DEFAULT]";class kN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new lN;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(RN(e))try{this.getOrInitializeService({instanceIdentifier:fo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=fo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fo){return this.instances.has(e)}getOptions(e=fo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);r===h&&c.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:AN(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=fo){return this.component?this.component.multipleInstances?e:fo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function AN(n){return n===fo?void 0:n}function RN(n){return n.instantiationMode==="EAGER"}class NN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new kN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var ht;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ht||(ht={}));const IN={debug:ht.DEBUG,verbose:ht.VERBOSE,info:ht.INFO,warn:ht.WARN,error:ht.ERROR,silent:ht.SILENT},jN=ht.INFO,DN={[ht.DEBUG]:"log",[ht.VERBOSE]:"log",[ht.INFO]:"info",[ht.WARN]:"warn",[ht.ERROR]:"error"},MN=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),a=DN[e];if(a)console[a](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let lv=class{constructor(e){this.name=e,this._logLevel=jN,this._logHandler=MN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ht))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?IN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ht.DEBUG,...e),this._logHandler(this,ht.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ht.VERBOSE,...e),this._logHandler(this,ht.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ht.INFO,...e),this._logHandler(this,ht.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ht.WARN,...e),this._logHandler(this,ht.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ht.ERROR,...e),this._logHandler(this,ht.ERROR,...e)}};const ON=(n,e)=>e.some(t=>n instanceof t);let x2,_2;function PN(){return x2||(x2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LN(){return _2||(_2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GS=new WeakMap,n0=new WeakMap,YS=new WeakMap,_y=new WeakMap,cv=new WeakMap;function VN(n){const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(ba(n.result)),a()},c=()=>{r(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&GS.set(t,n)}).catch(()=>{}),cv.set(e,n),e}function UN(n){if(n0.has(n))return;const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});n0.set(n,e)}let r0={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return n0.get(n);if(e==="objectStoreNames")return n.objectStoreNames||YS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ba(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function zN(n){r0=n(r0)}function BN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(wy(this),e,...t);return YS.set(r,e.sort?e.sort():[e]),ba(r)}:LN().includes(n)?function(...e){return n.apply(wy(this),e),ba(GS.get(this))}:function(...e){return ba(n.apply(wy(this),e))}}function FN(n){return typeof n=="function"?BN(n):(n instanceof IDBTransaction&&UN(n),ON(n,PN())?new Proxy(n,r0):n)}function ba(n){if(n instanceof IDBRequest)return VN(n);if(_y.has(n))return _y.get(n);const e=FN(n);return e!==n&&(_y.set(n,e),cv.set(e,n)),e}const wy=n=>cv.get(n);function HN(n,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(n,e),h=ba(c);return r&&c.addEventListener("upgradeneeded",m=>{r(ba(c.result),m.oldVersion,m.newVersion,ba(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),h.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}const $N=["get","getKey","getAll","getAllKeys","count"],qN=["put","add","delete","clear"],Ey=new Map;function w2(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ey.get(e))return Ey.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=qN.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||$N.includes(t)))return;const l=async function(c,...h){const m=this.transaction(c,a?"readwrite":"readonly");let g=m.store;return r&&(g=g.index(h.shift())),(await Promise.all([g[t](...h),a&&m.done]))[0]};return Ey.set(e,l),l}zN(n=>({...n,get:(e,t,r)=>w2(e,t)||n.get(e,t,r),has:(e,t)=>!!w2(e,t)||n.has(e,t)}));class GN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(YN(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function YN(n){return n.getComponent()?.type==="VERSION"}const s0="@firebase/app",E2="0.14.6";const wi=new lv("@firebase/app"),KN="@firebase/app-compat",QN="@firebase/analytics-compat",XN="@firebase/analytics",WN="@firebase/app-check-compat",JN="@firebase/app-check",ZN="@firebase/auth",e6="@firebase/auth-compat",t6="@firebase/database",n6="@firebase/data-connect",r6="@firebase/database-compat",s6="@firebase/functions",i6="@firebase/functions-compat",a6="@firebase/installations",o6="@firebase/installations-compat",l6="@firebase/messaging",c6="@firebase/messaging-compat",u6="@firebase/performance",d6="@firebase/performance-compat",h6="@firebase/remote-config",f6="@firebase/remote-config-compat",m6="@firebase/storage",p6="@firebase/storage-compat",g6="@firebase/firestore",y6="@firebase/ai",v6="@firebase/firestore-compat",b6="firebase",x6="12.6.0";const i0="[DEFAULT]",_6={[s0]:"fire-core",[KN]:"fire-core-compat",[XN]:"fire-analytics",[QN]:"fire-analytics-compat",[JN]:"fire-app-check",[WN]:"fire-app-check-compat",[ZN]:"fire-auth",[e6]:"fire-auth-compat",[t6]:"fire-rtdb",[n6]:"fire-data-connect",[r6]:"fire-rtdb-compat",[s6]:"fire-fn",[i6]:"fire-fn-compat",[a6]:"fire-iid",[o6]:"fire-iid-compat",[l6]:"fire-fcm",[c6]:"fire-fcm-compat",[u6]:"fire-perf",[d6]:"fire-perf-compat",[h6]:"fire-rc",[f6]:"fire-rc-compat",[m6]:"fire-gcs",[p6]:"fire-gcs-compat",[g6]:"fire-fst",[v6]:"fire-fst-compat",[y6]:"fire-vertex","fire-js":"fire-js",[b6]:"fire-js-all"};const Yf=new Map,w6=new Map,a0=new Map;function S2(n,e){try{n.container.addComponent(e)}catch(t){wi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function wo(n){const e=n.name;if(a0.has(e))return wi.debug(`There were multiple attempts to register component ${e}.`),!1;a0.set(e,n);for(const t of Yf.values())S2(t,n);for(const t of w6.values())S2(t,n);return!0}function Rm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Tr(n){return n==null?!1:n.settings!==void 0}const E6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xa=new dd("app","Firebase",E6);class S6{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Sa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xa.create("app-deleted",{appName:this._name})}}const No=x6;function KS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:i0,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw xa.create("bad-app-name",{appName:String(a)});if(t||(t=HS()),!t)throw xa.create("no-options");const l=Yf.get(a);if(l){if(_i(t,l.options)&&_i(r,l.config))return l;throw xa.create("duplicate-app",{appName:a})}const c=new NN(a);for(const m of a0.values())c.addComponent(m);const h=new S6(t,r,c);return Yf.set(a,h),h}function uv(n=i0){const e=Yf.get(n);if(!e&&n===i0&&HS())return KS();if(!e)throw xa.create("no-app",{appName:n});return e}function js(n,e,t){let r=_6[n]??n;t&&(r+=`-${t}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${r}" with version "${e}":`];a&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wi.warn(c.join(" "));return}wo(new Sa(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const T6="firebase-heartbeat-database",C6=1,qu="firebase-heartbeat-store";let Sy=null;function QS(){return Sy||(Sy=HN(T6,C6,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(qu)}catch(t){console.warn(t)}}}}).catch(n=>{throw xa.create("idb-open",{originalErrorMessage:n.message})})),Sy}async function k6(n){try{const t=(await QS()).transaction(qu),r=await t.objectStore(qu).get(XS(n));return await t.done,r}catch(e){if(e instanceof Hs)wi.warn(e.message);else{const t=xa.create("idb-get",{originalErrorMessage:e?.message});wi.warn(t.message)}}}async function T2(n,e){try{const r=(await QS()).transaction(qu,"readwrite");await r.objectStore(qu).put(e,XS(n)),await r.done}catch(t){if(t instanceof Hs)wi.warn(t.message);else{const r=xa.create("idb-set",{originalErrorMessage:t?.message});wi.warn(r.message)}}}function XS(n){return`${n.name}!${n.options.appId}`}const A6=1024,R6=30;class N6{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new j6(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=C2();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>R6){const a=D6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){wi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=C2(),{heartbeatsToSend:t,unsentEntries:r}=I6(this._heartbeatsCache.heartbeats),a=Gf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return wi.warn(e),""}}}function C2(){return new Date().toISOString().substring(0,10)}function I6(n,e=A6){const t=[];let r=n.slice();for(const a of n){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),k2(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),k2(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class j6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vN()?bN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await k6(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return T2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return T2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function k2(n){return Gf(JSON.stringify({version:2,heartbeats:n})).length}function D6(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function M6(n){wo(new Sa("platform-logger",e=>new GN(e),"PRIVATE")),wo(new Sa("heartbeat",e=>new N6(e),"PRIVATE")),js(s0,E2,n),js(s0,E2,"esm2020"),js("fire-js","")}M6("");var O6="firebase",P6="12.6.0";js(O6,P6,"app");function WS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const L6=WS,JS=new dd("auth","Firebase",WS());const Kf=new lv("@firebase/auth");function V6(n,...e){Kf.logLevel<=ht.WARN&&Kf.warn(`Auth (${No}): ${n}`,...e)}function Ef(n,...e){Kf.logLevel<=ht.ERROR&&Kf.error(`Auth (${No}): ${n}`,...e)}function is(n,...e){throw dv(n,...e)}function Ds(n,...e){return dv(n,...e)}function ZS(n,e,t){const r={...L6(),[e]:t};return new dd("auth","Firebase",r).create(e,{appName:n.name})}function bi(n){return ZS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return JS.create(n,...e)}function Xe(n,e,...t){if(!n)throw dv(e,...t)}function gi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ef(e),new Error(e)}function Ei(n,e){n||gi(e)}function o0(){return typeof self<"u"&&self.location?.href||""}function U6(){return A2()==="http:"||A2()==="https:"}function A2(){return typeof self<"u"&&self.location?.protocol||null}function z6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(U6()||mN()||"connection"in navigator)?navigator.onLine:!0}function B6(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class fd{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ei(t>e,"Short delay should be less than long delay!"),this.isMobile=dN()||pN()}get(){return z6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function hv(n,e){Ei(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class e4{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const F6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const H6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$6=new fd(3e4,6e4);function ki(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function $s(n,e,t,r,a={}){return t4(n,a,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const h=hd({key:n.config.apiKey,...c}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:m,...l};return fN()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&Ro(n.emulatorConfig.host)&&(g.credentials="include"),e4.fetch()(await n4(n,n.config.apiHost,t,h),g)})}async function t4(n,e,t){n._canInitEmulator=!1;const r={...F6,...e};try{const a=new G6(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw rf(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const h=l.ok?c.errorMessage:c.error.message,[m,g]=h.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw rf(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw rf(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw rf(n,"user-disabled",c);const v=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw ZS(n,v,g);is(n,v)}}catch(a){if(a instanceof Hs)throw a;is(n,"network-request-failed",{message:String(a)})}}async function md(n,e,t,r,a={}){const l=await $s(n,e,t,r,a);return"mfaPendingCredential"in l&&is(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function n4(n,e,t,r){const a=`${e}${t}?${r}`,l=n,c=l.config.emulator?hv(n.config,a):`${n.config.apiScheme}://${a}`;return H6.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function q6(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class G6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ds(this.auth,"network-request-failed")),$6.get())})}}function rf(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=Ds(n,e,r);return a.customData._tokenResponse=t,a}function R2(n){return n!==void 0&&n.enterprise!==void 0}class Y6{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return q6(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function K6(n,e){return $s(n,"GET","/v2/recaptchaConfig",ki(n,e))}async function Q6(n,e){return $s(n,"POST","/v1/accounts:delete",e)}async function Qf(n,e){return $s(n,"POST","/v1/accounts:lookup",e)}function Vu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function X6(n,e=!1){const t=Vt(n),r=await t.getIdToken(e),a=fv(r);Xe(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:r,authTime:Vu(Ty(a.auth_time)),issuedAtTime:Vu(Ty(a.iat)),expirationTime:Vu(Ty(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Ty(n){return Number(n)*1e3}function fv(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Ef("JWT malformed, contained fewer than 3 sections"),null;try{const a=zS(t);return a?JSON.parse(a):(Ef("Failed to decode base64 JWT payload"),null)}catch(a){return Ef("Caught error parsing JWT payload as JSON",a?.toString()),null}}function N2(n){const e=fv(n);return Xe(e,"internal-error"),Xe(typeof e.exp<"u","internal-error"),Xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ql(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Hs&&W6(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function W6({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class J6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class l0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vu(this.lastLoginAt),this.creationTime=Vu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Xf(n){const e=n.auth,t=await n.getIdToken(),r=await ql(n,Qf(e,{idToken:t}));Xe(r?.users.length,e,"internal-error");const a=r.users[0];n._notifyReloadListener(a);const l=a.providerUserInfo?.length?r4(a.providerUserInfo):[],c=e5(n.providerData,l),h=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!c?.length,g=h?m:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new l0(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(n,v)}async function Z6(n){const e=Vt(n);await Xf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function e5(n,e){return[...n.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function r4(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function t5(n,e){const t=await t4(n,{},async()=>{const r=hd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,c=await n4(n,a,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:h,body:r};return n.emulatorConfig&&Ro(n.emulatorConfig.host)&&(m.credentials="include"),e4.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function n5(n,e){return $s(n,"POST","/v2/accounts:revokeToken",ki(n,e))}class Ll{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Xe(e.idToken,"internal-error"),Xe(typeof e.idToken<"u","internal-error"),Xe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):N2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Xe(e.length!==0,"internal-error");const t=N2(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await t5(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,c=new Ll;return r&&(Xe(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(Xe(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Xe(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ll,this.toJSON())}_performRefresh(){return gi("not implemented")}}function aa(n,e){Xe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ns{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new J6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new l0(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await ql(this,this.stsTokenManager.getToken(this.auth,e));return Xe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return X6(this,e)}reload(){return Z6(this)}_assign(e){this!==e&&(Xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ns({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Xf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Tr(this.auth.app))return Promise.reject(bi(this.auth));const e=await this.getIdToken();return await ql(this,Q6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,h=t.tenantId??void 0,m=t._redirectEventId??void 0,g=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:b,emailVerified:_,isAnonymous:C,providerData:R,stsTokenManager:I}=t;Xe(b&&I,e,"internal-error");const k=Ll.fromJSON(this.name,I);Xe(typeof b=="string",e,"internal-error"),aa(r,e.name),aa(a,e.name),Xe(typeof _=="boolean",e,"internal-error"),Xe(typeof C=="boolean",e,"internal-error"),aa(l,e.name),aa(c,e.name),aa(h,e.name),aa(m,e.name),aa(g,e.name),aa(v,e.name);const B=new ns({uid:b,auth:e,email:a,emailVerified:_,displayName:r,isAnonymous:C,photoURL:c,phoneNumber:l,tenantId:h,stsTokenManager:k,createdAt:g,lastLoginAt:v});return R&&Array.isArray(R)&&(B.providerData=R.map($=>({...$}))),m&&(B._redirectEventId=m),B}static async _fromIdTokenResponse(e,t,r=!1){const a=new Ll;a.updateFromServerResponse(t);const l=new ns({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await Xf(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];Xe(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?r4(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,h=new Ll;h.updateFromIdToken(r);const m=new ns({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new l0(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(m,g),m}}const I2=new Map;function yi(n){Ei(n instanceof Function,"Expected a class definition");let e=I2.get(n);return e?(Ei(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,I2.set(n,e),e)}class s4{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}s4.type="NONE";const j2=s4;function Sf(n,e,t){return`firebase:${n}:${e}:${t}`}class Vl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=Sf(this.userKey,a.apiKey,l),this.fullPersistenceKey=Sf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Qf(this.auth,{idToken:e}).catch(()=>{});return t?ns._fromGetAccountInfoResponse(this.auth,t,e):null}return ns._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Vl(yi(j2),e,r);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||yi(j2);const c=Sf(r,e.config.apiKey,e.name);let h=null;for(const g of t)try{const v=await g._get(c);if(v){let b;if(typeof v=="string"){const _=await Qf(e,{idToken:v}).catch(()=>{});if(!_)break;b=await ns._fromGetAccountInfoResponse(e,_,v)}else b=ns._fromJSON(e,v);g!==l&&(h=b),l=g;break}}catch{}const m=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Vl(l,e,r):(l=m[0],h&&await l._set(c,h.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Vl(l,e,r))}}function D2(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(l4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(i4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(u4(e))return"Blackberry";if(d4(e))return"Webos";if(a4(e))return"Safari";if((e.includes("chrome/")||o4(e))&&!e.includes("edge/"))return"Chrome";if(c4(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function i4(n=Gn()){return/firefox\//i.test(n)}function a4(n=Gn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function o4(n=Gn()){return/crios\//i.test(n)}function l4(n=Gn()){return/iemobile/i.test(n)}function c4(n=Gn()){return/android/i.test(n)}function u4(n=Gn()){return/blackberry/i.test(n)}function d4(n=Gn()){return/webos/i.test(n)}function mv(n=Gn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function r5(n=Gn()){return mv(n)&&!!window.navigator?.standalone}function s5(){return gN()&&document.documentMode===10}function h4(n=Gn()){return mv(n)||c4(n)||d4(n)||u4(n)||/windows phone/i.test(n)||l4(n)}function f4(n,e=[]){let t;switch(n){case"Browser":t=D2(Gn());break;case"Worker":t=`${D2(Gn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${No}/${r}`}class i5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,h)=>{try{const m=e(l);c(m)}catch(m){h(m)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function a5(n,e={}){return $s(n,"GET","/v2/passwordPolicy",ki(n,e))}const o5=6;class l5{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??o5,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class c5{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new M2(this),this.idTokenSubscription=new M2(this),this.beforeStateQueue=new i5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=yi(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Vl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Qf(this,{idToken:e}),r=await ns._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Tr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=r?._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===c)&&h?.user&&(r=h.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Xf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=B6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Tr(this.app))return Promise.reject(bi(this));const t=e?Vt(e):null;return t&&Xe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Tr(this.app)?Promise.reject(bi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Tr(this.app)?Promise.reject(bi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await a5(this),t=new l5(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new dd("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await n5(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&yi(e)||this._popupRedirectResolver;Xe(t,this,"argument-error"),this.redirectPersistenceManager=await Vl.create(this,[yi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Xe(h,this,"internal-error"),h.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,r,a);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=f4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Tr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&V6(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Da(n){return Vt(n)}class M2{constructor(e){this.auth=e,this.observer=null,this.addObserver=SN(t=>this.observer=t)}get next(){return Xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Nm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function u5(n){Nm=n}function m4(n){return Nm.loadJS(n)}function d5(){return Nm.recaptchaEnterpriseScript}function h5(){return Nm.gapiScript}function f5(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class m5{constructor(){this.enterprise=new p5}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class p5{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const g5="recaptcha-enterprise",p4="NO_RECAPTCHA";class y5{constructor(e){this.type=g5,this.auth=Da(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,h)=>{K6(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const g=new Y6(m);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(m=>{h(m)})})}function a(l,c,h){const m=window.grecaptcha;R2(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(g=>{c(g)}).catch(()=>{c(p4)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new m5().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{r(this.auth).then(h=>{if(!t&&R2(window.grecaptcha))a(h,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=d5();m.length!==0&&(m+=h),m4(m).then(()=>{a(h,l,c)}).catch(g=>{c(g)})}}).catch(h=>{c(h)})})}}async function O2(n,e,t,r=!1,a=!1){const l=new y5(n);let c;if(a)c=p4;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const m=h.phoneEnrollmentInfo.phoneNumber,g=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const m=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Wf(n,e,t,r,a){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await O2(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await O2(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(l)})}function v5(n,e){const t=Rm(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(_i(l,e??{}))return a;is(a,"already-initialized")}return t.initialize({options:e})}function b5(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(yi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function x5(n,e,t){const r=Da(n);Xe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=g4(e),{host:c,port:h}=_5(e),m=h===null?"":`:${h}`,g={url:`${l}//${c}${m}/`},v=Object.freeze({host:c,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){Xe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Xe(_i(g,r.config.emulator)&&_i(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,Ro(c)?(av(`${l}//${c}${m}`),ov("Auth",!0)):w5()}function g4(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function _5(n){const e=g4(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:P2(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:P2(c)}}}function P2(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function w5(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class pv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return gi("not implemented")}_getIdTokenResponse(e){return gi("not implemented")}_linkToIdToken(e,t){return gi("not implemented")}_getReauthenticationResolver(e){return gi("not implemented")}}async function E5(n,e){return $s(n,"POST","/v1/accounts:update",e)}async function S5(n,e){return $s(n,"POST","/v1/accounts:signUp",e)}async function T5(n,e){return md(n,"POST","/v1/accounts:signInWithPassword",ki(n,e))}async function y4(n,e){return $s(n,"POST","/v1/accounts:sendOobCode",ki(n,e))}async function C5(n,e){return y4(n,e)}async function k5(n,e){return y4(n,e)}async function A5(n,e){return md(n,"POST","/v1/accounts:signInWithEmailLink",ki(n,e))}async function R5(n,e){return md(n,"POST","/v1/accounts:signInWithEmailLink",ki(n,e))}class Gu extends pv{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Gu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Gu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wf(e,t,"signInWithPassword",T5);case"emailLink":return A5(e,{email:this._email,oobCode:this._password});default:is(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wf(e,r,"signUpPassword",S5);case"emailLink":return R5(e,{idToken:t,email:this._email,oobCode:this._password});default:is(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ul(n,e){return md(n,"POST","/v1/accounts:signInWithIdp",ki(n,e))}const N5="http://localhost";class Eo extends pv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Eo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):is("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=t;if(!r||!a)return null;const c=new Eo(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Ul(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ul(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ul(e,t)}buildRequest(){const e={requestUri:N5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=hd(t)}return e}}function I5(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function j5(n){const e=Au(Ru(n)).link,t=e?Au(Ru(e)).deep_link_id:null,r=Au(Ru(n)).deep_link_id;return(r?Au(Ru(r)).link:null)||r||t||e||n}class gv{constructor(e){const t=Au(Ru(e)),r=t.apiKey??null,a=t.oobCode??null,l=I5(t.mode??null);Xe(r&&a&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=j5(e);try{return new gv(t)}catch{return null}}}class Io{constructor(){this.providerId=Io.PROVIDER_ID}static credential(e,t){return Gu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=gv.parseLink(t);return Xe(r,"argument-error"),Gu._fromEmailAndCode(e,r.code,r.tenantId)}}Io.PROVIDER_ID="password";Io.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Io.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class v4{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class pd extends v4{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ha extends pd{constructor(){super("facebook.com")}static credential(e){return Eo._fromParams({providerId:ha.PROVIDER_ID,signInMethod:ha.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ha.credentialFromTaggedObject(e)}static credentialFromError(e){return ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ha.credential(e.oauthAccessToken)}catch{return null}}}ha.FACEBOOK_SIGN_IN_METHOD="facebook.com";ha.PROVIDER_ID="facebook.com";class fa extends pd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Eo._fromParams({providerId:fa.PROVIDER_ID,signInMethod:fa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return fa.credentialFromTaggedObject(e)}static credentialFromError(e){return fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return fa.credential(t,r)}catch{return null}}}fa.GOOGLE_SIGN_IN_METHOD="google.com";fa.PROVIDER_ID="google.com";class ma extends pd{constructor(){super("github.com")}static credential(e){return Eo._fromParams({providerId:ma.PROVIDER_ID,signInMethod:ma.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ma.credentialFromTaggedObject(e)}static credentialFromError(e){return ma.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ma.credential(e.oauthAccessToken)}catch{return null}}}ma.GITHUB_SIGN_IN_METHOD="github.com";ma.PROVIDER_ID="github.com";class pa extends pd{constructor(){super("twitter.com")}static credential(e,t){return Eo._fromParams({providerId:pa.PROVIDER_ID,signInMethod:pa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return pa.credentialFromTaggedObject(e)}static credentialFromError(e){return pa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return pa.credential(t,r)}catch{return null}}}pa.TWITTER_SIGN_IN_METHOD="twitter.com";pa.PROVIDER_ID="twitter.com";async function D5(n,e){return md(n,"POST","/v1/accounts:signUp",ki(n,e))}class So{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await ns._fromIdTokenResponse(e,r,a),c=L2(r);return new So({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=L2(r);return new So({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function L2(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Jf extends Hs{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,Jf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new Jf(e,t,r,a)}}function b4(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Jf._fromErrorAndOperation(n,l,e,r):l})}async function M5(n,e,t=!1){const r=await ql(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return So._forOperation(n,"link",r)}async function x4(n,e,t=!1){const{auth:r}=n;if(Tr(r.app))return Promise.reject(bi(r));const a="reauthenticate";try{const l=await ql(n,b4(r,a,e,n),t);Xe(l.idToken,r,"internal-error");const c=fv(l.idToken);Xe(c,r,"internal-error");const{sub:h}=c;return Xe(n.uid===h,r,"user-mismatch"),So._forOperation(n,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&is(r,"user-mismatch"),l}}async function _4(n,e,t=!1){if(Tr(n.app))return Promise.reject(bi(n));const r="signIn",a=await b4(n,r,e),l=await So._fromIdTokenResponse(n,r,a);return t||await n._updateCurrentUser(l.user),l}async function O5(n,e){return _4(Da(n),e)}async function P5(n,e){return x4(Vt(n),e)}async function w4(n){const e=Da(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function E4(n,e,t){const r=Da(n);await Wf(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",k5)}async function L5(n,e,t){if(Tr(n.app))return Promise.reject(bi(n));const r=Da(n),c=await Wf(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",D5).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&w4(n),m}),h=await So._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(h.user),h}function V5(n,e,t){return Tr(n.app)?Promise.reject(bi(n)):O5(Vt(n),Io.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&w4(n),r})}async function V2(n,e){const t=Vt(n),a={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:l}=await C5(t.auth,a);l!==n.email&&await n.reload()}function U5(n,e){return z5(Vt(n),null,e)}async function z5(n,e,t){const{auth:r}=n,l={idToken:await n.getIdToken(),returnSecureToken:!0};t&&(l.password=t);const c=await ql(n,E5(r,l));await n._updateTokensIfNecessary(c,!0)}function B5(n,e,t,r){return Vt(n).onIdTokenChanged(e,t,r)}function F5(n,e,t){return Vt(n).beforeAuthStateChanged(e,t)}function H5(n,e,t,r){return Vt(n).onAuthStateChanged(e,t,r)}function $5(n){return Vt(n).signOut()}const Zf="__sak";class S4{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Zf,"1"),this.storage.removeItem(Zf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const q5=1e3,G5=10;class T4 extends S4{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=h4(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,m)=>{this.notifyListeners(c,m)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);s5()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,G5):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},q5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}T4.type="LOCAL";const Y5=T4;class C4 extends S4{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}C4.type="SESSION";const k4=C4;function K5(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Im{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new Im(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const h=Array.from(c).map(async g=>g(t.origin,l)),m=await K5(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Im.receivers=[];function yv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class Q5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((h,m)=>{const g=yv("",20);a.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(b){const _=b;if(_.data.eventId===g)switch(_.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(_.data.response);break;default:clearTimeout(v),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Ms(){return window}function X5(n){Ms().location.href=n}function A4(){return typeof Ms().WorkerGlobalScope<"u"&&typeof Ms().importScripts=="function"}async function W5(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function J5(){return navigator?.serviceWorker?.controller||null}function Z5(){return A4()?self:null}const R4="firebaseLocalStorageDb",eI=1,em="firebaseLocalStorage",N4="fbase_key";class gd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function jm(n,e){return n.transaction([em],e?"readwrite":"readonly").objectStore(em)}function tI(){const n=indexedDB.deleteDatabase(R4);return new gd(n).toPromise()}function c0(){const n=indexedDB.open(R4,eI);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(em,{keyPath:N4})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(em)?e(r):(r.close(),await tI(),e(await c0()))})})}async function U2(n,e,t){const r=jm(n,!0).put({[N4]:e,value:t});return new gd(r).toPromise()}async function nI(n,e){const t=jm(n,!1).get(e),r=await new gd(t).toPromise();return r===void 0?null:r.value}function z2(n,e){const t=jm(n,!0).delete(e);return new gd(t).toPromise()}const rI=800,sI=3;class I4{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await c0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>sI)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return A4()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Im._getInstance(Z5()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await W5(),!this.activeServiceWorker)return;this.sender=new Q5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||J5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await c0();return await U2(e,Zf,"1"),await z2(e,Zf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>U2(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>nI(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>z2(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=jm(a,!1).getAll();return new gd(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}I4.type="LOCAL";const iI=I4;new fd(3e4,6e4);function aI(n,e){return e?yi(e):(Xe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class vv extends pv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ul(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ul(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ul(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function oI(n){return _4(n.auth,new vv(n),n.bypassAuthState)}function lI(n){const{auth:e,user:t}=n;return Xe(t,e,"internal-error"),x4(t,new vv(n),n.bypassAuthState)}async function cI(n){const{auth:e,user:t}=n;return Xe(t,e,"internal-error"),M5(t,new vv(n),n.bypassAuthState)}class j4{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:c,type:h}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oI;case"linkViaPopup":case"linkViaRedirect":return cI;case"reauthViaPopup":case"reauthViaRedirect":return lI;default:is(this.auth,"internal-error")}}resolve(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const uI=new fd(2e3,1e4);class Ol extends j4{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,Ol.currentPopupAction&&Ol.currentPopupAction.cancel(),Ol.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Xe(e,this.auth,"internal-error"),e}async onExecution(){Ei(this.filter.length===1,"Popup operations only handle one event");const e=yv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ds(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ds(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ol.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ds(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,uI.get())};e()}}Ol.currentPopupAction=null;const dI="pendingRedirect",Tf=new Map;class hI extends j4{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Tf.get(this.auth._key());if(!e){try{const r=await fI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Tf.set(this.auth._key(),e)}return this.bypassAuthState||Tf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function fI(n,e){const t=gI(e),r=pI(n);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function mI(n,e){Tf.set(n._key(),e)}function pI(n){return yi(n._redirectPersistence)}function gI(n){return Sf(dI,n.config.apiKey,n.name)}async function yI(n,e,t=!1){if(Tr(n.app))return Promise.reject(bi(n));const r=Da(n),a=aI(r,e),c=await new hI(r,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}const vI=600*1e3;class bI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!xI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!D4(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ds(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vI&&this.cachedEventUids.clear(),this.cachedEventUids.has(B2(e))}saveEventToCache(e){this.cachedEventUids.add(B2(e)),this.lastProcessedEventTime=Date.now()}}function B2(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function D4({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function xI(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return D4(n);default:return!1}}async function _I(n,e={}){return $s(n,"GET","/v1/projects",e)}const wI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,EI=/^https?/;async function SI(n){if(n.config.emulator)return;const{authorizedDomains:e}=await _I(n);for(const t of e)try{if(TI(t))return}catch{}is(n,"unauthorized-domain")}function TI(n){const e=o0(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!EI.test(t))return!1;if(wI.test(n))return r===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const CI=new fd(3e4,6e4);function F2(){const n=Ms().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function kI(n){return new Promise((e,t)=>{function r(){F2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{F2(),t(Ds(n,"network-request-failed"))},timeout:CI.get()})}if(Ms().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ms().gapi?.load)r();else{const a=f5("iframefcb");return Ms()[a]=()=>{gapi.load?r():t(Ds(n,"network-request-failed"))},m4(`${h5()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Cf=null,e})}let Cf=null;function AI(n){return Cf=Cf||kI(n),Cf}const RI=new fd(5e3,15e3),NI="__/auth/iframe",II="emulator/auth/iframe",jI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function MI(n){const e=n.config;Xe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?hv(e,II):`https://${n.config.authDomain}/${NI}`,r={apiKey:e.apiKey,appName:n.name,v:No},a=DI.get(n.config.apiHost);a&&(r.eid=a);const l=n._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${hd(r).slice(1)}`}async function OI(n){const e=await AI(n),t=Ms().gapi;return Xe(t,n,"internal-error"),e.open({where:document.body,url:MI(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jI,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=Ds(n,"network-request-failed"),h=Ms().setTimeout(()=>{l(c)},RI.get());function m(){Ms().clearTimeout(h),a(r)}r.ping(m).then(m,()=>{l(c)})}))}const PI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},LI=500,VI=600,UI="_blank",zI="http://localhost";class H2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function BI(n,e,t,r=LI,a=VI){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const m={...PI,width:r.toString(),height:a.toString(),top:l,left:c},g=Gn().toLowerCase();t&&(h=o4(g)?UI:t),i4(g)&&(e=e||zI,m.scrollbars="yes");const v=Object.entries(m).reduce((_,[C,R])=>`${_}${C}=${R},`,"");if(r5(g)&&h!=="_self")return FI(e||"",h),new H2(null);const b=window.open(e||"",h,v);Xe(b,n,"popup-blocked");try{b.focus()}catch{}return new H2(b)}function FI(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const HI="__/auth/handler",$I="emulator/auth/handler",qI=encodeURIComponent("fac");async function $2(n,e,t,r,a,l){Xe(n.config.authDomain,n,"auth-domain-config-required"),Xe(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:No,eventId:a};if(e instanceof v4){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",EN(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,b]of Object.entries({}))c[v]=b}if(e instanceof pd){const v=e.getScopes().filter(b=>b!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const m=await n._getAppCheckToken(),g=m?`#${qI}=${encodeURIComponent(m)}`:"";return`${GI(n)}?${hd(h).slice(1)}${g}`}function GI({config:n}){return n.emulator?hv(n,$I):`https://${n.authDomain}/${HI}`}const Cy="webStorageSupport";class YI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=k4,this._completeRedirectFn=yI,this._overrideRedirectResult=mI}async _openPopup(e,t,r,a){Ei(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await $2(e,t,r,o0(),a);return BI(e,l,yv())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await $2(e,t,r,o0(),a);return X5(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Ei(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await OI(e),r=new bI(e);return t.register("authEvent",a=>(Xe(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Cy,{type:Cy},a=>{const l=a?.[0]?.[Cy];l!==void 0&&t(!!l),is(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=SI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return h4()||a4()||mv()}}const KI=YI;var q2="@firebase/auth",G2="1.11.1";class QI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function XI(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function WI(n){wo(new Sa("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=r.options;Xe(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:f4(n)},g=new c5(r,a,l,m);return b5(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),wo(new Sa("auth-internal",e=>{const t=Da(e.getProvider("auth").getImmediate());return(r=>new QI(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),js(q2,G2,XI(n)),js(q2,G2,"esm2020")}const JI=300,ZI=$S("authIdTokenMaxAge")||JI;let Y2=null;const ej=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>ZI)return;const a=t?.token;Y2!==a&&(Y2=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function tj(n=uv()){const e=Rm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=v5(n,{popupRedirectResolver:KI,persistence:[iI,Y5,k4]}),r=$S("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=ej(l.toString());F5(t,c,()=>c(t.currentUser)),B5(t,h=>c(h))}}const a=BS("auth");return a&&x5(t,`http://${a}`),t}function nj(){return document.getElementsByTagName("head")?.[0]??document}u5({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=a=>{const l=Ds("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",nj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});WI("Browser");var K2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var _a,M4;(function(){var n;function e(E,S){function A(){}A.prototype=S.prototype,E.F=S.prototype,E.prototype=new A,E.prototype.constructor=E,E.D=function(D,M,U){for(var P=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)P[xe-2]=arguments[xe];return S.prototype[M].apply(D,P)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(E,S,A){A||(A=0);const D=Array(16);if(typeof S=="string")for(var M=0;M<16;++M)D[M]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(M=0;M<16;++M)D[M]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=E.g[0],A=E.g[1],M=E.g[2];let U=E.g[3],P;P=S+(U^A&(M^U))+D[0]+3614090360&4294967295,S=A+(P<<7&4294967295|P>>>25),P=U+(M^S&(A^M))+D[1]+3905402710&4294967295,U=S+(P<<12&4294967295|P>>>20),P=M+(A^U&(S^A))+D[2]+606105819&4294967295,M=U+(P<<17&4294967295|P>>>15),P=A+(S^M&(U^S))+D[3]+3250441966&4294967295,A=M+(P<<22&4294967295|P>>>10),P=S+(U^A&(M^U))+D[4]+4118548399&4294967295,S=A+(P<<7&4294967295|P>>>25),P=U+(M^S&(A^M))+D[5]+1200080426&4294967295,U=S+(P<<12&4294967295|P>>>20),P=M+(A^U&(S^A))+D[6]+2821735955&4294967295,M=U+(P<<17&4294967295|P>>>15),P=A+(S^M&(U^S))+D[7]+4249261313&4294967295,A=M+(P<<22&4294967295|P>>>10),P=S+(U^A&(M^U))+D[8]+1770035416&4294967295,S=A+(P<<7&4294967295|P>>>25),P=U+(M^S&(A^M))+D[9]+2336552879&4294967295,U=S+(P<<12&4294967295|P>>>20),P=M+(A^U&(S^A))+D[10]+4294925233&4294967295,M=U+(P<<17&4294967295|P>>>15),P=A+(S^M&(U^S))+D[11]+2304563134&4294967295,A=M+(P<<22&4294967295|P>>>10),P=S+(U^A&(M^U))+D[12]+1804603682&4294967295,S=A+(P<<7&4294967295|P>>>25),P=U+(M^S&(A^M))+D[13]+4254626195&4294967295,U=S+(P<<12&4294967295|P>>>20),P=M+(A^U&(S^A))+D[14]+2792965006&4294967295,M=U+(P<<17&4294967295|P>>>15),P=A+(S^M&(U^S))+D[15]+1236535329&4294967295,A=M+(P<<22&4294967295|P>>>10),P=S+(M^U&(A^M))+D[1]+4129170786&4294967295,S=A+(P<<5&4294967295|P>>>27),P=U+(A^M&(S^A))+D[6]+3225465664&4294967295,U=S+(P<<9&4294967295|P>>>23),P=M+(S^A&(U^S))+D[11]+643717713&4294967295,M=U+(P<<14&4294967295|P>>>18),P=A+(U^S&(M^U))+D[0]+3921069994&4294967295,A=M+(P<<20&4294967295|P>>>12),P=S+(M^U&(A^M))+D[5]+3593408605&4294967295,S=A+(P<<5&4294967295|P>>>27),P=U+(A^M&(S^A))+D[10]+38016083&4294967295,U=S+(P<<9&4294967295|P>>>23),P=M+(S^A&(U^S))+D[15]+3634488961&4294967295,M=U+(P<<14&4294967295|P>>>18),P=A+(U^S&(M^U))+D[4]+3889429448&4294967295,A=M+(P<<20&4294967295|P>>>12),P=S+(M^U&(A^M))+D[9]+568446438&4294967295,S=A+(P<<5&4294967295|P>>>27),P=U+(A^M&(S^A))+D[14]+3275163606&4294967295,U=S+(P<<9&4294967295|P>>>23),P=M+(S^A&(U^S))+D[3]+4107603335&4294967295,M=U+(P<<14&4294967295|P>>>18),P=A+(U^S&(M^U))+D[8]+1163531501&4294967295,A=M+(P<<20&4294967295|P>>>12),P=S+(M^U&(A^M))+D[13]+2850285829&4294967295,S=A+(P<<5&4294967295|P>>>27),P=U+(A^M&(S^A))+D[2]+4243563512&4294967295,U=S+(P<<9&4294967295|P>>>23),P=M+(S^A&(U^S))+D[7]+1735328473&4294967295,M=U+(P<<14&4294967295|P>>>18),P=A+(U^S&(M^U))+D[12]+2368359562&4294967295,A=M+(P<<20&4294967295|P>>>12),P=S+(A^M^U)+D[5]+4294588738&4294967295,S=A+(P<<4&4294967295|P>>>28),P=U+(S^A^M)+D[8]+2272392833&4294967295,U=S+(P<<11&4294967295|P>>>21),P=M+(U^S^A)+D[11]+1839030562&4294967295,M=U+(P<<16&4294967295|P>>>16),P=A+(M^U^S)+D[14]+4259657740&4294967295,A=M+(P<<23&4294967295|P>>>9),P=S+(A^M^U)+D[1]+2763975236&4294967295,S=A+(P<<4&4294967295|P>>>28),P=U+(S^A^M)+D[4]+1272893353&4294967295,U=S+(P<<11&4294967295|P>>>21),P=M+(U^S^A)+D[7]+4139469664&4294967295,M=U+(P<<16&4294967295|P>>>16),P=A+(M^U^S)+D[10]+3200236656&4294967295,A=M+(P<<23&4294967295|P>>>9),P=S+(A^M^U)+D[13]+681279174&4294967295,S=A+(P<<4&4294967295|P>>>28),P=U+(S^A^M)+D[0]+3936430074&4294967295,U=S+(P<<11&4294967295|P>>>21),P=M+(U^S^A)+D[3]+3572445317&4294967295,M=U+(P<<16&4294967295|P>>>16),P=A+(M^U^S)+D[6]+76029189&4294967295,A=M+(P<<23&4294967295|P>>>9),P=S+(A^M^U)+D[9]+3654602809&4294967295,S=A+(P<<4&4294967295|P>>>28),P=U+(S^A^M)+D[12]+3873151461&4294967295,U=S+(P<<11&4294967295|P>>>21),P=M+(U^S^A)+D[15]+530742520&4294967295,M=U+(P<<16&4294967295|P>>>16),P=A+(M^U^S)+D[2]+3299628645&4294967295,A=M+(P<<23&4294967295|P>>>9),P=S+(M^(A|~U))+D[0]+4096336452&4294967295,S=A+(P<<6&4294967295|P>>>26),P=U+(A^(S|~M))+D[7]+1126891415&4294967295,U=S+(P<<10&4294967295|P>>>22),P=M+(S^(U|~A))+D[14]+2878612391&4294967295,M=U+(P<<15&4294967295|P>>>17),P=A+(U^(M|~S))+D[5]+4237533241&4294967295,A=M+(P<<21&4294967295|P>>>11),P=S+(M^(A|~U))+D[12]+1700485571&4294967295,S=A+(P<<6&4294967295|P>>>26),P=U+(A^(S|~M))+D[3]+2399980690&4294967295,U=S+(P<<10&4294967295|P>>>22),P=M+(S^(U|~A))+D[10]+4293915773&4294967295,M=U+(P<<15&4294967295|P>>>17),P=A+(U^(M|~S))+D[1]+2240044497&4294967295,A=M+(P<<21&4294967295|P>>>11),P=S+(M^(A|~U))+D[8]+1873313359&4294967295,S=A+(P<<6&4294967295|P>>>26),P=U+(A^(S|~M))+D[15]+4264355552&4294967295,U=S+(P<<10&4294967295|P>>>22),P=M+(S^(U|~A))+D[6]+2734768916&4294967295,M=U+(P<<15&4294967295|P>>>17),P=A+(U^(M|~S))+D[13]+1309151649&4294967295,A=M+(P<<21&4294967295|P>>>11),P=S+(M^(A|~U))+D[4]+4149444226&4294967295,S=A+(P<<6&4294967295|P>>>26),P=U+(A^(S|~M))+D[11]+3174756917&4294967295,U=S+(P<<10&4294967295|P>>>22),P=M+(S^(U|~A))+D[2]+718787259&4294967295,M=U+(P<<15&4294967295|P>>>17),P=A+(U^(M|~S))+D[9]+3951481745&4294967295,E.g[0]=E.g[0]+S&4294967295,E.g[1]=E.g[1]+(M+(P<<21&4294967295|P>>>11))&4294967295,E.g[2]=E.g[2]+M&4294967295,E.g[3]=E.g[3]+U&4294967295}r.prototype.v=function(E,S){S===void 0&&(S=E.length);const A=S-this.blockSize,D=this.C;let M=this.h,U=0;for(;U<S;){if(M==0)for(;U<=A;)a(this,E,U),U+=this.blockSize;if(typeof E=="string"){for(;U<S;)if(D[M++]=E.charCodeAt(U++),M==this.blockSize){a(this,D),M=0;break}}else for(;U<S;)if(D[M++]=E[U++],M==this.blockSize){a(this,D),M=0;break}}this.h=M,this.o+=S},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var S=1;S<E.length-8;++S)E[S]=0;S=this.o*8;for(var A=E.length-8;A<E.length;++A)E[A]=S&255,S/=256;for(this.v(E),E=Array(16),S=0,A=0;A<4;++A)for(let D=0;D<32;D+=8)E[S++]=this.g[A]>>>D&255;return E};function l(E,S){var A=h;return Object.prototype.hasOwnProperty.call(A,E)?A[E]:A[E]=S(E)}function c(E,S){this.h=S;const A=[];let D=!0;for(let M=E.length-1;M>=0;M--){const U=E[M]|0;D&&U==S||(A[M]=U,D=!1)}this.g=A}var h={};function m(E){return-128<=E&&E<128?l(E,function(S){return new c([S|0],S<0?-1:0)}):new c([E|0],E<0?-1:0)}function g(E){if(isNaN(E)||!isFinite(E))return b;if(E<0)return k(g(-E));const S=[];let A=1;for(let D=0;E>=A;D++)S[D]=E/A|0,A*=4294967296;return new c(S,0)}function v(E,S){if(E.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(E.charAt(0)=="-")return k(v(E.substring(1),S));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=g(Math.pow(S,8));let D=b;for(let U=0;U<E.length;U+=8){var M=Math.min(8,E.length-U);const P=parseInt(E.substring(U,U+M),S);M<8?(M=g(Math.pow(S,M)),D=D.j(M).add(g(P))):(D=D.j(A),D=D.add(g(P)))}return D}var b=m(0),_=m(1),C=m(16777216);n=c.prototype,n.m=function(){if(I(this))return-k(this).m();let E=0,S=1;for(let A=0;A<this.g.length;A++){const D=this.i(A);E+=(D>=0?D:4294967296+D)*S,S*=4294967296}return E},n.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(R(this))return"0";if(I(this))return"-"+k(this).toString(E);const S=g(Math.pow(E,6));var A=this;let D="";for(;;){const M=V(A,S).g;A=B(A,M.j(S));let U=((A.g.length>0?A.g[0]:A.h)>>>0).toString(E);if(A=M,R(A))return U+D;for(;U.length<6;)U="0"+U;D=U+D}},n.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function R(E){if(E.h!=0)return!1;for(let S=0;S<E.g.length;S++)if(E.g[S]!=0)return!1;return!0}function I(E){return E.h==-1}n.l=function(E){return E=B(this,E),I(E)?-1:R(E)?0:1};function k(E){const S=E.g.length,A=[];for(let D=0;D<S;D++)A[D]=~E.g[D];return new c(A,~E.h).add(_)}n.abs=function(){return I(this)?k(this):this},n.add=function(E){const S=Math.max(this.g.length,E.g.length),A=[];let D=0;for(let M=0;M<=S;M++){let U=D+(this.i(M)&65535)+(E.i(M)&65535),P=(U>>>16)+(this.i(M)>>>16)+(E.i(M)>>>16);D=P>>>16,U&=65535,P&=65535,A[M]=P<<16|U}return new c(A,A[A.length-1]&-2147483648?-1:0)};function B(E,S){return E.add(k(S))}n.j=function(E){if(R(this)||R(E))return b;if(I(this))return I(E)?k(this).j(k(E)):k(k(this).j(E));if(I(E))return k(this.j(k(E)));if(this.l(C)<0&&E.l(C)<0)return g(this.m()*E.m());const S=this.g.length+E.g.length,A=[];for(var D=0;D<2*S;D++)A[D]=0;for(D=0;D<this.g.length;D++)for(let M=0;M<E.g.length;M++){const U=this.i(D)>>>16,P=this.i(D)&65535,xe=E.i(M)>>>16,Ee=E.i(M)&65535;A[2*D+2*M]+=P*Ee,$(A,2*D+2*M),A[2*D+2*M+1]+=U*Ee,$(A,2*D+2*M+1),A[2*D+2*M+1]+=P*xe,$(A,2*D+2*M+1),A[2*D+2*M+2]+=U*xe,$(A,2*D+2*M+2)}for(E=0;E<S;E++)A[E]=A[2*E+1]<<16|A[2*E];for(E=S;E<2*S;E++)A[E]=0;return new c(A,0)};function $(E,S){for(;(E[S]&65535)!=E[S];)E[S+1]+=E[S]>>>16,E[S]&=65535,S++}function N(E,S){this.g=E,this.h=S}function V(E,S){if(R(S))throw Error("division by zero");if(R(E))return new N(b,b);if(I(E))return S=V(k(E),S),new N(k(S.g),k(S.h));if(I(S))return S=V(E,k(S)),new N(k(S.g),S.h);if(E.g.length>30){if(I(E)||I(S))throw Error("slowDivide_ only works with positive integers.");for(var A=_,D=S;D.l(E)<=0;)A=z(A),D=z(D);var M=F(A,1),U=F(D,1);for(D=F(D,2),A=F(A,2);!R(D);){var P=U.add(D);P.l(E)<=0&&(M=M.add(A),U=P),D=F(D,1),A=F(A,1)}return S=B(E,M.j(S)),new N(M,S)}for(M=b;E.l(S)>=0;){for(A=Math.max(1,Math.floor(E.m()/S.m())),D=Math.ceil(Math.log(A)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),U=g(A),P=U.j(S);I(P)||P.l(E)>0;)A-=D,U=g(A),P=U.j(S);R(U)&&(U=_),M=M.add(U),E=B(E,P)}return new N(M,E)}n.B=function(E){return V(this,E).h},n.and=function(E){const S=Math.max(this.g.length,E.g.length),A=[];for(let D=0;D<S;D++)A[D]=this.i(D)&E.i(D);return new c(A,this.h&E.h)},n.or=function(E){const S=Math.max(this.g.length,E.g.length),A=[];for(let D=0;D<S;D++)A[D]=this.i(D)|E.i(D);return new c(A,this.h|E.h)},n.xor=function(E){const S=Math.max(this.g.length,E.g.length),A=[];for(let D=0;D<S;D++)A[D]=this.i(D)^E.i(D);return new c(A,this.h^E.h)};function z(E){const S=E.g.length+1,A=[];for(let D=0;D<S;D++)A[D]=E.i(D)<<1|E.i(D-1)>>>31;return new c(A,E.h)}function F(E,S){const A=S>>5;S%=32;const D=E.g.length-A,M=[];for(let U=0;U<D;U++)M[U]=S>0?E.i(U+A)>>>S|E.i(U+A+1)<<32-S:E.i(U+A);return new c(M,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,M4=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=v,_a=c}).apply(typeof K2<"u"?K2:typeof self<"u"?self:typeof window<"u"?window:{});var sf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var O4,Nu,P4,kf,u0,L4,V4,U4;(function(){var n,e=Object.defineProperty;function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof sf=="object"&&sf];for(var x=0;x<f.length;++x){var T=f[x];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function a(f,x){if(x)e:{var T=r;f=f.split(".");for(var L=0;L<f.length-1;L++){var W=f[L];if(!(W in T))break e;T=T[W]}f=f[f.length-1],L=T[f],x=x(L),x!=L&&x!=null&&e(T,f,{configurable:!0,writable:!0,value:x})}}a("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(f){return f||function(x){var T=[],L;for(L in x)Object.prototype.hasOwnProperty.call(x,L)&&T.push([L,x[L]]);return T}});var l=l||{},c=this||self;function h(f){var x=typeof f;return x=="object"&&f!=null||x=="function"}function m(f,x,T){return f.call.apply(f.bind,arguments)}function g(f,x,T){return g=m,g.apply(null,arguments)}function v(f,x){var T=Array.prototype.slice.call(arguments,1);return function(){var L=T.slice();return L.push.apply(L,arguments),f.apply(this,L)}}function b(f,x){function T(){}T.prototype=x.prototype,f.Z=x.prototype,f.prototype=new T,f.prototype.constructor=f,f.Ob=function(L,W,ie){for(var ke=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)ke[rt-2]=arguments[rt];return x.prototype[W].apply(L,ke)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function C(f){const x=f.length;if(x>0){const T=Array(x);for(let L=0;L<x;L++)T[L]=f[L];return T}return[]}function R(f,x){for(let L=1;L<arguments.length;L++){const W=arguments[L];var T=typeof W;if(T=T!="object"?T:W?Array.isArray(W)?"array":T:"null",T=="array"||T=="object"&&typeof W.length=="number"){T=f.length||0;const ie=W.length||0;f.length=T+ie;for(let ke=0;ke<ie;ke++)f[T+ke]=W[ke]}else f.push(W)}}class I{constructor(x,T){this.i=x,this.j=T,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function k(f){c.setTimeout(()=>{throw f},0)}function B(){var f=E;let x=null;return f.g&&(x=f.g,f.g=f.g.next,f.g||(f.h=null),x.next=null),x}class ${constructor(){this.h=this.g=null}add(x,T){const L=N.get();L.set(x,T),this.h?this.h.next=L:this.g=L,this.h=L}}var N=new I(()=>new V,f=>f.reset());class V{constructor(){this.next=this.g=this.h=null}set(x,T){this.h=x,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let z,F=!1,E=new $,S=()=>{const f=Promise.resolve(void 0);z=()=>{f.then(A)}};function A(){for(var f;f=B();){try{f.h.call(f.g)}catch(T){k(T)}var x=N;x.j(f),x.h<100&&(x.h++,f.next=x.g,x.g=f)}F=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(f,x){this.type=f,this.g=this.target=x,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var f=!1,x=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const T=()=>{};c.addEventListener("test",T,x),c.removeEventListener("test",T,x)}catch{}return f})();function P(f){return/^[\s\xa0]*$/.test(f)}function xe(f,x){M.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,x)}b(xe,M),xe.prototype.init=function(f,x){const T=this.type=f.type,L=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=x,x=f.relatedTarget,x||(T=="mouseover"?x=f.fromElement:T=="mouseout"&&(x=f.toElement)),this.relatedTarget=x,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&xe.Z.h.call(this)},xe.prototype.h=function(){xe.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Ee="closure_listenable_"+(Math.random()*1e6|0),Y=0;function se(f,x,T,L,W){this.listener=f,this.proxy=null,this.src=x,this.type=T,this.capture=!!L,this.ha=W,this.key=++Y,this.da=this.fa=!1}function J(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Ce(f,x,T){for(const L in f)x.call(T,f[L],L,f)}function Ne(f,x){for(const T in f)x.call(void 0,f[T],T,f)}function H(f){const x={};for(const T in f)x[T]=f[T];return x}const q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function re(f,x){let T,L;for(let W=1;W<arguments.length;W++){L=arguments[W];for(T in L)f[T]=L[T];for(let ie=0;ie<q.length;ie++)T=q[ie],Object.prototype.hasOwnProperty.call(L,T)&&(f[T]=L[T])}}function ne(f){this.src=f,this.g={},this.h=0}ne.prototype.add=function(f,x,T,L,W){const ie=f.toString();f=this.g[ie],f||(f=this.g[ie]=[],this.h++);const ke=ye(f,x,L,W);return ke>-1?(x=f[ke],T||(x.fa=!1)):(x=new se(x,this.src,ie,!!L,W),x.fa=T,f.push(x)),x};function we(f,x){const T=x.type;if(T in f.g){var L=f.g[T],W=Array.prototype.indexOf.call(L,x,void 0),ie;(ie=W>=0)&&Array.prototype.splice.call(L,W,1),ie&&(J(x),f.g[T].length==0&&(delete f.g[T],f.h--))}}function ye(f,x,T,L){for(let W=0;W<f.length;++W){const ie=f[W];if(!ie.da&&ie.listener==x&&ie.capture==!!T&&ie.ha==L)return W}return-1}var Te="closure_lm_"+(Math.random()*1e6|0),Fe={};function Ye(f,x,T,L,W){if(Array.isArray(x)){for(let ie=0;ie<x.length;ie++)Ye(f,x[ie],T,L,W);return null}return T=Se(T),f&&f[Ee]?f.J(x,T,h(L)?!!L.capture:!1,W):be(f,x,T,!1,L,W)}function be(f,x,T,L,W,ie){if(!x)throw Error("Invalid event type");const ke=h(W)?!!W.capture:!!W;let rt=X(f);if(rt||(f[Te]=rt=new ne(f)),T=rt.add(x,T,L,ke,ie),T.proxy)return T;if(L=he(),T.proxy=L,L.src=f,L.listener=T,f.addEventListener)U||(W=ke),W===void 0&&(W=!1),f.addEventListener(x.toString(),L,W);else if(f.attachEvent)f.attachEvent(Re(x.toString()),L);else if(f.addListener&&f.removeListener)f.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return T}function he(){function f(T){return x.call(f.src,f.listener,T)}const x=Ie;return f}function _e(f,x,T,L,W){if(Array.isArray(x))for(var ie=0;ie<x.length;ie++)_e(f,x[ie],T,L,W);else L=h(L)?!!L.capture:!!L,T=Se(T),f&&f[Ee]?(f=f.i,ie=String(x).toString(),ie in f.g&&(x=f.g[ie],T=ye(x,T,L,W),T>-1&&(J(x[T]),Array.prototype.splice.call(x,T,1),x.length==0&&(delete f.g[ie],f.h--)))):f&&(f=X(f))&&(x=f.g[x.toString()],f=-1,x&&(f=ye(x,T,L,W)),(T=f>-1?x[f]:null)&&ae(T))}function ae(f){if(typeof f!="number"&&f&&!f.da){var x=f.src;if(x&&x[Ee])we(x.i,f);else{var T=f.type,L=f.proxy;x.removeEventListener?x.removeEventListener(T,L,f.capture):x.detachEvent?x.detachEvent(Re(T),L):x.addListener&&x.removeListener&&x.removeListener(L),(T=X(x))?(we(T,f),T.h==0&&(T.src=null,x[Te]=null)):J(f)}}}function Re(f){return f in Fe?Fe[f]:Fe[f]="on"+f}function Ie(f,x){if(f.da)f=!0;else{x=new xe(x,this);const T=f.listener,L=f.ha||f.src;f.fa&&ae(f),f=T.call(L,x)}return f}function X(f){return f=f[Te],f instanceof ne?f:null}var le="__closure_events_fn_"+(Math.random()*1e9>>>0);function Se(f){return typeof f=="function"?f:(f[le]||(f[le]=function(x){return f.handleEvent(x)}),f[le])}function Oe(){D.call(this),this.i=new ne(this),this.M=this,this.G=null}b(Oe,D),Oe.prototype[Ee]=!0,Oe.prototype.removeEventListener=function(f,x,T,L){_e(this,f,x,T,L)};function qe(f,x){var T,L=f.G;if(L)for(T=[];L;L=L.G)T.push(L);if(f=f.M,L=x.type||x,typeof x=="string")x=new M(x,f);else if(x instanceof M)x.target=x.target||f;else{var W=x;x=new M(L,f),re(x,W)}W=!0;let ie,ke;if(T)for(ke=T.length-1;ke>=0;ke--)ie=x.g=T[ke],W=Ke(ie,L,!0,x)&&W;if(ie=x.g=f,W=Ke(ie,L,!0,x)&&W,W=Ke(ie,L,!1,x)&&W,T)for(ke=0;ke<T.length;ke++)ie=x.g=T[ke],W=Ke(ie,L,!1,x)&&W}Oe.prototype.N=function(){if(Oe.Z.N.call(this),this.i){var f=this.i;for(const x in f.g){const T=f.g[x];for(let L=0;L<T.length;L++)J(T[L]);delete f.g[x],f.h--}}this.G=null},Oe.prototype.J=function(f,x,T,L){return this.i.add(String(f),x,!1,T,L)},Oe.prototype.K=function(f,x,T,L){return this.i.add(String(f),x,!0,T,L)};function Ke(f,x,T,L){if(x=f.i.g[String(x)],!x)return!0;x=x.concat();let W=!0;for(let ie=0;ie<x.length;++ie){const ke=x[ie];if(ke&&!ke.da&&ke.capture==T){const rt=ke.listener,Zt=ke.ha||ke.src;ke.fa&&we(f.i,ke),W=rt.call(Zt,L)!==!1&&W}}return W&&!L.defaultPrevented}function It(f,x){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=g(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:c.setTimeout(f,x||0)}function kt(f){f.g=It(()=>{f.g=null,f.i&&(f.i=!1,kt(f))},f.l);const x=f.h;f.h=null,f.m.apply(null,x)}class ge extends D{constructor(x,T){super(),this.m=x,this.l=T,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:kt(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ze(f){D.call(this),this.h=f,this.g={}}b(ze,D);var gt=[];function Ht(f){Ce(f.g,function(x,T){this.g.hasOwnProperty(T)&&ae(x)},f),f.g={}}ze.prototype.N=function(){ze.Z.N.call(this),Ht(this)},ze.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wn=c.JSON.stringify,er=c.JSON.parse,Yt=class{stringify(f){return c.JSON.stringify(f,void 0)}parse(f){return c.JSON.parse(f,void 0)}};function Ai(){}function Id(){}var Fr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Rn(){M.call(this,"d")}b(Rn,M);function kr(){M.call(this,"c")}b(kr,M);var Jt={},jd=null;function zo(){return jd=jd||new Oe}Jt.Ia="serverreachability";function Dd(f){M.call(this,Jt.Ia,f)}b(Dd,M);function os(f){const x=zo();qe(x,new Dd(x))}Jt.STAT_EVENT="statevent";function Pa(f,x){M.call(this,Jt.STAT_EVENT,f),this.stat=x}b(Pa,M);function sn(f){const x=zo();qe(x,new Pa(x,f))}Jt.Ja="timingevent";function ls(f,x){M.call(this,Jt.Ja,f),this.size=x}b(ls,M);function cs(f,x){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){f()},x)}function Hr(){this.g=!0}Hr.prototype.ua=function(){this.g=!1};function vp(f,x,T,L,W,ie){f.info(function(){if(f.g)if(ie){var ke="",rt=ie.split("&");for(let wt=0;wt<rt.length;wt++){var Zt=rt[wt].split("=");if(Zt.length>1){const $t=Zt[0];Zt=Zt[1];const Ir=$t.split("_");ke=Ir.length>=2&&Ir[1]=="type"?ke+($t+"="+Zt+"&"):ke+($t+"=redacted&")}}}else ke=null;else ke=ie;return"XMLHTTP REQ ("+L+") [attempt "+W+"]: "+x+`
`+T+`
`+ke})}function Md(f,x,T,L,W,ie,ke){f.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+W+"]: "+x+`
`+T+`
`+ie+" "+ke})}function us(f,x,T,L){f.info(function(){return"XMLHTTP TEXT ("+x+"): "+bp(f,T)+(L?" "+L:"")})}function La(f,x){f.info(function(){return"TIMEOUT: "+x})}Hr.prototype.info=function(){};function bp(f,x){if(!f.g)return x;if(!x)return null;try{const ie=JSON.parse(x);if(ie){for(f=0;f<ie.length;f++)if(Array.isArray(ie[f])){var T=ie[f];if(!(T.length<2)){var L=T[1];if(Array.isArray(L)&&!(L.length<1)){var W=L[0];if(W!="noop"&&W!="stop"&&W!="close")for(let ke=1;ke<L.length;ke++)L[ke]=""}}}}return wn(ie)}catch{return x}}var Va={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},bc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xc;function Ua(){}b(Ua,Ai),Ua.prototype.g=function(){return new XMLHttpRequest},xc=new Ua;function Ks(f){return encodeURIComponent(String(f))}function Od(f){var x=1;f=f.split(":");const T=[];for(;x>0&&f.length;)T.push(f.shift()),x--;return f.length&&T.push(f.join(":")),T}function $r(f,x,T,L){this.j=f,this.i=x,this.l=T,this.S=L||1,this.V=new ze(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new qr}function qr(){this.i=null,this.g="",this.h=!1}var an={},En={};function ds(f,x,T){f.M=1,f.A=za(ln(x)),f.u=T,f.R=!0,Bo(f,null)}function Bo(f,x){f.F=Date.now(),hs(f),f.B=ln(f.A);var T=f.B,L=f.S;Array.isArray(L)||(L=[String(L)]),qo(T.i,"t",L),f.C=0,T=f.j.L,f.h=new qr,f.g=Xd(f.j,T?x:null,!f.u),f.P>0&&(f.O=new ge(g(f.Y,f,f.g),f.P)),x=f.V,T=f.g,L=f.ba;var W="readystatechange";Array.isArray(W)||(W&&(gt[0]=W.toString()),W=gt);for(let ie=0;ie<W.length;ie++){const ke=Ye(T,W[ie],L||x.handleEvent,!1,x.h||x);if(!ke)break;x.g[ke.key]=ke}x=f.J?H(f.J):{},f.u?(f.v||(f.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,x)):(f.v="GET",f.g.ea(f.B,f.v,null,x)),os(),vp(f.i,f.v,f.B,f.l,f.S,f.u)}$r.prototype.ba=function(f){f=f.target;const x=this.O;x&&Kr(f)==3?x.j():this.Y(f)},$r.prototype.Y=function(f){try{if(f==this.g)e:{const rt=Kr(this.g),Zt=this.g.ya(),wt=this.g.ca();if(!(rt<3)&&(rt!=3||this.g&&(this.h.h||this.g.la()||Nn(this.g)))){this.K||rt!=4||Zt==7||(Zt==8||wt<=0?os(3):os(2)),fs(this);var x=this.g.ca();this.X=x;var T=xp(this);if(this.o=x==200,Md(this.i,this.v,this.B,this.l,this.S,rt,x),this.o){if(this.U&&!this.L){t:{if(this.g){var L,W=this.g;if((L=W.g?W.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(L)){var ie=L;break t}}ie=null}if(f=ie)us(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ms(this,f);else{this.o=!1,this.m=3,sn(12),fr(this),Ar(this);break e}}if(this.R){f=!0;let $t;for(;!this.K&&this.C<T.length;)if($t=Ld(this,T),$t==En){rt==4&&(this.m=4,sn(14),f=!1),us(this.i,this.l,null,"[Incomplete Response]");break}else if($t==an){this.m=4,sn(15),us(this.i,this.l,T,"[Invalid Chunk]"),f=!1;break}else us(this.i,this.l,$t,null),ms(this,$t);if(Pd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rt!=4||T.length!=0||this.h.h||(this.m=1,sn(16),f=!1),this.o=this.o&&f,!f)us(this.i,this.l,T,"[Invalid Chunked Response]"),fr(this),Ar(this);else if(T.length>0&&!this.W){this.W=!0;var ke=this.j;ke.g==this&&ke.aa&&!ke.P&&(ke.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Oc(ke),ke.P=!0,sn(11))}}else us(this.i,this.l,T,null),ms(this,T);rt==4&&fr(this),this.o&&!this.K&&(rt==4?Gd(this.j,this):(this.o=!1,hs(this)))}else Xs(this.g),x==400&&T.indexOf("Unknown SID")>0?(this.m=3,sn(12)):(this.m=0,sn(13)),fr(this),Ar(this)}}}catch{}finally{}};function xp(f){if(!Pd(f))return f.g.la();const x=Nn(f.g);if(x==="")return"";let T="";const L=x.length,W=Kr(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return fr(f),Ar(f),"";f.h.i=new c.TextDecoder}for(let ie=0;ie<L;ie++)f.h.h=!0,T+=f.h.i.decode(x[ie],{stream:!(W&&ie==L-1)});return x.length=0,f.h.g+=T,f.C=0,f.h.g}function Pd(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function Ld(f,x){var T=f.C,L=x.indexOf(`
`,T);return L==-1?En:(T=Number(x.substring(T,L)),isNaN(T)?an:(L+=1,L+T>x.length?En:(x=x.slice(L,L+T),f.C=L+T,x)))}$r.prototype.cancel=function(){this.K=!0,fr(this)};function hs(f){f.T=Date.now()+f.H,Fo(f,f.H)}function Fo(f,x){if(f.D!=null)throw Error("WatchDog timer not null");f.D=cs(g(f.aa,f),x)}function fs(f){f.D&&(c.clearTimeout(f.D),f.D=null)}$r.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(La(this.i,this.B),this.M!=2&&(os(),sn(17)),fr(this),this.m=2,Ar(this)):Fo(this,this.T-f)};function Ar(f){f.j.I==0||f.K||Gd(f.j,f)}function fr(f){fs(f);var x=f.O;x&&typeof x.dispose=="function"&&x.dispose(),f.O=null,Ht(f.V),f.g&&(x=f.g,f.g=null,x.abort(),x.dispose())}function ms(f,x){try{var T=f.j;if(T.I!=0&&(T.g==f||gs(T.h,f))){if(!f.L&&gs(T.h,f)&&T.I==3){try{var L=T.Ba.g.parse(x)}catch{L=null}if(Array.isArray(L)&&L.length==3){var W=L;if(W[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<f.F)Xo(T),Pi(T);else break e;Ya(T),sn(18)}}else T.xa=W[1],0<T.xa-T.K&&W[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=cs(g(T.Va,T),6e3));ps(T.h)<=1&&T.ta&&(T.ta=void 0)}else ws(T,11)}else if((f.L||T.g==f)&&Xo(T),!P(x))for(W=T.Ba.g.parse(x),x=0;x<W.length;x++){let wt=W[x];const $t=wt[0];if(!($t<=T.K))if(T.K=$t,wt=wt[1],T.I==2)if(wt[0]=="c"){T.M=wt[1],T.ba=wt[2];const Ir=wt[3];Ir!=null&&(T.ka=Ir,T.j.info("VER="+T.ka));const Es=wt[4];Es!=null&&(T.za=Es,T.j.info("SVER="+T.za));const Qr=wt[5];Qr!=null&&typeof Qr=="number"&&Qr>0&&(L=1.5*Qr,T.O=L,T.j.info("backChannelRequestTimeoutMs_="+L)),L=T;const Xr=f.g;if(Xr){const Ka=Xr.g?Xr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ka){var ie=L.h;ie.g||Ka.indexOf("spdy")==-1&&Ka.indexOf("quic")==-1&&Ka.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(Ec(ie,ie.h),ie.h=null))}if(L.G){const Wo=Xr.g?Xr.g.getResponseHeader("X-HTTP-Session-Id"):null;Wo&&(L.wa=Wo,At(L.J,L.G,Wo))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-f.F,T.j.info("Handshake RTT: "+T.T+"ms")),L=T;var ke=f;if(L.na=Qd(L,L.L?L.ba:null,L.W),ke.L){Sc(L.h,ke);var rt=ke,Zt=L.O;Zt&&(rt.H=Zt),rt.D&&(fs(rt),hs(rt)),L.g=ke}else $d(L);T.i.length>0&&_s(T)}else wt[0]!="stop"&&wt[0]!="close"||ws(T,7);else T.I==3&&(wt[0]=="stop"||wt[0]=="close"?wt[0]=="stop"?ws(T,7):Dc(T):wt[0]!="noop"&&T.l&&T.l.qa(wt),T.A=0)}}os(4)}catch{}}var on=class{constructor(f,x){this.g=f,this.map=x}};function _c(f){this.l=f||10,c.PerformanceNavigationTiming?(f=c.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function wc(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function ps(f){return f.h?1:f.g?f.g.size:0}function gs(f,x){return f.h?f.h==x:f.g?f.g.has(x):!1}function Ec(f,x){f.g?f.g.add(x):f.h=x}function Sc(f,x){f.h&&f.h==x?f.h=null:f.g&&f.g.has(x)&&f.g.delete(x)}_c.prototype.cancel=function(){if(this.i=Tc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Tc(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let x=f.i;for(const T of f.g.values())x=x.concat(T.G);return x}return C(f.i)}var Vd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ho(f,x){if(f){f=f.split("&");for(let T=0;T<f.length;T++){const L=f[T].indexOf("=");let W,ie=null;L>=0?(W=f[T].substring(0,L),ie=f[T].substring(L+1)):W=f[T],x(W,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function mr(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;f instanceof mr?(this.l=f.l,Sn(this,f.j),this.o=f.o,this.g=f.g,Ri(this,f.u),this.h=f.h,Cc(this,Fd(f.i)),this.m=f.m):f&&(x=String(f).match(Vd))?(this.l=!1,Sn(this,x[1]||"",!0),this.o=ys(x[2]||""),this.g=ys(x[3]||"",!0),Ri(this,x[4]),this.h=ys(x[5]||"",!0),Cc(this,x[6]||"",!0),this.m=ys(x[7]||"")):(this.l=!1,this.i=new Ii(null,this.l))}mr.prototype.toString=function(){const f=[];var x=this.j;x&&f.push(Ba(x,$o,!0),":");var T=this.g;return(T||x=="file")&&(f.push("//"),(x=this.o)&&f.push(Ba(x,$o,!0),"@"),f.push(Ks(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&f.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&f.push("/"),f.push(Ba(T,T.charAt(0)=="/"?kc:Ud,!0))),(T=this.i.toString())&&f.push("?",T),(T=this.m)&&f.push("#",Ba(T,zd)),f.join("")},mr.prototype.resolve=function(f){const x=ln(this);let T=!!f.j;T?Sn(x,f.j):T=!!f.o,T?x.o=f.o:T=!!f.g,T?x.g=f.g:T=f.u!=null;var L=f.h;if(T)Ri(x,f.u);else if(T=!!f.h){if(L.charAt(0)!="/")if(this.g&&!this.h)L="/"+L;else{var W=x.h.lastIndexOf("/");W!=-1&&(L=x.h.slice(0,W+1)+L)}if(W=L,W==".."||W==".")L="";else if(W.indexOf("./")!=-1||W.indexOf("/.")!=-1){L=W.lastIndexOf("/",0)==0,W=W.split("/");const ie=[];for(let ke=0;ke<W.length;){const rt=W[ke++];rt=="."?L&&ke==W.length&&ie.push(""):rt==".."?((ie.length>1||ie.length==1&&ie[0]!="")&&ie.pop(),L&&ke==W.length&&ie.push("")):(ie.push(rt),L=!0)}L=ie.join("/")}else L=W}return T?x.h=L:T=f.i.toString()!=="",T?Cc(x,Fd(f.i)):T=!!f.m,T&&(x.m=f.m),x};function ln(f){return new mr(f)}function Sn(f,x,T){f.j=T?ys(x,!0):x,f.j&&(f.j=f.j.replace(/:$/,""))}function Ri(f,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);f.u=x}else f.u=null}function Cc(f,x,T){x instanceof Ii?(f.i=x,Go(f.i,f.l)):(T||(x=Ba(x,Ni)),f.i=new Ii(x,f.l))}function At(f,x,T){f.i.set(x,T)}function za(f){return At(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function ys(f,x){return f?x?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Ba(f,x,T){return typeof f=="string"?(f=encodeURI(f).replace(x,tr),T&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function tr(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var $o=/[#\/\?@]/g,Ud=/[#\?:]/g,kc=/[#\?]/g,Ni=/[#\?@]/g,zd=/#/g;function Ii(f,x){this.h=this.g=null,this.i=f||null,this.j=!!x}function nr(f){f.g||(f.g=new Map,f.h=0,f.i&&Ho(f.i,function(x,T){f.add(decodeURIComponent(x.replace(/\+/g," ")),T)}))}n=Ii.prototype,n.add=function(f,x){nr(this),this.i=null,f=ji(this,f);let T=this.g.get(f);return T||this.g.set(f,T=[]),T.push(x),this.h+=1,this};function Bd(f,x){nr(f),x=ji(f,x),f.g.has(x)&&(f.i=null,f.h-=f.g.get(x).length,f.g.delete(x))}function Ac(f,x){return nr(f),x=ji(f,x),f.g.has(x)}n.forEach=function(f,x){nr(this),this.g.forEach(function(T,L){T.forEach(function(W){f.call(x,W,L,this)},this)},this)};function Rc(f,x){nr(f);let T=[];if(typeof x=="string")Ac(f,x)&&(T=T.concat(f.g.get(ji(f,x))));else for(f=Array.from(f.g.values()),x=0;x<f.length;x++)T=T.concat(f[x]);return T}n.set=function(f,x){return nr(this),this.i=null,f=ji(this,f),Ac(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[x]),this.h+=1,this},n.get=function(f,x){return f?(f=Rc(this,f),f.length>0?String(f[0]):x):x};function qo(f,x,T){Bd(f,x),T.length>0&&(f.i=null,f.g.set(ji(f,x),C(T)),f.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],x=Array.from(this.g.keys());for(let L=0;L<x.length;L++){var T=x[L];const W=Ks(T);T=Rc(this,T);for(let ie=0;ie<T.length;ie++){let ke=W;T[ie]!==""&&(ke+="="+Ks(T[ie])),f.push(ke)}}return this.i=f.join("&")};function Fd(f){const x=new Ii;return x.i=f.i,f.g&&(x.g=new Map(f.g),x.h=f.h),x}function ji(f,x){return x=String(x),f.j&&(x=x.toLowerCase()),x}function Go(f,x){x&&!f.j&&(nr(f),f.i=null,f.g.forEach(function(T,L){const W=L.toLowerCase();L!=W&&(Bd(this,L),qo(this,W,T))},f)),f.j=x}function Gr(f,x){const T=new Hr;if(c.Image){const L=new Image;L.onload=v(Rr,T,"TestLoadImage: loaded",!0,x,L),L.onerror=v(Rr,T,"TestLoadImage: error",!1,x,L),L.onabort=v(Rr,T,"TestLoadImage: abort",!1,x,L),L.ontimeout=v(Rr,T,"TestLoadImage: timeout",!1,x,L),c.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=f}else x(!1)}function Nc(f,x){const T=new Hr,L=new AbortController,W=setTimeout(()=>{L.abort(),Rr(T,"TestPingServer: timeout",!1,x)},1e4);fetch(f,{signal:L.signal}).then(ie=>{clearTimeout(W),ie.ok?Rr(T,"TestPingServer: ok",!0,x):Rr(T,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(W),Rr(T,"TestPingServer: error",!1,x)})}function Rr(f,x,T,L,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),L(T)}catch{}}function Di(){this.g=new Yt}function vs(f){this.i=f.Sb||null,this.h=f.ab||!1}b(vs,Ai),vs.prototype.g=function(){return new Fa(this.i,this.h)};function Fa(f,x){Oe.call(this),this.H=f,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(Fa,Oe),n=Fa.prototype,n.open=function(f,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=x,this.readyState=1,Yr(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(x.body=f),(this.H||c).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Mi(this)),this.readyState=0},n.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Yr(this)),this.g&&(this.readyState=3,Yr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Yo(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function Yo(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}n.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var x=f.value?f.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!f.done}))&&(this.response=this.responseText+=x)}f.done?Mi(this):Yr(this),this.readyState==3&&Yo(this)}},n.Oa=function(f){this.g&&(this.response=this.responseText=f,Mi(this))},n.Na=function(f){this.g&&(this.response=f,Mi(this))},n.ga=function(){this.g&&Mi(this)};function Mi(f){f.readyState=4,f.l=null,f.j=null,f.B=null,Yr(f)}n.setRequestHeader=function(f,x){this.A.append(f,x)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],x=this.h.entries();for(var T=x.next();!T.done;)T=T.value,f.push(T[0]+": "+T[1]),T=x.next();return f.join(`\r
`)};function Yr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Fa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Nr(f){let x="";return Ce(f,function(T,L){x+=L,x+=":",x+=T,x+=`\r
`}),x}function Ha(f,x,T){e:{for(L in T){var L=!1;break e}L=!0}L||(T=Nr(T),typeof f=="string"?T!=null&&Ks(T):At(f,x,T))}function jt(f){Oe.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(jt,Oe);var bs=/^https?$/i,Ic=["POST","PUT"];n=jt.prototype,n.Fa=function(f){this.H=f},n.ea=function(f,x,T,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);x=x?x.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xc.g(),this.g.onreadystatechange=_(g(this.Ca,this));try{this.B=!0,this.g.open(x,String(f),!0),this.B=!1}catch(ie){$a(this,ie);return}if(f=T||"",T=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var W in L)T.set(W,L[W]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const ie of L.keys())T.set(ie,L.get(ie));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(T.keys()).find(ie=>ie.toLowerCase()=="content-type"),W=c.FormData&&f instanceof c.FormData,!(Array.prototype.indexOf.call(Ic,x,void 0)>=0)||L||W||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,ke]of T)this.g.setRequestHeader(ie,ke);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(ie){$a(this,ie)}};function $a(f,x){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=x,f.o=5,jc(f),Qs(f)}function jc(f){f.A||(f.A=!0,qe(f,"complete"),qe(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,qe(this,"complete"),qe(this,"abort"),Qs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qs(this,!0)),jt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?qa(this):this.Xa())},n.Xa=function(){qa(this)};function qa(f){if(f.h&&typeof l<"u"){if(f.v&&Kr(f)==4)setTimeout(f.Ca.bind(f),0);else if(qe(f,"readystatechange"),Kr(f)==4){f.h=!1;try{const ie=f.ca();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var T;if(!(T=x)){var L;if(L=ie===0){let ke=String(f.D).match(Vd)[1]||null;!ke&&c.self&&c.self.location&&(ke=c.self.location.protocol.slice(0,-1)),L=!bs.test(ke?ke.toLowerCase():"")}T=L}if(T)qe(f,"complete"),qe(f,"success");else{f.o=6;try{var W=Kr(f)>2?f.g.statusText:""}catch{W=""}f.l=W+" ["+f.ca()+"]",jc(f)}}finally{Qs(f)}}}}function Qs(f,x){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const T=f.g;f.g=null,x||qe(f,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Kr(f){return f.g?f.g.readyState:0}n.ca=function(){try{return Kr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(f){if(this.g){var x=this.g.responseText;return f&&x.indexOf(f)==0&&(x=x.substring(f.length)),er(x)}};function Nn(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Xs(f){const x={};f=(f.g&&Kr(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<f.length;L++){if(P(f[L]))continue;var T=Od(f[L]);const W=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const ie=x[W]||[];x[W]=ie,ie.push(T)}Ne(x,function(L){return L.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xs(f,x,T){return T&&T.internalChannelParams&&T.internalChannelParams[f]||x}function Oi(f){this.za=0,this.i=[],this.j=new Hr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xs("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xs("baseRetryDelayMs",5e3,f),this.Za=xs("retryDelaySeedMs",1e4,f),this.Ta=xs("forwardChannelMaxRetries",2,f),this.va=xs("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new _c(f&&f.concurrentRequestLimit),this.Ba=new Di,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Oi.prototype,n.ka=8,n.I=1,n.connect=function(f,x,T,L){sn(0),this.W=f,this.H=x||{},T&&L!==void 0&&(this.H.OSID=T,this.H.OAID=L),this.F=this.X,this.J=Qd(this,null,this.W),_s(this)};function Dc(f){if(Ko(f),f.I==3){var x=f.V++,T=ln(f.J);if(At(T,"SID",f.M),At(T,"RID",x),At(T,"TYPE","terminate"),Ga(f,T),x=new $r(f,f.j,x),x.M=2,x.A=za(ln(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(x.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=x.A,T=!0),T||(x.g=Xd(x.j,null),x.g.ea(x.A)),x.F=Date.now(),hs(x)}Kd(f)}function Pi(f){f.g&&(Oc(f),f.g.cancel(),f.g=null)}function Ko(f){Pi(f),f.v&&(c.clearTimeout(f.v),f.v=null),Xo(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&c.clearTimeout(f.m),f.m=null)}function _s(f){if(!wc(f.h)&&!f.m){f.m=!0;var x=f.Ea;z||S(),F||(z(),F=!0),E.add(x,f),f.D=0}}function Qo(f,x){return ps(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=x.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=cs(g(f.Ea,f,x),Yd(f,f.D)),f.D++,!0)}n.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const W=new $r(this,this.j,f);let ie=this.o;if(this.U&&(ie?(ie=H(ie),re(ie,this.U)):ie=this.U),this.u!==null||this.R||(W.J=ie,ie=null),this.S)e:{for(var x=0,T=0;T<this.i.length;T++){t:{var L=this.i[T];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(x+=L,x>4096){x=T;break e}if(x===4096||T===this.i.length-1){x=T+1;break e}}x=1e3}else x=1e3;x=Hd(this,W,x),T=ln(this.J),At(T,"RID",f),At(T,"CVER",22),this.G&&At(T,"X-HTTP-Session-Id",this.G),Ga(this,T),ie&&(this.R?x="headers="+Ks(Nr(ie))+"&"+x:this.u&&Ha(T,this.u,ie)),Ec(this.h,W),this.Ra&&At(T,"TYPE","init"),this.S?(At(T,"$req",x),At(T,"SID","null"),W.U=!0,ds(W,T,null)):ds(W,T,x),this.I=2}}else this.I==3&&(f?Mc(this,f):this.i.length==0||wc(this.h)||Mc(this))};function Mc(f,x){var T;x?T=x.l:T=f.V++;const L=ln(f.J);At(L,"SID",f.M),At(L,"RID",T),At(L,"AID",f.K),Ga(f,L),f.u&&f.o&&Ha(L,f.u,f.o),T=new $r(f,f.j,T,f.D+1),f.u===null&&(T.J=f.o),x&&(f.i=x.G.concat(f.i)),x=Hd(f,T,1e3),T.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),Ec(f.h,T),ds(T,L,x)}function Ga(f,x){f.H&&Ce(f.H,function(T,L){At(x,L,T)}),f.l&&Ce({},function(T,L){At(x,L,T)})}function Hd(f,x,T){T=Math.min(f.i.length,T);const L=f.l?g(f.l.Ka,f.l,f):null;e:{var W=f.i;let rt=-1;for(;;){const Zt=["count="+T];rt==-1?T>0?(rt=W[0].g,Zt.push("ofs="+rt)):rt=0:Zt.push("ofs="+rt);let wt=!0;for(let $t=0;$t<T;$t++){var ie=W[$t].g;const Ir=W[$t].map;if(ie-=rt,ie<0)rt=Math.max(0,W[$t].g-100),wt=!1;else try{ie="req"+ie+"_"||"";try{var ke=Ir instanceof Map?Ir:Object.entries(Ir);for(const[Es,Qr]of ke){let Xr=Qr;h(Qr)&&(Xr=wn(Qr)),Zt.push(ie+Es+"="+encodeURIComponent(Xr))}}catch(Es){throw Zt.push(ie+"type="+encodeURIComponent("_badmap")),Es}}catch{L&&L(Ir)}}if(wt){ke=Zt.join("&");break e}}ke=void 0}return f=f.i.splice(0,T),x.G=f,ke}function $d(f){if(!f.g&&!f.v){f.Y=1;var x=f.Da;z||S(),F||(z(),F=!0),E.add(x,f),f.A=0}}function Ya(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=cs(g(f.Da,f),Yd(f,f.A)),f.A++,!0)}n.Da=function(){if(this.v=null,qd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=cs(g(this.Wa,this),f)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,sn(10),Pi(this),qd(this))};function Oc(f){f.B!=null&&(c.clearTimeout(f.B),f.B=null)}function qd(f){f.g=new $r(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var x=ln(f.na);At(x,"RID","rpc"),At(x,"SID",f.M),At(x,"AID",f.K),At(x,"CI",f.F?"0":"1"),!f.F&&f.ia&&At(x,"TO",f.ia),At(x,"TYPE","xmlhttp"),Ga(f,x),f.u&&f.o&&Ha(x,f.u,f.o),f.O&&(f.g.H=f.O);var T=f.g;f=f.ba,T.M=1,T.A=za(ln(x)),T.u=null,T.R=!0,Bo(T,f)}n.Va=function(){this.C!=null&&(this.C=null,Pi(this),Ya(this),sn(19))};function Xo(f){f.C!=null&&(c.clearTimeout(f.C),f.C=null)}function Gd(f,x){var T=null;if(f.g==x){Xo(f),Oc(f),f.g=null;var L=2}else if(gs(f.h,x))T=x.G,Sc(f.h,x),L=1;else return;if(f.I!=0){if(x.o)if(L==1){T=x.u?x.u.length:0,x=Date.now()-x.F;var W=f.D;L=zo(),qe(L,new ls(L,T)),_s(f)}else $d(f);else if(W=x.m,W==3||W==0&&x.X>0||!(L==1&&Qo(f,x)||L==2&&Ya(f)))switch(T&&T.length>0&&(x=f.h,x.i=x.i.concat(T)),W){case 1:ws(f,5);break;case 4:ws(f,10);break;case 3:ws(f,6);break;default:ws(f,2)}}}function Yd(f,x){let T=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(T*=2),T*x}function ws(f,x){if(f.j.info("Error code "+x),x==2){var T=g(f.bb,f),L=f.Ua;const W=!L;L=new mr(L||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Sn(L,"https"),za(L),W?Gr(L.toString(),T):Nc(L.toString(),T)}else sn(2);f.I=0,f.l&&f.l.pa(x),Kd(f),Ko(f)}n.bb=function(f){f?(this.j.info("Successfully pinged google.com"),sn(2)):(this.j.info("Failed to ping google.com"),sn(1))};function Kd(f){if(f.I=0,f.ja=[],f.l){const x=Tc(f.h);(x.length!=0||f.i.length!=0)&&(R(f.ja,x),R(f.ja,f.i),f.h.i.length=0,C(f.i),f.i.length=0),f.l.oa()}}function Qd(f,x,T){var L=T instanceof mr?ln(T):new mr(T);if(L.g!="")x&&(L.g=x+"."+L.g),Ri(L,L.u);else{var W=c.location;L=W.protocol,x=x?x+"."+W.hostname:W.hostname,W=+W.port;const ie=new mr(null);L&&Sn(ie,L),x&&(ie.g=x),W&&Ri(ie,W),T&&(ie.h=T),L=ie}return T=f.G,x=f.wa,T&&x&&At(L,T,x),At(L,"VER",f.ka),Ga(f,L),L}function Xd(f,x,T){if(x&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=f.Aa&&!f.ma?new jt(new vs({ab:T})):new jt(f.ma),x.Fa(f.L),x}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wd(){}n=Wd.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Li(){}Li.prototype.g=function(f,x){return new Kn(f,x)};function Kn(f,x){Oe.call(this),this.g=new Oi(x),this.l=f,this.h=x&&x.messageUrlParams||null,f=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(f?f["X-WebChannel-Content-Type"]=x.messageContentType:f={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(f?f["X-WebChannel-Client-Profile"]=x.sa:f={"X-WebChannel-Client-Profile":x.sa}),this.g.U=f,(f=x&&x.Qb)&&!P(f)&&(this.g.u=f),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!P(x)&&(this.g.G=x,f=this.h,f!==null&&x in f&&(f=this.h,x in f&&delete f[x])),this.j=new Ws(this)}b(Kn,Oe),Kn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Kn.prototype.close=function(){Dc(this.g)},Kn.prototype.o=function(f){var x=this.g;if(typeof f=="string"){var T={};T.__data__=f,f=T}else this.v&&(T={},T.__data__=wn(f),f=T);x.i.push(new on(x.Ya++,f)),x.I==3&&_s(x)},Kn.prototype.N=function(){this.g.l=null,delete this.j,Dc(this.g),delete this.g,Kn.Z.N.call(this)};function Jd(f){Rn.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var x=f.__sm__;if(x){e:{for(const T in x){f=T;break e}f=void 0}(this.i=f)&&(f=this.i,x=x!==null&&f in x?x[f]:void 0),this.data=x}else this.data=f}b(Jd,Rn);function Zd(){kr.call(this),this.status=1}b(Zd,kr);function Ws(f){this.g=f}b(Ws,Wd),Ws.prototype.ra=function(){qe(this.g,"a")},Ws.prototype.qa=function(f){qe(this.g,new Jd(f))},Ws.prototype.pa=function(f){qe(this.g,new Zd)},Ws.prototype.oa=function(){qe(this.g,"b")},Li.prototype.createWebChannel=Li.prototype.g,Kn.prototype.send=Kn.prototype.o,Kn.prototype.open=Kn.prototype.m,Kn.prototype.close=Kn.prototype.close,U4=function(){return new Li},V4=function(){return zo()},L4=Jt,u0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Va.NO_ERROR=0,Va.TIMEOUT=8,Va.HTTP_ERROR=6,kf=Va,bc.COMPLETE="complete",P4=bc,Id.EventType=Fr,Fr.OPEN="a",Fr.CLOSE="b",Fr.ERROR="c",Fr.MESSAGE="d",Oe.prototype.listen=Oe.prototype.J,Nu=Id,jt.prototype.listenOnce=jt.prototype.K,jt.prototype.getLastError=jt.prototype.Ha,jt.prototype.getLastErrorCode=jt.prototype.ya,jt.prototype.getStatus=jt.prototype.ca,jt.prototype.getResponseJson=jt.prototype.La,jt.prototype.getResponseText=jt.prototype.la,jt.prototype.send=jt.prototype.ea,jt.prototype.setWithCredentials=jt.prototype.Fa,O4=jt}).apply(typeof sf<"u"?sf:typeof self<"u"?self:typeof window<"u"?window:{});const Q2="@firebase/firestore",X2="4.9.2";let Hn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Hn.UNAUTHENTICATED=new Hn(null),Hn.GOOGLE_CREDENTIALS=new Hn("google-credentials-uid"),Hn.FIRST_PARTY=new Hn("first-party-uid"),Hn.MOCK_USER=new Hn("mock-user");let uc="12.3.0";const To=new lv("@firebase/firestore");function Nl(){return To.logLevel}function De(n,...e){if(To.logLevel<=ht.DEBUG){const t=e.map(bv);To.debug(`Firestore (${uc}): ${n}`,...t)}}function Si(n,...e){if(To.logLevel<=ht.ERROR){const t=e.map(bv);To.error(`Firestore (${uc}): ${n}`,...t)}}function Gl(n,...e){if(To.logLevel<=ht.WARN){const t=e.map(bv);To.warn(`Firestore (${uc}): ${n}`,...t)}}function bv(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function We(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,z4(n,r,t)}function z4(n,e,t){let r=`FIRESTORE (${uc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Si(r),new Error(r)}function Ct(n,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,n||z4(e,a,r)}function tt(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends Hs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class xi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class B4{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Hn.UNAUTHENTICATED)))}shutdown(){}}class sj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ij{constructor(e){this.t=e,this.currentUser=Hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ct(this.o===void 0,42304);let r=this.i;const a=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let l=new xi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new xi,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},h=m=>{De("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>h(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?h(m):(De("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new xi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(De("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct(typeof r.accessToken=="string",31837,{l:r}),new B4(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ct(e===null||typeof e=="string",2055,{h:e}),new Hn(e)}}class aj{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Hn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class oj{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new aj(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Hn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class W2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lj{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Tr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ct(this.o===void 0,3512);const r=l=>{l.error!=null&&De("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,De("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{De("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):De("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new W2(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ct(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new W2(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function cj(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class xv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=cj(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function ft(n,e){return n<e?-1:n>e?1:0}function d0(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const a=n.charAt(r),l=e.charAt(r);if(a!==l)return ky(a)===ky(l)?ft(a,l):ky(a)?1:-1}return ft(n.length,e.length)}const uj=55296,dj=57343;function ky(n){const e=n.charCodeAt(0);return e>=uj&&e<=dj}function Yl(n,e,t){return n.length===e.length&&n.every(((r,a)=>t(r,e[a])))}const J2="__name__";class Ns{constructor(e,t,r){t===void 0?t=0:t>e.length&&We(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&We(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ns.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ns?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=Ns.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return ft(e.length,t.length)}static compareSegments(e,t){const r=Ns.isNumericId(e),a=Ns.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?Ns.extractNumericId(e).compare(Ns.extractNumericId(t)):d0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _a.fromString(e.substring(4,e.length-2))}}class Lt extends Ns{construct(e,t,r){return new Lt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ae(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new Lt(t)}static emptyPath(){return new Lt([])}}const hj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Un extends Ns{construct(e,t,r){return new Un(e,t,r)}static isValidIdentifier(e){return hj.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Un.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===J2}static keyField(){return new Un([J2])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new Ae(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new Ae(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Ae(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,a+=2}else h==="`"?(c=!c,a++):h!=="."||c?(r+=h,a++):(l(),a++)}if(l(),c)throw new Ae(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Un(t)}static emptyPath(){return new Un([])}}class He{constructor(e){this.path=e}static fromPath(e){return new He(Lt.fromString(e))}static fromName(e){return new He(Lt.fromString(e).popFirst(5))}static empty(){return new He(Lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new He(new Lt(e.slice()))}}function F4(n,e,t){if(!t)throw new Ae(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function fj(n,e,t,r){if(e===!0&&r===!0)throw new Ae(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Z2(n){if(!He.isDocumentKey(n))throw new Ae(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ew(n){if(He.isDocumentKey(n))throw new Ae(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function H4(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Dm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":We(12329,{type:typeof n})}function Xn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Dm(n);throw new Ae(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function mj(n,e){if(e<=0)throw new Ae(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function vn(n,e){const t={typeString:n};return e&&(t.value=e),t}function yd(n,e){if(!H4(n))throw new Ae(ce.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(a&&typeof c!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new Ae(ce.INVALID_ARGUMENT,t);return!0}const tw=-62135596800,nw=1e6;class Ft{static now(){return Ft.fromMillis(Date.now())}static fromDate(e){return Ft.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*nw);return new Ft(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<tw)throw new Ae(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/nw}_compareTo(e){return this.seconds===e.seconds?ft(this.nanoseconds,e.nanoseconds):ft(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yd(e,Ft._jsonSchema))return new Ft(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-tw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ft._jsonSchemaVersion="firestore/timestamp/1.0",Ft._jsonSchema={type:vn("string",Ft._jsonSchemaVersion),seconds:vn("number"),nanoseconds:vn("number")};class Ze{static fromTimestamp(e){return new Ze(e)}static min(){return new Ze(new Ft(0,0))}static max(){return new Ze(new Ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Yu=-1;function pj(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=Ze.fromTimestamp(r===1e9?new Ft(t+1,0):new Ft(t,r));return new Ta(a,He.empty(),e)}function gj(n){return new Ta(n.readTime,n.key,Yu)}class Ta{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ta(Ze.min(),He.empty(),Yu)}static max(){return new Ta(Ze.max(),He.empty(),Yu)}}function yj(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=He.comparator(n.documentKey,e.documentKey),t!==0?t:ft(n.largestBatchId,e.largestBatchId))}const vj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function dc(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==vj)throw n;De("LocalStore","Unexpectedly lost primary lease")}class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&We(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new pe(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof pe?t:pe.resolve(t)}catch(t){return pe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):pe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):pe.reject(t)}static resolve(e){return new pe(((t,r)=>{t(e)}))}static reject(e){return new pe(((t,r)=>{r(e)}))}static waitFor(e){return new pe(((t,r)=>{let a=0,l=0,c=!1;e.forEach((h=>{++a,h.next((()=>{++l,c&&l===a&&t()}),(m=>r(m)))})),c=!0,l===a&&t()}))}static or(e){let t=pe.resolve(!1);for(const r of e)t=t.next((a=>a?pe.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,l)=>{r.push(t.call(this,a,l))})),this.waitFor(r)}static mapArray(e,t){return new pe(((r,a)=>{const l=e.length,c=new Array(l);let h=0;for(let m=0;m<l;m++){const g=m;t(e[g]).next((v=>{c[g]=v,++h,h===l&&r(c)}),(v=>a(v)))}}))}static doWhile(e,t){return new pe(((r,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):r()};l()}))}}function xj(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function hc(n){return n.name==="IndexedDbTransactionError"}class Mm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Mm.ce=-1;const _v=-1;function Om(n){return n==null}function tm(n){return n===0&&1/n==-1/0}function _j(n){return typeof n=="number"&&Number.isInteger(n)&&!tm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const $4="";function wj(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=rw(e)),e=Ej(n.get(t),e);return rw(e)}function Ej(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case $4:t+="";break;default:t+=l}}return t}function rw(n){return n+$4+""}function sw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ma(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function q4(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Gt{constructor(e,t){this.comparator=e,this.root=t||Ln.EMPTY}insert(e,t){return new Gt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ln.BLACK,null,null))}remove(e){return new Gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ln.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new af(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new af(this.root,e,this.comparator,!1)}getReverseIterator(){return new af(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new af(this.root,e,this.comparator,!0)}}class af{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ln{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??Ln.RED,this.left=a??Ln.EMPTY,this.right=l??Ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new Ln(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Ln.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw We(43730,{key:this.key,value:this.value});if(this.right.isRed())throw We(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw We(27949);return e+(this.isRed()?0:1)}}Ln.EMPTY=null,Ln.RED=!0,Ln.BLACK=!1;Ln.EMPTY=new class{constructor(){this.size=0}get key(){throw We(57766)}get value(){throw We(16141)}get color(){throw We(16727)}get left(){throw We(29726)}get right(){throw We(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new Ln(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _n{constructor(e){this.comparator=e,this.data=new Gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new iw(this.data.getIterator())}getIteratorFrom(e){return new iw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof _n)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new _n(this.comparator);return t.data=e,t}}class iw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Cr{constructor(e){this.fields=e,e.sort(Un.comparator)}static empty(){return new Cr([])}unionWith(e){let t=new _n(Un.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Cr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Yl(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class G4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class zn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new G4("Invalid base64 string: "+l):l}})(e);return new zn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new zn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ft(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zn.EMPTY_BYTE_STRING=new zn("");const Sj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ca(n){if(Ct(!!n,39018),typeof n=="string"){let e=0;const t=Sj.exec(n);if(Ct(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:rn(n.seconds),nanos:rn(n.nanos)}}function rn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ka(n){return typeof n=="string"?zn.fromBase64String(n):zn.fromUint8Array(n)}const Y4="server_timestamp",K4="__type__",Q4="__previous_value__",X4="__local_write_time__";function Pm(n){return(n?.mapValue?.fields||{})[K4]?.stringValue===Y4}function Lm(n){const e=n.mapValue.fields[Q4];return Pm(e)?Lm(e):e}function Ku(n){const e=Ca(n.mapValue.fields[X4].timestampValue);return new Ft(e.seconds,e.nanos)}class Tj{constructor(e,t,r,a,l,c,h,m,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=v}}const nm="(default)";class Qu{constructor(e,t){this.projectId=e,this.database=t||nm}static empty(){return new Qu("","")}get isDefaultDatabase(){return this.database===nm}isEqual(e){return e instanceof Qu&&e.projectId===this.projectId&&e.database===this.database}}const W4="__type__",Cj="__max__",of={mapValue:{}},J4="__vector__",rm="value";function Aa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Pm(n)?4:Aj(n)?9007199254740991:kj(n)?10:11:We(28295,{value:n})}function zs(n,e){if(n===e)return!0;const t=Aa(n);if(t!==Aa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ku(n).isEqual(Ku(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Ca(a.timestampValue),h=Ca(l.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return ka(a.bytesValue).isEqual(ka(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return rn(a.geoPointValue.latitude)===rn(l.geoPointValue.latitude)&&rn(a.geoPointValue.longitude)===rn(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return rn(a.integerValue)===rn(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=rn(a.doubleValue),h=rn(l.doubleValue);return c===h?tm(c)===tm(h):isNaN(c)&&isNaN(h)}return!1})(n,e);case 9:return Yl(n.arrayValue.values||[],e.arrayValue.values||[],zs);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},h=l.mapValue.fields||{};if(sw(c)!==sw(h))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(h[m]===void 0||!zs(c[m],h[m])))return!1;return!0})(n,e);default:return We(52216,{left:n})}}function Xu(n,e){return(n.values||[]).find((t=>zs(t,e)))!==void 0}function Kl(n,e){if(n===e)return 0;const t=Aa(n),r=Aa(e);if(t!==r)return ft(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ft(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const h=rn(l.integerValue||l.doubleValue),m=rn(c.integerValue||c.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1})(n,e);case 3:return aw(n.timestampValue,e.timestampValue);case 4:return aw(Ku(n),Ku(e));case 5:return d0(n.stringValue,e.stringValue);case 6:return(function(l,c){const h=ka(l),m=ka(c);return h.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const h=l.split("/"),m=c.split("/");for(let g=0;g<h.length&&g<m.length;g++){const v=ft(h[g],m[g]);if(v!==0)return v}return ft(h.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const h=ft(rn(l.latitude),rn(c.latitude));return h!==0?h:ft(rn(l.longitude),rn(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return ow(n.arrayValue,e.arrayValue);case 10:return(function(l,c){const h=l.fields||{},m=c.fields||{},g=h[rm]?.arrayValue,v=m[rm]?.arrayValue,b=ft(g?.values?.length||0,v?.values?.length||0);return b!==0?b:ow(g,v)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===of.mapValue&&c===of.mapValue)return 0;if(l===of.mapValue)return 1;if(c===of.mapValue)return-1;const h=l.fields||{},m=Object.keys(h),g=c.fields||{},v=Object.keys(g);m.sort(),v.sort();for(let b=0;b<m.length&&b<v.length;++b){const _=d0(m[b],v[b]);if(_!==0)return _;const C=Kl(h[m[b]],g[v[b]]);if(C!==0)return C}return ft(m.length,v.length)})(n.mapValue,e.mapValue);default:throw We(23264,{he:t})}}function aw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ft(n,e);const t=Ca(n),r=Ca(e),a=ft(t.seconds,r.seconds);return a!==0?a:ft(t.nanos,r.nanos)}function ow(n,e){const t=n.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=Kl(t[a],r[a]);if(l)return l}return ft(t.length,r.length)}function Ql(n){return h0(n)}function h0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Ca(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ka(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return He.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=h0(l);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${h0(t.fields[c])}`;return a+"}"})(n.mapValue):We(61005,{value:n})}function Af(n){switch(Aa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Lm(n);return e?16+Af(e):16;case 5:return 2*n.stringValue.length;case 6:return ka(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+Af(l)),0)})(n.arrayValue);case 10:case 11:return(function(r){let a=0;return Ma(r.fields,((l,c)=>{a+=l.length+Af(c)})),a})(n.mapValue);default:throw We(13486,{value:n})}}function sm(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function f0(n){return!!n&&"integerValue"in n}function wv(n){return!!n&&"arrayValue"in n}function lw(n){return!!n&&"nullValue"in n}function cw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Rf(n){return!!n&&"mapValue"in n}function kj(n){return(n?.mapValue?.fields||{})[W4]?.stringValue===J4}function Uu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ma(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Uu(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Uu(n.arrayValue.values[t]);return e}return{...n}}function Aj(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Cj}class dr{constructor(e){this.value=e}static empty(){return new dr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Rf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uu(t)}setAll(e){let t=Un.emptyPath(),r={},a=[];e.forEach(((c,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,r,a),r={},a=[],t=h.popLast()}c?r[h.lastSegment()]=Uu(c):a.push(h.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());Rf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];Rf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Ma(t,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new dr(Uu(this.value))}}function Z4(n){const e=[];return Ma(n.fields,((t,r)=>{const a=new Un([t]);if(Rf(r)){const l=Z4(r.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new Cr(e)}class qn{constructor(e,t,r,a,l,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=h}static newInvalidDocument(e){return new qn(e,0,Ze.min(),Ze.min(),Ze.min(),dr.empty(),0)}static newFoundDocument(e,t,r,a){return new qn(e,1,t,Ze.min(),r,a,0)}static newNoDocument(e,t){return new qn(e,2,t,Ze.min(),Ze.min(),dr.empty(),0)}static newUnknownDocument(e,t){return new qn(e,3,t,Ze.min(),Ze.min(),dr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Xl{constructor(e,t){this.position=e,this.inclusive=t}}function uw(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const l=e[a],c=n.position[a];if(l.field.isKeyField()?r=He.comparator(He.fromName(c.referenceValue),t.key):r=Kl(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function dw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!zs(n.position[t],e.position[t]))return!1;return!0}class Wu{constructor(e,t="asc"){this.field=e,this.dir=t}}function Rj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class eT{}class yn extends eT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Ij(e,t,r):t==="array-contains"?new Mj(e,r):t==="in"?new Oj(e,r):t==="not-in"?new Pj(e,r):t==="array-contains-any"?new Lj(e,r):new yn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new jj(e,r):new Dj(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Kl(t,this.value)):t!==null&&Aa(this.value)===Aa(t)&&this.matchesComparison(Kl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return We(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class as extends eT{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new as(e,t)}matches(e){return tT(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function tT(n){return n.op==="and"}function nT(n){return Nj(n)&&tT(n)}function Nj(n){for(const e of n.filters)if(e instanceof as)return!1;return!0}function m0(n){if(n instanceof yn)return n.field.canonicalString()+n.op.toString()+Ql(n.value);if(nT(n))return n.filters.map((e=>m0(e))).join(",");{const e=n.filters.map((t=>m0(t))).join(",");return`${n.op}(${e})`}}function rT(n,e){return n instanceof yn?(function(r,a){return a instanceof yn&&r.op===a.op&&r.field.isEqual(a.field)&&zs(r.value,a.value)})(n,e):n instanceof as?(function(r,a){return a instanceof as&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,c,h)=>l&&rT(c,a.filters[h])),!0):!1})(n,e):void We(19439)}function sT(n){return n instanceof yn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ql(t.value)}`})(n):n instanceof as?(function(t){return t.op.toString()+" {"+t.getFilters().map(sT).join(" ,")+"}"})(n):"Filter"}class Ij extends yn{constructor(e,t,r){super(e,t,r),this.key=He.fromName(r.referenceValue)}matches(e){const t=He.comparator(e.key,this.key);return this.matchesComparison(t)}}class jj extends yn{constructor(e,t){super(e,"in",t),this.keys=iT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Dj extends yn{constructor(e,t){super(e,"not-in",t),this.keys=iT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function iT(n,e){return(e.arrayValue?.values||[]).map((t=>He.fromName(t.referenceValue)))}class Mj extends yn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wv(t)&&Xu(t.arrayValue,this.value)}}class Oj extends yn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Xu(this.value.arrayValue,t)}}class Pj extends yn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Xu(this.value.arrayValue,t)}}class Lj extends yn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wv(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Xu(this.value.arrayValue,r)))}}class Vj{constructor(e,t=null,r=[],a=[],l=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=h,this.Te=null}}function hw(n,e=null,t=[],r=[],a=null,l=null,c=null){return new Vj(n,e,t,r,a,l,c)}function Ev(n){const e=tt(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>m0(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),Om(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Ql(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Ql(r))).join(",")),e.Te=t}return e.Te}function Sv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Rj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!rT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!dw(n.startAt,e.startAt)&&dw(n.endAt,e.endAt)}function p0(n){return He.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class jo{constructor(e,t=null,r=[],a=[],l=null,c="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=h,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Uj(n,e,t,r,a,l,c,h){return new jo(n,e,t,r,a,l,c,h)}function Vm(n){return new jo(n)}function fw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Tv(n){return n.collectionGroup!==null}function zl(n){const e=tt(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new _n(Un.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(h=h.add(g.field))}))})),h})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Wu(l,r))})),t.has(Un.keyField().canonicalString())||e.Ie.push(new Wu(Un.keyField(),r))}return e.Ie}function Os(n){const e=tt(n);return e.Ee||(e.Ee=zj(e,zl(n))),e.Ee}function zj(n,e){if(n.limitType==="F")return hw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Wu(a.field,l)}));const t=n.endAt?new Xl(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Xl(n.startAt.position,n.startAt.inclusive):null;return hw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function g0(n,e){const t=n.filters.concat([e]);return new jo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function im(n,e,t){return new jo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Um(n,e){return Sv(Os(n),Os(e))&&n.limitType===e.limitType}function aT(n){return`${Ev(Os(n))}|lt:${n.limitType}`}function Il(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>sT(a))).join(", ")}]`),Om(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>Ql(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>Ql(a))).join(",")),`Target(${r})`})(Os(n))}; limitType=${n.limitType})`}function zm(n,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):He.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(n,e)&&(function(r,a){for(const l of zl(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(r,a){return!(r.startAt&&!(function(c,h,m){const g=uw(c,h,m);return c.inclusive?g<=0:g<0})(r.startAt,zl(r),a)||r.endAt&&!(function(c,h,m){const g=uw(c,h,m);return c.inclusive?g>=0:g>0})(r.endAt,zl(r),a))})(n,e)}function Bj(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function oT(n){return(e,t)=>{let r=!1;for(const a of zl(n)){const l=Fj(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function Fj(n,e,t){const r=n.field.isKeyField()?He.comparator(e.key,t.key):(function(l,c,h){const m=c.data.field(l),g=h.data.field(l);return m!==null&&g!==null?Kl(m,g):We(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return We(19790,{direction:n.dir})}}class Do{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ma(this.inner,((t,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return q4(this.inner)}size(){return this.innerSize}}const Hj=new Gt(He.comparator);function Ti(){return Hj}const lT=new Gt(He.comparator);function Iu(...n){let e=lT;for(const t of n)e=e.insert(t.key,t);return e}function cT(n){let e=lT;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function po(){return zu()}function uT(){return zu()}function zu(){return new Do((n=>n.toString()),((n,e)=>n.isEqual(e)))}const $j=new Gt(He.comparator),qj=new _n(He.comparator);function pt(...n){let e=qj;for(const t of n)e=e.add(t);return e}const Gj=new _n(ft);function Yj(){return Gj}function Cv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tm(e)?"-0":e}}function dT(n){return{integerValue:""+n}}function hT(n,e){return _j(e)?dT(e):Cv(n,e)}class Bm{constructor(){this._=void 0}}function Kj(n,e,t){return n instanceof Ju?(function(a,l){const c={fields:{[K4]:{stringValue:Y4},[X4]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Pm(l)&&(l=Lm(l)),l&&(c.fields[Q4]=l),{mapValue:c}})(t,e):n instanceof Wl?mT(n,e):n instanceof Jl?pT(n,e):(function(a,l){const c=fT(a,l),h=mw(c)+mw(a.Ae);return f0(c)&&f0(a.Ae)?dT(h):Cv(a.serializer,h)})(n,e)}function Qj(n,e,t){return n instanceof Wl?mT(n,e):n instanceof Jl?pT(n,e):t}function fT(n,e){return n instanceof Zu?(function(r){return f0(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class Ju extends Bm{}class Wl extends Bm{constructor(e){super(),this.elements=e}}function mT(n,e){const t=gT(e);for(const r of n.elements)t.some((a=>zs(a,r)))||t.push(r);return{arrayValue:{values:t}}}class Jl extends Bm{constructor(e){super(),this.elements=e}}function pT(n,e){let t=gT(e);for(const r of n.elements)t=t.filter((a=>!zs(a,r)));return{arrayValue:{values:t}}}class Zu extends Bm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function mw(n){return rn(n.integerValue||n.doubleValue)}function gT(n){return wv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Fm{constructor(e,t){this.field=e,this.transform=t}}function Xj(n,e){return n.field.isEqual(e.field)&&(function(r,a){return r instanceof Wl&&a instanceof Wl||r instanceof Jl&&a instanceof Jl?Yl(r.elements,a.elements,zs):r instanceof Zu&&a instanceof Zu?zs(r.Ae,a.Ae):r instanceof Ju&&a instanceof Ju})(n.transform,e.transform)}class Wj{constructor(e,t){this.version=e,this.transformResults=t}}class Wn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wn}static exists(e){return new Wn(void 0,e)}static updateTime(e){return new Wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Hm{}function yT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new $m(n.key,Wn.none()):new vd(n.key,n.data,Wn.none());{const t=n.data,r=dr.empty();let a=new _n(Un.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new Oa(n.key,r,new Cr(a.toArray()),Wn.none())}}function Jj(n,e,t){n instanceof vd?(function(a,l,c){const h=a.value.clone(),m=gw(a.fieldTransforms,l,c.transformResults);h.setAll(m),l.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(n,e,t):n instanceof Oa?(function(a,l,c){if(!Nf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const h=gw(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(vT(a)),m.setAll(h),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Bu(n,e,t,r){return n instanceof vd?(function(l,c,h,m){if(!Nf(l.precondition,c))return h;const g=l.value.clone(),v=yw(l.fieldTransforms,m,c);return g.setAll(v),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,e,t,r):n instanceof Oa?(function(l,c,h,m){if(!Nf(l.precondition,c))return h;const g=yw(l.fieldTransforms,m,c),v=c.data;return v.setAll(vT(l)),v.setAll(g),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((b=>b.field)))})(n,e,t,r):(function(l,c,h){return Nf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h})(n,e,t)}function Zj(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),l=fT(r.transform,a||null);l!=null&&(t===null&&(t=dr.empty()),t.set(r.field,l))}return t||null}function pw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&Yl(r,a,((l,c)=>Xj(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class vd extends Hm{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Oa extends Hm{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function vT(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function gw(n,e,t){const r=new Map;Ct(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const l=n[a],c=l.transform,h=e.data.field(l.field);r.set(l.field,Qj(c,h,t[a]))}return r}function yw(n,e,t){const r=new Map;for(const a of n){const l=a.transform,c=t.data.field(a.field);r.set(a.field,Kj(l,c,e))}return r}class $m extends Hm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class e9 extends Hm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class t9{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&Jj(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Bu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Bu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=uT();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let h=this.applyToLocalView(c,l.mutatedFields);h=t.has(a.key)?null:h;const m=yT(c,h);m!==null&&r.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(Ze.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),pt())}isEqual(e){return this.batchId===e.batchId&&Yl(this.mutations,e.mutations,((t,r)=>pw(t,r)))&&Yl(this.baseMutations,e.baseMutations,((t,r)=>pw(t,r)))}}class kv{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){Ct(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return $j})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new kv(e,t,r,a)}}class n9{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class r9{constructor(e,t){this.count=e,this.unchangedNames=t}}var fn,vt;function s9(n){switch(n){case ce.OK:return We(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return We(15467,{code:n})}}function bT(n){if(n===void 0)return Si("GRPC error has no .code"),ce.UNKNOWN;switch(n){case fn.OK:return ce.OK;case fn.CANCELLED:return ce.CANCELLED;case fn.UNKNOWN:return ce.UNKNOWN;case fn.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case fn.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case fn.INTERNAL:return ce.INTERNAL;case fn.UNAVAILABLE:return ce.UNAVAILABLE;case fn.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case fn.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case fn.NOT_FOUND:return ce.NOT_FOUND;case fn.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case fn.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case fn.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case fn.ABORTED:return ce.ABORTED;case fn.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case fn.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case fn.DATA_LOSS:return ce.DATA_LOSS;default:return We(39323,{code:n})}}(vt=fn||(fn={}))[vt.OK=0]="OK",vt[vt.CANCELLED=1]="CANCELLED",vt[vt.UNKNOWN=2]="UNKNOWN",vt[vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vt[vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vt[vt.NOT_FOUND=5]="NOT_FOUND",vt[vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",vt[vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",vt[vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",vt[vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vt[vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vt[vt.ABORTED=10]="ABORTED",vt[vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",vt[vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",vt[vt.INTERNAL=13]="INTERNAL",vt[vt.UNAVAILABLE=14]="UNAVAILABLE",vt[vt.DATA_LOSS=15]="DATA_LOSS";function i9(){return new TextEncoder}const a9=new _a([4294967295,4294967295],0);function vw(n){const e=i9().encode(n),t=new M4;return t.update(e),new Uint8Array(t.digest())}function bw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new _a([t,r],0),new _a([a,l],0)]}class Av{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ju(`Invalid padding: ${t}`);if(r<0)throw new ju(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ju(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ju(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=_a.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(_a.fromNumber(r)));return a.compare(a9)===1&&(a=new _a([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=vw(e),[r,a]=bw(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);if(!this.we(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Av(l,a,t);return r.forEach((h=>c.insert(h))),c}insert(e){if(this.ge===0)return;const t=vw(e),[r,a]=bw(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class ju extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class qm{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,bd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new qm(Ze.min(),a,new Gt(ft),Ti(),pt())}}class bd{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new bd(r,t,pt(),pt(),pt())}}class If{constructor(e,t,r,a){this.be=e,this.removedTargetIds=t,this.key=r,this.De=a}}class xT{constructor(e,t){this.targetId=e,this.Ce=t}}class _T{constructor(e,t,r=zn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class xw{constructor(){this.ve=0,this.Fe=_w(),this.Me=zn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=pt(),t=pt(),r=pt();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:We(38017,{changeType:l})}})),new bd(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=_w()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ct(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class o9{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ti(),this.Je=lf(),this.He=lf(),this.Ye=new Gt(ft)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:We(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(p0(l))if(r===0){const c=new He(l.path);this.et(t,c,qn.newNoDocument(c,Ze.min()))}else Ct(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const h=this.ut(e),m=h?this.ct(h,e,c):1;if(m!==0){this.it(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let c,h;try{c=ka(r).toUint8Array()}catch(m){if(m instanceof G4)return Gl("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{h=new Av(c,a,l)}catch(m){return Gl(m instanceof ju?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return h.ge===0?null:h}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach((l=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const h=this.ot(c);if(h){if(l.current&&p0(h.target)){const m=new He(h.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,qn.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let r=pt();this.He.forEach(((l,c)=>{let h=!0;c.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new qm(e,t,this.Ye,this.je,r);return this.je=Ti(),this.Je=lf(),this.He=lf(),this.Ye=new Gt(ft),a}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new xw,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new _n(ft),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new _n(ft),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||De("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new xw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function lf(){return new Gt(He.comparator)}function _w(){return new Gt(He.comparator)}const l9={asc:"ASCENDING",desc:"DESCENDING"},c9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},u9={and:"AND",or:"OR"};class d9{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function y0(n,e){return n.useProto3Json||Om(e)?e:{value:e}}function am(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function h9(n,e){return am(n,e.toTimestamp())}function Ps(n){return Ct(!!n,49232),Ze.fromTimestamp((function(t){const r=Ca(t);return new Ft(r.seconds,r.nanos)})(n))}function Rv(n,e){return v0(n,e).canonicalString()}function v0(n,e){const t=(function(a){return new Lt(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function ET(n){const e=Lt.fromString(n);return Ct(AT(e),10190,{key:e.toString()}),e}function b0(n,e){return Rv(n.databaseId,e.path)}function Ay(n,e){const t=ET(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new He(TT(t))}function ST(n,e){return Rv(n.databaseId,e)}function f9(n){const e=ET(n);return e.length===4?Lt.emptyPath():TT(e)}function x0(n){return new Lt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function TT(n){return Ct(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function ww(n,e,t){return{name:b0(n,e),fields:t.value.mapValue.fields}}function m9(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:We(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,v){return g.useProto3Json?(Ct(v===void 0||typeof v=="string",58123),zn.fromBase64String(v||"")):(Ct(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),zn.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&(function(g){const v=g.code===void 0?ce.UNKNOWN:bT(g.code);return new Ae(v,g.message||"")})(c);t=new _T(r,a,l,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=Ay(n,r.document.name),l=Ps(r.document.updateTime),c=r.document.createTime?Ps(r.document.createTime):Ze.min(),h=new dr({mapValue:{fields:r.document.fields}}),m=qn.newFoundDocument(a,l,c,h),g=r.targetIds||[],v=r.removedTargetIds||[];t=new If(g,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=Ay(n,r.document),l=r.readTime?Ps(r.readTime):Ze.min(),c=qn.newNoDocument(a,l),h=r.removedTargetIds||[];t=new If([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=Ay(n,r.document),l=r.removedTargetIds||[];t=new If([],l,a,null)}else{if(!("filter"in e))return We(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new r9(a,l),h=r.targetId;t=new xT(h,c)}}return t}function p9(n,e){let t;if(e instanceof vd)t={update:ww(n,e.key,e.value)};else if(e instanceof $m)t={delete:b0(n,e.key)};else if(e instanceof Oa)t={update:ww(n,e.key,e.data),updateMask:S9(e.fieldMask)};else{if(!(e instanceof e9))return We(16599,{Vt:e.type});t={verify:b0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const h=c.transform;if(h instanceof Ju)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Wl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Jl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Zu)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw We(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:h9(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:We(27497)})(n,e.precondition)),t}function g9(n,e){return n&&n.length>0?(Ct(e!==void 0,14353),n.map((t=>(function(a,l){let c=a.updateTime?Ps(a.updateTime):Ps(l);return c.isEqual(Ze.min())&&(c=Ps(l)),new Wj(c,a.transformResults||[])})(t,e)))):[]}function y9(n,e){return{documents:[ST(n,e.path)]}}function v9(n,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=ST(n,a);const l=(function(g){if(g.length!==0)return kT(as.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((v=>(function(_){return{field:jl(_.field),direction:_9(_.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=y0(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function b9(n){let e=f9(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){Ct(r===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(b){const _=CT(b);return _ instanceof as&&nT(_)?_.getFilters():[_]})(t.where));let c=[];t.orderBy&&(c=(function(b){return b.map((_=>(function(R){return new Wu(Dl(R.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(_)))})(t.orderBy));let h=null;t.limit&&(h=(function(b){let _;return _=typeof b=="object"?b.value:b,Om(_)?null:_})(t.limit));let m=null;t.startAt&&(m=(function(b){const _=!!b.before,C=b.values||[];return new Xl(C,_)})(t.startAt));let g=null;return t.endAt&&(g=(function(b){const _=!b.before,C=b.values||[];return new Xl(C,_)})(t.endAt)),Uj(e,a,c,l,h,"F",m,g)}function x9(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return We(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function CT(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Dl(t.unaryFilter.field);return yn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Dl(t.unaryFilter.field);return yn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Dl(t.unaryFilter.field);return yn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Dl(t.unaryFilter.field);return yn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return We(61313);default:return We(60726)}})(n):n.fieldFilter!==void 0?(function(t){return yn.create(Dl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return We(58110);default:return We(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return as.create(t.compositeFilter.filters.map((r=>CT(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return We(1026)}})(t.compositeFilter.op))})(n):We(30097,{filter:n})}function _9(n){return l9[n]}function w9(n){return c9[n]}function E9(n){return u9[n]}function jl(n){return{fieldPath:n.canonicalString()}}function Dl(n){return Un.fromServerFormat(n.fieldPath)}function kT(n){return n instanceof yn?(function(t){if(t.op==="=="){if(cw(t.value))return{unaryFilter:{field:jl(t.field),op:"IS_NAN"}};if(lw(t.value))return{unaryFilter:{field:jl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(cw(t.value))return{unaryFilter:{field:jl(t.field),op:"IS_NOT_NAN"}};if(lw(t.value))return{unaryFilter:{field:jl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jl(t.field),op:w9(t.op),value:t.value}}})(n):n instanceof as?(function(t){const r=t.getFilters().map((a=>kT(a)));return r.length===1?r[0]:{compositeFilter:{op:E9(t.op),filters:r}}})(n):We(54877,{filter:n})}function S9(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function AT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class ga{constructor(e,t,r,a,l=Ze.min(),c=Ze.min(),h=zn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new ga(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ga(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ga(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ga(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class T9{constructor(e){this.yt=e}}function C9(n){const e=b9({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?im(e,e.limit,"L"):e}class k9{constructor(){this.Cn=new A9}addToCollectionParentIndex(e,t){return this.Cn.add(t),pe.resolve()}getCollectionParents(e,t){return pe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return pe.resolve()}deleteFieldIndex(e,t){return pe.resolve()}deleteAllFieldIndexes(e){return pe.resolve()}createTargetIndexes(e,t){return pe.resolve()}getDocumentsMatchingTarget(e,t){return pe.resolve(null)}getIndexType(e,t){return pe.resolve(0)}getFieldIndexes(e,t){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,t){return pe.resolve(Ta.min())}getMinOffsetFromCollectionGroup(e,t){return pe.resolve(Ta.min())}updateCollectionGroup(e,t,r){return pe.resolve()}updateIndexEntries(e,t){return pe.resolve()}}class A9{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new _n(Lt.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new _n(Lt.comparator)).toArray()}}const Ew={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},RT=41943040;class ur{static withCacheSize(e){return new ur(e,ur.DEFAULT_COLLECTION_PERCENTILE,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}ur.DEFAULT_COLLECTION_PERCENTILE=10,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ur.DEFAULT=new ur(RT,ur.DEFAULT_COLLECTION_PERCENTILE,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ur.DISABLED=new ur(-1,0,0);class Zl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Zl(0)}static cr(){return new Zl(-1)}}const Sw="LruGarbageCollector",R9=1048576;function Tw([n,e],[t,r]){const a=ft(n,t);return a===0?ft(e,r):a}class N9{constructor(e){this.Ir=e,this.buffer=new _n(Tw),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Tw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class I9{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){De(Sw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){hc(t)?De(Sw,"Ignoring IndexedDB error during garbage collection: ",t):await dc(t)}await this.Vr(3e5)}))}}class j9{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return pe.resolve(Mm.ce);const r=new N9(t);return this.mr.forEachTarget(e,(a=>r.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>r.Ar(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(De("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(Ew)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(De("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ew):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,a,l,c,h,m,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(De("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),a=this.params.maximumSequenceNumbersToCollect):a=b,c=Date.now(),this.nthSequenceNumber(e,a)))).next((b=>(r=b,h=Date.now(),this.removeTargets(e,r,t)))).next((b=>(l=b,m=Date.now(),this.removeOrphanedDocuments(e,r)))).next((b=>(g=Date.now(),Nl()<=ht.DEBUG&&De("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${a} in `+(h-c)+`ms
	Removed ${l} targets in `+(m-h)+`ms
	Removed ${b} documents in `+(g-m)+`ms
Total Duration: ${g-v}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:b}))))}}function D9(n,e){return new j9(n,e)}class M9{constructor(){this.changes=new Do((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?pe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class O9{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class P9{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&Bu(r.mutation,a,Cr.empty(),Ft.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,pt()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=pt()){const a=po();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((l=>{let c=Iu();return l.forEach(((h,m)=>{c=c.insert(h,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=po();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,pt())))}populateOverlays(e,t,r){const a=[];return r.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,h)=>{t.set(c,h)}))}))}computeViews(e,t,r,a){let l=Ti();const c=zu(),h=(function(){return zu()})();return t.forEach(((m,g)=>{const v=r.get(g.key);a.has(g.key)&&(v===void 0||v.mutation instanceof Oa)?l=l.insert(g.key,g):v!==void 0?(c.set(g.key,v.mutation.getFieldMask()),Bu(v.mutation,g,v.mutation.getFieldMask(),Ft.now())):c.set(g.key,Cr.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((g,v)=>c.set(g,v))),t.forEach(((g,v)=>h.set(g,new O9(v,c.get(g)??null)))),h)))}recalculateAndSaveOverlays(e,t){const r=zu();let a=new Gt(((c,h)=>c-h)),l=pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const h of c)h.keys().forEach((m=>{const g=t.get(m);if(g===null)return;let v=r.get(m)||Cr.empty();v=h.applyToLocalView(g,v),r.set(m,v);const b=(a.get(h.batchId)||pt()).add(m);a=a.insert(h.batchId,b)}))})).next((()=>{const c=[],h=a.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),g=m.key,v=m.value,b=uT();v.forEach((_=>{if(!l.has(_)){const C=yT(t.get(_),r.get(_));C!==null&&b.set(_,C),l=l.add(_)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,b))}return pe.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return(function(c){return He.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Tv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):pe.resolve(po());let h=Yu,m=l;return c.next((g=>pe.forEach(g,((v,b)=>(h<b.largestBatchId&&(h=b.largestBatchId),l.get(v)?pe.resolve():this.remoteDocumentCache.getEntry(e,v).next((_=>{m=m.insert(v,_)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,m,g,pt()))).next((v=>({batchId:h,changes:cT(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new He(t)).next((r=>{let a=Iu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let c=Iu();return this.indexManager.getCollectionParents(e,l).next((h=>pe.forEach(h,(m=>{const g=(function(b,_){return new jo(_,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,r,a).next((v=>{v.forEach(((b,_)=>{c=c.insert(b,_)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a)))).next((c=>{l.forEach(((m,g)=>{const v=g.getKey();c.get(v)===null&&(c=c.insert(v,qn.newInvalidDocument(v)))}));let h=Iu();return c.forEach(((m,g)=>{const v=l.get(m);v!==void 0&&Bu(v.mutation,g,Cr.empty(),Ft.now()),zm(t,g)&&(h=h.insert(m,g))})),h}))}}class L9{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return pe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Ps(a.createTime)}})(t)),pe.resolve()}getNamedQuery(e,t){return pe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:C9(a.bundledQuery),readTime:Ps(a.readTime)}})(t)),pe.resolve()}}class V9{constructor(){this.overlays=new Gt(He.comparator),this.qr=new Map}getOverlay(e,t){return pe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=po();return pe.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,l)=>{this.St(e,t,l)})),pe.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.qr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(r)),pe.resolve()}getOverlaysForCollection(e,t,r){const a=po(),l=t.length+1,c=new He(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const m=h.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>r&&a.set(m.getKey(),m)}return pe.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new Gt(((g,v)=>g-v));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let v=l.get(g.largestBatchId);v===null&&(v=po(),l=l.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const h=po(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,v)=>h.set(g,v))),!(h.size()>=a)););return pe.resolve(h)}St(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(r.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new n9(t,r));let l=this.qr.get(t);l===void 0&&(l=pt(),this.qr.set(t,l)),this.qr.set(t,l.add(r.key))}}class U9{constructor(){this.sessionToken=zn.EMPTY_BYTE_STRING}getSessionToken(e){return pe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,pe.resolve()}}class Nv{constructor(){this.Qr=new _n(Cn.$r),this.Ur=new _n(Cn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Cn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Cn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new He(new Lt([])),r=new Cn(t,e),a=new Cn(t,e+1),l=[];return this.Ur.forEachInRange([r,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new He(new Lt([])),r=new Cn(t,e),a=new Cn(t,e+1);let l=pt();return this.Ur.forEachInRange([r,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Cn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Cn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return He.comparator(e.key,t.key)||ft(e.Yr,t.Yr)}static Kr(e,t){return ft(e.Yr,t.Yr)||He.comparator(e.key,t.key)}}class z9{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new _n(Cn.$r)}checkEmpty(e){return pe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new t9(l,t,r,a);this.mutationQueue.push(c);for(const h of a)this.Zr=this.Zr.add(new Cn(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return pe.resolve(c)}lookupMutationBatch(e,t){return pe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.ei(r),l=a<0?0:a;return pe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(this.mutationQueue.length===0?_v:this.tr-1)}getAllMutationBatches(e){return pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Cn(t,0),a=new Cn(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([r,a],(c=>{const h=this.Xr(c.Yr);l.push(h)})),pe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n(ft);return t.forEach((a=>{const l=new Cn(a,0),c=new Cn(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(h=>{r=r.add(h.Yr)}))})),pe.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;He.isDocumentKey(l)||(l=l.child(""));const c=new Cn(new He(l),0);let h=new _n(ft);return this.Zr.forEachWhile((m=>{const g=m.key.path;return!!r.isPrefixOf(g)&&(g.length===a&&(h=h.add(m.Yr)),!0)}),c),pe.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((r=>{const a=this.Xr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Ct(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return pe.forEach(t.mutations,(a=>{const l=new Cn(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Cn(t,0),a=this.Zr.firstAfterOrEqual(r);return pe.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,pe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class B9{constructor(e){this.ri=e,this.docs=(function(){return new Gt(He.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return pe.resolve(r?r.document.mutableCopy():qn.newInvalidDocument(t))}getEntries(e,t){let r=Ti();return t.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():qn.newInvalidDocument(a))})),pe.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=Ti();const c=t.path,h=new He(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:g,value:{document:v}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||yj(gj(v),r)<=0||(a.has(v.key)||zm(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return pe.resolve(l)}getAllFromCollectionGroup(e,t,r,a){We(9500)}ii(e,t){return pe.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new F9(this)}getSize(e){return pe.resolve(this.size)}}class F9 extends M9{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(r)})),pe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class H9{constructor(e){this.persistence=e,this.si=new Do((t=>Ev(t)),Sv),this.lastRemoteSnapshotVersion=Ze.min(),this.highestTargetId=0,this.oi=0,this._i=new Nv,this.targetCount=0,this.ai=Zl.ur()}forEachTarget(e,t){return this.si.forEach(((r,a)=>t(a))),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),pe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Zl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,pe.resolve()}updateTargetData(e,t){return this.Pr(t),pe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.si.forEach(((c,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)})),pe.waitFor(l).next((()=>a))}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return pe.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),pe.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),pe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),pe.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return pe.resolve(r)}containsKey(e,t){return pe.resolve(this._i.containsKey(t))}}class NT{constructor(e,t){this.ui={},this.overlays={},this.ci=new Mm(0),this.li=!1,this.li=!0,this.hi=new U9,this.referenceDelegate=e(this),this.Pi=new H9(this),this.indexManager=new k9,this.remoteDocumentCache=(function(a){return new B9(a)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new T9(t),this.Ii=new L9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new V9,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new z9(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){De("MemoryPersistence","Starting transaction:",e);const a=new $9(this.ci.next());return this.referenceDelegate.Ei(),r(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return pe.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class $9 extends bj{constructor(e){super(),this.currentSequenceNumber=e}}class Iv{constructor(e){this.persistence=e,this.Ri=new Nv,this.Vi=null}static mi(e){return new Iv(e)}get fi(){if(this.Vi)return this.Vi;throw We(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),pe.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),pe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),pe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.fi,(r=>{const a=He.fromPath(r);return this.gi(e,a).next((l=>{l||t.removeEntry(a,Ze.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return pe.or([()=>pe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class om{constructor(e,t){this.persistence=e,this.pi=new Do((r=>wj(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=D9(this,t)}static mi(e,t){return new om(e,t)}Ei(){}di(e){return pe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return pe.forEach(this.pi,((r,a)=>this.br(e,r,a).next((l=>l?pe.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((h=>{h||(r++,l.removeEntry(c,Ze.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),pe.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),pe.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),pe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),pe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Af(e.data.value)),t}br(e,t,r){return pe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return pe.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class jv{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=a}static As(e,t){let r=pt(),a=pt();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new jv(e,t.fromCache,r,a)}}class q9{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class G9{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return yN()?8:xj(Gn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,a,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new q9;return this.Ss(e,t,c).next((h=>{if(l.result=h,this.Vs)return this.bs(e,t,c,h.size)}))})).next((()=>l.result))}bs(e,t,r,a){return r.documentReadCount<this.fs?(Nl()<=ht.DEBUG&&De("QueryEngine","SDK will not create cache indexes for query:",Il(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),pe.resolve()):(Nl()<=ht.DEBUG&&De("QueryEngine","Query:",Il(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.gs*a?(Nl()<=ht.DEBUG&&De("QueryEngine","The SDK decides to create cache indexes for query:",Il(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Os(t))):pe.resolve())}ys(e,t){if(fw(t))return pe.resolve(null);let r=Os(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=im(t,null,"F"),r=Os(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=pt(...l);return this.ps.getDocuments(e,c).next((h=>this.indexManager.getMinOffset(e,r).next((m=>{const g=this.Ds(t,h);return this.Cs(t,g,c,m.readTime)?this.ys(e,im(t,null,"F")):this.vs(e,g,t,m)}))))})))))}ws(e,t,r,a){return fw(t)||a.isEqual(Ze.min())?pe.resolve(null):this.ps.getDocuments(e,r).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,r,a)?pe.resolve(null):(Nl()<=ht.DEBUG&&De("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Il(t)),this.vs(e,c,t,pj(a,Yu)).next((h=>h)))}))}Ds(e,t){let r=new _n(oT(e));return t.forEach(((a,l)=>{zm(e,l)&&(r=r.add(l))})),r}Cs(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,r){return Nl()<=ht.DEBUG&&De("QueryEngine","Using full collection scan to execute query:",Il(t)),this.ps.getDocumentsMatchingQuery(e,t,Ta.min(),r)}vs(e,t,r,a){return this.ps.getDocumentsMatchingQuery(e,r,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const Dv="LocalStore",Y9=3e8;class K9{constructor(e,t,r,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new Gt(ft),this.xs=new Do((l=>Ev(l)),Sv),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new P9(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function Q9(n,e,t,r){return new K9(n,e,t,r)}async function IT(n,e){const t=tt(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],h=[];let m=pt();for(const g of a){c.push(g.batchId);for(const v of g.mutations)m=m.add(v.key)}for(const g of l){h.push(g.batchId);for(const v of g.mutations)m=m.add(v.key)}return t.localDocuments.getDocuments(r,m).next((g=>({Ls:g,removedBatchIds:c,addedBatchIds:h})))}))}))}function X9(n,e){const t=tt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,m,g,v){const b=g.batch,_=b.keys();let C=pe.resolve();return _.forEach((R=>{C=C.next((()=>v.getEntry(m,R))).next((I=>{const k=g.docVersions.get(R);Ct(k!==null,48541),I.version.compareTo(k)<0&&(b.applyToRemoteDocument(I,g),I.isValidDocument()&&(I.setReadTime(g.commitVersion),v.addEntry(I)))}))})),C.next((()=>h.mutationQueue.removeMutationBatch(m,b)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let m=pt();for(let g=0;g<h.mutationResults.length;++g)h.mutationResults[g].transformResults.length>0&&(m=m.add(h.batch.mutations[g].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function jT(n){const e=tt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function W9(n,e){const t=tt(n),r=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const h=[];e.targetChanges.forEach(((v,b)=>{const _=a.get(b);if(!_)return;h.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,b).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,b))));let C=_.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(b)!==null?C=C.withResumeToken(zn.EMPTY_BYTE_STRING,Ze.min()).withLastLimboFreeSnapshotVersion(Ze.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,r)),a=a.insert(b,C),(function(I,k,B){return I.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=Y9?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(_,C,v)&&h.push(t.Pi.updateTargetData(l,C))}));let m=Ti(),g=pt();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),h.push(J9(l,c,e.documentUpdates).next((v=>{m=v.ks,g=v.qs}))),!r.isEqual(Ze.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((b=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,r)));h.push(v)}return pe.waitFor(h).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,g))).next((()=>m))})).then((l=>(t.Ms=a,l)))}function J9(n,e,t){let r=pt(),a=pt();return t.forEach((l=>r=r.add(l))),e.getEntries(n,r).next((l=>{let c=Ti();return t.forEach(((h,m)=>{const g=l.get(h);m.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(h)),m.isNoDocument()&&m.version.isEqual(Ze.min())?(e.removeEntry(h,m.readTime),c=c.insert(h,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),c=c.insert(h,m)):De(Dv,"Ignoring outdated watch update for ",h,". Current version:",g.version," Watch version:",m.version)})),{ks:c,qs:a}}))}function Z9(n,e){const t=tt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=_v),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function e8(n,e){const t=tt(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.Pi.getTargetData(r,e).next((l=>l?(a=l,pe.resolve(a)):t.Pi.allocateTargetId(r).next((c=>(a=new ga(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.Ms.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function _0(n,e,t){const r=tt(n),a=r.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!hc(c))throw c;De(Dv,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(a.target)}function Cw(n,e,t){const r=tt(n);let a=Ze.min(),l=pt();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,g,v){const b=tt(m),_=b.xs.get(v);return _!==void 0?pe.resolve(b.Ms.get(_)):b.Pi.getTargetData(g,v)})(r,c,Os(e)).next((h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,h.targetId).next((m=>{l=m}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?a:Ze.min(),t?l:pt()))).next((h=>(t8(r,Bj(e),h),{documents:h,Qs:l})))))}function t8(n,e,t){let r=n.Os.get(e)||Ze.min();t.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),n.Os.set(e,r)}class kw{constructor(){this.activeTargetIds=Yj()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class n8{constructor(){this.Mo=new kw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new kw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class r8{Oo(e){}shutdown(){}}const Aw="ConnectivityMonitor";class Rw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){De(Aw,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){De(Aw,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let cf=null;function w0(){return cf===null?cf=(function(){return 268435456+Math.round(2147483648*Math.random())})():cf++,"0x"+cf.toString(16)}const Ry="RestConnection",s8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class i8{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${a}`,this.Wo=this.databaseId.database===nm?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Go(e,t,r,a,l){const c=w0(),h=this.zo(e,t.toUriEncodedString());De(Ry,`Sending RPC '${e}' ${c}:`,h,r);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,l);const{host:g}=new URL(h),v=Ro(g);return this.Jo(e,h,m,r,v).then((b=>(De(Ry,`Received RPC '${e}' ${c}: `,b),b)),(b=>{throw Gl(Ry,`RPC '${e}' ${c} failed with error: `,b,"url: ",h,"request:",r),b}))}Ho(e,t,r,a,l,c){return this.Go(e,t,r,a,l)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+uc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const r=s8[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class a8{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Fn="WebChannelConnection";class o8 extends i8{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,a,l){const c=w0();return new Promise(((h,m)=>{const g=new O4;g.setWithCredentials(!0),g.listenOnce(P4.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case kf.NO_ERROR:const b=g.getResponseJson();De(Fn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(b)),h(b);break;case kf.TIMEOUT:De(Fn,`RPC '${e}' ${c} timed out`),m(new Ae(ce.DEADLINE_EXCEEDED,"Request time out"));break;case kf.HTTP_ERROR:const _=g.getStatus();if(De(Fn,`RPC '${e}' ${c} failed with status:`,_,"response text:",g.getResponseText()),_>0){let C=g.getResponseJson();Array.isArray(C)&&(C=C[0]);const R=C?.error;if(R&&R.status&&R.message){const I=(function(B){const $=B.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf($)>=0?$:ce.UNKNOWN})(R.status);m(new Ae(I,R.message))}else m(new Ae(ce.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new Ae(ce.UNAVAILABLE,"Connection failed."));break;default:We(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{De(Fn,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(a);De(Fn,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",v,r,15)}))}T_(e,t,r){const a=w0(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=U4(),h=V4(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const v=l.join("");De(Fn,`Creating RPC '${e}' stream ${a}: ${v}`,m);const b=c.createWebChannel(v,m);this.I_(b);let _=!1,C=!1;const R=new a8({Yo:k=>{C?De(Fn,`Not sending because RPC '${e}' stream ${a} is closed:`,k):(_||(De(Fn,`Opening RPC '${e}' stream ${a} transport.`),b.open(),_=!0),De(Fn,`RPC '${e}' stream ${a} sending:`,k),b.send(k))},Zo:()=>b.close()}),I=(k,B,$)=>{k.listen(B,(N=>{try{$(N)}catch(V){setTimeout((()=>{throw V}),0)}}))};return I(b,Nu.EventType.OPEN,(()=>{C||(De(Fn,`RPC '${e}' stream ${a} transport opened.`),R.o_())})),I(b,Nu.EventType.CLOSE,(()=>{C||(C=!0,De(Fn,`RPC '${e}' stream ${a} transport closed`),R.a_(),this.E_(b))})),I(b,Nu.EventType.ERROR,(k=>{C||(C=!0,Gl(Fn,`RPC '${e}' stream ${a} transport errored. Name:`,k.name,"Message:",k.message),R.a_(new Ae(ce.UNAVAILABLE,"The operation could not be completed")))})),I(b,Nu.EventType.MESSAGE,(k=>{if(!C){const B=k.data[0];Ct(!!B,16349);const $=B,N=$?.error||$[0]?.error;if(N){De(Fn,`RPC '${e}' stream ${a} received error:`,N);const V=N.status;let z=(function(S){const A=fn[S];if(A!==void 0)return bT(A)})(V),F=N.message;z===void 0&&(z=ce.INTERNAL,F="Unknown error status: "+V+" with message "+N.message),C=!0,R.a_(new Ae(z,F)),b.close()}else De(Fn,`RPC '${e}' stream ${a} received:`,B),R.u_(B)}})),I(h,L4.STAT_EVENT,(k=>{k.stat===u0.PROXY?De(Fn,`RPC '${e}' stream ${a} detected buffering proxy`):k.stat===u0.NOPROXY&&De(Fn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{R.__()}),0),R}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Ny(){return typeof document<"u"?document:null}function Gm(n){return new d9(n,!0)}class DT{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&De("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Nw="PersistentStream";class MT{constructor(e,t,r,a,l,c,h,m){this.Mi=e,this.S_=r,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new DT(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Si(t.toString()),Si("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===t&&this.G_(r,a)}),(r=>{e((()=>{const a=new Ae(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return De(Nw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(De(Nw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class l8 extends MT{constructor(e,t,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=m9(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Ze.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ze.min():c.readTime?Ps(c.readTime):Ze.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=x0(this.serializer),t.addTarget=(function(l,c){let h;const m=c.target;if(h=p0(m)?{documents:y9(l,m)}:{query:v9(l,m).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=wT(l,c.resumeToken);const g=y0(l,c.expectedCount);g!==null&&(h.expectedCount=g)}else if(c.snapshotVersion.compareTo(Ze.min())>0){h.readTime=am(l,c.snapshotVersion.toTimestamp());const g=y0(l,c.expectedCount);g!==null&&(h.expectedCount=g)}return h})(this.serializer,e);const r=x9(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=x0(this.serializer),t.removeTarget=e,this.q_(t)}}class c8 extends MT{constructor(e,t,r,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ct(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ct(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ct(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=g9(e.writeResults,e.commitTime),r=Ps(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=x0(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>p9(this.serializer,r)))};this.q_(t)}}class u8{}class d8 extends u8{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Ae(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,v0(t,r),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ae(ce.UNKNOWN,l.toString())}))}Ho(e,t,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Ho(e,v0(t,r),a,c,h,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ae(ce.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class h8{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Si(t),this.aa=!1):De("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Co="RemoteStore";class f8{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{Mo(this)&&(De(Co,"Restarting streams for network reachability change."),await(async function(m){const g=tt(m);g.Ea.add(4),await xd(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Ym(g)})(this))}))})),this.Ra=new h8(r,a)}}async function Ym(n){if(Mo(n))for(const e of n.da)await e(!0)}async function xd(n){for(const e of n.da)await e(!1)}function OT(n,e){const t=tt(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Lv(t)?Pv(t):fc(t).O_()&&Ov(t,e))}function Mv(n,e){const t=tt(n),r=fc(t);t.Ia.delete(e),r.O_()&&PT(t,e),t.Ia.size===0&&(r.O_()?r.L_():Mo(t)&&t.Ra.set("Unknown"))}function Ov(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ze.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}fc(n).Y_(e)}function PT(n,e){n.Va.Ue(e),fc(n).Z_(e)}function Pv(n){n.Va=new o9({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),fc(n).start(),n.Ra.ua()}function Lv(n){return Mo(n)&&!fc(n).x_()&&n.Ia.size>0}function Mo(n){return tt(n).Ea.size===0}function LT(n){n.Va=void 0}async function m8(n){n.Ra.set("Online")}async function p8(n){n.Ia.forEach(((e,t)=>{Ov(n,e)}))}async function g8(n,e){LT(n),Lv(n)?(n.Ra.ha(e),Pv(n)):n.Ra.set("Unknown")}async function y8(n,e,t){if(n.Ra.set("Online"),e instanceof _T&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const h of l.targetIds)a.Ia.has(h)&&(await a.remoteSyncer.rejectListen(h,c),a.Ia.delete(h),a.Va.removeTarget(h))})(n,e)}catch(r){De(Co,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await lm(n,r)}else if(e instanceof If?n.Va.Ze(e):e instanceof xT?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ze.min()))try{const r=await jT(n.localStore);t.compareTo(r)>=0&&await(function(l,c){const h=l.Va.Tt(c);return h.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const v=l.Ia.get(g);v&&l.Ia.set(g,v.withResumeToken(m.resumeToken,c))}})),h.targetMismatches.forEach(((m,g)=>{const v=l.Ia.get(m);if(!v)return;l.Ia.set(m,v.withResumeToken(zn.EMPTY_BYTE_STRING,v.snapshotVersion)),PT(l,m);const b=new ga(v.target,m,g,v.sequenceNumber);Ov(l,b)})),l.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(r){De(Co,"Failed to raise snapshot:",r),await lm(n,r)}}async function lm(n,e,t){if(!hc(e))throw e;n.Ea.add(1),await xd(n),n.Ra.set("Offline"),t||(t=()=>jT(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{De(Co,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Ym(n)}))}function VT(n,e){return e().catch((t=>lm(n,t,e)))}async function Km(n){const e=tt(n),t=Ra(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:_v;for(;v8(e);)try{const a=await Z9(e.localStore,r);if(a===null){e.Ta.length===0&&t.L_();break}r=a.batchId,b8(e,a)}catch(a){await lm(e,a)}UT(e)&&zT(e)}function v8(n){return Mo(n)&&n.Ta.length<10}function b8(n,e){n.Ta.push(e);const t=Ra(n);t.O_()&&t.X_&&t.ea(e.mutations)}function UT(n){return Mo(n)&&!Ra(n).x_()&&n.Ta.length>0}function zT(n){Ra(n).start()}async function x8(n){Ra(n).ra()}async function _8(n){const e=Ra(n);for(const t of n.Ta)e.ea(t.mutations)}async function w8(n,e,t){const r=n.Ta.shift(),a=kv.from(r,e,t);await VT(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await Km(n)}async function E8(n,e){e&&Ra(n).X_&&await(async function(r,a){if((function(c){return s9(c)&&c!==ce.ABORTED})(a.code)){const l=r.Ta.shift();Ra(r).B_(),await VT(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Km(r)}})(n,e),UT(n)&&zT(n)}async function Iw(n,e){const t=tt(n);t.asyncQueue.verifyOperationInProgress(),De(Co,"RemoteStore received new credentials");const r=Mo(t);t.Ea.add(3),await xd(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Ym(t)}async function S8(n,e){const t=tt(n);e?(t.Ea.delete(2),await Ym(t)):e||(t.Ea.add(2),await xd(t),t.Ra.set("Unknown"))}function fc(n){return n.ma||(n.ma=(function(t,r,a){const l=tt(t);return l.sa(),new l8(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:m8.bind(null,n),t_:p8.bind(null,n),r_:g8.bind(null,n),H_:y8.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Lv(n)?Pv(n):n.Ra.set("Unknown")):(await n.ma.stop(),LT(n))}))),n.ma}function Ra(n){return n.fa||(n.fa=(function(t,r,a){const l=tt(t);return l.sa(),new c8(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:x8.bind(null,n),r_:E8.bind(null,n),ta:_8.bind(null,n),na:w8.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Km(n)):(await n.fa.stop(),n.Ta.length>0&&(De(Co,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class Vv{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const c=Date.now()+r,h=new Vv(e,t,c,a,l);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Uv(n,e){if(Si("AsyncQueue",`${e}: ${n}`),hc(n))return new Ae(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class Bl{static emptySet(e){return new Bl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||He.comparator(t.key,r.key):(t,r)=>He.comparator(t.key,r.key),this.keyedMap=Iu(),this.sortedSet=new Gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Bl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Bl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class jw{constructor(){this.ga=new Gt(He.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):We(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class ec{constructor(e,t,r,a,l,c,h,m,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,a,l){const c=[];return t.forEach((h=>{c.push({type:0,doc:h})})),new ec(e,t,Bl.emptySet(t),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Um(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class T8{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class C8{constructor(){this.queries=Dw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=tt(t),l=a.queries;a.queries=Dw(),l.forEach(((c,h)=>{for(const m of h.Sa)m.onError(r)}))})(this,new Ae(ce.ABORTED,"Firestore shutting down"))}}function Dw(){return new Do((n=>aT(n)),Um)}async function zv(n,e){const t=tt(n);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(r=2):(l=new T8,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const h=Uv(c,`Initialization of query '${Il(e.query)}' failed`);return void e.onError(h)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Fv(t)}async function Bv(n,e){const t=tt(n),r=e.query;let a=3;const l=t.queries.get(r);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function k8(n,e){const t=tt(n);let r=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const h of c.Sa)h.Fa(a)&&(r=!0);c.wa=a}}r&&Fv(t)}function A8(n,e,t){const r=tt(n),a=r.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);r.queries.delete(e)}function Fv(n){n.Ca.forEach((e=>{e.next()}))}var E0,Mw;(Mw=E0||(E0={})).Ma="default",Mw.Cache="cache";class Hv{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new ec(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ec.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==E0.Cache}}class BT{constructor(e){this.key=e}}class FT{constructor(e){this.key=e}}class R8{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=pt(),this.mutatedKeys=pt(),this.eu=oT(e),this.tu=new Bl(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new jw,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,h=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,b)=>{const _=a.get(v),C=zm(this.query,b)?b:null,R=!!_&&this.mutatedKeys.has(_.key),I=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let k=!1;_&&C?_.data.isEqual(C.data)?R!==I&&(r.track({type:3,doc:C}),k=!0):this.su(_,C)||(r.track({type:2,doc:C}),k=!0,(m&&this.eu(C,m)>0||g&&this.eu(C,g)<0)&&(h=!0)):!_&&C?(r.track({type:0,doc:C}),k=!0):_&&!C&&(r.track({type:1,doc:_}),k=!0,(m||g)&&(h=!0)),k&&(C?(c=c.add(C),l=I?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),r.track({type:1,doc:v})}return{tu:c,iu:r,Cs:h,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,b)=>(function(C,R){const I=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return We(20277,{Rt:k})}};return I(C)-I(R)})(v.type,b.type)||this.eu(v.doc,b.doc))),this.ou(r),a=a??!1;const h=t&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,g=m!==this.Za;return this.Za=m,c.length!==0||g?{snapshot:new ec(this.query,e.tu,l,c,e.mutatedKeys,m===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new jw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=pt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new FT(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new BT(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=pt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ec.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const $v="SyncEngine";class N8{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class I8{constructor(e){this.key=e,this.hu=!1}}class j8{constructor(e,t,r,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Do((h=>aT(h)),Um),this.Iu=new Map,this.Eu=new Set,this.du=new Gt(He.comparator),this.Au=new Map,this.Ru=new Nv,this.Vu={},this.mu=new Map,this.fu=Zl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function D8(n,e,t=!0){const r=KT(n);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await HT(r,e,t,!0),a}async function M8(n,e){const t=KT(n);await HT(t,e,!0,!1)}async function HT(n,e,t,r){const a=await e8(n.localStore,Os(e)),l=a.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let h;return r&&(h=await O8(n,e,l,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&OT(n.remoteStore,a),h}async function O8(n,e,t,r,a){n.pu=(b,_,C)=>(async function(I,k,B,$){let N=k.view.ru(B);N.Cs&&(N=await Cw(I.localStore,k.query,!1).then((({documents:E})=>k.view.ru(E,N))));const V=$&&$.targetChanges.get(k.targetId),z=$&&$.targetMismatches.get(k.targetId)!=null,F=k.view.applyChanges(N,I.isPrimaryClient,V,z);return Pw(I,k.targetId,F.au),F.snapshot})(n,b,_,C);const l=await Cw(n.localStore,e,!0),c=new R8(e,l.Qs),h=c.ru(l.documents),m=bd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",a),g=c.applyChanges(h,n.isPrimaryClient,m);Pw(n,t,g.au);const v=new N8(e,t,c);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function P8(n,e,t){const r=tt(n),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter((c=>!Um(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await _0(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&Mv(r.remoteStore,a.targetId),S0(r,a.targetId)})).catch(dc)):(S0(r,a.targetId),await _0(r.localStore,a.targetId,!0))}async function L8(n,e){const t=tt(n),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Mv(t.remoteStore,r.targetId))}async function V8(n,e,t){const r=q8(n);try{const a=await(function(c,h){const m=tt(c),g=Ft.now(),v=h.reduce(((C,R)=>C.add(R.key)),pt());let b,_;return m.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let R=Ti(),I=pt();return m.Ns.getEntries(C,v).next((k=>{R=k,R.forEach(((B,$)=>{$.isValidDocument()||(I=I.add(B))}))})).next((()=>m.localDocuments.getOverlayedDocuments(C,R))).next((k=>{b=k;const B=[];for(const $ of h){const N=Zj($,b.get($.key).overlayedDocument);N!=null&&B.push(new Oa($.key,N,Z4(N.value.mapValue),Wn.exists(!0)))}return m.mutationQueue.addMutationBatch(C,g,B,h)})).next((k=>{_=k;const B=k.applyToLocalDocumentSet(b,I);return m.documentOverlayCache.saveOverlays(C,k.batchId,B)}))})).then((()=>({batchId:_.batchId,changes:cT(b)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(c,h,m){let g=c.Vu[c.currentUser.toKey()];g||(g=new Gt(ft)),g=g.insert(h,m),c.Vu[c.currentUser.toKey()]=g})(r,a.batchId,t),await _d(r,a.changes),await Km(r.remoteStore)}catch(a){const l=Uv(a,"Failed to persist write");t.reject(l)}}async function $T(n,e){const t=tt(n);try{const r=await W9(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(Ct(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?Ct(c.hu,14607):a.removedDocuments.size>0&&(Ct(c.hu,42227),c.hu=!1))})),await _d(t,r,e)}catch(r){await dc(r)}}function Ow(n,e,t){const r=tt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach(((l,c)=>{const h=c.view.va(e);h.snapshot&&a.push(h.snapshot)})),(function(c,h){const m=tt(c);m.onlineState=h;let g=!1;m.queries.forEach(((v,b)=>{for(const _ of b.Sa)_.va(h)&&(g=!0)})),g&&Fv(m)})(r.eventManager,e),a.length&&r.Pu.H_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function U8(n,e,t){const r=tt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),l=a&&a.key;if(l){let c=new Gt(He.comparator);c=c.insert(l,qn.newNoDocument(l,Ze.min()));const h=pt().add(l),m=new qm(Ze.min(),new Map,new Gt(ft),c,h);await $T(r,m),r.du=r.du.remove(l),r.Au.delete(e),qv(r)}else await _0(r.localStore,e,!1).then((()=>S0(r,e,t))).catch(dc)}async function z8(n,e){const t=tt(n),r=e.batch.batchId;try{const a=await X9(t.localStore,e);GT(t,r,null),qT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await _d(t,a)}catch(a){await dc(a)}}async function B8(n,e,t){const r=tt(n);try{const a=await(function(c,h){const m=tt(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return m.mutationQueue.lookupMutationBatch(g,h).next((b=>(Ct(b!==null,37113),v=b.keys(),m.mutationQueue.removeMutationBatch(g,b)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,v,h))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>m.localDocuments.getDocuments(g,v)))}))})(r.localStore,e);GT(r,e,t),qT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await _d(r,a)}catch(a){await dc(a)}}function qT(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function GT(n,e,t){const r=tt(n);let a=r.Vu[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.Vu[r.currentUser.toKey()]=a}}function S0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||YT(n,r)}))}function YT(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Mv(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),qv(n))}function Pw(n,e,t){for(const r of t)r instanceof BT?(n.Ru.addReference(r.key,e),F8(n,r)):r instanceof FT?(De($v,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||YT(n,r.key)):We(19791,{wu:r})}function F8(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(De($v,"New document in limbo: "+t),n.Eu.add(r),qv(n))}function qv(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new He(Lt.fromString(e)),r=n.fu.next();n.Au.set(r,new I8(t)),n.du=n.du.insert(t,r),OT(n.remoteStore,new ga(Os(Vm(t.path)),r,"TargetPurposeLimboResolution",Mm.ce))}}async function _d(n,e,t){const r=tt(n),a=[],l=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((h,m)=>{c.push(r.pu(m,e,t).then((g=>{if((g||t)&&r.isPrimaryClient){const v=g?!g.fromCache:t?.targetChanges.get(m.targetId)?.current;r.sharedClientState.updateQueryState(m.targetId,v?"current":"not-current")}if(g){a.push(g);const v=jv.As(m.targetId,g);l.push(v)}})))})),await Promise.all(c),r.Pu.H_(a),await(async function(m,g){const v=tt(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>pe.forEach(g,(_=>pe.forEach(_.Es,(C=>v.persistence.referenceDelegate.addReference(b,_.targetId,C))).next((()=>pe.forEach(_.ds,(C=>v.persistence.referenceDelegate.removeReference(b,_.targetId,C)))))))))}catch(b){if(!hc(b))throw b;De(Dv,"Failed to update sequence numbers: "+b)}for(const b of g){const _=b.targetId;if(!b.fromCache){const C=v.Ms.get(_),R=C.snapshotVersion,I=C.withLastLimboFreeSnapshotVersion(R);v.Ms=v.Ms.insert(_,I)}}})(r.localStore,l))}async function H8(n,e){const t=tt(n);if(!t.currentUser.isEqual(e)){De($v,"User change. New user:",e.toKey());const r=await IT(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((h=>{h.forEach((m=>{m.reject(new Ae(ce.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await _d(t,r.Ls)}}function $8(n,e){const t=tt(n),r=t.Au.get(e);if(r&&r.hu)return pt().add(r.key);{let a=pt();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const h=t.Tu.get(c);a=a.unionWith(h.view.nu)}return a}}function KT(n){const e=tt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=$T.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=U8.bind(null,e),e.Pu.H_=k8.bind(null,e.eventManager),e.Pu.yu=A8.bind(null,e.eventManager),e}function q8(n){const e=tt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=z8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=B8.bind(null,e),e}class cm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Q9(this.persistence,new G9,e.initialUser,this.serializer)}Cu(e){return new NT(Iv.mi,this.serializer)}Du(e){return new n8}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cm.provider={build:()=>new cm};class G8 extends cm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ct(this.persistence.referenceDelegate instanceof om,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new I9(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ur.withCacheSize(this.cacheSizeBytes):ur.DEFAULT;return new NT((r=>om.mi(r,t)),this.serializer)}}class T0{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ow(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=H8.bind(null,this.syncEngine),await S8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new C8})()}createDatastore(e){const t=Gm(e.databaseInfo.databaseId),r=(function(l){return new o8(l)})(e.databaseInfo);return(function(l,c,h,m){return new d8(l,c,h,m)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,l,c,h){return new f8(r,a,l,c,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>Ow(this.syncEngine,t,0)),(function(){return Rw.v()?new Rw:new r8})())}createSyncEngine(e,t){return(function(a,l,c,h,m,g,v){const b=new j8(a,l,c,h,m,g);return v&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=tt(t);De(Co,"RemoteStore shutting down."),r.Ea.add(5),await xd(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}T0.provider={build:()=>new T0};class Gv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Si("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Na="FirestoreClient";class Y8{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=Hn.UNAUTHENTICATED,this.clientId=xv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{De(Na,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(De(Na,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Uv(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Iy(n,e){n.asyncQueue.verifyOperationInProgress(),De(Na,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async a=>{r.isEqual(a)||(await IT(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Lw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await K8(n);De(Na,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Iw(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,a)=>Iw(e.remoteStore,a))),n._onlineComponents=e}async function K8(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){De(Na,"Using user provided OfflineComponentProvider");try{await Iy(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ce.FAILED_PRECONDITION||a.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Gl("Error using user provided cache. Falling back to memory cache: "+t),await Iy(n,new cm)}}else De(Na,"Using default OfflineComponentProvider"),await Iy(n,new G8(void 0));return n._offlineComponents}async function QT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(De(Na,"Using user provided OnlineComponentProvider"),await Lw(n,n._uninitializedComponentsProvider._online)):(De(Na,"Using default OnlineComponentProvider"),await Lw(n,new T0))),n._onlineComponents}function Q8(n){return QT(n).then((e=>e.syncEngine))}async function um(n){const e=await QT(n),t=e.eventManager;return t.onListen=D8.bind(null,e.syncEngine),t.onUnlisten=P8.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=M8.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=L8.bind(null,e.syncEngine),t}function X8(n,e,t={}){const r=new xi;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,m,g){const v=new Gv({next:_=>{v.Nu(),c.enqueueAndForget((()=>Bv(l,b)));const C=_.docs.has(h);!C&&_.fromCache?g.reject(new Ae(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&_.fromCache&&m&&m.source==="server"?g.reject(new Ae(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(_)},error:_=>g.reject(_)}),b=new Hv(Vm(h.path),v,{includeMetadataChanges:!0,qa:!0});return zv(l,b)})(await um(n),n.asyncQueue,e,t,r))),r.promise}function W8(n,e,t={}){const r=new xi;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,m,g){const v=new Gv({next:_=>{v.Nu(),c.enqueueAndForget((()=>Bv(l,b))),_.fromCache&&m.source==="server"?g.reject(new Ae(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(_)},error:_=>g.reject(_)}),b=new Hv(h,v,{includeMetadataChanges:!0,qa:!0});return zv(l,b)})(await um(n),n.asyncQueue,e,t,r))),r.promise}function XT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const Vw=new Map;const WT="firestore.googleapis.com",Uw=!0;class zw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=WT,this.ssl=Uw}else this.host=e.host,this.ssl=e.ssl??Uw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=RT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<R9)throw new Ae(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ae(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ae(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ae(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qm{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new rj;switch(r.type){case"firstParty":return new oj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ae(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Vw.get(t);r&&(De("ComponentProvider","Removing Datastore"),Vw.delete(t),r.terminate())})(this),Promise.resolve()}}function J8(n,e,t,r={}){n=Xn(n,Qm);const a=Ro(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;a&&(av(`https://${h}`),ov("Firestore",!0)),l.host!==WT&&l.host!==h&&Gl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:h,ssl:a,emulatorOptions:r};if(!_i(m,c)&&(n._setSettings(m),r.mockUserToken)){let g,v;if(typeof r.mockUserToken=="string")g=r.mockUserToken,v=Hn.MOCK_USER;else{g=qS(r.mockUserToken,n._app?.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new Ae(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Hn(b)}n._authCredentials=new sj(new B4(g,v))}}class qs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new qs(this.firestore,e,this._query)}}class Wt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wt(this.firestore,e,this._key)}toJSON(){return{type:Wt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(yd(t,Wt._jsonSchema))return new Wt(e,r||null,new He(Lt.fromString(t.referencePath)))}}Wt._jsonSchemaVersion="firestore/documentReference/1.0",Wt._jsonSchema={type:vn("string",Wt._jsonSchemaVersion),referencePath:vn("string")};class wa extends qs{constructor(e,t,r){super(e,t,Vm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wt(this.firestore,null,new He(e))}withConverter(e){return new wa(this.firestore,e,this._path)}}function mt(n,e,...t){if(n=Vt(n),F4("collection","path",e),n instanceof Qm){const r=Lt.fromString(e,...t);return ew(r),new wa(n,null,r)}{if(!(n instanceof Wt||n instanceof wa))throw new Ae(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Lt.fromString(e,...t));return ew(r),new wa(n.firestore,null,r)}}function Me(n,e,...t){if(n=Vt(n),arguments.length===1&&(e=xv.newId()),F4("doc","path",e),n instanceof Qm){const r=Lt.fromString(e,...t);return Z2(r),new Wt(n,null,new He(r))}{if(!(n instanceof Wt||n instanceof wa))throw new Ae(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Lt.fromString(e,...t));return Z2(r),new Wt(n.firestore,n instanceof wa?n.converter:null,new He(r))}}const Bw="AsyncQueue";class Fw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new DT(this,"async_queue_retry"),this._c=()=>{const r=Ny();r&&De(Bw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Ny();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ny();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new xi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!hc(e))throw e;De(Bw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Si("INTERNAL UNHANDLED ERROR: ",Hw(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Vv.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&We(47125,{Pc:Hw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Hw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function $w(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1})(n,["next","error","complete"])}class Bs extends Qm{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new Fw,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Fw(e),this._firestoreClient=void 0,await e}}}function Z8(n,e){const t=typeof n=="object"?n:uv(),r=typeof n=="string"?n:nm,a=Rm(t,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=FS("firestore");l&&J8(a,...l)}return a}function wd(n){if(n._terminated)throw new Ae(ce.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||eD(n),n._firestoreClient}function eD(n){const e=n._freezeSettings(),t=(function(a,l,c,h){return new Tj(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,XT(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Y8(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(n._componentsProvider))}class zr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zr(zn.fromBase64String(e))}catch(t){throw new Ae(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new zr(zn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yd(e,zr._jsonSchema))return zr.fromBase64String(e.bytes)}}zr._jsonSchemaVersion="firestore/bytes/1.0",zr._jsonSchema={type:vn("string",zr._jsonSchemaVersion),bytes:vn("string")};class Ed{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ae(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Oo{constructor(e){this._methodName=e}}class Ls{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ft(this._lat,e._lat)||ft(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ls._jsonSchemaVersion}}static fromJSON(e){if(yd(e,Ls._jsonSchema))return new Ls(e.latitude,e.longitude)}}Ls._jsonSchemaVersion="firestore/geoPoint/1.0",Ls._jsonSchema={type:vn("string",Ls._jsonSchemaVersion),latitude:vn("number"),longitude:vn("number")};class Vs{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Vs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yd(e,Vs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Vs(e.vectorValues);throw new Ae(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vs._jsonSchemaVersion="firestore/vectorValue/1.0",Vs._jsonSchema={type:vn("string",Vs._jsonSchemaVersion),vectorValues:vn("object")};const tD=/^__.*__$/;class nD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Oa(e,this.data,this.fieldMask,t,this.fieldTransforms):new vd(e,this.data,t,this.fieldTransforms)}}class JT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Oa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ZT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw We(40011,{Ac:n})}}class Xm{constructor(e,t,r,a,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Xm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return dm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(ZT(this.Ac)&&tD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class rD{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Gm(e)}Cc(e,t,r,a=!1){return new Xm({Ac:e,methodName:t,Dc:r,path:Un.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mc(n){const e=n._freezeSettings(),t=Gm(n._databaseId);return new rD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Yv(n,e,t,r,a,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,a);Jv("Data must be an object, but it was:",c,r);const h=sC(r,c);let m,g;if(l.merge)m=new Cr(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const b of l.mergeFields){const _=C0(e,b,t);if(!c.contains(_))throw new Ae(ce.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);aC(v,_)||v.push(_)}m=new Cr(v),g=c.fieldTransforms.filter((b=>m.covers(b.field)))}else m=null,g=c.fieldTransforms;return new nD(new dr(h),m,g)}class Sd extends Oo{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sd}}function eC(n,e,t){return new Xm({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Kv extends Oo{_toFieldTransform(e){return new Fm(e.path,new Ju)}isEqual(e){return e instanceof Kv}}class Qv extends Oo{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=eC(this,e,!0),r=this.vc.map((l=>Po(l,t))),a=new Wl(r);return new Fm(e.path,a)}isEqual(e){return e instanceof Qv&&_i(this.vc,e.vc)}}class Xv extends Oo{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=eC(this,e,!0),r=this.vc.map((l=>Po(l,t))),a=new Jl(r);return new Fm(e.path,a)}isEqual(e){return e instanceof Xv&&_i(this.vc,e.vc)}}class Wv extends Oo{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new Zu(e.serializer,hT(e.serializer,this.Fc));return new Fm(e.path,t)}isEqual(e){return e instanceof Wv&&this.Fc===e.Fc}}function tC(n,e,t,r){const a=n.Cc(1,e,t);Jv("Data must be an object, but it was:",a,r);const l=[],c=dr.empty();Ma(r,((m,g)=>{const v=Zv(e,m,t);g=Vt(g);const b=a.yc(v);if(g instanceof Sd)l.push(v);else{const _=Po(g,b);_!=null&&(l.push(v),c.set(v,_))}}));const h=new Cr(l);return new JT(c,h,a.fieldTransforms)}function nC(n,e,t,r,a,l){const c=n.Cc(1,e,t),h=[C0(e,r,t)],m=[a];if(l.length%2!=0)throw new Ae(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<l.length;_+=2)h.push(C0(e,l[_])),m.push(l[_+1]);const g=[],v=dr.empty();for(let _=h.length-1;_>=0;--_)if(!aC(g,h[_])){const C=h[_];let R=m[_];R=Vt(R);const I=c.yc(C);if(R instanceof Sd)g.push(C);else{const k=Po(R,I);k!=null&&(g.push(C),v.set(C,k))}}const b=new Cr(g);return new JT(v,b,c.fieldTransforms)}function rC(n,e,t,r=!1){return Po(t,n.Cc(r?4:3,e))}function Po(n,e){if(iC(n=Vt(n)))return Jv("Unsupported field value:",e,n),sC(n,e);if(n instanceof Oo)return(function(r,a){if(!ZT(a.Ac))throw a.Sc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,a){const l=[];let c=0;for(const h of r){let m=Po(h,a.wc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(n,e)}return(function(r,a){if((r=Vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return hT(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=Ft.fromDate(r);return{timestampValue:am(a.serializer,l)}}if(r instanceof Ft){const l=new Ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:am(a.serializer,l)}}if(r instanceof Ls)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zr)return{bytesValue:wT(a.serializer,r._byteString)};if(r instanceof Wt){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Rv(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Vs)return(function(c,h){return{mapValue:{fields:{[W4]:{stringValue:J4},[rm]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw h.Sc("VectorValues must only contain numeric values.");return Cv(h.serializer,g)}))}}}}}})(r,a);throw a.Sc(`Unsupported field value: ${Dm(r)}`)})(n,e)}function sC(n,e){const t={};return q4(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ma(n,((r,a)=>{const l=Po(a,e.mc(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function iC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ft||n instanceof Ls||n instanceof zr||n instanceof Wt||n instanceof Oo||n instanceof Vs)}function Jv(n,e,t){if(!iC(t)||!H4(t)){const r=Dm(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function C0(n,e,t){if((e=Vt(e))instanceof Ed)return e._internalPath;if(typeof e=="string")return Zv(n,e);throw dm("Field path arguments must be of type string or ",n,!1,void 0,t)}const sD=new RegExp("[~\\*/\\[\\]]");function Zv(n,e,t){if(e.search(sD)>=0)throw dm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ed(...e.split("."))._internalPath}catch{throw dm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function dm(n,e,t,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${r}`),c&&(m+=` in document ${a}`),m+=")"),new Ae(ce.INVALID_ARGUMENT,h+n+m)}function aC(n,e){return n.some((t=>t.isEqual(e)))}class eb{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Wm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class iD extends eb{data(){return super.data()}}function Wm(n,e){return typeof e=="string"?Zv(n,e):e instanceof Ed?e._internalPath:e._delegate._internalPath}function oC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ae(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tb{}class Jm extends tb{}function ts(n,e,...t){let r=[];e instanceof tb&&r.push(e),r=r.concat(t),(function(l){const c=l.filter((m=>m instanceof nb)).length,h=l.filter((m=>m instanceof Zm)).length;if(c>1||c>0&&h>0)throw new Ae(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)n=a._apply(n);return n}class Zm extends Jm{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Zm(e,t,r)}_apply(e){const t=this._parse(e);return lC(e._query,t),new qs(e.firestore,e.converter,g0(e._query,t))}_parse(e){const t=mc(e.firestore);return(function(l,c,h,m,g,v,b){let _;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Ae(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Gw(b,v);const R=[];for(const I of b)R.push(qw(m,l,I));_={arrayValue:{values:R}}}else _=qw(m,l,b)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Gw(b,v),_=rC(h,c,b,v==="in"||v==="not-in");return yn.create(g,v,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function mo(n,e,t){const r=e,a=Wm("where",n);return Zm._create(a,r,t)}class nb extends tb{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new nb(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:as.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const h=l.getFlattenedFilters();for(const m of h)lC(c,m),c=g0(c,m)})(e._query,t),new qs(e.firestore,e.converter,g0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class rb extends Jm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new rb(e,t)}_apply(e){const t=(function(a,l,c){if(a.startAt!==null)throw new Ae(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Ae(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wu(l,c)})(e._query,this._field,this._direction);return new qs(e.firestore,e.converter,(function(a,l){const c=a.explicitOrderBy.concat([l]);return new jo(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function k0(n,e="asc"){const t=e,r=Wm("orderBy",n);return rb._create(r,t)}class sb extends Jm{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new sb(e,t,r)}_apply(e){return new qs(e.firestore,e.converter,im(e._query,this._limit,this._limitType))}}function A0(n){return mj("limit",n),sb._create("limit",n,"F")}class ib extends Jm{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new ib(e,t,r)}_apply(e){const t=oD(e,this.type,this._docOrFields,this._inclusive);return new qs(e.firestore,e.converter,(function(a,l){return new jo(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)})(e._query,t))}}function aD(...n){return ib._create("startAfter",n,!1)}function oD(n,e,t,r){if(t[0]=Vt(t[0]),t[0]instanceof eb)return(function(l,c,h,m,g){if(!m)throw new Ae(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const v=[];for(const b of zl(l))if(b.field.isKeyField())v.push(sm(c,m.key));else{const _=m.data.field(b.field);if(Pm(_))throw new Ae(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(_===null){const C=b.field.canonicalString();throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${C}' (used as the orderBy) does not exist.`)}v.push(_)}return new Xl(v,g)})(n._query,n.firestore._databaseId,e,t[0]._document,r);{const a=mc(n.firestore);return(function(c,h,m,g,v,b){const _=c.explicitOrderBy;if(v.length>_.length)throw new Ae(ce.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const C=[];for(let R=0;R<v.length;R++){const I=v[R];if(_[R].field.isKeyField()){if(typeof I!="string")throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof I}`);if(!Tv(c)&&I.indexOf("/")!==-1)throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${I}' contains a slash.`);const k=c.path.child(Lt.fromString(I));if(!He.isDocumentKey(k))throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${k}' is not because it contains an odd number of segments.`);const B=new He(k);C.push(sm(h,B))}else{const k=rC(m,g,I);C.push(k)}}return new Xl(C,b)})(n._query,n.firestore._databaseId,a,e,t,r)}}function qw(n,e,t){if(typeof(t=Vt(t))=="string"){if(t==="")throw new Ae(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Tv(e)&&t.indexOf("/")!==-1)throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Lt.fromString(t));if(!He.isDocumentKey(r))throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return sm(n,new He(r))}if(t instanceof Wt)return sm(n,t._key);throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dm(t)}.`)}function Gw(n,e){if(!Array.isArray(n)||n.length===0)throw new Ae(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lC(n,e){const t=(function(a,l){for(const c of a)for(const h of c.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ae(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ae(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class lD{convertValue(e,t="none"){switch(Aa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ka(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw We(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ma(e,((a,l)=>{r[a]=this.convertValue(l,t)})),r}convertVectorValue(e){const t=e.fields?.[rm].arrayValue?.values?.map((r=>rn(r.doubleValue)));return new Vs(t)}convertGeoPoint(e){return new Ls(rn(e.latitude),rn(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Lm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ku(e));default:return null}}convertTimestamp(e){const t=Ca(e);return new Ft(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Lt.fromString(e);Ct(AT(r),9688,{name:e});const a=new Qu(r.get(1),r.get(3)),l=new He(r.popFirst(5));return a.isEqual(t)||Si(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function ab(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Du{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yo extends eb{constructor(e,t,r,a,l,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new jf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Wm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=yo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}yo._jsonSchemaVersion="firestore/documentSnapshot/1.0",yo._jsonSchema={type:vn("string",yo._jsonSchemaVersion),bundleSource:vn("string","DocumentSnapshot"),bundleName:vn("string"),bundle:vn("string")};class jf extends yo{data(e={}){return super.data(e)}}class vo{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Du(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new jf(this._firestore,this._userDataWriter,r.key,r,new Du(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((h=>{const m=new jf(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Du(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const m=new jf(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Du(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,v=-1;return h.type!==0&&(g=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),v=c.indexOf(h.doc.key)),{type:cD(h.type),doc:m,oldIndex:g,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=vo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=xv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function cD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return We(61501,{type:n})}}function ep(n){n=Xn(n,Wt);const e=Xn(n.firestore,Bs);return X8(wd(e),n._key).then((t=>cC(e,n,t)))}vo._jsonSchemaVersion="firestore/querySnapshot/1.0",vo._jsonSchema={type:vn("string",vo._jsonSchemaVersion),bundleSource:vn("string","QuerySnapshot"),bundleName:vn("string"),bundle:vn("string")};class ob extends lD{constructor(e){super(),this.firestore=e}convertBytes(e){return new zr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wt(this.firestore,null,t)}}function ko(n){n=Xn(n,qs);const e=Xn(n.firestore,Bs),t=wd(e),r=new ob(e);return oC(n._query),W8(t,n._query).then((a=>new vo(e,r,n,a)))}function ed(n,e,t){n=Xn(n,Wt);const r=Xn(n.firestore,Bs),a=ab(n.converter,e,t);return Td(r,[Yv(mc(r),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Wn.none())])}function nt(n,e,t,...r){n=Xn(n,Wt);const a=Xn(n.firestore,Bs),l=mc(a);let c;return c=typeof(e=Vt(e))=="string"||e instanceof Ed?nC(l,"updateDoc",n._key,e,t,r):tC(l,"updateDoc",n._key,e),Td(a,[c.toMutation(n._key,Wn.exists(!0))])}function tc(n){return Td(Xn(n.firestore,Bs),[new $m(n._key,Wn.none())])}function Vn(n,e){const t=Xn(n.firestore,Bs),r=Me(n),a=ab(n.converter,e);return Td(t,[Yv(mc(n.firestore),"addDoc",r._key,a,n.converter!==null,{}).toMutation(r._key,Wn.exists(!1))]).then((()=>r))}function Sr(n,...e){n=Vt(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||$w(e[r])||(t=e[r++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if($w(e[r])){const m=e[r];e[r]=m.next?.bind(m),e[r+1]=m.error?.bind(m),e[r+2]=m.complete?.bind(m)}let l,c,h;if(n instanceof Wt)c=Xn(n.firestore,Bs),h=Vm(n._key.path),l={next:m=>{e[r]&&e[r](cC(c,n,m))},error:e[r+1],complete:e[r+2]};else{const m=Xn(n,qs);c=Xn(m.firestore,Bs),h=m._query;const g=new ob(c);l={next:v=>{e[r]&&e[r](new vo(c,g,m,v))},error:e[r+1],complete:e[r+2]},oC(n._query)}return(function(g,v,b,_){const C=new Gv(_),R=new Hv(v,C,b);return g.asyncQueue.enqueueAndForget((async()=>zv(await um(g),R))),()=>{C.Nu(),g.asyncQueue.enqueueAndForget((async()=>Bv(await um(g),R)))}})(wd(c),h,a,l)}function Td(n,e){return(function(r,a){const l=new xi;return r.asyncQueue.enqueueAndForget((async()=>V8(await Q8(r),a,l))),l.promise})(wd(n),e)}function cC(n,e,t){const r=t.docs.get(e._key),a=new ob(n);return new yo(n,a,e._key,r,new Du(t.hasPendingWrites,t.fromCache),e.converter)}class uD{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=mc(e)}set(e,t,r){this._verifyNotCommitted();const a=jy(e,this._firestore),l=ab(a.converter,t,r),c=Yv(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,r);return this._mutations.push(c.toMutation(a._key,Wn.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const l=jy(e,this._firestore);let c;return c=typeof(t=Vt(t))=="string"||t instanceof Ed?nC(this._dataReader,"WriteBatch.update",l._key,t,r,a):tC(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,Wn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=jy(e,this._firestore);return this._mutations=this._mutations.concat(new $m(t._key,Wn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function jy(n,e){if((n=Vt(n)).firestore!==e)throw new Ae(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function dD(){return new Sd("deleteField")}function _t(){return new Kv("serverTimestamp")}function Cd(...n){return new Qv("arrayUnion",n)}function hm(...n){return new Xv("arrayRemove",n)}function fm(n){return new Wv("increment",n)}function Yw(n){return wd(n=Xn(n,Bs)),new uD(n,(e=>Td(n,e)))}(function(e,t=!0){(function(a){uc=a})(No),wo(new Sa("firestore",((r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),h=new Bs(new ij(r.getProvider("auth-internal")),new lj(c,r.getProvider("app-check-internal")),(function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Ae(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qu(g.options.projectId,v)})(c,a),c);return l={useFetchStreams:t,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),js(Q2,X2,e),js(Q2,X2,"esm2020")})();const uC="firebasestorage.googleapis.com",hD="storageBucket",fD=120*1e3,mD=600*1e3;class Gs extends Hs{constructor(e,t,r=0){super(Dy(e),`Firebase Storage: ${t} (${Dy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Gs.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Dy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Fs;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Fs||(Fs={}));function Dy(n){return"storage/"+n}function pD(){const n="An unknown error occurred, please check the error payload for server response.";return new Gs(Fs.UNKNOWN,n)}function gD(){return new Gs(Fs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function yD(){return new Gs(Fs.CANCELED,"User canceled the upload/download.")}function vD(n){return new Gs(Fs.INVALID_URL,"Invalid URL '"+n+"'.")}function bD(n){return new Gs(Fs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Kw(n){return new Gs(Fs.INVALID_ARGUMENT,n)}function dC(){return new Gs(Fs.APP_DELETED,"The Firebase app was deleted.")}function xD(n){return new Gs(Fs.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class rs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=rs.makeFromUrl(e,t)}catch{return new rs(e,"")}if(r.path==="")return r;throw bD(e)}static makeFromUrl(e,t){let r=null;const a="([A-Za-z0-9.\\-_]+)";function l(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}const c="(/(.*))?$",h=new RegExp("^gs://"+a+c,"i"),m={bucket:1,path:3};function g(V){V.path_=decodeURIComponent(V.path)}const v="v[A-Za-z0-9_]+",b=t.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",C=new RegExp(`^https?://${b}/${v}/b/${a}/o${_}`,"i"),R={bucket:1,path:3},I=t===uC?"(?:storage.googleapis.com|storage.cloud.google.com)":t,k="([^?#]*)",B=new RegExp(`^https?://${I}/${a}/${k}`,"i"),N=[{regex:h,indices:m,postModify:l},{regex:C,indices:R,postModify:g},{regex:B,indices:{bucket:1,path:2},postModify:g}];for(let V=0;V<N.length;V++){const z=N[V],F=z.regex.exec(e);if(F){const E=F[z.indices.bucket];let S=F[z.indices.path];S||(S=""),r=new rs(E,S),z.postModify(r);break}}if(r==null)throw vD(e);return r}}class _D{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function wD(n,e,t){let r=1,a=null,l=null,c=!1,h=0;function m(){return h===2}let g=!1;function v(...k){g||(g=!0,e.apply(null,k))}function b(k){a=setTimeout(()=>{a=null,n(C,m())},k)}function _(){l&&clearTimeout(l)}function C(k,...B){if(g){_();return}if(k){_(),v.call(null,k,...B);return}if(m()||c){_(),v.call(null,k,...B);return}r<64&&(r*=2);let N;h===1?(h=2,N=0):N=(r+Math.random())*1e3,b(N)}let R=!1;function I(k){R||(R=!0,_(),!g&&(a!==null?(k||(h=2),clearTimeout(a),b(0)):k||(h=1)))}return b(0),l=setTimeout(()=>{c=!0,I(!0)},t),I}function ED(n){n(!1)}function SD(n){return n!==void 0}function Qw(n,e,t,r){if(r<e)throw Kw(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Kw(`Invalid value for '${n}'. Expected ${t} or less.`)}function TD(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const a=e(r)+"="+e(n[r]);t=t+a+"&"}return t=t.slice(0,-1),t}var mm;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(mm||(mm={}));function CD(n,e){const t=n>=500&&n<600,a=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||a||l}class kD{constructor(e,t,r,a,l,c,h,m,g,v,b,_=!0,C=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=m,this.timeout_=g,this.progressCallback_=v,this.connectionFactory_=b,this.retry=_,this.isUsingEmulator=C,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,I)=>{this.resolve_=R,this.reject_=I,this.start_()})}start_(){const e=(r,a)=>{if(a){r(!1,new uf(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=h=>{const m=h.loaded,g=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,g)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const h=l.getErrorCode()===mm.NO_ERROR,m=l.getStatus();if(!h||CD(m,this.additionalRetryCodes_)&&this.retry){const v=l.getErrorCode()===mm.ABORT;r(!1,new uf(!1,null,v));return}const g=this.successCodes_.indexOf(m)!==-1;r(!0,new uf(g,l))})},t=(r,a)=>{const l=this.resolve_,c=this.reject_,h=a.connection;if(a.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());SD(m)?l(m):l()}catch(m){c(m)}else if(h!==null){const m=pD();m.serverResponse=h.getErrorText(),this.errorCallback_?c(this.errorCallback_(h,m)):c(m)}else if(a.canceled){const m=this.appDelete_?dC():yD();c(m)}else{const m=gD();c(m)}};this.canceled_?t(!1,new uf(!1,null,!0)):this.backoffId_=wD(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&ED(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class uf{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function AD(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function RD(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function ND(n,e){e&&(n["X-Firebase-GMPID"]=e)}function ID(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function jD(n,e,t,r,a,l,c=!0,h=!1){const m=TD(n.urlParams),g=n.url+m,v=Object.assign({},n.headers);return ND(v,e),AD(v,t),RD(v,l),ID(v,r),new kD(g,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a,c,h)}function DD(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function MD(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}class pm{constructor(e,t){this._service=e,t instanceof rs?this._location=t:this._location=rs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new pm(e,t)}get root(){const e=new rs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return MD(this._location.path)}get storage(){return this._service}get parent(){const e=DD(this._location.path);if(e===null)return null;const t=new rs(this._location.bucket,e);return new pm(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw xD(e)}}function Xw(n,e){const t=e?.[hD];return t==null?null:rs.makeFromBucketSpec(t,n)}function OD(n,e,t,r={}){n.host=`${e}:${t}`;const a=Ro(e);a&&(av(`https://${n.host}/b`),ov("Storage",!0)),n._isUsingEmulator=!0,n._protocol=a?"https":"http";const{mockUserToken:l}=r;l&&(n._overrideAuthToken=typeof l=="string"?l:qS(l,n.app.options.projectId))}class PD{constructor(e,t,r,a,l,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=c,this._bucket=null,this._host=uC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=fD,this._maxUploadRetryTime=mD,this._requests=new Set,a!=null?this._bucket=rs.makeFromBucketSpec(a,this._host):this._bucket=Xw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=rs.makeFromBucketSpec(this._url,e):this._bucket=Xw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Qw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Qw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Tr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new pm(this,e)}_makeRequest(e,t,r,a,l=!0){if(this._deleted)return new _D(dC());{const c=jD(e,this._appId,r,a,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[r,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,a).getPromise()}}const Ww="@firebase/storage",Jw="0.14.0";const hC="storage";function LD(n=uv(),e){n=Vt(n);const r=Rm(n,hC).getImmediate({identifier:e}),a=FS("storage");return a&&VD(r,...a),r}function VD(n,e,t,r={}){OD(n,e,t,r)}function UD(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new PD(t,r,a,e,No)}function zD(){wo(new Sa(hC,UD,"PUBLIC").setMultipleInstances(!0)),js(Ww,Jw,""),js(Ww,Jw,"esm2020")}zD();const BD={apiKey:"AIzaSyAaaBO8Nw49Xsyo4QG1ropL0UYWeY2zrlU",authDomain:"meydan-academy.firebaseapp.com",projectId:"meydan-academy",storageBucket:"meydan-academy.firebasestorage.app",messagingSenderId:"267697346186",appId:"1:267697346186:web:d53b7d91fe0fabf8d37f73"},lb=KS(BD),Ml=tj(lb),ve=Z8(lb);LD(lb);const fC=O.createContext({}),Zn=()=>{const n=O.useContext(fC);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},FD=({children:n})=>{const[e,t]=O.useState(null),[r,a]=O.useState(null),[l,c]=O.useState(!0),h=async(R,I=!0)=>{if(R)try{await ed(Me(ve,"users",R),{isOnline:I,lastSeen:_t()},{merge:!0})}catch(k){console.error("Presence update failed:",k)}};O.useEffect(()=>H5(Ml,async I=>{if(t(I),I){const k=Sr(Me(ve,"users",I.uid),N=>{N.exists()&&a({id:N.id,...N.data()})});await h(I.uid);const B=setInterval(()=>{h(I.uid)},120*1e3),$=()=>{Me(ve,"users",I.uid),navigator.sendBeacon(`https://firestore.googleapis.com/v1/projects/meydan-academy/databases/(default)/documents/users/${I.uid}`,JSON.stringify({fields:{lastSeen:{timestampValue:new Date().toISOString()}}}))};return window.addEventListener("beforeunload",$),c(!1),()=>{k(),clearInterval(B),window.removeEventListener("beforeunload",$)}}else a(null),c(!1)}),[]);const C={currentUser:e,userProfile:r,register:async(R,I,k)=>{const B=await L5(Ml,R,I);try{await V2(B.user)}catch($){console.error("Error sending verification email:",$)}return await ed(Me(ve,"users",B.user.uid),{displayName:k,email:R,role:"member",createdAt:_t(),isOnline:!0,lastSeen:_t()}),B},login:async(R,I)=>{const k=await V5(Ml,R,I);return await h(k.user.uid,!0),k},logout:async()=>{if(e)try{await h(e.uid,!1)}catch(R){console.log("Final presence update failed (expected):",R.code)}return $5(Ml)},resetPassword:R=>E4(Ml,R),resendVerification:()=>{if(e)return V2(e)}};return d.jsx(fC.Provider,{value:C,children:!l&&n})};let My=null;const HD=()=>(My||(My=new(window.AudioContext||window.webkitAudioContext)),My),R0=()=>{try{const n=HD(),e=n.currentTime,t=n.createOscillator(),r=n.createGain();t.connect(r),r.connect(n.destination),t.frequency.value=880,t.type="sine",r.gain.setValueAtTime(0,e),r.gain.linearRampToValueAtTime(.2,e+.01),r.gain.linearRampToValueAtTime(0,e+.1),t.start(e),t.stop(e+.1);const a=n.createOscillator(),l=n.createGain();a.connect(l),l.connect(n.destination),a.frequency.value=660,a.type="sine",l.gain.setValueAtTime(0,e+.08),l.gain.linearRampToValueAtTime(.2,e+.09),l.gain.linearRampToValueAtTime(0,e+.25),a.start(e+.08),a.stop(e+.25)}catch(n){console.error("Error playing notification sound:",n)}},$D=(n,e)=>!n||!e?!1:/@everyone\b/i.test(n)?!0:new RegExp(`@${e}\\b`,"i").test(n),mC=O.createContext(),kd=()=>{const n=O.useContext(mC);if(!n)throw new Error("useData must be used within DataProvider");return n},qD=({children:n})=>{const{currentUser:e}=Zn(),[t,r]=O.useState([]),[a,l]=O.useState([]),[c,h]=O.useState(null),[m,g]=O.useState([]),[v,b]=O.useState(null),[_,C]=O.useState({}),[R,I]=O.useState([]),k=O.useRef({}),B=O.useRef(!0);O.useEffect(()=>{if(r([]),!c)return;const z=Sr(mt(ve,"servers",c,"members"),async S=>{const A=[],D=[],M=new Map;if(S.docChanges().forEach(U=>{const P=U.doc.data();U.type==="added"&&(A.push(P.userId),M.set(P.userId,P.role)),U.type==="removed"&&D.push(P.userId),U.type==="modified"&&M.set(P.userId,P.role)}),t.length===0&&A.length>0){const U=new Map;S.docs.forEach(Ee=>{U.set(Ee.data().userId,Ee.data().role||"member")});const P=Array.from(U.keys()),xe=[];for(let Ee=0;Ee<P.length;Ee+=10){const Y=P.slice(Ee,Ee+10),se=ts(mt(ve,"users"),mo("__name__","in",Y));(await ko(se)).forEach(Ce=>{xe.push({id:Ce.id,...Ce.data(),serverRole:U.get(Ce.id)})})}r(xe);return}if(A.length>0&&t.length>0){const U=[];for(let P=0;P<A.length;P+=10){const xe=A.slice(P,P+10),Ee=ts(mt(ve,"users"),mo("__name__","in",xe));(await ko(Ee)).forEach(se=>{U.push({id:se.id,...se.data(),serverRole:M.get(se.id)})})}r(P=>[...P,...U])}D.length>0&&r(U=>U.filter(P=>!D.includes(P.id))),S.docChanges().some(U=>U.type==="modified")&&r(U=>U.map(P=>M.has(P.id)?{...P,serverRole:M.get(P.id)}:P))}),F=ts(mt(ve,"users"),mo("servers","array-contains",c),mo("isOnline","==",!0)),E=Sr(F,S=>{r(A=>{const D=new Map;return S.forEach(M=>{const U=M.data();D.set(M.id,{presence:U.presence,isOnline:U.isOnline,status:U.status,lastSeen:U.lastSeen,displayName:U.displayName,photoUrl:U.photoUrl||U.photoURL,bio:U.bio,role:U.role})}),A.map(M=>{const U=D.get(M.id);return U?{...M,...U}:{...M,isOnline:!1,presence:"offline",status:null}})})});return()=>{z(),E()}},[c]);const[$,N]=O.useState([]);O.useEffect(()=>{if(!e){l([]),h(null),N([]);return}return Sr(Me(ve,"users",e.uid),F=>{if(!F.exists())return;const E=F.data(),S=E?.servers||[],A=E?.unreadMentions||{};Object.keys(A).forEach(D=>{const M=k.current[D]||0;(A[D]?.count||0)>M&&D!==c&&R0()}),k.current=Object.fromEntries(Object.entries(A).map(([D,M])=>[D,M.count])),C(A),N(D=>JSON.stringify(D)!==JSON.stringify(S)?S:D),h(D=>{const M=E?.currentServer;return D?D==="home"||S.includes(D)?D:S.length>0?S[0]:"home":M&&(M==="home"||S.includes(M))?M:S.length>0?S[0]:"home"})})},[e]),O.useEffect(()=>{if(l(F=>F.filter(E=>$.includes(E.id))),$.length===0){l([]);return}const z=[];for(let F=0;F<$.length;F+=10){const E=$.slice(F,F+10),S=ts(mt(ve,"servers"),mo("__name__","in",E)),A=Sr(S,D=>{const M=[];D.forEach(U=>{M.push({id:U.id,...U.data()})}),l(U=>[...U.filter(Ee=>!E.includes(Ee.id)),...M].sort((Ee,Y)=>$.indexOf(Ee.id)-$.indexOf(Y.id)))});z.push(A)}return()=>{z.forEach(F=>F())}},[$]),O.useEffect(()=>{if(!e){I([]);return}B.current=!0;const z=ts(mt(ve,"dms"),mo("participants","array-contains",e.uid)),F=Sr(z,E=>{const S=[];E.forEach(D=>{S.push({id:D.id,...D.data()})}),S.sort((D,M)=>{const U=D.updatedAt?.toMillis()||0;return(M.updatedAt?.toMillis()||0)-U});const A=S.filter(D=>!D.hiddenFor||!D.hiddenFor.includes(e.uid));I(A),B.current||E.docChanges().forEach(D=>{if(D.type==="modified"||D.type==="added"){const M=D.doc.data();if(M.lastMessage&&M.lastMessage.userId!==e.uid){const U=Date.now(),P=M.lastMessage.timestamp?.toMillis()||0;U-P<3e4&&R0()}}}),B.current=!1});return()=>F()},[e]),O.useEffect(()=>{if(!c){g([]),b(null);return}const z=a.find(E=>E.id===c);b(z||null);const F=Sr(mt(ve,"servers",c,"channels"),E=>{const S=[];E.forEach(A=>{S.push({id:A.id,...A.data()})}),g(S.sort((A,D)=>A.position-D.position))});return()=>{F()}},[c,a]);const V={users:t,servers:a,currentServer:c,setCurrentServer:h,channels:m,server:v,dms:R,unreadMentions:_};return d.jsx(mC.Provider,{value:V,children:n})};var pC={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Zw=de.createContext&&de.createContext(pC),GD=["attr","size","title"];function YD(n,e){if(n==null)return{};var t=KD(n,e),r,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(a=0;a<l.length;a++)r=l[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function KD(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function gm(){return gm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},gm.apply(this,arguments)}function eE(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,r)}return t}function ym(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?eE(Object(t),!0).forEach(function(r){QD(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):eE(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function QD(n,e,t){return e=XD(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function XD(n){var e=WD(n,"string");return typeof e=="symbol"?e:e+""}function WD(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function gC(n){return n&&n.map((e,t)=>de.createElement(e.tag,ym({key:t},e.attr),gC(e.child)))}function je(n){return e=>de.createElement(JD,gm({attr:ym({},n.attr)},e),gC(n.child))}function JD(n){var e=t=>{var{attr:r,size:a,title:l}=n,c=YD(n,GD),h=a||t.size||"1em",m;return t.className&&(m=t.className),n.className&&(m=(m?m+" ":"")+n.className),de.createElement("svg",gm({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,c,{className:m,style:ym(ym({color:n.color||t.color},t.style),n.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),l&&de.createElement("title",null,l),n.children)};return Zw!==void 0?de.createElement(Zw.Consumer,null,t=>e(t)):e(pC)}function yC(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6z"},child:[]},{tag:"path",attr:{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12zm0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17z"},child:[]}]})(n)}function vC(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m17.6 9.48 1.84-3.18c.16-.31.04-.69-.26-.85a.637.637 0 0 0-.83.22l-1.88 3.24a11.463 11.463 0 0 0-8.94 0L5.65 5.67a.643.643 0 0 0-.87-.2c-.28.18-.37.54-.22.83L6.4 9.48A10.78 10.78 0 0 0 1 18h22a10.78 10.78 0 0 0-5.4-8.52zM7 15.25a1.25 1.25 0 1 1 0-2.5 1.25 1.25 0 0 1 0 2.5zm10 0a1.25 1.25 0 1 1 0-2.5 1.25 1.25 0 0 1 0 2.5z"},child:[]}]})(n)}function ZD(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"},child:[]}]})(n)}function eM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"},child:[]}]})(n)}function bo(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(n)}function tM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10.09 15.59 11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5a2 2 0 0 0-2 2v4h2V5h14v14H5v-4H3v4a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"},child:[]}]})(n)}function nM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 3a9 9 0 0 0-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42A8.954 8.954 0 0 0 13 21a9 9 0 0 0 0-18zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"},child:[]}]})(n)}function cb(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"},child:[]}]})(n)}function rM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"},child:[]}]})(n)}function sM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"},child:[]}]})(n)}function ub(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 19H5V5h7V3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"},child:[]}]})(n)}function td(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9.19 6.35c-2.04 2.29-3.44 5.58-3.57 5.89L2 10.69l4.05-4.05c.47-.47 1.15-.68 1.81-.55l1.33.26zM11.17 17s3.74-1.55 5.89-3.7c5.4-5.4 4.5-9.62 4.21-10.57-.95-.3-5.17-1.19-10.57 4.21C8.55 9.09 7 12.83 7 12.83L11.17 17zm6.48-2.19c-2.29 2.04-5.58 3.44-5.89 3.57L13.31 22l4.05-4.05c.47-.47.68-1.15.55-1.81l-.26-1.33zM9 18c0 .83-.34 1.58-.88 2.12C6.94 21.3 2 22 2 22s.7-4.94 1.88-6.12A2.996 2.996 0 0 1 9 18zm4-9c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2z"},child:[]}]})(n)}function bC(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"},child:[]}]})(n)}function tp(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(n)}function iM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m23 12-2.44-2.79.34-3.69-3.61-.82-1.89-3.2L12 2.96 8.6 1.5 6.71 4.69 3.1 5.5l.34 3.7L1 12l2.44 2.79-.34 3.7 3.61.82L8.6 22.5l3.4-1.47 3.4 1.46 1.89-3.19 3.61-.82-.34-3.69L23 12zm-12.91 4.72-3.8-3.81 1.48-1.48 2.32 2.33 5.85-5.87 1.48 1.48-7.33 7.35z"},child:[]}]})(n)}function aM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"},child:[]}]})(n)}function oM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"},child:[]}]})(n)}function N0(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28zm-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18l5.98 5.99zM4.27 3 3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73 4.27 3z"},child:[]}]})(n)}function I0(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"},child:[]}]})(n)}function lM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM9.5 16.5v-9l7 4.5-7 4.5z"},child:[]}]})(n)}function cM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 6h12v12H6z"},child:[]}]})(n)}function j0(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m21 6.5-4 4V7c0-.55-.45-1-1-1H9.82L21 17.18V6.5zM3.27 2 2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.54-.18L19.73 21 21 19.73 3.27 2z"},child:[]}]})(n)}function nd(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"},child:[]}]})(n)}function uM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 9v6h4l5 5V4l-5 5H7z"},child:[]}]})(n)}function tE(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16.5 12A4.5 4.5 0 0 0 14 7.97v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51A8.796 8.796 0 0 0 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06a8.99 8.99 0 0 0 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4 9.91 6.09 12 8.18V4z"},child:[]}]})(n)}function nE(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3A4.5 4.5 0 0 0 14 7.97v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"},child:[]}]})(n)}function Oy(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.7.28-.28 0-.53-.11-.71-.29L.29 13.08a.956.956 0 0 1-.29-.7c0-.28.11-.53.29-.71C3.34 8.78 7.46 7 12 7s8.66 1.78 11.71 4.67c.18.18.29.43.29.71 0 .28-.11.53-.29.71l-2.48 2.48c-.18.18-.43.29-.71.29-.27 0-.52-.11-.7-.28a11.27 11.27 0 0 0-2.67-1.85.996.996 0 0 1-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z"},child:[]}]})(n)}function dM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20.01 15.38c-1.23 0-2.42-.2-3.53-.56a.977.977 0 0 0-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"},child:[]}]})(n)}function hM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"},child:[]}]})(n)}function fM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"},child:[]}]})(n)}function vm(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M20 18c1.1 0 1.99-.9 1.99-2L22 6a2 2 0 0 0-2-2H4c-1.11 0-2 .89-2 2v10a2 2 0 0 0 2 2H0v2h24v-2h-4zm-7-3.53v-2.19c-2.78 0-4.61.85-6 2.72.56-2.67 2.11-5.33 6-5.87V7l4 3.73-4 3.74z"},child:[]}]})(n)}function mM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m21.22 18.02 2 2H24v-2h-2.78zm.77-2 .01-10a2 2 0 0 0-2-2H7.22l5.23 5.23c.18-.04.36-.07.55-.1V7.02l4 3.73-1.58 1.47 5.54 5.54c.61-.33 1.03-.99 1.03-1.74zM2.39 1.73 1.11 3l1.54 1.54c-.4.36-.65.89-.65 1.48v10a2 2 0 0 0 2 2H0v2h18.13l2.71 2.71 1.27-1.27L2.39 1.73zM7 15.02c.31-1.48.92-2.95 2.07-4.06l1.59 1.59c-1.54.38-2.7 1.18-3.66 2.47z"},child:[]}]})(n)}function rE(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"},child:[]}]})(n)}function Fu(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(n)}function xC(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(n)}function Fl(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M16 9V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3z"},child:[]}]})(n)}function pM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"},child:[]}]})(n)}function sE(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"},child:[]}]})(n)}function _C(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 10V8h-4V4h-2v4h-4V4H8v4H4v2h4v4H4v2h4v4h2v-4h4v4h2v-4h4v-2h-4v-4h4zm-6 4h-4v-4h4v4z"},child:[]}]})(n)}function gM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 9H4v2h16V9zM4 15h16v-2H4v2z"},child:[]}]})(n)}function yM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"},child:[]}]})(n)}function D0(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zm0-10h4v6h6v-6h4l-7-7-7 7z"},child:[]}]})(n)}function vM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 3H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h6v2H8v2h8v-2h-2v-2h6c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"},child:[]}]})(n)}function bM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"},child:[]}]})(n)}function xM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"},child:[]}]})(n)}function _M(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 7v2.99s-1.99.01-2 0V7h-3s.01-1.99 0-2h3V2h2v3h3v2h-3zm-3 4V8h-3V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8h-3zM5 19l3-4 2 3 3-4 4 5H5z"},child:[]}]})(n)}function wM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2z"},child:[]}]})(n)}function Hl(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},child:[]}]})(n)}function iE(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"},child:[]}]})(n)}function EM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"},child:[]}]})(n)}function SM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 11h-1V3c0-1.1-.9-2-2-2h-2c-1.1 0-2 .9-2 2v8H8c-2.76 0-5 2.24-5 5v7h18v-7c0-2.76-2.24-5-5-5zm3 10h-2v-3c0-.55-.45-1-1-1s-1 .45-1 1v3h-2v-3c0-.55-.45-1-1-1s-1 .45-1 1v3H9v-3c0-.55-.45-1-1-1s-1 .45-1 1v3H5v-5c0-1.65 1.35-3 3-3h8c1.65 0 3 1.35 3 3v5z"},child:[]}]})(n)}function TM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.16 3h-.32L9.21 8.25h5.58zM16.46 8.25h5.16L19 3h-5.16zM21.38 9.75h-8.63V20.1zM11.25 20.1V9.75H2.62zM7.54 8.25 10.16 3H5L2.38 8.25z"},child:[]}]})(n)}function Ao(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"},child:[]}]})(n)}function An(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(n)}function CM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"},child:[]}]})(n)}function kM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"},child:[]}]})(n)}function aE(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"},child:[]}]})(n)}function AM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(n)}function RM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"},child:[]}]})(n)}function NM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 12.22C21 6.73 16.74 3 12 3c-4.69 0-9 3.65-9 9.28-.6.34-1 .98-1 1.72v2c0 1.1.9 2 2 2h1v-6.1c0-3.87 3.13-7 7-7s7 3.13 7 7V19h-8v2h8c1.1 0 2-.9 2-2v-1.22c.59-.31 1-.92 1-1.64v-2.3c0-.7-.41-1.31-1-1.62z"},child:[]},{tag:"circle",attr:{cx:"9",cy:"13",r:"1"},child:[]},{tag:"circle",attr:{cx:"15",cy:"13",r:"1"},child:[]},{tag:"path",attr:{d:"M18 11.03A6.04 6.04 0 0 0 12.05 6c-3.03 0-6.29 2.51-6.03 6.45a8.075 8.075 0 0 0 4.86-5.89c1.31 2.63 4 4.44 7.12 4.47z"},child:[]}]})(n)}function IM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 1.01 7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14zm-1-6h-3V8h-2v5H8l4 4 4-4z"},child:[]}]})(n)}function jM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 11V3H5c-1.1 0-2 .9-2 2v6h8zm2 0h8V5c0-1.1-.9-2-2-2h-6v8zm-2 2H3v6c0 1.1.9 2 2 2h6v-8zm2 0v8h6c1.1 0 2-.9 2-2v-6h-8z"},child:[]}]})(n)}function oE(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 9V7h-2V2.84A9.929 9.929 0 0 0 11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12c0-1.05-.17-2.05-.47-3H18zm-2.5-1c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5.67-1.5 1.5-1.5zm-7 0c.83 0 1.5.67 1.5 1.5S9.33 11 8.5 11 7 10.33 7 9.5 7.67 8 8.5 8zm3.5 9.5c-2.33 0-4.31-1.46-5.11-3.5h10.22c-.8 2.04-2.78 3.5-5.11 3.5zM22 3h2v2h-2v2h-2V5h-2V3h2V1h2v2z"},child:[]}]})(n)}function DM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM8.5 8c.83 0 1.5.67 1.5 1.5S9.33 11 8.5 11 7 10.33 7 9.5 7.67 8 8.5 8zM12 18c-2.28 0-4.22-1.66-5-4h10c-.78 2.34-2.72 4-5 4zm3.5-7c-.83 0-1.5-.67-1.5-1.5S14.67 8 15.5 8s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"},child:[]}]})(n)}function db(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"},child:[]}]})(n)}function MM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"},child:[]}]})(n)}function OM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"},child:[]}]})(n)}function hb(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"},child:[]}]})(n)}function PM(n){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"},child:[]}]})(n)}const wC=O.createContext(),Ys=()=>{const n=O.useContext(wC);if(!n)throw new Error("useToast must be used within ToastProvider");return n},LM=({children:n})=>{const[e,t]=O.useState([]),r=O.useCallback((g,v="info")=>{const b=Date.now();t(_=>[..._,{id:b,message:g,type:v}]),setTimeout(()=>{t(_=>_.filter(C=>C.id!==b))},4e3)},[]),a=O.useCallback(g=>{t(v=>v.filter(b=>b.id!==g))},[]),l=O.useCallback(g=>r(g,"success"),[r]),c=O.useCallback(g=>r(g,"error"),[r]),h=O.useCallback(g=>r(g,"info"),[r]),m=O.useCallback(g=>r(g,"warning"),[r]);return d.jsxs(wC.Provider,{value:{success:l,error:c,info:h,warning:m},children:[n,d.jsx(VM,{toasts:e,removeToast:a})]})},VM=({toasts:n,removeToast:e})=>d.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:n.map(t=>d.jsx(UM,{toast:t,onClose:()=>e(t.id)},t.id))}),UM=({toast:n,onClose:e})=>{const t={success:d.jsx(ZD,{size:20}),error:d.jsx(aM,{size:20}),warning:d.jsx(oM,{size:20}),info:d.jsx(cb,{size:20})},r={success:"bg-green-600 border-green-500",error:"bg-red-600 border-red-500",warning:"bg-yellow-600 border-yellow-500",info:"bg-blue-600 border-blue-500"};return d.jsxs("div",{className:`${r[n.type]} border-l-4 text-white px-4 py-3 rounded-lg shadow-lg 
                  flex items-center gap-3 min-w-[300px] max-w-md animate-slide-in`,children:[d.jsx("div",{className:"flex-shrink-0",children:t[n.type]}),d.jsx("div",{className:"flex-1 text-sm font-medium",children:n.message}),d.jsx("button",{onClick:e,className:"flex-shrink-0 hover:bg-white/20 rounded p-1 transition-colors",children:d.jsx(An,{size:18})})]})};function EC(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var a=n.length;for(e=0;e<a;e++)n[e]&&(t=EC(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function zM(){for(var n,e,t=0,r="",a=arguments.length;t<a;t++)(n=arguments[t])&&(e=EC(n))&&(r&&(r+=" "),r+=e);return r}const BM=(n,e)=>{const t=new Array(n.length+e.length);for(let r=0;r<n.length;r++)t[r]=n[r];for(let r=0;r<e.length;r++)t[n.length+r]=e[r];return t},FM=(n,e)=>({classGroupId:n,validator:e}),SC=(n=new Map,e=null,t)=>({nextPart:n,validators:e,classGroupId:t}),bm="-",lE=[],HM="arbitrary..",$M=n=>{const e=GM(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:c=>{if(c.startsWith("[")&&c.endsWith("]"))return qM(c);const h=c.split(bm),m=h[0]===""&&h.length>1?1:0;return TC(h,m,e)},getConflictingClassGroupIds:(c,h)=>{if(h){const m=r[c],g=t[c];return m?g?BM(g,m):m:g||lE}return t[c]||lE}}},TC=(n,e,t)=>{if(n.length-e===0)return t.classGroupId;const a=n[e],l=t.nextPart.get(a);if(l){const g=TC(n,e+1,l);if(g)return g}const c=t.validators;if(c===null)return;const h=e===0?n.join(bm):n.slice(e).join(bm),m=c.length;for(let g=0;g<m;g++){const v=c[g];if(v.validator(h))return v.classGroupId}},qM=n=>n.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=n.slice(1,-1),t=e.indexOf(":"),r=e.slice(0,t);return r?HM+r:void 0})(),GM=n=>{const{theme:e,classGroups:t}=n;return YM(t,e)},YM=(n,e)=>{const t=SC();for(const r in n){const a=n[r];fb(a,t,r,e)}return t},fb=(n,e,t,r)=>{const a=n.length;for(let l=0;l<a;l++){const c=n[l];KM(c,e,t,r)}},KM=(n,e,t,r)=>{if(typeof n=="string"){QM(n,e,t);return}if(typeof n=="function"){XM(n,e,t,r);return}WM(n,e,t,r)},QM=(n,e,t)=>{const r=n===""?e:CC(e,n);r.classGroupId=t},XM=(n,e,t,r)=>{if(JM(n)){fb(n(r),e,t,r);return}e.validators===null&&(e.validators=[]),e.validators.push(FM(t,n))},WM=(n,e,t,r)=>{const a=Object.entries(n),l=a.length;for(let c=0;c<l;c++){const[h,m]=a[c];fb(m,CC(e,h),t,r)}},CC=(n,e)=>{let t=n;const r=e.split(bm),a=r.length;for(let l=0;l<a;l++){const c=r[l];let h=t.nextPart.get(c);h||(h=SC(),t.nextPart.set(c,h)),t=h}return t},JM=n=>"isThemeGetter"in n&&n.isThemeGetter===!0,ZM=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=Object.create(null),r=Object.create(null);const a=(l,c)=>{t[l]=c,e++,e>n&&(e=0,r=t,t=Object.create(null))};return{get(l){let c=t[l];if(c!==void 0)return c;if((c=r[l])!==void 0)return a(l,c),c},set(l,c){l in t?t[l]=c:a(l,c)}}},M0="!",cE=":",eO=[],uE=(n,e,t,r,a)=>({modifiers:n,hasImportantModifier:e,baseClassName:t,maybePostfixModifierPosition:r,isExternal:a}),tO=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=a=>{const l=[];let c=0,h=0,m=0,g;const v=a.length;for(let I=0;I<v;I++){const k=a[I];if(c===0&&h===0){if(k===cE){l.push(a.slice(m,I)),m=I+1;continue}if(k==="/"){g=I;continue}}k==="["?c++:k==="]"?c--:k==="("?h++:k===")"&&h--}const b=l.length===0?a:a.slice(m);let _=b,C=!1;b.endsWith(M0)?(_=b.slice(0,-1),C=!0):b.startsWith(M0)&&(_=b.slice(1),C=!0);const R=g&&g>m?g-m:void 0;return uE(l,C,_,R)};if(e){const a=e+cE,l=r;r=c=>c.startsWith(a)?l(c.slice(a.length)):uE(eO,!1,c,void 0,!0)}if(t){const a=r;r=l=>t({className:l,parseClassName:a})}return r},nO=n=>{const e=new Map;return n.orderSensitiveModifiers.forEach((t,r)=>{e.set(t,1e6+r)}),t=>{const r=[];let a=[];for(let l=0;l<t.length;l++){const c=t[l],h=c[0]==="[",m=e.has(c);h||m?(a.length>0&&(a.sort(),r.push(...a),a=[]),r.push(c)):a.push(c)}return a.length>0&&(a.sort(),r.push(...a)),r}},rO=n=>({cache:ZM(n.cacheSize),parseClassName:tO(n),sortModifiers:nO(n),...$M(n)}),sO=/\s+/,iO=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:l}=e,c=[],h=n.trim().split(sO);let m="";for(let g=h.length-1;g>=0;g-=1){const v=h[g],{isExternal:b,modifiers:_,hasImportantModifier:C,baseClassName:R,maybePostfixModifierPosition:I}=t(v);if(b){m=v+(m.length>0?" "+m:m);continue}let k=!!I,B=r(k?R.substring(0,I):R);if(!B){if(!k){m=v+(m.length>0?" "+m:m);continue}if(B=r(R),!B){m=v+(m.length>0?" "+m:m);continue}k=!1}const $=_.length===0?"":_.length===1?_[0]:l(_).join(":"),N=C?$+M0:$,V=N+B;if(c.indexOf(V)>-1)continue;c.push(V);const z=a(B,k);for(let F=0;F<z.length;++F){const E=z[F];c.push(N+E)}m=v+(m.length>0?" "+m:m)}return m},aO=(...n)=>{let e=0,t,r,a="";for(;e<n.length;)(t=n[e++])&&(r=kC(t))&&(a&&(a+=" "),a+=r);return a},kC=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=kC(n[r]))&&(t&&(t+=" "),t+=e);return t},oO=(n,...e)=>{let t,r,a,l;const c=m=>{const g=e.reduce((v,b)=>b(v),n());return t=rO(g),r=t.cache.get,a=t.cache.set,l=h,h(m)},h=m=>{const g=r(m);if(g)return g;const v=iO(m,t);return a(m,v),v};return l=c,(...m)=>l(aO(...m))},lO=[],xn=n=>{const e=t=>t[n]||lO;return e.isThemeGetter=!0,e},AC=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,RC=/^\((?:(\w[\w-]*):)?(.+)\)$/i,cO=/^\d+\/\d+$/,uO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,dO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,hO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,fO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,mO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,kl=n=>cO.test(n),ot=n=>!!n&&!Number.isNaN(Number(n)),oa=n=>!!n&&Number.isInteger(Number(n)),Py=n=>n.endsWith("%")&&ot(n.slice(0,-1)),fi=n=>uO.test(n),pO=()=>!0,gO=n=>dO.test(n)&&!hO.test(n),NC=()=>!1,yO=n=>fO.test(n),vO=n=>mO.test(n),bO=n=>!Le(n)&&!Ve(n),xO=n=>pc(n,DC,NC),Le=n=>AC.test(n),uo=n=>pc(n,MC,gO),Ly=n=>pc(n,TO,ot),dE=n=>pc(n,IC,NC),_O=n=>pc(n,jC,vO),df=n=>pc(n,OC,yO),Ve=n=>RC.test(n),xu=n=>gc(n,MC),wO=n=>gc(n,CO),hE=n=>gc(n,IC),EO=n=>gc(n,DC),SO=n=>gc(n,jC),hf=n=>gc(n,OC,!0),pc=(n,e,t)=>{const r=AC.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},gc=(n,e,t=!1)=>{const r=RC.exec(n);return r?r[1]?e(r[1]):t:!1},IC=n=>n==="position"||n==="percentage",jC=n=>n==="image"||n==="url",DC=n=>n==="length"||n==="size"||n==="bg-size",MC=n=>n==="length",TO=n=>n==="number",CO=n=>n==="family-name",OC=n=>n==="shadow",kO=()=>{const n=xn("color"),e=xn("font"),t=xn("text"),r=xn("font-weight"),a=xn("tracking"),l=xn("leading"),c=xn("breakpoint"),h=xn("container"),m=xn("spacing"),g=xn("radius"),v=xn("shadow"),b=xn("inset-shadow"),_=xn("text-shadow"),C=xn("drop-shadow"),R=xn("blur"),I=xn("perspective"),k=xn("aspect"),B=xn("ease"),$=xn("animate"),N=()=>["auto","avoid","all","avoid-page","page","left","right","column"],V=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],z=()=>[...V(),Ve,Le],F=()=>["auto","hidden","clip","visible","scroll"],E=()=>["auto","contain","none"],S=()=>[Ve,Le,m],A=()=>[kl,"full","auto",...S()],D=()=>[oa,"none","subgrid",Ve,Le],M=()=>["auto",{span:["full",oa,Ve,Le]},oa,Ve,Le],U=()=>[oa,"auto",Ve,Le],P=()=>["auto","min","max","fr",Ve,Le],xe=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Ee=()=>["start","end","center","stretch","center-safe","end-safe"],Y=()=>["auto",...S()],se=()=>[kl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...S()],J=()=>[n,Ve,Le],Ce=()=>[...V(),hE,dE,{position:[Ve,Le]}],Ne=()=>["no-repeat",{repeat:["","x","y","space","round"]}],H=()=>["auto","cover","contain",EO,xO,{size:[Ve,Le]}],q=()=>[Py,xu,uo],re=()=>["","none","full",g,Ve,Le],ne=()=>["",ot,xu,uo],we=()=>["solid","dashed","dotted","double"],ye=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Te=()=>[ot,Py,hE,dE],Fe=()=>["","none",R,Ve,Le],Ye=()=>["none",ot,Ve,Le],be=()=>["none",ot,Ve,Le],he=()=>[ot,Ve,Le],_e=()=>[kl,"full",...S()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[fi],breakpoint:[fi],color:[pO],container:[fi],"drop-shadow":[fi],ease:["in","out","in-out"],font:[bO],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[fi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[fi],shadow:[fi],spacing:["px",ot],text:[fi],"text-shadow":[fi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",kl,Le,Ve,k]}],container:["container"],columns:[{columns:[ot,Le,Ve,h]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:z()}],overflow:[{overflow:F()}],"overflow-x":[{"overflow-x":F()}],"overflow-y":[{"overflow-y":F()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:A()}],"inset-x":[{"inset-x":A()}],"inset-y":[{"inset-y":A()}],start:[{start:A()}],end:[{end:A()}],top:[{top:A()}],right:[{right:A()}],bottom:[{bottom:A()}],left:[{left:A()}],visibility:["visible","invisible","collapse"],z:[{z:[oa,"auto",Ve,Le]}],basis:[{basis:[kl,"full","auto",h,...S()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ot,kl,"auto","initial","none",Le]}],grow:[{grow:["",ot,Ve,Le]}],shrink:[{shrink:["",ot,Ve,Le]}],order:[{order:[oa,"first","last","none",Ve,Le]}],"grid-cols":[{"grid-cols":D()}],"col-start-end":[{col:M()}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":D()}],"row-start-end":[{row:M()}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":P()}],"auto-rows":[{"auto-rows":P()}],gap:[{gap:S()}],"gap-x":[{"gap-x":S()}],"gap-y":[{"gap-y":S()}],"justify-content":[{justify:[...xe(),"normal"]}],"justify-items":[{"justify-items":[...Ee(),"normal"]}],"justify-self":[{"justify-self":["auto",...Ee()]}],"align-content":[{content:["normal",...xe()]}],"align-items":[{items:[...Ee(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Ee(),{baseline:["","last"]}]}],"place-content":[{"place-content":xe()}],"place-items":[{"place-items":[...Ee(),"baseline"]}],"place-self":[{"place-self":["auto",...Ee()]}],p:[{p:S()}],px:[{px:S()}],py:[{py:S()}],ps:[{ps:S()}],pe:[{pe:S()}],pt:[{pt:S()}],pr:[{pr:S()}],pb:[{pb:S()}],pl:[{pl:S()}],m:[{m:Y()}],mx:[{mx:Y()}],my:[{my:Y()}],ms:[{ms:Y()}],me:[{me:Y()}],mt:[{mt:Y()}],mr:[{mr:Y()}],mb:[{mb:Y()}],ml:[{ml:Y()}],"space-x":[{"space-x":S()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":S()}],"space-y-reverse":["space-y-reverse"],size:[{size:se()}],w:[{w:[h,"screen",...se()]}],"min-w":[{"min-w":[h,"screen","none",...se()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[c]},...se()]}],h:[{h:["screen","lh",...se()]}],"min-h":[{"min-h":["screen","lh","none",...se()]}],"max-h":[{"max-h":["screen","lh",...se()]}],"font-size":[{text:["base",t,xu,uo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Ve,Ly]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Py,Le]}],"font-family":[{font:[wO,Le,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,Ve,Le]}],"line-clamp":[{"line-clamp":[ot,"none",Ve,Ly]}],leading:[{leading:[l,...S()]}],"list-image":[{"list-image":["none",Ve,Le]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ve,Le]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:J()}],"text-color":[{text:J()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...we(),"wavy"]}],"text-decoration-thickness":[{decoration:[ot,"from-font","auto",Ve,uo]}],"text-decoration-color":[{decoration:J()}],"underline-offset":[{"underline-offset":[ot,"auto",Ve,Le]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ve,Le]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ve,Le]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Ce()}],"bg-repeat":[{bg:Ne()}],"bg-size":[{bg:H()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},oa,Ve,Le],radial:["",Ve,Le],conic:[oa,Ve,Le]},SO,_O]}],"bg-color":[{bg:J()}],"gradient-from-pos":[{from:q()}],"gradient-via-pos":[{via:q()}],"gradient-to-pos":[{to:q()}],"gradient-from":[{from:J()}],"gradient-via":[{via:J()}],"gradient-to":[{to:J()}],rounded:[{rounded:re()}],"rounded-s":[{"rounded-s":re()}],"rounded-e":[{"rounded-e":re()}],"rounded-t":[{"rounded-t":re()}],"rounded-r":[{"rounded-r":re()}],"rounded-b":[{"rounded-b":re()}],"rounded-l":[{"rounded-l":re()}],"rounded-ss":[{"rounded-ss":re()}],"rounded-se":[{"rounded-se":re()}],"rounded-ee":[{"rounded-ee":re()}],"rounded-es":[{"rounded-es":re()}],"rounded-tl":[{"rounded-tl":re()}],"rounded-tr":[{"rounded-tr":re()}],"rounded-br":[{"rounded-br":re()}],"rounded-bl":[{"rounded-bl":re()}],"border-w":[{border:ne()}],"border-w-x":[{"border-x":ne()}],"border-w-y":[{"border-y":ne()}],"border-w-s":[{"border-s":ne()}],"border-w-e":[{"border-e":ne()}],"border-w-t":[{"border-t":ne()}],"border-w-r":[{"border-r":ne()}],"border-w-b":[{"border-b":ne()}],"border-w-l":[{"border-l":ne()}],"divide-x":[{"divide-x":ne()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ne()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...we(),"hidden","none"]}],"divide-style":[{divide:[...we(),"hidden","none"]}],"border-color":[{border:J()}],"border-color-x":[{"border-x":J()}],"border-color-y":[{"border-y":J()}],"border-color-s":[{"border-s":J()}],"border-color-e":[{"border-e":J()}],"border-color-t":[{"border-t":J()}],"border-color-r":[{"border-r":J()}],"border-color-b":[{"border-b":J()}],"border-color-l":[{"border-l":J()}],"divide-color":[{divide:J()}],"outline-style":[{outline:[...we(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ot,Ve,Le]}],"outline-w":[{outline:["",ot,xu,uo]}],"outline-color":[{outline:J()}],shadow:[{shadow:["","none",v,hf,df]}],"shadow-color":[{shadow:J()}],"inset-shadow":[{"inset-shadow":["none",b,hf,df]}],"inset-shadow-color":[{"inset-shadow":J()}],"ring-w":[{ring:ne()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:J()}],"ring-offset-w":[{"ring-offset":[ot,uo]}],"ring-offset-color":[{"ring-offset":J()}],"inset-ring-w":[{"inset-ring":ne()}],"inset-ring-color":[{"inset-ring":J()}],"text-shadow":[{"text-shadow":["none",_,hf,df]}],"text-shadow-color":[{"text-shadow":J()}],opacity:[{opacity:[ot,Ve,Le]}],"mix-blend":[{"mix-blend":[...ye(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ye()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ot]}],"mask-image-linear-from-pos":[{"mask-linear-from":Te()}],"mask-image-linear-to-pos":[{"mask-linear-to":Te()}],"mask-image-linear-from-color":[{"mask-linear-from":J()}],"mask-image-linear-to-color":[{"mask-linear-to":J()}],"mask-image-t-from-pos":[{"mask-t-from":Te()}],"mask-image-t-to-pos":[{"mask-t-to":Te()}],"mask-image-t-from-color":[{"mask-t-from":J()}],"mask-image-t-to-color":[{"mask-t-to":J()}],"mask-image-r-from-pos":[{"mask-r-from":Te()}],"mask-image-r-to-pos":[{"mask-r-to":Te()}],"mask-image-r-from-color":[{"mask-r-from":J()}],"mask-image-r-to-color":[{"mask-r-to":J()}],"mask-image-b-from-pos":[{"mask-b-from":Te()}],"mask-image-b-to-pos":[{"mask-b-to":Te()}],"mask-image-b-from-color":[{"mask-b-from":J()}],"mask-image-b-to-color":[{"mask-b-to":J()}],"mask-image-l-from-pos":[{"mask-l-from":Te()}],"mask-image-l-to-pos":[{"mask-l-to":Te()}],"mask-image-l-from-color":[{"mask-l-from":J()}],"mask-image-l-to-color":[{"mask-l-to":J()}],"mask-image-x-from-pos":[{"mask-x-from":Te()}],"mask-image-x-to-pos":[{"mask-x-to":Te()}],"mask-image-x-from-color":[{"mask-x-from":J()}],"mask-image-x-to-color":[{"mask-x-to":J()}],"mask-image-y-from-pos":[{"mask-y-from":Te()}],"mask-image-y-to-pos":[{"mask-y-to":Te()}],"mask-image-y-from-color":[{"mask-y-from":J()}],"mask-image-y-to-color":[{"mask-y-to":J()}],"mask-image-radial":[{"mask-radial":[Ve,Le]}],"mask-image-radial-from-pos":[{"mask-radial-from":Te()}],"mask-image-radial-to-pos":[{"mask-radial-to":Te()}],"mask-image-radial-from-color":[{"mask-radial-from":J()}],"mask-image-radial-to-color":[{"mask-radial-to":J()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":V()}],"mask-image-conic-pos":[{"mask-conic":[ot]}],"mask-image-conic-from-pos":[{"mask-conic-from":Te()}],"mask-image-conic-to-pos":[{"mask-conic-to":Te()}],"mask-image-conic-from-color":[{"mask-conic-from":J()}],"mask-image-conic-to-color":[{"mask-conic-to":J()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Ce()}],"mask-repeat":[{mask:Ne()}],"mask-size":[{mask:H()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ve,Le]}],filter:[{filter:["","none",Ve,Le]}],blur:[{blur:Fe()}],brightness:[{brightness:[ot,Ve,Le]}],contrast:[{contrast:[ot,Ve,Le]}],"drop-shadow":[{"drop-shadow":["","none",C,hf,df]}],"drop-shadow-color":[{"drop-shadow":J()}],grayscale:[{grayscale:["",ot,Ve,Le]}],"hue-rotate":[{"hue-rotate":[ot,Ve,Le]}],invert:[{invert:["",ot,Ve,Le]}],saturate:[{saturate:[ot,Ve,Le]}],sepia:[{sepia:["",ot,Ve,Le]}],"backdrop-filter":[{"backdrop-filter":["","none",Ve,Le]}],"backdrop-blur":[{"backdrop-blur":Fe()}],"backdrop-brightness":[{"backdrop-brightness":[ot,Ve,Le]}],"backdrop-contrast":[{"backdrop-contrast":[ot,Ve,Le]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ot,Ve,Le]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ot,Ve,Le]}],"backdrop-invert":[{"backdrop-invert":["",ot,Ve,Le]}],"backdrop-opacity":[{"backdrop-opacity":[ot,Ve,Le]}],"backdrop-saturate":[{"backdrop-saturate":[ot,Ve,Le]}],"backdrop-sepia":[{"backdrop-sepia":["",ot,Ve,Le]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":S()}],"border-spacing-x":[{"border-spacing-x":S()}],"border-spacing-y":[{"border-spacing-y":S()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ve,Le]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ot,"initial",Ve,Le]}],ease:[{ease:["linear","initial",B,Ve,Le]}],delay:[{delay:[ot,Ve,Le]}],animate:[{animate:["none",$,Ve,Le]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[I,Ve,Le]}],"perspective-origin":[{"perspective-origin":z()}],rotate:[{rotate:Ye()}],"rotate-x":[{"rotate-x":Ye()}],"rotate-y":[{"rotate-y":Ye()}],"rotate-z":[{"rotate-z":Ye()}],scale:[{scale:be()}],"scale-x":[{"scale-x":be()}],"scale-y":[{"scale-y":be()}],"scale-z":[{"scale-z":be()}],"scale-3d":["scale-3d"],skew:[{skew:he()}],"skew-x":[{"skew-x":he()}],"skew-y":[{"skew-y":he()}],transform:[{transform:[Ve,Le,"","none","gpu","cpu"]}],"transform-origin":[{origin:z()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:_e()}],"translate-x":[{"translate-x":_e()}],"translate-y":[{"translate-y":_e()}],"translate-z":[{"translate-z":_e()}],"translate-none":["translate-none"],accent:[{accent:J()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:J()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ve,Le]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ve,Le]}],fill:[{fill:["none",...J()]}],"stroke-w":[{stroke:[ot,xu,uo,Ly]}],stroke:[{stroke:["none",...J()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},AO=oO(kO);function St(...n){return AO(zM(n))}function np(n){if(!n)return"";const e=n.toDate?n.toDate():new Date(n),r=new Date-e;return r<6e4?"Just now":r<36e5?`${Math.floor(r/6e4)}m ago`:r<864e5?`${Math.floor(r/36e5)}h ago`:r<6048e5?`${Math.floor(r/864e5)}d ago`:e.toLocaleDateString()}function PC(n){switch(n){case"admin":return"bg-admin/20 text-admin border-admin/30";case"moderator":return"bg-moderator/20 text-moderator border-moderator/30";default:return"bg-member/20 text-member border-member/30"}}const Xt=({label:n,error:e,className:t,containerClassName:r,...a})=>d.jsxs("div",{className:St("flex flex-col gap-1.5",r),children:[n&&d.jsx("label",{className:"text-sm font-medium text-dark-text",children:n}),d.jsx("input",{className:St("bg-dark-input text-dark-text px-4 py-2.5 rounded-md","border border-transparent focus:border-brand-primary","outline-none transition-colors duration-200","placeholder:text-dark-muted",e&&"border-admin",t),...a}),e&&d.jsx("span",{className:"text-sm text-admin",children:e})]}),Je=({children:n,variant:e="primary",size:t="md",className:r,disabled:a,...l})=>{const c="font-medium rounded-md transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",h={primary:"bg-brand-primary hover:bg-brand-hover text-white",secondary:"bg-dark-input hover:bg-dark-hover text-dark-text",danger:"bg-admin hover:bg-admin/80 text-white",ghost:"hover:bg-dark-hover text-dark-text"},m={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};return d.jsx("button",{className:St(c,h[e],m[t],r),disabled:a,...l,children:n})},RO=({isOpen:n,onClose:e})=>{const[t,r]=O.useState(""),[a,l]=O.useState(!1),[c,h]=O.useState(!1),{success:m,error:g}=Ys(),v=async b=>{b.preventDefault(),l(!0);try{await E4(Ml,t),h(!0),m("Password reset email sent! Check your inbox."),setTimeout(()=>{e(),h(!1),r("")},3e3)}catch(_){console.error("Password reset error:",_),_.code==="auth/user-not-found"?g("No account found with this email address."):_.code==="auth/invalid-email"?g("Invalid email address."):g("Failed to send reset email. Please try again.")}finally{l(!1)}};return n?d.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-dark-sidebar rounded-lg shadow-2xl w-full max-w-md p-6 relative",children:[d.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-dark-muted hover:text-dark-text transition-colors",children:d.jsx(An,{size:24})}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-dark-text mb-2",children:"Reset Password"}),d.jsx("p",{className:"text-dark-muted text-sm",children:"Enter your email address and we'll send you a link to reset your password."})]}),c?d.jsx("div",{className:"bg-green-500/10 border border-green-500/30 text-green-400 px-4 py-3 rounded-md text-sm text-center",children:" Reset email sent successfully! Check your inbox."}):d.jsxs("form",{onSubmit:v,className:"space-y-4",children:[d.jsx(Xt,{label:"Email Address",type:"email",placeholder:"your@email.com",value:t,onChange:b=>r(b.target.value),required:!0,autoFocus:!0}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx(Je,{type:"button",variant:"secondary",onClick:e,className:"flex-1",children:"Cancel"}),d.jsx(Je,{type:"submit",variant:"primary",className:"flex-1",disabled:a||!t,children:a?"Sending...":"Send Reset Link"})]})]})]})}):null},NO=({onSwitchToRegister:n,onSwitchToReset:e})=>{const{login:t}=Zn(),[r,a]=O.useState({email:"",password:""}),[l,c]=O.useState(""),[h,m]=O.useState(!1),[g,v]=O.useState(!1),b=async _=>{_.preventDefault(),c(""),m(!0);try{await t(r.email,r.password)}catch(C){c(C.message||"Failed to login")}finally{m(!1)}};return d.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-dark-bg p-4",children:[d.jsxs("div",{className:"w-full max-w-md bg-dark-sidebar rounded-lg shadow-2xl p-8",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("h1",{className:"text-3xl font-bold text-dark-text mb-2",children:"Welcome Back!"}),d.jsx("p",{className:"text-dark-muted",children:"Login to Lumo"})]}),d.jsxs("form",{onSubmit:b,className:"space-y-4",children:[d.jsx(Xt,{label:"Email",type:"email",placeholder:"Enter your email",value:r.email,onChange:_=>a({...r,email:_.target.value}),required:!0}),d.jsxs("div",{children:[d.jsx(Xt,{label:"Password",type:"password",placeholder:"Enter your password",value:r.password,onChange:_=>a({...r,password:_.target.value}),required:!0}),d.jsx("div",{className:"mt-2 text-right",children:d.jsx("button",{type:"button",onClick:()=>v(!0),className:"text-sm text-brand-primary hover:underline",children:"Forgot Password?"})})]}),l&&d.jsx("div",{className:"bg-admin/10 border border-admin/30 text-admin px-4 py-3 rounded-md text-sm",children:l}),d.jsx(Je,{type:"submit",variant:"primary",className:"w-full",disabled:h,children:h?"Logging in...":"Login"})]}),d.jsx("div",{className:"mt-6 text-center",children:d.jsxs("div",{className:"text-dark-muted text-sm",children:["Don't have an account?"," ",d.jsx("button",{onClick:n,className:"text-brand-primary hover:underline",children:"Register"})]})})]}),d.jsx(RO,{isOpen:g,onClose:()=>v(!1)})]})},IO=({onSwitchToLogin:n})=>{const{register:e}=Zn(),[t,r]=O.useState({displayName:"",email:"",password:"",confirmPassword:""}),[a,l]=O.useState(""),[c,h]=O.useState(""),[m,g]=O.useState(!1),[v,b]=O.useState([]);O.useEffect(()=>{(async()=>{try{const R=mt(ve,"users"),I=await ko(R),k=[];I.forEach(B=>{const $=B.data().displayName;$&&k.push($.toLowerCase())}),b(k)}catch(R){console.error("Error loading usernames:",R)}})()},[]),O.useEffect(()=>{const C=t.displayName;if(C){if(C.length<3){h("Username must be at least 3 characters");return}if(!/^[a-zA-Z0-9-_]+$/.test(C)){h("Only letters, numbers, hyphens (-) and underscores (_) allowed");return}const R=C.toLowerCase();v.includes(R)?h("This username is already taken"):h("")}else h("")},[t.displayName,v]);const _=async C=>{if(C.preventDefault(),l(""),c){l(c);return}if(t.password!==t.confirmPassword){l("Passwords do not match");return}if(t.password.length<6){l("Password must be at least 6 characters");return}g(!0);try{await e(t.email,t.password,t.displayName)}catch(R){l(R.message||"Failed to register")}finally{g(!1)}};return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-bg p-4",children:d.jsxs("div",{className:"w-full max-w-md bg-dark-sidebar rounded-lg shadow-2xl p-8",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("h1",{className:"text-3xl font-bold text-dark-text mb-2",children:"Create Account"}),d.jsx("p",{className:"text-dark-muted",children:"Join Lumo"})]}),d.jsxs("form",{onSubmit:_,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx(Xt,{label:"Display Name",type:"text",placeholder:"Enter your display name",value:t.displayName,onChange:C=>r({...t,displayName:C.target.value}),required:!0}),c&&d.jsx("p",{className:"text-xs text-admin mt-1",children:c}),t.displayName&&!c&&d.jsx("p",{className:"text-xs text-green-500 mt-1",children:" Username available"})]}),d.jsx(Xt,{label:"Email",type:"email",placeholder:"Enter your email",value:t.email,onChange:C=>r({...t,email:C.target.value}),required:!0}),d.jsx(Xt,{label:"Password",type:"password",placeholder:"Enter your password",value:t.password,onChange:C=>r({...t,password:C.target.value}),required:!0}),d.jsx(Xt,{label:"Confirm Password",type:"password",placeholder:"Confirm your password",value:t.confirmPassword,onChange:C=>r({...t,confirmPassword:C.target.value}),required:!0}),a&&d.jsx("div",{className:"bg-admin/10 border border-admin/30 text-admin px-4 py-3 rounded-md text-sm",children:a}),d.jsx(Je,{type:"submit",variant:"primary",className:"w-full",disabled:m||!!c,children:m?"Creating account...":"Register"})]}),d.jsx("div",{className:"mt-6 text-center",children:d.jsxs("div",{className:"text-dark-muted text-sm",children:["Already have an account?"," ",d.jsx("button",{onClick:n,className:"text-brand-primary hover:underline",children:"Login"})]})})]})})},jO=({onSwitchToLogin:n})=>{const{resetPassword:e}=Zn(),[t,r]=O.useState(""),[a,l]=O.useState(""),[c,h]=O.useState(!1),[m,g]=O.useState(!1),v=async b=>{b.preventDefault(),l(""),h(!1),g(!0);try{await e(t),h(!0)}catch(_){l(_.message||"Failed to send reset email")}finally{g(!1)}};return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-bg p-4",children:d.jsxs("div",{className:"w-full max-w-md bg-dark-sidebar rounded-lg shadow-2xl p-8",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("h1",{className:"text-3xl font-bold text-dark-text mb-2",children:"Reset Password"}),d.jsx("p",{className:"text-dark-muted",children:"Enter your email to receive a reset link"})]}),d.jsxs("form",{onSubmit:v,className:"space-y-4",children:[d.jsx(Xt,{label:"Email",type:"email",placeholder:"Enter your email",value:t,onChange:b=>r(b.target.value),required:!0}),a&&d.jsx("div",{className:"bg-admin/10 border border-admin/30 text-admin px-4 py-3 rounded-md text-sm",children:a}),c&&d.jsx("div",{className:"bg-green-500/10 border border-green-500/30 text-green-500 px-4 py-3 rounded-md text-sm",children:"Password reset email sent! Check your inbox."}),d.jsx(Je,{type:"submit",variant:"primary",className:"w-full",disabled:m,children:m?"Sending...":"Send Reset Link"})]}),d.jsx("div",{className:"mt-6 text-center",children:d.jsx("button",{onClick:n,className:"text-brand-primary hover:underline text-sm",children:"Back to Login"})})]})})},DO=({onSwipeLeft:n,onSwipeRight:e,minSwipeDistance:t=50})=>{const r=O.useRef(null),a=O.useRef(null);return{onTouchStart:m=>{a.current=null,r.current=m.targetTouches[0].clientX},onTouchMove:m=>{a.current=m.targetTouches[0].clientX},onTouchEnd:()=>{if(!r.current||!a.current)return;const m=r.current-a.current,g=m>t,v=m<-t;g&&n&&n(),v&&e&&e()}}};function MO(n){return je({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111.1 8 0 119.1 0 256s111.1 248 248 248 248-111.1 248-248S384.9 8 248 8zm100.7 364.9c-4.2 0-6.8-1.3-10.7-3.6-62.4-37.6-135-39.2-206.7-24.5-3.9 1-9 2.6-11.9 2.6-9.7 0-15.8-7.7-15.8-15.8 0-10.3 6.1-15.2 13.6-16.8 81.9-18.1 165.6-16.5 237 26.2 6.1 3.9 9.7 7.4 9.7 16.5s-7.1 15.4-15.2 15.4zm26.9-65.6c-5.2 0-8.7-2.3-12.3-4.2-62.5-37-155.7-51.9-238.6-29.4-4.8 1.3-7.4 2.6-11.9 2.6-10.7 0-19.4-8.7-19.4-19.4s5.2-17.8 15.5-20.7c27.8-7.8 56.2-13.6 97.8-13.6 64.9 0 127.6 16.1 177 45.5 8.1 4.8 11.3 11 11.3 19.7-.1 10.8-8.5 19.5-19.4 19.5zm31-76.2c-5.2 0-8.4-1.3-12.9-3.9-71.2-42.5-198.5-52.7-280.9-29.7-3.6 1-8.1 2.6-12.9 2.6-13.2 0-23.3-10.3-23.3-23.6 0-13.6 8.4-21.3 17.4-23.9 35.2-10.3 74.6-15.2 117.5-15.2 73 0 149.5 15.2 205.4 47.8 7.8 4.5 12.9 10.7 12.9 22.6 0 13.6-11 23.3-23.2 23.3z"},child:[]}]})(n)}function fE(n){return je({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(n)}function OO(n){return je({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(n)}function rp(n){return je({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M440.667 182.109l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l14.623-81.891C377.123 38.754 371.468 32 363.997 32h-40.632a12 12 0 0 0-11.813 9.891L296.175 128H197.54l14.623-81.891C213.477 38.754 207.822 32 200.35 32h-40.632a12 12 0 0 0-11.813 9.891L132.528 128H53.432a12 12 0 0 0-11.813 9.891l-7.143 40C33.163 185.246 38.818 192 46.289 192h74.81L98.242 320H19.146a12 12 0 0 0-11.813 9.891l-7.143 40C-1.123 377.246 4.532 384 12.003 384h74.81L72.19 465.891C70.877 473.246 76.532 480 84.003 480h40.632a12 12 0 0 0 11.813-9.891L151.826 384h98.634l-14.623 81.891C234.523 473.246 240.178 480 247.65 480h40.632a12 12 0 0 0 11.813-9.891L315.472 384h79.096a12 12 0 0 0 11.813-9.891l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l22.857-128h79.096a12 12 0 0 0 11.813-9.891zM261.889 320h-98.634l22.857-128h98.634l-22.857 128z"},child:[]}]})(n)}function mE(n){return je({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(n)}const Us=({isOpen:n,onClose:e,title:t,children:r,size:a="md",showCloseButton:l=!0})=>{if(O.useEffect(()=>{const h=m=>{m.key==="Escape"&&n&&e()};return n?(document.body.style.overflow="hidden",document.addEventListener("keydown",h)):document.body.style.overflow="unset",()=>{document.body.style.overflow="unset",document.removeEventListener("keydown",h)}},[n,e]),!n)return null;const c={sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl"};return d.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center",children:[d.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:e}),d.jsxs("div",{className:St("relative bg-dark-sidebar rounded-lg shadow-2xl","w-full mx-4 max-h-[90vh] overflow-y-auto",c[a]),children:[(t||l)&&d.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-dark-hover",children:[d.jsx("h2",{className:"text-xl font-semibold text-dark-text",children:t}),l&&d.jsx("button",{onClick:e,className:"text-dark-muted hover:text-dark-text transition-colors",children:d.jsx(An,{size:24})})]}),d.jsx("div",{className:"p-6",children:r})]})]})},PO={premium:{id:"premium",label:"Premium Member",description:"Premium Member",icon:td,color:"#F47FFF"},admin:{id:"admin",label:"Admin",description:"Server Administrator",icon:yC,color:"#f23f42"},verified:{id:"verified",label:"Verified",description:"Verified Member",icon:iM,color:"#3ba55c"},developer:{id:"developer",label:"Developer",description:"App Developer",icon:eM,color:"#5865F2"}};class LO{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const t of this._parts)e.push(t);return VO(e).buffer}}function VO(n){let e=0;for(const a of n)e+=a.byteLength;const t=new Uint8Array(e);let r=0;for(const a of n){const l=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);t.set(l,r),r+=a.byteLength}return t}function LC(n){return new UO(n).unpack()}function VC(n){const e=new zO,t=e.pack(n);return t instanceof Promise?t.then(()=>e.getBuffer()):e.getBuffer()}class UO{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let t;if((t=e^160)<=15)return this.unpack_raw(t);if((t=e^176)<=15)return this.unpack_string(t);if((t=e^144)<=15)return this.unpack_array(t);if((t=e^128)<=15)return this.unpack_map(t);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),t=(e[0]&255)*256+(e[1]&255);return this.index+=2,t}unpack_uint32(){const e=this.read(4),t=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,t}unpack_uint64(){const e=this.read(8),t=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,t}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t}unpack_string(e){const t=this.read(e);let r=0,a="",l,c;for(;r<e;)l=t[r],l<160?(c=l,r++):(l^192)<32?(c=(l&31)<<6|t[r+1]&63,r+=2):(l^224)<16?(c=(l&15)<<12|(t[r+1]&63)<<6|t[r+2]&63,r+=3):(c=(l&7)<<18|(t[r+1]&63)<<12|(t[r+2]&63)<<6|t[r+3]&63,r+=4),a+=String.fromCodePoint(c);return this.index+=e,a}unpack_array(e){const t=new Array(e);for(let r=0;r<e;r++)t[r]=this.unpack();return t}unpack_map(e){const t={};for(let r=0;r<e;r++){const a=this.unpack();t[a]=this.unpack()}return t}unpack_float(){const e=this.unpack_uint32(),t=e>>31,r=(e>>23&255)-127,a=e&8388607|8388608;return(t===0?1:-1)*a*2**(r-23)}unpack_double(){const e=this.unpack_uint32(),t=this.unpack_uint32(),r=e>>31,a=(e>>20&2047)-1023,c=(e&1048575|1048576)*2**(a-20)+t*2**(a-52);return(r===0?1:-1)*c}read(e){const t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")}}class zO{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const t=e.constructor;if(e instanceof Array){const r=this.pack_array(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const r=e;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(t==Object||t.toString().startsWith("class")){const r=this.pack_object(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${t.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const t=e.length;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this._bufferBuilder.append(218),this.pack_uint16(t);else if(t<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(t);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const t=this._textEncoder.encode(e),r=t.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_array(e){const t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this._bufferBuilder.append(220),this.pack_uint16(t);else if(t<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(t);else throw new Error("Invalid length");const r=a=>{if(a<t){const l=this.pack(e[a]);return l instanceof Promise?l.then(()=>r(a+1)):r(a+1)}};return r(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let t=0;e<0&&(t=1,e=-e);const r=Math.floor(Math.log(e)/Math.LN2),a=e/2**r-1,l=Math.floor(a*2**52),c=2**32,h=t<<31|r+1023<<20|l/c&1048575,m=l%c;this._bufferBuilder.append(203),this.pack_int32(h),this.pack_int32(m)}pack_object(e){const t=Object.keys(e),r=t.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const a=l=>{if(l<t.length){const c=t[l];if(e.hasOwnProperty(c)){this.pack(c);const h=this.pack(e[c]);if(h instanceof Promise)return h.then(()=>a(l+1))}return a(l+1)}};return a(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const t=e&4294967295;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_uint64(e){const t=e/4294967296,r=e%2**32;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const t=Math.floor(e/4294967296),r=e%2**32;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new LO,this._textEncoder=new TextEncoder}}let UC=!0,zC=!0;function Mu(n,e,t){const r=n.match(e);return r&&r.length>=t&&parseFloat(r[t],10)}function Lo(n,e,t){if(!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype,a=r.addEventListener;r.addEventListener=function(c,h){if(c!==e)return a.apply(this,arguments);const m=g=>{const v=t(g);v&&(h.handleEvent?h.handleEvent(v):h(v))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(h,m),a.apply(this,[c,m])};const l=r.removeEventListener;r.removeEventListener=function(c,h){if(c!==e||!this._eventMap||!this._eventMap[e])return l.apply(this,arguments);if(!this._eventMap[e].has(h))return l.apply(this,arguments);const m=this._eventMap[e].get(h);return this._eventMap[e].delete(h),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,l.apply(this,[c,m])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(c){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),c&&this.addEventListener(e,this["_on"+e]=c)},enumerable:!0,configurable:!0})}function BO(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(UC=n,n?"adapter.js logging disabled":"adapter.js logging enabled")}function FO(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(zC=!n,"adapter.js deprecation warnings "+(n?"disabled":"enabled"))}function BC(){if(typeof window=="object"){if(UC)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function mb(n,e){zC&&console.warn(n+" is deprecated, please use "+e+" instead.")}function HO(n){const e={browser:null,version:null};if(typeof n>"u"||!n.navigator||!n.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:t}=n;if(t.userAgentData&&t.userAgentData.brands){const r=t.userAgentData.brands.find(a=>a.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(t.mozGetUserMedia)e.browser="firefox",e.version=parseInt(Mu(t.userAgent,/Firefox\/(\d+)\./,1));else if(t.webkitGetUserMedia||n.isSecureContext===!1&&n.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(Mu(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(n.RTCPeerConnection&&t.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(Mu(t.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=n.RTCRtpTransceiver&&"currentDirection"in n.RTCRtpTransceiver.prototype,e._safariVersion=Mu(t.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function pE(n){return Object.prototype.toString.call(n)==="[object Object]"}function FC(n){return pE(n)?Object.keys(n).reduce(function(e,t){const r=pE(n[t]),a=r?FC(n[t]):n[t],l=r&&!Object.keys(a).length;return a===void 0||l?e:Object.assign(e,{[t]:a})},{}):n}function O0(n,e,t){!e||t.has(e.id)||(t.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?O0(n,n.get(e[r]),t):r.endsWith("Ids")&&e[r].forEach(a=>{O0(n,n.get(a),t)})}))}function gE(n,e,t){const r=t?"outbound-rtp":"inbound-rtp",a=new Map;if(e===null)return a;const l=[];return n.forEach(c=>{c.type==="track"&&c.trackIdentifier===e.id&&l.push(c)}),l.forEach(c=>{n.forEach(h=>{h.type===r&&h.trackId===c.id&&O0(n,h,a)})}),a}const yE=BC;function HC(n,e){const t=n&&n.navigator;if(!t.mediaDevices)return;const r=function(h){if(typeof h!="object"||h.mandatory||h.optional)return h;const m={};return Object.keys(h).forEach(g=>{if(g==="require"||g==="advanced"||g==="mediaSource")return;const v=typeof h[g]=="object"?h[g]:{ideal:h[g]};v.exact!==void 0&&typeof v.exact=="number"&&(v.min=v.max=v.exact);const b=function(_,C){return _?_+C.charAt(0).toUpperCase()+C.slice(1):C==="deviceId"?"sourceId":C};if(v.ideal!==void 0){m.optional=m.optional||[];let _={};typeof v.ideal=="number"?(_[b("min",g)]=v.ideal,m.optional.push(_),_={},_[b("max",g)]=v.ideal,m.optional.push(_)):(_[b("",g)]=v.ideal,m.optional.push(_))}v.exact!==void 0&&typeof v.exact!="number"?(m.mandatory=m.mandatory||{},m.mandatory[b("",g)]=v.exact):["min","max"].forEach(_=>{v[_]!==void 0&&(m.mandatory=m.mandatory||{},m.mandatory[b(_,g)]=v[_])})}),h.advanced&&(m.optional=(m.optional||[]).concat(h.advanced)),m},a=function(h,m){if(e.version>=61)return m(h);if(h=JSON.parse(JSON.stringify(h)),h&&typeof h.audio=="object"){const g=function(v,b,_){b in v&&!(_ in v)&&(v[_]=v[b],delete v[b])};h=JSON.parse(JSON.stringify(h)),g(h.audio,"autoGainControl","googAutoGainControl"),g(h.audio,"noiseSuppression","googNoiseSuppression"),h.audio=r(h.audio)}if(h&&typeof h.video=="object"){let g=h.video.facingMode;g=g&&(typeof g=="object"?g:{ideal:g});const v=e.version<66;if(g&&(g.exact==="user"||g.exact==="environment"||g.ideal==="user"||g.ideal==="environment")&&!(t.mediaDevices.getSupportedConstraints&&t.mediaDevices.getSupportedConstraints().facingMode&&!v)){delete h.video.facingMode;let b;if(g.exact==="environment"||g.ideal==="environment"?b=["back","rear"]:(g.exact==="user"||g.ideal==="user")&&(b=["front"]),b)return t.mediaDevices.enumerateDevices().then(_=>{_=_.filter(R=>R.kind==="videoinput");let C=_.find(R=>b.some(I=>R.label.toLowerCase().includes(I)));return!C&&_.length&&b.includes("back")&&(C=_[_.length-1]),C&&(h.video.deviceId=g.exact?{exact:C.deviceId}:{ideal:C.deviceId}),h.video=r(h.video),yE("chrome: "+JSON.stringify(h)),m(h)})}h.video=r(h.video)}return yE("chrome: "+JSON.stringify(h)),m(h)},l=function(h){return e.version>=64?h:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[h.name]||h.name,message:h.message,constraint:h.constraint||h.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},c=function(h,m,g){a(h,v=>{t.webkitGetUserMedia(v,m,b=>{g&&g(l(b))})})};if(t.getUserMedia=c.bind(t),t.mediaDevices.getUserMedia){const h=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(m){return a(m,g=>h(g).then(v=>{if(g.audio&&!v.getAudioTracks().length||g.video&&!v.getVideoTracks().length)throw v.getTracks().forEach(b=>{b.stop()}),new DOMException("","NotFoundError");return v},v=>Promise.reject(l(v))))}}}function $C(n){n.MediaStream=n.MediaStream||n.webkitMediaStream}function qC(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("ontrack"in n.RTCPeerConnection.prototype)){Object.defineProperty(n.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)},enumerable:!0,configurable:!0});const e=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",a=>{let l;n.RTCPeerConnection.prototype.getReceivers?l=this.getReceivers().find(h=>h.track&&h.track.id===a.track.id):l={track:a.track};const c=new Event("track");c.track=a.track,c.receiver=l,c.transceiver={receiver:l},c.streams=[r.stream],this.dispatchEvent(c)}),r.stream.getTracks().forEach(a=>{let l;n.RTCPeerConnection.prototype.getReceivers?l=this.getReceivers().find(h=>h.track&&h.track.id===a.id):l={track:a};const c=new Event("track");c.track=a,c.receiver=l,c.transceiver={receiver:l},c.streams=[r.stream],this.dispatchEvent(c)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Lo(n,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function GC(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("getSenders"in n.RTCPeerConnection.prototype)&&"createDTMFSender"in n.RTCPeerConnection.prototype){const e=function(a,l){return{track:l,get dtmf(){return this._dtmf===void 0&&(l.kind==="audio"?this._dtmf=a.createDTMFSender(l):this._dtmf=null),this._dtmf},_pc:a}};if(!n.RTCPeerConnection.prototype.getSenders){n.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const a=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(h,m){let g=a.apply(this,arguments);return g||(g=e(this,h),this._senders.push(g)),g};const l=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(h){l.apply(this,arguments);const m=this._senders.indexOf(h);m!==-1&&this._senders.splice(m,1)}}const t=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(l){this._senders=this._senders||[],t.apply(this,[l]),l.getTracks().forEach(c=>{this._senders.push(e(this,c))})};const r=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(l){this._senders=this._senders||[],r.apply(this,[l]),l.getTracks().forEach(c=>{const h=this._senders.find(m=>m.track===c);h&&this._senders.splice(this._senders.indexOf(h),1)})}}else if(typeof n=="object"&&n.RTCPeerConnection&&"getSenders"in n.RTCPeerConnection.prototype&&"createDTMFSender"in n.RTCPeerConnection.prototype&&n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)){const e=n.RTCPeerConnection.prototype.getSenders;n.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(a=>a._pc=this),r},Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function YC(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender&&n.RTCRtpReceiver))return;if(!("getStats"in n.RTCRtpSender.prototype)){const t=n.RTCPeerConnection.prototype.getSenders;t&&(n.RTCPeerConnection.prototype.getSenders=function(){const l=t.apply(this,[]);return l.forEach(c=>c._pc=this),l});const r=n.RTCPeerConnection.prototype.addTrack;r&&(n.RTCPeerConnection.prototype.addTrack=function(){const l=r.apply(this,arguments);return l._pc=this,l}),n.RTCRtpSender.prototype.getStats=function(){const l=this;return this._pc.getStats().then(c=>gE(c,l.track,!0))}}if(!("getStats"in n.RTCRtpReceiver.prototype)){const t=n.RTCPeerConnection.prototype.getReceivers;t&&(n.RTCPeerConnection.prototype.getReceivers=function(){const a=t.apply(this,[]);return a.forEach(l=>l._pc=this),a}),Lo(n,"track",r=>(r.receiver._pc=r.srcElement,r)),n.RTCRtpReceiver.prototype.getStats=function(){const a=this;return this._pc.getStats().then(l=>gE(l,a.track,!1))}}if(!("getStats"in n.RTCRtpSender.prototype&&"getStats"in n.RTCRtpReceiver.prototype))return;const e=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof n.MediaStreamTrack){const r=arguments[0];let a,l,c;return this.getSenders().forEach(h=>{h.track===r&&(a?c=!0:a=h)}),this.getReceivers().forEach(h=>(h.track===r&&(l?c=!0:l=h),h.track===r)),c||a&&l?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):a?a.getStats():l?l.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function KC(n){n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(c=>this._shimmedLocalStreams[c][0])};const e=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(c,h){if(!h)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const m=e.apply(this,arguments);return this._shimmedLocalStreams[h.id]?this._shimmedLocalStreams[h.id].indexOf(m)===-1&&this._shimmedLocalStreams[h.id].push(m):this._shimmedLocalStreams[h.id]=[h,m],m};const t=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(c){this._shimmedLocalStreams=this._shimmedLocalStreams||{},c.getTracks().forEach(g=>{if(this.getSenders().find(b=>b.track===g))throw new DOMException("Track already exists.","InvalidAccessError")});const h=this.getSenders();t.apply(this,arguments);const m=this.getSenders().filter(g=>h.indexOf(g)===-1);this._shimmedLocalStreams[c.id]=[c].concat(m)};const r=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[c.id],r.apply(this,arguments)};const a=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},c&&Object.keys(this._shimmedLocalStreams).forEach(h=>{const m=this._shimmedLocalStreams[h].indexOf(c);m!==-1&&this._shimmedLocalStreams[h].splice(m,1),this._shimmedLocalStreams[h].length===1&&delete this._shimmedLocalStreams[h]}),a.apply(this,arguments)}}function QC(n,e){if(!n.RTCPeerConnection)return;if(n.RTCPeerConnection.prototype.addTrack&&e.version>=65)return KC(n);const t=n.RTCPeerConnection.prototype.getLocalStreams;n.RTCPeerConnection.prototype.getLocalStreams=function(){const v=t.apply(this);return this._reverseStreams=this._reverseStreams||{},v.map(b=>this._reverseStreams[b.id])};const r=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(v){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},v.getTracks().forEach(b=>{if(this.getSenders().find(C=>C.track===b))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[v.id]){const b=new n.MediaStream(v.getTracks());this._streams[v.id]=b,this._reverseStreams[b.id]=v,v=b}r.apply(this,[v])};const a=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(v){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},a.apply(this,[this._streams[v.id]||v]),delete this._reverseStreams[this._streams[v.id]?this._streams[v.id].id:v.id],delete this._streams[v.id]},n.RTCPeerConnection.prototype.addTrack=function(v,b){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const _=[].slice.call(arguments,1);if(_.length!==1||!_[0].getTracks().find(I=>I===v))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(I=>I.track===v))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const R=this._streams[b.id];if(R)R.addTrack(v),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const I=new n.MediaStream([v]);this._streams[b.id]=I,this._reverseStreams[I.id]=b,this.addStream(I)}return this.getSenders().find(I=>I.track===v)};function l(g,v){let b=v.sdp;return Object.keys(g._reverseStreams||[]).forEach(_=>{const C=g._reverseStreams[_],R=g._streams[C.id];b=b.replace(new RegExp(R.id,"g"),C.id)}),new RTCSessionDescription({type:v.type,sdp:b})}function c(g,v){let b=v.sdp;return Object.keys(g._reverseStreams||[]).forEach(_=>{const C=g._reverseStreams[_],R=g._streams[C.id];b=b.replace(new RegExp(C.id,"g"),R.id)}),new RTCSessionDescription({type:v.type,sdp:b})}["createOffer","createAnswer"].forEach(function(g){const v=n.RTCPeerConnection.prototype[g],b={[g](){const _=arguments;return arguments.length&&typeof arguments[0]=="function"?v.apply(this,[R=>{const I=l(this,R);_[0].apply(null,[I])},R=>{_[1]&&_[1].apply(null,R)},arguments[2]]):v.apply(this,arguments).then(R=>l(this,R))}};n.RTCPeerConnection.prototype[g]=b[g]});const h=n.RTCPeerConnection.prototype.setLocalDescription;n.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?h.apply(this,arguments):(arguments[0]=c(this,arguments[0]),h.apply(this,arguments))};const m=Object.getOwnPropertyDescriptor(n.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(n.RTCPeerConnection.prototype,"localDescription",{get(){const g=m.get.apply(this);return g.type===""?g:l(this,g)}}),n.RTCPeerConnection.prototype.removeTrack=function(v){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!v._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(v._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let _;Object.keys(this._streams).forEach(C=>{this._streams[C].getTracks().find(I=>v.track===I)&&(_=this._streams[C])}),_&&(_.getTracks().length===1?this.removeStream(this._reverseStreams[_.id]):_.removeTrack(v.track),this.dispatchEvent(new Event("negotiationneeded")))}}function P0(n,e){!n.RTCPeerConnection&&n.webkitRTCPeerConnection&&(n.RTCPeerConnection=n.webkitRTCPeerConnection),n.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const r=n.RTCPeerConnection.prototype[t],a={[t](){return arguments[0]=new(t==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};n.RTCPeerConnection.prototype[t]=a[t]})}function XC(n,e){Lo(n,"negotiationneeded",t=>{const r=t.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return t})}const vE=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:XC,shimAddTrackRemoveTrack:QC,shimAddTrackRemoveTrackWithNative:KC,shimGetSendersWithDtmf:GC,shimGetUserMedia:HC,shimMediaStream:$C,shimOnTrack:qC,shimPeerConnection:P0,shimSenderReceiverGetStats:YC},Symbol.toStringTag,{value:"Module"}));function WC(n,e){const t=n&&n.navigator,r=n&&n.MediaStreamTrack;if(t.getUserMedia=function(a,l,c){mb("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),t.mediaDevices.getUserMedia(a).then(l,c)},!(e.version>55&&"autoGainControl"in t.mediaDevices.getSupportedConstraints())){const a=function(c,h,m){h in c&&!(m in c)&&(c[m]=c[h],delete c[h])},l=t.mediaDevices.getUserMedia.bind(t.mediaDevices);if(t.mediaDevices.getUserMedia=function(c){return typeof c=="object"&&typeof c.audio=="object"&&(c=JSON.parse(JSON.stringify(c)),a(c.audio,"autoGainControl","mozAutoGainControl"),a(c.audio,"noiseSuppression","mozNoiseSuppression")),l(c)},r&&r.prototype.getSettings){const c=r.prototype.getSettings;r.prototype.getSettings=function(){const h=c.apply(this,arguments);return a(h,"mozAutoGainControl","autoGainControl"),a(h,"mozNoiseSuppression","noiseSuppression"),h}}if(r&&r.prototype.applyConstraints){const c=r.prototype.applyConstraints;r.prototype.applyConstraints=function(h){return this.kind==="audio"&&typeof h=="object"&&(h=JSON.parse(JSON.stringify(h)),a(h,"autoGainControl","mozAutoGainControl"),a(h,"noiseSuppression","mozNoiseSuppression")),c.apply(this,[h])}}}}function $O(n,e){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&(n.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const a=new DOMException("getDisplayMedia without video constraints is undefined");return a.name="NotFoundError",a.code=8,Promise.reject(a)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,n.navigator.mediaDevices.getUserMedia(r)})}function JC(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function L0(n,e){if(typeof n!="object"||!(n.RTCPeerConnection||n.mozRTCPeerConnection))return;!n.RTCPeerConnection&&n.mozRTCPeerConnection&&(n.RTCPeerConnection=n.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(a){const l=n.RTCPeerConnection.prototype[a],c={[a](){return arguments[0]=new(a==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),l.apply(this,arguments)}};n.RTCPeerConnection.prototype[a]=c[a]});const t={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[l,c,h]=arguments;return r.apply(this,[l||null]).then(m=>{if(e.version<53&&!c)try{m.forEach(g=>{g.type=t[g.type]||g.type})}catch(g){if(g.name!=="TypeError")throw g;m.forEach((v,b)=>{m.set(b,Object.assign({},v,{type:t[v.type]||v.type}))})}return m}).then(c,h)}}function ZC(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender)||n.RTCRtpSender&&"getStats"in n.RTCRtpSender.prototype)return;const e=n.RTCPeerConnection.prototype.getSenders;e&&(n.RTCPeerConnection.prototype.getSenders=function(){const a=e.apply(this,[]);return a.forEach(l=>l._pc=this),a});const t=n.RTCPeerConnection.prototype.addTrack;t&&(n.RTCPeerConnection.prototype.addTrack=function(){const a=t.apply(this,arguments);return a._pc=this,a}),n.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function ek(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender)||n.RTCRtpSender&&"getStats"in n.RTCRtpReceiver.prototype)return;const e=n.RTCPeerConnection.prototype.getReceivers;e&&(n.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(a=>a._pc=this),r}),Lo(n,"track",t=>(t.receiver._pc=t.srcElement,t)),n.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function tk(n){!n.RTCPeerConnection||"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(t){mb("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&t.getTracks().includes(r.track)&&this.removeTrack(r)})})}function nk(n){n.DataChannel&&!n.RTCDataChannel&&(n.RTCDataChannel=n.DataChannel)}function rk(n){if(!(typeof n=="object"&&n.RTCPeerConnection))return;const e=n.RTCPeerConnection.prototype.addTransceiver;e&&(n.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const a=r.length>0;a&&r.forEach(c=>{if("rid"in c&&!/^[a-z0-9]{0,16}$/i.test(c.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in c&&!(parseFloat(c.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in c&&!(parseFloat(c.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const l=e.apply(this,arguments);if(a){const{sender:c}=l,h=c.getParameters();(!("encodings"in h)||h.encodings.length===1&&Object.keys(h.encodings[0]).length===0)&&(h.encodings=r,c.sendEncodings=r,this.setParametersPromises.push(c.setParameters(h).then(()=>{delete c.sendEncodings}).catch(()=>{delete c.sendEncodings})))}return l})}function sk(n){if(!(typeof n=="object"&&n.RTCRtpSender))return;const e=n.RTCRtpSender.prototype.getParameters;e&&(n.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function ik(n){if(!(typeof n=="object"&&n.RTCPeerConnection))return;const e=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function ak(n){if(!(typeof n=="object"&&n.RTCPeerConnection))return;const e=n.RTCPeerConnection.prototype.createAnswer;n.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const bE=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:rk,shimCreateAnswer:ak,shimCreateOffer:ik,shimGetDisplayMedia:$O,shimGetParameters:sk,shimGetUserMedia:WC,shimOnTrack:JC,shimPeerConnection:L0,shimRTCDataChannel:nk,shimReceiverGetStats:ek,shimRemoveStream:tk,shimSenderGetStats:ZC},Symbol.toStringTag,{value:"Module"}));function ok(n){if(!(typeof n!="object"||!n.RTCPeerConnection)){if("getLocalStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in n.RTCPeerConnection.prototype)){const e=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(a=>e.call(this,a,r)),r.getVideoTracks().forEach(a=>e.call(this,a,r))},n.RTCPeerConnection.prototype.addTrack=function(r,...a){return a&&a.forEach(l=>{this._localStreams?this._localStreams.includes(l)||this._localStreams.push(l):this._localStreams=[l]}),e.apply(this,arguments)}}"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(t){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(t);if(r===-1)return;this._localStreams.splice(r,1);const a=t.getTracks();this.getSenders().forEach(l=>{a.includes(l.track)&&this.removeTrack(l)})})}}function lk(n){if(!(typeof n!="object"||!n.RTCPeerConnection)&&("getRemoteStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in n.RTCPeerConnection.prototype))){Object.defineProperty(n.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(t){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(a=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(a))return;this._remoteStreams.push(a);const l=new Event("addstream");l.stream=a,this.dispatchEvent(l)})})}});const e=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(a){a.streams.forEach(l=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(l)>=0)return;r._remoteStreams.push(l);const c=new Event("addstream");c.stream=l,r.dispatchEvent(c)})}),e.apply(r,arguments)}}}function ck(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const e=n.RTCPeerConnection.prototype,t=e.createOffer,r=e.createAnswer,a=e.setLocalDescription,l=e.setRemoteDescription,c=e.addIceCandidate;e.createOffer=function(g,v){const b=arguments.length>=2?arguments[2]:arguments[0],_=t.apply(this,[b]);return v?(_.then(g,v),Promise.resolve()):_},e.createAnswer=function(g,v){const b=arguments.length>=2?arguments[2]:arguments[0],_=r.apply(this,[b]);return v?(_.then(g,v),Promise.resolve()):_};let h=function(m,g,v){const b=a.apply(this,[m]);return v?(b.then(g,v),Promise.resolve()):b};e.setLocalDescription=h,h=function(m,g,v){const b=l.apply(this,[m]);return v?(b.then(g,v),Promise.resolve()):b},e.setRemoteDescription=h,h=function(m,g,v){const b=c.apply(this,[m]);return v?(b.then(g,v),Promise.resolve()):b},e.addIceCandidate=h}function uk(n){const e=n&&n.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const t=e.mediaDevices,r=t.getUserMedia.bind(t);e.mediaDevices.getUserMedia=a=>r(dk(a))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,a,l){e.mediaDevices.getUserMedia(r).then(a,l)}).bind(e))}function dk(n){return n&&n.video!==void 0?Object.assign({},n,{video:FC(n.video)}):n}function hk(n){if(!n.RTCPeerConnection)return;const e=n.RTCPeerConnection;n.RTCPeerConnection=function(r,a){if(r&&r.iceServers){const l=[];for(let c=0;c<r.iceServers.length;c++){let h=r.iceServers[c];h.urls===void 0&&h.url?(mb("RTCIceServer.url","RTCIceServer.urls"),h=JSON.parse(JSON.stringify(h)),h.urls=h.url,delete h.url,l.push(h)):l.push(r.iceServers[c])}r.iceServers=l}return new e(r,a)},n.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(n.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function fk(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function mk(n){const e=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const a=this.getTransceivers().find(c=>c.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):r.offerToReceiveAudio===!0&&!a&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const l=this.getTransceivers().find(c=>c.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&l?l.direction==="sendrecv"?l.setDirection?l.setDirection("sendonly"):l.direction="sendonly":l.direction==="recvonly"&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive"):r.offerToReceiveVideo===!0&&!l&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function pk(n){typeof n!="object"||n.AudioContext||(n.AudioContext=n.webkitAudioContext)}const xE=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:pk,shimCallbacksAPI:ck,shimConstraints:dk,shimCreateOfferLegacy:mk,shimGetUserMedia:uk,shimLocalStreamsAPI:ok,shimRTCIceServerUrls:hk,shimRemoteStreamsAPI:lk,shimTrackEventTransceiver:fk},Symbol.toStringTag,{value:"Module"}));var Vy={exports:{}},_E;function qO(){return _E||(_E=1,(function(n){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(t){return t.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(t){return t.split(`
m=`).map((a,l)=>(l>0?"m="+a:a).trim()+`\r
`)},e.getDescription=function(t){const r=e.splitSections(t);return r&&r[0]},e.getMediaSections=function(t){const r=e.splitSections(t);return r.shift(),r},e.matchPrefix=function(t,r){return e.splitLines(t).filter(a=>a.indexOf(r)===0)},e.parseCandidate=function(t){let r;t.indexOf("a=candidate:")===0?r=t.substring(12).split(" "):r=t.substring(10).split(" ");const a={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let l=8;l<r.length;l+=2)switch(r[l]){case"raddr":a.relatedAddress=r[l+1];break;case"rport":a.relatedPort=parseInt(r[l+1],10);break;case"tcptype":a.tcpType=r[l+1];break;case"ufrag":a.ufrag=r[l+1],a.usernameFragment=r[l+1];break;default:a[r[l]]===void 0&&(a[r[l]]=r[l+1]);break}return a},e.writeCandidate=function(t){const r=[];r.push(t.foundation);const a=t.component;a==="rtp"?r.push(1):a==="rtcp"?r.push(2):r.push(a),r.push(t.protocol.toUpperCase()),r.push(t.priority),r.push(t.address||t.ip),r.push(t.port);const l=t.type;return r.push("typ"),r.push(l),l!=="host"&&t.relatedAddress&&t.relatedPort&&(r.push("raddr"),r.push(t.relatedAddress),r.push("rport"),r.push(t.relatedPort)),t.tcpType&&t.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(t.tcpType)),(t.usernameFragment||t.ufrag)&&(r.push("ufrag"),r.push(t.usernameFragment||t.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(t){return t.substring(14).split(" ")},e.parseRtpMap=function(t){let r=t.substring(9).split(" ");const a={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),a.name=r[0],a.clockRate=parseInt(r[1],10),a.channels=r.length===3?parseInt(r[2],10):1,a.numChannels=a.channels,a},e.writeRtpMap=function(t){let r=t.payloadType;t.preferredPayloadType!==void 0&&(r=t.preferredPayloadType);const a=t.channels||t.numChannels||1;return"a=rtpmap:"+r+" "+t.name+"/"+t.clockRate+(a!==1?"/"+a:"")+`\r
`},e.parseExtmap=function(t){const r=t.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&t.direction!=="sendrecv"?"/"+t.direction:"")+" "+t.uri+(t.attributes?" "+t.attributes:"")+`\r
`},e.parseFmtp=function(t){const r={};let a;const l=t.substring(t.indexOf(" ")+1).split(";");for(let c=0;c<l.length;c++)a=l[c].trim().split("="),r[a[0].trim()]=a[1];return r},e.writeFmtp=function(t){let r="",a=t.payloadType;if(t.preferredPayloadType!==void 0&&(a=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){const l=[];Object.keys(t.parameters).forEach(c=>{t.parameters[c]!==void 0?l.push(c+"="+t.parameters[c]):l.push(c)}),r+="a=fmtp:"+a+" "+l.join(";")+`\r
`}return r},e.parseRtcpFb=function(t){const r=t.substring(t.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(t){let r="",a=t.payloadType;return t.preferredPayloadType!==void 0&&(a=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach(l=>{r+="a=rtcp-fb:"+a+" "+l.type+(l.parameter&&l.parameter.length?" "+l.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(t){const r=t.indexOf(" "),a={ssrc:parseInt(t.substring(7,r),10)},l=t.indexOf(":",r);return l>-1?(a.attribute=t.substring(r+1,l),a.value=t.substring(l+1)):a.attribute=t.substring(r+1),a},e.parseSsrcGroup=function(t){const r=t.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(a=>parseInt(a,10))}},e.getMid=function(t){const r=e.matchPrefix(t,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(t){const r=t.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(t,r){return{role:"auto",fingerprints:e.matchPrefix(t+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(t,r){let a="a=setup:"+r+`\r
`;return t.fingerprints.forEach(l=>{a+="a=fingerprint:"+l.algorithm+" "+l.value+`\r
`}),a},e.parseCryptoLine=function(t){const r=t.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(t){return"a=crypto:"+t.tag+" "+t.cryptoSuite+" "+(typeof t.keyParams=="object"?e.writeCryptoKeyParams(t.keyParams):t.keyParams)+(t.sessionParams?" "+t.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(t){if(t.indexOf("inline:")!==0)return null;const r=t.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(t){return t.keyMethod+":"+t.keySalt+(t.lifeTime?"|"+t.lifeTime:"")+(t.mkiValue&&t.mkiLength?"|"+t.mkiValue+":"+t.mkiLength:"")},e.getCryptoParameters=function(t,r){return e.matchPrefix(t+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(t,r){const a=e.matchPrefix(t+r,"a=ice-ufrag:")[0],l=e.matchPrefix(t+r,"a=ice-pwd:")[0];return a&&l?{usernameFragment:a.substring(12),password:l.substring(10)}:null},e.writeIceParameters=function(t){let r="a=ice-ufrag:"+t.usernameFragment+`\r
a=ice-pwd:`+t.password+`\r
`;return t.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(t){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},l=e.splitLines(t)[0].split(" ");r.profile=l[2];for(let h=3;h<l.length;h++){const m=l[h],g=e.matchPrefix(t,"a=rtpmap:"+m+" ")[0];if(g){const v=e.parseRtpMap(g),b=e.matchPrefix(t,"a=fmtp:"+m+" ");switch(v.parameters=b.length?e.parseFmtp(b[0]):{},v.rtcpFeedback=e.matchPrefix(t,"a=rtcp-fb:"+m+" ").map(e.parseRtcpFb),r.codecs.push(v),v.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(v.name.toUpperCase());break}}}e.matchPrefix(t,"a=extmap:").forEach(h=>{r.headerExtensions.push(e.parseExtmap(h))});const c=e.matchPrefix(t,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(h=>{c.forEach(m=>{h.rtcpFeedback.find(v=>v.type===m.type&&v.parameter===m.parameter)||h.rtcpFeedback.push(m)})}),r},e.writeRtpDescription=function(t,r){let a="";a+="m="+t+" ",a+=r.codecs.length>0?"9":"0",a+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",a+=r.codecs.map(c=>c.preferredPayloadType!==void 0?c.preferredPayloadType:c.payloadType).join(" ")+`\r
`,a+=`c=IN IP4 0.0.0.0\r
`,a+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(c=>{a+=e.writeRtpMap(c),a+=e.writeFmtp(c),a+=e.writeRtcpFb(c)});let l=0;return r.codecs.forEach(c=>{c.maxptime>l&&(l=c.maxptime)}),l>0&&(a+="a=maxptime:"+l+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(c=>{a+=e.writeExtmap(c)}),a},e.parseRtpEncodingParameters=function(t){const r=[],a=e.parseRtpParameters(t),l=a.fecMechanisms.indexOf("RED")!==-1,c=a.fecMechanisms.indexOf("ULPFEC")!==-1,h=e.matchPrefix(t,"a=ssrc:").map(_=>e.parseSsrcMedia(_)).filter(_=>_.attribute==="cname"),m=h.length>0&&h[0].ssrc;let g;const v=e.matchPrefix(t,"a=ssrc-group:FID").map(_=>_.substring(17).split(" ").map(R=>parseInt(R,10)));v.length>0&&v[0].length>1&&v[0][0]===m&&(g=v[0][1]),a.codecs.forEach(_=>{if(_.name.toUpperCase()==="RTX"&&_.parameters.apt){let C={ssrc:m,codecPayloadType:parseInt(_.parameters.apt,10)};m&&g&&(C.rtx={ssrc:g}),r.push(C),l&&(C=JSON.parse(JSON.stringify(C)),C.fec={ssrc:m,mechanism:c?"red+ulpfec":"red"},r.push(C))}}),r.length===0&&m&&r.push({ssrc:m});let b=e.matchPrefix(t,"b=");return b.length&&(b[0].indexOf("b=TIAS:")===0?b=parseInt(b[0].substring(7),10):b[0].indexOf("b=AS:")===0?b=parseInt(b[0].substring(5),10)*1e3*.95-2e3*8:b=void 0,r.forEach(_=>{_.maxBitrate=b})),r},e.parseRtcpParameters=function(t){const r={},a=e.matchPrefix(t,"a=ssrc:").map(h=>e.parseSsrcMedia(h)).filter(h=>h.attribute==="cname")[0];a&&(r.cname=a.value,r.ssrc=a.ssrc);const l=e.matchPrefix(t,"a=rtcp-rsize");r.reducedSize=l.length>0,r.compound=l.length===0;const c=e.matchPrefix(t,"a=rtcp-mux");return r.mux=c.length>0,r},e.writeRtcpParameters=function(t){let r="";return t.reducedSize&&(r+=`a=rtcp-rsize\r
`),t.mux&&(r+=`a=rtcp-mux\r
`),t.ssrc!==void 0&&t.cname&&(r+="a=ssrc:"+t.ssrc+" cname:"+t.cname+`\r
`),r},e.parseMsid=function(t){let r;const a=e.matchPrefix(t,"a=msid:");if(a.length===1)return r=a[0].substring(7).split(" "),{stream:r[0],track:r[1]};const l=e.matchPrefix(t,"a=ssrc:").map(c=>e.parseSsrcMedia(c)).filter(c=>c.attribute==="msid");if(l.length>0)return r=l[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(t){const r=e.parseMLine(t),a=e.matchPrefix(t,"a=max-message-size:");let l;a.length>0&&(l=parseInt(a[0].substring(19),10)),isNaN(l)&&(l=65536);const c=e.matchPrefix(t,"a=sctp-port:");if(c.length>0)return{port:parseInt(c[0].substring(12),10),protocol:r.fmt,maxMessageSize:l};const h=e.matchPrefix(t,"a=sctpmap:");if(h.length>0){const m=h[0].substring(10).split(" ");return{port:parseInt(m[0],10),protocol:m[1],maxMessageSize:l}}},e.writeSctpDescription=function(t,r){let a=[];return t.protocol!=="DTLS/SCTP"?a=["m="+t.kind+" 9 "+t.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:a=["m="+t.kind+" 9 "+t.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&a.push("a=max-message-size:"+r.maxMessageSize+`\r
`),a.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(t,r,a){let l;const c=r!==void 0?r:2;return t?l=t:l=e.generateSessionId(),`v=0\r
o=`+(a||"thisisadapterortc")+" "+l+" "+c+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(t,r){const a=e.splitLines(t);for(let l=0;l<a.length;l++)switch(a[l]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return a[l].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(t){return e.splitLines(t)[0].split(" ")[0].substring(2)},e.isRejected=function(t){return t.split(" ",2)[1]==="0"},e.parseMLine=function(t){const a=e.splitLines(t)[0].substring(2).split(" ");return{kind:a[0],port:parseInt(a[1],10),protocol:a[2],fmt:a.slice(3).join(" ")}},e.parseOLine=function(t){const a=e.matchPrefix(t,"o=")[0].substring(2).split(" ");return{username:a[0],sessionId:a[1],sessionVersion:parseInt(a[2],10),netType:a[3],addressType:a[4],address:a[5]}},e.isValidSDP=function(t){if(typeof t!="string"||t.length===0)return!1;const r=e.splitLines(t);for(let a=0;a<r.length;a++)if(r[a].length<2||r[a].charAt(1)!=="=")return!1;return!0},n.exports=e})(Vy)),Vy.exports}var gk=qO();const $l=ud(gk),GO=HR({__proto__:null,default:$l},[gk]);function Df(n){if(!n.RTCIceCandidate||n.RTCIceCandidate&&"foundation"in n.RTCIceCandidate.prototype)return;const e=n.RTCIceCandidate;n.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const a=new e(r),l=$l.parseCandidate(r.candidate);for(const c in l)c in a||Object.defineProperty(a,c,{value:l[c]});return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new e(r)},n.RTCIceCandidate.prototype=e.prototype,Lo(n,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new n.RTCIceCandidate(t.candidate),writable:"false"}),t))}function V0(n){!n.RTCIceCandidate||n.RTCIceCandidate&&"relayProtocol"in n.RTCIceCandidate.prototype||Lo(n,"icecandidate",e=>{if(e.candidate){const t=$l.parseCandidate(e.candidate.candidate);t.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e})}function Mf(n,e){if(!n.RTCPeerConnection)return;"sctp"in n.RTCPeerConnection.prototype||Object.defineProperty(n.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const t=function(h){if(!h||!h.sdp)return!1;const m=$l.splitSections(h.sdp);return m.shift(),m.some(g=>{const v=$l.parseMLine(g);return v&&v.kind==="application"&&v.protocol.indexOf("SCTP")!==-1})},r=function(h){const m=h.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(m===null||m.length<2)return-1;const g=parseInt(m[1],10);return g!==g?-1:g},a=function(h){let m=65536;return e.browser==="firefox"&&(e.version<57?h===-1?m=16384:m=2147483637:e.version<60?m=e.version===57?65535:65536:m=2147483637),m},l=function(h,m){let g=65536;e.browser==="firefox"&&e.version===57&&(g=65535);const v=$l.matchPrefix(h.sdp,"a=max-message-size:");return v.length>0?g=parseInt(v[0].substring(19),10):e.browser==="firefox"&&m!==-1&&(g=2147483637),g},c=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:m}=this.getConfiguration();m==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(t(arguments[0])){const m=r(arguments[0]),g=a(m),v=l(arguments[0],m);let b;g===0&&v===0?b=Number.POSITIVE_INFINITY:g===0||v===0?b=Math.max(g,v):b=Math.min(g,v);const _={};Object.defineProperty(_,"maxMessageSize",{get(){return b}}),this._sctp=_}return c.apply(this,arguments)}}function Of(n){if(!(n.RTCPeerConnection&&"createDataChannel"in n.RTCPeerConnection.prototype))return;function e(r,a){const l=r.send;r.send=function(){const h=arguments[0],m=h.length||h.size||h.byteLength;if(r.readyState==="open"&&a.sctp&&m>a.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+a.sctp.maxMessageSize+" bytes)");return l.apply(r,arguments)}}const t=n.RTCPeerConnection.prototype.createDataChannel;n.RTCPeerConnection.prototype.createDataChannel=function(){const a=t.apply(this,arguments);return e(a,this),a},Lo(n,"datachannel",r=>(e(r.channel,r.target),r))}function U0(n){if(!n.RTCPeerConnection||"connectionState"in n.RTCPeerConnection.prototype)return;const e=n.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(t){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),t&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=t)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(t=>{const r=e[t];e[t]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=a=>{const l=a.target;if(l._lastConnectionState!==l.connectionState){l._lastConnectionState=l.connectionState;const c=new Event("connectionstatechange",a);l.dispatchEvent(c)}return a},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function z0(n,e){if(!n.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const t=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(a){if(a&&a.sdp&&a.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const l=a.sdp.split(`
`).filter(c=>c.trim()!=="a=extmap-allow-mixed").join(`
`);n.RTCSessionDescription&&a instanceof n.RTCSessionDescription?arguments[0]=new n.RTCSessionDescription({type:a.type,sdp:l}):a.sdp=l}return t.apply(this,arguments)}}function Pf(n,e){if(!(n.RTCPeerConnection&&n.RTCPeerConnection.prototype))return;const t=n.RTCPeerConnection.prototype.addIceCandidate;!t||t.length===0||(n.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Lf(n,e){if(!(n.RTCPeerConnection&&n.RTCPeerConnection.prototype))return;const t=n.RTCPeerConnection.prototype.setLocalDescription;!t||t.length===0||(n.RTCPeerConnection.prototype.setLocalDescription=function(){let a=arguments[0]||{};if(typeof a!="object"||a.type&&a.sdp)return t.apply(this,arguments);if(a={type:a.type,sdp:a.sdp},!a.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":a.type="offer";break;default:a.type="answer";break}return a.sdp||a.type!=="offer"&&a.type!=="answer"?t.apply(this,[a]):(a.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(c=>t.apply(this,[c]))})}const YO=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:z0,shimAddIceCandidateNullOrEmpty:Pf,shimConnectionState:U0,shimMaxMessageSize:Mf,shimParameterlessSetLocalDescription:Lf,shimRTCIceCandidate:Df,shimRTCIceCandidateRelayProtocol:V0,shimSendThrowTypeError:Of},Symbol.toStringTag,{value:"Module"}));function KO({window:n}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const t=BC,r=HO(n),a={browserDetails:r,commonShim:YO,extractVersion:Mu,disableLog:BO,disableWarnings:FO,sdp:GO};switch(r.browser){case"chrome":if(!vE||!P0||!e.shimChrome)return t("Chrome shim is not included in this adapter release."),a;if(r.version===null)return t("Chrome shim can not determine version, not shimming."),a;t("adapter.js shimming chrome."),a.browserShim=vE,Pf(n,r),Lf(n),HC(n,r),$C(n),P0(n,r),qC(n),QC(n,r),GC(n),YC(n),XC(n,r),Df(n),V0(n),U0(n),Mf(n,r),Of(n),z0(n,r);break;case"firefox":if(!bE||!L0||!e.shimFirefox)return t("Firefox shim is not included in this adapter release."),a;t("adapter.js shimming firefox."),a.browserShim=bE,Pf(n,r),Lf(n),WC(n,r),L0(n,r),JC(n),tk(n),ZC(n),ek(n),nk(n),rk(n),sk(n),ik(n),ak(n),Df(n),U0(n),Mf(n,r),Of(n);break;case"safari":if(!xE||!e.shimSafari)return t("Safari shim is not included in this adapter release."),a;t("adapter.js shimming safari."),a.browserShim=xE,Pf(n,r),Lf(n),hk(n),mk(n),ck(n),ok(n),lk(n),fk(n),uk(n),pk(n),Df(n),V0(n),Mf(n,r),Of(n),z0(n,r);break;default:t("Unsupported browser!");break}return a}const wE=KO({window:typeof window>"u"?void 0:window});function Vo(n,e,t,r){Object.defineProperty(n,e,{get:t,set:r,enumerable:!0,configurable:!0})}class yk{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const t=[],r=e.byteLength,a=Math.ceil(r/this.chunkedMTU);let l=0,c=0;for(;c<r;){const h=Math.min(r,c+this.chunkedMTU),m=e.slice(c,h),g={__peerData:this._dataCount,n:l,data:m,total:a};t.push(g),c=h,l++}return this._dataCount++,t}}}function QO(n){let e=0;for(const a of n)e+=a.byteLength;const t=new Uint8Array(e);let r=0;for(const a of n)t.set(a,r),r+=a.byteLength;return t}const Uy=wE.default||wE,_u=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const n=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(n)?n==="chrome"?e>=this.minChromeVersion:n==="firefox"?e>=this.minFirefoxVersion:n==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return Uy.browserDetails.browser}getVersion(){return Uy.browserDetails.version||0}isUnifiedPlanSupported(){const n=this.getBrowser(),e=Uy.browserDetails.version||0;if(n==="chrome"&&e<this.minChromeVersion)return!1;if(n==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let t,r=!1;try{t=new RTCPeerConnection,t.addTransceiver("audio"),r=!0}catch{}finally{t&&t.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},XO=n=>!n||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(n),vk=()=>Math.random().toString(36).slice(2),EE={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class WO extends yk{noop(){}blobToArrayBuffer(e,t){const r=new FileReader;return r.onload=function(a){a.target&&t(a.target.result)},r.readAsArrayBuffer(e),r}binaryStringToArrayBuffer(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r)&255;return t.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=EE,this.browser=_u.getBrowser(),this.browserVersion=_u.getVersion(),this.pack=VC,this.unpack=LC,this.supports=(function(){const t={browser:_u.isBrowserSupported(),webRTC:_u.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;let r;try{r=new RTCPeerConnection(EE),t.audioVideo=!0;let a;try{a=r.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!a.ordered;try{a.binaryType="blob",t.binaryBlob=!_u.isIOS}catch{}}catch{}finally{a&&a.close()}}catch{}finally{r&&r.close()}return t})(),this.validateId=XO,this.randomToken=vk}}const cr=new WO,JO="PeerJS: ";class ZO{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...t){const r=[JO,...t];for(const a in r)r[a]instanceof Error&&(r[a]="("+r[a].name+") "+r[a].message);e>=3?console.log(...r):e>=2?console.warn("WARNING",...r):e>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var Ue=new ZO,pb={},eP=Object.prototype.hasOwnProperty,Jn="~";function rd(){}Object.create&&(rd.prototype=Object.create(null),new rd().__proto__||(Jn=!1));function tP(n,e,t){this.fn=n,this.context=e,this.once=t||!1}function bk(n,e,t,r,a){if(typeof t!="function")throw new TypeError("The listener must be a function");var l=new tP(t,r||n,a),c=Jn?Jn+e:e;return n._events[c]?n._events[c].fn?n._events[c]=[n._events[c],l]:n._events[c].push(l):(n._events[c]=l,n._eventsCount++),n}function Vf(n,e){--n._eventsCount===0?n._events=new rd:delete n._events[e]}function Yn(){this._events=new rd,this._eventsCount=0}Yn.prototype.eventNames=function(){var e=[],t,r;if(this._eventsCount===0)return e;for(r in t=this._events)eP.call(t,r)&&e.push(Jn?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};Yn.prototype.listeners=function(e){var t=Jn?Jn+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var a=0,l=r.length,c=new Array(l);a<l;a++)c[a]=r[a].fn;return c};Yn.prototype.listenerCount=function(e){var t=Jn?Jn+e:e,r=this._events[t];return r?r.fn?1:r.length:0};Yn.prototype.emit=function(e,t,r,a,l,c){var h=Jn?Jn+e:e;if(!this._events[h])return!1;var m=this._events[h],g=arguments.length,v,b;if(m.fn){switch(m.once&&this.removeListener(e,m.fn,void 0,!0),g){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,t),!0;case 3:return m.fn.call(m.context,t,r),!0;case 4:return m.fn.call(m.context,t,r,a),!0;case 5:return m.fn.call(m.context,t,r,a,l),!0;case 6:return m.fn.call(m.context,t,r,a,l,c),!0}for(b=1,v=new Array(g-1);b<g;b++)v[b-1]=arguments[b];m.fn.apply(m.context,v)}else{var _=m.length,C;for(b=0;b<_;b++)switch(m[b].once&&this.removeListener(e,m[b].fn,void 0,!0),g){case 1:m[b].fn.call(m[b].context);break;case 2:m[b].fn.call(m[b].context,t);break;case 3:m[b].fn.call(m[b].context,t,r);break;case 4:m[b].fn.call(m[b].context,t,r,a);break;default:if(!v)for(C=1,v=new Array(g-1);C<g;C++)v[C-1]=arguments[C];m[b].fn.apply(m[b].context,v)}}return!0};Yn.prototype.on=function(e,t,r){return bk(this,e,t,r,!1)};Yn.prototype.once=function(e,t,r){return bk(this,e,t,r,!0)};Yn.prototype.removeListener=function(e,t,r,a){var l=Jn?Jn+e:e;if(!this._events[l])return this;if(!t)return Vf(this,l),this;var c=this._events[l];if(c.fn)c.fn===t&&(!a||c.once)&&(!r||c.context===r)&&Vf(this,l);else{for(var h=0,m=[],g=c.length;h<g;h++)(c[h].fn!==t||a&&!c[h].once||r&&c[h].context!==r)&&m.push(c[h]);m.length?this._events[l]=m.length===1?m[0]:m:Vf(this,l)}return this};Yn.prototype.removeAllListeners=function(e){var t;return e?(t=Jn?Jn+e:e,this._events[t]&&Vf(this,t)):(this._events=new rd,this._eventsCount=0),this};Yn.prototype.off=Yn.prototype.removeListener;Yn.prototype.addListener=Yn.prototype.on;Yn.prefixed=Jn;Yn.EventEmitter=Yn;pb=Yn;var Uo={};Vo(Uo,"ConnectionType",()=>Ea);Vo(Uo,"PeerErrorType",()=>mn);Vo(Uo,"BaseConnectionErrorType",()=>B0);Vo(Uo,"DataConnectionErrorType",()=>gb);Vo(Uo,"SerializationType",()=>sp);Vo(Uo,"SocketEventType",()=>ya);Vo(Uo,"ServerMessageType",()=>$n);var Ea=(function(n){return n.Data="data",n.Media="media",n})({}),mn=(function(n){return n.BrowserIncompatible="browser-incompatible",n.Disconnected="disconnected",n.InvalidID="invalid-id",n.InvalidKey="invalid-key",n.Network="network",n.PeerUnavailable="peer-unavailable",n.SslUnavailable="ssl-unavailable",n.ServerError="server-error",n.SocketError="socket-error",n.SocketClosed="socket-closed",n.UnavailableID="unavailable-id",n.WebRTC="webrtc",n})({}),B0=(function(n){return n.NegotiationFailed="negotiation-failed",n.ConnectionClosed="connection-closed",n})({}),gb=(function(n){return n.NotOpenYet="not-open-yet",n.MessageToBig="message-too-big",n})({}),sp=(function(n){return n.Binary="binary",n.BinaryUTF8="binary-utf8",n.JSON="json",n.None="raw",n})({}),ya=(function(n){return n.Message="message",n.Disconnected="disconnected",n.Error="error",n.Close="close",n})({}),$n=(function(n){return n.Heartbeat="HEARTBEAT",n.Candidate="CANDIDATE",n.Offer="OFFER",n.Answer="ANSWER",n.Open="OPEN",n.Error="ERROR",n.IdTaken="ID-TAKEN",n.InvalidKey="INVALID-KEY",n.Leave="LEAVE",n.Expire="EXPIRE",n})({});const xk="1.5.5";class nP extends pb.EventEmitter{constructor(e,t,r,a,l,c=5e3){super(),this.pingInterval=c,this._disconnected=!0,this._messagesQueue=[];const h=e?"wss://":"ws://";this._baseUrl=h+t+":"+r+a+"peerjs?key="+l}start(e,t){this._id=e;const r=`${this._baseUrl}&id=${e}&token=${t}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+xk),this._disconnected=!1,this._socket.onmessage=a=>{let l;try{l=JSON.parse(a.data),Ue.log("Server message received:",l)}catch{Ue.log("Invalid server message",a.data);return}this.emit(ya.Message,l)},this._socket.onclose=a=>{this._disconnected||(Ue.log("Socket closed.",a),this._cleanup(),this._disconnected=!0,this.emit(ya.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),Ue.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){Ue.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:$n.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const t of e)this.send(t)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(ya.Error,"Invalid message");return}if(!this._wsOpen())return;const t=JSON.stringify(e);this._socket.send(t)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class _k{constructor(e){this.connection=e}startConnection(e){const t=this._startPeerConnection();if(this.connection.peerConnection=t,this.connection.type===Ea.Media&&e._stream&&this._addTracksToConnection(e._stream,t),e.originator){const r=this.connection,a={ordered:!!e.reliable},l=t.createDataChannel(r.label,a);r._initializeDataChannel(l),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){Ue.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const t=this.connection.peer,r=this.connection.connectionId,a=this.connection.type,l=this.connection.provider;Ue.log("Listening for ICE candidates."),e.onicecandidate=c=>{!c.candidate||!c.candidate.candidate||(Ue.log(`Received ICE candidates for ${t}:`,c.candidate),l.socket.send({type:$n.Candidate,payload:{candidate:c.candidate,type:a,connectionId:r},dst:t}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":Ue.log("iceConnectionState is failed, closing connections to "+t),this.connection.emitError(B0.NegotiationFailed,"Negotiation of connection to "+t+" failed."),this.connection.close();break;case"closed":Ue.log("iceConnectionState is closed, closing connections to "+t),this.connection.emitError(B0.ConnectionClosed,"Connection to "+t+" closed."),this.connection.close();break;case"disconnected":Ue.log("iceConnectionState changed to disconnected on the connection with "+t);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},Ue.log("Listening for data channel"),e.ondatachannel=c=>{Ue.log("Received data channel");const h=c.channel;l.getConnection(t,r)._initializeDataChannel(h)},Ue.log("Listening for remote stream"),e.ontrack=c=>{Ue.log("Received remote stream");const h=c.streams[0],m=l.getConnection(t,r);if(m.type===Ea.Media){const g=m;this._addStreamToMediaConnection(h,g)}}}cleanup(){Ue.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const t=e.signalingState!=="closed";let r=!1;const a=this.connection.dataChannel;a&&(r=!!a.readyState&&a.readyState!=="closed"),(t||r)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const r=await e.createOffer(this.connection.options.constraints);Ue.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),Ue.log("Set localDescription:",r,`for:${this.connection.peer}`);let a={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Ea.Data){const l=this.connection;a={...a,label:l.label,reliable:l.reliable,serialization:l.serialization}}t.socket.send({type:$n.Offer,payload:a,dst:this.connection.peer})}catch(a){a!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(t.emitError(mn.WebRTC,a),Ue.log("Failed to setLocalDescription, ",a))}}catch(r){t.emitError(mn.WebRTC,r),Ue.log("Failed to createOffer, ",r)}}async _makeAnswer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const r=await e.createAnswer();Ue.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),Ue.log("Set localDescription:",r,`for:${this.connection.peer}`),t.socket.send({type:$n.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(a){t.emitError(mn.WebRTC,a),Ue.log("Failed to setLocalDescription, ",a)}}catch(r){t.emitError(mn.WebRTC,r),Ue.log("Failed to create answer, ",r)}}async handleSDP(e,t){t=new RTCSessionDescription(t);const r=this.connection.peerConnection,a=this.connection.provider;Ue.log("Setting remote description",t);const l=this;try{await r.setRemoteDescription(t),Ue.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await l._makeAnswer()}catch(c){a.emitError(mn.WebRTC,c),Ue.log("Failed to setRemoteDescription, ",c)}}async handleCandidate(e){Ue.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),Ue.log(`Added ICE candidate for:${this.connection.peer}`)}catch(t){this.connection.provider.emitError(mn.WebRTC,t),Ue.log("Failed to handleCandidate, ",t)}}_addTracksToConnection(e,t){if(Ue.log(`add tracks from stream ${e.id} to peer connection`),!t.addTrack)return Ue.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(r=>{t.addTrack(r,e)})}_addStreamToMediaConnection(e,t){Ue.log(`add stream ${e.id} to media connection ${t.connectionId}`),t.addStream(e)}}class wk extends pb.EventEmitter{emitError(e,t){Ue.error("Error:",t),this.emit("error",new rP(`${e}`,t))}}class rP extends Error{constructor(e,t){typeof t=="string"?super(t):(super(),Object.assign(this,t)),this.type=e}}class Ek extends wk{get open(){return this._open}constructor(e,t,r){super(),this.peer=e,this.provider=t,this.options=r,this._open=!1,this.metadata=r.metadata}}class xm extends Ek{static#e=this.ID_PREFIX="mc_";get type(){return Ea.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,t,r){super(e,t,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||xm.ID_PREFIX+cr.randomToken(),this._negotiator=new _k(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{Ue.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{Ue.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){Ue.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const t=e.type,r=e.payload;switch(e.type){case $n.Answer:this._negotiator.handleSDP(t,r.sdp),this._open=!0;break;case $n.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:Ue.warn(`Unrecognized message type:${t} from peer:${this.peer}`);break}}answer(e,t={}){if(this._localStream){Ue.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,t&&t.sdpTransform&&(this.options.sdpTransform=t.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const r=this.provider._getMessages(this.connectionId);for(const a of r)this.handleMessage(a);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class sP{constructor(e){this._options=e}_buildRequest(e){const t=this._options.secure?"https":"http",{host:r,port:a,path:l,key:c}=this._options,h=new URL(`${t}://${r}:${a}${l}${c}/${e}`);return h.searchParams.set("ts",`${Date.now()}${Math.random()}`),h.searchParams.set("version",xk),fetch(h.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){Ue.error("Error retrieving ID",e);let t="";throw this._options.path==="/"&&this._options.host!==cr.CLOUD_HOST&&(t=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+t)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let t="";throw this._options.host===cr.CLOUD_HOST?t="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":t="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+t)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw Ue.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}class _m extends Ek{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return Ea.Data}constructor(e,t,r){super(e,t,r),this.connectionId=this.options.connectionId||_m.ID_PREFIX+vk(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new _k(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{Ue.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=t=>{Ue.log(`DC#${this.connectionId} dc onmessage:`,t.data)},this.dataChannel.onclose=()=>{Ue.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,t=!1){if(!this.open){this.emitError(gb.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,t)}async handleMessage(e){const t=e.payload;switch(e.type){case $n.Answer:await this._negotiator.handleSDP(e.type,t.sdp);break;case $n.Candidate:await this._negotiator.handleCandidate(t.candidate);break;default:Ue.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}}class yb extends _m{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",t=>this._handleDataMessage(t))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>_m.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(t){return Ue.error(`DC#:${this.connectionId} Error when sending:`,t),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class zy extends yb{close(e){super.close(e),this._chunkedData={}}constructor(e,t,r){super(e,t,r),this.chunker=new yk,this.serialization=sp.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const t=LC(e),r=t.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(t);return}this.emit("data",t)}_handleChunk(e){const t=e.__peerData,r=this._chunkedData[t]||{data:[],count:0,total:e.total};if(r.data[e.n]=new Uint8Array(e.data),r.count++,this._chunkedData[t]=r,r.total===r.count){delete this._chunkedData[t];const a=QO(r.data);this._handleDataMessage({data:a})}}_send(e,t){const r=VC(e);if(r instanceof Promise)return this._send_blob(r);if(!t&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(e){const t=await e;if(t.byteLength>this.chunker.chunkedMTU){this._sendChunks(t);return}this._bufferedSend(t)}_sendChunks(e){const t=this.chunker.chunk(e);Ue.log(`DC#${this.connectionId} Try to send ${t.length} chunks...`);for(const r of t)this.send(r,!0)}}class iP extends yb{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,t){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=sp.None}}class aP extends yb{_handleDataMessage({data:e}){const t=this.parse(this.decoder.decode(e)),r=t.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",t)}_send(e,t){const r=this.encoder.encode(this.stringify(e));if(r.byteLength>=cr.chunkedMTU){this.emitError(gb.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...e){super(...e),this.serialization=sp.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class vb extends wk{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[t,r]of this._connections)e[t]=r;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,t){super(),this._serializers={raw:iP,json:aP,binary:zy,"binary-utf8":zy,default:zy},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(e&&e.constructor==Object?t=e:e&&(r=e.toString()),t={debug:0,host:cr.CLOUD_HOST,port:cr.CLOUD_PORT,path:"/",key:vb.DEFAULT_KEY,token:cr.randomToken(),config:cr.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...t},this._options=t,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==cr.CLOUD_HOST?this._options.secure=cr.isSecure():this._options.host==cr.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&Ue.setLogFunction(this._options.logFunction),Ue.logLevel=this._options.debug||0,this._api=new sP(t),this._socket=this._createServerConnection(),!cr.supports.audioVideo&&!cr.supports.data){this._delayedAbort(mn.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!cr.validateId(r)){this._delayedAbort(mn.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(a=>this._initialize(a)).catch(a=>this._abort(mn.ServerError,a))}_createServerConnection(){const e=new nP(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(ya.Message,t=>{this._handleMessage(t)}),e.on(ya.Error,t=>{this._abort(mn.SocketError,t)}),e.on(ya.Disconnected,()=>{this.disconnected||(this.emitError(mn.Network,"Lost connection to server."),this.disconnect())}),e.on(ya.Close,()=>{this.disconnected||this._abort(mn.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const t=e.type,r=e.payload,a=e.src;switch(t){case $n.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case $n.Error:this._abort(mn.ServerError,r.msg);break;case $n.IdTaken:this._abort(mn.UnavailableID,`ID "${this.id}" is taken`);break;case $n.InvalidKey:this._abort(mn.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case $n.Leave:Ue.log(`Received leave message from ${a}`),this._cleanupPeer(a),this._connections.delete(a);break;case $n.Expire:this.emitError(mn.PeerUnavailable,`Could not connect to peer ${a}`);break;case $n.Offer:{const l=r.connectionId;let c=this.getConnection(a,l);if(c&&(c.close(),Ue.warn(`Offer received for existing Connection ID:${l}`)),r.type===Ea.Media){const m=new xm(a,this,{connectionId:l,_payload:r,metadata:r.metadata});c=m,this._addConnection(a,c),this.emit("call",m)}else if(r.type===Ea.Data){const m=new this._serializers[r.serialization](a,this,{connectionId:l,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});c=m,this._addConnection(a,c),this.emit("connection",m)}else{Ue.warn(`Received malformed connection type:${r.type}`);return}const h=this._getMessages(l);for(const m of h)c.handleMessage(m);break}default:{if(!r){Ue.warn(`You received a malformed message from ${a} of type ${t}`);return}const l=r.connectionId,c=this.getConnection(a,l);c&&c.peerConnection?c.handleMessage(e):l?this._storeMessage(l,e):Ue.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,t){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(t)}_getMessages(e){const t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]}connect(e,t={}){if(t={serialization:"default",...t},this.disconnected){Ue.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(mn.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[t.serialization](e,this,t);return this._addConnection(e,r),r}call(e,t,r={}){if(this.disconnected){Ue.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(mn.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!t){Ue.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const a=new xm(e,this,{...r,_stream:t});return this._addConnection(e,a),a}_addConnection(e,t){Ue.log(`add connection ${t.type}:${t.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(t)}_removeConnection(e){const t=this._connections.get(e.peer);if(t){const r=t.indexOf(e);r!==-1&&t.splice(r,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,t){const r=this._connections.get(e);if(!r)return null;for(const a of r)if(a.connectionId===t)return a;return null}_delayedAbort(e,t){setTimeout(()=>{this._abort(e,t)},0)}_abort(e,t){Ue.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(Ue.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const t=this._connections.get(e);if(t)for(const r of t)r.close()}disconnect(){if(this.disconnected)return;const e=this.id;Ue.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)Ue.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)Ue.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=t=>{}){this._api.listAllPeers().then(t=>e(t)).catch(t=>this._abort(mn.ServerError,t))}}var oP=vb;let By=null,sd=[],wm=[];const Sk=()=>(By||(By=new(window.AudioContext||window.webkitAudioContext)),By),id=()=>{sd.forEach(n=>{try{n.stop(),n.disconnect()}catch{}}),sd=[],wm.forEach(n=>{try{n.disconnect()}catch{}}),wm=[]},lP=()=>{try{const n=Sk();n.state==="suspended"&&n.resume(),id();const e=n.createOscillator(),t=n.createGain();e.type="sine",e.frequency.value=440,e.connect(t),t.connect(n.destination);const r=n.currentTime;let a=!0;const l=()=>{if(!a)return;const h=n.createOscillator(),m=n.createGain();h.connect(m),m.connect(n.destination),h.frequency.value=425,h.type="sine";const g=n.currentTime,v=n.createOscillator();v.type="sine",v.frequency.value=20;const b=n.createGain();b.gain.value=500,v.connect(b),b.connect(h.frequency),v.start(g),v.stop(g+2),m.gain.setValueAtTime(0,g),m.gain.linearRampToValueAtTime(.1,g+.1),m.gain.setValueAtTime(.1,g+1.8),m.gain.linearRampToValueAtTime(0,g+2),h.start(g),h.stop(g+2),sd.push(h),sd.push(v),wm.push(m)};l();const c=setInterval(l,4e3);return()=>{a=!1,clearInterval(c),id()}}catch(n){return console.error("Error playing outgoing ring:",n),()=>{}}},cP=()=>{try{const n=Sk();n.state==="suspended"&&n.resume(),id();let e=!0;const t=()=>{if(!e)return;const a=n.currentTime,l=(c,h)=>{const m=n.createOscillator(),g=n.createGain();m.connect(g),g.connect(n.destination),m.frequency.value=h,m.type="square",g.gain.setValueAtTime(0,c),g.gain.linearRampToValueAtTime(.1,c+.05),g.gain.setValueAtTime(.1,c+.2),g.gain.linearRampToValueAtTime(0,c+.25),m.start(c),m.stop(c+.3),sd.push(m),wm.push(g)};l(a,880),l(a+.4,880),l(a+.8,880)};t();const r=setInterval(t,3e3);return()=>{e=!1,clearInterval(r),id()}}catch(n){return console.error("Error playing incoming ring:",n),()=>{}}},SE=()=>{id()},vi={SCREEN_SHARE:"screen_share",HIGH_QUALITY:"high_quality"},uP={admin:[vi.SCREEN_SHARE,vi.HIGH_QUALITY],moderator:[vi.SCREEN_SHARE],member:[]},dP={premium:[vi.SCREEN_SHARE,vi.HIGH_QUALITY],developer:[vi.SCREEN_SHARE,vi.HIGH_QUALITY],verified:[]},Tk=(n,e)=>{if(!n)return!1;const t=n.role||"member";if((uP[t]||[]).includes(e))return!0;const a=n.badges||[];for(const l of a)if((dP[l]||[]).includes(e))return!0;return!1},Ck=O.createContext(),Ad=()=>{const n=O.useContext(Ck);if(!n)throw new Error("useCall must be used within CallProvider");return n},hP=({children:n})=>{const{currentUser:e,userProfile:t}=Zn(),{error:r}=Ys(),[a,l]=O.useState(null),[c,h]=O.useState(null),[m,g]=O.useState("idle"),[v,b]=O.useState(null),[_,C]=O.useState(null),[R,I]=O.useState(null),[k,B]=O.useState(null),[$,N]=O.useState(null),[V,z]=O.useState(!1),[F,E]=O.useState(!1),[S,A]=O.useState({audioInputs:[],videoInputs:[],audioOutputs:[]}),[D,M]=O.useState(""),[U,P]=O.useState("");O.useRef(null),O.useRef(null);const xe=O.useRef(null),Ee=O.useRef(null),Y=O.useRef(null),se=O.useRef(null);O.useEffect(()=>{Ee.current=k},[k]),O.useEffect(()=>{Y.current=R},[R]),O.useEffect(()=>(se.current&&(se.current(),se.current=null),SE(),m==="incoming"?se.current=cP():m==="outgoing"&&(se.current=lP()),()=>{se.current&&se.current(),SE()}),[m]),O.useEffect(()=>{if(!e)return;const be=new oP;return be.on("open",he=>{console.log("My Peer ID is:",he),h(he),l(be)}),be.on("call",he=>{console.log("Receiving PeerJS call connection..."),Y.current&&Y.current.peer===he.peer&&(console.log("Replacing existing call (upgrade/renegotiation detected)"),Y.current.removeAllListeners&&Y.current.removeAllListeners("close"),Y.current.close());const _e=Ee.current||ye.current;_e?(console.log("Answering call with local stream"),he.answer(_e)):(console.warn("No local stream found when answering! Answering audio-only or empty."),he.answer()),he.on("stream",ae=>{console.log("Received remote stream"),N(ae)}),he.on("close",()=>{q()}),I(he),g("connected")}),be.on("error",he=>{console.error("PeerJS Error:",he),he.type}),()=>{be.destroy()}},[e]),O.useEffect(()=>{if(!e)return;const be=ts(mt(ve,"users",e.uid,"incomingCalls"),mo("status","==","pending")),he=Sr(be,_e=>{_e.docChanges().forEach(ae=>{if(ae.type==="added"){const Re=ae.doc.data();b({id:ae.doc.id,...Re}),g("incoming")}ae.type==="removed"&&b(Re=>Re&&Re.id===ae.doc.id?(g(Ie=>(Ie!=="connected"&&q(!1),Ie)),null):Re)})});return()=>he()},[e]);const J=async()=>{try{const be=await navigator.mediaDevices.enumerateDevices(),he=be.filter(Re=>Re.kind==="audioinput"),_e=be.filter(Re=>Re.kind==="videoinput"),ae=be.filter(Re=>Re.kind==="audiooutput");return A({audioInputs:he,videoInputs:_e,audioOutputs:ae}),!D&&he.length>0&&M(he[0].deviceId),!U&&_e.length>0&&P(_e[0].deviceId),console.log("Devices enumerated:",{audioInputs:he.length,videoInputs:_e.length}),{audioInputs:he,videoInputs:_e,audioOutputs:ae}}catch(be){return console.error("Failed to enumerate devices:",be),{audioInputs:[],videoInputs:[],audioOutputs:[]}}};O.useEffect(()=>(J(),navigator.mediaDevices.addEventListener("devicechange",J),()=>navigator.mediaDevices.removeEventListener("devicechange",J)),[]);const Ce=async(be=!0)=>{try{S.audioInputs.length===0&&await J();const he={echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,channelCount:1,sampleRate:48e3,sampleSize:16,...D&&{deviceId:{exact:D}}},_e=be?{width:1280,height:720,...U&&{deviceId:{exact:U}}}:!1,ae=await navigator.mediaDevices.getUserMedia({video:_e,audio:he});return console.log("Media stream acquired with selected devices"),B(ae),ae}catch(he){return console.error("Failed to get local stream",he),r("Could not access camera/microphone"),null}},Ne=async(be,he="video")=>{if(!a||!c){r("Connection not ready. Please wait a moment.");return}if(C(be),g("outgoing"),!await Ce(he==="video")){g("idle");return}E(he==="voice");try{const ae=e.displayName||t?.displayName||"Unknown",Re=e.photoURL||t?.photoURL||t?.photoUrl||null,Ie=await Vn(mt(ve,"users",be.id,"incomingCalls"),{callerId:e.uid,callerName:ae,callerPhotoUrl:Re,peerId:c,type:he,status:"pending",timestamp:_t()});xe.current=Ie.id;const X=Sr(Me(ve,"users",be.id,"incomingCalls",Ie.id),le=>{const Se=xe.current===Ie.id;if(!le.exists())Se&&m==="outgoing"&&(r("Call ended or declined"),q(!1)),X();else{const Oe=le.data();Oe.status==="accepted"?Se&&g("connected"):Oe.status==="rejected"&&Se&&(r("Call declined"),q(!0))}},le=>{console.warn("Call snapshot error:",le),xe.current===Ie.id&&(r("Call declined"),q(!1))})}catch(ae){console.error("Signaling failed:",ae),r("Failed to direct call"),q()}};O.useEffect(()=>{if(!R||!R.peerConnection)return;const be=()=>{const he=R.peerConnection.connectionState,_e=R.peerConnection.iceConnectionState;console.log(`Connection State: ${he}, ICE State: ${_e}`),(_e==="disconnected"||_e==="failed"||_e==="closed")&&(console.warn("Peer connection lost/failed. Ending call..."),_e==="failed"||_e==="closed"?q():_e==="disconnected"&&Y.current===R&&setTimeout(()=>{Y.current&&Y.current.peerConnection.iceConnectionState==="disconnected"&&(console.log("Connection still disconnected after timeout. Ending."),q())},3e3))};return R.peerConnection.addEventListener("iceconnectionstatechange",be),R.peerConnection.addEventListener("connectionstatechange",be),()=>{R&&R.peerConnection&&(R.peerConnection.removeEventListener("iceconnectionstatechange",be),R.peerConnection.removeEventListener("connectionstatechange",be))}},[R]);const H=async()=>{if(!v||!a)return;g("connected");const be=v.type==="video",he=await Ce(be);if(!he){console.error("Stream failed, rejecting call signal.");try{await nt(Me(ve,"users",e.uid,"incomingCalls",v.id),{status:"rejected"})}catch{}q(!1);return}if(be||E(!0),console.log("Connecting to peer:",v.peerId),(!a||a.disconnected)&&(r("Peer connection lost. Reconnecting..."),a?.reconnect(),await new Promise(_e=>setTimeout(_e,1e3)),!a||a.disconnected)){r("Could not establish P2P connection."),q();return}try{const _e=a.call(v.peerId,he);if(!_e){r("Call failed to initialize."),q();return}_e.on("stream",ae=>{N(ae)}),_e.on("close",()=>{q()}),_e.on("error",ae=>{console.error("Call error:",ae),q()}),I(_e);try{await nt(Me(ve,"users",e.uid,"incomingCalls",v.id),{status:"accepted"})}catch(ae){console.error("Error updating signal doc",ae)}}catch(_e){console.error("Error calling peer:",_e),r("Failed to connect to peer."),q()}},q=async(be=!0)=>{we.current&&(we.current.getTracks().forEach(_e=>_e.stop()),we.current=null),ye.current=null;const he=Ee.current;if(he&&he.getTracks().forEach(_e=>{_e.stop(),console.log("Stopped track:",_e.kind)}),k&&k.getTracks().forEach(_e=>_e.stop()),B(null),Ee.current=null,R&&(R.close(),I(null)),N(null),g("idle"),b(null),C(null),z(!1),E(!1),xe.current&&be&&_)try{await tc(Me(ve,"users",_.id,"incomingCalls",xe.current))}catch{}if(v&&be)try{m==="incoming"?await nt(Me(ve,"users",e.uid,"incomingCalls",v.id),{status:"rejected"}):await tc(Me(ve,"users",e.uid,"incomingCalls",v.id))}catch{}xe.current=null},re=()=>{if(k){const be=k.getAudioTracks()[0];be&&(be.enabled=!be.enabled,z(!be.enabled))}},ne=()=>{if(k){const be=k.getVideoTracks()[0];be&&(be.enabled=!be.enabled,E(!be.enabled))}},we=O.useRef(null),ye=O.useRef(null),Te=async(be=null)=>{if(we.current){await Fe();return}try{console.log("Requesting display media...",be);let he={},_e=be?.width||1280,ae=be?.height||720,Re=be?.frameRate||30;be||Tk(t,vi.HIGH_QUALITY)&&(_e=1920,ae=1080,Re=60);let Ie;if(be?.sourceId&&window.require){console.log("Using Electron getUserMedia with sourceId:",be.sourceId);try{Ie=await navigator.mediaDevices.getUserMedia({audio:{mandatory:{chromeMediaSource:"desktop"}},video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:be.sourceId,maxWidth:_e,maxHeight:ae,maxFrameRate:Re}}})}catch(Ke){throw console.error("Electron getUserMedia failed:",Ke),Ke}}else{const Ke={video:{width:{ideal:_e},height:{ideal:ae},frameRate:{ideal:Re},displaySurface:be?.displaySurface},audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!1}};console.log("Using Web getDisplayMedia with constraints:",Ke),Ie=await navigator.mediaDevices.getDisplayMedia(Ke)}const X=Ie.getVideoTracks()[0];E(!1),console.log("Display media obtained:",X.label);const le=Ie.getAudioTracks()[0];let Se=null;if(le){console.log("System audio captured! Mixing with microphone...");let Ke=k;if(!Ke&&S.audioInputs.length>0)try{Ke=await navigator.mediaDevices.getUserMedia({audio:!0})}catch{console.warn("Failed to get mic for mixing")}if(Ke&&Ke.getAudioTracks().length>0){const It=Ke.getAudioTracks()[0],kt=new(window.AudioContext||window.webkitAudioContext),ge=kt.createMediaStreamDestination(),ze=kt.createMediaStreamSource(new MediaStream([It])),gt=kt.createMediaStreamSource(new MediaStream([le])),Ht=kt.createGain(),wn=kt.createGain();Ht.gain.value=1,wn.gain.value=1,ze.connect(Ht).connect(ge),gt.connect(wn).connect(ge),Se=ge.stream.getAudioTracks()[0],we.currentAudioContext=kt}else Se=le}k&&!ye.current&&(ye.current=k),X.onended=()=>{console.log("Screen track ended by user/browser UI"),Fe()},we.current=Ie;const Oe=Se?[Se]:k?k.getAudioTracks():[],qe=new MediaStream([X,...Oe]);if(B(qe),R&&R.peerConnection){const Ke=R.peerConnection.getSenders(),It=Ke.find(kt=>kt.track&&kt.track.kind==="video");if(It&&await It.replaceTrack(X),Se){const kt=Ke.find(ge=>ge.track&&ge.track.kind==="audio");kt&&(console.log("Replacing audio sender with mixed track..."),await kt.replaceTrack(Se))}if(!It){console.log("Audio-only -> Screen Share upgrade. Renegotiating...");const kt=R.peer;if(a&&kt){R.removeAllListeners("close");const ge=a.call(kt,qe);ge.on("stream",ze=>N(ze)),ge.on("close",()=>q()),ge.on("error",()=>q()),I(ge)}}}}catch(he){console.error("Error starting screen share:",he),r("Failed to start screen share")}},Fe=async()=>{if(we.current)if(console.log("Stopping screen share..."),we.currentAudioContext&&(we.currentAudioContext.close(),we.currentAudioContext=null),we.current.getTracks().forEach(be=>be.stop()),we.current=null,ye.current){console.log("Reverting to previous stream state...");const be=ye.current.getVideoTracks()[0],he=ye.current.getAudioTracks();if(R&&R.peerConnection){const _e=R.peerConnection.getSenders(),ae=_e.find(Ie=>Ie.track&&Ie.track.kind==="video");if(be&&ae)try{await ae.replaceTrack(be)}catch{}const Re=_e.find(Ie=>Ie.track&&Ie.track.kind==="audio");Re&&he.length>0&&(console.log("Reverting audio sender to original mic..."),await Re.replaceTrack(he[0]))}B(ye.current),ye.current=null}else{console.log("No stored camera stream, requesting new user media...");try{const be=await Ce(!0);if(be&&R&&R.peerConnection){const he=be.getVideoTracks()[0],_e=R.peerConnection.getSenders().find(ae=>ae.track&&ae.track.kind==="video");_e&&await _e.replaceTrack(he)}}catch(be){console.error("Failed to restore camera:",be)}}},Ye={startCall:Ne,answerCall:H,endCall:q,toggleAudio:re,toggleVideo:ne,callStatus:m,incomingCall:v,outgoingCallUser:_,localStream:k,remoteStream:$,isMuted:V,isVideoOff:F,activeCall:R,isScreenSharing:!!we.current,toggleScreenShare:Te,availableDevices:S,selectedMicId:D,selectedCameraId:U,setSelectedMicId:M,setSelectedCameraId:P,refreshDevices:J};return d.jsx(Ck.Provider,{value:Ye,children:n})},bb=({user:n,isOpen:e,onClose:t,onMessage:r})=>{if(!n)return null;const a=c=>({admin:"#f23f42",moderator:"#faa81a",member:"#80848e"})[c]||"#80848e",{startCall:l}=Ad();return d.jsx(Us,{isOpen:e,onClose:t,title:"",size:"sm",children:d.jsxs("div",{className:"space-y-4 -mt-6",children:[d.jsxs("div",{className:"flex justify-center pt-4",children:[n.photoUrl?d.jsx("img",{src:n.photoUrl,alt:n.displayName,className:"w-24 h-24 rounded-full border-4 border-dark-bg object-cover",onError:c=>{c.target.style.display="none",c.target.nextSibling.style.display="flex"}}):null,d.jsx("div",{className:"w-24 h-24 rounded-full border-4 border-dark-bg bg-brand-primary flex items-center justify-center text-white font-bold text-3xl",style:{display:n.photoUrl?"none":"flex"},children:n.displayName?.[0]?.toUpperCase()||"U"})]}),d.jsxs("div",{className:"text-center space-y-2",children:[d.jsx("h2",{className:"text-2xl font-bold text-dark-text",children:n.displayName||"Unknown"}),d.jsx("div",{className:"flex justify-center",children:d.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium",style:{backgroundColor:`${a(n.role)}20`,color:a(n.role),border:`1px solid ${a(n.role)}50`},children:n.role?.charAt(0).toUpperCase()+n.role?.slice(1)})}),d.jsx("div",{className:"flex items-center justify-center gap-2",children:(()=>{const c=n.presence||(n.isOnline?"online":"offline"),h={online:{color:"bg-green-500",label:"Online"},idle:{color:"bg-yellow-500",label:"Idle"},dnd:{color:"bg-red-500",label:"Do Not Disturb"},invisible:{color:"bg-gray-500",label:"Offline"},offline:{color:"bg-gray-500",label:"Offline"}},m=h[c]||h.offline;return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:St("w-3 h-3 rounded-full",m.color)}),d.jsx("span",{className:"text-sm text-dark-muted",children:m.label})]})})()}),d.jsx("div",{className:"flex justify-center gap-2 mt-3 flex-wrap px-4",children:(()=>{const c=new Set(n.badges||[]);n.role==="admin"&&c.add("admin");const h=Array.from(c).map(m=>PO[m]).filter(Boolean);return h.length===0?null:d.jsx("div",{className:"p-1 rounded-lg bg-dark-sidebar/50 backdrop-blur-sm border border-dark-border/50 flex gap-2",children:h.map(m=>{const g=m.icon;return d.jsxs("div",{className:"relative group cursor-help",children:[d.jsx("div",{className:"p-1 rounded hover:bg-dark-hover transition-colors",children:d.jsx(g,{size:20,color:m.color})}),d.jsxs("div",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 px-2 py-1 bg-black text-white text-xs rounded shadow-lg whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-50",children:[d.jsx("div",{className:"font-bold",children:m.label}),m.description&&d.jsx("div",{className:"text-gray-300 font-normal text-[10px]",children:m.description}),d.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-black"})]})]},m.id)})})})()}),n.status&&d.jsxs("div",{className:"flex items-center justify-center gap-2 mt-2",children:[d.jsx("span",{className:"text-lg",children:n.status.emoji}),d.jsx("span",{className:"text-sm text-dark-text",children:n.status.text})]}),n.id!==Zn().currentUser?.uid&&d.jsxs("div",{className:"flex gap-2 justify-center mt-4",children:[d.jsx("button",{onClick:()=>r&&r(n),className:"p-2 rounded-full bg-dark-hover hover:bg-dark-sidebar transition-colors text-dark-text",title:"Send Message",children:d.jsx(hM,{size:20})}),d.jsx("button",{onClick:()=>l(n,"voice"),className:"p-2 rounded-full bg-dark-hover hover:bg-dark-sidebar transition-colors text-dark-text",title:"Voice Call",children:d.jsx(fM,{size:20})}),d.jsx("button",{onClick:()=>l(n,"video"),className:"p-2 rounded-full bg-dark-hover hover:bg-dark-sidebar transition-colors text-dark-text",title:"Video Call",children:d.jsx(nd,{size:20})})]})]}),n.bio&&d.jsxs("div",{className:"bg-dark-bg p-4 rounded-lg",children:[d.jsx("h3",{className:"text-xs font-semibold text-dark-muted uppercase mb-2",children:"About Me"}),d.jsx("p",{className:"text-dark-text text-sm whitespace-pre-wrap",children:n.bio})]}),d.jsxs("div",{className:"bg-dark-bg p-4 rounded-lg",children:[d.jsx("h3",{className:"text-xs font-semibold text-dark-muted uppercase mb-2",children:"Member Since"}),d.jsx("p",{className:"text-dark-text text-sm",children:n.createdAt?new Date(n.createdAt.seconds*1e3).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Unknown"})]})]})})},nc=({isOpen:n,onClose:e,onConfirm:t,title:r="Confirm Action",message:a="Are you sure you want to proceed?",confirmText:l="Confirm",cancelText:c="Cancel",variant:h="danger"})=>{const m=()=>{t(),e()};return d.jsx(Us,{isOpen:n,onClose:e,title:r,size:"sm",children:d.jsxs("div",{className:"space-y-6",children:[d.jsx("p",{className:"text-dark-text",children:a}),d.jsxs("div",{className:"flex gap-3 justify-end",children:[d.jsx(Je,{variant:"secondary",onClick:e,children:c}),d.jsx(Je,{variant:h,onClick:m,children:l})]})]})})},fP=()=>{const n="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let t=0;t<8;t++)e+=n.charAt(Math.floor(Math.random()*n.length));return e},mP=({isOpen:n,onClose:e,serverId:t})=>{const[r,a]=O.useState(""),[l,c]=O.useState(!1),[h,m]=O.useState(!1),[g,v]=O.useState(!1),{success:b,error:_}=Ys(),C=async()=>{c(!0);try{const I=fP();await ed(Me(ve,"inviteCodes",I),{serverId:t,createdAt:_t(),expiresAt:new Date(Date.now()+(g?365*24*60*60*1e3:1440*60*1e3)),maxUses:g?-1:1,uses:0,isActive:!0,isUnlimited:g}),a(I),b("Invite code generated!")}catch(I){console.error("Error generating invite:",I),_("Failed to generate invite code")}finally{c(!1)}},R=()=>{navigator.clipboard.writeText(r),m(!0),b("Copied to clipboard!"),setTimeout(()=>m(!1),2e3)};return d.jsx(Us,{isOpen:n,onClose:e,title:"Invite Code",size:"sm",children:d.jsx("div",{className:"space-y-4",children:r?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"bg-dark-bg p-4 rounded-lg text-center",children:[d.jsx("div",{className:"text-3xl font-mono font-bold text-brand-primary mb-2",children:r}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Je,{variant:"secondary",onClick:R,className:"flex-1 flex items-center justify-center gap-2",children:h?d.jsxs(d.Fragment,{children:[d.jsx(Ao,{size:20}),"Copied!"]}):d.jsxs(d.Fragment,{children:[d.jsx(xC,{size:20}),"Copy Code"]})}),d.jsx(Je,{variant:"secondary",onClick:()=>{a(""),m(!1),v(!1)},className:"flex items-center justify-center gap-2 px-4",title:"Generate new code",children:d.jsx(RM,{size:20})})]})]}),d.jsxs("div",{className:"text-xs text-dark-muted space-y-1",children:[d.jsxs("div",{children:[" ",g?"Expires in 1 year":"Expires in 24 hours"]}),d.jsxs("div",{children:[" ",g?"Unlimited uses":"One-time use only"]}),d.jsx("div",{children:" Share with trusted users"})]}),d.jsx(Je,{variant:"secondary",onClick:e,className:"w-full",children:"Close"})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("p",{className:"text-dark-text text-sm",children:"Generate an invite code for this server."}),d.jsxs("label",{className:"flex items-center gap-2 p-3 rounded bg-dark-bg cursor-pointer hover:bg-opacity-80 transition-colors",children:[d.jsx("input",{type:"checkbox",checked:g,onChange:I=>v(I.target.checked),className:"w-4 h-4 rounded border-gray-600 bg-dark-bg text-brand-primary focus:ring-brand-primary"}),d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-white text-sm font-medium",children:"Unlimited Uses"}),d.jsx("span",{className:"text-dark-muted text-xs",children:"Code will not expire after one use"})]})]})]}),d.jsx(Je,{variant:"primary",onClick:C,disabled:l,className:"w-full",children:l?"Generating...":"Generate Invite Code"})]})})})},pP=[{emoji:"",text:"Gaming",type:"gaming"},{emoji:"",text:"Working",type:"working"},{emoji:"",text:"Listening to music",type:"music"},{emoji:"",text:"Watching",type:"watching"},{emoji:"",text:"Eating",type:"eating"},{emoji:"",text:"AFK",type:"afk"},{emoji:"",text:"Focusing",type:"focusing"},{emoji:"",text:"Studying",type:"studying"}],TE={online:{color:"bg-green-500",label:"Online",icon:""},idle:{color:"bg-yellow-500",label:"Idle",icon:""},dnd:{color:"bg-red-500",label:"Do Not Disturb",icon:""},invisible:{color:"bg-gray-500",label:"Invisible",icon:""},offline:{color:"bg-gray-500",label:"Offline",icon:""}},gP=n=>TE[n]||TE.offline,kk=({status:n,size:e="md",className:t})=>{const r=gP(n),a={sm:"w-2.5 h-2.5",md:"w-3 h-3",lg:"w-4 h-4"};return n==="invisible"?null:d.jsx("div",{className:St("rounded-full border-2 border-dark-bg",r.color,a[e]||a.md,t),title:r.label})},yP=({dm:n,currentUserId:e,isSelected:t,onClick:r,onContextMenu:a})=>{const l=n.participants.find(m=>m!==e),[c,h]=O.useState(null);return O.useEffect(()=>{(async()=>{if(l)try{const g=await ep(Me(ve,"users",l));g.exists()&&h({id:g.id,...g.data()})}catch(g){console.error("Error fetching DM user:",g)}})()},[l]),c?d.jsxs("button",{onClick:r,onContextMenu:a,className:St("w-full flex items-center gap-3 px-2 py-2 rounded mb-1 group relative","text-dark-muted hover:bg-dark-hover hover:text-dark-text","transition-colors duration-150",t&&"bg-dark-hover text-dark-text"),children:[d.jsx("div",{className:"relative",children:c.photoUrl?d.jsx("img",{src:c.photoUrl,alt:c.displayName,className:"w-8 h-8 rounded-full object-cover"}):d.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white text-sm font-bold",children:c.displayName?.[0]?.toUpperCase()})}),d.jsxs("div",{className:"flex-1 text-left overflow-hidden",children:[d.jsxs("div",{className:"text-sm font-medium truncate flex justify-between items-center",children:[d.jsx("span",{children:c.displayName}),n.updatedAt&&d.jsx("span",{className:"text-[10px] text-gray-500 hidden group-hover:block",children:np(n.updatedAt)})]}),d.jsx("div",{className:"text-xs truncate opacity-70",children:n.lastMessage?.text||"Start a conversation"})]})]}):null},vP=({dms:n,selectedDmId:e,onSelectDm:t})=>{const{currentUser:r}=Zn(),[a,l]=O.useState(null),[c,h]=O.useState([]),m=(b,_)=>{b.preventDefault(),l({x:b.pageX,y:b.pageY,dmId:_.id})},g=async b=>{if(h(_=>[..._,b]),l(null),!!r)try{const _=Me(ve,"dms",b);await nt(_,{hiddenFor:Cd(r.uid)}),e===b&&t(null)}catch(_){console.error("Error deleting DM:",_),h(C=>C.filter(R=>R!==b))}};O.useEffect(()=>{const b=()=>l(null);return window.addEventListener("click",b),()=>window.removeEventListener("click",b)},[]);const v=n?.filter(b=>!c.includes(b.id))||[];return v.length===0?d.jsxs("div",{className:"px-4 py-8 text-center text-dark-muted text-sm",children:[d.jsx("p",{children:"No conversations yet."}),d.jsx("p",{className:"mt-2",children:"Start a DM from the friends list!"})]}):d.jsxs("div",{className:"flex-1 overflow-y-auto py-3",children:[d.jsxs("div",{className:"px-2",children:[d.jsx("div",{className:"text-xs font-semibold text-dark-muted uppercase px-2 mb-2 flex justify-between items-center",children:d.jsx("span",{children:"Direct Messages"})}),d.jsx("div",{className:"space-y-0.5",children:v.map(b=>d.jsx(yP,{dm:b,currentUserId:r.uid,isSelected:e===b.id,onClick:()=>t(b),onContextMenu:_=>m(_,b)},b.id))})]}),a&&d.jsx("div",{className:"fixed bg-dark-sidebar border border-dark-hover shadow-xl rounded-md z-50 py-1 min-w-[160px]",style:{top:a.y,left:a.x},children:d.jsxs("button",{onClick:()=>g(a.dmId),className:"w-full text-left px-4 py-2 hover:bg-red-500/10 text-red-400 hover:text-red-500 text-sm flex items-center gap-2 transition-colors",children:[d.jsx(bo,{size:16}),"Delete Conversation"]})})]})},CE=({server:n,channels:e,selectedChannel:t,onSelectChannel:r,onOpenSettings:a,onOpenAdmin:l,onLogout:c,userProfile:h,serverId:m,userRole:g,userId:v,dms:b,selectedDm:_,onSelectDm:C})=>{const[R,I]=O.useState(!1),[k,B]=O.useState(!1),[$,N]=O.useState(!1),V=()=>{B(!1),c()};return d.jsxs("div",{className:"w-60 bg-dark-sidebar flex flex-col h-full",children:[d.jsxs("div",{className:"h-12 px-4 flex items-center justify-between border-b border-dark-hover shadow-md",children:[d.jsx("h2",{className:"font-semibold text-dark-text truncate",children:n?.name||"Lumo"}),d.jsxs("div",{className:"flex items-center gap-1",children:[m&&g==="admin"&&d.jsx("button",{onClick:()=>N(!0),className:"p-1.5 hover:bg-dark-hover rounded transition-colors",title:"Generate Invite",children:d.jsx(MM,{className:"text-green-500",size:20})}),h?.role==="admin"&&d.jsx("button",{onClick:l,className:"p-1.5 hover:bg-dark-hover rounded transition-colors",title:"Admin Panel",children:d.jsx(yC,{className:"text-admin",size:20})})]})]}),d.jsx("div",{className:"flex-1 overflow-y-auto py-3",children:m==="home"?d.jsx(vP,{dms:b,selectedDmId:_?.id,onSelectDm:C}):d.jsxs("div",{className:"px-2",children:[d.jsx("div",{className:"text-xs font-semibold text-dark-muted uppercase px-2 mb-1",children:"Text Channels"}),e.map(z=>d.jsxs("button",{onClick:()=>r(z),className:St("w-full flex items-center gap-2 px-2 py-1.5 rounded","text-dark-muted hover:bg-dark-hover hover:text-dark-text","transition-colors duration-150",t?.id===z.id&&"bg-dark-hover text-dark-text"),children:[d.jsx(rp,{className:"flex-shrink-0"}),d.jsx("span",{className:"truncate text-sm flex-1 text-left",children:z.name}),z.locked&&d.jsx(rM,{className:"flex-shrink-0 text-yellow-500",size:14,title:"Locked channel"})]},z.id))]})}),d.jsxs("div",{className:"h-20 bg-dark-bg px-2 flex items-center justify-between gap-2 border-t border-dark-hover -ml-[72px] w-[calc(100%+72px)] relative z-10",children:[d.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1 cursor-pointer hover:bg-dark-hover rounded p-2 transition-colors",onClick:()=>I(!0),children:[d.jsxs("div",{className:"relative flex-shrink-0",children:[h?.photoUrl?d.jsx("img",{src:h.photoUrl,alt:h.displayName,className:"w-12 h-12 rounded-full object-cover",onError:z=>{z.target.style.display="none",z.target.nextSibling.style.display="flex"}}):null,d.jsx("div",{className:"w-12 h-12 rounded-full bg-brand-primary flex items-center justify-center text-white font-bold text-lg",style:{display:h?.photoUrl?"none":"flex"},children:h?.displayName?.[0]?.toUpperCase()||"U"}),d.jsx("div",{className:"absolute bottom-0 right-0",children:d.jsx(kk,{status:h?.presence||"online",size:"md"})})]}),d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("div",{className:"text-base font-semibold text-dark-text truncate",children:h?.displayName||"User"}),d.jsx("div",{className:"text-sm text-dark-muted truncate",children:h?.role||"member"})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:a,className:"p-2.5 hover:bg-dark-hover rounded-lg transition-colors",title:"Settings",children:d.jsx(tp,{className:"text-dark-muted hover:text-dark-text",size:24})}),d.jsx("button",{onClick:()=>B(!0),className:"p-2.5 hover:bg-dark-hover rounded-lg transition-colors",title:"Logout",children:d.jsx(sM,{className:"text-dark-muted hover:text-admin",size:24})})]})]}),d.jsx(bb,{user:h,isOpen:R,onClose:()=>I(!1)}),d.jsx(nc,{isOpen:k,onClose:()=>B(!1),onConfirm:V,title:"Logout",message:"Are you sure you want to logout?",confirmText:"Logout",variant:"danger"}),d.jsx(mP,{isOpen:$,onClose:()=>N(!1),serverId:m})]})},bP=(n,e)=>{if(e===0)return"0 KB/s";const t=n/e;return t>1024*1024?`${(t/(1024*1024)).toFixed(1)} MB/s`:`${(t/1024).toFixed(0)} KB/s`},ip=(n,e)=>new Promise((t,r)=>{const a="5c1c5b7cae2edd508a2f35f98c4eec96",l=new FormData;l.append("image",n);const c=new XMLHttpRequest;c.open("POST",`https://api.imgbb.com/1/upload?key=${a}`);const h=Date.now();c.upload.onprogress=m=>{if(m.lengthComputable){const g=m.loaded/m.total*100,v=(Date.now()-h)/1e3,b=bP(m.loaded,v);e&&e(g,b)}},c.onload=()=>{if(c.status===200)try{const m=JSON.parse(c.responseText);m.success?t(m.data.url):r(new Error(m.error?.message||"Failed to upload image"))}catch{r(new Error("Invalid response from ImgBB"))}else r(new Error(`Upload failed with status ${c.status}`))},c.onerror=()=>r(new Error("Network error during upload")),c.send(l)}),xP=({server:n,onClose:e,onDelete:t,position:r,userRole:a,userId:l})=>{const[c,h]=O.useState(!1),[m,g]=O.useState(n.name),[v,b]=O.useState(!1),[_,C]=O.useState(!1),[R,I]=O.useState(n.icon||null),[k,B]=O.useState(null),[$,N]=O.useState({progress:0,speed:""}),[V,z]=O.useState(!1),[F,E]=O.useState(!1),S=O.useRef(null),{success:A,error:D}=Ys(),M=async()=>{if(!m.trim()){D("Server name is required");return}b(!0);try{await nt(Me(ve,"servers",n.id),{name:m.trim()}),A("Server updated!"),h(!1),e()}catch(Y){console.error("Error updating server:",Y),D("Failed to update server")}finally{b(!1)}},U=async()=>{try{const Y=mt(ve,"servers",n.id,"members"),se=await ko(Y),J=[];se.forEach(Ce=>{const Ne=Ce.data().userId;J.push(nt(Me(ve,"users",Ne),{servers:hm(n.id),...Ce.data().currentServer===n.id?{currentServer:null}:{}}))}),await Promise.all(J),await tc(Me(ve,"servers",n.id)),A("Server deleted"),z(!1),t(),e()}catch(Y){console.error("Error deleting server:",Y),D("Failed to delete server"),z(!1)}},P=async()=>{try{await nt(Me(ve,"users",l),{servers:hm(n.id),currentServer:null}),await tc(Me(ve,"servers",n.id,"members",l)),await nt(Me(ve,"servers",n.id),{memberCount:fm(-1)}),A("Left server"),E(!1),e()}catch(Y){console.error("Error leaving server:",Y),E(!1),e()}},xe=Y=>{const se=Y.target.files?.[0];if(se){if(!se.type.startsWith("image/")){D("Please select an image file");return}if(se.size>10*1024*1024){D("Image size must be less than 10MB");return}B(se),I(URL.createObjectURL(se))}},Ee=async()=>{if(!k){D("Please select an image first");return}b(!0);try{const Y=await ip(k,(se,J)=>{N({progress:se,speed:J})});await nt(Me(ve,"servers",n.id),{icon:Y}),A("Server icon updated!"),C(!1),e()}catch(Y){console.error("Error updating icon:",Y),D("Failed to update icon")}finally{b(!1),N({progress:0,speed:""})}};return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 z-40",onClick:e}),d.jsx("div",{className:"fixed bg-dark-sidebar border border-dark-hover rounded-lg shadow-xl py-2 z-50 w-64",style:{top:r.y,left:r.x},children:c?d.jsxs("div",{className:"px-3 py-2 space-y-2",children:[d.jsx(Xt,{value:m,onChange:Y=>g(Y.target.value),placeholder:"Server name",autoFocus:!0}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Je,{variant:"secondary",onClick:()=>h(!1),className:"flex-1 text-xs py-1",children:"Cancel"}),d.jsx(Je,{variant:"primary",onClick:M,disabled:v,className:"flex-1 text-xs py-1",children:v?"Saving...":"Save"})]})]}):_?d.jsxs("div",{className:"px-3 py-2 space-y-3",children:[d.jsx("input",{type:"file",ref:S,onChange:xe,accept:"image/*",className:"hidden"}),d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx("button",{onClick:()=>S.current?.click(),className:"w-16 h-16 rounded-full bg-dark-hover border-2 border-dashed border-dark-muted hover:border-brand-primary flex items-center justify-center transition-colors overflow-hidden",children:R?d.jsx("img",{src:R,alt:"Preview",className:"w-full h-full object-cover"}):d.jsx(D0,{size:24,className:"text-dark-muted"})}),d.jsx("span",{className:"text-xs text-dark-muted mt-2",children:"Click to select image"})]}),v&&$.progress>0&&d.jsxs("div",{className:"text-xs text-center text-dark-muted",children:[Math.round($.progress),"% (",$.speed,")"]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Je,{variant:"secondary",onClick:()=>{C(!1),B(null),I(n.icon||null)},className:"flex-1 text-xs py-1",children:"Cancel"}),d.jsx(Je,{variant:"primary",onClick:Ee,disabled:v||!k,className:"flex-1 text-xs py-1",children:v?"Uploading...":"Save"})]})]}):d.jsx(d.Fragment,{children:a==="admin"?d.jsxs(d.Fragment,{children:[d.jsxs("button",{onClick:()=>h(!0),className:"w-full px-4 py-2 text-left text-sm text-dark-text hover:bg-dark-hover transition-colors flex items-center gap-2",children:[d.jsx(Hl,{size:16}),"Edit Server Name"]}),d.jsxs("button",{onClick:()=>C(!0),className:"w-full px-4 py-2 text-left text-sm text-dark-text hover:bg-dark-hover transition-colors flex items-center gap-2",children:[d.jsx(D0,{size:16}),"Change Icon"]}),d.jsxs("button",{onClick:()=>z(!0),className:"w-full px-4 py-2 text-left text-sm text-admin hover:bg-dark-hover transition-colors flex items-center gap-2",children:[d.jsx(bo,{size:16}),"Delete Server"]})]}):d.jsxs("button",{onClick:()=>E(!0),className:"w-full px-4 py-2 text-left text-sm text-orange-500 hover:bg-dark-hover transition-colors flex items-center gap-2",children:[d.jsx(tM,{size:16}),"Leave Server"]})})}),d.jsx(nc,{isOpen:V,onClose:()=>z(!1),onConfirm:U,title:"Delete Server",message:`Are you sure you want to delete "${n.name}"? This action cannot be undone!`,confirmText:"Delete",confirmVariant:"danger"}),d.jsx(nc,{isOpen:F,onClose:()=>E(!1),onConfirm:P,title:"Leave Server",message:`Are you sure you want to leave "${n.name}"?`,confirmText:"Leave",confirmVariant:"warning"})]})},_P=""+new URL("lumo-logo-DYOsjf-q.png",import.meta.url).href,kE=({servers:n,currentServerId:e,onServerChange:t,onCreateServer:r,onJoinServer:a,userRole:l,userId:c,unreadMentions:h={}})=>{const[m,g]=O.useState(!1),[v,b]=O.useState(null),_=(C,R)=>{C.preventDefault(),b({server:R,position:{x:C.clientX,y:C.clientY}})};return d.jsxs("div",{className:"w-20 bg-dark-bg h-full flex flex-col items-center",children:[d.jsx("div",{className:"flex flex-col items-center",children:d.jsx("button",{onClick:()=>t("home"),className:St("transition-all duration-200 rounded-2xl overflow-hidden",e==="home"||!e?"rounded-xl ring-2 ring-brand-primary ring-offset-2 ring-offset-dark-bg":"hover:rounded-xl"),children:d.jsx("img",{src:_P,alt:"Home",className:"w-16 h-16 object-contain cursor-pointer bg-dark-bg p-1"})})}),d.jsx("div",{className:"w-8 h-0.5 bg-dark-hover my-2"}),d.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1 overflow-y-auto",children:[n.map(C=>d.jsxs("div",{className:"relative",children:[d.jsx("button",{onClick:()=>t(C.id),onContextMenu:R=>_(R,C),className:St("w-12 h-12 rounded-2xl flex items-center justify-center transition-all duration-200","hover:rounded-xl",e===C.id?"bg-brand-primary text-white rounded-xl":"bg-dark-sidebar text-dark-text hover:bg-brand-primary hover:text-white"),title:C.name,children:C.icon?d.jsx("img",{src:C.icon,alt:C.name,className:"w-full h-full rounded-2xl object-cover"}):d.jsx("span",{className:"text-xl font-bold",children:C.name.charAt(0).toUpperCase()})}),h[C.id]?.count>0&&d.jsx("div",{className:"absolute -top-1 -right-1 min-w-5 h-5 bg-red-500 rounded-full flex items-center justify-center border-2 border-dark-bg pointer-events-none",children:d.jsx("span",{className:"text-white text-xs font-bold px-1",children:h[C.id].count>99?"99+":h[C.id].count})})]},C.id)),d.jsx("div",{className:"w-8 h-0.5 bg-dark-hover my-1"}),d.jsxs("div",{className:"relative pb-2",children:[d.jsx("button",{id:"add-server-btn",onClick:C=>{const R=C.currentTarget.getBoundingClientRect();document.documentElement.style.setProperty("--btn-top",`${R.top}px`),g(!m)},className:"w-12 h-12 rounded-2xl bg-dark-sidebar text-green-500 flex items-center justify-center hover:bg-green-500 hover:text-white hover:rounded-xl transition-all duration-200",title:"Add Server",children:d.jsx(Fu,{size:28})}),m&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 z-50",onClick:()=>g(!1)}),d.jsxs("div",{className:"fixed left-[80px] bg-dark-sidebar border border-dark-hover rounded-lg shadow-lg py-2 z-50 w-48",style:{top:"var(--btn-top)"},children:[l==="admin"&&d.jsx("button",{onClick:()=>{r(),g(!1)},className:"w-full px-4 py-2 text-left text-sm text-dark-text hover:bg-dark-hover transition-colors",children:"Create Server"}),d.jsx("button",{onClick:()=>{a(),g(!1)},className:"w-full px-4 py-2 text-left text-sm text-dark-text hover:bg-dark-hover transition-colors",children:"Join Server"})]})]})]})]}),v&&d.jsx(xP,{server:v.server,position:v.position,userRole:l,userId:c,onClose:()=>b(null),onDelete:()=>{b(null)}})]})},wP=300*1e3,EP=n=>{const e=O.useRef(null);O.useEffect(()=>{if(!n)return;const t=async()=>{try{await nt(Me(ve,"users",n),{lastSeen:_t(),isOnline:!0})}catch(a){console.error("Error updating presence:",a)}};t(),e.current=setInterval(t,wP);const r=()=>{navigator.sendBeacon&&t()};return window.addEventListener("beforeunload",r),()=>{e.current&&clearInterval(e.current),window.removeEventListener("beforeunload",r)}},[n])},SP=(n,e=6)=>{if(!n)return!1;const t=n.toMillis?n.toMillis():new Date(n).getTime(),r=Date.now(),a=e*60*1e3;return r-t<a},AE=({users:n,currentUserId:e,onStartDm:t})=>{const{currentServer:r}=kd(),[a,l]=O.useState(null),[c,h]=O.useState([]);O.useEffect(()=>{if(!r||r==="home"){h([]);return}const k=ts(mt(ve,"servers",r,"roles"));return Sr(k,$=>{const N=[];$.forEach(V=>{N.push({id:V.id,...V.data()})}),h(N)})},[r]);const m=k=>k.presence==="invisible"?!1:SP(k.lastSeen),g=n.filter(k=>m(k)),v=n.filter(k=>!m(k)),b=g.reduce((k,B)=>{const $=B.serverRole||B.role||"member";return k[$]||(k[$]=[]),k[$].push(B),k},{}),R=[...[{name:"admin",position:-3},{name:"moderator",position:-2},{name:"member",position:-1}],...c.map(k=>({name:k.name,position:k.position??999}))].sort((k,B)=>k.position-B.position).map(k=>k.name).filter(k=>b[k]?.length>0),I=k=>{const B=m(k);return d.jsxs("div",{onClick:()=>l(k),className:St("flex items-center gap-2 px-2 py-1.5 rounded cursor-pointer","hover:bg-dark-hover transition-colors",k.id===e&&"bg-dark-hover/50",!B&&"opacity-50"),children:[d.jsxs("div",{className:"relative flex-shrink-0",children:[k.photoUrl?d.jsx("img",{src:k.photoUrl,alt:k.displayName,className:"w-8 h-8 rounded-full object-cover",onError:$=>{$.target.style.display="none",$.target.nextSibling.style.display="flex"}}):null,d.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold text-sm",style:{display:k.photoUrl?"none":"flex"},children:k.displayName?.[0]?.toUpperCase()||"U"}),d.jsx("div",{className:"absolute bottom-0 right-0",children:d.jsx(kk,{status:B?k.presence||"online":"offline",size:"sm"})})]}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-sm text-dark-text truncate",children:k.displayName||"Unknown"}),d.jsx("span",{className:St("text-xs px-1.5 py-0.5 rounded border",PC(k.serverRole||k.role)),children:(k.serverRole||k.role)?.charAt(0).toUpperCase()+(k.serverRole||k.role)?.slice(1)})]}),k.status&&d.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[d.jsx("span",{className:"text-xs",children:k.status.emoji}),d.jsx("span",{className:"text-xs text-dark-muted truncate",children:k.status.text})]})]})]},k.id)};return d.jsxs("div",{className:"w-60 bg-dark-sidebar h-full overflow-y-auto py-3",children:[d.jsxs("div",{className:"px-2",children:[R.map(k=>{const B=b[k]||[];return B.length===0?null:d.jsxs("div",{className:"mb-4",children:[d.jsxs("div",{className:"text-xs font-semibold text-dark-muted uppercase px-2 mb-2",children:[k.charAt(0).toUpperCase()+k.slice(1),"s  ",B.length]}),B.map(I)]},k)}),v.length>0&&d.jsxs("div",{className:"mt-4",children:[d.jsxs("div",{className:"text-xs font-semibold text-gray-500 uppercase px-2 mb-2",children:["Offline  ",v.length]}),v.map(I)]})]}),d.jsx(bb,{user:a,isOpen:!!a,onClose:()=>l(null),onMessage:k=>{t&&t(k),l(null)}})]})},TP=({isOpen:n,onClose:e,onConfirm:t,url:r})=>{const[a,l]=O.useState(!1),c=()=>{a&&localStorage.setItem("dontAskExternalLinks","true"),t(),e()};return d.jsx(Us,{isOpen:n,onClose:e,title:"External Link Warning",size:"sm",children:d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:d.jsxs("p",{className:"text-dark-text text-sm",children:[d.jsx("span",{className:"font-semibold text-yellow-500",children:" Security Warning"}),d.jsx("br",{}),d.jsx("br",{}),"You are about to open an external link. External links may lead to harmful or malicious websites. Please ensure you trust the source before proceeding."]})}),d.jsxs("div",{className:"bg-dark-bg p-3 rounded-lg",children:[d.jsx("p",{className:"text-xs text-dark-muted mb-1",children:"Link:"}),d.jsx("p",{className:"text-dark-text text-sm break-all font-mono",children:r})]}),d.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:a,onChange:h=>l(h.target.checked),className:`w-4 h-4 rounded border-dark-hover bg-dark-input text-brand-primary 
                       focus:ring-2 focus:ring-brand-primary cursor-pointer`}),d.jsx("span",{className:"text-sm text-dark-text",children:"Don't ask me again"})]}),d.jsxs("div",{className:"flex gap-3 justify-end pt-2",children:[d.jsx(Je,{variant:"secondary",onClick:e,children:"Cancel"}),d.jsx(Je,{variant:"primary",onClick:c,children:"Open Link"})]})]})})},CP=n=>{if(!n)return n;let e=n;return e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=e.replace(/```([^`]+)```/g,'<pre class="bg-dark-input text-dark-text p-2 rounded my-1 overflow-x-auto"><code>$1</code></pre>'),e=e.replace(/`([^`]+)`/g,'<code class="bg-dark-input text-dark-text px-1 py-0.5 rounded text-sm">$1</code>'),e=e.replace(/\*\*([^*]+)\*\*/g,'<strong class="font-bold">$1</strong>'),e=e.replace(/\*([^*]+)\*/g,'<em class="italic">$1</em>'),e=e.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer" class="text-brand-primary hover:underline">$1</a>'),e=e.replace(/@(everyone|[a-zA-Z0-9_]+)\b/g,'<span class="text-brand-primary font-medium cursor-pointer hover:underline" data-mention="$1">$1</span>'),e=e.replace(/\n/g,"<br>"),e},Ak=({children:n,onMentionClick:e})=>{const t=CP(n),r=a=>{const l=a.target.getAttribute("data-mention");l&&e&&e(l)};return d.jsx("div",{dangerouslySetInnerHTML:{__html:t},className:"markdown-content",onClick:r})},kP=["","","","","","","","","",""],RE=({onSelect:n,onClose:e})=>d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 z-40",onClick:e}),d.jsx("div",{className:"absolute left-0 bottom-full mb-2 bg-dark-sidebar border border-dark-hover rounded-lg shadow-lg p-2 z-50",children:d.jsx("div",{className:"flex gap-1",children:kP.map(t=>d.jsx("button",{onClick:()=>n(t),className:"w-8 h-8 flex items-center justify-center text-lg hover:bg-dark-hover rounded transition-colors",title:t,children:t},t))})})]}),AP=({message:n,currentUserId:e,serverId:t,channelId:r,users:a})=>{const[l,c]=O.useState(!1),h=n.poll;if(!h)return null;const m=n.userId===e,g=h.ended===!0,v=h.options.reduce((I,k,B)=>I+(h.votes?.[`option_${B}`]?.length||0),0),b=h.options.map((I,k)=>h.votes?.[`option_${k}`]?.includes(e)?k:-1).filter(I=>I!==-1);b.length>0;const _=async I=>{if(!(l||g)){c(!0);try{const k=`poll.votes.option_${I}`,B=Me(ve,"servers",t,"channels",r,"messages",n.id);if(h.votes?.[`option_${I}`]?.includes(e))await nt(B,{[k]:hm(e)});else{if(!h.multipleChoice&&b.length>0)for(const N of b)await nt(B,{[`poll.votes.option_${N}`]:hm(e)});await nt(B,{[k]:Cd(e)})}}catch(k){console.error("Error voting:",k)}finally{c(!1)}}},C=async()=>{if(!(!m||g))try{const I=Me(ve,"servers",t,"channels",r,"messages",n.id);await nt(I,{"poll.ended":!0})}catch(I){console.error("Error ending poll:",I)}},R=I=>h.anonymous?null:(h.votes?.[`option_${I}`]||[]).map(B=>a?.find($=>$.id===B)?.displayName||"Unknown").join(", ");return d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4 mt-2 border border-dark-hover max-w-md",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx(hb,{className:"text-brand-primary",size:20}),d.jsx("span",{className:"text-xs text-dark-muted uppercase tracking-wide font-semibold",children:"Poll"}),h.multipleChoice&&d.jsx("span",{className:"text-xs text-dark-muted bg-dark-hover px-2 py-0.5 rounded",children:"Multiple Choice"}),g&&d.jsx("span",{className:"text-xs text-red-400 bg-red-400/10 px-2 py-0.5 rounded",children:"Ended"})]}),d.jsx("h3",{className:"text-dark-text font-semibold mb-4",children:h.question}),d.jsx("div",{className:"space-y-2",children:h.options.map((I,k)=>{const B=h.votes?.[`option_${k}`]?.length||0,$=v>0?Math.round(B/v*100):0,N=b.includes(k),V=R(k);return d.jsxs("button",{onClick:()=>_(k),disabled:l||g,className:`w-full text-left p-3 rounded-lg relative overflow-hidden transition-all group ${N?"bg-brand-primary/20 border-2 border-brand-primary":"bg-dark-sidebar border border-dark-hover hover:border-dark-muted"} ${g?"cursor-not-allowed opacity-80":""}`,children:[v>0&&d.jsx("div",{className:`absolute inset-0 transition-all duration-500 ${N?"bg-brand-primary/30":"bg-dark-hover/50"}`,style:{width:`${$}%`}}),d.jsxs("div",{className:"relative flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[N&&d.jsx("div",{className:"w-5 h-5 bg-brand-primary rounded-full flex items-center justify-center",children:d.jsx(Ao,{className:"text-white",size:14})}),d.jsx("span",{className:`text-sm ${N?"text-dark-text font-medium":"text-dark-muted"}`,children:I})]}),v>0&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("span",{className:"text-xs text-dark-muted",children:[B," vote",B!==1?"s":""]}),d.jsxs("span",{className:"text-sm font-semibold text-dark-text",children:[$,"%"]})]})]}),V&&B>0&&d.jsx("div",{className:"text-xs text-dark-muted mt-1 truncate opacity-0 group-hover:opacity-100 transition-opacity",children:V})]},k)})}),d.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-dark-hover",children:[d.jsxs("div",{className:"flex items-center gap-1 text-xs text-dark-muted",children:[d.jsx(db,{size:14}),d.jsxs("span",{children:[v," total vote",v!==1?"s":""]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[h.anonymous&&d.jsx("span",{className:"text-xs text-dark-muted",children:"Anonymous"}),m&&!g&&d.jsxs("button",{onClick:C,className:"flex items-center gap-1.5 text-xs font-medium text-red-400 bg-red-400/10 hover:bg-red-400/20 px-3 py-1.5 rounded transition-all border border-red-400/20 hover:border-red-400/30",children:[d.jsx(cM,{size:14}),"End Poll"]})]})]})]})},Rk=/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:watch\?v=|embed\/|shorts\/)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,Nk=/(?:https?:\/\/)?(?:open\.)?spotify\.com\/(track|album|playlist|artist|episode|show)\/([a-zA-Z0-9]+)/,Ik=/(?:https?:\/\/)?(?:www\.)?(?:twitter\.com|x\.com)\/(\w+)\/status\/(\d+)/,RP=/\.(jpg|jpeg|png|gif|webp|bmp|svg)(\?.*)?$/i,NP=/\.(mp4|webm|ogg|mov)(\?.*)?$/i,IP=/\.(mp3|wav|ogg|m4a)(\?.*)?$/i,jP=n=>{const e=n.match(Rk);return e?e[1]:null},DP=n=>{const e=n.match(Nk);return e?{type:e[1],id:e[2]}:null},MP=n=>{const e=n.match(Ik);return e?{user:e[1],id:e[2]}:null},jk=n=>Rk.test(n)?"youtube":Nk.test(n)?"spotify":Ik.test(n)?"twitter":RP.test(n)?"image":NP.test(n)?"video":IP.test(n)?"audio":n.includes("/raw/upload/")||/\.(zip|rar|7z|exe|pdf|docx|xlsx|txt|iso|yml|json|xml|csv)$/i.test(n)?"file":"generic",Dk=n=>{const e=/(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/g;return n.match(e)||[]},OP=({url:n})=>{const e=jP(n),[t,r]=O.useState(!1);if(!e)return null;const a=`https://img.youtube.com/vi/${e}/mqdefault.jpg`;return d.jsxs("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar",children:[d.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border-b border-dark-hover",children:[d.jsx(OO,{className:"text-red-500",size:18}),d.jsx("span",{className:"text-xs text-dark-muted font-medium",children:"YouTube"})]}),t?d.jsx("div",{className:"relative pt-[56.25%]",children:d.jsx("iframe",{className:"absolute inset-0 w-full h-full",src:`https://www.youtube.com/embed/${e}?autoplay=1`,title:"YouTube video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):d.jsxs("div",{className:"relative cursor-pointer group",onClick:()=>r(!0),children:[d.jsx("img",{src:a,alt:"YouTube thumbnail",className:"w-full h-auto",onError:l=>{l.target.src=`https://img.youtube.com/vi/${e}/default.jpg`}}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 group-hover:bg-black/50 transition-colors",children:d.jsx(lM,{className:"text-white/90 group-hover:text-white group-hover:scale-110 transition-all",size:64})})]}),d.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[d.jsx("span",{className:"text-xs text-dark-muted truncate",children:n}),d.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-dark-muted hover:text-brand-primary transition-colors",onClick:l=>l.stopPropagation(),children:d.jsx(ub,{size:16})})]})]})},PP=({url:n})=>{const e=DP(n);if(!e)return null;const r={track:152,album:352,playlist:352,artist:352,episode:232,show:232}[e.type]||152;return d.jsxs("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar",children:[d.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border-b border-dark-hover",children:[d.jsx(MO,{className:"text-green-500",size:18}),d.jsxs("span",{className:"text-xs text-dark-muted font-medium",children:["Spotify ",e.type]})]}),d.jsx("iframe",{src:`https://open.spotify.com/embed/${e.type}/${e.id}?utm_source=generator&theme=0`,width:"100%",height:r,frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",className:"bg-transparent"}),d.jsxs("div",{className:"px-3 py-2 flex items-center justify-between border-t border-dark-hover",children:[d.jsx("span",{className:"text-xs text-dark-muted truncate",children:n}),d.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-dark-muted hover:text-green-500 transition-colors",children:d.jsx(ub,{size:16})})]})]})},LP=({url:n})=>d.jsx("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar",children:d.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"block cursor-pointer",children:d.jsx("img",{src:n,alt:"Attachment",className:"w-full h-auto max-h-[400px] object-contain bg-black/50",loading:"lazy",onError:e=>{e.target.style.display="none"}})})}),VP=({url:n})=>{const e=O.useRef(null),[t,r]=O.useState(!1),[a,l]=O.useState(!1);O.useEffect(()=>{if(window.twttr)c();else{const h=document.createElement("script");h.src="https://platform.twitter.com/widgets.js",h.async=!0,h.onload=()=>{window.twttr&&e.current&&c()},h.onerror=()=>l(!0),document.body.appendChild(h)}},[n]);const c=()=>{window.twttr&&e.current&&(e.current.innerHTML="",window.twttr.widgets.createTweet(MP(n)?.id,e.current,{theme:"dark",conversation:"none"}).then(h=>{r(!!h),h||l(!0)}).catch(()=>l(!0)))};return a?d.jsx("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar p-3",children:d.jsxs("div",{className:"flex items-center gap-2 text-dark-muted",children:[d.jsx(fE,{className:"text-sky-400",size:18}),d.jsx("span",{className:"text-sm",children:"Tweet could not be loaded"}),d.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"ml-auto text-brand-primary hover:underline text-sm",children:"View on X"})]})}):d.jsxs("div",{className:"mt-2 max-w-md",children:[!t&&d.jsx("div",{className:"rounded-lg border border-dark-hover bg-dark-sidebar p-4 animate-pulse",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(fE,{className:"text-sky-400",size:18}),d.jsx("span",{className:"text-sm text-dark-muted",children:"Loading tweet..."})]})}),d.jsx("div",{ref:e,className:t?"":"hidden"})]})},UP=({url:n})=>d.jsx("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar",children:d.jsx("video",{src:n,controls:!0,className:"w-full max-h-[400px] bg-black"})}),zP=({url:n})=>d.jsxs("div",{className:"mt-2 max-w-md rounded-lg border border-dark-hover bg-dark-sidebar p-3 flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-primary/20 flex items-center justify-center flex-shrink-0",children:d.jsx(EM,{className:"text-brand-primary",size:24})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"text-xs text-dark-muted mb-1 truncate",children:n.split("/").pop()}),d.jsx("audio",{src:n,controls:!0,className:"w-full h-8"})]})]}),BP=({url:n})=>{const e=n.split("/").pop().split("?")[0]||"file",t=e.split(".").pop();return d.jsxs("div",{className:"mt-2 max-w-md rounded-lg border border-dark-hover bg-dark-sidebar p-3 flex items-center gap-3 hover:bg-dark-hover transition-colors",children:[d.jsx("div",{className:"w-12 h-12 rounded bg-dark-input flex items-center justify-center flex-shrink-0",children:d.jsx("span",{className:"text-xs font-bold text-dark-text uppercase",children:t.length<5?t:"FILE"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"text-sm font-medium text-dark-text truncate",children:e}),d.jsx("div",{className:"text-xs text-dark-muted",children:"Attachment"})]}),d.jsx("a",{href:n,download:!0,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-full hover:bg-white/10 text-dark-muted hover:text-white transition-colors",title:"Download",children:d.jsx(yM,{size:20})})]})},FP=({url:n})=>{let e="";try{e=new URL(n).hostname.replace("www.","")}catch{e=n}return d.jsxs("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"mt-2 flex items-center gap-3 max-w-md rounded-lg border border-dark-hover bg-dark-sidebar p-3 hover:bg-dark-hover transition-colors group",children:[d.jsx("div",{className:"w-10 h-10 rounded-lg bg-brand-primary/20 flex items-center justify-center",children:d.jsx(ub,{className:"text-brand-primary",size:20})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"text-sm font-medium text-dark-text truncate group-hover:text-brand-primary transition-colors",children:e}),d.jsx("div",{className:"text-xs text-dark-muted truncate",children:n})]})]})},HP=({url:n})=>{switch(jk(n)){case"youtube":return d.jsx(OP,{url:n});case"spotify":return d.jsx(PP,{url:n});case"twitter":return d.jsx(VP,{url:n});case"image":return d.jsx(LP,{url:n});case"video":return d.jsx(UP,{url:n});case"audio":return d.jsx(zP,{url:n});case"file":return d.jsx(BP,{url:n});default:return d.jsx(FP,{url:n})}},$P=({text:n})=>{const t=Dk(n).slice(0,3);return t.length===0?null:d.jsx("div",{className:"space-y-2",children:t.map((r,a)=>d.jsx(HP,{url:r},`${r}-${a}`))})},Mk=({serverId:n,channelId:e,users:t,currentUserId:r,userRole:a,onReply:l,onMessagesChange:c})=>{const[h,m]=O.useState([]),[g,v]=O.useState(null),[b,_]=O.useState(null),[C,R]=O.useState(null),[I,k]=O.useState(null),[B,$]=O.useState(""),[N,V]=O.useState(null),[z,F]=O.useState("bottom"),[E,S]=O.useState(null),[A,D]=O.useState(!0),[M,U]=O.useState(!1),[P,xe]=O.useState(null),Ee=O.useRef(null),Y=O.useRef(null),se=O.useRef(0),J=O.useRef(!0),Ce=O.useRef(t);O.useEffect(()=>{Ce.current=t},[t]);const{success:Ne,error:H}=Ys(),q=()=>{Ee.current?.scrollIntoView({behavior:"smooth"})};O.useEffect(()=>{if(!e||!e)return;const Re=ts(n?mt(ve,"servers",n,"channels",e,"messages"):mt(ve,"dms",e,"messages"),k0("timestamp","desc"),A0(20)),Ie=Sr(Re,X=>{const le=[];if(X.forEach(Se=>{le.push({id:Se.id,...Se.data()})}),le.reverse(),!J.current&&le.length>se.current&&r){const Se=Ce.current?.find(Oe=>Oe.id===r);if(Se?.displayName){const Oe=le.slice(se.current),qe=Oe.some(It=>It.userId!==r&&$D(It.text,Se.displayName)),Ke=Oe.some(It=>{const kt=It.userId!==r&&It.replyTo?.userId===r;return kt&&console.log("Reply notification:",It),kt});(qe||Ke)&&(console.log("Playing notification sound",{hasMention:qe,hasReply:Ke}),R0())}}se.current=le.length,m(le),J.current&&(J.current=!1),le.length>0&&xe(le[0]),D(le.length===20),c&&c(le),setTimeout(q,100)});return()=>{Ie(),J.current=!0}},[e,n,r,c]);const re=async()=>{if(!e||!P||M||!A)return;U(!0);const ae=Y.current,Re=ae?.scrollHeight||0;try{const Ie=ts(n?mt(ve,"servers",n,"channels",e,"messages"):mt(ve,"dms",e,"messages"),k0("timestamp","desc"),aD(P.timestamp),A0(20)),X=await ko(Ie),le=[];X.forEach(Se=>{le.push({id:Se.id,...Se.data()})}),le.length>0?(le.reverse(),m(Se=>[...le,...Se]),xe(le[0]),D(le.length===20),setTimeout(()=>{ae&&(ae.scrollTop=ae.scrollHeight-Re)},0)):D(!1)}catch(Ie){console.error("Error loading more messages:",Ie),H("Failed to load more messages")}finally{U(!1)}},ne=ae=>t.find(Re=>Re.id===ae)||{displayName:"Unknown",role:"member"},we=ae=>r===ae||a==="admin",ye=ae=>{if(ae.userId!==r)return!1;if(!ae.timestamp)return!0;const Re=ae.timestamp.toDate();return(new Date-Re)/1e3/60<15},Te=async()=>{if(g)try{const ae=t.find(Ie=>Ie.id===g.userId),Re=n?Me(ve,"servers",n,"channels",e,"messages",g.id):Me(ve,"dms",e,"messages",g.id);await tc(Re),await Vn(mt(ve,"adminLogs"),{type:"message_delete",channelId:e,messageId:g.id,userId:r,deletedText:g.text||"(empty)",originalUserId:g.userId,originalUserName:ae?.displayName||"Unknown User",timestamp:_t()}),Ne("Message deleted successfully")}catch(ae){console.error("Error deleting message:",ae),H("Failed to delete message")}finally{v(null)}},Fe=ae=>{k(ae.id),$(ae.text)},Ye=()=>{k(null),$("")},be=async()=>{if(!I)return;if(!B.trim()){H("Message cannot be empty");return}const ae=I,Re=B.trim(),X=h.find(le=>le.id===ae)?.text||"";k(null),$("");try{const le=n?Me(ve,"servers",n,"channels",e,"messages",ae):Me(ve,"dms",e,"messages",ae);await nt(le,{text:Re,edited:!0,editedAt:_t()}),await Vn(mt(ve,"adminLogs"),{type:"message_edit",channelId:e,messageId:ae,userId:r,originalText:X,newText:Re,timestamp:_t()}),Ne("Message updated successfully")}catch(le){console.error("Error editing message:",le),le.code==="resource-exhausted"?H("Quota exceeded. Please try again tomorrow."):H("Failed to edit message")}},he=async(ae,Re)=>{try{const Ie=h.find(Oe=>Oe.id===ae);if(!Ie)return;const X={...Ie.reactions},le=X[Re]||[];if(le.includes(r)){const Oe=le.filter(qe=>qe!==r);Oe.length===0?delete X[Re]:X[Re]=Oe}else X[Re]=[...le,r];const Se=n?Me(ve,"servers",n,"channels",e,"messages",ae):Me(ve,"dms",e,"messages",ae);await nt(Se,{reactions:X})}catch(Ie){console.error("Error toggling reaction:",Ie),H("Failed to update reaction")}},_e=async ae=>{if(a!=="admin"&&a!=="moderator"){H("Only admins and moderators can pin messages");return}try{const Re=!ae.pinned,Ie=n?Me(ve,"servers",n,"channels",e,"messages",ae.id):Me(ve,"dms",e,"messages",ae.id);await nt(Ie,{pinned:Re,pinnedBy:Re?r:null,pinnedAt:Re?_t():null}),await Vn(mt(ve,"adminLogs"),{type:Re?"message_pin":"message_unpin",channelId:e,messageId:ae.id,userId:r,messageText:ae.text,timestamp:_t()}),Ne(Re?"Message pinned":"Message unpinned")}catch(Re){console.error("Error toggling pin:",Re),H("Failed to pin message")}};return d.jsxs("div",{ref:Y,className:"flex-1 overflow-y-auto px-4 py-4 space-y-4",children:[A&&h.length>0&&d.jsx("div",{className:"flex justify-center mb-4",children:d.jsx("button",{onClick:re,disabled:M,className:"px-4 py-2 bg-brand-primary hover:bg-brand-primary/80 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:M?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Loading..."]}):"Load More Messages"})}),h.length===0?d.jsx("div",{className:"text-center text-dark-muted py-8",children:"No messages yet. Start the conversation!"}):h.map(ae=>{const Re=ne(ae.userId);return d.jsxs("div",{id:`message-${ae.id}`,className:"flex gap-3 hover:bg-dark-hover/30 px-2 py-1 rounded group transition-colors",children:[d.jsxs("div",{className:"relative flex-shrink-0",children:[Re.photoUrl?d.jsx("img",{src:Re.photoUrl,alt:Re.displayName,onClick:()=>R(Re),className:"w-10 h-10 rounded-full object-cover cursor-pointer hover:opacity-80 transition-opacity",onError:Ie=>{Ie.target.style.display="none",Ie.target.nextSibling.style.display="flex"}}):null,d.jsx("div",{onClick:()=>R(Re),className:"w-10 h-10 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold cursor-pointer hover:opacity-80 transition-opacity",style:{display:Re.photoUrl?"none":"flex"},children:Re.displayName?.[0]?.toUpperCase()||"U"})]}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("span",{className:"font-semibold text-dark-text hover:underline cursor-pointer",onClick:()=>R(Re),children:Re.displayName||"Unknown"}),d.jsx("span",{className:St("text-xs px-1.5 py-0.5 rounded border",PC(Re.role)),children:Re.role?.charAt(0).toUpperCase()+Re.role?.slice(1)}),d.jsx("span",{className:"text-xs text-dark-muted",children:np(ae.timestamp)}),ae.edited&&d.jsx("span",{className:"text-xs text-dark-muted italic",children:"(edited)"}),I!==ae.id&&d.jsxs("div",{className:"ml-auto relative z-50",children:[d.jsx("button",{onClick:Ie=>{const X=Ie.clientY,le=window.innerHeight,Se=X<le/2;F(Se?"bottom":"top"),V(N===ae.id?null:ae.id)},className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-dark-hover rounded transition-all",title:"More options",children:d.jsx(AM,{size:18,className:"text-dark-muted"})}),N===ae.id&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>V(null)}),d.jsxs("div",{className:`absolute right-0 ${z==="top"?"bottom-full mb-1":"top-full mt-1"} bg-dark-sidebar border border-dark-hover rounded-lg shadow-lg py-1 z-50 min-w-[120px]`,children:[d.jsxs("button",{onClick:()=>{l&&l(ae),V(null)},className:"w-full px-3 py-2 text-left text-sm text-dark-text hover:bg-dark-hover flex items-center gap-2",children:[d.jsx(pM,{size:16,className:"text-green-400"}),"Reply"]}),ye(ae)&&d.jsxs("button",{onClick:()=>{Fe(ae),V(null)},className:"w-full px-3 py-2 text-left text-sm text-dark-text hover:bg-dark-hover flex items-center gap-2",children:[d.jsx(Hl,{size:16,className:"text-blue-400"}),"Edit"]}),(a==="admin"||a==="moderator")&&d.jsxs("button",{onClick:()=>{_e(ae),V(null)},className:"w-full px-3 py-2 text-left text-sm text-dark-text hover:bg-dark-hover flex items-center gap-2",children:[d.jsx(Fl,{size:16,className:"text-blue-400"}),ae.pinned?"Unpin":"Pin"]}),we(ae.userId)&&d.jsxs("button",{onClick:()=>{v({id:ae.id,text:ae.text,userId:ae.userId}),V(null)},className:"w-full px-3 py-2 text-left text-sm text-admin hover:bg-dark-hover flex items-center gap-2",children:[d.jsx(bo,{size:16}),"Delete"]})]})]})]})]}),I===ae.id?d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"text",value:B,onChange:Ie=>$(Ie.target.value),onKeyDown:Ie=>{Ie.key==="Enter"&&be(),Ie.key==="Escape"&&Ye()},className:`flex-1 bg-dark-input text-dark-text px-3 py-1.5 rounded
                                 border border-brand-primary outline-none`,autoFocus:!0}),d.jsx("button",{onClick:be,className:"text-green-500 hover:text-green-400 transition-colors",title:"Save (Enter)",children:d.jsx(Ao,{size:20})}),d.jsx("button",{onClick:Ye,className:"text-admin hover:text-admin/80 transition-colors",title:"Cancel (Esc)",children:d.jsx(An,{size:20})})]}):d.jsxs(d.Fragment,{children:[ae.replyTo&&d.jsxs("div",{className:"mb-2 ml-2 pl-3 border-l-2 border-green-400 text-sm bg-dark-sidebar/30 rounded py-1",children:[d.jsxs("div",{className:"text-xs text-green-400 font-semibold",children:["Replying to ",ne(ae.replyTo.userId).displayName]}),d.jsx("div",{className:"text-dark-muted italic truncate",children:ae.replyTo.text})]}),ae.pinned&&d.jsxs("div",{className:"flex items-center gap-1 text-xs text-blue-400 mb-1",children:[d.jsx(Fl,{size:14}),d.jsx("span",{children:"Pinned"})]}),(()=>{const Ie=Dk(ae.text);let X=ae.text;return Ie.filter(Se=>{const Oe=jk(Se);return["youtube","spotify","twitter","image","video","audio","file"].includes(Oe)}).forEach(Se=>{X=X.replace(Se,"")}),X=X.trim(),X.length>0&&d.jsx("div",{className:"text-dark-text whitespace-pre-wrap break-words",children:d.jsx(Ak,{onMentionClick:Se=>{const Oe=t.find(qe=>qe.displayName?.toLowerCase()===Se.toLowerCase());Oe&&R(Oe)},children:X})})})(),d.jsx($P,{text:ae.text}),ae.type==="poll"&&d.jsx(AP,{message:ae,currentUserId:r,serverId:n,channelId:e,users:t}),ae.reactions&&Object.keys(ae.reactions).length>0&&d.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[Object.entries(ae.reactions).map(([Ie,X])=>d.jsxs("button",{onClick:()=>he(ae.id,Ie),className:St("px-2 py-1 rounded-full text-sm flex items-center gap-1 transition-colors",X.includes(r)?"bg-brand-primary/20 border border-brand-primary text-brand-primary":"bg-dark-hover border border-dark-hover text-dark-text hover:border-dark-muted"),title:`${X.map(le=>ne(le).displayName).join(", ")}`,children:[d.jsx("span",{children:Ie}),d.jsx("span",{className:"text-xs",children:X.length})]},Ie)),d.jsxs("div",{className:"relative",children:[d.jsx("button",{onClick:()=>S(E===ae.id?null:ae.id),className:"px-2 py-1 rounded-full text-sm bg-dark-hover border border-dark-hover hover:border-dark-muted transition-colors",title:"Add reaction",children:d.jsx(oE,{size:16,className:"text-dark-muted"})}),E===ae.id&&d.jsx(RE,{onSelect:Ie=>{he(ae.id,Ie),S(null)},onClose:()=>S(null)})]})]}),(!ae.reactions||Object.keys(ae.reactions).length===0)&&d.jsxs("div",{className:"relative mt-2",children:[d.jsxs("button",{onClick:()=>S(E===ae.id?null:ae.id),className:"opacity-0 group-hover:opacity-100 px-2 py-1 rounded text-xs bg-dark-hover hover:bg-dark-input transition-all flex items-center gap-1",title:"Add reaction",children:[d.jsx(oE,{size:14}),d.jsx("span",{className:"text-dark-muted",children:"Add reaction"})]}),E===ae.id&&d.jsx(RE,{onSelect:Ie=>{he(ae.id,Ie),S(null)},onClose:()=>S(null)})]})]})]})]},ae.id)}),d.jsx("div",{ref:Ee}),d.jsx(nc,{isOpen:!!g,onClose:()=>v(null),onConfirm:Te,title:"Delete Message",message:"Are you sure you want to delete this message? This action cannot be undone.",confirmText:"Delete",variant:"danger"}),d.jsx(TP,{isOpen:!!b,onClose:()=>_(null),onConfirm:()=>window.open(b?.url,"_blank","noopener,noreferrer"),url:b?.url}),d.jsx(bb,{user:C,isOpen:!!C,onClose:()=>R(null)})]})},NE={smileys:{name:"Smileys & People",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},animals:{name:"Animals & Nature",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},food:{name:"Food & Drink",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},activities:{name:"Activities",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},travel:{name:"Travel & Places",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},objects:{name:"Objects",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},symbols:{name:"Symbols",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","0","1","2","3","4","5","6","7","8","9","","","#","*","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},flags:{name:"Flags",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]}},qP=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],GP=({onSelect:n,onClose:e})=>{const[t,r]=O.useState("smileys");return d.jsxs("div",{className:"absolute bottom-full right-0 mb-2 bg-dark-sidebar border border-dark-hover rounded-lg shadow-xl w-80 z-50",children:[d.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-dark-hover",children:[d.jsx("span",{className:"text-sm font-semibold text-dark-text",children:"Emoji Picker"}),d.jsx("button",{onClick:e,className:"text-dark-muted hover:text-dark-text transition-colors",children:d.jsx(An,{size:18})})]}),d.jsxs("div",{className:"p-3 border-b border-dark-hover",children:[d.jsx("div",{className:"text-xs text-dark-muted mb-2 font-semibold",children:"POPULAR"}),d.jsx("div",{className:"grid grid-cols-10 gap-1",children:qP.map((a,l)=>d.jsx("button",{onClick:()=>n(a),className:"text-2xl hover:bg-dark-hover rounded p-1 transition-colors",title:a,children:a},l))})]}),d.jsx("div",{className:"flex gap-1 p-2 border-b border-dark-hover overflow-x-auto",children:Object.entries(NE).map(([a,l])=>d.jsx("button",{onClick:()=>r(a),className:`text-xl p-2 rounded transition-colors ${t===a?"bg-brand-primary/20 text-brand-primary":"hover:bg-dark-hover text-dark-muted"}`,title:l.name,children:l.icon},a))}),d.jsx("div",{className:"p-3 h-64 overflow-y-auto",children:d.jsx("div",{className:"grid grid-cols-8 gap-1",children:NE[t].emojis.map((a,l)=>d.jsx("button",{onClick:()=>n(a),className:"text-2xl hover:bg-dark-hover rounded p-1 transition-colors",title:a,children:a},l))})})]})};let ff;const YP=new Uint8Array(16);function KP(){if(!ff&&(ff=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ff))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ff(YP)}const On=[];for(let n=0;n<256;++n)On.push((n+256).toString(16).slice(1));function QP(n,e=0){return On[n[e+0]]+On[n[e+1]]+On[n[e+2]]+On[n[e+3]]+"-"+On[n[e+4]]+On[n[e+5]]+"-"+On[n[e+6]]+On[n[e+7]]+"-"+On[n[e+8]]+On[n[e+9]]+"-"+On[n[e+10]]+On[n[e+11]]+On[n[e+12]]+On[n[e+13]]+On[n[e+14]]+On[n[e+15]]}const XP=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),IE={randomUUID:XP};function WP(n,e,t){if(IE.randomUUID&&!n)return IE.randomUUID();n=n||{};const r=n.random||(n.rng||KP)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,QP(r)}var JP=Object.defineProperty,ZP=Object.defineProperties,e7=Object.getOwnPropertyDescriptors,jE=Object.getOwnPropertySymbols,t7=Object.prototype.hasOwnProperty,n7=Object.prototype.propertyIsEnumerable,DE=(n,e,t)=>e in n?JP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,xb=(n,e)=>{for(var t in e||(e={}))t7.call(e,t)&&DE(n,t,e[t]);if(jE)for(var t of jE(e))n7.call(e,t)&&DE(n,t,e[t]);return n},r7=(n,e)=>ZP(n,e7(e)),Pn={ENABLED:typeof window<"u"&&typeof location<"u"&&location.search.indexOf("giphy-debug")!==-1,LEVEL:0,PREFIX:"GiphyJS",debug:(...n)=>{Pn.ENABLED&&Pn.LEVEL<=0&&console.debug(Pn.PREFIX,...n)},info:(...n)=>{Pn.ENABLED&&Pn.LEVEL<=1&&console.info(Pn.PREFIX,...n)},warn:(...n)=>{Pn.ENABLED&&Pn.LEVEL<=2&&console.warn(Pn.PREFIX,...n)},error:(...n)=>{Pn.ENABLED&&Pn.LEVEL<=3&&console.error(Pn.PREFIX,...n)}},s7=(n,e,t)=>{let r=1/0,a;return t.forEach(l=>{const c=l.width/n,h=l.height/e,m=c*h,g=Math.abs(1-m);g<r&&(r=g,a=l)}),a},i7=50;function a7(n,e,t,r=i7){let[a]=n;const l=n.filter(c=>(c.width*c.height>a.width*a.height&&(a=c),e-c.width<=r&&t-c.height<=r));return l.length===0?a:s7(e,t,l)}var Ok=a7;function o7(n,e=0){return n.slice(0,e)}function l7(n,e){return n.filter(t=>e.indexOf(t)===-1)}function F0(n,e){const t={};return e.forEach(r=>{n[r]!==void 0&&(t[r]=n[r])}),t}var c7=n=>{let e=0,t=0;const r=n.offsetWidth,a=n.offsetHeight;do e+=n.offsetLeft,t+=n.offsetTop,n=n.offsetParent;while(n);const l={left:e,top:t,width:r,height:a,right:e+r,bottom:t+a,x:e,y:t};return r7(xb({},l),{toJSON:()=>JSON.stringify(l)})},u7=c7,ho="",Pk=16,Lk=()=>{let n="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=e.length;for(let r=0;r<Pk;r++)n+=e.charAt(Math.floor(Math.random()*t));return n},d7=()=>{if(!ho){try{ho=sessionStorage.getItem("giphyPingbackId")}catch{}if(!ho){const n=new Date().getTime().toString(16);try{ho=`${n}${WP().replace(/-/g,"")}`.substring(0,Pk)}catch{ho=Lk()}try{sessionStorage.setItem("giphyPingbackId",ho)}catch{}}}return ho},_b=d7,mf=null;new Promise(n=>{typeof Image>"u"&&n(!1);const e=new Image;e.onload=()=>{mf=!0,n(mf)},e.onerror=()=>{mf=!1,n(mf)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"});var ME=(n,e,t)=>{let r=n?.assets;if(r){r=xb({},r),delete r.source;const a=Object.values(r).sort((l,c)=>l.width-c.width);return Ok(a,e,t)}},h7=(n,e,t,r)=>{const a=F0(n,["original","fixed_width","fixed_height","fixed_width_small","fixed_height_small"]),l=Object.entries(a).map(([c,h])=>xb({renditionName:c},h));return Ok(l,e,t,r)},ap=({images:n},e)=>{const{fixed_width:t}=n;if(t){const{width:r,height:a}=t,l=r/a;return Math.round(e/l)}return 0},f7=({images:n},e)=>{const{fixed_width:t}=n;if(t){const{width:r,height:a}=t,l=r/a;return Math.round(e*l)}return 0},m7=({alt_text:n,user:e,tags:t=[],is_sticker:r=!1,title:a=""})=>{if(n)return n;if(a)return a;const l=e&&e.username||"",c=o7(l7(t,["transparent"]),l?4:5);return`${l?`${l} `:""}${c.join(" ")} ${r?"Sticker":"GIF"}`},Ou=(typeof window<"u"?window:global)||{};Ou._GIPHY_SDK_HEADERS_=Ou._GIPHY_SDK_HEADERS_||(Ou.Headers?new Ou.Headers({"X-GIPHY-SDK-PLATFORM":"web"}):void 0);var wb=()=>Ou._GIPHY_SDK_HEADERS_,H0=(n,e)=>{var t;return(t=wb())==null?void 0:t.set(n,e)},p7=Object.defineProperty,g7=Object.defineProperties,y7=Object.getOwnPropertyDescriptors,v7=Object.getOwnPropertyNames,OE=Object.getOwnPropertySymbols,b7=Object.prototype.hasOwnProperty,x7=Object.prototype.propertyIsEnumerable,PE=(n,e,t)=>e in n?p7(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Rs=(n,e)=>{for(var t in e||(e={}))b7.call(e,t)&&PE(n,t,e[t]);if(OE)for(var t of OE(e))x7.call(e,t)&&PE(n,t,e[t]);return n},Fy=(n,e)=>g7(n,y7(e)),_7=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')}),w7=(n,e)=>function(){return e||(0,n[v7(n)[0]])((e={exports:{}}).exports,e),e.exports},Vk=(n,e,t)=>new Promise((r,a)=>{var l=m=>{try{h(t.next(m))}catch(g){a(g)}},c=m=>{try{h(t.throw(m))}catch(g){a(g)}},h=m=>m.done?r(m.value):Promise.resolve(m.value).then(l,c);h((t=t.apply(n,e)).next())}),E7=w7({"package.json"(n,e){e.exports={scripts:{lint:"run -T eslint . --ext .ts,.tsx",clean:"rm -rf ./dist",dev:"parcel public/test.html",docs:"typedoc src/index.ts",build:"run -T tsup src/index.ts --format cjs,esm --dts && run -T publint",prepublish:"npm run clean && npm run build",test:"run -T jest --config ./jestconfig.js","test:watch":"run -T jest --config ./jestconfig.js --watchAll"},name:"@giphy/js-fetch-api",version:"5.7.0",description:"Javascript API to fetch gifs and stickers from the GIPHY API.",homepage:"https://github.com/Giphy/giphy-js/tree/master/packages/fetch-api",main:"dist/index.cjs",types:"dist/index.d.ts",module:"dist/index.js",type:"module",sideEffects:!1,exports:{".":{types:"./dist/index.d.ts",import:"./dist/index.js",require:"./dist/index.cjs"},"./package.json":"./package.json"},files:["dist/","src/**/*"],license:"MIT",publishConfig:{access:"public"},dependencies:{"@giphy/js-types":"*","@giphy/js-util":"*"},devDependencies:{"jest-fetch-mock":"^3.0.3","parcel-bundler":"latest",typedoc:"^0.20.37","typedoc-thunder-theme":"^0.0.3",typescript:"^5.0.4"}}}}),S7=["is_anonymous","is_community","is_featured","is_hidden","is_indexable","is_preserve_size","is_realtime","is_removed","is_sticker","is_dynamic"],T7=["suppress_chrome","is_public","is_verified"],LE=n=>e=>n[e]=!!n[e],C7=n=>typeof n=="string"?n:n.text,Uk=(n,e="")=>{const t=Rs({},n);t.id=String(t.id),t.tags=(t.tags||[]).map(C7),t.bottle_data||(t.bottle_data={}),t.response_id=e,S7.forEach(LE(t)),Object.keys(t.images||{}).forEach(a=>{const l=t.images[a];l.width=parseInt(l.width),l.height=parseInt(l.height)});const{user:r}=t;if(r){const a=Rs({},r);T7.forEach(LE(a)),t.user=a}return t},VE=n=>{const{response_id:e}=n.meta;return n.data=Uk(n.data,e),n},mi=n=>{const{response_id:e}=n.meta;return n.data=n.data.map(t=>Uk(t,e)),n},k7=(typeof window<"u"?window:global)||{},A7=k7.GIPHY_API_URL||"https://api.giphy.com/v1/",zk=class extends Error{constructor(e,t,r=0,a=""){super(e),this.url=t,this.status=r,this.statusText=a}},R7=class extends zk{},UE=zk,N7="@giphy/js-fetch-api: ",I7="Error fetching",j7=n=>n,es={},D7=6e4,M7=6e3,O7=()=>{const n=Date.now();Object.keys(es).forEach(e=>{const t=es[e].isError?M7:D7;n-es[e].ts>=t&&delete es[e]})};function P7(n,e={}){const{apiVersion:t=1,noCache:r=!1,normalizer:a=j7}=e,l=A7.replace(/\/v\d+\/$/,`/v${t}/`);if(O7(),!es[n]||r){const c=`${l}${n}`,h=()=>Vk(this,null,function*(){var m,g;let v;try{const b=yield fetch(c,{method:"get"});if(b.ok){const _=yield b.json();if((m=_.meta)!=null&&m.response_id)return a(_);throw{message:"synthetic response"}}else{let _=I7;try{const R=yield b.json();R.message&&(_=R.message),(g=R.meta)!=null&&g.msg&&(_=R.meta.msg)}catch{}es[n]&&(es[n].isError=!0);let C=UE;_==="This content is not available in your location"&&(C=R7),v=new C(`${N7}${_}`,c,b.status,b.statusText)}}catch(b){v=new UE(b.message,c),es[n]&&(es[n].isError=!0)}throw v});es[n]={request:h(),ts:Date.now()}}return es[n].request}var lr=P7,Hy=n=>n&&n.type?n.type:"gifs",L7=class{constructor(n,e={}){this.getQS=(t={})=>new URLSearchParams(Rs(Fy(Rs({},t),{api_key:this.apiKey,pingback_id:_b()}),this.qsParams)).toString(),this.apiKey=n,this.qsParams=e}categories(n){return lr(`gifs/categories?${this.getQS(n)}`)}gif(n,e){const t=e?.internal?"internal/":"";return lr(`${t}gifs/${n}?${this.getQS()}`,{normalizer:VE})}gifs(n,e){return Array.isArray(n)?lr(`gifs?${this.getQS({ids:n.join(",")})}`,{normalizer:mi}):lr(`gifs/categories/${n}/${e}?${this.getQS()}`,{normalizer:mi})}emoji(n){return lr(`emoji?${this.getQS(n)}`,{normalizer:mi})}emojiDefaultVariations(n){return lr(`emoji?${this.getQS(n)}`,{apiVersion:2,normalizer:mi})}emojiVariations(n){return lr(`emoji/${n}/variations?${this.getQS()}`,{apiVersion:2,normalizer:mi})}animate(n,e={}){const t=this.getQS(Fy(Rs({},e),{m:n}));return lr(`text/animate?${t}`,{normalizer:mi})}search(n,e={}){const t=e.channel?`@${e.channel} ${n}`:n;let r;e.type==="text"&&(r=!0);const a=this.getQS(Fy(Rs({rating:"pg-13"},e),{q:t,excludeDynamicResults:r}));return lr(`${Hy(e)}/search?${a}`,{normalizer:mi})}subcategories(n,e){return lr(`gifs/categories/${n}?${this.getQS(e)}`)}trending(n={}){return lr(`${Hy(n)}/trending?${this.getQS(Rs({rating:"pg-13"},n))}`,{normalizer:mi})}random(n){return lr(`${Hy(n)}/random?${this.getQS(Rs({rating:"pg-13"},n))}`,{noCache:!0,normalizer:VE})}related(n,e={}){const{type:t="gifs"}=e;return lr(`${t}/related?${this.getQS(Rs({gif_id:n,rating:"pg-13"},e))}`,{normalizer:mi})}channels(n,e={}){return lr(`channels/search?${this.getQS(Rs({q:n,rating:"pg-13"},e))}`)}},V7=L7,U7=Symbol("has inivisible gifs"),Bk=(n,e=[])=>{let t=[...e],r=e.map(c=>c.id),a=e.length,l=!1;return c=>Vk(void 0,null,function*(){if(c&&(t=c,r=c.map(b=>b.id)),l)return t;const h=yield n(a),{pagination:m,data:g}=h;a=m.count+m.offset,l=a===m.total_count,g.forEach(b=>{const{id:_}=b;r.includes(_)||(t.push(b),r.push(_))});const v=[...t];return m.hasMoreGifs&&(v.skipCountCheck=U7),v})},zE;if(typeof _7<"u"){const{version:n}=E7();(zE=wb())!=null&&zE.get("X-GIPHY-SDK-NAME")||(H0("X-GIPHY-SDK-NAME","FetchAPI"),H0("X-GIPHY-SDK-VERSION",n))}var hr=function(){return hr=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},hr.apply(this,arguments)};function ad(n,e,t){if(t||arguments.length===2)for(var r=0,a=e.length,l;r<a;r++)(l||!(r in e))&&(l||(l=Array.prototype.slice.call(e,0,r)),l[r]=e[r]);return n.concat(l||Array.prototype.slice.call(e))}var Bt="-ms-",Hu="-moz-",Tt="-webkit-",Fk="comm",op="rule",Eb="decl",z7="@import",Hk="@keyframes",B7="@layer",$k=Math.abs,Sb=String.fromCharCode,$0=Object.assign;function F7(n,e){return kn(n,0)^45?(((e<<2^kn(n,0))<<2^kn(n,1))<<2^kn(n,2))<<2^kn(n,3):0}function qk(n){return n.trim()}function pi(n,e){return(n=e.exec(n))?n[0]:n}function at(n,e,t){return n.replace(e,t)}function Uf(n,e,t){return n.indexOf(e,t)}function kn(n,e){return n.charCodeAt(e)|0}function rc(n,e,t){return n.slice(e,t)}function Is(n){return n.length}function Gk(n){return n.length}function Pu(n,e){return e.push(n),n}function H7(n,e){return n.map(e).join("")}function BE(n,e){return n.filter(function(t){return!pi(t,e)})}var lp=1,sc=1,Yk=0,Br=0,gn=0,yc="";function cp(n,e,t,r,a,l,c,h){return{value:n,root:e,parent:t,type:r,props:a,children:l,line:lp,column:sc,length:c,return:"",siblings:h}}function da(n,e){return $0(cp("",null,null,"",null,null,0,n.siblings),n,{length:-n.length},e)}function Al(n){for(;n.root;)n=da(n.root,{children:[n]});Pu(n,n.siblings)}function $7(){return gn}function q7(){return gn=Br>0?kn(yc,--Br):0,sc--,gn===10&&(sc=1,lp--),gn}function ss(){return gn=Br<Yk?kn(yc,Br++):0,sc++,gn===10&&(sc=1,lp++),gn}function xo(){return kn(yc,Br)}function zf(){return Br}function up(n,e){return rc(yc,n,e)}function q0(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function G7(n){return lp=sc=1,Yk=Is(yc=n),Br=0,[]}function Y7(n){return yc="",n}function $y(n){return qk(up(Br-1,G0(n===91?n+2:n===40?n+1:n)))}function K7(n){for(;(gn=xo())&&gn<33;)ss();return q0(n)>2||q0(gn)>3?"":" "}function Q7(n,e){for(;--e&&ss()&&!(gn<48||gn>102||gn>57&&gn<65||gn>70&&gn<97););return up(n,zf()+(e<6&&xo()==32&&ss()==32))}function G0(n){for(;ss();)switch(gn){case n:return Br;case 34:case 39:n!==34&&n!==39&&G0(gn);break;case 40:n===41&&G0(n);break;case 92:ss();break}return Br}function X7(n,e){for(;ss()&&n+gn!==57;)if(n+gn===84&&xo()===47)break;return"/*"+up(e,Br-1)+"*"+Sb(n===47?n:ss())}function W7(n){for(;!q0(xo());)ss();return up(n,Br)}function J7(n){return Y7(Bf("",null,null,null,[""],n=G7(n),0,[0],n))}function Bf(n,e,t,r,a,l,c,h,m){for(var g=0,v=0,b=c,_=0,C=0,R=0,I=1,k=1,B=1,$=0,N="",V=a,z=l,F=r,E=N;k;)switch(R=$,$=ss()){case 40:if(R!=108&&kn(E,b-1)==58){Uf(E+=at($y($),"&","&\f"),"&\f",$k(g?h[g-1]:0))!=-1&&(B=-1);break}case 34:case 39:case 91:E+=$y($);break;case 9:case 10:case 13:case 32:E+=K7(R);break;case 92:E+=Q7(zf()-1,7);continue;case 47:switch(xo()){case 42:case 47:Pu(Z7(X7(ss(),zf()),e,t,m),m);break;default:E+="/"}break;case 123*I:h[g++]=Is(E)*B;case 125*I:case 59:case 0:switch($){case 0:case 125:k=0;case 59+v:B==-1&&(E=at(E,/\f/g,"")),C>0&&Is(E)-b&&Pu(C>32?HE(E+";",r,t,b-1,m):HE(at(E," ","")+";",r,t,b-2,m),m);break;case 59:E+=";";default:if(Pu(F=FE(E,e,t,g,v,a,h,N,V=[],z=[],b,l),l),$===123)if(v===0)Bf(E,e,F,F,V,l,b,h,z);else switch(_===99&&kn(E,3)===110?100:_){case 100:case 108:case 109:case 115:Bf(n,F,F,r&&Pu(FE(n,F,F,0,0,a,h,N,a,V=[],b,z),z),a,z,b,h,r?V:z);break;default:Bf(E,F,F,F,[""],z,0,h,z)}}g=v=C=0,I=B=1,N=E="",b=c;break;case 58:b=1+Is(E),C=R;default:if(I<1){if($==123)--I;else if($==125&&I++==0&&q7()==125)continue}switch(E+=Sb($),$*I){case 38:B=v>0?1:(E+="\f",-1);break;case 44:h[g++]=(Is(E)-1)*B,B=1;break;case 64:xo()===45&&(E+=$y(ss())),_=xo(),v=b=Is(N=E+=W7(zf())),$++;break;case 45:R===45&&Is(E)==2&&(I=0)}}return l}function FE(n,e,t,r,a,l,c,h,m,g,v,b){for(var _=a-1,C=a===0?l:[""],R=Gk(C),I=0,k=0,B=0;I<r;++I)for(var $=0,N=rc(n,_+1,_=$k(k=c[I])),V=n;$<R;++$)(V=qk(k>0?C[$]+" "+N:at(N,/&\f/g,C[$])))&&(m[B++]=V);return cp(n,e,t,a===0?op:h,m,g,v,b)}function Z7(n,e,t,r){return cp(n,e,t,Fk,Sb($7()),rc(n,2,-2),0,r)}function HE(n,e,t,r,a){return cp(n,e,t,Eb,rc(n,0,r),rc(n,r+1,-1),r,a)}function Kk(n,e,t){switch(F7(n,e)){case 5103:return Tt+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Tt+n+n;case 4789:return Hu+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return Tt+n+Hu+n+Bt+n+n;case 5936:switch(kn(n,e+11)){case 114:return Tt+n+Bt+at(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return Tt+n+Bt+at(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return Tt+n+Bt+at(n,/[svh]\w+-[tblr]{2}/,"lr")+n}case 6828:case 4268:case 2903:return Tt+n+Bt+n+n;case 6165:return Tt+n+Bt+"flex-"+n+n;case 5187:return Tt+n+at(n,/(\w+).+(:[^]+)/,Tt+"box-$1$2"+Bt+"flex-$1$2")+n;case 5443:return Tt+n+Bt+"flex-item-"+at(n,/flex-|-self/g,"")+(pi(n,/flex-|baseline/)?"":Bt+"grid-row-"+at(n,/flex-|-self/g,""))+n;case 4675:return Tt+n+Bt+"flex-line-pack"+at(n,/align-content|flex-|-self/g,"")+n;case 5548:return Tt+n+Bt+at(n,"shrink","negative")+n;case 5292:return Tt+n+Bt+at(n,"basis","preferred-size")+n;case 6060:return Tt+"box-"+at(n,"-grow","")+Tt+n+Bt+at(n,"grow","positive")+n;case 4554:return Tt+at(n,/([^-])(transform)/g,"$1"+Tt+"$2")+n;case 6187:return at(at(at(n,/(zoom-|grab)/,Tt+"$1"),/(image-set)/,Tt+"$1"),n,"")+n;case 5495:case 3959:return at(n,/(image-set\([^]*)/,Tt+"$1$`$1");case 4968:return at(at(n,/(.+:)(flex-)?(.*)/,Tt+"box-pack:$3"+Bt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Tt+n+n;case 4200:if(!pi(n,/flex-|baseline/))return Bt+"grid-column-align"+rc(n,e)+n;break;case 2592:case 3360:return Bt+at(n,"template-","")+n;case 4384:case 3616:return t&&t.some(function(r,a){return e=a,pi(r.props,/grid-\w+-end/)})?~Uf(n+(t=t[e].value),"span",0)?n:Bt+at(n,"-start","")+n+Bt+"grid-row-span:"+(~Uf(t,"span",0)?pi(t,/\d+/):+pi(t,/\d+/)-+pi(n,/\d+/))+";":Bt+at(n,"-start","")+n;case 4896:case 4128:return t&&t.some(function(r){return pi(r.props,/grid-\w+-start/)})?n:Bt+at(at(n,"-end","-span"),"span ","")+n;case 4095:case 3583:case 4068:case 2532:return at(n,/(.+)-inline(.+)/,Tt+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Is(n)-1-e>6)switch(kn(n,e+1)){case 109:if(kn(n,e+4)!==45)break;case 102:return at(n,/(.+:)(.+)-([^]+)/,"$1"+Tt+"$2-$3$1"+Hu+(kn(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~Uf(n,"stretch",0)?Kk(at(n,"stretch","fill-available"),e,t)+n:n}break;case 5152:case 5920:return at(n,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,a,l,c,h,m,g){return Bt+a+":"+l+g+(c?Bt+a+"-span:"+(h?m:+m-+l)+g:"")+n});case 4949:if(kn(n,e+6)===121)return at(n,":",":"+Tt)+n;break;case 6444:switch(kn(n,kn(n,14)===45?18:11)){case 120:return at(n,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Tt+(kn(n,14)===45?"inline-":"")+"box$3$1"+Tt+"$2$3$1"+Bt+"$2box$3")+n;case 100:return at(n,":",":"+Bt)+n}break;case 5719:case 2647:case 2135:case 3927:case 2391:return at(n,"scroll-","scroll-snap-")+n}return n}function Em(n,e){for(var t="",r=0;r<n.length;r++)t+=e(n[r],r,n,e)||"";return t}function eL(n,e,t,r){switch(n.type){case B7:if(n.children.length)break;case z7:case Eb:return n.return=n.return||n.value;case Fk:return"";case Hk:return n.return=n.value+"{"+Em(n.children,r)+"}";case op:if(!Is(n.value=n.props.join(",")))return""}return Is(t=Em(n.children,r))?n.return=n.value+"{"+t+"}":""}function tL(n){var e=Gk(n);return function(t,r,a,l){for(var c="",h=0;h<e;h++)c+=n[h](t,r,a,l)||"";return c}}function nL(n){return function(e){e.root||(e=e.return)&&n(e)}}function rL(n,e,t,r){if(n.length>-1&&!n.return)switch(n.type){case Eb:n.return=Kk(n.value,n.length,t);return;case Hk:return Em([da(n,{value:at(n.value,"@","@"+Tt)})],r);case op:if(n.length)return H7(t=n.props,function(a){switch(pi(a,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Al(da(n,{props:[at(a,/:(read-\w+)/,":"+Hu+"$1")]})),Al(da(n,{props:[a]})),$0(n,{props:BE(t,r)});break;case"::placeholder":Al(da(n,{props:[at(a,/:(plac\w+)/,":"+Tt+"input-$1")]})),Al(da(n,{props:[at(a,/:(plac\w+)/,":"+Hu+"$1")]})),Al(da(n,{props:[at(a,/:(plac\w+)/,Bt+"input-$1")]})),Al(da(n,{props:[a]})),$0(n,{props:BE(t,r)});break}return""})}}var sL={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Er={},ic=typeof process<"u"&&Er!==void 0&&(Er.REACT_APP_SC_ATTR||Er.SC_ATTR)||"data-styled",Qk="active",Xk="data-styled-version",dp="6.1.19",Tb=`/*!sc*/
`,Sm=typeof window<"u"&&typeof document<"u",iL=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&Er!==void 0&&Er.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&Er.REACT_APP_SC_DISABLE_SPEEDY!==""?Er.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&Er.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&Er!==void 0&&Er.SC_DISABLE_SPEEDY!==void 0&&Er.SC_DISABLE_SPEEDY!==""&&Er.SC_DISABLE_SPEEDY!=="false"&&Er.SC_DISABLE_SPEEDY),hp=Object.freeze([]),ac=Object.freeze({});function aL(n,e,t){return t===void 0&&(t=ac),n.theme!==t.theme&&n.theme||e||t.theme}var Wk=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),oL=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,lL=/(^-|-$)/g;function $E(n){return n.replace(oL,"-").replace(lL,"")}var cL=/(a)(d)/gi,pf=52,qE=function(n){return String.fromCharCode(n+(n>25?39:97))};function Y0(n){var e,t="";for(e=Math.abs(n);e>pf;e=e/pf|0)t=qE(e%pf)+t;return(qE(e%pf)+t).replace(cL,"$1-$2")}var qy,Jk=5381,Pl=function(n,e){for(var t=e.length;t;)n=33*n^e.charCodeAt(--t);return n},Zk=function(n){return Pl(Jk,n)};function eA(n){return Y0(Zk(n)>>>0)}function uL(n){return n.displayName||n.name||"Component"}function Gy(n){return typeof n=="string"&&!0}var tA=typeof Symbol=="function"&&Symbol.for,nA=tA?Symbol.for("react.memo"):60115,dL=tA?Symbol.for("react.forward_ref"):60112,hL={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},fL={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},rA={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},mL=((qy={})[dL]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},qy[nA]=rA,qy);function GE(n){return("type"in(e=n)&&e.type.$$typeof)===nA?rA:"$$typeof"in n?mL[n.$$typeof]:hL;var e}var pL=Object.defineProperty,gL=Object.getOwnPropertyNames,YE=Object.getOwnPropertySymbols,yL=Object.getOwnPropertyDescriptor,vL=Object.getPrototypeOf,KE=Object.prototype;function sA(n,e,t){if(typeof e!="string"){if(KE){var r=vL(e);r&&r!==KE&&sA(n,r,t)}var a=gL(e);YE&&(a=a.concat(YE(e)));for(var l=GE(n),c=GE(e),h=0;h<a.length;++h){var m=a[h];if(!(m in fL||t&&t[m]||c&&m in c||l&&m in l)){var g=yL(e,m);try{pL(n,m,g)}catch{}}}}return n}function oc(n){return typeof n=="function"}function Cb(n){return typeof n=="object"&&"styledComponentId"in n}function go(n,e){return n&&e?"".concat(n," ").concat(e):n||e||""}function K0(n,e){if(n.length===0)return"";for(var t=n[0],r=1;r<n.length;r++)t+=n[r];return t}function od(n){return n!==null&&typeof n=="object"&&n.constructor.name===Object.name&&!("props"in n&&n.$$typeof)}function Q0(n,e,t){if(t===void 0&&(t=!1),!t&&!od(n)&&!Array.isArray(n))return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)n[r]=Q0(n[r],e[r]);else if(od(e))for(var r in e)n[r]=Q0(n[r],e[r]);return n}function kb(n,e){Object.defineProperty(n,"toString",{value:e})}function Rd(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(n," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var bL=(function(){function n(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return n.prototype.indexOfGroup=function(e){for(var t=0,r=0;r<e;r++)t+=this.groupSizes[r];return t},n.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var r=this.groupSizes,a=r.length,l=a;e>=l;)if((l<<=1)<0)throw Rd(16,"".concat(e));this.groupSizes=new Uint32Array(l),this.groupSizes.set(r),this.length=l;for(var c=a;c<l;c++)this.groupSizes[c]=0}for(var h=this.indexOfGroup(e+1),m=(c=0,t.length);c<m;c++)this.tag.insertRule(h,t[c])&&(this.groupSizes[e]++,h++)},n.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],r=this.indexOfGroup(e),a=r+t;this.groupSizes[e]=0;for(var l=r;l<a;l++)this.tag.deleteRule(r)}},n.prototype.getGroup=function(e){var t="";if(e>=this.length||this.groupSizes[e]===0)return t;for(var r=this.groupSizes[e],a=this.indexOfGroup(e),l=a+r,c=a;c<l;c++)t+="".concat(this.tag.getRule(c)).concat(Tb);return t},n})(),Ff=new Map,Tm=new Map,Hf=1,gf=function(n){if(Ff.has(n))return Ff.get(n);for(;Tm.has(Hf);)Hf++;var e=Hf++;return Ff.set(n,e),Tm.set(e,n),e},xL=function(n,e){Hf=e+1,Ff.set(n,e),Tm.set(e,n)},_L="style[".concat(ic,"][").concat(Xk,'="').concat(dp,'"]'),wL=new RegExp("^".concat(ic,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),EL=function(n,e,t){for(var r,a=t.split(","),l=0,c=a.length;l<c;l++)(r=a[l])&&n.registerName(e,r)},SL=function(n,e){for(var t,r=((t=e.textContent)!==null&&t!==void 0?t:"").split(Tb),a=[],l=0,c=r.length;l<c;l++){var h=r[l].trim();if(h){var m=h.match(wL);if(m){var g=0|parseInt(m[1],10),v=m[2];g!==0&&(xL(v,g),EL(n,v,m[3]),n.getTag().insertRules(g,a)),a.length=0}else a.push(h)}}},QE=function(n){for(var e=document.querySelectorAll(_L),t=0,r=e.length;t<r;t++){var a=e[t];a&&a.getAttribute(ic)!==Qk&&(SL(n,a),a.parentNode&&a.parentNode.removeChild(a))}};function TL(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var iA=function(n){var e=document.head,t=n||e,r=document.createElement("style"),a=(function(h){var m=Array.from(h.querySelectorAll("style[".concat(ic,"]")));return m[m.length-1]})(t),l=a!==void 0?a.nextSibling:null;r.setAttribute(ic,Qk),r.setAttribute(Xk,dp);var c=TL();return c&&r.setAttribute("nonce",c),t.insertBefore(r,l),r},CL=(function(){function n(e){this.element=iA(e),this.element.appendChild(document.createTextNode("")),this.sheet=(function(t){if(t.sheet)return t.sheet;for(var r=document.styleSheets,a=0,l=r.length;a<l;a++){var c=r[a];if(c.ownerNode===t)return c}throw Rd(17)})(this.element),this.length=0}return n.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch{return!1}},n.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},n.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},n})(),kL=(function(){function n(e){this.element=iA(e),this.nodes=this.element.childNodes,this.length=0}return n.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var r=document.createTextNode(t);return this.element.insertBefore(r,this.nodes[e]||null),this.length++,!0}return!1},n.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},n.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},n})(),AL=(function(){function n(e){this.rules=[],this.length=0}return n.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},n.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},n.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},n})(),XE=Sm,RL={isServer:!Sm,useCSSOMInjection:!iL},aA=(function(){function n(e,t,r){e===void 0&&(e=ac),t===void 0&&(t={});var a=this;this.options=hr(hr({},RL),e),this.gs=t,this.names=new Map(r),this.server=!!e.isServer,!this.server&&Sm&&XE&&(XE=!1,QE(this)),kb(this,function(){return(function(l){for(var c=l.getTag(),h=c.length,m="",g=function(b){var _=(function(B){return Tm.get(B)})(b);if(_===void 0)return"continue";var C=l.names.get(_),R=c.getGroup(b);if(C===void 0||!C.size||R.length===0)return"continue";var I="".concat(ic,".g").concat(b,'[id="').concat(_,'"]'),k="";C!==void 0&&C.forEach(function(B){B.length>0&&(k+="".concat(B,","))}),m+="".concat(R).concat(I,'{content:"').concat(k,'"}').concat(Tb)},v=0;v<h;v++)g(v);return m})(a)})}return n.registerId=function(e){return gf(e)},n.prototype.rehydrate=function(){!this.server&&Sm&&QE(this)},n.prototype.reconstructWithOptions=function(e,t){return t===void 0&&(t=!0),new n(hr(hr({},this.options),e),this.gs,t&&this.names||void 0)},n.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},n.prototype.getTag=function(){return this.tag||(this.tag=(e=(function(t){var r=t.useCSSOMInjection,a=t.target;return t.isServer?new AL(a):r?new CL(a):new kL(a)})(this.options),new bL(e)));var e},n.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},n.prototype.registerName=function(e,t){if(gf(e),this.names.has(e))this.names.get(e).add(t);else{var r=new Set;r.add(t),this.names.set(e,r)}},n.prototype.insertRules=function(e,t,r){this.registerName(e,t),this.getTag().insertRules(gf(e),r)},n.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},n.prototype.clearRules=function(e){this.getTag().clearGroup(gf(e)),this.clearNames(e)},n.prototype.clearTag=function(){this.tag=void 0},n})(),NL=/&/g,IL=/^\s*\/\/.*$/gm;function oA(n,e){return n.map(function(t){return t.type==="rule"&&(t.value="".concat(e," ").concat(t.value),t.value=t.value.replaceAll(",",",".concat(e," ")),t.props=t.props.map(function(r){return"".concat(e," ").concat(r)})),Array.isArray(t.children)&&t.type!=="@keyframes"&&(t.children=oA(t.children,e)),t})}function jL(n){var e,t,r,a=ac,l=a.options,c=l===void 0?ac:l,h=a.plugins,m=h===void 0?hp:h,g=function(_,C,R){return R.startsWith(t)&&R.endsWith(t)&&R.replaceAll(t,"").length>0?".".concat(e):_},v=m.slice();v.push(function(_){_.type===op&&_.value.includes("&")&&(_.props[0]=_.props[0].replace(NL,t).replace(r,g))}),c.prefix&&v.push(rL),v.push(eL);var b=function(_,C,R,I){C===void 0&&(C=""),R===void 0&&(R=""),I===void 0&&(I="&"),e=I,t=C,r=new RegExp("\\".concat(t,"\\b"),"g");var k=_.replace(IL,""),B=J7(R||C?"".concat(R," ").concat(C," { ").concat(k," }"):k);c.namespace&&(B=oA(B,c.namespace));var $=[];return Em(B,tL(v.concat(nL(function(N){return $.push(N)})))),$};return b.hash=m.length?m.reduce(function(_,C){return C.name||Rd(15),Pl(_,C.name)},Jk).toString():"",b}var DL=new aA,X0=jL(),lA=de.createContext({shouldForwardProp:void 0,styleSheet:DL,stylis:X0});lA.Consumer;de.createContext(void 0);function WE(){return O.useContext(lA)}var cA=(function(){function n(e,t){var r=this;this.inject=function(a,l){l===void 0&&(l=X0);var c=r.name+l.hash;a.hasNameForId(r.id,c)||a.insertRules(r.id,c,l(r.rules,c,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,kb(this,function(){throw Rd(12,String(r.name))})}return n.prototype.getName=function(e){return e===void 0&&(e=X0),this.name+e.hash},n})(),ML=function(n){return n>="A"&&n<="Z"};function JE(n){for(var e="",t=0;t<n.length;t++){var r=n[t];if(t===1&&r==="-"&&n[0]==="-")return n;ML(r)?e+="-"+r.toLowerCase():e+=r}return e.startsWith("ms-")?"-"+e:e}var uA=function(n){return n==null||n===!1||n===""},dA=function(n){var e,t,r=[];for(var a in n){var l=n[a];n.hasOwnProperty(a)&&!uA(l)&&(Array.isArray(l)&&l.isCss||oc(l)?r.push("".concat(JE(a),":"),l,";"):od(l)?r.push.apply(r,ad(ad(["".concat(a," {")],dA(l),!1),["}"],!1)):r.push("".concat(JE(a),": ").concat((e=a,(t=l)==null||typeof t=="boolean"||t===""?"":typeof t!="number"||t===0||e in sL||e.startsWith("--")?String(t).trim():"".concat(t,"px")),";")))}return r};function _o(n,e,t,r){if(uA(n))return[];if(Cb(n))return[".".concat(n.styledComponentId)];if(oc(n)){if(!oc(l=n)||l.prototype&&l.prototype.isReactComponent||!e)return[n];var a=n(e);return _o(a,e,t,r)}var l;return n instanceof cA?t?(n.inject(t,r),[n.getName(r)]):[n]:od(n)?dA(n):Array.isArray(n)?Array.prototype.concat.apply(hp,n.map(function(c){return _o(c,e,t,r)})):[n.toString()]}function OL(n){for(var e=0;e<n.length;e+=1){var t=n[e];if(oc(t)&&!Cb(t))return!1}return!0}var PL=Zk(dp),LL=(function(){function n(e,t,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&OL(e),this.componentId=t,this.baseHash=Pl(PL,t),this.baseStyle=r,aA.registerId(t)}return n.prototype.generateAndInjectStyles=function(e,t,r){var a=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))a=go(a,this.staticRulesId);else{var l=K0(_o(this.rules,e,t,r)),c=Y0(Pl(this.baseHash,l)>>>0);if(!t.hasNameForId(this.componentId,c)){var h=r(l,".".concat(c),void 0,this.componentId);t.insertRules(this.componentId,c,h)}a=go(a,c),this.staticRulesId=c}else{for(var m=Pl(this.baseHash,r.hash),g="",v=0;v<this.rules.length;v++){var b=this.rules[v];if(typeof b=="string")g+=b;else if(b){var _=K0(_o(b,e,t,r));m=Pl(m,_+v),g+=_}}if(g){var C=Y0(m>>>0);t.hasNameForId(this.componentId,C)||t.insertRules(this.componentId,C,r(g,".".concat(C),void 0,this.componentId)),a=go(a,C)}}return a},n})(),hA=de.createContext(void 0);hA.Consumer;var Yy={};function VL(n,e,t){var r=Cb(n),a=n,l=!Gy(n),c=e.attrs,h=c===void 0?hp:c,m=e.componentId,g=m===void 0?(function(V,z){var F=typeof V!="string"?"sc":$E(V);Yy[F]=(Yy[F]||0)+1;var E="".concat(F,"-").concat(eA(dp+F+Yy[F]));return z?"".concat(z,"-").concat(E):E})(e.displayName,e.parentComponentId):m,v=e.displayName,b=v===void 0?(function(V){return Gy(V)?"styled.".concat(V):"Styled(".concat(uL(V),")")})(n):v,_=e.displayName&&e.componentId?"".concat($E(e.displayName),"-").concat(e.componentId):e.componentId||g,C=r&&a.attrs?a.attrs.concat(h).filter(Boolean):h,R=e.shouldForwardProp;if(r&&a.shouldForwardProp){var I=a.shouldForwardProp;if(e.shouldForwardProp){var k=e.shouldForwardProp;R=function(V,z){return I(V,z)&&k(V,z)}}else R=I}var B=new LL(t,_,r?a.componentStyle:void 0);function $(V,z){return(function(F,E,S){var A=F.attrs,D=F.componentStyle,M=F.defaultProps,U=F.foldedComponentIds,P=F.styledComponentId,xe=F.target,Ee=de.useContext(hA),Y=WE(),se=F.shouldForwardProp||Y.shouldForwardProp,J=aL(E,Ee,M)||ac,Ce=(function(we,ye,Te){for(var Fe,Ye=hr(hr({},ye),{className:void 0,theme:Te}),be=0;be<we.length;be+=1){var he=oc(Fe=we[be])?Fe(Ye):Fe;for(var _e in he)Ye[_e]=_e==="className"?go(Ye[_e],he[_e]):_e==="style"?hr(hr({},Ye[_e]),he[_e]):he[_e]}return ye.className&&(Ye.className=go(Ye.className,ye.className)),Ye})(A,E,J),Ne=Ce.as||xe,H={};for(var q in Ce)Ce[q]===void 0||q[0]==="$"||q==="as"||q==="theme"&&Ce.theme===J||(q==="forwardedAs"?H.as=Ce.forwardedAs:se&&!se(q,Ne)||(H[q]=Ce[q]));var re=(function(we,ye){var Te=WE(),Fe=we.generateAndInjectStyles(ye,Te.styleSheet,Te.stylis);return Fe})(D,Ce),ne=go(U,P);return re&&(ne+=" "+re),Ce.className&&(ne+=" "+Ce.className),H[Gy(Ne)&&!Wk.has(Ne)?"class":"className"]=ne,S&&(H.ref=S),O.createElement(Ne,H)})(N,V,z)}$.displayName=b;var N=de.forwardRef($);return N.attrs=C,N.componentStyle=B,N.displayName=b,N.shouldForwardProp=R,N.foldedComponentIds=r?go(a.foldedComponentIds,a.styledComponentId):"",N.styledComponentId=_,N.target=r?a.target:n,Object.defineProperty(N,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(V){this._foldedDefaultProps=r?(function(z){for(var F=[],E=1;E<arguments.length;E++)F[E-1]=arguments[E];for(var S=0,A=F;S<A.length;S++)Q0(z,A[S],!0);return z})({},a.defaultProps,V):V}}),kb(N,function(){return".".concat(N.styledComponentId)}),l&&sA(N,n,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),N}function ZE(n,e){for(var t=[n[0]],r=0,a=e.length;r<a;r+=1)t.push(e[r],n[r+1]);return t}var eS=function(n){return Object.assign(n,{isCss:!0})};function fp(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(oc(n)||od(n))return eS(_o(ZE(hp,ad([n],e,!0))));var r=n;return e.length===0&&r.length===1&&typeof r[0]=="string"?_o(r):eS(_o(ZE(r,e)))}function W0(n,e,t){if(t===void 0&&(t=ac),!e)throw Rd(1,e);var r=function(a){for(var l=[],c=1;c<arguments.length;c++)l[c-1]=arguments[c];return n(e,t,fp.apply(void 0,ad([a],l,!1)))};return r.attrs=function(a){return W0(n,e,hr(hr({},t),{attrs:Array.prototype.concat(t.attrs,a).filter(Boolean)}))},r.withConfig=function(a){return W0(n,e,hr(hr({},t),a))},r}var fA=function(n){return W0(VL,n)},Ge=fA;Wk.forEach(function(n){Ge[n]=fA(n)});function Nd(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var r=K0(fp.apply(void 0,ad([n],e,!1))),a=eA(r);return new cA(a,r)}var J0="#121212",mA="#212121",UL="#3e3e3e",zL="#4a4a4a",pA="#a6a6a6",BL="#ececec",$f="#ffffff",Ab="#00ccff",gA="#00ff99",yA="#9933ff",vA="#ff6666",bA="#fff35c",FL="#6157ff";function tS(n,e,t,r){var a,l=!1,c=0;function h(){a&&clearTimeout(a)}function m(){h(),l=!0}typeof e!="boolean"&&(r=t,t=e,e=void 0);function g(){for(var v=arguments.length,b=new Array(v),_=0;_<v;_++)b[_]=arguments[_];var C=this,R=Date.now()-c;if(l)return;function I(){c=Date.now(),t.apply(C,b)}function k(){a=void 0}r&&!a&&I(),h(),r===void 0&&R>n?I():e!==!0&&(a=setTimeout(r?k:I,r===void 0?n-R:n))}return g.cancel=m,g}function Rb(n,e,t){return t===void 0?tS(n,e,!1):tS(n,t,e!==!1)}var nS={},rS;function HL(){return rS||(rS=1,(function(){if(typeof window!="object")return;if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});return}function n(N){try{return N.defaultView&&N.defaultView.frameElement||null}catch{return null}}var e=(function(N){for(var V=N,z=n(V);z;)V=z.ownerDocument,z=n(V);return V})(window.document),t=[],r=null,a=null;function l(N){this.time=N.time,this.target=N.target,this.rootBounds=R(N.rootBounds),this.boundingClientRect=R(N.boundingClientRect),this.intersectionRect=R(N.intersectionRect||C()),this.isIntersecting=!!N.intersectionRect;var V=this.boundingClientRect,z=V.width*V.height,F=this.intersectionRect,E=F.width*F.height;z?this.intersectionRatio=Number((E/z).toFixed(4)):this.intersectionRatio=this.isIntersecting?1:0}function c(N,V){var z=V||{};if(typeof N!="function")throw new Error("callback must be a function");if(z.root&&z.root.nodeType!=1&&z.root.nodeType!=9)throw new Error("root must be a Document or Element");this._checkForIntersections=m(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=N,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(z.rootMargin),this.thresholds=this._initThresholds(z.threshold),this.root=z.root||null,this.rootMargin=this._rootMarginValues.map(function(F){return F.value+F.unit}).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}c.prototype.THROTTLE_TIMEOUT=100,c.prototype.POLL_INTERVAL=null,c.prototype.USE_MUTATION_OBSERVER=!0,c._setupCrossOriginUpdater=function(){return r||(r=function(N,V){!N||!V?a=C():a=I(N,V),t.forEach(function(z){z._checkForIntersections()})}),r},c._resetCrossOriginUpdater=function(){r=null,a=null},c.prototype.observe=function(N){var V=this._observationTargets.some(function(z){return z.element==N});if(!V){if(!(N&&N.nodeType==1))throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:N,entry:null}),this._monitorIntersections(N.ownerDocument),this._checkForIntersections()}},c.prototype.unobserve=function(N){this._observationTargets=this._observationTargets.filter(function(V){return V.element!=N}),this._unmonitorIntersections(N.ownerDocument),this._observationTargets.length==0&&this._unregisterInstance()},c.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},c.prototype.takeRecords=function(){var N=this._queuedEntries.slice();return this._queuedEntries=[],N},c.prototype._initThresholds=function(N){var V=N||[0];return Array.isArray(V)||(V=[V]),V.sort().filter(function(z,F,E){if(typeof z!="number"||isNaN(z)||z<0||z>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return z!==E[F-1]})},c.prototype._parseRootMargin=function(N){var V=N||"0px",z=V.split(/\s+/).map(function(F){var E=/^(-?\d*\.?\d+)(px|%)$/.exec(F);if(!E)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(E[1]),unit:E[2]}});return z[1]=z[1]||z[0],z[2]=z[2]||z[0],z[3]=z[3]||z[1],z},c.prototype._monitorIntersections=function(N){var V=N.defaultView;if(V&&this._monitoringDocuments.indexOf(N)==-1){var z=this._checkForIntersections,F=null,E=null;this.POLL_INTERVAL?F=V.setInterval(z,this.POLL_INTERVAL):(g(V,"resize",z,!0),g(N,"scroll",z,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in V&&(E=new V.MutationObserver(z),E.observe(N,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))),this._monitoringDocuments.push(N),this._monitoringUnsubscribes.push(function(){var D=N.defaultView;D&&(F&&D.clearInterval(F),v(D,"resize",z,!0)),v(N,"scroll",z,!0),E&&E.disconnect()});var S=this.root&&(this.root.ownerDocument||this.root)||e;if(N!=S){var A=n(N);A&&this._monitorIntersections(A.ownerDocument)}}},c.prototype._unmonitorIntersections=function(N){var V=this._monitoringDocuments.indexOf(N);if(V!=-1){var z=this.root&&(this.root.ownerDocument||this.root)||e,F=this._observationTargets.some(function(A){var D=A.element.ownerDocument;if(D==N)return!0;for(;D&&D!=z;){var M=n(D);if(D=M&&M.ownerDocument,D==N)return!0}return!1});if(!F){var E=this._monitoringUnsubscribes[V];if(this._monitoringDocuments.splice(V,1),this._monitoringUnsubscribes.splice(V,1),E(),N!=z){var S=n(N);S&&this._unmonitorIntersections(S.ownerDocument)}}}},c.prototype._unmonitorAllIntersections=function(){var N=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var V=0;V<N.length;V++)N[V]()},c.prototype._checkForIntersections=function(){if(!(!this.root&&r&&!a)){var N=this._rootIsInDom(),V=N?this._getRootRect():C();this._observationTargets.forEach(function(z){var F=z.element,E=_(F),S=this._rootContainsTarget(F),A=z.entry,D=N&&S&&this._computeTargetAndRootIntersection(F,E,V),M=null;this._rootContainsTarget(F)?(!r||this.root)&&(M=V):M=C();var U=z.entry=new l({time:h(),target:F,boundingClientRect:E,rootBounds:M,intersectionRect:D});A?N&&S?this._hasCrossedThreshold(A,U)&&this._queuedEntries.push(U):A&&A.isIntersecting&&this._queuedEntries.push(U):this._queuedEntries.push(U)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},c.prototype._computeTargetAndRootIntersection=function(N,V,z){if(window.getComputedStyle(N).display!="none"){for(var F=V,E=B(N),S=!1;!S&&E;){var A=null,D=E.nodeType==1?window.getComputedStyle(E):{};if(D.display=="none")return null;if(E==this.root||E.nodeType==9)if(S=!0,E==this.root||E==e)r&&!this.root?!a||a.width==0&&a.height==0?(E=null,A=null,F=null):A=a:A=z;else{var M=B(E),U=M&&_(M),P=M&&this._computeTargetAndRootIntersection(M,U,z);U&&P?(E=M,A=I(U,P)):(E=null,F=null)}else{var xe=E.ownerDocument;E!=xe.body&&E!=xe.documentElement&&D.overflow!="visible"&&(A=_(E))}if(A&&(F=b(A,F)),!F)break;E=E&&B(E)}return F}},c.prototype._getRootRect=function(){var N;if(this.root&&!$(this.root))N=_(this.root);else{var V=$(this.root)?this.root:e,z=V.documentElement,F=V.body;N={top:0,left:0,right:z.clientWidth||F.clientWidth,width:z.clientWidth||F.clientWidth,bottom:z.clientHeight||F.clientHeight,height:z.clientHeight||F.clientHeight}}return this._expandRectByRootMargin(N)},c.prototype._expandRectByRootMargin=function(N){var V=this._rootMarginValues.map(function(F,E){return F.unit=="px"?F.value:F.value*(E%2?N.width:N.height)/100}),z={top:N.top-V[0],right:N.right+V[1],bottom:N.bottom+V[2],left:N.left-V[3]};return z.width=z.right-z.left,z.height=z.bottom-z.top,z},c.prototype._hasCrossedThreshold=function(N,V){var z=N&&N.isIntersecting?N.intersectionRatio||0:-1,F=V.isIntersecting?V.intersectionRatio||0:-1;if(z!==F)for(var E=0;E<this.thresholds.length;E++){var S=this.thresholds[E];if(S==z||S==F||S<z!=S<F)return!0}},c.prototype._rootIsInDom=function(){return!this.root||k(e,this.root)},c.prototype._rootContainsTarget=function(N){var V=this.root&&(this.root.ownerDocument||this.root)||e;return k(V,N)&&(!this.root||V==N.ownerDocument)},c.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},c.prototype._unregisterInstance=function(){var N=t.indexOf(this);N!=-1&&t.splice(N,1)};function h(){return window.performance&&performance.now&&performance.now()}function m(N,V){var z=null;return function(){z||(z=setTimeout(function(){N(),z=null},V))}}function g(N,V,z,F){typeof N.addEventListener=="function"?N.addEventListener(V,z,F):typeof N.attachEvent=="function"&&N.attachEvent("on"+V,z)}function v(N,V,z,F){typeof N.removeEventListener=="function"?N.removeEventListener(V,z,F):typeof N.detachEvent=="function"&&N.detachEvent("on"+V,z)}function b(N,V){var z=Math.max(N.top,V.top),F=Math.min(N.bottom,V.bottom),E=Math.max(N.left,V.left),S=Math.min(N.right,V.right),A=S-E,D=F-z;return A>=0&&D>=0&&{top:z,bottom:F,left:E,right:S,width:A,height:D}||null}function _(N){var V;try{V=N.getBoundingClientRect()}catch{}return V?(V.width&&V.height||(V={top:V.top,right:V.right,bottom:V.bottom,left:V.left,width:V.right-V.left,height:V.bottom-V.top}),V):C()}function C(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function R(N){return!N||"x"in N?N:{top:N.top,y:N.top,bottom:N.bottom,left:N.left,x:N.left,right:N.right,width:N.width,height:N.height}}function I(N,V){var z=V.top-N.top,F=V.left-N.left;return{top:z,left:F,height:V.height,width:V.width,bottom:z+V.height,right:F+V.width}}function k(N,V){for(var z=V;z;){if(z==N)return!0;z=B(z)}return!1}function B(N){var V=N.parentNode;return N.nodeType==9&&N!=e?n(N):(V&&V.assignedSlot&&(V=V.assignedSlot.parentNode),V&&V.nodeType==11&&V.host?V.host:V)}function $(N){return N&&N.nodeType===9}window.IntersectionObserver=c,window.IntersectionObserverEntry=l})()),nS}HL();var $L=Object.defineProperty,sS=Object.getOwnPropertySymbols,qL=Object.prototype.hasOwnProperty,GL=Object.prototype.propertyIsEnumerable,iS=(n,e,t)=>e in n?$L(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,wu=(n,e)=>{for(var t in e||(e={}))qL.call(e,t)&&iS(n,t,e[t]);if(sS)for(var t of sS(e))GL.call(e,t)&&iS(n,t,e[t]);return n},YL=(n,e,t)=>{const r=F0(n,[t]),a=F0(e,[t]);return r[t]&&a[t]?wu(wu(wu({},n),e),{[t]:r[t]+", "+a[t]}):wu(wu({},n),e)},KL=YL,Nb=(typeof window<"u"?window:global)||{},aS,QL=((aS=Nb)==null?void 0:aS.GIPHY_PINGBACK_URL)||"https://pingback.giphy.com",XL=`${QL}/v2/pingback?apikey=l0HlIwPWyBBUDAUgM`,WL=n=>{const e=wb();return e?.set("Content-Type","application/json"),Pn.debug("Pingback session",n),n.length?fetch(XL,{method:"POST",body:JSON.stringify({events:n}),headers:e}).catch(t=>{Pn.warn(`pingbacks failing to post ${t}`)}):new Promise(t=>t())},Z0=[];Nb.giphyRandomId=_b();var yf="";function Ib(){const n=[...Z0];Z0=[],WL(n)}var JL=Rb(1e3,Ib),oS,lS;(lS=(oS=Nb).addEventListener)==null||lS.call(oS,"beforeunload",Ib);var ZL=({userId:n,eventType:e,actionType:t,attributes:r,queueEvents:a=!0,analyticsResponsePayload:l})=>{yf=n?String(n):yf;const c={ts:Date.now(),attributes:r,action_type:t,user_id:_b(),analytics_response_payload:l};yf&&(c.logged_in_user_id=yf),c.analytics_response_payload&&(c.analytics_response_payload=`${c.analytics_response_payload}${Pn.ENABLED?"&mode=verification":""}`),e&&(c.event_type=e),Z0.push(c),a?JL():Ib()},jb=ZL,ev=function(n,e){return ev=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])},ev(n,e)};function xA(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ev(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Cm=function(){return Cm=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Cm.apply(this,arguments)};function _A(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(n);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(n,r[a])&&(t[r[a]]=n[r[a]]);return t}function wA(n,e,t,r){var a=arguments.length,l=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(n,e,t,r);else for(var h=n.length-1;h>=0;h--)(c=n[h])&&(l=(a<3?c(l):a>3?c(e,t,l):c(e,t))||l);return a>3&&l&&Object.defineProperty(e,t,l),l}function EA(n,e){return function(t,r){e(t,r,n)}}function SA(n,e,t,r,a,l){function c(B){if(B!==void 0&&typeof B!="function")throw new TypeError("Function expected");return B}for(var h=r.kind,m=h==="getter"?"get":h==="setter"?"set":"value",g=!e&&n?r.static?n:n.prototype:null,v=e||(g?Object.getOwnPropertyDescriptor(g,r.name):{}),b,_=!1,C=t.length-1;C>=0;C--){var R={};for(var I in r)R[I]=I==="access"?{}:r[I];for(var I in r.access)R.access[I]=r.access[I];R.addInitializer=function(B){if(_)throw new TypeError("Cannot add initializers after decoration has completed");l.push(c(B||null))};var k=(0,t[C])(h==="accessor"?{get:v.get,set:v.set}:v[m],R);if(h==="accessor"){if(k===void 0)continue;if(k===null||typeof k!="object")throw new TypeError("Object expected");(b=c(k.get))&&(v.get=b),(b=c(k.set))&&(v.set=b),(b=c(k.init))&&a.unshift(b)}else(b=c(k))&&(h==="field"?a.unshift(b):v[m]=b)}g&&Object.defineProperty(g,r.name,v),_=!0}function TA(n,e,t){for(var r=arguments.length>2,a=0;a<e.length;a++)t=r?e[a].call(n,t):e[a].call(n);return r?t:void 0}function CA(n){return typeof n=="symbol"?n:"".concat(n)}function kA(n,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function AA(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function RA(n,e,t,r){function a(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function h(v){try{g(r.next(v))}catch(b){c(b)}}function m(v){try{g(r.throw(v))}catch(b){c(b)}}function g(v){v.done?l(v.value):a(v.value).then(h,m)}g((r=r.apply(n,e||[])).next())})}function NA(n,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,a,l,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=h(0),c.throw=h(1),c.return=h(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(g){return function(v){return m([g,v])}}function m(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(t=0)),t;)try{if(r=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,a=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){t.label=g[1];break}if(g[0]===6&&t.label<l[1]){t.label=l[1],l=g;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(g);break}l[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(n,t)}catch(v){g=[6,v],a=0}finally{r=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}var mp=Object.create?(function(n,e,t,r){r===void 0&&(r=t);var a=Object.getOwnPropertyDescriptor(e,t);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,a)}):(function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]});function IA(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&mp(e,n,t)}function km(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Db(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),a,l=[],c;try{for(;(e===void 0||e-- >0)&&!(a=r.next()).done;)l.push(a.value)}catch(h){c={error:h}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(c)throw c.error}}return l}function jA(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(Db(arguments[e]));return n}function DA(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),a=0,e=0;e<t;e++)for(var l=arguments[e],c=0,h=l.length;c<h;c++,a++)r[a]=l[c];return r}function MA(n,e,t){if(t||arguments.length===2)for(var r=0,a=e.length,l;r<a;r++)(l||!(r in e))&&(l||(l=Array.prototype.slice.call(e,0,r)),l[r]=e[r]);return n.concat(l||Array.prototype.slice.call(e))}function lc(n){return this instanceof lc?(this.v=n,this):new lc(n)}function OA(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(C){return function(R){return Promise.resolve(R).then(C,b)}}function h(C,R){r[C]&&(a[C]=function(I){return new Promise(function(k,B){l.push([C,I,k,B])>1||m(C,I)})},R&&(a[C]=R(a[C])))}function m(C,R){try{g(r[C](R))}catch(I){_(l[0][3],I)}}function g(C){C.value instanceof lc?Promise.resolve(C.value.v).then(v,b):_(l[0][2],C)}function v(C){m("next",C)}function b(C){m("throw",C)}function _(C,R){C(R),l.shift(),l.length&&m(l[0][0],l[0][1])}}function PA(n){var e,t;return e={},r("next"),r("throw",function(a){throw a}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(a,l){e[a]=n[a]?function(c){return(t=!t)?{value:lc(n[a](c)),done:!1}:l?l(c):c}:l}}function LA(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof km=="function"?km(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(l){t[l]=n[l]&&function(c){return new Promise(function(h,m){c=n[l](c),a(h,m,c.done,c.value)})}}function a(l,c,h,m){Promise.resolve(m).then(function(g){l({value:g,done:h})},c)}}function VA(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}var eV=Object.create?(function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}):function(n,e){n.default=e},tv=function(n){return tv=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},tv(n)};function UA(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t=tv(n),r=0;r<t.length;r++)t[r]!=="default"&&mp(e,n,t[r]);return eV(e,n),e}function zA(n){return n&&n.__esModule?n:{default:n}}function BA(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}function FA(n,e,t,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(n,t):a?a.value=t:e.set(n,t),t}function HA(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}function $A(n,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,a;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],t&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(l){return Promise.reject(l)}}),n.stack.push({value:e,dispose:r,async:t})}else t&&n.stack.push({async:!0});return e}var tV=typeof SuppressedError=="function"?SuppressedError:function(n,e,t){var r=new Error(t);return r.name="SuppressedError",r.error=n,r.suppressed=e,r};function qA(n){function e(l){n.error=n.hasError?new tV(l,n.error,"An error was suppressed during disposal."):l,n.hasError=!0}var t,r=0;function a(){for(;t=n.stack.pop();)try{if(!t.async&&r===1)return r=0,n.stack.push(t),Promise.resolve().then(a);if(t.dispose){var l=t.dispose.call(t.value);if(t.async)return r|=2,Promise.resolve(l).then(a,function(c){return e(c),a()})}else r|=1}catch(c){e(c)}if(r===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return a()}function GA(n,e){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,r,a,l,c){return r?e?".jsx":".js":a&&(!l||!c)?t:a+l+"."+c.toLowerCase()+"js"}):n}const nV={__extends:xA,__assign:Cm,__rest:_A,__decorate:wA,__param:EA,__esDecorate:SA,__runInitializers:TA,__propKey:CA,__setFunctionName:kA,__metadata:AA,__awaiter:RA,__generator:NA,__createBinding:mp,__exportStar:IA,__values:km,__read:Db,__spread:jA,__spreadArrays:DA,__spreadArray:MA,__await:lc,__asyncGenerator:OA,__asyncDelegator:PA,__asyncValues:LA,__makeTemplateObject:VA,__importStar:UA,__importDefault:zA,__classPrivateFieldGet:BA,__classPrivateFieldSet:FA,__classPrivateFieldIn:HA,__addDisposableResource:$A,__disposeResources:qA,__rewriteRelativeImportExtension:GA},rV=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:$A,get __assign(){return Cm},__asyncDelegator:PA,__asyncGenerator:OA,__asyncValues:LA,__await:lc,__awaiter:RA,__classPrivateFieldGet:BA,__classPrivateFieldIn:HA,__classPrivateFieldSet:FA,__createBinding:mp,__decorate:wA,__disposeResources:qA,__esDecorate:SA,__exportStar:IA,__extends:xA,__generator:NA,__importDefault:zA,__importStar:UA,__makeTemplateObject:VA,__metadata:AA,__param:EA,__propKey:CA,__read:Db,__rest:_A,__rewriteRelativeImportExtension:GA,__runInitializers:TA,__setFunctionName:kA,__spread:jA,__spreadArray:MA,__spreadArrays:DA,__values:km,default:nV},Symbol.toStringTag,{value:"Module"})),sV=$R(rV);var vf={},cS;function iV(){if(cS)return vf;cS=1,Object.defineProperty(vf,"__esModule",{value:!0});var n=ja();function e(t,r){r===void 0&&(r=0);var a=n.useRef(!1),l=n.useRef(),c=n.useRef(t),h=n.useCallback(function(){return a.current},[]),m=n.useCallback(function(){a.current=!1,l.current&&clearTimeout(l.current),l.current=setTimeout(function(){a.current=!0,c.current()},r)},[r]),g=n.useCallback(function(){a.current=null,l.current&&clearTimeout(l.current)},[]);return n.useEffect(function(){c.current=t},[t]),n.useEffect(function(){return m(),g},[r]),[h,g,m]}return vf.default=e,vf}var aV=iV();const oV=ud(aV);var bf={},xf={},wr={},uS;function lV(){if(uS)return wr;uS=1,Object.defineProperty(wr,"__esModule",{value:!0}),wr.isNavigator=wr.isBrowser=wr.off=wr.on=wr.noop=void 0;var n=function(){};wr.noop=n;function e(r){for(var a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];r&&r.addEventListener&&r.addEventListener.apply(r,a)}wr.on=e;function t(r){for(var a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];r&&r.removeEventListener&&r.removeEventListener.apply(r,a)}return wr.off=t,wr.isBrowser=typeof window<"u",wr.isNavigator=typeof navigator<"u",wr}var dS;function cV(){if(dS)return xf;dS=1,Object.defineProperty(xf,"__esModule",{value:!0});var n=ja(),e=lV(),t=e.isBrowser?n.useLayoutEffect:n.useEffect;return xf.default=t,xf}var hS;function uV(){if(hS)return bf;hS=1,Object.defineProperty(bf,"__esModule",{value:!0});var n=sV,e=ja(),t=n.__importDefault(cV()),r=function(a,l){a===void 0&&(a=1e12),l===void 0&&(l=0);var c=e.useState(0),h=c[0],m=c[1];return t.default(function(){var g,v,b,_=function(){var k=Math.min(1,(Date.now()-b)/a);m(k),C()},C=function(){g=requestAnimationFrame(_)},R=function(){v=setTimeout(function(){cancelAnimationFrame(g),m(1)},a),b=Date.now(),C()},I=setTimeout(R,l);return function(){clearTimeout(v),clearTimeout(I),cancelAnimationFrame(g)}},[a,l]),h};return bf.default=r,bf}var dV=uV();const hV=ud(dV);var fV=Object.defineProperty,mV=Object.defineProperties,pV=Object.getOwnPropertyDescriptors,fS=Object.getOwnPropertySymbols,gV=Object.prototype.hasOwnProperty,yV=Object.prototype.propertyIsEnumerable,mS=(n,e,t)=>e in n?fV(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ci=(n,e)=>{for(var t in e||(e={}))gV.call(e,t)&&mS(n,t,e[t]);if(fS)for(var t of fS(e))yV.call(e,t)&&mS(n,t,e[t]);return n},Mb=(n,e)=>mV(n,pV(e)),Ob=(n,e,t)=>new Promise((r,a)=>{var l=m=>{try{h(t.next(m))}catch(g){a(g)}},c=m=>{try{h(t.throw(m))}catch(g){a(g)}},h=m=>m.done?r(m.value):Promise.resolve(m.value).then(l,c);h((t=t.apply(n,e)).next())}),vV=n=>{var e,t;if(!n)return"";const r=(t=(e=n?.split("."))==null?void 0:e.pop())==null?void 0:t.toLowerCase();return n.replace(`.${r}`,`/80h.${r}`)},bV=Ge.img`
    object-fit: cover;
    width: 32px;
    height: 32px;
    margin-right: 8px;
`,xV=({user:n,className:e=""})=>{const t=O.useRef(Math.floor(Math.random()*5)+1),r=n.avatar_url?vV(n.avatar_url):`https://media.giphy.com/avatars/default${t.current}.gif`;return de.createElement(bV,{src:r,className:e})},pp=xV,ld=({className:n="",size:e=17,fill:t="#15CDFF"})=>de.createElement("svg",{className:[ld.className,n].join(" "),height:e,width:"19px",viewBox:"0 0 19 17"},de.createElement("path",{className:ld.checkMarkClassName,d:"M9.32727273,9.44126709 L9.32727273,3.03016561 L6.55027155,3.03016561 L6.55027155,10.8150746 L6.55027155,12.188882 L12.1042739,12.188882 L12.1042739,9.44126709 L9.32727273,9.44126709 Z",fill:J0,transform:"translate(9.327273, 7.609524) scale(-1, 1) rotate(-45.000000) translate(-9.327273, -7.609524) "}),de.createElement("g",{transform:"translate(-532.000000, -466.000000)",fill:t},de.createElement("g",{transform:"translate(141.000000, 235.000000)"},de.createElement("g",{transform:"translate(264.000000, 0.000000)"},de.createElement("g",{transform:"translate(10.000000, 224.000000)"},de.createElement("g",{transform:"translate(114.000000, 2.500000)"},de.createElement("path",{d:"M15.112432,4.80769231 L16.8814194,6.87556817 L19.4157673,7.90116318 L19.6184416,10.6028916 L21.0594951,12.9065042 L19.6184416,15.2101168 L19.4157673,17.9118452 L16.8814194,18.9374402 L15.112432,21.0053161 L12.4528245,20.3611511 L9.79321699,21.0053161 L8.02422954,18.9374402 L5.48988167,17.9118452 L5.28720734,15.2101168 L3.84615385,12.9065042 L5.28720734,10.6028916 L5.48988167,7.90116318 L8.02422954,6.87556817 L9.79321699,4.80769231 L12.4528245,5.4518573 L15.112432,4.80769231 Z M17.8163503,10.8991009 L15.9282384,9.01098901 L11.5681538,13.3696923 L9.68115218,11.4818515 L7.81302031,13.3499833 L9.7011322,15.2380952 L11.5892441,17.1262071 L17.8163503,10.8991009 Z"})))))));ld.className="giphy-verified-badge";ld.checkMarkClassName="giphy-verified-checkmark";var nv=ld,_V=Ge.div`
    color: white;
    font-size: 16px;
    font-weight: 700;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    -webkit-font-smoothing: antialiased;
`,wV=Ge(nv)`
    margin-left: 4px;
    flex-shrink: 0;
`,EV=Ge.div`
    display: flex;
    align-items: center;
    min-width: 0;
`,SV=({user:n})=>{const{display_name:e,username:t}=n;return de.createElement(EV,null,de.createElement(_V,null,e||`@${t}`),n.is_verified?de.createElement(wV,{size:14}):null)},YA=SV,TV=Ge.div`
    display: flex;
    align-items: center;
    font-family: interface, helvetica, arial;
`,CV=Ge(pp)`
    flex-shrink: 0;
`,Pb=({gif:n,className:e,onClick:t})=>{const{user:r}=n;return!r?.username&&!r?.display_name?null:de.createElement(TV,{className:[Pb.className,e].join(" "),onClick:a=>{if(a.preventDefault(),a.stopPropagation(),t)t(n);else{const l=r.profile_url;l&&window.open(l,"_blank")}}},de.createElement(CV,{user:r}),de.createElement(YA,{user:n.user}))};Pb.className="giphy-attribution";var kV=Pb,AV=Ge.div`
    background: linear-gradient(rgba(0, 0, 0, 0), rgba(18, 18, 18, 0.6));
    cursor: default;
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 75px;
    pointer-events: none;
`,RV=Ge(kV)`
    position: absolute;
    bottom: 10px;
    left: 10px;
    right: 10px;
`,NV=Ge.div`
    transition: opacity 150ms ease-in;
`,IV=({gif:n,isHovered:e,onClick:t})=>{const r=O.useRef(e);return e&&(r.current=!0),n.user&&r.current?de.createElement(NV,{style:{opacity:e?1:0}},de.createElement(AV,null),de.createElement(RV,{gif:n,onClick:t})):null},jV=IV,DV=({children:n,className:e,onVisibleChange:t,config:r})=>{const a=O.useRef(null);return O.useEffect(()=>{let l;return a.current&&(l=new IntersectionObserver(([c])=>{t&&t(c.isIntersecting)},r),l.observe(a.current)),()=>l?.disconnect()},[t,a,r]),de.createElement("div",{ref:a,className:e},n)},KA=DV,QA=n=>(e,t,r,a={})=>{e.analytics_response_payload&&jb({analyticsResponsePayload:e.analytics_response_payload,userId:t,actionType:n,attributes:Ci({position:JSON.stringify(u7(r))},a)})},MV=(n,e,t,r={})=>{n.analytics_response_payload&&jb({analyticsResponsePayload:n.analytics_response_payload,userId:e,actionType:"SEEN",attributes:Ci({position:JSON.stringify(t)},r)})},OV=QA("CLICK"),PV=QA("HOVER");function LV(n){return n=n.replace("%%CACHEBUSTER%%",Lk()),n=n.replace("%%TIMESTAMP%%",`${Date.now()}`),n=n.replace("%%APPBUNDLE%%","web"),typeof window<"u"&&(n=n.replace("%%APP_WINDOW_SIZE%%",`${window.innerWidth},${window.innerHeight}`),n=n.replace("%%DEVICE_LANGUAGE%%",`${navigator.language}`)),n}function VV({src:n}){const e=O.useRef(LV(n)),[t,r]=O.useState(!1);return O.useEffect(()=>{r(!0)},[]),t?de.createElement("img",{src:e.current,width:0,height:0}):null}var UV=VV,rv=O.createContext({}),zV=({attributes:n,children:e})=>{const{attributes:t={}}=O.useContext(rv);return de.createElement(rv.Provider,{value:{attributes:KL(t,n,"layout_type")}},e)},XA=zV,BV=Ge.div`
    position: relative;
    display: block;
    picture {
        display: block;
        width: 100%;
        height: 100%;
    }
    img {
        display: block;
    }
    .${nv.className} {
        g {
            fill: white;
        }
    }
    .${nv.checkMarkClassName} {
        opacity: 0;
    }
`,pS=[Ab,gA,yA,vA,bA],FV=()=>pS[Math.round(Math.random()*(pS.length-1))],HV=200,gS="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",$V=!!(typeof window<"u"&&window.document&&window.document.createElement),Rl=()=>{},qV=({children:n})=>{const[e,t]=O.useState(!1);return O.useEffect(()=>{t(!0)},[]),e?de.createElement(de.Fragment,null,n):null},va=({gif:n,gif:{bottle_data:e={}},width:t,percentWidth:r,percentHeight:a,height:l,onGifRightClick:c=Rl,className:h="",onGifClick:m=Rl,onGifKeyPress:g=Rl,onGifSeen:v=Rl,onGifVisible:b=Rl,user:_={},backgroundColor:C,overlay:R,hideAttribution:I=!1,noLink:k=!1,borderRadius:B=4,style:$,tabIndex:N,lazyLoad:V=!0})=>{var z;const[F,E]=O.useState(!1),[S,A]=O.useState(!1),[D,M]=O.useState(!$V||!V),[U,P]=O.useState(""),xe=O.useRef(FV()),Ee=O.useRef(null),Y=O.useRef(null),se=O.useRef(),J=O.useRef(),Ce=O.useRef(),Ne=O.useRef(Rl),H=Object.keys(e).length>0,{attributes:q}=O.useContext(rv);let re=R;!re&&!I&&(re=jV);const ne=le=>{clearTimeout(Ce.current),le.persist(),A(!0),Ce.current=window.setTimeout(()=>{PV(n,_?.id,le.target,q)},HV)},we=()=>{clearTimeout(Ce.current),A(!1)},ye=le=>{OV(n,_?.id,le.target,q),m(n,le)},Te=le=>{g(n,le)};Ne.current=le=>{E(!0),Pn.debug(`GIF ${n.id} seen. ${n.title}`),MV(n,_?.id,le.boundingClientRect,q),v?.(n,le.boundingClientRect),J.current&&J.current.disconnect()};const Fe=()=>{J.current||(J.current=new IntersectionObserver(([le])=>{le.isIntersecting&&Ne.current(le)},{threshold:[.99]})),!F&&Ee.current&&J.current&&J.current.observe(Ee.current)},Ye=le=>{Fe(),b(n,le),P(va.imgLoadedClassName)};O.useEffect(()=>{var le,Se;(le=Y.current)!=null&&le.complete&&(Fe(),b(n)),(Se=J.current)==null||Se.disconnect(),E(!1)},[n.id]),O.useEffect(()=>(se.current=new IntersectionObserver(([le])=>{const{isIntersecting:Se}=le;M(Se),!Se&&J.current&&J.current.disconnect()}),se.current.observe(Ee.current),()=>{se.current&&se.current.disconnect(),J.current&&J.current.disconnect(),Ce.current&&clearTimeout(Ce.current)}),[]);const be=ap(n,t);let he=l;!$?.aspectRatio&&!l&&(he=be);const _e=h7(n.images,t,l||be);if(!_e)return n.images?console.error(`no rendition for ${n.id}, rendition names: ${Object.keys(n.images).join(", ")}`):console.error(`no rendition for ${n.id} - no images`),null;const ae=n.images[_e.renditionName],Ie=U===va.imgLoadedClassName&&!n.is_sticker?"unset":C||(n.is_sticker?"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4AQMAAACSSKldAAAABlBMVEUhIiIWFhYoSqvJAAAAGElEQVQY02MAAv7///8PWxqIPwDZw5UGABtgwz2xhFKxAAAAAElFTkSuQmCC') 0 0":xe.current),X=B?"hidden":"unset";return de.createElement(BV,{as:k?"div":"a",href:k?void 0:n.url,"data-giphy-id":n.id,"data-giphy-is-sticker":n.is_sticker,style:Ci({width:r||t,height:a||he,overflow:X,borderRadius:B},$),className:[va.className,h].join(" "),onMouseOver:ne,onMouseLeave:we,onClick:ye,onContextMenu:le=>c(n,le),onKeyPress:Te,tabIndex:N,ref:Ee},de.createElement("picture",null,de.createElement("source",{type:"image/webp",srcSet:D?ae.webp:gS,suppressHydrationWarning:!0}),de.createElement("img",{ref:Y,suppressHydrationWarning:!0,className:[va.imgClassName,U].join(" "),src:D?ae.url:gS,style:{background:Ie},width:"100%",height:"100%",alt:m7(n),onLoad:D?Ye:()=>{}})),H&&((z=e?.tags)==null?void 0:z.map((le,Se)=>de.createElement(UV,{src:le,key:Se}))),re&&de.createElement(qV,null,D&&de.createElement(re,{gif:n,isHovered:S,width:t,height:he})))};va.className="giphy-gif";va.imgClassName="giphy-gif-img";va.imgLoadedClassName="giphy-img-loaded";var cd=va,GV=Ge.div`
    -webkit-overflow-scrolling: touch;
    overflow-x: auto;
    overflow-y: hidden;
    white-space: nowrap;
    position: relative;
`,YV=Ge(cd)`
    position: relative;
    display: inline-block;
    list-style: none;
    margin-left: ${n=>n.$ml}px;
    /* make sure gifs are fully visible with a scrollbar */
    margin-bottom: 1px;

    &:first-of-type {
        margin-left: 0;
    }
    .${cd.imgClassName} {
        position: absolute;
        top: 0;
        left: 0;
    }
`,KV=Ge(KA)`
    display: inline-block;
`,QV=Ge.div`
    width: 30px;
    display: inline-block;
    opacity: ${n=>n.$isFirstLoad?0:1};
    height: ${n=>n.$height}px;
`,XV=Object.freeze({gutter:6,user:{},initialGifs:[]}),WV=Object.freeze({isFetching:!1,gifs:[],isLoaderVisible:!1,isDoneFetching:!1}),WA=class JA extends O.PureComponent{constructor(){super(...arguments),this.state=Mb(Ci({},WV),{gifs:this.props.initialGifs||[]}),this.unmounted=!1,this.paginator=Bk(this.props.fetchGifs,this.state.gifs),this.onLoaderVisible=e=>{this.unmounted||this.setState({isLoaderVisible:e},this.onFetch)},this.onFetch=Rb(100,()=>Ob(this,null,function*(){if(this.unmounted)return;const{isFetching:e,isLoaderVisible:t,gifs:r}=this.state;if(!e&&t){this.setState({isFetching:!0});let a;try{a=yield this.paginator()}catch{this.setState({isFetching:!1})}if(a)if(!!!a?.skipCountCheck&&r.length===a.length)this.setState({isDoneFetching:!0});else{this.setState({gifs:a,isFetching:!1});const{onGifsFetched:c}=this.props;c&&c(a),this.onFetch()}}}))}componentDidMount(){this.unmounted=!1,this.onFetch()}componentWillUnmount(){this.unmounted=!0}render(){const{onGifVisible:e,onGifRightClick:t,gifHeight:r,gifWidth:a,gutter:l,className:c=JA.className,onGifSeen:h,onGifClick:m,onGifKeyPress:g,user:v,overlay:b,hideAttribution:_,noLink:C,noResultsMessage:R,backgroundColor:I,borderRadius:k,tabIndex:B=0,loaderConfig:$}=this.props,{gifs:N,isDoneFetching:V}=this.state,z=!V,F=N.length===0;return de.createElement(XA,{attributes:{layout_type:"CAROUSEL"}},de.createElement(GV,{className:c},N.map(E=>de.createElement(YV,{gif:E,key:E.id,tabIndex:B,width:a||f7(E,r),height:r,onGifClick:m,onGifKeyPress:g,onGifSeen:h,onGifVisible:e,onGifRightClick:t,user:v,$ml:l,overlay:b,hideAttribution:_,noLink:C,borderRadius:k,backgroundColor:I})),!z&&N.length===0&&R,z&&de.createElement(KV,{onVisibleChange:this.onLoaderVisible,config:$},de.createElement(QV,{$isFirstLoad:F,$height:r}))))}};WA.className="giphy-carousel";WA.defaultProps=XV;var JV=Ge.div`
    color: ${pA};
    display: flex;
    justify-content: center;
    margin: 30px 0;
    font-family: interface, Helvetica Neue, helvetica, sans-serif;
    font-size: 16px;
    font-weight: 600;
    a {
        color: ${Ab};
        cursor: pointer;
        &:hover {
            color: white;
        }
    }
`,ZV=({onClick:n})=>de.createElement(JV,null,"Error loading GIFs.",de.createElement("a",{onClick:n},"Try again?")),eU=ZV,tU=.75;Ge.div`
    align-items: center;
    background-color: ${({$backgroundColor:n})=>n};
    border-radius: 16px;
    display: flex;
    max-width: fit-content;
    overflow: hidden;
    padding: 4px 5px 5px 6px;
`;Ge.div`
    overflow-x: auto;
    overflow-y: hidden;
    position: relative;
    -webkit-overflow-scrolling: touch;
`;Ge.div`
    display: inline-flex;
    justify-content: space-between;
    overflow: hidden;
    white-space: nowrap;
    width: ${({$width:n})=>`${n}px`};
`;Ge.div`
    background-color: ${({$color:n})=>n};
    box-sizing: border-box;
    height: ${({$gifHeight:n})=>`${Math.round(n*tU)}px`};
    margin: ${({$gutter:n})=>`0 ${n}px`};
    width: 2px;
`;Ge(cd)`
    display: inline-block;
    flex-shrink: 0;
    list-style: none;
    /* make sure gifs are fully visible with a scrollbar */
    margin-bottom: 1px;
    position: relative;

    .${cd.imgClassName} {
        position: absolute;
        top: 0;
        left: 0;
    }
`;var nU=Nd`
     to {
    transform: scale(1.75) translateY(-20px);
  }
`,ZA=52,rU=Ge.div`
    display: flex;
    align-items: center;
    height: ${ZA}px;
    margin: 0 auto;
    text-align: center;
    justify-content: center;
    animation: pulse 0.8s ease-in-out 0s infinite alternate backwards;
`,Eu=Ge.div`
    display: inline-block;
    height: 10px;
    width: 10px;
    margin: ${ZA}px 10px 10px 10px;
    position: relative;
    box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.3);
    animation: ${nU} cubic-bezier(0.455, 0.03, 0.515, 0.955) 0.75s infinite alternate;
    background: ${n=>n.$color};
    animation-delay: ${n=>n.$delay};
`,sU=({className:n=""})=>de.createElement(rU,{className:n},de.createElement(Eu,{$color:gA,$delay:"0"}),de.createElement(Eu,{$color:Ab,$delay:".1s"}),de.createElement(Eu,{$color:yA,$delay:".2s"}),de.createElement(Eu,{$color:vA,$delay:".3s"}),de.createElement(Eu,{$color:bA,$delay:".4s"})),iU=sU,aU=Ge.div`
    opacity: ${n=>n.$isFirstLoad?0:1};
`;function yS(n,e,t=[]){return Array.apply(null,Array(n)).map((r,a)=>t[a]||e)}function oU(n,e,t,r){const a=yS(n,[]),l=yS(n,0,e);return t.forEach(c=>{const h=l.indexOf(Math.min(...l));a[h]=[...a[h],c],l[h]+=ap(c,r)}),a}var lU=Object.freeze({gutter:6,user:{},initialGifs:[]}),cU=Object.freeze({isFetching:!1,isError:!1,gifs:[],isLoaderVisible:!1,isDoneFetching:!1}),vc=class qf extends O.PureComponent{constructor(){super(...arguments),this.state=Mb(Ci({},cU),{gifs:this.props.initialGifs||[]}),this.unmounted=!1,this.paginator=Bk(this.props.fetchGifs,this.state.gifs),this.onLoaderVisible=e=>{this.unmounted||this.setState({isLoaderVisible:e},this.onFetch)},this.onFetch=Rb(qf.fetchDebounce,()=>Ob(this,null,function*(){if(this.unmounted)return;const{isFetching:e,isLoaderVisible:t}=this.state,{externalGifs:r}=this.props,a=(r||this.state.gifs).length;if(!e&&t){this.setState({isFetching:!0,isError:!1});let l;try{if(l=yield this.paginator(r),this.unmounted)return}catch(c){if(this.unmounted)return;this.setState({isFetching:!1,isError:!0});const{onGifsFetchError:h}=this.props;h&&h(c)}if(l)if(!!!l?.skipCountCheck&&a===l.length)this.setState({isDoneFetching:!0});else{this.setState({gifs:l,isFetching:!1});const{onGifsFetched:h}=this.props;h&&h(l),this.onFetch()}}}))}componentDidMount(){this.unmounted=!1,this.onFetch()}componentWillUnmount(){this.unmounted=!0}render(){const{onGifVisible:e,onGifRightClick:t,className:r=qf.className,onGifSeen:a,onGifClick:l,onGifKeyPress:c,user:h,overlay:m,hideAttribution:g,noLink:v,borderRadius:b,noResultsMessage:_,columns:C,width:R,gutter:I,percentWidth:k,columnOffsets:B,backgroundColor:$,loaderConfig:N,tabIndex:V=0,layoutType:z="GRID",loader:F=iU,eagerIds:E}=this.props,{gifs:S,isError:A,isDoneFetching:D}=this.state,M=!D,U=S.length===0,P=I*(C-1),xe=(R-P)/C,Ee=oU(C,B,S,xe);return de.createElement(XA,{attributes:{layout_type:z}},de.createElement("div",{className:r},de.createElement("div",{style:{width:k||R,display:"flex",gap:I}},Ee.map((Y=[],se)=>de.createElement("div",{key:se,style:{display:"flex",flexDirection:"column",gap:I,width:k?"100%":xe,marginTop:B?.[se]}},Y.map(J=>de.createElement(cd,{style:{aspectRatio:J.images.original.width/J.images.original.height},gif:J,tabIndex:V,key:J.id,width:xe,percentWidth:k?"100%":void 0,onGifClick:l,onGifKeyPress:c,onGifSeen:a,onGifVisible:e,onGifRightClick:t,user:h,overlay:m,backgroundColor:$,hideAttribution:g,noLink:v,borderRadius:b,lazyLoad:!E?.includes(J.id)}))))),!M&&S.length===0&&_,A?de.createElement(eU,{onClick:this.onFetch}):M&&de.createElement(KA,{onVisibleChange:this.onLoaderVisible,config:N},de.createElement(aU,{$isFirstLoad:U},de.createElement(F,{className:qf.loaderClassName})))))}};vc.className="giphy-grid";vc.loaderClassName="loader";vc.fetchDebounce=250;vc.defaultProps=lU;vc.getDerivedStateFromProps=({externalGifs:n},e)=>n&&n!==e.gifs?{gifs:n}:null;var uU=vc,dU=uU,pn={searchbarHeight:"--searchbar-height",bgColor:"--searchbar-bg-color",bgColor2:"--searchbar-bg-color-2",fgColor:"--searchbar-fg-color",cancelButtonDisplay:"--searchbar-cancel-button-display"};Ge.div`
    ${pn.searchbarHeight}: ${n=>n.$searchbarHeight||42}px;
    @media (${n=>n.$mobileMediaQuery}) {
        ${pn.searchbarHeight}: ${n=>n.$mobileSearchbarHeight||35}px;
    }
    ${pn.bgColor}: ${$f};
    ${pn.bgColor2}: ${$f};
    ${pn.fgColor}: ${J0};
    ${n=>n.$darkMode&&fp`
            ${pn.fgColor}: ${$f};
            ${pn.bgColor}: ${J0};
            ${pn.bgColor2}: ${zL};
        `}
    ${pn.cancelButtonDisplay}: ${n=>n.$hideCancelButton?"none":"block"};
`;O.createContext({});O.createContext({});Ge.svg`
    position: relative;
    right: 10px;
    margin-left: 5px;
    cursor: pointer;
    display: var(${pn.cancelButtonDisplay});
`;var e3=6,Lb=`calc(var(${pn.searchbarHeight}) - ${e3*2}px)`,hU=Nd`
to {
    width: ${Lb};
}
`;Ge(pp)`
    height: ${Lb};
    margin: 0;
    width: 0;
    animation: ${hU} 100ms ease-in-out forwards;
`;Ge.div`
    background: var(${pn.bgColor2});
    display: flex;
    align-items: center;
    padding-left: ${e3}px;
`;Ge.div`
    background: ${BL};
    display: flex;
    padding: 0 4px;
    color: ${UL};
    font-family: interface, Helvetica Neue, helvetica, sans-serif;
    font-weight: 600;
    font-size: 12px;
    align-items: center;
    height: ${Lb};
    @media (max-width: 480px) {
        display: none;
    }
`;var fU=({className:n=""})=>de.createElement("svg",{viewBox:"0 0 30 30",version:"1.1",className:n},de.createElement("defs",null,de.createElement("path",{d:"M11.5482521,20.4090671 L4.24727698,28.2009189 C3.68084207,28.8054377 2.73159653,28.8363108 2.12707771,28.2698759 C1.5225589,27.703441 1.4916858,26.7541954 2.0581207,26.1496766 L9.40599838,18.3077689 C7.95982241,16.4371424 7.0978836,14.0789715 7.0978836,11.5181818 C7.0978836,5.44914339 11.9392549,0.518181818 17.9252787,0.518181818 C23.9113026,0.518181818 28.7526738,5.44914339 28.7526738,11.5181818 C28.7526738,17.5872202 23.9113026,22.5181818 17.9252787,22.5181818 C15.539851,22.5181818 13.3361963,21.7351359 11.5482521,20.4090671 Z M17.9252787,19.5181818 C22.242011,19.5181818 25.7526738,15.9425536 25.7526738,11.5181818 C25.7526738,7.09381 22.242011,3.51818182 17.9252787,3.51818182 C13.6085464,3.51818182 10.0978836,7.09381 10.0978836,11.5181818 C10.0978836,15.9425536 13.6085464,19.5181818 17.9252787,19.5181818 Z",id:"giphy-search-icon-path-1"})),de.createElement("g",{id:"search",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},de.createElement("g",{id:"icons/search"},de.createElement("mask",{id:"giphy-search-icon-mask-2",fill:"white"},de.createElement("use",{xlinkHref:"#giphy-search-icon-path-1"})),de.createElement("use",{id:"Mask",fill:"#FFFFFF",fillRule:"nonzero",xlinkHref:"#giphy-search-icon-path-1"}),de.createElement("g",{mask:"url(#giphy-search-icon-mask-2)"},de.createElement("g",{transform:"translate(0.250000, 0.250000)"},de.createElement("g",null)))))),mU=fU,pU="2s",Ky="#E646B6",vS="#FF6666",t3="cubic-bezier(0.920, 0.240, 0.185, 0.730)",gU=Nd`
    0% {
      transform: rotate(34deg) translate(-10px, 80px);
    };
    
    100% {
      transform: rotate(34deg) translate(-10px, -20px);
    }
`,yU=Nd`
    0% { 
      transform: translate(0px, 0px);
      opacity: 0;
    }
    50% {
      opacity: 1;
    }
    100% {
      transform: translate(10px, -17px);
      opacity: 0;
    }
`,vU=Nd`
    0% {
      opacity: 0;
      transform: translateX(-400%);
    }
    50% {
      opacity: 1;
    }
    100% {
      opacity: 0;
      transform: translateX(0);
    }
`;Ge.div`
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    cursor: pointer;
    @media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {
        display: none;
    }
    height: var(${pn.searchbarHeight});
    width: var(${pn.searchbarHeight});
`;Ge.div`
    position: absolute;
    height: 100%;
    width: 100%;
    background: linear-gradient(45deg, ${Ky} 0%, ${vS} 100%);
    border-radius: 0 4px 4px 0;
    overflow: hidden;
    &:before {
        animation: ${vU} ${pU} linear 0s infinite;
        background-image: linear-gradient(45deg, ${Ky} 0%, ${vS} 50%, ${Ky} 100%);
        background-size: 400%;
        background-position: 0% 100%;
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        width: 400%;
    }
`;Ge.div`
    width: 100%;
    height: 100%;
    position: absolute;
    overflow: hidden;
    &::after {
        content: '+';
        color: white;
        font-family: 'SS Standard';
        font-size: 8px;
        position: absolute;
        top: 65%;
        left: 66%;
        animation: ${yU} 1s ${t3} 0s 1 forwards;
    }
`;Ge.div`
    position: absolute;
    width: 200%;
    height: 20px;
    background: rgba(255, 255, 255, 0.5);
    transform: rotate(34deg) translate(-10px, -20px);
    animation: ${gU} 1s ${t3} 0s 1;
    filter: blur(1px);
`;Ge(mU)`
    z-index: 1;
    display: flex;
    width: 50%;
    height: 50%;
`;Ge.div`
    display: flex;
    background: white;
    align-items: center;
    border-radius: 4px;
    height: var(${pn.searchbarHeight});
    background: var(${pn.bgColor2});
`;Ge.input`
    background: inherit;
    box-sizing: border-box;
    border: 0;
    appearance: none;
    font-weight: normal;
    font-family: interface, Helvetica Neue, helvetica, sans-serif;
    outline: 0;
    font-size: 15px;
    padding: 0 10px;
    border-radius: 0;
    text-overflow: ellipsis;
    color: var(${pn.fgColor});
    &::placeholder {
        color: ${pA};
    }
    min-width: 150px;
    flex: 1;
    ${n=>n.$isUsernameSearch&&fp`
            color: ${FL};
        `}
`;var bU=({size:n=18,className:e})=>de.createElement("svg",{width:n,height:n,viewBox:"0 0 18 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:e},de.createElement("g",{id:"trending",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},de.createElement("g",null,de.createElement("rect",{id:"Rectangle",stroke:"#979797",fill:"#D8D8D8",opacity:"0",x:"0.5",y:"0.5",width:"17",height:"17"}),de.createElement("path",{d:"M12.6093329,3.12057664 L15.156896,3.12057664 L9.64199318,9.04253019 L6.88133868,6.8175119 C6.7544587,6.67603813 6.56616874,6.60087259 6.38404017,6.61897279 C6.2490402,6.63288422 6.11891631,6.69661171 6.02063992,6.79697337 C2.21226835,10.5943119 0.308082561,12.4929812 0.308082561,12.4929812 C0.308082561,12.4929812 0.527106106,12.8074292 0.710953088,13.0215425 C0.833517743,13.1642848 0.975497751,13.3098497 1.13689311,13.4582373 L6.47329888,8.13191205 L9.16381134,10.2953038 C9.40800276,10.5710787 9.68933701,10.7021044 10.019278,10.4570223 L16.0239805,4.04474473 C16.0239805,5.87956383 16.0239805,6.79697337 16.0239805,6.79697337 C16.0239805,6.79697337 16.4320205,6.79697337 17.2481004,6.79697337 L17.2481004,1.80604505 C14.1555887,1.80604505 12.6093329,1.80604505 12.6093329,1.80604505 C12.6093329,1.80604505 12.6093329,2.24422225 12.6093329,3.12057664 Z",id:"Shape",stroke:"#00CCFF",strokeWidth:"0.4",fill:"#00CCFF",fillRule:"nonzero",transform:"translate(8.778091, 7.632141) rotate(-2.000000) translate(-8.778091, -7.632141) "})))),xU=bU,n3=9;Ge.div`
    background: ${mA};
    display: flex;
    padding-right: 4px;
    align-items: center;
    margin-right: ${n3}px;
    cursor: pointer;
`;Ge.div`
    background: ${mA};
    display: flex;
    padding: 14px;
    align-items: center;
    margin-right: ${n3}px;
    white-space: nowrap;
    cursor: pointer;
    font-style: italic;
    border-radius: 20px;
`;Ge(pp)`
    height: var(${pn.searchbarHeight});
    width: var(${pn.searchbarHeight});
`;Ge(xU)`
    margin-right: 2px;
`;Ge.div`
    display: flex;
    color: white;
    flex-direction: row;
    font-family: 'interface';
    font-weight: 600;
    font-size: 14px;
    -webkit-overflow-scrolling: touch;
    overflow-x: auto;
    overflow-y: hidden;
    padding-bottom: 10px;
    height: var(${pn.searchbarHeight});
`;var _U=({onClick:n})=>de.createElement("svg",{width:"66px",height:"13px",viewBox:"0 0 66 13",onClick:n},de.createElement("g",{stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},de.createElement("g",{transform:"translate(-1060.000000, -462.000000)",fill:"#FFFFFF",fillRule:"nonzero"},de.createElement("g",{transform:"translate(931.000000, 286.375671)"},de.createElement("g",{transform:"translate(86.000000, 136.124329)"},de.createElement("path",{d:"M47.968,49.1962322 C49.588,49.1962322 51.052,48.6202322 51.58,47.5522322 L51.58,43.8202322 L47.476,43.8202322 L47.476,45.6802322 L49.6,45.6802322 L49.6,46.7602322 C49.12,47.1082322 48.424,47.1922322 47.98,47.1922322 C46.288,47.1922322 45.724,45.8602322 45.724,44.7802322 C45.724,43.1362322 46.612,42.3202322 47.98,42.3202322 C48.544,42.3202322 49.288,42.4762322 49.9,43.0522322 L51.28,41.6842322 C50.176,40.5682322 49.144,40.3282322 47.98,40.3282322 C44.824,40.3282322 43.384,42.5842322 43.384,44.7802322 C43.384,46.9762322 44.644,49.1962322 47.968,49.1962322 Z M54.928,48.9682322 L54.928,40.5682322 L52.564,40.5682322 L52.564,48.9682322 L54.928,48.9682322 Z M58.648,48.9682322 L58.648,46.7002322 L60.352,46.7002322 C62.596,46.6762322 63.724,45.3442322 63.724,43.6282322 C63.724,41.9842322 62.608,40.5682322 60.352,40.5682322 L56.272,40.5682322 L56.272,48.9682322 L58.648,48.9682322 Z M60.352,44.6962322 L58.648,44.6962322 L58.648,42.6082322 L60.352,42.6082322 C61,42.6082322 61.348,43.1122322 61.348,43.6642322 C61.348,44.2162322 61.012,44.6962322 60.352,44.6962322 Z M66.796,48.9802322 L66.796,45.8002322 L69.82,45.8002322 L69.82,48.9802322 L72.172,48.9802322 L72.172,40.5802322 L69.82,40.5802322 L69.82,43.7722322 L66.796,43.7722322 L66.796,40.5802322 L64.42,40.5802322 L64.42,48.9802322 L66.796,48.9802322 Z M78.16,48.9682322 L78.16,45.6202322 L81.496,40.6762322 L81.496,40.5682322 L78.82,40.5682322 L77.008,43.4482322 L75.268,40.5682322 L72.592,40.5682322 L72.592,40.6642322 L75.784,45.6202322 L75.784,48.9682322 L78.16,48.9682322 Z M87.796,49.1362322 C88.972,49.1362322 90.088,48.7402322 90.952,47.8882322 L90.028,46.9642322 C89.44,47.5522322 88.576,47.8762322 87.796,47.8762322 C85.624,47.8762322 84.712,46.3522322 84.7,44.8162322 C84.688,43.2682322 85.66,41.6962322 87.796,41.6962322 C88.576,41.6962322 89.368,41.9722322 89.968,42.5602322 L90.868,41.6962322 C90.016,40.8442322 88.924,40.4242322 87.796,40.4242322 C84.796,40.4242322 83.356,42.6202322 83.3679256,44.8282322 C83.38,47.0362322 84.748,49.1362322 87.796,49.1362322 Z M93.028,48.9682322 L93.028,40.5802322 L91.792,40.5802322 L91.792,48.9682322 L93.028,48.9682322 Z M94.252,41.3122322 C94.252,42.3322322 95.788,42.3322322 95.788,41.3122322 C95.788,40.3042322 94.252,40.3042322 94.252,41.3122322 Z M95.632,48.9682322 L95.632,43.0282322 L94.396,43.0282322 L94.396,48.9682322 L95.632,48.9682322 Z M98.188,51.7162322 L98.188,48.1042322 C98.632,48.8362322 99.556,49.1002322 100.276,49.1002322 C102.112,49.1002322 103.264,47.8042322 103.264,46.0162322 C103.264,44.2282322 102.04,42.9442322 100.276,42.9322322 C99.484,42.9322322 98.644,43.2922322 98.188,44.0122322 L98.116,43.0522322 L96.952,43.0522322 L96.952,51.7162322 L98.188,51.7162322 Z M100.156,47.9002322 C99.076,47.9002322 98.296,47.0722322 98.296,46.0162322 C98.296,44.9602322 99.016,44.1322322 100.156,44.1322322 C101.284,44.1322322 102.028,44.9002322 102.028,46.0162322 C102.028,47.1202322 101.236,47.9002322 100.156,47.9002322 Z M106.456,49.1482322 C107.992,49.1482322 108.964,48.3802322 108.976,47.2762322 C108.988,45.7522322 107.56,45.5122322 106.468,45.4162322 C105.712,45.3442322 105.196,45.1522322 105.184,44.6602322 C105.184,44.1922322 105.688,43.9402322 106.444,43.9522322 C107.032,43.9522322 107.536,44.0722322 108.004,44.5042322 L108.7,43.6882322 C108.04,43.1002322 107.332,42.8962322 106.42,42.8962322 C105.316,42.8962322 103.96,43.3882322 103.96,44.6962322 C103.972,46.0042322 105.256,46.3642322 106.372,46.4722322 C107.248,46.5562322 107.752,46.7602322 107.74,47.2882322 C107.728,47.8402322 107.068,48.0562322 106.48,48.0562322 C105.784,48.0442322 104.956,47.7922322 104.404,47.1802322 L103.756,48.0562322 C104.536,48.9322322 105.496,49.1482322 106.456,49.1482322 Z",id:"GIPHYClips"})))))),wU=_U,EU=Ge.div`
    display: flex;
    align-items: center;
    font-family: interface, helvetica, arial;
    cursor: pointer;
`,SU=Ge(pp)`
    flex-shrink: 0;
`,TU=Ge.div`
    display: flex;
    flex-direction: column;
`,Vb=({gif:n,className:e,onClick:t})=>{const{user:r}=n;return!r?.username&&!r?.display_name?null:de.createElement(EU,{className:[Vb.className,e].join(" "),onClick:a=>{if(a.preventDefault(),a.stopPropagation(),t)t(n);else{const l=r.profile_url;l&&window.open(l,"_blank")}}},de.createElement(SU,{user:r}),de.createElement(TU,null,de.createElement(wU,{onClick:a=>{a.preventDefault(),a.stopPropagation(),t?t(n):n.url&&window.open(n.url,"_blank")}}),de.createElement(YA,{user:r})))};Vb.className="giphy-attribution";var CU=Vb,r3=25,kU=({size:n=r3,onClick:e=()=>{}})=>de.createElement("svg",{width:n,height:n,viewBox:"0 0 26 23",onClick:e},de.createElement("g",{stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},de.createElement("g",{transform:"translate(1.000000, 0.000000)",fill:"#FFF",fillRule:"nonzero"},de.createElement("path",{d:"M11.9625091,0.572584405 L11.9625091,22.2272644 C11.9625091,22.4856644 11.8466091,22.6635044 11.6151891,22.7611644 C11.3480491,22.8413444 11.1390491,22.7968844 10.9878091,22.6277844 L4.8732291,15.9143244 L0.573909096,15.9143244 C0.413549096,15.9143244 0.277509096,15.8588444 0.166549096,15.7475044 C0.0573082348,15.6406091 -0.00292164572,15.4933347 -1.77635684e-15,15.3405244 L-1.77635684e-15,7.45058441 C-1.77635684e-15,7.29022441 0.0555890961,7.15456441 0.167309096,7.04322441 C0.278269096,6.93226441 0.414309096,6.87640441 0.573909096,6.87640441 L4.8732291,6.87640441 L10.9874291,0.172064405 C11.1390491,0.00296440549 11.3484291,-0.0414955945 11.6151891,0.0386844055 C11.8466091,0.136344405 11.9621291,0.314564405 11.9621291,0.572584405 L11.9625091,0.572584405 Z"}),de.createElement("path",{d:"M15.7579491,16.0914044 L14.6798891,13.6594044 C15.5739159,13.2635547 16.1503537,12.3776671 16.1501091,11.3999244 C16.150386,10.4242626 15.5763999,9.53983269 14.6852091,9.14272441 L15.7697291,6.71376441 C17.6193585,7.53872062 18.810518,9.37466359 18.8101092,11.3999244 C18.8105521,13.4298903 17.6139475,15.2691931 15.7579491,16.0914044 L15.7579491,16.0914044 Z"}),de.createElement("path",{d:"M18.3647491,20.2619044 L17.2863091,17.8299044 C19.8302925,16.7031661 21.4705725,14.1822599 21.4701091,11.3999244 C21.4701091,8.59818441 19.8167291,6.09892441 17.3022691,4.97678441 L18.3864091,2.54782441 C21.8804724,4.10607079 24.1307363,7.57414217 24.1301093,11.3999244 C24.1308375,15.2343934 21.8705556,18.7086904 18.3647491,20.2619044 Z"})))),AU=({size:n=r3,onClick:e=()=>{}})=>de.createElement("svg",{onClick:e,height:n,width:n,viewBox:"0 0 26 23",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},de.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},de.createElement("g",{id:"Group",transform:"translate(1.000000, 0.000000)",fill:"#FFFFFF",fillRule:"nonzero"},de.createElement("path",{d:"M11.9625091,0.572584405 L11.9625091,22.2272644 C11.9625091,22.4856644 11.8466091,22.6635044 11.6151891,22.7611644 C11.3480491,22.8413444 11.1390491,22.7968844 10.9878091,22.6277844 L4.8732291,15.9143244 L0.573909096,15.9143244 C0.413549096,15.9143244 0.277509096,15.8588444 0.166549096,15.7475044 C0.0573082348,15.6406091 -0.00292164572,15.4933347 0,15.3405244 L0,7.45058441 C0,7.29022441 0.0555890961,7.15456441 0.167309096,7.04322441 C0.278269096,6.93226441 0.414309096,6.87640441 0.573909096,6.87640441 L4.8732291,6.87640441 L10.9874291,0.172064405 C11.1390491,0.00296440549 11.3484291,-0.0414955945 11.6151891,0.0386844055 C11.8466091,0.136344405 11.9621291,0.314564405 11.9621291,0.572584405 L11.9625091,0.572584405 Z",id:"Path"})),de.createElement("g",{id:"Group",transform:"translate(14.887009, 6.947630)",fill:"#FFFFFF",fillRule:"nonzero"},de.createElement("path",{d:"M7.88199149,6.27905236 C7.94693088,6.35707599 7.94693088,6.47033309 7.88199149,6.54835671 L6.54835671,7.88199149 C6.47033309,7.94693088 6.35707599,7.94693088 6.27905236,7.88199149 L3.96534802,5.56828715 L1.65164367,7.88199149 C1.57362004,7.94693088 1.46036294,7.94693088 1.38233932,7.88199149 L0.0487045381,6.54835671 C-0.016234846,6.47033309 -0.016234846,6.35707599 0.0487045381,6.27905236 L2.36240889,3.96534802 L0.0487045381,1.65164367 C-0.016234846,1.57362004 -0.016234846,1.46036294 0.0487045381,1.38233932 L1.38233932,0.0487045381 C1.46036294,-0.016234846 1.57362004,-0.016234846 1.65164367,0.0487045381 L3.96534802,2.36240889 L6.27905236,0.0487045381 C6.35707599,-0.016234846 6.47033309,-0.016234846 6.54835671,0.0487045381 L7.88199149,1.38233932 C7.94693088,1.46036294 7.94693088,1.57362004 7.88199149,1.65164367 L5.56828715,3.96534802 L7.88199149,6.27905236 Z",id:"Shape"})))),RU=Ge.div`
    background: ${$f};
    height: ${n=>n.$barHeight}px;
    position: absolute;
    width: 5px;
    bottom: 0;
    left: 0;
    opacity: 0.95;
`,NU=({videoEl:n})=>{hV(2147483647,100);const e=n?.currentTime||0,t=n?.duration||0,r=e/t;let a=Math.round(r*100),l=5;return n?.height<200?l=3:n?.height<300&&(l=4),a=t<10&&a>98?100:a,de.createElement(RU,{style:{width:`${a}%`},$barHeight:l,className:"hide-in-percy"})},IU=NU,jU=(n,e="")=>{switch(n){case 1:return"Aborted. The fetching process for the media resource was aborted by the user agent at the user's request.";case 2:return"Network Error. A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.";case 3:return"Decode Error. An error of some description occurred while decoding the media resource, after the resource was established to be usable.";case 4:return`Can not play a video of type "${e.split(".").pop()}" on this platform.`;default:return""}},DU=(n,e,t,r,a)=>{const l=a+n;return!r.has(l)&&t>0&&e>t*n?(r.add(l),!0):!1},MU=[.25,.5,.75],s3="giphy-video",OU={IDLE:1},i3=({muted:n,ccEnabled:e=!1,ccLanguage:t="en",loop:r=!0,onStateChange:a,onTimeUpdate:l,onCanPlay:c,onFirstPlay:h,onWaiting:m,onMuted:g,onError:v,onEnded:b,onLoop:_,onQuartile:C,onEndFullscreen:R,setVideoEl:I,gif:k,width:B,percentWidth:$,height:N,volume:V=.7,className:z=s3,isInPlayer:F})=>{var E,S,A;const D=N||ap(k,B);let M;$&&(M=`${Math.round(D/B*100)}%`);const[U,P]=O.useState(ME(k.video,B,D)),xe=O.useRef(0);U||console.warn(`GiphyJS No video content for id: ${k.id}`);const Ee=O.useRef(Date.now()),Y=O.useRef(!1),se=O.useRef(0),J=O.useRef(0),Ce=O.useRef(new Set);O.useEffect(()=>{Ee.current=Date.now(),Y.current=!1,se.current=1,J.current=0,Ce.current=new Set},[k.id]);const Ne=O.useRef(null);O.useEffect(()=>{const he=ME(k.video,B,D);Ne.current&&U?.url&&he.url!==U.url&&(U.url.indexOf(String(k.id))!==-1&&(xe.current=Ne.current.currentTime),P(he))},[B,N,k.video,D,U?.url,k.id]),O.useEffect(()=>{Ne.current&&U?.url&&xe.current&&(Ne.current.currentTime=xe.current,xe.current=0)},[U?.url,xe]);const H=O.useCallback(()=>{var he;const _e=Ne.current,ae=(he=_e?.error)==null?void 0:he.code;if(ae&&_e?.src){const Re=jU(ae,_e?.src);console.error(Re),v?.(ae)}},[v]),q=O.useCallback(()=>{a?.("playing"),Y.current||(Y.current=!0,k.analytics_response_payload&&jb({actionType:"START",analyticsResponsePayload:k.analytics_response_payload}),h?.(Date.now()-Ee.current))},[h,a,k]),re=O.useCallback(()=>a?.("paused"),[a]),ne=O.useCallback(()=>{const he=Ne.current;if(he){const _e=he.currentTime;MU.some(ae=>DU(ae,_e,he.duration,Ce.current,se.current)?(C?.(ae),!0):!1),l?.(_e||0)}},[C,l]),we=O.useCallback(()=>c?.(),[c]),ye=O.useCallback(()=>{const he=Ne.current;he?.currentTime!==0&&he?.networkState!==OU.IDLE&&m?.(++J.current)},[m]),Te=O.useCallback(()=>{r&&Ne.current&&Ne.current.play(),_?.(se.current),se.current=se.current+1,Y.current&&b?.()},[b,r,_]),Fe=O.useCallback(()=>R?.(),[R]),Ye=O.useCallback(he=>Ob(void 0,null,function*(){if(he){const _e=he.play();if(_e!==void 0)try{yield _e,g?.(!1)}catch{he.muted=!0,g?.(!0),he.play()}}}),[g]);O.useEffect(()=>{const he=Ne.current;he&&(Ye(he),I?.(he),isNaN(V)||(he.volume=V))},[]),O.useEffect(()=>{const he=Ne.current;return he&&(he.addEventListener("play",q),he.addEventListener("pause",re),he.addEventListener("error",H),he.addEventListener("timeupdate",ne),he.addEventListener("canplay",we),he.addEventListener("ended",Te),he.addEventListener("waiting",ye),he.addEventListener("webkitendfullscreen",Fe)),()=>{he&&(he.removeEventListener("play",q),he.removeEventListener("pause",re),he.removeEventListener("error",H),he.removeEventListener("timeupdate",ne),he.removeEventListener("canplay",we),he.removeEventListener("ended",Te),he.removeEventListener("waiting",ye),he.removeEventListener("webkitendfullscreen",Fe))}},[q,re,H,ne,we,Te,ye,Fe]);const be=(A=(S=(E=k.video)==null?void 0:E.captions)==null?void 0:S[t])==null?void 0:A.vtt;return U?.url?de.createElement("video",{crossOrigin:"anonymous",draggable:!0,className:z,width:F?"100%":$||B,height:F?"100%":M||D,muted:n,autoPlay:!0,playsInline:!0,ref:Ne,src:U?.url,"data-giphy-id":k.id},e&&be&&de.createElement("track",{label:"English",kind:"subtitles",srcLang:t,src:be,default:!0})):null};i3.className=s3;var a3=i3,PU=Ge.div`
    position: relative;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: black;
    font-family: interface, helvetica, arial;
    -webkit-font-smoothing: antialiased;
`,LU=Ge.div`
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    cursor: pointer;
`,VU=Ge.div`
    position: absolute;
    top: 10px;
    right: 10px;
    left: 10px;
    bottom: 0;
    display: flex;
    justify-content: space-between;
    opacity: ${n=>n.$isHovered?1:0};
    transition: opacity ease-out 250ms;
    align-items: flex-start;
`,UU=Ge.div`
    font-size: 22px;
    color: white;
    margin-bottom: 5px;
    font-weight: bold;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    user-select: none;
    cursor: pointer;
`,zU=Ge.div`
    position: relative;
    min-width: 0;
`,BU=Ge.div`
    &:before {
        background: linear-gradient(rgba(18, 18, 18, 0.6), rgba(0, 0, 0, 0));
        content: '';
        height: ${n=>n.$isLargePlayer?125:75}px;
        left: 0;
        pointer-events: none;
        position: absolute;
        top: 0;
        width: 100%;
    }
    &:after {
        background: linear-gradient(rgba(0, 0, 0, 0), rgba(18, 18, 18, 0.6));
        content: '';
        height: ${n=>n.$isLargePlayer?125:75}px;
        left: 0;
        pointer-events: none;
        position: absolute;
        bottom: 0;
        width: 100%;
    }
`,FU=300,HU=4e3,$U=n=>{const{style:e,width:t,percentWidth:r,hideMute:a,hideAttribution:l,hideProgressBar:c,hideTitle:h,className:m,persistentControls:g,gif:v,overlay:b}=n,[_,C]=O.useState(!1),[R,I]=O.useState(null),[k,B]=O.useState(n.muted),[$,N]=O.useState(!1),{setVideoEl:V,onMuted:z,onUserMuted:F}=n,E=n.height||ap(v,t);let S;r&&(S=`${Math.round(E/t*100)}%`);const[,A,D]=oV(()=>{C(!1)},HU),M=O.useCallback(Y=>{z?.(Y),N(Y)},[N,z]),U=O.useCallback(Y=>{V?.(Y),I(Y)},[V,I]),P=()=>{$?(N(!1),B(!1)):B(!k)};O.useEffect(()=>{B(n.muted)},[n.muted]);const xe=g||_,Ee=E>=FU;return O.useEffect(()=>(xe?D():A(),()=>A()),[xe,A,D]),de.createElement(PU,{className:m,style:Ci({width:r||t,height:S||E},e),onMouseOver:()=>C(!0),onMouseLeave:()=>C(!1),onMouseMove:()=>{C(!0),D()},onClick:Y=>{F?.(!(k||$)),R?.play(),Y.preventDefault(),P()}},de.createElement(a3,Mb(Ci({},n),{isInPlayer:!0,onMuted:M,setVideoEl:U,muted:k})),xe&&de.createElement(BU,{$isLargePlayer:Ee}),de.createElement(VU,{$isHovered:xe},de.createElement(zU,null,!h&&Ee&&de.createElement(UU,{onClick:Y=>{Y.preventDefault(),Y.stopPropagation(),window.open(v.url,"_blank")}},v.title),R&&!l?de.createElement(CU,{gif:v}):null),!a&&de.createElement(LU,null,k||$?de.createElement(AU,null):de.createElement(kU,null))),xe&&!c&&R?de.createElement(IU,{videoEl:R}):null,b&&de.createElement(b,{gif:v,isHovered:_,width:t,height:E}))},qU=n=>(n.overlay&&!n.controls&&console.warn(`${Pn.PREFIX}: Overlays only work when controls are enabled`),n.controls?de.createElement($U,Ci({},n)):de.createElement(a3,Ci({},n))),GU=qU;Ge.div`
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    height: 100%;
    width: 100%;
`;Ge(GU)`
    height: 100%;
    display: inline-block;
    object-fit: fill;
    pointer-events: none;
    background: rgb(0, 0, 0, 0);
`;Ge.div`
    position: absolute;
    top: 6px;
    right: 6px;
    cursor: pointer;
    opacity: ${n=>n.$isHovered?1:.8};
    transition: opacity ease-out 800ms;
`;H0("X-GIPHY-SDK-NAME","ReactSDK");const YU="9S3bPWJJTZZdynuLXHFSBstNA5B6tes9",bS=new V7(YU),KU=({onSelect:n})=>{const[e,t]=O.useState(""),[r,a]=O.useState(400),l=O.useRef(null);O.useEffect(()=>{l.current&&a(l.current.offsetWidth)},[]);const c=h=>e?bS.search(e,{offset:h,limit:10}):bS.trending({offset:h,limit:10});return d.jsxs("div",{className:"w-full h-full flex flex-col bg-dark-sidebar rounded-lg overflow-hidden border border-dark-hover",children:[d.jsx("div",{className:"p-3 border-b border-dark-hover",children:d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"text",placeholder:"Search GIFs...",value:e,onChange:h=>t(h.target.value),className:"w-full bg-dark-input text-dark-text px-4 py-2 pl-10 rounded outline-none border border-transparent focus:border-brand-primary transition-all",autoFocus:!0}),d.jsx(bC,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-dark-muted",size:20})]})}),d.jsx("div",{ref:l,className:"flex-1 overflow-y-auto overflow-x-hidden p-2 custom-scrollbar",children:r>0&&d.jsx(dU,{width:r-20,columns:3,fetchGifs:c,onGifClick:(h,m)=>{m.preventDefault(),n(h.images.original.url)},noLink:!0,hideAttribution:!0,gutter:6},e)})]})},QU=({onSubmit:n,onClose:e})=>{const[t,r]=O.useState(""),[a,l]=O.useState(["",""]),[c,h]=O.useState(!1),[m,g]=O.useState(!1),v=()=>{a.length<10&&l([...a,""])},b=I=>{a.length>2&&l(a.filter((k,B)=>B!==I))},_=(I,k)=>{const B=[...a];B[I]=k,l(B)},C=()=>{const I=a.filter(k=>k.trim()!=="");t.trim()&&I.length>=2&&(n({question:t.trim(),options:I,multipleChoice:c,anonymous:m}),e())},R=t.trim()&&a.filter(I=>I.trim()).length>=2;return d.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-dark-sidebar rounded-lg w-full max-w-md mx-4 shadow-2xl animate-fadeIn",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-hover",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(hb,{className:"text-brand-primary",size:24}),d.jsx("h2",{className:"text-lg font-semibold text-dark-text",children:"Create Poll"})]}),d.jsx("button",{onClick:e,className:"p-1 hover:bg-dark-hover rounded transition-colors",children:d.jsx(An,{className:"text-dark-muted",size:20})})]}),d.jsxs("div",{className:"p-4 space-y-4 max-h-[60vh] overflow-y-auto custom-scrollbar",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-dark-muted mb-2",children:"Question"}),d.jsx("input",{type:"text",value:t,onChange:I=>r(I.target.value),placeholder:"Ask a question...",maxLength:300,className:`w-full bg-dark-input text-dark-text px-4 py-3 rounded-lg
                         border border-transparent focus:border-brand-primary
                         outline-none transition-colors`,autoFocus:!0}),d.jsxs("div",{className:"text-xs text-dark-muted mt-1 text-right",children:[t.length,"/300"]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-dark-muted mb-2",children:"Options"}),d.jsx("div",{className:"space-y-2",children:a.map((I,k)=>d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("span",{className:"text-dark-muted text-sm w-6",children:[k+1,"."]}),d.jsx("input",{type:"text",value:I,onChange:B=>_(k,B.target.value),placeholder:`Option ${k+1}`,maxLength:100,className:`flex-1 bg-dark-input text-dark-text px-3 py-2 rounded
                               border border-transparent focus:border-brand-primary
                               outline-none transition-colors text-sm`}),a.length>2&&d.jsx("button",{onClick:()=>b(k),className:"p-1 hover:bg-red-500/20 text-red-400 rounded transition-colors",children:d.jsx(An,{size:18})})]},k))}),a.length<10&&d.jsxs("button",{onClick:v,className:"mt-2 flex items-center gap-1 text-sm text-brand-primary hover:text-brand-primary/80 transition-colors",children:[d.jsx(Fu,{size:18}),"Add Option"]})]}),d.jsxs("div",{className:"space-y-3 pt-2 border-t border-dark-hover",children:[d.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[d.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${c?"bg-brand-primary border-brand-primary":"border-dark-muted group-hover:border-dark-text"}`,children:c&&d.jsx(Ao,{size:14,className:"text-white"})}),d.jsx("span",{className:"text-dark-text text-sm",children:"Allow multiple selections"}),d.jsx("input",{type:"checkbox",checked:c,onChange:I=>h(I.target.checked),className:"sr-only"})]}),d.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[d.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${m?"bg-brand-primary border-brand-primary":"border-dark-muted group-hover:border-dark-text"}`,children:m&&d.jsx(Ao,{size:14,className:"text-white"})}),d.jsx("span",{className:"text-dark-text text-sm",children:"Anonymous voting"}),d.jsx("input",{type:"checkbox",checked:m,onChange:I=>g(I.target.checked),className:"sr-only"})]})]})]}),d.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t border-dark-hover",children:[d.jsx(Je,{variant:"secondary",onClick:e,children:"Cancel"}),d.jsx(Je,{variant:"primary",onClick:C,disabled:!R,children:"Create Poll"})]})]})})},XU=(n,e)=>{if(e===0)return"0 KB/s";const t=n/e;return t>1024*1024?`${(t/(1024*1024)).toFixed(1)} MB/s`:`${(t/1024).toFixed(0)} KB/s`},WU=n=>n.type.startsWith("image/")?"image":n.type.startsWith("video/")||n.type.startsWith("audio/")?"video":"auto",JU=(n,e)=>new Promise((t,r)=>{const a="dcqipv1hn",l="lumo_upload",c=WU(n),h=`https://api.cloudinary.com/v1_1/${a}/${c}/upload`,m=new FormData;m.append("file",n),m.append("upload_preset",l);const g=n.name.replace(/\.[^/.]+$/,"").replace(/[^a-zA-Z0-9_-]/g,"_");m.append("public_id",g);const v=new XMLHttpRequest;v.open("POST",h);const b=Date.now();v.upload.onprogress=_=>{if(_.lengthComputable){const C=_.loaded/_.total*100,R=(Date.now()-b)/1e3,I=XU(_.loaded,R);e&&e(C,I)}},v.onload=()=>{if(v.status===200)try{const _=JSON.parse(v.responseText);t({url:_.secure_url,name:_.original_filename||n.name,type:_.resource_type,format:_.format,bytes:_.bytes})}catch{r(new Error("Invalid response from Cloudinary"))}else try{const _=JSON.parse(v.responseText);r(new Error(_.error?.message||`Upload failed with status ${v.status}`))}catch{r(new Error(`Upload failed with status ${v.status}`))}},v.onerror=()=>r(new Error("Network error during upload")),v.send(m)}),o3=({serverId:n,channelId:e,channel:t,userId:r,userProfile:a,userRole:l,users:c,replyingTo:h,onCancelReply:m})=>{const[g,v]=O.useState(""),[b,_]=O.useState(!1),[C,R]=O.useState(!1),[I,k]=O.useState(""),[B,$]=O.useState(0),[N,V]=O.useState(!1),[z,F]=O.useState(!1),[E,S]=O.useState(!1),[A,D]=O.useState(!1),[M,U]=O.useState({uploading:!1,progress:0,speed:""}),[P,xe]=O.useState(null),[Ee,Y]=O.useState(null),[se,J]=O.useState(""),[Ce,Ne]=O.useState(!1),H=O.useRef(0),q=O.useRef(null),re=O.useRef(null),{warning:ne,error:we}=Ys(),ye=["owner","admin","moderator"].includes(l),Te=!t?.locked||ye,Fe="This channel is locked. Only staff can send messages.",Ye=ge=>{const ze=re.current?.selectionStart||g.length,gt=g.slice(0,ze)+ge+g.slice(ze);v(gt),V(!1),re.current?.focus()},be=async ge=>{if(F(!1),!(!g.trim()&&!Te))try{_(!0);const ze={text:ge,userId:r,timestamp:_t(),mentions:[],replyTo:null};n?await Vn(mt(ve,"servers",n,"channels",e,"messages"),ze):(await Vn(mt(ve,"dms",e,"messages"),ze),await nt(Me(ve,"dms",e),{lastMessage:{text:"GIF",userId:r,timestamp:_t()},updatedAt:_t(),hiddenFor:[]}))}catch(ze){console.error("Error sending GIF:",ze),we("Failed to send GIF")}finally{_(!1)}},he=async ge=>{if(Te)try{_(!0);const ze={type:"poll",text:ge.question,poll:{question:ge.question,options:ge.options,votes:{},multipleChoice:ge.multipleChoice,anonymous:ge.anonymous},userId:r,timestamp:_t(),mentions:[]};n?await Vn(mt(ve,"servers",n,"channels",e,"messages"),ze):(await Vn(mt(ve,"dms",e,"messages"),ze),await nt(Me(ve,"dms",e),{lastMessage:{text:` Poll: ${ge.question}`,userId:r,timestamp:_t()},updatedAt:_t(),hiddenFor:[]}))}catch(ze){console.error("Error creating poll:",ze),we("Failed to create poll")}finally{_(!1)}},_e=ge=>{if(!ge)return;if(ge.size>40*1024*1024){we("File size must be less than 40MB");return}let ze=null;ge.type.startsWith("image/")&&(ze=URL.createObjectURL(ge)),xe(ge),Y(ze),J(""),S(!1),q.current&&(q.current.value="")},ae=ge=>{_e(ge.target.files?.[0])},Re=()=>document.querySelector('[role="dialog"]')!==null||document.querySelector(".modal-overlay")!==null||document.body.style.overflow==="hidden",Ie=ge=>{ge.preventDefault(),ge.stopPropagation(),!Re()&&(H.current++,ge.dataTransfer.items&&ge.dataTransfer.items.length>0&&Ne(!0))},X=ge=>{ge.preventDefault(),ge.stopPropagation(),H.current--,H.current===0&&Ne(!1)},le=ge=>{ge.preventDefault(),ge.stopPropagation()},Se=ge=>{if(ge.preventDefault(),ge.stopPropagation(),Ne(!1),H.current=0,Re())return;const ze=ge.dataTransfer.files;ze&&ze.length>0&&_e(ze[0])};O.useEffect(()=>(window.addEventListener("dragenter",Ie),window.addEventListener("dragleave",X),window.addEventListener("dragover",le),window.addEventListener("drop",Se),()=>{window.removeEventListener("dragenter",Ie),window.removeEventListener("dragleave",X),window.removeEventListener("dragover",le),window.removeEventListener("drop",Se)}),[]);const Oe=()=>{Ee&&URL.revokeObjectURL(Ee),xe(null),Y(null),J("")},qe=async()=>{if(P)try{U({uploading:!0,progress:0,speed:"0 KB/s"});let ge,ze;if(P.type.startsWith("image/"))ge=await ip(P,(er,Yt)=>{U({uploading:!0,progress:er,speed:Yt})});else{const wn=await JU(P,(er,Yt)=>{U({uploading:!0,progress:er,speed:Yt})});ge=wn.url,ze=wn}const Ht={text:se.trim()?`${ge}
${se}`:ge,userId:r,timestamp:_t(),mentions:[],replyTo:null};n?await Vn(mt(ve,"servers",n,"channels",e,"messages"),Ht):(await Vn(mt(ve,"dms",e,"messages"),Ht),await nt(Me(ve,"dms",e),{lastMessage:{text:P.type.startsWith("image/")?" Image":" Attachment",userId:r,timestamp:_t()},updatedAt:_t(),hiddenFor:[]})),Oe()}catch(ge){console.error("Error uploading file:",ge),we("Failed to upload file")}finally{U({uploading:!1,progress:0,speed:""})}};O.useEffect(()=>{const ge=g.length,ze=g.slice(0,ge),gt=ze.lastIndexOf("@");if(gt!==-1){const Ht=ze.slice(gt+1);if(!Ht.includes(" ")){k(Ht.toLowerCase()),$(gt),R(!0);return}}R(!1)},[g]);const Ke=()=>{const ge=[];return n&&("everyone".startsWith(I.toLowerCase())&&ge.push({id:"everyone",displayName:"everyone",type:"special"}),["admin","moderator","member"].forEach(gt=>{gt.startsWith(I.toLowerCase())&&ge.push({id:`role-${gt}`,displayName:gt,type:"role"})})),c&&c.filter(gt=>gt.id!==r&&gt.displayName.toLowerCase().startsWith(I.toLowerCase())).forEach(gt=>{ge.push({...gt,type:"user"})}),ge.slice(0,8)},It=ge=>{const ze=g.slice(0,B),gt=g.slice(B+I.length+1),Ht=`${ze}@${ge.displayName} ${gt}`;v(Ht),R(!1)};O.useEffect(()=>{const ge=ze=>{document.activeElement!==re.current&&(document.activeElement?.tagName==="INPUT"||document.activeElement?.tagName==="TEXTAREA"||ze.ctrlKey||ze.metaKey||ze.altKey||["Escape","Tab","Enter","Backspace","Delete"].includes(ze.key)||document.querySelector('[role="dialog"]')||ze.key.length===1&&re.current?.focus())};return window.addEventListener("keydown",ge),()=>window.removeEventListener("keydown",ge)},[]);const kt=async ge=>{if(ge.preventDefault(),!!g.trim()&&!(!e||!r)){a?.isMuted&&ne("You are muted and cannot send messages"),_(!0);try{const ze=/@(\w+)/g,gt=[];let Ht;for(;(Ht=ze.exec(g))!==null;){const er=Ht[1].toLowerCase();if(er==="everyone")c.forEach(Yt=>{Yt.id!==r&&gt.push(Yt.id)});else if(["admin","moderator","member"].includes(er))c.forEach(Yt=>{Yt.role===er&&Yt.id!==r&&gt.push(Yt.id)});else{const Yt=c.find(Ai=>Ai.displayName.toLowerCase()===er);Yt&&Yt.id!==r&&gt.push(Yt.id)}}const wn={text:g.trim(),userId:r,timestamp:_t(),mentions:[...new Set(gt)],replyTo:h?{messageId:h.id,userId:h.userId,text:h.text.substring(0,100)}:null};if(n){if(await Vn(mt(ve,"servers",n,"channels",e,"messages"),wn),gt.length>0){const er=gt.map(Yt=>nt(Me(ve,"users",Yt),{[`unreadMentions.${n}.count`]:fm(1),[`unreadMentions.${n}.lastMentionAt`]:_t(),[`unreadMentions.${n}.lastMentionText`]:g.trim().substring(0,50)}).catch(Ai=>{console.error("Error updating mention for user:",Yt,Ai)}));await Promise.all(er)}}else await Vn(mt(ve,"dms",e,"messages"),wn),await nt(Me(ve,"dms",e),{lastMessage:{text:g.trim().substring(0,100),userId:r,timestamp:_t()},updatedAt:_t(),hiddenFor:[]});v(""),m&&m()}catch(ze){console.error("Error sending message:",ze),we("Failed to send message")}finally{_(!1)}}};return d.jsxs("div",{className:"px-4 pb-6 relative",children:[h&&d.jsxs("div",{className:"mb-2 bg-dark-sidebar border-l-4 border-green-400 p-3 rounded flex items-start justify-between",children:[d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"text-xs text-green-400 font-semibold mb-1",children:["Replying to ",c.find(ge=>ge.id===h.userId)?.displayName||"Unknown"]}),d.jsx("div",{className:"text-sm text-dark-muted truncate",children:h.text})]}),d.jsx("button",{onClick:m,className:"ml-2 text-dark-muted hover:text-dark-text transition-colors",title:"Cancel reply",children:d.jsx(An,{size:18})})]}),C&&d.jsx("div",{className:"absolute bottom-full left-4 right-4 mb-2 bg-dark-sidebar rounded-lg shadow-lg border border-dark-hover max-h-48 overflow-y-auto",children:Ke().map(ge=>d.jsx("button",{onClick:()=>It(ge),className:"w-full px-4 py-2 text-left hover:bg-dark-hover transition-colors flex items-center gap-2",children:ge.type==="special"||ge.type==="role"?d.jsxs("span",{className:"text-dark-text font-medium",children:["@",ge.displayName,ge.type==="role"&&d.jsx("span",{className:"ml-2 text-xs text-dark-muted",children:"(role)"})]}):d.jsxs(d.Fragment,{children:[ge.photoUrl?d.jsx("img",{src:ge.photoUrl,alt:ge.displayName,className:"w-8 h-8 rounded-full object-cover",onError:ze=>{ze.target.style.display="none",ze.target.nextSibling.style.display="flex"}}):null,d.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold text-sm",style:{display:ge.photoUrl?"none":"flex"},children:ge.displayName[0].toUpperCase()}),d.jsxs("span",{className:"text-dark-text",children:["@",ge.displayName]})]})},ge.id))}),d.jsxs("form",{onSubmit:kt,className:"relative",children:[N&&d.jsx(GP,{onSelect:Ye,onClose:()=>V(!1)}),M.uploading&&d.jsxs("div",{className:"absolute -top-12 left-0 right-0 bg-dark-sidebar border border-dark-hover rounded-lg p-2 shadow-lg animate-fade-in-up z-50",children:[d.jsxs("div",{className:"flex items-center justify-between text-xs text-dark-text mb-1",children:[d.jsx("span",{className:"font-semibold",children:"Uploading Image..."}),d.jsxs("span",{className:"text-dark-muted",children:[Math.round(M.progress),"%  ",M.speed]})]}),d.jsx("div",{className:"h-1.5 bg-dark-hover rounded-full overflow-hidden",children:d.jsx("div",{className:"h-full bg-brand-primary transition-all duration-200 ease-out",style:{width:`${M.progress}%`}})})]}),P&&d.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-dark-bg border border-dark-hover rounded-lg shadow-2xl max-w-lg w-full overflow-hidden flex flex-col p-4",children:[d.jsxs("h3",{className:"text-dark-text font-semibold mb-4 flex items-center gap-2",children:[d.jsx(iE,{className:"text-brand-primary"}),"Upload Attachment"]}),d.jsx("div",{className:"flex-1 w-full bg-black/50 rounded-lg overflow-hidden flex items-center justify-center mb-4 border border-dark-hover min-h-[200px] max-h-[400px]",children:Ee?d.jsx("img",{src:Ee,alt:"Preview",className:"max-w-full max-h-full object-contain"}):d.jsxs("div",{className:"flex flex-col items-center gap-2 text-dark-muted",children:[d.jsx("div",{className:"text-6xl",children:""}),d.jsx("div",{className:"text-sm font-medium text-dark-text max-w-xs truncate px-4",children:P.name}),d.jsxs("div",{className:"text-xs",children:[(P.size/1024/1024).toFixed(2)," MB"]})]})}),d.jsx("input",{type:"text",value:se,onChange:ge=>J(ge.target.value),placeholder:"Add a caption... (optional)",className:"w-full bg-dark-input text-dark-text px-4 py-2 rounded-lg border border-dark-hover focus:border-brand-primary outline-none mb-4",onKeyDown:ge=>{ge.key==="Enter"&&!M.uploading&&qe()}}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("button",{onClick:Oe,className:"px-4 py-2 text-dark-text hover:text-dark-muted transition-colors font-medium",disabled:M.uploading,children:"Cancel"}),d.jsx("button",{onClick:qe,className:"px-6 py-2 bg-brand-primary hover:bg-brand-secondary text-white rounded-md transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",disabled:M.uploading,children:M.uploading?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Uploading..."]}):d.jsxs(d.Fragment,{children:[d.jsx(sE,{size:18}),"Send"]})})]}),M.uploading&&d.jsxs("div",{className:"mt-4",children:[d.jsxs("div",{className:"flex justify-between text-xs text-dark-muted mb-1",children:[d.jsx("span",{children:M.speed}),d.jsxs("span",{children:[Math.round(M.progress),"%"]})]}),d.jsx("div",{className:"h-1 bg-dark-hover rounded-full overflow-hidden",children:d.jsx("div",{className:"h-full bg-brand-primary transition-all duration-200",style:{width:`${M.progress}%`}})})]})]})}),z&&d.jsxs("div",{className:"absolute bottom-full right-0 mb-4 w-[85vw] max-w-[400px] h-[450px] shadow-2xl rounded-lg z-50",children:[d.jsx("div",{className:"fixed inset-0 z-[-1]",onClick:()=>F(!1)}),d.jsx(KU,{onSelect:be})]}),d.jsx("input",{ref:re,type:"text",value:g,onChange:ge=>v(ge.target.value),onKeyDown:ge=>{if(ge.key==="Tab"&&C){ge.preventDefault();const ze=Ke();ze.length>0&&It(ze[0])}},onPaste:async ge=>{const ze=ge.clipboardData.items;for(let gt=0;gt<ze.length;gt++)for(let Ht=0;Ht<ze.length;Ht++)if(ze[Ht].kind==="file"){ge.preventDefault(),_e(ze[Ht].getAsFile());break}},placeholder:Te?a?.isMuted?"You are muted":"Type a message...":Fe,disabled:b||a?.isMuted||!Te||P!==null,className:`w-full bg-dark-input text-dark-text px-12 py-3 pr-36 rounded-lg
                     border border-transparent focus:border-brand-primary
                     outline-none transition-colors duration-200
                     placeholder:text-dark-muted
                     disabled:opacity-50 disabled:cursor-not-allowed`}),Ce&&d.jsxs("div",{className:"fixed inset-0 z-[200] bg-brand-primary/90 flex flex-col items-center justify-center animate-fade-in pointer-events-none",children:[d.jsx("div",{className:"bg-white/10 p-8 rounded-full mb-6",children:d.jsx(rE,{size:64,className:"text-white animate-bounce"})}),d.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Drop your file here"}),d.jsx("p",{className:"text-white/80",children:"to upload instantly"})]}),d.jsxs("div",{className:"absolute left-3 top-0 bottom-0 flex items-center plus-menu-container",children:[" ",d.jsx("button",{type:"button",onClick:()=>S(!E),className:`text-dark-muted hover:text-brand-primary transition-colors flex items-center justify-center ${E?"text-brand-primary":""}`,title:"Add attachment",disabled:!Te,children:d.jsx(rE,{size:26})}),E&&d.jsxs("div",{className:"absolute bottom-full left-0 mb-2 w-48 bg-dark-sidebar border border-dark-hover rounded-lg shadow-xl overflow-hidden z-50 animate-fade-in-up",children:[d.jsxs("button",{type:"button",onClick:()=>{q.current?.click(),S(!1)},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-dark-hover text-left transition-colors",children:[d.jsx(iE,{className:"text-green-400",size:20}),d.jsx("span",{className:"text-sm text-dark-text font-medium",children:"Upload File"})]}),d.jsxs("button",{type:"button",onClick:()=>{D(!0),S(!1)},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-dark-hover text-left transition-colors",disabled:!n,children:[d.jsx(hb,{className:"text-brand-primary",size:20}),d.jsx("span",{className:"text-sm text-dark-text font-medium",children:"Create Poll"})]})]})]}),d.jsx("input",{type:"file",ref:q,onChange:ae,className:"hidden"}),d.jsx("button",{type:"button",onClick:()=>V(!N),className:`absolute right-14 top-1/2 -translate-y-1/2
                     text-dark-muted hover:text-brand-primary
                     transition-colors`,title:"Add emoji",children:d.jsx(DM,{size:24})}),d.jsx("button",{type:"button",onClick:()=>F(!z),className:`absolute right-24 top-1/2 -translate-y-1/2
                     text-dark-muted hover:text-brand-primary
                     transition-colors border-2 border-current rounded px-1 text-[10px] font-bold h-6 flex items-center justify-center`,title:"Add GIF",children:"GIF"}),d.jsx("button",{type:"submit",disabled:!g.trim()||b||a?.isMuted||!Te,className:`absolute right-3 top-1/2 -translate-y-1/2
                     text-dark-muted hover:text-brand-primary
                     transition-colors disabled:opacity-50 disabled:cursor-not-allowed`,children:d.jsx(sE,{size:24})})]}),A&&d.jsx(QU,{onSubmit:he,onClose:()=>D(!1)})]})},l3=({messages:n,users:e,onResultClick:t})=>{const[r,a]=O.useState(""),[l,c]=O.useState([]),[h,m]=O.useState(!1),g=b=>{if(a(b),!b.trim()){c([]);return}const _=n.filter(C=>C.text.toLowerCase().includes(b.toLowerCase())).slice(0,20);c(_)},v=b=>e.find(_=>_.id===b)||{displayName:"Unknown"};return h?d.jsxs("div",{className:"relative flex-1 max-w-md",children:[d.jsx("input",{type:"text",value:r,onChange:b=>g(b.target.value),placeholder:"Search messages...",autoFocus:!0,className:`w-full bg-dark-input text-dark-text px-4 py-2 pr-10 rounded-lg
                   border border-transparent focus:border-brand-primary
                   outline-none transition-colors placeholder:text-dark-muted`}),d.jsx("button",{onClick:()=>{m(!1),a(""),c([])},className:"absolute right-2 top-1/2 -translate-y-1/2 text-dark-muted hover:text-dark-text",children:d.jsx(An,{size:20})}),l.length>0&&d.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-dark-sidebar border border-dark-hover rounded-lg shadow-xl max-h-96 overflow-y-auto z-50",children:l.map(b=>d.jsxs("button",{onClick:()=>{t&&t(b),m(!1),a(""),c([])},className:"w-full px-4 py-3 text-left hover:bg-dark-hover transition-colors border-b border-dark-hover last:border-b-0",children:[d.jsx("div",{className:"text-xs text-brand-primary font-semibold mb-1",children:v(b.userId).displayName}),d.jsx("div",{className:"text-sm text-dark-text line-clamp-2",children:b.text})]},b.id))})]}):d.jsx("button",{onClick:()=>m(!0),className:"p-2 hover:bg-dark-hover rounded transition-colors",title:"Search messages",children:d.jsx(bC,{size:20,className:"text-dark-muted"})})},ZU=({messages:n,users:e,onClose:t,onJumpToMessage:r})=>{const a=n.filter(c=>c.pinned),l=c=>e.find(h=>h.id===c)||{displayName:"Unknown"};return a.length===0?d.jsxs("div",{className:"w-80 bg-dark-sidebar border-l border-dark-hover h-full flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-hover",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Fl,{className:"text-blue-400",size:20}),d.jsx("h3",{className:"font-semibold text-dark-text",children:"Pinned Messages"})]}),d.jsx("button",{onClick:t,className:"text-dark-muted hover:text-dark-text transition-colors",children:d.jsx(An,{size:20})})]}),d.jsx("div",{className:"flex-1 flex items-center justify-center text-dark-muted text-sm",children:"No pinned messages"})]}):d.jsxs("div",{className:"w-80 bg-dark-sidebar border-l border-dark-hover h-full flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-hover",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Fl,{className:"text-blue-400",size:20}),d.jsx("h3",{className:"font-semibold text-dark-text",children:"Pinned Messages"}),d.jsxs("span",{className:"text-xs text-dark-muted",children:["(",a.length,")"]})]}),d.jsx("button",{onClick:t,className:"text-dark-muted hover:text-dark-text transition-colors",children:d.jsx(An,{size:20})})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:a.map(c=>{const h=l(c.userId);return d.jsx("div",{onClick:()=>r(c.id),className:"bg-dark-bg p-3 rounded-lg cursor-pointer hover:bg-dark-hover transition-colors border border-transparent hover:border-brand-primary",children:d.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[h.photoUrl?d.jsx("img",{src:h.photoUrl,alt:h.displayName,className:"w-8 h-8 rounded-full object-cover",onError:m=>{m.target.style.display="none",m.target.nextSibling.style.display="flex"}}):null,d.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold text-sm",style:{display:h.photoUrl?"none":"flex"},children:h.displayName?.[0]?.toUpperCase()||"U"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"font-semibold text-dark-text text-sm",children:h.displayName}),d.jsx("span",{className:"text-xs text-dark-muted",children:np(c.timestamp)})]}),d.jsx("div",{className:"text-dark-text text-sm mt-1 line-clamp-3",children:d.jsx(Ak,{children:c.text})}),c.pinnedBy&&d.jsxs("div",{className:"text-xs text-blue-400 mt-2 flex items-center gap-1",children:[d.jsx(Fl,{size:12}),d.jsxs("span",{children:["Pinned by ",l(c.pinnedBy).displayName]})]})]})]})},c.id)})})]})},ez=({currentStatus:n,onStatusChange:e,onClose:t})=>{const[r,a]=O.useState(!1),[l,c]=O.useState(""),[h,m]=O.useState(""),g=_=>{e(_),t()},v=()=>{h.trim()&&(e({emoji:l,text:h.trim(),type:"custom"}),t())},b=()=>{e(null),t()};return d.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-dark-sidebar rounded-lg p-6 w-96 max-w-full mx-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h3",{className:"text-lg font-semibold text-dark-text",children:"Set Status"}),d.jsx("button",{onClick:t,className:"text-dark-muted hover:text-dark-text transition-colors",children:d.jsx(An,{size:24})})]}),r?d.jsx(d.Fragment,{children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-sm text-dark-muted mb-2 block",children:"Emoji"}),d.jsx("input",{type:"text",value:l,onChange:_=>c(_.target.value.slice(0,2)),className:"w-full bg-dark-input text-dark-text px-4 py-2 rounded-lg text-2xl text-center",placeholder:"",maxLength:2})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm text-dark-muted mb-2 block",children:"Status Text"}),d.jsx("input",{type:"text",value:h,onChange:_=>m(_.target.value),className:"w-full bg-dark-input text-dark-text px-4 py-2 rounded-lg",placeholder:"What's on your mind?",maxLength:50,autoFocus:!0}),d.jsxs("div",{className:"text-xs text-dark-muted mt-1 text-right",children:[h.length,"/50"]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>a(!1),className:"flex-1 px-4 py-2 rounded-lg bg-dark-bg hover:bg-dark-hover transition-colors text-dark-text",children:"Back"}),d.jsx("button",{onClick:v,disabled:!h.trim(),className:"flex-1 px-4 py-2 rounded-lg bg-brand-primary hover:bg-brand-primary/80 transition-colors text-white font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Set Status"})]})]})}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"space-y-2 mb-4",children:pP.map(_=>d.jsxs("button",{onClick:()=>g(_),className:"w-full px-4 py-3 rounded-lg bg-dark-bg hover:bg-dark-hover transition-colors text-left flex items-center gap-3",children:[d.jsx("span",{className:"text-2xl",children:_.emoji}),d.jsx("span",{className:"text-dark-text",children:_.text})]},_.type))}),d.jsx("button",{onClick:()=>a(!0),className:"w-full px-4 py-3 rounded-lg bg-brand-primary hover:bg-brand-primary/80 transition-colors text-white font-medium",children:" Custom Status"}),n&&d.jsx("button",{onClick:b,className:"w-full mt-2 px-4 py-2 rounded-lg bg-dark-bg hover:bg-dark-hover transition-colors text-admin text-sm",children:"Clear Status"})]})]})})},tz=()=>{const n=[{name:"Screen Sharing",free:"720p 30fps",premium:"1080p 60fps"},{name:"Profile Badge",free:"",premium:""},{name:"Custom Backgrounds",free:"",premium:""},{name:"Upload Limit",free:"10 MB",premium:"100 MB"},{name:"Priority Support",free:"",premium:""},{name:"Server Boosts",free:"",premium:"2x Boosts"}];return d.jsxs("div",{className:"bg-dark-sidebar/50 rounded-xl overflow-hidden border border-dark-hover",children:[d.jsxs("div",{className:"grid grid-cols-3 bg-dark-hover/50 p-4 text-sm font-bold text-dark-text uppercase tracking-wider",children:[d.jsx("div",{children:"Feature"}),d.jsx("div",{className:"text-center text-dark-muted",children:"Free"}),d.jsx("div",{className:"text-center text-brand-primary",children:"Premium"})]}),d.jsx("div",{className:"divide-y divide-dark-hover",children:n.map((e,t)=>d.jsxs("div",{className:"grid grid-cols-3 p-4 text-sm hover:bg-white/5 transition-colors",children:[d.jsx("div",{className:"font-medium text-dark-text",children:e.name}),d.jsx("div",{className:"text-center text-dark-muted",children:e.free}),d.jsx("div",{className:"text-center font-bold text-white",children:e.premium})]},t))})]})},nz=({question:n,answer:e})=>{const[t,r]=O.useState(!1);return d.jsxs("div",{className:"border-b border-dark-hover last:border-0",children:[d.jsxs("button",{className:"w-full flex items-center justify-between py-4 text-left font-medium text-dark-text hover:text-white transition-colors",onClick:()=>r(!t),children:[d.jsx("span",{children:n}),d.jsx(bM,{className:`transform transition-transform duration-300 ${t?"rotate-180":""}`,size:20})]}),d.jsx("div",{className:`overflow-hidden transition-all duration-300 ${t?"max-h-40 opacity-100 mb-4":"max-h-0 opacity-0"}`,children:d.jsx("p",{className:"text-sm text-dark-muted leading-relaxed",children:e})})]})},rz=()=>{const n=[{icon:vm,title:"HD Screen Sharing",description:"Share your screen in 1080p 60fps quality with friends.",color:"text-blue-400",bg:"bg-blue-400/10"},{icon:TM,title:"Exclusive Profile Badge",description:"Stand out with the shiny Premium badge on your profile.",color:"text-purple-400",bg:"bg-purple-400/10"},{icon:PM,title:"Custom Profile Backgrounds",description:"Personalize your profile with custom banner images (Coming Soon).",color:"text-yellow-400",bg:"bg-yellow-400/10"},{icon:NM,title:"Priority Support",description:"Get faster responses for all your support tickets.",color:"text-green-400",bg:"bg-green-400/10"}],e=[{q:"Can I cancel anytime?",a:"Yes, you can cancel your subscription at any time from your account settings. Your benefits will continue until the end of the billing period."},{q:"Is payment secure?",a:"Absolutely. We use Stripe for payment processing, which is the industry standard for security. We never store your card details."},{q:"Do benefits apply to all servers?",a:"Yes! Your Premium benefits travel with you to any server you join on Lumo Chat."}];return d.jsxs("div",{className:"animate-fade-in pb-10",children:[d.jsx("style",{children:`
        @keyframes shine {
          0% { transform: translateX(-100%); }
          100% { transform: translateX(100%); }
        }
        @keyframes float {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-10px); }
        }
        .shine-effect::after {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          width: 50%;
          height: 100%;
          background: linear-gradient(to right, transparent, rgba(255,255,255,0.3), transparent);
          transform: skewX(-20deg) translateX(-150%);
          animation: shine 3s infinite;
        }
        .float-animation {
          animation: float 6s ease-in-out infinite;
        }
      `}),d.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-600 p-8 text-white shadow-2xl transform transition-all hover:scale-[1.005] mb-8",children:[d.jsx("div",{className:"absolute top-0 right-0 -mr-16 -mt-16 w-80 h-80 rounded-full bg-white/10 blur-3xl animate-pulse"}),d.jsx("div",{className:"absolute bottom-0 left-0 -ml-16 -mb-16 w-64 h-64 rounded-full bg-black/20 blur-3xl animate-pulse",style:{animationDelay:"1s"}}),d.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center gap-6",children:[d.jsx("div",{className:"float-animation p-5 bg-white/10 backdrop-blur-md rounded-full shadow-inner ring-4 ring-white/20 shrink-0",children:d.jsx(td,{size:56,className:"text-white drop-shadow-[0_0_15px_rgba(255,255,255,0.5)]"})}),d.jsxs("div",{className:"text-center md:text-left",children:[d.jsxs("h1",{className:"text-4xl font-extrabold tracking-tight mb-2 drop-shadow-md",children:["Release the ",d.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 to-orange-300",children:"Boost!"})]}),d.jsx("p",{className:"text-indigo-100 font-medium text-lg leading-relaxed max-w-2xl",children:"Unlock the full potential of Lumo Chat. Get special perks, enhanced quality, and support the development."})]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{children:[d.jsxs("h2",{className:"text-xl font-bold text-dark-text mb-6 flex items-center gap-2",children:[d.jsx("span",{className:"w-1 h-6 bg-brand-primary rounded-full box-shadow-glow"}),"Premium Perks"]}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:n.map((t,r)=>d.jsxs("div",{className:"group relative overflow-hidden p-4 rounded-xl bg-dark-sidebar border border-dark-hover hover:border-brand-primary/50 transition-all duration-300 hover:shadow-xl hover:shadow-brand-primary/10 hover:-translate-y-1",style:{animationDelay:`${r*100}ms`},children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700 ease-in-out pointer-events-none"}),d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:`p-3 rounded-lg ${t.bg} group-hover:scale-110 transition-transform duration-300`,children:d.jsx(t.icon,{size:28,className:`${t.color} drop-shadow-sm`})}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-bold text-dark-text mb-1 group-hover:text-white transition-colors text-lg",children:t.title}),d.jsx("p",{className:"text-sm text-dark-muted leading-relaxed group-hover:text-gray-300",children:t.description})]})]})]},r))})]}),d.jsxs("div",{className:"bg-dark-bg rounded-2xl p-1 border-2 border-brand-primary/30 group hover:border-brand-primary/60 transition-colors relative overflow-hidden shadow-2xl",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 opacity-20 group-hover:opacity-40 transition-opacity"}),d.jsxs("div",{className:"bg-dark-sidebar/90 backdrop-blur-xl rounded-xl p-8 flex flex-col sm:flex-row items-center justify-between gap-6 relative z-10",children:[d.jsxs("div",{children:[d.jsx("div",{className:"inline-block px-3 py-1 rounded-full bg-gradient-to-r from-indigo-500 to-pink-500 text-[10px] font-bold text-white uppercase tracking-widest mb-3 shadow-lg",children:"BEST VALUE"}),d.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:"Monthly"}),d.jsxs("p",{className:"text-dark-muted text-sm flex items-center gap-2",children:[d.jsx(Ao,{size:16,className:"text-green-500"})," Secure payment"]})]}),d.jsxs("div",{className:"flex flex-col items-center gap-4",children:[d.jsxs("div",{className:"text-4xl font-extrabold text-white",children:["$4.99",d.jsx("span",{className:"text-sm text-dark-muted font-normal ml-1",children:"/mo"})]}),d.jsx("button",{className:"relative overflow-hidden px-10 py-4 bg-gradient-to-r from-indigo-600 to-pink-600 hover:from-indigo-500 hover:to-pink-500 rounded-xl text-white font-bold shadow-lg transform transition-all hover:scale-105 active:scale-95 shine-effect whitespace-nowrap",onClick:()=>window.open("https://buy.stripe.com/test","_blank"),children:d.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["Subscribe Now ",d.jsx(td,{})]})})]})]})]})]}),d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{children:[d.jsxs("h2",{className:"text-xl font-bold text-dark-text mb-6 flex items-center gap-2",children:[d.jsx("span",{className:"w-1 h-6 bg-purple-500 rounded-full box-shadow-glow"}),"Why Go Premium?"]}),d.jsx(tz,{})]}),d.jsxs("div",{children:[d.jsxs("h2",{className:"text-xl font-bold text-dark-text mb-6 flex items-center gap-2",children:[d.jsx("span",{className:"w-1 h-6 bg-gray-500 rounded-full"}),"Common Questions"]}),d.jsx("div",{className:"bg-dark-sidebar rounded-xl p-4 border border-dark-hover",children:e.map((t,r)=>d.jsx(nz,{question:t.q,answer:t.a},r))})]})]})]})]})};var cc;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(cc||(cc={}));class Qy extends Error{constructor(e,t,r){super(e),this.message=e,this.code=t,this.data=r}}const sz=n=>{var e,t;return n?.androidBridge?"android":!((t=(e=n?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},iz=n=>{const e=n.CapacitorCustomPlatform||null,t=n.Capacitor||{},r=t.Plugins=t.Plugins||{},a=()=>e!==null?e.name:sz(n),l=()=>a()!=="web",c=b=>{const _=g.get(b);return!!(_?.platforms.has(a())||h(b))},h=b=>{var _;return(_=t.PluginHeaders)===null||_===void 0?void 0:_.find(C=>C.name===b)},m=b=>n.console.error(b),g=new Map,v=(b,_={})=>{const C=g.get(b);if(C)return console.warn(`Capacitor plugin "${b}" already registered. Cannot register plugins twice.`),C.proxy;const R=a(),I=h(b);let k;const B=async()=>(!k&&R in _?k=typeof _[R]=="function"?k=await _[R]():k=_[R]:e!==null&&!k&&"web"in _&&(k=typeof _.web=="function"?k=await _.web():k=_.web),k),$=(S,A)=>{var D,M;if(I){const U=I?.methods.find(P=>A===P.name);if(U)return U.rtype==="promise"?P=>t.nativePromise(b,A.toString(),P):(P,xe)=>t.nativeCallback(b,A.toString(),P,xe);if(S)return(D=S[A])===null||D===void 0?void 0:D.bind(S)}else{if(S)return(M=S[A])===null||M===void 0?void 0:M.bind(S);throw new Qy(`"${b}" plugin is not implemented on ${R}`,cc.Unimplemented)}},N=S=>{let A;const D=(...M)=>{const U=B().then(P=>{const xe=$(P,S);if(xe){const Ee=xe(...M);return A=Ee?.remove,Ee}else throw new Qy(`"${b}.${S}()" is not implemented on ${R}`,cc.Unimplemented)});return S==="addListener"&&(U.remove=async()=>A()),U};return D.toString=()=>`${S.toString()}() { [capacitor code] }`,Object.defineProperty(D,"name",{value:S,writable:!1,configurable:!1}),D},V=N("addListener"),z=N("removeListener"),F=(S,A)=>{const D=V({eventName:S},A),M=async()=>{const P=await D;z({eventName:S,callbackId:P},A)},U=new Promise(P=>D.then(()=>P({remove:M})));return U.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await M()},U},E=new Proxy({},{get(S,A){switch(A){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return I?F:V;case"removeListener":return z;default:return N(A)}}});return r[b]=E,g.set(b,{name:b,proxy:E,platforms:new Set([...Object.keys(_),...I?[R]:[]])}),E};return t.convertFileSrc||(t.convertFileSrc=b=>b),t.getPlatform=a,t.handleError=m,t.isNativePlatform=l,t.isPluginAvailable=c,t.registerPlugin=v,t.Exception=Qy,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},az=n=>n.Capacitor=iz(n),Ia=az(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),gp=Ia.registerPlugin;class Ub{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(t);const l=this.windowListeners[e];l&&!l.registered&&this.addWindowListener(l),r&&this.sendRetainedArgumentsForEvent(e);const c=async()=>this.removeListener(e,t);return Promise.resolve({remove:c})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,r){const a=this.listeners[e];if(!a){if(r){let l=this.retainedEventArguments[e];l||(l=[]),l.push(t),this.retainedEventArguments[e]=l}return}a.forEach(l=>l(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:r=>{this.notifyListeners(t,r)}}}unimplemented(e="not implemented"){return new Ia.Exception(e,cc.Unimplemented)}unavailable(e="not available"){return new Ia.Exception(e,cc.Unavailable)}async removeListener(e,t){const r=this.listeners[e];if(!r)return;const a=r.indexOf(t);this.listeners[e].splice(a,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(r=>{this.notifyListeners(e,r)}))}}const xS=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),_S=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class oz extends Ub{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[a,l]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=_S(a).trim(),l=_S(l).trim(),t[a]=l}),t}async setCookie(e){try{const t=xS(e.key),r=xS(e.value),a=`; expires=${(e.expires||"").replace("expires=","")}`,l=(e.path||"/").replace("path=",""),c=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${r||""}${a}; path=${l}; ${c};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}gp("CapacitorCookies",{web:()=>new oz});const lz=async n=>new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{const a=r.result;e(a.indexOf(",")>=0?a.split(",")[1]:a)},r.onerror=a=>t(a),r.readAsDataURL(n)}),cz=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(a=>a.toLocaleLowerCase()).reduce((a,l,c)=>(a[l]=n[e[c]],a),{})},uz=(n,e=!0)=>n?Object.entries(n).reduce((r,a)=>{const[l,c]=a;let h,m;return Array.isArray(c)?(m="",c.forEach(g=>{h=e?encodeURIComponent(g):g,m+=`${l}=${h}&`}),m.slice(0,-1)):(h=e?encodeURIComponent(c):c,m=`${l}=${h}`),`${r}&${m}`},"").substr(1):null,dz=(n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),a=cz(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(a.includes("application/x-www-form-urlencoded")){const l=new URLSearchParams;for(const[c,h]of Object.entries(n.data||{}))l.set(c,h);t.body=l.toString()}else if(a.includes("multipart/form-data")||n.data instanceof FormData){const l=new FormData;if(n.data instanceof FormData)n.data.forEach((h,m)=>{l.append(m,h)});else for(const h of Object.keys(n.data))l.append(h,n.data[h]);t.body=l;const c=new Headers(t.headers);c.delete("content-type"),t.headers=c}else(a.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t};class hz extends Ub{async request(e){const t=dz(e,e.webFetchExtra),r=uz(e.params,e.shouldEncodeUrlParams),a=r?`${e.url}?${r}`:e.url,l=await fetch(a,t),c=l.headers.get("content-type")||"";let{responseType:h="text"}=l.ok?e:{};c.includes("application/json")&&(h="json");let m,g;switch(h){case"arraybuffer":case"blob":g=await l.blob(),m=await lz(g);break;case"json":m=await l.json();break;case"document":case"text":default:m=await l.text()}const v={};return l.headers.forEach((b,_)=>{v[_]=b}),{data:m,headers:v,status:l.status,url:l.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}gp("CapacitorHttp",{web:()=>new hz});var wS;(function(n){n.Dark="DARK",n.Light="LIGHT",n.Default="DEFAULT"})(wS||(wS={}));var ES;(function(n){n.StatusBar="StatusBar",n.NavigationBar="NavigationBar"})(ES||(ES={}));class fz extends Ub{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}gp("SystemBars",{web:()=>new fz});const la=gp("PushNotifications",{});let Su=null,$u=null,Xy=!1,Tu=null;const sv={initialize:async n=>{if($u=n,!Ia.isNativePlatform()){console.log("Push notifications not supported on web/PWA");return}if(Xy){console.log("[FCM] Service already initialized. Current Token:",Su?"HIDDEN":"NONE"),$u&&Su&&SS(Su);return}console.log("[FCM] Initializing service...");let e=await la.checkPermissions();if(e.receive==="prompt"&&(e=await la.requestPermissions()),e.receive!=="granted"){const t="User denied push notification permissions!";console.error("[FCM]",t),Tu=t;return}try{await la.register(),console.log("[FCM] Registration request sent")}catch(t){console.error("[FCM] Registration call failed:",t),Tu=`Registration failed: ${t.message}`}la.addListener("registration",t=>{console.log("[FCM] Registration successful. Token length:",t.value.length),Su=t.value,Tu=null,$u&&SS(t.value)}),la.addListener("registrationError",t=>{console.error("[FCM] Registration error event:",t),Tu=`FCM Error: ${t.error}`}),la.addListener("pushNotificationReceived",t=>{console.log("Push notification received: ",t)}),la.addListener("pushNotificationActionPerformed",t=>{console.log("Push notification action performed",t.actionId,t.inputValue)}),Xy=!0},cleanup:async()=>{Ia.isNativePlatform()&&(await la.removeAllListeners(),Xy=!1)},getToken:()=>Su,getRegistrationError:()=>Tu};async function SS(n){if($u)try{const e=Me(ve,"users",$u);await nt(e,{fcmTokens:Cd(n)}),console.log("FCM token automatically synced to Firestore")}catch(e){console.error("Error syncing FCM token to Firestore:",e)}}const mz=[{id:"premium",label:"Premium",icon:td,category:"User Settings"},{id:"account",label:"My Account",icon:OM,category:"User Settings"},{id:"status",label:"Status",icon:wM,category:"User Settings"},{id:"security",label:"Privacy & Security",icon:xM,category:"User Settings"},{id:"about",label:"About",icon:cb,category:"App Settings"}],pz=({isOpen:n,onClose:e})=>{const{currentUser:t,userProfile:r}=Zn(),{success:a,error:l}=Ys(),[c,h]=O.useState("account"),[m,g]=O.useState(r?.photoUrl||""),[v,b]=O.useState(r?.bio||""),[_,C]=O.useState(!1),[R,I]=O.useState(!1),[k,B]=O.useState({progress:0,speed:""}),$=O.useRef(null),[N,V]=O.useState(!1),[z,F]=O.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[E,S]=O.useState(!1),[A,D]=O.useState(""),[M,U]=O.useState(""),P=()=>{const q=sv.getToken(),re=sv.getRegistrationError();q&&D(q),re&&U(re)};O.useEffect(()=>{n&&c==="about"&&P()},[n,c]),O.useEffect(()=>{g(r?.photoUrl||""),b(r?.bio||"")},[r]),O.useEffect(()=>{const q=re=>{re.key==="Escape"&&n&&e()};return n&&(document.addEventListener("keydown",q),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",q),document.body.style.overflow="unset"}},[n,e]);const xe=async()=>{if(t){C(!0);try{await nt(Me(ve,"users",t.uid),{photoUrl:m.trim()}),a("Profile photo updated successfully")}catch(q){console.error("Error updating photo:",q),l("Failed to update profile photo")}finally{C(!1)}}},Ee=async q=>{if(!(!q||!t)){if(!q.type.startsWith("image/")){l("Please select an image file");return}if(q.size>10*1024*1024){l("Image size must be less than 10MB");return}I(!0);try{const re=await ip(q,(ne,we)=>{B({progress:ne,speed:we})});await nt(Me(ve,"users",t.uid),{photoUrl:re}),g(re),a("Profile photo updated successfully!")}catch(re){console.error("Error uploading photo:",re),l("Failed to upload photo")}finally{I(!1),B({progress:0,speed:""}),$.current&&($.current.value="")}}},Y=async()=>{if(t){C(!0);try{await nt(Me(ve,"users",t.uid),{bio:v.trim()}),a("Bio updated successfully")}catch(q){console.error("Error updating bio:",q),l("Failed to update bio")}finally{C(!1)}}},se=async()=>{if(!(!t||!t.email)){if(!z.currentPassword||!z.newPassword||!z.confirmPassword){l("Please fill in all password fields");return}if(z.newPassword.length<6){l("New password must be at least 6 characters");return}if(z.newPassword!==z.confirmPassword){l("New passwords do not match");return}S(!0);try{const q=Io.credential(t.email,z.currentPassword);await P5(t,q),await U5(t,z.newPassword),a("Password changed successfully"),F({currentPassword:"",newPassword:"",confirmPassword:""})}catch(q){console.error("Error changing password:",q),q.code==="auth/wrong-password"?l("Current password is incorrect"):q.code==="auth/weak-password"?l("New password is too weak"):l("Failed to change password")}finally{S(!1)}}},J=async q=>{if(t)try{await nt(Me(ve,"users",t.uid),{status:q}),a(q?"Status updated":"Status cleared")}catch(re){console.error("Error updating status:",re),l("Failed to update status")}},Ce=async q=>{if(t)try{await nt(Me(ve,"users",t.uid),{presence:q}),a(`Status set to ${q}`)}catch{l("Failed to update status")}};if(!n)return null;const Ne=mz.reduce((q,re)=>(q[re.category]||(q[re.category]=[]),q[re.category].push(re),q),{}),H=()=>{switch(c){case"premium":return d.jsx(rz,{});case"account":return d.jsxs("div",{className:"space-y-8",children:[d.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"My Account"}),d.jsxs("div",{className:"bg-dark-bg rounded-lg overflow-hidden",children:[d.jsx("div",{className:"h-24 bg-gradient-to-r from-brand-primary to-purple-600"}),d.jsx("div",{className:"p-4 relative",children:d.jsxs("div",{className:"flex items-end gap-4 -mt-12",children:[d.jsxs("div",{className:"relative",children:[m?d.jsx("img",{src:m,alt:"Profile",className:"w-20 h-20 rounded-full object-cover border-4 border-dark-bg",onError:q=>{q.target.style.display="none",q.target.nextSibling.style.display="flex"}}):null,d.jsx("div",{className:"w-20 h-20 rounded-full bg-brand-primary flex items-center justify-center text-white font-bold text-2xl border-4 border-dark-bg",style:{display:m?"none":"flex"},children:r?.displayName?.[0]?.toUpperCase()||"U"})]}),d.jsxs("div",{className:"flex-1 pb-2",children:[d.jsx("h2",{className:"text-xl font-bold text-dark-text",children:r?.displayName}),d.jsx("p",{className:"text-dark-muted text-sm",children:t?.email})]})]})})]}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Profile Photo"}),d.jsx("input",{type:"file",ref:$,onChange:q=>Ee(q.target.files?.[0]),accept:"image/*",className:"hidden"}),d.jsx("div",{className:"flex gap-3 mb-4",children:d.jsx("button",{onClick:()=>$.current?.click(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-brand-primary hover:bg-brand-secondary text-white rounded-lg transition-colors disabled:opacity-50",disabled:R,children:R?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Uploading..."]}):d.jsxs(d.Fragment,{children:[d.jsx(D0,{size:20}),"Upload Image"]})})}),R&&d.jsxs("div",{className:"mb-4",children:[d.jsxs("div",{className:"flex justify-between text-xs text-dark-muted mb-1",children:[d.jsx("span",{children:k.speed}),d.jsxs("span",{children:[Math.round(k.progress),"%"]})]}),d.jsx("div",{className:"h-1 bg-dark-hover rounded-full overflow-hidden",children:d.jsx("div",{className:"h-full bg-brand-primary transition-all duration-200",style:{width:`${k.progress}%`}})})]}),d.jsx("div",{className:"text-xs text-dark-muted text-center mb-2",children:"or paste image URL"}),d.jsx(Xt,{placeholder:"https://example.com/photo.jpg",value:m,onChange:q=>g(q.target.value)}),d.jsx(Je,{variant:"secondary",className:"mt-3 w-full",onClick:xe,disabled:_||m===r?.photoUrl||R,children:_?"Updating...":"Update from URL"})]}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"About Me"}),d.jsx("textarea",{placeholder:"Tell others about yourself...",value:v,onChange:q=>b(q.target.value),maxLength:190,rows:4,className:`w-full bg-dark-input text-dark-text px-4 py-3 rounded-lg
                           border border-transparent focus:border-brand-primary
                           outline-none transition-colors duration-200
                           placeholder:text-dark-muted resize-none`}),d.jsxs("div",{className:"flex justify-between items-center mt-2",children:[d.jsxs("span",{className:"text-xs text-dark-muted",children:[v.length,"/190"]}),d.jsx(Je,{variant:"primary",onClick:Y,disabled:_||v===r?.bio,children:_?"Updating...":"Save"})]})]}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Account Info"}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"flex justify-between items-center py-2 border-b border-dark-hover",children:d.jsxs("div",{children:[d.jsx("div",{className:"text-xs text-dark-muted uppercase",children:"Display Name"}),d.jsx("div",{className:"text-dark-text font-medium",children:r?.displayName})]})}),d.jsx("div",{className:"flex justify-between items-center py-2 border-b border-dark-hover",children:d.jsxs("div",{children:[d.jsx("div",{className:"text-xs text-dark-muted uppercase",children:"Email"}),d.jsx("div",{className:"text-dark-text font-medium",children:t?.email})]})}),d.jsx("div",{className:"flex justify-between items-center py-2",children:d.jsxs("div",{children:[d.jsx("div",{className:"text-xs text-dark-muted uppercase",children:"Role"}),d.jsx("div",{className:"text-dark-text font-medium capitalize",children:r?.role||"member"})]})})]})]})]});case"status":return d.jsxs("div",{className:"space-y-8",children:[d.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Status"}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Online Status"}),d.jsx("div",{className:"grid grid-cols-1 gap-2",children:[{key:"online",label:"Online",color:"bg-green-500",desc:"Visible to others"},{key:"idle",label:"Idle",color:"bg-yellow-500",desc:"Away from keyboard"},{key:"dnd",label:"Do Not Disturb",color:"bg-red-500",desc:"Mute notifications"},{key:"invisible",label:"Invisible",color:"bg-gray-500",desc:"Appear offline to others"}].map(q=>d.jsxs("button",{onClick:()=>Ce(q.key),className:`p-4 rounded-lg border transition-all text-left flex items-center gap-4 ${r?.presence===q.key||!r?.presence&&q.key==="online"?"border-brand-primary bg-brand-primary/10":"border-dark-hover hover:border-dark-muted bg-dark-sidebar"}`,children:[d.jsx("span",{className:`w-4 h-4 rounded-full ${q.color}`}),d.jsxs("div",{children:[d.jsx("div",{className:"text-sm font-medium text-dark-text",children:q.label}),d.jsx("div",{className:"text-xs text-dark-muted",children:q.desc})]})]},q.key))})]}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Custom Status"}),r?.status?d.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-sidebar rounded-lg",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("span",{className:"text-2xl",children:r.status.emoji}),d.jsx("span",{className:"text-dark-text",children:r.status.text})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Je,{variant:"secondary",onClick:()=>V(!0),children:"Edit"}),d.jsx(Je,{variant:"danger",onClick:()=>J(null),children:"Clear"})]})]}):d.jsxs("div",{className:"text-center py-6",children:[d.jsx("p",{className:"text-dark-muted mb-4",children:"No custom status set"}),d.jsx(Je,{variant:"primary",onClick:()=>V(!0),children:"Set a Status"})]})]})]});case"security":return d.jsxs("div",{className:"space-y-8",children:[d.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Privacy & Security"}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Change Password"}),d.jsxs("div",{className:"space-y-4 max-w-md",children:[d.jsx(Xt,{label:"Current Password",type:"password",placeholder:"Enter current password",value:z.currentPassword,onChange:q=>F({...z,currentPassword:q.target.value})}),d.jsx(Xt,{label:"New Password",type:"password",placeholder:"Enter new password (min 6 characters)",value:z.newPassword,onChange:q=>F({...z,newPassword:q.target.value})}),d.jsx(Xt,{label:"Confirm New Password",type:"password",placeholder:"Confirm new password",value:z.confirmPassword,onChange:q=>F({...z,confirmPassword:q.target.value})}),d.jsx(Je,{variant:"primary",onClick:se,disabled:E||!z.currentPassword||!z.newPassword||!z.confirmPassword,children:E?"Changing Password...":"Change Password"})]})]})]});case"about":return d.jsxs("div",{className:"space-y-8",children:[d.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"About"}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-6",children:[d.jsx("h2",{className:"text-xl font-bold text-dark-text mb-2",children:"Lumo Chat"}),d.jsxs("div",{className:"space-y-4 text-dark-muted text-sm",children:[d.jsx("p",{children:"A modern real-time chat application built for seamless communication."}),d.jsxs("div",{children:[d.jsx("div",{className:"font-semibold text-dark-text",children:"Version"}),d.jsx("div",{children:"1.8.5"})]}),d.jsxs("div",{children:[d.jsx("div",{className:"font-semibold text-dark-text",children:"Developer"}),d.jsx("div",{children:"Dazlakss"})]}),d.jsxs("div",{children:[d.jsx("div",{className:"font-semibold text-dark-text",children:"Tech Stack"}),d.jsx("div",{children:"React, Firebase, TailwindCSS, Electron"})]})]})]}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Acknowledgments"}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"flex items-center gap-4 p-3 bg-dark-sidebar rounded-lg border border-dark-hover",children:d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"text-dark-text font-medium",children:"GIPHY"}),d.jsx("div",{className:"text-xs text-dark-muted",children:"We use GIPHY for finding and sharing GIFs."}),d.jsx("a",{href:"https://giphy.com",target:"_blank",rel:"noopener noreferrer",className:"mt-2 text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500 block w-fit hover:opacity-80 transition-opacity",children:"Powered by GIPHY"})]})}),d.jsx("div",{className:"flex items-center gap-4 p-3 bg-dark-sidebar rounded-lg border border-dark-hover",children:d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"text-dark-text font-medium",children:"Cloudinary"}),d.jsx("div",{className:"text-xs text-dark-muted",children:"Robust cloud storage and delivery for images and files."}),d.jsx("a",{href:"https://cloudinary.com",target:"_blank",rel:"noopener noreferrer",className:"mt-2 text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-sky-400 block w-fit hover:opacity-80 transition-opacity",children:"Powered by Cloudinary"})]})}),d.jsx("div",{className:"flex items-center gap-4 p-3 bg-dark-sidebar rounded-lg border border-dark-hover",children:d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"text-dark-text font-medium",children:"ImgBB"}),d.jsx("div",{className:"text-xs text-dark-muted",children:"Simple and fast image hosting service."}),d.jsx("a",{href:"https://imgbb.com",target:"_blank",rel:"noopener noreferrer",className:"mt-2 text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-gray-200 to-gray-400 block w-fit hover:opacity-80 transition-opacity",children:"Powered by ImgBB"})]})})]})]}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4 mt-8 border border-brand-primary/20",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("h3",{className:"text-sm font-semibold text-brand-primary uppercase tracking-wide flex items-center gap-2",children:[d.jsx(td,{})," FCM Registration Token"]}),d.jsx("button",{onClick:P,className:"text-[10px] bg-dark-hover px-2 py-1 rounded hover:text-brand-primary transition-colors",children:"Check Again"})]}),d.jsx("p",{className:"text-xs text-dark-muted mb-4",children:"Use this token in the Firebase Console to test push notifications on this device."}),M&&d.jsxs("div",{className:"p-2 mb-4 bg-red-500/10 border border-red-500/20 rounded text-[10px] text-red-400 font-mono break-all",children:["ERROR: ",M]}),d.jsxs("div",{className:"flex items-center gap-2 p-3 bg-dark-input rounded-lg border border-dark-hover",children:[d.jsx("div",{className:"flex-1 text-xs font-mono text-dark-text break-all",children:A||(Ia.isNativePlatform()?"Token not available yet. Please register for notifications.":"Not available on Web. Please check on a mobile device.")}),A&&d.jsx("button",{onClick:()=>{navigator.clipboard.writeText(A),a("FCM Token copied to clipboard!")},className:"p-2 bg-dark-hover hover:bg-dark-sidebar text-brand-primary rounded-md transition-colors",title:"Copy Token",children:d.jsx(xC,{size:18})})]})]})]});default:return null}};return d.jsxs("div",{className:"fixed inset-0 bg-black/80 z-50 flex flex-col md:flex-row",children:[d.jsx("div",{className:"w-full md:w-56 bg-dark-sidebar flex flex-col shrink-0 border-b md:border-b-0 md:border-r border-dark-hover",children:d.jsx("div",{className:"flex md:flex-col overflow-x-auto md:overflow-y-auto py-2 md:py-4 px-2 gap-2 md:gap-0 no-scrollbar",children:Object.entries(Ne).map(([q,re])=>d.jsxs("div",{className:"mb-0 md:mb-4 flex md:block gap-2 md:gap-0 shrink-0",children:[d.jsx("div",{className:"hidden md:block px-3 py-2 text-xs font-semibold text-dark-muted uppercase tracking-wide",children:q}),re.map(ne=>{const we=ne.icon;return d.jsxs("button",{onClick:()=>h(ne.id),className:`whitespace-nowrap flex items-center gap-2 md:gap-3 px-3 py-2 rounded-md text-left transition-colors ${c===ne.id?"bg-dark-hover text-dark-text":"text-dark-muted hover:text-dark-text hover:bg-dark-hover/50"}`,children:[d.jsx(we,{size:18}),d.jsx("span",{className:"text-sm",children:ne.label})]},ne.id)})]},q))})}),d.jsxs("div",{className:"flex-1 flex flex-col bg-dark-bg overflow-hidden min-w-0",children:[d.jsx("div",{className:"flex justify-end p-4 shrink-0",children:d.jsx("button",{onClick:e,className:"p-2 hover:bg-dark-hover rounded-full transition-colors group",title:"Close",children:d.jsx(An,{size:24,className:"text-dark-muted group-hover:text-dark-text"})})}),d.jsx("div",{className:"flex-1 overflow-y-auto px-4 md:px-10 pb-10",children:d.jsx("div",{className:c==="premium"?"w-full":"max-w-2xl mx-auto md:mx-0",children:H()})})]}),N&&d.jsx(ez,{currentStatus:r?.status,onStatusChange:J,onClose:()=>V(!1)})]})},gz=()=>{const[n,e]=O.useState([]),{channels:t}=kd();O.useEffect(()=>{const a=ts(mt(ve,"adminLogs"),k0("timestamp","desc"),A0(100));return Sr(a,c=>{const h=[];c.forEach(m=>{h.push({id:m.id,...m.data()})}),e(h)})},[]);const r=a=>{const l=t.find(c=>c.id===a);return l?`#${l.name}`:"Unknown Channel"};return d.jsxs("div",{children:[d.jsx("h3",{className:"text-2xl font-bold text-dark-text mb-6",children:"Admin Logs"}),d.jsx("div",{className:"space-y-3 max-h-[520px] overflow-y-auto pr-2",children:n.length===0?d.jsx("div",{className:"text-center text-dark-muted py-8",children:"No logs yet"}):n.map(a=>d.jsxs("div",{className:"bg-dark-bg p-5 rounded-xl hover:bg-dark-hover transition-colors",children:[d.jsxs("div",{className:"flex items-start justify-between mb-2",children:[d.jsx("div",{className:"flex items-center gap-2",children:a.type==="message_delete"?d.jsxs(d.Fragment,{children:[d.jsx(bo,{className:"text-admin",size:20}),d.jsx("span",{className:"font-semibold text-dark-text",children:"Message Deleted"})]}):a.type==="message_edit"?d.jsxs(d.Fragment,{children:[d.jsx(Hl,{className:"text-blue-400",size:20}),d.jsx("span",{className:"font-semibold text-dark-text",children:"Message Edited"})]}):d.jsx("span",{className:"font-semibold text-dark-text",children:a.type})}),d.jsx("span",{className:"text-xs text-dark-muted",children:a.timestamp&&np(a.timestamp)})]}),d.jsxs("div",{className:"space-y-1 text-sm",children:[d.jsxs("div",{className:"flex gap-2",children:[d.jsx("span",{className:"text-dark-muted",children:"Channel:"}),d.jsx("span",{className:"text-dark-text font-medium",children:r(a.channelId)})]}),a.type==="message_delete"&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex gap-2",children:[d.jsx("span",{className:"text-dark-muted",children:"Original Author:"}),d.jsx("span",{className:"text-dark-text",children:a.originalAuthorName||a.originalUserName||"Unknown"})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("span",{className:"text-dark-muted",children:"Message:"}),d.jsxs("span",{className:"text-dark-text italic",children:['"',a.messageText||a.deletedText||"(empty message)",'"']})]})]}),a.type==="message_edit"&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex gap-2",children:[d.jsx("span",{className:"text-dark-muted",children:"Before:"}),d.jsxs("span",{className:"text-dark-text italic",children:['"',a.originalText,'"']})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("span",{className:"text-dark-muted",children:"After:"}),d.jsxs("span",{className:"text-blue-400 italic",children:['"',a.newText,'"']})]})]})]})]},a.id))})]})},yz=[{id:"users",label:"Users",icon:db,category:"Moderation"},{id:"roles",label:"Roles",icon:_C,category:"Moderation"},{id:"channels",label:"Channels",icon:rp,category:"Server Settings"},{id:"server",label:"Overview",icon:cb,category:"Server Settings"},{id:"logs",label:"Audit Log",icon:nM,category:"Server Settings"},{id:"cleanup",label:"Cleanup",icon:SM,category:"Maintenance"}],vz=({isOpen:n,onClose:e})=>{const{userProfile:t}=Zn(),{users:r,channels:a,server:l,currentServer:c}=kd(),[h,m]=O.useState("users"),[g,v]=O.useState(null),[b,_]=O.useState(""),[C,R]=O.useState(""),[I,k]=O.useState(null),[B,$]=O.useState([]),[N,V]=O.useState(null),[z,F]=O.useState({name:"",color:"#5865f2"}),[E,S]=O.useState(null),[A,D]=O.useState(null),{success:M,error:U}=Ys(),[P,xe]=O.useState(0),[Ee,Y]=O.useState(!1),[se,J]=O.useState(null);O.useEffect(()=>{const X=le=>{le.key==="Escape"&&n&&e()};return n&&(document.addEventListener("keydown",X),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",X),document.body.style.overflow="unset"}},[n,e]),O.useEffect(()=>{if(!c||c==="home")return;const X=ts(mt(ve,"servers",c,"roles"));return Sr(X,Se=>{const Oe=[];Se.forEach(qe=>{Oe.push({id:qe.id,...qe.data()})}),$(Oe)})},[c]),O.useEffect(()=>{if(h!=="cleanup")return;(async()=>{try{const le=await ko(mt(ve,"inviteCodes")),Se=new Date;let Oe=0;le.forEach(qe=>{const Ke=qe.data(),It=Ke.expiresAt?.toDate()<Se,kt=!Ke.isActive||Ke.uses>=Ke.maxUses;(It||kt)&&Oe++}),xe(Oe)}catch(le){console.error("Error fetching cleanup stats:",le)}})()},[h]);const Ce=async()=>{Y(!0);try{const X=await ko(mt(ve,"inviteCodes")),le=new Date,Se=Yw(ve);let Oe=0;X.forEach(qe=>{const Ke=qe.data(),It=Ke.expiresAt?.toDate()<le,kt=!Ke.isActive||Ke.uses>=Ke.maxUses;(It||kt)&&(Se.delete(Me(ve,"inviteCodes",qe.id)),Oe++)}),Oe>0?(await Se.commit(),M(`${Oe} expired invite code(s) deleted`),xe(0)):M("No expired invite codes to delete")}catch(X){console.error("Error cleaning invite codes:",X),U("Failed to clean invite codes")}finally{Y(!1),J(null)}};if(!n||t?.role!=="admin")return null;const Ne=async(X,le)=>{try{await nt(Me(ve,"users",X),{role:le}),c&&await nt(Me(ve,"servers",c,"members",X),{role:le}),M(`Role updated to ${le}`),v(null)}catch(Se){console.error("Error updating user role:",Se),U(`Failed to update role: ${Se.message}`)}},H=async(X,le)=>{try{await nt(Me(ve,"users",X),{isMuted:!le})}catch(Se){console.error("Error toggling mute:",Se)}},q=async(X,le)=>{try{await nt(Me(ve,"users",X),{isBanned:!le})}catch(Se){console.error("Error toggling ban:",Se)}},re=async()=>{if(!(!b.trim()||!c))try{await Vn(mt(ve,"servers",c,"channels"),{name:b.trim(),type:"text",description:C.trim(),position:a.length,createdAt:_t()}),_(""),R("")}catch(X){console.error("Error creating channel:",X)}},ne=async(X,le)=>{try{await nt(Me(ve,"servers",c,"channels",X),le),k(null)}catch(Se){console.error("Error updating channel:",Se)}},we=async()=>{if(!(!A?.data||!c))try{await tc(Me(ve,"servers",c,"channels",A.data))}catch(X){console.error("Error deleting channel:",X)}},ye=async(X,le)=>{if(c)try{await nt(Me(ve,"servers",c,"channels",X),{locked:!le})}catch(Se){console.error("Error toggling channel lock:",Se)}},Te=async()=>{if(z.name.trim())try{const X=B.reduce((le,Se)=>Math.max(le,Se.position||0),0);c&&await Vn(mt(ve,"servers",c,"roles"),{name:z.name.trim(),color:z.color,position:X+1,createdAt:_t()}),F({name:"",color:"#5865f2"})}catch(X){console.error("Error creating role:",X)}},Fe=async(X,le)=>{if(c)try{await nt(Me(ve,"servers",c,"roles",X),le),V(null)}catch(Se){console.error("Error updating role:",Se)}},Ye=async()=>{if(!A?.data)return;const X=A.data;try{const le=B.find(Ke=>Ke.id===X);if(!le)return;const Se=le.name,Oe=Yw(ve),qe=r.filter(Ke=>(Ke.serverRole||Ke.role)===Se);if(qe.forEach(Ke=>{if(Ke.role===Se){const It=Me(ve,"users",Ke.id);Oe.update(It,{role:"member"})}if(c){const It=Me(ve,"servers",c,"members",Ke.id);Oe.update(It,{role:"member"})}}),c){const Ke=Me(ve,"servers",c,"roles",X);Oe.delete(Ke),await Oe.commit(),M(`Role '${Se}' deleted and ${qe.length} users reassigned to Member`)}}catch(le){console.error("Error deleting role:",le),U(`Failed to delete role: ${le.message}`)}},be=[{id:"admin",name:"admin",color:"#f23f42",isDefault:!0,position:-3},{id:"moderator",name:"moderator",color:"#faa81a",isDefault:!0,position:-2},{id:"member",name:"member",color:"#80848e",isDefault:!0,position:-1},...B].sort((X,le)=>(X.position??999)-(le.position??999)),he=(X,le)=>{S(le),X.dataTransfer.effectAllowed="move"},_e=X=>{X.preventDefault(),X.dataTransfer.dropEffect="move"},ae=async(X,le)=>{if(X.preventDefault(),!E||E===le){S(null);return}const Se=be.find(qe=>qe.id===E),Oe=be.find(qe=>qe.id===le);if(Se?.isDefault||Oe?.isDefault){S(null);return}try{const qe=Se.position??0,Ke=Oe.position??0;c&&(await nt(Me(ve,"servers",c,"roles",E),{position:Ke}),await nt(Me(ve,"servers",c,"roles",le),{position:qe}))}catch(qe){console.error("Error reordering roles:",qe)}S(null)},Re=yz.reduce((X,le)=>(X[le.category]||(X[le.category]=[]),X[le.category].push(le),X),{}),Ie=()=>{switch(h){case"users":return d.jsxs("div",{className:"space-y-6",children:[d.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"User Management"}),d.jsx("p",{className:"text-dark-muted",children:"Manage server members, assign roles, and moderate users."}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[d.jsxs("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:["Members  ",r.length]}),d.jsx("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:r.map(X=>d.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-dark-hover transition-colors",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold",children:X.displayName?.[0]?.toUpperCase()||"U"}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"font-medium text-dark-text",children:X.displayName}),d.jsx("span",{className:"text-xs px-2 py-0.5 rounded",style:{backgroundColor:`${be.find(le=>le.name===(X.serverRole||X.role))?.color}20`,color:be.find(le=>le.name===(X.serverRole||X.role))?.color},children:X.serverRole||X.role}),X.isMuted&&d.jsx("span",{className:"text-xs text-yellow-500",children:"MUTED"}),X.isBanned&&d.jsx("span",{className:"text-xs text-red-500",children:"BANNED"})]}),d.jsx("div",{className:"text-sm text-dark-muted",children:X.email})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Je,{size:"sm",variant:X.isMuted?"warning":"secondary",onClick:()=>H(X.id,X.isMuted),children:X.isMuted?"Unmute":"Mute"}),d.jsx(Je,{size:"sm",variant:X.isBanned?"danger":"secondary",onClick:()=>q(X.id,X.isBanned),children:X.isBanned?"Unban":"Ban"}),d.jsx(Je,{size:"sm",variant:"ghost",onClick:()=>v(X),children:d.jsx(Hl,{size:16})})]})]},X.id))})]})]});case"roles":return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Roles"}),d.jsx("p",{className:"text-dark-muted mt-1",children:"Use roles to organize your members and customize permissions."})]}),d.jsxs("div",{className:"bg-dark-bg rounded-xl p-6 border border-dark-hover",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-primary/20 flex items-center justify-center",children:d.jsx(Fu,{className:"text-brand-primary",size:24})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-dark-text",children:"Create New Role"}),d.jsx("p",{className:"text-sm text-dark-muted",children:"Add a custom role with a unique color"})]})]}),d.jsxs("div",{className:"flex gap-4 items-end",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("label",{className:"block text-xs font-medium text-dark-muted uppercase tracking-wide mb-2",children:"Role Name"}),d.jsx(Xt,{placeholder:"e.g. VIP, Helper, Supporter...",value:z.name,onChange:X=>F({...z,name:X.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-dark-muted uppercase tracking-wide mb-2",children:"Color"}),d.jsx("div",{className:"relative",children:d.jsx("input",{type:"color",value:z.color,onChange:X=>F({...z,color:X.target.value}),className:"w-14 h-10 rounded-lg cursor-pointer border-2 border-dark-hover hover:border-brand-primary transition-colors",style:{backgroundColor:z.color}})})]}),d.jsxs(Je,{onClick:Te,disabled:!z.name.trim(),className:"px-6",children:[d.jsx(Fu,{size:18,className:"mr-1"}),"Create Role"]})]})]}),d.jsxs("div",{className:"bg-dark-bg rounded-xl border border-dark-hover overflow-hidden",children:[d.jsxs("div",{className:"px-6 py-4 border-b border-dark-hover flex items-center justify-between",children:[d.jsxs("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide",children:["Roles  ",be.length]}),d.jsx("span",{className:"text-xs text-dark-muted",children:"Drag custom roles to reorder hierarchy"})]}),d.jsxs("div",{className:"divide-y divide-dark-hover",children:[be.map((X,le)=>d.jsxs("div",{draggable:!X.isDefault,onDragStart:Se=>he(Se,X.id),onDragOver:_e,onDrop:Se=>ae(Se,X.id),className:St("group flex items-center justify-between px-6 py-4 transition-colors",!X.isDefault&&"cursor-grab active:cursor-grabbing hover:bg-dark-sidebar/50",X.isDefault&&"opacity-70",E===X.id&&"opacity-50 bg-brand-primary/10"),children:[d.jsxs("div",{className:"flex items-center gap-4",children:[!X.isDefault&&d.jsx("div",{className:"text-dark-muted opacity-0 group-hover:opacity-100 transition-opacity",children:d.jsx(gM,{size:20})}),d.jsx("div",{className:"w-5 h-5 rounded-full ring-2 ring-offset-2 ring-offset-dark-bg",style:{backgroundColor:X.color,ringColor:X.color}}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"font-semibold text-dark-text",style:{color:X.color},children:X.name}),X.isDefault&&d.jsx("span",{className:"text-[10px] px-2 py-0.5 bg-dark-hover text-dark-muted rounded-full uppercase font-medium",children:"System"})]}),d.jsx("p",{className:"text-xs text-dark-muted mt-0.5",children:X.isDefault?"Default system role":`Position: ${X.position??0}`})]})]}),!X.isDefault&&d.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[d.jsx("button",{onClick:()=>V(X),className:"p-2 rounded-lg hover:bg-dark-hover text-dark-muted hover:text-brand-primary transition-colors",title:"Edit Role",children:d.jsx(Hl,{size:18})}),d.jsx("button",{onClick:()=>D({type:"role",data:X.id,name:X.name}),className:"p-2 rounded-lg hover:bg-red-500/20 text-dark-muted hover:text-red-500 transition-colors",title:"Delete Role",children:d.jsx(bo,{size:18})})]})]},X.id)),be.length===0&&d.jsxs("div",{className:"px-6 py-12 text-center",children:[d.jsx(_C,{className:"mx-auto text-dark-muted mb-3",size:40}),d.jsx("p",{className:"text-dark-muted",children:"No roles created yet"}),d.jsx("p",{className:"text-xs text-dark-muted mt-1",children:"Create your first role above!"})]})]})]})]});case"channels":return d.jsxs("div",{className:"space-y-6",children:[d.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Channels"}),d.jsx("p",{className:"text-dark-muted",children:"Create and manage server channels."}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Create New Channel"}),d.jsxs("div",{className:"flex gap-3",children:[d.jsxs("div",{className:"flex-1 space-y-2",children:[d.jsx(Xt,{placeholder:"Channel name (#general)",value:b,onChange:X=>_(X.target.value)}),d.jsx(Xt,{placeholder:"Channel topic/description (Optional)",value:C,onChange:X=>R(X.target.value)})]}),d.jsxs(Je,{onClick:re,className:"h-fit mt-auto",children:[d.jsx(Fu,{size:20}),"Create"]})]})]}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[d.jsxs("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:["Text Channels  ",a.length]}),d.jsx("div",{className:"space-y-2",children:a.map(X=>d.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-dark-hover transition-colors",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(rp,{className:"text-dark-muted"}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"font-medium text-dark-text",children:X.name}),X.description&&d.jsx("span",{className:"text-xs text-dark-muted ml-2 truncate max-w-[200px]",children:X.description}),X.locked&&d.jsxs("span",{className:"text-xs px-2 py-0.5 rounded bg-yellow-500/20 text-yellow-500 flex items-center gap-1",children:[d.jsx(tp,{size:12}),"LOCKED"]})]}),d.jsx("div",{className:"text-xs text-dark-muted",children:X.locked?"Only admins can send messages":"Everyone can send messages"})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Je,{size:"sm",variant:"ghost",onClick:()=>k(X),children:d.jsx(Hl,{size:16})}),d.jsx(Je,{size:"sm",variant:X.locked?"warning":"secondary",onClick:()=>ye(X.id,X.locked),children:X.locked?"Unlock":"Lock"}),d.jsx(Je,{size:"sm",variant:"danger",onClick:()=>D({type:"channel",data:X.id,name:X.name}),children:d.jsx(bo,{size:16})})]})]},X.id))})]})]});case"server":return d.jsxs("div",{className:"space-y-6",children:[d.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Server Overview"}),d.jsx("p",{className:"text-dark-muted",children:"View server statistics and information."}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-6",children:[d.jsxs("div",{className:"mb-6",children:[d.jsx("div",{className:"text-xs text-dark-muted uppercase tracking-wide mb-1",children:"Server Name"}),d.jsx("div",{className:"text-2xl font-bold text-dark-text",children:l?.name||"Unknown"})]}),d.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d.jsxs("div",{className:"bg-dark-sidebar p-4 rounded-lg text-center",children:[d.jsx("div",{className:"text-3xl font-bold text-brand-primary mb-1",children:r.length}),d.jsx("div",{className:"text-sm text-dark-muted",children:"Members"})]}),d.jsxs("div",{className:"bg-dark-sidebar p-4 rounded-lg text-center",children:[d.jsx("div",{className:"text-3xl font-bold text-green-500 mb-1",children:a.length}),d.jsx("div",{className:"text-sm text-dark-muted",children:"Channels"})]}),d.jsxs("div",{className:"bg-dark-sidebar p-4 rounded-lg text-center",children:[d.jsx("div",{className:"text-3xl font-bold text-purple-500 mb-1",children:be.length}),d.jsx("div",{className:"text-sm text-dark-muted",children:"Roles"})]})]})]})]});case"logs":return d.jsxs("div",{className:"space-y-6",children:[d.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Audit Log"}),d.jsx("p",{className:"text-dark-muted",children:"View server activity and moderation history."}),d.jsx(gz,{})]});case"cleanup":return d.jsxs("div",{className:"space-y-6",children:[d.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Database Cleanup"}),d.jsx("p",{className:"text-dark-muted",children:"Remove unused data to keep your database clean and reduce storage costs."}),d.jsx("div",{className:"grid gap-4",children:d.jsxs("div",{className:"bg-dark-bg rounded-lg p-6 border border-dark-hover",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-dark-text",children:"Expired Invite Codes"}),d.jsx("p",{className:"text-sm text-dark-muted mt-1",children:"Expired, used, or deactivated invite codes that are no longer valid."})]}),d.jsx("div",{className:"text-3xl font-bold text-yellow-500",children:P})]}),d.jsxs(Je,{variant:"warning",onClick:()=>J("invites"),disabled:P===0||Ee,className:"w-full",children:[d.jsx(bo,{size:20}),Ee?"Cleaning...":"Clean Invite Codes"]})]})}),d.jsxs("div",{className:"text-xs text-dark-muted bg-dark-sidebar p-4 rounded-lg",children:[d.jsx("strong",{children:"Note:"})," These actions are irreversible. Deleted data cannot be recovered. Running cleanup periodically helps keep your Firestore quota usage low."]})]});default:return null}};return d.jsxs("div",{className:"fixed inset-0 bg-black/80 z-[100] flex flex-col md:flex-row",children:[d.jsx("div",{className:"w-full md:w-56 bg-dark-sidebar flex flex-col shrink-0 border-b md:border-b-0 md:border-r border-dark-hover",children:d.jsx("div",{className:"flex md:flex-col overflow-x-auto md:overflow-y-auto py-2 md:py-4 px-2 gap-2 md:gap-0 no-scrollbar",children:Object.entries(Re).map(([X,le])=>d.jsxs("div",{className:"mb-0 md:mb-4 flex md:block gap-2 md:gap-0 shrink-0",children:[d.jsx("div",{className:"hidden md:block px-3 py-2 text-xs font-semibold text-dark-muted uppercase tracking-wide",children:X}),le.map(Se=>{const Oe=Se.icon;return d.jsxs("button",{onClick:()=>m(Se.id),className:St("whitespace-nowrap flex items-center gap-2 md:gap-3 px-3 py-2 rounded-md text-left transition-colors",h===Se.id?"bg-dark-hover text-dark-text":"text-dark-muted hover:text-dark-text hover:bg-dark-hover/50"),children:[d.jsx(Oe,{size:18}),d.jsx("span",{className:"text-sm",children:Se.label})]},Se.id)})]},X))})}),d.jsxs("div",{className:"flex-1 flex flex-col bg-dark-bg overflow-hidden min-w-0",children:[d.jsx("div",{className:"flex justify-end p-4 shrink-0",children:d.jsx("button",{onClick:e,className:"p-2 hover:bg-dark-hover rounded-full transition-colors group",title:"Close (ESC)",children:d.jsx(An,{size:24,className:"text-dark-muted group-hover:text-dark-text"})})}),d.jsx("div",{className:"flex-1 overflow-y-auto px-4 md:px-10 pb-10",children:d.jsx("div",{className:"max-w-3xl mx-auto md:mx-0",children:Ie()})})]}),g&&(()=>{const X=r.find(le=>le.id===g.id)||g;return d.jsx(Us,{isOpen:!!g,onClose:()=>v(null),title:"Edit User Role",size:"sm",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-sm text-dark-muted mb-1",children:"User"}),d.jsx("div",{className:"font-medium text-dark-text",children:X.displayName})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-sm text-dark-muted mb-2",children:"Select Role"}),d.jsx("div",{className:"space-y-2",children:be.map(le=>d.jsxs("button",{onClick:()=>Ne(g.id,le.name),className:St("w-full px-3 py-2 rounded-lg border text-left transition-all flex items-center gap-3",(X.serverRole||X.role)===le.name?"border-brand-primary bg-brand-primary/20":"border-dark-hover hover:bg-dark-hover"),children:[d.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:le.color}}),d.jsx("span",{className:"text-dark-text",children:le.name})]},le.id))})]})]})})})(),N&&d.jsx(Us,{isOpen:!!N,onClose:()=>V(null),title:"Edit Role",size:"sm",children:d.jsxs("div",{className:"space-y-4",children:[d.jsx(Xt,{label:"Role Name",value:N.name,onChange:X=>V({...N,name:X.target.value})}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium text-dark-text mb-2 block",children:"Role Color"}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("input",{type:"color",value:N.color,onChange:X=>V({...N,color:X.target.value}),className:"w-14 h-10 rounded cursor-pointer"}),d.jsx(Xt,{value:N.color,onChange:X=>V({...N,color:X.target.value}),className:"flex-1"})]})]}),d.jsx(Je,{variant:"primary",className:"w-full",onClick:()=>Fe(N.id,{name:N.name,color:N.color}),children:"Save Changes"})]})}),I&&d.jsx(Us,{isOpen:!!I,onClose:()=>k(null),title:"Edit Channel",size:"sm",children:d.jsxs("div",{className:"space-y-4",children:[d.jsx(Xt,{label:"Channel Name",value:I.name,onChange:X=>k({...I,name:X.target.value})}),d.jsx(Xt,{label:"Channel Topic / Description",value:I.description||"",onChange:X=>k({...I,description:X.target.value})}),d.jsx(Je,{variant:"primary",className:"w-full",onClick:()=>ne(I.id,{name:I.name,description:I.description}),children:"Save Changes"})]})}),d.jsx(nc,{isOpen:!!A,onClose:()=>D(null),onConfirm:A?.type==="channel"?we:Ye,title:`Delete ${A?.type==="channel"?"Channel":"Role"}`,message:`Are you sure you want to delete "${A?.name}"? This cannot be undone.`,confirmText:"Delete",variant:"danger"}),d.jsx(nc,{isOpen:!!se,onClose:()=>J(null),onConfirm:Ce,title:"Clean Invite Codes",message:`Are you sure you want to delete ${P} expired/used invite code(s)? This action cannot be undone.`,confirmText:"Clean",variant:"danger"})]})},bz=({isOpen:n,onClose:e,userId:t,onSuccess:r})=>{const[a,l]=O.useState(""),[c,h]=O.useState(null),[m,g]=O.useState(null),[v,b]=O.useState(!1),[_,C]=O.useState({progress:0,speed:""}),R=O.useRef(null),{success:I,error:k}=Ys(),B=N=>{const V=N.target.files?.[0];if(V){if(!V.type.startsWith("image/")){k("Please select an image file");return}if(V.size>10*1024*1024){k("Image size must be less than 10MB");return}h(V),g(URL.createObjectURL(V))}},$=async()=>{if(!a.trim()){k("Server name is required");return}b(!0);try{let N=null;c&&(N=await ip(c,(z,F)=>{C({progress:z,speed:F})}));const V=await Vn(mt(ve,"servers"),{name:a.trim(),icon:N,ownerId:t,createdAt:_t(),isDefault:!1,memberCount:1});await ed(Me(ve,"servers",V.id,"members",t),{userId:t,joinedAt:_t(),role:"admin"}),await Vn(mt(ve,"servers",V.id,"channels"),{name:"general",type:"text",description:"General discussion",position:0,createdAt:_t()}),await nt(Me(ve,"users",t),{servers:Cd(V.id),currentServer:V.id}),I("Server created successfully!"),l(""),h(null),m&&URL.revokeObjectURL(m),g(null),r&&r(V.id),e()}catch(N){console.error("Error creating server:",N),k("Failed to create server")}finally{b(!1),C({progress:0,speed:""})}};return d.jsx(Us,{isOpen:n,onClose:e,title:"Create Server",size:"sm",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx("input",{type:"file",ref:R,onChange:B,accept:"image/*",className:"hidden"}),d.jsx("button",{onClick:()=>R.current?.click(),className:"w-20 h-20 rounded-full bg-dark-hover border-2 border-dashed border-dark-muted hover:border-brand-primary flex items-center justify-center transition-colors overflow-hidden",children:m?d.jsx("img",{src:m,alt:"Preview",className:"w-full h-full object-cover"}):d.jsx(_M,{size:32,className:"text-dark-muted"})}),d.jsx("span",{className:"text-xs text-dark-muted mt-2",children:"Server Icon (Optional)"})]}),v&&c&&_.progress>0&&d.jsxs("div",{className:"text-xs text-dark-muted text-center",children:["Uploading icon: ",Math.round(_.progress),"% (",_.speed,")"]}),d.jsx(Xt,{label:"Server Name",placeholder:"My Awesome Server",value:a,onChange:N=>l(N.target.value),maxLength:50,autoFocus:!0}),d.jsxs("div",{className:"text-xs text-dark-muted",children:[a.length,"/50 characters"]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Je,{variant:"secondary",onClick:e,className:"flex-1",children:"Cancel"}),d.jsx(Je,{variant:"primary",onClick:$,disabled:!a.trim()||v,className:"flex-1",children:v?"Creating...":"Create Server"})]})]})})},xz=({isOpen:n,onClose:e,userId:t,onSuccess:r})=>{const[a,l]=O.useState(""),[c,h]=O.useState(!1),{success:m,error:g}=Ys(),v=async()=>{if(!a.trim()){g("Invite code is required");return}h(!0);try{const b=a.trim().toUpperCase(),_=Me(ve,"inviteCodes",b),C=await ep(_);if(!C.exists()){g("Invalid invite code");return}const R=C.data();if(!R.isActive){g("This invite code has already been used");return}const I=R.isUnlimited===!0||R.maxUses===-1;if(!I&&R.uses>=R.maxUses){g("This invite code has reached its usage limit");return}if(R.expiresAt.toDate()<new Date){g("This invite code has expired");return}await ed(Me(ve,"servers",R.serverId,"members",t),{userId:t,joinedAt:_t(),role:"member"}),await nt(Me(ve,"users",t),{servers:Cd(R.serverId),currentServer:R.serverId});const k={uses:fm(1)};I||(k.isActive=!1),await nt(_,k),await nt(Me(ve,"servers",R.serverId),{memberCount:fm(1)}),m("Successfully joined server!"),l(""),r&&r(R.serverId),e()}catch(b){console.error("Error joining server:",b),console.error("Error code:",b.code),console.error("Error message:",b.message),b.code!=="permission-denied"?b.code==="not-found"?g("Server not found"):g(`Failed to join server: ${b.message}`):e()}finally{h(!1)}};return d.jsx(Us,{isOpen:n,onClose:e,title:"Join Server",size:"sm",children:d.jsxs("div",{className:"space-y-4",children:[d.jsx(Xt,{label:"Invite Code",placeholder:"ABC12XYZ",value:a,onChange:b=>l(b.target.value.toUpperCase()),maxLength:8,autoFocus:!0}),d.jsx("div",{className:"text-xs text-dark-muted",children:"Enter the 8-character invite code"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Je,{variant:"secondary",onClick:e,className:"flex-1",children:"Cancel"}),d.jsx(Je,{variant:"primary",onClick:v,disabled:a.length!==8||c,className:"flex-1",children:c?"Joining...":"Join Server"})]})]})})},TS=()=>{if(window.electron&&window.electron.desktopCapturer)return window.electron.desktopCapturer;if(window.require)try{return window.require("electron").desktopCapturer}catch{return null}return null},_z=({isOpen:n,onClose:e,onConfirm:t})=>{const[r,a]=O.useState(720),[l,c]=O.useState(30),[h,m]=O.useState("screens"),[g,v]=O.useState({screens:[],windows:[]}),[b,_]=O.useState(null),[C,R]=O.useState(!1),I=!!TS();O.useEffect(()=>{if(n&&I){k();const $=setInterval(k,3e3);return()=>clearInterval($)}},[n,I]);const k=async()=>{const $=TS();if($)try{const N=await $.getSources({types:["window","screen"],thumbnailSize:{width:300,height:200}}),V=N.filter(F=>F.id.startsWith("screen:")),z=N.filter(F=>!F.id.startsWith("screen:"));v({screens:V,windows:z}),!b&&V.length>0&&_(V[0].id)}catch(N){console.error("Error loading sources:",N)}};if(!n)return null;const B=()=>{let $,N;r===1080?($=1920,N=1080):($=1280,N=720),t({width:$,height:N,frameRate:l,sourceId:b,displaySurface:h==="screens"?"monitor":"window"}),e()};return d.jsx("div",{className:"fixed inset-0 bg-black/80 z-[100] flex items-center justify-center animate-fade-in",children:d.jsxs("div",{className:"bg-dark-elem w-full max-w-2xl rounded-2xl shadow-2xl border border-dark-hover overflow-hidden transform transition-all scale-100 p-6 relative flex flex-col max-h-[90vh]",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6 shrink-0",children:[d.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[d.jsx(vm,{className:"text-brand-primary"}),"Screen Share"]}),d.jsx("button",{onClick:e,className:"p-1 hover:bg-dark-hover rounded-full transition-colors text-dark-muted hover:text-white",children:d.jsx(An,{size:24})})]}),d.jsxs("div",{className:"flex gap-6 overflow-hidden flex-1",children:[d.jsxs("div",{className:"w-64 flex flex-col gap-6 shrink-0 border-r border-dark-hover pr-6",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-xs font-bold text-dark-muted uppercase tracking-wider mb-3",children:"Resolution"}),d.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[d.jsx("button",{onClick:()=>a(720),className:`p-2 rounded-lg border text-xs font-bold ${r===720?"border-brand-primary bg-brand-primary/10 text-white":"border-dark-hover bg-dark-input text-gray-400"}`,children:"720p"}),d.jsx("button",{onClick:()=>a(1080),className:`p-2 rounded-lg border text-xs font-bold ${r===1080?"border-brand-primary bg-brand-primary/10 text-white":"border-dark-hover bg-dark-input text-gray-400"}`,children:"1080p"})]})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-xs font-bold text-dark-muted uppercase tracking-wider mb-3",children:"Frame Rate"}),d.jsx("div",{className:"grid grid-cols-3 gap-2",children:[15,30,60].map($=>d.jsx("button",{onClick:()=>c($),className:`p-2 rounded-lg border text-xs font-bold ${l===$?"border-brand-primary bg-brand-primary/10 text-white":"border-dark-hover bg-dark-input text-gray-400"}`,children:$},$))})]})]}),d.jsx("div",{className:"flex-1 flex flex-col min-h-0",children:I?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex gap-4 border-b border-dark-hover mb-4 shrink-0",children:[d.jsxs("button",{onClick:()=>m("screens"),className:`pb-2 text-sm font-bold flex items-center gap-2 transition-colors ${h==="screens"?"text-brand-primary border-b-2 border-brand-primary":"text-gray-400 hover:text-white"}`,children:[d.jsx(vM,{size:18})," Screens"]}),d.jsxs("button",{onClick:()=>m("windows"),className:`pb-2 text-sm font-bold flex items-center gap-2 transition-colors ${h==="windows"?"text-brand-primary border-b-2 border-brand-primary":"text-gray-400 hover:text-white"}`,children:[d.jsx(jM,{size:18})," Windows"]})]}),d.jsx("div",{className:"grid grid-cols-2 gap-3 overflow-y-auto pr-2 custom-scrollbar content-start",children:(h==="screens"?g.screens:g.windows).map($=>d.jsxs("button",{onClick:()=>_($.id),className:`group relative rounded-lg overflow-hidden border-2 transition-all text-left ${b===$.id?"border-brand-primary ring-2 ring-brand-primary/20":"border-transparent hover:border-gray-600 bg-black/40"}`,children:[d.jsxs("div",{className:"aspect-video bg-black relative",children:[d.jsx("img",{src:$.thumbnail.toDataURL(),alt:$.name,className:"w-full h-full object-contain"}),b===$.id&&d.jsx("div",{className:"absolute inset-0 bg-brand-primary/10 flex items-center justify-center",children:d.jsx(Ao,{className:"text-brand-primary drop-shadow-lg",size:48})})]}),d.jsx("div",{className:"p-2 bg-dark-input truncate text-xs font-medium text-gray-300 group-hover:text-white",children:$.name})]},$.id))})]}):d.jsx("div",{className:"flex items-center justify-center h-full text-center text-gray-500",children:d.jsxs("div",{className:"max-w-xs",children:[d.jsx(vm,{size:48,className:"mx-auto mb-4 opacity-50"}),d.jsxs("p",{className:"text-sm",children:["Browser limits source selection here.",d.jsx("br",{}),'Click "Go Live" to pick a screen or window.']})]})})})]}),d.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-dark-hover mt-4 shrink-0",children:[d.jsx(Je,{variant:"ghost",onClick:e,className:"text-dark-text hover:text-white",children:"Cancel"}),d.jsx(Je,{variant:"primary",onClick:B,className:"px-8 shadow-lg shadow-brand-primary/20",disabled:I&&!b,children:"Go Live"})]})]})})},wz=({isOpen:n,onClose:e})=>{const{availableDevices:t,selectedMicId:r,setSelectedMicId:a,selectedCameraId:l,setSelectedCameraId:c}=Ad();return n?d.jsx("div",{className:"fixed inset-0 bg-black/80 z-[100] flex items-center justify-center animate-fade-in",children:d.jsxs("div",{className:"bg-dark-elem w-full max-w-md rounded-2xl shadow-2xl border border-dark-hover overflow-hidden p-6 relative",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[d.jsx(tp,{size:28,className:"text-brand-primary"}),"Device Settings"]}),d.jsx("button",{onClick:e,className:"p-1 hover:bg-dark-hover rounded-full transition-colors text-dark-muted hover:text-white",children:d.jsx(An,{size:24})})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"block text-xs font-bold text-dark-muted uppercase tracking-wider mb-2 flex items-center gap-2",children:[d.jsx(I0,{size:16})," Microphone"]}),d.jsxs("select",{className:"w-full bg-dark-input border border-dark-hover rounded-lg p-3 text-white focus:ring-2 focus:ring-brand-primary outline-none transition-all",value:r,onChange:h=>a(h.target.value),children:[t.audioInputs.map(h=>d.jsx("option",{value:h.deviceId,children:h.label||`Microphone ${h.deviceId.slice(0,5)}...`},h.deviceId)),t.audioInputs.length===0&&d.jsx("option",{value:"",children:"No microphone found"})]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-xs font-bold text-dark-muted uppercase tracking-wider mb-2 flex items-center gap-2",children:[d.jsx(nd,{size:16})," Camera"]}),d.jsxs("select",{className:"w-full bg-dark-input border border-dark-hover rounded-lg p-3 text-white focus:ring-2 focus:ring-brand-primary outline-none transition-all",value:l,onChange:h=>c(h.target.value),children:[t.videoInputs.map(h=>d.jsx("option",{value:h.deviceId,children:h.label||`Camera ${h.deviceId.slice(0,5)}...`},h.deviceId)),t.videoInputs.length===0&&d.jsx("option",{value:"",children:"No camera found"})]})]}),d.jsx("div",{className:"pt-4 border-t border-dark-hover flex justify-end",children:d.jsx(Je,{variant:"primary",onClick:e,children:"Done"})})]})]})}):null};var Cu={exports:{}},Wy={},Jy={exports:{}},Zy,CS;function Ez(){if(CS)return Zy;CS=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Zy=n,Zy}var e0,kS;function Sz(){if(kS)return e0;kS=1;var n=Ez();function e(){}function t(){}return t.resetWarningCache=e,e0=function(){function r(c,h,m,g,v,b){if(b!==n){var _=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw _.name="Invariant Violation",_}}r.isRequired=r;function a(){return r}var l={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:a,element:r,elementType:r,instanceOf:a,node:r,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:t,resetWarningCache:e};return l.PropTypes=l,l},e0}var AS;function c3(){return AS||(AS=1,Jy.exports=Sz()()),Jy.exports}var _f={exports:{}},RS;function Tz(){if(RS)return _f.exports;RS=1;function n(t){var r,a,l="";if(typeof t=="string"||typeof t=="number")l+=t;else if(typeof t=="object")if(Array.isArray(t)){var c=t.length;for(r=0;r<c;r++)t[r]&&(a=n(t[r]))&&(l&&(l+=" "),l+=a)}else for(a in t)t[a]&&(l&&(l+=" "),l+=a);return l}function e(){for(var t,r,a=0,l="",c=arguments.length;a<c;a++)(t=arguments[a])&&(r=n(t))&&(l&&(l+=" "),l+=r);return l}return _f.exports=e,_f.exports.clsx=e,_f.exports}var nn={},ca={},NS;function yp(){if(NS)return ca;NS=1,Object.defineProperty(ca,"__esModule",{value:!0}),ca.dontSetMe=a,ca.findInArray=n,ca.int=r,ca.isFunction=e,ca.isNum=t;function n(l,c){for(let h=0,m=l.length;h<m;h++)if(c.apply(c,[l[h],h,l]))return l[h]}function e(l){return typeof l=="function"||Object.prototype.toString.call(l)==="[object Function]"}function t(l){return typeof l=="number"&&!isNaN(l)}function r(l){return parseInt(l,10)}function a(l,c,h){if(l[c])return new Error(`Invalid prop ${c} passed to ${h} - do not set this, set it on the child.`)}return ca}var ua={},IS;function Cz(){if(IS)return ua;IS=1,Object.defineProperty(ua,"__esModule",{value:!0}),ua.browserPrefixToKey=t,ua.browserPrefixToStyle=r,ua.default=void 0,ua.getPrefix=e;const n=["Moz","Webkit","O","ms"];function e(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const c=window.document?.documentElement?.style;if(!c||l in c)return"";for(let h=0;h<n.length;h++)if(t(l,n[h])in c)return n[h];return""}function t(l,c){return c?`${c}${a(l)}`:l}function r(l,c){return c?`-${c.toLowerCase()}-${l}`:l}function a(l){let c="",h=!0;for(let m=0;m<l.length;m++)h?(c+=l[m].toUpperCase(),h=!1):l[m]==="-"?h=!0:c+=l[m];return c}return ua.default=e(),ua}var jS;function zb(){if(jS)return nn;jS=1,Object.defineProperty(nn,"__esModule",{value:!0}),nn.addClassName=z,nn.addEvent=c,nn.addUserSelectStyles=$,nn.createCSSTransform=C,nn.createSVGTransform=R,nn.getTouch=k,nn.getTouchIdentifier=B,nn.getTranslation=I,nn.innerHeight=v,nn.innerWidth=b,nn.matchesSelector=a,nn.matchesSelectorAndParentsTo=l,nn.offsetXYFromParent=_,nn.outerHeight=m,nn.outerWidth=g,nn.removeClassName=F,nn.removeEvent=h,nn.scheduleRemoveUserSelectStyles=N;var n=yp(),e=t(Cz());function t(E,S){if(typeof WeakMap=="function")var A=new WeakMap,D=new WeakMap;return(t=function(M,U){if(!U&&M&&M.__esModule)return M;var P,xe,Ee={__proto__:null,default:M};if(M===null||typeof M!="object"&&typeof M!="function")return Ee;if(P=U?D:A){if(P.has(M))return P.get(M);P.set(M,Ee)}for(const Y in M)Y!=="default"&&{}.hasOwnProperty.call(M,Y)&&((xe=(P=Object.defineProperty)&&Object.getOwnPropertyDescriptor(M,Y))&&(xe.get||xe.set)?P(Ee,Y,xe):Ee[Y]=M[Y]);return Ee})(E,S)}let r="";function a(E,S){return r||(r=(0,n.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(A){return(0,n.isFunction)(E[A])})),(0,n.isFunction)(E[r])?E[r](S):!1}function l(E,S,A){let D=E;do{if(a(D,S))return!0;if(D===A)return!1;D=D.parentNode}while(D);return!1}function c(E,S,A,D){if(!E)return;const M={capture:!0,...D};E.addEventListener?E.addEventListener(S,A,M):E.attachEvent?E.attachEvent("on"+S,A):E["on"+S]=A}function h(E,S,A,D){if(!E)return;const M={capture:!0,...D};E.removeEventListener?E.removeEventListener(S,A,M):E.detachEvent?E.detachEvent("on"+S,A):E["on"+S]=null}function m(E){let S=E.clientHeight;const A=E.ownerDocument.defaultView.getComputedStyle(E);return S+=(0,n.int)(A.borderTopWidth),S+=(0,n.int)(A.borderBottomWidth),S}function g(E){let S=E.clientWidth;const A=E.ownerDocument.defaultView.getComputedStyle(E);return S+=(0,n.int)(A.borderLeftWidth),S+=(0,n.int)(A.borderRightWidth),S}function v(E){let S=E.clientHeight;const A=E.ownerDocument.defaultView.getComputedStyle(E);return S-=(0,n.int)(A.paddingTop),S-=(0,n.int)(A.paddingBottom),S}function b(E){let S=E.clientWidth;const A=E.ownerDocument.defaultView.getComputedStyle(E);return S-=(0,n.int)(A.paddingLeft),S-=(0,n.int)(A.paddingRight),S}function _(E,S,A){const M=S===S.ownerDocument.body?{left:0,top:0}:S.getBoundingClientRect(),U=(E.clientX+S.scrollLeft-M.left)/A,P=(E.clientY+S.scrollTop-M.top)/A;return{x:U,y:P}}function C(E,S){const A=I(E,S,"px");return{[(0,e.browserPrefixToKey)("transform",e.default)]:A}}function R(E,S){return I(E,S,"")}function I(E,S,A){let{x:D,y:M}=E,U=`translate(${D}${A},${M}${A})`;if(S){const P=`${typeof S.x=="string"?S.x:S.x+A}`,xe=`${typeof S.y=="string"?S.y:S.y+A}`;U=`translate(${P}, ${xe})`+U}return U}function k(E,S){return E.targetTouches&&(0,n.findInArray)(E.targetTouches,A=>S===A.identifier)||E.changedTouches&&(0,n.findInArray)(E.changedTouches,A=>S===A.identifier)}function B(E){if(E.targetTouches&&E.targetTouches[0])return E.targetTouches[0].identifier;if(E.changedTouches&&E.changedTouches[0])return E.changedTouches[0].identifier}function $(E){if(!E)return;let S=E.getElementById("react-draggable-style-el");S||(S=E.createElement("style"),S.type="text/css",S.id="react-draggable-style-el",S.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,S.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,E.getElementsByTagName("head")[0].appendChild(S)),E.body&&z(E.body,"react-draggable-transparent-selection")}function N(E){window.requestAnimationFrame?window.requestAnimationFrame(()=>{V(E)}):V(E)}function V(E){if(E)try{if(E.body&&F(E.body,"react-draggable-transparent-selection"),E.selection)E.selection.empty();else{const S=(E.defaultView||window).getSelection();S&&S.type!=="Caret"&&S.removeAllRanges()}}catch{}}function z(E,S){E.classList?E.classList.add(S):E.className.match(new RegExp(`(?:^|\\s)${S}(?!\\S)`))||(E.className+=` ${S}`)}function F(E,S){E.classList?E.classList.remove(S):E.className=E.className.replace(new RegExp(`(?:^|\\s)${S}(?!\\S)`,"g"),"")}return nn}var As={},DS;function u3(){if(DS)return As;DS=1,Object.defineProperty(As,"__esModule",{value:!0}),As.canDragX=a,As.canDragY=l,As.createCoreData=h,As.createDraggableData=m,As.getBoundPosition=t,As.getControlPosition=c,As.snapToGrid=r;var n=yp(),e=zb();function t(b,_,C){if(!b.props.bounds)return[_,C];let{bounds:R}=b.props;R=typeof R=="string"?R:g(R);const I=v(b);if(typeof R=="string"){const{ownerDocument:k}=I,B=k.defaultView;let $;if(R==="parent"?$=I.parentNode:$=I.getRootNode().querySelector(R),!($ instanceof B.HTMLElement))throw new Error('Bounds selector "'+R+'" could not find an element.');const N=$,V=B.getComputedStyle(I),z=B.getComputedStyle(N);R={left:-I.offsetLeft+(0,n.int)(z.paddingLeft)+(0,n.int)(V.marginLeft),top:-I.offsetTop+(0,n.int)(z.paddingTop)+(0,n.int)(V.marginTop),right:(0,e.innerWidth)(N)-(0,e.outerWidth)(I)-I.offsetLeft+(0,n.int)(z.paddingRight)-(0,n.int)(V.marginRight),bottom:(0,e.innerHeight)(N)-(0,e.outerHeight)(I)-I.offsetTop+(0,n.int)(z.paddingBottom)-(0,n.int)(V.marginBottom)}}return(0,n.isNum)(R.right)&&(_=Math.min(_,R.right)),(0,n.isNum)(R.bottom)&&(C=Math.min(C,R.bottom)),(0,n.isNum)(R.left)&&(_=Math.max(_,R.left)),(0,n.isNum)(R.top)&&(C=Math.max(C,R.top)),[_,C]}function r(b,_,C){const R=Math.round(_/b[0])*b[0],I=Math.round(C/b[1])*b[1];return[R,I]}function a(b){return b.props.axis==="both"||b.props.axis==="x"}function l(b){return b.props.axis==="both"||b.props.axis==="y"}function c(b,_,C){const R=typeof _=="number"?(0,e.getTouch)(b,_):null;if(typeof _=="number"&&!R)return null;const I=v(C),k=C.props.offsetParent||I.offsetParent||I.ownerDocument.body;return(0,e.offsetXYFromParent)(R||b,k,C.props.scale)}function h(b,_,C){const R=!(0,n.isNum)(b.lastX),I=v(b);return R?{node:I,deltaX:0,deltaY:0,lastX:_,lastY:C,x:_,y:C}:{node:I,deltaX:_-b.lastX,deltaY:C-b.lastY,lastX:b.lastX,lastY:b.lastY,x:_,y:C}}function m(b,_){const C=b.props.scale;return{node:_.node,x:b.state.x+_.deltaX/C,y:b.state.y+_.deltaY/C,deltaX:_.deltaX/C,deltaY:_.deltaY/C,lastX:b.state.x,lastY:b.state.y}}function g(b){return{left:b.left,top:b.top,right:b.right,bottom:b.bottom}}function v(b){const _=b.findDOMNode();if(!_)throw new Error("<DraggableCore>: Unmounted during event!");return _}return As}var ku={},wf={},MS;function d3(){if(MS)return wf;MS=1,Object.defineProperty(wf,"__esModule",{value:!0}),wf.default=n;function n(){}return wf}var OS;function kz(){if(OS)return ku;OS=1,Object.defineProperty(ku,"__esModule",{value:!0}),ku.default=void 0;var n=m(ja()),e=h(c3()),t=h(iv()),r=zb(),a=u3(),l=yp(),c=h(d3());function h(I){return I&&I.__esModule?I:{default:I}}function m(I,k){if(typeof WeakMap=="function")var B=new WeakMap,$=new WeakMap;return(m=function(N,V){if(!V&&N&&N.__esModule)return N;var z,F,E={__proto__:null,default:N};if(N===null||typeof N!="object"&&typeof N!="function")return E;if(z=V?$:B){if(z.has(N))return z.get(N);z.set(N,E)}for(const S in N)S!=="default"&&{}.hasOwnProperty.call(N,S)&&((F=(z=Object.defineProperty)&&Object.getOwnPropertyDescriptor(N,S))&&(F.get||F.set)?z(E,S,F):E[S]=N[S]);return E})(I,k)}function g(I,k,B){return(k=v(k))in I?Object.defineProperty(I,k,{value:B,enumerable:!0,configurable:!0,writable:!0}):I[k]=B,I}function v(I){var k=b(I,"string");return typeof k=="symbol"?k:k+""}function b(I,k){if(typeof I!="object"||!I)return I;var B=I[Symbol.toPrimitive];if(B!==void 0){var $=B.call(I,k);if(typeof $!="object")return $;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(I)}const _={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let C=_.mouse,R=class extends n.Component{constructor(){super(...arguments),g(this,"dragging",!1),g(this,"lastX",NaN),g(this,"lastY",NaN),g(this,"touchIdentifier",null),g(this,"mounted",!1),g(this,"handleDragStart",k=>{if(this.props.onMouseDown(k),!this.props.allowAnyClick&&typeof k.button=="number"&&k.button!==0)return!1;const B=this.findDOMNode();if(!B||!B.ownerDocument||!B.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:$}=B;if(this.props.disabled||!(k.target instanceof $.defaultView.Node)||this.props.handle&&!(0,r.matchesSelectorAndParentsTo)(k.target,this.props.handle,B)||this.props.cancel&&(0,r.matchesSelectorAndParentsTo)(k.target,this.props.cancel,B))return;k.type==="touchstart"&&!this.props.allowMobileScroll&&k.preventDefault();const N=(0,r.getTouchIdentifier)(k);this.touchIdentifier=N;const V=(0,a.getControlPosition)(k,N,this);if(V==null)return;const{x:z,y:F}=V,E=(0,a.createCoreData)(this,z,F);(0,c.default)("DraggableCore: handleDragStart: %j",E),(0,c.default)("calling",this.props.onStart),!(this.props.onStart(k,E)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,r.addUserSelectStyles)($),this.dragging=!0,this.lastX=z,this.lastY=F,(0,r.addEvent)($,C.move,this.handleDrag),(0,r.addEvent)($,C.stop,this.handleDragStop))}),g(this,"handleDrag",k=>{const B=(0,a.getControlPosition)(k,this.touchIdentifier,this);if(B==null)return;let{x:$,y:N}=B;if(Array.isArray(this.props.grid)){let F=$-this.lastX,E=N-this.lastY;if([F,E]=(0,a.snapToGrid)(this.props.grid,F,E),!F&&!E)return;$=this.lastX+F,N=this.lastY+E}const V=(0,a.createCoreData)(this,$,N);if((0,c.default)("DraggableCore: handleDrag: %j",V),this.props.onDrag(k,V)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const E=document.createEvent("MouseEvents");E.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(E)}return}this.lastX=$,this.lastY=N}),g(this,"handleDragStop",k=>{if(!this.dragging)return;const B=(0,a.getControlPosition)(k,this.touchIdentifier,this);if(B==null)return;let{x:$,y:N}=B;if(Array.isArray(this.props.grid)){let E=$-this.lastX||0,S=N-this.lastY||0;[E,S]=(0,a.snapToGrid)(this.props.grid,E,S),$=this.lastX+E,N=this.lastY+S}const V=(0,a.createCoreData)(this,$,N);if(this.props.onStop(k,V)===!1||this.mounted===!1)return!1;const F=this.findDOMNode();F&&this.props.enableUserSelectHack&&(0,r.scheduleRemoveUserSelectStyles)(F.ownerDocument),(0,c.default)("DraggableCore: handleDragStop: %j",V),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,F&&((0,c.default)("DraggableCore: Removing handlers"),(0,r.removeEvent)(F.ownerDocument,C.move,this.handleDrag),(0,r.removeEvent)(F.ownerDocument,C.stop,this.handleDragStop))}),g(this,"onMouseDown",k=>(C=_.mouse,this.handleDragStart(k))),g(this,"onMouseUp",k=>(C=_.mouse,this.handleDragStop(k))),g(this,"onTouchStart",k=>(C=_.touch,this.handleDragStart(k))),g(this,"onTouchEnd",k=>(C=_.touch,this.handleDragStop(k)))}componentDidMount(){this.mounted=!0;const k=this.findDOMNode();k&&(0,r.addEvent)(k,_.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const k=this.findDOMNode();if(k){const{ownerDocument:B}=k;(0,r.removeEvent)(B,_.mouse.move,this.handleDrag),(0,r.removeEvent)(B,_.touch.move,this.handleDrag),(0,r.removeEvent)(B,_.mouse.stop,this.handleDragStop),(0,r.removeEvent)(B,_.touch.stop,this.handleDragStop),(0,r.removeEvent)(k,_.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,r.scheduleRemoveUserSelectStyles)(B)}}findDOMNode(){return this.props?.nodeRef?this.props?.nodeRef?.current:t.default.findDOMNode(this)}render(){return n.cloneElement(n.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};return ku.default=R,g(R,"displayName","DraggableCore"),g(R,"propTypes",{allowAnyClick:e.default.bool,allowMobileScroll:e.default.bool,children:e.default.node.isRequired,disabled:e.default.bool,enableUserSelectHack:e.default.bool,offsetParent:function(I,k){if(I[k]&&I[k].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:e.default.arrayOf(e.default.number),handle:e.default.string,cancel:e.default.string,nodeRef:e.default.object,onStart:e.default.func,onDrag:e.default.func,onStop:e.default.func,onMouseDown:e.default.func,scale:e.default.number,className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),g(R,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),ku}var PS;function Az(){return PS||(PS=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"DraggableCore",{enumerable:!0,get:function(){return m.default}}),n.default=void 0;var e=b(ja()),t=v(c3()),r=v(iv()),a=Tz(),l=zb(),c=u3(),h=yp(),m=v(kz()),g=v(d3());function v(B){return B&&B.__esModule?B:{default:B}}function b(B,$){if(typeof WeakMap=="function")var N=new WeakMap,V=new WeakMap;return(b=function(z,F){if(!F&&z&&z.__esModule)return z;var E,S,A={__proto__:null,default:z};if(z===null||typeof z!="object"&&typeof z!="function")return A;if(E=F?V:N){if(E.has(z))return E.get(z);E.set(z,A)}for(const D in z)D!=="default"&&{}.hasOwnProperty.call(z,D)&&((S=(E=Object.defineProperty)&&Object.getOwnPropertyDescriptor(z,D))&&(S.get||S.set)?E(A,D,S):A[D]=z[D]);return A})(B,$)}function _(){return _=Object.assign?Object.assign.bind():function(B){for(var $=1;$<arguments.length;$++){var N=arguments[$];for(var V in N)({}).hasOwnProperty.call(N,V)&&(B[V]=N[V])}return B},_.apply(null,arguments)}function C(B,$,N){return($=R($))in B?Object.defineProperty(B,$,{value:N,enumerable:!0,configurable:!0,writable:!0}):B[$]=N,B}function R(B){var $=I(B,"string");return typeof $=="symbol"?$:$+""}function I(B,$){if(typeof B!="object"||!B)return B;var N=B[Symbol.toPrimitive];if(N!==void 0){var V=N.call(B,$);if(typeof V!="object")return V;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(B)}class k extends e.Component{static getDerivedStateFromProps($,N){let{position:V}=$,{prevPropsPosition:z}=N;return V&&(!z||V.x!==z.x||V.y!==z.y)?((0,g.default)("Draggable: getDerivedStateFromProps %j",{position:V,prevPropsPosition:z}),{x:V.x,y:V.y,prevPropsPosition:{...V}}):null}constructor($){super($),C(this,"onDragStart",(N,V)=>{if((0,g.default)("Draggable: onDragStart: %j",V),this.props.onStart(N,(0,c.createDraggableData)(this,V))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),C(this,"onDrag",(N,V)=>{if(!this.state.dragging)return!1;(0,g.default)("Draggable: onDrag: %j",V);const z=(0,c.createDraggableData)(this,V),F={x:z.x,y:z.y,slackX:0,slackY:0};if(this.props.bounds){const{x:S,y:A}=F;F.x+=this.state.slackX,F.y+=this.state.slackY;const[D,M]=(0,c.getBoundPosition)(this,F.x,F.y);F.x=D,F.y=M,F.slackX=this.state.slackX+(S-F.x),F.slackY=this.state.slackY+(A-F.y),z.x=F.x,z.y=F.y,z.deltaX=F.x-this.state.x,z.deltaY=F.y-this.state.y}if(this.props.onDrag(N,z)===!1)return!1;this.setState(F)}),C(this,"onDragStop",(N,V)=>{if(!this.state.dragging||this.props.onStop(N,(0,c.createDraggableData)(this,V))===!1)return!1;(0,g.default)("Draggable: onDragStop: %j",V);const F={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:S,y:A}=this.props.position;F.x=S,F.y=A}this.setState(F)}),this.state={dragging:!1,dragged:!1,x:$.position?$.position.x:$.defaultPosition.x,y:$.position?$.position.y:$.defaultPosition.y,prevPropsPosition:{...$.position},slackX:0,slackY:0,isElementSVG:!1},$.position&&!($.onDrag||$.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){return this.props?.nodeRef?.current??r.default.findDOMNode(this)}render(){const{axis:$,bounds:N,children:V,defaultPosition:z,defaultClassName:F,defaultClassNameDragging:E,defaultClassNameDragged:S,position:A,positionOffset:D,scale:M,...U}=this.props;let P={},xe=null;const Y=!!!A||this.state.dragging,se=A||z,J={x:(0,c.canDragX)(this)&&Y?this.state.x:se.x,y:(0,c.canDragY)(this)&&Y?this.state.y:se.y};this.state.isElementSVG?xe=(0,l.createSVGTransform)(J,D):P=(0,l.createCSSTransform)(J,D);const Ce=(0,a.clsx)(V.props.className||"",F,{[E]:this.state.dragging,[S]:this.state.dragged});return e.createElement(m.default,_({},U,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(V),{className:Ce,style:{...V.props.style,...P},transform:xe}))}}n.default=k,C(k,"displayName","Draggable"),C(k,"propTypes",{...m.default.propTypes,axis:t.default.oneOf(["both","x","y","none"]),bounds:t.default.oneOfType([t.default.shape({left:t.default.number,right:t.default.number,top:t.default.number,bottom:t.default.number}),t.default.string,t.default.oneOf([!1])]),defaultClassName:t.default.string,defaultClassNameDragging:t.default.string,defaultClassNameDragged:t.default.string,defaultPosition:t.default.shape({x:t.default.number,y:t.default.number}),positionOffset:t.default.shape({x:t.default.oneOfType([t.default.number,t.default.string]),y:t.default.oneOfType([t.default.number,t.default.string])}),position:t.default.shape({x:t.default.number,y:t.default.number}),className:h.dontSetMe,style:h.dontSetMe,transform:h.dontSetMe}),C(k,"defaultProps",{...m.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(Wy)),Wy}var LS;function Rz(){if(LS)return Cu.exports;LS=1;const{default:n,DraggableCore:e}=Az();return Cu.exports=n,Cu.exports.default=n,Cu.exports.DraggableCore=e,Cu.exports}var Nz=Rz();const h3=ud(Nz),Iz=()=>{const{callStatus:n,incomingCall:e,outgoingCallUser:t,answerCall:r,endCall:a,localStream:l,remoteStream:c,toggleAudio:h,toggleVideo:m,isMuted:g,isVideoOff:v,activeCall:b,isScreenSharing:_,toggleScreenShare:C,availableDevices:R,selectedMicId:I,selectedCameraId:k,setSelectedMicId:B,setSelectedCameraId:$}=Ad(),N=O.useRef(null),V=O.useRef(null),z=O.useRef(null),[F,E]=O.useState(!1),[S,A]=O.useState(!1),[D,M]=O.useState(100),[U,P]=O.useState(!1),[xe,Ee]=O.useState(!1),[Y,se]=O.useState(!1),[J,Ce]=O.useState(!1),{userProfile:Ne}=Zn(),H=Tk(Ne,vi.SCREEN_SHARE),[q,re]=O.useState(!1);return O.useEffect(()=>{N.current&&l&&(N.current.srcObject=l)},[l,n]),O.useEffect(()=>{V.current&&c&&(V.current.srcObject=c)},[c,n]),O.useEffect(()=>{if(c){const ne=c.getVideoTracks()[0];if(ne){const we=!ne.muted&&ne.readyState==="live";re(we);const ye=()=>re(!1),Te=()=>re(!0),Fe=()=>re(!1);return ne.addEventListener("mute",ye),ne.addEventListener("unmute",Te),ne.addEventListener("ended",Fe),()=>{ne.removeEventListener("mute",ye),ne.removeEventListener("unmute",Te),ne.removeEventListener("ended",Fe)}}else re(!1)}else re(!1)},[c]),O.useEffect(()=>{V.current&&(V.current.volume=D/100)},[D,c]),n==="idle"?null:n==="incoming"?d.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in",children:d.jsxs("div",{className:"bg-dark-sidebar p-6 rounded-2xl shadow-2xl w-80 text-center border border-dark-hover",children:[d.jsxs("div",{className:"w-24 h-24 mx-auto mb-4 relative",children:[e?.callerPhotoUrl?d.jsx("img",{src:e.callerPhotoUrl,alt:"Caller",className:"w-full h-full rounded-full object-cover border-4 border-dark-bg"}):d.jsx("div",{className:"w-full h-full rounded-full bg-brand-primary flex items-center justify-center text-3xl font-bold text-white border-4 border-dark-bg",children:e?.callerName?.[0]?.toUpperCase()}),d.jsx("div",{className:"absolute -bottom-1 -right-1 bg-green-500 rounded-full p-2 animate-bounce",children:d.jsx(mE,{size:16,className:"text-white"})})]}),d.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:e?.callerName}),d.jsxs("p",{className:"text-dark-muted mb-6",children:["Incoming ",e?.type," call..."]}),d.jsxs("div",{className:"flex gap-4 justify-center",children:[d.jsx("button",{onClick:()=>a(!0),className:"w-12 h-12 rounded-full bg-red-500 flex items-center justify-center text-white hover:bg-red-600 transition-colors",children:d.jsx(Oy,{size:24})}),d.jsx("button",{onClick:r,className:"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center text-white hover:bg-green-600 transition-colors",children:d.jsx(mE,{size:20})})]})]})}):d.jsx(h3,{nodeRef:z,disabled:!F,bounds:"body",onStart:()=>A(!0),onStop:()=>A(!1),children:d.jsxs("div",{ref:z,style:F?void 0:{transform:"none !important"},className:St("fixed z-[100] bg-gray-900 shadow-2xl overflow-hidden border border-gray-700 group",!S&&"transition-all duration-300",F?"bottom-4 right-4 w-64 h-48 rounded-lg cursor-move":"inset-0 flex flex-col !transform-none"),children:[d.jsxs("div",{className:St("absolute top-0 left-0 right-0 p-4 z-50 flex justify-between items-start bg-gradient-to-b from-black/80 to-transparent transition-opacity duration-200 opacity-100"),children:[d.jsx("div",{className:"flex gap-2",children:d.jsxs("div",{className:"bg-black/40 backdrop-blur px-3 py-1 rounded-full flex items-center gap-2",children:[d.jsx("span",{className:St("w-2 h-2 rounded-full",b?"bg-green-500":"bg-yellow-500 animate-pulse")}),d.jsx("span",{className:"text-xs text-white font-medium",children:b?"Connected":"Calling..."})]})}),d.jsx("button",{onClick:()=>E(!F),className:"p-2 rounded-full bg-black/40 hover:bg-white/10 text-white backdrop-blur transition-colors",title:F?"Maximize":"Minimize",children:F?d.jsx(kM,{size:20}):d.jsx(CM,{size:20})})]}),d.jsxs("div",{className:"relative flex-1 bg-black flex items-center justify-center w-full h-full",children:[d.jsx("video",{ref:V,autoPlay:!0,playsInline:!0,className:St("w-full h-full object-contain",(!c||!q)&&"hidden")}),(!c||!q)&&d.jsxs("div",{className:"text-center absolute inset-0 flex flex-col items-center justify-center z-10",children:[d.jsx("div",{className:"w-32 h-32 mx-auto mb-4 rounded-full bg-gray-800 flex items-center justify-center text-6xl font-bold text-gray-500 animate-pulse",children:t?.displayName?.[0]||b?.metadata?.name?.[0]||"?"}),d.jsx("p",{className:"text-xl text-white font-medium",children:n==="outgoing"?"Calling...":n==="connected"?"No Video / Audio Only":"Connecting..."}),d.jsx("p",{className:"text-gray-400 text-sm mt-1",children:t?.displayName})]}),!F&&l&&d.jsx(jz,{})]}),d.jsxs("div",{className:St("absolute bottom-4 md:bottom-8 left-1/2 -translate-x-1/2 z-50 flex flex-wrap justify-center items-center gap-2 md:gap-4 p-2 md:p-3 bg-gray-900/80 backdrop-blur-md rounded-xl md:rounded-2xl border border-gray-700 shadow-xl transition-opacity duration-300 hover:opacity-100 w-[95%] md:w-auto max-w-screen-sm",F&&"hidden"),children:[d.jsx("button",{onClick:h,className:St("p-3 rounded-xl transition-all hover:scale-110 active:scale-95",g?"bg-red-500/20 text-red-500":"bg-gray-700/50 text-white hover:bg-gray-600"),title:g?"Unmute":"Mute",children:g?d.jsx(N0,{size:22}):d.jsx(I0,{size:22})}),d.jsx("button",{onClick:m,className:St("p-3 rounded-xl transition-all hover:scale-110 active:scale-95",v?"bg-red-500/20 text-red-500":"bg-gray-700/50 text-white hover:bg-gray-600"),title:v?"Turn Video On":"Turn Video Off",children:v?d.jsx(j0,{size:22}):d.jsx(nd,{size:22})}),!Ia.isNativePlatform()&&d.jsxs("div",{className:"relative",onMouseEnter:()=>se(!0),onMouseLeave:()=>se(!1),children:[d.jsx("button",{onClick:()=>{_?C():Ce(!0)},disabled:!b||!H,className:St("p-3 rounded-xl transition-all hover:scale-110 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",_?"bg-green-500 text-white":H?"bg-gray-700/50 text-white hover:bg-gray-600":"bg-gray-800 text-gray-500 cursor-not-allowed"),title:H?_?"Stop Sharing":"Share Screen":void 0,children:_?d.jsx(mM,{size:22}):d.jsx(vm,{size:22})}),!H&&d.jsxs("div",{className:St("absolute bottom-full mb-2 left-1/2 -translate-x-1/2 px-2 py-1 bg-black text-rose-500 text-xs font-bold rounded shadow-lg whitespace-nowrap transition-opacity pointer-events-none z-50",Y?"opacity-100":"opacity-0"),children:["Requires Premium ",d.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-black"})]})]}),d.jsx("div",{className:"w-px h-8 bg-gray-700 mx-2"}),d.jsxs("div",{className:"relative",children:[d.jsx("button",{onClick:()=>P(!U),onDoubleClick:()=>M(D>0?0:100),className:St("p-3 rounded-xl transition-all hover:scale-110 active:scale-95",D===0?"bg-red-500/20 text-red-500":"bg-gray-700/50 text-white hover:bg-gray-600"),title:`Volume: ${D}% (click to show slider, double-click to mute)`,children:D===0?d.jsx(tE,{size:22}):D<50?d.jsx(uM,{size:22}):d.jsx(nE,{size:22})}),U&&d.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-3 p-3 bg-gray-900/95 backdrop-blur-md rounded-xl border border-gray-700 shadow-xl",children:d.jsxs("div",{className:"flex flex-col items-center gap-2",children:[d.jsxs("span",{className:"text-xs text-gray-400 font-medium",children:[D,"%"]}),d.jsx("input",{type:"range",min:"0",max:"100",value:D,onChange:ne=>M(Number(ne.target.value)),className:`w-24 h-2 appearance-none bg-gray-700 rounded-full cursor-pointer accent-brand-primary
                     [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 
                     [&::-webkit-slider-thumb]:bg-brand-primary [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer
                     [&::-webkit-slider-thumb]:shadow-lg [&::-webkit-slider-thumb]:hover:scale-110 [&::-webkit-slider-thumb]:transition-transform`,style:{background:`linear-gradient(to right, rgb(88, 101, 242) ${D}%, rgb(55, 65, 81) ${D}%)`}}),d.jsx("span",{className:"text-[10px] text-gray-500",children:"Remote Volume"})]})})]}),d.jsxs("div",{className:"relative",children:[d.jsx("button",{onClick:()=>Ee(!xe),className:St("p-3 rounded-xl transition-all hover:scale-110 active:scale-95",xe?"bg-brand-primary/20 text-brand-primary":"bg-gray-700/50 text-white hover:bg-gray-600"),title:"Audio/Video Settings",children:d.jsx(tp,{size:22})}),xe&&d.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-3 p-4 bg-gray-900/95 backdrop-blur-md rounded-xl border border-gray-700 shadow-xl w-64",children:d.jsxs("div",{className:"space-y-4",children:[d.jsx("h4",{className:"text-sm font-semibold text-white mb-3",children:"Device Settings"}),d.jsxs("div",{children:[d.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Microphone"}),d.jsx("select",{value:I,onChange:ne=>B(ne.target.value),className:"w-full bg-gray-800 text-white text-sm rounded-lg px-3 py-2 border border-gray-700 focus:border-brand-primary outline-none cursor-pointer",children:R.audioInputs.map(ne=>d.jsx("option",{value:ne.deviceId,children:ne.label||`Microphone ${ne.deviceId.slice(0,8)}...`},ne.deviceId))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Camera"}),d.jsx("select",{value:k,onChange:ne=>$(ne.target.value),className:"w-full bg-gray-800 text-white text-sm rounded-lg px-3 py-2 border border-gray-700 focus:border-brand-primary outline-none cursor-pointer",children:R.videoInputs.map(ne=>d.jsx("option",{value:ne.deviceId,children:ne.label||`Camera ${ne.deviceId.slice(0,8)}...`},ne.deviceId))})]}),d.jsx("p",{className:"text-[10px] text-gray-500 mt-2",children:"Changes apply on next call"})]})})]}),d.jsx("div",{className:"w-px h-8 bg-gray-700 mx-2"}),d.jsx("button",{onClick:()=>a(!0),className:"p-3 rounded-xl bg-red-600 text-white hover:bg-red-700 transition-all hover:scale-110 active:scale-95 shadow-lg shadow-red-900/20",title:"End Call",children:d.jsx(Oy,{size:24})})]}),F&&d.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 flex justify-center gap-2 bg-gradient-to-t from-black/90 to-transparent opacity-0 group-hover:opacity-100 transition-opacity z-50",children:[d.jsx("button",{onMouseDown:ne=>ne.stopPropagation(),onClick:h,className:St("p-1.5 rounded-full text-white hover:bg-white/20",g&&"bg-red-500/50 text-red-100"),title:"Mute",children:g?d.jsx(N0,{size:16}):d.jsx(I0,{size:16})}),d.jsx("button",{onMouseDown:ne=>ne.stopPropagation(),onClick:m,className:St("p-1.5 rounded-full text-white hover:bg-white/20",v&&"bg-red-500/50 text-red-100"),title:"Camera",children:v?d.jsx(j0,{size:16}):d.jsx(nd,{size:16})}),d.jsx("button",{onMouseDown:ne=>ne.stopPropagation(),onClick:()=>M(D===0?100:0),className:St("p-1.5 rounded-full text-white hover:bg-white/20",D===0&&"bg-red-500/50 text-red-100"),title:"Volume Toggle",children:D===0?d.jsx(tE,{size:16}):d.jsx(nE,{size:16})}),d.jsx("button",{onMouseDown:ne=>ne.stopPropagation(),onClick:()=>a(!0),className:"p-1.5 rounded-full bg-red-600/80 text-white hover:bg-red-600",title:"End Call",children:d.jsx(Oy,{size:16})})]}),xe&&d.jsx(wz,{isOpen:xe,onClose:()=>Ee(!1)}),d.jsx(_z,{isOpen:J,onClose:()=>Ce(!1),onConfirm:ne=>C(ne)})]})})},jz=()=>{const n=O.useRef(null),{localStream:e,isMuted:t,isVideoOff:r}=Ad(),a=O.useRef(null);return O.useEffect(()=>{a.current&&e&&(a.current.srcObject=e)},[e]),d.jsx(h3,{bounds:"parent",nodeRef:n,children:d.jsxs("div",{ref:n,className:"absolute bottom-24 right-4 w-48 h-36 bg-gray-800 rounded-lg overflow-hidden shadow-lg border border-gray-700 cursor-move hover:scale-105 transition-transform z-50",children:[d.jsx("video",{ref:a,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),d.jsxs("div",{className:"absolute bottom-2 left-2 flex gap-1",children:[t&&d.jsx("div",{className:"bg-red-500/80 p-1 rounded",children:d.jsx(N0,{size:12,className:"text-white"})}),r&&d.jsx("div",{className:"bg-red-500/80 p-1 rounded",children:d.jsx(j0,{size:12,className:"text-white"})})]})]})})},Dz=()=>{const{currentUser:n,logout:e,resendVerification:t}=Zn(),[r,a]=O.useState(!1),[l,c]=O.useState(""),h=async()=>{a(!0);try{await t(),c("Verification email sent! Check your inbox.")}catch(g){c("Error sending email: "+g.message)}finally{a(!1)}},m=async()=>{a(!0);try{await n.reload(),n.emailVerified?window.location.reload():c("Email is not verified yet. Please check your inbox.")}catch(g){console.error(g)}finally{a(!1)}};return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-bg p-4",children:d.jsxs("div",{className:"w-full max-w-md bg-dark-sidebar rounded-lg shadow-2xl p-8 text-center space-y-6",children:[d.jsx("div",{className:"bg-brand-primary/10 w-16 h-16 rounded-full flex items-center justify-center mx-auto text-3xl",children:""}),d.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Verify Your Email"}),d.jsxs("p",{className:"text-dark-muted",children:["We've sent a verification email to ",d.jsx("br",{}),d.jsx("span",{className:"font-semibold text-white",children:n?.email})]}),d.jsxs("div",{className:"bg-yellow-500/10 text-yellow-500 p-3 rounded-md text-sm",children:[" Please check your ",d.jsx("b",{children:"Spam/Junk"})," folder if you don't see the email in your inbox."]}),d.jsx("p",{className:"text-sm text-dark-muted",children:"You must verify your email address to access Lumo. To prevent spam, unverified accounts are restricted."}),l&&d.jsx("div",{className:"p-3 bg-brand-primary/20 text-brand-primary rounded-md text-sm",children:l}),d.jsxs("div",{className:"space-y-3 pt-4",children:[d.jsx(Je,{onClick:m,className:"w-full",disabled:r,children:"I've Verified My Email"}),d.jsx(Je,{onClick:h,variant:"secondary",className:"w-full",disabled:r,children:"Resend Verification Email"}),d.jsx("button",{onClick:e,className:"text-sm text-dark-muted hover:text-dark-text underline mt-4",children:"Logout"})]})]})})},Mz=({dmId:n,dms:e})=>{const{currentUser:t,userProfile:r}=Zn(),{users:a}=kd(),{startCall:l}=Ad(),[c,h]=O.useState(null),[m,g]=O.useState(null),[v,b]=O.useState([]),_=e.find(I=>I.id===n),C=_?.participants.find(I=>I!==t?.uid);O.useEffect(()=>{(async()=>{if(C)try{const k=await ep(Me(ve,"users",C));k.exists()&&h({id:k.id,...k.data()})}catch(k){console.error("Error fetching DM user:",k)}})()},[C]);const R=O.useMemo(()=>[{id:t.uid,displayName:t.displayName||r?.displayName||"User",photoUrl:t.photoURL||r?.photoUrl,role:r?.role},c].filter(Boolean),[t,r,c]);return _?d.jsxs("div",{className:"flex-1 flex flex-col h-full bg-dark-bg",children:[d.jsxs("div",{className:"h-12 px-4 flex items-center justify-between border-b border-dark-hover shadow-sm bg-dark-bg",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"relative",children:c?.photoUrl?d.jsx("img",{src:c.photoUrl,alt:c.displayName,className:"w-8 h-8 rounded-full object-cover"}):d.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white text-sm font-bold",children:c?.displayName?.[0]?.toUpperCase()||"?"})}),d.jsx("span",{className:"font-semibold text-dark-text",children:c?.displayName||"Loading..."})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("button",{onClick:()=>l(c,"voice"),className:"text-dark-muted hover:text-dark-text transition-colors p-1 rounded hover:bg-dark-hover",title:"Start Voice Call",disabled:!c,children:d.jsx(dM,{size:22})}),d.jsx("button",{onClick:()=>l(c,"video"),className:"text-dark-muted hover:text-dark-text transition-colors p-1 rounded hover:bg-dark-hover",title:"Start Video Call",disabled:!c,children:d.jsx(nd,{size:22})}),d.jsx("div",{className:"w-px h-6 bg-dark-hover mx-1"}),d.jsx(l3,{messages:v,users:R,onResultClick:I=>document.getElementById(`message-${I.id}`)?.scrollIntoView({behavior:"smooth",block:"center"})})]})]}),d.jsx(Mk,{serverId:null,channelId:n,users:R,currentUserId:t?.uid,userRole:r?.role,onReply:g,onMessagesChange:b}),d.jsx(o3,{serverId:null,channelId:n,channel:{id:n,name:c?.displayName},userId:t?.uid,userProfile:r,userRole:r?.role,users:R,replyingTo:m,onCancelReply:()=>g(null)})]}):d.jsx("div",{className:"flex-1 flex items-center justify-center text-dark-muted",children:"Select a conversation"})},Oz="lumo",Pz="1.8.5",Lz="module",Vz="electron/main.cjs",Uz={dev:"vite",build:"vite build",lint:"eslint .",preview:"vite preview",predeploy:"npm run build",deploy:"gh-pages -d dist","electron:dev":'concurrently -k "npm run dev" "wait-on tcp:5173 && electron ."',"electron:build":"vite build && electron-builder","build:electron":"npm run electron:build"},zz={"@capacitor/android":"^8.0.0","@capacitor/cli":"^8.0.0","@capacitor/core":"^8.0.0","@capacitor/push-notifications":"^8.0.0","@giphy/js-fetch-api":"^5.7.0","@giphy/react-components":"^10.1.0",clsx:"^2.1.1","date-fns":"^4.1.0","electron-log":"^5.4.3","electron-updater":"^6.6.2","emoji-picker-react":"^4.16.1",firebase:"^12.6.0",peerjs:"^1.5.5",react:"^19.2.0","react-dom":"^19.2.0","react-draggable":"^4.5.0","react-icons":"^5.5.0","react-router-dom":"^7.10.0","simple-peer":"^9.11.1","tailwind-merge":"^3.4.0"},Bz="Lumo - Modern Chat Application",Fz="Hasan",Hz={appId:"com.hasan.lumo",productName:"Lumo",files:["dist/**/*","electron/**/*"],directories:{output:"dist"},win:{target:"nsis",icon:"public/lumo-logo.png",artifactName:"LumoSetup_win-${version}.${ext}"},mac:{target:"dmg",icon:"public/lumo-logo.png",category:"public.app-category.social-networking",extendInfo:{NSCameraUsageDescription:"Lumo needs access to your camera for video calls.",NSMicrophoneUsageDescription:"Lumo needs access to your microphone for voice and video calls.",NSScreenCaptureUsageDescription:"Lumo needs access to share your screen."},artifactName:"LumoSetup_mac-${version}.${ext}"},linux:{target:"AppImage",icon:"public/lumo-logo.png",category:"Network",artifactName:"LumoSetup_linux-${version}.${ext}"},publish:[{provider:"github",owner:"opsdazlakss",repo:"lumobuild"}]},$z={type:"git",url:"https://github.com/opsdazlakss/lumobuild.git"},qz={"@eslint/js":"^9.39.1","@types/react":"^19.2.5","@types/react-dom":"^19.2.3","@vitejs/plugin-react":"^5.1.1",autoprefixer:"^10.4.22",concurrently:"^9.2.1",electron:"^39.2.6","electron-builder":"^26.0.12",eslint:"^9.39.1","eslint-plugin-react-hooks":"^7.0.1","eslint-plugin-react-refresh":"^0.4.24","gh-pages":"^6.3.0",globals:"^16.5.0",postcss:"^8.5.6",tailwindcss:"^3.4.18",vite:"^7.2.4","wait-on":"^9.0.3"},t0={name:Oz,private:!0,version:Pz,type:Lz,main:Vz,scripts:Uz,dependencies:zz,description:Bz,author:Fz,build:Hz,repository:$z,devDependencies:qz},Gz=({isOpen:n,onClose:e,version:t,downloadUrl:r,forceUpdate:a})=>d.jsx(Us,{isOpen:n,onClose:a?()=>{}:e,title:"Update Available",size:"sm",children:d.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[d.jsx("div",{className:"w-16 h-16 bg-brand-primary/20 rounded-full flex items-center justify-center animate-bounce",children:d.jsx(IM,{size:32,className:"text-brand-primary"})}),d.jsxs("div",{children:[d.jsxs("h3",{className:"text-lg font-semibold text-white",children:["New Version ",t," Available!"]}),d.jsx("p",{className:"text-dark-muted text-sm mt-2",children:"A new version of Lumo is available. Please update to get the latest features and fixes."})]}),d.jsxs("div",{className:"w-full space-y-2 pt-2",children:[d.jsxs(Je,{variant:"primary",className:"w-full flex items-center justify-center gap-2",onClick:()=>{window.open(r,"_system")},children:[d.jsx(vC,{size:20}),"Download Update"]}),!a&&d.jsx(Je,{variant:"secondary",className:"w-full",onClick:e,children:"Update Later"})]})]})}),Yz=()=>{const{currentUser:n,userProfile:e,logout:t}=Zn(),{users:r,channels:a,server:l,servers:c,currentServer:h,setCurrentServer:m,unreadMentions:g,dms:v}=kd();EP(n?.uid);const[b,_]=O.useState(null),[C,R]=O.useState(null),[I,k]=O.useState(!1),[B,$]=O.useState(!1),[N,V]=O.useState(!1),[z,F]=O.useState(!1),[E,S]=O.useState(!1),A=DO({onSwipeLeft:()=>{if(z){F(!1);return}h!=="home"&&S(!0)},onSwipeRight:()=>{if(E){S(!1);return}F(!0)}}),[D,M]=O.useState(!1),[U,P]=O.useState(!1),[xe,Ee]=O.useState(null),[Y,se]=O.useState([]),[J,Ce]=O.useState(!1),[Ne,H]=O.useState(null),[q,re]=O.useState("idle");O.useEffect(()=>{if(!Ia.isNativePlatform())return;(async()=>{re("checking");const Te=Date.now();try{const Fe=Me(ve,"system","app_version"),Ye=await ep(Fe);let be=!1,he=null;if(Ye.exists()){const ae=Ye.data(),Re=t0.version,Ie=ae.android;if(Ie&&Ie!==Re){const X=Re.split(".").map(Number),le=Ie.split(".").map(Number);for(let Se=0;Se<Math.max(X.length,le.length);Se++){const Oe=X[Se]||0,qe=le[Se]||0;if(qe>Oe){be=!0;break}else if(qe<Oe)break}be&&(he={version:Ie,downloadUrl:ae.downloadUrl,forceUpdate:ae.forceUpdate||!1})}}const _e=Date.now()-Te;_e<1500&&await new Promise(ae=>setTimeout(ae,1500-_e)),be?(H(he),re("available"),Ce(!0)):(re("uptodate"),setTimeout(()=>{re("idle")},1500))}catch(Fe){console.error("Failed to check for updates:",Fe),re("idle")}})()},[]),O.useEffect(()=>{!n||!h||!g||g[h]?.count>0&&nt(Me(ve,"users",n.uid),{[`unreadMentions.${h}`]:dD()}).catch(ye=>{console.error("Error clearing unread mentions:",ye)})},[h,n,g]),O.useEffect(()=>{const ye=()=>{window.innerWidth<768&&!b&&!C&&F(!0)};return window.innerWidth<768&&F(!0),window.addEventListener("resize",ye),()=>window.removeEventListener("resize",ye)},[b,C]),O.useEffect(()=>{a.length>0?_(a[0]):_(null)},[h,a]);const ne=async ye=>{if(m(ye),n)try{await nt(Me(ve,"users",n.uid),{currentServer:ye})}catch(Te){console.error("Failed to persist server selection:",Te)}},we=async ye=>{if(!n||!ye)return;const Te=v.find(Fe=>Fe.participants.includes(ye.id)&&Fe.participants.includes(n.uid));if(Te)R(Te),ne("home");else try{const Fe=await Vn(mt(ve,"dms"),{participants:[n.uid,ye.id],createdAt:_t(),updatedAt:_t(),lastMessage:null});ne("home")}catch(Fe){console.error("Error creating DM:",Fe)}};return n&&!n.emailVerified?d.jsx(Dz,{}):d.jsx(hP,{children:d.jsxs("div",{className:"flex h-screen bg-dark-bg overflow-hidden",...A,children:[d.jsxs("div",{className:"hidden md:flex h-full",children:[d.jsx(kE,{servers:c,currentServerId:h,onServerChange:ne,onCreateServer:()=>M(!0),onJoinServer:()=>P(!0),userRole:e?.role,userId:n?.uid,unreadMentions:g}),d.jsx(CE,{server:l,channels:a,selectedChannel:b,onSelectChannel:_,onOpenSettings:()=>k(!0),onOpenAdmin:()=>$(!0),onLogout:t,userProfile:e,serverId:h,userRole:e?.role,userId:n?.uid,dms:v,selectedDm:C,onSelectDm:R})]}),z&&d.jsxs("div",{className:"fixed inset-0 z-50 flex md:hidden",children:[d.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>F(!1)}),d.jsxs("div",{className:"relative flex h-full animate-slide-in-left",children:[d.jsx(kE,{servers:c,currentServerId:h,onServerChange:ye=>{ne(ye)},onCreateServer:()=>M(!0),onJoinServer:()=>P(!0),userRole:e?.role,userId:n?.uid,unreadMentions:g}),d.jsx(CE,{server:l,channels:a,selectedChannel:b,onSelectChannel:ye=>{_(ye),F(!1)},onOpenSettings:()=>{k(!0),F(!1)},onOpenAdmin:()=>{$(!0),F(!1)},onLogout:t,userProfile:e,serverId:h,userRole:e?.role,userId:n?.uid,dms:v,selectedDm:C,onSelectDm:ye=>{R(ye),F(!1)}}),d.jsx("button",{onClick:()=>F(!1),className:"absolute top-2 right-2 p-2 bg-dark-bg/50 rounded-full text-white md:hidden",style:{right:"-3rem"},children:d.jsx(An,{size:24})})]})]}),d.jsx("div",{className:"flex-1 flex flex-col",children:h==="home"?C?d.jsx(Mz,{dmId:C.id,dms:v}):d.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-dark-muted relative",children:[d.jsx("button",{onClick:()=>F(!0),className:"absolute top-4 left-4 md:hidden p-2 text-dark-muted hover:text-dark-text",children:d.jsx(aE,{size:32})}),d.jsxs("div",{className:"text-center",children:[d.jsx("p",{className:"mb-2 text-lg",children:" Welcome!"}),d.jsx("p",{children:"Select a conversation to start chatting"})]})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"h-12 px-4 flex items-center justify-between border-b border-dark-hover shadow-sm bg-dark-bg",children:[d.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[d.jsx("button",{onClick:()=>F(!0),className:"md:hidden p-1 mr-1 text-dark-muted hover:text-dark-text",children:d.jsx(aE,{size:24})}),d.jsx(rp,{className:"text-dark-muted flex-shrink-0"}),d.jsxs("h2",{className:"font-semibold text-dark-text flex items-center min-w-0",children:[d.jsx("span",{className:"truncate",children:b?.name||"Select a channel"}),b?.description&&d.jsx("span",{className:"hidden md:block ml-4 text-sm text-dark-muted font-normal border-l border-dark-muted/30 pl-4 truncate max-w-md",children:b.description})]})]}),d.jsx("div",{className:"flex items-center gap-3",children:b&&d.jsxs(d.Fragment,{children:[Y.filter(ye=>ye.pinned).length>0&&d.jsxs("button",{onClick:()=>V(!N),className:`hidden sm:flex items-center gap-2 px-3 py-1.5 rounded transition-colors ${N?"bg-brand-primary text-white":"bg-dark-hover text-dark-text hover:bg-dark-input"}`,children:[d.jsx(Fl,{size:16}),d.jsxs("span",{className:"text-sm font-medium",children:[Y.filter(ye=>ye.pinned).length," Pinned"]})]}),d.jsx("div",{className:"hidden sm:block",children:d.jsx(l3,{messages:Y,users:r,onResultClick:ye=>console.log("Scroll to:",ye)})}),h!=="home"&&d.jsx("button",{onClick:()=>S(!0),className:"lg:hidden p-2 text-dark-muted hover:text-dark-text",children:d.jsx(db,{size:24})})]})})]}),b?d.jsxs(d.Fragment,{children:[d.jsx(Mk,{serverId:h,channelId:b.id,users:r,currentUserId:n?.uid,userRole:e?.role,onReply:Ee,onMessagesChange:se}),d.jsx(o3,{serverId:h,channelId:b.id,channel:b,userId:n?.uid,userProfile:e,userRole:e?.role,users:r,replyingTo:xe,onCancelReply:()=>Ee(null)})]}):d.jsx("div",{className:"flex-1 flex items-center justify-center text-dark-muted",children:"Select a channel to start chatting"})]})}),d.jsx("div",{className:"hidden lg:block h-full",children:h!=="home"&&d.jsx(AE,{users:r,currentUserId:n?.uid,onStartDm:we})}),E&&h!=="home"&&d.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end lg:hidden",children:[d.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>S(!1)}),d.jsxs("div",{className:"relative h-full bg-dark-sidebar shadow-xl w-64 animate-slide-in-right",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-hover",children:[d.jsx("h3",{className:"font-semibold text-dark-text",children:"Members"}),d.jsx("button",{onClick:()=>S(!1),children:d.jsx(An,{size:24,className:"text-dark-muted"})})]}),d.jsx("div",{className:"h-[calc(100%-60px)]",children:d.jsx(AE,{users:r,currentUserId:n?.uid,onStartDm:ye=>{we(ye),S(!1)}})})]})]}),N&&b&&d.jsx(ZU,{messages:Y,users:r,onClose:()=>V(!1),onJumpToMessage:ye=>{const Te=document.getElementById(`message-${ye}`);Te&&(Te.scrollIntoView({behavior:"smooth",block:"center"}),Te.classList.add("bg-brand-primary/10"),setTimeout(()=>{Te.classList.remove("bg-brand-primary/10")},2e3)),V(!1)}}),d.jsx(Iz,{}),d.jsx(pz,{isOpen:I,onClose:()=>k(!1),onOpenAdmin:()=>$(!0)}),d.jsx(vz,{isOpen:B,onClose:()=>$(!1)}),d.jsx(bz,{isOpen:D,onClose:()=>M(!1),userId:n?.uid,onSuccess:ye=>m(ye)}),d.jsx(xz,{isOpen:U,onClose:()=>P(!1),userId:n?.uid,onSuccess:ye=>m(ye)}),J&&d.jsx(Gz,{isOpen:J,onClose:()=>!Ne?.forceUpdate&&Ce(!1),version:Ne?.version,downloadUrl:Ne?.downloadUrl,forceUpdate:Ne?.forceUpdate}),["checking","uptodate"].includes(q)&&d.jsxs("div",{className:"fixed inset-0 z-[60] bg-dark-bg flex flex-col items-center justify-center text-white transition-opacity duration-300",children:[q==="checking"&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-brand-primary mb-6"}),d.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Checking for updates..."}),d.jsxs("p",{className:"text-dark-muted font-mono text-sm",children:["v",t0.version]})]}),q==="uptodate"&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"rounded-full bg-green-500/20 p-4 mb-6",children:d.jsx(vC,{size:48,className:"text-green-500"})}),d.jsx("h2",{className:"text-xl font-semibold mb-2 text-green-400",children:"You are up to date!"}),d.jsxs("p",{className:"text-dark-muted font-mono text-sm",children:["v",t0.version]})]})]})]})})};class Kz extends de.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState({errorInfo:t})}render(){return this.state.hasError?d.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-8 flex flex-col items-center justify-center text-center",children:[d.jsx("h1",{className:"text-2xl font-bold text-red-500 mb-4",children:"Something went wrong"}),d.jsxs("div",{className:"bg-gray-800 p-4 rounded overflow-auto max-w-full text-left font-mono text-xs",children:[d.jsx("p",{className:"font-bold text-yellow-400 mb-2",children:this.state.error&&this.state.error.toString()}),d.jsx("pre",{className:"text-gray-400 whitespace-pre-wrap",children:this.state.errorInfo&&this.state.errorInfo.componentStack})]}),d.jsx("button",{className:"mt-6 px-4 py-2 bg-blue-600 rounded hover:bg-blue-700",onClick:()=>window.location.reload(),children:"Reload App"})]}):this.props.children}}function Qz(){const{currentUser:n,userProfile:e,loading:t}=Zn(),[r,a]=O.useState("login");return t?d.jsx("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center",children:d.jsx("div",{className:"text-dark-text text-xl",children:"Loading..."})}):n&&e?.isBanned?d.jsx("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-dark-sidebar p-8 rounded-xl max-w-md w-full text-center border border-admin",children:[d.jsx("div",{className:"text-6xl mb-4",children:""}),d.jsx("h1",{className:"text-2xl font-bold text-dark-text mb-2",children:"Account Banned"}),d.jsx("p",{className:"text-dark-muted mb-6",children:"Your account has been banned from this server. Please contact an administrator if you believe this is a mistake."}),d.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-hover transition-colors",children:"Refresh"})]})}):n?d.jsx(qD,{children:d.jsx(Yz,{})}):d.jsxs(d.Fragment,{children:[r==="login"&&d.jsx(NO,{onSwitchToRegister:()=>a("register"),onSwitchToReset:()=>a("reset")}),r==="register"&&d.jsx(IO,{onSwitchToLogin:()=>a("login")}),r==="reset"&&d.jsx(jO,{onSwitchToLogin:()=>a("login")})]})}function Xz(){return d.jsx(LM,{children:d.jsx(Kz,{children:d.jsx(FD,{children:d.jsx(Wz,{children:d.jsx(Qz,{})})})})})}const Wz=({children:n})=>{const{currentUser:e}=Zn();return O.useEffect(()=>{sv.initialize(e?.uid)},[e]),n};ZR.createRoot(document.getElementById("root")).render(d.jsx(O.StrictMode,{children:d.jsx(Xz,{})}));
