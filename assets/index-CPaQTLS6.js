function x5(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const o=Object.getOwnPropertyDescriptor(r,a);o&&Object.defineProperty(t,a,o.get?o:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();function wd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function _5(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){var a=!1;try{a=this instanceof r}catch{}return a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),n}var x0={exports:{}},Mu={};var x_;function w5(){if(x_)return Mu;x_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,a,o){var u=null;if(o!==void 0&&(u=""+o),a.key!==void 0&&(u=""+a.key),"key"in a){o={};for(var h in a)h!=="key"&&(o[h]=a[h])}else o=a;return a=o.ref,{$$typeof:t,type:r,key:u,ref:a!==void 0?a:null,props:o}}return Mu.Fragment=e,Mu.jsx=n,Mu.jsxs=n,Mu}var __;function S5(){return __||(__=1,x0.exports=w5()),x0.exports}var c=S5(),_0={exports:{}},ft={};var w_;function E5(){if(w_)return ft;w_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),x=Symbol.iterator;function k($){return $===null||typeof $!="object"?null:($=x&&$[x]||$["@@iterator"],typeof $=="function"?$:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,N={};function U($,X,oe){this.props=$,this.context=X,this.refs=N,this.updater=oe||j}U.prototype.isReactComponent={},U.prototype.setState=function($,X){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,X,"setState")},U.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function F(){}F.prototype=U.prototype;function I($,X,oe){this.props=$,this.context=X,this.refs=N,this.updater=oe||j}var O=I.prototype=new F;O.constructor=I,R(O,U.prototype),O.isPureReactComponent=!0;var B=Array.isArray;function H(){}var w={H:null,A:null,T:null,S:null},E=Object.prototype.hasOwnProperty;function A($,X,oe){var fe=oe.ref;return{$$typeof:t,type:$,key:X,ref:fe!==void 0?fe:null,props:oe}}function P($,X){return A($.type,X,$.props)}function L($){return typeof $=="object"&&$!==null&&$.$$typeof===t}function z($){var X={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(oe){return X[oe]})}var M=/\/+/g;function se($,X){return typeof $=="object"&&$!==null&&$.key!=null?z(""+$.key):X.toString(36)}function ae($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(H,H):($.status="pending",$.then(function(X){$.status==="pending"&&($.status="fulfilled",$.value=X)},function(X){$.status==="pending"&&($.status="rejected",$.reason=X)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function G($,X,oe,fe,Ce){var Ue=typeof $;(Ue==="undefined"||Ue==="boolean")&&($=null);var re=!1;if($===null)re=!0;else switch(Ue){case"bigint":case"string":case"number":re=!0;break;case"object":switch($.$$typeof){case t:case e:re=!0;break;case y:return re=$._init,G(re($._payload),X,oe,fe,Ce)}}if(re)return Ce=Ce($),re=fe===""?"."+se($,0):fe,B(Ce)?(oe="",re!=null&&(oe=re.replace(M,"$&/")+"/"),G(Ce,X,oe,"",function(We){return We})):Ce!=null&&(L(Ce)&&(Ce=P(Ce,oe+(Ce.key==null||$&&$.key===Ce.key?"":(""+Ce.key).replace(M,"$&/")+"/")+re)),X.push(Ce)),1;re=0;var Le=fe===""?".":fe+":";if(B($))for(var Re=0;Re<$.length;Re++)fe=$[Re],Ue=Le+se(fe,Re),re+=G(fe,X,oe,Ue,Ce);else if(Re=k($),typeof Re=="function")for($=Re.call($),Re=0;!(fe=$.next()).done;)fe=fe.value,Ue=Le+se(fe,Re++),re+=G(fe,X,oe,Ue,Ce);else if(Ue==="object"){if(typeof $.then=="function")return G(ae($),X,oe,fe,Ce);throw X=String($),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return re}function J($,X,oe){if($==null)return $;var fe=[],Ce=0;return G($,fe,"","",function(Ue){return X.call(oe,Ue,Ce++)}),fe}function W($){if($._status===-1){var X=$._result;X=X(),X.then(function(oe){($._status===0||$._status===-1)&&($._status=1,$._result=oe)},function(oe){($._status===0||$._status===-1)&&($._status=2,$._result=oe)}),$._status===-1&&($._status=0,$._result=X)}if($._status===1)return $._result.default;throw $._result}var Ee=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)},Pe={map:J,forEach:function($,X,oe){J($,function(){X.apply(this,arguments)},oe)},count:function($){var X=0;return J($,function(){X++}),X},toArray:function($){return J($,function(X){return X})||[]},only:function($){if(!L($))throw Error("React.Children.only expected to receive a single React element child.");return $}};return ft.Activity=b,ft.Children=Pe,ft.Component=U,ft.Fragment=n,ft.Profiler=a,ft.PureComponent=I,ft.StrictMode=r,ft.Suspense=m,ft.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,ft.__COMPILER_RUNTIME={__proto__:null,c:function($){return w.H.useMemoCache($)}},ft.cache=function($){return function(){return $.apply(null,arguments)}},ft.cacheSignal=function(){return null},ft.cloneElement=function($,X,oe){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var fe=R({},$.props),Ce=$.key;if(X!=null)for(Ue in X.key!==void 0&&(Ce=""+X.key),X)!E.call(X,Ue)||Ue==="key"||Ue==="__self"||Ue==="__source"||Ue==="ref"&&X.ref===void 0||(fe[Ue]=X[Ue]);var Ue=arguments.length-2;if(Ue===1)fe.children=oe;else if(1<Ue){for(var re=Array(Ue),Le=0;Le<Ue;Le++)re[Le]=arguments[Le+2];fe.children=re}return A($.type,Ce,fe)},ft.createContext=function($){return $={$$typeof:u,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:o,_context:$},$},ft.createElement=function($,X,oe){var fe,Ce={},Ue=null;if(X!=null)for(fe in X.key!==void 0&&(Ue=""+X.key),X)E.call(X,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(Ce[fe]=X[fe]);var re=arguments.length-2;if(re===1)Ce.children=oe;else if(1<re){for(var Le=Array(re),Re=0;Re<re;Re++)Le[Re]=arguments[Re+2];Ce.children=Le}if($&&$.defaultProps)for(fe in re=$.defaultProps,re)Ce[fe]===void 0&&(Ce[fe]=re[fe]);return A($,Ue,Ce)},ft.createRef=function(){return{current:null}},ft.forwardRef=function($){return{$$typeof:h,render:$}},ft.isValidElement=L,ft.lazy=function($){return{$$typeof:y,_payload:{_status:-1,_result:$},_init:W}},ft.memo=function($,X){return{$$typeof:p,type:$,compare:X===void 0?null:X}},ft.startTransition=function($){var X=w.T,oe={};w.T=oe;try{var fe=$(),Ce=w.S;Ce!==null&&Ce(oe,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(H,Ee)}catch(Ue){Ee(Ue)}finally{X!==null&&oe.types!==null&&(X.types=oe.types),w.T=X}},ft.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},ft.use=function($){return w.H.use($)},ft.useActionState=function($,X,oe){return w.H.useActionState($,X,oe)},ft.useCallback=function($,X){return w.H.useCallback($,X)},ft.useContext=function($){return w.H.useContext($)},ft.useDebugValue=function(){},ft.useDeferredValue=function($,X){return w.H.useDeferredValue($,X)},ft.useEffect=function($,X){return w.H.useEffect($,X)},ft.useEffectEvent=function($){return w.H.useEffectEvent($)},ft.useId=function(){return w.H.useId()},ft.useImperativeHandle=function($,X,oe){return w.H.useImperativeHandle($,X,oe)},ft.useInsertionEffect=function($,X){return w.H.useInsertionEffect($,X)},ft.useLayoutEffect=function($,X){return w.H.useLayoutEffect($,X)},ft.useMemo=function($,X){return w.H.useMemo($,X)},ft.useOptimistic=function($,X){return w.H.useOptimistic($,X)},ft.useReducer=function($,X,oe){return w.H.useReducer($,X,oe)},ft.useRef=function($){return w.H.useRef($)},ft.useState=function($){return w.H.useState($)},ft.useSyncExternalStore=function($,X,oe){return w.H.useSyncExternalStore($,X,oe)},ft.useTransition=function(){return w.H.useTransition()},ft.version="19.2.3",ft}var S_;function Xa(){return S_||(S_=1,_0.exports=E5()),_0.exports}var C=Xa();const ye=wd(C);var w0={exports:{}},Pu={},S0={exports:{}},E0={};var E_;function C5(){return E_||(E_=1,(function(t){function e(G,J){var W=G.length;G.push(J);e:for(;0<W;){var Ee=W-1>>>1,Pe=G[Ee];if(0<a(Pe,J))G[Ee]=J,G[W]=Pe,W=Ee;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var J=G[0],W=G.pop();if(W!==J){G[0]=W;e:for(var Ee=0,Pe=G.length,$=Pe>>>1;Ee<$;){var X=2*(Ee+1)-1,oe=G[X],fe=X+1,Ce=G[fe];if(0>a(oe,W))fe<Pe&&0>a(Ce,oe)?(G[Ee]=Ce,G[fe]=W,Ee=fe):(G[Ee]=oe,G[X]=W,Ee=X);else if(fe<Pe&&0>a(Ce,W))G[Ee]=Ce,G[fe]=W,Ee=fe;else break e}}return J}function a(G,J){var W=G.sortIndex-J.sortIndex;return W!==0?W:G.id-J.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var m=[],p=[],y=1,b=null,x=3,k=!1,j=!1,R=!1,N=!1,U=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function O(G){for(var J=n(p);J!==null;){if(J.callback===null)r(p);else if(J.startTime<=G)r(p),J.sortIndex=J.expirationTime,e(m,J);else break;J=n(p)}}function B(G){if(R=!1,O(G),!j)if(n(m)!==null)j=!0,H||(H=!0,z());else{var J=n(p);J!==null&&ae(B,J.startTime-G)}}var H=!1,w=-1,E=5,A=-1;function P(){return N?!0:!(t.unstable_now()-A<E)}function L(){if(N=!1,H){var G=t.unstable_now();A=G;var J=!0;try{e:{j=!1,R&&(R=!1,F(w),w=-1),k=!0;var W=x;try{t:{for(O(G),b=n(m);b!==null&&!(b.expirationTime>G&&P());){var Ee=b.callback;if(typeof Ee=="function"){b.callback=null,x=b.priorityLevel;var Pe=Ee(b.expirationTime<=G);if(G=t.unstable_now(),typeof Pe=="function"){b.callback=Pe,O(G),J=!0;break t}b===n(m)&&r(m),O(G)}else r(m);b=n(m)}if(b!==null)J=!0;else{var $=n(p);$!==null&&ae(B,$.startTime-G),J=!1}}break e}finally{b=null,x=W,k=!1}J=void 0}}finally{J?z():H=!1}}}var z;if(typeof I=="function")z=function(){I(L)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,se=M.port2;M.port1.onmessage=L,z=function(){se.postMessage(null)}}else z=function(){U(L,0)};function ae(G,J){w=U(function(){G(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(G){switch(x){case 1:case 2:case 3:var J=3;break;default:J=x}var W=x;x=J;try{return G()}finally{x=W}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function(G,J){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var W=x;x=G;try{return J()}finally{x=W}},t.unstable_scheduleCallback=function(G,J,W){var Ee=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Ee+W:Ee):W=Ee,G){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=W+Pe,G={id:y++,callback:J,priorityLevel:G,startTime:W,expirationTime:Pe,sortIndex:-1},W>Ee?(G.sortIndex=W,e(p,G),n(m)===null&&G===n(p)&&(R?(F(w),w=-1):R=!0,ae(B,W-Ee))):(G.sortIndex=Pe,e(m,G),j||k||(j=!0,H||(H=!0,z()))),G},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(G){var J=x;return function(){var W=x;x=J;try{return G.apply(this,arguments)}finally{x=W}}}})(E0)),E0}var C_;function T5(){return C_||(C_=1,S0.exports=C5()),S0.exports}var C0={exports:{}},or={};var T_;function k5(){if(T_)return or;T_=1;var t=Xa();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(m,p,y){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:m,containerInfo:p,implementation:y}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return or.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,or.createPortal=function(m,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return o(m,p,null,y)},or.flushSync=function(m){var p=u.T,y=r.p;try{if(u.T=null,r.p=2,m)return m()}finally{u.T=p,r.p=y,r.d.f()}},or.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(m,p))},or.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},or.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var y=p.as,b=h(y,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,k=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?r.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:x,fetchPriority:k}):y==="script"&&r.d.X(m,{crossOrigin:b,integrity:x,fetchPriority:k,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},or.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=h(p.as,p.crossOrigin);r.d.M(m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(m)},or.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,b=h(y,p.crossOrigin);r.d.L(m,y,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},or.preloadModule=function(m,p){if(typeof m=="string")if(p){var y=h(p.as,p.crossOrigin);r.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(m)},or.requestFormReset=function(m){r.d.r(m)},or.unstable_batchedUpdates=function(m,p){return m(p)},or.useFormState=function(m,p,y){return u.H.useFormState(m,p,y)},or.useFormStatus=function(){return u.H.useHostTransitionStatus()},or.version="19.2.3",or}var k_;function dy(){if(k_)return C0.exports;k_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),C0.exports=k5(),C0.exports}var N_;function N5(){if(N_)return Pu;N_=1;var t=T5(),e=Xa(),n=dy();function r(s){var i="https://react.dev/errors/"+s;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var i=s,l=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(l=i.return),s=i.return;while(s)}return i.tag===3?l:null}function u(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function h(s){if(s.tag===31){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function m(s){if(o(s)!==s)throw Error(r(188))}function p(s){var i=s.alternate;if(!i){if(i=o(s),i===null)throw Error(r(188));return i!==s?null:s}for(var l=s,d=i;;){var g=l.return;if(g===null)break;var v=g.alternate;if(v===null){if(d=g.return,d!==null){l=d;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===l)return m(g),s;if(v===d)return m(g),i;v=v.sibling}throw Error(r(188))}if(l.return!==d.return)l=g,d=v;else{for(var S=!1,D=g.child;D;){if(D===l){S=!0,l=g,d=v;break}if(D===d){S=!0,d=g,l=v;break}D=D.sibling}if(!S){for(D=v.child;D;){if(D===l){S=!0,l=v,d=g;break}if(D===d){S=!0,d=v,l=g;break}D=D.sibling}if(!S)throw Error(r(189))}}if(l.alternate!==d)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?s:i}function y(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s;for(s=s.child;s!==null;){if(i=y(s),i!==null)return i;s=s.sibling}return null}var b=Object.assign,x=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),I=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function z(s){return s===null||typeof s!="object"?null:(s=L&&s[L]||s["@@iterator"],typeof s=="function"?s:null)}var M=Symbol.for("react.client.reference");function se(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===M?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case R:return"Fragment";case U:return"Profiler";case N:return"StrictMode";case B:return"Suspense";case H:return"SuspenseList";case A:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case j:return"Portal";case I:return s.displayName||"Context";case F:return(s._context.displayName||"Context")+".Consumer";case O:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case w:return i=s.displayName||null,i!==null?i:se(s.type)||"Memo";case E:i=s._payload,s=s._init;try{return se(s(i))}catch{}}return null}var ae=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},Ee=[],Pe=-1;function $(s){return{current:s}}function X(s){0>Pe||(s.current=Ee[Pe],Ee[Pe]=null,Pe--)}function oe(s,i){Pe++,Ee[Pe]=s.current,s.current=i}var fe=$(null),Ce=$(null),Ue=$(null),re=$(null);function Le(s,i){switch(oe(Ue,i),oe(Ce,s),oe(fe,null),i.nodeType){case 9:case 11:s=(s=i.documentElement)&&(s=s.namespaceURI)?H2(s):0;break;default:if(s=i.tagName,i=i.namespaceURI)i=H2(i),s=$2(i,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}X(fe),oe(fe,s)}function Re(){X(fe),X(Ce),X(Ue)}function We(s){s.memoizedState!==null&&oe(re,s);var i=fe.current,l=$2(i,s.type);i!==l&&(oe(Ce,s),oe(fe,l))}function ke(s){Ce.current===s&&(X(fe),X(Ce)),re.current===s&&(X(re),Ru._currentValue=W)}var he,ee;function qe(s){if(he===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);he=i&&i[1]||"",ee=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+he+s+ee}var ve=!1;function Oe(s,i){if(!s||ve)return"";ve=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(i){var xe=function(){throw Error()};if(Object.defineProperty(xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xe,[])}catch(ce){var ie=ce}Reflect.construct(s,[],xe)}else{try{xe.call()}catch(ce){ie=ce}s.call(xe.prototype)}}else{try{throw Error()}catch(ce){ie=ce}(xe=s())&&typeof xe.catch=="function"&&xe.catch(function(){})}}catch(ce){if(ce&&ie&&typeof ce.stack=="string")return[ce.stack,ie.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=d.DetermineComponentFrameRoot(),S=v[0],D=v[1];if(S&&D){var q=S.split(`
`),ne=D.split(`
`);for(g=d=0;d<q.length&&!q[d].includes("DetermineComponentFrameRoot");)d++;for(;g<ne.length&&!ne[g].includes("DetermineComponentFrameRoot");)g++;if(d===q.length||g===ne.length)for(d=q.length-1,g=ne.length-1;1<=d&&0<=g&&q[d]!==ne[g];)g--;for(;1<=d&&0<=g;d--,g--)if(q[d]!==ne[g]){if(d!==1||g!==1)do if(d--,g--,0>g||q[d]!==ne[g]){var ge=`
`+q[d].replace(" at new "," at ");return s.displayName&&ge.includes("<anonymous>")&&(ge=ge.replace("<anonymous>",s.displayName)),ge}while(1<=d&&0<=g);break}}}finally{ve=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?qe(l):""}function Me(s,i){switch(s.tag){case 26:case 27:case 5:return qe(s.type);case 16:return qe("Lazy");case 13:return s.child!==i&&i!==null?qe("Suspense Fallback"):qe("Suspense");case 19:return qe("SuspenseList");case 0:case 15:return Oe(s.type,!1);case 11:return Oe(s.type.render,!1);case 1:return Oe(s.type,!0);case 31:return qe("Activity");default:return""}}function K(s){try{var i="",l=null;do i+=Me(s,l),l=s,s=s.return;while(s);return i}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var ue=Object.prototype.hasOwnProperty,je=t.unstable_scheduleCallback,me=t.unstable_cancelCallback,Ne=t.unstable_shouldYield,_e=t.unstable_requestPaint,Ie=t.unstable_now,st=t.unstable_getCurrentPriorityLevel,Pt=t.unstable_ImmediatePriority,$n=t.unstable_UserBlockingPriority,Se=t.unstable_NormalPriority,Fe=t.unstable_LowPriority,lt=t.unstable_IdlePriority,St=t.log,Vt=t.unstable_setDisableYieldValue,Tt=null,Ze=null;function Gt(s){if(typeof St=="function"&&Vt(s),Ze&&typeof Ze.setStrictMode=="function")try{Ze.setStrictMode(Tt,s)}catch{}}var nn=Math.clz32?Math.clz32:Je,Be=Math.log,Te=Math.LN2;function Je(s){return s>>>=0,s===0?32:31-(Be(s)/Te|0)|0}var et=256,gt=262144,dt=4194304;function kt(s){var i=s&42;if(i!==0)return i;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ft(s,i,l){var d=s.pendingLanes;if(d===0)return 0;var g=0,v=s.suspendedLanes,S=s.pingedLanes;s=s.warmLanes;var D=d&134217727;return D!==0?(d=D&~v,d!==0?g=kt(d):(S&=D,S!==0?g=kt(S):l||(l=D&~s,l!==0&&(g=kt(l))))):(D=d&~v,D!==0?g=kt(D):S!==0?g=kt(S):l||(l=d&~s,l!==0&&(g=kt(l)))),g===0?0:i!==0&&i!==g&&(i&v)===0&&(v=g&-g,l=i&-i,v>=l||v===32&&(l&4194048)!==0)?i:g}function xt(s,i){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&i)===0}function on(s,i){switch(s){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zn(){var s=dt;return dt<<=1,(dt&62914560)===0&&(dt=4194304),s}function He(s){for(var i=[],l=0;31>l;l++)i.push(s);return i}function vt(s,i){s.pendingLanes|=i,i!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Ht(s,i,l,d,g,v){var S=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var D=s.entanglements,q=s.expirationTimes,ne=s.hiddenUpdates;for(l=S&~l;0<l;){var ge=31-nn(l),xe=1<<ge;D[ge]=0,q[ge]=-1;var ie=ne[ge];if(ie!==null)for(ne[ge]=null,ge=0;ge<ie.length;ge++){var ce=ie[ge];ce!==null&&(ce.lane&=-536870913)}l&=~xe}d!==0&&Xn(s,d,0),v!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=v&~(S&~i))}function Xn(s,i,l){s.pendingLanes|=i,s.suspendedLanes&=~i;var d=31-nn(i);s.entangledLanes|=i,s.entanglements[d]=s.entanglements[d]|1073741824|l&261930}function qi(s,i){var l=s.entangledLanes|=i;for(s=s.entanglements;l;){var d=31-nn(l),g=1<<d;g&i|s[d]&i&&(s[d]|=i),l&=~g}}function Oc(s,i){var l=i&-i;return l=(l&42)!==0?1:eo(l),(l&(s.suspendedLanes|i))!==0?0:l}function eo(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ui(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Bd(){var s=J.p;return s!==0?s:(s=window.event,s===void 0?32:f_(s.type))}function us(s,i){var l=J.p;try{return J.p=s,i()}finally{J.p=l}}var ds=Math.random().toString(36).slice(2),Cn="__reactFiber$"+ds,qn="__reactProps$"+ds,ks="__reactContainer$"+ds,nl="__reactEvents$"+ds,Tp="__reactListeners$"+ds,Fd="__reactHandles$"+ds,Hd="__reactResources$"+ds,Ns="__reactMarker$"+ds;function rl(s){delete s[Cn],delete s[qn],delete s[nl],delete s[Tp],delete s[Fd]}function As(s){var i=s[Cn];if(i)return i;for(var l=s.parentNode;l;){if(i=l[ks]||l[Cn]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(s=W2(s);s!==null;){if(l=s[Cn])return l;s=W2(s)}return i}s=l,l=s.parentNode}return null}function Qr(s){if(s=s[Cn]||s[ks]){var i=s.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return s}return null}function Mr(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s.stateNode;throw Error(r(33))}function Rs(s){var i=s[Hd];return i||(i=s[Hd]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Tn(s){s[Ns]=!0}var Lc=new Set,Vc={};function js(s,i){Is(s,i),Is(s+"Capture",i)}function Is(s,i){for(Vc[s]=i,s=0;s<i.length;s++)Lc.add(i[s])}var zc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Uc={},Bc={};function $d(s){return ue.call(Bc,s)?!0:ue.call(Uc,s)?!1:zc.test(s)?Bc[s]=!0:(Uc[s]=!0,!1)}function sl(s,i,l){if($d(i))if(l===null)s.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(i);return;case"boolean":var d=i.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){s.removeAttribute(i);return}}s.setAttribute(i,""+l)}}function Pr(s,i,l){if(l===null)s.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(i);return}s.setAttribute(i,""+l)}}function kn(s,i,l,d){if(d===null)s.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(i,l,""+d)}}function Gn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Gi(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Fc(s,i,l){var d=Object.getOwnPropertyDescriptor(s.constructor.prototype,i);if(!s.hasOwnProperty(i)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var g=d.get,v=d.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return g.call(this)},set:function(S){l=""+S,v.call(this,S)}}),Object.defineProperty(s,i,{enumerable:d.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function Qt(s){if(!s._valueTracker){var i=Gi(s)?"checked":"value";s._valueTracker=Fc(s,i,""+s[i])}}function to(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var l=i.getValue(),d="";return s&&(d=Gi(s)?s.checked?"true":"false":s.value),s=d,s!==l?(i.setValue(s),!0):!1}function Ds(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var no=/[\n"\\]/g;function wr(s){return s.replace(no,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function il(s,i,l,d,g,v,S,D){s.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?s.type=S:s.removeAttribute("type"),i!=null?S==="number"?(i===0&&s.value===""||s.value!=i)&&(s.value=""+Gn(i)):s.value!==""+Gn(i)&&(s.value=""+Gn(i)):S!=="submit"&&S!=="reset"||s.removeAttribute("value"),i!=null?Hc(s,S,Gn(i)):l!=null?Hc(s,S,Gn(l)):d!=null&&s.removeAttribute("value"),g==null&&v!=null&&(s.defaultChecked=!!v),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?s.name=""+Gn(D):s.removeAttribute("name")}function qd(s,i,l,d,g,v,S,D){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.type=v),i!=null||l!=null){if(!(v!=="submit"&&v!=="reset"||i!=null)){Qt(s);return}l=l!=null?""+Gn(l):"",i=i!=null?""+Gn(i):l,D||i===s.value||(s.value=i),s.defaultValue=i}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,s.checked=D?s.checked:!!d,s.defaultChecked=!!d,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(s.name=S),Qt(s)}function Hc(s,i,l){i==="number"&&Ds(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function Yi(s,i,l,d){if(s=s.options,i){i={};for(var g=0;g<l.length;g++)i["$"+l[g]]=!0;for(l=0;l<s.length;l++)g=i.hasOwnProperty("$"+s[l].value),s[l].selected!==g&&(s[l].selected=g),g&&d&&(s[l].defaultSelected=!0)}else{for(l=""+Gn(l),i=null,g=0;g<s.length;g++){if(s[g].value===l){s[g].selected=!0,d&&(s[g].defaultSelected=!0);return}i!==null||s[g].disabled||(i=s[g])}i!==null&&(i.selected=!0)}}function Gd(s,i,l){if(i!=null&&(i=""+Gn(i),i!==s.value&&(s.value=i),l==null)){s.defaultValue!==i&&(s.defaultValue=i);return}s.defaultValue=l!=null?""+Gn(l):""}function Ki(s,i,l,d){if(i==null){if(d!=null){if(l!=null)throw Error(r(92));if(ae(d)){if(1<d.length)throw Error(r(93));d=d[0]}l=d}l==null&&(l=""),i=l}l=Gn(i),s.defaultValue=l,d=s.textContent,d===l&&d!==""&&d!==null&&(s.value=d),Qt(s)}function Sr(s,i){if(i){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=i;return}}s.textContent=i}var Yd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $c(s,i,l){var d=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?s.setProperty(i,""):i==="float"?s.cssFloat="":s[i]="":d?s.setProperty(i,l):typeof l!="number"||l===0||Yd.has(i)?i==="float"?s.cssFloat=l:s[i]=(""+l).trim():s[i]=l+"px"}function qc(s,i,l){if(i!=null&&typeof i!="object")throw Error(r(62));if(s=s.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||i!=null&&i.hasOwnProperty(d)||(d.indexOf("--")===0?s.setProperty(d,""):d==="float"?s.cssFloat="":s[d]="");for(var g in i)d=i[g],i.hasOwnProperty(g)&&l[g]!==d&&$c(s,g,d)}else for(var v in i)i.hasOwnProperty(v)&&$c(s,v,i[v])}function al(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ol(s){return Qi.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function hs(){}var Gc=null;function Xr(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Xi=null,Ms=null;function ro(s){var i=Qr(s);if(i&&(s=i.stateNode)){var l=s[qn]||null;e:switch(s=i.stateNode,i.type){case"input":if(il(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+wr(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var d=l[i];if(d!==s&&d.form===s.form){var g=d[qn]||null;if(!g)throw Error(r(90));il(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(i=0;i<l.length;i++)d=l[i],d.form===s.form&&to(d)}break e;case"textarea":Gd(s,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&Yi(s,!!l.multiple,i,!1)}}}var ll=!1;function Wi(s,i,l){if(ll)return s(i,l);ll=!0;try{var d=s(i);return d}finally{if(ll=!1,(Xi!==null||Ms!==null)&&(Bh(),Xi&&(i=Xi,s=Ms,Ms=Xi=null,ro(i),s)))for(i=0;i<s.length;i++)ro(s[i])}}function fs(s,i){var l=s.stateNode;if(l===null)return null;var d=l[qn]||null;if(d===null)return null;l=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(r(231,i,typeof l));return l}var Wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),so=!1;if(Wr)try{var Jt={};Object.defineProperty(Jt,"passive",{get:function(){so=!0}}),window.addEventListener("test",Jt,Jt),window.removeEventListener("test",Jt,Jt)}catch{so=!1}var Ps=null,Yc=null,io=null;function Kc(){if(io)return io;var s,i=Yc,l=i.length,d,g="value"in Ps?Ps.value:Ps.textContent,v=g.length;for(s=0;s<l&&i[s]===g[s];s++);var S=l-s;for(d=1;d<=S&&i[l-d]===g[v-d];d++);return io=g.slice(s,1<d?1-d:void 0)}function ao(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function di(){return!0}function ms(){return!1}function Wn(s){function i(l,d,g,v,S){this._reactName=l,this._targetInst=g,this.type=d,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var D in s)s.hasOwnProperty(D)&&(l=s[D],this[D]=l?l(v):v[D]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?di:ms,this.isPropagationStopped=ms,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=di)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=di)},persist:function(){},isPersistent:di}),i}var hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Os=Wn(hi),Ji=b({},hi,{view:0,detail:0}),Qc=Wn(Ji),Zi,cl,Ls,ul=b({},Ji,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ea,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ls&&(Ls&&s.type==="mousemove"?(Zi=s.screenX-Ls.screenX,cl=s.screenY-Ls.screenY):cl=Zi=0,Ls=s),Zi)},movementY:function(s){return"movementY"in s?s.movementY:cl}}),Xc=Wn(ul),oo=b({},ul,{dataTransfer:0}),Qd=Wn(oo),Xd=b({},Ji,{relatedTarget:0}),lo=Wn(Xd),Wc=b({},hi,{animationName:0,elapsedTime:0,pseudoElement:0}),Wd=Wn(Wc),dl=b({},hi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Jd=Wn(dl),Zd=b({},hi,{data:0}),Vs=Wn(Zd),eh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},th={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rh(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=nh[s])?!!i[s]:!1}function ea(){return rh}var mr=b({},Ji,{key:function(s){if(s.key){var i=eh[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=ao(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?th[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ea,charCode:function(s){return s.type==="keypress"?ao(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ao(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),sh=Wn(mr),ih=b({},ul,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fi=Wn(ih),f=b({},Ji,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ea}),_=Wn(f),T=b({},hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),V=Wn(T),Z=b({},ul,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),le=Wn(Z),Ve=b({},hi,{newState:0,oldState:0}),yt=Wn(Ve),bn=[9,13,27,32],$t=Wr&&"CompositionEvent"in window,hn=null;Wr&&"documentMode"in document&&(hn=document.documentMode);var Jr=Wr&&"TextEvent"in window&&!hn,zs=Wr&&(!$t||hn&&8<hn&&11>=hn),ps=" ",gs=!1;function co(s,i){switch(s){case"keyup":return bn.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hl(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var fl=!1;function $6(s,i){switch(s){case"compositionend":return hl(i);case"keypress":return i.which!==32?null:(gs=!0,ps);case"textInput":return s=i.data,s===ps&&gs?null:s;default:return null}}function q6(s,i){if(fl)return s==="compositionend"||!$t&&co(s,i)?(s=Kc(),io=Yc=Ps=null,fl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return zs&&i.locale!=="ko"?null:i.data;default:return null}}var G6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eb(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!G6[s.type]:i==="textarea"}function tb(s,i,l,d){Xi?Ms?Ms.push(d):Ms=[d]:Xi=d,i=Kh(i,"onChange"),0<i.length&&(l=new Os("onChange","change",null,l,d),s.push({event:l,listeners:i}))}var Jc=null,Zc=null;function Y6(s){L2(s,0)}function ah(s){var i=Mr(s);if(to(i))return s}function nb(s,i){if(s==="change")return i}var rb=!1;if(Wr){var kp;if(Wr){var Np="oninput"in document;if(!Np){var sb=document.createElement("div");sb.setAttribute("oninput","return;"),Np=typeof sb.oninput=="function"}kp=Np}else kp=!1;rb=kp&&(!document.documentMode||9<document.documentMode)}function ib(){Jc&&(Jc.detachEvent("onpropertychange",ab),Zc=Jc=null)}function ab(s){if(s.propertyName==="value"&&ah(Zc)){var i=[];tb(i,Zc,s,Xr(s)),Wi(Y6,i)}}function K6(s,i,l){s==="focusin"?(ib(),Jc=i,Zc=l,Jc.attachEvent("onpropertychange",ab)):s==="focusout"&&ib()}function Q6(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ah(Zc)}function X6(s,i){if(s==="click")return ah(i)}function W6(s,i){if(s==="input"||s==="change")return ah(i)}function J6(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var Or=typeof Object.is=="function"?Object.is:J6;function eu(s,i){if(Or(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var l=Object.keys(s),d=Object.keys(i);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var g=l[d];if(!ue.call(i,g)||!Or(s[g],i[g]))return!1}return!0}function ob(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function lb(s,i){var l=ob(s);s=0;for(var d;l;){if(l.nodeType===3){if(d=s+l.textContent.length,s<=i&&d>=i)return{node:l,offset:i-s};s=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=ob(l)}}function cb(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?cb(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function ub(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var i=Ds(s.document);i instanceof s.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)s=i.contentWindow;else break;i=Ds(s.document)}return i}function Ap(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}var Z6=Wr&&"documentMode"in document&&11>=document.documentMode,ml=null,Rp=null,tu=null,jp=!1;function db(s,i,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;jp||ml==null||ml!==Ds(d)||(d=ml,"selectionStart"in d&&Ap(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),tu&&eu(tu,d)||(tu=d,d=Kh(Rp,"onSelect"),0<d.length&&(i=new Os("onSelect","select",null,i,l),s.push({event:i,listeners:d}),i.target=ml)))}function uo(s,i){var l={};return l[s.toLowerCase()]=i.toLowerCase(),l["Webkit"+s]="webkit"+i,l["Moz"+s]="moz"+i,l}var pl={animationend:uo("Animation","AnimationEnd"),animationiteration:uo("Animation","AnimationIteration"),animationstart:uo("Animation","AnimationStart"),transitionrun:uo("Transition","TransitionRun"),transitionstart:uo("Transition","TransitionStart"),transitioncancel:uo("Transition","TransitionCancel"),transitionend:uo("Transition","TransitionEnd")},Ip={},hb={};Wr&&(hb=document.createElement("div").style,"AnimationEvent"in window||(delete pl.animationend.animation,delete pl.animationiteration.animation,delete pl.animationstart.animation),"TransitionEvent"in window||delete pl.transitionend.transition);function ho(s){if(Ip[s])return Ip[s];if(!pl[s])return s;var i=pl[s],l;for(l in i)if(i.hasOwnProperty(l)&&l in hb)return Ip[s]=i[l];return s}var fb=ho("animationend"),mb=ho("animationiteration"),pb=ho("animationstart"),eN=ho("transitionrun"),tN=ho("transitionstart"),nN=ho("transitioncancel"),gb=ho("transitionend"),vb=new Map,Dp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dp.push("scrollEnd");function vs(s,i){vb.set(s,i),js(i,[s])}var oh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Zr=[],gl=0,Mp=0;function lh(){for(var s=gl,i=Mp=gl=0;i<s;){var l=Zr[i];Zr[i++]=null;var d=Zr[i];Zr[i++]=null;var g=Zr[i];Zr[i++]=null;var v=Zr[i];if(Zr[i++]=null,d!==null&&g!==null){var S=d.pending;S===null?g.next=g:(g.next=S.next,S.next=g),d.pending=g}v!==0&&yb(l,g,v)}}function ch(s,i,l,d){Zr[gl++]=s,Zr[gl++]=i,Zr[gl++]=l,Zr[gl++]=d,Mp|=d,s.lanes|=d,s=s.alternate,s!==null&&(s.lanes|=d)}function Pp(s,i,l,d){return ch(s,i,l,d),uh(s)}function fo(s,i){return ch(s,null,null,i),uh(s)}function yb(s,i,l){s.lanes|=l;var d=s.alternate;d!==null&&(d.lanes|=l);for(var g=!1,v=s.return;v!==null;)v.childLanes|=l,d=v.alternate,d!==null&&(d.childLanes|=l),v.tag===22&&(s=v.stateNode,s===null||s._visibility&1||(g=!0)),s=v,v=v.return;return s.tag===3?(v=s.stateNode,g&&i!==null&&(g=31-nn(l),s=v.hiddenUpdates,d=s[g],d===null?s[g]=[i]:d.push(i),i.lane=l|536870912),v):null}function uh(s){if(50<Su)throw Su=0,$g=null,Error(r(185));for(var i=s.return;i!==null;)s=i,i=s.return;return s.tag===3?s.stateNode:null}var vl={};function rN(s,i,l,d){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lr(s,i,l,d){return new rN(s,i,l,d)}function Op(s){return s=s.prototype,!(!s||!s.isReactComponent)}function mi(s,i){var l=s.alternate;return l===null?(l=Lr(s.tag,i,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=i,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,i=s.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function bb(s,i){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,i=l.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s}function dh(s,i,l,d,g,v){var S=0;if(d=s,typeof s=="function")Op(s)&&(S=1);else if(typeof s=="string")S=l5(s,l,fe.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case A:return s=Lr(31,l,i,g),s.elementType=A,s.lanes=v,s;case R:return mo(l.children,g,v,i);case N:S=8,g|=24;break;case U:return s=Lr(12,l,i,g|2),s.elementType=U,s.lanes=v,s;case B:return s=Lr(13,l,i,g),s.elementType=B,s.lanes=v,s;case H:return s=Lr(19,l,i,g),s.elementType=H,s.lanes=v,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case I:S=10;break e;case F:S=9;break e;case O:S=11;break e;case w:S=14;break e;case E:S=16,d=null;break e}S=29,l=Error(r(130,s===null?"null":typeof s,"")),d=null}return i=Lr(S,l,i,g),i.elementType=s,i.type=d,i.lanes=v,i}function mo(s,i,l,d){return s=Lr(7,s,d,i),s.lanes=l,s}function Lp(s,i,l){return s=Lr(6,s,null,i),s.lanes=l,s}function xb(s){var i=Lr(18,null,null,0);return i.stateNode=s,i}function Vp(s,i,l){return i=Lr(4,s.children!==null?s.children:[],s.key,i),i.lanes=l,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}var _b=new WeakMap;function es(s,i){if(typeof s=="object"&&s!==null){var l=_b.get(s);return l!==void 0?l:(i={value:s,source:i,stack:K(i)},_b.set(s,i),i)}return{value:s,source:i,stack:K(i)}}var yl=[],bl=0,hh=null,nu=0,ts=[],ns=0,ta=null,Us=1,Bs="";function pi(s,i){yl[bl++]=nu,yl[bl++]=hh,hh=s,nu=i}function wb(s,i,l){ts[ns++]=Us,ts[ns++]=Bs,ts[ns++]=ta,ta=s;var d=Us;s=Bs;var g=32-nn(d)-1;d&=~(1<<g),l+=1;var v=32-nn(i)+g;if(30<v){var S=g-g%5;v=(d&(1<<S)-1).toString(32),d>>=S,g-=S,Us=1<<32-nn(i)+g|l<<g|d,Bs=v+s}else Us=1<<v|l<<g|d,Bs=s}function zp(s){s.return!==null&&(pi(s,1),wb(s,1,0))}function Up(s){for(;s===hh;)hh=yl[--bl],yl[bl]=null,nu=yl[--bl],yl[bl]=null;for(;s===ta;)ta=ts[--ns],ts[ns]=null,Bs=ts[--ns],ts[ns]=null,Us=ts[--ns],ts[ns]=null}function Sb(s,i){ts[ns++]=Us,ts[ns++]=Bs,ts[ns++]=ta,Us=i.id,Bs=i.overflow,ta=s}var Jn=null,ln=null,Ot=!1,na=null,rs=!1,Bp=Error(r(519));function ra(s){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ru(es(i,s)),Bp}function Eb(s){var i=s.stateNode,l=s.type,d=s.memoizedProps;switch(i[Cn]=s,i[qn]=d,l){case"dialog":At("cancel",i),At("close",i);break;case"iframe":case"object":case"embed":At("load",i);break;case"video":case"audio":for(l=0;l<Cu.length;l++)At(Cu[l],i);break;case"source":At("error",i);break;case"img":case"image":case"link":At("error",i),At("load",i);break;case"details":At("toggle",i);break;case"input":At("invalid",i),qd(i,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":At("invalid",i);break;case"textarea":At("invalid",i),Ki(i,d.value,d.defaultValue,d.children)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||d.suppressHydrationWarning===!0||B2(i.textContent,l)?(d.popover!=null&&(At("beforetoggle",i),At("toggle",i)),d.onScroll!=null&&At("scroll",i),d.onScrollEnd!=null&&At("scrollend",i),d.onClick!=null&&(i.onclick=hs),i=!0):i=!1,i||ra(s,!0)}function Cb(s){for(Jn=s.return;Jn;)switch(Jn.tag){case 5:case 31:case 13:rs=!1;return;case 27:case 3:rs=!0;return;default:Jn=Jn.return}}function xl(s){if(s!==Jn)return!1;if(!Ot)return Cb(s),Ot=!0,!1;var i=s.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||i0(s.type,s.memoizedProps)),l=!l),l&&ln&&ra(s),Cb(s),i===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));ln=X2(s)}else if(i===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));ln=X2(s)}else i===27?(i=ln,va(s.type)?(s=u0,u0=null,ln=s):ln=i):ln=Jn?is(s.stateNode.nextSibling):null;return!0}function po(){ln=Jn=null,Ot=!1}function Fp(){var s=na;return s!==null&&(kr===null?kr=s:kr.push.apply(kr,s),na=null),s}function ru(s){na===null?na=[s]:na.push(s)}var Hp=$(null),go=null,gi=null;function sa(s,i,l){oe(Hp,i._currentValue),i._currentValue=l}function vi(s){s._currentValue=Hp.current,X(Hp)}function $p(s,i,l){for(;s!==null;){var d=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),s===l)break;s=s.return}}function qp(s,i,l,d){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var v=g.dependencies;if(v!==null){var S=g.child;v=v.firstContext;e:for(;v!==null;){var D=v;v=g;for(var q=0;q<i.length;q++)if(D.context===i[q]){v.lanes|=l,D=v.alternate,D!==null&&(D.lanes|=l),$p(v.return,l,s),d||(S=null);break e}v=D.next}}else if(g.tag===18){if(S=g.return,S===null)throw Error(r(341));S.lanes|=l,v=S.alternate,v!==null&&(v.lanes|=l),$p(S,l,s),S=null}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===s){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}}function _l(s,i,l,d){s=null;for(var g=i,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var S=g.alternate;if(S===null)throw Error(r(387));if(S=S.memoizedProps,S!==null){var D=g.type;Or(g.pendingProps.value,S.value)||(s!==null?s.push(D):s=[D])}}else if(g===re.current){if(S=g.alternate,S===null)throw Error(r(387));S.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(Ru):s=[Ru])}g=g.return}s!==null&&qp(i,s,l,d),i.flags|=262144}function fh(s){for(s=s.firstContext;s!==null;){if(!Or(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function vo(s){go=s,gi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Zn(s){return Tb(go,s)}function mh(s,i){return go===null&&vo(s),Tb(s,i)}function Tb(s,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},gi===null){if(s===null)throw Error(r(308));gi=i,s.dependencies={lanes:0,firstContext:i},s.flags|=524288}else gi=gi.next=i;return l}var sN=typeof AbortController<"u"?AbortController:function(){var s=[],i=this.signal={aborted:!1,addEventListener:function(l,d){s.push(d)}};this.abort=function(){i.aborted=!0,s.forEach(function(l){return l()})}},iN=t.unstable_scheduleCallback,aN=t.unstable_NormalPriority,Nn={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gp(){return{controller:new sN,data:new Map,refCount:0}}function su(s){s.refCount--,s.refCount===0&&iN(aN,function(){s.controller.abort()})}var iu=null,Yp=0,wl=0,Sl=null;function oN(s,i){if(iu===null){var l=iu=[];Yp=0,wl=Xg(),Sl={status:"pending",value:void 0,then:function(d){l.push(d)}}}return Yp++,i.then(kb,kb),i}function kb(){if(--Yp===0&&iu!==null){Sl!==null&&(Sl.status="fulfilled");var s=iu;iu=null,wl=0,Sl=null;for(var i=0;i<s.length;i++)(0,s[i])()}}function lN(s,i){var l=[],d={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return s.then(function(){d.status="fulfilled",d.value=i;for(var g=0;g<l.length;g++)(0,l[g])(i)},function(g){for(d.status="rejected",d.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),d}var Nb=G.S;G.S=function(s,i){d2=Ie(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&oN(s,i),Nb!==null&&Nb(s,i)};var yo=$(null);function Kp(){var s=yo.current;return s!==null?s:rn.pooledCache}function ph(s,i){i===null?oe(yo,yo.current):oe(yo,i.pool)}function Ab(){var s=Kp();return s===null?null:{parent:Nn._currentValue,pool:s}}var El=Error(r(460)),Qp=Error(r(474)),gh=Error(r(542)),vh={then:function(){}};function Rb(s){return s=s.status,s==="fulfilled"||s==="rejected"}function jb(s,i,l){switch(l=s[l],l===void 0?s.push(i):l!==i&&(i.then(hs,hs),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,Db(s),s;default:if(typeof i.status=="string")i.then(hs,hs);else{if(s=rn,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=i,s.status="pending",s.then(function(d){if(i.status==="pending"){var g=i;g.status="fulfilled",g.value=d}},function(d){if(i.status==="pending"){var g=i;g.status="rejected",g.reason=d}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,Db(s),s}throw xo=i,El}}function bo(s){try{var i=s._init;return i(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(xo=l,El):l}}var xo=null;function Ib(){if(xo===null)throw Error(r(459));var s=xo;return xo=null,s}function Db(s){if(s===El||s===gh)throw Error(r(483))}var Cl=null,au=0;function yh(s){var i=au;return au+=1,Cl===null&&(Cl=[]),jb(Cl,s,i)}function ou(s,i){i=i.props.ref,s.ref=i!==void 0?i:null}function bh(s,i){throw i.$$typeof===x?Error(r(525)):(s=Object.prototype.toString.call(i),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s)))}function Mb(s){function i(Q,Y){if(s){var te=Q.deletions;te===null?(Q.deletions=[Y],Q.flags|=16):te.push(Y)}}function l(Q,Y){if(!s)return null;for(;Y!==null;)i(Q,Y),Y=Y.sibling;return null}function d(Q){for(var Y=new Map;Q!==null;)Q.key!==null?Y.set(Q.key,Q):Y.set(Q.index,Q),Q=Q.sibling;return Y}function g(Q,Y){return Q=mi(Q,Y),Q.index=0,Q.sibling=null,Q}function v(Q,Y,te){return Q.index=te,s?(te=Q.alternate,te!==null?(te=te.index,te<Y?(Q.flags|=67108866,Y):te):(Q.flags|=67108866,Y)):(Q.flags|=1048576,Y)}function S(Q){return s&&Q.alternate===null&&(Q.flags|=67108866),Q}function D(Q,Y,te,be){return Y===null||Y.tag!==6?(Y=Lp(te,Q.mode,be),Y.return=Q,Y):(Y=g(Y,te),Y.return=Q,Y)}function q(Q,Y,te,be){var nt=te.type;return nt===R?ge(Q,Y,te.props.children,be,te.key):Y!==null&&(Y.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===E&&bo(nt)===Y.type)?(Y=g(Y,te.props),ou(Y,te),Y.return=Q,Y):(Y=dh(te.type,te.key,te.props,null,Q.mode,be),ou(Y,te),Y.return=Q,Y)}function ne(Q,Y,te,be){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==te.containerInfo||Y.stateNode.implementation!==te.implementation?(Y=Vp(te,Q.mode,be),Y.return=Q,Y):(Y=g(Y,te.children||[]),Y.return=Q,Y)}function ge(Q,Y,te,be,nt){return Y===null||Y.tag!==7?(Y=mo(te,Q.mode,be,nt),Y.return=Q,Y):(Y=g(Y,te),Y.return=Q,Y)}function xe(Q,Y,te){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=Lp(""+Y,Q.mode,te),Y.return=Q,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case k:return te=dh(Y.type,Y.key,Y.props,null,Q.mode,te),ou(te,Y),te.return=Q,te;case j:return Y=Vp(Y,Q.mode,te),Y.return=Q,Y;case E:return Y=bo(Y),xe(Q,Y,te)}if(ae(Y)||z(Y))return Y=mo(Y,Q.mode,te,null),Y.return=Q,Y;if(typeof Y.then=="function")return xe(Q,yh(Y),te);if(Y.$$typeof===I)return xe(Q,mh(Q,Y),te);bh(Q,Y)}return null}function ie(Q,Y,te,be){var nt=Y!==null?Y.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return nt!==null?null:D(Q,Y,""+te,be);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case k:return te.key===nt?q(Q,Y,te,be):null;case j:return te.key===nt?ne(Q,Y,te,be):null;case E:return te=bo(te),ie(Q,Y,te,be)}if(ae(te)||z(te))return nt!==null?null:ge(Q,Y,te,be,null);if(typeof te.then=="function")return ie(Q,Y,yh(te),be);if(te.$$typeof===I)return ie(Q,Y,mh(Q,te),be);bh(Q,te)}return null}function ce(Q,Y,te,be,nt){if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return Q=Q.get(te)||null,D(Y,Q,""+be,nt);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case k:return Q=Q.get(be.key===null?te:be.key)||null,q(Y,Q,be,nt);case j:return Q=Q.get(be.key===null?te:be.key)||null,ne(Y,Q,be,nt);case E:return be=bo(be),ce(Q,Y,te,be,nt)}if(ae(be)||z(be))return Q=Q.get(te)||null,ge(Y,Q,be,nt,null);if(typeof be.then=="function")return ce(Q,Y,te,yh(be),nt);if(be.$$typeof===I)return ce(Q,Y,te,mh(Y,be),nt);bh(Y,be)}return null}function Ge(Q,Y,te,be){for(var nt=null,zt=null,Xe=Y,_t=Y=0,jt=null;Xe!==null&&_t<te.length;_t++){Xe.index>_t?(jt=Xe,Xe=null):jt=Xe.sibling;var Ut=ie(Q,Xe,te[_t],be);if(Ut===null){Xe===null&&(Xe=jt);break}s&&Xe&&Ut.alternate===null&&i(Q,Xe),Y=v(Ut,Y,_t),zt===null?nt=Ut:zt.sibling=Ut,zt=Ut,Xe=jt}if(_t===te.length)return l(Q,Xe),Ot&&pi(Q,_t),nt;if(Xe===null){for(;_t<te.length;_t++)Xe=xe(Q,te[_t],be),Xe!==null&&(Y=v(Xe,Y,_t),zt===null?nt=Xe:zt.sibling=Xe,zt=Xe);return Ot&&pi(Q,_t),nt}for(Xe=d(Xe);_t<te.length;_t++)jt=ce(Xe,Q,_t,te[_t],be),jt!==null&&(s&&jt.alternate!==null&&Xe.delete(jt.key===null?_t:jt.key),Y=v(jt,Y,_t),zt===null?nt=jt:zt.sibling=jt,zt=jt);return s&&Xe.forEach(function(wa){return i(Q,wa)}),Ot&&pi(Q,_t),nt}function at(Q,Y,te,be){if(te==null)throw Error(r(151));for(var nt=null,zt=null,Xe=Y,_t=Y=0,jt=null,Ut=te.next();Xe!==null&&!Ut.done;_t++,Ut=te.next()){Xe.index>_t?(jt=Xe,Xe=null):jt=Xe.sibling;var wa=ie(Q,Xe,Ut.value,be);if(wa===null){Xe===null&&(Xe=jt);break}s&&Xe&&wa.alternate===null&&i(Q,Xe),Y=v(wa,Y,_t),zt===null?nt=wa:zt.sibling=wa,zt=wa,Xe=jt}if(Ut.done)return l(Q,Xe),Ot&&pi(Q,_t),nt;if(Xe===null){for(;!Ut.done;_t++,Ut=te.next())Ut=xe(Q,Ut.value,be),Ut!==null&&(Y=v(Ut,Y,_t),zt===null?nt=Ut:zt.sibling=Ut,zt=Ut);return Ot&&pi(Q,_t),nt}for(Xe=d(Xe);!Ut.done;_t++,Ut=te.next())Ut=ce(Xe,Q,_t,Ut.value,be),Ut!==null&&(s&&Ut.alternate!==null&&Xe.delete(Ut.key===null?_t:Ut.key),Y=v(Ut,Y,_t),zt===null?nt=Ut:zt.sibling=Ut,zt=Ut);return s&&Xe.forEach(function(b5){return i(Q,b5)}),Ot&&pi(Q,_t),nt}function tn(Q,Y,te,be){if(typeof te=="object"&&te!==null&&te.type===R&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case k:e:{for(var nt=te.key;Y!==null;){if(Y.key===nt){if(nt=te.type,nt===R){if(Y.tag===7){l(Q,Y.sibling),be=g(Y,te.props.children),be.return=Q,Q=be;break e}}else if(Y.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===E&&bo(nt)===Y.type){l(Q,Y.sibling),be=g(Y,te.props),ou(be,te),be.return=Q,Q=be;break e}l(Q,Y);break}else i(Q,Y);Y=Y.sibling}te.type===R?(be=mo(te.props.children,Q.mode,be,te.key),be.return=Q,Q=be):(be=dh(te.type,te.key,te.props,null,Q.mode,be),ou(be,te),be.return=Q,Q=be)}return S(Q);case j:e:{for(nt=te.key;Y!==null;){if(Y.key===nt)if(Y.tag===4&&Y.stateNode.containerInfo===te.containerInfo&&Y.stateNode.implementation===te.implementation){l(Q,Y.sibling),be=g(Y,te.children||[]),be.return=Q,Q=be;break e}else{l(Q,Y);break}else i(Q,Y);Y=Y.sibling}be=Vp(te,Q.mode,be),be.return=Q,Q=be}return S(Q);case E:return te=bo(te),tn(Q,Y,te,be)}if(ae(te))return Ge(Q,Y,te,be);if(z(te)){if(nt=z(te),typeof nt!="function")throw Error(r(150));return te=nt.call(te),at(Q,Y,te,be)}if(typeof te.then=="function")return tn(Q,Y,yh(te),be);if(te.$$typeof===I)return tn(Q,Y,mh(Q,te),be);bh(Q,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,Y!==null&&Y.tag===6?(l(Q,Y.sibling),be=g(Y,te),be.return=Q,Q=be):(l(Q,Y),be=Lp(te,Q.mode,be),be.return=Q,Q=be),S(Q)):l(Q,Y)}return function(Q,Y,te,be){try{au=0;var nt=tn(Q,Y,te,be);return Cl=null,nt}catch(Xe){if(Xe===El||Xe===gh)throw Xe;var zt=Lr(29,Xe,null,Q.mode);return zt.lanes=be,zt.return=Q,zt}finally{}}}var _o=Mb(!0),Pb=Mb(!1),ia=!1;function Xp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wp(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function aa(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function oa(s,i,l){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(qt&2)!==0){var g=d.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),d.pending=i,i=uh(s),yb(s,null,l),i}return ch(s,d,i,l),uh(s)}function lu(s,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var d=i.lanes;d&=s.pendingLanes,l|=d,i.lanes=l,qi(s,l)}}function Jp(s,i){var l=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var g=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};v===null?g=v=S:v=v.next=S,l=l.next}while(l!==null);v===null?g=v=i:v=v.next=i}else g=v=i;l={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:d.shared,callbacks:d.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=i:s.next=i,l.lastBaseUpdate=i}var Zp=!1;function cu(){if(Zp){var s=Sl;if(s!==null)throw s}}function uu(s,i,l,d){Zp=!1;var g=s.updateQueue;ia=!1;var v=g.firstBaseUpdate,S=g.lastBaseUpdate,D=g.shared.pending;if(D!==null){g.shared.pending=null;var q=D,ne=q.next;q.next=null,S===null?v=ne:S.next=ne,S=q;var ge=s.alternate;ge!==null&&(ge=ge.updateQueue,D=ge.lastBaseUpdate,D!==S&&(D===null?ge.firstBaseUpdate=ne:D.next=ne,ge.lastBaseUpdate=q))}if(v!==null){var xe=g.baseState;S=0,ge=ne=q=null,D=v;do{var ie=D.lane&-536870913,ce=ie!==D.lane;if(ce?(Rt&ie)===ie:(d&ie)===ie){ie!==0&&ie===wl&&(Zp=!0),ge!==null&&(ge=ge.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var Ge=s,at=D;ie=i;var tn=l;switch(at.tag){case 1:if(Ge=at.payload,typeof Ge=="function"){xe=Ge.call(tn,xe,ie);break e}xe=Ge;break e;case 3:Ge.flags=Ge.flags&-65537|128;case 0:if(Ge=at.payload,ie=typeof Ge=="function"?Ge.call(tn,xe,ie):Ge,ie==null)break e;xe=b({},xe,ie);break e;case 2:ia=!0}}ie=D.callback,ie!==null&&(s.flags|=64,ce&&(s.flags|=8192),ce=g.callbacks,ce===null?g.callbacks=[ie]:ce.push(ie))}else ce={lane:ie,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ge===null?(ne=ge=ce,q=xe):ge=ge.next=ce,S|=ie;if(D=D.next,D===null){if(D=g.shared.pending,D===null)break;ce=D,D=ce.next,ce.next=null,g.lastBaseUpdate=ce,g.shared.pending=null}}while(!0);ge===null&&(q=xe),g.baseState=q,g.firstBaseUpdate=ne,g.lastBaseUpdate=ge,v===null&&(g.shared.lanes=0),ha|=S,s.lanes=S,s.memoizedState=xe}}function Ob(s,i){if(typeof s!="function")throw Error(r(191,s));s.call(i)}function Lb(s,i){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)Ob(l[s],i)}var Tl=$(null),xh=$(0);function Vb(s,i){s=Ti,oe(xh,s),oe(Tl,i),Ti=s|i.baseLanes}function eg(){oe(xh,Ti),oe(Tl,Tl.current)}function tg(){Ti=xh.current,X(Tl),X(xh)}var Vr=$(null),ss=null;function la(s){var i=s.alternate;oe(xn,xn.current&1),oe(Vr,s),ss===null&&(i===null||Tl.current!==null||i.memoizedState!==null)&&(ss=s)}function ng(s){oe(xn,xn.current),oe(Vr,s),ss===null&&(ss=s)}function zb(s){s.tag===22?(oe(xn,xn.current),oe(Vr,s),ss===null&&(ss=s)):ca()}function ca(){oe(xn,xn.current),oe(Vr,Vr.current)}function zr(s){X(Vr),ss===s&&(ss=null),X(xn)}var xn=$(0);function _h(s){for(var i=s;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l0(l)||c0(l)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var yi=0,bt=null,Zt=null,An=null,wh=!1,kl=!1,wo=!1,Sh=0,du=0,Nl=null,cN=0;function pn(){throw Error(r(321))}function rg(s,i){if(i===null)return!1;for(var l=0;l<i.length&&l<s.length;l++)if(!Or(s[l],i[l]))return!1;return!0}function sg(s,i,l,d,g,v){return yi=v,bt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,G.H=s===null||s.memoizedState===null?wx:bg,wo=!1,v=l(d,g),wo=!1,kl&&(v=Bb(i,l,d,g)),Ub(s),v}function Ub(s){G.H=mu;var i=Zt!==null&&Zt.next!==null;if(yi=0,An=Zt=bt=null,wh=!1,du=0,Nl=null,i)throw Error(r(300));s===null||Rn||(s=s.dependencies,s!==null&&fh(s)&&(Rn=!0))}function Bb(s,i,l,d){bt=s;var g=0;do{if(kl&&(Nl=null),du=0,kl=!1,25<=g)throw Error(r(301));if(g+=1,An=Zt=null,s.updateQueue!=null){var v=s.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}G.H=Sx,v=i(l,d)}while(kl);return v}function uN(){var s=G.H,i=s.useState()[0];return i=typeof i.then=="function"?hu(i):i,s=s.useState()[0],(Zt!==null?Zt.memoizedState:null)!==s&&(bt.flags|=1024),i}function ig(){var s=Sh!==0;return Sh=0,s}function ag(s,i,l){i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~l}function og(s){if(wh){for(s=s.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}wh=!1}yi=0,An=Zt=bt=null,kl=!1,du=Sh=0,Nl=null}function pr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return An===null?bt.memoizedState=An=s:An=An.next=s,An}function _n(){if(Zt===null){var s=bt.alternate;s=s!==null?s.memoizedState:null}else s=Zt.next;var i=An===null?bt.memoizedState:An.next;if(i!==null)An=i,Zt=s;else{if(s===null)throw bt.alternate===null?Error(r(467)):Error(r(310));Zt=s,s={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},An===null?bt.memoizedState=An=s:An=An.next=s}return An}function Eh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hu(s){var i=du;return du+=1,Nl===null&&(Nl=[]),s=jb(Nl,s,i),i=bt,(An===null?i.memoizedState:An.next)===null&&(i=i.alternate,G.H=i===null||i.memoizedState===null?wx:bg),s}function Ch(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return hu(s);if(s.$$typeof===I)return Zn(s)}throw Error(r(438,String(s)))}function lg(s){var i=null,l=bt.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var d=bt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(i={data:d.data.map(function(g){return g.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=Eh(),bt.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(s),d=0;d<s;d++)l[d]=P;return i.index++,l}function bi(s,i){return typeof i=="function"?i(s):i}function Th(s){var i=_n();return cg(i,Zt,s)}function cg(s,i,l){var d=s.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=l;var g=s.baseQueue,v=d.pending;if(v!==null){if(g!==null){var S=g.next;g.next=v.next,v.next=S}i.baseQueue=g=v,d.pending=null}if(v=s.baseState,g===null)s.memoizedState=v;else{i=g.next;var D=S=null,q=null,ne=i,ge=!1;do{var xe=ne.lane&-536870913;if(xe!==ne.lane?(Rt&xe)===xe:(yi&xe)===xe){var ie=ne.revertLane;if(ie===0)q!==null&&(q=q.next={lane:0,revertLane:0,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),xe===wl&&(ge=!0);else if((yi&ie)===ie){ne=ne.next,ie===wl&&(ge=!0);continue}else xe={lane:0,revertLane:ne.revertLane,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},q===null?(D=q=xe,S=v):q=q.next=xe,bt.lanes|=ie,ha|=ie;xe=ne.action,wo&&l(v,xe),v=ne.hasEagerState?ne.eagerState:l(v,xe)}else ie={lane:xe,revertLane:ne.revertLane,gesture:ne.gesture,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},q===null?(D=q=ie,S=v):q=q.next=ie,bt.lanes|=xe,ha|=xe;ne=ne.next}while(ne!==null&&ne!==i);if(q===null?S=v:q.next=D,!Or(v,s.memoizedState)&&(Rn=!0,ge&&(l=Sl,l!==null)))throw l;s.memoizedState=v,s.baseState=S,s.baseQueue=q,d.lastRenderedState=v}return g===null&&(d.lanes=0),[s.memoizedState,d.dispatch]}function ug(s){var i=_n(),l=i.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=s;var d=l.dispatch,g=l.pending,v=i.memoizedState;if(g!==null){l.pending=null;var S=g=g.next;do v=s(v,S.action),S=S.next;while(S!==g);Or(v,i.memoizedState)||(Rn=!0),i.memoizedState=v,i.baseQueue===null&&(i.baseState=v),l.lastRenderedState=v}return[v,d]}function Fb(s,i,l){var d=bt,g=_n(),v=Ot;if(v){if(l===void 0)throw Error(r(407));l=l()}else l=i();var S=!Or((Zt||g).memoizedState,l);if(S&&(g.memoizedState=l,Rn=!0),g=g.queue,fg(qb.bind(null,d,g,s),[s]),g.getSnapshot!==i||S||An!==null&&An.memoizedState.tag&1){if(d.flags|=2048,Al(9,{destroy:void 0},$b.bind(null,d,g,l,i),null),rn===null)throw Error(r(349));v||(yi&127)!==0||Hb(d,i,l)}return l}function Hb(s,i,l){s.flags|=16384,s={getSnapshot:i,value:l},i=bt.updateQueue,i===null?(i=Eh(),bt.updateQueue=i,i.stores=[s]):(l=i.stores,l===null?i.stores=[s]:l.push(s))}function $b(s,i,l,d){i.value=l,i.getSnapshot=d,Gb(i)&&Yb(s)}function qb(s,i,l){return l(function(){Gb(i)&&Yb(s)})}function Gb(s){var i=s.getSnapshot;s=s.value;try{var l=i();return!Or(s,l)}catch{return!0}}function Yb(s){var i=fo(s,2);i!==null&&Nr(i,s,2)}function dg(s){var i=pr();if(typeof s=="function"){var l=s;if(s=l(),wo){Gt(!0);try{l()}finally{Gt(!1)}}}return i.memoizedState=i.baseState=s,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:s},i}function Kb(s,i,l,d){return s.baseState=l,cg(s,Zt,typeof d=="function"?d:bi)}function dN(s,i,l,d,g){if(Ah(s))throw Error(r(485));if(s=i.action,s!==null){var v={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){v.listeners.push(S)}};G.T!==null?l(!0):v.isTransition=!1,d(v),l=i.pending,l===null?(v.next=i.pending=v,Qb(i,v)):(v.next=l.next,i.pending=l.next=v)}}function Qb(s,i){var l=i.action,d=i.payload,g=s.state;if(i.isTransition){var v=G.T,S={};G.T=S;try{var D=l(g,d),q=G.S;q!==null&&q(S,D),Xb(s,i,D)}catch(ne){hg(s,i,ne)}finally{v!==null&&S.types!==null&&(v.types=S.types),G.T=v}}else try{v=l(g,d),Xb(s,i,v)}catch(ne){hg(s,i,ne)}}function Xb(s,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){Wb(s,i,d)},function(d){return hg(s,i,d)}):Wb(s,i,l)}function Wb(s,i,l){i.status="fulfilled",i.value=l,Jb(i),s.state=l,i=s.pending,i!==null&&(l=i.next,l===i?s.pending=null:(l=l.next,i.next=l,Qb(s,l)))}function hg(s,i,l){var d=s.pending;if(s.pending=null,d!==null){d=d.next;do i.status="rejected",i.reason=l,Jb(i),i=i.next;while(i!==d)}s.action=null}function Jb(s){s=s.listeners;for(var i=0;i<s.length;i++)(0,s[i])()}function Zb(s,i){return i}function ex(s,i){if(Ot){var l=rn.formState;if(l!==null){e:{var d=bt;if(Ot){if(ln){t:{for(var g=ln,v=rs;g.nodeType!==8;){if(!v){g=null;break t}if(g=is(g.nextSibling),g===null){g=null;break t}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){ln=is(g.nextSibling),d=g.data==="F!";break e}}ra(d)}d=!1}d&&(i=l[0])}}return l=pr(),l.memoizedState=l.baseState=i,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zb,lastRenderedState:i},l.queue=d,l=bx.bind(null,bt,d),d.dispatch=l,d=dg(!1),v=yg.bind(null,bt,!1,d.queue),d=pr(),g={state:i,dispatch:null,action:s,pending:null},d.queue=g,l=dN.bind(null,bt,g,v,l),g.dispatch=l,d.memoizedState=s,[i,l,!1]}function tx(s){var i=_n();return nx(i,Zt,s)}function nx(s,i,l){if(i=cg(s,i,Zb)[0],s=Th(bi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var d=hu(i)}catch(S){throw S===El?gh:S}else d=i;i=_n();var g=i.queue,v=g.dispatch;return l!==i.memoizedState&&(bt.flags|=2048,Al(9,{destroy:void 0},hN.bind(null,g,l),null)),[d,v,s]}function hN(s,i){s.action=i}function rx(s){var i=_n(),l=Zt;if(l!==null)return nx(i,l,s);_n(),i=i.memoizedState,l=_n();var d=l.queue.dispatch;return l.memoizedState=s,[i,d,!1]}function Al(s,i,l,d){return s={tag:s,create:l,deps:d,inst:i,next:null},i=bt.updateQueue,i===null&&(i=Eh(),bt.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=s.next=s:(d=l.next,l.next=s,s.next=d,i.lastEffect=s),s}function sx(){return _n().memoizedState}function kh(s,i,l,d){var g=pr();bt.flags|=s,g.memoizedState=Al(1|i,{destroy:void 0},l,d===void 0?null:d)}function Nh(s,i,l,d){var g=_n();d=d===void 0?null:d;var v=g.memoizedState.inst;Zt!==null&&d!==null&&rg(d,Zt.memoizedState.deps)?g.memoizedState=Al(i,v,l,d):(bt.flags|=s,g.memoizedState=Al(1|i,v,l,d))}function ix(s,i){kh(8390656,8,s,i)}function fg(s,i){Nh(2048,8,s,i)}function fN(s){bt.flags|=4;var i=bt.updateQueue;if(i===null)i=Eh(),bt.updateQueue=i,i.events=[s];else{var l=i.events;l===null?i.events=[s]:l.push(s)}}function ax(s){var i=_n().memoizedState;return fN({ref:i,nextImpl:s}),function(){if((qt&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function ox(s,i){return Nh(4,2,s,i)}function lx(s,i){return Nh(4,4,s,i)}function cx(s,i){if(typeof i=="function"){s=s();var l=i(s);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function ux(s,i,l){l=l!=null?l.concat([s]):null,Nh(4,4,cx.bind(null,i,s),l)}function mg(){}function dx(s,i){var l=_n();i=i===void 0?null:i;var d=l.memoizedState;return i!==null&&rg(i,d[1])?d[0]:(l.memoizedState=[s,i],s)}function hx(s,i){var l=_n();i=i===void 0?null:i;var d=l.memoizedState;if(i!==null&&rg(i,d[1]))return d[0];if(d=s(),wo){Gt(!0);try{s()}finally{Gt(!1)}}return l.memoizedState=[d,i],d}function pg(s,i,l){return l===void 0||(yi&1073741824)!==0&&(Rt&261930)===0?s.memoizedState=i:(s.memoizedState=l,s=f2(),bt.lanes|=s,ha|=s,l)}function fx(s,i,l,d){return Or(l,i)?l:Tl.current!==null?(s=pg(s,l,d),Or(s,i)||(Rn=!0),s):(yi&42)===0||(yi&1073741824)!==0&&(Rt&261930)===0?(Rn=!0,s.memoizedState=l):(s=f2(),bt.lanes|=s,ha|=s,i)}function mx(s,i,l,d,g){var v=J.p;J.p=v!==0&&8>v?v:8;var S=G.T,D={};G.T=D,yg(s,!1,i,l);try{var q=g(),ne=G.S;if(ne!==null&&ne(D,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var ge=lN(q,d);fu(s,i,ge,Fr(s))}else fu(s,i,d,Fr(s))}catch(xe){fu(s,i,{then:function(){},status:"rejected",reason:xe},Fr())}finally{J.p=v,S!==null&&D.types!==null&&(S.types=D.types),G.T=S}}function mN(){}function gg(s,i,l,d){if(s.tag!==5)throw Error(r(476));var g=px(s).queue;mx(s,g,i,W,l===null?mN:function(){return gx(s),l(d)})}function px(s){var i=s.memoizedState;if(i!==null)return i;i={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:W},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:l},next:null},s.memoizedState=i,s=s.alternate,s!==null&&(s.memoizedState=i),i}function gx(s){var i=px(s);i.next===null&&(i=s.alternate.memoizedState),fu(s,i.next.queue,{},Fr())}function vg(){return Zn(Ru)}function vx(){return _n().memoizedState}function yx(){return _n().memoizedState}function pN(s){for(var i=s.return;i!==null;){switch(i.tag){case 24:case 3:var l=Fr();s=aa(l);var d=oa(i,s,l);d!==null&&(Nr(d,i,l),lu(d,i,l)),i={cache:Gp()},s.payload=i;return}i=i.return}}function gN(s,i,l){var d=Fr();l={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ah(s)?xx(i,l):(l=Pp(s,i,l,d),l!==null&&(Nr(l,s,d),_x(l,i,d)))}function bx(s,i,l){var d=Fr();fu(s,i,l,d)}function fu(s,i,l,d){var g={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ah(s))xx(i,g);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=i.lastRenderedReducer,v!==null))try{var S=i.lastRenderedState,D=v(S,l);if(g.hasEagerState=!0,g.eagerState=D,Or(D,S))return ch(s,i,g,0),rn===null&&lh(),!1}catch{}finally{}if(l=Pp(s,i,g,d),l!==null)return Nr(l,s,d),_x(l,i,d),!0}return!1}function yg(s,i,l,d){if(d={lane:2,revertLane:Xg(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Ah(s)){if(i)throw Error(r(479))}else i=Pp(s,l,d,2),i!==null&&Nr(i,s,2)}function Ah(s){var i=s.alternate;return s===bt||i!==null&&i===bt}function xx(s,i){kl=wh=!0;var l=s.pending;l===null?i.next=i:(i.next=l.next,l.next=i),s.pending=i}function _x(s,i,l){if((l&4194048)!==0){var d=i.lanes;d&=s.pendingLanes,l|=d,i.lanes=l,qi(s,l)}}var mu={readContext:Zn,use:Ch,useCallback:pn,useContext:pn,useEffect:pn,useImperativeHandle:pn,useLayoutEffect:pn,useInsertionEffect:pn,useMemo:pn,useReducer:pn,useRef:pn,useState:pn,useDebugValue:pn,useDeferredValue:pn,useTransition:pn,useSyncExternalStore:pn,useId:pn,useHostTransitionStatus:pn,useFormState:pn,useActionState:pn,useOptimistic:pn,useMemoCache:pn,useCacheRefresh:pn};mu.useEffectEvent=pn;var wx={readContext:Zn,use:Ch,useCallback:function(s,i){return pr().memoizedState=[s,i===void 0?null:i],s},useContext:Zn,useEffect:ix,useImperativeHandle:function(s,i,l){l=l!=null?l.concat([s]):null,kh(4194308,4,cx.bind(null,i,s),l)},useLayoutEffect:function(s,i){return kh(4194308,4,s,i)},useInsertionEffect:function(s,i){kh(4,2,s,i)},useMemo:function(s,i){var l=pr();i=i===void 0?null:i;var d=s();if(wo){Gt(!0);try{s()}finally{Gt(!1)}}return l.memoizedState=[d,i],d},useReducer:function(s,i,l){var d=pr();if(l!==void 0){var g=l(i);if(wo){Gt(!0);try{l(i)}finally{Gt(!1)}}}else g=i;return d.memoizedState=d.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},d.queue=s,s=s.dispatch=gN.bind(null,bt,s),[d.memoizedState,s]},useRef:function(s){var i=pr();return s={current:s},i.memoizedState=s},useState:function(s){s=dg(s);var i=s.queue,l=bx.bind(null,bt,i);return i.dispatch=l,[s.memoizedState,l]},useDebugValue:mg,useDeferredValue:function(s,i){var l=pr();return pg(l,s,i)},useTransition:function(){var s=dg(!1);return s=mx.bind(null,bt,s.queue,!0,!1),pr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,i,l){var d=bt,g=pr();if(Ot){if(l===void 0)throw Error(r(407));l=l()}else{if(l=i(),rn===null)throw Error(r(349));(Rt&127)!==0||Hb(d,i,l)}g.memoizedState=l;var v={value:l,getSnapshot:i};return g.queue=v,ix(qb.bind(null,d,v,s),[s]),d.flags|=2048,Al(9,{destroy:void 0},$b.bind(null,d,v,l,i),null),l},useId:function(){var s=pr(),i=rn.identifierPrefix;if(Ot){var l=Bs,d=Us;l=(d&~(1<<32-nn(d)-1)).toString(32)+l,i="_"+i+"R_"+l,l=Sh++,0<l&&(i+="H"+l.toString(32)),i+="_"}else l=cN++,i="_"+i+"r_"+l.toString(32)+"_";return s.memoizedState=i},useHostTransitionStatus:vg,useFormState:ex,useActionState:ex,useOptimistic:function(s){var i=pr();i.memoizedState=i.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=yg.bind(null,bt,!0,l),l.dispatch=i,[s,i]},useMemoCache:lg,useCacheRefresh:function(){return pr().memoizedState=pN.bind(null,bt)},useEffectEvent:function(s){var i=pr(),l={impl:s};return i.memoizedState=l,function(){if((qt&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}},bg={readContext:Zn,use:Ch,useCallback:dx,useContext:Zn,useEffect:fg,useImperativeHandle:ux,useInsertionEffect:ox,useLayoutEffect:lx,useMemo:hx,useReducer:Th,useRef:sx,useState:function(){return Th(bi)},useDebugValue:mg,useDeferredValue:function(s,i){var l=_n();return fx(l,Zt.memoizedState,s,i)},useTransition:function(){var s=Th(bi)[0],i=_n().memoizedState;return[typeof s=="boolean"?s:hu(s),i]},useSyncExternalStore:Fb,useId:vx,useHostTransitionStatus:vg,useFormState:tx,useActionState:tx,useOptimistic:function(s,i){var l=_n();return Kb(l,Zt,s,i)},useMemoCache:lg,useCacheRefresh:yx};bg.useEffectEvent=ax;var Sx={readContext:Zn,use:Ch,useCallback:dx,useContext:Zn,useEffect:fg,useImperativeHandle:ux,useInsertionEffect:ox,useLayoutEffect:lx,useMemo:hx,useReducer:ug,useRef:sx,useState:function(){return ug(bi)},useDebugValue:mg,useDeferredValue:function(s,i){var l=_n();return Zt===null?pg(l,s,i):fx(l,Zt.memoizedState,s,i)},useTransition:function(){var s=ug(bi)[0],i=_n().memoizedState;return[typeof s=="boolean"?s:hu(s),i]},useSyncExternalStore:Fb,useId:vx,useHostTransitionStatus:vg,useFormState:rx,useActionState:rx,useOptimistic:function(s,i){var l=_n();return Zt!==null?Kb(l,Zt,s,i):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:lg,useCacheRefresh:yx};Sx.useEffectEvent=ax;function xg(s,i,l,d){i=s.memoizedState,l=l(d,i),l=l==null?i:b({},i,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var _g={enqueueSetState:function(s,i,l){s=s._reactInternals;var d=Fr(),g=aa(d);g.payload=i,l!=null&&(g.callback=l),i=oa(s,g,d),i!==null&&(Nr(i,s,d),lu(i,s,d))},enqueueReplaceState:function(s,i,l){s=s._reactInternals;var d=Fr(),g=aa(d);g.tag=1,g.payload=i,l!=null&&(g.callback=l),i=oa(s,g,d),i!==null&&(Nr(i,s,d),lu(i,s,d))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var l=Fr(),d=aa(l);d.tag=2,i!=null&&(d.callback=i),i=oa(s,d,l),i!==null&&(Nr(i,s,l),lu(i,s,l))}};function Ex(s,i,l,d,g,v,S){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,v,S):i.prototype&&i.prototype.isPureReactComponent?!eu(l,d)||!eu(g,v):!0}function Cx(s,i,l,d){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,d),i.state!==s&&_g.enqueueReplaceState(i,i.state,null)}function So(s,i){var l=i;if("ref"in i){l={};for(var d in i)d!=="ref"&&(l[d]=i[d])}if(s=s.defaultProps){l===i&&(l=b({},l));for(var g in s)l[g]===void 0&&(l[g]=s[g])}return l}function Tx(s){oh(s)}function kx(s){console.error(s)}function Nx(s){oh(s)}function Rh(s,i){try{var l=s.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(d){setTimeout(function(){throw d})}}function Ax(s,i,l){try{var d=s.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function wg(s,i,l){return l=aa(l),l.tag=3,l.payload={element:null},l.callback=function(){Rh(s,i)},l}function Rx(s){return s=aa(s),s.tag=3,s}function jx(s,i,l,d){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var v=d.value;s.payload=function(){return g(v)},s.callback=function(){Ax(i,l,d)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(s.callback=function(){Ax(i,l,d),typeof g!="function"&&(fa===null?fa=new Set([this]):fa.add(this));var D=d.stack;this.componentDidCatch(d.value,{componentStack:D!==null?D:""})})}function vN(s,i,l,d,g){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(i=l.alternate,i!==null&&_l(i,l,g,!0),l=Vr.current,l!==null){switch(l.tag){case 31:case 13:return ss===null?Fh():l.alternate===null&&gn===0&&(gn=3),l.flags&=-257,l.flags|=65536,l.lanes=g,d===vh?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([d]):i.add(d),Yg(s,d,g)),!1;case 22:return l.flags|=65536,d===vh?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([d]):l.add(d)),Yg(s,d,g)),!1}throw Error(r(435,l.tag))}return Yg(s,d,g),Fh(),!1}if(Ot)return i=Vr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=g,d!==Bp&&(s=Error(r(422),{cause:d}),ru(es(s,l)))):(d!==Bp&&(i=Error(r(423),{cause:d}),ru(es(i,l))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,d=es(d,l),g=wg(s.stateNode,d,g),Jp(s,g),gn!==4&&(gn=2)),!1;var v=Error(r(520),{cause:d});if(v=es(v,l),wu===null?wu=[v]:wu.push(v),gn!==4&&(gn=2),i===null)return!0;d=es(d,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,s=g&-g,l.lanes|=s,s=wg(l.stateNode,d,s),Jp(l,s),!1;case 1:if(i=l.type,v=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(fa===null||!fa.has(v))))return l.flags|=65536,g&=-g,l.lanes|=g,g=Rx(g),jx(g,s,l,d),Jp(l,g),!1}l=l.return}while(l!==null);return!1}var Sg=Error(r(461)),Rn=!1;function er(s,i,l,d){i.child=s===null?Pb(i,null,l,d):_o(i,s.child,l,d)}function Ix(s,i,l,d,g){l=l.render;var v=i.ref;if("ref"in d){var S={};for(var D in d)D!=="ref"&&(S[D]=d[D])}else S=d;return vo(i),d=sg(s,i,l,S,v,g),D=ig(),s!==null&&!Rn?(ag(s,i,g),xi(s,i,g)):(Ot&&D&&zp(i),i.flags|=1,er(s,i,d,g),i.child)}function Dx(s,i,l,d,g){if(s===null){var v=l.type;return typeof v=="function"&&!Op(v)&&v.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=v,Mx(s,i,v,d,g)):(s=dh(l.type,null,d,i,i.mode,g),s.ref=i.ref,s.return=i,i.child=s)}if(v=s.child,!jg(s,g)){var S=v.memoizedProps;if(l=l.compare,l=l!==null?l:eu,l(S,d)&&s.ref===i.ref)return xi(s,i,g)}return i.flags|=1,s=mi(v,d),s.ref=i.ref,s.return=i,i.child=s}function Mx(s,i,l,d,g){if(s!==null){var v=s.memoizedProps;if(eu(v,d)&&s.ref===i.ref)if(Rn=!1,i.pendingProps=d=v,jg(s,g))(s.flags&131072)!==0&&(Rn=!0);else return i.lanes=s.lanes,xi(s,i,g)}return Eg(s,i,l,d,g)}function Px(s,i,l,d){var g=d.children,v=s!==null?s.memoizedState:null;if(s===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((i.flags&128)!==0){if(v=v!==null?v.baseLanes|l:l,s!==null){for(d=i.child=s.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;d=g&~v}else d=0,i.child=null;return Ox(s,i,v,l,d)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},s!==null&&ph(i,v!==null?v.cachePool:null),v!==null?Vb(i,v):eg(),zb(i);else return d=i.lanes=536870912,Ox(s,i,v!==null?v.baseLanes|l:l,l,d)}else v!==null?(ph(i,v.cachePool),Vb(i,v),ca(),i.memoizedState=null):(s!==null&&ph(i,null),eg(),ca());return er(s,i,g,l),i.child}function pu(s,i){return s!==null&&s.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Ox(s,i,l,d,g){var v=Kp();return v=v===null?null:{parent:Nn._currentValue,pool:v},i.memoizedState={baseLanes:l,cachePool:v},s!==null&&ph(i,null),eg(),zb(i),s!==null&&_l(s,i,d,!0),i.childLanes=g,null}function jh(s,i){return i=Dh({mode:i.mode,children:i.children},s.mode),i.ref=s.ref,s.child=i,i.return=s,i}function Lx(s,i,l){return _o(i,s.child,null,l),s=jh(i,i.pendingProps),s.flags|=2,zr(i),i.memoizedState=null,s}function yN(s,i,l){var d=i.pendingProps,g=(i.flags&128)!==0;if(i.flags&=-129,s===null){if(Ot){if(d.mode==="hidden")return s=jh(i,d),i.lanes=536870912,pu(null,s);if(ng(i),(s=ln)?(s=Q2(s,rs),s=s!==null&&s.data==="&"?s:null,s!==null&&(i.memoizedState={dehydrated:s,treeContext:ta!==null?{id:Us,overflow:Bs}:null,retryLane:536870912,hydrationErrors:null},l=xb(s),l.return=i,i.child=l,Jn=i,ln=null)):s=null,s===null)throw ra(i);return i.lanes=536870912,null}return jh(i,d)}var v=s.memoizedState;if(v!==null){var S=v.dehydrated;if(ng(i),g)if(i.flags&256)i.flags&=-257,i=Lx(s,i,l);else if(i.memoizedState!==null)i.child=s.child,i.flags|=128,i=null;else throw Error(r(558));else if(Rn||_l(s,i,l,!1),g=(l&s.childLanes)!==0,Rn||g){if(d=rn,d!==null&&(S=Oc(d,l),S!==0&&S!==v.retryLane))throw v.retryLane=S,fo(s,S),Nr(d,s,S),Sg;Fh(),i=Lx(s,i,l)}else s=v.treeContext,ln=is(S.nextSibling),Jn=i,Ot=!0,na=null,rs=!1,s!==null&&Sb(i,s),i=jh(i,d),i.flags|=4096;return i}return s=mi(s.child,{mode:d.mode,children:d.children}),s.ref=i.ref,i.child=s,s.return=i,s}function Ih(s,i){var l=i.ref;if(l===null)s!==null&&s.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(s===null||s.ref!==l)&&(i.flags|=4194816)}}function Eg(s,i,l,d,g){return vo(i),l=sg(s,i,l,d,void 0,g),d=ig(),s!==null&&!Rn?(ag(s,i,g),xi(s,i,g)):(Ot&&d&&zp(i),i.flags|=1,er(s,i,l,g),i.child)}function Vx(s,i,l,d,g,v){return vo(i),i.updateQueue=null,l=Bb(i,d,l,g),Ub(s),d=ig(),s!==null&&!Rn?(ag(s,i,v),xi(s,i,v)):(Ot&&d&&zp(i),i.flags|=1,er(s,i,l,v),i.child)}function zx(s,i,l,d,g){if(vo(i),i.stateNode===null){var v=vl,S=l.contextType;typeof S=="object"&&S!==null&&(v=Zn(S)),v=new l(d,v),i.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=_g,i.stateNode=v,v._reactInternals=i,v=i.stateNode,v.props=d,v.state=i.memoizedState,v.refs={},Xp(i),S=l.contextType,v.context=typeof S=="object"&&S!==null?Zn(S):vl,v.state=i.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(xg(i,l,S,d),v.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(S=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),S!==v.state&&_g.enqueueReplaceState(v,v.state,null),uu(i,d,v,g),cu(),v.state=i.memoizedState),typeof v.componentDidMount=="function"&&(i.flags|=4194308),d=!0}else if(s===null){v=i.stateNode;var D=i.memoizedProps,q=So(l,D);v.props=q;var ne=v.context,ge=l.contextType;S=vl,typeof ge=="object"&&ge!==null&&(S=Zn(ge));var xe=l.getDerivedStateFromProps;ge=typeof xe=="function"||typeof v.getSnapshotBeforeUpdate=="function",D=i.pendingProps!==D,ge||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(D||ne!==S)&&Cx(i,v,d,S),ia=!1;var ie=i.memoizedState;v.state=ie,uu(i,d,v,g),cu(),ne=i.memoizedState,D||ie!==ne||ia?(typeof xe=="function"&&(xg(i,l,xe,d),ne=i.memoizedState),(q=ia||Ex(i,l,q,d,ie,ne,S))?(ge||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(i.flags|=4194308)):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=ne),v.props=d,v.state=ne,v.context=S,d=q):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{v=i.stateNode,Wp(s,i),S=i.memoizedProps,ge=So(l,S),v.props=ge,xe=i.pendingProps,ie=v.context,ne=l.contextType,q=vl,typeof ne=="object"&&ne!==null&&(q=Zn(ne)),D=l.getDerivedStateFromProps,(ne=typeof D=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==xe||ie!==q)&&Cx(i,v,d,q),ia=!1,ie=i.memoizedState,v.state=ie,uu(i,d,v,g),cu();var ce=i.memoizedState;S!==xe||ie!==ce||ia||s!==null&&s.dependencies!==null&&fh(s.dependencies)?(typeof D=="function"&&(xg(i,l,D,d),ce=i.memoizedState),(ge=ia||Ex(i,l,ge,d,ie,ce,q)||s!==null&&s.dependencies!==null&&fh(s.dependencies))?(ne||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(d,ce,q),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(d,ce,q)),typeof v.componentDidUpdate=="function"&&(i.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===s.memoizedProps&&ie===s.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&ie===s.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=ce),v.props=d,v.state=ce,v.context=q,d=ge):(typeof v.componentDidUpdate!="function"||S===s.memoizedProps&&ie===s.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&ie===s.memoizedState||(i.flags|=1024),d=!1)}return v=d,Ih(s,i),d=(i.flags&128)!==0,v||d?(v=i.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:v.render(),i.flags|=1,s!==null&&d?(i.child=_o(i,s.child,null,g),i.child=_o(i,null,l,g)):er(s,i,l,g),i.memoizedState=v.state,s=i.child):s=xi(s,i,g),s}function Ux(s,i,l,d){return po(),i.flags|=256,er(s,i,l,d),i.child}var Cg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Tg(s){return{baseLanes:s,cachePool:Ab()}}function kg(s,i,l){return s=s!==null?s.childLanes&~l:0,i&&(s|=Br),s}function Bx(s,i,l){var d=i.pendingProps,g=!1,v=(i.flags&128)!==0,S;if((S=v)||(S=s!==null&&s.memoizedState===null?!1:(xn.current&2)!==0),S&&(g=!0,i.flags&=-129),S=(i.flags&32)!==0,i.flags&=-33,s===null){if(Ot){if(g?la(i):ca(),(s=ln)?(s=Q2(s,rs),s=s!==null&&s.data!=="&"?s:null,s!==null&&(i.memoizedState={dehydrated:s,treeContext:ta!==null?{id:Us,overflow:Bs}:null,retryLane:536870912,hydrationErrors:null},l=xb(s),l.return=i,i.child=l,Jn=i,ln=null)):s=null,s===null)throw ra(i);return c0(s)?i.lanes=32:i.lanes=536870912,null}var D=d.children;return d=d.fallback,g?(ca(),g=i.mode,D=Dh({mode:"hidden",children:D},g),d=mo(d,g,l,null),D.return=i,d.return=i,D.sibling=d,i.child=D,d=i.child,d.memoizedState=Tg(l),d.childLanes=kg(s,S,l),i.memoizedState=Cg,pu(null,d)):(la(i),Ng(i,D))}var q=s.memoizedState;if(q!==null&&(D=q.dehydrated,D!==null)){if(v)i.flags&256?(la(i),i.flags&=-257,i=Ag(s,i,l)):i.memoizedState!==null?(ca(),i.child=s.child,i.flags|=128,i=null):(ca(),D=d.fallback,g=i.mode,d=Dh({mode:"visible",children:d.children},g),D=mo(D,g,l,null),D.flags|=2,d.return=i,D.return=i,d.sibling=D,i.child=d,_o(i,s.child,null,l),d=i.child,d.memoizedState=Tg(l),d.childLanes=kg(s,S,l),i.memoizedState=Cg,i=pu(null,d));else if(la(i),c0(D)){if(S=D.nextSibling&&D.nextSibling.dataset,S)var ne=S.dgst;S=ne,d=Error(r(419)),d.stack="",d.digest=S,ru({value:d,source:null,stack:null}),i=Ag(s,i,l)}else if(Rn||_l(s,i,l,!1),S=(l&s.childLanes)!==0,Rn||S){if(S=rn,S!==null&&(d=Oc(S,l),d!==0&&d!==q.retryLane))throw q.retryLane=d,fo(s,d),Nr(S,s,d),Sg;l0(D)||Fh(),i=Ag(s,i,l)}else l0(D)?(i.flags|=192,i.child=s.child,i=null):(s=q.treeContext,ln=is(D.nextSibling),Jn=i,Ot=!0,na=null,rs=!1,s!==null&&Sb(i,s),i=Ng(i,d.children),i.flags|=4096);return i}return g?(ca(),D=d.fallback,g=i.mode,q=s.child,ne=q.sibling,d=mi(q,{mode:"hidden",children:d.children}),d.subtreeFlags=q.subtreeFlags&65011712,ne!==null?D=mi(ne,D):(D=mo(D,g,l,null),D.flags|=2),D.return=i,d.return=i,d.sibling=D,i.child=d,pu(null,d),d=i.child,D=s.child.memoizedState,D===null?D=Tg(l):(g=D.cachePool,g!==null?(q=Nn._currentValue,g=g.parent!==q?{parent:q,pool:q}:g):g=Ab(),D={baseLanes:D.baseLanes|l,cachePool:g}),d.memoizedState=D,d.childLanes=kg(s,S,l),i.memoizedState=Cg,pu(s.child,d)):(la(i),l=s.child,s=l.sibling,l=mi(l,{mode:"visible",children:d.children}),l.return=i,l.sibling=null,s!==null&&(S=i.deletions,S===null?(i.deletions=[s],i.flags|=16):S.push(s)),i.child=l,i.memoizedState=null,l)}function Ng(s,i){return i=Dh({mode:"visible",children:i},s.mode),i.return=s,s.child=i}function Dh(s,i){return s=Lr(22,s,null,i),s.lanes=0,s}function Ag(s,i,l){return _o(i,s.child,null,l),s=Ng(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function Fx(s,i,l){s.lanes|=i;var d=s.alternate;d!==null&&(d.lanes|=i),$p(s.return,i,l)}function Rg(s,i,l,d,g,v){var S=s.memoizedState;S===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:g,treeForkCount:v}:(S.isBackwards=i,S.rendering=null,S.renderingStartTime=0,S.last=d,S.tail=l,S.tailMode=g,S.treeForkCount=v)}function Hx(s,i,l){var d=i.pendingProps,g=d.revealOrder,v=d.tail;d=d.children;var S=xn.current,D=(S&2)!==0;if(D?(S=S&1|2,i.flags|=128):S&=1,oe(xn,S),er(s,i,d,l),d=Ot?nu:0,!D&&s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Fx(s,l,i);else if(s.tag===19)Fx(s,l,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(g){case"forwards":for(l=i.child,g=null;l!==null;)s=l.alternate,s!==null&&_h(s)===null&&(g=l),l=l.sibling;l=g,l===null?(g=i.child,i.child=null):(g=l.sibling,l.sibling=null),Rg(i,!1,g,l,v,d);break;case"backwards":case"unstable_legacy-backwards":for(l=null,g=i.child,i.child=null;g!==null;){if(s=g.alternate,s!==null&&_h(s)===null){i.child=g;break}s=g.sibling,g.sibling=l,l=g,g=s}Rg(i,!0,l,null,v,d);break;case"together":Rg(i,!1,null,null,void 0,d);break;default:i.memoizedState=null}return i.child}function xi(s,i,l){if(s!==null&&(i.dependencies=s.dependencies),ha|=i.lanes,(l&i.childLanes)===0)if(s!==null){if(_l(s,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(s!==null&&i.child!==s.child)throw Error(r(153));if(i.child!==null){for(s=i.child,l=mi(s,s.pendingProps),i.child=l,l.return=i;s.sibling!==null;)s=s.sibling,l=l.sibling=mi(s,s.pendingProps),l.return=i;l.sibling=null}return i.child}function jg(s,i){return(s.lanes&i)!==0?!0:(s=s.dependencies,!!(s!==null&&fh(s)))}function bN(s,i,l){switch(i.tag){case 3:Le(i,i.stateNode.containerInfo),sa(i,Nn,s.memoizedState.cache),po();break;case 27:case 5:We(i);break;case 4:Le(i,i.stateNode.containerInfo);break;case 10:sa(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,ng(i),null;break;case 13:var d=i.memoizedState;if(d!==null)return d.dehydrated!==null?(la(i),i.flags|=128,null):(l&i.child.childLanes)!==0?Bx(s,i,l):(la(i),s=xi(s,i,l),s!==null?s.sibling:null);la(i);break;case 19:var g=(s.flags&128)!==0;if(d=(l&i.childLanes)!==0,d||(_l(s,i,l,!1),d=(l&i.childLanes)!==0),g){if(d)return Hx(s,i,l);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),oe(xn,xn.current),d)break;return null;case 22:return i.lanes=0,Px(s,i,l,i.pendingProps);case 24:sa(i,Nn,s.memoizedState.cache)}return xi(s,i,l)}function $x(s,i,l){if(s!==null)if(s.memoizedProps!==i.pendingProps)Rn=!0;else{if(!jg(s,l)&&(i.flags&128)===0)return Rn=!1,bN(s,i,l);Rn=(s.flags&131072)!==0}else Rn=!1,Ot&&(i.flags&1048576)!==0&&wb(i,nu,i.index);switch(i.lanes=0,i.tag){case 16:e:{var d=i.pendingProps;if(s=bo(i.elementType),i.type=s,typeof s=="function")Op(s)?(d=So(s,d),i.tag=1,i=zx(null,i,s,d,l)):(i.tag=0,i=Eg(null,i,s,d,l));else{if(s!=null){var g=s.$$typeof;if(g===O){i.tag=11,i=Ix(null,i,s,d,l);break e}else if(g===w){i.tag=14,i=Dx(null,i,s,d,l);break e}}throw i=se(s)||s,Error(r(306,i,""))}}return i;case 0:return Eg(s,i,i.type,i.pendingProps,l);case 1:return d=i.type,g=So(d,i.pendingProps),zx(s,i,d,g,l);case 3:e:{if(Le(i,i.stateNode.containerInfo),s===null)throw Error(r(387));d=i.pendingProps;var v=i.memoizedState;g=v.element,Wp(s,i),uu(i,d,null,l);var S=i.memoizedState;if(d=S.cache,sa(i,Nn,d),d!==v.cache&&qp(i,[Nn],l,!0),cu(),d=S.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:S.cache},i.updateQueue.baseState=v,i.memoizedState=v,i.flags&256){i=Ux(s,i,d,l);break e}else if(d!==g){g=es(Error(r(424)),i),ru(g),i=Ux(s,i,d,l);break e}else{switch(s=i.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(ln=is(s.firstChild),Jn=i,Ot=!0,na=null,rs=!0,l=Pb(i,null,d,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(po(),d===g){i=xi(s,i,l);break e}er(s,i,d,l)}i=i.child}return i;case 26:return Ih(s,i),s===null?(l=t_(i.type,null,i.pendingProps,null))?i.memoizedState=l:Ot||(l=i.type,s=i.pendingProps,d=Qh(Ue.current).createElement(l),d[Cn]=i,d[qn]=s,tr(d,l,s),Tn(d),i.stateNode=d):i.memoizedState=t_(i.type,s.memoizedProps,i.pendingProps,s.memoizedState),null;case 27:return We(i),s===null&&Ot&&(d=i.stateNode=J2(i.type,i.pendingProps,Ue.current),Jn=i,rs=!0,g=ln,va(i.type)?(u0=g,ln=is(d.firstChild)):ln=g),er(s,i,i.pendingProps.children,l),Ih(s,i),s===null&&(i.flags|=4194304),i.child;case 5:return s===null&&Ot&&((g=d=ln)&&(d=QN(d,i.type,i.pendingProps,rs),d!==null?(i.stateNode=d,Jn=i,ln=is(d.firstChild),rs=!1,g=!0):g=!1),g||ra(i)),We(i),g=i.type,v=i.pendingProps,S=s!==null?s.memoizedProps:null,d=v.children,i0(g,v)?d=null:S!==null&&i0(g,S)&&(i.flags|=32),i.memoizedState!==null&&(g=sg(s,i,uN,null,null,l),Ru._currentValue=g),Ih(s,i),er(s,i,d,l),i.child;case 6:return s===null&&Ot&&((s=l=ln)&&(l=XN(l,i.pendingProps,rs),l!==null?(i.stateNode=l,Jn=i,ln=null,s=!0):s=!1),s||ra(i)),null;case 13:return Bx(s,i,l);case 4:return Le(i,i.stateNode.containerInfo),d=i.pendingProps,s===null?i.child=_o(i,null,d,l):er(s,i,d,l),i.child;case 11:return Ix(s,i,i.type,i.pendingProps,l);case 7:return er(s,i,i.pendingProps,l),i.child;case 8:return er(s,i,i.pendingProps.children,l),i.child;case 12:return er(s,i,i.pendingProps.children,l),i.child;case 10:return d=i.pendingProps,sa(i,i.type,d.value),er(s,i,d.children,l),i.child;case 9:return g=i.type._context,d=i.pendingProps.children,vo(i),g=Zn(g),d=d(g),i.flags|=1,er(s,i,d,l),i.child;case 14:return Dx(s,i,i.type,i.pendingProps,l);case 15:return Mx(s,i,i.type,i.pendingProps,l);case 19:return Hx(s,i,l);case 31:return yN(s,i,l);case 22:return Px(s,i,l,i.pendingProps);case 24:return vo(i),d=Zn(Nn),s===null?(g=Kp(),g===null&&(g=rn,v=Gp(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=l),g=v),i.memoizedState={parent:d,cache:g},Xp(i),sa(i,Nn,g)):((s.lanes&l)!==0&&(Wp(s,i),uu(i,null,null,l),cu()),g=s.memoizedState,v=i.memoizedState,g.parent!==d?(g={parent:d,cache:d},i.memoizedState=g,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=g),sa(i,Nn,d)):(d=v.cache,sa(i,Nn,d),d!==g.cache&&qp(i,[Nn],l,!0))),er(s,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function _i(s){s.flags|=4}function Ig(s,i,l,d,g){if((i=(s.mode&32)!==0)&&(i=!1),i){if(s.flags|=16777216,(g&335544128)===g)if(s.stateNode.complete)s.flags|=8192;else if(v2())s.flags|=8192;else throw xo=vh,Qp}else s.flags&=-16777217}function qx(s,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!a_(i))if(v2())s.flags|=8192;else throw xo=vh,Qp}function Mh(s,i){i!==null&&(s.flags|=4),s.flags&16384&&(i=s.tag!==22?zn():536870912,s.lanes|=i,Dl|=i)}function gu(s,i){if(!Ot)switch(s.tailMode){case"hidden":i=s.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function cn(s){var i=s.alternate!==null&&s.alternate.child===s.child,l=0,d=0;if(i)for(var g=s.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=d,s.childLanes=l,i}function xN(s,i,l){var d=i.pendingProps;switch(Up(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(i),null;case 1:return cn(i),null;case 3:return l=i.stateNode,d=null,s!==null&&(d=s.memoizedState.cache),i.memoizedState.cache!==d&&(i.flags|=2048),vi(Nn),Re(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(xl(i)?_i(i):s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Fp())),cn(i),null;case 26:var g=i.type,v=i.memoizedState;return s===null?(_i(i),v!==null?(cn(i),qx(i,v)):(cn(i),Ig(i,g,null,d,l))):v?v!==s.memoizedState?(_i(i),cn(i),qx(i,v)):(cn(i),i.flags&=-16777217):(s=s.memoizedProps,s!==d&&_i(i),cn(i),Ig(i,g,s,d,l)),null;case 27:if(ke(i),l=Ue.current,g=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==d&&_i(i);else{if(!d){if(i.stateNode===null)throw Error(r(166));return cn(i),null}s=fe.current,xl(i)?Eb(i):(s=J2(g,d,l),i.stateNode=s,_i(i))}return cn(i),null;case 5:if(ke(i),g=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==d&&_i(i);else{if(!d){if(i.stateNode===null)throw Error(r(166));return cn(i),null}if(v=fe.current,xl(i))Eb(i);else{var S=Qh(Ue.current);switch(v){case 1:v=S.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:v=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":v=S.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":v=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":v=S.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof d.is=="string"?S.createElement("select",{is:d.is}):S.createElement("select"),d.multiple?v.multiple=!0:d.size&&(v.size=d.size);break;default:v=typeof d.is=="string"?S.createElement(g,{is:d.is}):S.createElement(g)}}v[Cn]=i,v[qn]=d;e:for(S=i.child;S!==null;){if(S.tag===5||S.tag===6)v.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===i)break e;for(;S.sibling===null;){if(S.return===null||S.return===i)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}i.stateNode=v;e:switch(tr(v,g,d),g){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&_i(i)}}return cn(i),Ig(i,i.type,s===null?null:s.memoizedProps,i.pendingProps,l),null;case 6:if(s&&i.stateNode!=null)s.memoizedProps!==d&&_i(i);else{if(typeof d!="string"&&i.stateNode===null)throw Error(r(166));if(s=Ue.current,xl(i)){if(s=i.stateNode,l=i.memoizedProps,d=null,g=Jn,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}s[Cn]=i,s=!!(s.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||B2(s.nodeValue,l)),s||ra(i,!0)}else s=Qh(s).createTextNode(d),s[Cn]=i,i.stateNode=s}return cn(i),null;case 31:if(l=i.memoizedState,s===null||s.memoizedState!==null){if(d=xl(i),l!==null){if(s===null){if(!d)throw Error(r(318));if(s=i.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[Cn]=i}else po(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;cn(i),s=!1}else l=Fp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return i.flags&256?(zr(i),i):(zr(i),null);if((i.flags&128)!==0)throw Error(r(558))}return cn(i),null;case 13:if(d=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=xl(i),d!==null&&d.dehydrated!==null){if(s===null){if(!g)throw Error(r(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[Cn]=i}else po(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;cn(i),g=!1}else g=Fp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return i.flags&256?(zr(i),i):(zr(i),null)}return zr(i),(i.flags&128)!==0?(i.lanes=l,i):(l=d!==null,s=s!==null&&s.memoizedState!==null,l&&(d=i.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool),v=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(v=d.memoizedState.cachePool.pool),v!==g&&(d.flags|=2048)),l!==s&&l&&(i.child.flags|=8192),Mh(i,i.updateQueue),cn(i),null);case 4:return Re(),s===null&&e0(i.stateNode.containerInfo),cn(i),null;case 10:return vi(i.type),cn(i),null;case 19:if(X(xn),d=i.memoizedState,d===null)return cn(i),null;if(g=(i.flags&128)!==0,v=d.rendering,v===null)if(g)gu(d,!1);else{if(gn!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(v=_h(s),v!==null){for(i.flags|=128,gu(d,!1),s=v.updateQueue,i.updateQueue=s,Mh(i,s),i.subtreeFlags=0,s=l,l=i.child;l!==null;)bb(l,s),l=l.sibling;return oe(xn,xn.current&1|2),Ot&&pi(i,d.treeForkCount),i.child}s=s.sibling}d.tail!==null&&Ie()>zh&&(i.flags|=128,g=!0,gu(d,!1),i.lanes=4194304)}else{if(!g)if(s=_h(v),s!==null){if(i.flags|=128,g=!0,s=s.updateQueue,i.updateQueue=s,Mh(i,s),gu(d,!0),d.tail===null&&d.tailMode==="hidden"&&!v.alternate&&!Ot)return cn(i),null}else 2*Ie()-d.renderingStartTime>zh&&l!==536870912&&(i.flags|=128,g=!0,gu(d,!1),i.lanes=4194304);d.isBackwards?(v.sibling=i.child,i.child=v):(s=d.last,s!==null?s.sibling=v:i.child=v,d.last=v)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=Ie(),s.sibling=null,l=xn.current,oe(xn,g?l&1|2:l&1),Ot&&pi(i,d.treeForkCount),s):(cn(i),null);case 22:case 23:return zr(i),tg(),d=i.memoizedState!==null,s!==null?s.memoizedState!==null!==d&&(i.flags|=8192):d&&(i.flags|=8192),d?(l&536870912)!==0&&(i.flags&128)===0&&(cn(i),i.subtreeFlags&6&&(i.flags|=8192)):cn(i),l=i.updateQueue,l!==null&&Mh(i,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),d=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),d!==l&&(i.flags|=2048),s!==null&&X(yo),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),vi(Nn),cn(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function _N(s,i){switch(Up(i),i.tag){case 1:return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return vi(Nn),Re(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 26:case 27:case 5:return ke(i),null;case 31:if(i.memoizedState!==null){if(zr(i),i.alternate===null)throw Error(r(340));po()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 13:if(zr(i),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(r(340));po()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return X(xn),null;case 4:return Re(),null;case 10:return vi(i.type),null;case 22:case 23:return zr(i),tg(),s!==null&&X(yo),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 24:return vi(Nn),null;case 25:return null;default:return null}}function Gx(s,i){switch(Up(i),i.tag){case 3:vi(Nn),Re();break;case 26:case 27:case 5:ke(i);break;case 4:Re();break;case 31:i.memoizedState!==null&&zr(i);break;case 13:zr(i);break;case 19:X(xn);break;case 10:vi(i.type);break;case 22:case 23:zr(i),tg(),s!==null&&X(yo);break;case 24:vi(Nn)}}function vu(s,i){try{var l=i.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var g=d.next;l=g;do{if((l.tag&s)===s){d=void 0;var v=l.create,S=l.inst;d=v(),S.destroy=d}l=l.next}while(l!==g)}}catch(D){Wt(i,i.return,D)}}function ua(s,i,l){try{var d=i.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var v=g.next;d=v;do{if((d.tag&s)===s){var S=d.inst,D=S.destroy;if(D!==void 0){S.destroy=void 0,g=i;var q=l,ne=D;try{ne()}catch(ge){Wt(g,q,ge)}}}d=d.next}while(d!==v)}}catch(ge){Wt(i,i.return,ge)}}function Yx(s){var i=s.updateQueue;if(i!==null){var l=s.stateNode;try{Lb(i,l)}catch(d){Wt(s,s.return,d)}}}function Kx(s,i,l){l.props=So(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(d){Wt(s,i,d)}}function yu(s,i){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var d=s.stateNode;break;case 30:d=s.stateNode;break;default:d=s.stateNode}typeof l=="function"?s.refCleanup=l(d):l.current=d}}catch(g){Wt(s,i,g)}}function Fs(s,i){var l=s.ref,d=s.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(g){Wt(s,i,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){Wt(s,i,g)}else l.current=null}function Qx(s){var i=s.type,l=s.memoizedProps,d=s.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(g){Wt(s,s.return,g)}}function Dg(s,i,l){try{var d=s.stateNode;HN(d,s.type,l,i),d[qn]=i}catch(g){Wt(s,s.return,g)}}function Xx(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&va(s.type)||s.tag===4}function Mg(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Xx(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&va(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Pg(s,i,l){var d=s.tag;if(d===5||d===6)s=s.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(s),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=hs));else if(d!==4&&(d===27&&va(s.type)&&(l=s.stateNode,i=null),s=s.child,s!==null))for(Pg(s,i,l),s=s.sibling;s!==null;)Pg(s,i,l),s=s.sibling}function Ph(s,i,l){var d=s.tag;if(d===5||d===6)s=s.stateNode,i?l.insertBefore(s,i):l.appendChild(s);else if(d!==4&&(d===27&&va(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Ph(s,i,l),s=s.sibling;s!==null;)Ph(s,i,l),s=s.sibling}function Wx(s){var i=s.stateNode,l=s.memoizedProps;try{for(var d=s.type,g=i.attributes;g.length;)i.removeAttributeNode(g[0]);tr(i,d,l),i[Cn]=s,i[qn]=l}catch(v){Wt(s,s.return,v)}}var wi=!1,jn=!1,Og=!1,Jx=typeof WeakSet=="function"?WeakSet:Set,Yn=null;function wN(s,i){if(s=s.containerInfo,r0=nf,s=ub(s),Ap(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var g=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var S=0,D=-1,q=-1,ne=0,ge=0,xe=s,ie=null;t:for(;;){for(var ce;xe!==l||g!==0&&xe.nodeType!==3||(D=S+g),xe!==v||d!==0&&xe.nodeType!==3||(q=S+d),xe.nodeType===3&&(S+=xe.nodeValue.length),(ce=xe.firstChild)!==null;)ie=xe,xe=ce;for(;;){if(xe===s)break t;if(ie===l&&++ne===g&&(D=S),ie===v&&++ge===d&&(q=S),(ce=xe.nextSibling)!==null)break;xe=ie,ie=xe.parentNode}xe=ce}l=D===-1||q===-1?null:{start:D,end:q}}else l=null}l=l||{start:0,end:0}}else l=null;for(s0={focusedElem:s,selectionRange:l},nf=!1,Yn=i;Yn!==null;)if(i=Yn,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,Yn=s;else for(;Yn!==null;){switch(i=Yn,v=i.alternate,s=i.flags,i.tag){case 0:if((s&4)!==0&&(s=i.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)g=s[l],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&v!==null){s=void 0,l=i,g=v.memoizedProps,v=v.memoizedState,d=l.stateNode;try{var Ge=So(l.type,g);s=d.getSnapshotBeforeUpdate(Ge,v),d.__reactInternalSnapshotBeforeUpdate=s}catch(at){Wt(l,l.return,at)}}break;case 3:if((s&1024)!==0){if(s=i.stateNode.containerInfo,l=s.nodeType,l===9)o0(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":o0(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=i.sibling,s!==null){s.return=i.return,Yn=s;break}Yn=i.return}}function Zx(s,i,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:Ei(s,l),d&4&&vu(5,l);break;case 1:if(Ei(s,l),d&4)if(s=l.stateNode,i===null)try{s.componentDidMount()}catch(S){Wt(l,l.return,S)}else{var g=So(l.type,i.memoizedProps);i=i.memoizedState;try{s.componentDidUpdate(g,i,s.__reactInternalSnapshotBeforeUpdate)}catch(S){Wt(l,l.return,S)}}d&64&&Yx(l),d&512&&yu(l,l.return);break;case 3:if(Ei(s,l),d&64&&(s=l.updateQueue,s!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{Lb(s,i)}catch(S){Wt(l,l.return,S)}}break;case 27:i===null&&d&4&&Wx(l);case 26:case 5:Ei(s,l),i===null&&d&4&&Qx(l),d&512&&yu(l,l.return);break;case 12:Ei(s,l);break;case 31:Ei(s,l),d&4&&n2(s,l);break;case 13:Ei(s,l),d&4&&r2(s,l),d&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=jN.bind(null,l),WN(s,l))));break;case 22:if(d=l.memoizedState!==null||wi,!d){i=i!==null&&i.memoizedState!==null||jn,g=wi;var v=jn;wi=d,(jn=i)&&!v?Ci(s,l,(l.subtreeFlags&8772)!==0):Ei(s,l),wi=g,jn=v}break;case 30:break;default:Ei(s,l)}}function e2(s){var i=s.alternate;i!==null&&(s.alternate=null,e2(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&rl(i)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var fn=null,Er=!1;function Si(s,i,l){for(l=l.child;l!==null;)t2(s,i,l),l=l.sibling}function t2(s,i,l){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(Tt,l)}catch{}switch(l.tag){case 26:jn||Fs(l,i),Si(s,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:jn||Fs(l,i);var d=fn,g=Er;va(l.type)&&(fn=l.stateNode,Er=!1),Si(s,i,l),ku(l.stateNode),fn=d,Er=g;break;case 5:jn||Fs(l,i);case 6:if(d=fn,g=Er,fn=null,Si(s,i,l),fn=d,Er=g,fn!==null)if(Er)try{(fn.nodeType===9?fn.body:fn.nodeName==="HTML"?fn.ownerDocument.body:fn).removeChild(l.stateNode)}catch(v){Wt(l,i,v)}else try{fn.removeChild(l.stateNode)}catch(v){Wt(l,i,v)}break;case 18:fn!==null&&(Er?(s=fn,Y2(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),Bl(s)):Y2(fn,l.stateNode));break;case 4:d=fn,g=Er,fn=l.stateNode.containerInfo,Er=!0,Si(s,i,l),fn=d,Er=g;break;case 0:case 11:case 14:case 15:ua(2,l,i),jn||ua(4,l,i),Si(s,i,l);break;case 1:jn||(Fs(l,i),d=l.stateNode,typeof d.componentWillUnmount=="function"&&Kx(l,i,d)),Si(s,i,l);break;case 21:Si(s,i,l);break;case 22:jn=(d=jn)||l.memoizedState!==null,Si(s,i,l),jn=d;break;default:Si(s,i,l)}}function n2(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Bl(s)}catch(l){Wt(i,i.return,l)}}}function r2(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Bl(s)}catch(l){Wt(i,i.return,l)}}function SN(s){switch(s.tag){case 31:case 13:case 19:var i=s.stateNode;return i===null&&(i=s.stateNode=new Jx),i;case 22:return s=s.stateNode,i=s._retryCache,i===null&&(i=s._retryCache=new Jx),i;default:throw Error(r(435,s.tag))}}function Oh(s,i){var l=SN(s);i.forEach(function(d){if(!l.has(d)){l.add(d);var g=IN.bind(null,s,d);d.then(g,g)}})}function Cr(s,i){var l=i.deletions;if(l!==null)for(var d=0;d<l.length;d++){var g=l[d],v=s,S=i,D=S;e:for(;D!==null;){switch(D.tag){case 27:if(va(D.type)){fn=D.stateNode,Er=!1;break e}break;case 5:fn=D.stateNode,Er=!1;break e;case 3:case 4:fn=D.stateNode.containerInfo,Er=!0;break e}D=D.return}if(fn===null)throw Error(r(160));t2(v,S,g),fn=null,Er=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)s2(i,s),i=i.sibling}var ys=null;function s2(s,i){var l=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Cr(i,s),Tr(s),d&4&&(ua(3,s,s.return),vu(3,s),ua(5,s,s.return));break;case 1:Cr(i,s),Tr(s),d&512&&(jn||l===null||Fs(l,l.return)),d&64&&wi&&(s=s.updateQueue,s!==null&&(d=s.callbacks,d!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var g=ys;if(Cr(i,s),Tr(s),d&512&&(jn||l===null||Fs(l,l.return)),d&4){var v=l!==null?l.memoizedState:null;if(d=s.memoizedState,l===null)if(d===null)if(s.stateNode===null){e:{d=s.type,l=s.memoizedProps,g=g.ownerDocument||g;t:switch(d){case"title":v=g.getElementsByTagName("title")[0],(!v||v[Ns]||v[Cn]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(d),g.head.insertBefore(v,g.querySelector("head > title"))),tr(v,d,l),v[Cn]=s,Tn(v),d=v;break e;case"link":var S=s_("link","href",g).get(d+(l.href||""));if(S){for(var D=0;D<S.length;D++)if(v=S[D],v.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&v.getAttribute("rel")===(l.rel==null?null:l.rel)&&v.getAttribute("title")===(l.title==null?null:l.title)&&v.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(D,1);break t}}v=g.createElement(d),tr(v,d,l),g.head.appendChild(v);break;case"meta":if(S=s_("meta","content",g).get(d+(l.content||""))){for(D=0;D<S.length;D++)if(v=S[D],v.getAttribute("content")===(l.content==null?null:""+l.content)&&v.getAttribute("name")===(l.name==null?null:l.name)&&v.getAttribute("property")===(l.property==null?null:l.property)&&v.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&v.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(D,1);break t}}v=g.createElement(d),tr(v,d,l),g.head.appendChild(v);break;default:throw Error(r(468,d))}v[Cn]=s,Tn(v),d=v}s.stateNode=d}else i_(g,s.type,s.stateNode);else s.stateNode=r_(g,d,s.memoizedProps);else v!==d?(v===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):v.count--,d===null?i_(g,s.type,s.stateNode):r_(g,d,s.memoizedProps)):d===null&&s.stateNode!==null&&Dg(s,s.memoizedProps,l.memoizedProps)}break;case 27:Cr(i,s),Tr(s),d&512&&(jn||l===null||Fs(l,l.return)),l!==null&&d&4&&Dg(s,s.memoizedProps,l.memoizedProps);break;case 5:if(Cr(i,s),Tr(s),d&512&&(jn||l===null||Fs(l,l.return)),s.flags&32){g=s.stateNode;try{Sr(g,"")}catch(Ge){Wt(s,s.return,Ge)}}d&4&&s.stateNode!=null&&(g=s.memoizedProps,Dg(s,g,l!==null?l.memoizedProps:g)),d&1024&&(Og=!0);break;case 6:if(Cr(i,s),Tr(s),d&4){if(s.stateNode===null)throw Error(r(162));d=s.memoizedProps,l=s.stateNode;try{l.nodeValue=d}catch(Ge){Wt(s,s.return,Ge)}}break;case 3:if(Jh=null,g=ys,ys=Xh(i.containerInfo),Cr(i,s),ys=g,Tr(s),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Bl(i.containerInfo)}catch(Ge){Wt(s,s.return,Ge)}Og&&(Og=!1,i2(s));break;case 4:d=ys,ys=Xh(s.stateNode.containerInfo),Cr(i,s),Tr(s),ys=d;break;case 12:Cr(i,s),Tr(s);break;case 31:Cr(i,s),Tr(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Oh(s,d)));break;case 13:Cr(i,s),Tr(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Vh=Ie()),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Oh(s,d)));break;case 22:g=s.memoizedState!==null;var q=l!==null&&l.memoizedState!==null,ne=wi,ge=jn;if(wi=ne||g,jn=ge||q,Cr(i,s),jn=ge,wi=ne,Tr(s),d&8192)e:for(i=s.stateNode,i._visibility=g?i._visibility&-2:i._visibility|1,g&&(l===null||q||wi||jn||Eo(s)),l=null,i=s;;){if(i.tag===5||i.tag===26){if(l===null){q=l=i;try{if(v=q.stateNode,g)S=v.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{D=q.stateNode;var xe=q.memoizedProps.style,ie=xe!=null&&xe.hasOwnProperty("display")?xe.display:null;D.style.display=ie==null||typeof ie=="boolean"?"":(""+ie).trim()}}catch(Ge){Wt(q,q.return,Ge)}}}else if(i.tag===6){if(l===null){q=i;try{q.stateNode.nodeValue=g?"":q.memoizedProps}catch(Ge){Wt(q,q.return,Ge)}}}else if(i.tag===18){if(l===null){q=i;try{var ce=q.stateNode;g?K2(ce,!0):K2(q.stateNode,!1)}catch(Ge){Wt(q,q.return,Ge)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===s)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}d&4&&(d=s.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,Oh(s,l))));break;case 19:Cr(i,s),Tr(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Oh(s,d)));break;case 30:break;case 21:break;default:Cr(i,s),Tr(s)}}function Tr(s){var i=s.flags;if(i&2){try{for(var l,d=s.return;d!==null;){if(Xx(d)){l=d;break}d=d.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var g=l.stateNode,v=Mg(s);Ph(s,v,g);break;case 5:var S=l.stateNode;l.flags&32&&(Sr(S,""),l.flags&=-33);var D=Mg(s);Ph(s,D,S);break;case 3:case 4:var q=l.stateNode.containerInfo,ne=Mg(s);Pg(s,ne,q);break;default:throw Error(r(161))}}catch(ge){Wt(s,s.return,ge)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function i2(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var i=s;i2(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),s=s.sibling}}function Ei(s,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Zx(s,i.alternate,i),i=i.sibling}function Eo(s){for(s=s.child;s!==null;){var i=s;switch(i.tag){case 0:case 11:case 14:case 15:ua(4,i,i.return),Eo(i);break;case 1:Fs(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&Kx(i,i.return,l),Eo(i);break;case 27:ku(i.stateNode);case 26:case 5:Fs(i,i.return),Eo(i);break;case 22:i.memoizedState===null&&Eo(i);break;case 30:Eo(i);break;default:Eo(i)}s=s.sibling}}function Ci(s,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var d=i.alternate,g=s,v=i,S=v.flags;switch(v.tag){case 0:case 11:case 15:Ci(g,v,l),vu(4,v);break;case 1:if(Ci(g,v,l),d=v,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(ne){Wt(d,d.return,ne)}if(d=v,g=d.updateQueue,g!==null){var D=d.stateNode;try{var q=g.shared.hiddenCallbacks;if(q!==null)for(g.shared.hiddenCallbacks=null,g=0;g<q.length;g++)Ob(q[g],D)}catch(ne){Wt(d,d.return,ne)}}l&&S&64&&Yx(v),yu(v,v.return);break;case 27:Wx(v);case 26:case 5:Ci(g,v,l),l&&d===null&&S&4&&Qx(v),yu(v,v.return);break;case 12:Ci(g,v,l);break;case 31:Ci(g,v,l),l&&S&4&&n2(g,v);break;case 13:Ci(g,v,l),l&&S&4&&r2(g,v);break;case 22:v.memoizedState===null&&Ci(g,v,l),yu(v,v.return);break;case 30:break;default:Ci(g,v,l)}i=i.sibling}}function Lg(s,i){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&su(l))}function Vg(s,i){s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&su(s))}function bs(s,i,l,d){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)a2(s,i,l,d),i=i.sibling}function a2(s,i,l,d){var g=i.flags;switch(i.tag){case 0:case 11:case 15:bs(s,i,l,d),g&2048&&vu(9,i);break;case 1:bs(s,i,l,d);break;case 3:bs(s,i,l,d),g&2048&&(s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&su(s)));break;case 12:if(g&2048){bs(s,i,l,d),s=i.stateNode;try{var v=i.memoizedProps,S=v.id,D=v.onPostCommit;typeof D=="function"&&D(S,i.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(q){Wt(i,i.return,q)}}else bs(s,i,l,d);break;case 31:bs(s,i,l,d);break;case 13:bs(s,i,l,d);break;case 23:break;case 22:v=i.stateNode,S=i.alternate,i.memoizedState!==null?v._visibility&2?bs(s,i,l,d):bu(s,i):v._visibility&2?bs(s,i,l,d):(v._visibility|=2,Rl(s,i,l,d,(i.subtreeFlags&10256)!==0||!1)),g&2048&&Lg(S,i);break;case 24:bs(s,i,l,d),g&2048&&Vg(i.alternate,i);break;default:bs(s,i,l,d)}}function Rl(s,i,l,d,g){for(g=g&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var v=s,S=i,D=l,q=d,ne=S.flags;switch(S.tag){case 0:case 11:case 15:Rl(v,S,D,q,g),vu(8,S);break;case 23:break;case 22:var ge=S.stateNode;S.memoizedState!==null?ge._visibility&2?Rl(v,S,D,q,g):bu(v,S):(ge._visibility|=2,Rl(v,S,D,q,g)),g&&ne&2048&&Lg(S.alternate,S);break;case 24:Rl(v,S,D,q,g),g&&ne&2048&&Vg(S.alternate,S);break;default:Rl(v,S,D,q,g)}i=i.sibling}}function bu(s,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=s,d=i,g=d.flags;switch(d.tag){case 22:bu(l,d),g&2048&&Lg(d.alternate,d);break;case 24:bu(l,d),g&2048&&Vg(d.alternate,d);break;default:bu(l,d)}i=i.sibling}}var xu=8192;function jl(s,i,l){if(s.subtreeFlags&xu)for(s=s.child;s!==null;)o2(s,i,l),s=s.sibling}function o2(s,i,l){switch(s.tag){case 26:jl(s,i,l),s.flags&xu&&s.memoizedState!==null&&c5(l,ys,s.memoizedState,s.memoizedProps);break;case 5:jl(s,i,l);break;case 3:case 4:var d=ys;ys=Xh(s.stateNode.containerInfo),jl(s,i,l),ys=d;break;case 22:s.memoizedState===null&&(d=s.alternate,d!==null&&d.memoizedState!==null?(d=xu,xu=16777216,jl(s,i,l),xu=d):jl(s,i,l));break;default:jl(s,i,l)}}function l2(s){var i=s.alternate;if(i!==null&&(s=i.child,s!==null)){i.child=null;do i=s.sibling,s.sibling=null,s=i;while(s!==null)}}function _u(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var d=i[l];Yn=d,u2(d,s)}l2(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)c2(s),s=s.sibling}function c2(s){switch(s.tag){case 0:case 11:case 15:_u(s),s.flags&2048&&ua(9,s,s.return);break;case 3:_u(s);break;case 12:_u(s);break;case 22:var i=s.stateNode;s.memoizedState!==null&&i._visibility&2&&(s.return===null||s.return.tag!==13)?(i._visibility&=-3,Lh(s)):_u(s);break;default:_u(s)}}function Lh(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var d=i[l];Yn=d,u2(d,s)}l2(s)}for(s=s.child;s!==null;){switch(i=s,i.tag){case 0:case 11:case 15:ua(8,i,i.return),Lh(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,Lh(i));break;default:Lh(i)}s=s.sibling}}function u2(s,i){for(;Yn!==null;){var l=Yn;switch(l.tag){case 0:case 11:case 15:ua(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:su(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,Yn=d;else e:for(l=s;Yn!==null;){d=Yn;var g=d.sibling,v=d.return;if(e2(d),d===l){Yn=null;break e}if(g!==null){g.return=v,Yn=g;break e}Yn=v}}}var EN={getCacheForType:function(s){var i=Zn(Nn),l=i.data.get(s);return l===void 0&&(l=s(),i.data.set(s,l)),l},cacheSignal:function(){return Zn(Nn).controller.signal}},CN=typeof WeakMap=="function"?WeakMap:Map,qt=0,rn=null,Nt=null,Rt=0,Xt=0,Ur=null,da=!1,Il=!1,zg=!1,Ti=0,gn=0,ha=0,Co=0,Ug=0,Br=0,Dl=0,wu=null,kr=null,Bg=!1,Vh=0,d2=0,zh=1/0,Uh=null,fa=null,Un=0,ma=null,Ml=null,ki=0,Fg=0,Hg=null,h2=null,Su=0,$g=null;function Fr(){return(qt&2)!==0&&Rt!==0?Rt&-Rt:G.T!==null?Xg():Bd()}function f2(){if(Br===0)if((Rt&536870912)===0||Ot){var s=gt;gt<<=1,(gt&3932160)===0&&(gt=262144),Br=s}else Br=536870912;return s=Vr.current,s!==null&&(s.flags|=32),Br}function Nr(s,i,l){(s===rn&&(Xt===2||Xt===9)||s.cancelPendingCommit!==null)&&(Pl(s,0),pa(s,Rt,Br,!1)),vt(s,l),((qt&2)===0||s!==rn)&&(s===rn&&((qt&2)===0&&(Co|=l),gn===4&&pa(s,Rt,Br,!1)),Hs(s))}function m2(s,i,l){if((qt&6)!==0)throw Error(r(327));var d=!l&&(i&127)===0&&(i&s.expiredLanes)===0||xt(s,i),g=d?NN(s,i):Gg(s,i,!0),v=d;do{if(g===0){Il&&!d&&pa(s,i,0,!1);break}else{if(l=s.current.alternate,v&&!TN(l)){g=Gg(s,i,!1),v=!1;continue}if(g===2){if(v=i,s.errorRecoveryDisabledLanes&v)var S=0;else S=s.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){i=S;e:{var D=s;g=wu;var q=D.current.memoizedState.isDehydrated;if(q&&(Pl(D,S).flags|=256),S=Gg(D,S,!1),S!==2){if(zg&&!q){D.errorRecoveryDisabledLanes|=v,Co|=v,g=4;break e}v=kr,kr=g,v!==null&&(kr===null?kr=v:kr.push.apply(kr,v))}g=S}if(v=!1,g!==2)continue}}if(g===1){Pl(s,0),pa(s,i,0,!0);break}e:{switch(d=s,v=g,v){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:pa(d,i,Br,!da);break e;case 2:kr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(g=Vh+300-Ie(),10<g)){if(pa(d,i,Br,!da),Ft(d,0,!0)!==0)break e;ki=i,d.timeoutHandle=q2(p2.bind(null,d,l,kr,Uh,Bg,i,Br,Co,Dl,da,v,"Throttled",-0,0),g);break e}p2(d,l,kr,Uh,Bg,i,Br,Co,Dl,da,v,null,-0,0)}}break}while(!0);Hs(s)}function p2(s,i,l,d,g,v,S,D,q,ne,ge,xe,ie,ce){if(s.timeoutHandle=-1,xe=i.subtreeFlags,xe&8192||(xe&16785408)===16785408){xe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:hs},o2(i,v,xe);var Ge=(v&62914560)===v?Vh-Ie():(v&4194048)===v?d2-Ie():0;if(Ge=u5(xe,Ge),Ge!==null){ki=v,s.cancelPendingCommit=Ge(S2.bind(null,s,i,v,l,d,g,S,D,q,ge,xe,null,ie,ce)),pa(s,v,S,!ne);return}}S2(s,i,v,l,d,g,S,D,q)}function TN(s){for(var i=s;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var g=l[d],v=g.getSnapshot;g=g.value;try{if(!Or(v(),g))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function pa(s,i,l,d){i&=~Ug,i&=~Co,s.suspendedLanes|=i,s.pingedLanes&=~i,d&&(s.warmLanes|=i),d=s.expirationTimes;for(var g=i;0<g;){var v=31-nn(g),S=1<<v;d[v]=-1,g&=~S}l!==0&&Xn(s,l,i)}function Bh(){return(qt&6)===0?(Eu(0),!1):!0}function qg(){if(Nt!==null){if(Xt===0)var s=Nt.return;else s=Nt,gi=go=null,og(s),Cl=null,au=0,s=Nt;for(;s!==null;)Gx(s.alternate,s),s=s.return;Nt=null}}function Pl(s,i){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,GN(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),ki=0,qg(),rn=s,Nt=l=mi(s.current,null),Rt=i,Xt=0,Ur=null,da=!1,Il=xt(s,i),zg=!1,Dl=Br=Ug=Co=ha=gn=0,kr=wu=null,Bg=!1,(i&8)!==0&&(i|=i&32);var d=s.entangledLanes;if(d!==0)for(s=s.entanglements,d&=i;0<d;){var g=31-nn(d),v=1<<g;i|=s[g],d&=~v}return Ti=i,lh(),l}function g2(s,i){bt=null,G.H=mu,i===El||i===gh?(i=Ib(),Xt=3):i===Qp?(i=Ib(),Xt=4):Xt=i===Sg?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Ur=i,Nt===null&&(gn=1,Rh(s,es(i,s.current)))}function v2(){var s=Vr.current;return s===null?!0:(Rt&4194048)===Rt?ss===null:(Rt&62914560)===Rt||(Rt&536870912)!==0?s===ss:!1}function y2(){var s=G.H;return G.H=mu,s===null?mu:s}function b2(){var s=G.A;return G.A=EN,s}function Fh(){gn=4,da||(Rt&4194048)!==Rt&&Vr.current!==null||(Il=!0),(ha&134217727)===0&&(Co&134217727)===0||rn===null||pa(rn,Rt,Br,!1)}function Gg(s,i,l){var d=qt;qt|=2;var g=y2(),v=b2();(rn!==s||Rt!==i)&&(Uh=null,Pl(s,i)),i=!1;var S=gn;e:do try{if(Xt!==0&&Nt!==null){var D=Nt,q=Ur;switch(Xt){case 8:qg(),S=6;break e;case 3:case 2:case 9:case 6:Vr.current===null&&(i=!0);var ne=Xt;if(Xt=0,Ur=null,Ol(s,D,q,ne),l&&Il){S=0;break e}break;default:ne=Xt,Xt=0,Ur=null,Ol(s,D,q,ne)}}kN(),S=gn;break}catch(ge){g2(s,ge)}while(!0);return i&&s.shellSuspendCounter++,gi=go=null,qt=d,G.H=g,G.A=v,Nt===null&&(rn=null,Rt=0,lh()),S}function kN(){for(;Nt!==null;)x2(Nt)}function NN(s,i){var l=qt;qt|=2;var d=y2(),g=b2();rn!==s||Rt!==i?(Uh=null,zh=Ie()+500,Pl(s,i)):Il=xt(s,i);e:do try{if(Xt!==0&&Nt!==null){i=Nt;var v=Ur;t:switch(Xt){case 1:Xt=0,Ur=null,Ol(s,i,v,1);break;case 2:case 9:if(Rb(v)){Xt=0,Ur=null,_2(i);break}i=function(){Xt!==2&&Xt!==9||rn!==s||(Xt=7),Hs(s)},v.then(i,i);break e;case 3:Xt=7;break e;case 4:Xt=5;break e;case 7:Rb(v)?(Xt=0,Ur=null,_2(i)):(Xt=0,Ur=null,Ol(s,i,v,7));break;case 5:var S=null;switch(Nt.tag){case 26:S=Nt.memoizedState;case 5:case 27:var D=Nt;if(S?a_(S):D.stateNode.complete){Xt=0,Ur=null;var q=D.sibling;if(q!==null)Nt=q;else{var ne=D.return;ne!==null?(Nt=ne,Hh(ne)):Nt=null}break t}}Xt=0,Ur=null,Ol(s,i,v,5);break;case 6:Xt=0,Ur=null,Ol(s,i,v,6);break;case 8:qg(),gn=6;break e;default:throw Error(r(462))}}AN();break}catch(ge){g2(s,ge)}while(!0);return gi=go=null,G.H=d,G.A=g,qt=l,Nt!==null?0:(rn=null,Rt=0,lh(),gn)}function AN(){for(;Nt!==null&&!Ne();)x2(Nt)}function x2(s){var i=$x(s.alternate,s,Ti);s.memoizedProps=s.pendingProps,i===null?Hh(s):Nt=i}function _2(s){var i=s,l=i.alternate;switch(i.tag){case 15:case 0:i=Vx(l,i,i.pendingProps,i.type,void 0,Rt);break;case 11:i=Vx(l,i,i.pendingProps,i.type.render,i.ref,Rt);break;case 5:og(i);default:Gx(l,i),i=Nt=bb(i,Ti),i=$x(l,i,Ti)}s.memoizedProps=s.pendingProps,i===null?Hh(s):Nt=i}function Ol(s,i,l,d){gi=go=null,og(i),Cl=null,au=0;var g=i.return;try{if(vN(s,g,i,l,Rt)){gn=1,Rh(s,es(l,s.current)),Nt=null;return}}catch(v){if(g!==null)throw Nt=g,v;gn=1,Rh(s,es(l,s.current)),Nt=null;return}i.flags&32768?(Ot||d===1?s=!0:Il||(Rt&536870912)!==0?s=!1:(da=s=!0,(d===2||d===9||d===3||d===6)&&(d=Vr.current,d!==null&&d.tag===13&&(d.flags|=16384))),w2(i,s)):Hh(i)}function Hh(s){var i=s;do{if((i.flags&32768)!==0){w2(i,da);return}s=i.return;var l=xN(i.alternate,i,Ti);if(l!==null){Nt=l;return}if(i=i.sibling,i!==null){Nt=i;return}Nt=i=s}while(i!==null);gn===0&&(gn=5)}function w2(s,i){do{var l=_N(s.alternate,s);if(l!==null){l.flags&=32767,Nt=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(s=s.sibling,s!==null)){Nt=s;return}Nt=s=l}while(s!==null);gn=6,Nt=null}function S2(s,i,l,d,g,v,S,D,q){s.cancelPendingCommit=null;do $h();while(Un!==0);if((qt&6)!==0)throw Error(r(327));if(i!==null){if(i===s.current)throw Error(r(177));if(v=i.lanes|i.childLanes,v|=Mp,Ht(s,l,v,S,D,q),s===rn&&(Nt=rn=null,Rt=0),Ml=i,ma=s,ki=l,Fg=v,Hg=g,h2=d,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,DN(Se,function(){return N2(),null})):(s.callbackNode=null,s.callbackPriority=0),d=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||d){d=G.T,G.T=null,g=J.p,J.p=2,S=qt,qt|=4;try{wN(s,i,l)}finally{qt=S,J.p=g,G.T=d}}Un=1,E2(),C2(),T2()}}function E2(){if(Un===1){Un=0;var s=ma,i=Ml,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=G.T,G.T=null;var d=J.p;J.p=2;var g=qt;qt|=4;try{s2(i,s);var v=s0,S=ub(s.containerInfo),D=v.focusedElem,q=v.selectionRange;if(S!==D&&D&&D.ownerDocument&&cb(D.ownerDocument.documentElement,D)){if(q!==null&&Ap(D)){var ne=q.start,ge=q.end;if(ge===void 0&&(ge=ne),"selectionStart"in D)D.selectionStart=ne,D.selectionEnd=Math.min(ge,D.value.length);else{var xe=D.ownerDocument||document,ie=xe&&xe.defaultView||window;if(ie.getSelection){var ce=ie.getSelection(),Ge=D.textContent.length,at=Math.min(q.start,Ge),tn=q.end===void 0?at:Math.min(q.end,Ge);!ce.extend&&at>tn&&(S=tn,tn=at,at=S);var Q=lb(D,at),Y=lb(D,tn);if(Q&&Y&&(ce.rangeCount!==1||ce.anchorNode!==Q.node||ce.anchorOffset!==Q.offset||ce.focusNode!==Y.node||ce.focusOffset!==Y.offset)){var te=xe.createRange();te.setStart(Q.node,Q.offset),ce.removeAllRanges(),at>tn?(ce.addRange(te),ce.extend(Y.node,Y.offset)):(te.setEnd(Y.node,Y.offset),ce.addRange(te))}}}}for(xe=[],ce=D;ce=ce.parentNode;)ce.nodeType===1&&xe.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<xe.length;D++){var be=xe[D];be.element.scrollLeft=be.left,be.element.scrollTop=be.top}}nf=!!r0,s0=r0=null}finally{qt=g,J.p=d,G.T=l}}s.current=i,Un=2}}function C2(){if(Un===2){Un=0;var s=ma,i=Ml,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=G.T,G.T=null;var d=J.p;J.p=2;var g=qt;qt|=4;try{Zx(s,i.alternate,i)}finally{qt=g,J.p=d,G.T=l}}Un=3}}function T2(){if(Un===4||Un===3){Un=0,_e();var s=ma,i=Ml,l=ki,d=h2;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Un=5:(Un=0,Ml=ma=null,k2(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(fa=null),ui(l),i=i.stateNode,Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(Tt,i,void 0,(i.current.flags&128)===128)}catch{}if(d!==null){i=G.T,g=J.p,J.p=2,G.T=null;try{for(var v=s.onRecoverableError,S=0;S<d.length;S++){var D=d[S];v(D.value,{componentStack:D.stack})}}finally{G.T=i,J.p=g}}(ki&3)!==0&&$h(),Hs(s),g=s.pendingLanes,(l&261930)!==0&&(g&42)!==0?s===$g?Su++:(Su=0,$g=s):Su=0,Eu(0)}}function k2(s,i){(s.pooledCacheLanes&=i)===0&&(i=s.pooledCache,i!=null&&(s.pooledCache=null,su(i)))}function $h(){return E2(),C2(),T2(),N2()}function N2(){if(Un!==5)return!1;var s=ma,i=Fg;Fg=0;var l=ui(ki),d=G.T,g=J.p;try{J.p=32>l?32:l,G.T=null,l=Hg,Hg=null;var v=ma,S=ki;if(Un=0,Ml=ma=null,ki=0,(qt&6)!==0)throw Error(r(331));var D=qt;if(qt|=4,c2(v.current),a2(v,v.current,S,l),qt=D,Eu(0,!1),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(Tt,v)}catch{}return!0}finally{J.p=g,G.T=d,k2(s,i)}}function A2(s,i,l){i=es(l,i),i=wg(s.stateNode,i,2),s=oa(s,i,2),s!==null&&(vt(s,2),Hs(s))}function Wt(s,i,l){if(s.tag===3)A2(s,s,l);else for(;i!==null;){if(i.tag===3){A2(i,s,l);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(fa===null||!fa.has(d))){s=es(l,s),l=Rx(2),d=oa(i,l,2),d!==null&&(jx(l,d,i,s),vt(d,2),Hs(d));break}}i=i.return}}function Yg(s,i,l){var d=s.pingCache;if(d===null){d=s.pingCache=new CN;var g=new Set;d.set(i,g)}else g=d.get(i),g===void 0&&(g=new Set,d.set(i,g));g.has(l)||(zg=!0,g.add(l),s=RN.bind(null,s,i,l),i.then(s,s))}function RN(s,i,l){var d=s.pingCache;d!==null&&d.delete(i),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,rn===s&&(Rt&l)===l&&(gn===4||gn===3&&(Rt&62914560)===Rt&&300>Ie()-Vh?(qt&2)===0&&Pl(s,0):Ug|=l,Dl===Rt&&(Dl=0)),Hs(s)}function R2(s,i){i===0&&(i=zn()),s=fo(s,i),s!==null&&(vt(s,i),Hs(s))}function jN(s){var i=s.memoizedState,l=0;i!==null&&(l=i.retryLane),R2(s,l)}function IN(s,i){var l=0;switch(s.tag){case 31:case 13:var d=s.stateNode,g=s.memoizedState;g!==null&&(l=g.retryLane);break;case 19:d=s.stateNode;break;case 22:d=s.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(i),R2(s,l)}function DN(s,i){return je(s,i)}var qh=null,Ll=null,Kg=!1,Gh=!1,Qg=!1,ga=0;function Hs(s){s!==Ll&&s.next===null&&(Ll===null?qh=Ll=s:Ll=Ll.next=s),Gh=!0,Kg||(Kg=!0,PN())}function Eu(s,i){if(!Qg&&Gh){Qg=!0;do for(var l=!1,d=qh;d!==null;){if(s!==0){var g=d.pendingLanes;if(g===0)var v=0;else{var S=d.suspendedLanes,D=d.pingedLanes;v=(1<<31-nn(42|s)+1)-1,v&=g&~(S&~D),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(l=!0,M2(d,v))}else v=Rt,v=Ft(d,d===rn?v:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(v&3)===0||xt(d,v)||(l=!0,M2(d,v));d=d.next}while(l);Qg=!1}}function MN(){j2()}function j2(){Gh=Kg=!1;var s=0;ga!==0&&qN()&&(s=ga);for(var i=Ie(),l=null,d=qh;d!==null;){var g=d.next,v=I2(d,i);v===0?(d.next=null,l===null?qh=g:l.next=g,g===null&&(Ll=l)):(l=d,(s!==0||(v&3)!==0)&&(Gh=!0)),d=g}Un!==0&&Un!==5||Eu(s),ga!==0&&(ga=0)}function I2(s,i){for(var l=s.suspendedLanes,d=s.pingedLanes,g=s.expirationTimes,v=s.pendingLanes&-62914561;0<v;){var S=31-nn(v),D=1<<S,q=g[S];q===-1?((D&l)===0||(D&d)!==0)&&(g[S]=on(D,i)):q<=i&&(s.expiredLanes|=D),v&=~D}if(i=rn,l=Rt,l=Ft(s,s===i?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d=s.callbackNode,l===0||s===i&&(Xt===2||Xt===9)||s.cancelPendingCommit!==null)return d!==null&&d!==null&&me(d),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||xt(s,l)){if(i=l&-l,i===s.callbackPriority)return i;switch(d!==null&&me(d),ui(l)){case 2:case 8:l=$n;break;case 32:l=Se;break;case 268435456:l=lt;break;default:l=Se}return d=D2.bind(null,s),l=je(l,d),s.callbackPriority=i,s.callbackNode=l,i}return d!==null&&d!==null&&me(d),s.callbackPriority=2,s.callbackNode=null,2}function D2(s,i){if(Un!==0&&Un!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if($h()&&s.callbackNode!==l)return null;var d=Rt;return d=Ft(s,s===rn?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d===0?null:(m2(s,d,i),I2(s,Ie()),s.callbackNode!=null&&s.callbackNode===l?D2.bind(null,s):null)}function M2(s,i){if($h())return null;m2(s,i,!0)}function PN(){YN(function(){(qt&6)!==0?je(Pt,MN):j2()})}function Xg(){if(ga===0){var s=wl;s===0&&(s=et,et<<=1,(et&261888)===0&&(et=256)),ga=s}return ga}function P2(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:ol(""+s)}function O2(s,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,s.id&&l.setAttribute("form",s.id),i.parentNode.insertBefore(l,i),s=new FormData(s),l.parentNode.removeChild(l),s}function ON(s,i,l,d,g){if(i==="submit"&&l&&l.stateNode===g){var v=P2((g[qn]||null).action),S=d.submitter;S&&(i=(i=S[qn]||null)?P2(i.formAction):S.getAttribute("formAction"),i!==null&&(v=i,S=null));var D=new Os("action","action",null,d,g);s.push({event:D,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(ga!==0){var q=S?O2(g,S):new FormData(g);gg(l,{pending:!0,data:q,method:g.method,action:v},null,q)}}else typeof v=="function"&&(D.preventDefault(),q=S?O2(g,S):new FormData(g),gg(l,{pending:!0,data:q,method:g.method,action:v},v,q))},currentTarget:g}]})}}for(var Wg=0;Wg<Dp.length;Wg++){var Jg=Dp[Wg],LN=Jg.toLowerCase(),VN=Jg[0].toUpperCase()+Jg.slice(1);vs(LN,"on"+VN)}vs(fb,"onAnimationEnd"),vs(mb,"onAnimationIteration"),vs(pb,"onAnimationStart"),vs("dblclick","onDoubleClick"),vs("focusin","onFocus"),vs("focusout","onBlur"),vs(eN,"onTransitionRun"),vs(tN,"onTransitionStart"),vs(nN,"onTransitionCancel"),vs(gb,"onTransitionEnd"),Is("onMouseEnter",["mouseout","mouseover"]),Is("onMouseLeave",["mouseout","mouseover"]),Is("onPointerEnter",["pointerout","pointerover"]),Is("onPointerLeave",["pointerout","pointerover"]),js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),js("onBeforeInput",["compositionend","keypress","textInput","paste"]),js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cu));function L2(s,i){i=(i&4)!==0;for(var l=0;l<s.length;l++){var d=s[l],g=d.event;d=d.listeners;e:{var v=void 0;if(i)for(var S=d.length-1;0<=S;S--){var D=d[S],q=D.instance,ne=D.currentTarget;if(D=D.listener,q!==v&&g.isPropagationStopped())break e;v=D,g.currentTarget=ne;try{v(g)}catch(ge){oh(ge)}g.currentTarget=null,v=q}else for(S=0;S<d.length;S++){if(D=d[S],q=D.instance,ne=D.currentTarget,D=D.listener,q!==v&&g.isPropagationStopped())break e;v=D,g.currentTarget=ne;try{v(g)}catch(ge){oh(ge)}g.currentTarget=null,v=q}}}}function At(s,i){var l=i[nl];l===void 0&&(l=i[nl]=new Set);var d=s+"__bubble";l.has(d)||(V2(i,s,2,!1),l.add(d))}function Zg(s,i,l){var d=0;i&&(d|=4),V2(l,s,d,i)}var Yh="_reactListening"+Math.random().toString(36).slice(2);function e0(s){if(!s[Yh]){s[Yh]=!0,Lc.forEach(function(l){l!=="selectionchange"&&(zN.has(l)||Zg(l,!1,s),Zg(l,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[Yh]||(i[Yh]=!0,Zg("selectionchange",!1,i))}}function V2(s,i,l,d){switch(f_(i)){case 2:var g=f5;break;case 8:g=m5;break;default:g=p0}l=g.bind(null,i,l,s),g=void 0,!so||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),d?g!==void 0?s.addEventListener(i,l,{capture:!0,passive:g}):s.addEventListener(i,l,!0):g!==void 0?s.addEventListener(i,l,{passive:g}):s.addEventListener(i,l,!1)}function t0(s,i,l,d,g){var v=d;if((i&1)===0&&(i&2)===0&&d!==null)e:for(;;){if(d===null)return;var S=d.tag;if(S===3||S===4){var D=d.stateNode.containerInfo;if(D===g)break;if(S===4)for(S=d.return;S!==null;){var q=S.tag;if((q===3||q===4)&&S.stateNode.containerInfo===g)return;S=S.return}for(;D!==null;){if(S=As(D),S===null)return;if(q=S.tag,q===5||q===6||q===26||q===27){d=v=S;continue e}D=D.parentNode}}d=d.return}Wi(function(){var ne=v,ge=Xr(l),xe=[];e:{var ie=vb.get(s);if(ie!==void 0){var ce=Os,Ge=s;switch(s){case"keypress":if(ao(l)===0)break e;case"keydown":case"keyup":ce=sh;break;case"focusin":Ge="focus",ce=lo;break;case"focusout":Ge="blur",ce=lo;break;case"beforeblur":case"afterblur":ce=lo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Xc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=Qd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=_;break;case fb:case mb:case pb:ce=Wd;break;case gb:ce=V;break;case"scroll":case"scrollend":ce=Qc;break;case"wheel":ce=le;break;case"copy":case"cut":case"paste":ce=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=fi;break;case"toggle":case"beforetoggle":ce=yt}var at=(i&4)!==0,tn=!at&&(s==="scroll"||s==="scrollend"),Q=at?ie!==null?ie+"Capture":null:ie;at=[];for(var Y=ne,te;Y!==null;){var be=Y;if(te=be.stateNode,be=be.tag,be!==5&&be!==26&&be!==27||te===null||Q===null||(be=fs(Y,Q),be!=null&&at.push(Tu(Y,be,te))),tn)break;Y=Y.return}0<at.length&&(ie=new ce(ie,Ge,null,l,ge),xe.push({event:ie,listeners:at}))}}if((i&7)===0){e:{if(ie=s==="mouseover"||s==="pointerover",ce=s==="mouseout"||s==="pointerout",ie&&l!==Gc&&(Ge=l.relatedTarget||l.fromElement)&&(As(Ge)||Ge[ks]))break e;if((ce||ie)&&(ie=ge.window===ge?ge:(ie=ge.ownerDocument)?ie.defaultView||ie.parentWindow:window,ce?(Ge=l.relatedTarget||l.toElement,ce=ne,Ge=Ge?As(Ge):null,Ge!==null&&(tn=o(Ge),at=Ge.tag,Ge!==tn||at!==5&&at!==27&&at!==6)&&(Ge=null)):(ce=null,Ge=ne),ce!==Ge)){if(at=Xc,be="onMouseLeave",Q="onMouseEnter",Y="mouse",(s==="pointerout"||s==="pointerover")&&(at=fi,be="onPointerLeave",Q="onPointerEnter",Y="pointer"),tn=ce==null?ie:Mr(ce),te=Ge==null?ie:Mr(Ge),ie=new at(be,Y+"leave",ce,l,ge),ie.target=tn,ie.relatedTarget=te,be=null,As(ge)===ne&&(at=new at(Q,Y+"enter",Ge,l,ge),at.target=te,at.relatedTarget=tn,be=at),tn=be,ce&&Ge)t:{for(at=UN,Q=ce,Y=Ge,te=0,be=Q;be;be=at(be))te++;be=0;for(var nt=Y;nt;nt=at(nt))be++;for(;0<te-be;)Q=at(Q),te--;for(;0<be-te;)Y=at(Y),be--;for(;te--;){if(Q===Y||Y!==null&&Q===Y.alternate){at=Q;break t}Q=at(Q),Y=at(Y)}at=null}else at=null;ce!==null&&z2(xe,ie,ce,at,!1),Ge!==null&&tn!==null&&z2(xe,tn,Ge,at,!0)}}e:{if(ie=ne?Mr(ne):window,ce=ie.nodeName&&ie.nodeName.toLowerCase(),ce==="select"||ce==="input"&&ie.type==="file")var zt=nb;else if(eb(ie))if(rb)zt=W6;else{zt=Q6;var Xe=K6}else ce=ie.nodeName,!ce||ce.toLowerCase()!=="input"||ie.type!=="checkbox"&&ie.type!=="radio"?ne&&al(ne.elementType)&&(zt=nb):zt=X6;if(zt&&(zt=zt(s,ne))){tb(xe,zt,l,ge);break e}Xe&&Xe(s,ie,ne),s==="focusout"&&ne&&ie.type==="number"&&ne.memoizedProps.value!=null&&Hc(ie,"number",ie.value)}switch(Xe=ne?Mr(ne):window,s){case"focusin":(eb(Xe)||Xe.contentEditable==="true")&&(ml=Xe,Rp=ne,tu=null);break;case"focusout":tu=Rp=ml=null;break;case"mousedown":jp=!0;break;case"contextmenu":case"mouseup":case"dragend":jp=!1,db(xe,l,ge);break;case"selectionchange":if(Z6)break;case"keydown":case"keyup":db(xe,l,ge)}var _t;if($t)e:{switch(s){case"compositionstart":var jt="onCompositionStart";break e;case"compositionend":jt="onCompositionEnd";break e;case"compositionupdate":jt="onCompositionUpdate";break e}jt=void 0}else fl?co(s,l)&&(jt="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(jt="onCompositionStart");jt&&(zs&&l.locale!=="ko"&&(fl||jt!=="onCompositionStart"?jt==="onCompositionEnd"&&fl&&(_t=Kc()):(Ps=ge,Yc="value"in Ps?Ps.value:Ps.textContent,fl=!0)),Xe=Kh(ne,jt),0<Xe.length&&(jt=new Vs(jt,s,null,l,ge),xe.push({event:jt,listeners:Xe}),_t?jt.data=_t:(_t=hl(l),_t!==null&&(jt.data=_t)))),(_t=Jr?$6(s,l):q6(s,l))&&(jt=Kh(ne,"onBeforeInput"),0<jt.length&&(Xe=new Vs("onBeforeInput","beforeinput",null,l,ge),xe.push({event:Xe,listeners:jt}),Xe.data=_t)),ON(xe,s,ne,l,ge)}L2(xe,i)})}function Tu(s,i,l){return{instance:s,listener:i,currentTarget:l}}function Kh(s,i){for(var l=i+"Capture",d=[];s!==null;){var g=s,v=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=fs(s,l),g!=null&&d.unshift(Tu(s,g,v)),g=fs(s,i),g!=null&&d.push(Tu(s,g,v))),s.tag===3)return d;s=s.return}return[]}function UN(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function z2(s,i,l,d,g){for(var v=i._reactName,S=[];l!==null&&l!==d;){var D=l,q=D.alternate,ne=D.stateNode;if(D=D.tag,q!==null&&q===d)break;D!==5&&D!==26&&D!==27||ne===null||(q=ne,g?(ne=fs(l,v),ne!=null&&S.unshift(Tu(l,ne,q))):g||(ne=fs(l,v),ne!=null&&S.push(Tu(l,ne,q)))),l=l.return}S.length!==0&&s.push({event:i,listeners:S})}var BN=/\r\n?/g,FN=/\u0000|\uFFFD/g;function U2(s){return(typeof s=="string"?s:""+s).replace(BN,`
`).replace(FN,"")}function B2(s,i){return i=U2(i),U2(s)===i}function en(s,i,l,d,g,v){switch(l){case"children":typeof d=="string"?i==="body"||i==="textarea"&&d===""||Sr(s,d):(typeof d=="number"||typeof d=="bigint")&&i!=="body"&&Sr(s,""+d);break;case"className":Pr(s,"class",d);break;case"tabIndex":Pr(s,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Pr(s,l,d);break;case"style":qc(s,d,v);break;case"data":if(i!=="object"){Pr(s,"data",d);break}case"src":case"href":if(d===""&&(i!=="a"||l!=="href")){s.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(l);break}d=ol(""+d),s.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(l==="formAction"?(i!=="input"&&en(s,i,"name",g.name,g,null),en(s,i,"formEncType",g.formEncType,g,null),en(s,i,"formMethod",g.formMethod,g,null),en(s,i,"formTarget",g.formTarget,g,null)):(en(s,i,"encType",g.encType,g,null),en(s,i,"method",g.method,g,null),en(s,i,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(l);break}d=ol(""+d),s.setAttribute(l,d);break;case"onClick":d!=null&&(s.onclick=hs);break;case"onScroll":d!=null&&At("scroll",s);break;case"onScrollEnd":d!=null&&At("scrollend",s);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(l=d.__html,l!=null){if(g.children!=null)throw Error(r(60));s.innerHTML=l}}break;case"multiple":s.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":s.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){s.removeAttribute("xlink:href");break}l=ol(""+d),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(l,""+d):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":d===!0?s.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(l,d):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?s.setAttribute(l,d):s.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?s.removeAttribute(l):s.setAttribute(l,d);break;case"popover":At("beforetoggle",s),At("toggle",s),sl(s,"popover",d);break;case"xlinkActuate":kn(s,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":kn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":kn(s,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":kn(s,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":kn(s,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":kn(s,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":kn(s,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":kn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":kn(s,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":sl(s,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Kd.get(l)||l,sl(s,l,d))}}function n0(s,i,l,d,g,v){switch(l){case"style":qc(s,d,v);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(l=d.__html,l!=null){if(g.children!=null)throw Error(r(60));s.innerHTML=l}}break;case"children":typeof d=="string"?Sr(s,d):(typeof d=="number"||typeof d=="bigint")&&Sr(s,""+d);break;case"onScroll":d!=null&&At("scroll",s);break;case"onScrollEnd":d!=null&&At("scrollend",s);break;case"onClick":d!=null&&(s.onclick=hs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Vc.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),i=l.slice(2,g?l.length-7:void 0),v=s[qn]||null,v=v!=null?v[l]:null,typeof v=="function"&&s.removeEventListener(i,v,g),typeof d=="function")){typeof v!="function"&&v!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(i,d,g);break e}l in s?s[l]=d:d===!0?s.setAttribute(l,""):sl(s,l,d)}}}function tr(s,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":At("error",s),At("load",s);var d=!1,g=!1,v;for(v in l)if(l.hasOwnProperty(v)){var S=l[v];if(S!=null)switch(v){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:en(s,i,v,S,l,null)}}g&&en(s,i,"srcSet",l.srcSet,l,null),d&&en(s,i,"src",l.src,l,null);return;case"input":At("invalid",s);var D=v=S=g=null,q=null,ne=null;for(d in l)if(l.hasOwnProperty(d)){var ge=l[d];if(ge!=null)switch(d){case"name":g=ge;break;case"type":S=ge;break;case"checked":q=ge;break;case"defaultChecked":ne=ge;break;case"value":v=ge;break;case"defaultValue":D=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(r(137,i));break;default:en(s,i,d,ge,l,null)}}qd(s,v,D,q,ne,S,g,!1);return;case"select":At("invalid",s),d=S=v=null;for(g in l)if(l.hasOwnProperty(g)&&(D=l[g],D!=null))switch(g){case"value":v=D;break;case"defaultValue":S=D;break;case"multiple":d=D;default:en(s,i,g,D,l,null)}i=v,l=S,s.multiple=!!d,i!=null?Yi(s,!!d,i,!1):l!=null&&Yi(s,!!d,l,!0);return;case"textarea":At("invalid",s),v=g=d=null;for(S in l)if(l.hasOwnProperty(S)&&(D=l[S],D!=null))switch(S){case"value":d=D;break;case"defaultValue":g=D;break;case"children":v=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(r(91));break;default:en(s,i,S,D,l,null)}Ki(s,d,g,v);return;case"option":for(q in l)if(l.hasOwnProperty(q)&&(d=l[q],d!=null))switch(q){case"selected":s.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:en(s,i,q,d,l,null)}return;case"dialog":At("beforetoggle",s),At("toggle",s),At("cancel",s),At("close",s);break;case"iframe":case"object":At("load",s);break;case"video":case"audio":for(d=0;d<Cu.length;d++)At(Cu[d],s);break;case"image":At("error",s),At("load",s);break;case"details":At("toggle",s);break;case"embed":case"source":case"link":At("error",s),At("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in l)if(l.hasOwnProperty(ne)&&(d=l[ne],d!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:en(s,i,ne,d,l,null)}return;default:if(al(i)){for(ge in l)l.hasOwnProperty(ge)&&(d=l[ge],d!==void 0&&n0(s,i,ge,d,l,void 0));return}}for(D in l)l.hasOwnProperty(D)&&(d=l[D],d!=null&&en(s,i,D,d,l,null))}function HN(s,i,l,d){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,S=null,D=null,q=null,ne=null,ge=null;for(ce in l){var xe=l[ce];if(l.hasOwnProperty(ce)&&xe!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":q=xe;default:d.hasOwnProperty(ce)||en(s,i,ce,null,d,xe)}}for(var ie in d){var ce=d[ie];if(xe=l[ie],d.hasOwnProperty(ie)&&(ce!=null||xe!=null))switch(ie){case"type":v=ce;break;case"name":g=ce;break;case"checked":ne=ce;break;case"defaultChecked":ge=ce;break;case"value":S=ce;break;case"defaultValue":D=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,i));break;default:ce!==xe&&en(s,i,ie,ce,d,xe)}}il(s,S,D,q,ne,ge,v,g);return;case"select":ce=S=D=ie=null;for(v in l)if(q=l[v],l.hasOwnProperty(v)&&q!=null)switch(v){case"value":break;case"multiple":ce=q;default:d.hasOwnProperty(v)||en(s,i,v,null,d,q)}for(g in d)if(v=d[g],q=l[g],d.hasOwnProperty(g)&&(v!=null||q!=null))switch(g){case"value":ie=v;break;case"defaultValue":D=v;break;case"multiple":S=v;default:v!==q&&en(s,i,g,v,d,q)}i=D,l=S,d=ce,ie!=null?Yi(s,!!l,ie,!1):!!d!=!!l&&(i!=null?Yi(s,!!l,i,!0):Yi(s,!!l,l?[]:"",!1));return;case"textarea":ce=ie=null;for(D in l)if(g=l[D],l.hasOwnProperty(D)&&g!=null&&!d.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:en(s,i,D,null,d,g)}for(S in d)if(g=d[S],v=l[S],d.hasOwnProperty(S)&&(g!=null||v!=null))switch(S){case"value":ie=g;break;case"defaultValue":ce=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==v&&en(s,i,S,g,d,v)}Gd(s,ie,ce);return;case"option":for(var Ge in l)if(ie=l[Ge],l.hasOwnProperty(Ge)&&ie!=null&&!d.hasOwnProperty(Ge))switch(Ge){case"selected":s.selected=!1;break;default:en(s,i,Ge,null,d,ie)}for(q in d)if(ie=d[q],ce=l[q],d.hasOwnProperty(q)&&ie!==ce&&(ie!=null||ce!=null))switch(q){case"selected":s.selected=ie&&typeof ie!="function"&&typeof ie!="symbol";break;default:en(s,i,q,ie,d,ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var at in l)ie=l[at],l.hasOwnProperty(at)&&ie!=null&&!d.hasOwnProperty(at)&&en(s,i,at,null,d,ie);for(ne in d)if(ie=d[ne],ce=l[ne],d.hasOwnProperty(ne)&&ie!==ce&&(ie!=null||ce!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,i));break;default:en(s,i,ne,ie,d,ce)}return;default:if(al(i)){for(var tn in l)ie=l[tn],l.hasOwnProperty(tn)&&ie!==void 0&&!d.hasOwnProperty(tn)&&n0(s,i,tn,void 0,d,ie);for(ge in d)ie=d[ge],ce=l[ge],!d.hasOwnProperty(ge)||ie===ce||ie===void 0&&ce===void 0||n0(s,i,ge,ie,d,ce);return}}for(var Q in l)ie=l[Q],l.hasOwnProperty(Q)&&ie!=null&&!d.hasOwnProperty(Q)&&en(s,i,Q,null,d,ie);for(xe in d)ie=d[xe],ce=l[xe],!d.hasOwnProperty(xe)||ie===ce||ie==null&&ce==null||en(s,i,xe,ie,d,ce)}function F2(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function $N(){if(typeof performance.getEntriesByType=="function"){for(var s=0,i=0,l=performance.getEntriesByType("resource"),d=0;d<l.length;d++){var g=l[d],v=g.transferSize,S=g.initiatorType,D=g.duration;if(v&&D&&F2(S)){for(S=0,D=g.responseEnd,d+=1;d<l.length;d++){var q=l[d],ne=q.startTime;if(ne>D)break;var ge=q.transferSize,xe=q.initiatorType;ge&&F2(xe)&&(q=q.responseEnd,S+=ge*(q<D?1:(D-ne)/(q-ne)))}if(--d,i+=8*(v+S)/(g.duration/1e3),s++,10<s)break}}if(0<s)return i/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var r0=null,s0=null;function Qh(s){return s.nodeType===9?s:s.ownerDocument}function H2(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $2(s,i){if(s===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&i==="foreignObject"?0:s}function i0(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var a0=null;function qN(){var s=window.event;return s&&s.type==="popstate"?s===a0?!1:(a0=s,!0):(a0=null,!1)}var q2=typeof setTimeout=="function"?setTimeout:void 0,GN=typeof clearTimeout=="function"?clearTimeout:void 0,G2=typeof Promise=="function"?Promise:void 0,YN=typeof queueMicrotask=="function"?queueMicrotask:typeof G2<"u"?function(s){return G2.resolve(null).then(s).catch(KN)}:q2;function KN(s){setTimeout(function(){throw s})}function va(s){return s==="head"}function Y2(s,i){var l=i,d=0;do{var g=l.nextSibling;if(s.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"||l==="/&"){if(d===0){s.removeChild(g),Bl(i);return}d--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")d++;else if(l==="html")ku(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,ku(l);for(var v=l.firstChild;v;){var S=v.nextSibling,D=v.nodeName;v[Ns]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&v.rel.toLowerCase()==="stylesheet"||l.removeChild(v),v=S}}else l==="body"&&ku(s.ownerDocument.body);l=g}while(l);Bl(i)}function K2(s,i){var l=s;s=0;do{var d=l.nextSibling;if(l.nodeType===1?i?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(i?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=d}while(l)}function o0(s){var i=s.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":o0(l),rl(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function QN(s,i,l,d){for(;s.nodeType===1;){var g=l;if(s.nodeName.toLowerCase()!==i.toLowerCase()){if(!d&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(d){if(!s[Ns])switch(i){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(v=s.getAttribute("rel"),v==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(v!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(v=s.getAttribute("src"),(v!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(i==="input"&&s.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===v)return s}else return s;if(s=is(s.nextSibling),s===null)break}return null}function XN(s,i,l){if(i==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=is(s.nextSibling),s===null))return null;return s}function Q2(s,i){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!i||(s=is(s.nextSibling),s===null))return null;return s}function l0(s){return s.data==="$?"||s.data==="$~"}function c0(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function WN(s,i){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=i;else if(s.data!=="$?"||l.readyState!=="loading")i();else{var d=function(){i(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),s._reactRetry=d}}function is(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return s}var u0=null;function X2(s){s=s.nextSibling;for(var i=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(i===0)return is(s.nextSibling);i--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||i++}s=s.nextSibling}return null}function W2(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(i===0)return s;i--}else l!=="/$"&&l!=="/&"||i++}s=s.previousSibling}return null}function J2(s,i,l){switch(i=Qh(l),s){case"html":if(s=i.documentElement,!s)throw Error(r(452));return s;case"head":if(s=i.head,!s)throw Error(r(453));return s;case"body":if(s=i.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function ku(s){for(var i=s.attributes;i.length;)s.removeAttributeNode(i[0]);rl(s)}var as=new Map,Z2=new Set;function Xh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Ni=J.d;J.d={f:JN,r:ZN,D:e5,C:t5,L:n5,m:r5,X:i5,S:s5,M:a5};function JN(){var s=Ni.f(),i=Bh();return s||i}function ZN(s){var i=Qr(s);i!==null&&i.tag===5&&i.type==="form"?gx(i):Ni.r(s)}var Vl=typeof document>"u"?null:document;function e_(s,i,l){var d=Vl;if(d&&typeof i=="string"&&i){var g=wr(i);g='link[rel="'+s+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),Z2.has(g)||(Z2.add(g),s={rel:s,crossOrigin:l,href:i},d.querySelector(g)===null&&(i=d.createElement("link"),tr(i,"link",s),Tn(i),d.head.appendChild(i)))}}function e5(s){Ni.D(s),e_("dns-prefetch",s,null)}function t5(s,i){Ni.C(s,i),e_("preconnect",s,i)}function n5(s,i,l){Ni.L(s,i,l);var d=Vl;if(d&&s&&i){var g='link[rel="preload"][as="'+wr(i)+'"]';i==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+wr(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+wr(l.imageSizes)+'"]')):g+='[href="'+wr(s)+'"]';var v=g;switch(i){case"style":v=zl(s);break;case"script":v=Ul(s)}as.has(v)||(s=b({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:s,as:i},l),as.set(v,s),d.querySelector(g)!==null||i==="style"&&d.querySelector(Nu(v))||i==="script"&&d.querySelector(Au(v))||(i=d.createElement("link"),tr(i,"link",s),Tn(i),d.head.appendChild(i)))}}function r5(s,i){Ni.m(s,i);var l=Vl;if(l&&s){var d=i&&typeof i.as=="string"?i.as:"script",g='link[rel="modulepreload"][as="'+wr(d)+'"][href="'+wr(s)+'"]',v=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Ul(s)}if(!as.has(v)&&(s=b({rel:"modulepreload",href:s},i),as.set(v,s),l.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Au(v)))return}d=l.createElement("link"),tr(d,"link",s),Tn(d),l.head.appendChild(d)}}}function s5(s,i,l){Ni.S(s,i,l);var d=Vl;if(d&&s){var g=Rs(d).hoistableStyles,v=zl(s);i=i||"default";var S=g.get(v);if(!S){var D={loading:0,preload:null};if(S=d.querySelector(Nu(v)))D.loading=5;else{s=b({rel:"stylesheet",href:s,"data-precedence":i},l),(l=as.get(v))&&d0(s,l);var q=S=d.createElement("link");Tn(q),tr(q,"link",s),q._p=new Promise(function(ne,ge){q.onload=ne,q.onerror=ge}),q.addEventListener("load",function(){D.loading|=1}),q.addEventListener("error",function(){D.loading|=2}),D.loading|=4,Wh(S,i,d)}S={type:"stylesheet",instance:S,count:1,state:D},g.set(v,S)}}}function i5(s,i){Ni.X(s,i);var l=Vl;if(l&&s){var d=Rs(l).hoistableScripts,g=Ul(s),v=d.get(g);v||(v=l.querySelector(Au(g)),v||(s=b({src:s,async:!0},i),(i=as.get(g))&&h0(s,i),v=l.createElement("script"),Tn(v),tr(v,"link",s),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(g,v))}}function a5(s,i){Ni.M(s,i);var l=Vl;if(l&&s){var d=Rs(l).hoistableScripts,g=Ul(s),v=d.get(g);v||(v=l.querySelector(Au(g)),v||(s=b({src:s,async:!0,type:"module"},i),(i=as.get(g))&&h0(s,i),v=l.createElement("script"),Tn(v),tr(v,"link",s),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(g,v))}}function t_(s,i,l,d){var g=(g=Ue.current)?Xh(g):null;if(!g)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=zl(l.href),l=Rs(g).hoistableStyles,d=l.get(i),d||(d={type:"style",instance:null,count:0,state:null},l.set(i,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=zl(l.href);var v=Rs(g).hoistableStyles,S=v.get(s);if(S||(g=g.ownerDocument||g,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(s,S),(v=g.querySelector(Nu(s)))&&!v._p&&(S.instance=v,S.state.loading=5),as.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},as.set(s,l),v||o5(g,s,l,S.state))),i&&d===null)throw Error(r(528,""));return S}if(i&&d!==null)throw Error(r(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ul(l),l=Rs(g).hoistableScripts,d=l.get(i),d||(d={type:"script",instance:null,count:0,state:null},l.set(i,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function zl(s){return'href="'+wr(s)+'"'}function Nu(s){return'link[rel="stylesheet"]['+s+"]"}function n_(s){return b({},s,{"data-precedence":s.precedence,precedence:null})}function o5(s,i,l,d){s.querySelector('link[rel="preload"][as="style"]['+i+"]")?d.loading=1:(i=s.createElement("link"),d.preload=i,i.addEventListener("load",function(){return d.loading|=1}),i.addEventListener("error",function(){return d.loading|=2}),tr(i,"link",l),Tn(i),s.head.appendChild(i))}function Ul(s){return'[src="'+wr(s)+'"]'}function Au(s){return"script[async]"+s}function r_(s,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var d=s.querySelector('style[data-href~="'+wr(l.href)+'"]');if(d)return i.instance=d,Tn(d),d;var g=b({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(s.ownerDocument||s).createElement("style"),Tn(d),tr(d,"style",g),Wh(d,l.precedence,s),i.instance=d;case"stylesheet":g=zl(l.href);var v=s.querySelector(Nu(g));if(v)return i.state.loading|=4,i.instance=v,Tn(v),v;d=n_(l),(g=as.get(g))&&d0(d,g),v=(s.ownerDocument||s).createElement("link"),Tn(v);var S=v;return S._p=new Promise(function(D,q){S.onload=D,S.onerror=q}),tr(v,"link",d),i.state.loading|=4,Wh(v,l.precedence,s),i.instance=v;case"script":return v=Ul(l.src),(g=s.querySelector(Au(v)))?(i.instance=g,Tn(g),g):(d=l,(g=as.get(v))&&(d=b({},l),h0(d,g)),s=s.ownerDocument||s,g=s.createElement("script"),Tn(g),tr(g,"link",d),s.head.appendChild(g),i.instance=g);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(d=i.instance,i.state.loading|=4,Wh(d,l.precedence,s));return i.instance}function Wh(s,i,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,v=g,S=0;S<d.length;S++){var D=d[S];if(D.dataset.precedence===i)v=D;else if(v!==g)break}v?v.parentNode.insertBefore(s,v.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(s,i.firstChild))}function d0(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.title==null&&(s.title=i.title)}function h0(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.integrity==null&&(s.integrity=i.integrity)}var Jh=null;function s_(s,i,l){if(Jh===null){var d=new Map,g=Jh=new Map;g.set(l,d)}else g=Jh,d=g.get(l),d||(d=new Map,g.set(l,d));if(d.has(s))return d;for(d.set(s,null),l=l.getElementsByTagName(s),g=0;g<l.length;g++){var v=l[g];if(!(v[Ns]||v[Cn]||s==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var S=v.getAttribute(i)||"";S=s+S;var D=d.get(S);D?D.push(v):d.set(S,[v])}}return d}function i_(s,i,l){s=s.ownerDocument||s,s.head.insertBefore(l,i==="title"?s.querySelector("head > title"):null)}function l5(s,i,l){if(l===1||i.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return s=i.disabled,typeof i.precedence=="string"&&s==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function a_(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function c5(s,i,l,d){if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var g=zl(d.href),v=i.querySelector(Nu(g));if(v){i=v._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(s.count++,s=Zh.bind(s),i.then(s,s)),l.state.loading|=4,l.instance=v,Tn(v);return}v=i.ownerDocument||i,d=n_(d),(g=as.get(g))&&d0(d,g),v=v.createElement("link"),Tn(v);var S=v;S._p=new Promise(function(D,q){S.onload=D,S.onerror=q}),tr(v,"link",d),l.instance=v}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,i),(i=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=Zh.bind(s),i.addEventListener("load",l),i.addEventListener("error",l))}}var f0=0;function u5(s,i){return s.stylesheets&&s.count===0&&tf(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var d=setTimeout(function(){if(s.stylesheets&&tf(s,s.stylesheets),s.unsuspend){var v=s.unsuspend;s.unsuspend=null,v()}},6e4+i);0<s.imgBytes&&f0===0&&(f0=62500*$N());var g=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&tf(s,s.stylesheets),s.unsuspend)){var v=s.unsuspend;s.unsuspend=null,v()}},(s.imgBytes>f0?50:800)+i);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(d),clearTimeout(g)}}:null}function Zh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)tf(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var ef=null;function tf(s,i){s.stylesheets=null,s.unsuspend!==null&&(s.count++,ef=new Map,i.forEach(d5,s),ef=null,Zh.call(s))}function d5(s,i){if(!(i.state.loading&4)){var l=ef.get(s);if(l)var d=l.get(null);else{l=new Map,ef.set(s,l);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var S=g[v];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),d=S)}d&&l.set(null,d)}g=i.instance,S=g.getAttribute("data-precedence"),v=l.get(S)||d,v===d&&l.set(null,g),l.set(S,g),this.count++,d=Zh.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),v?v.parentNode.insertBefore(g,v.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),i.state.loading|=4}}var Ru={$$typeof:I,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function h5(s,i,l,d,g,v,S,D,q){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=He(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=He(0),this.hiddenUpdates=He(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function o_(s,i,l,d,g,v,S,D,q,ne,ge,xe){return s=new h5(s,i,l,S,q,ne,ge,xe,D),i=1,v===!0&&(i|=24),v=Lr(3,null,null,i),s.current=v,v.stateNode=s,i=Gp(),i.refCount++,s.pooledCache=i,i.refCount++,v.memoizedState={element:d,isDehydrated:l,cache:i},Xp(v),s}function l_(s){return s?(s=vl,s):vl}function c_(s,i,l,d,g,v){g=l_(g),d.context===null?d.context=g:d.pendingContext=g,d=aa(i),d.payload={element:l},v=v===void 0?null:v,v!==null&&(d.callback=v),l=oa(s,d,i),l!==null&&(Nr(l,s,i),lu(l,s,i))}function u_(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<i?l:i}}function m0(s,i){u_(s,i),(s=s.alternate)&&u_(s,i)}function d_(s){if(s.tag===13||s.tag===31){var i=fo(s,67108864);i!==null&&Nr(i,s,67108864),m0(s,67108864)}}function h_(s){if(s.tag===13||s.tag===31){var i=Fr();i=eo(i);var l=fo(s,i);l!==null&&Nr(l,s,i),m0(s,i)}}var nf=!0;function f5(s,i,l,d){var g=G.T;G.T=null;var v=J.p;try{J.p=2,p0(s,i,l,d)}finally{J.p=v,G.T=g}}function m5(s,i,l,d){var g=G.T;G.T=null;var v=J.p;try{J.p=8,p0(s,i,l,d)}finally{J.p=v,G.T=g}}function p0(s,i,l,d){if(nf){var g=g0(d);if(g===null)t0(s,i,d,rf,l),m_(s,d);else if(g5(g,s,i,l,d))d.stopPropagation();else if(m_(s,d),i&4&&-1<p5.indexOf(s)){for(;g!==null;){var v=Qr(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var S=kt(v.pendingLanes);if(S!==0){var D=v;for(D.pendingLanes|=2,D.entangledLanes|=2;S;){var q=1<<31-nn(S);D.entanglements[1]|=q,S&=~q}Hs(v),(qt&6)===0&&(zh=Ie()+500,Eu(0))}}break;case 31:case 13:D=fo(v,2),D!==null&&Nr(D,v,2),Bh(),m0(v,2)}if(v=g0(d),v===null&&t0(s,i,d,rf,l),v===g)break;g=v}g!==null&&d.stopPropagation()}else t0(s,i,d,null,l)}}function g0(s){return s=Xr(s),v0(s)}var rf=null;function v0(s){if(rf=null,s=As(s),s!==null){var i=o(s);if(i===null)s=null;else{var l=i.tag;if(l===13){if(s=u(i),s!==null)return s;s=null}else if(l===31){if(s=h(i),s!==null)return s;s=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null)}}return rf=s,null}function f_(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(st()){case Pt:return 2;case $n:return 8;case Se:case Fe:return 32;case lt:return 268435456;default:return 32}default:return 32}}var y0=!1,ya=null,ba=null,xa=null,ju=new Map,Iu=new Map,_a=[],p5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function m_(s,i){switch(s){case"focusin":case"focusout":ya=null;break;case"dragenter":case"dragleave":ba=null;break;case"mouseover":case"mouseout":xa=null;break;case"pointerover":case"pointerout":ju.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Iu.delete(i.pointerId)}}function Du(s,i,l,d,g,v){return s===null||s.nativeEvent!==v?(s={blockedOn:i,domEventName:l,eventSystemFlags:d,nativeEvent:v,targetContainers:[g]},i!==null&&(i=Qr(i),i!==null&&d_(i)),s):(s.eventSystemFlags|=d,i=s.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),s)}function g5(s,i,l,d,g){switch(i){case"focusin":return ya=Du(ya,s,i,l,d,g),!0;case"dragenter":return ba=Du(ba,s,i,l,d,g),!0;case"mouseover":return xa=Du(xa,s,i,l,d,g),!0;case"pointerover":var v=g.pointerId;return ju.set(v,Du(ju.get(v)||null,s,i,l,d,g)),!0;case"gotpointercapture":return v=g.pointerId,Iu.set(v,Du(Iu.get(v)||null,s,i,l,d,g)),!0}return!1}function p_(s){var i=As(s.target);if(i!==null){var l=o(i);if(l!==null){if(i=l.tag,i===13){if(i=u(l),i!==null){s.blockedOn=i,us(s.priority,function(){h_(l)});return}}else if(i===31){if(i=h(l),i!==null){s.blockedOn=i,us(s.priority,function(){h_(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function sf(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var l=g0(s.nativeEvent);if(l===null){l=s.nativeEvent;var d=new l.constructor(l.type,l);Gc=d,l.target.dispatchEvent(d),Gc=null}else return i=Qr(l),i!==null&&d_(i),s.blockedOn=l,!1;i.shift()}return!0}function g_(s,i,l){sf(s)&&l.delete(i)}function v5(){y0=!1,ya!==null&&sf(ya)&&(ya=null),ba!==null&&sf(ba)&&(ba=null),xa!==null&&sf(xa)&&(xa=null),ju.forEach(g_),Iu.forEach(g_)}function af(s,i){s.blockedOn===i&&(s.blockedOn=null,y0||(y0=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,v5)))}var of=null;function v_(s){of!==s&&(of=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){of===s&&(of=null);for(var i=0;i<s.length;i+=3){var l=s[i],d=s[i+1],g=s[i+2];if(typeof d!="function"){if(v0(d||l)===null)continue;break}var v=Qr(l);v!==null&&(s.splice(i,3),i-=3,gg(v,{pending:!0,data:g,method:l.method,action:d},d,g))}}))}function Bl(s){function i(q){return af(q,s)}ya!==null&&af(ya,s),ba!==null&&af(ba,s),xa!==null&&af(xa,s),ju.forEach(i),Iu.forEach(i);for(var l=0;l<_a.length;l++){var d=_a[l];d.blockedOn===s&&(d.blockedOn=null)}for(;0<_a.length&&(l=_a[0],l.blockedOn===null);)p_(l),l.blockedOn===null&&_a.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var g=l[d],v=l[d+1],S=g[qn]||null;if(typeof v=="function")S||v_(l);else if(S){var D=null;if(v&&v.hasAttribute("formAction")){if(g=v,S=v[qn]||null)D=S.formAction;else if(v0(g)!==null)continue}else D=S.action;typeof D=="function"?l[d+1]=D:(l.splice(d,3),d-=3),v_(l)}}}function y_(){function s(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(S){return g=S})},focusReset:"manual",scroll:"manual"})}function i(){g!==null&&(g(),g=null),d||setTimeout(l,20)}function l(){if(!d&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,g=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(l,100),function(){d=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),g!==null&&(g(),g=null)}}}function b0(s){this._internalRoot=s}lf.prototype.render=b0.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(r(409));var l=i.current,d=Fr();c_(l,d,s,i,null,null)},lf.prototype.unmount=b0.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;c_(s.current,2,null,s,null,null),Bh(),i[ks]=null}};function lf(s){this._internalRoot=s}lf.prototype.unstable_scheduleHydration=function(s){if(s){var i=Bd();s={blockedOn:null,target:s,priority:i};for(var l=0;l<_a.length&&i!==0&&i<_a[l].priority;l++);_a.splice(l,0,s),l===0&&p_(s)}};var b_=e.version;if(b_!=="19.2.3")throw Error(r(527,b_,"19.2.3"));J.findDOMNode=function(s){var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=p(i),s=s!==null?y(s):null,s=s===null?null:s.stateNode,s};var y5={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cf.isDisabled&&cf.supportsFiber)try{Tt=cf.inject(y5),Ze=cf}catch{}}return Pu.createRoot=function(s,i){if(!a(s))throw Error(r(299));var l=!1,d="",g=Tx,v=kx,S=Nx;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onUncaughtError!==void 0&&(g=i.onUncaughtError),i.onCaughtError!==void 0&&(v=i.onCaughtError),i.onRecoverableError!==void 0&&(S=i.onRecoverableError)),i=o_(s,1,!1,null,null,l,d,null,g,v,S,y_),s[ks]=i.current,e0(s),new b0(i)},Pu.hydrateRoot=function(s,i,l){if(!a(s))throw Error(r(299));var d=!1,g="",v=Tx,S=kx,D=Nx,q=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(D=l.onRecoverableError),l.formState!==void 0&&(q=l.formState)),i=o_(s,1,!0,i,l??null,d,g,q,v,S,D,y_),i.context=l_(null),l=i.current,d=Fr(),d=eo(d),g=aa(d),g.callback=null,oa(l,g,d),l=d,i.current.lanes=l,vt(i,l),Hs(i),s[ks]=i.current,e0(s),new lf(i)},Pu.version="19.2.3",Pu}var A_;function A5(){if(A_)return w0.exports;A_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),w0.exports=N5(),w0.exports}var R5=A5();const j5=()=>{};var R_={};const nE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let a=t.charCodeAt(r);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},I5=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const a=t[n++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const o=t[n++];e[r++]=String.fromCharCode((a&31)<<6|o&63)}else if(a>239&&a<365){const o=t[n++],u=t[n++],h=t[n++],m=((a&7)<<18|(o&63)<<12|(u&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const o=t[n++],u=t[n++];e[r++]=String.fromCharCode((a&15)<<12|(o&63)<<6|u&63)}}return e.join("")},rE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<t.length;a+=3){const o=t[a],u=a+1<t.length,h=u?t[a+1]:0,m=a+2<t.length,p=m?t[a+2]:0,y=o>>2,b=(o&3)<<4|h>>4;let x=(h&15)<<2|p>>6,k=p&63;m||(k=64,u||(x=64)),r.push(n[y],n[b],n[x],n[k])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(nE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):I5(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<t.length;){const o=n[t.charAt(a++)],h=a<t.length?n[t.charAt(a)]:0;++a;const p=a<t.length?n[t.charAt(a)]:64;++a;const b=a<t.length?n[t.charAt(a)]:64;if(++a,o==null||h==null||p==null||b==null)throw new D5;const x=o<<2|h>>4;if(r.push(x),p!==64){const k=h<<4&240|p>>2;if(r.push(k),b!==64){const j=p<<6&192|b;r.push(j)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class D5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const M5=function(t){const e=nE(t);return rE.encodeByteArray(e,!0)},Jf=function(t){return M5(t).replace(/\./g,"")},sE=function(t){try{return rE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function P5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const O5=()=>P5().__FIREBASE_DEFAULTS__,L5=()=>{if(typeof process>"u"||typeof R_>"u")return;const t=R_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},V5=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&sE(t[1]);return e&&JSON.parse(e)},Om=()=>{try{return j5()||O5()||L5()||V5()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},iE=t=>Om()?.emulatorHosts?.[t],aE=t=>{const e=iE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},oE=()=>Om()?.config,lE=t=>Om()?.[`_${t}`];class z5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function qo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function hy(t){return(await fetch(t,{credentials:"include"})).ok}function cE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",a=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Jf(JSON.stringify(n)),Jf(JSON.stringify(u)),""].join(".")}const Wu={};function U5(){const t={prod:[],emulator:[]};for(const e of Object.keys(Wu))Wu[e]?t.emulator.push(e):t.prod.push(e);return t}function B5(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let j_=!1;function fy(t,e){if(typeof window>"u"||typeof document>"u"||!qo(window.location.host)||Wu[t]===e||Wu[t]||j_)return;Wu[t]=e;function n(x){return`__firebase__banner__${x}`}const r="__firebase__banner",o=U5().prod.length>0;function u(){const x=document.getElementById(r);x&&x.remove()}function h(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function m(x,k){x.setAttribute("width","24"),x.setAttribute("id",k),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function p(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{j_=!0,u()},x}function y(x,k){x.setAttribute("id",k),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function b(){const x=B5(r),k=n("text"),j=document.getElementById(k)||document.createElement("span"),R=n("learnmore"),N=document.getElementById(R)||document.createElement("a"),U=n("preprendIcon"),F=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const I=x.element;h(I),y(N,R);const O=p();m(F,U),I.append(F,j,N,O),document.body.appendChild(I)}o?(j.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function hr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function F5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hr())}function H5(){const t=Om()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function q5(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function G5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Y5(){const t=hr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function K5(){return!H5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Q5(){try{return typeof indexedDB=="object"}catch{return!1}}function X5(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(n){e(n)}})}const W5="FirebaseError";class si extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=W5,Object.setPrototypeOf(this,si.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sd.prototype.create)}}class Sd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},a=`${this.service}/${e}`,o=this.errors[e],u=o?J5(o,r):"Error",h=`${this.serviceName}: ${u} (${a}).`;return new si(a,h,r)}}function J5(t,e){return t.replace(Z5,(n,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const Z5=/\{\$([^}]+)}/g;function eA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function zi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const a of n){if(!r.includes(a))return!1;const o=t[a],u=e[a];if(I_(o)&&I_(u)){if(!zi(o,u))return!1}else if(o!==u)return!1}for(const a of r)if(!n.includes(a))return!1;return!0}function I_(t){return t!==null&&typeof t=="object"}function Ed(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Fu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,o]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(o)}}),e}function Hu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function tA(t,e){const n=new nA(t,e);return n.subscribe.bind(n)}class nA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let a;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");rA(e,["next","error","complete"])?a=e:a={next:e,error:n,complete:r},a.next===void 0&&(a.next=T0),a.error===void 0&&(a.error=T0),a.complete===void 0&&(a.complete=T0);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function T0(){}function an(t){return t&&t._delegate?t._delegate:t}class Ba{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ao="[DEFAULT]";class sA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new z5;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(aA(e))try{this.getOrInitializeService({instanceIdentifier:Ao})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:a});r.resolve(o)}catch{}}}}clearInstance(e=Ao){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ao){return this.instances.has(e)}getOptions(e=Ao){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);r===h&&u.resolve(a)}return a}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const o=this.instances.get(r);return o&&e(o,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const a of r)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:iA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ao){return this.component?this.component.multipleInstances?e:Ao:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iA(t){return t===Ao?void 0:t}function aA(t){return t.instantiationMode==="EAGER"}class oA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new sA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var It;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(It||(It={}));const lA={debug:It.DEBUG,verbose:It.VERBOSE,info:It.INFO,warn:It.WARN,error:It.ERROR,silent:It.SILENT},cA=It.INFO,uA={[It.DEBUG]:"log",[It.VERBOSE]:"log",[It.INFO]:"info",[It.WARN]:"warn",[It.ERROR]:"error"},dA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),a=uA[e];if(a)console[a](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let my=class{constructor(e){this.name=e,this._logLevel=cA,this._logHandler=dA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in It))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,It.DEBUG,...e),this._logHandler(this,It.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,It.VERBOSE,...e),this._logHandler(this,It.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,It.INFO,...e),this._logHandler(this,It.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,It.WARN,...e),this._logHandler(this,It.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,It.ERROR,...e),this._logHandler(this,It.ERROR,...e)}};const hA=(t,e)=>e.some(n=>t instanceof n);let D_,M_;function fA(){return D_||(D_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mA(){return M_||(M_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uE=new WeakMap,uv=new WeakMap,dE=new WeakMap,k0=new WeakMap,py=new WeakMap;function pA(t){const e=new Promise((n,r)=>{const a=()=>{t.removeEventListener("success",o),t.removeEventListener("error",u)},o=()=>{n(Oa(t.result)),a()},u=()=>{r(t.error),a()};t.addEventListener("success",o),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&uE.set(n,t)}).catch(()=>{}),py.set(e,t),e}function gA(t){if(uv.has(t))return;const e=new Promise((n,r)=>{const a=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",u),t.removeEventListener("abort",u)},o=()=>{n(),a()},u=()=>{r(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",o),t.addEventListener("error",u),t.addEventListener("abort",u)});uv.set(t,e)}let dv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return uv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Oa(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function vA(t){dv=t(dv)}function yA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(N0(this),e,...n);return dE.set(r,e.sort?e.sort():[e]),Oa(r)}:mA().includes(t)?function(...e){return t.apply(N0(this),e),Oa(uE.get(this))}:function(...e){return Oa(t.apply(N0(this),e))}}function bA(t){return typeof t=="function"?yA(t):(t instanceof IDBTransaction&&gA(t),hA(t,fA())?new Proxy(t,dv):t)}function Oa(t){if(t instanceof IDBRequest)return pA(t);if(k0.has(t))return k0.get(t);const e=bA(t);return e!==t&&(k0.set(t,e),py.set(e,t)),e}const N0=t=>py.get(t);function xA(t,e,{blocked:n,upgrade:r,blocking:a,terminated:o}={}){const u=indexedDB.open(t,e),h=Oa(u);return r&&u.addEventListener("upgradeneeded",m=>{r(Oa(u.result),m.oldVersion,m.newVersion,Oa(u.transaction),m)}),n&&u.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),h.then(m=>{o&&m.addEventListener("close",()=>o()),a&&m.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const _A=["get","getKey","getAll","getAllKeys","count"],wA=["put","add","delete","clear"],A0=new Map;function P_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(A0.get(e))return A0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,a=wA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(a||_A.includes(n)))return;const o=async function(u,...h){const m=this.transaction(u,a?"readwrite":"readonly");let p=m.store;return r&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),a&&m.done]))[0]};return A0.set(e,o),o}vA(t=>({...t,get:(e,n,r)=>P_(e,n)||t.get(e,n,r),has:(e,n)=>!!P_(e,n)||t.has(e,n)}));class SA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(EA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function EA(t){return t.getComponent()?.type==="VERSION"}const hv="@firebase/app",O_="0.14.6";const Ui=new my("@firebase/app"),CA="@firebase/app-compat",TA="@firebase/analytics-compat",kA="@firebase/analytics",NA="@firebase/app-check-compat",AA="@firebase/app-check",RA="@firebase/auth",jA="@firebase/auth-compat",IA="@firebase/database",DA="@firebase/data-connect",MA="@firebase/database-compat",PA="@firebase/functions",OA="@firebase/functions-compat",LA="@firebase/installations",VA="@firebase/installations-compat",zA="@firebase/messaging",UA="@firebase/messaging-compat",BA="@firebase/performance",FA="@firebase/performance-compat",HA="@firebase/remote-config",$A="@firebase/remote-config-compat",qA="@firebase/storage",GA="@firebase/storage-compat",YA="@firebase/firestore",KA="@firebase/ai",QA="@firebase/firestore-compat",XA="firebase",WA="12.6.0";const fv="[DEFAULT]",JA={[hv]:"fire-core",[CA]:"fire-core-compat",[kA]:"fire-analytics",[TA]:"fire-analytics-compat",[AA]:"fire-app-check",[NA]:"fire-app-check-compat",[RA]:"fire-auth",[jA]:"fire-auth-compat",[IA]:"fire-rtdb",[DA]:"fire-data-connect",[MA]:"fire-rtdb-compat",[PA]:"fire-fn",[OA]:"fire-fn-compat",[LA]:"fire-iid",[VA]:"fire-iid-compat",[zA]:"fire-fcm",[UA]:"fire-fcm-compat",[BA]:"fire-perf",[FA]:"fire-perf-compat",[HA]:"fire-rc",[$A]:"fire-rc-compat",[qA]:"fire-gcs",[GA]:"fire-gcs-compat",[YA]:"fire-fst",[QA]:"fire-fst-compat",[KA]:"fire-vertex","fire-js":"fire-js",[XA]:"fire-js-all"};const Zf=new Map,ZA=new Map,mv=new Map;function L_(t,e){try{t.container.addComponent(e)}catch(n){Ui.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Vo(t){const e=t.name;if(mv.has(e))return Ui.debug(`There were multiple attempts to register component ${e}.`),!1;mv.set(e,t);for(const n of Zf.values())L_(n,t);for(const n of ZA.values())L_(n,t);return!0}function Lm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function yr(t){return t==null?!1:t.settings!==void 0}const eR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},La=new Sd("app","Firebase",eR);class tR{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ba("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw La.create("app-deleted",{appName:this._name})}}const Go=WA;function hE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:fv,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw La.create("bad-app-name",{appName:String(a)});if(n||(n=oE()),!n)throw La.create("no-options");const o=Zf.get(a);if(o){if(zi(n,o.options)&&zi(r,o.config))return o;throw La.create("duplicate-app",{appName:a})}const u=new oA(a);for(const m of mv.values())u.addComponent(m);const h=new tR(n,r,u);return Zf.set(a,h),h}function gy(t=fv){const e=Zf.get(t);if(!e&&t===fv&&oE())return hE();if(!e)throw La.create("no-app",{appName:t});return e}function Ks(t,e,n){let r=JA[t]??t;n&&(r+=`-${n}`);const a=r.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const u=[`Unable to register library "${r}" with version "${e}":`];a&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ui.warn(u.join(" "));return}Vo(new Ba(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const nR="firebase-heartbeat-database",rR=1,rd="firebase-heartbeat-store";let R0=null;function fE(){return R0||(R0=xA(nR,rR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(rd)}catch(n){console.warn(n)}}}}).catch(t=>{throw La.create("idb-open",{originalErrorMessage:t.message})})),R0}async function sR(t){try{const n=(await fE()).transaction(rd),r=await n.objectStore(rd).get(mE(t));return await n.done,r}catch(e){if(e instanceof si)Ui.warn(e.message);else{const n=La.create("idb-get",{originalErrorMessage:e?.message});Ui.warn(n.message)}}}async function V_(t,e){try{const r=(await fE()).transaction(rd,"readwrite");await r.objectStore(rd).put(e,mE(t)),await r.done}catch(n){if(n instanceof si)Ui.warn(n.message);else{const r=La.create("idb-set",{originalErrorMessage:n?.message});Ui.warn(r.message)}}}function mE(t){return`${t.name}!${t.options.appId}`}const iR=1024,aR=30;class oR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new cR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=z_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>aR){const a=uR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ui.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=z_(),{heartbeatsToSend:n,unsentEntries:r}=lR(this._heartbeatsCache.heartbeats),a=Jf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Ui.warn(e),""}}}function z_(){return new Date().toISOString().substring(0,10)}function lR(t,e=iR){const n=[];let r=t.slice();for(const a of t){const o=n.find(u=>u.agent===a.agent);if(o){if(o.dates.push(a.date),U_(n)>e){o.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),U_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class cR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Q5()?X5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await sR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return V_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return V_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function U_(t){return Jf(JSON.stringify({version:2,heartbeats:t})).length}function uR(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function dR(t){Vo(new Ba("platform-logger",e=>new SA(e),"PRIVATE")),Vo(new Ba("heartbeat",e=>new oR(e),"PRIVATE")),Ks(hv,O_,t),Ks(hv,O_,"esm2020"),Ks("fire-js","")}dR("");var hR="firebase",fR="12.6.0";Ks(hR,fR,"app");function pE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mR=pE,gE=new Sd("auth","Firebase",pE());const em=new my("@firebase/auth");function pR(t,...e){em.logLevel<=It.WARN&&em.warn(`Auth (${Go}): ${t}`,...e)}function Af(t,...e){em.logLevel<=It.ERROR&&em.error(`Auth (${Go}): ${t}`,...e)}function ls(t,...e){throw yy(t,...e)}function Ss(t,...e){return yy(t,...e)}function vy(t,e,n){const r={...mR(),[e]:n};return new Sd("auth","Firebase",r).create(e,{appName:t.name})}function Qs(t){return vy(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gR(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&ls(t,"argument-error"),vy(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function yy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return gE.create(t,...e)}function ct(t,e,...n){if(!t)throw yy(e,...n)}function Mi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Af(e),new Error(e)}function Bi(t,e){t||Mi(e)}function pv(){return typeof self<"u"&&self.location?.href||""}function vR(){return B_()==="http:"||B_()==="https:"}function B_(){return typeof self<"u"&&self.location?.protocol||null}function yR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vR()||q5()||"connection"in navigator)?navigator.onLine:!0}function bR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Cd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Bi(n>e,"Short delay should be less than long delay!"),this.isMobile=F5()||G5()}get(){return yR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function by(t,e){Bi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class vE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Mi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Mi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Mi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const xR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const _R=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],wR=new Cd(3e4,6e4);function ii(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ai(t,e,n,r,a={}){return yE(t,a,async()=>{let o={},u={};r&&(e==="GET"?u=r:o={body:JSON.stringify(r)});const h=Ed({key:t.config.apiKey,...u}).slice(1),m=await t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);const p={method:e,headers:m,...o};return $5()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&qo(t.emulatorConfig.host)&&(p.credentials="include"),vE.fetch()(await bE(t,t.config.apiHost,n,h),p)})}async function yE(t,e,n){t._canInitEmulator=!1;const r={...xR,...e};try{const a=new ER(t),o=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw uf(t,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const h=o.ok?u.errorMessage:u.error.message,[m,p]=h.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw uf(t,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw uf(t,"email-already-in-use",u);if(m==="USER_DISABLED")throw uf(t,"user-disabled",u);const y=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw vy(t,y,p);ls(t,y)}}catch(a){if(a instanceof si)throw a;ls(t,"network-request-failed",{message:String(a)})}}async function Ec(t,e,n,r,a={}){const o=await ai(t,e,n,r,a);return"mfaPendingCredential"in o&&ls(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function bE(t,e,n,r){const a=`${e}${n}?${r}`,o=t,u=o.config.emulator?by(t.config,a):`${t.config.apiScheme}://${a}`;return _R.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(u).toString():u}function SR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ER{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ss(this.auth,"network-request-failed")),wR.get())})}}function uf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const a=Ss(t,e,r);return a.customData._tokenResponse=n,a}function F_(t){return t!==void 0&&t.enterprise!==void 0}class CR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return SR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function TR(t,e){return ai(t,"GET","/v2/recaptchaConfig",ii(t,e))}async function kR(t,e){return ai(t,"POST","/v1/accounts:delete",e)}async function tm(t,e){return ai(t,"POST","/v1/accounts:lookup",e)}function Ju(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function NR(t,e=!1){const n=an(t),r=await n.getIdToken(e),a=xy(r);ct(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const o=typeof a.firebase=="object"?a.firebase:void 0,u=o?.sign_in_provider;return{claims:a,token:r,authTime:Ju(j0(a.auth_time)),issuedAtTime:Ju(j0(a.iat)),expirationTime:Ju(j0(a.exp)),signInProvider:u||null,signInSecondFactor:o?.sign_in_second_factor||null}}function j0(t){return Number(t)*1e3}function xy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Af("JWT malformed, contained fewer than 3 sections"),null;try{const a=sE(n);return a?JSON.parse(a):(Af("Failed to decode base64 JWT payload"),null)}catch(a){return Af("Caught error parsing JWT payload as JSON",a?.toString()),null}}function H_(t){const e=xy(t);return ct(e,"internal-error"),ct(typeof e.exp<"u","internal-error"),ct(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ic(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof si&&AR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function AR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class RR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class gv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ju(this.lastLoginAt),this.creationTime=Ju(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function nm(t){const e=t.auth,n=await t.getIdToken(),r=await ic(t,tm(e,{idToken:n}));ct(r?.users.length,e,"internal-error");const a=r.users[0];t._notifyReloadListener(a);const o=a.providerUserInfo?.length?xE(a.providerUserInfo):[],u=IR(t.providerData,o),h=t.isAnonymous,m=!(t.email&&a.passwordHash)&&!u?.length,p=h?m:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new gv(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(t,y)}async function jR(t){const e=an(t);await nm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function IR(t,e){return[...t.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function xE(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function DR(t,e){const n=await yE(t,{},async()=>{const r=Ed({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:o}=t.config,u=await bE(t,a,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:h,body:r};return t.emulatorConfig&&qo(t.emulatorConfig.host)&&(m.credentials="include"),vE.fetch()(u,m)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function MR(t,e){return ai(t,"POST","/v2/accounts:revokeToken",ii(t,e))}class Xl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ct(e.idToken,"internal-error"),ct(typeof e.idToken<"u","internal-error"),ct(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):H_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ct(e.length!==0,"internal-error");const n=H_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ct(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:a,expiresIn:o}=await DR(e,n);this.updateTokensAndExpiration(r,a,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:a,expirationTime:o}=n,u=new Xl;return r&&(ct(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),a&&(ct(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),o&&(ct(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xl,this.toJSON())}_performRefresh(){return Mi("not implemented")}}function Sa(t,e){ct(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class _s{constructor({uid:e,auth:n,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new RR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new gv(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await ic(this,this.stsTokenManager.getToken(this.auth,e));return ct(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return NR(this,e)}reload(){return jR(this)}_assign(e){this!==e&&(ct(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new _s({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ct(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await nm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yr(this.auth.app))return Promise.reject(Qs(this.auth));const e=await this.getIdToken();return await ic(this,kR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,a=n.email??void 0,o=n.phoneNumber??void 0,u=n.photoURL??void 0,h=n.tenantId??void 0,m=n._redirectEventId??void 0,p=n.createdAt??void 0,y=n.lastLoginAt??void 0,{uid:b,emailVerified:x,isAnonymous:k,providerData:j,stsTokenManager:R}=n;ct(b&&R,e,"internal-error");const N=Xl.fromJSON(this.name,R);ct(typeof b=="string",e,"internal-error"),Sa(r,e.name),Sa(a,e.name),ct(typeof x=="boolean",e,"internal-error"),ct(typeof k=="boolean",e,"internal-error"),Sa(o,e.name),Sa(u,e.name),Sa(h,e.name),Sa(m,e.name),Sa(p,e.name),Sa(y,e.name);const U=new _s({uid:b,auth:e,email:a,emailVerified:x,displayName:r,isAnonymous:k,photoURL:u,phoneNumber:o,tenantId:h,stsTokenManager:N,createdAt:p,lastLoginAt:y});return j&&Array.isArray(j)&&(U.providerData=j.map(F=>({...F}))),m&&(U._redirectEventId=m),U}static async _fromIdTokenResponse(e,n,r=!1){const a=new Xl;a.updateFromServerResponse(n);const o=new _s({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await nm(o),o}static async _fromGetAccountInfoResponse(e,n,r){const a=n.users[0];ct(a.localId!==void 0,"internal-error");const o=a.providerUserInfo!==void 0?xE(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!o?.length,h=new Xl;h.updateFromIdToken(r);const m=new _s({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:u}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new gv(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!o?.length};return Object.assign(m,p),m}}const $_=new Map;function Pi(t){Bi(t instanceof Function,"Expected a class definition");let e=$_.get(t);return e?(Bi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$_.set(t,e),e)}class _E{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}_E.type="NONE";const q_=_E;function Rf(t,e,n){return`firebase:${t}:${e}:${n}`}class Wl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:a,name:o}=this.auth;this.fullUserKey=Rf(this.userKey,a.apiKey,o),this.fullPersistenceKey=Rf("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await tm(this.auth,{idToken:e}).catch(()=>{});return n?_s._fromGetAccountInfoResponse(this.auth,n,e):null}return _s._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Wl(Pi(q_),e,r);const a=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=a[0]||Pi(q_);const u=Rf(r,e.config.apiKey,e.name);let h=null;for(const p of n)try{const y=await p._get(u);if(y){let b;if(typeof y=="string"){const x=await tm(e,{idToken:y}).catch(()=>{});if(!x)break;b=await _s._fromGetAccountInfoResponse(e,x,y)}else b=_s._fromJSON(e,y);p!==o&&(h=b),o=p;break}}catch{}const m=a.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!m.length?new Wl(o,e,r):(o=m[0],h&&await o._set(u,h.toJSON()),await Promise.all(n.map(async p=>{if(p!==o)try{await p._remove(u)}catch{}})),new Wl(o,e,r))}}function G_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(CE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kE(e))return"Blackberry";if(NE(e))return"Webos";if(SE(e))return"Safari";if((e.includes("chrome/")||EE(e))&&!e.includes("edge/"))return"Chrome";if(TE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function wE(t=hr()){return/firefox\//i.test(t)}function SE(t=hr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function EE(t=hr()){return/crios\//i.test(t)}function CE(t=hr()){return/iemobile/i.test(t)}function TE(t=hr()){return/android/i.test(t)}function kE(t=hr()){return/blackberry/i.test(t)}function NE(t=hr()){return/webos/i.test(t)}function _y(t=hr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function PR(t=hr()){return _y(t)&&!!window.navigator?.standalone}function OR(){return Y5()&&document.documentMode===10}function AE(t=hr()){return _y(t)||TE(t)||NE(t)||kE(t)||/windows phone/i.test(t)||CE(t)}function RE(t,e=[]){let n;switch(t){case"Browser":n=G_(hr());break;case"Worker":n=`${G_(hr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Go}/${r}`}class LR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((u,h)=>{try{const m=e(o);u(m)}catch(m){h(m)}});r.onAbort=n,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function VR(t,e={}){return ai(t,"GET","/v2/passwordPolicy",ii(t,e))}const zR=6;class UR{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??zR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),a&&(n.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,a,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class BR{constructor(e,n,r,a){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Y_(this),this.idTokenSubscription=new Y_(this),this.beforeStateQueue=new LR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Pi(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Wl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await tm(this,{idToken:e}),r=await _s._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(yr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,u=r?._redirectEventId,h=await this.tryRedirectSignIn(e);(!o||o===u)&&h?.user&&(r=h.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ct(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await nm(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yr(this.app))return Promise.reject(Qs(this));const n=e?an(e):null;return n&&ct(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ct(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yr(this.app)?Promise.reject(Qs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yr(this.app)?Promise.reject(Qs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await VR(this),n=new UR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Sd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await MR(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Pi(e)||this._popupRedirectResolver;ct(n,this,"argument-error"),this.redirectPersistenceManager=await Wl.create(this,[Pi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,a){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(ct(h,this,"internal-error"),h.then(()=>{u||o(this.currentUser)}),typeof n=="function"){const m=e.addObserver(n,r,a);return()=>{u=!0,m()}}else{const m=e.addObserver(n);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ct(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=RE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(yr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&pR(`Error while retrieving App Check token: ${e.error}`),e?.token}}function oi(t){return an(t)}class Y_{constructor(e){this.auth=e,this.observer=null,this.addObserver=tA(n=>this.observer=n)}get next(){return ct(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Vm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FR(t){Vm=t}function jE(t){return Vm.loadJS(t)}function HR(){return Vm.recaptchaEnterpriseScript}function $R(){return Vm.gapiScript}function qR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class GR{constructor(){this.enterprise=new YR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class YR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const KR="recaptcha-enterprise",IE="NO_RECAPTCHA";class QR{constructor(e){this.type=KR,this.auth=oi(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(u,h)=>{TR(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new CR(m);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,u(p.siteKey)}}).catch(m=>{h(m)})})}function a(o,u,h){const m=window.grecaptcha;F_(m)?m.enterprise.ready(()=>{m.enterprise.execute(o,{action:e}).then(p=>{u(p)}).catch(()=>{u(IE)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new GR().execute("siteKey",{action:"verify"}):new Promise((o,u)=>{r(this.auth).then(h=>{if(!n&&F_(window.grecaptcha))a(h,o,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let m=HR();m.length!==0&&(m+=h),jE(m).then(()=>{a(h,o,u)}).catch(p=>{u(p)})}}).catch(h=>{u(h)})})}}async function K_(t,e,n,r=!1,a=!1){const o=new QR(t);let u;if(a)u=IE;else try{u=await o.verify(n)}catch{u=await o.verify(n,!0)}const h={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const m=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const m=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function rm(t,e,n,r,a){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await K_(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await K_(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(o)})}function XR(t,e){const n=Lm(t,"auth");if(n.isInitialized()){const a=n.getImmediate(),o=n.getOptions();if(zi(o,e??{}))return a;ls(a,"already-initialized")}return n.initialize({options:e})}function WR(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Pi);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function JR(t,e,n){const r=oi(t);ct(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,o=DE(e),{host:u,port:h}=ZR(e),m=h===null?"":`:${h}`,p={url:`${o}//${u}${m}/`},y=Object.freeze({host:u,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){ct(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ct(zi(p,r.config.emulator)&&zi(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,qo(u)?(hy(`${o}//${u}${m}`),fy("Auth",!0)):ej()}function DE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ZR(t){const e=DE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const o=a[1];return{host:o,port:Q_(r.substr(o.length+1))}}else{const[o,u]=r.split(":");return{host:o,port:Q_(u)}}}function Q_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function ej(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class wy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Mi("not implemented")}_getIdTokenResponse(e){return Mi("not implemented")}_linkToIdToken(e,n){return Mi("not implemented")}_getReauthenticationResolver(e){return Mi("not implemented")}}async function tj(t,e){return ai(t,"POST","/v1/accounts:update",e)}async function nj(t,e){return ai(t,"POST","/v1/accounts:signUp",e)}async function rj(t,e){return Ec(t,"POST","/v1/accounts:signInWithPassword",ii(t,e))}async function ME(t,e){return ai(t,"POST","/v1/accounts:sendOobCode",ii(t,e))}async function sj(t,e){return ME(t,e)}async function ij(t,e){return ME(t,e)}async function aj(t,e){return Ec(t,"POST","/v1/accounts:signInWithEmailLink",ii(t,e))}async function oj(t,e){return Ec(t,"POST","/v1/accounts:signInWithEmailLink",ii(t,e))}class sd extends wy{constructor(e,n,r,a=null){super("password",r),this._email=e,this._password=n,this._tenantId=a}static _fromEmailAndPassword(e,n){return new sd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new sd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rm(e,n,"signInWithPassword",rj);case"emailLink":return aj(e,{email:this._email,oobCode:this._password});default:ls(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rm(e,r,"signUpPassword",nj);case"emailLink":return oj(e,{idToken:n,email:this._email,oobCode:this._password});default:ls(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Jl(t,e){return Ec(t,"POST","/v1/accounts:signInWithIdp",ii(t,e))}const lj="http://localhost";class zo extends wy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new zo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ls("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...o}=n;if(!r||!a)return null;const u=new zo(r,a);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return Jl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Jl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Jl(e,n)}buildRequest(){const e={requestUri:lj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ed(n)}return e}}function cj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function uj(t){const e=Fu(Hu(t)).link,n=e?Fu(Hu(e)).deep_link_id:null,r=Fu(Hu(t)).deep_link_id;return(r?Fu(Hu(r)).link:null)||r||n||e||t}class Sy{constructor(e){const n=Fu(Hu(e)),r=n.apiKey??null,a=n.oobCode??null,o=cj(n.mode??null);ct(r&&a&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=a,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=uj(e);try{return new Sy(n)}catch{return null}}}class Yo{constructor(){this.providerId=Yo.PROVIDER_ID}static credential(e,n){return sd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Sy.parseLink(n);return ct(r,"argument-error"),sd._fromEmailAndCode(e,r.code,r.tenantId)}}Yo.PROVIDER_ID="password";Yo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Yo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ey{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Td extends Ey{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ra extends Td{constructor(){super("facebook.com")}static credential(e){return zo._fromParams({providerId:Ra.PROVIDER_ID,signInMethod:Ra.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ra.credentialFromTaggedObject(e)}static credentialFromError(e){return Ra.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ra.credential(e.oauthAccessToken)}catch{return null}}}Ra.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ra.PROVIDER_ID="facebook.com";class Di extends Td{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return zo._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Di.credentialFromTaggedObject(e)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Di.credential(n,r)}catch{return null}}}Di.GOOGLE_SIGN_IN_METHOD="google.com";Di.PROVIDER_ID="google.com";class ja extends Td{constructor(){super("github.com")}static credential(e){return zo._fromParams({providerId:ja.PROVIDER_ID,signInMethod:ja.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ja.credentialFromTaggedObject(e)}static credentialFromError(e){return ja.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ja.credential(e.oauthAccessToken)}catch{return null}}}ja.GITHUB_SIGN_IN_METHOD="github.com";ja.PROVIDER_ID="github.com";class Ia extends Td{constructor(){super("twitter.com")}static credential(e,n){return zo._fromParams({providerId:Ia.PROVIDER_ID,signInMethod:Ia.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ia.credentialFromTaggedObject(e)}static credentialFromError(e){return Ia.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ia.credential(n,r)}catch{return null}}}Ia.TWITTER_SIGN_IN_METHOD="twitter.com";Ia.PROVIDER_ID="twitter.com";async function dj(t,e){return Ec(t,"POST","/v1/accounts:signUp",ii(t,e))}class Fa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,a=!1){const o=await _s._fromIdTokenResponse(e,r,a),u=X_(r);return new Fa({user:o,providerId:u,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const a=X_(r);return new Fa({user:e,providerId:a,_tokenResponse:r,operationType:n})}}function X_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class sm extends si{constructor(e,n,r,a){super(n.code,n.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,sm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,a){return new sm(e,n,r,a)}}function PE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?sm._fromErrorAndOperation(t,o,e,r):o})}async function hj(t,e,n=!1){const r=await ic(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Fa._forOperation(t,"link",r)}async function OE(t,e,n=!1){const{auth:r}=t;if(yr(r.app))return Promise.reject(Qs(r));const a="reauthenticate";try{const o=await ic(t,PE(r,a,e,t),n);ct(o.idToken,r,"internal-error");const u=xy(o.idToken);ct(u,r,"internal-error");const{sub:h}=u;return ct(t.uid===h,r,"user-mismatch"),Fa._forOperation(t,a,o)}catch(o){throw o?.code==="auth/user-not-found"&&ls(r,"user-mismatch"),o}}async function LE(t,e,n=!1){if(yr(t.app))return Promise.reject(Qs(t));const r="signIn",a=await PE(t,r,e),o=await Fa._fromIdTokenResponse(t,r,a);return n||await t._updateCurrentUser(o.user),o}async function fj(t,e){return LE(oi(t),e)}async function mj(t,e){return OE(an(t),e)}async function pj(t,e){return Ec(t,"POST","/v1/accounts:signInWithCustomToken",ii(t,e))}async function gj(t,e){if(yr(t.app))return Promise.reject(Qs(t));const n=oi(t),r=await pj(n,{token:e,returnSecureToken:!0}),a=await Fa._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(a.user),a}async function VE(t){const e=oi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function zE(t,e,n){const r=oi(t);await rm(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",ij)}async function vj(t,e,n){if(yr(t.app))return Promise.reject(Qs(t));const r=oi(t),u=await rm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dj).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&VE(t),m}),h=await Fa._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(h.user),h}function yj(t,e,n){return yr(t.app)?Promise.reject(Qs(t)):fj(an(t),Yo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&VE(t),r})}async function W_(t,e){const n=an(t),a={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:o}=await sj(n.auth,a);o!==t.email&&await t.reload()}function bj(t,e){return xj(an(t),null,e)}async function xj(t,e,n){const{auth:r}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(o.password=n);const u=await ic(t,tj(r,o));await t._updateTokensIfNecessary(u,!0)}function _j(t,e,n,r){return an(t).onIdTokenChanged(e,n,r)}function wj(t,e,n){return an(t).beforeAuthStateChanged(e,n)}function Sj(t,e,n,r){return an(t).onAuthStateChanged(e,n,r)}function Ej(t){return an(t).signOut()}const im="__sak";class UE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(im,"1"),this.storage.removeItem(im),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Cj=1e3,Tj=10;class BE extends UE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=AE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),a=this.localCache[n];r!==a&&e(n,a,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,h,m)=>{this.notifyListeners(u,m)});return}const r=e.key;n?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(r);!n&&this.localCache[r]===u||this.notifyListeners(r,u)},o=this.storage.getItem(r);OR()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Tj):a()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Cj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}BE.type="LOCAL";const kj=BE;class FE extends UE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}FE.type="SESSION";const HE=FE;function Nj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class zm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(a=>a.isListeningto(e));if(n)return n;const r=new zm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:a,data:o}=n.data,u=this.handlersMap[a];if(!u?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const h=Array.from(u).map(async p=>p(n.origin,o)),m=await Nj(h);n.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:m})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zm.receivers=[];function Cy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class Aj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let o,u;return new Promise((h,m)=>{const p=Cy("",20);a.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},r);u={messageChannel:a,onMessage(b){const x=b;if(x.data.eventId===p)switch(x.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(x.data.response);break;default:clearTimeout(y),clearTimeout(o),m(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function Xs(){return window}function Rj(t){Xs().location.href=t}function $E(){return typeof Xs().WorkerGlobalScope<"u"&&typeof Xs().importScripts=="function"}async function jj(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ij(){return navigator?.serviceWorker?.controller||null}function Dj(){return $E()?self:null}const qE="firebaseLocalStorageDb",Mj=1,am="firebaseLocalStorage",GE="fbase_key";class kd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Um(t,e){return t.transaction([am],e?"readwrite":"readonly").objectStore(am)}function Pj(){const t=indexedDB.deleteDatabase(qE);return new kd(t).toPromise()}function vv(){const t=indexedDB.open(qE,Mj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(am,{keyPath:GE})}catch(a){n(a)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(am)?e(r):(r.close(),await Pj(),e(await vv()))})})}async function J_(t,e,n){const r=Um(t,!0).put({[GE]:e,value:n});return new kd(r).toPromise()}async function Oj(t,e){const n=Um(t,!1).get(e),r=await new kd(n).toPromise();return r===void 0?null:r.value}function Z_(t,e){const n=Um(t,!0).delete(e);return new kd(n).toPromise()}const Lj=800,Vj=3;class YE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Vj)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $E()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zm._getInstance(Dj()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await jj(),!this.activeServiceWorker)return;this.sender=new Aj(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ij()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vv();return await J_(e,im,"1"),await Z_(e,im),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>J_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Oj(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Z_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const o=Um(a,!1).getAll();return new kd(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:o}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(o)&&(this.notifyListeners(a,o),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Lj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}YE.type="LOCAL";const zj=YE;new Cd(3e4,6e4);function KE(t,e){return e?Pi(e):(ct(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Ty extends wy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Jl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Jl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Uj(t){return LE(t.auth,new Ty(t),t.bypassAuthState)}function Bj(t){const{auth:e,user:n}=t;return ct(n,e,"internal-error"),OE(n,new Ty(t),t.bypassAuthState)}async function Fj(t){const{auth:e,user:n}=t;return ct(n,e,"internal-error"),hj(n,new Ty(t),t.bypassAuthState)}class QE{constructor(e,n,r,a,o=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:a,tenantId:o,error:u,type:h}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Uj;case"linkViaPopup":case"linkViaRedirect":return Fj;case"reauthViaPopup":case"reauthViaRedirect":return Bj;default:ls(this.auth,"internal-error")}}resolve(e){Bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Hj=new Cd(2e3,1e4);async function $j(t,e,n){if(yr(t.app))return Promise.reject(Ss(t,"operation-not-supported-in-this-environment"));const r=oi(t);gR(t,e,Ey);const a=KE(r,n);return new Ro(r,"signInViaPopup",e,a).executeNotNull()}class Ro extends QE{constructor(e,n,r,a,o){super(e,n,a,o),this.provider=r,this.authWindow=null,this.pollId=null,Ro.currentPopupAction&&Ro.currentPopupAction.cancel(),Ro.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ct(e,this.auth,"internal-error"),e}async onExecution(){Bi(this.filter.length===1,"Popup operations only handle one event");const e=Cy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ss(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ss(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ro.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ss(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Hj.get())};e()}}Ro.currentPopupAction=null;const qj="pendingRedirect",jf=new Map;class Gj extends QE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=jf.get(this.auth._key());if(!e){try{const r=await Yj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}jf.set(this.auth._key(),e)}return this.bypassAuthState||jf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Yj(t,e){const n=Xj(e),r=Qj(t);if(!await r._isAvailable())return!1;const a=await r._get(n)==="true";return await r._remove(n),a}function Kj(t,e){jf.set(t._key(),e)}function Qj(t){return Pi(t._redirectPersistence)}function Xj(t){return Rf(qj,t.config.apiKey,t.name)}async function Wj(t,e,n=!1){if(yr(t.app))return Promise.reject(Qs(t));const r=oi(t),a=KE(r,e),u=await new Gj(r,a,n).execute();return u&&!n&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}const Jj=600*1e3;class Zj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!e9(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!XE(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Ss(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Jj&&this.cachedEventUids.clear(),this.cachedEventUids.has(e4(e))}saveEventToCache(e){this.cachedEventUids.add(e4(e)),this.lastProcessedEventTime=Date.now()}}function e4(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function XE({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function e9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XE(t);default:return!1}}async function t9(t,e={}){return ai(t,"GET","/v1/projects",e)}const n9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r9=/^https?/;async function s9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await t9(t);for(const n of e)try{if(i9(n))return}catch{}ls(t,"unauthorized-domain")}function i9(t){const e=pv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===r}if(!r9.test(n))return!1;if(n9.test(t))return r===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const a9=new Cd(3e4,6e4);function t4(){const t=Xs().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function o9(t){return new Promise((e,n)=>{function r(){t4(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{t4(),n(Ss(t,"network-request-failed"))},timeout:a9.get()})}if(Xs().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Xs().gapi?.load)r();else{const a=qR("iframefcb");return Xs()[a]=()=>{gapi.load?r():n(Ss(t,"network-request-failed"))},jE(`${$R()}?onload=${a}`).catch(o=>n(o))}}).catch(e=>{throw If=null,e})}let If=null;function l9(t){return If=If||o9(t),If}const c9=new Cd(5e3,15e3),u9="__/auth/iframe",d9="emulator/auth/iframe",h9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},f9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function m9(t){const e=t.config;ct(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?by(e,d9):`https://${t.config.authDomain}/${u9}`,r={apiKey:e.apiKey,appName:t.name,v:Go},a=f9.get(t.config.apiHost);a&&(r.eid=a);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Ed(r).slice(1)}`}async function p9(t){const e=await l9(t),n=Xs().gapi;return ct(n,t,"internal-error"),e.open({where:document.body,url:m9(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:h9,dontclear:!0},r=>new Promise(async(a,o)=>{await r.restyle({setHideOnLeave:!1});const u=Ss(t,"network-request-failed"),h=Xs().setTimeout(()=>{o(u)},c9.get());function m(){Xs().clearTimeout(h),a(r)}r.ping(m).then(m,()=>{o(u)})}))}const g9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},v9=500,y9=600,b9="_blank",x9="http://localhost";class n4{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _9(t,e,n,r=v9,a=y9){const o=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const m={...g9,width:r.toString(),height:a.toString(),top:o,left:u},p=hr().toLowerCase();n&&(h=EE(p)?b9:n),wE(p)&&(e=e||x9,m.scrollbars="yes");const y=Object.entries(m).reduce((x,[k,j])=>`${x}${k}=${j},`,"");if(PR(p)&&h!=="_self")return w9(e||"",h),new n4(null);const b=window.open(e||"",h,y);ct(b,t,"popup-blocked");try{b.focus()}catch{}return new n4(b)}function w9(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const S9="__/auth/handler",E9="emulator/auth/handler",C9=encodeURIComponent("fac");async function r4(t,e,n,r,a,o){ct(t.config.authDomain,t,"auth-domain-config-required"),ct(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Go,eventId:a};if(e instanceof Ey){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",eA(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,b]of Object.entries({}))u[y]=b}if(e instanceof Td){const y=e.getScopes().filter(b=>b!=="");y.length>0&&(u.scopes=y.join(","))}t.tenantId&&(u.tid=t.tenantId);const h=u;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const m=await t._getAppCheckToken(),p=m?`#${C9}=${encodeURIComponent(m)}`:"";return`${T9(t)}?${Ed(h).slice(1)}${p}`}function T9({config:t}){return t.emulator?by(t,E9):`https://${t.authDomain}/${S9}`}const I0="webStorageSupport";class k9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=HE,this._completeRedirectFn=Wj,this._overrideRedirectResult=Kj}async _openPopup(e,n,r,a){Bi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await r4(e,n,r,pv(),a);return _9(e,o,Cy())}async _openRedirect(e,n,r,a){await this._originValidation(e);const o=await r4(e,n,r,pv(),a);return Rj(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:a,promise:o}=this.eventManagers[n];return a?Promise.resolve(a):(Bi(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await p9(e),r=new Zj(e);return n.register("authEvent",a=>(ct(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(I0,{type:I0},a=>{const o=a?.[0]?.[I0];o!==void 0&&n(!!o),ls(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=s9(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return AE()||SE()||_y()}}const N9=k9;var s4="@firebase/auth",i4="1.11.1";class A9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ct(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function R9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function j9(t){Vo(new Ba("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=r.options;ct(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:u,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:RE(t)},p=new BR(r,a,o,m);return WR(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Vo(new Ba("auth-internal",e=>{const n=oi(e.getProvider("auth").getImmediate());return(r=>new A9(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ks(s4,i4,R9(t)),Ks(s4,i4,"esm2020")}const I9=300,D9=lE("authIdTokenMaxAge")||I9;let a4=null;const M9=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>D9)return;const a=n?.token;a4!==a&&(a4=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function P9(t=gy()){const e=Lm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=XR(t,{popupRedirectResolver:N9,persistence:[zj,kj,HE]}),r=lE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const u=M9(o.toString());wj(n,u,()=>u(n.currentUser)),_j(n,h=>u(h))}}const a=iE("auth");return a&&JR(n,`http://${a}`),n}function O9(){return document.getElementsByTagName("head")?.[0]??document}FR({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=a=>{const o=Ss("internal-error");o.customData=a,n(o)},r.type="text/javascript",r.charset="UTF-8",O9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});j9("Browser");var o4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Va,WE;(function(){var t;function e(w,E){function A(){}A.prototype=E.prototype,w.F=E.prototype,w.prototype=new A,w.prototype.constructor=w,w.D=function(P,L,z){for(var M=Array(arguments.length-2),se=2;se<arguments.length;se++)M[se-2]=arguments[se];return E.prototype[L].apply(P,M)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(w,E,A){A||(A=0);const P=Array(16);if(typeof E=="string")for(var L=0;L<16;++L)P[L]=E.charCodeAt(A++)|E.charCodeAt(A++)<<8|E.charCodeAt(A++)<<16|E.charCodeAt(A++)<<24;else for(L=0;L<16;++L)P[L]=E[A++]|E[A++]<<8|E[A++]<<16|E[A++]<<24;E=w.g[0],A=w.g[1],L=w.g[2];let z=w.g[3],M;M=E+(z^A&(L^z))+P[0]+3614090360&4294967295,E=A+(M<<7&4294967295|M>>>25),M=z+(L^E&(A^L))+P[1]+3905402710&4294967295,z=E+(M<<12&4294967295|M>>>20),M=L+(A^z&(E^A))+P[2]+606105819&4294967295,L=z+(M<<17&4294967295|M>>>15),M=A+(E^L&(z^E))+P[3]+3250441966&4294967295,A=L+(M<<22&4294967295|M>>>10),M=E+(z^A&(L^z))+P[4]+4118548399&4294967295,E=A+(M<<7&4294967295|M>>>25),M=z+(L^E&(A^L))+P[5]+1200080426&4294967295,z=E+(M<<12&4294967295|M>>>20),M=L+(A^z&(E^A))+P[6]+2821735955&4294967295,L=z+(M<<17&4294967295|M>>>15),M=A+(E^L&(z^E))+P[7]+4249261313&4294967295,A=L+(M<<22&4294967295|M>>>10),M=E+(z^A&(L^z))+P[8]+1770035416&4294967295,E=A+(M<<7&4294967295|M>>>25),M=z+(L^E&(A^L))+P[9]+2336552879&4294967295,z=E+(M<<12&4294967295|M>>>20),M=L+(A^z&(E^A))+P[10]+4294925233&4294967295,L=z+(M<<17&4294967295|M>>>15),M=A+(E^L&(z^E))+P[11]+2304563134&4294967295,A=L+(M<<22&4294967295|M>>>10),M=E+(z^A&(L^z))+P[12]+1804603682&4294967295,E=A+(M<<7&4294967295|M>>>25),M=z+(L^E&(A^L))+P[13]+4254626195&4294967295,z=E+(M<<12&4294967295|M>>>20),M=L+(A^z&(E^A))+P[14]+2792965006&4294967295,L=z+(M<<17&4294967295|M>>>15),M=A+(E^L&(z^E))+P[15]+1236535329&4294967295,A=L+(M<<22&4294967295|M>>>10),M=E+(L^z&(A^L))+P[1]+4129170786&4294967295,E=A+(M<<5&4294967295|M>>>27),M=z+(A^L&(E^A))+P[6]+3225465664&4294967295,z=E+(M<<9&4294967295|M>>>23),M=L+(E^A&(z^E))+P[11]+643717713&4294967295,L=z+(M<<14&4294967295|M>>>18),M=A+(z^E&(L^z))+P[0]+3921069994&4294967295,A=L+(M<<20&4294967295|M>>>12),M=E+(L^z&(A^L))+P[5]+3593408605&4294967295,E=A+(M<<5&4294967295|M>>>27),M=z+(A^L&(E^A))+P[10]+38016083&4294967295,z=E+(M<<9&4294967295|M>>>23),M=L+(E^A&(z^E))+P[15]+3634488961&4294967295,L=z+(M<<14&4294967295|M>>>18),M=A+(z^E&(L^z))+P[4]+3889429448&4294967295,A=L+(M<<20&4294967295|M>>>12),M=E+(L^z&(A^L))+P[9]+568446438&4294967295,E=A+(M<<5&4294967295|M>>>27),M=z+(A^L&(E^A))+P[14]+3275163606&4294967295,z=E+(M<<9&4294967295|M>>>23),M=L+(E^A&(z^E))+P[3]+4107603335&4294967295,L=z+(M<<14&4294967295|M>>>18),M=A+(z^E&(L^z))+P[8]+1163531501&4294967295,A=L+(M<<20&4294967295|M>>>12),M=E+(L^z&(A^L))+P[13]+2850285829&4294967295,E=A+(M<<5&4294967295|M>>>27),M=z+(A^L&(E^A))+P[2]+4243563512&4294967295,z=E+(M<<9&4294967295|M>>>23),M=L+(E^A&(z^E))+P[7]+1735328473&4294967295,L=z+(M<<14&4294967295|M>>>18),M=A+(z^E&(L^z))+P[12]+2368359562&4294967295,A=L+(M<<20&4294967295|M>>>12),M=E+(A^L^z)+P[5]+4294588738&4294967295,E=A+(M<<4&4294967295|M>>>28),M=z+(E^A^L)+P[8]+2272392833&4294967295,z=E+(M<<11&4294967295|M>>>21),M=L+(z^E^A)+P[11]+1839030562&4294967295,L=z+(M<<16&4294967295|M>>>16),M=A+(L^z^E)+P[14]+4259657740&4294967295,A=L+(M<<23&4294967295|M>>>9),M=E+(A^L^z)+P[1]+2763975236&4294967295,E=A+(M<<4&4294967295|M>>>28),M=z+(E^A^L)+P[4]+1272893353&4294967295,z=E+(M<<11&4294967295|M>>>21),M=L+(z^E^A)+P[7]+4139469664&4294967295,L=z+(M<<16&4294967295|M>>>16),M=A+(L^z^E)+P[10]+3200236656&4294967295,A=L+(M<<23&4294967295|M>>>9),M=E+(A^L^z)+P[13]+681279174&4294967295,E=A+(M<<4&4294967295|M>>>28),M=z+(E^A^L)+P[0]+3936430074&4294967295,z=E+(M<<11&4294967295|M>>>21),M=L+(z^E^A)+P[3]+3572445317&4294967295,L=z+(M<<16&4294967295|M>>>16),M=A+(L^z^E)+P[6]+76029189&4294967295,A=L+(M<<23&4294967295|M>>>9),M=E+(A^L^z)+P[9]+3654602809&4294967295,E=A+(M<<4&4294967295|M>>>28),M=z+(E^A^L)+P[12]+3873151461&4294967295,z=E+(M<<11&4294967295|M>>>21),M=L+(z^E^A)+P[15]+530742520&4294967295,L=z+(M<<16&4294967295|M>>>16),M=A+(L^z^E)+P[2]+3299628645&4294967295,A=L+(M<<23&4294967295|M>>>9),M=E+(L^(A|~z))+P[0]+4096336452&4294967295,E=A+(M<<6&4294967295|M>>>26),M=z+(A^(E|~L))+P[7]+1126891415&4294967295,z=E+(M<<10&4294967295|M>>>22),M=L+(E^(z|~A))+P[14]+2878612391&4294967295,L=z+(M<<15&4294967295|M>>>17),M=A+(z^(L|~E))+P[5]+4237533241&4294967295,A=L+(M<<21&4294967295|M>>>11),M=E+(L^(A|~z))+P[12]+1700485571&4294967295,E=A+(M<<6&4294967295|M>>>26),M=z+(A^(E|~L))+P[3]+2399980690&4294967295,z=E+(M<<10&4294967295|M>>>22),M=L+(E^(z|~A))+P[10]+4293915773&4294967295,L=z+(M<<15&4294967295|M>>>17),M=A+(z^(L|~E))+P[1]+2240044497&4294967295,A=L+(M<<21&4294967295|M>>>11),M=E+(L^(A|~z))+P[8]+1873313359&4294967295,E=A+(M<<6&4294967295|M>>>26),M=z+(A^(E|~L))+P[15]+4264355552&4294967295,z=E+(M<<10&4294967295|M>>>22),M=L+(E^(z|~A))+P[6]+2734768916&4294967295,L=z+(M<<15&4294967295|M>>>17),M=A+(z^(L|~E))+P[13]+1309151649&4294967295,A=L+(M<<21&4294967295|M>>>11),M=E+(L^(A|~z))+P[4]+4149444226&4294967295,E=A+(M<<6&4294967295|M>>>26),M=z+(A^(E|~L))+P[11]+3174756917&4294967295,z=E+(M<<10&4294967295|M>>>22),M=L+(E^(z|~A))+P[2]+718787259&4294967295,L=z+(M<<15&4294967295|M>>>17),M=A+(z^(L|~E))+P[9]+3951481745&4294967295,w.g[0]=w.g[0]+E&4294967295,w.g[1]=w.g[1]+(L+(M<<21&4294967295|M>>>11))&4294967295,w.g[2]=w.g[2]+L&4294967295,w.g[3]=w.g[3]+z&4294967295}r.prototype.v=function(w,E){E===void 0&&(E=w.length);const A=E-this.blockSize,P=this.C;let L=this.h,z=0;for(;z<E;){if(L==0)for(;z<=A;)a(this,w,z),z+=this.blockSize;if(typeof w=="string"){for(;z<E;)if(P[L++]=w.charCodeAt(z++),L==this.blockSize){a(this,P),L=0;break}}else for(;z<E;)if(P[L++]=w[z++],L==this.blockSize){a(this,P),L=0;break}}this.h=L,this.o+=E},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var E=1;E<w.length-8;++E)w[E]=0;E=this.o*8;for(var A=w.length-8;A<w.length;++A)w[A]=E&255,E/=256;for(this.v(w),w=Array(16),E=0,A=0;A<4;++A)for(let P=0;P<32;P+=8)w[E++]=this.g[A]>>>P&255;return w};function o(w,E){var A=h;return Object.prototype.hasOwnProperty.call(A,w)?A[w]:A[w]=E(w)}function u(w,E){this.h=E;const A=[];let P=!0;for(let L=w.length-1;L>=0;L--){const z=w[L]|0;P&&z==E||(A[L]=z,P=!1)}this.g=A}var h={};function m(w){return-128<=w&&w<128?o(w,function(E){return new u([E|0],E<0?-1:0)}):new u([w|0],w<0?-1:0)}function p(w){if(isNaN(w)||!isFinite(w))return b;if(w<0)return N(p(-w));const E=[];let A=1;for(let P=0;w>=A;P++)E[P]=w/A|0,A*=4294967296;return new u(E,0)}function y(w,E){if(w.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(w.charAt(0)=="-")return N(y(w.substring(1),E));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=p(Math.pow(E,8));let P=b;for(let z=0;z<w.length;z+=8){var L=Math.min(8,w.length-z);const M=parseInt(w.substring(z,z+L),E);L<8?(L=p(Math.pow(E,L)),P=P.j(L).add(p(M))):(P=P.j(A),P=P.add(p(M)))}return P}var b=m(0),x=m(1),k=m(16777216);t=u.prototype,t.m=function(){if(R(this))return-N(this).m();let w=0,E=1;for(let A=0;A<this.g.length;A++){const P=this.i(A);w+=(P>=0?P:4294967296+P)*E,E*=4294967296}return w},t.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(j(this))return"0";if(R(this))return"-"+N(this).toString(w);const E=p(Math.pow(w,6));var A=this;let P="";for(;;){const L=O(A,E).g;A=U(A,L.j(E));let z=((A.g.length>0?A.g[0]:A.h)>>>0).toString(w);if(A=L,j(A))return z+P;for(;z.length<6;)z="0"+z;P=z+P}},t.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function j(w){if(w.h!=0)return!1;for(let E=0;E<w.g.length;E++)if(w.g[E]!=0)return!1;return!0}function R(w){return w.h==-1}t.l=function(w){return w=U(this,w),R(w)?-1:j(w)?0:1};function N(w){const E=w.g.length,A=[];for(let P=0;P<E;P++)A[P]=~w.g[P];return new u(A,~w.h).add(x)}t.abs=function(){return R(this)?N(this):this},t.add=function(w){const E=Math.max(this.g.length,w.g.length),A=[];let P=0;for(let L=0;L<=E;L++){let z=P+(this.i(L)&65535)+(w.i(L)&65535),M=(z>>>16)+(this.i(L)>>>16)+(w.i(L)>>>16);P=M>>>16,z&=65535,M&=65535,A[L]=M<<16|z}return new u(A,A[A.length-1]&-2147483648?-1:0)};function U(w,E){return w.add(N(E))}t.j=function(w){if(j(this)||j(w))return b;if(R(this))return R(w)?N(this).j(N(w)):N(N(this).j(w));if(R(w))return N(this.j(N(w)));if(this.l(k)<0&&w.l(k)<0)return p(this.m()*w.m());const E=this.g.length+w.g.length,A=[];for(var P=0;P<2*E;P++)A[P]=0;for(P=0;P<this.g.length;P++)for(let L=0;L<w.g.length;L++){const z=this.i(P)>>>16,M=this.i(P)&65535,se=w.i(L)>>>16,ae=w.i(L)&65535;A[2*P+2*L]+=M*ae,F(A,2*P+2*L),A[2*P+2*L+1]+=z*ae,F(A,2*P+2*L+1),A[2*P+2*L+1]+=M*se,F(A,2*P+2*L+1),A[2*P+2*L+2]+=z*se,F(A,2*P+2*L+2)}for(w=0;w<E;w++)A[w]=A[2*w+1]<<16|A[2*w];for(w=E;w<2*E;w++)A[w]=0;return new u(A,0)};function F(w,E){for(;(w[E]&65535)!=w[E];)w[E+1]+=w[E]>>>16,w[E]&=65535,E++}function I(w,E){this.g=w,this.h=E}function O(w,E){if(j(E))throw Error("division by zero");if(j(w))return new I(b,b);if(R(w))return E=O(N(w),E),new I(N(E.g),N(E.h));if(R(E))return E=O(w,N(E)),new I(N(E.g),E.h);if(w.g.length>30){if(R(w)||R(E))throw Error("slowDivide_ only works with positive integers.");for(var A=x,P=E;P.l(w)<=0;)A=B(A),P=B(P);var L=H(A,1),z=H(P,1);for(P=H(P,2),A=H(A,2);!j(P);){var M=z.add(P);M.l(w)<=0&&(L=L.add(A),z=M),P=H(P,1),A=H(A,1)}return E=U(w,L.j(E)),new I(L,E)}for(L=b;w.l(E)>=0;){for(A=Math.max(1,Math.floor(w.m()/E.m())),P=Math.ceil(Math.log(A)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),z=p(A),M=z.j(E);R(M)||M.l(w)>0;)A-=P,z=p(A),M=z.j(E);j(z)&&(z=x),L=L.add(z),w=U(w,M)}return new I(L,w)}t.B=function(w){return O(this,w).h},t.and=function(w){const E=Math.max(this.g.length,w.g.length),A=[];for(let P=0;P<E;P++)A[P]=this.i(P)&w.i(P);return new u(A,this.h&w.h)},t.or=function(w){const E=Math.max(this.g.length,w.g.length),A=[];for(let P=0;P<E;P++)A[P]=this.i(P)|w.i(P);return new u(A,this.h|w.h)},t.xor=function(w){const E=Math.max(this.g.length,w.g.length),A=[];for(let P=0;P<E;P++)A[P]=this.i(P)^w.i(P);return new u(A,this.h^w.h)};function B(w){const E=w.g.length+1,A=[];for(let P=0;P<E;P++)A[P]=w.i(P)<<1|w.i(P-1)>>>31;return new u(A,w.h)}function H(w,E){const A=E>>5;E%=32;const P=w.g.length-A,L=[];for(let z=0;z<P;z++)L[z]=E>0?w.i(z+A)>>>E|w.i(z+A+1)<<32-E:w.i(z+A);return new u(L,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,WE=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=y,Va=u}).apply(typeof o4<"u"?o4:typeof self<"u"?self:typeof window<"u"?window:{});var df=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var JE,$u,ZE,Df,yv,eC,tC,nC;(function(){var t,e=Object.defineProperty;function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof df=="object"&&df];for(var _=0;_<f.length;++_){var T=f[_];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=n(this);function a(f,_){if(_)e:{var T=r;f=f.split(".");for(var V=0;V<f.length-1;V++){var Z=f[V];if(!(Z in T))break e;T=T[Z]}f=f[f.length-1],V=T[f],_=_(V),_!=V&&_!=null&&e(T,f,{configurable:!0,writable:!0,value:_})}}a("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(f){return f||function(_){var T=[],V;for(V in _)Object.prototype.hasOwnProperty.call(_,V)&&T.push([V,_[V]]);return T}});var o=o||{},u=this||self;function h(f){var _=typeof f;return _=="object"&&f!=null||_=="function"}function m(f,_,T){return f.call.apply(f.bind,arguments)}function p(f,_,T){return p=m,p.apply(null,arguments)}function y(f,_){var T=Array.prototype.slice.call(arguments,1);return function(){var V=T.slice();return V.push.apply(V,arguments),f.apply(this,V)}}function b(f,_){function T(){}T.prototype=_.prototype,f.Z=_.prototype,f.prototype=new T,f.prototype.constructor=f,f.Ob=function(V,Z,le){for(var Ve=Array(arguments.length-2),yt=2;yt<arguments.length;yt++)Ve[yt-2]=arguments[yt];return _.prototype[Z].apply(V,Ve)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function k(f){const _=f.length;if(_>0){const T=Array(_);for(let V=0;V<_;V++)T[V]=f[V];return T}return[]}function j(f,_){for(let V=1;V<arguments.length;V++){const Z=arguments[V];var T=typeof Z;if(T=T!="object"?T:Z?Array.isArray(Z)?"array":T:"null",T=="array"||T=="object"&&typeof Z.length=="number"){T=f.length||0;const le=Z.length||0;f.length=T+le;for(let Ve=0;Ve<le;Ve++)f[T+Ve]=Z[Ve]}else f.push(Z)}}class R{constructor(_,T){this.i=_,this.j=T,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function N(f){u.setTimeout(()=>{throw f},0)}function U(){var f=w;let _=null;return f.g&&(_=f.g,f.g=f.g.next,f.g||(f.h=null),_.next=null),_}class F{constructor(){this.h=this.g=null}add(_,T){const V=I.get();V.set(_,T),this.h?this.h.next=V:this.g=V,this.h=V}}var I=new R(()=>new O,f=>f.reset());class O{constructor(){this.next=this.g=this.h=null}set(_,T){this.h=_,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let B,H=!1,w=new F,E=()=>{const f=Promise.resolve(void 0);B=()=>{f.then(A)}};function A(){for(var f;f=U();){try{f.h.call(f.g)}catch(T){N(T)}var _=I;_.j(f),_.h<100&&(_.h++,f.next=_.g,_.g=f)}H=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(f,_){this.type=f,this.g=this.target=_,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var f=!1,_=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const T=()=>{};u.addEventListener("test",T,_),u.removeEventListener("test",T,_)}catch{}return f})();function M(f){return/^[\s\xa0]*$/.test(f)}function se(f,_){L.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,_)}b(se,L),se.prototype.init=function(f,_){const T=this.type=f.type,V=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=_,_=f.relatedTarget,_||(T=="mouseover"?_=f.fromElement:T=="mouseout"&&(_=f.toElement)),this.relatedTarget=_,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&se.Z.h.call(this)},se.prototype.h=function(){se.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var ae="closure_listenable_"+(Math.random()*1e6|0),G=0;function J(f,_,T,V,Z){this.listener=f,this.proxy=null,this.src=_,this.type=T,this.capture=!!V,this.ha=Z,this.key=++G,this.da=this.fa=!1}function W(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Ee(f,_,T){for(const V in f)_.call(T,f[V],V,f)}function Pe(f,_){for(const T in f)_.call(void 0,f[T],T,f)}function $(f){const _={};for(const T in f)_[T]=f[T];return _}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(f,_){let T,V;for(let Z=1;Z<arguments.length;Z++){V=arguments[Z];for(T in V)f[T]=V[T];for(let le=0;le<X.length;le++)T=X[le],Object.prototype.hasOwnProperty.call(V,T)&&(f[T]=V[T])}}function fe(f){this.src=f,this.g={},this.h=0}fe.prototype.add=function(f,_,T,V,Z){const le=f.toString();f=this.g[le],f||(f=this.g[le]=[],this.h++);const Ve=Ue(f,_,V,Z);return Ve>-1?(_=f[Ve],T||(_.fa=!1)):(_=new J(_,this.src,le,!!V,Z),_.fa=T,f.push(_)),_};function Ce(f,_){const T=_.type;if(T in f.g){var V=f.g[T],Z=Array.prototype.indexOf.call(V,_,void 0),le;(le=Z>=0)&&Array.prototype.splice.call(V,Z,1),le&&(W(_),f.g[T].length==0&&(delete f.g[T],f.h--))}}function Ue(f,_,T,V){for(let Z=0;Z<f.length;++Z){const le=f[Z];if(!le.da&&le.listener==_&&le.capture==!!T&&le.ha==V)return Z}return-1}var re="closure_lm_"+(Math.random()*1e6|0),Le={};function Re(f,_,T,V,Z){if(Array.isArray(_)){for(let le=0;le<_.length;le++)Re(f,_[le],T,V,Z);return null}return T=K(T),f&&f[ae]?f.J(_,T,h(V)?!!V.capture:!1,Z):We(f,_,T,!1,V,Z)}function We(f,_,T,V,Z,le){if(!_)throw Error("Invalid event type");const Ve=h(Z)?!!Z.capture:!!Z;let yt=Oe(f);if(yt||(f[re]=yt=new fe(f)),T=yt.add(_,T,V,Ve,le),T.proxy)return T;if(V=ke(),T.proxy=V,V.src=f,V.listener=T,f.addEventListener)z||(Z=Ve),Z===void 0&&(Z=!1),f.addEventListener(_.toString(),V,Z);else if(f.attachEvent)f.attachEvent(qe(_.toString()),V);else if(f.addListener&&f.removeListener)f.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return T}function ke(){function f(T){return _.call(f.src,f.listener,T)}const _=ve;return f}function he(f,_,T,V,Z){if(Array.isArray(_))for(var le=0;le<_.length;le++)he(f,_[le],T,V,Z);else V=h(V)?!!V.capture:!!V,T=K(T),f&&f[ae]?(f=f.i,le=String(_).toString(),le in f.g&&(_=f.g[le],T=Ue(_,T,V,Z),T>-1&&(W(_[T]),Array.prototype.splice.call(_,T,1),_.length==0&&(delete f.g[le],f.h--)))):f&&(f=Oe(f))&&(_=f.g[_.toString()],f=-1,_&&(f=Ue(_,T,V,Z)),(T=f>-1?_[f]:null)&&ee(T))}function ee(f){if(typeof f!="number"&&f&&!f.da){var _=f.src;if(_&&_[ae])Ce(_.i,f);else{var T=f.type,V=f.proxy;_.removeEventListener?_.removeEventListener(T,V,f.capture):_.detachEvent?_.detachEvent(qe(T),V):_.addListener&&_.removeListener&&_.removeListener(V),(T=Oe(_))?(Ce(T,f),T.h==0&&(T.src=null,_[re]=null)):W(f)}}}function qe(f){return f in Le?Le[f]:Le[f]="on"+f}function ve(f,_){if(f.da)f=!0;else{_=new se(_,this);const T=f.listener,V=f.ha||f.src;f.fa&&ee(f),f=T.call(V,_)}return f}function Oe(f){return f=f[re],f instanceof fe?f:null}var Me="__closure_events_fn_"+(Math.random()*1e9>>>0);function K(f){return typeof f=="function"?f:(f[Me]||(f[Me]=function(_){return f.handleEvent(_)}),f[Me])}function ue(){P.call(this),this.i=new fe(this),this.M=this,this.G=null}b(ue,P),ue.prototype[ae]=!0,ue.prototype.removeEventListener=function(f,_,T,V){he(this,f,_,T,V)};function je(f,_){var T,V=f.G;if(V)for(T=[];V;V=V.G)T.push(V);if(f=f.M,V=_.type||_,typeof _=="string")_=new L(_,f);else if(_ instanceof L)_.target=_.target||f;else{var Z=_;_=new L(V,f),oe(_,Z)}Z=!0;let le,Ve;if(T)for(Ve=T.length-1;Ve>=0;Ve--)le=_.g=T[Ve],Z=me(le,V,!0,_)&&Z;if(le=_.g=f,Z=me(le,V,!0,_)&&Z,Z=me(le,V,!1,_)&&Z,T)for(Ve=0;Ve<T.length;Ve++)le=_.g=T[Ve],Z=me(le,V,!1,_)&&Z}ue.prototype.N=function(){if(ue.Z.N.call(this),this.i){var f=this.i;for(const _ in f.g){const T=f.g[_];for(let V=0;V<T.length;V++)W(T[V]);delete f.g[_],f.h--}}this.G=null},ue.prototype.J=function(f,_,T,V){return this.i.add(String(f),_,!1,T,V)},ue.prototype.K=function(f,_,T,V){return this.i.add(String(f),_,!0,T,V)};function me(f,_,T,V){if(_=f.i.g[String(_)],!_)return!0;_=_.concat();let Z=!0;for(let le=0;le<_.length;++le){const Ve=_[le];if(Ve&&!Ve.da&&Ve.capture==T){const yt=Ve.listener,bn=Ve.ha||Ve.src;Ve.fa&&Ce(f.i,Ve),Z=yt.call(bn,V)!==!1&&Z}}return Z&&!V.defaultPrevented}function Ne(f,_){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=p(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:u.setTimeout(f,_||0)}function _e(f){f.g=Ne(()=>{f.g=null,f.i&&(f.i=!1,_e(f))},f.l);const _=f.h;f.h=null,f.m.apply(null,_)}class Ie extends P{constructor(_,T){super(),this.m=_,this.l=T,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:_e(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function st(f){P.call(this),this.h=f,this.g={}}b(st,P);var Pt=[];function $n(f){Ee(f.g,function(_,T){this.g.hasOwnProperty(T)&&ee(_)},f),f.g={}}st.prototype.N=function(){st.Z.N.call(this),$n(this)},st.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Se=u.JSON.stringify,Fe=u.JSON.parse,lt=class{stringify(f){return u.JSON.stringify(f,void 0)}parse(f){return u.JSON.parse(f,void 0)}};function St(){}function Vt(){}var Tt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ze(){L.call(this,"d")}b(Ze,L);function Gt(){L.call(this,"c")}b(Gt,L);var nn={},Be=null;function Te(){return Be=Be||new ue}nn.Ia="serverreachability";function Je(f){L.call(this,nn.Ia,f)}b(Je,L);function et(f){const _=Te();je(_,new Je(_))}nn.STAT_EVENT="statevent";function gt(f,_){L.call(this,nn.STAT_EVENT,f),this.stat=_}b(gt,L);function dt(f){const _=Te();je(_,new gt(_,f))}nn.Ja="timingevent";function kt(f,_){L.call(this,nn.Ja,f),this.size=_}b(kt,L);function Ft(f,_){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){f()},_)}function xt(){this.g=!0}xt.prototype.ua=function(){this.g=!1};function on(f,_,T,V,Z,le){f.info(function(){if(f.g)if(le){var Ve="",yt=le.split("&");for(let $t=0;$t<yt.length;$t++){var bn=yt[$t].split("=");if(bn.length>1){const hn=bn[0];bn=bn[1];const Jr=hn.split("_");Ve=Jr.length>=2&&Jr[1]=="type"?Ve+(hn+"="+bn+"&"):Ve+(hn+"=redacted&")}}}else Ve=null;else Ve=le;return"XMLHTTP REQ ("+V+") [attempt "+Z+"]: "+_+`
`+T+`
`+Ve})}function zn(f,_,T,V,Z,le,Ve){f.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+Z+"]: "+_+`
`+T+`
`+le+" "+Ve})}function He(f,_,T,V){f.info(function(){return"XMLHTTP TEXT ("+_+"): "+Ht(f,T)+(V?" "+V:"")})}function vt(f,_){f.info(function(){return"TIMEOUT: "+_})}xt.prototype.info=function(){};function Ht(f,_){if(!f.g)return _;if(!_)return null;try{const le=JSON.parse(_);if(le){for(f=0;f<le.length;f++)if(Array.isArray(le[f])){var T=le[f];if(!(T.length<2)){var V=T[1];if(Array.isArray(V)&&!(V.length<1)){var Z=V[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(let Ve=1;Ve<V.length;Ve++)V[Ve]=""}}}}return Se(le)}catch{return _}}var Xn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},qi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Oc;function eo(){}b(eo,St),eo.prototype.g=function(){return new XMLHttpRequest},Oc=new eo;function ui(f){return encodeURIComponent(String(f))}function Bd(f){var _=1;f=f.split(":");const T=[];for(;_>0&&f.length;)T.push(f.shift()),_--;return f.length&&T.push(f.join(":")),T}function us(f,_,T,V){this.j=f,this.i=_,this.l=T,this.S=V||1,this.V=new st(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ds}function ds(){this.i=null,this.g="",this.h=!1}var Cn={},qn={};function ks(f,_,T){f.M=1,f.A=to(kn(_)),f.u=T,f.R=!0,nl(f,null)}function nl(f,_){f.F=Date.now(),Ns(f),f.B=kn(f.A);var T=f.B,V=f.S;Array.isArray(V)||(V=[String(V)]),al(T.i,"t",V),f.C=0,T=f.j.L,f.h=new ds,f.g=nh(f.j,T?_:null,!f.u),f.P>0&&(f.O=new Ie(p(f.Y,f,f.g),f.P)),_=f.V,T=f.g,V=f.ba;var Z="readystatechange";Array.isArray(Z)||(Z&&(Pt[0]=Z.toString()),Z=Pt);for(let le=0;le<Z.length;le++){const Ve=Re(T,Z[le],V||_.handleEvent,!1,_.h||_);if(!Ve)break;_.g[Ve.key]=Ve}_=f.J?$(f.J):{},f.u?(f.v||(f.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,_)):(f.v="GET",f.g.ea(f.B,f.v,null,_)),et(),on(f.i,f.v,f.B,f.l,f.S,f.u)}us.prototype.ba=function(f){f=f.target;const _=this.O;_&&ms(f)==3?_.j():this.Y(f)},us.prototype.Y=function(f){try{if(f==this.g)e:{const yt=ms(this.g),bn=this.g.ya(),$t=this.g.ca();if(!(yt<3)&&(yt!=3||this.g&&(this.h.h||this.g.la()||Wn(this.g)))){this.K||yt!=4||bn==7||(bn==8||$t<=0?et(3):et(2)),As(this);var _=this.g.ca();this.X=_;var T=Tp(this);if(this.o=_==200,zn(this.i,this.v,this.B,this.l,this.S,yt,_),this.o){if(this.U&&!this.L){t:{if(this.g){var V,Z=this.g;if((V=Z.g?Z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(V)){var le=V;break t}}le=null}if(f=le)He(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Rs(this,f);else{this.o=!1,this.m=3,dt(12),Mr(this),Qr(this);break e}}if(this.R){f=!0;let hn;for(;!this.K&&this.C<T.length;)if(hn=Hd(this,T),hn==qn){yt==4&&(this.m=4,dt(14),f=!1),He(this.i,this.l,null,"[Incomplete Response]");break}else if(hn==Cn){this.m=4,dt(15),He(this.i,this.l,T,"[Invalid Chunk]"),f=!1;break}else He(this.i,this.l,hn,null),Rs(this,hn);if(Fd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||T.length!=0||this.h.h||(this.m=1,dt(16),f=!1),this.o=this.o&&f,!f)He(this.i,this.l,T,"[Invalid Chunked Response]"),Mr(this),Qr(this);else if(T.length>0&&!this.W){this.W=!0;var Ve=this.j;Ve.g==this&&Ve.aa&&!Ve.P&&(Ve.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Wc(Ve),Ve.P=!0,dt(11))}}else He(this.i,this.l,T,null),Rs(this,T);yt==4&&Mr(this),this.o&&!this.K&&(yt==4?Jd(this.j,this):(this.o=!1,Ns(this)))}else hi(this.g),_==400&&T.indexOf("Unknown SID")>0?(this.m=3,dt(12)):(this.m=0,dt(13)),Mr(this),Qr(this)}}}catch{}finally{}};function Tp(f){if(!Fd(f))return f.g.la();const _=Wn(f.g);if(_==="")return"";let T="";const V=_.length,Z=ms(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return Mr(f),Qr(f),"";f.h.i=new u.TextDecoder}for(let le=0;le<V;le++)f.h.h=!0,T+=f.h.i.decode(_[le],{stream:!(Z&&le==V-1)});return _.length=0,f.h.g+=T,f.C=0,f.h.g}function Fd(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function Hd(f,_){var T=f.C,V=_.indexOf(`
`,T);return V==-1?qn:(T=Number(_.substring(T,V)),isNaN(T)?Cn:(V+=1,V+T>_.length?qn:(_=_.slice(V,V+T),f.C=V+T,_)))}us.prototype.cancel=function(){this.K=!0,Mr(this)};function Ns(f){f.T=Date.now()+f.H,rl(f,f.H)}function rl(f,_){if(f.D!=null)throw Error("WatchDog timer not null");f.D=Ft(p(f.aa,f),_)}function As(f){f.D&&(u.clearTimeout(f.D),f.D=null)}us.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(vt(this.i,this.B),this.M!=2&&(et(),dt(17)),Mr(this),this.m=2,Qr(this)):rl(this,this.T-f)};function Qr(f){f.j.I==0||f.K||Jd(f.j,f)}function Mr(f){As(f);var _=f.O;_&&typeof _.dispose=="function"&&_.dispose(),f.O=null,$n(f.V),f.g&&(_=f.g,f.g=null,_.abort(),_.dispose())}function Rs(f,_){try{var T=f.j;if(T.I!=0&&(T.g==f||Is(T.h,f))){if(!f.L&&Is(T.h,f)&&T.I==3){try{var V=T.Ba.g.parse(_)}catch{V=null}if(Array.isArray(V)&&V.length==3){var Z=V;if(Z[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<f.F)dl(T),Zi(T);else break e;lo(T),dt(18)}}else T.xa=Z[1],0<T.xa-T.K&&Z[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=Ft(p(T.Va,T),6e3));js(T.h)<=1&&T.ta&&(T.ta=void 0)}else Vs(T,11)}else if((f.L||T.g==f)&&dl(T),!M(_))for(Z=T.Ba.g.parse(_),_=0;_<Z.length;_++){let $t=Z[_];const hn=$t[0];if(!(hn<=T.K))if(T.K=hn,$t=$t[1],T.I==2)if($t[0]=="c"){T.M=$t[1],T.ba=$t[2];const Jr=$t[3];Jr!=null&&(T.ka=Jr,T.j.info("VER="+T.ka));const zs=$t[4];zs!=null&&(T.za=zs,T.j.info("SVER="+T.za));const ps=$t[5];ps!=null&&typeof ps=="number"&&ps>0&&(V=1.5*ps,T.O=V,T.j.info("backChannelRequestTimeoutMs_="+V)),V=T;const gs=f.g;if(gs){const co=gs.g?gs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(co){var le=V.h;le.g||co.indexOf("spdy")==-1&&co.indexOf("quic")==-1&&co.indexOf("h2")==-1||(le.j=le.l,le.g=new Set,le.h&&(zc(le,le.h),le.h=null))}if(V.G){const hl=gs.g?gs.g.getResponseHeader("X-HTTP-Session-Id"):null;hl&&(V.wa=hl,Qt(V.J,V.G,hl))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-f.F,T.j.info("Handshake RTT: "+T.T+"ms")),V=T;var Ve=f;if(V.na=th(V,V.L?V.ba:null,V.W),Ve.L){Uc(V.h,Ve);var yt=Ve,bn=V.O;bn&&(yt.H=bn),yt.D&&(As(yt),Ns(yt)),V.g=Ve}else Xd(V);T.i.length>0&&Ls(T)}else $t[0]!="stop"&&$t[0]!="close"||Vs(T,7);else T.I==3&&($t[0]=="stop"||$t[0]=="close"?$t[0]=="stop"?Vs(T,7):Qc(T):$t[0]!="noop"&&T.l&&T.l.qa($t),T.A=0)}}et(4)}catch{}}var Tn=class{constructor(f,_){this.g=f,this.map=_}};function Lc(f){this.l=f||10,u.PerformanceNavigationTiming?(f=u.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Vc(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function js(f){return f.h?1:f.g?f.g.size:0}function Is(f,_){return f.h?f.h==_:f.g?f.g.has(_):!1}function zc(f,_){f.g?f.g.add(_):f.h=_}function Uc(f,_){f.h&&f.h==_?f.h=null:f.g&&f.g.has(_)&&f.g.delete(_)}Lc.prototype.cancel=function(){if(this.i=Bc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Bc(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let _=f.i;for(const T of f.g.values())_=_.concat(T.G);return _}return k(f.i)}var $d=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sl(f,_){if(f){f=f.split("&");for(let T=0;T<f.length;T++){const V=f[T].indexOf("=");let Z,le=null;V>=0?(Z=f[T].substring(0,V),le=f[T].substring(V+1)):Z=f[T],_(Z,le?decodeURIComponent(le.replace(/\+/g," ")):"")}}}function Pr(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;f instanceof Pr?(this.l=f.l,Gn(this,f.j),this.o=f.o,this.g=f.g,Gi(this,f.u),this.h=f.h,Fc(this,Kd(f.i)),this.m=f.m):f&&(_=String(f).match($d))?(this.l=!1,Gn(this,_[1]||"",!0),this.o=Ds(_[2]||""),this.g=Ds(_[3]||"",!0),Gi(this,_[4]),this.h=Ds(_[5]||"",!0),Fc(this,_[6]||"",!0),this.m=Ds(_[7]||"")):(this.l=!1,this.i=new Ki(null,this.l))}Pr.prototype.toString=function(){const f=[];var _=this.j;_&&f.push(no(_,il,!0),":");var T=this.g;return(T||_=="file")&&(f.push("//"),(_=this.o)&&f.push(no(_,il,!0),"@"),f.push(ui(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&f.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&f.push("/"),f.push(no(T,T.charAt(0)=="/"?Hc:qd,!0))),(T=this.i.toString())&&f.push("?",T),(T=this.m)&&f.push("#",no(T,Gd)),f.join("")},Pr.prototype.resolve=function(f){const _=kn(this);let T=!!f.j;T?Gn(_,f.j):T=!!f.o,T?_.o=f.o:T=!!f.g,T?_.g=f.g:T=f.u!=null;var V=f.h;if(T)Gi(_,f.u);else if(T=!!f.h){if(V.charAt(0)!="/")if(this.g&&!this.h)V="/"+V;else{var Z=_.h.lastIndexOf("/");Z!=-1&&(V=_.h.slice(0,Z+1)+V)}if(Z=V,Z==".."||Z==".")V="";else if(Z.indexOf("./")!=-1||Z.indexOf("/.")!=-1){V=Z.lastIndexOf("/",0)==0,Z=Z.split("/");const le=[];for(let Ve=0;Ve<Z.length;){const yt=Z[Ve++];yt=="."?V&&Ve==Z.length&&le.push(""):yt==".."?((le.length>1||le.length==1&&le[0]!="")&&le.pop(),V&&Ve==Z.length&&le.push("")):(le.push(yt),V=!0)}V=le.join("/")}else V=Z}return T?_.h=V:T=f.i.toString()!=="",T?Fc(_,Kd(f.i)):T=!!f.m,T&&(_.m=f.m),_};function kn(f){return new Pr(f)}function Gn(f,_,T){f.j=T?Ds(_,!0):_,f.j&&(f.j=f.j.replace(/:$/,""))}function Gi(f,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);f.u=_}else f.u=null}function Fc(f,_,T){_ instanceof Ki?(f.i=_,ol(f.i,f.l)):(T||(_=no(_,Yi)),f.i=new Ki(_,f.l))}function Qt(f,_,T){f.i.set(_,T)}function to(f){return Qt(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function Ds(f,_){return f?_?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function no(f,_,T){return typeof f=="string"?(f=encodeURI(f).replace(_,wr),T&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function wr(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var il=/[#\/\?@]/g,qd=/[#\?:]/g,Hc=/[#\?]/g,Yi=/[#\?@]/g,Gd=/#/g;function Ki(f,_){this.h=this.g=null,this.i=f||null,this.j=!!_}function Sr(f){f.g||(f.g=new Map,f.h=0,f.i&&sl(f.i,function(_,T){f.add(decodeURIComponent(_.replace(/\+/g," ")),T)}))}t=Ki.prototype,t.add=function(f,_){Sr(this),this.i=null,f=Qi(this,f);let T=this.g.get(f);return T||this.g.set(f,T=[]),T.push(_),this.h+=1,this};function Yd(f,_){Sr(f),_=Qi(f,_),f.g.has(_)&&(f.i=null,f.h-=f.g.get(_).length,f.g.delete(_))}function $c(f,_){return Sr(f),_=Qi(f,_),f.g.has(_)}t.forEach=function(f,_){Sr(this),this.g.forEach(function(T,V){T.forEach(function(Z){f.call(_,Z,V,this)},this)},this)};function qc(f,_){Sr(f);let T=[];if(typeof _=="string")$c(f,_)&&(T=T.concat(f.g.get(Qi(f,_))));else for(f=Array.from(f.g.values()),_=0;_<f.length;_++)T=T.concat(f[_]);return T}t.set=function(f,_){return Sr(this),this.i=null,f=Qi(this,f),$c(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[_]),this.h+=1,this},t.get=function(f,_){return f?(f=qc(this,f),f.length>0?String(f[0]):_):_};function al(f,_,T){Yd(f,_),T.length>0&&(f.i=null,f.g.set(Qi(f,_),k(T)),f.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],_=Array.from(this.g.keys());for(let V=0;V<_.length;V++){var T=_[V];const Z=ui(T);T=qc(this,T);for(let le=0;le<T.length;le++){let Ve=Z;T[le]!==""&&(Ve+="="+ui(T[le])),f.push(Ve)}}return this.i=f.join("&")};function Kd(f){const _=new Ki;return _.i=f.i,f.g&&(_.g=new Map(f.g),_.h=f.h),_}function Qi(f,_){return _=String(_),f.j&&(_=_.toLowerCase()),_}function ol(f,_){_&&!f.j&&(Sr(f),f.i=null,f.g.forEach(function(T,V){const Z=V.toLowerCase();V!=Z&&(Yd(this,V),al(this,Z,T))},f)),f.j=_}function hs(f,_){const T=new xt;if(u.Image){const V=new Image;V.onload=y(Xr,T,"TestLoadImage: loaded",!0,_,V),V.onerror=y(Xr,T,"TestLoadImage: error",!1,_,V),V.onabort=y(Xr,T,"TestLoadImage: abort",!1,_,V),V.ontimeout=y(Xr,T,"TestLoadImage: timeout",!1,_,V),u.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=f}else _(!1)}function Gc(f,_){const T=new xt,V=new AbortController,Z=setTimeout(()=>{V.abort(),Xr(T,"TestPingServer: timeout",!1,_)},1e4);fetch(f,{signal:V.signal}).then(le=>{clearTimeout(Z),le.ok?Xr(T,"TestPingServer: ok",!0,_):Xr(T,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(Z),Xr(T,"TestPingServer: error",!1,_)})}function Xr(f,_,T,V,Z){try{Z&&(Z.onload=null,Z.onerror=null,Z.onabort=null,Z.ontimeout=null),V(T)}catch{}}function Xi(){this.g=new lt}function Ms(f){this.i=f.Sb||null,this.h=f.ab||!1}b(Ms,St),Ms.prototype.g=function(){return new ro(this.i,this.h)};function ro(f,_){ue.call(this),this.H=f,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(ro,ue),t=ro.prototype,t.open=function(f,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=_,this.readyState=1,fs(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(_.body=f),(this.H||u).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Wi(this)),this.readyState=0},t.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,fs(this)),this.g&&(this.readyState=3,fs(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ll(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function ll(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}t.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var _=f.value?f.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!f.done}))&&(this.response=this.responseText+=_)}f.done?Wi(this):fs(this),this.readyState==3&&ll(this)}},t.Oa=function(f){this.g&&(this.response=this.responseText=f,Wi(this))},t.Na=function(f){this.g&&(this.response=f,Wi(this))},t.ga=function(){this.g&&Wi(this)};function Wi(f){f.readyState=4,f.l=null,f.j=null,f.B=null,fs(f)}t.setRequestHeader=function(f,_){this.A.append(f,_)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],_=this.h.entries();for(var T=_.next();!T.done;)T=T.value,f.push(T[0]+": "+T[1]),T=_.next();return f.join(`\r
`)};function fs(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(ro.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Wr(f){let _="";return Ee(f,function(T,V){_+=V,_+=":",_+=T,_+=`\r
`}),_}function so(f,_,T){e:{for(V in T){var V=!1;break e}V=!0}V||(T=Wr(T),typeof f=="string"?T!=null&&ui(T):Qt(f,_,T))}function Jt(f){ue.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(Jt,ue);var Ps=/^https?$/i,Yc=["POST","PUT"];t=Jt.prototype,t.Fa=function(f){this.H=f},t.ea=function(f,_,T,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);_=_?_.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Oc.g(),this.g.onreadystatechange=x(p(this.Ca,this));try{this.B=!0,this.g.open(_,String(f),!0),this.B=!1}catch(le){io(this,le);return}if(f=T||"",T=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var Z in V)T.set(Z,V[Z]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const le of V.keys())T.set(le,V.get(le));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(T.keys()).find(le=>le.toLowerCase()=="content-type"),Z=u.FormData&&f instanceof u.FormData,!(Array.prototype.indexOf.call(Yc,_,void 0)>=0)||V||Z||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[le,Ve]of T)this.g.setRequestHeader(le,Ve);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(le){io(this,le)}};function io(f,_){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=_,f.o=5,Kc(f),di(f)}function Kc(f){f.A||(f.A=!0,je(f,"complete"),je(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,je(this,"complete"),je(this,"abort"),di(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),di(this,!0)),Jt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?ao(this):this.Xa())},t.Xa=function(){ao(this)};function ao(f){if(f.h&&typeof o<"u"){if(f.v&&ms(f)==4)setTimeout(f.Ca.bind(f),0);else if(je(f,"readystatechange"),ms(f)==4){f.h=!1;try{const le=f.ca();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var T;if(!(T=_)){var V;if(V=le===0){let Ve=String(f.D).match($d)[1]||null;!Ve&&u.self&&u.self.location&&(Ve=u.self.location.protocol.slice(0,-1)),V=!Ps.test(Ve?Ve.toLowerCase():"")}T=V}if(T)je(f,"complete"),je(f,"success");else{f.o=6;try{var Z=ms(f)>2?f.g.statusText:""}catch{Z=""}f.l=Z+" ["+f.ca()+"]",Kc(f)}}finally{di(f)}}}}function di(f,_){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const T=f.g;f.g=null,_||je(f,"ready");try{T.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ms(f){return f.g?f.g.readyState:0}t.ca=function(){try{return ms(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(f){if(this.g){var _=this.g.responseText;return f&&_.indexOf(f)==0&&(_=_.substring(f.length)),Fe(_)}};function Wn(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function hi(f){const _={};f=(f.g&&ms(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<f.length;V++){if(M(f[V]))continue;var T=Bd(f[V]);const Z=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const le=_[Z]||[];_[Z]=le,le.push(T)}Pe(_,function(V){return V.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Os(f,_,T){return T&&T.internalChannelParams&&T.internalChannelParams[f]||_}function Ji(f){this.za=0,this.i=[],this.j=new xt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Os("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Os("baseRetryDelayMs",5e3,f),this.Za=Os("retryDelaySeedMs",1e4,f),this.Ta=Os("forwardChannelMaxRetries",2,f),this.va=Os("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new Lc(f&&f.concurrentRequestLimit),this.Ba=new Xi,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Ji.prototype,t.ka=8,t.I=1,t.connect=function(f,_,T,V){dt(0),this.W=f,this.H=_||{},T&&V!==void 0&&(this.H.OSID=T,this.H.OAID=V),this.F=this.X,this.J=th(this,null,this.W),Ls(this)};function Qc(f){if(cl(f),f.I==3){var _=f.V++,T=kn(f.J);if(Qt(T,"SID",f.M),Qt(T,"RID",_),Qt(T,"TYPE","terminate"),oo(f,T),_=new us(f,f.j,_),_.M=2,_.A=to(kn(T)),T=!1,u.navigator&&u.navigator.sendBeacon)try{T=u.navigator.sendBeacon(_.A.toString(),"")}catch{}!T&&u.Image&&(new Image().src=_.A,T=!0),T||(_.g=nh(_.j,null),_.g.ea(_.A)),_.F=Date.now(),Ns(_)}eh(f)}function Zi(f){f.g&&(Wc(f),f.g.cancel(),f.g=null)}function cl(f){Zi(f),f.v&&(u.clearTimeout(f.v),f.v=null),dl(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&u.clearTimeout(f.m),f.m=null)}function Ls(f){if(!Vc(f.h)&&!f.m){f.m=!0;var _=f.Ea;B||E(),H||(B(),H=!0),w.add(_,f),f.D=0}}function ul(f,_){return js(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=_.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=Ft(p(f.Ea,f,_),Zd(f,f.D)),f.D++,!0)}t.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const Z=new us(this,this.j,f);let le=this.o;if(this.U&&(le?(le=$(le),oe(le,this.U)):le=this.U),this.u!==null||this.R||(Z.J=le,le=null),this.S)e:{for(var _=0,T=0;T<this.i.length;T++){t:{var V=this.i[T];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(_+=V,_>4096){_=T;break e}if(_===4096||T===this.i.length-1){_=T+1;break e}}_=1e3}else _=1e3;_=Qd(this,Z,_),T=kn(this.J),Qt(T,"RID",f),Qt(T,"CVER",22),this.G&&Qt(T,"X-HTTP-Session-Id",this.G),oo(this,T),le&&(this.R?_="headers="+ui(Wr(le))+"&"+_:this.u&&so(T,this.u,le)),zc(this.h,Z),this.Ra&&Qt(T,"TYPE","init"),this.S?(Qt(T,"$req",_),Qt(T,"SID","null"),Z.U=!0,ks(Z,T,null)):ks(Z,T,_),this.I=2}}else this.I==3&&(f?Xc(this,f):this.i.length==0||Vc(this.h)||Xc(this))};function Xc(f,_){var T;_?T=_.l:T=f.V++;const V=kn(f.J);Qt(V,"SID",f.M),Qt(V,"RID",T),Qt(V,"AID",f.K),oo(f,V),f.u&&f.o&&so(V,f.u,f.o),T=new us(f,f.j,T,f.D+1),f.u===null&&(T.J=f.o),_&&(f.i=_.G.concat(f.i)),_=Qd(f,T,1e3),T.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),zc(f.h,T),ks(T,V,_)}function oo(f,_){f.H&&Ee(f.H,function(T,V){Qt(_,V,T)}),f.l&&Ee({},function(T,V){Qt(_,V,T)})}function Qd(f,_,T){T=Math.min(f.i.length,T);const V=f.l?p(f.l.Ka,f.l,f):null;e:{var Z=f.i;let yt=-1;for(;;){const bn=["count="+T];yt==-1?T>0?(yt=Z[0].g,bn.push("ofs="+yt)):yt=0:bn.push("ofs="+yt);let $t=!0;for(let hn=0;hn<T;hn++){var le=Z[hn].g;const Jr=Z[hn].map;if(le-=yt,le<0)yt=Math.max(0,Z[hn].g-100),$t=!1;else try{le="req"+le+"_"||"";try{var Ve=Jr instanceof Map?Jr:Object.entries(Jr);for(const[zs,ps]of Ve){let gs=ps;h(ps)&&(gs=Se(ps)),bn.push(le+zs+"="+encodeURIComponent(gs))}}catch(zs){throw bn.push(le+"type="+encodeURIComponent("_badmap")),zs}}catch{V&&V(Jr)}}if($t){Ve=bn.join("&");break e}}Ve=void 0}return f=f.i.splice(0,T),_.G=f,Ve}function Xd(f){if(!f.g&&!f.v){f.Y=1;var _=f.Da;B||E(),H||(B(),H=!0),w.add(_,f),f.A=0}}function lo(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=Ft(p(f.Da,f),Zd(f,f.A)),f.A++,!0)}t.Da=function(){if(this.v=null,Wd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=Ft(p(this.Wa,this),f)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,dt(10),Zi(this),Wd(this))};function Wc(f){f.B!=null&&(u.clearTimeout(f.B),f.B=null)}function Wd(f){f.g=new us(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var _=kn(f.na);Qt(_,"RID","rpc"),Qt(_,"SID",f.M),Qt(_,"AID",f.K),Qt(_,"CI",f.F?"0":"1"),!f.F&&f.ia&&Qt(_,"TO",f.ia),Qt(_,"TYPE","xmlhttp"),oo(f,_),f.u&&f.o&&so(_,f.u,f.o),f.O&&(f.g.H=f.O);var T=f.g;f=f.ba,T.M=1,T.A=to(kn(_)),T.u=null,T.R=!0,nl(T,f)}t.Va=function(){this.C!=null&&(this.C=null,Zi(this),lo(this),dt(19))};function dl(f){f.C!=null&&(u.clearTimeout(f.C),f.C=null)}function Jd(f,_){var T=null;if(f.g==_){dl(f),Wc(f),f.g=null;var V=2}else if(Is(f.h,_))T=_.G,Uc(f.h,_),V=1;else return;if(f.I!=0){if(_.o)if(V==1){T=_.u?_.u.length:0,_=Date.now()-_.F;var Z=f.D;V=Te(),je(V,new kt(V,T)),Ls(f)}else Xd(f);else if(Z=_.m,Z==3||Z==0&&_.X>0||!(V==1&&ul(f,_)||V==2&&lo(f)))switch(T&&T.length>0&&(_=f.h,_.i=_.i.concat(T)),Z){case 1:Vs(f,5);break;case 4:Vs(f,10);break;case 3:Vs(f,6);break;default:Vs(f,2)}}}function Zd(f,_){let T=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(T*=2),T*_}function Vs(f,_){if(f.j.info("Error code "+_),_==2){var T=p(f.bb,f),V=f.Ua;const Z=!V;V=new Pr(V||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Gn(V,"https"),to(V),Z?hs(V.toString(),T):Gc(V.toString(),T)}else dt(2);f.I=0,f.l&&f.l.pa(_),eh(f),cl(f)}t.bb=function(f){f?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function eh(f){if(f.I=0,f.ja=[],f.l){const _=Bc(f.h);(_.length!=0||f.i.length!=0)&&(j(f.ja,_),j(f.ja,f.i),f.h.i.length=0,k(f.i),f.i.length=0),f.l.oa()}}function th(f,_,T){var V=T instanceof Pr?kn(T):new Pr(T);if(V.g!="")_&&(V.g=_+"."+V.g),Gi(V,V.u);else{var Z=u.location;V=Z.protocol,_=_?_+"."+Z.hostname:Z.hostname,Z=+Z.port;const le=new Pr(null);V&&Gn(le,V),_&&(le.g=_),Z&&Gi(le,Z),T&&(le.h=T),V=le}return T=f.G,_=f.wa,T&&_&&Qt(V,T,_),Qt(V,"VER",f.ka),oo(f,V),V}function nh(f,_,T){if(_&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=f.Aa&&!f.ma?new Jt(new Ms({ab:T})):new Jt(f.ma),_.Fa(f.L),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function rh(){}t=rh.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function ea(){}ea.prototype.g=function(f,_){return new mr(f,_)};function mr(f,_){ue.call(this),this.g=new Ji(_),this.l=f,this.h=_&&_.messageUrlParams||null,f=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(f?f["X-WebChannel-Content-Type"]=_.messageContentType:f={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(f?f["X-WebChannel-Client-Profile"]=_.sa:f={"X-WebChannel-Client-Profile":_.sa}),this.g.U=f,(f=_&&_.Qb)&&!M(f)&&(this.g.u=f),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!M(_)&&(this.g.G=_,f=this.h,f!==null&&_ in f&&(f=this.h,_ in f&&delete f[_])),this.j=new fi(this)}b(mr,ue),mr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},mr.prototype.close=function(){Qc(this.g)},mr.prototype.o=function(f){var _=this.g;if(typeof f=="string"){var T={};T.__data__=f,f=T}else this.v&&(T={},T.__data__=Se(f),f=T);_.i.push(new Tn(_.Ya++,f)),_.I==3&&Ls(_)},mr.prototype.N=function(){this.g.l=null,delete this.j,Qc(this.g),delete this.g,mr.Z.N.call(this)};function sh(f){Ze.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var _=f.__sm__;if(_){e:{for(const T in _){f=T;break e}f=void 0}(this.i=f)&&(f=this.i,_=_!==null&&f in _?_[f]:void 0),this.data=_}else this.data=f}b(sh,Ze);function ih(){Gt.call(this),this.status=1}b(ih,Gt);function fi(f){this.g=f}b(fi,rh),fi.prototype.ra=function(){je(this.g,"a")},fi.prototype.qa=function(f){je(this.g,new sh(f))},fi.prototype.pa=function(f){je(this.g,new ih)},fi.prototype.oa=function(){je(this.g,"b")},ea.prototype.createWebChannel=ea.prototype.g,mr.prototype.send=mr.prototype.o,mr.prototype.open=mr.prototype.m,mr.prototype.close=mr.prototype.close,nC=function(){return new ea},tC=function(){return Te()},eC=nn,yv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Xn.NO_ERROR=0,Xn.TIMEOUT=8,Xn.HTTP_ERROR=6,Df=Xn,qi.COMPLETE="complete",ZE=qi,Vt.EventType=Tt,Tt.OPEN="a",Tt.CLOSE="b",Tt.ERROR="c",Tt.MESSAGE="d",ue.prototype.listen=ue.prototype.J,$u=Vt,Jt.prototype.listenOnce=Jt.prototype.K,Jt.prototype.getLastError=Jt.prototype.Ha,Jt.prototype.getLastErrorCode=Jt.prototype.ya,Jt.prototype.getStatus=Jt.prototype.ca,Jt.prototype.getResponseJson=Jt.prototype.La,Jt.prototype.getResponseText=Jt.prototype.la,Jt.prototype.send=Jt.prototype.ea,Jt.prototype.setWithCredentials=Jt.prototype.Fa,JE=Jt}).apply(typeof df<"u"?df:typeof self<"u"?self:typeof window<"u"?window:{});const l4="@firebase/firestore",c4="4.9.2";let cr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};cr.UNAUTHENTICATED=new cr(null),cr.GOOGLE_CREDENTIALS=new cr("google-credentials-uid"),cr.FIRST_PARTY=new cr("first-party-uid"),cr.MOCK_USER=new cr("mock-user");let Cc="12.3.0";const Uo=new my("@firebase/firestore");function ql(){return Uo.logLevel}function $e(t,...e){if(Uo.logLevel<=It.DEBUG){const n=e.map(ky);Uo.debug(`Firestore (${Cc}): ${t}`,...n)}}function Fi(t,...e){if(Uo.logLevel<=It.ERROR){const n=e.map(ky);Uo.error(`Firestore (${Cc}): ${t}`,...n)}}function ac(t,...e){if(Uo.logLevel<=It.WARN){const n=e.map(ky);Uo.warn(`Firestore (${Cc}): ${t}`,...n)}}function ky(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function ut(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,rC(t,r,n)}function rC(t,e,n){let r=`FIRESTORE (${Cc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Fi(r),new Error(r)}function Kt(t,e,n,r){let a="Unexpected state";typeof n=="string"?a=n:r=n,t||rC(e,a,r)}function pt(t,e){return t}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ze extends si{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Li{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class sC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class L9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(cr.UNAUTHENTICATED)))}shutdown(){}}class V9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class z9{constructor(e){this.t=e,this.currentUser=cr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Kt(this.o===void 0,42304);let r=this.i;const a=m=>this.i!==r?(r=this.i,n(m)):Promise.resolve();let o=new Li;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Li,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const m=o;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},h=m=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((m=>h(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?h(m):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Li)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Kt(typeof r.accessToken=="string",31837,{l:r}),new sC(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Kt(e===null||typeof e=="string",2055,{h:e}),new cr(e)}}class U9{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=cr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class B9{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new U9(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(cr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class u4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class F9{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Kt(this.o===void 0,3512);const r=o=>{o.error!=null&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.m;return this.m=o.token,$e("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const a=o=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>a(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?a(o):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new u4(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Kt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new u4(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function H9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class Ny{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=H9(40);for(let o=0;o<a.length;++o)r.length<20&&a[o]<n&&(r+=e.charAt(a[o]%62))}return r}}function Dt(t,e){return t<e?-1:t>e?1:0}function bv(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const a=t.charAt(r),o=e.charAt(r);if(a!==o)return D0(a)===D0(o)?Dt(a,o):D0(a)?1:-1}return Dt(t.length,e.length)}const $9=55296,q9=57343;function D0(t){const e=t.charCodeAt(0);return e>=$9&&e<=q9}function oc(t,e,n){return t.length===e.length&&t.every(((r,a)=>n(r,e[a])))}const d4="__name__";class Gs{constructor(e,n,r){n===void 0?n=0:n>e.length&&ut(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ut(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Gs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Gs?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let a=0;a<r;a++){const o=Gs.compareSegments(e.get(a),n.get(a));if(o!==0)return o}return Dt(e.length,n.length)}static compareSegments(e,n){const r=Gs.isNumericId(e),a=Gs.isNumericId(n);return r&&!a?-1:!r&&a?1:r&&a?Gs.extractNumericId(e).compare(Gs.extractNumericId(n)):bv(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Va.fromString(e.substring(4,e.length-2))}}class sn extends Gs{construct(e,n,r){return new sn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ze(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((a=>a.length>0)))}return new sn(n)}static emptyPath(){return new sn([])}}const G9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ir extends Gs{construct(e,n,r){return new ir(e,n,r)}static isValidIdentifier(e){return G9.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ir.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===d4}static keyField(){return new ir([d4])}static fromServerFormat(e){const n=[];let r="",a=0;const o=()=>{if(r.length===0)throw new ze(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let u=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new ze(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ze(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,a+=2}else h==="`"?(u=!u,a++):h!=="."||u?(r+=h,a++):(o(),a++)}if(o(),u)throw new ze(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ir(n)}static emptyPath(){return new ir([])}}class tt{constructor(e){this.path=e}static fromPath(e){return new tt(sn.fromString(e))}static fromName(e){return new tt(sn.fromString(e).popFirst(5))}static empty(){return new tt(sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&sn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return sn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tt(new sn(e.slice()))}}function iC(t,e,n){if(!n)throw new ze(pe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Y9(t,e,n,r){if(e===!0&&r===!0)throw new ze(pe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function h4(t){if(!tt.isDocumentKey(t))throw new ze(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function f4(t){if(tt.isDocumentKey(t))throw new ze(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function aC(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Bm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ut(12329,{type:typeof t})}function br(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ze(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Bm(t);throw new ze(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function K9(t,e){if(e<=0)throw new ze(pe.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function Ln(t,e){const n={typeString:t};return e&&(n.value=e),n}function Nd(t,e){if(!aC(t))throw new ze(pe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const a=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const u=t[r];if(a&&typeof u!==a){n=`JSON field '${r}' must be a ${a}.`;break}if(o!==void 0&&u!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new ze(pe.INVALID_ARGUMENT,n);return!0}const m4=-62135596800,p4=1e6;class dn{static now(){return dn.fromMillis(Date.now())}static fromDate(e){return dn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*p4);return new dn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ze(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ze(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<m4)throw new ze(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ze(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/p4}_compareTo(e){return this.seconds===e.seconds?Dt(this.nanoseconds,e.nanoseconds):Dt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:dn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Nd(e,dn._jsonSchema))return new dn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-m4;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}dn._jsonSchemaVersion="firestore/timestamp/1.0",dn._jsonSchema={type:Ln("string",dn._jsonSchemaVersion),seconds:Ln("number"),nanoseconds:Ln("number")};class ht{static fromTimestamp(e){return new ht(e)}static min(){return new ht(new dn(0,0))}static max(){return new ht(new dn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const id=-1;function Q9(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,a=ht.fromTimestamp(r===1e9?new dn(n+1,0):new dn(n,r));return new Ha(a,tt.empty(),e)}function X9(t){return new Ha(t.readTime,t.key,id)}class Ha{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ha(ht.min(),tt.empty(),id)}static max(){return new Ha(ht.max(),tt.empty(),id)}}function W9(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=tt.comparator(t.documentKey,e.documentKey),n!==0?n:Dt(t.largestBatchId,e.largestBatchId))}const J9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Z9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Tc(t){if(t.code!==pe.FAILED_PRECONDITION||t.message!==J9)throw t;$e("LocalStore","Unexpectedly lost primary lease")}class we{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ut(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new we(((r,a)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,a)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,a)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof we?n:we.resolve(n)}catch(n){return we.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):we.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):we.reject(n)}static resolve(e){return new we(((n,r)=>{n(e)}))}static reject(e){return new we(((n,r)=>{r(e)}))}static waitFor(e){return new we(((n,r)=>{let a=0,o=0,u=!1;e.forEach((h=>{++a,h.next((()=>{++o,u&&o===a&&n()}),(m=>r(m)))})),u=!0,o===a&&n()}))}static or(e){let n=we.resolve(!1);for(const r of e)n=n.next((a=>a?we.resolve(a):r()));return n}static forEach(e,n){const r=[];return e.forEach(((a,o)=>{r.push(n.call(this,a,o))})),this.waitFor(r)}static mapArray(e,n){return new we(((r,a)=>{const o=e.length,u=new Array(o);let h=0;for(let m=0;m<o;m++){const p=m;n(e[p]).next((y=>{u[p]=y,++h,h===o&&r(u)}),(y=>a(y)))}}))}static doWhile(e,n){return new we(((r,a)=>{const o=()=>{e()===!0?n().next((()=>{o()}),a):r()};o()}))}}function e8(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function kc(t){return t.name==="IndexedDbTransactionError"}class Fm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Fm.ce=-1;const Ay=-1;function Hm(t){return t==null}function om(t){return t===0&&1/t==-1/0}function t8(t){return typeof t=="number"&&Number.isInteger(t)&&!om(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const oC="";function n8(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=g4(e)),e=r8(t.get(n),e);return g4(e)}function r8(t,e){let n=e;const r=t.length;for(let a=0;a<r;a++){const o=t.charAt(a);switch(o){case"\0":n+="";break;case oC:n+="";break;default:n+=o}}return n}function g4(t){return t+oC+""}function v4(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function lC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class mn{constructor(e,n){this.comparator=e,this.root=n||sr.EMPTY}insert(e,n){return new mn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,sr.BLACK,null,null))}remove(e){return new mn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return n+r.left.size;a<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hf(this.root,e,this.comparator,!1)}getReverseIterator(){return new hf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hf(this.root,e,this.comparator,!0)}}class hf{constructor(e,n,r,a){this.isReverse=a,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&a&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sr{constructor(e,n,r,a,o){this.key=e,this.value=n,this.color=r??sr.RED,this.left=a??sr.EMPTY,this.right=o??sr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,a,o){return new sr(e??this.key,n??this.value,r??this.color,a??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let a=this;const o=r(e,a.key);return a=o<0?a.copy(null,null,null,a.left.insert(e,n,r),null):o===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return sr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return sr.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ut(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ut(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ut(27949);return e+(this.isRed()?0:1)}}sr.EMPTY=null,sr.RED=!0,sr.BLACK=!1;sr.EMPTY=new class{constructor(){this.size=0}get key(){throw ut(57766)}get value(){throw ut(16141)}get color(){throw ut(16727)}get left(){throw ut(29726)}get right(){throw ut(36894)}copy(e,n,r,a,o){return this}insert(e,n,r){return new sr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hn{constructor(e){this.comparator=e,this.data=new mn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new y4(this.data.getIterator())}getIteratorFrom(e){return new y4(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Hn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,o=r.getNext().key;if(this.comparator(a,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Hn(this.comparator);return n.data=e,n}}class y4{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Gr{constructor(e){this.fields=e,e.sort(ir.comparator)}static empty(){return new Gr([])}unionWith(e){let n=new Hn(ir.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Gr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return oc(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class cC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ar{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(a){try{return atob(a)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new cC("Invalid base64 string: "+o):o}})(e);return new ar(n)}static fromUint8Array(e){const n=(function(a){let o="";for(let u=0;u<a.length;++u)o+=String.fromCharCode(a[u]);return o})(e);return new ar(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Dt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ar.EMPTY_BYTE_STRING=new ar("");const s8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $a(t){if(Kt(!!t,39018),typeof t=="string"){let e=0;const n=s8.exec(t);if(Kt(!!n,46558,{timestamp:t}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Sn(t.seconds),nanos:Sn(t.nanos)}}function Sn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function qa(t){return typeof t=="string"?ar.fromBase64String(t):ar.fromUint8Array(t)}const uC="server_timestamp",dC="__type__",hC="__previous_value__",fC="__local_write_time__";function $m(t){return(t?.mapValue?.fields||{})[dC]?.stringValue===uC}function qm(t){const e=t.mapValue.fields[hC];return $m(e)?qm(e):e}function ad(t){const e=$a(t.mapValue.fields[fC].timestampValue);return new dn(e.seconds,e.nanos)}class i8{constructor(e,n,r,a,o,u,h,m,p,y){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=a,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=y}}const lm="(default)";class od{constructor(e,n){this.projectId=e,this.database=n||lm}static empty(){return new od("","")}get isDefaultDatabase(){return this.database===lm}isEqual(e){return e instanceof od&&e.projectId===this.projectId&&e.database===this.database}}const mC="__type__",a8="__max__",ff={mapValue:{}},pC="__vector__",cm="value";function Ga(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$m(t)?4:l8(t)?9007199254740991:o8(t)?10:11:ut(28295,{value:t})}function ti(t,e){if(t===e)return!0;const n=Ga(t);if(n!==Ga(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ad(t).isEqual(ad(e));case 3:return(function(a,o){if(typeof a.timestampValue=="string"&&typeof o.timestampValue=="string"&&a.timestampValue.length===o.timestampValue.length)return a.timestampValue===o.timestampValue;const u=$a(a.timestampValue),h=$a(o.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(a,o){return qa(a.bytesValue).isEqual(qa(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(a,o){return Sn(a.geoPointValue.latitude)===Sn(o.geoPointValue.latitude)&&Sn(a.geoPointValue.longitude)===Sn(o.geoPointValue.longitude)})(t,e);case 2:return(function(a,o){if("integerValue"in a&&"integerValue"in o)return Sn(a.integerValue)===Sn(o.integerValue);if("doubleValue"in a&&"doubleValue"in o){const u=Sn(a.doubleValue),h=Sn(o.doubleValue);return u===h?om(u)===om(h):isNaN(u)&&isNaN(h)}return!1})(t,e);case 9:return oc(t.arrayValue.values||[],e.arrayValue.values||[],ti);case 10:case 11:return(function(a,o){const u=a.mapValue.fields||{},h=o.mapValue.fields||{};if(v4(u)!==v4(h))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(h[m]===void 0||!ti(u[m],h[m])))return!1;return!0})(t,e);default:return ut(52216,{left:t})}}function ld(t,e){return(t.values||[]).find((n=>ti(n,e)))!==void 0}function lc(t,e){if(t===e)return 0;const n=Ga(t),r=Ga(e);if(n!==r)return Dt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Dt(t.booleanValue,e.booleanValue);case 2:return(function(o,u){const h=Sn(o.integerValue||o.doubleValue),m=Sn(u.integerValue||u.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1})(t,e);case 3:return b4(t.timestampValue,e.timestampValue);case 4:return b4(ad(t),ad(e));case 5:return bv(t.stringValue,e.stringValue);case 6:return(function(o,u){const h=qa(o),m=qa(u);return h.compareTo(m)})(t.bytesValue,e.bytesValue);case 7:return(function(o,u){const h=o.split("/"),m=u.split("/");for(let p=0;p<h.length&&p<m.length;p++){const y=Dt(h[p],m[p]);if(y!==0)return y}return Dt(h.length,m.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,u){const h=Dt(Sn(o.latitude),Sn(u.latitude));return h!==0?h:Dt(Sn(o.longitude),Sn(u.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return x4(t.arrayValue,e.arrayValue);case 10:return(function(o,u){const h=o.fields||{},m=u.fields||{},p=h[cm]?.arrayValue,y=m[cm]?.arrayValue,b=Dt(p?.values?.length||0,y?.values?.length||0);return b!==0?b:x4(p,y)})(t.mapValue,e.mapValue);case 11:return(function(o,u){if(o===ff.mapValue&&u===ff.mapValue)return 0;if(o===ff.mapValue)return 1;if(u===ff.mapValue)return-1;const h=o.fields||{},m=Object.keys(h),p=u.fields||{},y=Object.keys(p);m.sort(),y.sort();for(let b=0;b<m.length&&b<y.length;++b){const x=bv(m[b],y[b]);if(x!==0)return x;const k=lc(h[m[b]],p[y[b]]);if(k!==0)return k}return Dt(m.length,y.length)})(t.mapValue,e.mapValue);default:throw ut(23264,{he:n})}}function b4(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Dt(t,e);const n=$a(t),r=$a(e),a=Dt(n.seconds,r.seconds);return a!==0?a:Dt(n.nanos,r.nanos)}function x4(t,e){const n=t.values||[],r=e.values||[];for(let a=0;a<n.length&&a<r.length;++a){const o=lc(n[a],r[a]);if(o)return o}return Dt(n.length,r.length)}function cc(t){return xv(t)}function xv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=$a(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return qa(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return tt.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",a=!0;for(const o of n.values||[])a?a=!1:r+=",",r+=xv(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let a="{",o=!0;for(const u of r)o?o=!1:a+=",",a+=`${u}:${xv(n.fields[u])}`;return a+"}"})(t.mapValue):ut(61005,{value:t})}function Mf(t){switch(Ga(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=qm(t);return e?16+Mf(e):16;case 5:return 2*t.stringValue.length;case 6:return qa(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,o)=>a+Mf(o)),0)})(t.arrayValue);case 10:case 11:return(function(r){let a=0;return Wa(r.fields,((o,u)=>{a+=o.length+Mf(u)})),a})(t.mapValue);default:throw ut(13486,{value:t})}}function um(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function _v(t){return!!t&&"integerValue"in t}function Ry(t){return!!t&&"arrayValue"in t}function _4(t){return!!t&&"nullValue"in t}function w4(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Pf(t){return!!t&&"mapValue"in t}function o8(t){return(t?.mapValue?.fields||{})[mC]?.stringValue===pC}function Zu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Wa(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Zu(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Zu(t.arrayValue.values[n]);return e}return{...t}}function l8(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===a8}class Ir{constructor(e){this.value=e}static empty(){return new Ir({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Pf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zu(n)}setAll(e){let n=ir.emptyPath(),r={},a=[];e.forEach(((u,h)=>{if(!n.isImmediateParentOf(h)){const m=this.getFieldsMap(n);this.applyChanges(m,r,a),r={},a=[],n=h.popLast()}u?r[h.lastSegment()]=Zu(u):a.push(h.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,r,a)}delete(e){const n=this.field(e.popLast());Pf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ti(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=n.mapValue.fields[e.get(r)];Pf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,r){Wa(n,((a,o)=>e[a]=o));for(const a of r)delete e[a]}clone(){return new Ir(Zu(this.value))}}function gC(t){const e=[];return Wa(t.fields,((n,r)=>{const a=new ir([n]);if(Pf(r)){const o=gC(r.mapValue).fields;if(o.length===0)e.push(a);else for(const u of o)e.push(a.child(u))}else e.push(a)})),new Gr(e)}class dr{constructor(e,n,r,a,o,u,h){this.key=e,this.documentType=n,this.version=r,this.readTime=a,this.createTime=o,this.data=u,this.documentState=h}static newInvalidDocument(e){return new dr(e,0,ht.min(),ht.min(),ht.min(),Ir.empty(),0)}static newFoundDocument(e,n,r,a){return new dr(e,1,n,ht.min(),r,a,0)}static newNoDocument(e,n){return new dr(e,2,n,ht.min(),ht.min(),Ir.empty(),0)}static newUnknownDocument(e,n){return new dr(e,3,n,ht.min(),ht.min(),Ir.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ht.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ir.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ir.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ht.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class uc{constructor(e,n){this.position=e,this.inclusive=n}}function S4(t,e,n){let r=0;for(let a=0;a<t.position.length;a++){const o=e[a],u=t.position[a];if(o.field.isKeyField()?r=tt.comparator(tt.fromName(u.referenceValue),n.key):r=lc(u,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function E4(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ti(t.position[n],e.position[n]))return!1;return!0}class cd{constructor(e,n="asc"){this.field=e,this.dir=n}}function c8(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class vC{}class On extends vC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new d8(e,n,r):n==="array-contains"?new m8(e,r):n==="in"?new p8(e,r):n==="not-in"?new g8(e,r):n==="array-contains-any"?new v8(e,r):new On(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new h8(e,r):new f8(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(lc(n,this.value)):n!==null&&Ga(this.value)===Ga(n)&&this.matchesComparison(lc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ut(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ts extends vC{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ts(e,n)}matches(e){return yC(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function yC(t){return t.op==="and"}function bC(t){return u8(t)&&yC(t)}function u8(t){for(const e of t.filters)if(e instanceof Ts)return!1;return!0}function wv(t){if(t instanceof On)return t.field.canonicalString()+t.op.toString()+cc(t.value);if(bC(t))return t.filters.map((e=>wv(e))).join(",");{const e=t.filters.map((n=>wv(n))).join(",");return`${t.op}(${e})`}}function xC(t,e){return t instanceof On?(function(r,a){return a instanceof On&&r.op===a.op&&r.field.isEqual(a.field)&&ti(r.value,a.value)})(t,e):t instanceof Ts?(function(r,a){return a instanceof Ts&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((o,u,h)=>o&&xC(u,a.filters[h])),!0):!1})(t,e):void ut(19439)}function _C(t){return t instanceof On?(function(n){return`${n.field.canonicalString()} ${n.op} ${cc(n.value)}`})(t):t instanceof Ts?(function(n){return n.op.toString()+" {"+n.getFilters().map(_C).join(" ,")+"}"})(t):"Filter"}class d8 extends On{constructor(e,n,r){super(e,n,r),this.key=tt.fromName(r.referenceValue)}matches(e){const n=tt.comparator(e.key,this.key);return this.matchesComparison(n)}}class h8 extends On{constructor(e,n){super(e,"in",n),this.keys=wC("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class f8 extends On{constructor(e,n){super(e,"not-in",n),this.keys=wC("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function wC(t,e){return(e.arrayValue?.values||[]).map((n=>tt.fromName(n.referenceValue)))}class m8 extends On{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ry(n)&&ld(n.arrayValue,this.value)}}class p8 extends On{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ld(this.value.arrayValue,n)}}class g8 extends On{constructor(e,n){super(e,"not-in",n)}matches(e){if(ld(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ld(this.value.arrayValue,n)}}class v8 extends On{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ry(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>ld(this.value.arrayValue,r)))}}class y8{constructor(e,n=null,r=[],a=[],o=null,u=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=a,this.limit=o,this.startAt=u,this.endAt=h,this.Te=null}}function C4(t,e=null,n=[],r=[],a=null,o=null,u=null){return new y8(t,e,n,r,a,o,u)}function jy(t){const e=pt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>wv(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),Hm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>cc(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>cc(r))).join(",")),e.Te=n}return e.Te}function Iy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!c8(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!xC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!E4(t.startAt,e.startAt)&&E4(t.endAt,e.endAt)}function Sv(t){return tt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Ko{constructor(e,n=null,r=[],a=[],o=null,u="F",h=null,m=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=a,this.limit=o,this.limitType=u,this.startAt=h,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function b8(t,e,n,r,a,o,u,h){return new Ko(t,e,n,r,a,o,u,h)}function Gm(t){return new Ko(t)}function T4(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Dy(t){return t.collectionGroup!==null}function Zl(t){const e=pt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new Hn(ir.comparator);return u.filters.forEach((m=>{m.getFlattenedFilters().forEach((p=>{p.isInequality()&&(h=h.add(p.field))}))})),h})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new cd(o,r))})),n.has(ir.keyField().canonicalString())||e.Ie.push(new cd(ir.keyField(),r))}return e.Ie}function Ws(t){const e=pt(t);return e.Ee||(e.Ee=x8(e,Zl(t))),e.Ee}function x8(t,e){if(t.limitType==="F")return C4(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((a=>{const o=a.dir==="desc"?"asc":"desc";return new cd(a.field,o)}));const n=t.endAt?new uc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new uc(t.startAt.position,t.startAt.inclusive):null;return C4(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ev(t,e){const n=t.filters.concat([e]);return new Ko(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function dm(t,e,n){return new Ko(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ym(t,e){return Iy(Ws(t),Ws(e))&&t.limitType===e.limitType}function SC(t){return`${jy(Ws(t))}|lt:${t.limitType}`}function Gl(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((a=>_C(a))).join(", ")}]`),Hm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((a=>cc(a))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((a=>cc(a))).join(",")),`Target(${r})`})(Ws(t))}; limitType=${t.limitType})`}function Km(t,e){return e.isFoundDocument()&&(function(r,a){const o=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):tt.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,a){for(const o of Zl(r))if(!o.field.isKeyField()&&a.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,a){for(const o of r.filters)if(!o.matches(a))return!1;return!0})(t,e)&&(function(r,a){return!(r.startAt&&!(function(u,h,m){const p=S4(u,h,m);return u.inclusive?p<=0:p<0})(r.startAt,Zl(r),a)||r.endAt&&!(function(u,h,m){const p=S4(u,h,m);return u.inclusive?p>=0:p>0})(r.endAt,Zl(r),a))})(t,e)}function _8(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function EC(t){return(e,n)=>{let r=!1;for(const a of Zl(t)){const o=w8(a,e,n);if(o!==0)return o;r=r||a.field.isKeyField()}return 0}}function w8(t,e,n){const r=t.field.isKeyField()?tt.comparator(e.key,n.key):(function(o,u,h){const m=u.data.field(o),p=h.data.field(o);return m!==null&&p!==null?lc(m,p):ut(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ut(19790,{direction:t.dir})}}class Qo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[a,o]of r)if(this.equalsFn(a,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return void(a[o]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[n]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Wa(this.inner,((n,r)=>{for(const[a,o]of r)e(a,o)}))}isEmpty(){return lC(this.inner)}size(){return this.innerSize}}const S8=new mn(tt.comparator);function Hi(){return S8}const CC=new mn(tt.comparator);function qu(...t){let e=CC;for(const n of t)e=e.insert(n.key,n);return e}function TC(t){let e=CC;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function jo(){return ed()}function kC(){return ed()}function ed(){return new Qo((t=>t.toString()),((t,e)=>t.isEqual(e)))}const E8=new mn(tt.comparator),C8=new Hn(tt.comparator);function Mt(...t){let e=C8;for(const n of t)e=e.add(n);return e}const T8=new Hn(Dt);function k8(){return T8}function My(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:om(e)?"-0":e}}function NC(t){return{integerValue:""+t}}function AC(t,e){return t8(e)?NC(e):My(t,e)}class Qm{constructor(){this._=void 0}}function N8(t,e,n){return t instanceof ud?(function(a,o){const u={fields:{[dC]:{stringValue:uC},[fC]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return o&&$m(o)&&(o=qm(o)),o&&(u.fields[hC]=o),{mapValue:u}})(n,e):t instanceof dc?jC(t,e):t instanceof hc?IC(t,e):(function(a,o){const u=RC(a,o),h=k4(u)+k4(a.Ae);return _v(u)&&_v(a.Ae)?NC(h):My(a.serializer,h)})(t,e)}function A8(t,e,n){return t instanceof dc?jC(t,e):t instanceof hc?IC(t,e):n}function RC(t,e){return t instanceof dd?(function(r){return _v(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class ud extends Qm{}class dc extends Qm{constructor(e){super(),this.elements=e}}function jC(t,e){const n=DC(e);for(const r of t.elements)n.some((a=>ti(a,r)))||n.push(r);return{arrayValue:{values:n}}}class hc extends Qm{constructor(e){super(),this.elements=e}}function IC(t,e){let n=DC(e);for(const r of t.elements)n=n.filter((a=>!ti(a,r)));return{arrayValue:{values:n}}}class dd extends Qm{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function k4(t){return Sn(t.integerValue||t.doubleValue)}function DC(t){return Ry(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Xm{constructor(e,n){this.field=e,this.transform=n}}function R8(t,e){return t.field.isEqual(e.field)&&(function(r,a){return r instanceof dc&&a instanceof dc||r instanceof hc&&a instanceof hc?oc(r.elements,a.elements,ti):r instanceof dd&&a instanceof dd?ti(r.Ae,a.Ae):r instanceof ud&&a instanceof ud})(t.transform,e.transform)}class j8{constructor(e,n){this.version=e,this.transformResults=n}}class xr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xr}static exists(e){return new xr(void 0,e)}static updateTime(e){return new xr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Of(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Wm{}function MC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Jm(t.key,xr.none()):new Ad(t.key,t.data,xr.none());{const n=t.data,r=Ir.empty();let a=new Hn(ir.comparator);for(let o of e.fields)if(!a.has(o)){let u=n.field(o);u===null&&o.length>1&&(o=o.popLast(),u=n.field(o)),u===null?r.delete(o):r.set(o,u),a=a.add(o)}return new Ja(t.key,r,new Gr(a.toArray()),xr.none())}}function I8(t,e,n){t instanceof Ad?(function(a,o,u){const h=a.value.clone(),m=A4(a.fieldTransforms,o,u.transformResults);h.setAll(m),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(t,e,n):t instanceof Ja?(function(a,o,u){if(!Of(a.precondition,o))return void o.convertToUnknownDocument(u.version);const h=A4(a.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(PC(a)),m.setAll(h),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(t,e,n):(function(a,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function td(t,e,n,r){return t instanceof Ad?(function(o,u,h,m){if(!Of(o.precondition,u))return h;const p=o.value.clone(),y=R4(o.fieldTransforms,m,u);return p.setAll(y),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null})(t,e,n,r):t instanceof Ja?(function(o,u,h,m){if(!Of(o.precondition,u))return h;const p=R4(o.fieldTransforms,m,u),y=u.data;return y.setAll(PC(o)),y.setAll(p),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((b=>b.field)))})(t,e,n,r):(function(o,u,h){return Of(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(t,e,n)}function D8(t,e){let n=null;for(const r of t.fieldTransforms){const a=e.data.field(r.field),o=RC(r.transform,a||null);o!=null&&(n===null&&(n=Ir.empty()),n.set(r.field,o))}return n||null}function N4(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&oc(r,a,((o,u)=>R8(o,u)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ad extends Wm{constructor(e,n,r,a=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ja extends Wm{constructor(e,n,r,a,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=a,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function PC(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function A4(t,e,n){const r=new Map;Kt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let a=0;a<n.length;a++){const o=t[a],u=o.transform,h=e.data.field(o.field);r.set(o.field,A8(u,h,n[a]))}return r}function R4(t,e,n){const r=new Map;for(const a of t){const o=a.transform,u=n.data.field(a.field);r.set(a.field,N8(o,u,e))}return r}class Jm extends Wm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class M8 extends Wm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class P8{constructor(e,n,r,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const o=this.mutations[a];o.key.isEqual(e.key)&&I8(o,e,r[a])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=td(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=td(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=kC();return this.mutations.forEach((a=>{const o=e.get(a.key),u=o.overlayedDocument;let h=this.applyToLocalView(u,o.mutatedFields);h=n.has(a.key)?null:h;const m=MC(u,h);m!==null&&r.set(a.key,m),u.isValidDocument()||u.convertToNoDocument(ht.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Mt())}isEqual(e){return this.batchId===e.batchId&&oc(this.mutations,e.mutations,((n,r)=>N4(n,r)))&&oc(this.baseMutations,e.baseMutations,((n,r)=>N4(n,r)))}}class Py{constructor(e,n,r,a){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=a}static from(e,n,r){Kt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return E8})();const o=e.mutations;for(let u=0;u<o.length;u++)a=a.insert(o[u].key,r[u].version);return new Py(e,n,r,a)}}class O8{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class L8{constructor(e,n){this.count=e,this.unchangedNames=n}}var In,Lt;function V8(t){switch(t){case pe.OK:return ut(64938);case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0;default:return ut(15467,{code:t})}}function OC(t){if(t===void 0)return Fi("GRPC error has no .code"),pe.UNKNOWN;switch(t){case In.OK:return pe.OK;case In.CANCELLED:return pe.CANCELLED;case In.UNKNOWN:return pe.UNKNOWN;case In.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case In.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case In.INTERNAL:return pe.INTERNAL;case In.UNAVAILABLE:return pe.UNAVAILABLE;case In.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case In.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case In.NOT_FOUND:return pe.NOT_FOUND;case In.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case In.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case In.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case In.ABORTED:return pe.ABORTED;case In.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case In.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case In.DATA_LOSS:return pe.DATA_LOSS;default:return ut(39323,{code:t})}}(Lt=In||(In={}))[Lt.OK=0]="OK",Lt[Lt.CANCELLED=1]="CANCELLED",Lt[Lt.UNKNOWN=2]="UNKNOWN",Lt[Lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lt[Lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lt[Lt.NOT_FOUND=5]="NOT_FOUND",Lt[Lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lt[Lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lt[Lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lt[Lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lt[Lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lt[Lt.ABORTED=10]="ABORTED",Lt[Lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lt[Lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lt[Lt.INTERNAL=13]="INTERNAL",Lt[Lt.UNAVAILABLE=14]="UNAVAILABLE",Lt[Lt.DATA_LOSS=15]="DATA_LOSS";function z8(){return new TextEncoder}const U8=new Va([4294967295,4294967295],0);function j4(t){const e=z8().encode(t),n=new WE;return n.update(e),new Uint8Array(n.digest())}function I4(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Va([n,r],0),new Va([a,o],0)]}class Oy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Gu(`Invalid padding: ${n}`);if(r<0)throw new Gu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Gu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Gu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Va.fromNumber(this.ge)}ye(e,n,r){let a=e.add(n.multiply(Va.fromNumber(r)));return a.compare(U8)===1&&(a=new Va([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=j4(e),[r,a]=I4(n);for(let o=0;o<this.hashCount;o++){const u=this.ye(r,a,o);if(!this.we(u))return!1}return!0}static create(e,n,r){const a=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new Oy(o,a,n);return r.forEach((h=>u.insert(h))),u}insert(e){if(this.ge===0)return;const n=j4(e),[r,a]=I4(n);for(let o=0;o<this.hashCount;o++){const u=this.ye(r,a,o);this.Se(u)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Gu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Zm{constructor(e,n,r,a,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const a=new Map;return a.set(e,Rd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Zm(ht.min(),a,new mn(Dt),Hi(),Mt())}}class Rd{constructor(e,n,r,a,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Rd(r,n,Mt(),Mt(),Mt())}}class Lf{constructor(e,n,r,a){this.be=e,this.removedTargetIds=n,this.key=r,this.De=a}}class LC{constructor(e,n){this.targetId=e,this.Ce=n}}class VC{constructor(e,n,r=ar.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=a}}class D4{constructor(){this.ve=0,this.Fe=M4(),this.Me=ar.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Mt(),n=Mt(),r=Mt();return this.Fe.forEach(((a,o)=>{switch(o){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:r=r.add(a);break;default:ut(38017,{changeType:o})}})),new Rd(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=M4()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Kt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class B8{constructor(e){this.Ge=e,this.ze=new Map,this.je=Hi(),this.Je=mf(),this.He=mf(),this.Ye=new mn(Dt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ut(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,a)=>{this.rt(a)&&n(a)}))}st(e){const n=e.targetId,r=e.Ce.count,a=this.ot(n);if(a){const o=a.target;if(Sv(o))if(r===0){const u=new tt(o.path);this.et(n,u,dr.newNoDocument(u,ht.min()))}else Kt(r===1,20013,{expectedCount:r});else{const u=this._t(n);if(u!==r){const h=this.ut(e),m=h?this.ct(h,e,u):1;if(m!==0){this.it(n);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:o=0}=n;let u,h;try{u=qa(r).toUint8Array()}catch(m){if(m instanceof cC)return ac("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{h=new Oy(u,a,o)}catch(m){return ac(m instanceof Gu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return h.ge===0?null:h}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let a=0;return r.forEach((o=>{const u=this.Ge.ht(),h=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(n,o,null),a++)})),a}Tt(e){const n=new Map;this.ze.forEach(((o,u)=>{const h=this.ot(u);if(h){if(o.current&&Sv(h.target)){const m=new tt(h.target.path);this.It(m).has(u)||this.Et(u,m)||this.et(u,m,dr.newNoDocument(m,e))}o.Be&&(n.set(u,o.ke()),o.qe())}}));let r=Mt();this.He.forEach(((o,u)=>{let h=!0;u.forEachWhile((m=>{const p=this.ot(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(o))})),this.je.forEach(((o,u)=>u.setReadTime(e)));const a=new Zm(e,n,this.Ye,this.je,r);return this.je=Hi(),this.Je=mf(),this.He=mf(),this.Ye=new mn(Dt),a}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,n)?a.Qe(n,1):a.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new D4,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Hn(Dt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Hn(Dt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||$e("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new D4),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function mf(){return new mn(tt.comparator)}function M4(){return new mn(tt.comparator)}const F8={asc:"ASCENDING",desc:"DESCENDING"},H8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$8={and:"AND",or:"OR"};class q8{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Cv(t,e){return t.useProto3Json||Hm(e)?e:{value:e}}function hm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function G8(t,e){return hm(t,e.toTimestamp())}function Js(t){return Kt(!!t,49232),ht.fromTimestamp((function(n){const r=$a(n);return new dn(r.seconds,r.nanos)})(t))}function Ly(t,e){return Tv(t,e).canonicalString()}function Tv(t,e){const n=(function(a){return new sn(["projects",a.projectId,"databases",a.database])})(t).child("documents");return e===void 0?n:n.child(e)}function UC(t){const e=sn.fromString(t);return Kt(qC(e),10190,{key:e.toString()}),e}function kv(t,e){return Ly(t.databaseId,e.path)}function M0(t,e){const n=UC(e);if(n.get(1)!==t.databaseId.projectId)throw new ze(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ze(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new tt(FC(n))}function BC(t,e){return Ly(t.databaseId,e)}function Y8(t){const e=UC(t);return e.length===4?sn.emptyPath():FC(e)}function Nv(t){return new sn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function FC(t){return Kt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function P4(t,e,n){return{name:kv(t,e),fields:n.value.mapValue.fields}}function K8(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:ut(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],o=(function(p,y){return p.useProto3Json?(Kt(y===void 0||typeof y=="string",58123),ar.fromBase64String(y||"")):(Kt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),ar.fromUint8Array(y||new Uint8Array))})(t,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&(function(p){const y=p.code===void 0?pe.UNKNOWN:OC(p.code);return new ze(y,p.message||"")})(u);n=new VC(r,a,o,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=M0(t,r.document.name),o=Js(r.document.updateTime),u=r.document.createTime?Js(r.document.createTime):ht.min(),h=new Ir({mapValue:{fields:r.document.fields}}),m=dr.newFoundDocument(a,o,u,h),p=r.targetIds||[],y=r.removedTargetIds||[];n=new Lf(p,y,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=M0(t,r.document),o=r.readTime?Js(r.readTime):ht.min(),u=dr.newNoDocument(a,o),h=r.removedTargetIds||[];n=new Lf([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=M0(t,r.document),o=r.removedTargetIds||[];n=new Lf([],o,a,null)}else{if(!("filter"in e))return ut(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:o}=r,u=new L8(a,o),h=r.targetId;n=new LC(h,u)}}return n}function Q8(t,e){let n;if(e instanceof Ad)n={update:P4(t,e.key,e.value)};else if(e instanceof Jm)n={delete:kv(t,e.key)};else if(e instanceof Ja)n={update:P4(t,e.key,e.data),updateMask:sI(e.fieldMask)};else{if(!(e instanceof M8))return ut(16599,{Vt:e.type});n={verify:kv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(o,u){const h=u.transform;if(h instanceof ud)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof dc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof hc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof dd)return{fieldPath:u.field.canonicalString(),increment:h.Ae};throw ut(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(a,o){return o.updateTime!==void 0?{updateTime:G8(a,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ut(27497)})(t,e.precondition)),n}function X8(t,e){return t&&t.length>0?(Kt(e!==void 0,14353),t.map((n=>(function(a,o){let u=a.updateTime?Js(a.updateTime):Js(o);return u.isEqual(ht.min())&&(u=Js(o)),new j8(u,a.transformResults||[])})(n,e)))):[]}function W8(t,e){return{documents:[BC(t,e.path)]}}function J8(t,e){const n={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=BC(t,a);const o=(function(p){if(p.length!==0)return $C(Ts.create(p,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const u=(function(p){if(p.length!==0)return p.map((y=>(function(x){return{field:Yl(x.field),direction:tI(x.dir)}})(y)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const h=Cv(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:n,parent:a}}function Z8(t){let e=Y8(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let a=null;if(r>0){Kt(r===1,65062);const y=n.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let o=[];n.where&&(o=(function(b){const x=HC(b);return x instanceof Ts&&bC(x)?x.getFilters():[x]})(n.where));let u=[];n.orderBy&&(u=(function(b){return b.map((x=>(function(j){return new cd(Kl(j.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(j.direction))})(x)))})(n.orderBy));let h=null;n.limit&&(h=(function(b){let x;return x=typeof b=="object"?b.value:b,Hm(x)?null:x})(n.limit));let m=null;n.startAt&&(m=(function(b){const x=!!b.before,k=b.values||[];return new uc(k,x)})(n.startAt));let p=null;return n.endAt&&(p=(function(b){const x=!b.before,k=b.values||[];return new uc(k,x)})(n.endAt)),b8(e,a,u,o,h,"F",m,p)}function eI(t,e){const n=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ut(28987,{purpose:a})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function HC(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Kl(n.unaryFilter.field);return On.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Kl(n.unaryFilter.field);return On.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Kl(n.unaryFilter.field);return On.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Kl(n.unaryFilter.field);return On.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ut(61313);default:return ut(60726)}})(t):t.fieldFilter!==void 0?(function(n){return On.create(Kl(n.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ut(58110);default:return ut(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ts.create(n.compositeFilter.filters.map((r=>HC(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ut(1026)}})(n.compositeFilter.op))})(t):ut(30097,{filter:t})}function tI(t){return F8[t]}function nI(t){return H8[t]}function rI(t){return $8[t]}function Yl(t){return{fieldPath:t.canonicalString()}}function Kl(t){return ir.fromServerFormat(t.fieldPath)}function $C(t){return t instanceof On?(function(n){if(n.op==="=="){if(w4(n.value))return{unaryFilter:{field:Yl(n.field),op:"IS_NAN"}};if(_4(n.value))return{unaryFilter:{field:Yl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(w4(n.value))return{unaryFilter:{field:Yl(n.field),op:"IS_NOT_NAN"}};if(_4(n.value))return{unaryFilter:{field:Yl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yl(n.field),op:nI(n.op),value:n.value}}})(t):t instanceof Ts?(function(n){const r=n.getFilters().map((a=>$C(a)));return r.length===1?r[0]:{compositeFilter:{op:rI(n.op),filters:r}}})(t):ut(54877,{filter:t})}function sI(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function qC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class Da{constructor(e,n,r,a,o=ht.min(),u=ht.min(),h=ar.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new Da(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Da(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Da(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Da(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class iI{constructor(e){this.yt=e}}function aI(t){const e=Z8({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?dm(e,e.limit,"L"):e}class oI{constructor(){this.Cn=new lI}addToCollectionParentIndex(e,n){return this.Cn.add(n),we.resolve()}getCollectionParents(e,n){return we.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return we.resolve()}deleteFieldIndex(e,n){return we.resolve()}deleteAllFieldIndexes(e){return we.resolve()}createTargetIndexes(e,n){return we.resolve()}getDocumentsMatchingTarget(e,n){return we.resolve(null)}getIndexType(e,n){return we.resolve(0)}getFieldIndexes(e,n){return we.resolve([])}getNextCollectionGroupToUpdate(e){return we.resolve(null)}getMinOffset(e,n){return we.resolve(Ha.min())}getMinOffsetFromCollectionGroup(e,n){return we.resolve(Ha.min())}updateCollectionGroup(e,n,r){return we.resolve()}updateIndexEntries(e,n){return we.resolve()}}class lI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),a=this.index[n]||new Hn(sn.comparator),o=!a.has(r);return this.index[n]=a.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),a=this.index[n];return a&&a.has(r)}getEntries(e){return(this.index[e]||new Hn(sn.comparator)).toArray()}}const O4={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},GC=41943040;class jr{static withCacheSize(e){return new jr(e,jr.DEFAULT_COLLECTION_PERCENTILE,jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}jr.DEFAULT_COLLECTION_PERCENTILE=10,jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jr.DEFAULT=new jr(GC,jr.DEFAULT_COLLECTION_PERCENTILE,jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jr.DISABLED=new jr(-1,0,0);class fc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new fc(0)}static cr(){return new fc(-1)}}const L4="LruGarbageCollector",cI=1048576;function V4([t,e],[n,r]){const a=Dt(t,n);return a===0?Dt(e,r):a}class uI{constructor(e){this.Ir=e,this.buffer=new Hn(V4),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();V4(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class dI{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){$e(L4,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){kc(n)?$e(L4,"Ignoring IndexedDB error during garbage collection: ",n):await Tc(n)}await this.Vr(3e5)}))}}class hI{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return we.resolve(Fm.ce);const r=new uI(n);return this.mr.forEachTarget(e,(a=>r.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>r.Ar(a))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?($e("LruGarbageCollector","Garbage collection skipped; disabled"),we.resolve(O4)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),O4):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,a,o,u,h,m,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),a=this.params.maximumSequenceNumbersToCollect):a=b,u=Date.now(),this.nthSequenceNumber(e,a)))).next((b=>(r=b,h=Date.now(),this.removeTargets(e,r,n)))).next((b=>(o=b,m=Date.now(),this.removeOrphanedDocuments(e,r)))).next((b=>(p=Date.now(),ql()<=It.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-y}ms
	Determined least recently used ${a} in `+(h-u)+`ms
	Removed ${o} targets in `+(m-h)+`ms
	Removed ${b} documents in `+(p-m)+`ms
Total Duration: ${p-y}ms`),we.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:o,documentsRemoved:b}))))}}function fI(t,e){return new hI(t,e)}class mI{constructor(){this.changes=new Qo((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?we.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class pI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class gI{constructor(e,n,r,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,n)))).next((a=>(r!==null&&td(r.mutation,a,Gr.empty(),dn.now()),a)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Mt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Mt()){const a=jo();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,r).next((o=>{let u=qu();return o.forEach(((h,m)=>{u=u.insert(h,m.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const r=jo();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Mt())))}populateOverlays(e,n,r){const a=[];return r.forEach((o=>{n.has(o)||a.push(o)})),this.documentOverlayCache.getOverlays(e,a).next((o=>{o.forEach(((u,h)=>{n.set(u,h)}))}))}computeViews(e,n,r,a){let o=Hi();const u=ed(),h=(function(){return ed()})();return n.forEach(((m,p)=>{const y=r.get(p.key);a.has(p.key)&&(y===void 0||y.mutation instanceof Ja)?o=o.insert(p.key,p):y!==void 0?(u.set(p.key,y.mutation.getFieldMask()),td(y.mutation,p,y.mutation.getFieldMask(),dn.now())):u.set(p.key,Gr.empty())})),this.recalculateAndSaveOverlays(e,o).next((m=>(m.forEach(((p,y)=>u.set(p,y))),n.forEach(((p,y)=>h.set(p,new pI(y,u.get(p)??null)))),h)))}recalculateAndSaveOverlays(e,n){const r=ed();let a=new mn(((u,h)=>u-h)),o=Mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const h of u)h.keys().forEach((m=>{const p=n.get(m);if(p===null)return;let y=r.get(m)||Gr.empty();y=h.applyToLocalView(p,y),r.set(m,y);const b=(a.get(h.batchId)||Mt()).add(m);a=a.insert(h.batchId,b)}))})).next((()=>{const u=[],h=a.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),p=m.key,y=m.value,b=kC();y.forEach((x=>{if(!o.has(x)){const k=MC(n.get(x),r.get(x));k!==null&&b.set(x,k),o=o.add(x)}})),u.push(this.documentOverlayCache.saveOverlays(e,p,b))}return we.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,a){return(function(u){return tt.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Dy(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,a):this.getDocumentsMatchingCollectionQuery(e,n,r,a)}getNextDocuments(e,n,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,a).next((o=>{const u=a-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,a-o.size):we.resolve(jo());let h=id,m=o;return u.next((p=>we.forEach(p,((y,b)=>(h<b.largestBatchId&&(h=b.largestBatchId),o.get(y)?we.resolve():this.remoteDocumentCache.getEntry(e,y).next((x=>{m=m.insert(y,x)}))))).next((()=>this.populateOverlays(e,p,o))).next((()=>this.computeViews(e,m,p,Mt()))).next((y=>({batchId:h,changes:TC(y)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new tt(n)).next((r=>{let a=qu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,a){const o=n.collectionGroup;let u=qu();return this.indexManager.getCollectionParents(e,o).next((h=>we.forEach(h,(m=>{const p=(function(b,x){return new Ko(x,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(n,m.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,a).next((y=>{y.forEach(((b,x)=>{u=u.insert(b,x)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,r,a){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,a)))).next((u=>{o.forEach(((m,p)=>{const y=p.getKey();u.get(y)===null&&(u=u.insert(y,dr.newInvalidDocument(y)))}));let h=qu();return u.forEach(((m,p)=>{const y=o.get(m);y!==void 0&&td(y.mutation,p,Gr.empty(),dn.now()),Km(n,p)&&(h=h.insert(m,p))})),h}))}}class vI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return we.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(a){return{id:a.id,version:a.version,createTime:Js(a.createTime)}})(n)),we.resolve()}getNamedQuery(e,n){return we.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(a){return{name:a.name,query:aI(a.bundledQuery),readTime:Js(a.readTime)}})(n)),we.resolve()}}class yI{constructor(){this.overlays=new mn(tt.comparator),this.qr=new Map}getOverlay(e,n){return we.resolve(this.overlays.get(n))}getOverlays(e,n){const r=jo();return we.forEach(n,(a=>this.getOverlay(e,a).next((o=>{o!==null&&r.set(a,o)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((a,o)=>{this.St(e,n,o)})),we.resolve()}removeOverlaysForBatchId(e,n,r){const a=this.qr.get(r);return a!==void 0&&(a.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),we.resolve()}getOverlaysForCollection(e,n,r){const a=jo(),o=n.length+1,u=new tt(n.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const m=h.getNext().value,p=m.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===o&&m.largestBatchId>r&&a.set(m.getKey(),m)}return we.resolve(a)}getOverlaysForCollectionGroup(e,n,r,a){let o=new mn(((p,y)=>p-y));const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>r){let y=o.get(p.largestBatchId);y===null&&(y=jo(),o=o.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const h=jo(),m=o.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((p,y)=>h.set(p,y))),!(h.size()>=a)););return we.resolve(h)}St(e,n,r){const a=this.overlays.get(r.key);if(a!==null){const u=this.qr.get(a.largestBatchId).delete(r.key);this.qr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new O8(n,r));let o=this.qr.get(n);o===void 0&&(o=Mt(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}}class bI{constructor(){this.sessionToken=ar.EMPTY_BYTE_STRING}getSessionToken(e){return we.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,we.resolve()}}class Vy{constructor(){this.Qr=new Hn(Kn.$r),this.Ur=new Hn(Kn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Kn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Kn(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new tt(new sn([])),r=new Kn(n,e),a=new Kn(n,e+1),o=[];return this.Ur.forEachInRange([r,a],(u=>{this.Gr(u),o.push(u.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new tt(new sn([])),r=new Kn(n,e),a=new Kn(n,e+1);let o=Mt();return this.Ur.forEachInRange([r,a],(u=>{o=o.add(u.key)})),o}containsKey(e){const n=new Kn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Kn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return tt.comparator(e.key,n.key)||Dt(e.Yr,n.Yr)}static Kr(e,n){return Dt(e.Yr,n.Yr)||tt.comparator(e.key,n.key)}}class xI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Hn(Kn.$r)}checkEmpty(e){return we.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,a){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new P8(o,n,r,a);this.mutationQueue.push(u);for(const h of a)this.Zr=this.Zr.add(new Kn(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return we.resolve(u)}lookupMutationBatch(e,n){return we.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,a=this.ei(r),o=a<0?0:a;return we.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return we.resolve(this.mutationQueue.length===0?Ay:this.tr-1)}getAllMutationBatches(e){return we.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Kn(n,0),a=new Kn(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,a],(u=>{const h=this.Xr(u.Yr);o.push(h)})),we.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Hn(Dt);return n.forEach((a=>{const o=new Kn(a,0),u=new Kn(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,u],(h=>{r=r.add(h.Yr)}))})),we.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,a=r.length+1;let o=r;tt.isDocumentKey(o)||(o=o.child(""));const u=new Kn(new tt(o),0);let h=new Hn(Dt);return this.Zr.forEachWhile((m=>{const p=m.key.path;return!!r.isPrefixOf(p)&&(p.length===a&&(h=h.add(m.Yr)),!0)}),u),we.resolve(this.ti(h))}ti(e){const n=[];return e.forEach((r=>{const a=this.Xr(r);a!==null&&n.push(a)})),n}removeMutationBatch(e,n){Kt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return we.forEach(n.mutations,(a=>{const o=new Kn(a.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Kn(n,0),a=this.Zr.firstAfterOrEqual(r);return we.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,we.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class _I{constructor(e){this.ri=e,this.docs=(function(){return new mn(tt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,a=this.docs.get(r),o=a?a.size:0,u=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return we.resolve(r?r.document.mutableCopy():dr.newInvalidDocument(n))}getEntries(e,n){let r=Hi();return n.forEach((a=>{const o=this.docs.get(a);r=r.insert(a,o?o.document.mutableCopy():dr.newInvalidDocument(a))})),we.resolve(r)}getDocumentsMatchingQuery(e,n,r,a){let o=Hi();const u=n.path,h=new tt(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:p,value:{document:y}}=m.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||W9(X9(y),r)<=0||(a.has(y.key)||Km(n,y))&&(o=o.insert(y.key,y.mutableCopy()))}return we.resolve(o)}getAllFromCollectionGroup(e,n,r,a){ut(9500)}ii(e,n){return we.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new wI(this)}getSize(e){return we.resolve(this.size)}}class wI extends mI{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?n.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(r)})),we.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class SI{constructor(e){this.persistence=e,this.si=new Qo((n=>jy(n)),Iy),this.lastRemoteSnapshotVersion=ht.min(),this.highestTargetId=0,this.oi=0,this._i=new Vy,this.targetCount=0,this.ai=fc.ur()}forEachTarget(e,n){return this.si.forEach(((r,a)=>n(a))),we.resolve()}getLastRemoteSnapshotVersion(e){return we.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return we.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),we.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),we.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new fc(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,we.resolve()}updateTargetData(e,n){return this.Pr(n),we.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,we.resolve()}removeTargets(e,n,r){let a=0;const o=[];return this.si.forEach(((u,h)=>{h.sequenceNumber<=n&&r.get(h.targetId)===null&&(this.si.delete(u),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)})),we.waitFor(o).next((()=>a))}getTargetCount(e){return we.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return we.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),we.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const a=this.persistence.referenceDelegate,o=[];return a&&n.forEach((u=>{o.push(a.markPotentiallyOrphaned(e,u))})),we.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),we.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return we.resolve(r)}containsKey(e,n){return we.resolve(this._i.containsKey(n))}}class YC{constructor(e,n){this.ui={},this.overlays={},this.ci=new Fm(0),this.li=!1,this.li=!0,this.hi=new bI,this.referenceDelegate=e(this),this.Pi=new SI(this),this.indexManager=new oI,this.remoteDocumentCache=(function(a){return new _I(a)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new iI(n),this.Ii=new vI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new yI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new xI(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){$e("MemoryPersistence","Starting transaction:",e);const a=new EI(this.ci.next());return this.referenceDelegate.Ei(),r(a).next((o=>this.referenceDelegate.di(a).next((()=>o)))).toPromise().then((o=>(a.raiseOnCommittedEvent(),o)))}Ai(e,n){return we.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class EI extends Z9{constructor(e){super(),this.currentSequenceNumber=e}}class zy{constructor(e){this.persistence=e,this.Ri=new Vy,this.Vi=null}static mi(e){return new zy(e)}get fi(){if(this.Vi)return this.Vi;throw ut(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),we.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),we.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),we.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((a=>this.fi.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((a=>{a.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return we.forEach(this.fi,(r=>{const a=tt.fromPath(r);return this.gi(e,a).next((o=>{o||n.removeEntry(a,ht.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return we.or([()=>we.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class fm{constructor(e,n){this.persistence=e,this.pi=new Qo((r=>n8(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=fI(this,n)}static mi(e,n){return new fm(e,n)}Ei(){}di(e){return we.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((a=>r+a))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return we.forEach(this.pi,((r,a)=>this.br(e,r,a).next((o=>o?we.resolve():n(a)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const a=this.persistence.getRemoteDocumentCache(),o=a.newChangeBuffer();return a.ii(e,(u=>this.br(e,u,n).next((h=>{h||(r++,o.removeEntry(u,ht.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),we.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),we.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),we.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),we.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Mf(e.data.value)),n}br(e,n,r){return we.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.pi.get(n);return we.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Uy{constructor(e,n,r,a){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=a}static As(e,n){let r=Mt(),a=Mt();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:a=a.add(o.doc.key)}return new Uy(e,n.fromCache,r,a)}}class CI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class TI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return K5()?8:e8(hr())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,a){const o={result:null};return this.ys(e,n).next((u=>{o.result=u})).next((()=>{if(!o.result)return this.ws(e,n,a,r).next((u=>{o.result=u}))})).next((()=>{if(o.result)return;const u=new CI;return this.Ss(e,n,u).next((h=>{if(o.result=h,this.Vs)return this.bs(e,n,u,h.size)}))})).next((()=>o.result))}bs(e,n,r,a){return r.documentReadCount<this.fs?(ql()<=It.DEBUG&&$e("QueryEngine","SDK will not create cache indexes for query:",Gl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),we.resolve()):(ql()<=It.DEBUG&&$e("QueryEngine","Query:",Gl(n),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.gs*a?(ql()<=It.DEBUG&&$e("QueryEngine","The SDK decides to create cache indexes for query:",Gl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ws(n))):we.resolve())}ys(e,n){if(T4(n))return we.resolve(null);let r=Ws(n);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(n.limit!==null&&a===1&&(n=dm(n,null,"F"),r=Ws(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const u=Mt(...o);return this.ps.getDocuments(e,u).next((h=>this.indexManager.getMinOffset(e,r).next((m=>{const p=this.Ds(n,h);return this.Cs(n,p,u,m.readTime)?this.ys(e,dm(n,null,"F")):this.vs(e,p,n,m)}))))})))))}ws(e,n,r,a){return T4(n)||a.isEqual(ht.min())?we.resolve(null):this.ps.getDocuments(e,r).next((o=>{const u=this.Ds(n,o);return this.Cs(n,u,r,a)?we.resolve(null):(ql()<=It.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Gl(n)),this.vs(e,u,n,Q9(a,id)).next((h=>h)))}))}Ds(e,n){let r=new Hn(EC(e));return n.forEach(((a,o)=>{Km(e,o)&&(r=r.add(o))})),r}Cs(e,n,r,a){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(a)>0)}Ss(e,n,r){return ql()<=It.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",Gl(n)),this.ps.getDocumentsMatchingQuery(e,n,Ha.min(),r)}vs(e,n,r,a){return this.ps.getDocumentsMatchingQuery(e,r,a).next((o=>(n.forEach((u=>{o=o.insert(u.key,u)})),o)))}}const By="LocalStore",kI=3e8;class NI{constructor(e,n,r,a){this.persistence=e,this.Fs=n,this.serializer=a,this.Ms=new mn(Dt),this.xs=new Qo((o=>jy(o)),Iy),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function AI(t,e,n,r){return new NI(t,e,n,r)}async function KC(t,e){const n=pt(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return n.mutationQueue.getAllMutationBatches(r).next((o=>(a=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((o=>{const u=[],h=[];let m=Mt();for(const p of a){u.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}for(const p of o){h.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}return n.localDocuments.getDocuments(r,m).next((p=>({Ls:p,removedBatchIds:u,addedBatchIds:h})))}))}))}function RI(t,e){const n=pt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,m,p,y){const b=p.batch,x=b.keys();let k=we.resolve();return x.forEach((j=>{k=k.next((()=>y.getEntry(m,j))).next((R=>{const N=p.docVersions.get(j);Kt(N!==null,48541),R.version.compareTo(N)<0&&(b.applyToRemoteDocument(R,p),R.isValidDocument()&&(R.setReadTime(p.commitVersion),y.addEntry(R)))}))})),k.next((()=>h.mutationQueue.removeMutationBatch(m,b)))})(n,r,e,o).next((()=>o.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let m=Mt();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(m=m.add(h.batch.mutations[p].key));return m})(e)))).next((()=>n.localDocuments.getDocuments(r,a)))}))}function QC(t){const e=pt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function jI(t,e){const n=pt(t),r=e.snapshotVersion;let a=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const u=n.Ns.newChangeBuffer({trackRemovals:!0});a=n.Ms;const h=[];e.targetChanges.forEach(((y,b)=>{const x=a.get(b);if(!x)return;h.push(n.Pi.removeMatchingKeys(o,y.removedDocuments,b).next((()=>n.Pi.addMatchingKeys(o,y.addedDocuments,b))));let k=x.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(b)!==null?k=k.withResumeToken(ar.EMPTY_BYTE_STRING,ht.min()).withLastLimboFreeSnapshotVersion(ht.min()):y.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(y.resumeToken,r)),a=a.insert(b,k),(function(R,N,U){return R.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=kI?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(x,k,y)&&h.push(n.Pi.updateTargetData(o,k))}));let m=Hi(),p=Mt();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,y))})),h.push(II(o,u,e.documentUpdates).next((y=>{m=y.ks,p=y.qs}))),!r.isEqual(ht.min())){const y=n.Pi.getLastRemoteSnapshotVersion(o).next((b=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));h.push(y)}return we.waitFor(h).next((()=>u.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,m,p))).next((()=>m))})).then((o=>(n.Ms=a,o)))}function II(t,e,n){let r=Mt(),a=Mt();return n.forEach((o=>r=r.add(o))),e.getEntries(t,r).next((o=>{let u=Hi();return n.forEach(((h,m)=>{const p=o.get(h);m.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(h)),m.isNoDocument()&&m.version.isEqual(ht.min())?(e.removeEntry(h,m.readTime),u=u.insert(h,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),u=u.insert(h,m)):$e(By,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",m.version)})),{ks:u,qs:a}}))}function DI(t,e){const n=pt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Ay),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function MI(t,e){const n=pt(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return n.Pi.getTargetData(r,e).next((o=>o?(a=o,we.resolve(a)):n.Pi.allocateTargetId(r).next((u=>(a=new Da(e,u,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=n.Ms.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Av(t,e,n){const r=pt(t),a=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(u=>r.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!kc(u))throw u;$e(By,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ms=r.Ms.remove(e),r.xs.delete(a.target)}function z4(t,e,n){const r=pt(t);let a=ht.min(),o=Mt();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(m,p,y){const b=pt(m),x=b.xs.get(y);return x!==void 0?we.resolve(b.Ms.get(x)):b.Pi.getTargetData(p,y)})(r,u,Ws(e)).next((h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(u,h.targetId).next((m=>{o=m}))})).next((()=>r.Fs.getDocumentsMatchingQuery(u,e,n?a:ht.min(),n?o:Mt()))).next((h=>(PI(r,_8(e),h),{documents:h,Qs:o})))))}function PI(t,e,n){let r=t.Os.get(e)||ht.min();n.forEach(((a,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),t.Os.set(e,r)}class U4{constructor(){this.activeTargetIds=k8()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class OI{constructor(){this.Mo=new U4,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new U4,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class LI{Oo(e){}shutdown(){}}const B4="ConnectivityMonitor";class F4{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){$e(B4,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){$e(B4,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let pf=null;function Rv(){return pf===null?pf=(function(){return 268435456+Math.round(2147483648*Math.random())})():pf++,"0x"+pf.toString(16)}const P0="RestConnection",VI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${a}`,this.Wo=this.databaseId.database===lm?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Go(e,n,r,a,o){const u=Rv(),h=this.zo(e,n.toUriEncodedString());$e(P0,`Sending RPC '${e}' ${u}:`,h,r);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,o);const{host:p}=new URL(h),y=qo(p);return this.Jo(e,h,m,r,y).then((b=>($e(P0,`Received RPC '${e}' ${u}: `,b),b)),(b=>{throw ac(P0,`RPC '${e}' ${u} failed with error: `,b,"url: ",h,"request:",r),b}))}Ho(e,n,r,a,o,u){return this.Go(e,n,r,a,o)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Cc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,o)=>e[o]=a)),r&&r.headers.forEach(((a,o)=>e[o]=a))}zo(e,n){const r=VI[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class UI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const lr="WebChannelConnection";class BI extends zI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,a,o){const u=Rv();return new Promise(((h,m)=>{const p=new JE;p.setWithCredentials(!0),p.listenOnce(ZE.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Df.NO_ERROR:const b=p.getResponseJson();$e(lr,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(b)),h(b);break;case Df.TIMEOUT:$e(lr,`RPC '${e}' ${u} timed out`),m(new ze(pe.DEADLINE_EXCEEDED,"Request time out"));break;case Df.HTTP_ERROR:const x=p.getStatus();if($e(lr,`RPC '${e}' ${u} failed with status:`,x,"response text:",p.getResponseText()),x>0){let k=p.getResponseJson();Array.isArray(k)&&(k=k[0]);const j=k?.error;if(j&&j.status&&j.message){const R=(function(U){const F=U.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(F)>=0?F:pe.UNKNOWN})(j.status);m(new ze(R,j.message))}else m(new ze(pe.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new ze(pe.UNAVAILABLE,"Connection failed."));break;default:ut(9055,{l_:e,streamId:u,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{$e(lr,`RPC '${e}' ${u} completed.`)}}));const y=JSON.stringify(a);$e(lr,`RPC '${e}' ${u} sending request:`,a),p.send(n,"POST",y,r,15)}))}T_(e,n,r){const a=Rv(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=nC(),h=tC(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,n,r),m.encodeInitMessageHeaders=!0;const y=o.join("");$e(lr,`Creating RPC '${e}' stream ${a}: ${y}`,m);const b=u.createWebChannel(y,m);this.I_(b);let x=!1,k=!1;const j=new UI({Yo:N=>{k?$e(lr,`Not sending because RPC '${e}' stream ${a} is closed:`,N):(x||($e(lr,`Opening RPC '${e}' stream ${a} transport.`),b.open(),x=!0),$e(lr,`RPC '${e}' stream ${a} sending:`,N),b.send(N))},Zo:()=>b.close()}),R=(N,U,F)=>{N.listen(U,(I=>{try{F(I)}catch(O){setTimeout((()=>{throw O}),0)}}))};return R(b,$u.EventType.OPEN,(()=>{k||($e(lr,`RPC '${e}' stream ${a} transport opened.`),j.o_())})),R(b,$u.EventType.CLOSE,(()=>{k||(k=!0,$e(lr,`RPC '${e}' stream ${a} transport closed`),j.a_(),this.E_(b))})),R(b,$u.EventType.ERROR,(N=>{k||(k=!0,ac(lr,`RPC '${e}' stream ${a} transport errored. Name:`,N.name,"Message:",N.message),j.a_(new ze(pe.UNAVAILABLE,"The operation could not be completed")))})),R(b,$u.EventType.MESSAGE,(N=>{if(!k){const U=N.data[0];Kt(!!U,16349);const F=U,I=F?.error||F[0]?.error;if(I){$e(lr,`RPC '${e}' stream ${a} received error:`,I);const O=I.status;let B=(function(E){const A=In[E];if(A!==void 0)return OC(A)})(O),H=I.message;B===void 0&&(B=pe.INTERNAL,H="Unknown error status: "+O+" with message "+I.message),k=!0,j.a_(new ze(B,H)),b.close()}else $e(lr,`RPC '${e}' stream ${a} received:`,U),j.u_(U)}})),R(h,eC.STAT_EVENT,(N=>{N.stat===yv.PROXY?$e(lr,`RPC '${e}' stream ${a} detected buffering proxy`):N.stat===yv.NOPROXY&&$e(lr,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{j.__()}),0),j}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function O0(){return typeof document<"u"?document:null}function ep(t){return new q8(t,!0)}class XC{constructor(e,n,r=1e3,a=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=a,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,n-r);a>0&&$e("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const H4="PersistentStream";class WC{constructor(e,n,r,a,o,u,h,m){this.Mi=e,this.S_=r,this.b_=a,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new XC(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===pe.RESOURCE_EXHAUSTED?(Fi(n.toString()),Fi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===n&&this.G_(r,a)}),(r=>{e((()=>{const a=new ze(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return $e(H4,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():($e(H4,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class FI extends WC{constructor(e,n,r,a,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,a,u),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=K8(this.serializer,e),r=(function(o){if(!("targetChange"in o))return ht.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?ht.min():u.readTime?Js(u.readTime):ht.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Nv(this.serializer),n.addTarget=(function(o,u){let h;const m=u.target;if(h=Sv(m)?{documents:W8(o,m)}:{query:J8(o,m).ft},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=zC(o,u.resumeToken);const p=Cv(o,u.expectedCount);p!==null&&(h.expectedCount=p)}else if(u.snapshotVersion.compareTo(ht.min())>0){h.readTime=hm(o,u.snapshotVersion.toTimestamp());const p=Cv(o,u.expectedCount);p!==null&&(h.expectedCount=p)}return h})(this.serializer,e);const r=eI(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Nv(this.serializer),n.removeTarget=e,this.q_(n)}}class HI extends WC{constructor(e,n,r,a,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,a,u),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Kt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Kt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Kt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=X8(e.writeResults,e.commitTime),r=Js(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Nv(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>Q8(this.serializer,r)))};this.q_(n)}}class $I{}class qI extends $I{constructor(e,n,r,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new ze(pe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,u])=>this.connection.Go(e,Tv(n,r),a,o,u))).catch((o=>{throw o.name==="FirebaseError"?(o.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ze(pe.UNKNOWN,o.toString())}))}Ho(e,n,r,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Ho(e,Tv(n,r),a,u,h,o))).catch((u=>{throw u.name==="FirebaseError"?(u.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ze(pe.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class GI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Fi(n),this.aa=!1):$e("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Bo="RemoteStore";class YI{constructor(e,n,r,a,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((u=>{r.enqueueAndForget((async()=>{Xo(this)&&($e(Bo,"Restarting streams for network reachability change."),await(async function(m){const p=pt(m);p.Ea.add(4),await jd(p),p.Ra.set("Unknown"),p.Ea.delete(4),await tp(p)})(this))}))})),this.Ra=new GI(r,a)}}async function tp(t){if(Xo(t))for(const e of t.da)await e(!0)}async function jd(t){for(const e of t.da)await e(!1)}function JC(t,e){const n=pt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),qy(n)?$y(n):Nc(n).O_()&&Hy(n,e))}function Fy(t,e){const n=pt(t),r=Nc(n);n.Ia.delete(e),r.O_()&&ZC(n,e),n.Ia.size===0&&(r.O_()?r.L_():Xo(n)&&n.Ra.set("Unknown"))}function Hy(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ht.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Nc(t).Y_(e)}function ZC(t,e){t.Va.Ue(e),Nc(t).Z_(e)}function $y(t){t.Va=new B8({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Nc(t).start(),t.Ra.ua()}function qy(t){return Xo(t)&&!Nc(t).x_()&&t.Ia.size>0}function Xo(t){return pt(t).Ea.size===0}function eT(t){t.Va=void 0}async function KI(t){t.Ra.set("Online")}async function QI(t){t.Ia.forEach(((e,n)=>{Hy(t,e)}))}async function XI(t,e){eT(t),qy(t)?(t.Ra.ha(e),$y(t)):t.Ra.set("Unknown")}async function WI(t,e,n){if(t.Ra.set("Online"),e instanceof VC&&e.state===2&&e.cause)try{await(async function(a,o){const u=o.cause;for(const h of o.targetIds)a.Ia.has(h)&&(await a.remoteSyncer.rejectListen(h,u),a.Ia.delete(h),a.Va.removeTarget(h))})(t,e)}catch(r){$e(Bo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await mm(t,r)}else if(e instanceof Lf?t.Va.Ze(e):e instanceof LC?t.Va.st(e):t.Va.tt(e),!n.isEqual(ht.min()))try{const r=await QC(t.localStore);n.compareTo(r)>=0&&await(function(o,u){const h=o.Va.Tt(u);return h.targetChanges.forEach(((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const y=o.Ia.get(p);y&&o.Ia.set(p,y.withResumeToken(m.resumeToken,u))}})),h.targetMismatches.forEach(((m,p)=>{const y=o.Ia.get(m);if(!y)return;o.Ia.set(m,y.withResumeToken(ar.EMPTY_BYTE_STRING,y.snapshotVersion)),ZC(o,m);const b=new Da(y.target,m,p,y.sequenceNumber);Hy(o,b)})),o.remoteSyncer.applyRemoteEvent(h)})(t,n)}catch(r){$e(Bo,"Failed to raise snapshot:",r),await mm(t,r)}}async function mm(t,e,n){if(!kc(e))throw e;t.Ea.add(1),await jd(t),t.Ra.set("Offline"),n||(n=()=>QC(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{$e(Bo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await tp(t)}))}function tT(t,e){return e().catch((n=>mm(t,n,e)))}async function np(t){const e=pt(t),n=Ya(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ay;for(;JI(e);)try{const a=await DI(e.localStore,r);if(a===null){e.Ta.length===0&&n.L_();break}r=a.batchId,ZI(e,a)}catch(a){await mm(e,a)}nT(e)&&rT(e)}function JI(t){return Xo(t)&&t.Ta.length<10}function ZI(t,e){t.Ta.push(e);const n=Ya(t);n.O_()&&n.X_&&n.ea(e.mutations)}function nT(t){return Xo(t)&&!Ya(t).x_()&&t.Ta.length>0}function rT(t){Ya(t).start()}async function eD(t){Ya(t).ra()}async function tD(t){const e=Ya(t);for(const n of t.Ta)e.ea(n.mutations)}async function nD(t,e,n){const r=t.Ta.shift(),a=Py.from(r,e,n);await tT(t,(()=>t.remoteSyncer.applySuccessfulWrite(a))),await np(t)}async function rD(t,e){e&&Ya(t).X_&&await(async function(r,a){if((function(u){return V8(u)&&u!==pe.ABORTED})(a.code)){const o=r.Ta.shift();Ya(r).B_(),await tT(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,a))),await np(r)}})(t,e),nT(t)&&rT(t)}async function $4(t,e){const n=pt(t);n.asyncQueue.verifyOperationInProgress(),$e(Bo,"RemoteStore received new credentials");const r=Xo(n);n.Ea.add(3),await jd(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await tp(n)}async function sD(t,e){const n=pt(t);e?(n.Ea.delete(2),await tp(n)):e||(n.Ea.add(2),await jd(n),n.Ra.set("Unknown"))}function Nc(t){return t.ma||(t.ma=(function(n,r,a){const o=pt(n);return o.sa(),new FI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)})(t.datastore,t.asyncQueue,{Xo:KI.bind(null,t),t_:QI.bind(null,t),r_:XI.bind(null,t),H_:WI.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),qy(t)?$y(t):t.Ra.set("Unknown")):(await t.ma.stop(),eT(t))}))),t.ma}function Ya(t){return t.fa||(t.fa=(function(n,r,a){const o=pt(n);return o.sa(),new HI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:eD.bind(null,t),r_:rD.bind(null,t),ta:tD.bind(null,t),na:nD.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await np(t)):(await t.fa.stop(),t.Ta.length>0&&($e(Bo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class Gy{constructor(e,n,r,a,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=a,this.removalCallback=o,this.deferred=new Li,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,a,o){const u=Date.now()+r,h=new Gy(e,n,u,a,o);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ze(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yy(t,e){if(Fi("AsyncQueue",`${e}: ${t}`),kc(t))return new ze(pe.UNAVAILABLE,`${e}: ${t}`);throw t}class ec{static emptySet(e){return new ec(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||tt.comparator(n.key,r.key):(n,r)=>tt.comparator(n.key,r.key),this.keyedMap=qu(),this.sortedSet=new mn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ec)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,o=r.getNext().key;if(!a.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ec;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class q4{constructor(){this.ga=new mn(tt.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ut(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class mc{constructor(e,n,r,a,o,u,h,m,p){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,n,r,a,o){const u=[];return n.forEach((h=>{u.push({type:0,doc:h})})),new mc(e,n,ec.emptySet(n),u,r,a,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ym(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==r[a].type||!n[a].doc.isEqual(r[a].doc))return!1;return!0}}class iD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class aD{constructor(){this.queries=G4(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const a=pt(n),o=a.queries;a.queries=G4(),o.forEach(((u,h)=>{for(const m of h.Sa)m.onError(r)}))})(this,new ze(pe.ABORTED,"Firestore shutting down"))}}function G4(){return new Qo((t=>SC(t)),Ym)}async function Ky(t,e){const n=pt(t);let r=3;const a=e.query;let o=n.queries.get(a);o?!o.ba()&&e.Da()&&(r=2):(o=new iD,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(a,!0);break;case 1:o.wa=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(u){const h=Yy(u,`Initialization of query '${Gl(e.query)}' failed`);return void e.onError(h)}n.queries.set(a,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&Xy(n)}async function Qy(t,e){const n=pt(t),r=e.query;let a=3;const o=n.queries.get(r);if(o){const u=o.Sa.indexOf(e);u>=0&&(o.Sa.splice(u,1),o.Sa.length===0?a=e.Da()?0:1:!o.ba()&&e.Da()&&(a=2))}switch(a){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function oD(t,e){const n=pt(t);let r=!1;for(const a of e){const o=a.query,u=n.queries.get(o);if(u){for(const h of u.Sa)h.Fa(a)&&(r=!0);u.wa=a}}r&&Xy(n)}function lD(t,e,n){const r=pt(t),a=r.queries.get(e);if(a)for(const o of a.Sa)o.onError(n);r.queries.delete(e)}function Xy(t){t.Ca.forEach((e=>{e.next()}))}var jv,Y4;(Y4=jv||(jv={})).Ma="default",Y4.Cache="cache";class Wy{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new mc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=mc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==jv.Cache}}class sT{constructor(e){this.key=e}}class iT{constructor(e){this.key=e}}class cD{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Mt(),this.mutatedKeys=Mt(),this.eu=EC(e),this.tu=new ec(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new q4,a=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,u=a,h=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((y,b)=>{const x=a.get(y),k=Km(this.query,b)?b:null,j=!!x&&this.mutatedKeys.has(x.key),R=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let N=!1;x&&k?x.data.isEqual(k.data)?j!==R&&(r.track({type:3,doc:k}),N=!0):this.su(x,k)||(r.track({type:2,doc:k}),N=!0,(m&&this.eu(k,m)>0||p&&this.eu(k,p)<0)&&(h=!0)):!x&&k?(r.track({type:0,doc:k}),N=!0):x&&!k&&(r.track({type:1,doc:x}),N=!0,(m||p)&&(h=!0)),N&&(k?(u=u.add(k),o=R?o.add(y):o.delete(y)):(u=u.delete(y),o=o.delete(y)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),o=o.delete(y.key),r.track({type:1,doc:y})}return{tu:u,iu:r,Cs:h,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,a){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((y,b)=>(function(k,j){const R=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut(20277,{Rt:N})}};return R(k)-R(j)})(y.type,b.type)||this.eu(y.doc,b.doc))),this.ou(r),a=a??!1;const h=n&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,p=m!==this.Za;return this.Za=m,u.length!==0||p?{snapshot:new mc(this.query,e.tu,o,u,e.mutatedKeys,m===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new q4,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Mt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new iT(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new sT(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Mt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return mc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Jy="SyncEngine";class uD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class dD{constructor(e){this.key=e,this.hu=!1}}class hD{constructor(e,n,r,a,o,u){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=a,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Qo((h=>SC(h)),Ym),this.Iu=new Map,this.Eu=new Set,this.du=new mn(tt.comparator),this.Au=new Map,this.Ru=new Vy,this.Vu={},this.mu=new Map,this.fu=fc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function fD(t,e,n=!0){const r=dT(t);let a;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),a=o.view.lu()):a=await aT(r,e,n,!0),a}async function mD(t,e){const n=dT(t);await aT(n,e,!0,!1)}async function aT(t,e,n,r){const a=await MI(t.localStore,Ws(e)),o=a.targetId,u=t.sharedClientState.addLocalQueryTarget(o,n);let h;return r&&(h=await pD(t,e,o,u==="current",a.resumeToken)),t.isPrimaryClient&&n&&JC(t.remoteStore,a),h}async function pD(t,e,n,r,a){t.pu=(b,x,k)=>(async function(R,N,U,F){let I=N.view.ru(U);I.Cs&&(I=await z4(R.localStore,N.query,!1).then((({documents:w})=>N.view.ru(w,I))));const O=F&&F.targetChanges.get(N.targetId),B=F&&F.targetMismatches.get(N.targetId)!=null,H=N.view.applyChanges(I,R.isPrimaryClient,O,B);return Q4(R,N.targetId,H.au),H.snapshot})(t,b,x,k);const o=await z4(t.localStore,e,!0),u=new cD(e,o.Qs),h=u.ru(o.documents),m=Rd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",a),p=u.applyChanges(h,t.isPrimaryClient,m);Q4(t,n,p.au);const y=new uD(e,n,u);return t.Tu.set(e,y),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),p.snapshot}async function gD(t,e,n){const r=pt(t),a=r.Tu.get(e),o=r.Iu.get(a.targetId);if(o.length>1)return r.Iu.set(a.targetId,o.filter((u=>!Ym(u,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await Av(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),n&&Fy(r.remoteStore,a.targetId),Iv(r,a.targetId)})).catch(Tc)):(Iv(r,a.targetId),await Av(r.localStore,a.targetId,!0))}async function vD(t,e){const n=pt(t),r=n.Tu.get(e),a=n.Iu.get(r.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Fy(n.remoteStore,r.targetId))}async function yD(t,e,n){const r=CD(t);try{const a=await(function(u,h){const m=pt(u),p=dn.now(),y=h.reduce(((k,j)=>k.add(j.key)),Mt());let b,x;return m.persistence.runTransaction("Locally write mutations","readwrite",(k=>{let j=Hi(),R=Mt();return m.Ns.getEntries(k,y).next((N=>{j=N,j.forEach(((U,F)=>{F.isValidDocument()||(R=R.add(U))}))})).next((()=>m.localDocuments.getOverlayedDocuments(k,j))).next((N=>{b=N;const U=[];for(const F of h){const I=D8(F,b.get(F.key).overlayedDocument);I!=null&&U.push(new Ja(F.key,I,gC(I.value.mapValue),xr.exists(!0)))}return m.mutationQueue.addMutationBatch(k,p,U,h)})).next((N=>{x=N;const U=N.applyToLocalDocumentSet(b,R);return m.documentOverlayCache.saveOverlays(k,N.batchId,U)}))})).then((()=>({batchId:x.batchId,changes:TC(b)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(u,h,m){let p=u.Vu[u.currentUser.toKey()];p||(p=new mn(Dt)),p=p.insert(h,m),u.Vu[u.currentUser.toKey()]=p})(r,a.batchId,n),await Id(r,a.changes),await np(r.remoteStore)}catch(a){const o=Yy(a,"Failed to persist write");n.reject(o)}}async function oT(t,e){const n=pt(t);try{const r=await jI(n.localStore,e);e.targetChanges.forEach(((a,o)=>{const u=n.Au.get(o);u&&(Kt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?Kt(u.hu,14607):a.removedDocuments.size>0&&(Kt(u.hu,42227),u.hu=!1))})),await Id(n,r,e)}catch(r){await Tc(r)}}function K4(t,e,n){const r=pt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const a=[];r.Tu.forEach(((o,u)=>{const h=u.view.va(e);h.snapshot&&a.push(h.snapshot)})),(function(u,h){const m=pt(u);m.onlineState=h;let p=!1;m.queries.forEach(((y,b)=>{for(const x of b.Sa)x.va(h)&&(p=!0)})),p&&Xy(m)})(r.eventManager,e),a.length&&r.Pu.H_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function bD(t,e,n){const r=pt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const a=r.Au.get(e),o=a&&a.key;if(o){let u=new mn(tt.comparator);u=u.insert(o,dr.newNoDocument(o,ht.min()));const h=Mt().add(o),m=new Zm(ht.min(),new Map,new mn(Dt),u,h);await oT(r,m),r.du=r.du.remove(o),r.Au.delete(e),Zy(r)}else await Av(r.localStore,e,!1).then((()=>Iv(r,e,n))).catch(Tc)}async function xD(t,e){const n=pt(t),r=e.batch.batchId;try{const a=await RI(n.localStore,e);cT(n,r,null),lT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Id(n,a)}catch(a){await Tc(a)}}async function _D(t,e,n){const r=pt(t);try{const a=await(function(u,h){const m=pt(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let y;return m.mutationQueue.lookupMutationBatch(p,h).next((b=>(Kt(b!==null,37113),y=b.keys(),m.mutationQueue.removeMutationBatch(p,b)))).next((()=>m.mutationQueue.performConsistencyCheck(p))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(p,y,h))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y))).next((()=>m.localDocuments.getDocuments(p,y)))}))})(r.localStore,e);cT(r,e,n),lT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Id(r,a)}catch(a){await Tc(a)}}function lT(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function cT(t,e,n){const r=pt(t);let a=r.Vu[r.currentUser.toKey()];if(a){const o=a.get(e);o&&(n?o.reject(n):o.resolve(),a=a.remove(e)),r.Vu[r.currentUser.toKey()]=a}}function Iv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||uT(t,r)}))}function uT(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Fy(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Zy(t))}function Q4(t,e,n){for(const r of n)r instanceof sT?(t.Ru.addReference(r.key,e),wD(t,r)):r instanceof iT?($e(Jy,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||uT(t,r.key)):ut(19791,{wu:r})}function wD(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||($e(Jy,"New document in limbo: "+n),t.Eu.add(r),Zy(t))}function Zy(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new tt(sn.fromString(e)),r=t.fu.next();t.Au.set(r,new dD(n)),t.du=t.du.insert(n,r),JC(t.remoteStore,new Da(Ws(Gm(n.path)),r,"TargetPurposeLimboResolution",Fm.ce))}}async function Id(t,e,n){const r=pt(t),a=[],o=[],u=[];r.Tu.isEmpty()||(r.Tu.forEach(((h,m)=>{u.push(r.pu(m,e,n).then((p=>{if((p||n)&&r.isPrimaryClient){const y=p?!p.fromCache:n?.targetChanges.get(m.targetId)?.current;r.sharedClientState.updateQueryState(m.targetId,y?"current":"not-current")}if(p){a.push(p);const y=Uy.As(m.targetId,p);o.push(y)}})))})),await Promise.all(u),r.Pu.H_(a),await(async function(m,p){const y=pt(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>we.forEach(p,(x=>we.forEach(x.Es,(k=>y.persistence.referenceDelegate.addReference(b,x.targetId,k))).next((()=>we.forEach(x.ds,(k=>y.persistence.referenceDelegate.removeReference(b,x.targetId,k)))))))))}catch(b){if(!kc(b))throw b;$e(By,"Failed to update sequence numbers: "+b)}for(const b of p){const x=b.targetId;if(!b.fromCache){const k=y.Ms.get(x),j=k.snapshotVersion,R=k.withLastLimboFreeSnapshotVersion(j);y.Ms=y.Ms.insert(x,R)}}})(r.localStore,o))}async function SD(t,e){const n=pt(t);if(!n.currentUser.isEqual(e)){$e(Jy,"User change. New user:",e.toKey());const r=await KC(n.localStore,e);n.currentUser=e,(function(o,u){o.mu.forEach((h=>{h.forEach((m=>{m.reject(new ze(pe.CANCELLED,u))}))})),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Id(n,r.Ls)}}function ED(t,e){const n=pt(t),r=n.Au.get(e);if(r&&r.hu)return Mt().add(r.key);{let a=Mt();const o=n.Iu.get(e);if(!o)return a;for(const u of o){const h=n.Tu.get(u);a=a.unionWith(h.view.nu)}return a}}function dT(t){const e=pt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=oT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ED.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bD.bind(null,e),e.Pu.H_=oD.bind(null,e.eventManager),e.Pu.yu=lD.bind(null,e.eventManager),e}function CD(t){const e=pt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_D.bind(null,e),e}class pm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ep(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return AI(this.persistence,new TI,e.initialUser,this.serializer)}Cu(e){return new YC(zy.mi,this.serializer)}Du(e){return new OI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pm.provider={build:()=>new pm};class TD extends pm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Kt(this.persistence.referenceDelegate instanceof fm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new dI(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?jr.withCacheSize(this.cacheSizeBytes):jr.DEFAULT;return new YC((r=>fm.mi(r,n)),this.serializer)}}class Dv{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>K4(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=SD.bind(null,this.syncEngine),await sD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new aD})()}createDatastore(e){const n=ep(e.databaseInfo.databaseId),r=(function(o){return new BI(o)})(e.databaseInfo);return(function(o,u,h,m){return new qI(o,u,h,m)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,a,o,u,h){return new YI(r,a,o,u,h)})(this.localStore,this.datastore,e.asyncQueue,(n=>K4(this.syncEngine,n,0)),(function(){return F4.v()?new F4:new LI})())}createSyncEngine(e,n){return(function(a,o,u,h,m,p,y){const b=new hD(a,o,u,h,m,p);return y&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=pt(n);$e(Bo,"RemoteStore shutting down."),r.Ea.add(5),await jd(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Dv.provider={build:()=>new Dv};class e1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Fi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Ka="FirestoreClient";class kD{constructor(e,n,r,a,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=a,this.user=cr.UNAUTHENTICATED,this.clientId=Ny.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async u=>{$e(Ka,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>($e(Ka,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Li;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Yy(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function L0(t,e){t.asyncQueue.verifyOperationInProgress(),$e(Ka,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async a=>{r.isEqual(a)||(await KC(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function X4(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ND(t);$e(Ka,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>$4(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,a)=>$4(e.remoteStore,a))),t._onlineComponents=e}async function ND(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$e(Ka,"Using user provided OfflineComponentProvider");try{await L0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(a){return a.name==="FirebaseError"?a.code===pe.FAILED_PRECONDITION||a.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(n))throw n;ac("Error using user provided cache. Falling back to memory cache: "+n),await L0(t,new pm)}}else $e(Ka,"Using default OfflineComponentProvider"),await L0(t,new TD(void 0));return t._offlineComponents}async function hT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?($e(Ka,"Using user provided OnlineComponentProvider"),await X4(t,t._uninitializedComponentsProvider._online)):($e(Ka,"Using default OnlineComponentProvider"),await X4(t,new Dv))),t._onlineComponents}function AD(t){return hT(t).then((e=>e.syncEngine))}async function gm(t){const e=await hT(t),n=e.eventManager;return n.onListen=fD.bind(null,e.syncEngine),n.onUnlisten=gD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=mD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=vD.bind(null,e.syncEngine),n}function RD(t,e,n={}){const r=new Li;return t.asyncQueue.enqueueAndForget((async()=>(function(o,u,h,m,p){const y=new e1({next:x=>{y.Nu(),u.enqueueAndForget((()=>Qy(o,b)));const k=x.docs.has(h);!k&&x.fromCache?p.reject(new ze(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&x.fromCache&&m&&m.source==="server"?p.reject(new ze(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(x)},error:x=>p.reject(x)}),b=new Wy(Gm(h.path),y,{includeMetadataChanges:!0,qa:!0});return Ky(o,b)})(await gm(t),t.asyncQueue,e,n,r))),r.promise}function jD(t,e,n={}){const r=new Li;return t.asyncQueue.enqueueAndForget((async()=>(function(o,u,h,m,p){const y=new e1({next:x=>{y.Nu(),u.enqueueAndForget((()=>Qy(o,b))),x.fromCache&&m.source==="server"?p.reject(new ze(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(x)},error:x=>p.reject(x)}),b=new Wy(h,y,{includeMetadataChanges:!0,qa:!0});return Ky(o,b)})(await gm(t),t.asyncQueue,e,n,r))),r.promise}function fT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const W4=new Map;const mT="firestore.googleapis.com",J4=!0;class Z4{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ze(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=mT,this.ssl=J4}else this.host=e.host,this.ssl=e.ssl??J4;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=GC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<cI)throw new ze(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Y9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ze(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ze(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ze(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rp{constructor(e,n,r,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Z4({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ze(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ze(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Z4(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new L9;switch(r.type){case"firstParty":return new B9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ze(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=W4.get(n);r&&($e("ComponentProvider","Removing Datastore"),W4.delete(n),r.terminate())})(this),Promise.resolve()}}function ID(t,e,n,r={}){t=br(t,rp);const a=qo(e),o=t._getSettings(),u={...o,emulatorOptions:t._getEmulatorOptions()},h=`${e}:${n}`;a&&(hy(`https://${h}`),fy("Firestore",!0)),o.host!==mT&&o.host!==h&&ac("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...o,host:h,ssl:a,emulatorOptions:r};if(!zi(m,u)&&(t._setSettings(m),r.mockUserToken)){let p,y;if(typeof r.mockUserToken=="string")p=r.mockUserToken,y=cr.MOCK_USER;else{p=cE(r.mockUserToken,t._app?.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new ze(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new cr(b)}t._authCredentials=new V9(new sC(p,y))}}class li{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new li(this.firestore,e,this._query)}}class vn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new za(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vn(this.firestore,e,this._key)}toJSON(){return{type:vn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Nd(n,vn._jsonSchema))return new vn(e,r||null,new tt(sn.fromString(n.referencePath)))}}vn._jsonSchemaVersion="firestore/documentReference/1.0",vn._jsonSchema={type:Ln("string",vn._jsonSchemaVersion),referencePath:Ln("string")};class za extends li{constructor(e,n,r){super(e,n,Gm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vn(this.firestore,null,new tt(e))}withConverter(e){return new za(this.firestore,e,this._path)}}function wt(t,e,...n){if(t=an(t),iC("collection","path",e),t instanceof rp){const r=sn.fromString(e,...n);return f4(r),new za(t,null,r)}{if(!(t instanceof vn||t instanceof za))throw new ze(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(sn.fromString(e,...n));return f4(r),new za(t.firestore,null,r)}}function Ae(t,e,...n){if(t=an(t),arguments.length===1&&(e=Ny.newId()),iC("doc","path",e),t instanceof rp){const r=sn.fromString(e,...n);return h4(r),new vn(t,null,new tt(r))}{if(!(t instanceof vn||t instanceof za))throw new ze(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(sn.fromString(e,...n));return h4(r),new vn(t.firestore,t instanceof za?t.converter:null,new tt(r))}}const ew="AsyncQueue";class tw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new XC(this,"async_queue_retry"),this._c=()=>{const r=O0();r&&$e(ew,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=O0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=O0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Li;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!kc(e))throw e;$e(ew,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Fi("INTERNAL UNHANDLED ERROR: ",nw(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const a=Gy.createAndSchedule(this,e,n,r,(o=>this.hc(o)));return this.tc.push(a),a}uc(){this.nc&&ut(47125,{Pc:nw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function nw(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function rw(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const a=n;for(const o of r)if(o in a&&typeof a[o]=="function")return!0;return!1})(t,["next","error","complete"])}class ni extends rp{constructor(e,n,r,a){super(e,n,r,a),this.type="firestore",this._queue=new tw,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new tw(e),this._firestoreClient=void 0,await e}}}function DD(t,e){const n=typeof t=="object"?t:gy(),r=typeof t=="string"?t:lm,a=Lm(n,"firestore").getImmediate({identifier:r});if(!a._initialized){const o=aE("firestore");o&&ID(a,...o)}return a}function Dd(t){if(t._terminated)throw new ze(pe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||MD(t),t._firestoreClient}function MD(t){const e=t._freezeSettings(),n=(function(a,o,u,h){return new i8(a,o,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,fT(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new kD(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(a){const o=a?._online.build();return{_offline:a?._offline.build(o),_online:o}})(t._componentsProvider))}class os{constructor(e){this._byteString=e}static fromBase64String(e){try{return new os(ar.fromBase64String(e))}catch(n){throw new ze(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new os(ar.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:os._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Nd(e,os._jsonSchema))return os.fromBase64String(e.bytes)}}os._jsonSchemaVersion="firestore/bytes/1.0",os._jsonSchema={type:Ln("string",os._jsonSchemaVersion),bytes:Ln("string")};class Md{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ze(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ir(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Wo{constructor(e){this._methodName=e}}class Zs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ze(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ze(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Dt(this._lat,e._lat)||Dt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Zs._jsonSchemaVersion}}static fromJSON(e){if(Nd(e,Zs._jsonSchema))return new Zs(e.latitude,e.longitude)}}Zs._jsonSchemaVersion="firestore/geoPoint/1.0",Zs._jsonSchema={type:Ln("string",Zs._jsonSchemaVersion),latitude:Ln("number"),longitude:Ln("number")};class ei{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==a[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ei._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Nd(e,ei._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ei(e.vectorValues);throw new ze(pe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ei._jsonSchemaVersion="firestore/vectorValue/1.0",ei._jsonSchema={type:Ln("string",ei._jsonSchemaVersion),vectorValues:Ln("object")};const PD=/^__.*__$/;class OD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ja(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ad(e,this.data,n,this.fieldTransforms)}}class pT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ja(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function gT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut(40011,{Ac:t})}}class sp{constructor(e,n,r,a,o,u){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=a,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new sp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return vm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(gT(this.Ac)&&PD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class LD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ep(e)}Cc(e,n,r,a=!1){return new sp({Ac:e,methodName:n,Dc:r,path:ir.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ac(t){const e=t._freezeSettings(),n=ep(t._databaseId);return new LD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function t1(t,e,n,r,a,o={}){const u=t.Cc(o.merge||o.mergeFields?2:0,e,n,a);a1("Data must be an object, but it was:",u,r);const h=_T(r,u);let m,p;if(o.merge)m=new Gr(u.fieldMask),p=u.fieldTransforms;else if(o.mergeFields){const y=[];for(const b of o.mergeFields){const x=Mv(e,b,n);if(!u.contains(x))throw new ze(pe.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);ST(y,x)||y.push(x)}m=new Gr(y),p=u.fieldTransforms.filter((b=>m.covers(b.field)))}else m=null,p=u.fieldTransforms;return new OD(new Ir(h),m,p)}class Pd extends Wo{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Pd}}function vT(t,e,n){return new sp({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class n1 extends Wo{_toFieldTransform(e){return new Xm(e.path,new ud)}isEqual(e){return e instanceof n1}}class r1 extends Wo{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=vT(this,e,!0),r=this.vc.map((o=>Jo(o,n))),a=new dc(r);return new Xm(e.path,a)}isEqual(e){return e instanceof r1&&zi(this.vc,e.vc)}}class s1 extends Wo{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=vT(this,e,!0),r=this.vc.map((o=>Jo(o,n))),a=new hc(r);return new Xm(e.path,a)}isEqual(e){return e instanceof s1&&zi(this.vc,e.vc)}}class i1 extends Wo{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new dd(e.serializer,AC(e.serializer,this.Fc));return new Xm(e.path,n)}isEqual(e){return e instanceof i1&&this.Fc===e.Fc}}function yT(t,e,n,r){const a=t.Cc(1,e,n);a1("Data must be an object, but it was:",a,r);const o=[],u=Ir.empty();Wa(r,((m,p)=>{const y=o1(e,m,n);p=an(p);const b=a.yc(y);if(p instanceof Pd)o.push(y);else{const x=Jo(p,b);x!=null&&(o.push(y),u.set(y,x))}}));const h=new Gr(o);return new pT(u,h,a.fieldTransforms)}function bT(t,e,n,r,a,o){const u=t.Cc(1,e,n),h=[Mv(e,r,n)],m=[a];if(o.length%2!=0)throw new ze(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<o.length;x+=2)h.push(Mv(e,o[x])),m.push(o[x+1]);const p=[],y=Ir.empty();for(let x=h.length-1;x>=0;--x)if(!ST(p,h[x])){const k=h[x];let j=m[x];j=an(j);const R=u.yc(k);if(j instanceof Pd)p.push(k);else{const N=Jo(j,R);N!=null&&(p.push(k),y.set(k,N))}}const b=new Gr(p);return new pT(y,b,u.fieldTransforms)}function xT(t,e,n,r=!1){return Jo(n,t.Cc(r?4:3,e))}function Jo(t,e){if(wT(t=an(t)))return a1("Unsupported field value:",e,t),_T(t,e);if(t instanceof Wo)return(function(r,a){if(!gT(a.Ac))throw a.Sc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(a);o&&a.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,a){const o=[];let u=0;for(const h of r){let m=Jo(h,a.wc(u));m==null&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}})(t,e)}return(function(r,a){if((r=an(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return AC(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=dn.fromDate(r);return{timestampValue:hm(a.serializer,o)}}if(r instanceof dn){const o=new dn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:hm(a.serializer,o)}}if(r instanceof Zs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof os)return{bytesValue:zC(a.serializer,r._byteString)};if(r instanceof vn){const o=a.databaseId,u=r.firestore._databaseId;if(!u.isEqual(o))throw a.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Ly(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof ei)return(function(u,h){return{mapValue:{fields:{[mC]:{stringValue:pC},[cm]:{arrayValue:{values:u.toArray().map((p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return My(h.serializer,p)}))}}}}}})(r,a);throw a.Sc(`Unsupported field value: ${Bm(r)}`)})(t,e)}function _T(t,e){const n={};return lC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wa(t,((r,a)=>{const o=Jo(a,e.mc(r));o!=null&&(n[r]=o)})),{mapValue:{fields:n}}}function wT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof dn||t instanceof Zs||t instanceof os||t instanceof vn||t instanceof Wo||t instanceof ei)}function a1(t,e,n){if(!wT(n)||!aC(n)){const r=Bm(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Mv(t,e,n){if((e=an(e))instanceof Md)return e._internalPath;if(typeof e=="string")return o1(t,e);throw vm("Field path arguments must be of type string or ",t,!1,void 0,n)}const VD=new RegExp("[~\\*/\\[\\]]");function o1(t,e,n){if(e.search(VD)>=0)throw vm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Md(...e.split("."))._internalPath}catch{throw vm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function vm(t,e,n,r,a){const o=r&&!r.isEmpty(),u=a!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(o||u)&&(m+=" (found",o&&(m+=` in field ${r}`),u&&(m+=` in document ${a}`),m+=")"),new ze(pe.INVALID_ARGUMENT,h+t+m)}function ST(t,e){return t.some((n=>n.isEqual(e)))}class l1{constructor(e,n,r,a,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=a,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new vn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ip("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class zD extends l1{data(){return super.data()}}function ip(t,e){return typeof e=="string"?o1(t,e):e instanceof Md?e._internalPath:e._delegate._internalPath}function ET(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ze(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class c1{}class ap extends c1{}function qr(t,e,...n){let r=[];e instanceof c1&&r.push(e),r=r.concat(n),(function(o){const u=o.filter((m=>m instanceof u1)).length,h=o.filter((m=>m instanceof op)).length;if(u>1||u>0&&h>0)throw new ze(pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)t=a._apply(t);return t}class op extends ap{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new op(e,n,r)}_apply(e){const n=this._parse(e);return CT(e._query,n),new li(e.firestore,e.converter,Ev(e._query,n))}_parse(e){const n=Ac(e.firestore);return(function(o,u,h,m,p,y,b){let x;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new ze(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){iw(b,y);const j=[];for(const R of b)j.push(sw(m,o,R));x={arrayValue:{values:j}}}else x=sw(m,o,b)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||iw(b,y),x=xT(h,u,b,y==="in"||y==="not-in");return On.create(p,y,x)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Na(t,e,n){const r=e,a=ip("where",t);return op._create(a,r,n)}class u1 extends c1{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new u1(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Ts.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(a,o){let u=a;const h=o.getFlattenedFilters();for(const m of h)CT(u,m),u=Ev(u,m)})(e._query,n),new li(e.firestore,e.converter,Ev(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class d1 extends ap{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new d1(e,n)}_apply(e){const n=(function(a,o,u){if(a.startAt!==null)throw new ze(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ze(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new cd(o,u)})(e._query,this._field,this._direction);return new li(e.firestore,e.converter,(function(a,o){const u=a.explicitOrderBy.concat([o]);return new Ko(a.path,a.collectionGroup,u,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,n))}}function ym(t,e="asc"){const n=e,r=ip("orderBy",t);return d1._create(r,n)}class h1 extends ap{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new h1(e,n,r)}_apply(e){return new li(e.firestore,e.converter,dm(e._query,this._limit,this._limitType))}}function Pv(t){return K9("limit",t),h1._create("limit",t,"F")}class f1 extends ap{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new f1(e,n,r)}_apply(e){const n=BD(e,this.type,this._docOrFields,this._inclusive);return new li(e.firestore,e.converter,(function(a,o){return new Ko(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,o,a.endAt)})(e._query,n))}}function UD(...t){return f1._create("startAfter",t,!1)}function BD(t,e,n,r){if(n[0]=an(n[0]),n[0]instanceof l1)return(function(o,u,h,m,p){if(!m)throw new ze(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const y=[];for(const b of Zl(o))if(b.field.isKeyField())y.push(um(u,m.key));else{const x=m.data.field(b.field);if($m(x))throw new ze(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(x===null){const k=b.field.canonicalString();throw new ze(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${k}' (used as the orderBy) does not exist.`)}y.push(x)}return new uc(y,p)})(t._query,t.firestore._databaseId,e,n[0]._document,r);{const a=Ac(t.firestore);return(function(u,h,m,p,y,b){const x=u.explicitOrderBy;if(y.length>x.length)throw new ze(pe.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const k=[];for(let j=0;j<y.length;j++){const R=y[j];if(x[j].field.isKeyField()){if(typeof R!="string")throw new ze(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof R}`);if(!Dy(u)&&R.indexOf("/")!==-1)throw new ze(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${R}' contains a slash.`);const N=u.path.child(sn.fromString(R));if(!tt.isDocumentKey(N))throw new ze(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);const U=new tt(N);k.push(um(h,U))}else{const N=xT(m,p,R);k.push(N)}}return new uc(k,b)})(t._query,t.firestore._databaseId,a,e,n,r)}}function sw(t,e,n){if(typeof(n=an(n))=="string"){if(n==="")throw new ze(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Dy(e)&&n.indexOf("/")!==-1)throw new ze(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(sn.fromString(n));if(!tt.isDocumentKey(r))throw new ze(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return um(t,new tt(r))}if(n instanceof vn)return um(t,n._key);throw new ze(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bm(n)}.`)}function iw(t,e){if(!Array.isArray(t)||t.length===0)throw new ze(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function CT(t,e){const n=(function(a,o){for(const u of a)for(const h of u.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null})(t.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ze(pe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ze(pe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class FD{convertValue(e,n="none"){switch(Ga(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Sn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ut(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Wa(e,((a,o)=>{r[a]=this.convertValue(o,n)})),r}convertVectorValue(e){const n=e.fields?.[cm].arrayValue?.values?.map((r=>Sn(r.doubleValue)));return new ei(n)}convertGeoPoint(e){return new Zs(Sn(e.latitude),Sn(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=qm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ad(e));default:return null}}convertTimestamp(e){const n=$a(e);return new dn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=sn.fromString(e);Kt(qC(r),9688,{name:e});const a=new od(r.get(1),r.get(3)),o=new tt(r.popFirst(5));return a.isEqual(n)||Fi(`Document ${o} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}function m1(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Yu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Do extends l1{constructor(e,n,r,a,o,u){super(e,n,r,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Vf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ip("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ze(pe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Do._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Do._jsonSchemaVersion="firestore/documentSnapshot/1.0",Do._jsonSchema={type:Ln("string",Do._jsonSchemaVersion),bundleSource:Ln("string","DocumentSnapshot"),bundleName:Ln("string"),bundle:Ln("string")};class Vf extends Do{data(e={}){return super.data(e)}}class Mo{constructor(e,n,r,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new Yu(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Vf(this._firestore,this._userDataWriter,r.key,r,new Yu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ze(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(a,o){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((h=>{const m=new Vf(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Yu(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((h=>o||h.type!==3)).map((h=>{const m=new Vf(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Yu(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,y=-1;return h.type!==0&&(p=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),y=u.indexOf(h.doc.key)),{type:HD(h.type),doc:m,oldIndex:p,newIndex:y}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ze(pe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Mo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ny.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],a=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),a.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function HD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut(61501,{type:t})}}function Od(t){t=br(t,vn);const e=br(t.firestore,ni);return RD(Dd(e),t._key).then((n=>TT(e,t,n)))}Mo._jsonSchemaVersion="firestore/querySnapshot/1.0",Mo._jsonSchema={type:Ln("string",Mo._jsonSchemaVersion),bundleSource:Ln("string","QuerySnapshot"),bundleName:Ln("string"),bundle:Ln("string")};class p1 extends FD{constructor(e){super(),this.firestore=e}convertBytes(e){return new os(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new vn(this.firestore,null,n)}}function Qa(t){t=br(t,li);const e=br(t.firestore,ni),n=Dd(e),r=new p1(e);return ET(t._query),jD(n,t._query).then((a=>new Mo(e,r,t,a)))}function gr(t,e,n){t=br(t,vn);const r=br(t.firestore,ni),a=m1(t.converter,e,n);return Ld(r,[t1(Ac(r),"setDoc",t._key,a,t.converter!==null,n).toMutation(t._key,xr.none())])}function it(t,e,n,...r){t=br(t,vn);const a=br(t.firestore,ni),o=Ac(a);let u;return u=typeof(e=an(e))=="string"||e instanceof Md?bT(o,"updateDoc",t._key,e,n,r):yT(o,"updateDoc",t._key,e),Ld(a,[u.toMutation(t._key,xr.exists(!0))])}function Yr(t){return Ld(br(t.firestore,ni),[new Jm(t._key,xr.none())])}function Fn(t,e){const n=br(t.firestore,ni),r=Ae(t),a=m1(t.converter,e);return Ld(n,[t1(Ac(t.firestore),"addDoc",r._key,a,t.converter!==null,{}).toMutation(r._key,xr.exists(!1))]).then((()=>r))}function vr(t,...e){t=an(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||rw(e[r])||(n=e[r++]);const a={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(rw(e[r])){const m=e[r];e[r]=m.next?.bind(m),e[r+1]=m.error?.bind(m),e[r+2]=m.complete?.bind(m)}let o,u,h;if(t instanceof vn)u=br(t.firestore,ni),h=Gm(t._key.path),o={next:m=>{e[r]&&e[r](TT(u,t,m))},error:e[r+1],complete:e[r+2]};else{const m=br(t,li);u=br(m.firestore,ni),h=m._query;const p=new p1(u);o={next:y=>{e[r]&&e[r](new Mo(u,p,m,y))},error:e[r+1],complete:e[r+2]},ET(t._query)}return(function(p,y,b,x){const k=new e1(x),j=new Wy(y,k,b);return p.asyncQueue.enqueueAndForget((async()=>Ky(await gm(p),j))),()=>{k.Nu(),p.asyncQueue.enqueueAndForget((async()=>Qy(await gm(p),j)))}})(Dd(u),h,a,o)}function Ld(t,e){return(function(r,a){const o=new Li;return r.asyncQueue.enqueueAndForget((async()=>yD(await AD(r),a,o))),o.promise})(Dd(t),e)}function TT(t,e,n){const r=n.docs.get(e._key),a=new p1(t);return new Do(t,a,e._key,r,new Yu(n.hasPendingWrites,n.fromCache),e.converter)}class $D{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ac(e)}set(e,n,r){this._verifyNotCommitted();const a=V0(e,this._firestore),o=m1(a.converter,n,r),u=t1(this._dataReader,"WriteBatch.set",a._key,o,a.converter!==null,r);return this._mutations.push(u.toMutation(a._key,xr.none())),this}update(e,n,r,...a){this._verifyNotCommitted();const o=V0(e,this._firestore);let u;return u=typeof(n=an(n))=="string"||n instanceof Md?bT(this._dataReader,"WriteBatch.update",o._key,n,r,a):yT(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(u.toMutation(o._key,xr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=V0(e,this._firestore);return this._mutations=this._mutations.concat(new Jm(n._key,xr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ze(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function V0(t,e){if((t=an(t)).firestore!==e)throw new ze(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function aw(){return new Pd("deleteField")}function mt(){return new n1("serverTimestamp")}function Vd(...t){return new r1("arrayUnion",t)}function hd(...t){return new s1("arrayRemove",t)}function Ii(t){return new i1("increment",t)}function ow(t){return Dd(t=br(t,ni)),new $D(t,(e=>Ld(t,e)))}(function(e,n=!0){(function(a){Cc=a})(Go),Vo(new Ba("firestore",((r,{instanceIdentifier:a,options:o})=>{const u=r.getProvider("app").getImmediate(),h=new ni(new z9(r.getProvider("auth-internal")),new F9(u,r.getProvider("app-check-internal")),(function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ze(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new od(p.options.projectId,y)})(u,a),u);return o={useFetchStreams:n,...o},h._setSettings(o),h}),"PUBLIC").setMultipleInstances(!0)),Ks(l4,c4,e),Ks(l4,c4,"esm2020")})();const kT="firebasestorage.googleapis.com",qD="storageBucket",GD=120*1e3,YD=600*1e3;class ci extends si{constructor(e,n,r=0){super(z0(e),`Firebase Storage: ${n} (${z0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ci.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return z0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ri;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ri||(ri={}));function z0(t){return"storage/"+t}function KD(){const t="An unknown error occurred, please check the error payload for server response.";return new ci(ri.UNKNOWN,t)}function QD(){return new ci(ri.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function XD(){return new ci(ri.CANCELED,"User canceled the upload/download.")}function WD(t){return new ci(ri.INVALID_URL,"Invalid URL '"+t+"'.")}function JD(t){return new ci(ri.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function lw(t){return new ci(ri.INVALID_ARGUMENT,t)}function NT(){return new ci(ri.APP_DELETED,"The Firebase app was deleted.")}function ZD(t){return new ci(ri.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class ws{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ws.makeFromUrl(e,n)}catch{return new ws(e,"")}if(r.path==="")return r;throw JD(e)}static makeFromUrl(e,n){let r=null;const a="([A-Za-z0-9.\\-_]+)";function o(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const u="(/(.*))?$",h=new RegExp("^gs://"+a+u,"i"),m={bucket:1,path:3};function p(O){O.path_=decodeURIComponent(O.path)}const y="v[A-Za-z0-9_]+",b=n.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",k=new RegExp(`^https?://${b}/${y}/b/${a}/o${x}`,"i"),j={bucket:1,path:3},R=n===kT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,N="([^?#]*)",U=new RegExp(`^https?://${R}/${a}/${N}`,"i"),I=[{regex:h,indices:m,postModify:o},{regex:k,indices:j,postModify:p},{regex:U,indices:{bucket:1,path:2},postModify:p}];for(let O=0;O<I.length;O++){const B=I[O],H=B.regex.exec(e);if(H){const w=H[B.indices.bucket];let E=H[B.indices.path];E||(E=""),r=new ws(w,E),B.postModify(r);break}}if(r==null)throw WD(e);return r}}class eM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function tM(t,e,n){let r=1,a=null,o=null,u=!1,h=0;function m(){return h===2}let p=!1;function y(...N){p||(p=!0,e.apply(null,N))}function b(N){a=setTimeout(()=>{a=null,t(k,m())},N)}function x(){o&&clearTimeout(o)}function k(N,...U){if(p){x();return}if(N){x(),y.call(null,N,...U);return}if(m()||u){x(),y.call(null,N,...U);return}r<64&&(r*=2);let I;h===1?(h=2,I=0):I=(r+Math.random())*1e3,b(I)}let j=!1;function R(N){j||(j=!0,x(),!p&&(a!==null?(N||(h=2),clearTimeout(a),b(0)):N||(h=1)))}return b(0),o=setTimeout(()=>{u=!0,R(!0)},n),R}function nM(t){t(!1)}function rM(t){return t!==void 0}function cw(t,e,n,r){if(r<e)throw lw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw lw(`Invalid value for '${t}'. Expected ${n} or less.`)}function sM(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const a=e(r)+"="+e(t[r]);n=n+a+"&"}return n=n.slice(0,-1),n}var bm;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(bm||(bm={}));function iM(t,e){const n=t>=500&&t<600,a=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||a||o}class aM{constructor(e,n,r,a,o,u,h,m,p,y,b,x=!0,k=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=a,this.successCodes_=o,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=m,this.timeout_=p,this.progressCallback_=y,this.connectionFactory_=b,this.retry=x,this.isUsingEmulator=k,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((j,R)=>{this.resolve_=j,this.reject_=R,this.start_()})}start_(){const e=(r,a)=>{if(a){r(!1,new gf(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const u=h=>{const m=h.loaded,p=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,p)};this.progressCallback_!==null&&o.addUploadProgressListener(u),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(u),this.pendingConnection_=null;const h=o.getErrorCode()===bm.NO_ERROR,m=o.getStatus();if(!h||iM(m,this.additionalRetryCodes_)&&this.retry){const y=o.getErrorCode()===bm.ABORT;r(!1,new gf(!1,null,y));return}const p=this.successCodes_.indexOf(m)!==-1;r(!0,new gf(p,o))})},n=(r,a)=>{const o=this.resolve_,u=this.reject_,h=a.connection;if(a.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());rM(m)?o(m):o()}catch(m){u(m)}else if(h!==null){const m=KD();m.serverResponse=h.getErrorText(),this.errorCallback_?u(this.errorCallback_(h,m)):u(m)}else if(a.canceled){const m=this.appDelete_?NT():XD();u(m)}else{const m=QD();u(m)}};this.canceled_?n(!1,new gf(!1,null,!0)):this.backoffId_=tM(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&nM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class gf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function oM(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function lM(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function cM(t,e){e&&(t["X-Firebase-GMPID"]=e)}function uM(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function dM(t,e,n,r,a,o,u=!0,h=!1){const m=sM(t.urlParams),p=t.url+m,y=Object.assign({},t.headers);return cM(y,e),oM(y,n),lM(y,o),uM(y,r),new aM(p,t.method,y,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,a,u,h)}function hM(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function fM(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}class xm{constructor(e,n){this._service=e,n instanceof ws?this._location=n:this._location=ws.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new xm(e,n)}get root(){const e=new ws(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fM(this._location.path)}get storage(){return this._service}get parent(){const e=hM(this._location.path);if(e===null)return null;const n=new ws(this._location.bucket,e);return new xm(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw ZD(e)}}function uw(t,e){const n=e?.[qD];return n==null?null:ws.makeFromBucketSpec(n,t)}function mM(t,e,n,r={}){t.host=`${e}:${n}`;const a=qo(e);a&&(hy(`https://${t.host}/b`),fy("Storage",!0)),t._isUsingEmulator=!0,t._protocol=a?"https":"http";const{mockUserToken:o}=r;o&&(t._overrideAuthToken=typeof o=="string"?o:cE(o,t.app.options.projectId))}class pM{constructor(e,n,r,a,o,u=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=a,this._firebaseVersion=o,this._isUsingEmulator=u,this._bucket=null,this._host=kT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=GD,this._maxUploadRetryTime=YD,this._requests=new Set,a!=null?this._bucket=ws.makeFromBucketSpec(a,this._host):this._bucket=uw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ws.makeFromBucketSpec(this._url,e):this._bucket=uw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){cw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){cw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(yr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new xm(this,e)}_makeRequest(e,n,r,a,o=!0){if(this._deleted)return new eM(NT());{const u=dM(e,this._appId,r,a,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,n){const[r,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,a).getPromise()}}const dw="@firebase/storage",hw="0.14.0";const AT="storage";function gM(t=gy(),e){t=an(t);const r=Lm(t,AT).getImmediate({identifier:e}),a=aE("storage");return a&&vM(r,...a),r}function vM(t,e,n,r={}){mM(t,e,n,r)}function yM(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new pM(n,r,a,e,Go)}function bM(){Vo(new Ba(AT,yM,"PUBLIC").setMultipleInstances(!0)),Ks(dw,hw,""),Ks(dw,hw,"esm2020")}bM();const xM={apiKey:"AIzaSyAaaBO8Nw49Xsyo4QG1ropL0UYWeY2zrlU",authDomain:"meydan-academy.firebaseapp.com",projectId:"meydan-academy",storageBucket:"meydan-academy.firebasestorage.app",messagingSenderId:"267697346186",appId:"1:267697346186:web:d53b7d91fe0fabf8d37f73"},g1=hE(xM),Aa=P9(g1),de=DD(g1);gM(g1);const RT=C.createContext({}),yn=()=>{const t=C.useContext(RT);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},_M=({children:t})=>{const[e,n]=C.useState(null),[r,a]=C.useState(null),[o,u]=C.useState(!0),h=async(R,N=!0)=>{if(R)try{await gr(Ae(de,"users",R),{isOnline:N,lastSeen:mt()},{merge:!0})}catch(U){console.error("Presence update failed:",U)}};C.useEffect(()=>{let R=null;const N=Sj(Aa,async U=>{R&&(R(),R=null),n(U),U?(R=vr(Ae(de,"users",U.uid),F=>{F.exists()&&a({id:F.id,...F.data()})},F=>console.error("[AuthContext] Profile listener error:",F)),h(U.uid).catch(()=>{}),u(!1)):(a(null),u(!1))});return()=>{N(),R&&R()}},[]);const j={currentUser:e,userProfile:r,register:async(R,N,U)=>{const F=await vj(Aa,R,N);try{await W_(F.user)}catch(I){console.error("Error sending verification email:",I)}return await gr(Ae(de,"users",F.user.uid),{displayName:U,email:R,role:"member",createdAt:mt(),isOnline:!0,lastSeen:mt()}),F},login:async(R,N)=>{const U=await yj(Aa,R,N);return await h(U.user.uid,!0),U},logout:async()=>{if(e)try{await h(e.uid,!1)}catch{console.log("[AuthContext] Final presence update skipped or failed during logout")}return Ej(Aa)},signInWithGoogle:async()=>{const R=new Di,N=await $j(Aa,R);return(await Od(Ae(de,"users",N.user.uid))).exists()?await h(N.user.uid,!0):await gr(Ae(de,"users",N.user.uid),{displayName:N.user.displayName,email:N.user.email,photoURL:N.user.photoURL,role:"member",createdAt:mt(),isOnline:!0,lastSeen:mt()}),N},resetPassword:R=>zE(Aa,R),resendVerification:()=>{if(e)return W_(e)}};return c.jsx(RT.Provider,{value:j,children:!o&&t})};let U0=null;const wM=()=>(U0||(U0=new(window.AudioContext||window.webkitAudioContext)),U0),Ov=()=>{try{const t=wM(),e=t.currentTime,n=t.createOscillator(),r=t.createGain();n.connect(r),r.connect(t.destination),n.frequency.value=880,n.type="sine",r.gain.setValueAtTime(0,e),r.gain.linearRampToValueAtTime(.2,e+.01),r.gain.linearRampToValueAtTime(0,e+.1),n.start(e),n.stop(e+.1);const a=t.createOscillator(),o=t.createGain();a.connect(o),o.connect(t.destination),a.frequency.value=660,a.type="sine",o.gain.setValueAtTime(0,e+.08),o.gain.linearRampToValueAtTime(.2,e+.09),o.gain.linearRampToValueAtTime(0,e+.25),a.start(e+.08),a.stop(e+.25)}catch(t){console.error("Error playing notification sound:",t)}},SM=(t,e)=>!t||!e?!1:/@everyone\b/i.test(t)?!0:new RegExp(`@${e}\\b`,"i").test(t),jT=C.createContext(),Za=()=>{const t=C.useContext(jT);if(!t)throw new Error("useData must be used within DataProvider");return t},EM=({children:t})=>{const{currentUser:e}=yn(),[n,r]=C.useState([]),[a,o]=C.useState([]),[u,h]=C.useState(null),[m,p]=C.useState([]),[y,b]=C.useState(null),[x,k]=C.useState({}),[j,R]=C.useState({}),[N,U]=C.useState([]),F=C.useRef({}),I=C.useRef(!0);C.useEffect(()=>{if(r([]),!u)return;const w=vr(wt(de,"servers",u,"members"),async P=>{const L=[],z=[],M=new Map;if(P.docChanges().forEach(se=>{const ae=se.doc.data();se.type==="added"&&(L.push(ae.userId),M.set(ae.userId,ae.role)),se.type==="removed"&&z.push(ae.userId),se.type==="modified"&&M.set(ae.userId,ae.role)}),n.length===0&&L.length>0){const se=new Map;P.docs.forEach(J=>{se.set(J.data().userId,J.data().role||"member")});const ae=Array.from(se.keys()),G=[];for(let J=0;J<ae.length;J+=10){const W=ae.slice(J,J+10),Ee=qr(wt(de,"users"),Na("__name__","in",W));(await Qa(Ee)).forEach($=>{G.push({id:$.id,...$.data(),serverRole:se.get($.id)})})}r(G);return}if(L.length>0&&n.length>0){const se=[];for(let ae=0;ae<L.length;ae+=10){const G=L.slice(ae,ae+10),J=qr(wt(de,"users"),Na("__name__","in",G));(await Qa(J)).forEach(Ee=>{se.push({id:Ee.id,...Ee.data(),serverRole:M.get(Ee.id)})})}r(ae=>[...ae,...se])}z.length>0&&r(se=>se.filter(ae=>!z.includes(ae.id))),P.docChanges().some(se=>se.type==="modified")&&r(se=>se.map(ae=>M.has(ae.id)?{...ae,serverRole:M.get(ae.id)}:ae))}),E=qr(wt(de,"users"),Na("servers","array-contains",u),Na("isOnline","==",!0)),A=vr(E,P=>{r(L=>{const z=new Map;return P.forEach(M=>{const se=M.data();z.set(M.id,{presence:se.presence,isOnline:se.isOnline,status:se.status,lastSeen:se.lastSeen,displayName:se.displayName,photoUrl:se.photoUrl||se.photoURL,bio:se.bio,role:se.role})}),L.map(M=>{const se=z.get(M.id);return se?{...M,...se}:{...M,isOnline:!1,presence:"offline",status:null}})})});return()=>{w(),A()}},[u]);const[O,B]=C.useState([]);C.useEffect(()=>{if(!e){o([]),h(null),B([]);return}return vr(Ae(de,"users",e.uid),E=>{if(!E.exists())return;const A=E.data(),P=A?.servers||[],L=A?.unreadMentions||{};Object.keys(L).forEach(z=>{const M=F.current[z]||0;(L[z]?.count||0)>M&&z!==u&&Ov()}),F.current=Object.fromEntries(Object.entries(L).map(([z,M])=>[z,M.count])),k(L),R(A?.unreadDms||{}),B(z=>JSON.stringify(z)!==JSON.stringify(P)?P:z),h(z=>{const M=A?.currentServer;return z?z==="home"||P.includes(z)?z:P.length>0?P[0]:"home":M&&(M==="home"||P.includes(M))?M:P.length>0?P[0]:"home"})})},[e]),C.useEffect(()=>{if(o(E=>E.filter(A=>O.includes(A.id))),O.length===0){o([]);return}const w=[];for(let E=0;E<O.length;E+=10){const A=O.slice(E,E+10),P=qr(wt(de,"servers"),Na("__name__","in",A)),L=vr(P,z=>{const M=[];z.forEach(se=>{M.push({id:se.id,...se.data()})}),o(se=>[...se.filter(J=>!A.includes(J.id)),...M].sort((J,W)=>O.indexOf(J.id)-O.indexOf(W.id)))});w.push(L)}return()=>{w.forEach(E=>E())}},[O]),C.useEffect(()=>{if(!e){U([]);return}I.current=!0;const w=qr(wt(de,"dms"),Na("participants","array-contains",e.uid)),E=vr(w,A=>{const P=[];A.forEach(z=>{P.push({id:z.id,...z.data()})}),P.sort((z,M)=>{const se=z.updatedAt?.toMillis()||0;return(M.updatedAt?.toMillis()||0)-se});const L=P.filter(z=>!z.hiddenFor||!z.hiddenFor.includes(e.uid));U(L),I.current||A.docChanges().forEach(z=>{if(z.type==="modified"||z.type==="added"){const M=z.doc.data();if(M.lastMessage&&M.lastMessage.userId!==e.uid){const se=Date.now(),ae=M.lastMessage.timestamp?.toMillis()||0;se-ae<3e4&&Ov()}}}),I.current=!1});return()=>E()},[e]),C.useEffect(()=>{if(!u){p([]),b(null);return}const w=a.find(A=>A.id===u);b(w||null);const E=vr(wt(de,"servers",u,"channels"),A=>{const P=[];A.forEach(L=>{P.push({id:L.id,...L.data()})}),p(P.sort((L,z)=>L.position-z.position))});return()=>{E()}},[u,a]);const H={users:n,servers:a,currentServer:u,setCurrentServer:h,channels:m,server:y,dms:N,unreadMentions:x,unreadDms:j};return c.jsx(jT.Provider,{value:H,children:t})};var IT={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},fw=ye.createContext&&ye.createContext(IT),CM=["attr","size","title"];function TM(t,e){if(t==null)return{};var n=kM(t,e),r,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)r=o[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function kM(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function _m(){return _m=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_m.apply(this,arguments)}function mw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function wm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mw(Object(n),!0).forEach(function(r){NM(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mw(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function NM(t,e,n){return e=AM(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function AM(t){var e=RM(t,"string");return typeof e=="symbol"?e:e+""}function RM(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DT(t){return t&&t.map((e,n)=>ye.createElement(e.tag,wm({key:n},e.attr),DT(e.child)))}function De(t){return e=>ye.createElement(jM,_m({attr:wm({},t.attr)},e),DT(t.child))}function jM(t){var e=n=>{var{attr:r,size:a,title:o}=t,u=TM(t,CM),h=a||n.size||"1em",m;return n.className&&(m=n.className),t.className&&(m=(m?m+" ":"")+t.className),ye.createElement("svg",_m({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,u,{className:m,style:wm(wm({color:t.color||n.color},n.style),t.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),o&&ye.createElement("title",null,o),t.children)};return fw!==void 0?ye.createElement(fw.Consumer,null,n=>e(n)):e(IT)}function MT(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6z"},child:[]},{tag:"path",attr:{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12zm0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17z"},child:[]}]})(t)}function PT(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m17.6 9.48 1.84-3.18c.16-.31.04-.69-.26-.85a.637.637 0 0 0-.83.22l-1.88 3.24a11.463 11.463 0 0 0-8.94 0L5.65 5.67a.643.643 0 0 0-.87-.2c-.28.18-.37.54-.22.83L6.4 9.48A10.78 10.78 0 0 0 1 18h22a10.78 10.78 0 0 0-5.4-8.52zM7 15.25a1.25 1.25 0 1 1 0-2.5 1.25 1.25 0 0 1 0 2.5zm10 0a1.25 1.25 0 1 1 0-2.5 1.25 1.25 0 0 1 0 2.5z"},child:[]}]})(t)}function IM(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"},child:[]}]})(t)}function DM(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"},child:[]}]})(t)}function Vi(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(t)}function MM(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10.09 15.59 11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5a2 2 0 0 0-2 2v4h2V5h14v14H5v-4H3v4a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"},child:[]}]})(t)}function PM(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 3a9 9 0 0 0-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42A8.954 8.954 0 0 0 13 21a9 9 0 0 0 0-18zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"},child:[]}]})(t)}function Sm(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"},child:[]}]})(t)}function OM(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"},child:[]}]})(t)}function LM(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"},child:[]}]})(t)}function lp(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 19H5V5h7V3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"},child:[]}]})(t)}function Fo(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9.19 6.35c-2.04 2.29-3.44 5.58-3.57 5.89L2 10.69l4.05-4.05c.47-.47 1.15-.68 1.81-.55l1.33.26zM11.17 17s3.74-1.55 5.89-3.7c5.4-5.4 4.5-9.62 4.21-10.57-.95-.3-5.17-1.19-10.57 4.21C8.55 9.09 7 12.83 7 12.83L11.17 17zm6.48-2.19c-2.29 2.04-5.58 3.44-5.89 3.57L13.31 22l4.05-4.05c.47-.47.68-1.15.55-1.81l-.26-1.33zM9 18c0 .83-.34 1.58-.88 2.12C6.94 21.3 2 22 2 22s.7-4.94 1.88-6.12A2.996 2.996 0 0 1 9 18zm4-9c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2z"},child:[]}]})(t)}function v1(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"},child:[]}]})(t)}function cp(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(t)}function VM(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m23 12-2.44-2.79.34-3.69-3.61-.82-1.89-3.2L12 2.96 8.6 1.5 6.71 4.69 3.1 5.5l.34 3.7L1 12l2.44 2.79-.34 3.7 3.61.82L8.6 22.5l3.4-1.47 3.4 1.46 1.89-3.19 3.61-.82-.34-3.69L23 12zm-12.91 4.72-3.8-3.81 1.48-1.48 2.32 2.33 5.85-5.87 1.48 1.48-7.33 7.35z"},child:[]}]})(t)}function zM(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"},child:[]}]})(t)}function UM(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"},child:[]}]})(t)}function Lv(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28zm-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18l5.98 5.99zM4.27 3 3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73 4.27 3z"},child:[]}]})(t)}function Vv(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"},child:[]}]})(t)}function OT(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM9.5 16.5v-9l7 4.5-7 4.5z"},child:[]}]})(t)}function BM(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 6h12v12H6z"},child:[]}]})(t)}function zv(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m21 6.5-4 4V7c0-.55-.45-1-1-1H9.82L21 17.18V6.5zM3.27 2 2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.54-.18L19.73 21 21 19.73 3.27 2z"},child:[]}]})(t)}function fd(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"},child:[]}]})(t)}function FM(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 9v6h4l5 5V4l-5 5H7z"},child:[]}]})(t)}function pw(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16.5 12A4.5 4.5 0 0 0 14 7.97v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51A8.796 8.796 0 0 0 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06a8.99 8.99 0 0 0 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4 9.91 6.09 12 8.18V4z"},child:[]}]})(t)}function gw(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3A4.5 4.5 0 0 0 14 7.97v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"},child:[]}]})(t)}function B0(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.7.28-.28 0-.53-.11-.71-.29L.29 13.08a.956.956 0 0 1-.29-.7c0-.28.11-.53.29-.71C3.34 8.78 7.46 7 12 7s8.66 1.78 11.71 4.67c.18.18.29.43.29.71 0 .28-.11.53-.29.71l-2.48 2.48c-.18.18-.43.29-.71.29-.27 0-.52-.11-.7-.28a11.27 11.27 0 0 0-2.67-1.85.996.996 0 0 1-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z"},child:[]}]})(t)}function HM(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20.01 15.38c-1.23 0-2.42-.2-3.53-.56a.977.977 0 0 0-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"},child:[]}]})(t)}function $M(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"},child:[]}]})(t)}function qM(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"},child:[]}]})(t)}function Em(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M20 18c1.1 0 1.99-.9 1.99-2L22 6a2 2 0 0 0-2-2H4c-1.11 0-2 .89-2 2v10a2 2 0 0 0 2 2H0v2h24v-2h-4zm-7-3.53v-2.19c-2.78 0-4.61.85-6 2.72.56-2.67 2.11-5.33 6-5.87V7l4 3.73-4 3.74z"},child:[]}]})(t)}function GM(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m21.22 18.02 2 2H24v-2h-2.78zm.77-2 .01-10a2 2 0 0 0-2-2H7.22l5.23 5.23c.18-.04.36-.07.55-.1V7.02l4 3.73-1.58 1.47 5.54 5.54c.61-.33 1.03-.99 1.03-1.74zM2.39 1.73 1.11 3l1.54 1.54c-.4.36-.65.89-.65 1.48v10a2 2 0 0 0 2 2H0v2h18.13l2.71 2.71 1.27-1.27L2.39 1.73zM7 15.02c.31-1.48.92-2.95 2.07-4.06l1.59 1.59c-1.54.38-2.7 1.18-3.66 2.47z"},child:[]}]})(t)}function vw(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"},child:[]}]})(t)}function Po(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(t)}function LT(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(t)}function tc(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M16 9V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3z"},child:[]}]})(t)}function YM(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"},child:[]}]})(t)}function yw(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"},child:[]}]})(t)}function VT(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 10V8h-4V4h-2v4h-4V4H8v4H4v2h4v4H4v2h4v4h2v-4h4v4h2v-4h4v-2h-4v-4h4zm-6 4h-4v-4h4v4z"},child:[]}]})(t)}function Cm(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 18h2V6H7v12zm4 4h2V2h-2v20zm-8-8h2v-4H3v4zm12 4h2V6h-2v12zm4-8v4h2v-4h-2z"},child:[]}]})(t)}function KM(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 9H4v2h16V9zM4 15h16v-2H4v2z"},child:[]}]})(t)}function zT(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"},child:[]}]})(t)}function Uv(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zm0-10h4v6h6v-6h4l-7-7-7 7z"},child:[]}]})(t)}function QM(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 3H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h6v2H8v2h8v-2h-2v-2h6c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"},child:[]}]})(t)}function XM(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M12 4c3.87 0 7 3.13 7 7v2h-2.92L21 17.92V11a9 9 0 0 0-9-9c-1.95 0-3.76.62-5.23 1.68l1.44 1.44A6.914 6.914 0 0 1 12 4zM2.27 1.72 1 3l3.33 3.32A8.899 8.899 0 0 0 3 11v7c0 1.66 1.34 3 3 3h3v-8H5v-2c0-1.17.29-2.26.79-3.22L15 17v4h3c.3 0 .59-.06.86-.14L21 23l1.27-1.27-20-20.01z"},child:[]}]})(t)}function WM(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"},child:[]}]})(t)}function JM(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2V8zm0 3h2v2h-2v-2zM8 8h2v2H8V8zm0 3h2v2H8v-2zm-1 2H5v-2h2v2zm0-3H5V8h2v2zm9 7H8v-2h8v2zm0-4h-2v-2h2v2zm0-3h-2V8h2v2zm3 3h-2v-2h2v2zm0-3h-2V8h2v2z"},child:[]},{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0z"},child:[]}]})(t)}function ZM(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"},child:[]}]})(t)}function e7(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 7v2.99s-1.99.01-2 0V7h-3s.01-1.99 0-2h3V2h2v3h3v2h-3zm-3 4V8h-3V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8h-3zM5 19l3-4 2 3 3-4 4 5H5z"},child:[]}]})(t)}function t7(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m19 9 1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25L19 9zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12l-5.5-2.5zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25L19 15z"},child:[]}]})(t)}function nc(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},child:[]}]})(t)}function Tm(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"},child:[]}]})(t)}function n7(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"},child:[]}]})(t)}function r7(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10a2.5 2.5 0 0 0 2.5-2.5c0-.61-.23-1.2-.64-1.67a.528.528 0 0 1-.13-.33c0-.28.22-.5.5-.5H16c3.31 0 6-2.69 6-6 0-4.96-4.49-9-10-9zm5.5 11c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm-3-4c-.83 0-1.5-.67-1.5-1.5S13.67 6 14.5 6s1.5.67 1.5 1.5S15.33 9 14.5 9zM5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S7.33 13 6.5 13 5 12.33 5 11.5zm6-4c0 .83-.67 1.5-1.5 1.5S8 8.33 8 7.5 8.67 6 9.5 6s1.5.67 1.5 1.5z"},child:[]}]})(t)}function s7(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 11h-1V3c0-1.1-.9-2-2-2h-2c-1.1 0-2 .9-2 2v8H8c-2.76 0-5 2.24-5 5v7h18v-7c0-2.76-2.24-5-5-5zm3 10h-2v-3c0-.55-.45-1-1-1s-1 .45-1 1v3h-2v-3c0-.55-.45-1-1-1s-1 .45-1 1v3H9v-3c0-.55-.45-1-1-1s-1 .45-1 1v3H5v-5c0-1.65 1.35-3 3-3h8c1.65 0 3 1.35 3 3v5z"},child:[]}]})(t)}function i7(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.16 3h-.32L9.21 8.25h5.58zM16.46 8.25h5.16L19 3h-5.16zM21.38 9.75h-8.63V20.1zM11.25 20.1V9.75H2.62zM7.54 8.25 10.16 3H5L2.38 8.25z"},child:[]}]})(t)}function Ho(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"},child:[]}]})(t)}function Vn(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(t)}function a7(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"},child:[]}]})(t)}function o7(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"},child:[]}]})(t)}function bw(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"},child:[]}]})(t)}function l7(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(t)}function c7(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"},child:[]}]})(t)}function u7(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 12.22C21 6.73 16.74 3 12 3c-4.69 0-9 3.65-9 9.28-.6.34-1 .98-1 1.72v2c0 1.1.9 2 2 2h1v-6.1c0-3.87 3.13-7 7-7s7 3.13 7 7V19h-8v2h8c1.1 0 2-.9 2-2v-1.22c.59-.31 1-.92 1-1.64v-2.3c0-.7-.41-1.31-1-1.62z"},child:[]},{tag:"circle",attr:{cx:"9",cy:"13",r:"1"},child:[]},{tag:"circle",attr:{cx:"15",cy:"13",r:"1"},child:[]},{tag:"path",attr:{d:"M18 11.03A6.04 6.04 0 0 0 12.05 6c-3.03 0-6.29 2.51-6.03 6.45a8.075 8.075 0 0 0 4.86-5.89c1.31 2.63 4 4.44 7.12 4.47z"},child:[]}]})(t)}function d7(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 1.01 7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14zm-1-6h-3V8h-2v5H8l4 4 4-4z"},child:[]}]})(t)}function h7(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 11V3H5c-1.1 0-2 .9-2 2v6h8zm2 0h8V5c0-1.1-.9-2-2-2h-6v8zm-2 2H3v6c0 1.1.9 2 2 2h6v-8zm2 0v8h6c1.1 0 2-.9 2-2v-6h-8z"},child:[]}]})(t)}function xw(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 9V7h-2V2.84A9.929 9.929 0 0 0 11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12c0-1.05-.17-2.05-.47-3H18zm-2.5-1c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5.67-1.5 1.5-1.5zm-7 0c.83 0 1.5.67 1.5 1.5S9.33 11 8.5 11 7 10.33 7 9.5 7.67 8 8.5 8zm3.5 9.5c-2.33 0-4.31-1.46-5.11-3.5h10.22c-.8 2.04-2.78 3.5-5.11 3.5zM22 3h2v2h-2v2h-2V5h-2V3h2V1h2v2z"},child:[]}]})(t)}function UT(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM8.5 8c.83 0 1.5.67 1.5 1.5S9.33 11 8.5 11 7 10.33 7 9.5 7.67 8 8.5 8zM12 18c-2.28 0-4.22-1.66-5-4h10c-.78 2.34-2.72 4-5 4zm3.5-7c-.83 0-1.5-.67-1.5-1.5S14.67 8 15.5 8s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"},child:[]}]})(t)}function f7(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 22c1.1 0 2-.9 2-2h-4a2 2 0 0 0 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"},child:[]}]})(t)}function y1(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"},child:[]}]})(t)}function m7(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"},child:[]}]})(t)}function p7(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"},child:[]}]})(t)}function b1(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"},child:[]}]})(t)}function g7(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"},child:[]}]})(t)}const BT=C.createContext(),Kr=()=>{const t=C.useContext(BT);if(!t)throw new Error("useToast must be used within ToastProvider");return t},v7=({children:t})=>{const[e,n]=C.useState([]),r=C.useCallback((p,y="info")=>{const b=Date.now();n(x=>[...x,{id:b,message:p,type:y}]),setTimeout(()=>{n(x=>x.filter(k=>k.id!==b))},4e3)},[]),a=C.useCallback(p=>{n(y=>y.filter(b=>b.id!==p))},[]),o=C.useCallback(p=>r(p,"success"),[r]),u=C.useCallback(p=>r(p,"error"),[r]),h=C.useCallback(p=>r(p,"info"),[r]),m=C.useCallback(p=>r(p,"warning"),[r]);return c.jsxs(BT.Provider,{value:{success:o,error:u,info:h,warning:m},children:[t,c.jsx(y7,{toasts:e,removeToast:a})]})},y7=({toasts:t,removeToast:e})=>c.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(n=>c.jsx(b7,{toast:n,onClose:()=>e(n.id)},n.id))}),b7=({toast:t,onClose:e})=>{const n={success:c.jsx(IM,{size:20}),error:c.jsx(zM,{size:20}),warning:c.jsx(UM,{size:20}),info:c.jsx(Sm,{size:20})},r={success:"bg-green-600 border-green-500",error:"bg-red-600 border-red-500",warning:"bg-yellow-600 border-yellow-500",info:"bg-blue-600 border-blue-500"};return c.jsxs("div",{className:`${r[t.type]} border-l-4 text-white px-4 py-3 rounded-lg shadow-lg 
                  flex items-center gap-3 min-w-[300px] max-w-md animate-slide-in`,children:[c.jsx("div",{className:"flex-shrink-0",children:n[t.type]}),c.jsx("div",{className:"flex-1 text-sm font-medium",children:t.message}),c.jsx("button",{onClick:e,className:"flex-shrink-0 hover:bg-white/20 rounded p-1 transition-colors",children:c.jsx(Vn,{size:18})})]})};function FT(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(n=FT(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function x7(){for(var t,e,n=0,r="",a=arguments.length;n<a;n++)(t=arguments[n])&&(e=FT(t))&&(r&&(r+=" "),r+=e);return r}const _7=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},w7=(t,e)=>({classGroupId:t,validator:e}),HT=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),km="-",_w=[],S7="arbitrary..",E7=t=>{const e=T7(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:u=>{if(u.startsWith("[")&&u.endsWith("]"))return C7(u);const h=u.split(km),m=h[0]===""&&h.length>1?1:0;return $T(h,m,e)},getConflictingClassGroupIds:(u,h)=>{if(h){const m=r[u],p=n[u];return m?p?_7(p,m):m:p||_w}return n[u]||_w}}},$T=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const a=t[e],o=n.nextPart.get(a);if(o){const p=$T(t,e+1,o);if(p)return p}const u=n.validators;if(u===null)return;const h=e===0?t.join(km):t.slice(e).join(km),m=u.length;for(let p=0;p<m;p++){const y=u[p];if(y.validator(h))return y.classGroupId}},C7=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?S7+r:void 0})(),T7=t=>{const{theme:e,classGroups:n}=t;return k7(n,e)},k7=(t,e)=>{const n=HT();for(const r in t){const a=t[r];x1(a,n,r,e)}return n},x1=(t,e,n,r)=>{const a=t.length;for(let o=0;o<a;o++){const u=t[o];N7(u,e,n,r)}},N7=(t,e,n,r)=>{if(typeof t=="string"){A7(t,e,n);return}if(typeof t=="function"){R7(t,e,n,r);return}j7(t,e,n,r)},A7=(t,e,n)=>{const r=t===""?e:qT(e,t);r.classGroupId=n},R7=(t,e,n,r)=>{if(I7(t)){x1(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(w7(n,t))},j7=(t,e,n,r)=>{const a=Object.entries(t),o=a.length;for(let u=0;u<o;u++){const[h,m]=a[u];x1(m,qT(e,h),n,r)}},qT=(t,e)=>{let n=t;const r=e.split(km),a=r.length;for(let o=0;o<a;o++){const u=r[o];let h=n.nextPart.get(u);h||(h=HT(),n.nextPart.set(u,h)),n=h}return n},I7=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,D7=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const a=(o,u)=>{n[o]=u,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(o){let u=n[o];if(u!==void 0)return u;if((u=r[o])!==void 0)return a(o,u),u},set(o,u){o in n?n[o]=u:a(o,u)}}},Bv="!",ww=":",M7=[],Sw=(t,e,n,r,a)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:a}),P7=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=a=>{const o=[];let u=0,h=0,m=0,p;const y=a.length;for(let R=0;R<y;R++){const N=a[R];if(u===0&&h===0){if(N===ww){o.push(a.slice(m,R)),m=R+1;continue}if(N==="/"){p=R;continue}}N==="["?u++:N==="]"?u--:N==="("?h++:N===")"&&h--}const b=o.length===0?a:a.slice(m);let x=b,k=!1;b.endsWith(Bv)?(x=b.slice(0,-1),k=!0):b.startsWith(Bv)&&(x=b.slice(1),k=!0);const j=p&&p>m?p-m:void 0;return Sw(o,k,x,j)};if(e){const a=e+ww,o=r;r=u=>u.startsWith(a)?o(u.slice(a.length)):Sw(M7,!1,u,void 0,!0)}if(n){const a=r;r=o=>n({className:o,parseClassName:a})}return r},O7=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let a=[];for(let o=0;o<n.length;o++){const u=n[o],h=u[0]==="[",m=e.has(u);h||m?(a.length>0&&(a.sort(),r.push(...a),a=[]),r.push(u)):a.push(u)}return a.length>0&&(a.sort(),r.push(...a)),r}},L7=t=>({cache:D7(t.cacheSize),parseClassName:P7(t),sortModifiers:O7(t),...E7(t)}),V7=/\s+/,z7=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:o}=e,u=[],h=t.trim().split(V7);let m="";for(let p=h.length-1;p>=0;p-=1){const y=h[p],{isExternal:b,modifiers:x,hasImportantModifier:k,baseClassName:j,maybePostfixModifierPosition:R}=n(y);if(b){m=y+(m.length>0?" "+m:m);continue}let N=!!R,U=r(N?j.substring(0,R):j);if(!U){if(!N){m=y+(m.length>0?" "+m:m);continue}if(U=r(j),!U){m=y+(m.length>0?" "+m:m);continue}N=!1}const F=x.length===0?"":x.length===1?x[0]:o(x).join(":"),I=k?F+Bv:F,O=I+U;if(u.indexOf(O)>-1)continue;u.push(O);const B=a(U,N);for(let H=0;H<B.length;++H){const w=B[H];u.push(I+w)}m=y+(m.length>0?" "+m:m)}return m},U7=(...t)=>{let e=0,n,r,a="";for(;e<t.length;)(n=t[e++])&&(r=GT(n))&&(a&&(a+=" "),a+=r);return a},GT=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=GT(t[r]))&&(n&&(n+=" "),n+=e);return n},B7=(t,...e)=>{let n,r,a,o;const u=m=>{const p=e.reduce((y,b)=>b(y),t());return n=L7(p),r=n.cache.get,a=n.cache.set,o=h,h(m)},h=m=>{const p=r(m);if(p)return p;const y=z7(m,n);return a(m,y),y};return o=u,(...m)=>o(U7(...m))},F7=[],Bn=t=>{const e=n=>n[t]||F7;return e.isThemeGetter=!0,e},YT=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,KT=/^\((?:(\w[\w-]*):)?(.+)\)$/i,H7=/^\d+\/\d+$/,$7=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,q7=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,G7=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Y7=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,K7=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Fl=t=>H7.test(t),Ct=t=>!!t&&!Number.isNaN(Number(t)),Ea=t=>!!t&&Number.isInteger(Number(t)),F0=t=>t.endsWith("%")&&Ct(t.slice(0,-1)),Ai=t=>$7.test(t),Q7=()=>!0,X7=t=>q7.test(t)&&!G7.test(t),QT=()=>!1,W7=t=>Y7.test(t),J7=t=>K7.test(t),Z7=t=>!Ye(t)&&!Ke(t),eP=t=>Rc(t,JT,QT),Ye=t=>YT.test(t),To=t=>Rc(t,ZT,X7),H0=t=>Rc(t,iP,Ct),Ew=t=>Rc(t,XT,QT),tP=t=>Rc(t,WT,J7),vf=t=>Rc(t,ek,W7),Ke=t=>KT.test(t),Ou=t=>jc(t,ZT),nP=t=>jc(t,aP),Cw=t=>jc(t,XT),rP=t=>jc(t,JT),sP=t=>jc(t,WT),yf=t=>jc(t,ek,!0),Rc=(t,e,n)=>{const r=YT.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},jc=(t,e,n=!1)=>{const r=KT.exec(t);return r?r[1]?e(r[1]):n:!1},XT=t=>t==="position"||t==="percentage",WT=t=>t==="image"||t==="url",JT=t=>t==="length"||t==="size"||t==="bg-size",ZT=t=>t==="length",iP=t=>t==="number",aP=t=>t==="family-name",ek=t=>t==="shadow",oP=()=>{const t=Bn("color"),e=Bn("font"),n=Bn("text"),r=Bn("font-weight"),a=Bn("tracking"),o=Bn("leading"),u=Bn("breakpoint"),h=Bn("container"),m=Bn("spacing"),p=Bn("radius"),y=Bn("shadow"),b=Bn("inset-shadow"),x=Bn("text-shadow"),k=Bn("drop-shadow"),j=Bn("blur"),R=Bn("perspective"),N=Bn("aspect"),U=Bn("ease"),F=Bn("animate"),I=()=>["auto","avoid","all","avoid-page","page","left","right","column"],O=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],B=()=>[...O(),Ke,Ye],H=()=>["auto","hidden","clip","visible","scroll"],w=()=>["auto","contain","none"],E=()=>[Ke,Ye,m],A=()=>[Fl,"full","auto",...E()],P=()=>[Ea,"none","subgrid",Ke,Ye],L=()=>["auto",{span:["full",Ea,Ke,Ye]},Ea,Ke,Ye],z=()=>[Ea,"auto",Ke,Ye],M=()=>["auto","min","max","fr",Ke,Ye],se=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ae=()=>["start","end","center","stretch","center-safe","end-safe"],G=()=>["auto",...E()],J=()=>[Fl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...E()],W=()=>[t,Ke,Ye],Ee=()=>[...O(),Cw,Ew,{position:[Ke,Ye]}],Pe=()=>["no-repeat",{repeat:["","x","y","space","round"]}],$=()=>["auto","cover","contain",rP,eP,{size:[Ke,Ye]}],X=()=>[F0,Ou,To],oe=()=>["","none","full",p,Ke,Ye],fe=()=>["",Ct,Ou,To],Ce=()=>["solid","dashed","dotted","double"],Ue=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],re=()=>[Ct,F0,Cw,Ew],Le=()=>["","none",j,Ke,Ye],Re=()=>["none",Ct,Ke,Ye],We=()=>["none",Ct,Ke,Ye],ke=()=>[Ct,Ke,Ye],he=()=>[Fl,"full",...E()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ai],breakpoint:[Ai],color:[Q7],container:[Ai],"drop-shadow":[Ai],ease:["in","out","in-out"],font:[Z7],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ai],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ai],shadow:[Ai],spacing:["px",Ct],text:[Ai],"text-shadow":[Ai],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Fl,Ye,Ke,N]}],container:["container"],columns:[{columns:[Ct,Ye,Ke,h]}],"break-after":[{"break-after":I()}],"break-before":[{"break-before":I()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:B()}],overflow:[{overflow:H()}],"overflow-x":[{"overflow-x":H()}],"overflow-y":[{"overflow-y":H()}],overscroll:[{overscroll:w()}],"overscroll-x":[{"overscroll-x":w()}],"overscroll-y":[{"overscroll-y":w()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:A()}],"inset-x":[{"inset-x":A()}],"inset-y":[{"inset-y":A()}],start:[{start:A()}],end:[{end:A()}],top:[{top:A()}],right:[{right:A()}],bottom:[{bottom:A()}],left:[{left:A()}],visibility:["visible","invisible","collapse"],z:[{z:[Ea,"auto",Ke,Ye]}],basis:[{basis:[Fl,"full","auto",h,...E()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ct,Fl,"auto","initial","none",Ye]}],grow:[{grow:["",Ct,Ke,Ye]}],shrink:[{shrink:["",Ct,Ke,Ye]}],order:[{order:[Ea,"first","last","none",Ke,Ye]}],"grid-cols":[{"grid-cols":P()}],"col-start-end":[{col:L()}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":P()}],"row-start-end":[{row:L()}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":M()}],"auto-rows":[{"auto-rows":M()}],gap:[{gap:E()}],"gap-x":[{"gap-x":E()}],"gap-y":[{"gap-y":E()}],"justify-content":[{justify:[...se(),"normal"]}],"justify-items":[{"justify-items":[...ae(),"normal"]}],"justify-self":[{"justify-self":["auto",...ae()]}],"align-content":[{content:["normal",...se()]}],"align-items":[{items:[...ae(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ae(),{baseline:["","last"]}]}],"place-content":[{"place-content":se()}],"place-items":[{"place-items":[...ae(),"baseline"]}],"place-self":[{"place-self":["auto",...ae()]}],p:[{p:E()}],px:[{px:E()}],py:[{py:E()}],ps:[{ps:E()}],pe:[{pe:E()}],pt:[{pt:E()}],pr:[{pr:E()}],pb:[{pb:E()}],pl:[{pl:E()}],m:[{m:G()}],mx:[{mx:G()}],my:[{my:G()}],ms:[{ms:G()}],me:[{me:G()}],mt:[{mt:G()}],mr:[{mr:G()}],mb:[{mb:G()}],ml:[{ml:G()}],"space-x":[{"space-x":E()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":E()}],"space-y-reverse":["space-y-reverse"],size:[{size:J()}],w:[{w:[h,"screen",...J()]}],"min-w":[{"min-w":[h,"screen","none",...J()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[u]},...J()]}],h:[{h:["screen","lh",...J()]}],"min-h":[{"min-h":["screen","lh","none",...J()]}],"max-h":[{"max-h":["screen","lh",...J()]}],"font-size":[{text:["base",n,Ou,To]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Ke,H0]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",F0,Ye]}],"font-family":[{font:[nP,Ye,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,Ke,Ye]}],"line-clamp":[{"line-clamp":[Ct,"none",Ke,H0]}],leading:[{leading:[o,...E()]}],"list-image":[{"list-image":["none",Ke,Ye]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ke,Ye]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:W()}],"text-color":[{text:W()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ce(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ct,"from-font","auto",Ke,To]}],"text-decoration-color":[{decoration:W()}],"underline-offset":[{"underline-offset":[Ct,"auto",Ke,Ye]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ke,Ye]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ke,Ye]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Ee()}],"bg-repeat":[{bg:Pe()}],"bg-size":[{bg:$()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ea,Ke,Ye],radial:["",Ke,Ye],conic:[Ea,Ke,Ye]},sP,tP]}],"bg-color":[{bg:W()}],"gradient-from-pos":[{from:X()}],"gradient-via-pos":[{via:X()}],"gradient-to-pos":[{to:X()}],"gradient-from":[{from:W()}],"gradient-via":[{via:W()}],"gradient-to":[{to:W()}],rounded:[{rounded:oe()}],"rounded-s":[{"rounded-s":oe()}],"rounded-e":[{"rounded-e":oe()}],"rounded-t":[{"rounded-t":oe()}],"rounded-r":[{"rounded-r":oe()}],"rounded-b":[{"rounded-b":oe()}],"rounded-l":[{"rounded-l":oe()}],"rounded-ss":[{"rounded-ss":oe()}],"rounded-se":[{"rounded-se":oe()}],"rounded-ee":[{"rounded-ee":oe()}],"rounded-es":[{"rounded-es":oe()}],"rounded-tl":[{"rounded-tl":oe()}],"rounded-tr":[{"rounded-tr":oe()}],"rounded-br":[{"rounded-br":oe()}],"rounded-bl":[{"rounded-bl":oe()}],"border-w":[{border:fe()}],"border-w-x":[{"border-x":fe()}],"border-w-y":[{"border-y":fe()}],"border-w-s":[{"border-s":fe()}],"border-w-e":[{"border-e":fe()}],"border-w-t":[{"border-t":fe()}],"border-w-r":[{"border-r":fe()}],"border-w-b":[{"border-b":fe()}],"border-w-l":[{"border-l":fe()}],"divide-x":[{"divide-x":fe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":fe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ce(),"hidden","none"]}],"divide-style":[{divide:[...Ce(),"hidden","none"]}],"border-color":[{border:W()}],"border-color-x":[{"border-x":W()}],"border-color-y":[{"border-y":W()}],"border-color-s":[{"border-s":W()}],"border-color-e":[{"border-e":W()}],"border-color-t":[{"border-t":W()}],"border-color-r":[{"border-r":W()}],"border-color-b":[{"border-b":W()}],"border-color-l":[{"border-l":W()}],"divide-color":[{divide:W()}],"outline-style":[{outline:[...Ce(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ct,Ke,Ye]}],"outline-w":[{outline:["",Ct,Ou,To]}],"outline-color":[{outline:W()}],shadow:[{shadow:["","none",y,yf,vf]}],"shadow-color":[{shadow:W()}],"inset-shadow":[{"inset-shadow":["none",b,yf,vf]}],"inset-shadow-color":[{"inset-shadow":W()}],"ring-w":[{ring:fe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:W()}],"ring-offset-w":[{"ring-offset":[Ct,To]}],"ring-offset-color":[{"ring-offset":W()}],"inset-ring-w":[{"inset-ring":fe()}],"inset-ring-color":[{"inset-ring":W()}],"text-shadow":[{"text-shadow":["none",x,yf,vf]}],"text-shadow-color":[{"text-shadow":W()}],opacity:[{opacity:[Ct,Ke,Ye]}],"mix-blend":[{"mix-blend":[...Ue(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ue()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ct]}],"mask-image-linear-from-pos":[{"mask-linear-from":re()}],"mask-image-linear-to-pos":[{"mask-linear-to":re()}],"mask-image-linear-from-color":[{"mask-linear-from":W()}],"mask-image-linear-to-color":[{"mask-linear-to":W()}],"mask-image-t-from-pos":[{"mask-t-from":re()}],"mask-image-t-to-pos":[{"mask-t-to":re()}],"mask-image-t-from-color":[{"mask-t-from":W()}],"mask-image-t-to-color":[{"mask-t-to":W()}],"mask-image-r-from-pos":[{"mask-r-from":re()}],"mask-image-r-to-pos":[{"mask-r-to":re()}],"mask-image-r-from-color":[{"mask-r-from":W()}],"mask-image-r-to-color":[{"mask-r-to":W()}],"mask-image-b-from-pos":[{"mask-b-from":re()}],"mask-image-b-to-pos":[{"mask-b-to":re()}],"mask-image-b-from-color":[{"mask-b-from":W()}],"mask-image-b-to-color":[{"mask-b-to":W()}],"mask-image-l-from-pos":[{"mask-l-from":re()}],"mask-image-l-to-pos":[{"mask-l-to":re()}],"mask-image-l-from-color":[{"mask-l-from":W()}],"mask-image-l-to-color":[{"mask-l-to":W()}],"mask-image-x-from-pos":[{"mask-x-from":re()}],"mask-image-x-to-pos":[{"mask-x-to":re()}],"mask-image-x-from-color":[{"mask-x-from":W()}],"mask-image-x-to-color":[{"mask-x-to":W()}],"mask-image-y-from-pos":[{"mask-y-from":re()}],"mask-image-y-to-pos":[{"mask-y-to":re()}],"mask-image-y-from-color":[{"mask-y-from":W()}],"mask-image-y-to-color":[{"mask-y-to":W()}],"mask-image-radial":[{"mask-radial":[Ke,Ye]}],"mask-image-radial-from-pos":[{"mask-radial-from":re()}],"mask-image-radial-to-pos":[{"mask-radial-to":re()}],"mask-image-radial-from-color":[{"mask-radial-from":W()}],"mask-image-radial-to-color":[{"mask-radial-to":W()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":O()}],"mask-image-conic-pos":[{"mask-conic":[Ct]}],"mask-image-conic-from-pos":[{"mask-conic-from":re()}],"mask-image-conic-to-pos":[{"mask-conic-to":re()}],"mask-image-conic-from-color":[{"mask-conic-from":W()}],"mask-image-conic-to-color":[{"mask-conic-to":W()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Ee()}],"mask-repeat":[{mask:Pe()}],"mask-size":[{mask:$()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ke,Ye]}],filter:[{filter:["","none",Ke,Ye]}],blur:[{blur:Le()}],brightness:[{brightness:[Ct,Ke,Ye]}],contrast:[{contrast:[Ct,Ke,Ye]}],"drop-shadow":[{"drop-shadow":["","none",k,yf,vf]}],"drop-shadow-color":[{"drop-shadow":W()}],grayscale:[{grayscale:["",Ct,Ke,Ye]}],"hue-rotate":[{"hue-rotate":[Ct,Ke,Ye]}],invert:[{invert:["",Ct,Ke,Ye]}],saturate:[{saturate:[Ct,Ke,Ye]}],sepia:[{sepia:["",Ct,Ke,Ye]}],"backdrop-filter":[{"backdrop-filter":["","none",Ke,Ye]}],"backdrop-blur":[{"backdrop-blur":Le()}],"backdrop-brightness":[{"backdrop-brightness":[Ct,Ke,Ye]}],"backdrop-contrast":[{"backdrop-contrast":[Ct,Ke,Ye]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ct,Ke,Ye]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ct,Ke,Ye]}],"backdrop-invert":[{"backdrop-invert":["",Ct,Ke,Ye]}],"backdrop-opacity":[{"backdrop-opacity":[Ct,Ke,Ye]}],"backdrop-saturate":[{"backdrop-saturate":[Ct,Ke,Ye]}],"backdrop-sepia":[{"backdrop-sepia":["",Ct,Ke,Ye]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":E()}],"border-spacing-x":[{"border-spacing-x":E()}],"border-spacing-y":[{"border-spacing-y":E()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ke,Ye]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ct,"initial",Ke,Ye]}],ease:[{ease:["linear","initial",U,Ke,Ye]}],delay:[{delay:[Ct,Ke,Ye]}],animate:[{animate:["none",F,Ke,Ye]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[R,Ke,Ye]}],"perspective-origin":[{"perspective-origin":B()}],rotate:[{rotate:Re()}],"rotate-x":[{"rotate-x":Re()}],"rotate-y":[{"rotate-y":Re()}],"rotate-z":[{"rotate-z":Re()}],scale:[{scale:We()}],"scale-x":[{"scale-x":We()}],"scale-y":[{"scale-y":We()}],"scale-z":[{"scale-z":We()}],"scale-3d":["scale-3d"],skew:[{skew:ke()}],"skew-x":[{"skew-x":ke()}],"skew-y":[{"skew-y":ke()}],transform:[{transform:[Ke,Ye,"","none","gpu","cpu"]}],"transform-origin":[{origin:B()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:he()}],"translate-x":[{"translate-x":he()}],"translate-y":[{"translate-y":he()}],"translate-z":[{"translate-z":he()}],"translate-none":["translate-none"],accent:[{accent:W()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:W()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ke,Ye]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ke,Ye]}],fill:[{fill:["none",...W()]}],"stroke-w":[{stroke:[Ct,Ou,To,H0]}],stroke:[{stroke:["none",...W()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},lP=B7(oP);function Bt(...t){return lP(x7(t))}function up(t){if(!t)return"";const e=t.toDate?t.toDate():new Date(t),r=new Date-e;return r<6e4?"Just now":r<36e5?`${Math.floor(r/6e4)}m ago`:r<864e5?`${Math.floor(r/36e5)}h ago`:r<6048e5?`${Math.floor(r/864e5)}d ago`:e.toLocaleDateString()}function cP(t){switch(t){case"admin":return"bg-admin/20 text-admin border-admin/30";case"moderator":return"bg-moderator/20 text-moderator border-moderator/30";default:return"bg-member/20 text-member border-member/30"}}const En=({label:t,error:e,className:n,containerClassName:r,...a})=>c.jsxs("div",{className:Bt("flex flex-col gap-1.5",r),children:[t&&c.jsx("label",{className:"text-sm font-medium text-dark-text",children:t}),c.jsx("input",{className:Bt("bg-dark-input text-dark-text px-4 py-2.5 rounded-md","border border-transparent focus:border-brand-primary","outline-none transition-colors duration-200","placeholder:text-dark-muted",e&&"border-admin",n),...a}),e&&c.jsx("span",{className:"text-sm text-admin",children:e})]}),ot=({children:t,variant:e="primary",size:n="md",className:r,disabled:a,...o})=>{const u="font-medium rounded-md transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",h={primary:"bg-brand-primary hover:bg-brand-hover text-white",secondary:"bg-dark-input hover:bg-dark-hover text-dark-text",danger:"bg-admin hover:bg-admin/80 text-white",ghost:"hover:bg-dark-hover text-dark-text"},m={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};return c.jsx("button",{className:Bt(u,h[e],m[n],r),disabled:a,...o,children:t})},uP=({isOpen:t,onClose:e})=>{const[n,r]=C.useState(""),[a,o]=C.useState(!1),[u,h]=C.useState(!1),{success:m,error:p}=Kr(),y=async b=>{b.preventDefault(),o(!0);try{await zE(Aa,n),h(!0),m("Password reset email sent! Check your inbox."),setTimeout(()=>{e(),h(!1),r("")},3e3)}catch(x){console.error("Password reset error:",x),x.code==="auth/user-not-found"?p("No account found with this email address."):x.code==="auth/invalid-email"?p("Invalid email address."):p("Failed to send reset email. Please try again.")}finally{o(!1)}};return t?c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-dark-sidebar rounded-lg shadow-2xl w-full max-w-md p-6 relative",children:[c.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-dark-muted hover:text-dark-text transition-colors",children:c.jsx(Vn,{size:24})}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-dark-text mb-2",children:"Reset Password"}),c.jsx("p",{className:"text-dark-muted text-sm",children:"Enter your email address and we'll send you a link to reset your password."})]}),u?c.jsx("div",{className:"bg-green-500/10 border border-green-500/30 text-green-400 px-4 py-3 rounded-md text-sm text-center",children:" Reset email sent successfully! Check your inbox."}):c.jsxs("form",{onSubmit:y,className:"space-y-4",children:[c.jsx(En,{label:"Email Address",type:"email",placeholder:"your@email.com",value:n,onChange:b=>r(b.target.value),required:!0,autoFocus:!0}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx(ot,{type:"button",variant:"secondary",onClick:e,className:"flex-1",children:"Cancel"}),c.jsx(ot,{type:"submit",variant:"primary",className:"flex-1",disabled:a||!n,children:a?"Sending...":"Send Reset Link"})]})]})]})}):null},dP=({onSwitchToRegister:t,onSwitchToReset:e,onSwitchToSSOTest:n})=>{const{login:r,signInWithGoogle:a}=yn(),[o,u]=C.useState({email:"",password:""}),[h,m]=C.useState(""),[p,y]=C.useState(!1),[b,x]=C.useState(!1),[k,j]=C.useState(!1),R=async U=>{U.preventDefault(),m(""),y(!0);try{await r(o.email,o.password)}catch(F){m(F.message||"Failed to login")}finally{y(!1)}},N=async()=>{m(""),x(!0);try{await a()}catch(U){m(U.message||"Failed to sign in with Google")}finally{x(!1)}};return c.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-dark-bg p-4",children:[c.jsxs("div",{className:"w-full max-w-md bg-dark-sidebar rounded-lg shadow-2xl p-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-dark-text mb-2",children:"Welcome Back!"}),c.jsx("p",{className:"text-dark-muted",children:"Login to Lumo"})]}),c.jsxs("form",{onSubmit:R,className:"space-y-4",children:[c.jsx(En,{label:"Email",type:"email",placeholder:"Enter your email",value:o.email,onChange:U=>u({...o,email:U.target.value}),required:!0}),c.jsxs("div",{children:[c.jsx(En,{label:"Password",type:"password",placeholder:"Enter your password",value:o.password,onChange:U=>u({...o,password:U.target.value}),required:!0}),c.jsx("div",{className:"mt-2 text-right",children:c.jsx("button",{type:"button",onClick:()=>j(!0),className:"text-sm text-brand-primary hover:underline",children:"Forgot Password?"})})]}),h&&c.jsx("div",{className:"bg-admin/10 border border-admin/30 text-admin px-4 py-3 rounded-md text-sm",children:h}),c.jsx(ot,{type:"submit",variant:"primary",className:"w-full",disabled:p,children:p?"Logging in...":"Login"})]}),c.jsxs("div",{className:"mt-6 flex items-center",children:[c.jsx("div",{className:"flex-1 border-t border-dark-border"}),c.jsx("span",{className:"px-4 text-dark-muted text-sm",children:"or"}),c.jsx("div",{className:"flex-1 border-t border-dark-border"})]}),c.jsx("div",{className:"mt-6",children:c.jsxs("button",{type:"button",onClick:N,disabled:b||p,className:"w-full flex items-center justify-center gap-3 bg-white hover:bg-gray-50 text-gray-700 font-medium py-3 px-4 rounded-md border border-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[c.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),b?"Signing in...":"Sign in with Google"]})}),c.jsx("div",{className:"mt-6 text-center",children:c.jsxs("div",{className:"text-dark-muted text-sm",children:["Don't have an account?"," ",c.jsx("button",{onClick:t,className:"text-brand-primary hover:underline",children:"Register"})]})})]}),c.jsx(uP,{isOpen:k,onClose:()=>j(!1)})]})},hP=({onSwitchToLogin:t})=>{const{register:e}=yn(),[n,r]=C.useState({displayName:"",email:"",password:"",confirmPassword:""}),[a,o]=C.useState(""),[u,h]=C.useState(""),[m,p]=C.useState(!1),[y,b]=C.useState([]);C.useEffect(()=>{(async()=>{try{const j=wt(de,"users"),R=await Qa(j),N=[];R.forEach(U=>{const F=U.data().displayName;F&&N.push(F.toLowerCase())}),b(N)}catch(j){console.error("Error loading usernames:",j)}})()},[]),C.useEffect(()=>{const k=n.displayName;if(k){if(k.length<3){h("Username must be at least 3 characters");return}if(!/^[a-zA-Z0-9-_]+$/.test(k)){h("Only letters, numbers, hyphens (-) and underscores (_) allowed");return}const j=k.toLowerCase();y.includes(j)?h("This username is already taken"):h("")}else h("")},[n.displayName,y]);const x=async k=>{if(k.preventDefault(),o(""),u){o(u);return}if(n.password!==n.confirmPassword){o("Passwords do not match");return}if(n.password.length<6){o("Password must be at least 6 characters");return}p(!0);try{await e(n.email,n.password,n.displayName)}catch(j){o(j.message||"Failed to register")}finally{p(!1)}};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-bg p-4",children:c.jsxs("div",{className:"w-full max-w-md bg-dark-sidebar rounded-lg shadow-2xl p-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-dark-text mb-2",children:"Create Account"}),c.jsx("p",{className:"text-dark-muted",children:"Join Lumo"})]}),c.jsxs("form",{onSubmit:x,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx(En,{label:"Display Name",type:"text",placeholder:"Enter your display name",value:n.displayName,onChange:k=>r({...n,displayName:k.target.value}),required:!0}),u&&c.jsx("p",{className:"text-xs text-admin mt-1",children:u}),n.displayName&&!u&&c.jsx("p",{className:"text-xs text-green-500 mt-1",children:" Username available"})]}),c.jsx(En,{label:"Email",type:"email",placeholder:"Enter your email",value:n.email,onChange:k=>r({...n,email:k.target.value}),required:!0}),c.jsx(En,{label:"Password",type:"password",placeholder:"Enter your password",value:n.password,onChange:k=>r({...n,password:k.target.value}),required:!0}),c.jsx(En,{label:"Confirm Password",type:"password",placeholder:"Confirm your password",value:n.confirmPassword,onChange:k=>r({...n,confirmPassword:k.target.value}),required:!0}),a&&c.jsx("div",{className:"bg-admin/10 border border-admin/30 text-admin px-4 py-3 rounded-md text-sm",children:a}),c.jsx(ot,{type:"submit",variant:"primary",className:"w-full",disabled:m||!!u,children:m?"Creating account...":"Register"})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsxs("div",{className:"text-dark-muted text-sm",children:["Already have an account?"," ",c.jsx("button",{onClick:t,className:"text-brand-primary hover:underline",children:"Login"})]})})]})})},fP=({onSwitchToLogin:t})=>{const{resetPassword:e}=yn(),[n,r]=C.useState(""),[a,o]=C.useState(""),[u,h]=C.useState(!1),[m,p]=C.useState(!1),y=async b=>{b.preventDefault(),o(""),h(!1),p(!0);try{await e(n),h(!0)}catch(x){o(x.message||"Failed to send reset email")}finally{p(!1)}};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-bg p-4",children:c.jsxs("div",{className:"w-full max-w-md bg-dark-sidebar rounded-lg shadow-2xl p-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-dark-text mb-2",children:"Reset Password"}),c.jsx("p",{className:"text-dark-muted",children:"Enter your email to receive a reset link"})]}),c.jsxs("form",{onSubmit:y,className:"space-y-4",children:[c.jsx(En,{label:"Email",type:"email",placeholder:"Enter your email",value:n,onChange:b=>r(b.target.value),required:!0}),a&&c.jsx("div",{className:"bg-admin/10 border border-admin/30 text-admin px-4 py-3 rounded-md text-sm",children:a}),u&&c.jsx("div",{className:"bg-green-500/10 border border-green-500/30 text-green-500 px-4 py-3 rounded-md text-sm",children:"Password reset email sent! Check your inbox."}),c.jsx(ot,{type:"submit",variant:"primary",className:"w-full",disabled:m,children:m?"Sending...":"Send Reset Link"})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsx("button",{onClick:t,className:"text-brand-primary hover:underline text-sm",children:"Back to Login"})})]})})},mP=({onBack:t})=>{const{currentUser:e}=yn(),[n,r]=C.useState(!1),[a,o]=C.useState(null),[u,h]=C.useState(null),m="https://lumobuildvercel.vercel.app/api/sso-token",p=async()=>{r(!0),o(null),h(null);try{if(!e)throw new Error("nce Google ile giri yapn!");console.log(" Testing SSO Backend..."),console.log("User:",e.email);const y=await e.getIdToken();console.log(" Google ID Token alnd"),console.log(" Backend'e istek gnderiliyor:",m);const b=await fetch(m,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({googleIdToken:y,email:e.email})});console.log(" Response status:",b.status);const x=await b.json();if(console.log(" Response data:",x),x.success)o({success:!0,customToken:x.customToken,user:x.user,message:" Backend alyor! Custom token baaryla oluturuldu."});else throw new Error(x.message||x.error||"Bilinmeyen hata")}catch(y){console.error(" Test failed:",y),h(y.message)}finally{r(!1)}};return c.jsx("div",{className:"min-h-screen bg-dark-bg p-8",children:c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-dark-text",children:" SSO Backend Test"}),t&&c.jsx("button",{onClick:t,className:"px-4 py-2 bg-dark-sidebar hover:bg-dark-border text-dark-text rounded-md transition-colors",children:" Back to Login"})]}),c.jsxs("div",{className:"bg-dark-sidebar rounded-lg p-6 mb-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-dark-text mb-4",children:"Kullanc Bilgileri"}),e?c.jsxs("div",{className:"space-y-2 text-dark-muted",children:[c.jsx("p",{children:" Giri yapld"}),c.jsxs("p",{children:[c.jsx("strong",{children:"Email:"})," ",e.email]}),c.jsxs("p",{children:[c.jsx("strong",{children:"UID:"})," ",e.uid]})]}):c.jsxs("div",{className:"bg-yellow-900/20 border border-yellow-500/30 rounded p-4",children:[c.jsx("p",{className:"text-yellow-500 mb-3",children:" Giri yapmanz gerekiyor"}),c.jsx("p",{className:"text-dark-muted text-sm mb-3",children:"SSO backend'i test etmek iin nce Google ile giri yapmalsnz."}),t?c.jsx("button",{onClick:t,className:"w-full bg-brand-primary hover:bg-brand-primary/80 text-white font-medium py-2 px-4 rounded-md transition-colors",children:"Login Sayfasna Git"}):c.jsx("p",{className:"text-sm text-dark-muted",children:"Ltfen ana sayfaya gidip Google ile giri yapn."})]})]}),c.jsxs("div",{className:"bg-dark-sidebar rounded-lg p-6 mb-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-dark-text mb-4",children:"Backend Testi"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-dark-muted mb-2",children:"Vercel API URL:"}),c.jsx("input",{type:"text",value:m,readOnly:!0,className:"w-full bg-dark-input text-dark-text px-4 py-2 rounded-md border border-dark-border"}),c.jsx("p",{className:"text-sm text-dark-muted mt-2",children:" Yukardaki URL'i kendi Vercel project URL'iniz ile deitirin"})]}),c.jsx("button",{onClick:p,disabled:!e||n,className:"w-full bg-brand-primary hover:bg-brand-primary/80 text-white font-medium py-3 px-6 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n?c.jsxs("span",{className:"flex items-center justify-center gap-2",children:[c.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Test ediliyor..."]}):" Backend'i Test Et"})]}),a&&c.jsxs("div",{className:"bg-green-900/20 border border-green-500 rounded-lg p-6 mb-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-green-500 mb-4",children:a.message}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-dark-muted mb-1",children:"User Info:"}),c.jsx("pre",{className:"bg-dark-bg p-3 rounded text-sm text-dark-text overflow-x-auto",children:JSON.stringify(a.user,null,2)})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-dark-muted mb-1",children:"Custom Token:"}),c.jsx("pre",{className:"bg-dark-bg p-3 rounded text-sm text-dark-text overflow-x-auto break-all",children:a.customToken})]}),c.jsxs("div",{className:"bg-green-900/30 p-4 rounded",children:[c.jsx("p",{className:"text-green-400 font-medium mb-2",children:" Test Baarl!"}),c.jsxs("ul",{className:"text-sm text-dark-muted space-y-1",children:[c.jsx("li",{children:" Backend API eriilebilir"}),c.jsx("li",{children:" Google ID token doruland"}),c.jsx("li",{children:" Custom token oluturuldu"}),c.jsx("li",{children:" SSO sistemi alyor!"})]})]})]})]}),u&&c.jsxs("div",{className:"bg-red-900/20 border border-red-500 rounded-lg p-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-red-500 mb-4",children:" Test Baarsz"}),c.jsx("p",{className:"text-dark-text mb-4",children:u}),c.jsxs("div",{className:"bg-red-900/30 p-4 rounded",children:[c.jsx("p",{className:"text-red-400 font-medium mb-2",children:"Olas Sorunlar:"}),c.jsxs("ul",{className:"text-sm text-dark-muted space-y-1",children:[c.jsx("li",{children:" Vercel URL yanl olabilir"}),c.jsx("li",{children:" Environment variables eksik olabilir"}),c.jsx("li",{children:" CORS hatas olabilir"}),c.jsx("li",{children:" Backend deploy edilmemi olabilir"})]})]})]}),c.jsxs("div",{className:"bg-dark-sidebar rounded-lg p-6 mt-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-dark-text mb-4",children:" Nasl Test Edilir?"}),c.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-dark-muted",children:[c.jsx("li",{children:"Google ile giri yapn (ana sayfadan)"}),c.jsx("li",{children:"Yukardaki URL'i kendi Vercel project URL'iniz ile deitirin"}),c.jsx("li",{children:`"Backend'i Test Et" butonuna tklayn`}),c.jsx("li",{children:"Sonucu bekleyin"})]}),c.jsxs("div",{className:"mt-4 p-4 bg-dark-bg rounded",children:[c.jsx("p",{className:"text-sm text-dark-muted mb-2",children:c.jsx("strong",{children:"Vercel URL'inizi bulmak iin:"})}),c.jsxs("ol",{className:"text-sm text-dark-muted space-y-1 ml-4",children:[c.jsx("li",{children:"1. Vercel Dashboard'a gidin"}),c.jsx("li",{children:"2. Projenizi sein"}),c.jsx("li",{children:`3. "Visit" butonunun yanndaki URL'i kopyalayn`}),c.jsxs("li",{children:["4. Sonuna ",c.jsx("code",{className:"bg-dark-input px-1 rounded",children:"/api/sso-token"})," ekleyin"]})]})]})]}),c.jsxs("div",{className:"bg-dark-sidebar rounded-lg p-6 mt-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-dark-text mb-4",children:" Debug"}),c.jsx("p",{className:"text-dark-muted mb-2",children:"Detayl loglar iin tarayc console'unu an (F12)"}),c.jsx("p",{className:"text-sm text-dark-muted",children:"Test srasnda tm admlar console'a yazdrlacak."})]})]})})},pP=({onBackToLogin:t})=>{const{currentUser:e}=yn(),[n,r]=C.useState("processing"),[a,o]=C.useState(null);C.useEffect(()=>{const h=new URLSearchParams(window.location.search),m=h.get("sso_token"),p=h.get("sso")||h.get("token"),y=m||p;if(!y){r("error"),o("No token provided in URL");return}if(e){r("success"),setTimeout(()=>window.location.reload(),1e3);return}u(y)},[e]);const u=async h=>{try{r("processing");const p=new URLSearchParams(window.location.search).get("sso_token");let y=h;if(p){console.log(" Exchanging Google ID token for custom token...");const k=await(await fetch("https://lumobuild.vercel.app/api/sso-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({googleIdToken:h})})).json();if(!k.success)throw new Error(k.message||"Failed to exchange token");y=k.customToken,console.log(" Custom token received from backend")}console.log(" Logging in with custom token...");const b=await gj(Aa,y);console.log(" SSO Login successful:",b.user.email),r("success"),setTimeout(()=>{window.location.reload()},1500)}catch(m){console.error(" SSO Login failed:",m),r("error"),m.code==="auth/invalid-custom-token"?o("Invalid or expired token. Please try again."):m.code==="auth/network-request-failed"?o("Network error. Please check your connection."):o(m.message||"Login failed. Please try again.")}};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-bg p-4",children:c.jsx("div",{className:"max-w-md w-full bg-dark-sidebar rounded-lg shadow-2xl p-8",children:c.jsxs("div",{className:"text-center",children:[n==="processing"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-brand-primary mx-auto mb-4"}),c.jsx("h2",{className:"text-2xl font-bold text-dark-text mb-2",children:"Logging you in..."}),c.jsx("p",{className:"text-dark-muted",children:"Please wait while we verify your credentials"})]}),n==="success"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("h2",{className:"text-2xl font-bold text-green-500 mb-2",children:"Welcome to Lumo!"}),c.jsx("p",{className:"text-dark-muted",children:"Redirecting to your dashboard..."})]}),n==="error"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("h2",{className:"text-2xl font-bold text-red-500 mb-2",children:"Login Failed"}),c.jsx("p",{className:"text-dark-text mb-4",children:a}),c.jsx("button",{onClick:()=>navigate("/login"),className:"bg-brand-primary hover:bg-brand-primary/80 text-white font-medium py-2 px-6 rounded-md transition-colors",children:"Go to Login"})]})]})})})},gP=({onSwipeLeft:t,onSwipeRight:e,minSwipeDistance:n=50})=>{const r=C.useRef(null),a=C.useRef(null);return{onTouchStart:m=>{a.current=null,r.current=m.targetTouches[0].clientX},onTouchMove:m=>{a.current=m.targetTouches[0].clientX},onTouchEnd:()=>{if(!r.current||!a.current)return;const m=r.current-a.current,p=m>n,y=m<-n;p&&t&&t(),y&&e&&e()}}};var pc;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(pc||(pc={}));class $0 extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const vP=t=>{var e,n;return t?.androidBridge?"android":!((n=(e=t?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},yP=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},a=()=>e!==null?e.name:vP(t),o=()=>a()!=="web",u=b=>{const x=p.get(b);return!!(x?.platforms.has(a())||h(b))},h=b=>{var x;return(x=n.PluginHeaders)===null||x===void 0?void 0:x.find(k=>k.name===b)},m=b=>t.console.error(b),p=new Map,y=(b,x={})=>{const k=p.get(b);if(k)return console.warn(`Capacitor plugin "${b}" already registered. Cannot register plugins twice.`),k.proxy;const j=a(),R=h(b);let N;const U=async()=>(!N&&j in x?N=typeof x[j]=="function"?N=await x[j]():N=x[j]:e!==null&&!N&&"web"in x&&(N=typeof x.web=="function"?N=await x.web():N=x.web),N),F=(E,A)=>{var P,L;if(R){const z=R?.methods.find(M=>A===M.name);if(z)return z.rtype==="promise"?M=>n.nativePromise(b,A.toString(),M):(M,se)=>n.nativeCallback(b,A.toString(),M,se);if(E)return(P=E[A])===null||P===void 0?void 0:P.bind(E)}else{if(E)return(L=E[A])===null||L===void 0?void 0:L.bind(E);throw new $0(`"${b}" plugin is not implemented on ${j}`,pc.Unimplemented)}},I=E=>{let A;const P=(...L)=>{const z=U().then(M=>{const se=F(M,E);if(se){const ae=se(...L);return A=ae?.remove,ae}else throw new $0(`"${b}.${E}()" is not implemented on ${j}`,pc.Unimplemented)});return E==="addListener"&&(z.remove=async()=>A()),z};return P.toString=()=>`${E.toString()}() { [capacitor code] }`,Object.defineProperty(P,"name",{value:E,writable:!1,configurable:!1}),P},O=I("addListener"),B=I("removeListener"),H=(E,A)=>{const P=O({eventName:E},A),L=async()=>{const M=await P;B({eventName:E,callbackId:M},A)},z=new Promise(M=>P.then(()=>M({remove:L})));return z.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await L()},z},w=new Proxy({},{get(E,A){switch(A){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return R?H:O;case"removeListener":return B;default:return I(A)}}});return r[b]=w,p.set(b,{name:b,proxy:w,platforms:new Set([...Object.keys(x),...R?[j]:[]])}),w};return n.convertFileSrc||(n.convertFileSrc=b=>b),n.getPlatform=a,n.handleError=m,n.isNativePlatform=o,n.isPluginAvailable=u,n.registerPlugin=y,n.Exception=$0,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},bP=t=>t.Capacitor=yP(t),$o=bP(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),dp=$o.registerPlugin;class _1{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const o=this.windowListeners[e];o&&!o.registered&&this.addWindowListener(o),r&&this.sendRetainedArgumentsForEvent(e);const u=async()=>this.removeListener(e,n);return Promise.resolve({remove:u})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const a=this.listeners[e];if(!a){if(r){let o=this.retainedEventArguments[e];o||(o=[]),o.push(n),this.retainedEventArguments[e]=o}return}a.forEach(o=>o(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new $o.Exception(e,pc.Unimplemented)}unavailable(e="not available"){return new $o.Exception(e,pc.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const a=r.indexOf(n);this.listeners[e].splice(a,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const Tw=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),kw=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class xP extends _1{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[a,o]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=kw(a).trim(),o=kw(o).trim(),n[a]=o}),n}async setCookie(e){try{const n=Tw(e.key),r=Tw(e.value),a=`; expires=${(e.expires||"").replace("expires=","")}`,o=(e.path||"/").replace("path=",""),u=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${a}; path=${o}; ${u};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}dp("CapacitorCookies",{web:()=>new xP});const _P=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const a=r.result;e(a.indexOf(",")>=0?a.split(",")[1]:a)},r.onerror=a=>n(a),r.readAsDataURL(t)}),wP=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(a=>a.toLocaleLowerCase()).reduce((a,o,u)=>(a[o]=t[e[u]],a),{})},SP=(t,e=!0)=>t?Object.entries(t).reduce((r,a)=>{const[o,u]=a;let h,m;return Array.isArray(u)?(m="",u.forEach(p=>{h=e?encodeURIComponent(p):p,m+=`${o}=${h}&`}),m.slice(0,-1)):(h=e?encodeURIComponent(u):u,m=`${o}=${h}`),`${r}&${m}`},"").substr(1):null,EP=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),a=wP(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(a.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[u,h]of Object.entries(t.data||{}))o.set(u,h);n.body=o.toString()}else if(a.includes("multipart/form-data")||t.data instanceof FormData){const o=new FormData;if(t.data instanceof FormData)t.data.forEach((h,m)=>{o.append(m,h)});else for(const h of Object.keys(t.data))o.append(h,t.data[h]);n.body=o;const u=new Headers(n.headers);u.delete("content-type"),n.headers=u}else(a.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class CP extends _1{async request(e){const n=EP(e,e.webFetchExtra),r=SP(e.params,e.shouldEncodeUrlParams),a=r?`${e.url}?${r}`:e.url,o=await fetch(a,n),u=o.headers.get("content-type")||"";let{responseType:h="text"}=o.ok?e:{};u.includes("application/json")&&(h="json");let m,p;switch(h){case"arraybuffer":case"blob":p=await o.blob(),m=await _P(p);break;case"json":m=await o.json();break;case"document":case"text":default:m=await o.text()}const y={};return o.headers.forEach((b,x)=>{y[x]=b}),{data:m,headers:y,status:o.status,url:o.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}dp("CapacitorHttp",{web:()=>new CP});var Nw;(function(t){t.Dark="DARK",t.Light="LIGHT",t.Default="DEFAULT"})(Nw||(Nw={}));var Aw;(function(t){t.StatusBar="StatusBar",t.NavigationBar="NavigationBar"})(Aw||(Aw={}));class TP extends _1{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}dp("SystemBars",{web:()=>new TP});const kP=()=>{const[t,e]=C.useState({camera:"unknown",microphone:"unknown",notifications:"unknown"});return C.useEffect(()=>{if($o.getPlatform()!=="android")return;const r=setTimeout(async()=>{console.log("[AndroidPermissions] Requesting permissions on Android startup...");try{(await navigator.mediaDevices.getUserMedia({video:!0,audio:!0})).getTracks().forEach(o=>o.stop()),e(o=>({...o,camera:"granted",microphone:"granted"})),console.log("[AndroidPermissions] Camera and microphone permissions granted")}catch(a){console.log("[AndroidPermissions] Camera/microphone permission result:",a.name),a.name==="NotAllowedError"&&e(o=>({...o,camera:"denied",microphone:"denied"}))}if("Notification"in window&&Notification.permission==="default")try{const a=await Notification.requestPermission();e(o=>({...o,notifications:a})),console.log("[AndroidPermissions] Notification permission:",a)}catch(a){console.log("[AndroidPermissions] Notification permission error:",a)}},1e3);return()=>clearTimeout(r)},[]),t};function NP(t){return De({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111.1 8 0 119.1 0 256s111.1 248 248 248 248-111.1 248-248S384.9 8 248 8zm100.7 364.9c-4.2 0-6.8-1.3-10.7-3.6-62.4-37.6-135-39.2-206.7-24.5-3.9 1-9 2.6-11.9 2.6-9.7 0-15.8-7.7-15.8-15.8 0-10.3 6.1-15.2 13.6-16.8 81.9-18.1 165.6-16.5 237 26.2 6.1 3.9 9.7 7.4 9.7 16.5s-7.1 15.4-15.2 15.4zm26.9-65.6c-5.2 0-8.7-2.3-12.3-4.2-62.5-37-155.7-51.9-238.6-29.4-4.8 1.3-7.4 2.6-11.9 2.6-10.7 0-19.4-8.7-19.4-19.4s5.2-17.8 15.5-20.7c27.8-7.8 56.2-13.6 97.8-13.6 64.9 0 127.6 16.1 177 45.5 8.1 4.8 11.3 11 11.3 19.7-.1 10.8-8.5 19.5-19.4 19.5zm31-76.2c-5.2 0-8.4-1.3-12.9-3.9-71.2-42.5-198.5-52.7-280.9-29.7-3.6 1-8.1 2.6-12.9 2.6-13.2 0-23.3-10.3-23.3-23.6 0-13.6 8.4-21.3 17.4-23.9 35.2-10.3 74.6-15.2 117.5-15.2 73 0 149.5 15.2 205.4 47.8 7.8 4.5 12.9 10.7 12.9 22.6 0 13.6-11 23.3-23.2 23.3z"},child:[]}]})(t)}function Rw(t){return De({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(t)}function AP(t){return De({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(t)}function jw(t){return De({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(t)}function RP(t){return De({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function w1(t){return De({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"},child:[]}]})(t)}function tk(t){return De({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function hp(t){return De({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M440.667 182.109l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l14.623-81.891C377.123 38.754 371.468 32 363.997 32h-40.632a12 12 0 0 0-11.813 9.891L296.175 128H197.54l14.623-81.891C213.477 38.754 207.822 32 200.35 32h-40.632a12 12 0 0 0-11.813 9.891L132.528 128H53.432a12 12 0 0 0-11.813 9.891l-7.143 40C33.163 185.246 38.818 192 46.289 192h74.81L98.242 320H19.146a12 12 0 0 0-11.813 9.891l-7.143 40C-1.123 377.246 4.532 384 12.003 384h74.81L72.19 465.891C70.877 473.246 76.532 480 84.003 480h40.632a12 12 0 0 0 11.813-9.891L151.826 384h98.634l-14.623 81.891C234.523 473.246 240.178 480 247.65 480h40.632a12 12 0 0 0 11.813-9.891L315.472 384h79.096a12 12 0 0 0 11.813-9.891l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l22.857-128h79.096a12 12 0 0 0 11.813-9.891zM261.889 320h-98.634l22.857-128h98.634l-22.857 128z"},child:[]}]})(t)}function jP(t){return De({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.52 32 0 146.496 0 288v48a32 32 0 0 0 17.689 28.622l14.383 7.191C34.083 431.903 83.421 480 144 480h24c13.255 0 24-10.745 24-24V280c0-13.255-10.745-24-24-24h-24c-31.342 0-59.671 12.879-80 33.627V288c0-105.869 86.131-192 192-192s192 86.131 192 192v1.627C427.671 268.879 399.342 256 368 256h-24c-13.255 0-24 10.745-24 24v176c0 13.255 10.745 24 24 24h24c60.579 0 109.917-48.098 111.928-108.187l14.382-7.191A32 32 0 0 0 512 336v-48c0-141.479-114.496-256-256-256z"},child:[]}]})(t)}function S1(t){return De({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M633.82 458.1l-157.8-121.96C488.61 312.13 496 285.01 496 256v-48c0-8.84-7.16-16-16-16h-16c-8.84 0-16 7.16-16 16v48c0 17.92-3.96 34.8-10.72 50.2l-26.55-20.52c3.1-9.4 5.28-19.22 5.28-29.67V96c0-53.02-42.98-96-96-96s-96 42.98-96 96v45.36L45.47 3.37C38.49-2.05 28.43-.8 23.01 6.18L3.37 31.45C-2.05 38.42-.8 48.47 6.18 53.9l588.36 454.73c6.98 5.43 17.03 4.17 22.46-2.81l19.64-25.27c5.41-6.97 4.16-17.02-2.82-22.45zM400 464h-56v-33.77c11.66-1.6 22.85-4.54 33.67-8.31l-50.11-38.73c-6.71.4-13.41.87-20.35.2-55.85-5.45-98.74-48.63-111.18-101.85L144 241.31v6.85c0 89.64 63.97 169.55 152 181.69V464h-56c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function IP(t){return De({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M176 352c53.02 0 96-42.98 96-96V96c0-53.02-42.98-96-96-96S80 42.98 80 96v160c0 53.02 42.98 96 96 96zm160-160h-16c-8.84 0-16 7.16-16 16v48c0 74.8-64.49 134.82-140.79 127.38C96.71 376.89 48 317.11 48 250.3V208c0-8.84-7.16-16-16-16H16c-8.84 0-16 7.16-16 16v40.16c0 89.64 63.97 169.55 152 181.69V464H96c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16h-56v-33.77C285.71 418.47 352 344.9 352 256v-48c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function DP(t){return De({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M268.2 381.4l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48c-10.7 4.6-16.5 16.1-13.9 27.5l24 104c2.5 10.8 12.1 18.6 23.4 18.6 100.7 0 193.7-32.4 269.7-86.9l-80-61.8c-10.9 6.5-22.1 12.7-33.6 18.1zm365.6 76.7L475.1 335.5C537.9 256.4 576 156.9 576 48c0-11.2-7.7-20.9-18.6-23.4l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-12.2 26.1-27.9 50.3-46 72.8L45.5 3.4C38.5-2 28.5-.8 23 6.2L3.4 31.4c-5.4 7-4.2 17 2.8 22.4l588.4 454.7c7 5.4 17 4.2 22.5-2.8l19.6-25.3c5.4-6.8 4.1-16.9-2.9-22.3z"},child:[]}]})(t)}function Iw(t){return De({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(t)}function MP(t){return De({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function PP(t){return De({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M633.8 458.1L362.3 248.3C412.1 230.7 448 183.8 448 128 448 57.3 390.7 0 320 0c-67.1 0-121.5 51.8-126.9 117.4L45.5 3.4C38.5-2 28.5-.8 23 6.2L3.4 31.4c-5.4 7-4.2 17 2.8 22.4l588.4 454.7c7 5.4 17 4.2 22.5-2.8l19.6-25.3c5.4-6.8 4.1-16.9-2.9-22.3zM96 422.4V464c0 26.5 21.5 48 48 48h350.2L207.4 290.3C144.2 301.3 96 356 96 422.4z"},child:[]}]})(t)}function OP(t){return De({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M633.8 458.1l-55-42.5c15.4-1.4 29.2-13.7 29.2-31.1v-257c0-25.5-29.1-40.4-50.4-25.8L448 177.3v137.2l-32-24.7v-178c0-26.4-21.4-47.8-47.8-47.8H123.9L45.5 3.4C38.5-2 28.5-.8 23 6.2L3.4 31.4c-5.4 7-4.2 17 2.8 22.4L42.7 82 416 370.6l178.5 138c7 5.4 17 4.2 22.5-2.8l19.6-25.3c5.5-6.9 4.2-17-2.8-22.4zM32 400.2c0 26.4 21.4 47.8 47.8 47.8h288.4c11.2 0 21.4-4 29.6-10.5L32 154.7v245.5z"},child:[]}]})(t)}function nk(t){return De({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M336.2 64H47.8C21.4 64 0 85.4 0 111.8v288.4C0 426.6 21.4 448 47.8 448h288.4c26.4 0 47.8-21.4 47.8-47.8V111.8c0-26.4-21.4-47.8-47.8-47.8zm189.4 37.7L416 177.3v157.4l109.6 75.5c21.2 14.6 50.4-.3 50.4-25.8V127.5c0-25.4-29.1-40.4-50.4-25.8z"},child:[]}]})(t)}function rk(t){return De({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zm233.32-51.08c-11.17-7.33-26.18-4.24-33.51 6.95-7.34 11.17-4.22 26.18 6.95 33.51 66.27 43.49 105.82 116.6 105.82 195.58 0 78.98-39.55 152.09-105.82 195.58-11.17 7.32-14.29 22.34-6.95 33.5 7.04 10.71 21.93 14.56 33.51 6.95C528.27 439.58 576 351.33 576 256S528.27 72.43 448.35 19.97zM480 256c0-63.53-32.06-121.94-85.77-156.24-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36 6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.54 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z"},child:[]}]})(t)}const Es=({isOpen:t,onClose:e,title:n,children:r,size:a="md",showCloseButton:o=!0})=>{if(C.useEffect(()=>{const h=m=>{m.key==="Escape"&&t&&e()};return t?(document.body.style.overflow="hidden",document.addEventListener("keydown",h)):document.body.style.overflow="unset",()=>{document.body.style.overflow="unset",document.removeEventListener("keydown",h)}},[t,e]),!t)return null;const u={sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl"};return c.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center",children:[c.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:e}),c.jsxs("div",{className:Bt("relative bg-dark-sidebar rounded-lg shadow-2xl","w-full mx-4 max-h-[90vh] overflow-y-auto",u[a]),children:[(n||o)&&c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-dark-hover",children:[c.jsx("h2",{className:"text-xl font-semibold text-dark-text",children:n}),o&&c.jsx("button",{onClick:e,className:"text-dark-muted hover:text-dark-text transition-colors",children:c.jsx(Vn,{size:24})})]}),c.jsx("div",{className:"p-6",children:r})]})]})},E1={premium:{id:"premium",label:"Premium Member",description:"Premium Member",icon:Fo,color:"#F47FFF"},admin:{id:"admin",label:"Admin",description:"Server Administrator",icon:MT,color:"#f23f42"},verified:{id:"verified",label:"Verified",description:"Verified Member",icon:VM,color:"#3ba55c"},developer:{id:"developer",label:"Developer",description:"App Developer",icon:DM,color:"#5865F2"}},LP=t=>E1[t];class VP{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const n of this._parts)e.push(n);return zP(e).buffer}}function zP(t){let e=0;for(const a of t)e+=a.byteLength;const n=new Uint8Array(e);let r=0;for(const a of t){const o=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);n.set(o,r),r+=a.byteLength}return n}function sk(t){return new UP(t).unpack()}function ik(t){const e=new BP,n=e.pack(t);return n instanceof Promise?n.then(()=>e.getBuffer()):e.getBuffer()}class UP{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let n;if((n=e^160)<=15)return this.unpack_raw(n);if((n=e^176)<=15)return this.unpack_string(n);if((n=e^144)<=15)return this.unpack_array(n);if((n=e^128)<=15)return this.unpack_map(n);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),n=(e[0]&255)*256+(e[1]&255);return this.index+=2,n}unpack_uint32(){const e=this.read(4),n=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,n}unpack_uint64(){const e=this.read(8),n=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,n}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,n}unpack_string(e){const n=this.read(e);let r=0,a="",o,u;for(;r<e;)o=n[r],o<160?(u=o,r++):(o^192)<32?(u=(o&31)<<6|n[r+1]&63,r+=2):(o^224)<16?(u=(o&15)<<12|(n[r+1]&63)<<6|n[r+2]&63,r+=3):(u=(o&7)<<18|(n[r+1]&63)<<12|(n[r+2]&63)<<6|n[r+3]&63,r+=4),a+=String.fromCodePoint(u);return this.index+=e,a}unpack_array(e){const n=new Array(e);for(let r=0;r<e;r++)n[r]=this.unpack();return n}unpack_map(e){const n={};for(let r=0;r<e;r++){const a=this.unpack();n[a]=this.unpack()}return n}unpack_float(){const e=this.unpack_uint32(),n=e>>31,r=(e>>23&255)-127,a=e&8388607|8388608;return(n===0?1:-1)*a*2**(r-23)}unpack_double(){const e=this.unpack_uint32(),n=this.unpack_uint32(),r=e>>31,a=(e>>20&2047)-1023,u=(e&1048575|1048576)*2**(a-20)+n*2**(a-52);return(r===0?1:-1)*u}read(e){const n=this.index;if(n+e<=this.length)return this.dataView.subarray(n,n+e);throw new Error("BinaryPackFailure: read index out of range")}}class BP{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const n=e.constructor;if(e instanceof Array){const r=this.pack_array(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const r=e;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const r=this.pack_object(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const n=e.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const n=this._textEncoder.encode(e),r=n.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(e){const n=e.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const r=a=>{if(a<n){const o=this.pack(e[a]);return o instanceof Promise?o.then(()=>r(a+1)):r(a+1)}};return r(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let n=0;e<0&&(n=1,e=-e);const r=Math.floor(Math.log(e)/Math.LN2),a=e/2**r-1,o=Math.floor(a*2**52),u=2**32,h=n<<31|r+1023<<20|o/u&1048575,m=o%u;this._bufferBuilder.append(203),this.pack_int32(h),this.pack_int32(m)}pack_object(e){const n=Object.keys(e),r=n.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const a=o=>{if(o<n.length){const u=n[o];if(e.hasOwnProperty(u)){this.pack(u);const h=this.pack(e[u]);if(h instanceof Promise)return h.then(()=>a(o+1))}return a(o+1)}};return a(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const n=e&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(e){const n=e/4294967296,r=e%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const n=Math.floor(e/4294967296),r=e%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new VP,this._textEncoder=new TextEncoder}}let ak=!0,ok=!0;function Ku(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseFloat(r[n],10)}function Zo(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,a=r.addEventListener;r.addEventListener=function(u,h){if(u!==e)return a.apply(this,arguments);const m=p=>{const y=n(p);y&&(h.handleEvent?h.handleEvent(y):h(y))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(h,m),a.apply(this,[u,m])};const o=r.removeEventListener;r.removeEventListener=function(u,h){if(u!==e||!this._eventMap||!this._eventMap[e])return o.apply(this,arguments);if(!this._eventMap[e].has(h))return o.apply(this,arguments);const m=this._eventMap[e].get(h);return this._eventMap[e].delete(h),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[u,m])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(u){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),u&&this.addEventListener(e,this["_on"+e]=u)},enumerable:!0,configurable:!0})}function FP(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(ak=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function HP(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(ok=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function lk(){if(typeof window=="object"){if(ak)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function C1(t,e){ok&&console.warn(t+" is deprecated, please use "+e+" instead.")}function $P(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(a=>a.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=parseInt(Ku(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(Ku(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(Ku(n.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=Ku(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function Dw(t){return Object.prototype.toString.call(t)==="[object Object]"}function ck(t){return Dw(t)?Object.keys(t).reduce(function(e,n){const r=Dw(t[n]),a=r?ck(t[n]):t[n],o=r&&!Object.keys(a).length;return a===void 0||o?e:Object.assign(e,{[n]:a})},{}):t}function Fv(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?Fv(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(a=>{Fv(t,t.get(a),n)})}))}function Mw(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",a=new Map;if(e===null)return a;const o=[];return t.forEach(u=>{u.type==="track"&&u.trackIdentifier===e.id&&o.push(u)}),o.forEach(u=>{t.forEach(h=>{h.type===r&&h.trackId===u.id&&Fv(t,h,a)})}),a}const Pw=lk;function uk(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(h){if(typeof h!="object"||h.mandatory||h.optional)return h;const m={};return Object.keys(h).forEach(p=>{if(p==="require"||p==="advanced"||p==="mediaSource")return;const y=typeof h[p]=="object"?h[p]:{ideal:h[p]};y.exact!==void 0&&typeof y.exact=="number"&&(y.min=y.max=y.exact);const b=function(x,k){return x?x+k.charAt(0).toUpperCase()+k.slice(1):k==="deviceId"?"sourceId":k};if(y.ideal!==void 0){m.optional=m.optional||[];let x={};typeof y.ideal=="number"?(x[b("min",p)]=y.ideal,m.optional.push(x),x={},x[b("max",p)]=y.ideal,m.optional.push(x)):(x[b("",p)]=y.ideal,m.optional.push(x))}y.exact!==void 0&&typeof y.exact!="number"?(m.mandatory=m.mandatory||{},m.mandatory[b("",p)]=y.exact):["min","max"].forEach(x=>{y[x]!==void 0&&(m.mandatory=m.mandatory||{},m.mandatory[b(x,p)]=y[x])})}),h.advanced&&(m.optional=(m.optional||[]).concat(h.advanced)),m},a=function(h,m){if(e.version>=61)return m(h);if(h=JSON.parse(JSON.stringify(h)),h&&typeof h.audio=="object"){const p=function(y,b,x){b in y&&!(x in y)&&(y[x]=y[b],delete y[b])};h=JSON.parse(JSON.stringify(h)),p(h.audio,"autoGainControl","googAutoGainControl"),p(h.audio,"noiseSuppression","googNoiseSuppression"),h.audio=r(h.audio)}if(h&&typeof h.video=="object"){let p=h.video.facingMode;p=p&&(typeof p=="object"?p:{ideal:p});const y=e.version<66;if(p&&(p.exact==="user"||p.exact==="environment"||p.ideal==="user"||p.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!y)){delete h.video.facingMode;let b;if(p.exact==="environment"||p.ideal==="environment"?b=["back","rear"]:(p.exact==="user"||p.ideal==="user")&&(b=["front"]),b)return n.mediaDevices.enumerateDevices().then(x=>{x=x.filter(j=>j.kind==="videoinput");let k=x.find(j=>b.some(R=>j.label.toLowerCase().includes(R)));return!k&&x.length&&b.includes("back")&&(k=x[x.length-1]),k&&(h.video.deviceId=p.exact?{exact:k.deviceId}:{ideal:k.deviceId}),h.video=r(h.video),Pw("chrome: "+JSON.stringify(h)),m(h)})}h.video=r(h.video)}return Pw("chrome: "+JSON.stringify(h)),m(h)},o=function(h){return e.version>=64?h:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[h.name]||h.name,message:h.message,constraint:h.constraint||h.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},u=function(h,m,p){a(h,y=>{n.webkitGetUserMedia(y,m,b=>{p&&p(o(b))})})};if(n.getUserMedia=u.bind(n),n.mediaDevices.getUserMedia){const h=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(m){return a(m,p=>h(p).then(y=>{if(p.audio&&!y.getAudioTracks().length||p.video&&!y.getVideoTracks().length)throw y.getTracks().forEach(b=>{b.stop()}),new DOMException("","NotFoundError");return y},y=>Promise.reject(o(y))))}}}function dk(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function hk(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",a=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(h=>h.track&&h.track.id===a.track.id):o={track:a.track};const u=new Event("track");u.track=a.track,u.receiver=o,u.transceiver={receiver:o},u.streams=[r.stream],this.dispatchEvent(u)}),r.stream.getTracks().forEach(a=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(h=>h.track&&h.track.id===a.id):o={track:a};const u=new Event("track");u.track=a,u.receiver=o,u.transceiver={receiver:o},u.streams=[r.stream],this.dispatchEvent(u)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Zo(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function fk(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(a,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=a.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:a}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const a=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(h,m){let p=a.apply(this,arguments);return p||(p=e(this,h),this._senders.push(p)),p};const o=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(h){o.apply(this,arguments);const m=this._senders.indexOf(h);m!==-1&&this._senders.splice(m,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],n.apply(this,[o]),o.getTracks().forEach(u=>{this._senders.push(e(this,u))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],r.apply(this,[o]),o.getTracks().forEach(u=>{const h=this._senders.find(m=>m.track===u);h&&this._senders.splice(this._senders.indexOf(h),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(a=>a._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function mk(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const o=n.apply(this,[]);return o.forEach(u=>u._pc=this),o});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const o=r.apply(this,arguments);return o._pc=this,o}),t.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(u=>Mw(u,o.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const a=n.apply(this,[]);return a.forEach(o=>o._pc=this),a}),Zo(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const a=this;return this._pc.getStats().then(o=>Mw(o,a.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let a,o,u;return this.getSenders().forEach(h=>{h.track===r&&(a?u=!0:a=h)}),this.getReceivers().forEach(h=>(h.track===r&&(o?u=!0:o=h),h.track===r)),u||a&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):a?a.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function pk(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(u=>this._shimmedLocalStreams[u][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(u,h){if(!h)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const m=e.apply(this,arguments);return this._shimmedLocalStreams[h.id]?this._shimmedLocalStreams[h.id].indexOf(m)===-1&&this._shimmedLocalStreams[h.id].push(m):this._shimmedLocalStreams[h.id]=[h,m],m};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(u){this._shimmedLocalStreams=this._shimmedLocalStreams||{},u.getTracks().forEach(p=>{if(this.getSenders().find(b=>b.track===p))throw new DOMException("Track already exists.","InvalidAccessError")});const h=this.getSenders();n.apply(this,arguments);const m=this.getSenders().filter(p=>h.indexOf(p)===-1);this._shimmedLocalStreams[u.id]=[u].concat(m)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[u.id],r.apply(this,arguments)};const a=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},u&&Object.keys(this._shimmedLocalStreams).forEach(h=>{const m=this._shimmedLocalStreams[h].indexOf(u);m!==-1&&this._shimmedLocalStreams[h].splice(m,1),this._shimmedLocalStreams[h].length===1&&delete this._shimmedLocalStreams[h]}),a.apply(this,arguments)}}function gk(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return pk(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const y=n.apply(this);return this._reverseStreams=this._reverseStreams||{},y.map(b=>this._reverseStreams[b.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(y){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},y.getTracks().forEach(b=>{if(this.getSenders().find(k=>k.track===b))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[y.id]){const b=new t.MediaStream(y.getTracks());this._streams[y.id]=b,this._reverseStreams[b.id]=y,y=b}r.apply(this,[y])};const a=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(y){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},a.apply(this,[this._streams[y.id]||y]),delete this._reverseStreams[this._streams[y.id]?this._streams[y.id].id:y.id],delete this._streams[y.id]},t.RTCPeerConnection.prototype.addTrack=function(y,b){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const x=[].slice.call(arguments,1);if(x.length!==1||!x[0].getTracks().find(R=>R===y))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(R=>R.track===y))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const j=this._streams[b.id];if(j)j.addTrack(y),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const R=new t.MediaStream([y]);this._streams[b.id]=R,this._reverseStreams[R.id]=b,this.addStream(R)}return this.getSenders().find(R=>R.track===y)};function o(p,y){let b=y.sdp;return Object.keys(p._reverseStreams||[]).forEach(x=>{const k=p._reverseStreams[x],j=p._streams[k.id];b=b.replace(new RegExp(j.id,"g"),k.id)}),new RTCSessionDescription({type:y.type,sdp:b})}function u(p,y){let b=y.sdp;return Object.keys(p._reverseStreams||[]).forEach(x=>{const k=p._reverseStreams[x],j=p._streams[k.id];b=b.replace(new RegExp(k.id,"g"),j.id)}),new RTCSessionDescription({type:y.type,sdp:b})}["createOffer","createAnswer"].forEach(function(p){const y=t.RTCPeerConnection.prototype[p],b={[p](){const x=arguments;return arguments.length&&typeof arguments[0]=="function"?y.apply(this,[j=>{const R=o(this,j);x[0].apply(null,[R])},j=>{x[1]&&x[1].apply(null,j)},arguments[2]]):y.apply(this,arguments).then(j=>o(this,j))}};t.RTCPeerConnection.prototype[p]=b[p]});const h=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?h.apply(this,arguments):(arguments[0]=u(this,arguments[0]),h.apply(this,arguments))};const m=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const p=m.get.apply(this);return p.type===""?p:o(this,p)}}),t.RTCPeerConnection.prototype.removeTrack=function(y){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!y._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(y._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let x;Object.keys(this._streams).forEach(k=>{this._streams[k].getTracks().find(R=>y.track===R)&&(x=this._streams[k])}),x&&(x.getTracks().length===1?this.removeStream(this._reverseStreams[x.id]):x.removeTrack(y.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Hv(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],a={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=a[n]})}function vk(t,e){Zo(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const Ow=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:vk,shimAddTrackRemoveTrack:gk,shimAddTrackRemoveTrackWithNative:pk,shimGetSendersWithDtmf:fk,shimGetUserMedia:uk,shimMediaStream:dk,shimOnTrack:hk,shimPeerConnection:Hv,shimSenderReceiverGetStats:mk},Symbol.toStringTag,{value:"Module"}));function yk(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(a,o,u){C1("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(a).then(o,u)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const a=function(u,h,m){h in u&&!(m in u)&&(u[m]=u[h],delete u[h])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(u){return typeof u=="object"&&typeof u.audio=="object"&&(u=JSON.parse(JSON.stringify(u)),a(u.audio,"autoGainControl","mozAutoGainControl"),a(u.audio,"noiseSuppression","mozNoiseSuppression")),o(u)},r&&r.prototype.getSettings){const u=r.prototype.getSettings;r.prototype.getSettings=function(){const h=u.apply(this,arguments);return a(h,"mozAutoGainControl","autoGainControl"),a(h,"mozNoiseSuppression","noiseSuppression"),h}}if(r&&r.prototype.applyConstraints){const u=r.prototype.applyConstraints;r.prototype.applyConstraints=function(h){return this.kind==="audio"&&typeof h=="object"&&(h=JSON.parse(JSON.stringify(h)),a(h,"autoGainControl","mozAutoGainControl"),a(h,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[h])}}}}function qP(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const a=new DOMException("getDisplayMedia without video constraints is undefined");return a.name="NotFoundError",a.code=8,Promise.reject(a)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function bk(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function $v(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(a){const o=t.RTCPeerConnection.prototype[a],u={[a](){return arguments[0]=new(a==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};t.RTCPeerConnection.prototype[a]=u[a]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[o,u,h]=arguments;return r.apply(this,[o||null]).then(m=>{if(e.version<53&&!u)try{m.forEach(p=>{p.type=n[p.type]||p.type})}catch(p){if(p.name!=="TypeError")throw p;m.forEach((y,b)=>{m.set(b,Object.assign({},y,{type:n[y.type]||y.type}))})}return m}).then(u,h)}}function xk(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const a=e.apply(this,[]);return a.forEach(o=>o._pc=this),a});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const a=n.apply(this,arguments);return a._pc=this,a}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function _k(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(a=>a._pc=this),r}),Zo(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function wk(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){C1("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function Sk(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function Ek(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const a=r.length>0;a&&r.forEach(u=>{if("rid"in u&&!/^[a-z0-9]{0,16}$/i.test(u.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in u&&!(parseFloat(u.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in u&&!(parseFloat(u.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=e.apply(this,arguments);if(a){const{sender:u}=o,h=u.getParameters();(!("encodings"in h)||h.encodings.length===1&&Object.keys(h.encodings[0]).length===0)&&(h.encodings=r,u.sendEncodings=r,this.setParametersPromises.push(u.setParameters(h).then(()=>{delete u.sendEncodings}).catch(()=>{delete u.sendEncodings})))}return o})}function Ck(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function Tk(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function kk(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const Lw=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:Ek,shimCreateAnswer:kk,shimCreateOffer:Tk,shimGetDisplayMedia:qP,shimGetParameters:Ck,shimGetUserMedia:yk,shimOnTrack:bk,shimPeerConnection:$v,shimRTCDataChannel:Sk,shimReceiverGetStats:_k,shimRemoveStream:wk,shimSenderGetStats:xk},Symbol.toStringTag,{value:"Module"}));function Nk(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(a=>e.call(this,a,r)),r.getVideoTracks().forEach(a=>e.call(this,a,r))},t.RTCPeerConnection.prototype.addTrack=function(r,...a){return a&&a.forEach(o=>{this._localStreams?this._localStreams.includes(o)||this._localStreams.push(o):this._localStreams=[o]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const a=n.getTracks();this.getSenders().forEach(o=>{a.includes(o.track)&&this.removeTrack(o)})})}}function Ak(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(a=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(a))return;this._remoteStreams.push(a);const o=new Event("addstream");o.stream=a,this.dispatchEvent(o)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(a){a.streams.forEach(o=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(o)>=0)return;r._remoteStreams.push(o);const u=new Event("addstream");u.stream=o,r.dispatchEvent(u)})}),e.apply(r,arguments)}}}function Rk(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,a=e.setLocalDescription,o=e.setRemoteDescription,u=e.addIceCandidate;e.createOffer=function(p,y){const b=arguments.length>=2?arguments[2]:arguments[0],x=n.apply(this,[b]);return y?(x.then(p,y),Promise.resolve()):x},e.createAnswer=function(p,y){const b=arguments.length>=2?arguments[2]:arguments[0],x=r.apply(this,[b]);return y?(x.then(p,y),Promise.resolve()):x};let h=function(m,p,y){const b=a.apply(this,[m]);return y?(b.then(p,y),Promise.resolve()):b};e.setLocalDescription=h,h=function(m,p,y){const b=o.apply(this,[m]);return y?(b.then(p,y),Promise.resolve()):b},e.setRemoteDescription=h,h=function(m,p,y){const b=u.apply(this,[m]);return y?(b.then(p,y),Promise.resolve()):b},e.addIceCandidate=h}function jk(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=a=>r(Ik(a))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,a,o){e.mediaDevices.getUserMedia(r).then(a,o)}).bind(e))}function Ik(t){return t&&t.video!==void 0?Object.assign({},t,{video:ck(t.video)}):t}function Dk(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,a){if(r&&r.iceServers){const o=[];for(let u=0;u<r.iceServers.length;u++){let h=r.iceServers[u];h.urls===void 0&&h.url?(C1("RTCIceServer.url","RTCIceServer.urls"),h=JSON.parse(JSON.stringify(h)),h.urls=h.url,delete h.url,o.push(h)):o.push(r.iceServers[u])}r.iceServers=o}return new e(r,a)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function Mk(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Pk(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const a=this.getTransceivers().find(u=>u.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):r.offerToReceiveAudio===!0&&!a&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const o=this.getTransceivers().find(u=>u.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):r.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function Ok(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const Vw=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:Ok,shimCallbacksAPI:Rk,shimConstraints:Ik,shimCreateOfferLegacy:Pk,shimGetUserMedia:jk,shimLocalStreamsAPI:Nk,shimRTCIceServerUrls:Dk,shimRemoteStreamsAPI:Ak,shimTrackEventTransceiver:Mk},Symbol.toStringTag,{value:"Module"}));var q0={exports:{}},zw;function GP(){return zw||(zw=1,(function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(n){return n.split(`
m=`).map((a,o)=>(o>0?"m="+a:a).trim()+`\r
`)},e.getDescription=function(n){const r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){const r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(a=>a.indexOf(r)===0)},e.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const a={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let o=8;o<r.length;o+=2)switch(r[o]){case"raddr":a.relatedAddress=r[o+1];break;case"rport":a.relatedPort=parseInt(r[o+1],10);break;case"tcptype":a.tcpType=r[o+1];break;case"ufrag":a.ufrag=r[o+1],a.usernameFragment=r[o+1];break;default:a[r[o]]===void 0&&(a[r[o]]=r[o+1]);break}return a},e.writeCandidate=function(n){const r=[];r.push(n.foundation);const a=n.component;a==="rtp"?r.push(1):a==="rtcp"?r.push(2):r.push(a),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const o=n.type;return r.push("typ"),r.push(o),o!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let r=n.substring(9).split(" ");const a={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),a.name=r[0],a.clockRate=parseInt(r[1],10),a.channels=r.length===3?parseInt(r[2],10):1,a.numChannels=a.channels,a},e.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const a=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(a!==1?"/"+a:"")+`\r
`},e.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const r={};let a;const o=n.substring(n.indexOf(" ")+1).split(";");for(let u=0;u<o.length;u++)a=o[u].trim().split("="),r[a[0].trim()]=a[1];return r},e.writeFmtp=function(n){let r="",a=n.payloadType;if(n.preferredPayloadType!==void 0&&(a=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const o=[];Object.keys(n.parameters).forEach(u=>{n.parameters[u]!==void 0?o.push(u+"="+n.parameters[u]):o.push(u)}),r+="a=fmtp:"+a+" "+o.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){let r="",a=n.payloadType;return n.preferredPayloadType!==void 0&&(a=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(o=>{r+="a=rtcp-fb:"+a+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){const r=n.indexOf(" "),a={ssrc:parseInt(n.substring(7,r),10)},o=n.indexOf(":",r);return o>-1?(a.attribute=n.substring(r+1,o),a.value=n.substring(o+1)):a.attribute=n.substring(r+1),a},e.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(a=>parseInt(a,10))}},e.getMid=function(n){const r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:e.matchPrefix(n+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){let a="a=setup:"+r+`\r
`;return n.fingerprints.forEach(o=>{a+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),a},e.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){return e.matchPrefix(n+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,r){const a=e.matchPrefix(n+r,"a=ice-ufrag:")[0],o=e.matchPrefix(n+r,"a=ice-pwd:")[0];return a&&o?{usernameFragment:a.substring(12),password:o.substring(10)}:null},e.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},o=e.splitLines(n)[0].split(" ");r.profile=o[2];for(let h=3;h<o.length;h++){const m=o[h],p=e.matchPrefix(n,"a=rtpmap:"+m+" ")[0];if(p){const y=e.parseRtpMap(p),b=e.matchPrefix(n,"a=fmtp:"+m+" ");switch(y.parameters=b.length?e.parseFmtp(b[0]):{},y.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+m+" ").map(e.parseRtcpFb),r.codecs.push(y),y.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(y.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(h=>{r.headerExtensions.push(e.parseExtmap(h))});const u=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(h=>{u.forEach(m=>{h.rtcpFeedback.find(y=>y.type===m.type&&y.parameter===m.parameter)||h.rtcpFeedback.push(m)})}),r},e.writeRtpDescription=function(n,r){let a="";a+="m="+n+" ",a+=r.codecs.length>0?"9":"0",a+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",a+=r.codecs.map(u=>u.preferredPayloadType!==void 0?u.preferredPayloadType:u.payloadType).join(" ")+`\r
`,a+=`c=IN IP4 0.0.0.0\r
`,a+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(u=>{a+=e.writeRtpMap(u),a+=e.writeFmtp(u),a+=e.writeRtcpFb(u)});let o=0;return r.codecs.forEach(u=>{u.maxptime>o&&(o=u.maxptime)}),o>0&&(a+="a=maxptime:"+o+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(u=>{a+=e.writeExtmap(u)}),a},e.parseRtpEncodingParameters=function(n){const r=[],a=e.parseRtpParameters(n),o=a.fecMechanisms.indexOf("RED")!==-1,u=a.fecMechanisms.indexOf("ULPFEC")!==-1,h=e.matchPrefix(n,"a=ssrc:").map(x=>e.parseSsrcMedia(x)).filter(x=>x.attribute==="cname"),m=h.length>0&&h[0].ssrc;let p;const y=e.matchPrefix(n,"a=ssrc-group:FID").map(x=>x.substring(17).split(" ").map(j=>parseInt(j,10)));y.length>0&&y[0].length>1&&y[0][0]===m&&(p=y[0][1]),a.codecs.forEach(x=>{if(x.name.toUpperCase()==="RTX"&&x.parameters.apt){let k={ssrc:m,codecPayloadType:parseInt(x.parameters.apt,10)};m&&p&&(k.rtx={ssrc:p}),r.push(k),o&&(k=JSON.parse(JSON.stringify(k)),k.fec={ssrc:m,mechanism:u?"red+ulpfec":"red"},r.push(k))}}),r.length===0&&m&&r.push({ssrc:m});let b=e.matchPrefix(n,"b=");return b.length&&(b[0].indexOf("b=TIAS:")===0?b=parseInt(b[0].substring(7),10):b[0].indexOf("b=AS:")===0?b=parseInt(b[0].substring(5),10)*1e3*.95-2e3*8:b=void 0,r.forEach(x=>{x.maxBitrate=b})),r},e.parseRtcpParameters=function(n){const r={},a=e.matchPrefix(n,"a=ssrc:").map(h=>e.parseSsrcMedia(h)).filter(h=>h.attribute==="cname")[0];a&&(r.cname=a.value,r.ssrc=a.ssrc);const o=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=o.length>0,r.compound=o.length===0;const u=e.matchPrefix(n,"a=rtcp-mux");return r.mux=u.length>0,r},e.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},e.parseMsid=function(n){let r;const a=e.matchPrefix(n,"a=msid:");if(a.length===1)return r=a[0].substring(7).split(" "),{stream:r[0],track:r[1]};const o=e.matchPrefix(n,"a=ssrc:").map(u=>e.parseSsrcMedia(u)).filter(u=>u.attribute==="msid");if(o.length>0)return r=o[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){const r=e.parseMLine(n),a=e.matchPrefix(n,"a=max-message-size:");let o;a.length>0&&(o=parseInt(a[0].substring(19),10)),isNaN(o)&&(o=65536);const u=e.matchPrefix(n,"a=sctp-port:");if(u.length>0)return{port:parseInt(u[0].substring(12),10),protocol:r.fmt,maxMessageSize:o};const h=e.matchPrefix(n,"a=sctpmap:");if(h.length>0){const m=h[0].substring(10).split(" ");return{port:parseInt(m[0],10),protocol:m[1],maxMessageSize:o}}},e.writeSctpDescription=function(n,r){let a=[];return n.protocol!=="DTLS/SCTP"?a=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:a=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&a.push("a=max-message-size:"+r.maxMessageSize+`\r
`),a.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,r,a){let o;const u=r!==void 0?r:2;return n?o=n:o=e.generateSessionId(),`v=0\r
o=`+(a||"thisisadapterortc")+" "+o+" "+u+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,r){const a=e.splitLines(n);for(let o=0;o<a.length;o++)switch(a[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return a[o].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const a=e.splitLines(n)[0].substring(2).split(" ");return{kind:a[0],port:parseInt(a[1],10),protocol:a[2],fmt:a.slice(3).join(" ")}},e.parseOLine=function(n){const a=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:a[0],sessionId:a[1],sessionVersion:parseInt(a[2],10),netType:a[3],addressType:a[4],address:a[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=e.splitLines(n);for(let a=0;a<r.length;a++)if(r[a].length<2||r[a].charAt(1)!=="=")return!1;return!0},t.exports=e})(q0)),q0.exports}var Lk=GP();const rc=wd(Lk),YP=x5({__proto__:null,default:rc},[Lk]);function zf(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const a=new e(r),o=rc.parseCandidate(r.candidate);for(const u in o)u in a||Object.defineProperty(a,u,{value:o[u]});return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,Zo(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function qv(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||Zo(t,"icecandidate",e=>{if(e.candidate){const n=rc.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function Uf(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(h){if(!h||!h.sdp)return!1;const m=rc.splitSections(h.sdp);return m.shift(),m.some(p=>{const y=rc.parseMLine(p);return y&&y.kind==="application"&&y.protocol.indexOf("SCTP")!==-1})},r=function(h){const m=h.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(m===null||m.length<2)return-1;const p=parseInt(m[1],10);return p!==p?-1:p},a=function(h){let m=65536;return e.browser==="firefox"&&(e.version<57?h===-1?m=16384:m=2147483637:e.version<60?m=e.version===57?65535:65536:m=2147483637),m},o=function(h,m){let p=65536;e.browser==="firefox"&&e.version===57&&(p=65535);const y=rc.matchPrefix(h.sdp,"a=max-message-size:");return y.length>0?p=parseInt(y[0].substring(19),10):e.browser==="firefox"&&m!==-1&&(p=2147483637),p},u=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:m}=this.getConfiguration();m==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const m=r(arguments[0]),p=a(m),y=o(arguments[0],m);let b;p===0&&y===0?b=Number.POSITIVE_INFINITY:p===0||y===0?b=Math.max(p,y):b=Math.min(p,y);const x={};Object.defineProperty(x,"maxMessageSize",{get(){return b}}),this._sctp=x}return u.apply(this,arguments)}}function Bf(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,a){const o=r.send;r.send=function(){const h=arguments[0],m=h.length||h.size||h.byteLength;if(r.readyState==="open"&&a.sctp&&m>a.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+a.sctp.maxMessageSize+" bytes)");return o.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const a=n.apply(this,arguments);return e(a,this),a},Zo(t,"datachannel",r=>(e(r.channel,r.target),r))}function Gv(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=a=>{const o=a.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const u=new Event("connectionstatechange",a);o.dispatchEvent(u)}return a},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Yv(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(a){if(a&&a.sdp&&a.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=a.sdp.split(`
`).filter(u=>u.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&a instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:a.type,sdp:o}):a.sdp=o}return n.apply(this,arguments)}}function Ff(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Hf(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let a=arguments[0]||{};if(typeof a!="object"||a.type&&a.sdp)return n.apply(this,arguments);if(a={type:a.type,sdp:a.sdp},!a.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":a.type="offer";break;default:a.type="answer";break}return a.sdp||a.type!=="offer"&&a.type!=="answer"?n.apply(this,[a]):(a.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(u=>n.apply(this,[u]))})}const KP=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Yv,shimAddIceCandidateNullOrEmpty:Ff,shimConnectionState:Gv,shimMaxMessageSize:Uf,shimParameterlessSetLocalDescription:Hf,shimRTCIceCandidate:zf,shimRTCIceCandidateRelayProtocol:qv,shimSendThrowTypeError:Bf},Symbol.toStringTag,{value:"Module"}));function QP({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=lk,r=$P(t),a={browserDetails:r,commonShim:KP,extractVersion:Ku,disableLog:FP,disableWarnings:HP,sdp:YP};switch(r.browser){case"chrome":if(!Ow||!Hv||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),a;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),a;n("adapter.js shimming chrome."),a.browserShim=Ow,Ff(t,r),Hf(t),uk(t,r),dk(t),Hv(t,r),hk(t),gk(t,r),fk(t),mk(t),vk(t,r),zf(t),qv(t),Gv(t),Uf(t,r),Bf(t),Yv(t,r);break;case"firefox":if(!Lw||!$v||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),a;n("adapter.js shimming firefox."),a.browserShim=Lw,Ff(t,r),Hf(t),yk(t,r),$v(t,r),bk(t),wk(t),xk(t),_k(t),Sk(t),Ek(t),Ck(t),Tk(t),kk(t),zf(t),Gv(t),Uf(t,r),Bf(t);break;case"safari":if(!Vw||!e.shimSafari)return n("Safari shim is not included in this adapter release."),a;n("adapter.js shimming safari."),a.browserShim=Vw,Ff(t,r),Hf(t),Dk(t),Pk(t),Rk(t),Nk(t),Ak(t),Mk(t),jk(t),Ok(t),zf(t),qv(t),Uf(t,r),Bf(t),Yv(t,r);break;default:n("Unsupported browser!");break}return a}const Uw=QP({window:typeof window>"u"?void 0:window});function el(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}class Vk{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const n=[],r=e.byteLength,a=Math.ceil(r/this.chunkedMTU);let o=0,u=0;for(;u<r;){const h=Math.min(r,u+this.chunkedMTU),m=e.slice(u,h),p={__peerData:this._dataCount,n:o,data:m,total:a};n.push(p),u=h,o++}return this._dataCount++,n}}}function XP(t){let e=0;for(const a of t)e+=a.byteLength;const n=new Uint8Array(e);let r=0;for(const a of t)n.set(a,r),r+=a.byteLength;return n}const G0=Uw.default||Uw,Lu=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const t=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(t)?t==="chrome"?e>=this.minChromeVersion:t==="firefox"?e>=this.minFirefoxVersion:t==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return G0.browserDetails.browser}getVersion(){return G0.browserDetails.version||0}isUnifiedPlanSupported(){const t=this.getBrowser(),e=G0.browserDetails.version||0;if(t==="chrome"&&e<this.minChromeVersion)return!1;if(t==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch{}finally{n&&n.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},WP=t=>!t||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(t),zk=()=>Math.random().toString(36).slice(2),Bw={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class JP extends Vk{noop(){}blobToArrayBuffer(e,n){const r=new FileReader;return r.onload=function(a){a.target&&n(a.target.result)},r.readAsArrayBuffer(e),r}binaryStringToArrayBuffer(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=Bw,this.browser=Lu.getBrowser(),this.browserVersion=Lu.getVersion(),this.pack=ik,this.unpack=sk,this.supports=(function(){const n={browser:Lu.isBrowserSupported(),webRTC:Lu.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let r;try{r=new RTCPeerConnection(Bw),n.audioVideo=!0;let a;try{a=r.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!a.ordered;try{a.binaryType="blob",n.binaryBlob=!Lu.isIOS}catch{}}catch{}finally{a&&a.close()}}catch{}finally{r&&r.close()}return n})(),this.validateId=WP,this.randomToken=zk}}const Rr=new JP,ZP="PeerJS: ";class eO{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...n){const r=[ZP,...n];for(const a in r)r[a]instanceof Error&&(r[a]="("+r[a].name+") "+r[a].message);e>=3?console.log(...r):e>=2?console.warn("WARNING",...r):e>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var Qe=new eO,T1={},tO=Object.prototype.hasOwnProperty,_r="~";function md(){}Object.create&&(md.prototype=Object.create(null),new md().__proto__||(_r=!1));function nO(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function Uk(t,e,n,r,a){if(typeof n!="function")throw new TypeError("The listener must be a function");var o=new nO(n,r||t,a),u=_r?_r+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],o]:t._events[u].push(o):(t._events[u]=o,t._eventsCount++),t}function $f(t,e){--t._eventsCount===0?t._events=new md:delete t._events[e]}function fr(){this._events=new md,this._eventsCount=0}fr.prototype.eventNames=function(){var e=[],n,r;if(this._eventsCount===0)return e;for(r in n=this._events)tO.call(n,r)&&e.push(_r?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(n)):e};fr.prototype.listeners=function(e){var n=_r?_r+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var a=0,o=r.length,u=new Array(o);a<o;a++)u[a]=r[a].fn;return u};fr.prototype.listenerCount=function(e){var n=_r?_r+e:e,r=this._events[n];return r?r.fn?1:r.length:0};fr.prototype.emit=function(e,n,r,a,o,u){var h=_r?_r+e:e;if(!this._events[h])return!1;var m=this._events[h],p=arguments.length,y,b;if(m.fn){switch(m.once&&this.removeListener(e,m.fn,void 0,!0),p){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,n),!0;case 3:return m.fn.call(m.context,n,r),!0;case 4:return m.fn.call(m.context,n,r,a),!0;case 5:return m.fn.call(m.context,n,r,a,o),!0;case 6:return m.fn.call(m.context,n,r,a,o,u),!0}for(b=1,y=new Array(p-1);b<p;b++)y[b-1]=arguments[b];m.fn.apply(m.context,y)}else{var x=m.length,k;for(b=0;b<x;b++)switch(m[b].once&&this.removeListener(e,m[b].fn,void 0,!0),p){case 1:m[b].fn.call(m[b].context);break;case 2:m[b].fn.call(m[b].context,n);break;case 3:m[b].fn.call(m[b].context,n,r);break;case 4:m[b].fn.call(m[b].context,n,r,a);break;default:if(!y)for(k=1,y=new Array(p-1);k<p;k++)y[k-1]=arguments[k];m[b].fn.apply(m[b].context,y)}}return!0};fr.prototype.on=function(e,n,r){return Uk(this,e,n,r,!1)};fr.prototype.once=function(e,n,r){return Uk(this,e,n,r,!0)};fr.prototype.removeListener=function(e,n,r,a){var o=_r?_r+e:e;if(!this._events[o])return this;if(!n)return $f(this,o),this;var u=this._events[o];if(u.fn)u.fn===n&&(!a||u.once)&&(!r||u.context===r)&&$f(this,o);else{for(var h=0,m=[],p=u.length;h<p;h++)(u[h].fn!==n||a&&!u[h].once||r&&u[h].context!==r)&&m.push(u[h]);m.length?this._events[o]=m.length===1?m[0]:m:$f(this,o)}return this};fr.prototype.removeAllListeners=function(e){var n;return e?(n=_r?_r+e:e,this._events[n]&&$f(this,n)):(this._events=new md,this._eventsCount=0),this};fr.prototype.off=fr.prototype.removeListener;fr.prototype.addListener=fr.prototype.on;fr.prefixed=_r;fr.EventEmitter=fr;T1=fr;var tl={};el(tl,"ConnectionType",()=>Ua);el(tl,"PeerErrorType",()=>Dn);el(tl,"BaseConnectionErrorType",()=>Kv);el(tl,"DataConnectionErrorType",()=>k1);el(tl,"SerializationType",()=>fp);el(tl,"SocketEventType",()=>Ma);el(tl,"ServerMessageType",()=>ur);var Ua=(function(t){return t.Data="data",t.Media="media",t})({}),Dn=(function(t){return t.BrowserIncompatible="browser-incompatible",t.Disconnected="disconnected",t.InvalidID="invalid-id",t.InvalidKey="invalid-key",t.Network="network",t.PeerUnavailable="peer-unavailable",t.SslUnavailable="ssl-unavailable",t.ServerError="server-error",t.SocketError="socket-error",t.SocketClosed="socket-closed",t.UnavailableID="unavailable-id",t.WebRTC="webrtc",t})({}),Kv=(function(t){return t.NegotiationFailed="negotiation-failed",t.ConnectionClosed="connection-closed",t})({}),k1=(function(t){return t.NotOpenYet="not-open-yet",t.MessageToBig="message-too-big",t})({}),fp=(function(t){return t.Binary="binary",t.BinaryUTF8="binary-utf8",t.JSON="json",t.None="raw",t})({}),Ma=(function(t){return t.Message="message",t.Disconnected="disconnected",t.Error="error",t.Close="close",t})({}),ur=(function(t){return t.Heartbeat="HEARTBEAT",t.Candidate="CANDIDATE",t.Offer="OFFER",t.Answer="ANSWER",t.Open="OPEN",t.Error="ERROR",t.IdTaken="ID-TAKEN",t.InvalidKey="INVALID-KEY",t.Leave="LEAVE",t.Expire="EXPIRE",t})({});const Bk="1.5.5";class rO extends T1.EventEmitter{constructor(e,n,r,a,o,u=5e3){super(),this.pingInterval=u,this._disconnected=!0,this._messagesQueue=[];const h=e?"wss://":"ws://";this._baseUrl=h+n+":"+r+a+"peerjs?key="+o}start(e,n){this._id=e;const r=`${this._baseUrl}&id=${e}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+Bk),this._disconnected=!1,this._socket.onmessage=a=>{let o;try{o=JSON.parse(a.data),Qe.log("Server message received:",o)}catch{Qe.log("Invalid server message",a.data);return}this.emit(Ma.Message,o)},this._socket.onclose=a=>{this._disconnected||(Qe.log("Socket closed.",a),this._cleanup(),this._disconnected=!0,this.emit(Ma.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),Qe.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){Qe.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:ur.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const n of e)this.send(n)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(Ma.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(e);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class Fk{constructor(e){this.connection=e}startConnection(e){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===Ua.Media&&e._stream&&this._addTracksToConnection(e._stream,n),e.originator){const r=this.connection,a={ordered:!!e.reliable},o=n.createDataChannel(r.label,a);r._initializeDataChannel(o),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){Qe.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const n=this.connection.peer,r=this.connection.connectionId,a=this.connection.type,o=this.connection.provider;Qe.log("Listening for ICE candidates."),e.onicecandidate=u=>{!u.candidate||!u.candidate.candidate||(Qe.log(`Received ICE candidates for ${n}:`,u.candidate),o.socket.send({type:ur.Candidate,payload:{candidate:u.candidate,type:a,connectionId:r},dst:n}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":Qe.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(Kv.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":Qe.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(Kv.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":Qe.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},Qe.log("Listening for data channel"),e.ondatachannel=u=>{Qe.log("Received data channel");const h=u.channel;o.getConnection(n,r)._initializeDataChannel(h)},Qe.log("Listening for remote stream"),e.ontrack=u=>{Qe.log("Received remote stream");const h=u.streams[0],m=o.getConnection(n,r);if(m.type===Ua.Media){const p=m;this._addStreamToMediaConnection(h,p)}}}cleanup(){Qe.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const n=e.signalingState!=="closed";let r=!1;const a=this.connection.dataChannel;a&&(r=!!a.readyState&&a.readyState!=="closed"),(n||r)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,n=this.connection.provider;try{const r=await e.createOffer(this.connection.options.constraints);Qe.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),Qe.log("Set localDescription:",r,`for:${this.connection.peer}`);let a={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Ua.Data){const o=this.connection;a={...a,label:o.label,reliable:o.reliable,serialization:o.serialization}}n.socket.send({type:ur.Offer,payload:a,dst:this.connection.peer})}catch(a){a!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(Dn.WebRTC,a),Qe.log("Failed to setLocalDescription, ",a))}}catch(r){n.emitError(Dn.WebRTC,r),Qe.log("Failed to createOffer, ",r)}}async _makeAnswer(){const e=this.connection.peerConnection,n=this.connection.provider;try{const r=await e.createAnswer();Qe.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),Qe.log("Set localDescription:",r,`for:${this.connection.peer}`),n.socket.send({type:ur.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(a){n.emitError(Dn.WebRTC,a),Qe.log("Failed to setLocalDescription, ",a)}}catch(r){n.emitError(Dn.WebRTC,r),Qe.log("Failed to create answer, ",r)}}async handleSDP(e,n){n=new RTCSessionDescription(n);const r=this.connection.peerConnection,a=this.connection.provider;Qe.log("Setting remote description",n);const o=this;try{await r.setRemoteDescription(n),Qe.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await o._makeAnswer()}catch(u){a.emitError(Dn.WebRTC,u),Qe.log("Failed to setRemoteDescription, ",u)}}async handleCandidate(e){Qe.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),Qe.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(Dn.WebRTC,n),Qe.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(e,n){if(Qe.log(`add tracks from stream ${e.id} to peer connection`),!n.addTrack)return Qe.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(r=>{n.addTrack(r,e)})}_addStreamToMediaConnection(e,n){Qe.log(`add stream ${e.id} to media connection ${n.connectionId}`),n.addStream(e)}}class Hk extends T1.EventEmitter{emitError(e,n){Qe.error("Error:",n),this.emit("error",new sO(`${e}`,n))}}class sO extends Error{constructor(e,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=e}}class $k extends Hk{get open(){return this._open}constructor(e,n,r){super(),this.peer=e,this.provider=n,this.options=r,this._open=!1,this.metadata=r.metadata}}class Nm extends $k{static#e=this.ID_PREFIX="mc_";get type(){return Ua.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,n,r){super(e,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Nm.ID_PREFIX+Rr.randomToken(),this._negotiator=new Fk(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{Qe.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{Qe.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){Qe.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const n=e.type,r=e.payload;switch(e.type){case ur.Answer:this._negotiator.handleSDP(n,r.sdp),this._open=!0;break;case ur.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:Qe.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(e,n={}){if(this._localStream){Qe.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const r=this.provider._getMessages(this.connectionId);for(const a of r)this.handleMessage(a);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class iO{constructor(e){this._options=e}_buildRequest(e){const n=this._options.secure?"https":"http",{host:r,port:a,path:o,key:u}=this._options,h=new URL(`${n}://${r}:${a}${o}${u}/${e}`);return h.searchParams.set("ts",`${Date.now()}${Math.random()}`),h.searchParams.set("version",Bk),fetch(h.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){Qe.error("Error retrieving ID",e);let n="";throw this._options.path==="/"&&this._options.host!==Rr.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let n="";throw this._options.host===Rr.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw Qe.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}class Am extends $k{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return Ua.Data}constructor(e,n,r){super(e,n,r),this.connectionId=this.options.connectionId||Am.ID_PREFIX+zk(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new Fk(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{Qe.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{Qe.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{Qe.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,n=!1){if(!this.open){this.emitError(k1.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,n)}async handleMessage(e){const n=e.payload;switch(e.type){case ur.Answer:await this._negotiator.handleSDP(e.type,n.sdp);break;case ur.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:Qe.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}}class N1 extends Am{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>Am.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(n){return Qe.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Y0 extends N1{close(e){super.close(e),this._chunkedData={}}constructor(e,n,r){super(e,n,r),this.chunker=new Vk,this.serialization=fp.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const n=sk(e),r=n.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(e){const n=e.__peerData,r=this._chunkedData[n]||{data:[],count:0,total:e.total};if(r.data[e.n]=new Uint8Array(e.data),r.count++,this._chunkedData[n]=r,r.total===r.count){delete this._chunkedData[n];const a=XP(r.data);this._handleDataMessage({data:a})}}_send(e,n){const r=ik(e);if(r instanceof Promise)return this._send_blob(r);if(!n&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(e){const n=await e;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(e){const n=this.chunker.chunk(e);Qe.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const r of n)this.send(r,!0)}}class aO extends N1{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,n){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=fp.None}}class oO extends N1{_handleDataMessage({data:e}){const n=this.parse(this.decoder.decode(e)),r=n.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",n)}_send(e,n){const r=this.encoder.encode(this.stringify(e));if(r.byteLength>=Rr.chunkedMTU){this.emitError(k1.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...e){super(...e),this.serialization=fp.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class A1 extends Hk{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[n,r]of this._connections)e[n]=r;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,n){super(),this._serializers={raw:aO,json:oO,binary:Y0,"binary-utf8":Y0,default:Y0},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(e&&e.constructor==Object?n=e:e&&(r=e.toString()),n={debug:0,host:Rr.CLOUD_HOST,port:Rr.CLOUD_PORT,path:"/",key:A1.DEFAULT_KEY,token:Rr.randomToken(),config:Rr.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Rr.CLOUD_HOST?this._options.secure=Rr.isSecure():this._options.host==Rr.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&Qe.setLogFunction(this._options.logFunction),Qe.logLevel=this._options.debug||0,this._api=new iO(n),this._socket=this._createServerConnection(),!Rr.supports.audioVideo&&!Rr.supports.data){this._delayedAbort(Dn.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!Rr.validateId(r)){this._delayedAbort(Dn.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(a=>this._initialize(a)).catch(a=>this._abort(Dn.ServerError,a))}_createServerConnection(){const e=new rO(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(Ma.Message,n=>{this._handleMessage(n)}),e.on(Ma.Error,n=>{this._abort(Dn.SocketError,n)}),e.on(Ma.Disconnected,()=>{this.disconnected||(this.emitError(Dn.Network,"Lost connection to server."),this.disconnect())}),e.on(Ma.Close,()=>{this.disconnected||this._abort(Dn.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const n=e.type,r=e.payload,a=e.src;switch(n){case ur.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case ur.Error:this._abort(Dn.ServerError,r.msg);break;case ur.IdTaken:this._abort(Dn.UnavailableID,`ID "${this.id}" is taken`);break;case ur.InvalidKey:this._abort(Dn.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case ur.Leave:Qe.log(`Received leave message from ${a}`),this._cleanupPeer(a),this._connections.delete(a);break;case ur.Expire:this.emitError(Dn.PeerUnavailable,`Could not connect to peer ${a}`);break;case ur.Offer:{const o=r.connectionId;let u=this.getConnection(a,o);if(u&&(u.close(),Qe.warn(`Offer received for existing Connection ID:${o}`)),r.type===Ua.Media){const m=new Nm(a,this,{connectionId:o,_payload:r,metadata:r.metadata});u=m,this._addConnection(a,u),this.emit("call",m)}else if(r.type===Ua.Data){const m=new this._serializers[r.serialization](a,this,{connectionId:o,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});u=m,this._addConnection(a,u),this.emit("connection",m)}else{Qe.warn(`Received malformed connection type:${r.type}`);return}const h=this._getMessages(o);for(const m of h)u.handleMessage(m);break}default:{if(!r){Qe.warn(`You received a malformed message from ${a} of type ${n}`);return}const o=r.connectionId,u=this.getConnection(a,o);u&&u.peerConnection?u.handleMessage(e):o?this._storeMessage(o,e):Qe.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,n){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(n)}_getMessages(e){const n=this._lostMessages.get(e);return n?(this._lostMessages.delete(e),n):[]}connect(e,n={}){if(n={serialization:"default",...n},this.disconnected){Qe.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(Dn.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[n.serialization](e,this,n);return this._addConnection(e,r),r}call(e,n,r={}){if(this.disconnected){Qe.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(Dn.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){Qe.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const a=new Nm(e,this,{...r,_stream:n});return this._addConnection(e,a),a}_addConnection(e,n){Qe.log(`add connection ${n.type}:${n.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(n)}_removeConnection(e){const n=this._connections.get(e.peer);if(n){const r=n.indexOf(e);r!==-1&&n.splice(r,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,n){const r=this._connections.get(e);if(!r)return null;for(const a of r)if(a.connectionId===n)return a;return null}_delayedAbort(e,n){setTimeout(()=>{this._abort(e,n)},0)}_abort(e,n){Qe.error("Aborting!"),this.emitError(e,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(Qe.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const n=this._connections.get(e);if(n)for(const r of n)r.close()}disconnect(){if(this.disconnected)return;const e=this.id;Qe.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)Qe.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)Qe.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=n=>{}){this._api.listAllPeers().then(n=>e(n)).catch(n=>this._abort(Dn.ServerError,n))}}var qk=A1;let K0=null,pd=[],Rm=[];const Gk=()=>(K0||(K0=new(window.AudioContext||window.webkitAudioContext)),K0),gd=()=>{pd.forEach(t=>{try{t.stop(),t.disconnect()}catch{}}),pd=[],Rm.forEach(t=>{try{t.disconnect()}catch{}}),Rm=[]},lO=()=>{try{const t=Gk();t.state==="suspended"&&t.resume(),gd();const e=t.createOscillator(),n=t.createGain();e.type="sine",e.frequency.value=440,e.connect(n),n.connect(t.destination);const r=t.currentTime;let a=!0;const o=()=>{if(!a)return;const h=t.createOscillator(),m=t.createGain();h.connect(m),m.connect(t.destination),h.frequency.value=425,h.type="sine";const p=t.currentTime,y=t.createOscillator();y.type="sine",y.frequency.value=20;const b=t.createGain();b.gain.value=500,y.connect(b),b.connect(h.frequency),y.start(p),y.stop(p+2),m.gain.setValueAtTime(0,p),m.gain.linearRampToValueAtTime(.1,p+.1),m.gain.setValueAtTime(.1,p+1.8),m.gain.linearRampToValueAtTime(0,p+2),h.start(p),h.stop(p+2),pd.push(h),pd.push(y),Rm.push(m)};o();const u=setInterval(o,4e3);return()=>{a=!1,clearInterval(u),gd()}}catch(t){return console.error("Error playing outgoing ring:",t),()=>{}}},cO=()=>{try{const t=Gk();t.state==="suspended"&&t.resume(),gd();let e=!0;const n=()=>{if(!e)return;const a=t.currentTime,o=(u,h)=>{const m=t.createOscillator(),p=t.createGain();m.connect(p),p.connect(t.destination),m.frequency.value=h,m.type="square",p.gain.setValueAtTime(0,u),p.gain.linearRampToValueAtTime(.1,u+.05),p.gain.setValueAtTime(.1,u+.2),p.gain.linearRampToValueAtTime(0,u+.25),m.start(u),m.stop(u+.3),pd.push(m),Rm.push(p)};o(a,880),o(a+.4,880),o(a+.8,880)};n();const r=setInterval(n,3e3);return()=>{e=!1,clearInterval(r),gd()}}catch(t){return console.error("Error playing incoming ring:",t),()=>{}}},Fw=()=>{gd()},Oi={SCREEN_SHARE:"screen_share",HIGH_QUALITY:"high_quality"},uO={admin:[Oi.SCREEN_SHARE,Oi.HIGH_QUALITY],moderator:[Oi.SCREEN_SHARE],member:[]},dO={premium:[Oi.SCREEN_SHARE,Oi.HIGH_QUALITY],developer:[Oi.SCREEN_SHARE,Oi.HIGH_QUALITY],verified:[]},Yk=(t,e)=>{if(!t)return!1;const n=t.role||"member";if((uO[n]||[]).includes(e))return!0;const a=t.badges||[];for(const o of a)if((dO[o]||[]).includes(e))return!0;return!1},sc=t=>t?!!(t.role==="admin"||t.role==="premium"||t.badges?.includes("premium")||t.badges?.includes("developer")||t.plan==="premium"||t.roles?.includes("premium")||t.roles?.includes("admin")):!1,Kk=C.createContext(),Q0=10,Hw=300,R1=()=>{const t=C.useContext(Kk);if(!t)throw new Error("useSoundboard must be used within SoundboardProvider");return t},hO=({children:t})=>{const{error:e}=Kr(),[n,r]=C.useState(()=>{try{const h=localStorage.getItem("dss_custom_sounds");return h?JSON.parse(h):[]}catch{return[]}});C.useEffect(()=>{localStorage.setItem("dss_custom_sounds",JSON.stringify(n))},[n]);const u={customSounds:n,addSound:async(h,m)=>n.length>=Q0?(e(`Maximum ${Q0} sounds allowed.`),!1):m.size>Hw*1024?(e(`File too large. Max ${Hw}KB.`),!1):new Promise(p=>{const y=new FileReader;y.onload=b=>{const x={id:Date.now().toString(),name:h.trim()||"Sound",src:b.target.result};r(k=>[...k,x]),p(!0)},y.readAsDataURL(m)}),removeSound:h=>{r(m=>m.filter(p=>p.id!==h))},MAX_SOUNDS:Q0};return c.jsx(Kk.Provider,{value:u,children:t})},Qk=C.createContext(),Ic=()=>{const t=C.useContext(Qk);if(!t)throw new Error("useCall must be used within CallProvider");return t},fO=({children:t})=>{const{currentUser:e,userProfile:n}=yn(),{error:r}=Kr(),[a,o]=C.useState(null),[u,h]=C.useState(null),[m,p]=C.useState("idle"),[y,b]=C.useState(null),[x,k]=C.useState(null),[j,R]=C.useState(null),[N,U]=C.useState(null),[F,I]=C.useState(null),[O,B]=C.useState(null),{customSounds:H,addSound:w,removeSound:E}=R1(),[A,P]=C.useState(!1),[L,z]=C.useState(!1),[M,se]=C.useState(!1),[ae,G]=C.useState({audioInputs:[],videoInputs:[],audioOutputs:[]}),[J,W]=C.useState(""),[Ee,Pe]=C.useState(""),$=me=>{if(M)return;const Ne=H.find(Ie=>Ie.id===me);if(!Ne)return;const _e=new Audio(Ne.src);_e.volume=.5,Ce.current.push(_e),_e.onended=()=>{Ce.current=Ce.current.filter(Ie=>Ie!==_e)},_e.play().catch(Ie=>console.error("Error playing sound:",Ie)),O&&O.open?(console.log("Sending sound effect:",Ne.name),O.send({type:"SOUND_EFFECT",payload:{src:Ne.src,name:Ne.name}})):console.warn("Cannot send sound effect. Data connection missing or closed.")};C.useRef(null),C.useRef(null);const X=C.useRef(null),oe=C.useRef(null),fe=C.useRef(null),Ce=C.useRef([]),Ue=()=>{Ce.current.forEach(me=>{me.pause(),me.currentTime=0}),Ce.current=[]},re=C.useRef(null);C.useEffect(()=>{oe.current=N},[N]),C.useEffect(()=>{fe.current=j},[j]),C.useEffect(()=>(re.current&&(re.current(),re.current=null),Fw(),m==="incoming"?M||(re.current=cO()):m==="outgoing"&&(M||(re.current=lO())),()=>{re.current&&re.current(),Fw()}),[m]),C.useEffect(()=>{if(!e)return;const me=new qk;return me.on("open",Ne=>{console.log("My Peer ID is:",Ne),h(Ne),o(me)}),me.on("call",Ne=>{console.log("Receiving PeerJS call connection..."),fe.current&&fe.current.peer===Ne.peer&&(console.log("Replacing existing call (upgrade/renegotiation detected)"),fe.current.removeAllListeners&&fe.current.removeAllListeners("close"),fe.current.close());const _e=oe.current||Me.current;_e?(console.log("Answering call with local stream"),Ne.answer(_e)):(console.warn("No local stream found when answering! Answering audio-only or empty."),Ne.answer()),Ne.on("stream",Ie=>{console.log("Received remote stream"),I(Ie)}),Ne.on("close",()=>{he()}),R(Ne),p("connected")}),me.on("error",Ne=>{console.error("PeerJS Error:",Ne),Ne.type}),me.on("connection",Ne=>{console.log("Data connection received from peer:",Ne.peer),Ne.on("open",()=>{console.log("Data connection open event fired."),B(Ne)}),Ne.on("data",_e=>{if(_e&&_e.type==="SOUND_EFFECT"&&_e.payload?.src){if(M)return;console.log("Received sound effect:",_e.payload.name);const Ie=new Audio(_e.payload.src);Ie.volume=.5,Ce.current.push(Ie),Ie.onended=()=>{Ce.current=Ce.current.filter(st=>st!==Ie)},Ie.play().catch(st=>console.error("Error playing remote sound:",st))}}),Ne.on("close",()=>{console.log("Data connection closed."),B(null)}),Ne.on("error",_e=>console.error("Data connection error:",_e)),Ne.open&&(console.log("Data connection already open."),B(Ne))}),()=>{me.destroy()}},[e]),C.useEffect(()=>{if(!e)return;const me=qr(wt(de,"users",e.uid,"incomingCalls"),Na("status","==","pending")),Ne=vr(me,_e=>{_e.docChanges().forEach(Ie=>{if(Ie.type==="added"){const st=Ie.doc.data();b({id:Ie.doc.id,...st}),p("incoming")}Ie.type==="removed"&&b(st=>st&&st.id===Ie.doc.id?(p(Pt=>(Pt!=="connected"&&he(!1),Pt)),null):st)})});return()=>Ne()},[e]);const Le=async()=>{if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return console.warn("mediaDevices API not available"),{audioInputs:[],videoInputs:[],audioOutputs:[]};try{const me=await navigator.mediaDevices.enumerateDevices(),Ne=me.filter(st=>st.kind==="audioinput"),_e=me.filter(st=>st.kind==="videoinput"),Ie=me.filter(st=>st.kind==="audiooutput");return G({audioInputs:Ne,videoInputs:_e,audioOutputs:Ie}),!J&&Ne.length>0&&W(Ne[0].deviceId),!Ee&&_e.length>0&&Pe(_e[0].deviceId),console.log("Devices enumerated:",{audioInputs:Ne.length,videoInputs:_e.length}),{audioInputs:Ne,videoInputs:_e,audioOutputs:Ie}}catch(me){return console.error("Failed to enumerate devices:",me),{audioInputs:[],videoInputs:[],audioOutputs:[]}}};C.useEffect(()=>{if(!navigator.mediaDevices){console.warn("mediaDevices API not available - skipping device enumeration");return}return Le(),navigator.mediaDevices.addEventListener("devicechange",Le),()=>navigator.mediaDevices.removeEventListener("devicechange",Le)},[]);const Re=async(me=!0)=>{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return console.error("mediaDevices API not available - requires HTTPS or localhost"),r("Kamera/mikrofon iin HTTPS veya localhost gerekli"),null;try{ae.audioInputs.length===0&&await Le();const Ne={echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,channelCount:1,sampleRate:48e3,sampleSize:16,...J&&{deviceId:{exact:J}}},_e=me?{width:1280,height:720,...Ee&&{deviceId:{exact:Ee}}}:!1,Ie=await navigator.mediaDevices.getUserMedia({video:_e,audio:Ne});return console.log("Media stream acquired with selected devices"),U(Ie),Ie}catch(Ne){return console.error("Failed to get local stream",Ne),r("Could not access camera/microphone"),null}},We=async(me,Ne="video")=>{if(!a||!u){r("Connection not ready. Please wait a moment.");return}if(k(me),p("outgoing"),!await Re(Ne==="video")){p("idle");return}z(Ne==="voice");try{const Ie=e.displayName||n?.displayName||"Unknown",st=e.photoURL||n?.photoURL||n?.photoUrl||null,Pt=await Fn(wt(de,"users",me.id,"incomingCalls"),{callerId:e.uid,callerName:Ie,callerPhotoUrl:st,peerId:u,type:Ne,status:"pending",timestamp:mt()});X.current=Pt.id;const $n=vr(Ae(de,"users",me.id,"incomingCalls",Pt.id),Se=>{const Fe=X.current===Pt.id;if(!Se.exists())Fe&&m==="outgoing"&&(r("Call ended or declined"),he(!1)),$n();else{const lt=Se.data();lt.status==="accepted"?Fe&&p("connected"):lt.status==="rejected"&&Fe&&(r("Call declined"),he(!0))}},Se=>{console.warn("Call snapshot error:",Se),X.current===Pt.id&&(r("Call declined"),he(!1))})}catch(Ie){console.error("Signaling failed:",Ie),r("Failed to direct call"),he()}};C.useEffect(()=>{if(!j||!j.peerConnection)return;const me=()=>{const Ne=j.peerConnection.connectionState,_e=j.peerConnection.iceConnectionState;console.log(`Connection State: ${Ne}, ICE State: ${_e}`),(_e==="disconnected"||_e==="failed"||_e==="closed")&&(console.warn("Peer connection lost/failed. Ending call..."),_e==="failed"||_e==="closed"?he():_e==="disconnected"&&fe.current===j&&setTimeout(()=>{fe.current&&fe.current.peerConnection.iceConnectionState==="disconnected"&&(console.log("Connection still disconnected after timeout. Ending."),he())},3e3))};return j.peerConnection.addEventListener("iceconnectionstatechange",me),j.peerConnection.addEventListener("connectionstatechange",me),()=>{j&&j.peerConnection&&(j.peerConnection.removeEventListener("iceconnectionstatechange",me),j.peerConnection.removeEventListener("connectionstatechange",me))}},[j]);const ke=async()=>{if(!y||!a)return;p("connected");const me=y.type==="video",Ne=await Re(me);if(!Ne){console.error("Stream failed, rejecting call signal.");try{await it(Ae(de,"users",e.uid,"incomingCalls",y.id),{status:"rejected"})}catch{}he(!1);return}if(me||z(!0),console.log("Connecting to peer:",y.peerId),(!a||a.disconnected)&&(r("Peer connection lost. Reconnecting..."),a?.reconnect(),await new Promise(_e=>setTimeout(_e,1e3)),!a||a.disconnected)){r("Could not establish P2P connection."),he();return}try{const _e=a.call(y.peerId,Ne);if(!_e){r("Call failed to initialize."),he();return}_e.on("stream",Ie=>{I(Ie)}),_e.on("close",()=>{he()}),_e.on("error",Ie=>{console.error("Call error:",Ie),he()}),R(_e);try{await it(Ae(de,"users",e.uid,"incomingCalls",y.id),{status:"accepted"})}catch(Ie){console.error("Error updating signal doc",Ie)}}catch(_e){console.error("Error calling peer:",_e),r("Failed to connect to peer."),he()}try{console.log("Establishing data connection to caller:",y.peerId);const _e=a.connect(y.peerId);_e.on("open",()=>{console.log("Data connection opened (Callee side)!"),B(_e)}),_e.on("data",Ie=>{if(Ie&&Ie.type==="SOUND_EFFECT"&&Ie.payload?.src){if(M)return;const st=new Audio(Ie.payload.src);st.volume=.5,Ce.current.push(st),st.onended=()=>{Ce.current=Ce.current.filter(Pt=>Pt!==st)},st.play().catch(Pt=>console.error(Pt))}}),_e.on("close",()=>B(null)),_e.on("error",Ie=>console.error("Data connection error (Callee):",Ie))}catch(_e){console.error("Failed to establish data connection",_e)}},he=async(me=!0)=>{console.log("[CallContext] Ending call - starting cleanup..."),Oe.current&&(Oe.current.getTracks().forEach(_e=>{_e.stop(),console.log("[CallContext] Stopped screen track:",_e.kind)}),Oe.current=null),Me.current=null;const Ne=oe.current;if(Ne&&Ne.getTracks().forEach(_e=>{_e.stop(),console.log("[CallContext] Stopped local track:",_e.kind)}),N&&N.getTracks().forEach(_e=>{_e.stop(),console.log("[CallContext] Stopped local stream track (backup):",_e.kind)}),U(null),oe.current=null,j&&(j.close(),R(null)),F&&F.getTracks().forEach(_e=>{_e.stop(),console.log("[CallContext] Stopped remote track:",_e.kind)}),I(null),p("idle"),b(null),k(null),P(!1),z(!1),se(!1),O&&(O.close(),B(null)),Ue(),console.log("[CallContext] Call cleanup complete"),X.current&&me&&x)try{await Yr(Ae(de,"users",x.id,"incomingCalls",X.current))}catch{}if(y&&me)try{m==="incoming"?await it(Ae(de,"users",e.uid,"incomingCalls",y.id),{status:"rejected"}):await Yr(Ae(de,"users",e.uid,"incomingCalls",y.id))}catch{}X.current=null},ee=()=>{if(N){const me=N.getAudioTracks()[0];me&&(me.enabled=!me.enabled,P(!me.enabled))}},qe=()=>{if(N){const me=N.getVideoTracks()[0];me&&(me.enabled=!me.enabled,z(!me.enabled))}},ve=()=>{const me=!M;se(me),F&&F.getAudioTracks().forEach(Ne=>{Ne.enabled=!me}),A||ee()};C.useEffect(()=>{F&&F.getAudioTracks().forEach(me=>{me.enabled=!M})},[F,M]);const Oe=C.useRef(null),Me=C.useRef(null),K=async(me=null)=>{if(Oe.current){await ue();return}try{console.log("Requesting display media...",me);let Ne={},_e=me?.width||1280,Ie=me?.height||720,st=me?.frameRate||30;me||Yk(n,Oi.HIGH_QUALITY)&&(_e=1920,Ie=1080,st=60);let Pt;if(me?.sourceId&&window.require){console.log("Using Electron getUserMedia with sourceId:",me.sourceId);try{Pt=await navigator.mediaDevices.getUserMedia({audio:{mandatory:{chromeMediaSource:"desktop"}},video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:me.sourceId,maxWidth:_e,maxHeight:Ie,maxFrameRate:st}}})}catch(Vt){throw console.error("Electron getUserMedia failed:",Vt),Vt}}else{const Vt={video:{width:{ideal:_e},height:{ideal:Ie},frameRate:{ideal:st},displaySurface:me?.displaySurface},audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!1}};console.log("Using Web getDisplayMedia with constraints:",Vt),Pt=await navigator.mediaDevices.getDisplayMedia(Vt)}const $n=Pt.getVideoTracks()[0];z(!1),console.log("Display media obtained:",$n.label);const Se=Pt.getAudioTracks()[0];let Fe=null;if(Se){console.log("System audio captured! Mixing with microphone...");let Vt=N;if(!Vt&&ae.audioInputs.length>0)try{Vt=await navigator.mediaDevices.getUserMedia({audio:!0})}catch{console.warn("Failed to get mic for mixing")}if(Vt&&Vt.getAudioTracks().length>0){const Tt=Vt.getAudioTracks()[0],Ze=new(window.AudioContext||window.webkitAudioContext),Gt=Ze.createMediaStreamDestination(),nn=Ze.createMediaStreamSource(new MediaStream([Tt])),Be=Ze.createMediaStreamSource(new MediaStream([Se])),Te=Ze.createGain(),Je=Ze.createGain();Te.gain.value=1,Je.gain.value=1,nn.connect(Te).connect(Gt),Be.connect(Je).connect(Gt),Fe=Gt.stream.getAudioTracks()[0],Oe.currentAudioContext=Ze}else Fe=Se}N&&!Me.current&&(Me.current=N),$n.onended=()=>{console.log("Screen track ended by user/browser UI"),ue()},Oe.current=Pt;const lt=Fe?[Fe]:N?N.getAudioTracks():[],St=new MediaStream([$n,...lt]);if(U(St),j&&j.peerConnection){const Vt=j.peerConnection.getSenders(),Tt=Vt.find(Ze=>Ze.track&&Ze.track.kind==="video");if(Tt&&await Tt.replaceTrack($n),Fe){const Ze=Vt.find(Gt=>Gt.track&&Gt.track.kind==="audio");Ze&&(console.log("Replacing audio sender with mixed track..."),await Ze.replaceTrack(Fe))}if(!Tt){console.log("Audio-only -> Screen Share upgrade. Renegotiating...");const Ze=j.peer;if(a&&Ze){j.removeAllListeners("close");const Gt=a.call(Ze,St);Gt.on("stream",nn=>I(nn)),Gt.on("close",()=>he()),Gt.on("error",()=>he()),R(Gt)}}}}catch(Ne){console.error("Error starting screen share:",Ne),r("Failed to start screen share")}},ue=async()=>{if(Oe.current)if(console.log("Stopping screen share..."),Oe.currentAudioContext&&(Oe.currentAudioContext.close(),Oe.currentAudioContext=null),Oe.current.getTracks().forEach(me=>me.stop()),Oe.current=null,Me.current){console.log("Reverting to previous stream state...");const me=Me.current.getVideoTracks()[0],Ne=Me.current.getAudioTracks();if(j&&j.peerConnection){const _e=j.peerConnection.getSenders(),Ie=_e.find(Pt=>Pt.track&&Pt.track.kind==="video");if(me&&Ie)try{await Ie.replaceTrack(me)}catch{}const st=_e.find(Pt=>Pt.track&&Pt.track.kind==="audio");st&&Ne.length>0&&(console.log("Reverting audio sender to original mic..."),await st.replaceTrack(Ne[0]))}U(Me.current),Me.current=null}else{console.log("No stored camera stream, requesting new user media...");try{const me=await Re(!0);if(me&&j&&j.peerConnection){const Ne=me.getVideoTracks()[0],_e=j.peerConnection.getSenders().find(Ie=>Ie.track&&Ie.track.kind==="video");_e&&await _e.replaceTrack(Ne)}}catch(me){console.error("Failed to restore camera:",me)}}},je={startCall:We,answerCall:ke,endCall:he,toggleAudio:ee,toggleVideo:qe,callStatus:m,incomingCall:y,outgoingCallUser:x,localStream:N,remoteStream:F,isMuted:A,isVideoOff:L,activeCall:j,isScreenSharing:!!Oe.current,toggleScreenShare:K,availableDevices:ae,selectedMicId:J,selectedCameraId:Ee,setSelectedMicId:W,setSelectedCameraId:Pe,playSound:$,customSounds:H,isDeafened:M,toggleDeafen:ve,addSound:w,removeSound:E};return c.jsx(Qk.Provider,{value:je,children:t})},mO=240*1e3,pO=t=>{const e=C.useRef(null);C.useEffect(()=>{if(!t)return;const n=async()=>{try{await gr(Ae(de,"users",t),{lastSeen:mt(),isOnline:!0},{merge:!0})}catch(a){console.error("Error updating presence:",a)}};n(),e.current=setInterval(n,mO);const r=()=>{navigator.sendBeacon&&n()};return window.addEventListener("beforeunload",r),()=>{e.current&&clearInterval(e.current),window.removeEventListener("beforeunload",r)}},[t])},Xk=(t,e=10)=>{if(!t)return!1;const n=t.toMillis?t.toMillis():new Date(t).getTime(),r=Date.now(),a=e*60*1e3;return r-n<a},j1=({user:t,isOpen:e,onClose:n,onMessage:r})=>{if(!t)return null;const a=t.presence!=="invisible"&&Xk(t.lastSeen),o=h=>({admin:"#f23f42",moderator:"#faa81a",member:"#80848e"})[h]||"#80848e",{startCall:u}=Ic();return c.jsx(Es,{isOpen:e,onClose:n,title:"",size:"sm",showCloseButton:!1,children:c.jsxs("div",{className:"relative overflow-hidden rounded-lg -m-6 min-h-[400px] flex flex-col",children:[c.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-colors",style:{backgroundColor:t.themeColor||"#6366f1",backgroundImage:t.bannerUrl?`url(${t.bannerUrl})`:`linear-gradient(to bottom right, ${t.themeColor||"#6366f1"}, #000)`}}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/95 via-black/50 to-transparent"}),c.jsx("button",{onClick:n,className:"absolute top-4 right-4 p-2 bg-black/40 hover:bg-black/60 rounded-full text-white/80 hover:text-white transition-colors z-20 backdrop-blur-sm",children:c.jsxs("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{fill:"none",d:"M0 0h24v24H0z"}),c.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})]})}),c.jsxs("div",{className:"relative z-10 p-6 mt-auto flex flex-col items-center text-center",children:[c.jsxs("div",{className:"relative group mb-4",children:[t.photoUrl?c.jsx("img",{src:t.photoUrl,alt:t.displayName,className:"w-32 h-32 rounded-full border-4 object-cover shadow-2xl",style:{borderColor:t.themeColor||"#1e1f22"},onError:h=>{h.target.style.display="none",h.target.nextSibling.style.display="flex"}},t.photoUrl):null,c.jsx("div",{className:"w-32 h-32 rounded-full border-4 flex items-center justify-center text-white font-bold text-5xl shadow-2xl",style:{display:t.photoUrl?"none":"flex",borderColor:t.themeColor||"#1e1f22",backgroundColor:t.themeColor||"#6366f1"},children:t.displayName?.[0]?.toUpperCase()||"U"})]}),c.jsxs("div",{className:"space-y-1 w-full",children:[c.jsxs("h2",{className:"text-3xl font-bold text-white flex items-center justify-center gap-2 drop-shadow-md",children:[t.displayName||"Unknown",(t.role==="admin"||t.role==="premium")&&c.jsx("div",{className:"text-brand-primary drop-shadow-none",title:"Premium Member",children:c.jsx(Fo,{size:24,color:t.themeColor||"#6366f1"})})]}),c.jsx("div",{className:"flex justify-center mt-2",children:c.jsx("span",{className:"px-4 py-1.5 rounded-full text-sm font-semibold border backdrop-blur-md shadow-lg",style:{backgroundColor:`${o(t.role)}30`,color:"#fff",borderColor:`${o(t.role)}80`},children:t.role?.charAt(0).toUpperCase()+t.role?.slice(1)})})]}),c.jsx("div",{className:"flex justify-center gap-2 mt-4 flex-wrap",children:(()=>{const h=new Set(t.badges||[]);t.role==="admin"&&h.add("admin");const m=Array.from(h).map(p=>E1[p]).filter(Boolean);return m.length===0?null:c.jsx("div",{className:"p-1.5 rounded-xl bg-black/40 backdrop-blur-md border border-white/10 flex gap-2",children:m.map(p=>{const y=p.icon;return c.jsxs("div",{className:"relative group cursor-help p-1 hover:bg-white/10 rounded transition-colors",children:[c.jsx(y,{size:20,color:p.color}),c.jsxs("div",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 px-2 py-1 bg-black text-white text-xs rounded shadow-lg whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-50",children:[c.jsx("div",{className:"font-bold",children:p.label}),p.description&&c.jsx("div",{className:"text-gray-300 font-normal text-[10px]",children:p.description}),c.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-black"})]})]},p.id)})})})()}),c.jsxs("div",{className:"flex items-center gap-3 mt-4 bg-black/30 px-4 py-2 rounded-full backdrop-blur-sm border border-white/5",children:[c.jsx("div",{className:Bt("w-3 h-3 rounded-full shadow-lg shadow-white/20",a&&(t.presence==="online"||!t.presence)?"bg-green-500":a&&t.presence==="idle"?"bg-yellow-500":a&&t.presence==="dnd"?"bg-red-500":"bg-gray-500")}),t.status?c.jsxs("span",{className:"text-sm text-gray-200 flex gap-2",children:[c.jsx("span",{children:t.status.emoji}),c.jsx("span",{children:t.status.text})]}):c.jsx("span",{className:"text-sm text-gray-300",children:a?t.presence==="idle"?"Idle":t.presence==="dnd"?"Do Not Disturb":"Online":"Offline"})]}),t.id!==yn().currentUser?.uid&&c.jsxs("div",{className:"flex gap-4 justify-center mt-6 w-full max-w-xs",children:[c.jsxs("button",{onClick:()=>r&&r(t),className:"flex-1 py-3 bg-white text-black font-bold rounded-xl hover:bg-gray-200 transition-colors shadow-lg flex items-center justify-center gap-2",children:[c.jsx($M,{size:20})," Message"]}),c.jsx("button",{onClick:()=>u(t,"voice"),className:"p-3 bg-black/50 text-white rounded-xl hover:bg-black/70 border border-white/10 transition-colors backdrop-blur-sm",title:"Voice Call",children:c.jsx(qM,{size:22})}),c.jsx("button",{onClick:()=>u(t,"video"),className:"p-3 bg-black/50 text-white rounded-xl hover:bg-black/70 border border-white/10 transition-colors backdrop-blur-sm",title:"Video Call",children:c.jsx(fd,{size:22})})]}),t.bio&&c.jsxs("div",{className:"mt-6 w-full text-left bg-black/20 p-4 rounded-xl backdrop-blur-sm border border-white/5",children:[c.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase mb-2 tracking-wider",children:"About Me"}),c.jsx("p",{className:"text-gray-200 text-sm leading-relaxed whitespace-pre-wrap",children:t.bio})]}),c.jsxs("div",{className:"mt-4 text-xs text-gray-500 font-medium uppercase tracking-widest",children:["Member since ",t.createdAt?new Date(t.createdAt.seconds*1e3).toLocaleDateString("en-US",{month:"short",year:"numeric"}):"Unknown"]})]})]})})},gc=({isOpen:t,onClose:e,onConfirm:n,title:r="Confirm Action",message:a="Are you sure you want to proceed?",confirmText:o="Confirm",cancelText:u="Cancel",variant:h="danger"})=>{const m=()=>{n(),e()};return c.jsx(Es,{isOpen:t,onClose:e,title:r,size:"sm",children:c.jsxs("div",{className:"space-y-6",children:[c.jsx("p",{className:"text-dark-text",children:a}),c.jsxs("div",{className:"flex gap-3 justify-end",children:[c.jsx(ot,{variant:"secondary",onClick:e,children:u}),c.jsx(ot,{variant:h,onClick:m,children:o})]})]})})},gO=()=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let n=0;n<8;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},vO=({isOpen:t,onClose:e,serverId:n})=>{const[r,a]=C.useState(""),[o,u]=C.useState(!1),[h,m]=C.useState(!1),[p,y]=C.useState(!1),{success:b,error:x}=Kr(),k=async()=>{u(!0);try{const R=gO();await gr(Ae(de,"inviteCodes",R),{serverId:n,createdAt:mt(),expiresAt:new Date(Date.now()+(p?365*24*60*60*1e3:1440*60*1e3)),maxUses:p?-1:1,uses:0,isActive:!0,isUnlimited:p}),a(R),b("Invite code generated!")}catch(R){console.error("Error generating invite:",R),x("Failed to generate invite code")}finally{u(!1)}},j=()=>{navigator.clipboard.writeText(r),m(!0),b("Copied to clipboard!"),setTimeout(()=>m(!1),2e3)};return c.jsx(Es,{isOpen:t,onClose:e,title:"Invite Code",size:"sm",children:c.jsx("div",{className:"space-y-4",children:r?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-dark-bg p-4 rounded-lg text-center",children:[c.jsx("div",{className:"text-3xl font-mono font-bold text-brand-primary mb-2",children:r}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(ot,{variant:"secondary",onClick:j,className:"flex-1 flex items-center justify-center gap-2",children:h?c.jsxs(c.Fragment,{children:[c.jsx(Ho,{size:20}),"Copied!"]}):c.jsxs(c.Fragment,{children:[c.jsx(LT,{size:20}),"Copy Code"]})}),c.jsx(ot,{variant:"secondary",onClick:()=>{a(""),m(!1),y(!1)},className:"flex items-center justify-center gap-2 px-4",title:"Generate new code",children:c.jsx(c7,{size:20})})]})]}),c.jsxs("div",{className:"text-xs text-dark-muted space-y-1",children:[c.jsxs("div",{children:[" ",p?"Expires in 1 year":"Expires in 24 hours"]}),c.jsxs("div",{children:[" ",p?"Unlimited uses":"One-time use only"]}),c.jsx("div",{children:" Share with trusted users"})]}),c.jsx(ot,{variant:"secondary",onClick:e,className:"w-full",children:"Close"})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"text-dark-text text-sm",children:"Generate an invite code for this server."}),c.jsxs("label",{className:"flex items-center gap-2 p-3 rounded bg-dark-bg cursor-pointer hover:bg-opacity-80 transition-colors",children:[c.jsx("input",{type:"checkbox",checked:p,onChange:R=>y(R.target.checked),className:"w-4 h-4 rounded border-gray-600 bg-dark-bg text-brand-primary focus:ring-brand-primary"}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-white text-sm font-medium",children:"Unlimited Uses"}),c.jsx("span",{className:"text-dark-muted text-xs",children:"Code will not expire after one use"})]})]})]}),c.jsx(ot,{variant:"primary",onClick:k,disabled:o,className:"w-full",children:o?"Generating...":"Generate Invite Code"})]})})})},yO=[{emoji:"",text:"Gaming",type:"gaming"},{emoji:"",text:"Working",type:"working"},{emoji:"",text:"Listening to music",type:"music"},{emoji:"",text:"Watching",type:"watching"},{emoji:"",text:"Eating",type:"eating"},{emoji:"",text:"AFK",type:"afk"},{emoji:"",text:"Focusing",type:"focusing"},{emoji:"",text:"Studying",type:"studying"}],$w={online:{color:"bg-green-500",label:"Online",icon:""},idle:{color:"bg-yellow-500",label:"Idle",icon:""},dnd:{color:"bg-red-500",label:"Do Not Disturb",icon:""},invisible:{color:"bg-gray-500",label:"Invisible",icon:""},offline:{color:"bg-gray-500",label:"Offline",icon:""}},bO=t=>$w[t]||$w.offline,Wk=({status:t,size:e="md",className:n})=>{const r=bO(t),a={sm:"w-2.5 h-2.5",md:"w-3 h-3",lg:"w-4 h-4"};return t==="invisible"?null:c.jsx("div",{className:Bt("rounded-full border-2 border-dark-bg",r.color,a[e]||a.md,n),title:r.label})},xO=({dm:t,currentUserId:e,isSelected:n,unreadCount:r,onClick:a,onContextMenu:o})=>{const u=t.participants.find(p=>p!==e),[h,m]=C.useState(null);return C.useEffect(()=>{(async()=>{if(u)try{const y=await Od(Ae(de,"users",u));y.exists()&&m({id:y.id,...y.data()})}catch(y){console.error("Error fetching DM user:",y)}})()},[u]),h?c.jsxs("button",{onClick:a,onContextMenu:o,className:Bt("w-full flex items-center gap-3 px-2 py-2 rounded mb-1 group relative","text-dark-muted hover:bg-dark-hover hover:text-dark-text","transition-colors duration-150",n&&"bg-dark-hover text-dark-text"),children:[c.jsxs("div",{className:"relative",children:[h.photoUrl?c.jsx("img",{src:h.photoUrl,alt:h.displayName,className:"w-8 h-8 rounded-full object-cover"}):c.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white text-sm font-bold",children:h.displayName?.[0]?.toUpperCase()}),r>0&&c.jsx("div",{className:"absolute -top-1 -right-1 min-w-4 h-4 bg-red-500 rounded-full flex items-center justify-center border-2 border-dark-sidebar pointer-events-none z-10",children:c.jsx("span",{className:"text-white text-[9px] font-bold px-0.5",children:r>9?"9+":r})})]}),c.jsxs("div",{className:"flex-1 text-left overflow-hidden",children:[c.jsxs("div",{className:"text-sm font-medium truncate flex justify-between items-center",children:[c.jsx("span",{children:h.displayName}),t.updatedAt&&c.jsx("span",{className:"text-[10px] text-gray-500 hidden group-hover:block",children:up(t.updatedAt)})]}),c.jsx("div",{className:"text-xs truncate opacity-70",children:t.lastMessage?.text||"Start a conversation"})]})]}):null},_O=({dms:t,unreadDms:e={},selectedDmId:n,onSelectDm:r})=>{const{currentUser:a}=yn(),[o,u]=C.useState(null),[h,m]=C.useState([]),p=(x,k)=>{x.preventDefault(),u({x:x.pageX,y:x.pageY,dmId:k.id})},y=async x=>{if(m(k=>[...k,x]),u(null),!!a)try{const k=Ae(de,"dms",x);await it(k,{hiddenFor:Vd(a.uid)}),n===x&&r(null)}catch(k){console.error("Error deleting DM:",k),m(j=>j.filter(R=>R!==x))}};C.useEffect(()=>{const x=()=>u(null);return window.addEventListener("click",x),()=>window.removeEventListener("click",x)},[]);const b=t?.filter(x=>!h.includes(x.id))||[];return b.length===0?c.jsxs("div",{className:"px-4 py-8 text-center text-dark-muted text-sm",children:[c.jsx("p",{children:"No conversations yet."}),c.jsx("p",{className:"mt-2",children:"Start a DM from the friends list!"})]}):c.jsxs("div",{className:"flex-1 overflow-y-auto py-3",children:[c.jsxs("div",{className:"px-2",children:[c.jsx("div",{className:"text-xs font-semibold text-dark-muted uppercase px-2 mb-2 flex justify-between items-center",children:c.jsx("span",{children:"Direct Messages"})}),c.jsx("div",{className:"space-y-0.5",children:b.map(x=>c.jsx(xO,{dm:x,currentUserId:a.uid,isSelected:n===x.id,unreadCount:e[x.id]?.count||0,onClick:()=>r(x),onContextMenu:k=>p(k,x)},x.id))})]}),o&&c.jsx("div",{className:"fixed bg-dark-sidebar border border-dark-hover shadow-xl rounded-md z-50 py-1 min-w-[160px]",style:{top:o.y,left:o.x},children:c.jsxs("button",{onClick:()=>y(o.dmId),className:"w-full text-left px-4 py-2 hover:bg-red-500/10 text-red-400 hover:text-red-500 text-sm flex items-center gap-2 transition-colors",children:[c.jsx(Vi,{size:16}),"Delete Conversation"]})})]})};let X0=null;const mp=()=>(X0||(X0=new(window.AudioContext||window.webkitAudioContext)),X0),vc=async(t,e,n="sine",r=.3)=>{try{const a=mp();a.state==="suspended"&&await a.resume();const o=a.createOscillator(),u=a.createGain();o.connect(u),u.connect(a.destination),o.frequency.value=t,o.type=n,u.gain.setValueAtTime(r,a.currentTime),u.gain.exponentialRampToValueAtTime(.01,a.currentTime+e),o.start(a.currentTime),o.stop(a.currentTime+e)}catch(a){console.warn("[VoiceSound] Failed to play tone:",a)}},qw=()=>{mp(),setTimeout(()=>vc(440,.1,"sine",.2),0),setTimeout(()=>vc(554,.15,"sine",.25),80)},Gw=()=>{mp(),setTimeout(()=>vc(554,.1,"sine",.2),0),setTimeout(()=>vc(440,.15,"sine",.15),80)},W0=()=>{mp(),setTimeout(()=>vc(880,.08,"sine",.2),0),setTimeout(()=>vc(1100,.12,"sine",.25),60)},I1=(t,e={})=>{const[n,r]=C.useState(!1),a=C.useRef(null),o=C.useRef(null),u=C.useRef(null),h=e.threshold??30,m=e.interval??100;return C.useEffect(()=>{const p=()=>{if(u.current&&(clearInterval(u.current),u.current=null),a.current){const x=a.current;x.state!=="closed"&&x.close().catch(k=>console.warn("Error closing AudioContext:",k)),a.current=null}o.current=null,r(!1)};if(!t){p();return}const y=t.getAudioTracks();if(y.length===0){p();return}const b=y[0];if(!b.enabled||b.muted){p();return}try{const x=window.AudioContext||window.webkitAudioContext,k=new x,j=k.createAnalyser();j.fftSize=256,j.smoothingTimeConstant=.5,k.createMediaStreamSource(t).connect(j),a.current=k,o.current=j,k.state==="suspended"&&k.resume().then(()=>{console.log("[useSpeakingIndicator] AudioContext resumed")}).catch(U=>console.error("[useSpeakingIndicator] Failed to resume AudioContext:",U));const N=new Uint8Array(j.frequencyBinCount);u.current=setInterval(()=>{if(!o.current)return;o.current.getByteFrequencyData(N);let U=0;for(let O=0;O<N.length;O++)U+=N[O];const I=U/N.length>h;r(I)},m)}catch(x){console.error("[useSpeakingIndicator] Error initializing audio analysis:",x),p()}return p},[t,h,m]),n},Jk=C.createContext(),Dc=()=>{const t=C.useContext(Jk);if(!t)throw new Error("useVoiceChannel must be used within VoiceChannelProvider");return t},wO=({children:t})=>{const{currentUser:e,userProfile:n}=yn(),{currentServer:r,channels:a}=Za(),[o,u]=C.useState(null),[h,m]=C.useState(null),[p,y]=C.useState([]),[b,x]=C.useState(null),[k,j]=C.useState(null),[R,N]=C.useState(new Map),[U,F]=C.useState(new Map),[I,O]=C.useState([]),[B,H]=C.useState(null),[w,E]=C.useState([]),[A,P]=C.useState(null),[L,z]=C.useState(new Map),[M,se]=C.useState(null),[ae,G]=C.useState(!1),[J,W]=C.useState(!1),[Ee,Pe]=C.useState(!1),[$,X]=C.useState(!1),[oe,fe]=C.useState(!1),Ce=C.useRef(null),Ue=C.useRef(null),re=C.useRef(null),Le=C.useRef(null),Re=C.useRef(new Map),We=C.useRef(new Map),ke=C.useRef([]),he=C.useRef(null),ee=C.useRef(null),qe=C.useRef(null),ve=C.useRef(null),Oe=C.useRef(null),Me=C.useRef([]);C.useEffect(()=>{ve.current=o},[o]),C.useEffect(()=>{Oe.current=h},[h]);const K=C.useCallback(Be=>{if(Be&&Be.type==="SOUND_EFFECT"&&Be.payload?.src){console.log("[VoiceChannel] Received sound effect:",Be.payload.name);const Te=new Audio(Be.payload.src);Te.volume=.5,ke.current.push(Te),Te.onended=()=>{ke.current=ke.current.filter(Je=>Je!==Te)},Te.play().catch(Je=>console.error("[VoiceChannel] Error playing sound:",Je))}},[]);C.useEffect(()=>{if(!e)return;const Be=new qk;return Be.on("open",Te=>{console.log("[VoiceChannel] My Peer ID:",Te),Ue.current=Te,Ce.current=Be}),Be.on("connection",Te=>{console.log("[VoiceChannel] Incoming data connection from:",Te.peer),Te.on("open",()=>{We.current.set(Te.peer,Te)}),Te.on("data",K),Te.on("close",()=>{We.current.delete(Te.peer)})}),Be.on("call",Te=>{console.log("[VoiceChannel] Incoming call from:",Te.peer);const Je=re.current;Je?Te.answer(Je):Te.answer(),Te.on("stream",et=>{console.log("[VoiceChannel] Received remote stream from:",Te.peer),F(gt=>new Map(gt).set(Te.peer,et))}),Te.on("close",()=>{F(et=>{const gt=new Map(et);return gt.delete(Te.peer),gt})}),Re.current.set(Te.peer,Te)}),Be.on("error",Te=>{if(console.error("[VoiceChannel] Peer error details:",{type:Te.type,message:Te.message,targetPeer:Te.peer}),Te.type==="peer-unavailable"||Te.message?.includes("Could not connect to peer")){let Je=Te.peer;if(!Je){const et=Te.message.match(/peer\s+([a-zA-Z0-9-]+)/);et&&(Je=et[1])}Je&&ve.current&&Oe.current&&(console.log("[VoiceChannel] Proactively removing ghost peer:",Je),y(et=>{const gt=et.find(dt=>dt.peerId===Je);if(gt&&gt.odaId){console.log("[VoiceChannel] Cleaning up Firestore for ghost:",gt.displayName);const dt=Ae(de,"servers",Oe.current,"channels",ve.current,"voiceParticipants",gt.odaId);Yr(dt).catch(()=>{})}return et.filter(dt=>dt.peerId!==Je)}))}}),()=>{ke.current.forEach(Te=>{try{Te.pause(),Te.currentTime=0}catch{}}),ke.current=[],Be.destroy(),Ce.current=null,Ue.current=null}},[e]);const ue=C.useCallback(async()=>{if(!navigator.mediaDevices){console.log("[VoiceChannel] mediaDevices API not available - skipping device enumeration");return}try{const Be=await navigator.mediaDevices.enumerateDevices(),Te=Be.filter(et=>et.kind==="audioinput"),Je=Be.filter(et=>et.kind==="videoinput");O(Te),E(Je),!B&&Te.length>0&&H(Te[0].deviceId),!A&&Je.length>0&&P(Je[0].deviceId)}catch(Be){console.error("[VoiceChannel] Failed to refresh devices:",Be)}},[B,A]);C.useEffect(()=>{if(!navigator.mediaDevices){console.log("[VoiceChannel] mediaDevices API not available - skipping device enumeration");return}return ue(),navigator.mediaDevices.ondevicechange=ue,()=>{navigator.mediaDevices&&(navigator.mediaDevices.ondevicechange=null)}},[ue]);const me=I1(!ae&&oe&&b?b:null,{threshold:15,interval:50});C.useEffect(()=>{if(!re.current||!oe||ae)return;const Be=re.current.getAudioTracks()[0];Be&&(me?Be.enabled||(Be.enabled=!0,console.log("[VAD] Audio enabled - speaking detected")):Be.enabled&&(Be.enabled=!1,console.log("[VAD] Audio disabled - silence detected")))},[me,oe,ae]);const Ne=C.useCallback(async Be=>{if(H(Be),!(!o||!re.current))try{const Te=await navigator.mediaDevices.getUserMedia({audio:{deviceId:{exact:Be}},video:Ee});re.current&&re.current.getTracks().forEach(et=>et.stop()),re.current=Te,x(Te);const Je=Te.getAudioTracks()[0];Je&&(Je.enabled=!ae),Re.current.forEach((et,gt)=>{const dt=Ce.current.call(gt,Te);dt&&(dt.on("stream",kt=>{F(Ft=>new Map(Ft).set(gt,kt))}),Re.current.set(gt,dt))}),console.log("[VoiceChannel] Switched to audio device:",Be)}catch(Te){console.error("[VoiceChannel] Failed to switch audio device:",Te)}},[o,Ee,ae]),_e=C.useCallback(async Be=>{if(P(Be),!(!o||!re.current||!Ee))try{const Je=(await navigator.mediaDevices.getUserMedia({audio:B?{deviceId:{exact:B}}:!0,video:{deviceId:{exact:Be}}})).getVideoTracks()[0];if(Je){const et=re.current.getVideoTracks()[0];et&&et.stop(),et&&re.current.removeTrack(et),re.current.addTrack(Je),x(new MediaStream(re.current.getTracks())),Re.current.forEach((gt,dt)=>{const kt=Ce.current.call(dt,re.current);kt&&(kt.on("stream",Ft=>{F(xt=>new Map(xt).set(dt,Ft))}),Re.current.set(dt,kt))})}console.log("[VoiceChannel] Switched to video device:",Be)}catch(Te){console.error("[VoiceChannel] Failed to switch video device:",Te)}},[o,Ee,B]),Ie=C.useRef([]),st=C.useRef(new Set);C.useEffect(()=>{if(!o||!h){y([]),Ie.current=[],st.current=new Set;return}const Be=wt(de,"servers",h,"channels",o,"voiceParticipants"),Te=qr(Be,ym("joinedAt","asc")),Je=vr(Te,et=>{const gt=[];et.forEach(He=>{gt.push({odaId:He.id,...He.data()})});const dt=new Set(Ie.current.map(He=>He.odaId)),kt=new Set(gt.map(He=>He.odaId));gt.forEach(He=>{!dt.has(He.odaId)&&He.odaId!==e?.uid&&qw()}),Ie.current.forEach(He=>{!kt.has(He.odaId)&&He.odaId!==e?.uid&&Gw()});const Ft=new Set(gt.filter(He=>He.isScreenSharing).map(He=>He.odaId));Ft.forEach(He=>{!st.current.has(He)&&He!==e?.uid&&W0()}),Ie.current=gt,st.current=Ft;const xt=Date.now(),on=gt.filter(He=>{if(He.odaId===e?.uid)return!0;const vt=He.lastHeartbeat?.toMillis?He.lastHeartbeat.toMillis():He.lastHeartbeat||(He.joinedAt?.toMillis?He.joinedAt.toMillis():Date.now());if(xt-vt>3e4){console.log("[VoiceChannel] Filtering ghost participant locally (no activity):",He.displayName);const Xn=Ae(de,"servers",h,"channels",o,"voiceParticipants",He.odaId);return Yr(Xn).catch(()=>{}),!1}return!0});F(He=>{const vt=new Map(He);for(const[Ht]of He)on.some(qi=>qi.peerId===Ht||qi.odaId===Ht)||vt.delete(Ht);return vt}),on.forEach(He=>{if(He.odaId!==e?.uid&&He.peerId&&!Re.current.has(He.peerId)&&Ce.current&&re.current){console.log("[VoiceChannel] Calling peer:",He.peerId);const vt=Ce.current.call(He.peerId,re.current);if(vt&&(vt.on("stream",Ht=>{F(Xn=>new Map(Xn).set(He.peerId,Ht))}),vt.on("close",()=>{F(Ht=>{const Xn=new Map(Ht);return Xn.delete(He.peerId),Xn})}),Re.current.set(He.peerId,vt)),!We.current.has(He.peerId)){const Ht=Ce.current.connect(He.peerId);Ht&&(Ht.on("open",()=>{We.current.set(He.peerId,Ht)}),Ht.on("data",K),Ht.on("close",()=>{We.current.delete(He.peerId)}))}}});const zn=new Set(on.map(He=>He.peerId));Re.current.forEach((He,vt)=>{if(!zn.has(vt)){He.close(),Re.current.delete(vt);const Ht=We.current.get(vt);Ht&&(Ht.close(),We.current.delete(vt))}}),y(on),Ie.current=on,Me.current=gt});return()=>Je()},[o,h,e,K]);const Pt=C.useCallback(async Be=>{if(!e||!r||!Ce.current||!Ue.current){console.error("[VoiceChannel] Cannot join: missing requirements");return}try{const Te=await navigator.mediaDevices.getUserMedia({audio:B?{deviceId:{exact:B}}:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0},video:!1});x(Te),re.current=Te;const Je=Ae(de,"servers",r,"channels",Be,"voiceParticipants",e.uid);await gr(Je,{odaId:e.uid,peerId:Ue.current,displayName:n?.displayName||e.displayName||"User",photoUrl:n?.photoUrl||n?.photoURL||null,joinedAt:mt(),isMuted:!1,isVideoOn:!1,isScreenSharing:!1});const et=async()=>{if(o&&e&&h)try{const kt=Ae(de,"servers",h,"channels",o,"voiceParticipants",e.uid);await gr(kt,{lastHeartbeat:mt()},{merge:!0})}catch(kt){console.error("[VoiceChannel] Heartbeat failed:",kt)}};await et(),he.current=setInterval(et,5e3),console.log("[VoiceChannel] Heartbeat started");const gt=async()=>{if(!ve.current||!Oe.current)return;const kt=Date.now(),Ft=Me.current;Ft.length>0&&console.log(`[VoiceChannel] Ghost Monitor: checking ${Ft.length} total entries...`),Me.current.forEach(xt=>{if(xt.odaId===e?.uid)return;const on=xt.lastHeartbeat||xt.joinedAt,zn=on?.toMillis?on.toMillis():on||0;if(zn===0)return;const He=kt-zn;if(He>2e4){console.log("[VoiceChannel] Interval cleanup removing ghost:",xt.displayName,`(${Math.round(He/1e3)}s idle)`);const vt=Ae(de,"servers",Oe.current,"channels",ve.current,"voiceParticipants",xt.odaId);Yr(vt).catch(Ht=>console.error("[VoiceChannel] Failed to delete ghost:",Ht)),y(Ht=>Ht.filter(Xn=>Xn.odaId!==xt.odaId))}})};qe.current=setInterval(gt,1e4),console.log("[VoiceChannel] Global cleanup interval started");const dt=async()=>{if(!Re.current.size){se(null);return}let kt=0,Ft=0;const xt=Array.from(Re.current.values()).map(async on=>{if(on.peerConnection)try{const zn=await on.peerConnection.getStats();let He=!1;zn.forEach(vt=>{vt.type==="candidate-pair"&&vt.state==="succeeded"&&(He=!0,vt.currentRoundTripTime!==void 0?(kt+=Math.round(vt.currentRoundTripTime*1e3),Ft++):vt.roundTripTime!==void 0&&(kt+=Math.round(vt.roundTripTime*1e3),Ft++))}),He||zn.forEach(vt=>{if(vt.type==="candidate-pair"&&(vt.currentRoundTripTime||vt.roundTripTime)){const Ht=vt.currentRoundTripTime||vt.roundTripTime;kt+=Math.round(Ht*1e3),Ft++}})}catch(zn){console.warn("[VoiceChannel] Stats error:",zn)}});if(await Promise.all(xt),Ft>0){const on=Math.round(kt/Ft);se(on)}};ee.current=setInterval(dt,2e3),u(Be),m(r),G(!1),Pe(!1),X(!1),qw(),console.log("[VoiceChannel] Joined channel:",Be)}catch(Te){console.error("[VoiceChannel] Failed to join:",Te)}},[e,r,n,B]),$n=C.useRef(!1),Se=C.useCallback(async()=>{if(!($n.current||!o||!e||!h))try{$n.current=!0,he.current&&(clearInterval(he.current),he.current=null,console.log("[VoiceChannel] Heartbeat stopped")),qe.current&&(clearInterval(qe.current),qe.current=null),ee.current&&(clearInterval(ee.current),ee.current=null);const Be=Ae(de,"servers",h,"channels",o,"voiceParticipants",e.uid);await Yr(Be),re.current&&(re.current.getTracks().forEach(Te=>{Te.stop(),console.log("[VoiceChannel] Stopped track:",Te.kind)}),re.current=null,x(null)),Le.current&&(Le.current.getTracks().forEach(Te=>{Te.stop(),console.log("[VoiceChannel] Stopped screen track:",Te.kind)}),Le.current=null,j(null)),Re.current.forEach(Te=>Te.close()),Re.current.clear(),We.current.forEach(Te=>Te.close()),We.current.clear(),F(new Map),u(null),m(null),y([]),Pe(!1),X(!1),G(!1),W(!1),ke.current.length>0&&(console.log("[VoiceChannel] Stopping",ke.current.length,"active sounds"),ke.current.forEach(Te=>{try{Te.pause(),Te.currentTime=0}catch(Je){console.error("[VoiceChannel] Error stopping sound:",Je)}}),ke.current=[]),Gw(),console.log("[VoiceChannel] Left channel - all media stopped")}catch(Be){console.error("[VoiceChannel] Failed to leave:",Be)}finally{setTimeout(()=>{$n.current=!1},500)}},[o,e,h]);C.useEffect(()=>{const Be=()=>{o&&Se()};return window.addEventListener("beforeunload",Be),()=>window.removeEventListener("beforeunload",Be)},[o,Se]);const Fe=C.useCallback(()=>{if(re.current){const Be=re.current.getAudioTracks()[0];if(Be){const Te=!ae;if(G(Te),Te?Be.enabled=!1:oe||(Be.enabled=!0),o&&e&&h){const Je=Ae(de,"servers",h,"channels",o,"voiceParticipants",e.uid);gr(Je,{isMuted:Te},{merge:!0})}}}},[o,e,h,ae,oe]),lt=C.useCallback(()=>{W(Be=>{const Te=!Be;return Te?ae||Fe():ae&&Fe(),U.forEach(Je=>{Je.getAudioTracks().forEach(et=>{et.enabled=!Te})}),Te})},[U,ae,Fe]),St=C.useCallback(async()=>{if(!(!re.current||!o))try{if(Ee){const Be=re.current.getVideoTracks()[0];Be&&(Be.stop(),re.current.removeTrack(Be)),Pe(!1)}else{const Te=(await navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0];re.current.addTrack(Te),x(new MediaStream(re.current.getTracks())),Pe(!0),Re.current.forEach((Je,et)=>{const gt=Ce.current.call(et,re.current);gt&&(gt.on("stream",dt=>{F(kt=>new Map(kt).set(et,dt))}),Re.current.set(et,gt))})}if(e&&h){const Be=Ae(de,"servers",h,"channels",o,"voiceParticipants",e.uid);gr(Be,{isVideoOn:!Ee},{merge:!0})}}catch(Be){console.error("[VoiceChannel] Failed to toggle video:",Be)}},[Ee,o,e,h]),Vt=C.useCallback(async(Be=null)=>{if(o)try{if($||Be===null&&Le.current){if(Le.current&&(Le.current.getTracks().forEach(xt=>xt.stop()),Le.current=null),X(!1),j(null),e&&h){const xt=Ae(de,"servers",h,"channels",o,"voiceParticipants",e.uid);gr(xt,{isScreenSharing:!1},{merge:!0})}return}let Te;const Je={width:Be?.width||960,height:Be?.height||540,frameRate:Be?.frameRate||15};console.log("[VoiceChannel] Screen share starting with constraints:",Je),Be?.sourceId?Te=await navigator.mediaDevices.getUserMedia({audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:Be.sourceId,maxWidth:Je.width,maxHeight:Je.height,maxFrameRate:Je.frameRate}}}):Te=await navigator.mediaDevices.getDisplayMedia({video:{width:{ideal:Je.width},height:{ideal:Je.height},frameRate:{ideal:Je.frameRate},cursor:"always"},audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!1}});const et=Te.getVideoTracks()[0],gt=Te.getAudioTracks()[0],dt=re.current?.getAudioTracks()[0];let kt=null;if(dt&&gt){console.log("[VoiceChannel] Mixing microphone and system audio");try{const xt=new(window.AudioContext||window.webkitAudioContext),on=xt.createMediaStreamDestination(),zn=xt.createMediaStreamSource(new MediaStream([dt])),He=xt.createMediaStreamSource(new MediaStream([gt])),vt=xt.createGain(),Ht=xt.createGain();vt.gain.value=1,Ht.gain.value=.5,zn.connect(vt),He.connect(Ht),vt.connect(on),Ht.connect(on),kt=on.stream.getAudioTracks()[0]}catch(xt){console.error("[VoiceChannel] Audio mixing failed, using mic only:",xt),kt=dt}}else dt?(console.log("[VoiceChannel] Using microphone audio only"),kt=dt):gt&&(console.log("[VoiceChannel] Using system audio only"),kt=gt);const Ft=new MediaStream([et]);if(kt&&Ft.addTrack(kt),Le.current=Ft,et.onended=()=>{if(X(!1),j(null),Le.current=null,e&&h&&o){const xt=Ae(de,"servers",h,"channels",o,"voiceParticipants",e.uid);gr(xt,{isScreenSharing:!1},{merge:!0})}},Re.current.forEach((xt,on)=>{const zn=Ce.current.call(on,Ft);zn&&zn.on("stream",He=>{F(vt=>new Map(vt).set(on,He))})}),X(!0),j(Ft),W0(),e&&h){const xt=Ae(de,"servers",h,"channels",o,"voiceParticipants",e.uid);gr(xt,{isScreenSharing:!0},{merge:!0})}}catch(Te){console.error("[VoiceChannel] Failed to toggle screen share:",Te)}},[$,o,e,h,re,Le,Re,We,U,F,X,j,W0]),Tt=a?.filter(Be=>Be.type==="voice")||[];C.useEffect(()=>()=>{o&&Se()},[o,h]);const{customSounds:Ze}=R1(),Gt=C.useCallback(Be=>{const Te=Ze.find(et=>et.id===Be);if(!Te)return;const Je=new Audio(Te.src);Je.volume=.5,ke.current.push(Je),Je.onended=()=>{ke.current=ke.current.filter(et=>et!==Je)},Je.play().catch(et=>console.error("[VoiceChannel] Error playing sound locally:",et)),We.current.forEach((et,gt)=>{et.open&&(console.log("[VoiceChannel] Broadcasting sound to:",gt),et.send({type:"SOUND_EFFECT",payload:{src:Te.src,name:Te.name}}))})},[Ze]),nn={currentVoiceChannel:o,connectedServerId:h,participants:p,localStream:b,screenStream:k,remoteStreams:U,voiceChannels:Tt,currentPing:M,isMuted:ae,isDeafened:J,isVideoOn:Ee,isScreenSharing:$,audioDevices:I,selectedAudioDeviceId:B,vadEnabled:oe,joinVoiceChannel:Pt,leaveVoiceChannel:Se,toggleMute:Fe,toggleDeafen:lt,toggleVideo:St,toggleScreenShare:Vt,changeAudioDevice:Ne,videoDevices:w,selectedVideoDeviceId:A,changeVideoDevice:_e,refreshDevices:ue,userVolumes:L,setUserVolume:(Be,Te)=>{z(Je=>{const et=new Map(Je);return et.set(Be,Te),et})},playSound:Gt,toggleVAD:()=>fe(Be=>!Be)};return c.jsxs(Jk.Provider,{value:nn,children:[t,c.jsx(SO,{remoteStreams:U,isDeafened:J,participants:p,userVolumes:L})]})},SO=({remoteStreams:t,isDeafened:e,participants:n,userVolumes:r})=>c.jsx("div",{style:{display:"none"},children:Array.from(t.entries()).map(([a,o])=>{const h=n.find(p=>p.peerId===a)?.odaId,m=h?r.get(h)??1:1;return c.jsx(EO,{stream:o,muted:e,volume:m},a)})}),EO=({stream:t,muted:e,volume:n})=>{const r=C.useRef(null);return C.useEffect(()=>{r.current&&t&&(r.current.srcObject=t,r.current.play().catch(a=>{console.log("[VoiceChannel] Audio autoplay blocked:",a)}))},[t]),C.useEffect(()=>{r.current&&(r.current.muted=e)},[e]),C.useEffect(()=>{r.current&&(r.current.volume=n)},[n]),c.jsx("audio",{ref:r,autoPlay:!0,playsInline:!0})},Zk=({participant:t,position:e,onClose:n,channelId:r,serverId:a})=>{const{userVolumes:o,setUserVolume:u}=Dc(),{userProfile:h}=yn(),m=h?.role==="admin",p=Math.round((o.get(t.odaId)??1)*100),y=x=>{const k=parseInt(x.target.value)/100;u(t.odaId,k)},b=async()=>{if(console.log("[Admin] Kick attempt:",{isAdmin:m,channelId:r,serverId:a,participantId:t.odaId,participantName:t.displayName}),!m){console.error("[Admin] Not an admin, cannot kick");return}if(!r||!a){console.error("[Admin] Missing channel or server ID");return}try{const x=Ae(de,"servers",a,"channels",r,"voiceParticipants",t.odaId);console.log("[Admin] Deleting participant:",x.path),await Yr(x),console.log("[Admin] Successfully kicked user from voice:",t.displayName),n()}catch(x){console.error("[Admin] Failed to kick user:",x)}};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40",onClick:n,onContextMenu:x=>{x.preventDefault(),n()}}),c.jsxs("div",{className:"fixed bg-[#111214] border border-[#1e1f22] rounded-lg shadow-xl py-3 z-50 w-64 px-3",style:{top:e.y,left:e.x},onClick:x=>x.stopPropagation(),children:[c.jsxs("div",{className:"text-xs font-bold text-[#949ba4] uppercase mb-3 px-1",children:[t.displayName," SETTINGS"]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between text-sm text-[#dbdee1] font-medium mb-1 px-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(rk,{size:14,className:"text-[#949ba4]"}),c.jsx("span",{children:"User Volume"})]}),c.jsxs("span",{className:"text-xs font-bold text-brand-primary",children:[p,"%"]})]}),c.jsx("input",{type:"range",min:"0",max:"100",value:p,onChange:y,className:"volume-slider",style:{background:`linear-gradient(to right, #ef9f64 0%, #ef9f64 ${p}%, #1e1f22 ${p}%, #1e1f22 100%)`}})]}),c.jsx("div",{className:"mt-4 border-t border-[#1e1f22] pt-2",children:c.jsx("div",{className:"text-[11px] text-[#949ba4] px-1 italic",children:"This setting only affects the audio heard by you."})}),m&&c.jsx("div",{className:"mt-3 border-t border-[#1e1f22] pt-3",children:c.jsxs("button",{onClick:b,className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-red-400 hover:bg-red-500/10 rounded transition-colors",children:[c.jsx(PP,{size:14}),c.jsx("span",{children:"Kick from Voice Channel"})]})})]})]})},CO=({channel:t})=>{const{currentVoiceChannel:e,joinVoiceChannel:n,participants:r,remoteStreams:a,localStream:o}=Dc(),{currentServer:u}=Za(),{currentUser:h}=yn(),[m,p]=C.useState([]),[y,b]=C.useState(null),x=e===t.id;C.useEffect(()=>{if(!u||!t.id)return;const j=wt(de,"servers",u,"channels",t.id,"voiceParticipants"),R=vr(j,U=>{const F=Date.now(),I=[];U.forEach(B=>{I.push({odaId:B.id,...B.data()})});const O=I.filter(B=>{if(B.odaId===h?.uid)return!0;const H=B.lastHeartbeat||B.joinedAt,w=H?.toMillis?H.toMillis():H||0;if(w===0)return!0;if(F-w>3e4){console.log("[VoiceChannel] Passive sidebar cleanup purging ghost:",B.displayName);const A=Ae(de,"servers",u,"channels",t.id,"voiceParticipants",B.odaId);return Yr(A).catch(()=>{}),!1}return!0});p(O)}),N=setInterval(()=>{const U=Date.now();p(F=>F.filter(I=>{if(I.odaId===h?.uid)return!0;const O=I.lastHeartbeat||I.joinedAt,B=O?.toMillis?O.toMillis():O||0;if(B===0)return!0;if(U-B>3e4){console.log("[VoiceChannel] Periodic sidebar cleanup purging ghost:",I.displayName);const H=Ae(de,"servers",u,"channels",t.id,"voiceParticipants",I.odaId);return Yr(H).catch(()=>{}),!1}return!0}))},15e3);return()=>{R(),clearInterval(N)}},[u,t.id,h]);const k=()=>{x||n(t.id)};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:`w-full flex items-center gap-2 px-2 py-1.5 rounded cursor-pointer transition-colors duration-150 ${x?"bg-dark-hover text-dark-text":"text-dark-muted hover:bg-dark-hover hover:text-dark-text"}`,onClick:k,children:[c.jsx(rk,{className:"flex-shrink-0"}),c.jsx("span",{className:"truncate text-sm flex-1 text-left",children:t.name})]}),m.length>0&&c.jsx("div",{className:"voice-participants",children:m.map(j=>c.jsx(TO,{participant:j,isLocal:j.odaId===h?.uid,remoteStreams:a,localStream:o,onContextMenu:R=>{j.odaId!==h?.uid&&(R.preventDefault(),b({participant:j,x:R.clientX,y:R.clientY}))}},j.odaId))}),y&&c.jsx(Zk,{participant:y.participant,position:{x:y.x,y:y.y},onClose:()=>b(null),channelId:t.id,serverId:u})]})},TO=({participant:t,isLocal:e,remoteStreams:n,localStream:r,onContextMenu:a})=>{const o=e?r:n.get(t.peerId),u=I1(t.isMuted||!o?null:o,{threshold:15});return c.jsxs("div",{className:`voice-participant ${u?"speaking":""}`,onContextMenu:a,children:[c.jsx("div",{className:"participant-avatar",children:t.photoUrl?c.jsx("img",{src:t.photoUrl,alt:""}):c.jsx("div",{className:"avatar-placeholder",children:t.displayName?.charAt(0)?.toUpperCase()||"?"})}),c.jsx("span",{className:"participant-name",children:t.displayName}),c.jsxs("div",{className:"participant-status",children:[t.isMuted&&c.jsx(S1,{className:"status-icon muted"}),t.isVideoOn&&c.jsx(nk,{className:"status-icon video"}),t.isScreenSharing&&c.jsx(w1,{className:"status-icon screen"})]})]})},kO=()=>{const{voiceChannels:t}=Dc();return!t||t.length===0?null:c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-xs font-semibold text-dark-muted uppercase px-2 mb-1 mt-4",children:"VOICE CHANNELS"}),c.jsx("div",{className:"voice-channel-list",children:t.map(e=>c.jsx(CO,{channel:e},e.id))})]})},NO=({onClose:t})=>{const{participants:e,localStream:n,screenStream:r,remoteStreams:a,isMuted:o,isScreenSharing:u}=Dc(),{currentUser:h}=yn(),[m,p]=C.useState(null),[y,b]=C.useState(null),x=e.length,k=x<=1?"grid-1":x<=2?"grid-2":x<=4?"grid-4":x<=6?"grid-6":x<=9?"grid-9":"grid-many",j=()=>u&&r?r:n,R=N=>N.odaId===h?.uid?j():a.get(N.peerId);return c.jsxs("div",{className:"voice-grid-overlay",children:[c.jsxs("div",{className:"voice-grid-modal",children:[c.jsxs("div",{className:"voice-grid-header",children:[c.jsx("h3",{children:"Voice Channel"}),c.jsx("button",{className:"close-btn",onClick:t,children:c.jsx(MP,{})})]}),c.jsx("div",{className:`voice-grid ${k}`,children:e.map(N=>c.jsx(RO,{participant:N,stream:R(N),isLocal:N.odaId===h?.uid,isMuted:N.odaId===h?.uid?o:N.isMuted,onExpand:()=>p(N),isFocused:!1,onContextMenu:U=>{N.odaId!==h?.uid&&(U.preventDefault(),b({participant:N,x:U.clientX,y:U.clientY}))}},N.odaId))})]}),y&&c.jsx(Zk,{participant:y.participant,position:{x:y.x,y:y.y},onClose:()=>b(null)}),m&&c.jsx("div",{className:"voice-fullscreen-overlay",onClick:()=>p(null),children:c.jsx("div",{className:"voice-fullscreen-container",onClick:N=>N.stopPropagation(),children:c.jsx(AO,{stream:R(m),participant:m,isLocal:m.odaId===h?.uid,onClose:()=>p(null)})})})]})},AO=({stream:t,participant:e,isLocal:n,onClose:r})=>{const a=C.useRef(null);return C.useEffect(()=>{a.current&&t&&(a.current.srcObject=t)},[t]),c.jsxs("div",{className:"fullscreen-video-wrapper",children:[c.jsx("video",{ref:a,autoPlay:!0,playsInline:!0,muted:n,className:"fullscreen-video"}),c.jsxs("div",{className:"fullscreen-overlay",children:[c.jsxs("span",{className:"fullscreen-label",children:[e.displayName,n&&" (You)"]}),c.jsx("button",{className:"fullscreen-close-btn",onClick:r,children:c.jsx(RP,{})})]})]})},RO=({participant:t,stream:e,isLocal:n,isMuted:r,onExpand:a,isFocused:o,onContextMenu:u})=>{const h=C.useRef(null),m=I1(r?null:e,{threshold:5});C.useEffect(()=>{h.current&&e&&(h.current.srcObject=e)},[e]);const p=e?.getVideoTracks()?.length>0&&e.getVideoTracks()[0].enabled;return c.jsxs("div",{className:`video-tile ${n?"local":""} ${o?"focused":""} ${m?"speaking":""}`,onClick:()=>p&&a&&a(),onContextMenu:u,children:[p?c.jsx("video",{ref:h,autoPlay:!0,playsInline:!0,muted:n,className:"video-feed"}):c.jsx("div",{className:"video-placeholder",children:t.photoUrl?c.jsx("img",{src:t.photoUrl,alt:"",className:"avatar-large"}):c.jsx("div",{className:"avatar-placeholder-large",children:t.displayName?.charAt(0)?.toUpperCase()||"?"})}),c.jsxs("div",{className:"tile-overlay",children:[c.jsxs("span",{className:"participant-label",children:[t.displayName,n&&" (You)"]}),c.jsxs("div",{className:"tile-status",children:[r&&c.jsx(S1,{className:"status-muted"}),t.isScreenSharing&&c.jsx(w1,{className:"status-screen"}),p&&c.jsx(tk,{className:"status-expand",onClick:y=>{y.stopPropagation(),a&&a()},title:"Full Screen"})]})]})]})},Yw=()=>{if(window.electron&&window.electron.desktopCapturer)return window.electron.desktopCapturer;if(window.require)try{return window.require("electron").desktopCapturer}catch{return null}return null},e3=({isOpen:t,onClose:e,onConfirm:n})=>{const[r,a]=C.useState(720),[o,u]=C.useState(30),[h,m]=C.useState("screens"),[p,y]=C.useState({screens:[],windows:[]}),[b,x]=C.useState(null),[k,j]=C.useState(!1),R=!!Yw();C.useEffect(()=>{if(t&&R){N();const F=setInterval(N,3e3);return()=>clearInterval(F)}},[t,R]);const N=async()=>{const F=Yw();if(F)try{const I=await F.getSources({types:["window","screen"],thumbnailSize:{width:300,height:200}}),O=I.filter(H=>H.id.startsWith("screen:")),B=I.filter(H=>!H.id.startsWith("screen:"));y({screens:O,windows:B}),!b&&O.length>0&&x(O[0].id)}catch(I){console.error("Error loading sources:",I)}};if(!t)return null;const U=()=>{let F,I;r===1080?(F=1920,I=1080):(F=1280,I=720),n({width:F,height:I,frameRate:o,sourceId:b,displaySurface:h==="screens"?"monitor":"window"}),e()};return c.jsx("div",{className:"fixed inset-0 bg-black/80 z-[100] flex items-center justify-center animate-fade-in",children:c.jsxs("div",{className:"bg-dark-elem w-full max-w-2xl rounded-2xl shadow-2xl border border-dark-hover overflow-hidden transform transition-all scale-100 p-6 relative flex flex-col max-h-[90vh]",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6 shrink-0",children:[c.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[c.jsx(Em,{className:"text-brand-primary"}),"Screen Share"]}),c.jsx("button",{onClick:e,className:"p-1 hover:bg-dark-hover rounded-full transition-colors text-dark-muted hover:text-white",children:c.jsx(Vn,{size:24})})]}),c.jsxs("div",{className:"flex gap-6 overflow-hidden flex-1",children:[c.jsxs("div",{className:"w-64 flex flex-col gap-6 shrink-0 border-r border-dark-hover pr-6",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-xs font-bold text-dark-muted uppercase tracking-wider mb-3",children:"Resolution"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsx("button",{onClick:()=>a(720),className:`p-2 rounded-lg border text-xs font-bold ${r===720?"border-brand-primary bg-brand-primary/10 text-white":"border-dark-hover bg-dark-input text-gray-400"}`,children:"720p"}),c.jsx("button",{onClick:()=>a(1080),className:`p-2 rounded-lg border text-xs font-bold ${r===1080?"border-brand-primary bg-brand-primary/10 text-white":"border-dark-hover bg-dark-input text-gray-400"}`,children:"1080p"})]})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs font-bold text-dark-muted uppercase tracking-wider mb-3",children:"Frame Rate"}),c.jsx("div",{className:"grid grid-cols-3 gap-2",children:[15,30,60].map(F=>c.jsx("button",{onClick:()=>u(F),className:`p-2 rounded-lg border text-xs font-bold ${o===F?"border-brand-primary bg-brand-primary/10 text-white":"border-dark-hover bg-dark-input text-gray-400"}`,children:F},F))})]})]}),c.jsx("div",{className:"flex-1 flex flex-col min-h-0",children:R?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex gap-4 border-b border-dark-hover mb-4 shrink-0",children:[c.jsxs("button",{onClick:()=>m("screens"),className:`pb-2 text-sm font-bold flex items-center gap-2 transition-colors ${h==="screens"?"text-brand-primary border-b-2 border-brand-primary":"text-gray-400 hover:text-white"}`,children:[c.jsx(QM,{size:18})," Screens"]}),c.jsxs("button",{onClick:()=>m("windows"),className:`pb-2 text-sm font-bold flex items-center gap-2 transition-colors ${h==="windows"?"text-brand-primary border-b-2 border-brand-primary":"text-gray-400 hover:text-white"}`,children:[c.jsx(h7,{size:18})," Windows"]})]}),c.jsx("div",{className:"grid grid-cols-2 gap-3 overflow-y-auto pr-2 custom-scrollbar content-start",children:(h==="screens"?p.screens:p.windows).map(F=>c.jsxs("button",{onClick:()=>x(F.id),className:`group relative rounded-lg overflow-hidden border-2 transition-all text-left ${b===F.id?"border-brand-primary ring-2 ring-brand-primary/20":"border-transparent hover:border-gray-600 bg-black/40"}`,children:[c.jsxs("div",{className:"aspect-video bg-black relative",children:[c.jsx("img",{src:F.thumbnail.toDataURL(),alt:F.name,className:"w-full h-full object-contain"}),b===F.id&&c.jsx("div",{className:"absolute inset-0 bg-brand-primary/10 flex items-center justify-center",children:c.jsx(Ho,{className:"text-brand-primary drop-shadow-lg",size:48})})]}),c.jsx("div",{className:"p-2 bg-dark-input truncate text-xs font-medium text-gray-300 group-hover:text-white",children:F.name})]},F.id))})]}):c.jsx("div",{className:"flex items-center justify-center h-full text-center text-gray-500",children:c.jsxs("div",{className:"max-w-xs",children:[c.jsx(Em,{size:48,className:"mx-auto mb-4 opacity-50"}),c.jsxs("p",{className:"text-sm",children:["Browser limits source selection here.",c.jsx("br",{}),'Click "Go Live" to pick a screen or window.']})]})})})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-dark-hover mt-4 shrink-0",children:[c.jsx(ot,{variant:"ghost",onClick:e,className:"text-dark-text hover:text-white",children:"Cancel"}),c.jsx(ot,{variant:"primary",onClick:U,className:"px-8 shadow-lg shadow-brand-primary/20",disabled:R&&!b,children:"Go Live"})]})]})})},jO=()=>{const{currentVoiceChannel:t,participants:e,isMuted:n,isDeafened:r,isVideoOn:a,isScreenSharing:o,toggleMute:u,toggleDeafen:h,toggleVideo:m,toggleScreenShare:p,leaveVoiceChannel:y,audioDevices:b,selectedAudioDeviceId:x,changeAudioDevice:k,videoDevices:j,selectedVideoDeviceId:R,changeVideoDevice:N,refreshDevices:U,playSound:F,currentPing:I}=Dc(),{customSounds:O,addSound:B,removeSound:H}=R1(),{userProfile:w}=yn(),{info:E}=Kr(),A=sc(w),{channels:P}=Za(),[L,z]=C.useState(!1),[M,se]=C.useState(!1),[ae,G]=C.useState(!1),[J,W]=C.useState(!1),[Ee,Pe]=C.useState(!1),$=C.useRef(null),X=C.useRef(null),oe=C.useRef(null),fe=C.useRef(null);C.useEffect(()=>{const he=ee=>{$.current&&!$.current.contains(ee.target)&&G(!1),X.current&&!X.current.contains(ee.target)&&W(!1)};return(ae||J)&&document.addEventListener("mousedown",he),()=>{document.removeEventListener("mousedown",he)}},[ae,J]),C.useEffect(()=>{const he=ee=>{oe.current&&!oe.current.contains(ee.target)&&Pe(!1)};return Ee&&document.addEventListener("mousedown",he),()=>{document.removeEventListener("mousedown",he)}},[Ee]);const[Ce,Ue]=C.useState(!1),re=he=>!he&&he!==0?"unknown":he<100?"good":he<250?"fair":"poor",Le=()=>{if(o)p(null);else{if(!A){E("Screen sharing is a Premium feature!");return}se(!0)}},Re=he=>{se(!1),p(he)};if(!t)return null;const We=P?.find(he=>he.id===t),ke=async he=>{const ee=he.target.files[0];if(!ee)return;const qe=ee.name.split(".")[0].slice(0,15);await B(qe,ee),fe.current&&(fe.current.value="")};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"voice-channel-bar",children:[c.jsx("div",{className:"voice-bar-header",children:c.jsx("div",{className:"voice-bar-info",children:c.jsxs("div",{className:"voice-bar-status relative",children:[c.jsxs("div",{className:`voice-connection-status ${re(I)}`,onMouseEnter:()=>Ue(!0),onMouseLeave:()=>Ue(!1),children:[c.jsx("div",{className:"signal-bar bar-1"}),c.jsx("div",{className:"signal-bar bar-2"}),c.jsx("div",{className:"signal-bar bar-3"})]}),Ce&&c.jsxs("div",{className:"ping-stats-panel",children:[c.jsxs("div",{className:"ping-value",children:[I||"--"," ms"]}),c.jsx("div",{className:"ping-label",children:"Latency"})]}),c.jsx("span",{className:"voice-bar-channel",children:We?.name||"Voice Channel"})]})})}),c.jsxs("div",{className:"voice-bar-controls",children:[c.jsxs("div",{className:"control-group",children:[c.jsx("button",{className:`voice-control-btn ${n?"active":""}`,onClick:u,title:n?"Unmute":"Mute",children:n?c.jsx(S1,{}):c.jsx(IP,{})}),c.jsxs("div",{className:"voice-settings-wrapper",ref:$,children:[c.jsx("button",{className:`voice-control-btn arrow-btn ${ae?"active":""}`,onClick:he=>{he.stopPropagation(),ae||U(),G(!ae)},title:"Input Devices",children:c.jsx(jw,{size:10})}),ae&&c.jsxs("div",{className:"voice-device-menu",children:[c.jsx("div",{className:"menu-header",children:"Input Device"}),c.jsx("div",{className:"menu-list",children:b.length>0?b.map(he=>c.jsxs("div",{className:`menu-item ${x===he.deviceId?"active":""}`,onClick:()=>{k(he.deviceId),G(!1)},children:[c.jsx("span",{className:"truncate",children:he.label||`Microphone ${he.deviceId.slice(0,5)}`}),x===he.deviceId&&c.jsx("div",{className:"active-dot"})]},he.deviceId)):c.jsx("div",{className:"menu-item disabled",children:"No microphone found"})})]})]}),c.jsx("button",{className:`voice-control-btn ${r?"active":""}`,onClick:h,title:r?"Undeafen":"Deafen",children:r?c.jsx(XM,{}):c.jsx(jP,{})})]}),c.jsxs("div",{className:"control-group",children:[c.jsx("button",{className:`voice-control-btn ${a?"active":""}`,onClick:m,title:a?"Turn Off Camera":"Turn On Camera",children:a?c.jsx(nk,{}):c.jsx(OP,{})}),c.jsxs("div",{className:"voice-settings-wrapper",ref:X,children:[c.jsx("button",{className:`voice-control-btn arrow-btn ${J?"active":""}`,onClick:he=>{he.stopPropagation(),J||U(),W(!J)},title:"Video Settings",children:c.jsx(jw,{size:10})}),J&&c.jsxs("div",{className:"voice-device-menu",children:[c.jsx("div",{className:"menu-header",children:"Camera Device"}),c.jsx("div",{className:"menu-list",children:j.length>0?j.map(he=>c.jsxs("div",{className:`menu-item ${R===he.deviceId?"active":""}`,onClick:()=>{N(he.deviceId),W(!1)},children:[c.jsx("span",{className:"truncate",children:he.label||`Camera ${he.deviceId.slice(0,5)}`}),R===he.deviceId&&c.jsx("div",{className:"active-dot"})]},he.deviceId)):c.jsx("div",{className:"menu-item disabled",children:"No camera found"})})]})]}),c.jsx("button",{className:`voice-control-btn ${o?"active":""}`,onClick:Le,title:o?"Stop Sharing":"Share Screen",children:c.jsx(w1,{})})]}),c.jsxs("div",{className:"control-group",children:[c.jsxs("div",{className:"voice-settings-wrapper",ref:oe,children:[c.jsx("button",{className:`voice-control-btn ${Ee?"active":""}`,onClick:he=>{he.stopPropagation(),Pe(!Ee)},title:"Soundboard",children:c.jsx(Cm,{})}),Ee&&c.jsxs("div",{className:"voice-device-menu soundboard-menu",children:[c.jsxs("div",{className:"menu-header",children:[c.jsx("span",{children:"Soundboard"}),c.jsxs("span",{className:"text-[10px] opacity-50",children:[O.length,"/10"]})]}),c.jsx("div",{className:"menu-list soundboard-list",children:O.length===0?c.jsx("div",{className:"menu-item disabled",children:"No sounds added yet"}):O.map(he=>c.jsxs("div",{className:"soundboard-item-wrapper group",children:[c.jsxs("div",{className:"menu-item soundboard-item",onClick:()=>{A&&F(he.id)},children:[c.jsx("span",{className:"truncate flex-1",children:he.name}),c.jsx("span",{className:"text-xs opacity-50",children:""})]}),c.jsx("button",{className:"sound-delete-btn",onClick:ee=>{ee.stopPropagation(),H(he.id)},children:c.jsx(Vi,{size:14})})]},he.id))}),O.length<10&&c.jsxs("div",{className:"menu-footer",children:[c.jsxs("button",{className:"add-sound-btn",onClick:()=>fe.current?.click(),children:[c.jsx(Po,{size:14}),c.jsx("span",{children:"Add Sound"})]}),c.jsx("input",{type:"file",ref:fe,className:"hidden",accept:"audio/mp3,audio/wav",onChange:ke})]}),!A&&c.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center rounded-lg p-4 text-center z-[60]",children:c.jsx("div",{children:c.jsx("p",{className:"text-orange-400 font-bold mb-1",children:"Premium Only"})})})]})]}),e.length>0&&c.jsx("button",{className:"voice-control-btn",onClick:()=>z(!0),title:"Expand Grid",children:c.jsx(tk,{})})]}),c.jsx("div",{className:"control-group no-bg",children:c.jsx("button",{className:"voice-control-btn disconnect",onClick:y,title:"Disconnect",children:c.jsx(DP,{})})})]})]}),L&&c.jsx(NO,{onClose:()=>z(!1)}),c.jsx(e3,{isOpen:M,onClose:()=>se(!1),onConfirm:Re})]})},Kw=({server:t,channels:e,selectedChannel:n,onSelectChannel:r,onOpenSettings:a,onOpenAdmin:o,onLogout:u,userProfile:h,serverId:m,userRole:p,userId:y,dms:b,unreadDms:x,selectedDm:k,onSelectDm:j})=>{const[R,N]=C.useState(!1),[U,F]=C.useState(!1),[I,O]=C.useState(!1),B=()=>{F(!1),u()};return c.jsxs("div",{className:"w-60 bg-dark-sidebar flex flex-col h-full",children:[c.jsxs("div",{className:"h-12 md:h-12 pt-safe-top md:pt-0 px-4 flex items-center justify-between border-b border-dark-hover shadow-md box-content",children:[c.jsx("h2",{className:"font-semibold text-dark-text truncate",children:t?.name||"Lumo"}),c.jsxs("div",{className:"flex items-center gap-1",children:[m&&p==="admin"&&c.jsx("button",{onClick:()=>O(!0),className:"p-1.5 hover:bg-dark-hover rounded transition-colors",title:"Generate Invite",children:c.jsx(m7,{className:"text-green-500",size:20})}),h?.role==="admin"&&c.jsx("button",{onClick:o,className:"p-1.5 hover:bg-dark-hover rounded transition-colors",title:"Admin Panel",children:c.jsx(MT,{className:"text-admin",size:20})})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto py-3",children:m==="home"?c.jsx(_O,{dms:b,unreadDms:x,selectedDmId:k?.id,onSelectDm:j}):c.jsxs("div",{className:"px-2",children:[c.jsx("div",{className:"text-xs font-semibold text-dark-muted uppercase px-2 mb-1",children:"Text Channels"}),e.filter(H=>H.type!=="voice").map(H=>c.jsxs("button",{onClick:()=>r(H),className:Bt("w-full flex items-center gap-2 px-2 py-1.5 rounded","text-dark-muted hover:bg-dark-hover hover:text-dark-text","transition-colors duration-150",n?.id===H.id&&"bg-dark-hover text-dark-text"),children:[c.jsx(hp,{className:"flex-shrink-0"}),c.jsx("span",{className:"truncate text-sm flex-1 text-left",children:H.name}),H.locked&&c.jsx(OM,{className:"flex-shrink-0 text-yellow-500",size:14,title:"Locked channel"})]},H.id)),c.jsx(kO,{})]})}),c.jsx(jO,{}),c.jsx("div",{className:"px-2 pb-2 -ml-[72px] w-[calc(100%+72px)] relative z-10",children:c.jsxs("div",{className:"h-[60px] bg-[#1e1f22] px-3 flex items-center gap-2 rounded-lg shadow-lg border border-[#3f4147]",children:[c.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1 cursor-pointer hover:bg-dark-hover rounded p-1 transition-colors",onClick:()=>N(!0),children:[c.jsxs("div",{className:"relative flex-shrink-0",children:[h?.photoUrl?c.jsx("img",{src:h.photoUrl,alt:h.displayName,className:"w-8 h-8 rounded-full object-cover",onError:H=>{H.target.style.display="none",H.target.nextSibling.style.display="flex"}},h.photoUrl):null,c.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold text-sm",style:{display:h?.photoUrl?"none":"flex"},children:h?.displayName?.[0]?.toUpperCase()||"U"},`fallback-${h?.photoUrl}`),c.jsx("div",{className:"absolute -bottom-0.5 -right-0.5",children:c.jsx(Wk,{status:h?.presence||"online",size:"sm"})})]}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsx("div",{className:"text-sm font-medium text-dark-text truncate leading-tight",children:h?.displayName||"User"}),c.jsx("div",{className:"text-[11px] text-dark-muted truncate leading-tight",children:h?.presence==="online"?"Online":h?.presence==="idle"?"Idle":h?.presence==="dnd"?"Do Not Disturb":h?.presence==="offline"?"Invisible":"Online"})]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("button",{onClick:a,className:"p-2 hover:bg-dark-hover rounded transition-colors",title:"User Settings",children:c.jsx(cp,{className:"text-dark-muted hover:text-dark-text",size:20})}),c.jsx("button",{onClick:()=>F(!0),className:"p-2 hover:bg-dark-hover rounded transition-colors",title:"Logout",children:c.jsx(LM,{className:"text-dark-muted hover:text-red-400",size:20})})]})]})}),c.jsx(j1,{user:h,isOpen:R,onClose:()=>N(!1)}),c.jsx(gc,{isOpen:U,onClose:()=>F(!1),onConfirm:B,title:"Logout",message:"Are you sure you want to logout?",confirmText:"Logout",variant:"danger"}),c.jsx(vO,{isOpen:I,onClose:()=>O(!1),serverId:m})]})},IO=(t,e)=>{if(e===0)return"0 KB/s";const n=t/e;return n>1024*1024?`${(n/(1024*1024)).toFixed(1)} MB/s`:`${(n/1024).toFixed(0)} KB/s`},vd=(t,e)=>new Promise((n,r)=>{const a="5c1c5b7cae2edd508a2f35f98c4eec96",o=new FormData;o.append("image",t);const u=new XMLHttpRequest;u.open("POST",`https://api.imgbb.com/1/upload?key=${a}`);const h=Date.now();u.upload.onprogress=m=>{if(m.lengthComputable){const p=m.loaded/m.total*100,y=(Date.now()-h)/1e3,b=IO(m.loaded,y);e&&e(p,b)}},u.onload=()=>{if(u.status===200)try{const m=JSON.parse(u.responseText);m.success?n(m.data.url):r(new Error(m.error?.message||"Failed to upload image"))}catch{r(new Error("Invalid response from ImgBB"))}else r(new Error(`Upload failed with status ${u.status}`))},u.onerror=()=>r(new Error("Network error during upload")),u.send(o)}),DO=({server:t,onClose:e,onDelete:n,position:r,userRole:a,userId:o})=>{const[u,h]=C.useState(!1),[m,p]=C.useState(t.name),[y,b]=C.useState(!1),[x,k]=C.useState(!1),[j,R]=C.useState(t.icon||null),[N,U]=C.useState(null),[F,I]=C.useState({progress:0,speed:""}),[O,B]=C.useState(!1),[H,w]=C.useState(!1),E=C.useRef(null),{success:A,error:P}=Kr(),L=async()=>{if(!m.trim()){P("Server name is required");return}b(!0);try{await it(Ae(de,"servers",t.id),{name:m.trim()}),A("Server updated!"),h(!1),e()}catch(G){console.error("Error updating server:",G),P("Failed to update server")}finally{b(!1)}},z=async()=>{try{const G=wt(de,"servers",t.id,"members"),J=await Qa(G),W=[];J.forEach(Ee=>{const Pe=Ee.data().userId;W.push(it(Ae(de,"users",Pe),{servers:hd(t.id),...Ee.data().currentServer===t.id?{currentServer:null}:{}}))}),await Promise.all(W),await Yr(Ae(de,"servers",t.id)),A("Server deleted"),B(!1),n(),e()}catch(G){console.error("Error deleting server:",G),P("Failed to delete server"),B(!1)}},M=async()=>{try{await it(Ae(de,"users",o),{servers:hd(t.id),currentServer:null}),await Yr(Ae(de,"servers",t.id,"members",o)),await it(Ae(de,"servers",t.id),{memberCount:Ii(-1)}),A("Left server"),w(!1),e()}catch(G){console.error("Error leaving server:",G),w(!1),e()}},se=G=>{const J=G.target.files?.[0];if(J){if(!J.type.startsWith("image/")){P("Please select an image file");return}if(J.size>10*1024*1024){P("Image size must be less than 10MB");return}U(J),R(URL.createObjectURL(J))}},ae=async()=>{if(!N){P("Please select an image first");return}b(!0);try{const G=await vd(N,(J,W)=>{I({progress:J,speed:W})});await it(Ae(de,"servers",t.id),{icon:G}),A("Server icon updated!"),k(!1),e()}catch(G){console.error("Error updating icon:",G),P("Failed to update icon")}finally{b(!1),I({progress:0,speed:""})}};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40",onClick:e}),c.jsx("div",{className:"fixed bg-dark-sidebar border border-dark-hover rounded-lg shadow-xl py-2 z-50 w-64",style:{top:r.y,left:r.x},children:u?c.jsxs("div",{className:"px-3 py-2 space-y-2",children:[c.jsx(En,{value:m,onChange:G=>p(G.target.value),placeholder:"Server name",autoFocus:!0}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(ot,{variant:"secondary",onClick:()=>h(!1),className:"flex-1 text-xs py-1",children:"Cancel"}),c.jsx(ot,{variant:"primary",onClick:L,disabled:y,className:"flex-1 text-xs py-1",children:y?"Saving...":"Save"})]})]}):x?c.jsxs("div",{className:"px-3 py-2 space-y-3",children:[c.jsx("input",{type:"file",ref:E,onChange:se,accept:"image/*",className:"hidden"}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("button",{onClick:()=>E.current?.click(),className:"w-16 h-16 rounded-full bg-dark-hover border-2 border-dashed border-dark-muted hover:border-brand-primary flex items-center justify-center transition-colors overflow-hidden",children:j?c.jsx("img",{src:j,alt:"Preview",className:"w-full h-full object-cover"}):c.jsx(Uv,{size:24,className:"text-dark-muted"})}),c.jsx("span",{className:"text-xs text-dark-muted mt-2",children:"Click to select image"})]}),y&&F.progress>0&&c.jsxs("div",{className:"text-xs text-center text-dark-muted",children:[Math.round(F.progress),"% (",F.speed,")"]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(ot,{variant:"secondary",onClick:()=>{k(!1),U(null),R(t.icon||null)},className:"flex-1 text-xs py-1",children:"Cancel"}),c.jsx(ot,{variant:"primary",onClick:ae,disabled:y||!N,className:"flex-1 text-xs py-1",children:y?"Uploading...":"Save"})]})]}):c.jsx(c.Fragment,{children:a==="admin"?c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>h(!0),className:"w-full px-4 py-2 text-left text-sm text-dark-text hover:bg-dark-hover transition-colors flex items-center gap-2",children:[c.jsx(nc,{size:16}),"Edit Server Name"]}),c.jsxs("button",{onClick:()=>k(!0),className:"w-full px-4 py-2 text-left text-sm text-dark-text hover:bg-dark-hover transition-colors flex items-center gap-2",children:[c.jsx(Uv,{size:16}),"Change Icon"]}),c.jsxs("button",{onClick:()=>B(!0),className:"w-full px-4 py-2 text-left text-sm text-admin hover:bg-dark-hover transition-colors flex items-center gap-2",children:[c.jsx(Vi,{size:16}),"Delete Server"]})]}):c.jsxs("button",{onClick:()=>w(!0),className:"w-full px-4 py-2 text-left text-sm text-orange-500 hover:bg-dark-hover transition-colors flex items-center gap-2",children:[c.jsx(MM,{size:16}),"Leave Server"]})})}),c.jsx(gc,{isOpen:O,onClose:()=>B(!1),onConfirm:z,title:"Delete Server",message:`Are you sure you want to delete "${t.name}"? This action cannot be undone!`,confirmText:"Delete",confirmVariant:"danger"}),c.jsx(gc,{isOpen:H,onClose:()=>w(!1),onConfirm:M,title:"Leave Server",message:`Are you sure you want to leave "${t.name}"?`,confirmText:"Leave",confirmVariant:"warning"})]})},MO=""+new URL("lumo-logo-DYOsjf-q.png",import.meta.url).href,Qw=({servers:t,currentServerId:e,onServerChange:n,onCreateServer:r,onJoinServer:a,userRole:o,userId:u,unreadMentions:h={},unreadDms:m={}})=>{const[p,y]=C.useState(!1),[b,x]=C.useState(null),k=Object.values(m).reduce((R,N)=>R+(N.count||0),0),j=(R,N)=>{R.preventDefault(),x({server:N,position:{x:R.clientX,y:R.clientY}})};return c.jsxs("div",{className:"w-20 bg-dark-bg h-full flex flex-col items-center pt-safe-top md:pt-0 box-content",children:[c.jsx("div",{className:"flex flex-col items-center",children:c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>n("home"),className:Bt("w-16 h-16 flex items-center justify-center transition-all duration-200 overflow-hidden",e==="home"||!e?"rounded-xl":"rounded-2xl hover:rounded-xl"),children:c.jsx("img",{src:MO,alt:"Home",className:"w-full h-full object-cover"})}),k>0&&c.jsx("div",{className:"absolute top-0 right-0 min-w-5 h-5 bg-red-500 rounded-full flex items-center justify-center border-2 border-dark-bg pointer-events-none",children:c.jsx("span",{className:"text-white text-xs font-bold px-1",children:k>99?"99+":k})})]})}),c.jsx("div",{className:"w-8 h-0.5 bg-dark-hover my-2"}),c.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1 overflow-y-auto",children:[t.map(R=>c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>n(R.id),onContextMenu:N=>j(N,R),className:Bt("w-12 h-12 rounded-2xl flex items-center justify-center transition-all duration-200","hover:rounded-xl",e===R.id?"bg-brand-primary text-white rounded-xl":"bg-dark-sidebar text-dark-text hover:bg-brand-primary hover:text-white"),title:R.name,children:R.icon?c.jsx("img",{src:R.icon,alt:R.name,className:"w-full h-full rounded-2xl object-cover"}):c.jsx("span",{className:"text-xl font-bold",children:R.name.charAt(0).toUpperCase()})}),h[R.id]?.count>0&&c.jsx("div",{className:"absolute -top-1 -right-1 min-w-5 h-5 bg-red-500 rounded-full flex items-center justify-center border-2 border-dark-bg pointer-events-none",children:c.jsx("span",{className:"text-white text-xs font-bold px-1",children:h[R.id].count>99?"99+":h[R.id].count})})]},R.id)),c.jsx("div",{className:"w-8 h-0.5 bg-dark-hover my-1"}),c.jsxs("div",{className:"relative pb-2",children:[c.jsx("button",{id:"add-server-btn",onClick:R=>{const N=R.currentTarget.getBoundingClientRect();document.documentElement.style.setProperty("--btn-top",`${N.top}px`),y(!p)},className:"w-12 h-12 rounded-2xl bg-dark-sidebar text-green-500 flex items-center justify-center hover:bg-green-500 hover:text-white hover:rounded-xl transition-all duration-200",title:"Add Server",children:c.jsx(Po,{size:28})}),p&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-50",onClick:()=>y(!1)}),c.jsxs("div",{className:"fixed left-[80px] bg-dark-sidebar border border-dark-hover rounded-lg shadow-lg py-2 z-50 w-48",style:{top:"var(--btn-top)"},children:[o==="admin"&&c.jsx("button",{onClick:()=>{r(),y(!1)},className:"w-full px-4 py-2 text-left text-sm text-dark-text hover:bg-dark-hover transition-colors",children:"Create Server"}),c.jsx("button",{onClick:()=>{a(),y(!1)},className:"w-full px-4 py-2 text-left text-sm text-dark-text hover:bg-dark-hover transition-colors",children:"Join Server"})]})]})]})]}),b&&c.jsx(DO,{server:b.server,position:b.position,userRole:o,userId:u,onClose:()=>x(null),onDelete:()=>{x(null)}})]})},Xw=({users:t,currentUserId:e,onStartDm:n})=>{const{currentServer:r}=Za(),[a,o]=C.useState(null),[u,h]=C.useState([]);C.useEffect(()=>{if(!r||r==="home"){h([]);return}const N=qr(wt(de,"servers",r,"roles"));return vr(N,F=>{const I=[];F.forEach(O=>{I.push({id:O.id,...O.data()})}),h(I)})},[r]);const m=N=>N.presence==="invisible"?!1:Xk(N.lastSeen),p=t.filter(N=>m(N)),y=t.filter(N=>!m(N)),b=p.reduce((N,U)=>{const F=U.serverRole||U.role||"member";return N[F]||(N[F]=[]),N[F].push(U),N},{}),j=[...[{name:"admin",position:-3},{name:"moderator",position:-2},{name:"member",position:-1}],...u.map(N=>({name:N.name,position:N.position??999}))].sort((N,U)=>N.position-U.position).map(N=>N.name).filter(N=>b[N]?.length>0),R=N=>{const U=m(N);return c.jsxs("div",{onClick:()=>o(N),className:Bt("flex items-center gap-2 px-2 py-1.5 rounded cursor-pointer","hover:bg-dark-hover transition-colors",N.id===e&&"bg-dark-hover/50",!U&&"opacity-50"),children:[c.jsxs("div",{className:"relative flex-shrink-0",children:[N.photoUrl?c.jsx("img",{src:N.photoUrl,alt:N.displayName,className:"w-8 h-8 rounded-full object-cover",onError:F=>{F.target.style.display="none",F.target.nextSibling.style.display="flex"}}):null,c.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold text-sm",style:{display:N.photoUrl?"none":"flex"},children:N.displayName?.[0]?.toUpperCase()||"U"}),c.jsx("div",{className:"absolute bottom-0 right-0",children:c.jsx(Wk,{status:U?N.presence||"online":"offline",size:"sm"})})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-sm text-dark-text truncate",children:N.displayName||"Unknown"}),N.badges&&N.badges.length>0&&c.jsx("div",{className:"flex items-center gap-0.5",children:N.badges.slice(0,3).map(F=>{const I=LP(F);if(!I)return null;const O=I.icon;return c.jsx(O,{size:14,style:{color:I.color},title:I.label,className:"flex-shrink-0"},F)})})]}),N.status&&c.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[c.jsx("span",{className:"text-xs",children:N.status.emoji}),c.jsx("span",{className:"text-xs text-dark-muted truncate",children:N.status.text})]})]})]},N.id)};return c.jsxs("div",{className:"w-60 bg-dark-sidebar h-full overflow-y-auto py-3",children:[c.jsxs("div",{className:"px-2",children:[j.map(N=>{const U=b[N]||[];return U.length===0?null:c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"text-xs font-semibold text-dark-muted uppercase px-2 mb-2",children:[N.charAt(0).toUpperCase()+N.slice(1),"s  ",U.length]}),U.map(R)]},N)}),y.length>0&&c.jsxs("div",{className:"mt-4",children:[c.jsxs("div",{className:"text-xs font-semibold text-gray-500 uppercase px-2 mb-2",children:["Offline  ",y.length]}),y.map(R)]})]}),c.jsx(j1,{user:a,isOpen:!!a,onClose:()=>o(null),onMessage:N=>{n&&n(N),o(null)}})]})},PO=({isOpen:t,onClose:e,onConfirm:n,url:r})=>{const[a,o]=C.useState(!1),u=()=>{a&&localStorage.setItem("dontAskExternalLinks","true"),n(),e()};return c.jsx(Es,{isOpen:t,onClose:e,title:"External Link Warning",size:"sm",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:c.jsxs("p",{className:"text-dark-text text-sm",children:[c.jsx("span",{className:"font-semibold text-yellow-500",children:" Security Warning"}),c.jsx("br",{}),c.jsx("br",{}),"You are about to open an external link. External links may lead to harmful or malicious websites. Please ensure you trust the source before proceeding."]})}),c.jsxs("div",{className:"bg-dark-bg p-3 rounded-lg",children:[c.jsx("p",{className:"text-xs text-dark-muted mb-1",children:"Link:"}),c.jsx("p",{className:"text-dark-text text-sm break-all font-mono",children:r})]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:a,onChange:h=>o(h.target.checked),className:`w-4 h-4 rounded border-dark-hover bg-dark-input text-brand-primary 
                       focus:ring-2 focus:ring-brand-primary cursor-pointer`}),c.jsx("span",{className:"text-sm text-dark-text",children:"Don't ask me again"})]}),c.jsxs("div",{className:"flex gap-3 justify-end pt-2",children:[c.jsx(ot,{variant:"secondary",onClick:e,children:"Cancel"}),c.jsx(ot,{variant:"primary",onClick:u,children:"Open Link"})]})]})})},OO=t=>{if(!t)return t;let e=t;return e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=e.replace(/```([^`]+)```/g,'<pre class="bg-dark-input text-dark-text p-2 rounded my-1 overflow-x-auto"><code>$1</code></pre>'),e=e.replace(/`([^`]+)`/g,'<code class="bg-dark-input text-dark-text px-1 py-0.5 rounded text-sm">$1</code>'),e=e.replace(/\*\*([^*]+)\*\*/g,'<strong class="font-bold">$1</strong>'),e=e.replace(/\*([^*]+)\*/g,'<em class="italic">$1</em>'),e=e.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer" class="text-brand-primary hover:underline">$1</a>'),e=e.replace(/@(everyone|[a-zA-Z0-9_]+)\b/g,'<span class="text-brand-primary font-medium cursor-pointer hover:underline" data-mention="$1">$1</span>'),e=e.replace(/\n/g,"<br>"),e},t3=({children:t,onMentionClick:e})=>{const n=OO(t),r=a=>{const o=a.target.getAttribute("data-mention");o&&e&&e(o)};return c.jsx("div",{dangerouslySetInnerHTML:{__html:n},className:"markdown-content",onClick:r})},LO=["","","","","","","","","",""],Ww=({onSelect:t,onClose:e})=>c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40",onClick:e}),c.jsx("div",{className:"absolute left-0 bottom-full mb-2 bg-dark-sidebar border border-dark-hover rounded-lg shadow-lg p-2 z-50",children:c.jsx("div",{className:"flex gap-1",children:LO.map(n=>c.jsx("button",{onClick:()=>t(n),className:"w-8 h-8 flex items-center justify-center text-lg hover:bg-dark-hover rounded transition-colors",title:n,children:n},n))})})]}),VO=({message:t,currentUserId:e,serverId:n,channelId:r,users:a})=>{const[o,u]=C.useState(!1),h=t.poll;if(!h)return null;const m=t.userId===e,p=h.ended===!0,y=h.options.reduce((R,N,U)=>R+(h.votes?.[`option_${U}`]?.length||0),0),b=h.options.map((R,N)=>h.votes?.[`option_${N}`]?.includes(e)?N:-1).filter(R=>R!==-1);b.length>0;const x=async R=>{if(!(o||p)){u(!0);try{const N=`poll.votes.option_${R}`,U=Ae(de,"servers",n,"channels",r,"messages",t.id);if(h.votes?.[`option_${R}`]?.includes(e))await it(U,{[N]:hd(e)});else{if(!h.multipleChoice&&b.length>0)for(const I of b)await it(U,{[`poll.votes.option_${I}`]:hd(e)});await it(U,{[N]:Vd(e)})}}catch(N){console.error("Error voting:",N)}finally{u(!1)}}},k=async()=>{if(!(!m||p))try{const R=Ae(de,"servers",n,"channels",r,"messages",t.id);await it(R,{"poll.ended":!0})}catch(R){console.error("Error ending poll:",R)}},j=R=>h.anonymous?null:(h.votes?.[`option_${R}`]||[]).map(U=>a?.find(F=>F.id===U)?.displayName||"Unknown").join(", ");return c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4 mt-2 border border-dark-hover max-w-md",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx(b1,{className:"text-brand-primary",size:20}),c.jsx("span",{className:"text-xs text-dark-muted uppercase tracking-wide font-semibold",children:"Poll"}),h.multipleChoice&&c.jsx("span",{className:"text-xs text-dark-muted bg-dark-hover px-2 py-0.5 rounded",children:"Multiple Choice"}),p&&c.jsx("span",{className:"text-xs text-red-400 bg-red-400/10 px-2 py-0.5 rounded",children:"Ended"})]}),c.jsx("h3",{className:"text-dark-text font-semibold mb-4",children:h.question}),c.jsx("div",{className:"space-y-2",children:h.options.map((R,N)=>{const U=h.votes?.[`option_${N}`]?.length||0,F=y>0?Math.round(U/y*100):0,I=b.includes(N),O=j(N);return c.jsxs("button",{onClick:()=>x(N),disabled:o||p,className:`w-full text-left p-3 rounded-lg relative overflow-hidden transition-all group ${I?"bg-brand-primary/20 border-2 border-brand-primary":"bg-dark-sidebar border border-dark-hover hover:border-dark-muted"} ${p?"cursor-not-allowed opacity-80":""}`,children:[y>0&&c.jsx("div",{className:`absolute inset-0 transition-all duration-500 ${I?"bg-brand-primary/30":"bg-dark-hover/50"}`,style:{width:`${F}%`}}),c.jsxs("div",{className:"relative flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[I&&c.jsx("div",{className:"w-5 h-5 bg-brand-primary rounded-full flex items-center justify-center",children:c.jsx(Ho,{className:"text-white",size:14})}),c.jsx("span",{className:`text-sm ${I?"text-dark-text font-medium":"text-dark-muted"}`,children:R})]}),y>0&&c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("span",{className:"text-xs text-dark-muted",children:[U," vote",U!==1?"s":""]}),c.jsxs("span",{className:"text-sm font-semibold text-dark-text",children:[F,"%"]})]})]}),O&&U>0&&c.jsx("div",{className:"text-xs text-dark-muted mt-1 truncate opacity-0 group-hover:opacity-100 transition-opacity",children:O})]},N)})}),c.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-dark-hover",children:[c.jsxs("div",{className:"flex items-center gap-1 text-xs text-dark-muted",children:[c.jsx(y1,{size:14}),c.jsxs("span",{children:[y," total vote",y!==1?"s":""]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[h.anonymous&&c.jsx("span",{className:"text-xs text-dark-muted",children:"Anonymous"}),m&&!p&&c.jsxs("button",{onClick:k,className:"flex items-center gap-1.5 text-xs font-medium text-red-400 bg-red-400/10 hover:bg-red-400/20 px-3 py-1.5 rounded transition-all border border-red-400/20 hover:border-red-400/30",children:[c.jsx(BM,{size:14}),"End Poll"]})]})]})]})},D1=({isOpen:t,onClose:e,mediaUrl:n,mediaType:r="image"})=>{if(!n)return null;const a=()=>{const u=document.createElement("a");u.href=n,u.download=n.split("/").pop()||"download",document.body.appendChild(u),u.click(),document.body.removeChild(u)},o=()=>{window.electron&&window.electron.shell?window.electron.shell.openExternal(n):window.open(n,"_blank","noopener,noreferrer")};return c.jsx(Es,{isOpen:t,onClose:e,title:"",size:"full",showCloseButton:!1,children:c.jsxs("div",{className:"fixed inset-0 bg-black/95 flex flex-col z-50",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 bg-black/50 backdrop-blur-sm",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:a,className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-white",title:"Download",children:c.jsx(zT,{size:24})}),c.jsx("button",{onClick:o,className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-white",title:"Open in new window",children:c.jsx(lp,{size:24})})]}),c.jsx("button",{onClick:e,className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-white",title:"Close (Esc)",children:c.jsx(Vn,{size:24})})]}),c.jsx("div",{className:"flex-1 flex items-center justify-center p-4 overflow-auto",onClick:e,children:r==="image"?c.jsx("img",{src:n,alt:"Full size",className:"max-w-full max-h-full object-contain cursor-zoom-out",onClick:u=>u.stopPropagation()}):r==="video"?c.jsx("video",{src:n,controls:!0,autoPlay:!0,className:"max-w-full max-h-full",onClick:u=>u.stopPropagation()}):null})]})})},n3=/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:watch\?v=|embed\/|shorts\/)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,r3=/(?:https?:\/\/)?(?:open\.)?spotify\.com\/(track|album|playlist|artist|episode|show)\/([a-zA-Z0-9]+)/,s3=/(?:https?:\/\/)?(?:www\.)?(?:twitter\.com|x\.com)\/(\w+)\/status\/(\d+)/,zO=/\.(jpg|jpeg|png|gif|webp|bmp|svg)(\?.*)?$/i,UO=/\.(mp4|webm|ogg|mov)(\?.*)?$/i,BO=/\.(mp3|wav|ogg|m4a)(\?.*)?$/i,FO=t=>{const e=t.match(n3);return e?e[1]:null},HO=t=>{const e=t.match(r3);return e?{type:e[1],id:e[2]}:null},$O=t=>{const e=t.match(s3);return e?{user:e[1],id:e[2]}:null},i3=t=>n3.test(t)?"youtube":r3.test(t)?"spotify":s3.test(t)?"twitter":zO.test(t)?"image":UO.test(t)?"video":BO.test(t)?"audio":t.includes("/raw/upload/")||/\.(zip|rar|7z|exe|pdf|docx|xlsx|txt|iso|yml|json|xml|csv)$/i.test(t)?"file":"generic",a3=t=>{const e=/(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/g;return t.match(e)||[]},qO=({url:t})=>{const e=FO(t),[n,r]=C.useState(!1);if(!e)return null;const a=`https://img.youtube.com/vi/${e}/mqdefault.jpg`;return c.jsxs("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar",children:[c.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border-b border-dark-hover",children:[c.jsx(AP,{className:"text-red-500",size:18}),c.jsx("span",{className:"text-xs text-dark-muted font-medium",children:"YouTube"})]}),n?c.jsx("div",{className:"relative pt-[56.25%]",children:c.jsx("iframe",{className:"absolute inset-0 w-full h-full",src:`https://www.youtube.com/embed/${e}?autoplay=1&origin=${window.location.origin}`,title:"YouTube video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):c.jsxs("div",{className:"relative cursor-pointer group",onClick:()=>r(!0),children:[c.jsx("img",{src:a,alt:"YouTube thumbnail",className:"w-full h-auto",onError:o=>{o.target.src=`https://img.youtube.com/vi/${e}/default.jpg`}}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 group-hover:bg-black/50 transition-colors",children:c.jsx(OT,{className:"text-white/90 group-hover:text-white group-hover:scale-110 transition-all",size:64})})]}),c.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[c.jsx("span",{className:"text-xs text-dark-muted truncate",children:t}),c.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-dark-muted hover:text-brand-primary transition-colors",onClick:o=>o.stopPropagation(),children:c.jsx(lp,{size:16})})]})]})},GO=({url:t})=>{const e=HO(t);if(!e)return null;const r={track:152,album:352,playlist:352,artist:352,episode:232,show:232}[e.type]||152;return c.jsxs("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar",children:[c.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border-b border-dark-hover",children:[c.jsx(NP,{className:"text-green-500",size:18}),c.jsxs("span",{className:"text-xs text-dark-muted font-medium",children:["Spotify ",e.type]})]}),c.jsx("iframe",{src:`https://open.spotify.com/embed/${e.type}/${e.id}?utm_source=generator&theme=0`,width:"100%",height:r,frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",className:"bg-transparent"}),c.jsxs("div",{className:"px-3 py-2 flex items-center justify-between border-t border-dark-hover",children:[c.jsx("span",{className:"text-xs text-dark-muted truncate",children:t}),c.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-dark-muted hover:text-green-500 transition-colors",children:c.jsx(lp,{size:16})})]})]})},YO=({url:t})=>{const[e,n]=C.useState(!1);return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar",children:c.jsx("div",{className:"block cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>n(!0),children:c.jsx("img",{src:t,alt:"Attachment",className:"w-full h-auto max-h-[400px] object-contain bg-black/50",loading:"lazy",onError:r=>{r.target.style.display="none"}})})}),c.jsx(D1,{isOpen:e,onClose:()=>n(!1),mediaUrl:t,mediaType:"image"})]})},KO=({url:t})=>{const e=C.useRef(null),[n,r]=C.useState(!1),[a,o]=C.useState(!1);C.useEffect(()=>{if(window.twttr)u();else{const h=document.createElement("script");h.src="https://platform.twitter.com/widgets.js",h.async=!0,h.onload=()=>{window.twttr&&e.current&&u()},h.onerror=()=>o(!0),document.body.appendChild(h)}},[t]);const u=()=>{window.twttr&&e.current&&(e.current.innerHTML="",window.twttr.widgets.createTweet($O(t)?.id,e.current,{theme:"dark",conversation:"none"}).then(h=>{r(!!h),h||o(!0)}).catch(()=>o(!0)))};return a?c.jsx("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar p-3",children:c.jsxs("div",{className:"flex items-center gap-2 text-dark-muted",children:[c.jsx(Rw,{className:"text-sky-400",size:18}),c.jsx("span",{className:"text-sm",children:"Tweet could not be loaded"}),c.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"ml-auto text-brand-primary hover:underline text-sm",children:"View on X"})]})}):c.jsxs("div",{className:"mt-2 max-w-md",children:[!n&&c.jsx("div",{className:"rounded-lg border border-dark-hover bg-dark-sidebar p-4 animate-pulse",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Rw,{className:"text-sky-400",size:18}),c.jsx("span",{className:"text-sm text-dark-muted",children:"Loading tweet..."})]})}),c.jsx("div",{ref:e,className:n?"":"hidden"})]})},QO=({url:t})=>{const[e,n]=C.useState(!1);return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar",children:c.jsxs("div",{className:"cursor-pointer",onClick:()=>n(!0),children:[c.jsx("video",{src:t,className:"w-full max-h-[400px] bg-black pointer-events-none"}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 hover:bg-black/50 transition-colors",children:c.jsx(OT,{className:"text-white/90 hover:text-white",size:64})})]})}),c.jsx(D1,{isOpen:e,onClose:()=>n(!1),mediaUrl:t,mediaType:"video"})]})},XO=({url:t})=>c.jsxs("div",{className:"mt-2 max-w-md rounded-lg border border-dark-hover bg-dark-sidebar p-3 flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-primary/20 flex items-center justify-center flex-shrink-0",children:c.jsx(n7,{className:"text-brand-primary",size:24})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-xs text-dark-muted mb-1 truncate",children:t.split("/").pop()}),c.jsx("audio",{src:t,controls:!0,className:"w-full h-8"})]})]}),WO=({url:t})=>{const e=t.split("/").pop().split("?")[0]||"file",n=e.split(".").pop();return c.jsxs("div",{className:"mt-2 max-w-md rounded-lg border border-dark-hover bg-dark-sidebar p-3 flex items-center gap-3 hover:bg-dark-hover transition-colors",children:[c.jsx("div",{className:"w-12 h-12 rounded bg-dark-input flex items-center justify-center flex-shrink-0",children:c.jsx("span",{className:"text-xs font-bold text-dark-text uppercase",children:n.length<5?n:"FILE"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium text-dark-text truncate",children:e}),c.jsx("div",{className:"text-xs text-dark-muted",children:"Attachment"})]}),c.jsx("a",{href:t,download:!0,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-full hover:bg-white/10 text-dark-muted hover:text-white transition-colors",title:"Download",children:c.jsx(zT,{size:20})})]})},JO=({url:t})=>{let e="";try{e=new URL(t).hostname.replace("www.","")}catch{e=t}return c.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"mt-2 flex items-center gap-3 max-w-md rounded-lg border border-dark-hover bg-dark-sidebar p-3 hover:bg-dark-hover transition-colors group",children:[c.jsx("div",{className:"w-10 h-10 rounded-lg bg-brand-primary/20 flex items-center justify-center",children:c.jsx(lp,{className:"text-brand-primary",size:20})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium text-dark-text truncate group-hover:text-brand-primary transition-colors",children:e}),c.jsx("div",{className:"text-xs text-dark-muted truncate",children:t})]})]})},ZO=({url:t})=>{switch(i3(t)){case"youtube":return c.jsx(qO,{url:t});case"spotify":return c.jsx(GO,{url:t});case"twitter":return c.jsx(KO,{url:t});case"image":return c.jsx(YO,{url:t});case"video":return c.jsx(QO,{url:t});case"audio":return c.jsx(XO,{url:t});case"file":return c.jsx(WO,{url:t});default:return c.jsx(JO,{url:t})}},eL=({text:t})=>{const n=a3(t).slice(0,3);return n.length===0?null:c.jsx("div",{className:"space-y-2",children:n.map((r,a)=>c.jsx(ZO,{url:r},`${r}-${a}`))})},o3=({serverId:t,channelId:e,users:n,currentUserId:r,userRole:a,onReply:o,onMessagesChange:u})=>{const[h,m]=C.useState([]),[p,y]=C.useState(null),[b,x]=C.useState(null),[k,j]=C.useState(null),[R,N]=C.useState(null),[U,F]=C.useState(""),[I,O]=C.useState(null),[B,H]=C.useState("bottom"),[w,E]=C.useState(null),[A,P]=C.useState(!0),[L,z]=C.useState(!1),[M,se]=C.useState(null),[ae,G]=C.useState(null),J=C.useRef(null),W=C.useRef(null),Ee=C.useRef(0),Pe=C.useRef(!0),$=C.useRef(n);C.useEffect(()=>{$.current=n},[n]);const{success:X,error:oe}=Kr(),fe=()=>{J.current?.scrollIntoView({behavior:"smooth"})};C.useEffect(()=>{if(!e||!e)return;const Oe=qr(t?wt(de,"servers",t,"channels",e,"messages"):wt(de,"dms",e,"messages"),ym("timestamp","desc"),Pv(20)),Me=vr(Oe,K=>{const ue=[];if(K.forEach(je=>{ue.push({id:je.id,...je.data()})}),ue.reverse(),!Pe.current&&ue.length>Ee.current&&r){const je=$.current?.find(me=>me.id===r);if(je?.displayName){const me=ue.slice(Ee.current),Ne=me.some(Ie=>Ie.userId!==r&&SM(Ie.text,je.displayName)),_e=me.some(Ie=>{const st=Ie.userId!==r&&Ie.replyTo?.userId===r;return st&&console.log("Reply notification:",Ie),st});(Ne||_e)&&(console.log("Playing notification sound",{hasMention:Ne,hasReply:_e}),Ov())}}Ee.current=ue.length,m(ue),Pe.current&&(Pe.current=!1),ue.length>0&&se(ue[0]),P(ue.length===20),u&&u(ue),setTimeout(fe,100)});return()=>{Me(),Pe.current=!0}},[e,t,r,u]);const Ce=async()=>{if(!e||!M||L||!A)return;z(!0);const ve=W.current,Oe=ve?.scrollHeight||0;try{const Me=qr(t?wt(de,"servers",t,"channels",e,"messages"):wt(de,"dms",e,"messages"),ym("timestamp","desc"),UD(M.timestamp),Pv(20)),K=await Qa(Me),ue=[];K.forEach(je=>{ue.push({id:je.id,...je.data()})}),ue.length>0?(ue.reverse(),m(je=>[...ue,...je]),se(ue[0]),P(ue.length===20),setTimeout(()=>{ve&&(ve.scrollTop=ve.scrollHeight-Oe)},0)):P(!1)}catch(Me){console.error("Error loading more messages:",Me),oe("Failed to load more messages")}finally{z(!1)}},Ue=ve=>n.find(Oe=>Oe.id===ve)||{displayName:"Unknown",role:"member"},re=ve=>r===ve||a==="admin",Le=ve=>{if(ve.userId!==r)return!1;if(!ve.timestamp)return!0;const Oe=ve.timestamp.toDate();return(new Date-Oe)/1e3/60<15},Re=async()=>{if(p)try{const ve=n.find(Me=>Me.id===p.userId),Oe=t?Ae(de,"servers",t,"channels",e,"messages",p.id):Ae(de,"dms",e,"messages",p.id);await Yr(Oe),await Fn(wt(de,"adminLogs"),{type:"message_delete",channelId:e,messageId:p.id,userId:r,deletedText:p.text||"(empty)",originalUserId:p.userId,originalUserName:ve?.displayName||"Unknown User",timestamp:mt()}),X("Message deleted successfully")}catch(ve){console.error("Error deleting message:",ve),oe("Failed to delete message")}finally{y(null)}},We=ve=>{N(ve.id),F(ve.text)},ke=()=>{N(null),F("")},he=async()=>{if(!R)return;if(!U.trim()){oe("Message cannot be empty");return}const ve=R,Oe=U.trim(),K=h.find(ue=>ue.id===ve)?.text||"";N(null),F("");try{const ue=t?Ae(de,"servers",t,"channels",e,"messages",ve):Ae(de,"dms",e,"messages",ve);await it(ue,{text:Oe,edited:!0,editedAt:mt()}),await Fn(wt(de,"adminLogs"),{type:"message_edit",channelId:e,messageId:ve,userId:r,originalText:K,newText:Oe,timestamp:mt()}),X("Message updated successfully")}catch(ue){console.error("Error editing message:",ue),ue.code==="resource-exhausted"?oe("Quota exceeded. Please try again tomorrow."):oe("Failed to edit message")}},ee=async(ve,Oe)=>{try{const Me=h.find(me=>me.id===ve);if(!Me)return;const K={...Me.reactions},ue=K[Oe]||[];if(ue.includes(r)){const me=ue.filter(Ne=>Ne!==r);me.length===0?delete K[Oe]:K[Oe]=me}else K[Oe]=[...ue,r];const je=t?Ae(de,"servers",t,"channels",e,"messages",ve):Ae(de,"dms",e,"messages",ve);await it(je,{reactions:K})}catch(Me){console.error("Error toggling reaction:",Me),oe("Failed to update reaction")}},qe=async ve=>{if(a!=="admin"&&a!=="moderator"){oe("Only admins and moderators can pin messages");return}try{const Oe=!ve.pinned,Me=t?Ae(de,"servers",t,"channels",e,"messages",ve.id):Ae(de,"dms",e,"messages",ve.id);await it(Me,{pinned:Oe,pinnedBy:Oe?r:null,pinnedAt:Oe?mt():null}),await Fn(wt(de,"adminLogs"),{type:Oe?"message_pin":"message_unpin",channelId:e,messageId:ve.id,userId:r,messageText:ve.text,timestamp:mt()}),X(Oe?"Message pinned":"Message unpinned")}catch(Oe){console.error("Error toggling pin:",Oe),oe("Failed to pin message")}};return c.jsxs("div",{ref:W,className:"flex-1 overflow-y-auto px-4 py-4 space-y-4",children:[A&&h.length>0&&c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx("button",{onClick:Ce,disabled:L,className:"px-4 py-2 bg-brand-primary hover:bg-brand-primary/80 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:L?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Loading..."]}):"Load More Messages"})}),h.length===0?c.jsx("div",{className:"text-center text-dark-muted py-8",children:"No messages yet. Start the conversation!"}):h.map(ve=>{const Oe=Ue(ve.userId);return c.jsxs("div",{id:`message-${ve.id}`,className:"flex gap-3 hover:bg-dark-hover/30 px-2 py-1 rounded group transition-colors",children:[c.jsxs("div",{className:"relative flex-shrink-0",children:[Oe.photoUrl?c.jsx("img",{src:Oe.photoUrl,alt:Oe.displayName,onClick:()=>j(Oe),className:"w-10 h-10 rounded-full object-cover cursor-pointer hover:opacity-80 transition-opacity",onError:Me=>{Me.target.style.display="none",Me.target.nextSibling.style.display="flex"}}):null,c.jsx("div",{onClick:()=>j(Oe),className:"w-10 h-10 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold cursor-pointer hover:opacity-80 transition-opacity",style:{display:Oe.photoUrl?"none":"flex"},children:Oe.displayName?.[0]?.toUpperCase()||"U"})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("span",{className:"font-semibold text-dark-text hover:underline cursor-pointer",onClick:()=>j(Oe),children:Oe.displayName||"Unknown"}),c.jsx("span",{className:Bt("text-xs px-1.5 py-0.5 rounded border",cP(Oe.role)),children:Oe.role?.charAt(0).toUpperCase()+Oe.role?.slice(1)}),c.jsx("span",{className:"text-xs text-dark-muted",children:up(ve.timestamp)}),ve.edited&&c.jsx("span",{className:"text-xs text-dark-muted italic",children:"(edited)"}),R!==ve.id&&c.jsxs("div",{className:"ml-auto relative z-50",children:[c.jsx("button",{onClick:Me=>{const K=Me.clientY,ue=window.innerHeight,je=K<ue/2;H(je?"bottom":"top"),O(I===ve.id?null:ve.id)},className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-dark-hover rounded transition-all",title:"More options",children:c.jsx(l7,{size:18,className:"text-dark-muted"})}),I===ve.id&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>O(null)}),c.jsxs("div",{className:`absolute right-0 ${B==="top"?"bottom-full mb-1":"top-full mt-1"} bg-dark-sidebar border border-dark-hover rounded-lg shadow-lg py-1 z-50 min-w-[120px]`,children:[c.jsxs("button",{onClick:()=>{o&&o(ve),O(null)},className:"w-full px-3 py-2 text-left text-sm text-dark-text hover:bg-dark-hover flex items-center gap-2",children:[c.jsx(YM,{size:16,className:"text-green-400"}),"Reply"]}),Le(ve)&&c.jsxs("button",{onClick:()=>{We(ve),O(null)},className:"w-full px-3 py-2 text-left text-sm text-dark-text hover:bg-dark-hover flex items-center gap-2",children:[c.jsx(nc,{size:16,className:"text-blue-400"}),"Edit"]}),(a==="admin"||a==="moderator")&&c.jsxs("button",{onClick:()=>{qe(ve),O(null)},className:"w-full px-3 py-2 text-left text-sm text-dark-text hover:bg-dark-hover flex items-center gap-2",children:[c.jsx(tc,{size:16,className:"text-blue-400"}),ve.pinned?"Unpin":"Pin"]}),re(ve.userId)&&c.jsxs("button",{onClick:()=>{y({id:ve.id,text:ve.text,userId:ve.userId}),O(null)},className:"w-full px-3 py-2 text-left text-sm text-admin hover:bg-dark-hover flex items-center gap-2",children:[c.jsx(Vi,{size:16}),"Delete"]})]})]})]})]}),R===ve.id?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"text",value:U,onChange:Me=>F(Me.target.value),onKeyDown:Me=>{Me.key==="Enter"&&he(),Me.key==="Escape"&&ke()},className:`flex-1 bg-dark-input text-dark-text px-3 py-1.5 rounded
                                 border border-brand-primary outline-none`,autoFocus:!0}),c.jsx("button",{onClick:he,className:"text-green-500 hover:text-green-400 transition-colors",title:"Save (Enter)",children:c.jsx(Ho,{size:20})}),c.jsx("button",{onClick:ke,className:"text-admin hover:text-admin/80 transition-colors",title:"Cancel (Esc)",children:c.jsx(Vn,{size:20})})]}):c.jsxs(c.Fragment,{children:[ve.replyTo&&c.jsxs("div",{className:"mb-2 ml-2 pl-3 border-l-2 border-green-400 text-sm bg-dark-sidebar/30 rounded py-1",children:[c.jsxs("div",{className:"text-xs text-green-400 font-semibold",children:["Replying to ",Ue(ve.replyTo.userId).displayName]}),c.jsx("div",{className:"text-dark-muted italic truncate",children:ve.replyTo.text})]}),ve.pinned&&c.jsxs("div",{className:"flex items-center gap-1 text-xs text-blue-400 mb-1",children:[c.jsx(tc,{size:14}),c.jsx("span",{children:"Pinned"})]}),ve.type!=="sticker"&&(()=>{const Me=a3(ve.text);let K=ve.text;return Me.filter(je=>{const me=i3(je);return["youtube","spotify","twitter","image","video","audio","file"].includes(me)}).forEach(je=>{K=K.replace(je,"")}),K=K.trim(),K.length>0&&c.jsx("div",{className:"text-dark-text whitespace-pre-wrap break-words select-text",children:c.jsx(t3,{onMentionClick:je=>{const me=n.find(Ne=>Ne.displayName?.toLowerCase()===je.toLowerCase());me&&j(me)},children:K})})})(),ve.type==="sticker"&&c.jsx("div",{className:"mt-1 mb-1",children:c.jsx("img",{src:ve.text,alt:"Sticker",className:"w-40 h-40 object-contain drop-shadow-md hover:scale-110 transition-transform origin-bottom-left select-none cursor-pointer",onClick:()=>G({url:ve.text,type:"image"})})}),ve.type!=="sticker"&&c.jsx(eL,{text:ve.text}),ve.type==="poll"&&c.jsx(VO,{message:ve,currentUserId:r,serverId:t,channelId:e,users:n}),ve.reactions&&Object.keys(ve.reactions).length>0&&c.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[Object.entries(ve.reactions).map(([Me,K])=>c.jsxs("button",{onClick:()=>ee(ve.id,Me),className:Bt("px-2 py-1 rounded-full text-sm flex items-center gap-1 transition-colors",K.includes(r)?"bg-brand-primary/20 border border-brand-primary text-brand-primary":"bg-dark-hover border border-dark-hover text-dark-text hover:border-dark-muted"),title:`${K.map(ue=>Ue(ue).displayName).join(", ")}`,children:[c.jsx("span",{children:Me}),c.jsx("span",{className:"text-xs",children:K.length})]},Me)),c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>E(w===ve.id?null:ve.id),className:"px-2 py-1 rounded-full text-sm bg-dark-hover border border-dark-hover hover:border-dark-muted transition-colors",title:"Add reaction",children:c.jsx(xw,{size:16,className:"text-dark-muted"})}),w===ve.id&&c.jsx(Ww,{onSelect:Me=>{ee(ve.id,Me),E(null)},onClose:()=>E(null)})]})]}),(!ve.reactions||Object.keys(ve.reactions).length===0)&&c.jsxs("div",{className:"relative mt-2",children:[c.jsxs("button",{onClick:()=>E(w===ve.id?null:ve.id),className:"opacity-0 group-hover:opacity-100 px-2 py-1 rounded text-xs bg-dark-hover hover:bg-dark-input transition-all flex items-center gap-1",title:"Add reaction",children:[c.jsx(xw,{size:14}),c.jsx("span",{className:"text-dark-muted",children:"Add reaction"})]}),w===ve.id&&c.jsx(Ww,{onSelect:Me=>{ee(ve.id,Me),E(null)},onClose:()=>E(null)})]})]})]})]},ve.id)}),c.jsx("div",{ref:J}),c.jsx(gc,{isOpen:!!p,onClose:()=>y(null),onConfirm:Re,title:"Delete Message",message:"Are you sure you want to delete this message? This action cannot be undone.",confirmText:"Delete",variant:"danger"}),c.jsx(PO,{isOpen:!!b,onClose:()=>x(null),onConfirm:()=>window.open(b?.url,"_blank","noopener,noreferrer"),url:b?.url}),c.jsx(j1,{user:k,isOpen:!!k,onClose:()=>j(null)}),c.jsx(D1,{isOpen:!!ae,onClose:()=>G(null),mediaUrl:ae?.url,mediaType:ae?.type})]})},Jw={smileys:{name:"Smileys & People",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},animals:{name:"Animals & Nature",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},food:{name:"Food & Drink",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},activities:{name:"Activities",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},travel:{name:"Travel & Places",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},objects:{name:"Objects",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},symbols:{name:"Symbols",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","0","1","2","3","4","5","6","7","8","9","","","#","*","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},flags:{name:"Flags",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]}},tL=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],nL=({onSelect:t,onClose:e})=>{const[n,r]=C.useState("smileys");return c.jsxs("div",{className:"absolute bottom-full right-0 mb-2 bg-dark-sidebar border border-dark-hover rounded-lg shadow-xl w-80 z-50",children:[c.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-dark-hover",children:[c.jsx("span",{className:"text-sm font-semibold text-dark-text",children:"Emoji Picker"}),c.jsx("button",{onClick:e,className:"text-dark-muted hover:text-dark-text transition-colors",children:c.jsx(Vn,{size:18})})]}),c.jsxs("div",{className:"p-3 border-b border-dark-hover",children:[c.jsx("div",{className:"text-xs text-dark-muted mb-2 font-semibold",children:"POPULAR"}),c.jsx("div",{className:"grid grid-cols-10 gap-1",children:tL.map((a,o)=>c.jsx("button",{onClick:()=>t(a),className:"text-2xl hover:bg-dark-hover rounded p-1 transition-colors",title:a,children:a},o))})]}),c.jsx("div",{className:"flex gap-1 p-2 border-b border-dark-hover overflow-x-auto",children:Object.entries(Jw).map(([a,o])=>c.jsx("button",{onClick:()=>r(a),className:`text-xl p-2 rounded transition-colors ${n===a?"bg-brand-primary/20 text-brand-primary":"hover:bg-dark-hover text-dark-muted"}`,title:o.name,children:o.icon},a))}),c.jsx("div",{className:"p-3 h-64 overflow-y-auto",children:c.jsx("div",{className:"grid grid-cols-8 gap-1",children:Jw[n].emojis.map((a,o)=>c.jsx("button",{onClick:()=>t(a),className:"text-2xl hover:bg-dark-hover rounded p-1 transition-colors",title:a,children:a},o))})})]})};let bf;const rL=new Uint8Array(16);function sL(){if(!bf&&(bf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!bf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return bf(rL)}const nr=[];for(let t=0;t<256;++t)nr.push((t+256).toString(16).slice(1));function iL(t,e=0){return nr[t[e+0]]+nr[t[e+1]]+nr[t[e+2]]+nr[t[e+3]]+"-"+nr[t[e+4]]+nr[t[e+5]]+"-"+nr[t[e+6]]+nr[t[e+7]]+"-"+nr[t[e+8]]+nr[t[e+9]]+"-"+nr[t[e+10]]+nr[t[e+11]]+nr[t[e+12]]+nr[t[e+13]]+nr[t[e+14]]+nr[t[e+15]]}const aL=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Zw={randomUUID:aL};function oL(t,e,n){if(Zw.randomUUID&&!t)return Zw.randomUUID();t=t||{};const r=t.random||(t.rng||sL)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,iL(r)}var lL=Object.defineProperty,cL=Object.defineProperties,uL=Object.getOwnPropertyDescriptors,eS=Object.getOwnPropertySymbols,dL=Object.prototype.hasOwnProperty,hL=Object.prototype.propertyIsEnumerable,tS=(t,e,n)=>e in t?lL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,M1=(t,e)=>{for(var n in e||(e={}))dL.call(e,n)&&tS(t,n,e[n]);if(eS)for(var n of eS(e))hL.call(e,n)&&tS(t,n,e[n]);return t},fL=(t,e)=>cL(t,uL(e)),rr={ENABLED:typeof window<"u"&&typeof location<"u"&&location.search.indexOf("giphy-debug")!==-1,LEVEL:0,PREFIX:"GiphyJS",debug:(...t)=>{rr.ENABLED&&rr.LEVEL<=0&&console.debug(rr.PREFIX,...t)},info:(...t)=>{rr.ENABLED&&rr.LEVEL<=1&&console.info(rr.PREFIX,...t)},warn:(...t)=>{rr.ENABLED&&rr.LEVEL<=2&&console.warn(rr.PREFIX,...t)},error:(...t)=>{rr.ENABLED&&rr.LEVEL<=3&&console.error(rr.PREFIX,...t)}},mL=(t,e,n)=>{let r=1/0,a;return n.forEach(o=>{const u=o.width/t,h=o.height/e,m=u*h,p=Math.abs(1-m);p<r&&(r=p,a=o)}),a},pL=50;function gL(t,e,n,r=pL){let[a]=t;const o=t.filter(u=>(u.width*u.height>a.width*a.height&&(a=u),e-u.width<=r&&n-u.height<=r));return o.length===0?a:mL(e,n,o)}var l3=gL;function vL(t,e=0){return t.slice(0,e)}function yL(t,e){return t.filter(n=>e.indexOf(n)===-1)}function Qv(t,e){const n={};return e.forEach(r=>{t[r]!==void 0&&(n[r]=t[r])}),n}var bL=t=>{let e=0,n=0;const r=t.offsetWidth,a=t.offsetHeight;do e+=t.offsetLeft,n+=t.offsetTop,t=t.offsetParent;while(t);const o={left:e,top:n,width:r,height:a,right:e+r,bottom:n+a,x:e,y:n};return fL(M1({},o),{toJSON:()=>JSON.stringify(o)})},xL=bL,ko="",c3=16,u3=()=>{let t="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=e.length;for(let r=0;r<c3;r++)t+=e.charAt(Math.floor(Math.random()*n));return t},_L=()=>{if(!ko){try{ko=sessionStorage.getItem("giphyPingbackId")}catch{}if(!ko){const t=new Date().getTime().toString(16);try{ko=`${t}${oL().replace(/-/g,"")}`.substring(0,c3)}catch{ko=u3()}try{sessionStorage.setItem("giphyPingbackId",ko)}catch{}}}return ko},P1=_L,xf=null;new Promise(t=>{typeof Image>"u"&&t(!1);const e=new Image;e.onload=()=>{xf=!0,t(xf)},e.onerror=()=>{xf=!1,t(xf)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"});var nS=(t,e,n)=>{let r=t?.assets;if(r){r=M1({},r),delete r.source;const a=Object.values(r).sort((o,u)=>o.width-u.width);return l3(a,e,n)}},wL=(t,e,n,r)=>{const a=Qv(t,["original","fixed_width","fixed_height","fixed_width_small","fixed_height_small"]),o=Object.entries(a).map(([u,h])=>M1({renditionName:u},h));return l3(o,e,n,r)},pp=({images:t},e)=>{const{fixed_width:n}=t;if(n){const{width:r,height:a}=n,o=r/a;return Math.round(e/o)}return 0},SL=({images:t},e)=>{const{fixed_width:n}=t;if(n){const{width:r,height:a}=n,o=r/a;return Math.round(e*o)}return 0},EL=({alt_text:t,user:e,tags:n=[],is_sticker:r=!1,title:a=""})=>{if(t)return t;if(a)return a;const o=e&&e.username||"",u=vL(yL(n,["transparent"]),o?4:5);return`${o?`${o} `:""}${u.join(" ")} ${r?"Sticker":"GIF"}`},Qu=(typeof window<"u"?window:global)||{};Qu._GIPHY_SDK_HEADERS_=Qu._GIPHY_SDK_HEADERS_||(Qu.Headers?new Qu.Headers({"X-GIPHY-SDK-PLATFORM":"web"}):void 0);var O1=()=>Qu._GIPHY_SDK_HEADERS_,Xv=(t,e)=>{var n;return(n=O1())==null?void 0:n.set(t,e)},CL=Object.defineProperty,TL=Object.defineProperties,kL=Object.getOwnPropertyDescriptors,NL=Object.getOwnPropertyNames,rS=Object.getOwnPropertySymbols,AL=Object.prototype.hasOwnProperty,RL=Object.prototype.propertyIsEnumerable,sS=(t,e,n)=>e in t?CL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qs=(t,e)=>{for(var n in e||(e={}))AL.call(e,n)&&sS(t,n,e[n]);if(rS)for(var n of rS(e))RL.call(e,n)&&sS(t,n,e[n]);return t},J0=(t,e)=>TL(t,kL(e)),jL=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,n)=>(typeof require<"u"?require:e)[n]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')}),IL=(t,e)=>function(){return e||(0,t[NL(t)[0]])((e={exports:{}}).exports,e),e.exports},d3=(t,e,n)=>new Promise((r,a)=>{var o=m=>{try{h(n.next(m))}catch(p){a(p)}},u=m=>{try{h(n.throw(m))}catch(p){a(p)}},h=m=>m.done?r(m.value):Promise.resolve(m.value).then(o,u);h((n=n.apply(t,e)).next())}),DL=IL({"package.json"(t,e){e.exports={scripts:{lint:"run -T eslint . --ext .ts,.tsx",clean:"rm -rf ./dist",dev:"parcel public/test.html",docs:"typedoc src/index.ts",build:"run -T tsup src/index.ts --format cjs,esm --dts && run -T publint",prepublish:"npm run clean && npm run build",test:"run -T jest --config ./jestconfig.js","test:watch":"run -T jest --config ./jestconfig.js --watchAll"},name:"@giphy/js-fetch-api",version:"5.7.0",description:"Javascript API to fetch gifs and stickers from the GIPHY API.",homepage:"https://github.com/Giphy/giphy-js/tree/master/packages/fetch-api",main:"dist/index.cjs",types:"dist/index.d.ts",module:"dist/index.js",type:"module",sideEffects:!1,exports:{".":{types:"./dist/index.d.ts",import:"./dist/index.js",require:"./dist/index.cjs"},"./package.json":"./package.json"},files:["dist/","src/**/*"],license:"MIT",publishConfig:{access:"public"},dependencies:{"@giphy/js-types":"*","@giphy/js-util":"*"},devDependencies:{"jest-fetch-mock":"^3.0.3","parcel-bundler":"latest",typedoc:"^0.20.37","typedoc-thunder-theme":"^0.0.3",typescript:"^5.0.4"}}}}),ML=["is_anonymous","is_community","is_featured","is_hidden","is_indexable","is_preserve_size","is_realtime","is_removed","is_sticker","is_dynamic"],PL=["suppress_chrome","is_public","is_verified"],iS=t=>e=>t[e]=!!t[e],OL=t=>typeof t=="string"?t:t.text,h3=(t,e="")=>{const n=qs({},t);n.id=String(n.id),n.tags=(n.tags||[]).map(OL),n.bottle_data||(n.bottle_data={}),n.response_id=e,ML.forEach(iS(n)),Object.keys(n.images||{}).forEach(a=>{const o=n.images[a];o.width=parseInt(o.width),o.height=parseInt(o.height)});const{user:r}=n;if(r){const a=qs({},r);PL.forEach(iS(a)),n.user=a}return n},aS=t=>{const{response_id:e}=t.meta;return t.data=h3(t.data,e),t},Ri=t=>{const{response_id:e}=t.meta;return t.data=t.data.map(n=>h3(n,e)),t},LL=(typeof window<"u"?window:global)||{},VL=LL.GIPHY_API_URL||"https://api.giphy.com/v1/",f3=class extends Error{constructor(e,n,r=0,a=""){super(e),this.url=n,this.status=r,this.statusText=a}},zL=class extends f3{},oS=f3,UL="@giphy/js-fetch-api: ",BL="Error fetching",FL=t=>t,xs={},HL=6e4,$L=6e3,qL=()=>{const t=Date.now();Object.keys(xs).forEach(e=>{const n=xs[e].isError?$L:HL;t-xs[e].ts>=n&&delete xs[e]})};function GL(t,e={}){const{apiVersion:n=1,noCache:r=!1,normalizer:a=FL}=e,o=VL.replace(/\/v\d+\/$/,`/v${n}/`);if(qL(),!xs[t]||r){const u=`${o}${t}`,h=()=>d3(this,null,function*(){var m,p;let y;try{const b=yield fetch(u,{method:"get"});if(b.ok){const x=yield b.json();if((m=x.meta)!=null&&m.response_id)return a(x);throw{message:"synthetic response"}}else{let x=BL;try{const j=yield b.json();j.message&&(x=j.message),(p=j.meta)!=null&&p.msg&&(x=j.meta.msg)}catch{}xs[t]&&(xs[t].isError=!0);let k=oS;x==="This content is not available in your location"&&(k=zL),y=new k(`${UL}${x}`,u,b.status,b.statusText)}}catch(b){y=new oS(b.message,u),xs[t]&&(xs[t].isError=!0)}throw y});xs[t]={request:h(),ts:Date.now()}}return xs[t].request}var Ar=GL,Z0=t=>t&&t.type?t.type:"gifs",YL=class{constructor(t,e={}){this.getQS=(n={})=>new URLSearchParams(qs(J0(qs({},n),{api_key:this.apiKey,pingback_id:P1()}),this.qsParams)).toString(),this.apiKey=t,this.qsParams=e}categories(t){return Ar(`gifs/categories?${this.getQS(t)}`)}gif(t,e){const n=e?.internal?"internal/":"";return Ar(`${n}gifs/${t}?${this.getQS()}`,{normalizer:aS})}gifs(t,e){return Array.isArray(t)?Ar(`gifs?${this.getQS({ids:t.join(",")})}`,{normalizer:Ri}):Ar(`gifs/categories/${t}/${e}?${this.getQS()}`,{normalizer:Ri})}emoji(t){return Ar(`emoji?${this.getQS(t)}`,{normalizer:Ri})}emojiDefaultVariations(t){return Ar(`emoji?${this.getQS(t)}`,{apiVersion:2,normalizer:Ri})}emojiVariations(t){return Ar(`emoji/${t}/variations?${this.getQS()}`,{apiVersion:2,normalizer:Ri})}animate(t,e={}){const n=this.getQS(J0(qs({},e),{m:t}));return Ar(`text/animate?${n}`,{normalizer:Ri})}search(t,e={}){const n=e.channel?`@${e.channel} ${t}`:t;let r;e.type==="text"&&(r=!0);const a=this.getQS(J0(qs({rating:"pg-13"},e),{q:n,excludeDynamicResults:r}));return Ar(`${Z0(e)}/search?${a}`,{normalizer:Ri})}subcategories(t,e){return Ar(`gifs/categories/${t}?${this.getQS(e)}`)}trending(t={}){return Ar(`${Z0(t)}/trending?${this.getQS(qs({rating:"pg-13"},t))}`,{normalizer:Ri})}random(t){return Ar(`${Z0(t)}/random?${this.getQS(qs({rating:"pg-13"},t))}`,{noCache:!0,normalizer:aS})}related(t,e={}){const{type:n="gifs"}=e;return Ar(`${n}/related?${this.getQS(qs({gif_id:t,rating:"pg-13"},e))}`,{normalizer:Ri})}channels(t,e={}){return Ar(`channels/search?${this.getQS(qs({q:t,rating:"pg-13"},e))}`)}},m3=YL,KL=Symbol("has inivisible gifs"),p3=(t,e=[])=>{let n=[...e],r=e.map(u=>u.id),a=e.length,o=!1;return u=>d3(void 0,null,function*(){if(u&&(n=u,r=u.map(b=>b.id)),o)return n;const h=yield t(a),{pagination:m,data:p}=h;a=m.count+m.offset,o=a===m.total_count,p.forEach(b=>{const{id:x}=b;r.includes(x)||(n.push(b),r.push(x))});const y=[...n];return m.hasMoreGifs&&(y.skipCountCheck=KL),y})},lS;if(typeof jL<"u"){const{version:t}=DL();(lS=O1())!=null&&lS.get("X-GIPHY-SDK-NAME")||(Xv("X-GIPHY-SDK-NAME","FetchAPI"),Xv("X-GIPHY-SDK-VERSION",t))}var Dr=function(){return Dr=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Dr.apply(this,arguments)};function yd(t,e,n){if(n||arguments.length===2)for(var r=0,a=e.length,o;r<a;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var un="-ms-",nd="-moz-",Yt="-webkit-",g3="comm",gp="rule",L1="decl",QL="@import",v3="@keyframes",XL="@layer",y3=Math.abs,V1=String.fromCharCode,Wv=Object.assign;function WL(t,e){return Qn(t,0)^45?(((e<<2^Qn(t,0))<<2^Qn(t,1))<<2^Qn(t,2))<<2^Qn(t,3):0}function b3(t){return t.trim()}function ji(t,e){return(t=e.exec(t))?t[0]:t}function Et(t,e,n){return t.replace(e,n)}function qf(t,e,n){return t.indexOf(e,n)}function Qn(t,e){return t.charCodeAt(e)|0}function yc(t,e,n){return t.slice(e,n)}function Ys(t){return t.length}function x3(t){return t.length}function Xu(t,e){return e.push(t),t}function JL(t,e){return t.map(e).join("")}function cS(t,e){return t.filter(function(n){return!ji(n,e)})}var vp=1,bc=1,_3=0,cs=0,Pn=0,Mc="";function yp(t,e,n,r,a,o,u,h){return{value:t,root:e,parent:n,type:r,props:a,children:o,line:vp,column:bc,length:u,return:"",siblings:h}}function ka(t,e){return Wv(yp("",null,null,"",null,null,0,t.siblings),t,{length:-t.length},e)}function Hl(t){for(;t.root;)t=ka(t.root,{children:[t]});Xu(t,t.siblings)}function ZL(){return Pn}function eV(){return Pn=cs>0?Qn(Mc,--cs):0,bc--,Pn===10&&(bc=1,vp--),Pn}function Cs(){return Pn=cs<_3?Qn(Mc,cs++):0,bc++,Pn===10&&(bc=1,vp++),Pn}function Oo(){return Qn(Mc,cs)}function Gf(){return cs}function bp(t,e){return yc(Mc,t,e)}function Jv(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function tV(t){return vp=bc=1,_3=Ys(Mc=t),cs=0,[]}function nV(t){return Mc="",t}function ev(t){return b3(bp(cs-1,Zv(t===91?t+2:t===40?t+1:t)))}function rV(t){for(;(Pn=Oo())&&Pn<33;)Cs();return Jv(t)>2||Jv(Pn)>3?"":" "}function sV(t,e){for(;--e&&Cs()&&!(Pn<48||Pn>102||Pn>57&&Pn<65||Pn>70&&Pn<97););return bp(t,Gf()+(e<6&&Oo()==32&&Cs()==32))}function Zv(t){for(;Cs();)switch(Pn){case t:return cs;case 34:case 39:t!==34&&t!==39&&Zv(Pn);break;case 40:t===41&&Zv(t);break;case 92:Cs();break}return cs}function iV(t,e){for(;Cs()&&t+Pn!==57;)if(t+Pn===84&&Oo()===47)break;return"/*"+bp(e,cs-1)+"*"+V1(t===47?t:Cs())}function aV(t){for(;!Jv(Oo());)Cs();return bp(t,cs)}function oV(t){return nV(Yf("",null,null,null,[""],t=tV(t),0,[0],t))}function Yf(t,e,n,r,a,o,u,h,m){for(var p=0,y=0,b=u,x=0,k=0,j=0,R=1,N=1,U=1,F=0,I="",O=a,B=o,H=r,w=I;N;)switch(j=F,F=Cs()){case 40:if(j!=108&&Qn(w,b-1)==58){qf(w+=Et(ev(F),"&","&\f"),"&\f",y3(p?h[p-1]:0))!=-1&&(U=-1);break}case 34:case 39:case 91:w+=ev(F);break;case 9:case 10:case 13:case 32:w+=rV(j);break;case 92:w+=sV(Gf()-1,7);continue;case 47:switch(Oo()){case 42:case 47:Xu(lV(iV(Cs(),Gf()),e,n,m),m);break;default:w+="/"}break;case 123*R:h[p++]=Ys(w)*U;case 125*R:case 59:case 0:switch(F){case 0:case 125:N=0;case 59+y:U==-1&&(w=Et(w,/\f/g,"")),k>0&&Ys(w)-b&&Xu(k>32?dS(w+";",r,n,b-1,m):dS(Et(w," ","")+";",r,n,b-2,m),m);break;case 59:w+=";";default:if(Xu(H=uS(w,e,n,p,y,a,h,I,O=[],B=[],b,o),o),F===123)if(y===0)Yf(w,e,H,H,O,o,b,h,B);else switch(x===99&&Qn(w,3)===110?100:x){case 100:case 108:case 109:case 115:Yf(t,H,H,r&&Xu(uS(t,H,H,0,0,a,h,I,a,O=[],b,B),B),a,B,b,h,r?O:B);break;default:Yf(w,H,H,H,[""],B,0,h,B)}}p=y=k=0,R=U=1,I=w="",b=u;break;case 58:b=1+Ys(w),k=j;default:if(R<1){if(F==123)--R;else if(F==125&&R++==0&&eV()==125)continue}switch(w+=V1(F),F*R){case 38:U=y>0?1:(w+="\f",-1);break;case 44:h[p++]=(Ys(w)-1)*U,U=1;break;case 64:Oo()===45&&(w+=ev(Cs())),x=Oo(),y=b=Ys(I=w+=aV(Gf())),F++;break;case 45:j===45&&Ys(w)==2&&(R=0)}}return o}function uS(t,e,n,r,a,o,u,h,m,p,y,b){for(var x=a-1,k=a===0?o:[""],j=x3(k),R=0,N=0,U=0;R<r;++R)for(var F=0,I=yc(t,x+1,x=y3(N=u[R])),O=t;F<j;++F)(O=b3(N>0?k[F]+" "+I:Et(I,/&\f/g,k[F])))&&(m[U++]=O);return yp(t,e,n,a===0?gp:h,m,p,y,b)}function lV(t,e,n,r){return yp(t,e,n,g3,V1(ZL()),yc(t,2,-2),0,r)}function dS(t,e,n,r,a){return yp(t,e,n,L1,yc(t,0,r),yc(t,r+1,-1),r,a)}function w3(t,e,n){switch(WL(t,e)){case 5103:return Yt+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Yt+t+t;case 4789:return nd+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Yt+t+nd+t+un+t+t;case 5936:switch(Qn(t,e+11)){case 114:return Yt+t+un+Et(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Yt+t+un+Et(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Yt+t+un+Et(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return Yt+t+un+t+t;case 6165:return Yt+t+un+"flex-"+t+t;case 5187:return Yt+t+Et(t,/(\w+).+(:[^]+)/,Yt+"box-$1$2"+un+"flex-$1$2")+t;case 5443:return Yt+t+un+"flex-item-"+Et(t,/flex-|-self/g,"")+(ji(t,/flex-|baseline/)?"":un+"grid-row-"+Et(t,/flex-|-self/g,""))+t;case 4675:return Yt+t+un+"flex-line-pack"+Et(t,/align-content|flex-|-self/g,"")+t;case 5548:return Yt+t+un+Et(t,"shrink","negative")+t;case 5292:return Yt+t+un+Et(t,"basis","preferred-size")+t;case 6060:return Yt+"box-"+Et(t,"-grow","")+Yt+t+un+Et(t,"grow","positive")+t;case 4554:return Yt+Et(t,/([^-])(transform)/g,"$1"+Yt+"$2")+t;case 6187:return Et(Et(Et(t,/(zoom-|grab)/,Yt+"$1"),/(image-set)/,Yt+"$1"),t,"")+t;case 5495:case 3959:return Et(t,/(image-set\([^]*)/,Yt+"$1$`$1");case 4968:return Et(Et(t,/(.+:)(flex-)?(.*)/,Yt+"box-pack:$3"+un+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Yt+t+t;case 4200:if(!ji(t,/flex-|baseline/))return un+"grid-column-align"+yc(t,e)+t;break;case 2592:case 3360:return un+Et(t,"template-","")+t;case 4384:case 3616:return n&&n.some(function(r,a){return e=a,ji(r.props,/grid-\w+-end/)})?~qf(t+(n=n[e].value),"span",0)?t:un+Et(t,"-start","")+t+un+"grid-row-span:"+(~qf(n,"span",0)?ji(n,/\d+/):+ji(n,/\d+/)-+ji(t,/\d+/))+";":un+Et(t,"-start","")+t;case 4896:case 4128:return n&&n.some(function(r){return ji(r.props,/grid-\w+-start/)})?t:un+Et(Et(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return Et(t,/(.+)-inline(.+)/,Yt+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ys(t)-1-e>6)switch(Qn(t,e+1)){case 109:if(Qn(t,e+4)!==45)break;case 102:return Et(t,/(.+:)(.+)-([^]+)/,"$1"+Yt+"$2-$3$1"+nd+(Qn(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~qf(t,"stretch",0)?w3(Et(t,"stretch","fill-available"),e,n)+t:t}break;case 5152:case 5920:return Et(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,a,o,u,h,m,p){return un+a+":"+o+p+(u?un+a+"-span:"+(h?m:+m-+o)+p:"")+t});case 4949:if(Qn(t,e+6)===121)return Et(t,":",":"+Yt)+t;break;case 6444:switch(Qn(t,Qn(t,14)===45?18:11)){case 120:return Et(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Yt+(Qn(t,14)===45?"inline-":"")+"box$3$1"+Yt+"$2$3$1"+un+"$2box$3")+t;case 100:return Et(t,":",":"+un)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return Et(t,"scroll-","scroll-snap-")+t}return t}function jm(t,e){for(var n="",r=0;r<t.length;r++)n+=e(t[r],r,t,e)||"";return n}function cV(t,e,n,r){switch(t.type){case XL:if(t.children.length)break;case QL:case L1:return t.return=t.return||t.value;case g3:return"";case v3:return t.return=t.value+"{"+jm(t.children,r)+"}";case gp:if(!Ys(t.value=t.props.join(",")))return""}return Ys(n=jm(t.children,r))?t.return=t.value+"{"+n+"}":""}function uV(t){var e=x3(t);return function(n,r,a,o){for(var u="",h=0;h<e;h++)u+=t[h](n,r,a,o)||"";return u}}function dV(t){return function(e){e.root||(e=e.return)&&t(e)}}function hV(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case L1:t.return=w3(t.value,t.length,n);return;case v3:return jm([ka(t,{value:Et(t.value,"@","@"+Yt)})],r);case gp:if(t.length)return JL(n=t.props,function(a){switch(ji(a,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Hl(ka(t,{props:[Et(a,/:(read-\w+)/,":"+nd+"$1")]})),Hl(ka(t,{props:[a]})),Wv(t,{props:cS(n,r)});break;case"::placeholder":Hl(ka(t,{props:[Et(a,/:(plac\w+)/,":"+Yt+"input-$1")]})),Hl(ka(t,{props:[Et(a,/:(plac\w+)/,":"+nd+"$1")]})),Hl(ka(t,{props:[Et(a,/:(plac\w+)/,un+"input-$1")]})),Hl(ka(t,{props:[a]})),Wv(t,{props:cS(n,r)});break}return""})}}var fV={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},$r={},xc=typeof process<"u"&&$r!==void 0&&($r.REACT_APP_SC_ATTR||$r.SC_ATTR)||"data-styled",S3="active",E3="data-styled-version",xp="6.1.19",z1=`/*!sc*/
`,Im=typeof window<"u"&&typeof document<"u",mV=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&$r!==void 0&&$r.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&$r.REACT_APP_SC_DISABLE_SPEEDY!==""?$r.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&$r.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&$r!==void 0&&$r.SC_DISABLE_SPEEDY!==void 0&&$r.SC_DISABLE_SPEEDY!==""&&$r.SC_DISABLE_SPEEDY!=="false"&&$r.SC_DISABLE_SPEEDY),_p=Object.freeze([]),_c=Object.freeze({});function pV(t,e,n){return n===void 0&&(n=_c),t.theme!==n.theme&&t.theme||e||n.theme}var C3=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),gV=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,vV=/(^-|-$)/g;function hS(t){return t.replace(gV,"-").replace(vV,"")}var yV=/(a)(d)/gi,_f=52,fS=function(t){return String.fromCharCode(t+(t>25?39:97))};function ey(t){var e,n="";for(e=Math.abs(t);e>_f;e=e/_f|0)n=fS(e%_f)+n;return(fS(e%_f)+n).replace(yV,"$1-$2")}var tv,T3=5381,Ql=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},k3=function(t){return Ql(T3,t)};function N3(t){return ey(k3(t)>>>0)}function bV(t){return t.displayName||t.name||"Component"}function nv(t){return typeof t=="string"&&!0}var A3=typeof Symbol=="function"&&Symbol.for,R3=A3?Symbol.for("react.memo"):60115,xV=A3?Symbol.for("react.forward_ref"):60112,_V={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},wV={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},j3={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},SV=((tv={})[xV]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},tv[R3]=j3,tv);function mS(t){return("type"in(e=t)&&e.type.$$typeof)===R3?j3:"$$typeof"in t?SV[t.$$typeof]:_V;var e}var EV=Object.defineProperty,CV=Object.getOwnPropertyNames,pS=Object.getOwnPropertySymbols,TV=Object.getOwnPropertyDescriptor,kV=Object.getPrototypeOf,gS=Object.prototype;function I3(t,e,n){if(typeof e!="string"){if(gS){var r=kV(e);r&&r!==gS&&I3(t,r,n)}var a=CV(e);pS&&(a=a.concat(pS(e)));for(var o=mS(t),u=mS(e),h=0;h<a.length;++h){var m=a[h];if(!(m in wV||n&&n[m]||u&&m in u||o&&m in o)){var p=TV(e,m);try{EV(t,m,p)}catch{}}}}return t}function wc(t){return typeof t=="function"}function U1(t){return typeof t=="object"&&"styledComponentId"in t}function Io(t,e){return t&&e?"".concat(t," ").concat(e):t||e||""}function ty(t,e){if(t.length===0)return"";for(var n=t[0],r=1;r<t.length;r++)n+=t[r];return n}function bd(t){return t!==null&&typeof t=="object"&&t.constructor.name===Object.name&&!("props"in t&&t.$$typeof)}function ny(t,e,n){if(n===void 0&&(n=!1),!n&&!bd(t)&&!Array.isArray(t))return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)t[r]=ny(t[r],e[r]);else if(bd(e))for(var r in e)t[r]=ny(t[r],e[r]);return t}function B1(t,e){Object.defineProperty(t,"toString",{value:e})}function zd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(t," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var NV=(function(){function t(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return t.prototype.indexOfGroup=function(e){for(var n=0,r=0;r<e;r++)n+=this.groupSizes[r];return n},t.prototype.insertRules=function(e,n){if(e>=this.groupSizes.length){for(var r=this.groupSizes,a=r.length,o=a;e>=o;)if((o<<=1)<0)throw zd(16,"".concat(e));this.groupSizes=new Uint32Array(o),this.groupSizes.set(r),this.length=o;for(var u=a;u<o;u++)this.groupSizes[u]=0}for(var h=this.indexOfGroup(e+1),m=(u=0,n.length);u<m;u++)this.tag.insertRule(h,n[u])&&(this.groupSizes[e]++,h++)},t.prototype.clearGroup=function(e){if(e<this.length){var n=this.groupSizes[e],r=this.indexOfGroup(e),a=r+n;this.groupSizes[e]=0;for(var o=r;o<a;o++)this.tag.deleteRule(r)}},t.prototype.getGroup=function(e){var n="";if(e>=this.length||this.groupSizes[e]===0)return n;for(var r=this.groupSizes[e],a=this.indexOfGroup(e),o=a+r,u=a;u<o;u++)n+="".concat(this.tag.getRule(u)).concat(z1);return n},t})(),Kf=new Map,Dm=new Map,Qf=1,wf=function(t){if(Kf.has(t))return Kf.get(t);for(;Dm.has(Qf);)Qf++;var e=Qf++;return Kf.set(t,e),Dm.set(e,t),e},AV=function(t,e){Qf=e+1,Kf.set(t,e),Dm.set(e,t)},RV="style[".concat(xc,"][").concat(E3,'="').concat(xp,'"]'),jV=new RegExp("^".concat(xc,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),IV=function(t,e,n){for(var r,a=n.split(","),o=0,u=a.length;o<u;o++)(r=a[o])&&t.registerName(e,r)},DV=function(t,e){for(var n,r=((n=e.textContent)!==null&&n!==void 0?n:"").split(z1),a=[],o=0,u=r.length;o<u;o++){var h=r[o].trim();if(h){var m=h.match(jV);if(m){var p=0|parseInt(m[1],10),y=m[2];p!==0&&(AV(y,p),IV(t,y,m[3]),t.getTag().insertRules(p,a)),a.length=0}else a.push(h)}}},vS=function(t){for(var e=document.querySelectorAll(RV),n=0,r=e.length;n<r;n++){var a=e[n];a&&a.getAttribute(xc)!==S3&&(DV(t,a),a.parentNode&&a.parentNode.removeChild(a))}};function MV(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var D3=function(t){var e=document.head,n=t||e,r=document.createElement("style"),a=(function(h){var m=Array.from(h.querySelectorAll("style[".concat(xc,"]")));return m[m.length-1]})(n),o=a!==void 0?a.nextSibling:null;r.setAttribute(xc,S3),r.setAttribute(E3,xp);var u=MV();return u&&r.setAttribute("nonce",u),n.insertBefore(r,o),r},PV=(function(){function t(e){this.element=D3(e),this.element.appendChild(document.createTextNode("")),this.sheet=(function(n){if(n.sheet)return n.sheet;for(var r=document.styleSheets,a=0,o=r.length;a<o;a++){var u=r[a];if(u.ownerNode===n)return u}throw zd(17)})(this.element),this.length=0}return t.prototype.insertRule=function(e,n){try{return this.sheet.insertRule(n,e),this.length++,!0}catch{return!1}},t.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.prototype.getRule=function(e){var n=this.sheet.cssRules[e];return n&&n.cssText?n.cssText:""},t})(),OV=(function(){function t(e){this.element=D3(e),this.nodes=this.element.childNodes,this.length=0}return t.prototype.insertRule=function(e,n){if(e<=this.length&&e>=0){var r=document.createTextNode(n);return this.element.insertBefore(r,this.nodes[e]||null),this.length++,!0}return!1},t.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},t})(),LV=(function(){function t(e){this.rules=[],this.length=0}return t.prototype.insertRule=function(e,n){return e<=this.length&&(this.rules.splice(e,0,n),this.length++,!0)},t.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},t})(),yS=Im,VV={isServer:!Im,useCSSOMInjection:!mV},M3=(function(){function t(e,n,r){e===void 0&&(e=_c),n===void 0&&(n={});var a=this;this.options=Dr(Dr({},VV),e),this.gs=n,this.names=new Map(r),this.server=!!e.isServer,!this.server&&Im&&yS&&(yS=!1,vS(this)),B1(this,function(){return(function(o){for(var u=o.getTag(),h=u.length,m="",p=function(b){var x=(function(U){return Dm.get(U)})(b);if(x===void 0)return"continue";var k=o.names.get(x),j=u.getGroup(b);if(k===void 0||!k.size||j.length===0)return"continue";var R="".concat(xc,".g").concat(b,'[id="').concat(x,'"]'),N="";k!==void 0&&k.forEach(function(U){U.length>0&&(N+="".concat(U,","))}),m+="".concat(j).concat(R,'{content:"').concat(N,'"}').concat(z1)},y=0;y<h;y++)p(y);return m})(a)})}return t.registerId=function(e){return wf(e)},t.prototype.rehydrate=function(){!this.server&&Im&&vS(this)},t.prototype.reconstructWithOptions=function(e,n){return n===void 0&&(n=!0),new t(Dr(Dr({},this.options),e),this.gs,n&&this.names||void 0)},t.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.prototype.getTag=function(){return this.tag||(this.tag=(e=(function(n){var r=n.useCSSOMInjection,a=n.target;return n.isServer?new LV(a):r?new PV(a):new OV(a)})(this.options),new NV(e)));var e},t.prototype.hasNameForId=function(e,n){return this.names.has(e)&&this.names.get(e).has(n)},t.prototype.registerName=function(e,n){if(wf(e),this.names.has(e))this.names.get(e).add(n);else{var r=new Set;r.add(n),this.names.set(e,r)}},t.prototype.insertRules=function(e,n,r){this.registerName(e,n),this.getTag().insertRules(wf(e),r)},t.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.prototype.clearRules=function(e){this.getTag().clearGroup(wf(e)),this.clearNames(e)},t.prototype.clearTag=function(){this.tag=void 0},t})(),zV=/&/g,UV=/^\s*\/\/.*$/gm;function P3(t,e){return t.map(function(n){return n.type==="rule"&&(n.value="".concat(e," ").concat(n.value),n.value=n.value.replaceAll(",",",".concat(e," ")),n.props=n.props.map(function(r){return"".concat(e," ").concat(r)})),Array.isArray(n.children)&&n.type!=="@keyframes"&&(n.children=P3(n.children,e)),n})}function BV(t){var e,n,r,a=_c,o=a.options,u=o===void 0?_c:o,h=a.plugins,m=h===void 0?_p:h,p=function(x,k,j){return j.startsWith(n)&&j.endsWith(n)&&j.replaceAll(n,"").length>0?".".concat(e):x},y=m.slice();y.push(function(x){x.type===gp&&x.value.includes("&")&&(x.props[0]=x.props[0].replace(zV,n).replace(r,p))}),u.prefix&&y.push(hV),y.push(cV);var b=function(x,k,j,R){k===void 0&&(k=""),j===void 0&&(j=""),R===void 0&&(R="&"),e=R,n=k,r=new RegExp("\\".concat(n,"\\b"),"g");var N=x.replace(UV,""),U=oV(j||k?"".concat(j," ").concat(k," { ").concat(N," }"):N);u.namespace&&(U=P3(U,u.namespace));var F=[];return jm(U,uV(y.concat(dV(function(I){return F.push(I)})))),F};return b.hash=m.length?m.reduce(function(x,k){return k.name||zd(15),Ql(x,k.name)},T3).toString():"",b}var FV=new M3,ry=BV(),O3=ye.createContext({shouldForwardProp:void 0,styleSheet:FV,stylis:ry});O3.Consumer;ye.createContext(void 0);function bS(){return C.useContext(O3)}var L3=(function(){function t(e,n){var r=this;this.inject=function(a,o){o===void 0&&(o=ry);var u=r.name+o.hash;a.hasNameForId(r.id,u)||a.insertRules(r.id,u,o(r.rules,u,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=n,B1(this,function(){throw zd(12,String(r.name))})}return t.prototype.getName=function(e){return e===void 0&&(e=ry),this.name+e.hash},t})(),HV=function(t){return t>="A"&&t<="Z"};function xS(t){for(var e="",n=0;n<t.length;n++){var r=t[n];if(n===1&&r==="-"&&t[0]==="-")return t;HV(r)?e+="-"+r.toLowerCase():e+=r}return e.startsWith("ms-")?"-"+e:e}var V3=function(t){return t==null||t===!1||t===""},z3=function(t){var e,n,r=[];for(var a in t){var o=t[a];t.hasOwnProperty(a)&&!V3(o)&&(Array.isArray(o)&&o.isCss||wc(o)?r.push("".concat(xS(a),":"),o,";"):bd(o)?r.push.apply(r,yd(yd(["".concat(a," {")],z3(o),!1),["}"],!1)):r.push("".concat(xS(a),": ").concat((e=a,(n=o)==null||typeof n=="boolean"||n===""?"":typeof n!="number"||n===0||e in fV||e.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function Lo(t,e,n,r){if(V3(t))return[];if(U1(t))return[".".concat(t.styledComponentId)];if(wc(t)){if(!wc(o=t)||o.prototype&&o.prototype.isReactComponent||!e)return[t];var a=t(e);return Lo(a,e,n,r)}var o;return t instanceof L3?n?(t.inject(n,r),[t.getName(r)]):[t]:bd(t)?z3(t):Array.isArray(t)?Array.prototype.concat.apply(_p,t.map(function(u){return Lo(u,e,n,r)})):[t.toString()]}function $V(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(wc(n)&&!U1(n))return!1}return!0}var qV=k3(xp),GV=(function(){function t(e,n,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&$V(e),this.componentId=n,this.baseHash=Ql(qV,n),this.baseStyle=r,M3.registerId(n)}return t.prototype.generateAndInjectStyles=function(e,n,r){var a=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,n,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(this.componentId,this.staticRulesId))a=Io(a,this.staticRulesId);else{var o=ty(Lo(this.rules,e,n,r)),u=ey(Ql(this.baseHash,o)>>>0);if(!n.hasNameForId(this.componentId,u)){var h=r(o,".".concat(u),void 0,this.componentId);n.insertRules(this.componentId,u,h)}a=Io(a,u),this.staticRulesId=u}else{for(var m=Ql(this.baseHash,r.hash),p="",y=0;y<this.rules.length;y++){var b=this.rules[y];if(typeof b=="string")p+=b;else if(b){var x=ty(Lo(b,e,n,r));m=Ql(m,x+y),p+=x}}if(p){var k=ey(m>>>0);n.hasNameForId(this.componentId,k)||n.insertRules(this.componentId,k,r(p,".".concat(k),void 0,this.componentId)),a=Io(a,k)}}return a},t})(),U3=ye.createContext(void 0);U3.Consumer;var rv={};function YV(t,e,n){var r=U1(t),a=t,o=!nv(t),u=e.attrs,h=u===void 0?_p:u,m=e.componentId,p=m===void 0?(function(O,B){var H=typeof O!="string"?"sc":hS(O);rv[H]=(rv[H]||0)+1;var w="".concat(H,"-").concat(N3(xp+H+rv[H]));return B?"".concat(B,"-").concat(w):w})(e.displayName,e.parentComponentId):m,y=e.displayName,b=y===void 0?(function(O){return nv(O)?"styled.".concat(O):"Styled(".concat(bV(O),")")})(t):y,x=e.displayName&&e.componentId?"".concat(hS(e.displayName),"-").concat(e.componentId):e.componentId||p,k=r&&a.attrs?a.attrs.concat(h).filter(Boolean):h,j=e.shouldForwardProp;if(r&&a.shouldForwardProp){var R=a.shouldForwardProp;if(e.shouldForwardProp){var N=e.shouldForwardProp;j=function(O,B){return R(O,B)&&N(O,B)}}else j=R}var U=new GV(n,x,r?a.componentStyle:void 0);function F(O,B){return(function(H,w,E){var A=H.attrs,P=H.componentStyle,L=H.defaultProps,z=H.foldedComponentIds,M=H.styledComponentId,se=H.target,ae=ye.useContext(U3),G=bS(),J=H.shouldForwardProp||G.shouldForwardProp,W=pV(w,ae,L)||_c,Ee=(function(Ce,Ue,re){for(var Le,Re=Dr(Dr({},Ue),{className:void 0,theme:re}),We=0;We<Ce.length;We+=1){var ke=wc(Le=Ce[We])?Le(Re):Le;for(var he in ke)Re[he]=he==="className"?Io(Re[he],ke[he]):he==="style"?Dr(Dr({},Re[he]),ke[he]):ke[he]}return Ue.className&&(Re.className=Io(Re.className,Ue.className)),Re})(A,w,W),Pe=Ee.as||se,$={};for(var X in Ee)Ee[X]===void 0||X[0]==="$"||X==="as"||X==="theme"&&Ee.theme===W||(X==="forwardedAs"?$.as=Ee.forwardedAs:J&&!J(X,Pe)||($[X]=Ee[X]));var oe=(function(Ce,Ue){var re=bS(),Le=Ce.generateAndInjectStyles(Ue,re.styleSheet,re.stylis);return Le})(P,Ee),fe=Io(z,M);return oe&&(fe+=" "+oe),Ee.className&&(fe+=" "+Ee.className),$[nv(Pe)&&!C3.has(Pe)?"class":"className"]=fe,E&&($.ref=E),C.createElement(Pe,$)})(I,O,B)}F.displayName=b;var I=ye.forwardRef(F);return I.attrs=k,I.componentStyle=U,I.displayName=b,I.shouldForwardProp=j,I.foldedComponentIds=r?Io(a.foldedComponentIds,a.styledComponentId):"",I.styledComponentId=x,I.target=r?a.target:t,Object.defineProperty(I,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(O){this._foldedDefaultProps=r?(function(B){for(var H=[],w=1;w<arguments.length;w++)H[w-1]=arguments[w];for(var E=0,A=H;E<A.length;E++)ny(B,A[E],!0);return B})({},a.defaultProps,O):O}}),B1(I,function(){return".".concat(I.styledComponentId)}),o&&I3(I,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),I}function _S(t,e){for(var n=[t[0]],r=0,a=e.length;r<a;r+=1)n.push(e[r],t[r+1]);return n}var wS=function(t){return Object.assign(t,{isCss:!0})};function wp(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(wc(t)||bd(t))return wS(Lo(_S(_p,yd([t],e,!0))));var r=t;return e.length===0&&r.length===1&&typeof r[0]=="string"?Lo(r):wS(Lo(_S(r,e)))}function sy(t,e,n){if(n===void 0&&(n=_c),!e)throw zd(1,e);var r=function(a){for(var o=[],u=1;u<arguments.length;u++)o[u-1]=arguments[u];return t(e,n,wp.apply(void 0,yd([a],o,!1)))};return r.attrs=function(a){return sy(t,e,Dr(Dr({},n),{attrs:Array.prototype.concat(n.attrs,a).filter(Boolean)}))},r.withConfig=function(a){return sy(t,e,Dr(Dr({},n),a))},r}var B3=function(t){return sy(YV,t)},rt=B3;C3.forEach(function(t){rt[t]=B3(t)});function Ud(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=ty(wp.apply(void 0,yd([t],e,!1))),a=N3(r);return new L3(a,r)}var iy="#121212",F3="#212121",KV="#3e3e3e",QV="#4a4a4a",H3="#a6a6a6",XV="#ececec",Xf="#ffffff",F1="#00ccff",$3="#00ff99",q3="#9933ff",G3="#ff6666",Y3="#fff35c",WV="#6157ff";function SS(t,e,n,r){var a,o=!1,u=0;function h(){a&&clearTimeout(a)}function m(){h(),o=!0}typeof e!="boolean"&&(r=n,n=e,e=void 0);function p(){for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];var k=this,j=Date.now()-u;if(o)return;function R(){u=Date.now(),n.apply(k,b)}function N(){a=void 0}r&&!a&&R(),h(),r===void 0&&j>t?R():e!==!0&&(a=setTimeout(r?N:R,r===void 0?t-j:t))}return p.cancel=m,p}function H1(t,e,n){return n===void 0?SS(t,e,!1):SS(t,n,e!==!1)}var ES={},CS;function JV(){return CS||(CS=1,(function(){if(typeof window!="object")return;if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});return}function t(I){try{return I.defaultView&&I.defaultView.frameElement||null}catch{return null}}var e=(function(I){for(var O=I,B=t(O);B;)O=B.ownerDocument,B=t(O);return O})(window.document),n=[],r=null,a=null;function o(I){this.time=I.time,this.target=I.target,this.rootBounds=j(I.rootBounds),this.boundingClientRect=j(I.boundingClientRect),this.intersectionRect=j(I.intersectionRect||k()),this.isIntersecting=!!I.intersectionRect;var O=this.boundingClientRect,B=O.width*O.height,H=this.intersectionRect,w=H.width*H.height;B?this.intersectionRatio=Number((w/B).toFixed(4)):this.intersectionRatio=this.isIntersecting?1:0}function u(I,O){var B=O||{};if(typeof I!="function")throw new Error("callback must be a function");if(B.root&&B.root.nodeType!=1&&B.root.nodeType!=9)throw new Error("root must be a Document or Element");this._checkForIntersections=m(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=I,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(B.rootMargin),this.thresholds=this._initThresholds(B.threshold),this.root=B.root||null,this.rootMargin=this._rootMarginValues.map(function(H){return H.value+H.unit}).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}u.prototype.THROTTLE_TIMEOUT=100,u.prototype.POLL_INTERVAL=null,u.prototype.USE_MUTATION_OBSERVER=!0,u._setupCrossOriginUpdater=function(){return r||(r=function(I,O){!I||!O?a=k():a=R(I,O),n.forEach(function(B){B._checkForIntersections()})}),r},u._resetCrossOriginUpdater=function(){r=null,a=null},u.prototype.observe=function(I){var O=this._observationTargets.some(function(B){return B.element==I});if(!O){if(!(I&&I.nodeType==1))throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:I,entry:null}),this._monitorIntersections(I.ownerDocument),this._checkForIntersections()}},u.prototype.unobserve=function(I){this._observationTargets=this._observationTargets.filter(function(O){return O.element!=I}),this._unmonitorIntersections(I.ownerDocument),this._observationTargets.length==0&&this._unregisterInstance()},u.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},u.prototype.takeRecords=function(){var I=this._queuedEntries.slice();return this._queuedEntries=[],I},u.prototype._initThresholds=function(I){var O=I||[0];return Array.isArray(O)||(O=[O]),O.sort().filter(function(B,H,w){if(typeof B!="number"||isNaN(B)||B<0||B>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return B!==w[H-1]})},u.prototype._parseRootMargin=function(I){var O=I||"0px",B=O.split(/\s+/).map(function(H){var w=/^(-?\d*\.?\d+)(px|%)$/.exec(H);if(!w)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(w[1]),unit:w[2]}});return B[1]=B[1]||B[0],B[2]=B[2]||B[0],B[3]=B[3]||B[1],B},u.prototype._monitorIntersections=function(I){var O=I.defaultView;if(O&&this._monitoringDocuments.indexOf(I)==-1){var B=this._checkForIntersections,H=null,w=null;this.POLL_INTERVAL?H=O.setInterval(B,this.POLL_INTERVAL):(p(O,"resize",B,!0),p(I,"scroll",B,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in O&&(w=new O.MutationObserver(B),w.observe(I,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))),this._monitoringDocuments.push(I),this._monitoringUnsubscribes.push(function(){var P=I.defaultView;P&&(H&&P.clearInterval(H),y(P,"resize",B,!0)),y(I,"scroll",B,!0),w&&w.disconnect()});var E=this.root&&(this.root.ownerDocument||this.root)||e;if(I!=E){var A=t(I);A&&this._monitorIntersections(A.ownerDocument)}}},u.prototype._unmonitorIntersections=function(I){var O=this._monitoringDocuments.indexOf(I);if(O!=-1){var B=this.root&&(this.root.ownerDocument||this.root)||e,H=this._observationTargets.some(function(A){var P=A.element.ownerDocument;if(P==I)return!0;for(;P&&P!=B;){var L=t(P);if(P=L&&L.ownerDocument,P==I)return!0}return!1});if(!H){var w=this._monitoringUnsubscribes[O];if(this._monitoringDocuments.splice(O,1),this._monitoringUnsubscribes.splice(O,1),w(),I!=B){var E=t(I);E&&this._unmonitorIntersections(E.ownerDocument)}}}},u.prototype._unmonitorAllIntersections=function(){var I=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var O=0;O<I.length;O++)I[O]()},u.prototype._checkForIntersections=function(){if(!(!this.root&&r&&!a)){var I=this._rootIsInDom(),O=I?this._getRootRect():k();this._observationTargets.forEach(function(B){var H=B.element,w=x(H),E=this._rootContainsTarget(H),A=B.entry,P=I&&E&&this._computeTargetAndRootIntersection(H,w,O),L=null;this._rootContainsTarget(H)?(!r||this.root)&&(L=O):L=k();var z=B.entry=new o({time:h(),target:H,boundingClientRect:w,rootBounds:L,intersectionRect:P});A?I&&E?this._hasCrossedThreshold(A,z)&&this._queuedEntries.push(z):A&&A.isIntersecting&&this._queuedEntries.push(z):this._queuedEntries.push(z)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},u.prototype._computeTargetAndRootIntersection=function(I,O,B){if(window.getComputedStyle(I).display!="none"){for(var H=O,w=U(I),E=!1;!E&&w;){var A=null,P=w.nodeType==1?window.getComputedStyle(w):{};if(P.display=="none")return null;if(w==this.root||w.nodeType==9)if(E=!0,w==this.root||w==e)r&&!this.root?!a||a.width==0&&a.height==0?(w=null,A=null,H=null):A=a:A=B;else{var L=U(w),z=L&&x(L),M=L&&this._computeTargetAndRootIntersection(L,z,B);z&&M?(w=L,A=R(z,M)):(w=null,H=null)}else{var se=w.ownerDocument;w!=se.body&&w!=se.documentElement&&P.overflow!="visible"&&(A=x(w))}if(A&&(H=b(A,H)),!H)break;w=w&&U(w)}return H}},u.prototype._getRootRect=function(){var I;if(this.root&&!F(this.root))I=x(this.root);else{var O=F(this.root)?this.root:e,B=O.documentElement,H=O.body;I={top:0,left:0,right:B.clientWidth||H.clientWidth,width:B.clientWidth||H.clientWidth,bottom:B.clientHeight||H.clientHeight,height:B.clientHeight||H.clientHeight}}return this._expandRectByRootMargin(I)},u.prototype._expandRectByRootMargin=function(I){var O=this._rootMarginValues.map(function(H,w){return H.unit=="px"?H.value:H.value*(w%2?I.width:I.height)/100}),B={top:I.top-O[0],right:I.right+O[1],bottom:I.bottom+O[2],left:I.left-O[3]};return B.width=B.right-B.left,B.height=B.bottom-B.top,B},u.prototype._hasCrossedThreshold=function(I,O){var B=I&&I.isIntersecting?I.intersectionRatio||0:-1,H=O.isIntersecting?O.intersectionRatio||0:-1;if(B!==H)for(var w=0;w<this.thresholds.length;w++){var E=this.thresholds[w];if(E==B||E==H||E<B!=E<H)return!0}},u.prototype._rootIsInDom=function(){return!this.root||N(e,this.root)},u.prototype._rootContainsTarget=function(I){var O=this.root&&(this.root.ownerDocument||this.root)||e;return N(O,I)&&(!this.root||O==I.ownerDocument)},u.prototype._registerInstance=function(){n.indexOf(this)<0&&n.push(this)},u.prototype._unregisterInstance=function(){var I=n.indexOf(this);I!=-1&&n.splice(I,1)};function h(){return window.performance&&performance.now&&performance.now()}function m(I,O){var B=null;return function(){B||(B=setTimeout(function(){I(),B=null},O))}}function p(I,O,B,H){typeof I.addEventListener=="function"?I.addEventListener(O,B,H):typeof I.attachEvent=="function"&&I.attachEvent("on"+O,B)}function y(I,O,B,H){typeof I.removeEventListener=="function"?I.removeEventListener(O,B,H):typeof I.detachEvent=="function"&&I.detachEvent("on"+O,B)}function b(I,O){var B=Math.max(I.top,O.top),H=Math.min(I.bottom,O.bottom),w=Math.max(I.left,O.left),E=Math.min(I.right,O.right),A=E-w,P=H-B;return A>=0&&P>=0&&{top:B,bottom:H,left:w,right:E,width:A,height:P}||null}function x(I){var O;try{O=I.getBoundingClientRect()}catch{}return O?(O.width&&O.height||(O={top:O.top,right:O.right,bottom:O.bottom,left:O.left,width:O.right-O.left,height:O.bottom-O.top}),O):k()}function k(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function j(I){return!I||"x"in I?I:{top:I.top,y:I.top,bottom:I.bottom,left:I.left,x:I.left,right:I.right,width:I.width,height:I.height}}function R(I,O){var B=O.top-I.top,H=O.left-I.left;return{top:B,left:H,height:O.height,width:O.width,bottom:B+O.height,right:H+O.width}}function N(I,O){for(var B=O;B;){if(B==I)return!0;B=U(B)}return!1}function U(I){var O=I.parentNode;return I.nodeType==9&&I!=e?t(I):(O&&O.assignedSlot&&(O=O.assignedSlot.parentNode),O&&O.nodeType==11&&O.host?O.host:O)}function F(I){return I&&I.nodeType===9}window.IntersectionObserver=u,window.IntersectionObserverEntry=o})()),ES}JV();var ZV=Object.defineProperty,TS=Object.getOwnPropertySymbols,ez=Object.prototype.hasOwnProperty,tz=Object.prototype.propertyIsEnumerable,kS=(t,e,n)=>e in t?ZV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vu=(t,e)=>{for(var n in e||(e={}))ez.call(e,n)&&kS(t,n,e[n]);if(TS)for(var n of TS(e))tz.call(e,n)&&kS(t,n,e[n]);return t},nz=(t,e,n)=>{const r=Qv(t,[n]),a=Qv(e,[n]);return r[n]&&a[n]?Vu(Vu(Vu({},t),e),{[n]:r[n]+", "+a[n]}):Vu(Vu({},t),e)},rz=nz,$1=(typeof window<"u"?window:global)||{},NS,sz=((NS=$1)==null?void 0:NS.GIPHY_PINGBACK_URL)||"https://pingback.giphy.com",iz=`${sz}/v2/pingback?apikey=l0HlIwPWyBBUDAUgM`,az=t=>{const e=O1();return e?.set("Content-Type","application/json"),rr.debug("Pingback session",t),t.length?fetch(iz,{method:"POST",body:JSON.stringify({events:t}),headers:e}).catch(n=>{rr.warn(`pingbacks failing to post ${n}`)}):new Promise(n=>n())},ay=[];$1.giphyRandomId=P1();var Sf="";function q1(){const t=[...ay];ay=[],az(t)}var oz=H1(1e3,q1),AS,RS;(RS=(AS=$1).addEventListener)==null||RS.call(AS,"beforeunload",q1);var lz=({userId:t,eventType:e,actionType:n,attributes:r,queueEvents:a=!0,analyticsResponsePayload:o})=>{Sf=t?String(t):Sf;const u={ts:Date.now(),attributes:r,action_type:n,user_id:P1(),analytics_response_payload:o};Sf&&(u.logged_in_user_id=Sf),u.analytics_response_payload&&(u.analytics_response_payload=`${u.analytics_response_payload}${rr.ENABLED?"&mode=verification":""}`),e&&(u.event_type=e),ay.push(u),a?oz():q1()},G1=lz,oy=function(t,e){return oy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},oy(t,e)};function K3(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");oy(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Mm=function(){return Mm=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Mm.apply(this,arguments)};function Q3(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function X3(t,e,n,r){var a=arguments.length,o=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var h=t.length-1;h>=0;h--)(u=t[h])&&(o=(a<3?u(o):a>3?u(e,n,o):u(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}function W3(t,e){return function(n,r){e(n,r,t)}}function J3(t,e,n,r,a,o){function u(U){if(U!==void 0&&typeof U!="function")throw new TypeError("Function expected");return U}for(var h=r.kind,m=h==="getter"?"get":h==="setter"?"set":"value",p=!e&&t?r.static?t:t.prototype:null,y=e||(p?Object.getOwnPropertyDescriptor(p,r.name):{}),b,x=!1,k=n.length-1;k>=0;k--){var j={};for(var R in r)j[R]=R==="access"?{}:r[R];for(var R in r.access)j.access[R]=r.access[R];j.addInitializer=function(U){if(x)throw new TypeError("Cannot add initializers after decoration has completed");o.push(u(U||null))};var N=(0,n[k])(h==="accessor"?{get:y.get,set:y.set}:y[m],j);if(h==="accessor"){if(N===void 0)continue;if(N===null||typeof N!="object")throw new TypeError("Object expected");(b=u(N.get))&&(y.get=b),(b=u(N.set))&&(y.set=b),(b=u(N.init))&&a.unshift(b)}else(b=u(N))&&(h==="field"?a.unshift(b):y[m]=b)}p&&Object.defineProperty(p,r.name,y),x=!0}function Z3(t,e,n){for(var r=arguments.length>2,a=0;a<e.length;a++)n=r?e[a].call(t,n):e[a].call(t);return r?n:void 0}function e6(t){return typeof t=="symbol"?t:"".concat(t)}function t6(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function n6(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function r6(t,e,n,r){function a(o){return o instanceof n?o:new n(function(u){u(o)})}return new(n||(n=Promise))(function(o,u){function h(y){try{p(r.next(y))}catch(b){u(b)}}function m(y){try{p(r.throw(y))}catch(b){u(b)}}function p(y){y.done?o(y.value):a(y.value).then(h,m)}p((r=r.apply(t,e||[])).next())})}function s6(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,a,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=h(0),u.throw=h(1),u.return=h(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(p){return function(y){return m([p,y])}}function m(p){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,p[0]&&(n=0)),n;)try{if(r=1,a&&(o=p[0]&2?a.return:p[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,p[1])).done)return o;switch(a=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,a=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){n.label=p[1];break}if(p[0]===6&&n.label<o[1]){n.label=o[1],o=p;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(p);break}o[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(y){p=[6,y],a=0}finally{r=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var Sp=Object.create?(function(t,e,n,r){r===void 0&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]});function i6(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Sp(e,t,n)}function Pm(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Y1(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),a,o=[],u;try{for(;(e===void 0||e-- >0)&&!(a=r.next()).done;)o.push(a.value)}catch(h){u={error:h}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return o}function a6(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Y1(arguments[e]));return t}function o6(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var o=arguments[e],u=0,h=o.length;u<h;u++,a++)r[a]=o[u];return r}function l6(t,e,n){if(n||arguments.length===2)for(var r=0,a=e.length,o;r<a;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function Sc(t){return this instanceof Sc?(this.v=t,this):new Sc(t)}function c6(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),a,o=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",u),a[Symbol.asyncIterator]=function(){return this},a;function u(k){return function(j){return Promise.resolve(j).then(k,b)}}function h(k,j){r[k]&&(a[k]=function(R){return new Promise(function(N,U){o.push([k,R,N,U])>1||m(k,R)})},j&&(a[k]=j(a[k])))}function m(k,j){try{p(r[k](j))}catch(R){x(o[0][3],R)}}function p(k){k.value instanceof Sc?Promise.resolve(k.value.v).then(y,b):x(o[0][2],k)}function y(k){m("next",k)}function b(k){m("throw",k)}function x(k,j){k(j),o.shift(),o.length&&m(o[0][0],o[0][1])}}function u6(t){var e,n;return e={},r("next"),r("throw",function(a){throw a}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(a,o){e[a]=t[a]?function(u){return(n=!n)?{value:Sc(t[a](u)),done:!1}:o?o(u):u}:o}}function d6(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Pm=="function"?Pm(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(u){return new Promise(function(h,m){u=t[o](u),a(h,m,u.done,u.value)})}}function a(o,u,h,m){Promise.resolve(m).then(function(p){o({value:p,done:h})},u)}}function h6(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var cz=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},ly=function(t){return ly=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},ly(t)};function f6(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=ly(t),r=0;r<n.length;r++)n[r]!=="default"&&Sp(e,t,n[r]);return cz(e,t),e}function m6(t){return t&&t.__esModule?t:{default:t}}function p6(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function g6(t,e,n,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(t,n):a?a.value=n:e.set(t,n),n}function v6(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function y6(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(o){return Promise.reject(o)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var uz=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function b6(t){function e(o){t.error=t.hasError?new uz(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var n,r=0;function a(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(a);if(n.dispose){var o=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(o).then(a,function(u){return e(u),a()})}else r|=1}catch(u){e(u)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return a()}function x6(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,a,o,u){return r?e?".jsx":".js":a&&(!o||!u)?n:a+o+"."+u.toLowerCase()+"js"}):t}const dz={__extends:K3,__assign:Mm,__rest:Q3,__decorate:X3,__param:W3,__esDecorate:J3,__runInitializers:Z3,__propKey:e6,__setFunctionName:t6,__metadata:n6,__awaiter:r6,__generator:s6,__createBinding:Sp,__exportStar:i6,__values:Pm,__read:Y1,__spread:a6,__spreadArrays:o6,__spreadArray:l6,__await:Sc,__asyncGenerator:c6,__asyncDelegator:u6,__asyncValues:d6,__makeTemplateObject:h6,__importStar:f6,__importDefault:m6,__classPrivateFieldGet:p6,__classPrivateFieldSet:g6,__classPrivateFieldIn:v6,__addDisposableResource:y6,__disposeResources:b6,__rewriteRelativeImportExtension:x6},hz=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:y6,get __assign(){return Mm},__asyncDelegator:u6,__asyncGenerator:c6,__asyncValues:d6,__await:Sc,__awaiter:r6,__classPrivateFieldGet:p6,__classPrivateFieldIn:v6,__classPrivateFieldSet:g6,__createBinding:Sp,__decorate:X3,__disposeResources:b6,__esDecorate:J3,__exportStar:i6,__extends:K3,__generator:s6,__importDefault:m6,__importStar:f6,__makeTemplateObject:h6,__metadata:n6,__param:W3,__propKey:e6,__read:Y1,__rest:Q3,__rewriteRelativeImportExtension:x6,__runInitializers:Z3,__setFunctionName:t6,__spread:a6,__spreadArray:l6,__spreadArrays:o6,__values:Pm,default:dz},Symbol.toStringTag,{value:"Module"})),fz=_5(hz);var Ef={},jS;function mz(){if(jS)return Ef;jS=1,Object.defineProperty(Ef,"__esModule",{value:!0});var t=Xa();function e(n,r){r===void 0&&(r=0);var a=t.useRef(!1),o=t.useRef(),u=t.useRef(n),h=t.useCallback(function(){return a.current},[]),m=t.useCallback(function(){a.current=!1,o.current&&clearTimeout(o.current),o.current=setTimeout(function(){a.current=!0,u.current()},r)},[r]),p=t.useCallback(function(){a.current=null,o.current&&clearTimeout(o.current)},[]);return t.useEffect(function(){u.current=n},[n]),t.useEffect(function(){return m(),p},[r]),[h,p,m]}return Ef.default=e,Ef}var pz=mz();const gz=wd(pz);var Cf={},Tf={},Hr={},IS;function vz(){if(IS)return Hr;IS=1,Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.isNavigator=Hr.isBrowser=Hr.off=Hr.on=Hr.noop=void 0;var t=function(){};Hr.noop=t;function e(r){for(var a=[],o=1;o<arguments.length;o++)a[o-1]=arguments[o];r&&r.addEventListener&&r.addEventListener.apply(r,a)}Hr.on=e;function n(r){for(var a=[],o=1;o<arguments.length;o++)a[o-1]=arguments[o];r&&r.removeEventListener&&r.removeEventListener.apply(r,a)}return Hr.off=n,Hr.isBrowser=typeof window<"u",Hr.isNavigator=typeof navigator<"u",Hr}var DS;function yz(){if(DS)return Tf;DS=1,Object.defineProperty(Tf,"__esModule",{value:!0});var t=Xa(),e=vz(),n=e.isBrowser?t.useLayoutEffect:t.useEffect;return Tf.default=n,Tf}var MS;function bz(){if(MS)return Cf;MS=1,Object.defineProperty(Cf,"__esModule",{value:!0});var t=fz,e=Xa(),n=t.__importDefault(yz()),r=function(a,o){a===void 0&&(a=1e12),o===void 0&&(o=0);var u=e.useState(0),h=u[0],m=u[1];return n.default(function(){var p,y,b,x=function(){var N=Math.min(1,(Date.now()-b)/a);m(N),k()},k=function(){p=requestAnimationFrame(x)},j=function(){y=setTimeout(function(){cancelAnimationFrame(p),m(1)},a),b=Date.now(),k()},R=setTimeout(j,o);return function(){clearTimeout(y),clearTimeout(R),cancelAnimationFrame(p)}},[a,o]),h};return Cf.default=r,Cf}var xz=bz();const _z=wd(xz);var wz=Object.defineProperty,Sz=Object.defineProperties,Ez=Object.getOwnPropertyDescriptors,PS=Object.getOwnPropertySymbols,Cz=Object.prototype.hasOwnProperty,Tz=Object.prototype.propertyIsEnumerable,OS=(t,e,n)=>e in t?wz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$i=(t,e)=>{for(var n in e||(e={}))Cz.call(e,n)&&OS(t,n,e[n]);if(PS)for(var n of PS(e))Tz.call(e,n)&&OS(t,n,e[n]);return t},K1=(t,e)=>Sz(t,Ez(e)),Q1=(t,e,n)=>new Promise((r,a)=>{var o=m=>{try{h(n.next(m))}catch(p){a(p)}},u=m=>{try{h(n.throw(m))}catch(p){a(p)}},h=m=>m.done?r(m.value):Promise.resolve(m.value).then(o,u);h((n=n.apply(t,e)).next())}),kz=t=>{var e,n;if(!t)return"";const r=(n=(e=t?.split("."))==null?void 0:e.pop())==null?void 0:n.toLowerCase();return t.replace(`.${r}`,`/80h.${r}`)},Nz=rt.img`
    object-fit: cover;
    width: 32px;
    height: 32px;
    margin-right: 8px;
`,Az=({user:t,className:e=""})=>{const n=C.useRef(Math.floor(Math.random()*5)+1),r=t.avatar_url?kz(t.avatar_url):`https://media.giphy.com/avatars/default${n.current}.gif`;return ye.createElement(Nz,{src:r,className:e})},Ep=Az,xd=({className:t="",size:e=17,fill:n="#15CDFF"})=>ye.createElement("svg",{className:[xd.className,t].join(" "),height:e,width:"19px",viewBox:"0 0 19 17"},ye.createElement("path",{className:xd.checkMarkClassName,d:"M9.32727273,9.44126709 L9.32727273,3.03016561 L6.55027155,3.03016561 L6.55027155,10.8150746 L6.55027155,12.188882 L12.1042739,12.188882 L12.1042739,9.44126709 L9.32727273,9.44126709 Z",fill:iy,transform:"translate(9.327273, 7.609524) scale(-1, 1) rotate(-45.000000) translate(-9.327273, -7.609524) "}),ye.createElement("g",{transform:"translate(-532.000000, -466.000000)",fill:n},ye.createElement("g",{transform:"translate(141.000000, 235.000000)"},ye.createElement("g",{transform:"translate(264.000000, 0.000000)"},ye.createElement("g",{transform:"translate(10.000000, 224.000000)"},ye.createElement("g",{transform:"translate(114.000000, 2.500000)"},ye.createElement("path",{d:"M15.112432,4.80769231 L16.8814194,6.87556817 L19.4157673,7.90116318 L19.6184416,10.6028916 L21.0594951,12.9065042 L19.6184416,15.2101168 L19.4157673,17.9118452 L16.8814194,18.9374402 L15.112432,21.0053161 L12.4528245,20.3611511 L9.79321699,21.0053161 L8.02422954,18.9374402 L5.48988167,17.9118452 L5.28720734,15.2101168 L3.84615385,12.9065042 L5.28720734,10.6028916 L5.48988167,7.90116318 L8.02422954,6.87556817 L9.79321699,4.80769231 L12.4528245,5.4518573 L15.112432,4.80769231 Z M17.8163503,10.8991009 L15.9282384,9.01098901 L11.5681538,13.3696923 L9.68115218,11.4818515 L7.81302031,13.3499833 L9.7011322,15.2380952 L11.5892441,17.1262071 L17.8163503,10.8991009 Z"})))))));xd.className="giphy-verified-badge";xd.checkMarkClassName="giphy-verified-checkmark";var cy=xd,Rz=rt.div`
    color: white;
    font-size: 16px;
    font-weight: 700;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    -webkit-font-smoothing: antialiased;
`,jz=rt(cy)`
    margin-left: 4px;
    flex-shrink: 0;
`,Iz=rt.div`
    display: flex;
    align-items: center;
    min-width: 0;
`,Dz=({user:t})=>{const{display_name:e,username:n}=t;return ye.createElement(Iz,null,ye.createElement(Rz,null,e||`@${n}`),t.is_verified?ye.createElement(jz,{size:14}):null)},_6=Dz,Mz=rt.div`
    display: flex;
    align-items: center;
    font-family: interface, helvetica, arial;
`,Pz=rt(Ep)`
    flex-shrink: 0;
`,X1=({gif:t,className:e,onClick:n})=>{const{user:r}=t;return!r?.username&&!r?.display_name?null:ye.createElement(Mz,{className:[X1.className,e].join(" "),onClick:a=>{if(a.preventDefault(),a.stopPropagation(),n)n(t);else{const o=r.profile_url;o&&window.open(o,"_blank")}}},ye.createElement(Pz,{user:r}),ye.createElement(_6,{user:t.user}))};X1.className="giphy-attribution";var Oz=X1,Lz=rt.div`
    background: linear-gradient(rgba(0, 0, 0, 0), rgba(18, 18, 18, 0.6));
    cursor: default;
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 75px;
    pointer-events: none;
`,Vz=rt(Oz)`
    position: absolute;
    bottom: 10px;
    left: 10px;
    right: 10px;
`,zz=rt.div`
    transition: opacity 150ms ease-in;
`,Uz=({gif:t,isHovered:e,onClick:n})=>{const r=C.useRef(e);return e&&(r.current=!0),t.user&&r.current?ye.createElement(zz,{style:{opacity:e?1:0}},ye.createElement(Lz,null),ye.createElement(Vz,{gif:t,onClick:n})):null},Bz=Uz,Fz=({children:t,className:e,onVisibleChange:n,config:r})=>{const a=C.useRef(null);return C.useEffect(()=>{let o;return a.current&&(o=new IntersectionObserver(([u])=>{n&&n(u.isIntersecting)},r),o.observe(a.current)),()=>o?.disconnect()},[n,a,r]),ye.createElement("div",{ref:a,className:e},t)},w6=Fz,S6=t=>(e,n,r,a={})=>{e.analytics_response_payload&&G1({analyticsResponsePayload:e.analytics_response_payload,userId:n,actionType:t,attributes:$i({position:JSON.stringify(xL(r))},a)})},Hz=(t,e,n,r={})=>{t.analytics_response_payload&&G1({analyticsResponsePayload:t.analytics_response_payload,userId:e,actionType:"SEEN",attributes:$i({position:JSON.stringify(n)},r)})},$z=S6("CLICK"),qz=S6("HOVER");function Gz(t){return t=t.replace("%%CACHEBUSTER%%",u3()),t=t.replace("%%TIMESTAMP%%",`${Date.now()}`),t=t.replace("%%APPBUNDLE%%","web"),typeof window<"u"&&(t=t.replace("%%APP_WINDOW_SIZE%%",`${window.innerWidth},${window.innerHeight}`),t=t.replace("%%DEVICE_LANGUAGE%%",`${navigator.language}`)),t}function Yz({src:t}){const e=C.useRef(Gz(t)),[n,r]=C.useState(!1);return C.useEffect(()=>{r(!0)},[]),n?ye.createElement("img",{src:e.current,width:0,height:0}):null}var Kz=Yz,uy=C.createContext({}),Qz=({attributes:t,children:e})=>{const{attributes:n={}}=C.useContext(uy);return ye.createElement(uy.Provider,{value:{attributes:rz(n,t,"layout_type")}},e)},E6=Qz,Xz=rt.div`
    position: relative;
    display: block;
    picture {
        display: block;
        width: 100%;
        height: 100%;
    }
    img {
        display: block;
    }
    .${cy.className} {
        g {
            fill: white;
        }
    }
    .${cy.checkMarkClassName} {
        opacity: 0;
    }
`,LS=[F1,$3,q3,G3,Y3],Wz=()=>LS[Math.round(Math.random()*(LS.length-1))],Jz=200,VS="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Zz=!!(typeof window<"u"&&window.document&&window.document.createElement),$l=()=>{},eU=({children:t})=>{const[e,n]=C.useState(!1);return C.useEffect(()=>{n(!0)},[]),e?ye.createElement(ye.Fragment,null,t):null},Pa=({gif:t,gif:{bottle_data:e={}},width:n,percentWidth:r,percentHeight:a,height:o,onGifRightClick:u=$l,className:h="",onGifClick:m=$l,onGifKeyPress:p=$l,onGifSeen:y=$l,onGifVisible:b=$l,user:x={},backgroundColor:k,overlay:j,hideAttribution:R=!1,noLink:N=!1,borderRadius:U=4,style:F,tabIndex:I,lazyLoad:O=!0})=>{var B;const[H,w]=C.useState(!1),[E,A]=C.useState(!1),[P,L]=C.useState(!Zz||!O),[z,M]=C.useState(""),se=C.useRef(Wz()),ae=C.useRef(null),G=C.useRef(null),J=C.useRef(),W=C.useRef(),Ee=C.useRef(),Pe=C.useRef($l),$=Object.keys(e).length>0,{attributes:X}=C.useContext(uy);let oe=j;!oe&&!R&&(oe=Bz);const fe=Me=>{clearTimeout(Ee.current),Me.persist(),A(!0),Ee.current=window.setTimeout(()=>{qz(t,x?.id,Me.target,X)},Jz)},Ce=()=>{clearTimeout(Ee.current),A(!1)},Ue=Me=>{$z(t,x?.id,Me.target,X),m(t,Me)},re=Me=>{p(t,Me)};Pe.current=Me=>{w(!0),rr.debug(`GIF ${t.id} seen. ${t.title}`),Hz(t,x?.id,Me.boundingClientRect,X),y?.(t,Me.boundingClientRect),W.current&&W.current.disconnect()};const Le=()=>{W.current||(W.current=new IntersectionObserver(([Me])=>{Me.isIntersecting&&Pe.current(Me)},{threshold:[.99]})),!H&&ae.current&&W.current&&W.current.observe(ae.current)},Re=Me=>{Le(),b(t,Me),M(Pa.imgLoadedClassName)};C.useEffect(()=>{var Me,K;(Me=G.current)!=null&&Me.complete&&(Le(),b(t)),(K=W.current)==null||K.disconnect(),w(!1)},[t.id]),C.useEffect(()=>(J.current=new IntersectionObserver(([Me])=>{const{isIntersecting:K}=Me;L(K),!K&&W.current&&W.current.disconnect()}),J.current.observe(ae.current),()=>{J.current&&J.current.disconnect(),W.current&&W.current.disconnect(),Ee.current&&clearTimeout(Ee.current)}),[]);const We=pp(t,n);let ke=o;!F?.aspectRatio&&!o&&(ke=We);const he=wL(t.images,n,o||We);if(!he)return t.images?console.error(`no rendition for ${t.id}, rendition names: ${Object.keys(t.images).join(", ")}`):console.error(`no rendition for ${t.id} - no images`),null;const ee=t.images[he.renditionName],ve=z===Pa.imgLoadedClassName&&!t.is_sticker?"unset":k||(t.is_sticker?"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4AQMAAACSSKldAAAABlBMVEUhIiIWFhYoSqvJAAAAGElEQVQY02MAAv7///8PWxqIPwDZw5UGABtgwz2xhFKxAAAAAElFTkSuQmCC') 0 0":se.current),Oe=U?"hidden":"unset";return ye.createElement(Xz,{as:N?"div":"a",href:N?void 0:t.url,"data-giphy-id":t.id,"data-giphy-is-sticker":t.is_sticker,style:$i({width:r||n,height:a||ke,overflow:Oe,borderRadius:U},F),className:[Pa.className,h].join(" "),onMouseOver:fe,onMouseLeave:Ce,onClick:Ue,onContextMenu:Me=>u(t,Me),onKeyPress:re,tabIndex:I,ref:ae},ye.createElement("picture",null,ye.createElement("source",{type:"image/webp",srcSet:P?ee.webp:VS,suppressHydrationWarning:!0}),ye.createElement("img",{ref:G,suppressHydrationWarning:!0,className:[Pa.imgClassName,z].join(" "),src:P?ee.url:VS,style:{background:ve},width:"100%",height:"100%",alt:EL(t),onLoad:P?Re:()=>{}})),$&&((B=e?.tags)==null?void 0:B.map((Me,K)=>ye.createElement(Kz,{src:Me,key:K}))),oe&&ye.createElement(eU,null,P&&ye.createElement(oe,{gif:t,isHovered:E,width:n,height:ke})))};Pa.className="giphy-gif";Pa.imgClassName="giphy-gif-img";Pa.imgLoadedClassName="giphy-img-loaded";var _d=Pa,tU=rt.div`
    -webkit-overflow-scrolling: touch;
    overflow-x: auto;
    overflow-y: hidden;
    white-space: nowrap;
    position: relative;
`,nU=rt(_d)`
    position: relative;
    display: inline-block;
    list-style: none;
    margin-left: ${t=>t.$ml}px;
    /* make sure gifs are fully visible with a scrollbar */
    margin-bottom: 1px;

    &:first-of-type {
        margin-left: 0;
    }
    .${_d.imgClassName} {
        position: absolute;
        top: 0;
        left: 0;
    }
`,rU=rt(w6)`
    display: inline-block;
`,sU=rt.div`
    width: 30px;
    display: inline-block;
    opacity: ${t=>t.$isFirstLoad?0:1};
    height: ${t=>t.$height}px;
`,iU=Object.freeze({gutter:6,user:{},initialGifs:[]}),aU=Object.freeze({isFetching:!1,gifs:[],isLoaderVisible:!1,isDoneFetching:!1}),C6=class T6 extends C.PureComponent{constructor(){super(...arguments),this.state=K1($i({},aU),{gifs:this.props.initialGifs||[]}),this.unmounted=!1,this.paginator=p3(this.props.fetchGifs,this.state.gifs),this.onLoaderVisible=e=>{this.unmounted||this.setState({isLoaderVisible:e},this.onFetch)},this.onFetch=H1(100,()=>Q1(this,null,function*(){if(this.unmounted)return;const{isFetching:e,isLoaderVisible:n,gifs:r}=this.state;if(!e&&n){this.setState({isFetching:!0});let a;try{a=yield this.paginator()}catch{this.setState({isFetching:!1})}if(a)if(!!!a?.skipCountCheck&&r.length===a.length)this.setState({isDoneFetching:!0});else{this.setState({gifs:a,isFetching:!1});const{onGifsFetched:u}=this.props;u&&u(a),this.onFetch()}}}))}componentDidMount(){this.unmounted=!1,this.onFetch()}componentWillUnmount(){this.unmounted=!0}render(){const{onGifVisible:e,onGifRightClick:n,gifHeight:r,gifWidth:a,gutter:o,className:u=T6.className,onGifSeen:h,onGifClick:m,onGifKeyPress:p,user:y,overlay:b,hideAttribution:x,noLink:k,noResultsMessage:j,backgroundColor:R,borderRadius:N,tabIndex:U=0,loaderConfig:F}=this.props,{gifs:I,isDoneFetching:O}=this.state,B=!O,H=I.length===0;return ye.createElement(E6,{attributes:{layout_type:"CAROUSEL"}},ye.createElement(tU,{className:u},I.map(w=>ye.createElement(nU,{gif:w,key:w.id,tabIndex:U,width:a||SL(w,r),height:r,onGifClick:m,onGifKeyPress:p,onGifSeen:h,onGifVisible:e,onGifRightClick:n,user:y,$ml:o,overlay:b,hideAttribution:x,noLink:k,borderRadius:N,backgroundColor:R})),!B&&I.length===0&&j,B&&ye.createElement(rU,{onVisibleChange:this.onLoaderVisible,config:F},ye.createElement(sU,{$isFirstLoad:H,$height:r}))))}};C6.className="giphy-carousel";C6.defaultProps=iU;var oU=rt.div`
    color: ${H3};
    display: flex;
    justify-content: center;
    margin: 30px 0;
    font-family: interface, Helvetica Neue, helvetica, sans-serif;
    font-size: 16px;
    font-weight: 600;
    a {
        color: ${F1};
        cursor: pointer;
        &:hover {
            color: white;
        }
    }
`,lU=({onClick:t})=>ye.createElement(oU,null,"Error loading GIFs.",ye.createElement("a",{onClick:t},"Try again?")),cU=lU,uU=.75;rt.div`
    align-items: center;
    background-color: ${({$backgroundColor:t})=>t};
    border-radius: 16px;
    display: flex;
    max-width: fit-content;
    overflow: hidden;
    padding: 4px 5px 5px 6px;
`;rt.div`
    overflow-x: auto;
    overflow-y: hidden;
    position: relative;
    -webkit-overflow-scrolling: touch;
`;rt.div`
    display: inline-flex;
    justify-content: space-between;
    overflow: hidden;
    white-space: nowrap;
    width: ${({$width:t})=>`${t}px`};
`;rt.div`
    background-color: ${({$color:t})=>t};
    box-sizing: border-box;
    height: ${({$gifHeight:t})=>`${Math.round(t*uU)}px`};
    margin: ${({$gutter:t})=>`0 ${t}px`};
    width: 2px;
`;rt(_d)`
    display: inline-block;
    flex-shrink: 0;
    list-style: none;
    /* make sure gifs are fully visible with a scrollbar */
    margin-bottom: 1px;
    position: relative;

    .${_d.imgClassName} {
        position: absolute;
        top: 0;
        left: 0;
    }
`;var dU=Ud`
     to {
    transform: scale(1.75) translateY(-20px);
  }
`,k6=52,hU=rt.div`
    display: flex;
    align-items: center;
    height: ${k6}px;
    margin: 0 auto;
    text-align: center;
    justify-content: center;
    animation: pulse 0.8s ease-in-out 0s infinite alternate backwards;
`,zu=rt.div`
    display: inline-block;
    height: 10px;
    width: 10px;
    margin: ${k6}px 10px 10px 10px;
    position: relative;
    box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.3);
    animation: ${dU} cubic-bezier(0.455, 0.03, 0.515, 0.955) 0.75s infinite alternate;
    background: ${t=>t.$color};
    animation-delay: ${t=>t.$delay};
`,fU=({className:t=""})=>ye.createElement(hU,{className:t},ye.createElement(zu,{$color:$3,$delay:"0"}),ye.createElement(zu,{$color:F1,$delay:".1s"}),ye.createElement(zu,{$color:q3,$delay:".2s"}),ye.createElement(zu,{$color:G3,$delay:".3s"}),ye.createElement(zu,{$color:Y3,$delay:".4s"})),mU=fU,pU=rt.div`
    opacity: ${t=>t.$isFirstLoad?0:1};
`;function zS(t,e,n=[]){return Array.apply(null,Array(t)).map((r,a)=>n[a]||e)}function gU(t,e,n,r){const a=zS(t,[]),o=zS(t,0,e);return n.forEach(u=>{const h=o.indexOf(Math.min(...o));a[h]=[...a[h],u],o[h]+=pp(u,r)}),a}var vU=Object.freeze({gutter:6,user:{},initialGifs:[]}),yU=Object.freeze({isFetching:!1,isError:!1,gifs:[],isLoaderVisible:!1,isDoneFetching:!1}),Pc=class Wf extends C.PureComponent{constructor(){super(...arguments),this.state=K1($i({},yU),{gifs:this.props.initialGifs||[]}),this.unmounted=!1,this.paginator=p3(this.props.fetchGifs,this.state.gifs),this.onLoaderVisible=e=>{this.unmounted||this.setState({isLoaderVisible:e},this.onFetch)},this.onFetch=H1(Wf.fetchDebounce,()=>Q1(this,null,function*(){if(this.unmounted)return;const{isFetching:e,isLoaderVisible:n}=this.state,{externalGifs:r}=this.props,a=(r||this.state.gifs).length;if(!e&&n){this.setState({isFetching:!0,isError:!1});let o;try{if(o=yield this.paginator(r),this.unmounted)return}catch(u){if(this.unmounted)return;this.setState({isFetching:!1,isError:!0});const{onGifsFetchError:h}=this.props;h&&h(u)}if(o)if(!!!o?.skipCountCheck&&a===o.length)this.setState({isDoneFetching:!0});else{this.setState({gifs:o,isFetching:!1});const{onGifsFetched:h}=this.props;h&&h(o),this.onFetch()}}}))}componentDidMount(){this.unmounted=!1,this.onFetch()}componentWillUnmount(){this.unmounted=!0}render(){const{onGifVisible:e,onGifRightClick:n,className:r=Wf.className,onGifSeen:a,onGifClick:o,onGifKeyPress:u,user:h,overlay:m,hideAttribution:p,noLink:y,borderRadius:b,noResultsMessage:x,columns:k,width:j,gutter:R,percentWidth:N,columnOffsets:U,backgroundColor:F,loaderConfig:I,tabIndex:O=0,layoutType:B="GRID",loader:H=mU,eagerIds:w}=this.props,{gifs:E,isError:A,isDoneFetching:P}=this.state,L=!P,z=E.length===0,M=R*(k-1),se=(j-M)/k,ae=gU(k,U,E,se);return ye.createElement(E6,{attributes:{layout_type:B}},ye.createElement("div",{className:r},ye.createElement("div",{style:{width:N||j,display:"flex",gap:R}},ae.map((G=[],J)=>ye.createElement("div",{key:J,style:{display:"flex",flexDirection:"column",gap:R,width:N?"100%":se,marginTop:U?.[J]}},G.map(W=>ye.createElement(_d,{style:{aspectRatio:W.images.original.width/W.images.original.height},gif:W,tabIndex:O,key:W.id,width:se,percentWidth:N?"100%":void 0,onGifClick:o,onGifKeyPress:u,onGifSeen:a,onGifVisible:e,onGifRightClick:n,user:h,overlay:m,backgroundColor:F,hideAttribution:p,noLink:y,borderRadius:b,lazyLoad:!w?.includes(W.id)}))))),!L&&E.length===0&&x,A?ye.createElement(cU,{onClick:this.onFetch}):L&&ye.createElement(w6,{onVisibleChange:this.onLoaderVisible,config:I},ye.createElement(pU,{$isFirstLoad:z},ye.createElement(H,{className:Wf.loaderClassName})))))}};Pc.className="giphy-grid";Pc.loaderClassName="loader";Pc.fetchDebounce=250;Pc.defaultProps=vU;Pc.getDerivedStateFromProps=({externalGifs:t},e)=>t&&t!==e.gifs?{gifs:t}:null;var bU=Pc,N6=bU,Mn={searchbarHeight:"--searchbar-height",bgColor:"--searchbar-bg-color",bgColor2:"--searchbar-bg-color-2",fgColor:"--searchbar-fg-color",cancelButtonDisplay:"--searchbar-cancel-button-display"};rt.div`
    ${Mn.searchbarHeight}: ${t=>t.$searchbarHeight||42}px;
    @media (${t=>t.$mobileMediaQuery}) {
        ${Mn.searchbarHeight}: ${t=>t.$mobileSearchbarHeight||35}px;
    }
    ${Mn.bgColor}: ${Xf};
    ${Mn.bgColor2}: ${Xf};
    ${Mn.fgColor}: ${iy};
    ${t=>t.$darkMode&&wp`
            ${Mn.fgColor}: ${Xf};
            ${Mn.bgColor}: ${iy};
            ${Mn.bgColor2}: ${QV};
        `}
    ${Mn.cancelButtonDisplay}: ${t=>t.$hideCancelButton?"none":"block"};
`;C.createContext({});C.createContext({});rt.svg`
    position: relative;
    right: 10px;
    margin-left: 5px;
    cursor: pointer;
    display: var(${Mn.cancelButtonDisplay});
`;var A6=6,W1=`calc(var(${Mn.searchbarHeight}) - ${A6*2}px)`,xU=Ud`
to {
    width: ${W1};
}
`;rt(Ep)`
    height: ${W1};
    margin: 0;
    width: 0;
    animation: ${xU} 100ms ease-in-out forwards;
`;rt.div`
    background: var(${Mn.bgColor2});
    display: flex;
    align-items: center;
    padding-left: ${A6}px;
`;rt.div`
    background: ${XV};
    display: flex;
    padding: 0 4px;
    color: ${KV};
    font-family: interface, Helvetica Neue, helvetica, sans-serif;
    font-weight: 600;
    font-size: 12px;
    align-items: center;
    height: ${W1};
    @media (max-width: 480px) {
        display: none;
    }
`;var _U=({className:t=""})=>ye.createElement("svg",{viewBox:"0 0 30 30",version:"1.1",className:t},ye.createElement("defs",null,ye.createElement("path",{d:"M11.5482521,20.4090671 L4.24727698,28.2009189 C3.68084207,28.8054377 2.73159653,28.8363108 2.12707771,28.2698759 C1.5225589,27.703441 1.4916858,26.7541954 2.0581207,26.1496766 L9.40599838,18.3077689 C7.95982241,16.4371424 7.0978836,14.0789715 7.0978836,11.5181818 C7.0978836,5.44914339 11.9392549,0.518181818 17.9252787,0.518181818 C23.9113026,0.518181818 28.7526738,5.44914339 28.7526738,11.5181818 C28.7526738,17.5872202 23.9113026,22.5181818 17.9252787,22.5181818 C15.539851,22.5181818 13.3361963,21.7351359 11.5482521,20.4090671 Z M17.9252787,19.5181818 C22.242011,19.5181818 25.7526738,15.9425536 25.7526738,11.5181818 C25.7526738,7.09381 22.242011,3.51818182 17.9252787,3.51818182 C13.6085464,3.51818182 10.0978836,7.09381 10.0978836,11.5181818 C10.0978836,15.9425536 13.6085464,19.5181818 17.9252787,19.5181818 Z",id:"giphy-search-icon-path-1"})),ye.createElement("g",{id:"search",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},ye.createElement("g",{id:"icons/search"},ye.createElement("mask",{id:"giphy-search-icon-mask-2",fill:"white"},ye.createElement("use",{xlinkHref:"#giphy-search-icon-path-1"})),ye.createElement("use",{id:"Mask",fill:"#FFFFFF",fillRule:"nonzero",xlinkHref:"#giphy-search-icon-path-1"}),ye.createElement("g",{mask:"url(#giphy-search-icon-mask-2)"},ye.createElement("g",{transform:"translate(0.250000, 0.250000)"},ye.createElement("g",null)))))),wU=_U,SU="2s",sv="#E646B6",US="#FF6666",R6="cubic-bezier(0.920, 0.240, 0.185, 0.730)",EU=Ud`
    0% {
      transform: rotate(34deg) translate(-10px, 80px);
    };
    
    100% {
      transform: rotate(34deg) translate(-10px, -20px);
    }
`,CU=Ud`
    0% { 
      transform: translate(0px, 0px);
      opacity: 0;
    }
    50% {
      opacity: 1;
    }
    100% {
      transform: translate(10px, -17px);
      opacity: 0;
    }
`,TU=Ud`
    0% {
      opacity: 0;
      transform: translateX(-400%);
    }
    50% {
      opacity: 1;
    }
    100% {
      opacity: 0;
      transform: translateX(0);
    }
`;rt.div`
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    cursor: pointer;
    @media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {
        display: none;
    }
    height: var(${Mn.searchbarHeight});
    width: var(${Mn.searchbarHeight});
`;rt.div`
    position: absolute;
    height: 100%;
    width: 100%;
    background: linear-gradient(45deg, ${sv} 0%, ${US} 100%);
    border-radius: 0 4px 4px 0;
    overflow: hidden;
    &:before {
        animation: ${TU} ${SU} linear 0s infinite;
        background-image: linear-gradient(45deg, ${sv} 0%, ${US} 50%, ${sv} 100%);
        background-size: 400%;
        background-position: 0% 100%;
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        width: 400%;
    }
`;rt.div`
    width: 100%;
    height: 100%;
    position: absolute;
    overflow: hidden;
    &::after {
        content: '+';
        color: white;
        font-family: 'SS Standard';
        font-size: 8px;
        position: absolute;
        top: 65%;
        left: 66%;
        animation: ${CU} 1s ${R6} 0s 1 forwards;
    }
`;rt.div`
    position: absolute;
    width: 200%;
    height: 20px;
    background: rgba(255, 255, 255, 0.5);
    transform: rotate(34deg) translate(-10px, -20px);
    animation: ${EU} 1s ${R6} 0s 1;
    filter: blur(1px);
`;rt(wU)`
    z-index: 1;
    display: flex;
    width: 50%;
    height: 50%;
`;rt.div`
    display: flex;
    background: white;
    align-items: center;
    border-radius: 4px;
    height: var(${Mn.searchbarHeight});
    background: var(${Mn.bgColor2});
`;rt.input`
    background: inherit;
    box-sizing: border-box;
    border: 0;
    appearance: none;
    font-weight: normal;
    font-family: interface, Helvetica Neue, helvetica, sans-serif;
    outline: 0;
    font-size: 15px;
    padding: 0 10px;
    border-radius: 0;
    text-overflow: ellipsis;
    color: var(${Mn.fgColor});
    &::placeholder {
        color: ${H3};
    }
    min-width: 150px;
    flex: 1;
    ${t=>t.$isUsernameSearch&&wp`
            color: ${WV};
        `}
`;var kU=({size:t=18,className:e})=>ye.createElement("svg",{width:t,height:t,viewBox:"0 0 18 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:e},ye.createElement("g",{id:"trending",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},ye.createElement("g",null,ye.createElement("rect",{id:"Rectangle",stroke:"#979797",fill:"#D8D8D8",opacity:"0",x:"0.5",y:"0.5",width:"17",height:"17"}),ye.createElement("path",{d:"M12.6093329,3.12057664 L15.156896,3.12057664 L9.64199318,9.04253019 L6.88133868,6.8175119 C6.7544587,6.67603813 6.56616874,6.60087259 6.38404017,6.61897279 C6.2490402,6.63288422 6.11891631,6.69661171 6.02063992,6.79697337 C2.21226835,10.5943119 0.308082561,12.4929812 0.308082561,12.4929812 C0.308082561,12.4929812 0.527106106,12.8074292 0.710953088,13.0215425 C0.833517743,13.1642848 0.975497751,13.3098497 1.13689311,13.4582373 L6.47329888,8.13191205 L9.16381134,10.2953038 C9.40800276,10.5710787 9.68933701,10.7021044 10.019278,10.4570223 L16.0239805,4.04474473 C16.0239805,5.87956383 16.0239805,6.79697337 16.0239805,6.79697337 C16.0239805,6.79697337 16.4320205,6.79697337 17.2481004,6.79697337 L17.2481004,1.80604505 C14.1555887,1.80604505 12.6093329,1.80604505 12.6093329,1.80604505 C12.6093329,1.80604505 12.6093329,2.24422225 12.6093329,3.12057664 Z",id:"Shape",stroke:"#00CCFF",strokeWidth:"0.4",fill:"#00CCFF",fillRule:"nonzero",transform:"translate(8.778091, 7.632141) rotate(-2.000000) translate(-8.778091, -7.632141) "})))),NU=kU,j6=9;rt.div`
    background: ${F3};
    display: flex;
    padding-right: 4px;
    align-items: center;
    margin-right: ${j6}px;
    cursor: pointer;
`;rt.div`
    background: ${F3};
    display: flex;
    padding: 14px;
    align-items: center;
    margin-right: ${j6}px;
    white-space: nowrap;
    cursor: pointer;
    font-style: italic;
    border-radius: 20px;
`;rt(Ep)`
    height: var(${Mn.searchbarHeight});
    width: var(${Mn.searchbarHeight});
`;rt(NU)`
    margin-right: 2px;
`;rt.div`
    display: flex;
    color: white;
    flex-direction: row;
    font-family: 'interface';
    font-weight: 600;
    font-size: 14px;
    -webkit-overflow-scrolling: touch;
    overflow-x: auto;
    overflow-y: hidden;
    padding-bottom: 10px;
    height: var(${Mn.searchbarHeight});
`;var AU=({onClick:t})=>ye.createElement("svg",{width:"66px",height:"13px",viewBox:"0 0 66 13",onClick:t},ye.createElement("g",{stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},ye.createElement("g",{transform:"translate(-1060.000000, -462.000000)",fill:"#FFFFFF",fillRule:"nonzero"},ye.createElement("g",{transform:"translate(931.000000, 286.375671)"},ye.createElement("g",{transform:"translate(86.000000, 136.124329)"},ye.createElement("path",{d:"M47.968,49.1962322 C49.588,49.1962322 51.052,48.6202322 51.58,47.5522322 L51.58,43.8202322 L47.476,43.8202322 L47.476,45.6802322 L49.6,45.6802322 L49.6,46.7602322 C49.12,47.1082322 48.424,47.1922322 47.98,47.1922322 C46.288,47.1922322 45.724,45.8602322 45.724,44.7802322 C45.724,43.1362322 46.612,42.3202322 47.98,42.3202322 C48.544,42.3202322 49.288,42.4762322 49.9,43.0522322 L51.28,41.6842322 C50.176,40.5682322 49.144,40.3282322 47.98,40.3282322 C44.824,40.3282322 43.384,42.5842322 43.384,44.7802322 C43.384,46.9762322 44.644,49.1962322 47.968,49.1962322 Z M54.928,48.9682322 L54.928,40.5682322 L52.564,40.5682322 L52.564,48.9682322 L54.928,48.9682322 Z M58.648,48.9682322 L58.648,46.7002322 L60.352,46.7002322 C62.596,46.6762322 63.724,45.3442322 63.724,43.6282322 C63.724,41.9842322 62.608,40.5682322 60.352,40.5682322 L56.272,40.5682322 L56.272,48.9682322 L58.648,48.9682322 Z M60.352,44.6962322 L58.648,44.6962322 L58.648,42.6082322 L60.352,42.6082322 C61,42.6082322 61.348,43.1122322 61.348,43.6642322 C61.348,44.2162322 61.012,44.6962322 60.352,44.6962322 Z M66.796,48.9802322 L66.796,45.8002322 L69.82,45.8002322 L69.82,48.9802322 L72.172,48.9802322 L72.172,40.5802322 L69.82,40.5802322 L69.82,43.7722322 L66.796,43.7722322 L66.796,40.5802322 L64.42,40.5802322 L64.42,48.9802322 L66.796,48.9802322 Z M78.16,48.9682322 L78.16,45.6202322 L81.496,40.6762322 L81.496,40.5682322 L78.82,40.5682322 L77.008,43.4482322 L75.268,40.5682322 L72.592,40.5682322 L72.592,40.6642322 L75.784,45.6202322 L75.784,48.9682322 L78.16,48.9682322 Z M87.796,49.1362322 C88.972,49.1362322 90.088,48.7402322 90.952,47.8882322 L90.028,46.9642322 C89.44,47.5522322 88.576,47.8762322 87.796,47.8762322 C85.624,47.8762322 84.712,46.3522322 84.7,44.8162322 C84.688,43.2682322 85.66,41.6962322 87.796,41.6962322 C88.576,41.6962322 89.368,41.9722322 89.968,42.5602322 L90.868,41.6962322 C90.016,40.8442322 88.924,40.4242322 87.796,40.4242322 C84.796,40.4242322 83.356,42.6202322 83.3679256,44.8282322 C83.38,47.0362322 84.748,49.1362322 87.796,49.1362322 Z M93.028,48.9682322 L93.028,40.5802322 L91.792,40.5802322 L91.792,48.9682322 L93.028,48.9682322 Z M94.252,41.3122322 C94.252,42.3322322 95.788,42.3322322 95.788,41.3122322 C95.788,40.3042322 94.252,40.3042322 94.252,41.3122322 Z M95.632,48.9682322 L95.632,43.0282322 L94.396,43.0282322 L94.396,48.9682322 L95.632,48.9682322 Z M98.188,51.7162322 L98.188,48.1042322 C98.632,48.8362322 99.556,49.1002322 100.276,49.1002322 C102.112,49.1002322 103.264,47.8042322 103.264,46.0162322 C103.264,44.2282322 102.04,42.9442322 100.276,42.9322322 C99.484,42.9322322 98.644,43.2922322 98.188,44.0122322 L98.116,43.0522322 L96.952,43.0522322 L96.952,51.7162322 L98.188,51.7162322 Z M100.156,47.9002322 C99.076,47.9002322 98.296,47.0722322 98.296,46.0162322 C98.296,44.9602322 99.016,44.1322322 100.156,44.1322322 C101.284,44.1322322 102.028,44.9002322 102.028,46.0162322 C102.028,47.1202322 101.236,47.9002322 100.156,47.9002322 Z M106.456,49.1482322 C107.992,49.1482322 108.964,48.3802322 108.976,47.2762322 C108.988,45.7522322 107.56,45.5122322 106.468,45.4162322 C105.712,45.3442322 105.196,45.1522322 105.184,44.6602322 C105.184,44.1922322 105.688,43.9402322 106.444,43.9522322 C107.032,43.9522322 107.536,44.0722322 108.004,44.5042322 L108.7,43.6882322 C108.04,43.1002322 107.332,42.8962322 106.42,42.8962322 C105.316,42.8962322 103.96,43.3882322 103.96,44.6962322 C103.972,46.0042322 105.256,46.3642322 106.372,46.4722322 C107.248,46.5562322 107.752,46.7602322 107.74,47.2882322 C107.728,47.8402322 107.068,48.0562322 106.48,48.0562322 C105.784,48.0442322 104.956,47.7922322 104.404,47.1802322 L103.756,48.0562322 C104.536,48.9322322 105.496,49.1482322 106.456,49.1482322 Z",id:"GIPHYClips"})))))),RU=AU,jU=rt.div`
    display: flex;
    align-items: center;
    font-family: interface, helvetica, arial;
    cursor: pointer;
`,IU=rt(Ep)`
    flex-shrink: 0;
`,DU=rt.div`
    display: flex;
    flex-direction: column;
`,J1=({gif:t,className:e,onClick:n})=>{const{user:r}=t;return!r?.username&&!r?.display_name?null:ye.createElement(jU,{className:[J1.className,e].join(" "),onClick:a=>{if(a.preventDefault(),a.stopPropagation(),n)n(t);else{const o=r.profile_url;o&&window.open(o,"_blank")}}},ye.createElement(IU,{user:r}),ye.createElement(DU,null,ye.createElement(RU,{onClick:a=>{a.preventDefault(),a.stopPropagation(),n?n(t):t.url&&window.open(t.url,"_blank")}}),ye.createElement(_6,{user:r})))};J1.className="giphy-attribution";var MU=J1,I6=25,PU=({size:t=I6,onClick:e=()=>{}})=>ye.createElement("svg",{width:t,height:t,viewBox:"0 0 26 23",onClick:e},ye.createElement("g",{stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},ye.createElement("g",{transform:"translate(1.000000, 0.000000)",fill:"#FFF",fillRule:"nonzero"},ye.createElement("path",{d:"M11.9625091,0.572584405 L11.9625091,22.2272644 C11.9625091,22.4856644 11.8466091,22.6635044 11.6151891,22.7611644 C11.3480491,22.8413444 11.1390491,22.7968844 10.9878091,22.6277844 L4.8732291,15.9143244 L0.573909096,15.9143244 C0.413549096,15.9143244 0.277509096,15.8588444 0.166549096,15.7475044 C0.0573082348,15.6406091 -0.00292164572,15.4933347 -1.77635684e-15,15.3405244 L-1.77635684e-15,7.45058441 C-1.77635684e-15,7.29022441 0.0555890961,7.15456441 0.167309096,7.04322441 C0.278269096,6.93226441 0.414309096,6.87640441 0.573909096,6.87640441 L4.8732291,6.87640441 L10.9874291,0.172064405 C11.1390491,0.00296440549 11.3484291,-0.0414955945 11.6151891,0.0386844055 C11.8466091,0.136344405 11.9621291,0.314564405 11.9621291,0.572584405 L11.9625091,0.572584405 Z"}),ye.createElement("path",{d:"M15.7579491,16.0914044 L14.6798891,13.6594044 C15.5739159,13.2635547 16.1503537,12.3776671 16.1501091,11.3999244 C16.150386,10.4242626 15.5763999,9.53983269 14.6852091,9.14272441 L15.7697291,6.71376441 C17.6193585,7.53872062 18.810518,9.37466359 18.8101092,11.3999244 C18.8105521,13.4298903 17.6139475,15.2691931 15.7579491,16.0914044 L15.7579491,16.0914044 Z"}),ye.createElement("path",{d:"M18.3647491,20.2619044 L17.2863091,17.8299044 C19.8302925,16.7031661 21.4705725,14.1822599 21.4701091,11.3999244 C21.4701091,8.59818441 19.8167291,6.09892441 17.3022691,4.97678441 L18.3864091,2.54782441 C21.8804724,4.10607079 24.1307363,7.57414217 24.1301093,11.3999244 C24.1308375,15.2343934 21.8705556,18.7086904 18.3647491,20.2619044 Z"})))),OU=({size:t=I6,onClick:e=()=>{}})=>ye.createElement("svg",{onClick:e,height:t,width:t,viewBox:"0 0 26 23",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},ye.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},ye.createElement("g",{id:"Group",transform:"translate(1.000000, 0.000000)",fill:"#FFFFFF",fillRule:"nonzero"},ye.createElement("path",{d:"M11.9625091,0.572584405 L11.9625091,22.2272644 C11.9625091,22.4856644 11.8466091,22.6635044 11.6151891,22.7611644 C11.3480491,22.8413444 11.1390491,22.7968844 10.9878091,22.6277844 L4.8732291,15.9143244 L0.573909096,15.9143244 C0.413549096,15.9143244 0.277509096,15.8588444 0.166549096,15.7475044 C0.0573082348,15.6406091 -0.00292164572,15.4933347 0,15.3405244 L0,7.45058441 C0,7.29022441 0.0555890961,7.15456441 0.167309096,7.04322441 C0.278269096,6.93226441 0.414309096,6.87640441 0.573909096,6.87640441 L4.8732291,6.87640441 L10.9874291,0.172064405 C11.1390491,0.00296440549 11.3484291,-0.0414955945 11.6151891,0.0386844055 C11.8466091,0.136344405 11.9621291,0.314564405 11.9621291,0.572584405 L11.9625091,0.572584405 Z",id:"Path"})),ye.createElement("g",{id:"Group",transform:"translate(14.887009, 6.947630)",fill:"#FFFFFF",fillRule:"nonzero"},ye.createElement("path",{d:"M7.88199149,6.27905236 C7.94693088,6.35707599 7.94693088,6.47033309 7.88199149,6.54835671 L6.54835671,7.88199149 C6.47033309,7.94693088 6.35707599,7.94693088 6.27905236,7.88199149 L3.96534802,5.56828715 L1.65164367,7.88199149 C1.57362004,7.94693088 1.46036294,7.94693088 1.38233932,7.88199149 L0.0487045381,6.54835671 C-0.016234846,6.47033309 -0.016234846,6.35707599 0.0487045381,6.27905236 L2.36240889,3.96534802 L0.0487045381,1.65164367 C-0.016234846,1.57362004 -0.016234846,1.46036294 0.0487045381,1.38233932 L1.38233932,0.0487045381 C1.46036294,-0.016234846 1.57362004,-0.016234846 1.65164367,0.0487045381 L3.96534802,2.36240889 L6.27905236,0.0487045381 C6.35707599,-0.016234846 6.47033309,-0.016234846 6.54835671,0.0487045381 L7.88199149,1.38233932 C7.94693088,1.46036294 7.94693088,1.57362004 7.88199149,1.65164367 L5.56828715,3.96534802 L7.88199149,6.27905236 Z",id:"Shape"})))),LU=rt.div`
    background: ${Xf};
    height: ${t=>t.$barHeight}px;
    position: absolute;
    width: 5px;
    bottom: 0;
    left: 0;
    opacity: 0.95;
`,VU=({videoEl:t})=>{_z(2147483647,100);const e=t?.currentTime||0,n=t?.duration||0,r=e/n;let a=Math.round(r*100),o=5;return t?.height<200?o=3:t?.height<300&&(o=4),a=n<10&&a>98?100:a,ye.createElement(LU,{style:{width:`${a}%`},$barHeight:o,className:"hide-in-percy"})},zU=VU,UU=(t,e="")=>{switch(t){case 1:return"Aborted. The fetching process for the media resource was aborted by the user agent at the user's request.";case 2:return"Network Error. A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.";case 3:return"Decode Error. An error of some description occurred while decoding the media resource, after the resource was established to be usable.";case 4:return`Can not play a video of type "${e.split(".").pop()}" on this platform.`;default:return""}},BU=(t,e,n,r,a)=>{const o=a+t;return!r.has(o)&&n>0&&e>n*t?(r.add(o),!0):!1},FU=[.25,.5,.75],D6="giphy-video",HU={IDLE:1},M6=({muted:t,ccEnabled:e=!1,ccLanguage:n="en",loop:r=!0,onStateChange:a,onTimeUpdate:o,onCanPlay:u,onFirstPlay:h,onWaiting:m,onMuted:p,onError:y,onEnded:b,onLoop:x,onQuartile:k,onEndFullscreen:j,setVideoEl:R,gif:N,width:U,percentWidth:F,height:I,volume:O=.7,className:B=D6,isInPlayer:H})=>{var w,E,A;const P=I||pp(N,U);let L;F&&(L=`${Math.round(P/U*100)}%`);const[z,M]=C.useState(nS(N.video,U,P)),se=C.useRef(0);z||console.warn(`GiphyJS No video content for id: ${N.id}`);const ae=C.useRef(Date.now()),G=C.useRef(!1),J=C.useRef(0),W=C.useRef(0),Ee=C.useRef(new Set);C.useEffect(()=>{ae.current=Date.now(),G.current=!1,J.current=1,W.current=0,Ee.current=new Set},[N.id]);const Pe=C.useRef(null);C.useEffect(()=>{const ke=nS(N.video,U,P);Pe.current&&z?.url&&ke.url!==z.url&&(z.url.indexOf(String(N.id))!==-1&&(se.current=Pe.current.currentTime),M(ke))},[U,I,N.video,P,z?.url,N.id]),C.useEffect(()=>{Pe.current&&z?.url&&se.current&&(Pe.current.currentTime=se.current,se.current=0)},[z?.url,se]);const $=C.useCallback(()=>{var ke;const he=Pe.current,ee=(ke=he?.error)==null?void 0:ke.code;if(ee&&he?.src){const qe=UU(ee,he?.src);console.error(qe),y?.(ee)}},[y]),X=C.useCallback(()=>{a?.("playing"),G.current||(G.current=!0,N.analytics_response_payload&&G1({actionType:"START",analyticsResponsePayload:N.analytics_response_payload}),h?.(Date.now()-ae.current))},[h,a,N]),oe=C.useCallback(()=>a?.("paused"),[a]),fe=C.useCallback(()=>{const ke=Pe.current;if(ke){const he=ke.currentTime;FU.some(ee=>BU(ee,he,ke.duration,Ee.current,J.current)?(k?.(ee),!0):!1),o?.(he||0)}},[k,o]),Ce=C.useCallback(()=>u?.(),[u]),Ue=C.useCallback(()=>{const ke=Pe.current;ke?.currentTime!==0&&ke?.networkState!==HU.IDLE&&m?.(++W.current)},[m]),re=C.useCallback(()=>{r&&Pe.current&&Pe.current.play(),x?.(J.current),J.current=J.current+1,G.current&&b?.()},[b,r,x]),Le=C.useCallback(()=>j?.(),[j]),Re=C.useCallback(ke=>Q1(void 0,null,function*(){if(ke){const he=ke.play();if(he!==void 0)try{yield he,p?.(!1)}catch{ke.muted=!0,p?.(!0),ke.play()}}}),[p]);C.useEffect(()=>{const ke=Pe.current;ke&&(Re(ke),R?.(ke),isNaN(O)||(ke.volume=O))},[]),C.useEffect(()=>{const ke=Pe.current;return ke&&(ke.addEventListener("play",X),ke.addEventListener("pause",oe),ke.addEventListener("error",$),ke.addEventListener("timeupdate",fe),ke.addEventListener("canplay",Ce),ke.addEventListener("ended",re),ke.addEventListener("waiting",Ue),ke.addEventListener("webkitendfullscreen",Le)),()=>{ke&&(ke.removeEventListener("play",X),ke.removeEventListener("pause",oe),ke.removeEventListener("error",$),ke.removeEventListener("timeupdate",fe),ke.removeEventListener("canplay",Ce),ke.removeEventListener("ended",re),ke.removeEventListener("waiting",Ue),ke.removeEventListener("webkitendfullscreen",Le))}},[X,oe,$,fe,Ce,re,Ue,Le]);const We=(A=(E=(w=N.video)==null?void 0:w.captions)==null?void 0:E[n])==null?void 0:A.vtt;return z?.url?ye.createElement("video",{crossOrigin:"anonymous",draggable:!0,className:B,width:H?"100%":F||U,height:H?"100%":L||P,muted:t,autoPlay:!0,playsInline:!0,ref:Pe,src:z?.url,"data-giphy-id":N.id},e&&We&&ye.createElement("track",{label:"English",kind:"subtitles",srcLang:n,src:We,default:!0})):null};M6.className=D6;var P6=M6,$U=rt.div`
    position: relative;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: black;
    font-family: interface, helvetica, arial;
    -webkit-font-smoothing: antialiased;
`,qU=rt.div`
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    cursor: pointer;
`,GU=rt.div`
    position: absolute;
    top: 10px;
    right: 10px;
    left: 10px;
    bottom: 0;
    display: flex;
    justify-content: space-between;
    opacity: ${t=>t.$isHovered?1:0};
    transition: opacity ease-out 250ms;
    align-items: flex-start;
`,YU=rt.div`
    font-size: 22px;
    color: white;
    margin-bottom: 5px;
    font-weight: bold;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    user-select: none;
    cursor: pointer;
`,KU=rt.div`
    position: relative;
    min-width: 0;
`,QU=rt.div`
    &:before {
        background: linear-gradient(rgba(18, 18, 18, 0.6), rgba(0, 0, 0, 0));
        content: '';
        height: ${t=>t.$isLargePlayer?125:75}px;
        left: 0;
        pointer-events: none;
        position: absolute;
        top: 0;
        width: 100%;
    }
    &:after {
        background: linear-gradient(rgba(0, 0, 0, 0), rgba(18, 18, 18, 0.6));
        content: '';
        height: ${t=>t.$isLargePlayer?125:75}px;
        left: 0;
        pointer-events: none;
        position: absolute;
        bottom: 0;
        width: 100%;
    }
`,XU=300,WU=4e3,JU=t=>{const{style:e,width:n,percentWidth:r,hideMute:a,hideAttribution:o,hideProgressBar:u,hideTitle:h,className:m,persistentControls:p,gif:y,overlay:b}=t,[x,k]=C.useState(!1),[j,R]=C.useState(null),[N,U]=C.useState(t.muted),[F,I]=C.useState(!1),{setVideoEl:O,onMuted:B,onUserMuted:H}=t,w=t.height||pp(y,n);let E;r&&(E=`${Math.round(w/n*100)}%`);const[,A,P]=gz(()=>{k(!1)},WU),L=C.useCallback(G=>{B?.(G),I(G)},[I,B]),z=C.useCallback(G=>{O?.(G),R(G)},[O,R]),M=()=>{F?(I(!1),U(!1)):U(!N)};C.useEffect(()=>{U(t.muted)},[t.muted]);const se=p||x,ae=w>=XU;return C.useEffect(()=>(se?P():A(),()=>A()),[se,A,P]),ye.createElement($U,{className:m,style:$i({width:r||n,height:E||w},e),onMouseOver:()=>k(!0),onMouseLeave:()=>k(!1),onMouseMove:()=>{k(!0),P()},onClick:G=>{H?.(!(N||F)),j?.play(),G.preventDefault(),M()}},ye.createElement(P6,K1($i({},t),{isInPlayer:!0,onMuted:L,setVideoEl:z,muted:N})),se&&ye.createElement(QU,{$isLargePlayer:ae}),ye.createElement(GU,{$isHovered:se},ye.createElement(KU,null,!h&&ae&&ye.createElement(YU,{onClick:G=>{G.preventDefault(),G.stopPropagation(),window.open(y.url,"_blank")}},y.title),j&&!o?ye.createElement(MU,{gif:y}):null),!a&&ye.createElement(qU,null,N||F?ye.createElement(OU,null):ye.createElement(PU,null))),se&&!u&&j?ye.createElement(zU,{videoEl:j}):null,b&&ye.createElement(b,{gif:y,isHovered:x,width:n,height:w}))},ZU=t=>(t.overlay&&!t.controls&&console.warn(`${rr.PREFIX}: Overlays only work when controls are enabled`),t.controls?ye.createElement(JU,$i({},t)):ye.createElement(P6,$i({},t))),eB=ZU;rt.div`
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    height: 100%;
    width: 100%;
`;rt(eB)`
    height: 100%;
    display: inline-block;
    object-fit: fill;
    pointer-events: none;
    background: rgb(0, 0, 0, 0);
`;rt.div`
    position: absolute;
    top: 6px;
    right: 6px;
    cursor: pointer;
    opacity: ${t=>t.$isHovered?1:.8};
    transition: opacity ease-out 800ms;
`;Xv("X-GIPHY-SDK-NAME","ReactSDK");const tB="9S3bPWJJTZZdynuLXHFSBstNA5B6tes9",BS=new m3(tB),nB=({onSelect:t})=>{const[e,n]=C.useState(""),[r,a]=C.useState(400),o=C.useRef(null);C.useEffect(()=>{o.current&&a(o.current.offsetWidth)},[]);const u=h=>e?BS.search(e,{offset:h,limit:10}):BS.trending({offset:h,limit:10});return c.jsxs("div",{className:"w-full h-full flex flex-col bg-dark-sidebar rounded-lg overflow-hidden border border-dark-hover",children:[c.jsx("div",{className:"p-3 border-b border-dark-hover",children:c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",placeholder:"Search GIFs...",value:e,onChange:h=>n(h.target.value),className:"w-full bg-dark-input text-dark-text px-4 py-2 pl-10 rounded outline-none border border-transparent focus:border-brand-primary transition-all",autoFocus:!0}),c.jsx(v1,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-dark-muted",size:20})]})}),c.jsx("div",{ref:o,className:"flex-1 overflow-y-auto overflow-x-hidden p-2 custom-scrollbar",children:r>0&&c.jsx(N6,{width:r-20,columns:3,fetchGifs:u,onGifClick:(h,m)=>{m.preventDefault(),t(h.images.original.url)},noLink:!0,hideAttribution:!0,gutter:6},e)})]})},rB="9S3bPWJJTZZdynuLXHFSBstNA5B6tes9",FS=new m3(rB),sB=({onSelect:t})=>{const[e,n]=C.useState(""),[r,a]=C.useState(400),o=C.useRef(null);C.useEffect(()=>{o.current&&a(o.current.offsetWidth)},[]);const u=h=>e?FS.search(e,{offset:h,limit:10,type:"stickers"}):FS.trending({offset:h,limit:10,type:"stickers"});return c.jsxs("div",{className:"w-full h-full flex flex-col bg-dark-sidebar rounded-lg overflow-hidden border border-dark-hover",children:[c.jsx("div",{className:"p-3 border-b border-dark-hover bg-brand-primary/10",children:c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",placeholder:"Search Premium Stickers...",value:e,onChange:h=>n(h.target.value),className:"w-full bg-dark-input text-dark-text px-4 py-2 pl-10 rounded outline-none border border-transparent focus:border-brand-primary transition-all placeholder:text-dark-muted",autoFocus:!0}),c.jsx(v1,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-dark-muted",size:20})]})}),c.jsx("div",{className:"px-3 py-1 bg-brand-primary/5 text-[10px] text-brand-primary text-center font-bold tracking-wider uppercase",children:"Premium Stickers"}),c.jsx("div",{ref:o,className:"flex-1 overflow-y-auto overflow-x-hidden p-2 custom-scrollbar",children:r>0&&c.jsx(N6,{width:r-20,columns:3,fetchGifs:u,onGifClick:(h,m)=>{m.preventDefault(),t(h.images.original.url)},noLink:!0,hideAttribution:!0,gutter:6},e)})]})},iB=({onSubmit:t,onClose:e})=>{const[n,r]=C.useState(""),[a,o]=C.useState(["",""]),[u,h]=C.useState(!1),[m,p]=C.useState(!1),y=()=>{a.length<10&&o([...a,""])},b=R=>{a.length>2&&o(a.filter((N,U)=>U!==R))},x=(R,N)=>{const U=[...a];U[R]=N,o(U)},k=()=>{const R=a.filter(N=>N.trim()!=="");n.trim()&&R.length>=2&&(t({question:n.trim(),options:R,multipleChoice:u,anonymous:m}),e())},j=n.trim()&&a.filter(R=>R.trim()).length>=2;return c.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-dark-sidebar rounded-lg w-full max-w-md mx-4 shadow-2xl animate-fadeIn",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-hover",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(b1,{className:"text-brand-primary",size:24}),c.jsx("h2",{className:"text-lg font-semibold text-dark-text",children:"Create Poll"})]}),c.jsx("button",{onClick:e,className:"p-1 hover:bg-dark-hover rounded transition-colors",children:c.jsx(Vn,{className:"text-dark-muted",size:20})})]}),c.jsxs("div",{className:"p-4 space-y-4 max-h-[60vh] overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-dark-muted mb-2",children:"Question"}),c.jsx("input",{type:"text",value:n,onChange:R=>r(R.target.value),placeholder:"Ask a question...",maxLength:300,className:`w-full bg-dark-input text-dark-text px-4 py-3 rounded-lg
                         border border-transparent focus:border-brand-primary
                         outline-none transition-colors`,autoFocus:!0}),c.jsxs("div",{className:"text-xs text-dark-muted mt-1 text-right",children:[n.length,"/300"]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-dark-muted mb-2",children:"Options"}),c.jsx("div",{className:"space-y-2",children:a.map((R,N)=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("span",{className:"text-dark-muted text-sm w-6",children:[N+1,"."]}),c.jsx("input",{type:"text",value:R,onChange:U=>x(N,U.target.value),placeholder:`Option ${N+1}`,maxLength:100,className:`flex-1 bg-dark-input text-dark-text px-3 py-2 rounded
                               border border-transparent focus:border-brand-primary
                               outline-none transition-colors text-sm`}),a.length>2&&c.jsx("button",{onClick:()=>b(N),className:"p-1 hover:bg-red-500/20 text-red-400 rounded transition-colors",children:c.jsx(Vn,{size:18})})]},N))}),a.length<10&&c.jsxs("button",{onClick:y,className:"mt-2 flex items-center gap-1 text-sm text-brand-primary hover:text-brand-primary/80 transition-colors",children:[c.jsx(Po,{size:18}),"Add Option"]})]}),c.jsxs("div",{className:"space-y-3 pt-2 border-t border-dark-hover",children:[c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[c.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${u?"bg-brand-primary border-brand-primary":"border-dark-muted group-hover:border-dark-text"}`,children:u&&c.jsx(Ho,{size:14,className:"text-white"})}),c.jsx("span",{className:"text-dark-text text-sm",children:"Allow multiple selections"}),c.jsx("input",{type:"checkbox",checked:u,onChange:R=>h(R.target.checked),className:"sr-only"})]}),c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[c.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${m?"bg-brand-primary border-brand-primary":"border-dark-muted group-hover:border-dark-text"}`,children:m&&c.jsx(Ho,{size:14,className:"text-white"})}),c.jsx("span",{className:"text-dark-text text-sm",children:"Anonymous voting"}),c.jsx("input",{type:"checkbox",checked:m,onChange:R=>p(R.target.checked),className:"sr-only"})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t border-dark-hover",children:[c.jsx(ot,{variant:"secondary",onClick:e,children:"Cancel"}),c.jsx(ot,{variant:"primary",onClick:k,disabled:!j,children:"Create Poll"})]})]})})},aB=(t,e)=>{if(e===0)return"0 KB/s";const n=t/e;return n>1024*1024?`${(n/(1024*1024)).toFixed(1)} MB/s`:`${(n/1024).toFixed(0)} KB/s`},oB=t=>t.type.startsWith("image/")?"image":t.type.startsWith("video/")||t.type.startsWith("audio/")?"video":"auto",lB=(t,e)=>new Promise((n,r)=>{const a="dcqipv1hn",o="lumo_upload",u=oB(t),h=`https://api.cloudinary.com/v1_1/${a}/${u}/upload`,m=new FormData;m.append("file",t),m.append("upload_preset",o);const p=t.name.replace(/\.[^/.]+$/,"").replace(/[^a-zA-Z0-9_-]/g,"_");m.append("public_id",p);const y=new XMLHttpRequest;y.open("POST",h);const b=Date.now();y.upload.onprogress=x=>{if(x.lengthComputable){const k=x.loaded/x.total*100,j=(Date.now()-b)/1e3,R=aB(x.loaded,j);e&&e(k,R)}},y.onload=()=>{if(y.status===200)try{const x=JSON.parse(y.responseText);n({url:x.secure_url,name:x.original_filename||t.name,type:x.resource_type,format:x.format,bytes:x.bytes})}catch{r(new Error("Invalid response from Cloudinary"))}else try{const x=JSON.parse(y.responseText);r(new Error(x.error?.message||`Upload failed with status ${y.status}`))}catch{r(new Error(`Upload failed with status ${y.status}`))}},y.onerror=()=>r(new Error("Network error during upload")),y.send(m)}),O6=({serverId:t,channelId:e,channel:n,userId:r,userProfile:a,userRole:o,users:u,replyingTo:h,onCancelReply:m})=>{const[p,y]=C.useState(""),[b,x]=C.useState(!1),[k,j]=C.useState(!1),[R,N]=C.useState(""),[U,F]=C.useState(0),[I,O]=C.useState(!1),[B,H]=C.useState(!1),[w,E]=C.useState(!1),[A,P]=C.useState(!1),[L,z]=C.useState(!1),[M,se]=C.useState({uploading:!1,progress:0,speed:""}),[ae,G]=C.useState(null),[J,W]=C.useState(null),[Ee,Pe]=C.useState(""),[$,X]=C.useState(!1),oe=C.useRef(0),fe=C.useRef(null),Ce=C.useRef(null),{warning:Ue,error:re,info:Le}=Kr(),Re=["owner","admin","moderator"].includes(o),We=!n?.locked||Re,ke="This channel is locked. Only staff can send messages.",he=Se=>{const Fe=Ce.current?.selectionStart||p.length,lt=p.slice(0,Fe)+Se+p.slice(Fe);y(lt),O(!1),Ce.current?.focus()},ee=async Se=>{if(H(!1),!(!p.trim()&&!We))try{x(!0);const Fe={text:Se,userId:r,timestamp:mt(),mentions:[],replyTo:null};if(t)await Fn(wt(de,"servers",t,"channels",e,"messages"),Fe);else{await Fn(wt(de,"dms",e,"messages"),Fe),await it(Ae(de,"dms",e),{lastMessage:{text:"GIF",userId:r,timestamp:mt()},updatedAt:mt(),hiddenFor:[]});const lt=u.find(St=>St.id!==r);lt&&await it(Ae(de,"users",lt.id),{[`unreadDms.${e}.count`]:Ii(1),[`unreadDms.${e}.lastMessageAt`]:mt(),[`unreadDms.${e}.text`]:"GIF"}).catch(St=>console.error("Error updating unread DM count:",St))}}catch(Fe){console.error("Error sending GIF:",Fe),re("Failed to send GIF")}finally{x(!1)}},qe=async Se=>{if(E(!1),!sc(a)){re("Stickers are for Premium members only!");return}try{x(!0);const Fe={type:"sticker",text:Se,userId:r,timestamp:mt(),mentions:[],replyTo:null};if(t)await Fn(wt(de,"servers",t,"channels",e,"messages"),Fe);else{await Fn(wt(de,"dms",e,"messages"),Fe),await it(Ae(de,"dms",e),{lastMessage:{text:" Sticker",userId:r,timestamp:mt()},updatedAt:mt(),hiddenFor:[]});const lt=u.find(St=>St.id!==r);lt&&await it(Ae(de,"users",lt.id),{[`unreadDms.${e}.count`]:Ii(1),[`unreadDms.${e}.lastMessageAt`]:mt(),[`unreadDms.${e}.text`]:" Sticker"}).catch(St=>console.error("Error updating unread DM count:",St))}}catch(Fe){console.error("Error sending Sticker:",Fe),re("Failed to send Sticker")}finally{x(!1)}},ve=async Se=>{if(We)try{x(!0);const Fe={type:"poll",text:Se.question,poll:{question:Se.question,options:Se.options,votes:{},multipleChoice:Se.multipleChoice,anonymous:Se.anonymous},userId:r,timestamp:mt(),mentions:[]};if(t)await Fn(wt(de,"servers",t,"channels",e,"messages"),Fe);else{await Fn(wt(de,"dms",e,"messages"),Fe),await it(Ae(de,"dms",e),{lastMessage:{text:` Poll: ${Se.question}`,userId:r,timestamp:mt()},updatedAt:mt(),hiddenFor:[]});const lt=u.find(St=>St.id!==r);lt&&await it(Ae(de,"users",lt.id),{[`unreadDms.${e}.count`]:Ii(1),[`unreadDms.${e}.lastMessageAt`]:mt(),[`unreadDms.${e}.text`]:` Poll: ${Se.question}`}).catch(St=>console.error("Error updating unread DM count:",St))}}catch(Fe){console.error("Error creating poll:",Fe),re("Failed to create poll")}finally{x(!1)}},Oe=Se=>{if(!Se)return;const Fe=sc(a),lt=Fe?200*1024*1024:10*1024*1024;if(Se.size>lt){re(`File too large! The limit is ${Fe?"200MB":"10MB"}. ${Fe?"":"Upgrade to Premium for larger uploads."}`);return}let St=null;(Se.type.startsWith("image/")||Se.type.startsWith("video/"))&&(St=URL.createObjectURL(Se)),G(Se),W(St),Pe(""),P(!1),fe.current&&(fe.current.value="")},Me=Se=>{Oe(Se.target.files?.[0])},K=()=>document.querySelector('[role="dialog"]')!==null||document.querySelector(".modal-overlay")!==null||document.body.style.overflow==="hidden",ue=Se=>{if(Se.preventDefault(),Se.stopPropagation(),K())return;oe.current++,Se.dataTransfer.types&&Array.from(Se.dataTransfer.types).includes("Files")&&X(!0)},je=Se=>{Se.preventDefault(),Se.stopPropagation(),oe.current--,oe.current===0&&X(!1)},me=Se=>{Se.preventDefault(),Se.stopPropagation()},Ne=Se=>{if(Se.preventDefault(),Se.stopPropagation(),X(!1),oe.current=0,K())return;const Fe=Se.dataTransfer.files;Fe&&Fe.length>0&&Oe(Fe[0])};C.useEffect(()=>(window.addEventListener("dragenter",ue),window.addEventListener("dragleave",je),window.addEventListener("dragover",me),window.addEventListener("drop",Ne),()=>{window.removeEventListener("dragenter",ue),window.removeEventListener("dragleave",je),window.removeEventListener("dragover",me),window.removeEventListener("drop",Ne)}),[]);const _e=()=>{J&&URL.revokeObjectURL(J),G(null),W(null),Pe("")},Ie=async()=>{if(ae)try{se({uploading:!0,progress:0,speed:"0 KB/s"});let Se,Fe;if(ae.type.startsWith("image/"))Se=await vd(ae,(Tt,Ze)=>{se({uploading:!0,progress:Tt,speed:Ze})});else{const Vt=await lB(ae,(Tt,Ze)=>{se({uploading:!0,progress:Tt,speed:Ze})});Se=Vt.url,Fe=Vt}const St={text:Ee.trim()?`${Se}
${Ee}`:Se,userId:r,timestamp:mt(),mentions:[],replyTo:null};if(t)await Fn(wt(de,"servers",t,"channels",e,"messages"),St);else{await Fn(wt(de,"dms",e,"messages"),St),await it(Ae(de,"dms",e),{lastMessage:{text:ae.type.startsWith("image/")?" Image":" Attachment",userId:r,timestamp:mt()},updatedAt:mt(),hiddenFor:[]});const Vt=u.find(Tt=>Tt.id!==r);Vt&&await it(Ae(de,"users",Vt.id),{[`unreadDms.${e}.count`]:Ii(1),[`unreadDms.${e}.lastMessageAt`]:mt(),[`unreadDms.${e}.text`]:ae.type.startsWith("image/")?" Image":" Attachment"}).catch(Tt=>console.error("Error updating unread DM count:",Tt))}_e()}catch(Se){console.error("Error uploading file:",Se),re("Failed to upload file")}finally{se({uploading:!1,progress:0,speed:""})}};C.useEffect(()=>{const Se=p.length,Fe=p.slice(0,Se),lt=Fe.lastIndexOf("@");if(lt!==-1){const St=Fe.slice(lt+1);if(!St.includes(" ")){N(St.toLowerCase()),F(lt),j(!0);return}}j(!1)},[p]);const st=()=>{const Se=[];return t&&("everyone".startsWith(R.toLowerCase())&&Se.push({id:"everyone",displayName:"everyone",type:"special"}),["admin","moderator","member"].forEach(lt=>{lt.startsWith(R.toLowerCase())&&Se.push({id:`role-${lt}`,displayName:lt,type:"role"})})),u&&u.filter(lt=>lt.id!==r&&lt.displayName.toLowerCase().startsWith(R.toLowerCase())).forEach(lt=>{Se.push({...lt,type:"user"})}),Se.slice(0,8)},Pt=Se=>{const Fe=p.slice(0,U),lt=p.slice(U+R.length+1),St=`${Fe}@${Se.displayName} ${lt}`;y(St),j(!1)};C.useEffect(()=>{const Se=Fe=>{document.activeElement!==Ce.current&&(document.activeElement?.tagName==="INPUT"||document.activeElement?.tagName==="TEXTAREA"||Fe.ctrlKey||Fe.metaKey||Fe.altKey||["Escape","Tab","Enter","Backspace","Delete"].includes(Fe.key)||document.querySelector('[role="dialog"]')||Fe.key.length===1&&Ce.current?.focus())};return window.addEventListener("keydown",Se),()=>window.removeEventListener("keydown",Se)},[]);const $n=async Se=>{if(Se.preventDefault(),!!p.trim()&&!(!e||!r)){a?.isMuted&&Ue("You are muted and cannot send messages"),x(!0);try{const Fe=/@(\w+)/g,lt=[];let St;for(;(St=Fe.exec(p))!==null;){const Tt=St[1].toLowerCase();if(Tt==="everyone")u.forEach(Ze=>{Ze.id!==r&&lt.push(Ze.id)});else if(["admin","moderator","member"].includes(Tt))u.forEach(Ze=>{Ze.role===Tt&&Ze.id!==r&&lt.push(Ze.id)});else{const Ze=u.find(Gt=>Gt.displayName.toLowerCase()===Tt);Ze&&Ze.id!==r&&lt.push(Ze.id)}}const Vt={text:p.trim(),userId:r,timestamp:mt(),mentions:[...new Set(lt)],replyTo:h?{messageId:h.id,userId:h.userId,text:h.text.substring(0,100)}:null};if(t){if(await Fn(wt(de,"servers",t,"channels",e,"messages"),Vt),lt.length>0){const Tt=lt.map(Ze=>it(Ae(de,"users",Ze),{[`unreadMentions.${t}.count`]:Ii(1),[`unreadMentions.${t}.lastMentionAt`]:mt(),[`unreadMentions.${t}.lastMentionText`]:p.trim().substring(0,50)}).catch(Gt=>{console.error("Error updating mention for user:",Ze,Gt)}));await Promise.all(Tt)}}else{await Fn(wt(de,"dms",e,"messages"),Vt),await it(Ae(de,"dms",e),{lastMessage:{text:p.trim().substring(0,100),userId:r,timestamp:mt()},updatedAt:mt(),hiddenFor:[]});const Tt=u.find(Ze=>Ze.id!==r);Tt&&await it(Ae(de,"users",Tt.id),{[`unreadDms.${e}.count`]:Ii(1),[`unreadDms.${e}.lastMessageAt`]:mt(),[`unreadDms.${e}.text`]:p.trim().substring(0,50)}).catch(Ze=>console.error("Error updating unread DM count:",Ze))}y(""),m&&m()}catch(Fe){console.error("Error sending message:",Fe),re("Failed to send message")}finally{x(!1)}}};return c.jsxs("div",{className:"px-4 pb-6 relative",children:[h&&c.jsxs("div",{className:"mb-2 bg-dark-sidebar border-l-4 border-green-400 p-3 rounded flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"text-xs text-green-400 font-semibold mb-1",children:["Replying to ",u.find(Se=>Se.id===h.userId)?.displayName||"Unknown"]}),c.jsx("div",{className:"text-sm text-dark-muted truncate",children:h.text})]}),c.jsx("button",{onClick:m,className:"ml-2 text-dark-muted hover:text-dark-text transition-colors",title:"Cancel reply",children:c.jsx(Vn,{size:18})})]}),k&&c.jsx("div",{className:"absolute bottom-full left-4 right-4 mb-2 bg-dark-sidebar rounded-lg shadow-lg border border-dark-hover max-h-48 overflow-y-auto",children:st().map(Se=>c.jsx("button",{onClick:()=>Pt(Se),className:"w-full px-4 py-2 text-left hover:bg-dark-hover transition-colors flex items-center gap-2",children:Se.type==="special"||Se.type==="role"?c.jsxs("span",{className:"text-dark-text font-medium",children:["@",Se.displayName,Se.type==="role"&&c.jsx("span",{className:"ml-2 text-xs text-dark-muted",children:"(role)"})]}):c.jsxs(c.Fragment,{children:[Se.photoUrl?c.jsx("img",{src:Se.photoUrl,alt:Se.displayName,className:"w-8 h-8 rounded-full object-cover",onError:Fe=>{Fe.target.style.display="none",Fe.target.nextSibling.style.display="flex"}}):null,c.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold text-sm",style:{display:Se.photoUrl?"none":"flex"},children:Se.displayName[0].toUpperCase()}),c.jsxs("span",{className:"text-dark-text",children:["@",Se.displayName]})]})},Se.id))}),c.jsxs("form",{onSubmit:$n,className:"relative",children:[I&&c.jsx(nL,{onSelect:he,onClose:()=>O(!1)}),M.uploading&&c.jsxs("div",{className:"absolute -top-12 left-0 right-0 bg-dark-sidebar border border-dark-hover rounded-lg p-2 shadow-lg animate-fade-in-up z-50",children:[c.jsxs("div",{className:"flex items-center justify-between text-xs text-dark-text mb-1",children:[c.jsx("span",{className:"font-semibold",children:"Uploading Image..."}),c.jsxs("span",{className:"text-dark-muted",children:[Math.round(M.progress),"%  ",M.speed]})]}),c.jsx("div",{className:"h-1.5 bg-dark-hover rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-brand-primary transition-all duration-200 ease-out",style:{width:`${M.progress}%`}})})]}),ae&&c.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-dark-bg border border-dark-hover rounded-lg shadow-2xl max-w-lg w-full overflow-hidden flex flex-col p-4",children:[c.jsxs("h3",{className:"text-dark-text font-semibold mb-4 flex items-center gap-2",children:[c.jsx(Tm,{className:"text-brand-primary"}),"Upload Attachment"]}),c.jsx("div",{className:"flex-1 w-full bg-black/50 rounded-lg overflow-hidden flex items-center justify-center mb-4 border border-dark-hover min-h-[200px] max-h-[400px]",children:J?c.jsx("img",{src:J,alt:"Preview",className:"max-w-full max-h-full object-contain"}):c.jsxs("div",{className:"flex flex-col items-center gap-2 text-dark-muted",children:[c.jsx("div",{className:"text-6xl",children:""}),c.jsx("div",{className:"text-sm font-medium text-dark-text max-w-xs truncate px-4",children:ae.name}),c.jsxs("div",{className:"text-xs",children:[(ae.size/1024/1024).toFixed(2)," MB"]})]})}),c.jsx("input",{type:"text",value:Ee,onChange:Se=>Pe(Se.target.value),placeholder:"Add a caption... (optional)",className:"w-full bg-dark-input text-dark-text px-4 py-2 rounded-lg border border-dark-hover focus:border-brand-primary outline-none mb-4",onKeyDown:Se=>{Se.key==="Enter"&&!M.uploading&&Ie()}}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("button",{onClick:_e,className:"px-4 py-2 text-dark-text hover:text-dark-muted transition-colors font-medium",disabled:M.uploading,children:"Cancel"}),c.jsx("button",{onClick:Ie,className:"px-6 py-2 bg-brand-primary hover:bg-brand-secondary text-white rounded-md transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",disabled:M.uploading,children:M.uploading?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Uploading..."]}):c.jsxs(c.Fragment,{children:[c.jsx(yw,{size:18}),"Send"]})})]}),M.uploading&&c.jsxs("div",{className:"mt-4",children:[c.jsxs("div",{className:"flex justify-between text-xs text-dark-muted mb-1",children:[c.jsx("span",{children:M.speed}),c.jsxs("span",{children:[Math.round(M.progress),"%"]})]}),c.jsx("div",{className:"h-1 bg-dark-hover rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-brand-primary transition-all duration-200",style:{width:`${M.progress}%`}})})]})]})}),w&&c.jsxs("div",{className:"absolute bottom-full right-0 mb-4 w-[85vw] max-w-[400px] h-[450px] shadow-2xl rounded-lg z-50 animate-fade-in-up",children:[c.jsx("div",{className:"fixed inset-0 z-[-1]",onClick:()=>E(!1)}),c.jsx(sB,{onSelect:qe})]}),B&&c.jsxs("div",{className:"absolute bottom-full right-0 mb-4 w-[85vw] max-w-[400px] h-[450px] shadow-2xl rounded-lg z-50",children:[c.jsx("div",{className:"fixed inset-0 z-[-1]",onClick:()=>H(!1)}),c.jsx(nB,{onSelect:ee})]}),c.jsx("input",{ref:Ce,type:"text",value:p,onChange:Se=>y(Se.target.value),onKeyDown:Se=>{if(Se.key==="Tab"&&k){Se.preventDefault();const Fe=st();Fe.length>0&&Pt(Fe[0])}},onPaste:async Se=>{const Fe=Se.clipboardData.items;for(let lt=0;lt<Fe.length;lt++)for(let St=0;St<Fe.length;St++)if(Fe[St].kind==="file"){Se.preventDefault(),Oe(Fe[St].getAsFile());break}},placeholder:We?a?.isMuted?"You are muted":"Type a message...":ke,disabled:b||a?.isMuted||!We||ae!==null,className:`w-full bg-dark-input text-dark-text px-12 py-3 pr-48 rounded-lg
                     border border-transparent focus:border-brand-primary
                     outline-none transition-colors duration-200
                     placeholder:text-dark-muted
                     disabled:opacity-50 disabled:cursor-not-allowed select-text`}),$&&c.jsxs("div",{className:"fixed inset-0 z-[200] bg-brand-primary/90 flex flex-col items-center justify-center animate-fade-in pointer-events-none",children:[c.jsx("div",{className:"bg-white/10 p-8 rounded-full mb-6",children:c.jsx(vw,{size:64,className:"text-white animate-bounce"})}),c.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Drop your file here"}),c.jsx("p",{className:"text-white/80",children:"to upload instantly"})]}),c.jsxs("div",{className:"absolute left-3 top-0 bottom-0 flex items-center plus-menu-container",children:[" ",c.jsx("button",{type:"button",onClick:()=>P(!A),className:`text-dark-muted hover:text-brand-primary transition-colors flex items-center justify-center ${A?"text-brand-primary":""}`,title:"Add attachment",disabled:!We,children:c.jsx(vw,{size:26})}),A&&c.jsxs("div",{className:"absolute bottom-full left-0 mb-2 w-48 bg-dark-sidebar border border-dark-hover rounded-lg shadow-xl overflow-hidden z-50 animate-fade-in-up",children:[c.jsxs("button",{type:"button",onClick:()=>{fe.current?.click(),P(!1)},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-dark-hover text-left transition-colors",children:[c.jsx(Tm,{className:"text-green-400",size:20}),c.jsx("span",{className:"text-sm text-dark-text font-medium",children:"Upload File"})]}),c.jsxs("button",{type:"button",onClick:()=>{z(!0),P(!1)},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-dark-hover text-left transition-colors",disabled:!t,children:[c.jsx(b1,{className:"text-brand-primary",size:20}),c.jsx("span",{className:"text-sm text-dark-text font-medium",children:"Create Poll"})]})]})]}),c.jsx("input",{type:"file",ref:fe,onChange:Me,className:"hidden"}),c.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[c.jsx("button",{type:"button",onClick:()=>H(!B),className:`text-dark-muted hover:text-brand-primary
                        transition-colors border-2 border-current rounded px-1 text-[10px] font-bold h-6 flex items-center justify-center mr-1`,title:"Add GIF",children:"GIF"}),sc(a)&&c.jsx("button",{type:"button",onClick:()=>E(!w),className:`transition-colors ${w?"text-brand-primary":"text-dark-muted hover:text-brand-primary"}`,title:"Premium Stickers",children:c.jsx(t7,{size:24})}),c.jsx("button",{type:"button",onClick:()=>O(!I),className:`text-dark-muted hover:text-brand-primary
                       transition-colors`,title:"Add emoji",children:c.jsx(UT,{size:24})}),c.jsx("button",{type:"submit",disabled:!p.trim()||b||a?.isMuted||!We,className:`text-dark-muted hover:text-brand-primary
                       transition-colors disabled:opacity-50 disabled:cursor-not-allowed ml-1`,children:c.jsx(yw,{size:24})})]})]}),L&&c.jsx(iB,{onSubmit:ve,onClose:()=>z(!1)})]})},L6=({messages:t,users:e,onResultClick:n})=>{const[r,a]=C.useState(""),[o,u]=C.useState([]),[h,m]=C.useState(!1),p=b=>{if(a(b),!b.trim()){u([]);return}const x=t.filter(k=>k.text.toLowerCase().includes(b.toLowerCase())).slice(0,20);u(x)},y=b=>e.find(x=>x.id===b)||{displayName:"Unknown"};return h?c.jsxs("div",{className:"relative flex-1 max-w-md",children:[c.jsx("input",{type:"text",value:r,onChange:b=>p(b.target.value),placeholder:"Search messages...",autoFocus:!0,className:`w-full bg-dark-input text-dark-text px-4 py-2 pr-10 rounded-lg
                   border border-transparent focus:border-brand-primary
                   outline-none transition-colors placeholder:text-dark-muted`}),c.jsx("button",{onClick:()=>{m(!1),a(""),u([])},className:"absolute right-2 top-1/2 -translate-y-1/2 text-dark-muted hover:text-dark-text",children:c.jsx(Vn,{size:20})}),o.length>0&&c.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-dark-sidebar border border-dark-hover rounded-lg shadow-xl max-h-96 overflow-y-auto z-50",children:o.map(b=>c.jsxs("button",{onClick:()=>{n&&n(b),m(!1),a(""),u([])},className:"w-full px-4 py-3 text-left hover:bg-dark-hover transition-colors border-b border-dark-hover last:border-b-0",children:[c.jsx("div",{className:"text-xs text-brand-primary font-semibold mb-1",children:y(b.userId).displayName}),c.jsx("div",{className:"text-sm text-dark-text line-clamp-2",children:b.text})]},b.id))})]}):c.jsx("button",{onClick:()=>m(!0),className:"p-2 hover:bg-dark-hover rounded transition-colors",title:"Search messages",children:c.jsx(v1,{size:20,className:"text-dark-muted"})})},cB=({messages:t,users:e,onClose:n,onJumpToMessage:r})=>{const a=t.filter(u=>u.pinned),o=u=>e.find(h=>h.id===u)||{displayName:"Unknown"};return a.length===0?c.jsxs("div",{className:"w-80 bg-dark-sidebar border-l border-dark-hover h-full flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-hover",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(tc,{className:"text-blue-400",size:20}),c.jsx("h3",{className:"font-semibold text-dark-text",children:"Pinned Messages"})]}),c.jsx("button",{onClick:n,className:"text-dark-muted hover:text-dark-text transition-colors",children:c.jsx(Vn,{size:20})})]}),c.jsx("div",{className:"flex-1 flex items-center justify-center text-dark-muted text-sm",children:"No pinned messages"})]}):c.jsxs("div",{className:"w-80 bg-dark-sidebar border-l border-dark-hover h-full flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-hover",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(tc,{className:"text-blue-400",size:20}),c.jsx("h3",{className:"font-semibold text-dark-text",children:"Pinned Messages"}),c.jsxs("span",{className:"text-xs text-dark-muted",children:["(",a.length,")"]})]}),c.jsx("button",{onClick:n,className:"text-dark-muted hover:text-dark-text transition-colors",children:c.jsx(Vn,{size:20})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:a.map(u=>{const h=o(u.userId);return c.jsx("div",{onClick:()=>r(u.id),className:"bg-dark-bg p-3 rounded-lg cursor-pointer hover:bg-dark-hover transition-colors border border-transparent hover:border-brand-primary",children:c.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[h.photoUrl?c.jsx("img",{src:h.photoUrl,alt:h.displayName,className:"w-8 h-8 rounded-full object-cover",onError:m=>{m.target.style.display="none",m.target.nextSibling.style.display="flex"}}):null,c.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold text-sm",style:{display:h.photoUrl?"none":"flex"},children:h.displayName?.[0]?.toUpperCase()||"U"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-semibold text-dark-text text-sm",children:h.displayName}),c.jsx("span",{className:"text-xs text-dark-muted",children:up(u.timestamp)})]}),c.jsx("div",{className:"text-dark-text text-sm mt-1 line-clamp-3",children:c.jsx(t3,{children:u.text})}),u.pinnedBy&&c.jsxs("div",{className:"text-xs text-blue-400 mt-2 flex items-center gap-1",children:[c.jsx(tc,{size:12}),c.jsxs("span",{children:["Pinned by ",o(u.pinnedBy).displayName]})]})]})]})},u.id)})})]})},uB=({currentStatus:t,onStatusChange:e,onClose:n})=>{const[r,a]=C.useState(!1),[o,u]=C.useState(""),[h,m]=C.useState(""),p=x=>{e(x),n()},y=()=>{h.trim()&&(e({emoji:o,text:h.trim(),type:"custom"}),n())},b=()=>{e(null),n()};return c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-dark-sidebar rounded-lg p-6 w-96 max-w-full mx-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-dark-text",children:"Set Status"}),c.jsx("button",{onClick:n,className:"text-dark-muted hover:text-dark-text transition-colors",children:c.jsx(Vn,{size:24})})]}),r?c.jsx(c.Fragment,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm text-dark-muted mb-2 block",children:"Emoji"}),c.jsx("input",{type:"text",value:o,onChange:x=>u(x.target.value.slice(0,2)),className:"w-full bg-dark-input text-dark-text px-4 py-2 rounded-lg text-2xl text-center",placeholder:"",maxLength:2})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm text-dark-muted mb-2 block",children:"Status Text"}),c.jsx("input",{type:"text",value:h,onChange:x=>m(x.target.value),className:"w-full bg-dark-input text-dark-text px-4 py-2 rounded-lg",placeholder:"What's on your mind?",maxLength:50,autoFocus:!0}),c.jsxs("div",{className:"text-xs text-dark-muted mt-1 text-right",children:[h.length,"/50"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>a(!1),className:"flex-1 px-4 py-2 rounded-lg bg-dark-bg hover:bg-dark-hover transition-colors text-dark-text",children:"Back"}),c.jsx("button",{onClick:y,disabled:!h.trim(),className:"flex-1 px-4 py-2 rounded-lg bg-brand-primary hover:bg-brand-primary/80 transition-colors text-white font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Set Status"})]})]})}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"space-y-2 mb-4",children:yO.map(x=>c.jsxs("button",{onClick:()=>p(x),className:"w-full px-4 py-3 rounded-lg bg-dark-bg hover:bg-dark-hover transition-colors text-left flex items-center gap-3",children:[c.jsx("span",{className:"text-2xl",children:x.emoji}),c.jsx("span",{className:"text-dark-text",children:x.text})]},x.type))}),c.jsx("button",{onClick:()=>a(!0),className:"w-full px-4 py-3 rounded-lg bg-brand-primary hover:bg-brand-primary/80 transition-colors text-white font-medium",children:" Custom Status"}),t&&c.jsx("button",{onClick:b,className:"w-full mt-2 px-4 py-2 rounded-lg bg-dark-bg hover:bg-dark-hover transition-colors text-admin text-sm",children:"Clear Status"})]})]})})},dB=()=>{const t=[{name:"Screen Sharing",free:"",premium:"1080p 60fps"},{name:"Profile Badge",free:"",premium:""},{name:"Custom Backgrounds",free:"",premium:""},{name:"Upload Limit",free:"10MB",premium:"200MB"},{name:"GIF Avatar",free:"",premium:""},{name:"Animated Banner",free:"",premium:""},{name:"Profile Themes",free:"",premium:""},{name:"Exclusive Stickers",free:"",premium:""},{name:"Soundboard",free:"",premium:""}];return c.jsxs("div",{className:"bg-dark-sidebar/50 rounded-xl overflow-hidden border border-dark-hover",children:[c.jsxs("div",{className:"grid grid-cols-3 bg-dark-hover/50 p-4 text-sm font-bold text-dark-text uppercase tracking-wider",children:[c.jsx("div",{children:"Feature"}),c.jsx("div",{className:"text-center text-dark-muted",children:"Free"}),c.jsx("div",{className:"text-center text-brand-primary",children:"Premium"})]}),c.jsx("div",{className:"divide-y divide-dark-hover",children:t.map((e,n)=>c.jsxs("div",{className:"grid grid-cols-3 p-4 text-sm hover:bg-white/5 transition-colors",children:[c.jsx("div",{className:"font-medium text-dark-text",children:e.name}),c.jsx("div",{className:"text-center text-dark-muted",children:e.free}),c.jsx("div",{className:"text-center font-bold text-white",children:e.premium})]},n))})]})},hB=({question:t,answer:e})=>{const[n,r]=C.useState(!1);return c.jsxs("div",{className:"",children:[c.jsxs("button",{className:"w-full flex items-center justify-between p-5 text-left font-medium text-dark-text hover:text-white transition-colors",onClick:()=>r(!n),children:[c.jsx("span",{children:t}),c.jsx(WM,{className:`transform transition-transform duration-300 ${n?"rotate-180":""}`,size:20})]}),c.jsx("div",{className:`overflow-hidden transition-all duration-300 ${n?"max-h-40 opacity-100":"max-h-0 opacity-0"}`,children:c.jsx("p",{className:"text-sm text-dark-muted leading-relaxed px-5 pb-5 pt-0",children:e})})]})},fB=()=>{const{info:t}=Kr(),e=[{icon:Em,title:"HD Screen Sharing",description:"Share your screen in 1080p 60fps quality with friends.",color:"text-blue-400",bg:"bg-blue-400/10"},{icon:i7,title:"Exclusive Profile Badge",description:"Stand out with the shiny Premium badge on your profile.",color:"text-purple-400",bg:"bg-purple-400/10"},{icon:g7,title:"Custom Profile Backgrounds",description:"Personalize your profile with custom banner images.",color:"text-yellow-400",bg:"bg-yellow-400/10"},{icon:UT,title:"Exclusive Stickers",description:"Access a library of premium stickers and custom emojis.",color:"text-orange-400",bg:"bg-orange-400/10"},{icon:Cm,title:"Soundboard",description:"Play fun sound effects in voice channels.",color:"text-pink-400",bg:"bg-pink-400/10"},{icon:u7,title:"Priority Support",description:"Get faster responses for all your support tickets.",color:"text-green-400",bg:"bg-green-400/10"}],n=[{q:"Can I cancel anytime?",a:"Yes, you can cancel your subscription at any time from your account settings. Your benefits will continue until the end of the billing period."},{q:"Is payment secure?",a:"Absolutely. We use Stripe for payment processing, which is the industry standard for security. We never store your card details."},{q:"Do benefits apply to all servers?",a:"Yes! Your Premium benefits travel with you to any server you join on Lumo Chat."}];return c.jsxs("div",{className:"animate-fade-in pb-10",children:[c.jsx("style",{children:`
        @keyframes shine {
          0% { transform: translateX(-100%); }
          100% { transform: translateX(100%); }
        }
        @keyframes float {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-10px); }
        }
        .shine-effect::after {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          width: 50%;
          height: 100%;
          background: linear-gradient(to right, transparent, rgba(255,255,255,0.3), transparent);
          transform: skewX(-20deg) translateX(-150%);
          animation: shine 3s infinite;
        }
        .float-animation {
          animation: float 6s ease-in-out infinite;
        }
      `}),c.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-600 p-8 text-white shadow-2xl transform transition-all hover:scale-[1.005] mb-8",children:[c.jsx("div",{className:"absolute top-0 right-0 -mr-16 -mt-16 w-80 h-80 rounded-full bg-white/10 blur-3xl animate-pulse"}),c.jsx("div",{className:"absolute bottom-0 left-0 -ml-16 -mb-16 w-64 h-64 rounded-full bg-black/20 blur-3xl animate-pulse",style:{animationDelay:"1s"}}),c.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center gap-6",children:[c.jsx("div",{className:"float-animation p-5 bg-white/10 backdrop-blur-md rounded-full shadow-inner ring-4 ring-white/20 shrink-0",children:c.jsx(Fo,{size:56,className:"text-white drop-shadow-[0_0_15px_rgba(255,255,255,0.5)]"})}),c.jsxs("div",{className:"text-center md:text-left",children:[c.jsxs("h1",{className:"text-4xl font-extrabold tracking-tight mb-2 drop-shadow-md",children:["Release the ",c.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 to-orange-300",children:"Boost!"})]}),c.jsx("p",{className:"text-indigo-100 font-medium text-lg leading-relaxed max-w-2xl",children:"Unlock the full potential of Lumo Chat. Get special perks, enhanced quality, and support the development."})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-xl font-bold text-dark-text mb-6 flex items-center gap-2",children:[c.jsx("span",{className:"w-1 h-6 bg-brand-primary rounded-full box-shadow-glow"}),"Premium Perks"]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:e.map((r,a)=>c.jsxs("div",{className:"group relative overflow-hidden p-5 rounded-xl bg-dark-sidebar border border-dark-hover hover:border-brand-primary/50 transition-all duration-300 hover:shadow-xl hover:shadow-brand-primary/10 hover:-translate-y-1",style:{animationDelay:`${a*100}ms`},children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700 ease-in-out pointer-events-none"}),c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:`p-3 rounded-lg ${r.bg} group-hover:scale-110 transition-transform duration-300`,children:c.jsx(r.icon,{size:28,className:`${r.color} drop-shadow-sm`})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-dark-text mb-1 group-hover:text-white transition-colors text-lg",children:r.title}),c.jsx("p",{className:"text-sm text-dark-muted leading-relaxed group-hover:text-gray-300",children:r.description})]})]})]},a))})]}),c.jsxs("div",{className:"bg-dark-bg rounded-2xl p-1 border-2 border-brand-primary/30 group hover:border-brand-primary/60 transition-colors relative overflow-hidden shadow-2xl",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 opacity-20 group-hover:opacity-40 transition-opacity"}),c.jsxs("div",{className:"bg-dark-sidebar/90 backdrop-blur-xl rounded-xl p-8 flex flex-col sm:flex-row items-center justify-between gap-6 relative z-10",children:[c.jsxs("div",{children:[c.jsx("div",{className:"inline-block px-3 py-1 rounded-full bg-gradient-to-r from-indigo-500 to-pink-500 text-[10px] font-bold text-white uppercase tracking-widest mb-3 shadow-lg",children:"BEST VALUE"}),c.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:"Monthly"}),c.jsxs("p",{className:"text-dark-muted text-sm flex items-center gap-2",children:[c.jsx(Ho,{size:16,className:"text-green-500"})," Secure payment"]})]}),c.jsxs("div",{className:"flex flex-col items-center gap-4",children:[c.jsxs("div",{className:"text-4xl font-extrabold text-white",children:["$4.99",c.jsx("span",{className:"text-sm text-dark-muted font-normal ml-1",children:"/mo"})]}),c.jsx("button",{className:"relative overflow-hidden px-10 py-4 bg-gradient-to-r from-indigo-600 to-pink-600 hover:from-indigo-500 hover:to-pink-500 rounded-xl text-white font-bold shadow-lg transform transition-all hover:scale-105 active:scale-95 shine-effect whitespace-nowrap",onClick:()=>t("deme sistemi u anda bakmda."),children:c.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["Subscribe Now ",c.jsx(Fo,{})]})})]})]})]})]}),c.jsx("div",{className:"space-y-8",children:c.jsxs("div",{children:[c.jsxs("h2",{className:"text-xl font-bold text-dark-text mb-6 flex items-center gap-2",children:[c.jsx("span",{className:"w-1 h-6 bg-purple-500 rounded-full box-shadow-glow"}),"Why Go Premium?"]}),c.jsx(dB,{})]})})]}),c.jsxs("div",{className:"mt-12",children:[c.jsxs("h2",{className:"text-xl font-bold text-dark-text mb-6 flex items-center gap-2",children:[c.jsx("span",{className:"w-1 h-6 bg-gray-500 rounded-full"}),"Common Questions"]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map((r,a)=>c.jsx("div",{className:"bg-dark-sidebar rounded-xl border border-dark-hover overflow-hidden",children:c.jsx(hB,{question:r.q,answer:r.a})},a))})]})]})},V6=C.createContext(),z6=()=>{const t=C.useContext(V6);if(!t)throw new Error("useHotkeys must be used within HotkeyProvider");return t},mB=({children:t})=>{const[e,n]=C.useState(()=>{const u=localStorage.getItem("user_hotkeys");return u?JSON.parse(u):{toggleMute:"",toggleDeafen:""}});C.useEffect(()=>{localStorage.setItem("user_hotkeys",JSON.stringify(e))},[e]);const o={hotkeys:e,updateHotkey:(u,h)=>{n(m=>({...m,[u]:h}))},resetToDefaults:()=>{n({toggleMute:"",toggleDeafen:""})}};return c.jsx(V6.Provider,{value:o,children:t})},HS=({label:t,currentValue:e,onChange:n})=>{const[r,a]=C.useState(!1),[o,u]=C.useState(new Set),h=C.useRef(null);C.useEffect(()=>{if(!r)return;const p=b=>{b.preventDefault(),b.stopPropagation();const x=b.key;u(k=>{const j=new Set(k);return j.add(x),j})},y=b=>{r&&(b.preventDefault(),b.stopPropagation())};return window.addEventListener("keydown",p),window.addEventListener("keyup",y),()=>{window.removeEventListener("keydown",p),window.removeEventListener("keyup",y)}},[r]);const m=()=>{a(!0),u(new Set)};return C.useEffect(()=>{if(!r)return;const p=y=>{if(y.preventDefault(),y.stopPropagation(),y.key==="Escape"){a(!1);return}if(["Control","Shift","Alt","Meta"].includes(y.key))return;const x=[];y.ctrlKey&&x.push("Control"),y.shiftKey&&x.push("Shift"),y.altKey&&x.push("Alt"),y.metaKey&&x.push("Meta");let k=y.key;k.length===1&&(k=k.toUpperCase()),x.push(k);const j=x.join("+");n(j),a(!1)};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[r,n]),c.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-sidebar rounded-lg border border-dark-hover",children:[c.jsx("span",{className:"text-dark-text font-medium",children:t}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{ref:h,onClick:m,className:`
               min-w-[120px] px-4 py-2 rounded-lg font-mono text-sm border transition-colors
               ${r?"bg-brand-primary text-white border-brand-primary animate-pulse":"bg-dark-input text-dark-text border-dark-hover hover:border-dark-muted"}
             `,children:r?"Press Keys...":e||"No Keybind"}),e&&c.jsx("button",{onClick:()=>n(""),className:"p-2 text-dark-muted hover:text-red-400 transition-colors",title:"Clear Keybind",children:c.jsx(Vn,{size:20})})]})]})},pB=({currentUser:t})=>{const[e,n]=C.useState(!1),[r,a]=C.useState(null),[o,u]=C.useState(null),h="https://lumobuild.vercel.app/api/sso-token",m=async()=>{n(!0),a(null),u(null);try{if(!t)throw new Error("No user logged in");console.log(" Testing SSO Backend..."),console.log("User:",t.email);const p=await t.getIdToken();console.log(" Google ID Token obtained"),console.log(" Sending request to:",h);const y=await fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({googleIdToken:p,email:t.email})});console.log(" Response status:",y.status);const b=await y.json();if(console.log(" Response data:",b),b.success)a({success:!0,customToken:b.customToken,user:b.user,googleIdToken:p});else throw new Error(b.message||b.error||"Unknown error")}catch(p){console.error(" Test failed:",p),u(p.message)}finally{n(!1)}};return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-dark-muted text-sm mb-3",children:"Test the SSO backend to verify it's working correctly."}),c.jsx(ot,{onClick:m,disabled:!t||e,variant:"primary",children:e?c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Testing..."]}):" Test SSO Backend"})]}),r&&c.jsxs("div",{className:"bg-green-900/20 border border-green-500 rounded-lg p-4",children:[c.jsx("h4",{className:"text-green-500 font-semibold mb-3",children:" Backend Working!"}),c.jsxs("div",{className:"space-y-3 text-sm",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-dark-muted mb-1",children:"User Info:"}),c.jsx("pre",{className:"bg-dark-sidebar p-3 rounded text-xs text-dark-text overflow-x-auto",children:JSON.stringify(r.user,null,2)})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-dark-muted mb-1",children:"Custom Token:"}),c.jsxs("pre",{className:"bg-dark-sidebar p-3 rounded text-xs text-dark-text overflow-x-auto break-all",children:[r.customToken.substring(0,100),"..."]})]}),c.jsxs("div",{className:"mt-4 pt-4 border-t border-green-500/30",children:[c.jsx("p",{className:"text-dark-muted mb-2",children:" SSO Test URL (for MeydanApp testing):"}),c.jsxs("div",{className:"bg-dark-sidebar p-3 rounded text-xs",children:[c.jsx("p",{className:"text-dark-text font-mono break-all mb-2",children:`${window.location.origin}/?sso_token=${r.googleIdToken}`}),c.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/?sso_token=${r.googleIdToken}`),alert("SSO URL copied to clipboard!")},className:"text-green-500 hover:text-green-400 text-xs underline",children:" Copy URL"})]})]})]})]}),o&&c.jsxs("div",{className:"bg-red-900/20 border border-red-500 rounded-lg p-4",children:[c.jsx("h4",{className:"text-red-500 font-semibold mb-2",children:" Test Failed"}),c.jsx("p",{className:"text-dark-text text-sm mb-3",children:o}),c.jsxs("div",{className:"bg-red-900/30 p-3 rounded text-xs text-dark-muted",children:[c.jsx("p",{className:"font-medium mb-1",children:"Possible issues:"}),c.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[c.jsx("li",{children:"Environment variables not set in Vercel"}),c.jsx("li",{children:"Backend not deployed"}),c.jsx("li",{children:"CORS configuration issue"})]})]})]}),c.jsxs("div",{className:"bg-dark-sidebar rounded p-3 text-xs",children:[c.jsx("p",{className:"text-dark-muted mb-1",children:"API Endpoint:"}),c.jsx("p",{className:"text-dark-text font-mono break-all",children:h})]})]})},gB=[{id:"premium",label:"Premium",icon:Fo,category:"User Settings"},{id:"account",label:"My Account",icon:p7,category:"User Settings"},{id:"keybinds",label:"Keybinds",icon:JM,category:"App Settings"},{id:"security",label:"Privacy & Security",icon:ZM,category:"User Settings"},{id:"about",label:"About",icon:Sm,category:"App Settings"},{id:"debug",label:" Debug",icon:Sm,category:"Developer"}],vB=({isOpen:t,onClose:e})=>{const{currentUser:n,userProfile:r}=yn(),{success:a,error:o,info:u}=Kr(),[h,m]=C.useState("account"),[p,y]=C.useState(r?.photoUrl||""),[b,x]=C.useState(r?.bannerUrl||""),[k,j]=C.useState(r?.themeColor||"#6366f1"),[R,N]=C.useState(r?.bio||""),[U,F]=C.useState(!1),[I,O]=C.useState(!1),[B,H]=C.useState({progress:0,speed:""}),[w,E]=C.useState(!1),[A,P]=C.useState({progress:0,speed:""}),L=C.useRef(null),z=C.useRef(null),[M,se]=C.useState(!1),[ae,G]=C.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[J,W]=C.useState(!1),{hotkeys:Ee,updateHotkey:Pe,resetToDefaults:$}=z6(),X=sc(r);C.useEffect(()=>{y(r?.photoUrl||""),x(r?.bannerUrl||""),j(r?.themeColor||"#6366f1"),N(r?.bio||"")},[r]),C.useEffect(()=>{const ee=qe=>{qe.key==="Escape"&&t&&e()};return t&&(document.addEventListener("keydown",ee),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",ee),document.body.style.overflow="unset"}},[t,e]);const oe=async ee=>{if(!(!ee||!n)){if(!ee.type.startsWith("image/")){o("Please select an image file");return}if(ee.type==="image/gif"&&!X){o("Animated GIF avatars are for Premium members only!");return}if(ee.size>10*1024*1024){o("Image size must be less than 10MB");return}O(!0);try{const qe=await vd(ee,(ve,Oe)=>{H({progress:ve,speed:Oe})});await it(Ae(de,"users",n.uid),{photoUrl:qe}),y(qe),a("Profile photo updated successfully!")}catch(qe){console.error("Error uploading photo:",qe),o("Failed to upload photo")}finally{O(!1),H({progress:0,speed:""}),L.current&&(L.current.value="")}}},fe=async ee=>{if(!(!ee||!n)){if(!X){u("Custom banners are a Premium feature. Upgrade to unlock!");return}if(!ee.type.startsWith("image/")){o("Please select an image file");return}if(ee.size>10*1024*1024){o("Image size must be less than 10MB");return}E(!0);try{const qe=await vd(ee,(ve,Oe)=>{P({progress:ve,speed:Oe})});await it(Ae(de,"users",n.uid),{bannerUrl:qe}),x(qe),a("Banner updated successfully!")}catch(qe){console.error("Error uploading banner:",qe),o("Failed to upload banner")}finally{E(!1),P({progress:0,speed:""}),z.current&&(z.current.value="")}}},Ce=async ee=>{const qe=ee.target.value;j(qe)},Ue=async()=>{if(n){if(!X){u("Custom themes are a Premium feature!"),j(r?.themeColor||"#6366f1");return}F(!0);try{await it(Ae(de,"users",n.uid),{themeColor:k}),a("Appearance updated!")}catch(ee){console.error("Error updating appearance:",ee),o("Failed to update appearance")}finally{F(!1)}}},re=async()=>{if(n){F(!0);try{await it(Ae(de,"users",n.uid),{bio:R.trim()}),a("Bio updated successfully")}catch(ee){console.error("Error updating bio:",ee),o("Failed to update bio")}finally{F(!1)}}},Le=async()=>{if(!(!n||!n.email)){if(!ae.currentPassword||!ae.newPassword||!ae.confirmPassword){o("Please fill in all password fields");return}if(ae.newPassword.length<6){o("New password must be at least 6 characters");return}if(ae.newPassword!==ae.confirmPassword){o("New passwords do not match");return}W(!0);try{const ee=Yo.credential(n.email,ae.currentPassword);await mj(n,ee),await bj(n,ae.newPassword),a("Password changed successfully"),G({currentPassword:"",newPassword:"",confirmPassword:""})}catch(ee){console.error("Error changing password:",ee),ee.code==="auth/wrong-password"?o("Current password is incorrect"):ee.code==="auth/weak-password"?o("New password is too weak"):o("Failed to change password")}finally{W(!1)}}},Re=async ee=>{if(n)try{await it(Ae(de,"users",n.uid),{status:ee}),a(ee?"Status updated":"Status cleared")}catch(qe){console.error("Error updating status:",qe),o("Failed to update status")}},We=async ee=>{if(n)try{await it(Ae(de,"users",n.uid),{presence:ee}),a(`Status set to ${ee}`)}catch{o("Failed to update status")}};if(!t)return null;const ke=gB.reduce((ee,qe)=>(ee[qe.category]||(ee[qe.category]=[]),ee[qe.category].push(qe),ee),{}),he=()=>{switch(h){case"premium":return c.jsx(fB,{});case"account":return c.jsxs("div",{className:"space-y-8",children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"My Account"}),c.jsxs("div",{className:"rounded-lg overflow-hidden border border-dark-hover relative min-h-[300px]",style:{borderColor:k},children:[c.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-colors",style:{backgroundColor:k,backgroundImage:b?`url(${b})`:`linear-gradient(to bottom right, ${k}, #000)`}}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent"}),b?.endsWith(".gif")&&c.jsx("div",{className:"absolute top-2 right-2 px-2 py-1 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm font-bold z-10",children:"GIF"}),c.jsxs("div",{className:"relative z-10 p-6 flex flex-col items-center justify-end h-full min-h-[300px] text-center mt-auto",children:[c.jsxs("div",{className:"relative group mb-4",children:[p?c.jsx("img",{src:p,alt:"Profile",className:"w-28 h-28 rounded-full object-cover border-4",style:{borderColor:k},onError:ee=>{ee.target.style.display="none",ee.target.nextSibling.style.display="flex"}},p):null,c.jsx("div",{className:"w-28 h-28 rounded-full flex items-center justify-center text-white font-bold text-4xl border-4",style:{display:p?"none":"flex",backgroundColor:k,borderColor:k},children:r?.displayName?.[0]?.toUpperCase()||"U"}),c.jsx("div",{className:"absolute inset-0 rounded-full bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer border-4 border-transparent",onClick:()=>L.current?.click(),children:c.jsx(Tm,{className:"text-white",size:32})})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center justify-center gap-2 shadow-black drop-shadow-md",children:[r?.displayName,X&&c.jsx(Fo,{className:"text-brand-primary",title:"Premium Member"})]}),c.jsx("p",{className:"text-gray-200 text-sm font-medium shadow-black drop-shadow-md",children:n?.email}),c.jsx("div",{className:"flex justify-center gap-2 mt-3",children:c.jsx("span",{className:"text-xs px-3 py-1 rounded-full bg-black/40 backdrop-blur-md border border-white/20 text-white capitalize font-medium",children:r?.role||"member"})})]})]})]}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Profile Photo"}),c.jsx("input",{type:"file",ref:L,onChange:ee=>oe(ee.target.files?.[0]),accept:"image/*",className:"hidden"}),c.jsx("div",{className:"flex gap-3 mb-4",children:c.jsx("button",{onClick:()=>L.current?.click(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-dark-sidebar hover:bg-dark-hover border border-dark-hover text-dark-text rounded-lg transition-colors disabled:opacity-50",disabled:I,children:I?c.jsxs("span",{className:"text-sm",children:["Uploading ",Math.round(B.progress),"%..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Uv,{size:20}),"Upload New Photo"]})})})]}),c.jsxs("div",{className:`rounded-lg p-4 relative ${X?"bg-dark-bg":"bg-dark-bg/50"}`,children:[!X&&c.jsxs("div",{className:"absolute inset-0 z-10 bg-black/60 backdrop-blur-[1px] rounded-lg flex flex-col items-center justify-center text-center p-4",children:[c.jsx(Fo,{size:32,className:"text-brand-primary mb-2 animate-bounce"}),c.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:"Unlock Profile Appearance"}),c.jsx("p",{className:"text-sm text-dark-muted mb-4 max-w-xs",children:"Customize your banner, theme colors, and use animated GIFs with Premium."}),c.jsx(ot,{variant:"primary",onClick:()=>m("premium"),children:"View Premium Plans"})]}),c.jsxs("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-6 flex items-center gap-2",children:[c.jsx(r7,{})," Profile Appearance ",c.jsx("span",{className:"text-xs normal-case px-2 py-0.5 bg-brand-primary/20 text-brand-primary rounded",children:"Premium"})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-sm font-medium text-dark-text mb-2",children:"Profile Banner"}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("input",{type:"file",ref:z,onChange:ee=>fe(ee.target.files?.[0]),accept:"image/*",className:"hidden"}),c.jsx("button",{onClick:()=>z.current?.click(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-8 border-2 border-dashed border-dark-hover hover:border-brand-primary rounded-lg text-dark-muted hover:text-brand-primary transition-colors disabled:opacity-50",disabled:w,children:w?c.jsxs("span",{children:["Uploading ",Math.round(A.progress),"%..."]}):c.jsxs("div",{className:"text-center",children:[c.jsx(Tm,{size:24,className:"mx-auto mb-1"}),c.jsx("div",{children:"Upload Banner Image"}),c.jsx("div",{className:"text-xs opacity-70",children:"JPG, PNG, GIF"})]})}),b&&c.jsxs("div",{className:"w-32 h-24 rounded-lg overflow-hidden relative group shrink-0",children:[c.jsx("img",{src:b,className:"w-full h-full object-cover"}),c.jsx("button",{onClick:()=>{x(""),it(Ae(de,"users",n.uid),{bannerUrl:""})},className:"absolute inset-0 bg-black/60 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity text-red-500 font-bold",children:"Remove"})]})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-sm font-medium text-dark-text mb-2",children:"Theme Color"}),c.jsxs("div",{className:"flex gap-4 items-center",children:[c.jsx("input",{type:"color",value:k,onChange:Ce,className:"w-16 h-16 rounded-lg cursor-pointer bg-transparent border-0 p-0"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-dark-text font-mono bg-dark-input px-3 py-1 rounded border border-dark-hover",children:k}),c.jsx("div",{className:"text-xs text-dark-muted mt-1",children:"Select a color to accent your profile."})]}),c.jsx("div",{className:"flex-1 text-right",children:c.jsx(ot,{onClick:Ue,disabled:k===r?.themeColor,children:"Save Color"})})]})]})]}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Online Status"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[{key:"online",label:"Online",color:"bg-green-500",desc:"Visible"},{key:"idle",label:"Idle",color:"bg-yellow-500",desc:"Away"},{key:"dnd",label:"Do Not Disturb",color:"bg-red-500",desc:"No notifications"},{key:"invisible",label:"Invisible",color:"bg-gray-500",desc:"Hidden"}].map(ee=>c.jsxs("button",{onClick:()=>We(ee.key),className:`p-3 rounded-lg border transition-all text-left flex items-center gap-3 ${r?.presence===ee.key||!r?.presence&&ee.key==="online"?"border-brand-primary bg-brand-primary/10":"border-dark-hover hover:border-dark-muted bg-dark-sidebar"}`,children:[c.jsx("span",{className:`w-3 h-3 rounded-full ${ee.color}`}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-medium text-dark-text",children:ee.label}),c.jsx("div",{className:"text-[10px] text-dark-muted",children:ee.desc})]})]},ee.key))})]}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Custom Status"}),r?.status?c.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-sidebar rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-2xl",children:r.status.emoji}),c.jsx("span",{className:"text-dark-text",children:r.status.text})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(ot,{variant:"secondary",onClick:()=>se(!0),children:"Edit"}),c.jsx(ot,{variant:"danger",onClick:()=>Re(null),children:"Clear"})]})]}):c.jsxs("div",{className:"text-center py-4 border border-dashed border-dark-hover rounded-lg",children:[c.jsx("p",{className:"text-dark-muted text-sm mb-3",children:"No custom status set"}),c.jsx(ot,{variant:"primary",size:"sm",onClick:()=>se(!0),children:"Set a Status"})]})]}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"About Me"}),c.jsx("textarea",{placeholder:"Tell others about yourself...",value:R,onChange:ee=>N(ee.target.value),maxLength:190,rows:4,className:`w-full bg-dark-input text-dark-text px-4 py-3 rounded-lg
                           border border-transparent focus:border-brand-primary
                           outline-none transition-colors duration-200
                           placeholder:text-dark-muted resize-none`}),c.jsxs("div",{className:"flex justify-between items-center mt-2",children:[c.jsxs("span",{className:"text-xs text-dark-muted",children:[R.length,"/190"]}),c.jsx(ot,{variant:"primary",onClick:re,disabled:U||R===r?.bio,children:U?"Updating...":"Save"})]})]}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Account Info"}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"flex justify-between items-center py-2 border-b border-dark-hover",children:c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-dark-muted uppercase",children:"Display Name"}),c.jsx("div",{className:"text-dark-text font-medium",children:r?.displayName})]})}),c.jsx("div",{className:"flex justify-between items-center py-2 border-b border-dark-hover",children:c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-dark-muted uppercase",children:"Email"}),c.jsx("div",{className:"text-dark-text font-medium",children:n?.email})]})}),c.jsx("div",{className:"flex justify-between items-center py-2",children:c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-dark-muted uppercase",children:"Role"}),c.jsx("div",{className:"text-dark-text font-medium capitalize",children:r?.role||"member"})]})})]})]})]});case"keybinds":return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Keybinds"}),c.jsx(ot,{variant:"secondary",size:"sm",onClick:$,children:"Reset Defaults"})]}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4 space-y-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-2",children:"Voice & Video"}),c.jsx(HS,{label:"Toggle Mute",currentValue:Ee.toggleMute,onChange:ee=>Pe("toggleMute",ee)}),c.jsx(HS,{label:"Toggle Deafen",currentValue:Ee.toggleDeafen,onChange:ee=>Pe("toggleDeafen",ee)}),c.jsx("p",{className:"text-xs text-dark-muted mt-4",children:"Keybinds are active while the application window is focused."})]})]});case"security":return c.jsxs("div",{className:"space-y-8",children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Privacy & Security"}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Change Password"}),c.jsxs("div",{className:"space-y-4 max-w-md",children:[c.jsx(En,{label:"Current Password",type:"password",placeholder:"Enter current password",value:ae.currentPassword,onChange:ee=>G({...ae,currentPassword:ee.target.value})}),c.jsx(En,{label:"New Password",type:"password",placeholder:"Enter new password (min 6 characters)",value:ae.newPassword,onChange:ee=>G({...ae,newPassword:ee.target.value})}),c.jsx(En,{label:"Confirm New Password",type:"password",placeholder:"Confirm new password",value:ae.confirmPassword,onChange:ee=>G({...ae,confirmPassword:ee.target.value})}),c.jsx(ot,{variant:"primary",onClick:Le,disabled:J||!ae.currentPassword||!ae.newPassword||!ae.confirmPassword,children:J?"Changing Password...":"Change Password"})]})]})]});case"about":return c.jsxs("div",{className:"space-y-8",children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"About"}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-6",children:[c.jsx("h2",{className:"text-xl font-bold text-dark-text mb-2",children:"Lumo Chat"}),c.jsxs("div",{className:"space-y-4 text-dark-muted text-sm",children:[c.jsx("p",{children:"A modern real-time chat application built for seamless communication."}),c.jsxs("div",{children:[c.jsx("div",{className:"font-semibold text-dark-text",children:"Version"}),c.jsx("div",{children:"2.0.0.1"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"font-semibold text-dark-text",children:"Developer"}),c.jsx("div",{children:"Dazlakss"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"font-semibold text-dark-text",children:"Tech Stack"}),c.jsx("div",{children:"React, Firebase, TailwindCSS, Electron"})]})]})]}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Acknowledgments"}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"flex items-center gap-4 p-3 bg-dark-sidebar rounded-lg border border-dark-hover",children:c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"text-dark-text font-medium",children:"GIPHY"}),c.jsx("div",{className:"text-xs text-dark-muted",children:"We use GIPHY for finding and sharing GIFs."}),c.jsx("a",{href:"https://giphy.com",target:"_blank",rel:"noopener noreferrer",className:"mt-2 text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500 block w-fit hover:opacity-80 transition-opacity",children:"Powered by GIPHY"})]})}),c.jsx("div",{className:"flex items-center gap-4 p-3 bg-dark-sidebar rounded-lg border border-dark-hover",children:c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"text-dark-text font-medium",children:"Cloudinary"}),c.jsx("div",{className:"text-xs text-dark-muted",children:"Robust cloud storage and delivery for images and files."}),c.jsx("a",{href:"https://cloudinary.com",target:"_blank",rel:"noopener noreferrer",className:"mt-2 text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-sky-400 block w-fit hover:opacity-80 transition-opacity",children:"Powered by Cloudinary"})]})}),c.jsx("div",{className:"flex items-center gap-4 p-3 bg-dark-sidebar rounded-lg border border-dark-hover",children:c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"text-dark-text font-medium",children:"ImgBB"}),c.jsx("div",{className:"text-xs text-dark-muted",children:"Simple and fast image hosting service."}),c.jsx("a",{href:"https://imgbb.com",target:"_blank",rel:"noopener noreferrer",className:"mt-2 text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-gray-200 to-gray-400 block w-fit hover:opacity-80 transition-opacity",children:"Powered by ImgBB"})]})})]})]})]});case"debug":return c.jsxs("div",{className:"space-y-8",children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:" Debug Tools"}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-dark-text mb-4",children:"SSO Backend Test"}),c.jsx(pB,{currentUser:n})]})]});default:return null}};return c.jsxs("div",{className:"fixed inset-0 bg-black/80 z-50 flex flex-col md:flex-row pt-safe-top md:pt-0",role:"dialog","aria-modal":"true",children:[c.jsx("div",{className:"w-full md:w-56 bg-dark-sidebar flex flex-col shrink-0 border-b md:border-b-0 md:border-r border-dark-hover",children:c.jsx("div",{className:"flex md:flex-col overflow-x-auto md:overflow-y-auto py-2 md:py-4 px-2 gap-2 md:gap-0 no-scrollbar",children:Object.entries(ke).map(([ee,qe])=>c.jsxs("div",{className:"mb-0 md:mb-4 flex md:block gap-2 md:gap-0 shrink-0",children:[c.jsx("div",{className:"hidden md:block px-3 py-2 text-xs font-semibold text-dark-muted uppercase tracking-wide",children:ee}),qe.map(ve=>{const Oe=ve.icon;return c.jsxs("button",{onClick:()=>m(ve.id),className:`whitespace-nowrap flex items-center gap-2 md:gap-3 px-3 py-2 rounded-md text-left transition-colors ${h===ve.id?"bg-dark-hover text-dark-text":"text-dark-muted hover:text-dark-text hover:bg-dark-hover/50"}`,children:[c.jsx(Oe,{size:18}),c.jsx("span",{className:"text-sm",children:ve.label})]},ve.id)})]},ee))})}),c.jsxs("div",{className:"flex-1 flex flex-col bg-dark-bg overflow-hidden min-w-0",children:[c.jsx("div",{className:"flex justify-end p-4 shrink-0",children:c.jsx("button",{onClick:e,className:"p-2 hover:bg-dark-hover rounded-full transition-colors group",title:"Close",children:c.jsx(Vn,{size:24,className:"text-dark-muted group-hover:text-dark-text"})})}),c.jsx("div",{className:"flex-1 overflow-y-auto px-4 md:px-10 pb-10",children:c.jsx("div",{className:h==="premium"?"w-full":"max-w-2xl mx-auto md:mx-0",children:he()})})]}),M&&c.jsx(uB,{currentStatus:r?.status,onStatusChange:Re,onClose:()=>se(!1)})]})},yB=()=>{const[t,e]=C.useState([]),{channels:n}=Za();C.useEffect(()=>{const a=qr(wt(de,"adminLogs"),ym("timestamp","desc"),Pv(100));return vr(a,u=>{const h=[];u.forEach(m=>{h.push({id:m.id,...m.data()})}),e(h)})},[]);const r=a=>{const o=n.find(u=>u.id===a);return o?`#${o.name}`:"Unknown Channel"};return c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold text-dark-text mb-6",children:"Admin Logs"}),c.jsx("div",{className:"space-y-3 max-h-[520px] overflow-y-auto pr-2",children:t.length===0?c.jsx("div",{className:"text-center text-dark-muted py-8",children:"No logs yet"}):t.map(a=>c.jsxs("div",{className:"bg-dark-bg p-5 rounded-xl hover:bg-dark-hover transition-colors",children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsx("div",{className:"flex items-center gap-2",children:a.type==="message_delete"?c.jsxs(c.Fragment,{children:[c.jsx(Vi,{className:"text-admin",size:20}),c.jsx("span",{className:"font-semibold text-dark-text",children:"Message Deleted"})]}):a.type==="message_edit"?c.jsxs(c.Fragment,{children:[c.jsx(nc,{className:"text-blue-400",size:20}),c.jsx("span",{className:"font-semibold text-dark-text",children:"Message Edited"})]}):c.jsx("span",{className:"font-semibold text-dark-text",children:a.type})}),c.jsx("span",{className:"text-xs text-dark-muted",children:a.timestamp&&up(a.timestamp)})]}),c.jsxs("div",{className:"space-y-1 text-sm",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx("span",{className:"text-dark-muted",children:"Channel:"}),c.jsx("span",{className:"text-dark-text font-medium",children:r(a.channelId)})]}),a.type==="message_delete"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx("span",{className:"text-dark-muted",children:"Original Author:"}),c.jsx("span",{className:"text-dark-text",children:a.originalAuthorName||a.originalUserName||"Unknown"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("span",{className:"text-dark-muted",children:"Message:"}),c.jsxs("span",{className:"text-dark-text italic",children:['"',a.messageText||a.deletedText||"(empty message)",'"']})]})]}),a.type==="message_edit"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx("span",{className:"text-dark-muted",children:"Before:"}),c.jsxs("span",{className:"text-dark-text italic",children:['"',a.originalText,'"']})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("span",{className:"text-dark-muted",children:"After:"}),c.jsxs("span",{className:"text-blue-400 italic",children:['"',a.newText,'"']})]})]})]})]},a.id))})]})},bB=[{id:"users",label:"Users",icon:y1,category:"Moderation"},{id:"roles",label:"Roles",icon:VT,category:"Moderation"},{id:"channels",label:"Channels",icon:hp,category:"Server Settings"},{id:"server",label:"Overview",icon:Sm,category:"Server Settings"},{id:"logs",label:"Audit Log",icon:PM,category:"Server Settings"},{id:"notifications",label:"Notifications",icon:f7,category:"Maintenance"},{id:"cleanup",label:"Cleanup",icon:s7,category:"Maintenance"}],xB=({isOpen:t,onClose:e})=>{const{userProfile:n}=yn(),{users:r,channels:a,server:o,currentServer:u}=Za(),[h,m]=C.useState("users"),[p,y]=C.useState(null),[b,x]=C.useState(""),[k,j]=C.useState(""),[R,N]=C.useState("text"),[U,F]=C.useState(null),[I,O]=C.useState([]),[B,H]=C.useState(null),[w,E]=C.useState({name:"",color:"#5865f2"}),[A,P]=C.useState(null),[L,z]=C.useState(null),{success:M,error:se}=Kr(),[ae,G]=C.useState(0),[J,W]=C.useState(!1),[Ee,Pe]=C.useState(null);C.useEffect(()=>{const K=ue=>{ue.key==="Escape"&&t&&e()};return t&&(document.addEventListener("keydown",K),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",K),document.body.style.overflow="unset"}},[t,e]),C.useEffect(()=>{if(!u||u==="home")return;const K=qr(wt(de,"servers",u,"roles"));return vr(K,je=>{const me=[];je.forEach(Ne=>{me.push({id:Ne.id,...Ne.data()})}),O(me)})},[u]),C.useEffect(()=>{if(h!=="cleanup")return;(async()=>{try{const ue=await Qa(wt(de,"inviteCodes")),je=new Date;let me=0;ue.forEach(Ne=>{const _e=Ne.data(),Ie=_e.expiresAt?.toDate()<je,st=!_e.isActive||_e.uses>=_e.maxUses;(Ie||st)&&me++}),G(me)}catch(ue){console.error("Error fetching cleanup stats:",ue)}})()},[h]);const $=async()=>{W(!0);try{const K=await Qa(wt(de,"inviteCodes")),ue=new Date,je=ow(de);let me=0;K.forEach(Ne=>{const _e=Ne.data(),Ie=_e.expiresAt?.toDate()<ue,st=!_e.isActive||_e.uses>=_e.maxUses;(Ie||st)&&(je.delete(Ae(de,"inviteCodes",Ne.id)),me++)}),me>0?(await je.commit(),M(`${me} expired invite code(s) deleted`),G(0)):M("No expired invite codes to delete")}catch(K){console.error("Error cleaning invite codes:",K),se("Failed to clean invite codes")}finally{W(!1),Pe(null)}};if(!t||n?.role!=="admin")return null;const X=async(K,ue)=>{try{await it(Ae(de,"users",K),{role:ue}),u&&await it(Ae(de,"servers",u,"members",K),{role:ue}),M(`Role updated to ${ue}`),y(null)}catch(je){console.error("Error updating user role:",je),se(`Failed to update role: ${je.message}`)}},oe=async(K,ue)=>{try{await it(Ae(de,"users",K),{isMuted:!ue})}catch(je){console.error("Error toggling mute:",je)}},fe=async(K,ue)=>{try{await it(Ae(de,"users",K),{isBanned:!ue})}catch(je){console.error("Error toggling ban:",je)}},Ce=async()=>{if(!(!b.trim()||!u))try{await Fn(wt(de,"servers",u,"channels"),{name:b.trim(),type:R,description:R==="text"?k.trim():"",position:a.length,createdAt:mt()}),x(""),j(""),N("text"),M(`${R==="voice"?"Sesli":"Yaz"} kanal oluturuldu!`)}catch(K){console.error("Error creating channel:",K),se("Kanal oluturulamad")}},Ue=async(K,ue)=>{try{await it(Ae(de,"servers",u,"channels",K),ue),F(null)}catch(je){console.error("Error updating channel:",je)}},re=async()=>{if(!(!L?.data||!u))try{await Yr(Ae(de,"servers",u,"channels",L.data))}catch(K){console.error("Error deleting channel:",K)}},Le=async(K,ue)=>{if(u)try{await it(Ae(de,"servers",u,"channels",K),{locked:!ue})}catch(je){console.error("Error toggling channel lock:",je)}},Re=async()=>{if(w.name.trim())try{const K=I.reduce((ue,je)=>Math.max(ue,je.position||0),0);u&&await Fn(wt(de,"servers",u,"roles"),{name:w.name.trim(),color:w.color,position:K+1,createdAt:mt()}),E({name:"",color:"#5865f2"})}catch(K){console.error("Error creating role:",K)}},We=async(K,ue)=>{if(u)try{await it(Ae(de,"servers",u,"roles",K),ue),H(null)}catch(je){console.error("Error updating role:",je)}},ke=async()=>{if(!L?.data)return;const K=L.data;try{const ue=I.find(_e=>_e.id===K);if(!ue)return;const je=ue.name,me=ow(de),Ne=r.filter(_e=>(_e.serverRole||_e.role)===je);if(Ne.forEach(_e=>{if(_e.role===je){const Ie=Ae(de,"users",_e.id);me.update(Ie,{role:"member"})}if(u){const Ie=Ae(de,"servers",u,"members",_e.id);me.update(Ie,{role:"member"})}}),u){const _e=Ae(de,"servers",u,"roles",K);me.delete(_e),await me.commit(),M(`Role '${je}' deleted and ${Ne.length} users reassigned to Member`)}}catch(ue){console.error("Error deleting role:",ue),se(`Failed to delete role: ${ue.message}`)}},he=[{id:"admin",name:"admin",color:"#f23f42",isDefault:!0,position:-3},{id:"moderator",name:"moderator",color:"#faa81a",isDefault:!0,position:-2},{id:"member",name:"member",color:"#80848e",isDefault:!0,position:-1},...I].sort((K,ue)=>(K.position??999)-(ue.position??999)),ee=(K,ue)=>{P(ue),K.dataTransfer.effectAllowed="move"},qe=K=>{K.preventDefault(),K.dataTransfer.dropEffect="move"},ve=async(K,ue)=>{if(K.preventDefault(),!A||A===ue){P(null);return}const je=he.find(Ne=>Ne.id===A),me=he.find(Ne=>Ne.id===ue);if(je?.isDefault||me?.isDefault){P(null);return}try{const Ne=je.position??0,_e=me.position??0;u&&(await it(Ae(de,"servers",u,"roles",A),{position:_e}),await it(Ae(de,"servers",u,"roles",ue),{position:Ne}))}catch(Ne){console.error("Error reordering roles:",Ne)}P(null)},Oe=bB.reduce((K,ue)=>(K[ue.category]||(K[ue.category]=[]),K[ue.category].push(ue),K),{}),Me=()=>{switch(h){case"users":return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"User Management"}),c.jsx("p",{className:"text-dark-muted",children:"Manage server members, assign roles, and moderate users."}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[c.jsxs("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:["Members  ",r.length]}),c.jsx("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:r.map(K=>c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-dark-hover transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold",children:K.displayName?.[0]?.toUpperCase()||"U"}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-medium text-dark-text",children:K.displayName}),c.jsx("span",{className:"text-xs px-2 py-0.5 rounded",style:{backgroundColor:`${he.find(ue=>ue.name===(K.serverRole||K.role))?.color}20`,color:he.find(ue=>ue.name===(K.serverRole||K.role))?.color},children:K.serverRole||K.role}),K.isMuted&&c.jsx("span",{className:"text-xs text-yellow-500",children:"MUTED"}),K.isBanned&&c.jsx("span",{className:"text-xs text-red-500",children:"BANNED"})]}),c.jsx("div",{className:"text-sm text-dark-muted",children:K.email})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(ot,{size:"sm",variant:K.isMuted?"warning":"secondary",onClick:()=>oe(K.id,K.isMuted),children:K.isMuted?"Unmute":"Mute"}),c.jsx(ot,{size:"sm",variant:K.isBanned?"danger":"secondary",onClick:()=>fe(K.id,K.isBanned),children:K.isBanned?"Unban":"Ban"}),c.jsx(ot,{size:"sm",variant:"ghost",onClick:()=>y(K),children:c.jsx(nc,{size:16})})]})]},K.id))})]})]});case"roles":return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Roles"}),c.jsx("p",{className:"text-dark-muted mt-1",children:"Use roles to organize your members and customize permissions."})]}),c.jsxs("div",{className:"bg-dark-bg rounded-xl p-6 border border-dark-hover",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-primary/20 flex items-center justify-center",children:c.jsx(Po,{className:"text-brand-primary",size:24})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-dark-text",children:"Create New Role"}),c.jsx("p",{className:"text-sm text-dark-muted",children:"Add a custom role with a unique color"})]})]}),c.jsxs("div",{className:"flex gap-4 items-end",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-xs font-medium text-dark-muted uppercase tracking-wide mb-2",children:"Role Name"}),c.jsx(En,{placeholder:"e.g. VIP, Helper, Supporter...",value:w.name,onChange:K=>E({...w,name:K.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-dark-muted uppercase tracking-wide mb-2",children:"Color"}),c.jsx("div",{className:"relative",children:c.jsx("input",{type:"color",value:w.color,onChange:K=>E({...w,color:K.target.value}),className:"w-14 h-10 rounded-lg cursor-pointer border-2 border-dark-hover hover:border-brand-primary transition-colors",style:{backgroundColor:w.color}})})]}),c.jsxs(ot,{onClick:Re,disabled:!w.name.trim(),className:"px-6",children:[c.jsx(Po,{size:18,className:"mr-1"}),"Create Role"]})]})]}),c.jsxs("div",{className:"bg-dark-bg rounded-xl border border-dark-hover overflow-hidden",children:[c.jsxs("div",{className:"px-6 py-4 border-b border-dark-hover flex items-center justify-between",children:[c.jsxs("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide",children:["Roles  ",he.length]}),c.jsx("span",{className:"text-xs text-dark-muted",children:"Drag custom roles to reorder hierarchy"})]}),c.jsxs("div",{className:"divide-y divide-dark-hover",children:[he.map((K,ue)=>c.jsxs("div",{draggable:!K.isDefault,onDragStart:je=>ee(je,K.id),onDragOver:qe,onDrop:je=>ve(je,K.id),className:Bt("group flex items-center justify-between px-6 py-4 transition-colors",!K.isDefault&&"cursor-grab active:cursor-grabbing hover:bg-dark-sidebar/50",K.isDefault&&"opacity-70",A===K.id&&"opacity-50 bg-brand-primary/10"),children:[c.jsxs("div",{className:"flex items-center gap-4",children:[!K.isDefault&&c.jsx("div",{className:"text-dark-muted opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(KM,{size:20})}),c.jsx("div",{className:"w-5 h-5 rounded-full ring-2 ring-offset-2 ring-offset-dark-bg",style:{backgroundColor:K.color,ringColor:K.color}}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-semibold text-dark-text",style:{color:K.color},children:K.name}),K.isDefault&&c.jsx("span",{className:"text-[10px] px-2 py-0.5 bg-dark-hover text-dark-muted rounded-full uppercase font-medium",children:"System"})]}),c.jsx("p",{className:"text-xs text-dark-muted mt-0.5",children:K.isDefault?"Default system role":`Position: ${K.position??0}`})]})]}),!K.isDefault&&c.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>H(K),className:"p-2 rounded-lg hover:bg-dark-hover text-dark-muted hover:text-brand-primary transition-colors",title:"Edit Role",children:c.jsx(nc,{size:18})}),c.jsx("button",{onClick:()=>z({type:"role",data:K.id,name:K.name}),className:"p-2 rounded-lg hover:bg-red-500/20 text-dark-muted hover:text-red-500 transition-colors",title:"Delete Role",children:c.jsx(Vi,{size:18})})]})]},K.id)),he.length===0&&c.jsxs("div",{className:"px-6 py-12 text-center",children:[c.jsx(VT,{className:"mx-auto text-dark-muted mb-3",size:40}),c.jsx("p",{className:"text-dark-muted",children:"No roles created yet"}),c.jsx("p",{className:"text-xs text-dark-muted mt-1",children:"Create your first role above!"})]})]})]})]});case"channels":return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Channels"}),c.jsx("p",{className:"text-dark-muted",children:"Create and manage server channels."}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Create New Channel"}),c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsxs("div",{className:"flex gap-2 mb-2",children:[c.jsx("button",{onClick:()=>N("text"),className:`flex-1 py-2 px-4 rounded-lg border transition-colors ${R==="text"?"border-brand-primary bg-brand-primary/20 text-brand-primary":"border-dark-hover text-dark-muted hover:border-dark-muted"}`,children:"# Yaz Kanal"}),c.jsx("button",{onClick:()=>N("voice"),className:`flex-1 py-2 px-4 rounded-lg border transition-colors ${R==="voice"?"border-green-500 bg-green-500/20 text-green-500":"border-dark-hover text-dark-muted hover:border-dark-muted"}`,children:" Sesli Kanal"})]}),c.jsx(En,{placeholder:"Channel name",value:b,onChange:K=>x(K.target.value)}),R==="text"&&c.jsx(En,{placeholder:"Channel topic/description (Optional)",value:k,onChange:K=>j(K.target.value)})]}),c.jsxs(ot,{onClick:Ce,className:"h-fit mt-auto",children:[c.jsx(Po,{size:20}),"Create"]})]})]}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[c.jsxs("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:["Text Channels  ",a.length]}),c.jsx("div",{className:"space-y-2",children:a.map(K=>c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-dark-hover transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(hp,{className:"text-dark-muted"}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-medium text-dark-text",children:K.name}),K.description&&c.jsx("span",{className:"text-xs text-dark-muted ml-2 truncate max-w-[200px]",children:K.description}),K.locked&&c.jsxs("span",{className:"text-xs px-2 py-0.5 rounded bg-yellow-500/20 text-yellow-500 flex items-center gap-1",children:[c.jsx(cp,{size:12}),"LOCKED"]})]}),c.jsx("div",{className:"text-xs text-dark-muted",children:K.locked?"Only admins can send messages":"Everyone can send messages"})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(ot,{size:"sm",variant:"ghost",onClick:()=>F(K),children:c.jsx(nc,{size:16})}),c.jsx(ot,{size:"sm",variant:K.locked?"warning":"secondary",onClick:()=>Le(K.id,K.locked),children:K.locked?"Unlock":"Lock"}),c.jsx(ot,{size:"sm",variant:"danger",onClick:()=>z({type:"channel",data:K.id,name:K.name}),children:c.jsx(Vi,{size:16})})]})]},K.id))})]})]});case"server":return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Server Overview"}),c.jsx("p",{className:"text-dark-muted",children:"View server statistics and information."}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-6",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("div",{className:"text-xs text-dark-muted uppercase tracking-wide mb-1",children:"Server Name"}),c.jsx("div",{className:"text-2xl font-bold text-dark-text",children:o?.name||"Unknown"})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{className:"bg-dark-sidebar p-4 rounded-lg text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-brand-primary mb-1",children:r.length}),c.jsx("div",{className:"text-sm text-dark-muted",children:"Members"})]}),c.jsxs("div",{className:"bg-dark-sidebar p-4 rounded-lg text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-green-500 mb-1",children:a.length}),c.jsx("div",{className:"text-sm text-dark-muted",children:"Channels"})]}),c.jsxs("div",{className:"bg-dark-sidebar p-4 rounded-lg text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-purple-500 mb-1",children:he.length}),c.jsx("div",{className:"text-sm text-dark-muted",children:"Roles"})]})]})]})]});case"logs":return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Audit Log"}),c.jsx("p",{className:"text-dark-muted",children:"View server activity and moderation history."}),c.jsx(yB,{})]});case"notifications":return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Push Notifications"}),c.jsx("p",{className:"text-dark-muted",children:"View and copy user FCM tokens for manual testing."}),c.jsxs("div",{className:"bg-dark-bg rounded-lg border border-dark-hover overflow-hidden",children:[c.jsx("div",{className:"px-6 py-4 border-b border-dark-hover",children:c.jsxs("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide",children:["Registered Devices  ",r.filter(K=>K.fcmTokens).length," / ",r.length]})}),c.jsx("div",{className:"divide-y divide-dark-hover max-h-[600px] overflow-y-auto",children:r.map(K=>c.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-dark-sidebar/50 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-primary flex items-center justify-center text-white shrink-0",children:K.displayName?.[0]?.toUpperCase()||"U"}),c.jsxs("div",{className:"overflow-hidden",children:[c.jsx("div",{className:"font-medium text-dark-text truncate",children:K.displayName}),c.jsx("div",{className:"text-xs font-mono text-dark-muted truncate max-w-[400px]",children:K.fcmTokens||"No token registered"})]})]}),c.jsx("div",{className:"flex items-center gap-2",children:K.fcmTokens?c.jsxs(ot,{size:"sm",variant:"secondary",onClick:()=>{navigator.clipboard.writeText(K.fcmTokens),M("Token copied to clipboard!")},children:[c.jsx(LT,{size:16,className:"mr-1"}),"Copy"]}):c.jsx("span",{className:"text-xs text-dark-muted italic px-2",children:"Offline/No Device"})})]},K.id))})]})]});case"cleanup":return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Database Cleanup"}),c.jsx("p",{className:"text-dark-muted",children:"Remove unused data to keep your database clean and reduce storage costs."}),c.jsx("div",{className:"grid gap-4",children:c.jsxs("div",{className:"bg-dark-bg rounded-lg p-6 border border-dark-hover",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-dark-text",children:"Expired Invite Codes"}),c.jsx("p",{className:"text-sm text-dark-muted mt-1",children:"Expired, used, or deactivated invite codes that are no longer valid."})]}),c.jsx("div",{className:"text-3xl font-bold text-yellow-500",children:ae})]}),c.jsxs(ot,{variant:"warning",onClick:()=>Pe("invites"),disabled:ae===0||J,className:"w-full",children:[c.jsx(Vi,{size:20}),J?"Cleaning...":"Clean Invite Codes"]})]})}),c.jsxs("div",{className:"text-xs text-dark-muted bg-dark-sidebar p-4 rounded-lg",children:[c.jsx("strong",{children:"Note:"})," These actions are irreversible. Deleted data cannot be recovered. Running cleanup periodically helps keep your Firestore quota usage low."]})]});default:return null}};return c.jsxs("div",{className:"fixed inset-0 bg-black/80 z-[100] flex flex-col md:flex-row pt-safe-top md:pt-0",children:[c.jsx("div",{className:"w-full md:w-56 bg-dark-sidebar flex flex-col shrink-0 border-b md:border-b-0 md:border-r border-dark-hover",children:c.jsx("div",{className:"flex md:flex-col overflow-x-auto md:overflow-y-auto py-2 md:py-4 px-2 gap-2 md:gap-0 no-scrollbar",children:Object.entries(Oe).map(([K,ue])=>c.jsxs("div",{className:"mb-0 md:mb-4 flex md:block gap-2 md:gap-0 shrink-0",children:[c.jsx("div",{className:"hidden md:block px-3 py-2 text-xs font-semibold text-dark-muted uppercase tracking-wide",children:K}),ue.map(je=>{const me=je.icon;return c.jsxs("button",{onClick:()=>m(je.id),className:Bt("whitespace-nowrap flex items-center gap-2 md:gap-3 px-3 py-2 rounded-md text-left transition-colors",h===je.id?"bg-dark-hover text-dark-text":"text-dark-muted hover:text-dark-text hover:bg-dark-hover/50"),children:[c.jsx(me,{size:18}),c.jsx("span",{className:"text-sm",children:je.label})]},je.id)})]},K))})}),c.jsxs("div",{className:"flex-1 flex flex-col bg-dark-bg overflow-hidden min-w-0",children:[c.jsx("div",{className:"flex justify-end p-4 shrink-0",children:c.jsx("button",{onClick:e,className:"p-2 hover:bg-dark-hover rounded-full transition-colors group",title:"Close (ESC)",children:c.jsx(Vn,{size:24,className:"text-dark-muted group-hover:text-dark-text"})})}),c.jsx("div",{className:"flex-1 overflow-y-auto px-4 md:px-10 pb-10",children:c.jsx("div",{className:"max-w-3xl mx-auto md:mx-0",children:Me()})})]}),p&&(()=>{const K=r.find(ue=>ue.id===p.id)||p;return c.jsx(Es,{isOpen:!!p,onClose:()=>y(null),title:"Edit User Role",size:"sm",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-dark-muted mb-1",children:"User"}),c.jsx("div",{className:"font-medium text-dark-text",children:K.displayName})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-dark-muted mb-2",children:"Select Role"}),c.jsx("div",{className:"space-y-2",children:he.map(ue=>c.jsxs("button",{onClick:()=>X(p.id,ue.name),className:Bt("w-full px-3 py-2 rounded-lg border text-left transition-all flex items-center gap-3",(K.serverRole||K.role)===ue.name?"border-brand-primary bg-brand-primary/20":"border-dark-hover hover:bg-dark-hover"),children:[c.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:ue.color}}),c.jsx("span",{className:"text-dark-text",children:ue.name})]},ue.id))})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-dark-muted mb-2",children:"Badges"}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.values(E1).map(ue=>{const je=K.badges?.includes(ue.id),me=ue.icon;return c.jsxs("button",{onClick:async()=>{try{await it(Ae(de,"users",p.id),{badges:je?hd(ue.id):Vd(ue.id)}),M(je?`${ue.label} badge removed`:`${ue.label} badge granted`)}catch{se("Failed to update badge")}},className:Bt("flex items-center gap-2 px-3 py-2 rounded-lg border text-left transition-all",je?"border-brand-primary bg-brand-primary/20":"border-dark-hover hover:bg-dark-hover"),children:[c.jsx(me,{size:16,style:{color:ue.color}}),c.jsx("span",{className:"text-dark-text text-sm",children:ue.label})]},ue.id)})})]})]})})})(),B&&c.jsx(Es,{isOpen:!!B,onClose:()=>H(null),title:"Edit Role",size:"sm",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx(En,{label:"Role Name",value:B.name,onChange:K=>H({...B,name:K.target.value})}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-dark-text mb-2 block",children:"Role Color"}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("input",{type:"color",value:B.color,onChange:K=>H({...B,color:K.target.value}),className:"w-14 h-10 rounded cursor-pointer"}),c.jsx(En,{value:B.color,onChange:K=>H({...B,color:K.target.value}),className:"flex-1"})]})]}),c.jsx(ot,{variant:"primary",className:"w-full",onClick:()=>We(B.id,{name:B.name,color:B.color}),children:"Save Changes"})]})}),U&&c.jsx(Es,{isOpen:!!U,onClose:()=>F(null),title:"Edit Channel",size:"sm",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx(En,{label:"Channel Name",value:U.name,onChange:K=>F({...U,name:K.target.value})}),c.jsx(En,{label:"Channel Topic / Description",value:U.description||"",onChange:K=>F({...U,description:K.target.value})}),c.jsx(ot,{variant:"primary",className:"w-full",onClick:()=>Ue(U.id,{name:U.name,description:U.description}),children:"Save Changes"})]})}),c.jsx(gc,{isOpen:!!L,onClose:()=>z(null),onConfirm:L?.type==="channel"?re:ke,title:`Delete ${L?.type==="channel"?"Channel":"Role"}`,message:`Are you sure you want to delete "${L?.name}"? This cannot be undone.`,confirmText:"Delete",variant:"danger"}),c.jsx(gc,{isOpen:!!Ee,onClose:()=>Pe(null),onConfirm:$,title:"Clean Invite Codes",message:`Are you sure you want to delete ${ae} expired/used invite code(s)? This action cannot be undone.`,confirmText:"Clean",variant:"danger"})]})},_B=({isOpen:t,onClose:e,userId:n,onSuccess:r})=>{const[a,o]=C.useState(""),[u,h]=C.useState(null),[m,p]=C.useState(null),[y,b]=C.useState(!1),[x,k]=C.useState({progress:0,speed:""}),j=C.useRef(null),{success:R,error:N}=Kr(),U=I=>{const O=I.target.files?.[0];if(O){if(!O.type.startsWith("image/")){N("Please select an image file");return}if(O.size>10*1024*1024){N("Image size must be less than 10MB");return}h(O),p(URL.createObjectURL(O))}},F=async()=>{if(!a.trim()){N("Server name is required");return}b(!0);try{let I=null;u&&(I=await vd(u,(B,H)=>{k({progress:B,speed:H})}));const O=await Fn(wt(de,"servers"),{name:a.trim(),icon:I,ownerId:n,createdAt:mt(),isDefault:!1,memberCount:1});await gr(Ae(de,"servers",O.id,"members",n),{userId:n,joinedAt:mt(),role:"admin"}),await Fn(wt(de,"servers",O.id,"channels"),{name:"general",type:"text",description:"General discussion",position:0,createdAt:mt()}),await it(Ae(de,"users",n),{servers:Vd(O.id),currentServer:O.id}),R("Server created successfully!"),o(""),h(null),m&&URL.revokeObjectURL(m),p(null),r&&r(O.id),e()}catch(I){console.error("Error creating server:",I),N("Failed to create server")}finally{b(!1),k({progress:0,speed:""})}};return c.jsx(Es,{isOpen:t,onClose:e,title:"Create Server",size:"sm",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("input",{type:"file",ref:j,onChange:U,accept:"image/*",className:"hidden"}),c.jsx("button",{onClick:()=>j.current?.click(),className:"w-20 h-20 rounded-full bg-dark-hover border-2 border-dashed border-dark-muted hover:border-brand-primary flex items-center justify-center transition-colors overflow-hidden",children:m?c.jsx("img",{src:m,alt:"Preview",className:"w-full h-full object-cover"}):c.jsx(e7,{size:32,className:"text-dark-muted"})}),c.jsx("span",{className:"text-xs text-dark-muted mt-2",children:"Server Icon (Optional)"})]}),y&&u&&x.progress>0&&c.jsxs("div",{className:"text-xs text-dark-muted text-center",children:["Uploading icon: ",Math.round(x.progress),"% (",x.speed,")"]}),c.jsx(En,{label:"Server Name",placeholder:"My Awesome Server",value:a,onChange:I=>o(I.target.value),maxLength:50,autoFocus:!0}),c.jsxs("div",{className:"text-xs text-dark-muted",children:[a.length,"/50 characters"]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(ot,{variant:"secondary",onClick:e,className:"flex-1",children:"Cancel"}),c.jsx(ot,{variant:"primary",onClick:F,disabled:!a.trim()||y,className:"flex-1",children:y?"Creating...":"Create Server"})]})]})})},wB=({isOpen:t,onClose:e,userId:n,onSuccess:r})=>{const[a,o]=C.useState(""),[u,h]=C.useState(!1),{success:m,error:p}=Kr(),y=async()=>{if(!a.trim()){p("Invite code is required");return}h(!0);try{const b=a.trim().toUpperCase(),x=Ae(de,"inviteCodes",b),k=await Od(x);if(!k.exists()){p("Invalid invite code");return}const j=k.data();if(!j.isActive){p("This invite code has already been used");return}const R=j.isUnlimited===!0||j.maxUses===-1;if(!R&&j.uses>=j.maxUses){p("This invite code has reached its usage limit");return}if(j.expiresAt.toDate()<new Date){p("This invite code has expired");return}await gr(Ae(de,"servers",j.serverId,"members",n),{userId:n,joinedAt:mt(),role:"member"}),await it(Ae(de,"users",n),{servers:Vd(j.serverId),currentServer:j.serverId});const N={uses:Ii(1)};R||(N.isActive=!1),await it(x,N),await it(Ae(de,"servers",j.serverId),{memberCount:Ii(1)}),m("Successfully joined server!"),o(""),r&&r(j.serverId),e()}catch(b){console.error("Error joining server:",b),console.error("Error code:",b.code),console.error("Error message:",b.message),b.code!=="permission-denied"?b.code==="not-found"?p("Server not found"):p(`Failed to join server: ${b.message}`):e()}finally{h(!1)}};return c.jsx(Es,{isOpen:t,onClose:e,title:"Join Server",size:"sm",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx(En,{label:"Invite Code",placeholder:"ABC12XYZ",value:a,onChange:b=>o(b.target.value.toUpperCase()),maxLength:8,autoFocus:!0}),c.jsx("div",{className:"text-xs text-dark-muted",children:"Enter the 8-character invite code"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(ot,{variant:"secondary",onClick:e,className:"flex-1",children:"Cancel"}),c.jsx(ot,{variant:"primary",onClick:y,disabled:a.length!==8||u,className:"flex-1",children:u?"Joining...":"Join Server"})]})]})})},SB=({isOpen:t,onClose:e})=>{const{availableDevices:n,selectedMicId:r,setSelectedMicId:a,selectedCameraId:o,setSelectedCameraId:u}=Ic();return t?c.jsx("div",{className:"fixed inset-0 bg-black/80 z-[100] flex items-center justify-center animate-fade-in",children:c.jsxs("div",{className:"bg-dark-elem w-full max-w-md rounded-2xl shadow-2xl border border-dark-hover overflow-hidden p-6 relative",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[c.jsx(cp,{size:28,className:"text-brand-primary"}),"Device Settings"]}),c.jsx("button",{onClick:e,className:"p-1 hover:bg-dark-hover rounded-full transition-colors text-dark-muted hover:text-white",children:c.jsx(Vn,{size:24})})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-xs font-bold text-dark-muted uppercase tracking-wider mb-2 flex items-center gap-2",children:[c.jsx(Vv,{size:16})," Microphone"]}),c.jsxs("select",{className:"w-full bg-dark-input border border-dark-hover rounded-lg p-3 text-white focus:ring-2 focus:ring-brand-primary outline-none transition-all",value:r,onChange:h=>a(h.target.value),children:[n.audioInputs.map(h=>c.jsx("option",{value:h.deviceId,children:h.label||`Microphone ${h.deviceId.slice(0,5)}...`},h.deviceId)),n.audioInputs.length===0&&c.jsx("option",{value:"",children:"No microphone found"})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-xs font-bold text-dark-muted uppercase tracking-wider mb-2 flex items-center gap-2",children:[c.jsx(fd,{size:16})," Camera"]}),c.jsxs("select",{className:"w-full bg-dark-input border border-dark-hover rounded-lg p-3 text-white focus:ring-2 focus:ring-brand-primary outline-none transition-all",value:o,onChange:h=>u(h.target.value),children:[n.videoInputs.map(h=>c.jsx("option",{value:h.deviceId,children:h.label||`Camera ${h.deviceId.slice(0,5)}...`},h.deviceId)),n.videoInputs.length===0&&c.jsx("option",{value:"",children:"No camera found"})]})]}),c.jsx("div",{className:"pt-4 border-t border-dark-hover flex justify-end",children:c.jsx(ot,{variant:"primary",onClick:e,children:"Done"})})]})]})}):null};var Uu={exports:{}},iv={},av={exports:{}},ov,$S;function EB(){if($S)return ov;$S=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ov=t,ov}var lv,qS;function CB(){if(qS)return lv;qS=1;var t=EB();function e(){}function n(){}return n.resetWarningCache=e,lv=function(){function r(u,h,m,p,y,b){if(b!==t){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}r.isRequired=r;function a(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:a,element:r,elementType:r,instanceOf:a,node:r,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:n,resetWarningCache:e};return o.PropTypes=o,o},lv}var GS;function U6(){return GS||(GS=1,av.exports=CB()()),av.exports}var kf={exports:{}},YS;function TB(){if(YS)return kf.exports;YS=1;function t(n){var r,a,o="";if(typeof n=="string"||typeof n=="number")o+=n;else if(typeof n=="object")if(Array.isArray(n)){var u=n.length;for(r=0;r<u;r++)n[r]&&(a=t(n[r]))&&(o&&(o+=" "),o+=a)}else for(a in n)n[a]&&(o&&(o+=" "),o+=a);return o}function e(){for(var n,r,a=0,o="",u=arguments.length;a<u;a++)(n=arguments[a])&&(r=t(n))&&(o&&(o+=" "),o+=r);return o}return kf.exports=e,kf.exports.clsx=e,kf.exports}var wn={},Ca={},KS;function Cp(){if(KS)return Ca;KS=1,Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.dontSetMe=a,Ca.findInArray=t,Ca.int=r,Ca.isFunction=e,Ca.isNum=n;function t(o,u){for(let h=0,m=o.length;h<m;h++)if(u.apply(u,[o[h],h,o]))return o[h]}function e(o){return typeof o=="function"||Object.prototype.toString.call(o)==="[object Function]"}function n(o){return typeof o=="number"&&!isNaN(o)}function r(o){return parseInt(o,10)}function a(o,u,h){if(o[u])return new Error(`Invalid prop ${u} passed to ${h} - do not set this, set it on the child.`)}return Ca}var Ta={},QS;function kB(){if(QS)return Ta;QS=1,Object.defineProperty(Ta,"__esModule",{value:!0}),Ta.browserPrefixToKey=n,Ta.browserPrefixToStyle=r,Ta.default=void 0,Ta.getPrefix=e;const t=["Moz","Webkit","O","ms"];function e(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const u=window.document?.documentElement?.style;if(!u||o in u)return"";for(let h=0;h<t.length;h++)if(n(o,t[h])in u)return t[h];return""}function n(o,u){return u?`${u}${a(o)}`:o}function r(o,u){return u?`-${u.toLowerCase()}-${o}`:o}function a(o){let u="",h=!0;for(let m=0;m<o.length;m++)h?(u+=o[m].toUpperCase(),h=!1):o[m]==="-"?h=!0:u+=o[m];return u}return Ta.default=e(),Ta}var XS;function Z1(){if(XS)return wn;XS=1,Object.defineProperty(wn,"__esModule",{value:!0}),wn.addClassName=B,wn.addEvent=u,wn.addUserSelectStyles=F,wn.createCSSTransform=k,wn.createSVGTransform=j,wn.getTouch=N,wn.getTouchIdentifier=U,wn.getTranslation=R,wn.innerHeight=y,wn.innerWidth=b,wn.matchesSelector=a,wn.matchesSelectorAndParentsTo=o,wn.offsetXYFromParent=x,wn.outerHeight=m,wn.outerWidth=p,wn.removeClassName=H,wn.removeEvent=h,wn.scheduleRemoveUserSelectStyles=I;var t=Cp(),e=n(kB());function n(w,E){if(typeof WeakMap=="function")var A=new WeakMap,P=new WeakMap;return(n=function(L,z){if(!z&&L&&L.__esModule)return L;var M,se,ae={__proto__:null,default:L};if(L===null||typeof L!="object"&&typeof L!="function")return ae;if(M=z?P:A){if(M.has(L))return M.get(L);M.set(L,ae)}for(const G in L)G!=="default"&&{}.hasOwnProperty.call(L,G)&&((se=(M=Object.defineProperty)&&Object.getOwnPropertyDescriptor(L,G))&&(se.get||se.set)?M(ae,G,se):ae[G]=L[G]);return ae})(w,E)}let r="";function a(w,E){return r||(r=(0,t.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(A){return(0,t.isFunction)(w[A])})),(0,t.isFunction)(w[r])?w[r](E):!1}function o(w,E,A){let P=w;do{if(a(P,E))return!0;if(P===A)return!1;P=P.parentNode}while(P);return!1}function u(w,E,A,P){if(!w)return;const L={capture:!0,...P};w.addEventListener?w.addEventListener(E,A,L):w.attachEvent?w.attachEvent("on"+E,A):w["on"+E]=A}function h(w,E,A,P){if(!w)return;const L={capture:!0,...P};w.removeEventListener?w.removeEventListener(E,A,L):w.detachEvent?w.detachEvent("on"+E,A):w["on"+E]=null}function m(w){let E=w.clientHeight;const A=w.ownerDocument.defaultView.getComputedStyle(w);return E+=(0,t.int)(A.borderTopWidth),E+=(0,t.int)(A.borderBottomWidth),E}function p(w){let E=w.clientWidth;const A=w.ownerDocument.defaultView.getComputedStyle(w);return E+=(0,t.int)(A.borderLeftWidth),E+=(0,t.int)(A.borderRightWidth),E}function y(w){let E=w.clientHeight;const A=w.ownerDocument.defaultView.getComputedStyle(w);return E-=(0,t.int)(A.paddingTop),E-=(0,t.int)(A.paddingBottom),E}function b(w){let E=w.clientWidth;const A=w.ownerDocument.defaultView.getComputedStyle(w);return E-=(0,t.int)(A.paddingLeft),E-=(0,t.int)(A.paddingRight),E}function x(w,E,A){const L=E===E.ownerDocument.body?{left:0,top:0}:E.getBoundingClientRect(),z=(w.clientX+E.scrollLeft-L.left)/A,M=(w.clientY+E.scrollTop-L.top)/A;return{x:z,y:M}}function k(w,E){const A=R(w,E,"px");return{[(0,e.browserPrefixToKey)("transform",e.default)]:A}}function j(w,E){return R(w,E,"")}function R(w,E,A){let{x:P,y:L}=w,z=`translate(${P}${A},${L}${A})`;if(E){const M=`${typeof E.x=="string"?E.x:E.x+A}`,se=`${typeof E.y=="string"?E.y:E.y+A}`;z=`translate(${M}, ${se})`+z}return z}function N(w,E){return w.targetTouches&&(0,t.findInArray)(w.targetTouches,A=>E===A.identifier)||w.changedTouches&&(0,t.findInArray)(w.changedTouches,A=>E===A.identifier)}function U(w){if(w.targetTouches&&w.targetTouches[0])return w.targetTouches[0].identifier;if(w.changedTouches&&w.changedTouches[0])return w.changedTouches[0].identifier}function F(w){if(!w)return;let E=w.getElementById("react-draggable-style-el");E||(E=w.createElement("style"),E.type="text/css",E.id="react-draggable-style-el",E.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,E.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,w.getElementsByTagName("head")[0].appendChild(E)),w.body&&B(w.body,"react-draggable-transparent-selection")}function I(w){window.requestAnimationFrame?window.requestAnimationFrame(()=>{O(w)}):O(w)}function O(w){if(w)try{if(w.body&&H(w.body,"react-draggable-transparent-selection"),w.selection)w.selection.empty();else{const E=(w.defaultView||window).getSelection();E&&E.type!=="Caret"&&E.removeAllRanges()}}catch{}}function B(w,E){w.classList?w.classList.add(E):w.className.match(new RegExp(`(?:^|\\s)${E}(?!\\S)`))||(w.className+=` ${E}`)}function H(w,E){w.classList?w.classList.remove(E):w.className=w.className.replace(new RegExp(`(?:^|\\s)${E}(?!\\S)`,"g"),"")}return wn}var $s={},WS;function B6(){if(WS)return $s;WS=1,Object.defineProperty($s,"__esModule",{value:!0}),$s.canDragX=a,$s.canDragY=o,$s.createCoreData=h,$s.createDraggableData=m,$s.getBoundPosition=n,$s.getControlPosition=u,$s.snapToGrid=r;var t=Cp(),e=Z1();function n(b,x,k){if(!b.props.bounds)return[x,k];let{bounds:j}=b.props;j=typeof j=="string"?j:p(j);const R=y(b);if(typeof j=="string"){const{ownerDocument:N}=R,U=N.defaultView;let F;if(j==="parent"?F=R.parentNode:F=R.getRootNode().querySelector(j),!(F instanceof U.HTMLElement))throw new Error('Bounds selector "'+j+'" could not find an element.');const I=F,O=U.getComputedStyle(R),B=U.getComputedStyle(I);j={left:-R.offsetLeft+(0,t.int)(B.paddingLeft)+(0,t.int)(O.marginLeft),top:-R.offsetTop+(0,t.int)(B.paddingTop)+(0,t.int)(O.marginTop),right:(0,e.innerWidth)(I)-(0,e.outerWidth)(R)-R.offsetLeft+(0,t.int)(B.paddingRight)-(0,t.int)(O.marginRight),bottom:(0,e.innerHeight)(I)-(0,e.outerHeight)(R)-R.offsetTop+(0,t.int)(B.paddingBottom)-(0,t.int)(O.marginBottom)}}return(0,t.isNum)(j.right)&&(x=Math.min(x,j.right)),(0,t.isNum)(j.bottom)&&(k=Math.min(k,j.bottom)),(0,t.isNum)(j.left)&&(x=Math.max(x,j.left)),(0,t.isNum)(j.top)&&(k=Math.max(k,j.top)),[x,k]}function r(b,x,k){const j=Math.round(x/b[0])*b[0],R=Math.round(k/b[1])*b[1];return[j,R]}function a(b){return b.props.axis==="both"||b.props.axis==="x"}function o(b){return b.props.axis==="both"||b.props.axis==="y"}function u(b,x,k){const j=typeof x=="number"?(0,e.getTouch)(b,x):null;if(typeof x=="number"&&!j)return null;const R=y(k),N=k.props.offsetParent||R.offsetParent||R.ownerDocument.body;return(0,e.offsetXYFromParent)(j||b,N,k.props.scale)}function h(b,x,k){const j=!(0,t.isNum)(b.lastX),R=y(b);return j?{node:R,deltaX:0,deltaY:0,lastX:x,lastY:k,x,y:k}:{node:R,deltaX:x-b.lastX,deltaY:k-b.lastY,lastX:b.lastX,lastY:b.lastY,x,y:k}}function m(b,x){const k=b.props.scale;return{node:x.node,x:b.state.x+x.deltaX/k,y:b.state.y+x.deltaY/k,deltaX:x.deltaX/k,deltaY:x.deltaY/k,lastX:b.state.x,lastY:b.state.y}}function p(b){return{left:b.left,top:b.top,right:b.right,bottom:b.bottom}}function y(b){const x=b.findDOMNode();if(!x)throw new Error("<DraggableCore>: Unmounted during event!");return x}return $s}var Bu={},Nf={},JS;function F6(){if(JS)return Nf;JS=1,Object.defineProperty(Nf,"__esModule",{value:!0}),Nf.default=t;function t(){}return Nf}var ZS;function NB(){if(ZS)return Bu;ZS=1,Object.defineProperty(Bu,"__esModule",{value:!0}),Bu.default=void 0;var t=m(Xa()),e=h(U6()),n=h(dy()),r=Z1(),a=B6(),o=Cp(),u=h(F6());function h(R){return R&&R.__esModule?R:{default:R}}function m(R,N){if(typeof WeakMap=="function")var U=new WeakMap,F=new WeakMap;return(m=function(I,O){if(!O&&I&&I.__esModule)return I;var B,H,w={__proto__:null,default:I};if(I===null||typeof I!="object"&&typeof I!="function")return w;if(B=O?F:U){if(B.has(I))return B.get(I);B.set(I,w)}for(const E in I)E!=="default"&&{}.hasOwnProperty.call(I,E)&&((H=(B=Object.defineProperty)&&Object.getOwnPropertyDescriptor(I,E))&&(H.get||H.set)?B(w,E,H):w[E]=I[E]);return w})(R,N)}function p(R,N,U){return(N=y(N))in R?Object.defineProperty(R,N,{value:U,enumerable:!0,configurable:!0,writable:!0}):R[N]=U,R}function y(R){var N=b(R,"string");return typeof N=="symbol"?N:N+""}function b(R,N){if(typeof R!="object"||!R)return R;var U=R[Symbol.toPrimitive];if(U!==void 0){var F=U.call(R,N);if(typeof F!="object")return F;throw new TypeError("@@toPrimitive must return a primitive value.")}return(N==="string"?String:Number)(R)}const x={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let k=x.mouse,j=class extends t.Component{constructor(){super(...arguments),p(this,"dragging",!1),p(this,"lastX",NaN),p(this,"lastY",NaN),p(this,"touchIdentifier",null),p(this,"mounted",!1),p(this,"handleDragStart",N=>{if(this.props.onMouseDown(N),!this.props.allowAnyClick&&typeof N.button=="number"&&N.button!==0)return!1;const U=this.findDOMNode();if(!U||!U.ownerDocument||!U.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:F}=U;if(this.props.disabled||!(N.target instanceof F.defaultView.Node)||this.props.handle&&!(0,r.matchesSelectorAndParentsTo)(N.target,this.props.handle,U)||this.props.cancel&&(0,r.matchesSelectorAndParentsTo)(N.target,this.props.cancel,U))return;N.type==="touchstart"&&!this.props.allowMobileScroll&&N.preventDefault();const I=(0,r.getTouchIdentifier)(N);this.touchIdentifier=I;const O=(0,a.getControlPosition)(N,I,this);if(O==null)return;const{x:B,y:H}=O,w=(0,a.createCoreData)(this,B,H);(0,u.default)("DraggableCore: handleDragStart: %j",w),(0,u.default)("calling",this.props.onStart),!(this.props.onStart(N,w)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,r.addUserSelectStyles)(F),this.dragging=!0,this.lastX=B,this.lastY=H,(0,r.addEvent)(F,k.move,this.handleDrag),(0,r.addEvent)(F,k.stop,this.handleDragStop))}),p(this,"handleDrag",N=>{const U=(0,a.getControlPosition)(N,this.touchIdentifier,this);if(U==null)return;let{x:F,y:I}=U;if(Array.isArray(this.props.grid)){let H=F-this.lastX,w=I-this.lastY;if([H,w]=(0,a.snapToGrid)(this.props.grid,H,w),!H&&!w)return;F=this.lastX+H,I=this.lastY+w}const O=(0,a.createCoreData)(this,F,I);if((0,u.default)("DraggableCore: handleDrag: %j",O),this.props.onDrag(N,O)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const w=document.createEvent("MouseEvents");w.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(w)}return}this.lastX=F,this.lastY=I}),p(this,"handleDragStop",N=>{if(!this.dragging)return;const U=(0,a.getControlPosition)(N,this.touchIdentifier,this);if(U==null)return;let{x:F,y:I}=U;if(Array.isArray(this.props.grid)){let w=F-this.lastX||0,E=I-this.lastY||0;[w,E]=(0,a.snapToGrid)(this.props.grid,w,E),F=this.lastX+w,I=this.lastY+E}const O=(0,a.createCoreData)(this,F,I);if(this.props.onStop(N,O)===!1||this.mounted===!1)return!1;const H=this.findDOMNode();H&&this.props.enableUserSelectHack&&(0,r.scheduleRemoveUserSelectStyles)(H.ownerDocument),(0,u.default)("DraggableCore: handleDragStop: %j",O),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,H&&((0,u.default)("DraggableCore: Removing handlers"),(0,r.removeEvent)(H.ownerDocument,k.move,this.handleDrag),(0,r.removeEvent)(H.ownerDocument,k.stop,this.handleDragStop))}),p(this,"onMouseDown",N=>(k=x.mouse,this.handleDragStart(N))),p(this,"onMouseUp",N=>(k=x.mouse,this.handleDragStop(N))),p(this,"onTouchStart",N=>(k=x.touch,this.handleDragStart(N))),p(this,"onTouchEnd",N=>(k=x.touch,this.handleDragStop(N)))}componentDidMount(){this.mounted=!0;const N=this.findDOMNode();N&&(0,r.addEvent)(N,x.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const N=this.findDOMNode();if(N){const{ownerDocument:U}=N;(0,r.removeEvent)(U,x.mouse.move,this.handleDrag),(0,r.removeEvent)(U,x.touch.move,this.handleDrag),(0,r.removeEvent)(U,x.mouse.stop,this.handleDragStop),(0,r.removeEvent)(U,x.touch.stop,this.handleDragStop),(0,r.removeEvent)(N,x.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,r.scheduleRemoveUserSelectStyles)(U)}}findDOMNode(){return this.props?.nodeRef?this.props?.nodeRef?.current:n.default.findDOMNode(this)}render(){return t.cloneElement(t.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};return Bu.default=j,p(j,"displayName","DraggableCore"),p(j,"propTypes",{allowAnyClick:e.default.bool,allowMobileScroll:e.default.bool,children:e.default.node.isRequired,disabled:e.default.bool,enableUserSelectHack:e.default.bool,offsetParent:function(R,N){if(R[N]&&R[N].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:e.default.arrayOf(e.default.number),handle:e.default.string,cancel:e.default.string,nodeRef:e.default.object,onStart:e.default.func,onDrag:e.default.func,onStop:e.default.func,onMouseDown:e.default.func,scale:e.default.number,className:o.dontSetMe,style:o.dontSetMe,transform:o.dontSetMe}),p(j,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),Bu}var eE;function AB(){return eE||(eE=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return m.default}}),t.default=void 0;var e=b(Xa()),n=y(U6()),r=y(dy()),a=TB(),o=Z1(),u=B6(),h=Cp(),m=y(NB()),p=y(F6());function y(U){return U&&U.__esModule?U:{default:U}}function b(U,F){if(typeof WeakMap=="function")var I=new WeakMap,O=new WeakMap;return(b=function(B,H){if(!H&&B&&B.__esModule)return B;var w,E,A={__proto__:null,default:B};if(B===null||typeof B!="object"&&typeof B!="function")return A;if(w=H?O:I){if(w.has(B))return w.get(B);w.set(B,A)}for(const P in B)P!=="default"&&{}.hasOwnProperty.call(B,P)&&((E=(w=Object.defineProperty)&&Object.getOwnPropertyDescriptor(B,P))&&(E.get||E.set)?w(A,P,E):A[P]=B[P]);return A})(U,F)}function x(){return x=Object.assign?Object.assign.bind():function(U){for(var F=1;F<arguments.length;F++){var I=arguments[F];for(var O in I)({}).hasOwnProperty.call(I,O)&&(U[O]=I[O])}return U},x.apply(null,arguments)}function k(U,F,I){return(F=j(F))in U?Object.defineProperty(U,F,{value:I,enumerable:!0,configurable:!0,writable:!0}):U[F]=I,U}function j(U){var F=R(U,"string");return typeof F=="symbol"?F:F+""}function R(U,F){if(typeof U!="object"||!U)return U;var I=U[Symbol.toPrimitive];if(I!==void 0){var O=I.call(U,F);if(typeof O!="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return(F==="string"?String:Number)(U)}class N extends e.Component{static getDerivedStateFromProps(F,I){let{position:O}=F,{prevPropsPosition:B}=I;return O&&(!B||O.x!==B.x||O.y!==B.y)?((0,p.default)("Draggable: getDerivedStateFromProps %j",{position:O,prevPropsPosition:B}),{x:O.x,y:O.y,prevPropsPosition:{...O}}):null}constructor(F){super(F),k(this,"onDragStart",(I,O)=>{if((0,p.default)("Draggable: onDragStart: %j",O),this.props.onStart(I,(0,u.createDraggableData)(this,O))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),k(this,"onDrag",(I,O)=>{if(!this.state.dragging)return!1;(0,p.default)("Draggable: onDrag: %j",O);const B=(0,u.createDraggableData)(this,O),H={x:B.x,y:B.y,slackX:0,slackY:0};if(this.props.bounds){const{x:E,y:A}=H;H.x+=this.state.slackX,H.y+=this.state.slackY;const[P,L]=(0,u.getBoundPosition)(this,H.x,H.y);H.x=P,H.y=L,H.slackX=this.state.slackX+(E-H.x),H.slackY=this.state.slackY+(A-H.y),B.x=H.x,B.y=H.y,B.deltaX=H.x-this.state.x,B.deltaY=H.y-this.state.y}if(this.props.onDrag(I,B)===!1)return!1;this.setState(H)}),k(this,"onDragStop",(I,O)=>{if(!this.state.dragging||this.props.onStop(I,(0,u.createDraggableData)(this,O))===!1)return!1;(0,p.default)("Draggable: onDragStop: %j",O);const H={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:E,y:A}=this.props.position;H.x=E,H.y=A}this.setState(H)}),this.state={dragging:!1,dragged:!1,x:F.position?F.position.x:F.defaultPosition.x,y:F.position?F.position.y:F.defaultPosition.y,prevPropsPosition:{...F.position},slackX:0,slackY:0,isElementSVG:!1},F.position&&!(F.onDrag||F.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){return this.props?.nodeRef?.current??r.default.findDOMNode(this)}render(){const{axis:F,bounds:I,children:O,defaultPosition:B,defaultClassName:H,defaultClassNameDragging:w,defaultClassNameDragged:E,position:A,positionOffset:P,scale:L,...z}=this.props;let M={},se=null;const G=!!!A||this.state.dragging,J=A||B,W={x:(0,u.canDragX)(this)&&G?this.state.x:J.x,y:(0,u.canDragY)(this)&&G?this.state.y:J.y};this.state.isElementSVG?se=(0,o.createSVGTransform)(W,P):M=(0,o.createCSSTransform)(W,P);const Ee=(0,a.clsx)(O.props.className||"",H,{[w]:this.state.dragging,[E]:this.state.dragged});return e.createElement(m.default,x({},z,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(O),{className:Ee,style:{...O.props.style,...M},transform:se}))}}t.default=N,k(N,"displayName","Draggable"),k(N,"propTypes",{...m.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:h.dontSetMe,style:h.dontSetMe,transform:h.dontSetMe}),k(N,"defaultProps",{...m.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(iv)),iv}var tE;function RB(){if(tE)return Uu.exports;tE=1;const{default:t,DraggableCore:e}=AB();return Uu.exports=t,Uu.exports.default=t,Uu.exports.DraggableCore=e,Uu.exports}var jB=RB();const H6=wd(jB),IB=()=>{const{callStatus:t,incomingCall:e,outgoingCallUser:n,answerCall:r,endCall:a,localStream:o,remoteStream:u,toggleAudio:h,toggleVideo:m,isMuted:p,isVideoOff:y,activeCall:b,isScreenSharing:x,toggleScreenShare:k,availableDevices:j,selectedMicId:R,selectedCameraId:N,setSelectedMicId:U,setSelectedCameraId:F,playSound:I,customSounds:O,addSound:B,removeSound:H}=Ic(),w=C.useRef(null),E=C.useRef(null),A=C.useRef(null),[P,L]=C.useState(!1),[z,M]=C.useState(!1),[se,ae]=C.useState(100),[G,J]=C.useState(!1),[W,Ee]=C.useState(!1),[Pe,$]=C.useState(!1),[X,oe]=C.useState(!1),[fe,Ce]=C.useState(!1),{userProfile:Ue}=yn(),re=sc(Ue),Le=Yk(Ue,Oi.SCREEN_SHARE),Re=C.useRef(null),We=async ee=>{const qe=ee.target.files[0];if(!qe)return;const ve=qe.name.split(".")[0].slice(0,10);await B(ve,qe),Re.current&&(Re.current.value="")},[ke,he]=C.useState(!1);return C.useEffect(()=>{w.current&&o&&(w.current.srcObject=o)},[o,t]),C.useEffect(()=>{E.current&&u&&(E.current.srcObject=u)},[u,t]),C.useEffect(()=>{if(u){const ee=u.getVideoTracks()[0];if(ee){const qe=!ee.muted&&ee.readyState==="live";he(qe);const ve=()=>he(!1),Oe=()=>he(!0),Me=()=>he(!1);return ee.addEventListener("mute",ve),ee.addEventListener("unmute",Oe),ee.addEventListener("ended",Me),()=>{ee.removeEventListener("mute",ve),ee.removeEventListener("unmute",Oe),ee.removeEventListener("ended",Me)}}else he(!1)}else he(!1)},[u]),C.useEffect(()=>{E.current&&(E.current.volume=se/100)},[se,u]),C.useEffect(()=>{t==="idle"&&(L(!1),Ce(!1),Ee(!1),oe(!1),J(!1),$(!1))},[t]),t==="idle"?null:t==="incoming"?c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in",role:"dialog","aria-modal":"true",children:c.jsxs("div",{className:"bg-dark-sidebar p-6 rounded-2xl shadow-2xl w-80 text-center border border-dark-hover",children:[c.jsxs("div",{className:"w-24 h-24 mx-auto mb-4 relative",children:[e?.callerPhotoUrl?c.jsx("img",{src:e.callerPhotoUrl,alt:"Caller",className:"w-full h-full rounded-full object-cover border-4 border-dark-bg"}):c.jsx("div",{className:"w-full h-full rounded-full bg-brand-primary flex items-center justify-center text-3xl font-bold text-white border-4 border-dark-bg",children:e?.callerName?.[0]?.toUpperCase()}),c.jsx("div",{className:"absolute -bottom-1 -right-1 bg-green-500 rounded-full p-2 animate-bounce",children:c.jsx(Iw,{size:16,className:"text-white"})})]}),c.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:e?.callerName}),c.jsxs("p",{className:"text-dark-muted mb-6",children:["Incoming ",e?.type," call..."]}),c.jsxs("div",{className:"flex gap-4 justify-center",children:[c.jsx("button",{onClick:()=>a(!0),className:"w-12 h-12 rounded-full bg-red-500 flex items-center justify-center text-white hover:bg-red-600 transition-colors",children:c.jsx(B0,{size:24})}),c.jsx("button",{onClick:r,className:"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center text-white hover:bg-green-600 transition-colors",children:c.jsx(Iw,{size:20})})]})]})}):c.jsx(H6,{nodeRef:A,disabled:!P,bounds:"body",onStart:()=>M(!0),onStop:()=>M(!1),children:c.jsxs("div",{role:"dialog","aria-modal":"true",ref:A,style:P?void 0:{transform:"none !important"},className:Bt("fixed z-[100] bg-gray-900 shadow-2xl overflow-hidden border border-gray-700 group",!z&&"transition-all duration-300",P?"bottom-4 right-4 w-64 h-48 rounded-lg cursor-move":"inset-0 flex flex-col !transform-none"),children:[c.jsxs("div",{className:Bt("absolute top-0 left-0 right-0 p-4 z-50 flex justify-between items-start bg-gradient-to-b from-black/80 to-transparent transition-opacity duration-200 opacity-100"),children:[c.jsx("div",{className:"flex gap-2",children:c.jsxs("div",{className:"bg-black/40 backdrop-blur px-3 py-1 rounded-full flex items-center gap-2",children:[c.jsx("span",{className:Bt("w-2 h-2 rounded-full",b?"bg-green-500":"bg-yellow-500 animate-pulse")}),c.jsx("span",{className:"text-xs text-white font-medium",children:b?"Connected":"Calling..."})]})}),c.jsx("button",{onClick:()=>L(!P),className:"p-2 rounded-full bg-black/40 hover:bg-white/10 text-white backdrop-blur transition-colors",title:P?"Maximize":"Minimize",children:P?c.jsx(o7,{size:20}):c.jsx(a7,{size:20})})]}),c.jsxs("div",{className:"relative flex-1 bg-black flex items-center justify-center w-full h-full",children:[c.jsx("video",{ref:E,autoPlay:!0,playsInline:!0,className:Bt("w-full h-full object-contain",(!u||!ke)&&"hidden")}),(!u||!ke)&&c.jsxs("div",{className:"text-center absolute inset-0 flex flex-col items-center justify-center z-10",children:[c.jsx("div",{className:"w-32 h-32 mx-auto mb-4 rounded-full bg-gray-800 flex items-center justify-center text-6xl font-bold text-gray-500 animate-pulse",children:n?.displayName?.[0]||b?.metadata?.name?.[0]||"?"}),c.jsx("p",{className:"text-xl text-white font-medium",children:t==="outgoing"?"Calling...":t==="connected"?"No Video / Audio Only":"Connecting..."}),c.jsx("p",{className:"text-gray-400 text-sm mt-1",children:n?.displayName})]}),!P&&o&&c.jsx(DB,{})]}),c.jsxs("div",{className:Bt("absolute bottom-4 md:bottom-8 left-1/2 -translate-x-1/2 z-50 flex flex-wrap justify-center items-center gap-2 md:gap-4 p-2 md:p-3 bg-gray-900/80 backdrop-blur-md rounded-xl md:rounded-2xl border border-gray-700 shadow-xl transition-opacity duration-300 hover:opacity-100 w-[95%] md:w-auto max-w-screen-sm",P&&"hidden"),children:[c.jsx("button",{onClick:h,className:Bt("p-3 rounded-xl transition-all hover:scale-110 active:scale-95",p?"bg-red-500/20 text-red-500":"bg-gray-700/50 text-white hover:bg-gray-600"),title:p?"Unmute":"Mute",children:p?c.jsx(Lv,{size:22}):c.jsx(Vv,{size:22})}),c.jsx("button",{onClick:m,className:Bt("p-3 rounded-xl transition-all hover:scale-110 active:scale-95",y?"bg-red-500/20 text-red-500":"bg-gray-700/50 text-white hover:bg-gray-600"),title:y?"Turn Video On":"Turn Video Off",children:y?c.jsx(zv,{size:22}):c.jsx(fd,{size:22})}),!$o.isNativePlatform()&&c.jsxs("div",{className:"relative",onMouseEnter:()=>$(!0),onMouseLeave:()=>$(!1),children:[c.jsx("button",{onClick:()=>{x?k():oe(!0)},disabled:!b||!Le,className:Bt("p-3 rounded-xl transition-all hover:scale-110 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",x?"bg-green-500 text-white":Le?"bg-gray-700/50 text-white hover:bg-gray-600":"bg-gray-800 text-gray-500 cursor-not-allowed"),title:Le?x?"Stop Sharing":"Share Screen":void 0,children:x?c.jsx(GM,{size:22}):c.jsx(Em,{size:22})}),!Le&&c.jsxs("div",{className:Bt("absolute bottom-full mb-2 left-1/2 -translate-x-1/2 px-2 py-1 bg-black text-rose-500 text-xs font-bold rounded shadow-lg whitespace-nowrap transition-opacity pointer-events-none z-50",Pe?"opacity-100":"opacity-0"),children:["Requires Premium ",c.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-black"})]})]}),c.jsx("div",{className:"w-px h-8 bg-gray-700 mx-2"}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>J(!G),onDoubleClick:()=>ae(se>0?0:100),className:Bt("p-3 rounded-xl transition-all hover:scale-110 active:scale-95",se===0?"bg-red-500/20 text-red-500":"bg-gray-700/50 text-white hover:bg-gray-600"),title:`Volume: ${se}% (click to show slider, double-click to mute)`,children:se===0?c.jsx(pw,{size:22}):se<50?c.jsx(FM,{size:22}):c.jsx(gw,{size:22})}),G&&c.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-3 p-3 bg-gray-900/95 backdrop-blur-md rounded-xl border border-gray-700 shadow-xl",children:c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsxs("span",{className:"text-xs text-gray-400 font-medium",children:[se,"%"]}),c.jsx("input",{type:"range",min:"0",max:"100",value:se,onChange:ee=>ae(Number(ee.target.value)),className:`w-24 h-2 appearance-none bg-gray-700 rounded-full cursor-pointer accent-brand-primary
                     [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 
                     [&::-webkit-slider-thumb]:bg-brand-primary [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer
                     [&::-webkit-slider-thumb]:shadow-lg [&::-webkit-slider-thumb]:hover:scale-110 [&::-webkit-slider-thumb]:transition-transform`,style:{background:`linear-gradient(to right, rgb(88, 101, 242) ${se}%, rgb(55, 65, 81) ${se}%)`}}),c.jsx("span",{className:"text-[10px] text-gray-500",children:"Remote Volume"})]})})]}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>Ce(!fe),className:Bt("p-3 rounded-xl transition-all hover:scale-110 active:scale-95",fe?"bg-brand-primary/20 text-brand-primary":"bg-gray-700/50 text-white hover:bg-gray-600"),title:"Soundboard",children:c.jsx(Cm,{size:22})}),fe&&c.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-3 w-64 bg-gray-900/95 backdrop-blur-md border border-gray-700 rounded-xl shadow-2xl p-4 animate-fade-in-up z-50",children:[c.jsxs("h4",{className:"text-white text-sm font-semibold mb-3 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Cm,{className:"text-brand-primary"}),"Soundboard"]}),c.jsxs("span",{className:"text-[10px] text-gray-400",children:[O.length,"/10"]})]}),c.jsxs("div",{className:"flex flex-col gap-1 mb-3 max-h-48 overflow-y-auto custom-scrollbar",children:[O.length===0&&c.jsx("div",{className:"text-center text-gray-500 text-xs py-4 italic",children:"No sounds added yet."}),O.map(ee=>c.jsxs("div",{className:"relative group flex items-center gap-2",children:[c.jsxs("button",{onClick:()=>{re&&I(ee.id)},className:"flex-1 bg-gray-800 hover:bg-gray-700 text-white text-xs py-2 px-3 rounded-lg transition-colors border border-gray-700 hover:border-brand-primary flex items-center gap-3 active:scale-95",children:[c.jsx("span",{className:"text-sm",children:""}),c.jsx("span",{className:"text-xs font-medium truncate flex-1 text-left",children:ee.name})]}),c.jsx("button",{onClick:qe=>{qe.stopPropagation(),H(ee.id)},className:"bg-red-500/10 hover:bg-red-500 text-red-500 hover:text-white rounded-lg p-2 transition-colors opacity-0 group-hover:opacity-100",title:"Remove sound",children:c.jsx(Vi,{size:14})})]},ee.id))]}),O.length<10&&c.jsxs("button",{onClick:()=>Re.current?.click(),className:"w-full py-2 border border-dashed border-gray-600 text-gray-400 rounded-lg hover:border-brand-primary hover:text-brand-primary transition-colors flex items-center justify-center gap-2 text-xs",children:[c.jsx(Po,{size:14})," Add Sound (MP3/WAV)"]}),c.jsx("input",{type:"file",ref:Re,className:"hidden",accept:"audio/mp3,audio/wav,audio/mpeg",onChange:We}),!re&&c.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center rounded-xl p-4 text-center",children:c.jsxs("div",{children:[c.jsx("p",{className:"text-brand-primary font-bold mb-1",children:"Premium Only"}),c.jsx("p",{className:"text-white text-xs",children:"Unlock Soundboard with Premium!"})]})})]})]}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>Ee(!W),className:Bt("p-3 rounded-xl transition-all hover:scale-110 active:scale-95",W?"bg-brand-primary/20 text-brand-primary":"bg-gray-700/50 text-white hover:bg-gray-600"),title:"Audio/Video Settings",children:c.jsx(cp,{size:22})}),W&&c.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-3 p-4 bg-gray-900/95 backdrop-blur-md rounded-xl border border-gray-700 shadow-xl w-64",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"text-sm font-semibold text-white mb-3",children:"Device Settings"}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Microphone"}),c.jsx("select",{value:R,onChange:ee=>U(ee.target.value),className:"w-full bg-gray-800 text-white text-sm rounded-lg px-3 py-2 border border-gray-700 focus:border-brand-primary outline-none cursor-pointer",children:j.audioInputs.map(ee=>c.jsx("option",{value:ee.deviceId,children:ee.label||`Microphone ${ee.deviceId.slice(0,8)}...`},ee.deviceId))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Camera"}),c.jsx("select",{value:N,onChange:ee=>F(ee.target.value),className:"w-full bg-gray-800 text-white text-sm rounded-lg px-3 py-2 border border-gray-700 focus:border-brand-primary outline-none cursor-pointer",children:j.videoInputs.map(ee=>c.jsx("option",{value:ee.deviceId,children:ee.label||`Camera ${ee.deviceId.slice(0,8)}...`},ee.deviceId))})]}),c.jsx("p",{className:"text-[10px] text-gray-500 mt-2",children:"Changes apply on next call"})]})})]}),c.jsx("div",{className:"w-px h-8 bg-gray-700 mx-2"}),c.jsx("button",{onClick:()=>a(!0),className:"p-3 rounded-xl bg-red-600 text-white hover:bg-red-700 transition-all hover:scale-110 active:scale-95 shadow-lg shadow-red-900/20",title:"End Call",children:c.jsx(B0,{size:24})})]}),P&&c.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 flex justify-center gap-2 bg-gradient-to-t from-black/90 to-transparent opacity-0 group-hover:opacity-100 transition-opacity z-50",children:[c.jsx("button",{onMouseDown:ee=>ee.stopPropagation(),onClick:h,className:Bt("p-1.5 rounded-full text-white hover:bg-white/20",p&&"bg-red-500/50 text-red-100"),title:"Mute",children:p?c.jsx(Lv,{size:16}):c.jsx(Vv,{size:16})}),c.jsx("button",{onMouseDown:ee=>ee.stopPropagation(),onClick:m,className:Bt("p-1.5 rounded-full text-white hover:bg-white/20",y&&"bg-red-500/50 text-red-100"),title:"Camera",children:y?c.jsx(zv,{size:16}):c.jsx(fd,{size:16})}),c.jsx("button",{onMouseDown:ee=>ee.stopPropagation(),onClick:()=>ae(se===0?100:0),className:Bt("p-1.5 rounded-full text-white hover:bg-white/20",se===0&&"bg-red-500/50 text-red-100"),title:"Volume Toggle",children:se===0?c.jsx(pw,{size:16}):c.jsx(gw,{size:16})}),c.jsx("button",{onMouseDown:ee=>ee.stopPropagation(),onClick:()=>a(!0),className:"p-1.5 rounded-full bg-red-600/80 text-white hover:bg-red-600",title:"End Call",children:c.jsx(B0,{size:16})})]}),W&&c.jsx(SB,{isOpen:W,onClose:()=>Ee(!1)}),c.jsx(e3,{isOpen:X,onClose:()=>oe(!1),onConfirm:ee=>k(ee)})]})})},DB=()=>{const t=C.useRef(null),{localStream:e,isMuted:n,isVideoOff:r}=Ic(),a=C.useRef(null);return C.useEffect(()=>{a.current&&e&&(a.current.srcObject=e)},[e]),c.jsx(H6,{bounds:"parent",nodeRef:t,children:c.jsxs("div",{ref:t,className:"absolute bottom-24 right-4 w-48 h-36 bg-gray-800 rounded-lg overflow-hidden shadow-lg border border-gray-700 cursor-move hover:scale-105 transition-transform z-50",children:[c.jsx("video",{ref:a,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),c.jsxs("div",{className:"absolute bottom-2 left-2 flex gap-1",children:[n&&c.jsx("div",{className:"bg-red-500/80 p-1 rounded",children:c.jsx(Lv,{size:12,className:"text-white"})}),r&&c.jsx("div",{className:"bg-red-500/80 p-1 rounded",children:c.jsx(zv,{size:12,className:"text-white"})})]})]})})},MB=()=>{const{currentUser:t,logout:e,resendVerification:n}=yn(),[r,a]=C.useState(!1),[o,u]=C.useState(""),h=async()=>{a(!0);try{await n(),u("Verification email sent! Check your inbox.")}catch(p){u("Error sending email: "+p.message)}finally{a(!1)}},m=async()=>{a(!0);try{await t.reload(),t.emailVerified?window.location.reload():u("Email is not verified yet. Please check your inbox.")}catch(p){console.error(p)}finally{a(!1)}};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-bg p-4",children:c.jsxs("div",{className:"w-full max-w-md bg-dark-sidebar rounded-lg shadow-2xl p-8 text-center space-y-6",children:[c.jsx("div",{className:"bg-brand-primary/10 w-16 h-16 rounded-full flex items-center justify-center mx-auto text-3xl",children:""}),c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Verify Your Email"}),c.jsxs("p",{className:"text-dark-muted",children:["We've sent a verification email to ",c.jsx("br",{}),c.jsx("span",{className:"font-semibold text-white",children:t?.email})]}),c.jsxs("div",{className:"bg-yellow-500/10 text-yellow-500 p-3 rounded-md text-sm",children:[" Please check your ",c.jsx("b",{children:"Spam/Junk"})," folder if you don't see the email in your inbox."]}),c.jsx("p",{className:"text-sm text-dark-muted",children:"You must verify your email address to access Lumo. To prevent spam, unverified accounts are restricted."}),o&&c.jsx("div",{className:"p-3 bg-brand-primary/20 text-brand-primary rounded-md text-sm",children:o}),c.jsxs("div",{className:"space-y-3 pt-4",children:[c.jsx(ot,{onClick:m,className:"w-full",disabled:r,children:"I've Verified My Email"}),c.jsx(ot,{onClick:h,variant:"secondary",className:"w-full",disabled:r,children:"Resend Verification Email"}),c.jsx("button",{onClick:e,className:"text-sm text-dark-muted hover:text-dark-text underline mt-4",children:"Logout"})]})]})})},PB=({dmId:t,dms:e})=>{const{currentUser:n,userProfile:r}=yn(),{users:a}=Za(),{startCall:o}=Ic(),[u,h]=C.useState(null),[m,p]=C.useState(null),[y,b]=C.useState([]),x=e.find(R=>R.id===t),k=x?.participants.find(R=>R!==n?.uid);C.useEffect(()=>{(async()=>{if(k)try{const N=await Od(Ae(de,"users",k));N.exists()&&h({id:N.id,...N.data()})}catch(N){console.error("Error fetching DM user:",N)}})()},[k]);const j=C.useMemo(()=>[{id:n.uid,displayName:n.displayName||r?.displayName||"User",photoUrl:n.photoURL||r?.photoUrl,role:r?.role},u].filter(Boolean),[n,r,u]);return x?c.jsxs("div",{className:"flex-1 flex flex-col h-full bg-dark-bg",children:[c.jsxs("div",{className:"h-12 px-4 flex items-center justify-between border-b border-dark-hover shadow-sm bg-dark-bg",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"relative",children:u?.photoUrl?c.jsx("img",{src:u.photoUrl,alt:u.displayName,className:"w-8 h-8 rounded-full object-cover"}):c.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white text-sm font-bold",children:u?.displayName?.[0]?.toUpperCase()||"?"})}),c.jsx("span",{className:"font-semibold text-dark-text",children:u?.displayName||"Loading..."})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>o(u,"voice"),className:"text-dark-muted hover:text-dark-text transition-colors p-1 rounded hover:bg-dark-hover",title:"Start Voice Call",disabled:!u,children:c.jsx(HM,{size:22})}),c.jsx("button",{onClick:()=>o(u,"video"),className:"text-dark-muted hover:text-dark-text transition-colors p-1 rounded hover:bg-dark-hover",title:"Start Video Call",disabled:!u,children:c.jsx(fd,{size:22})}),c.jsx("div",{className:"w-px h-6 bg-dark-hover mx-1"}),c.jsx(L6,{messages:y,users:j,onResultClick:R=>document.getElementById(`message-${R.id}`)?.scrollIntoView({behavior:"smooth",block:"center"})})]})]}),c.jsx(o3,{serverId:null,channelId:t,users:j,currentUserId:n?.uid,userRole:r?.role,onReply:p,onMessagesChange:b}),c.jsx(O6,{serverId:null,channelId:t,channel:{id:t,name:u?.displayName},userId:n?.uid,userProfile:r,userRole:r?.role,users:j,replyingTo:m,onCancelReply:()=>p(null)})]}):c.jsx("div",{className:"flex-1 flex items-center justify-center text-dark-muted",children:"Select a conversation"})},OB="lumo",LB="2.0.0.1",VB="module",zB="electron/main.cjs",UB={dev:"vite",build:"vite build",lint:"eslint .",preview:"vite preview",predeploy:"npm run build",deploy:"gh-pages -d dist","electron:dev":'concurrently -k "npm run dev" "wait-on tcp:3000 && electron ."',"electron:build":"vite build && electron-builder","build:electron":"npm run electron:build"},BB={"@capacitor-community/safe-area":"^7.0.0-beta.8","@capacitor/android":"^8.0.0","@capacitor/cli":"^8.0.0","@capacitor/core":"^8.0.0","@capacitor/push-notifications":"^8.0.0","@capacitor/status-bar":"^8.0.0","@giphy/js-fetch-api":"^5.7.0","@giphy/react-components":"^10.1.0",clsx:"^2.1.1","date-fns":"^4.1.0","electron-log":"^5.4.3","electron-updater":"^6.6.2","emoji-picker-react":"^4.16.1",firebase:"^12.6.0","firebase-admin":"^13.6.0",peerjs:"^1.5.5",react:"^19.2.3","react-color":"^2.19.3","react-dom":"^19.2.3","react-draggable":"^4.5.0","react-icons":"^5.5.0","react-router-dom":"^7.10.0","simple-peer":"^9.11.1","string-similarity":"^4.0.4","tailwind-merge":"^3.4.0","vosk-browser":"^0.0.8"},FB="Lumo - Modern Chat Application",HB="Hasan",$B={appId:"com.hasan.lumoapp",productName:"Lumo",files:["dist/**/*","electron/**/*","public/**/*"],directories:{output:"dist"},win:{target:"nsis",icon:"public/lumo-logo.png",artifactName:"LumoSetup_win-${version}.${ext}"},mac:{target:"dmg",icon:"public/lumo-logo.png",category:"public.app-category.social-networking",extendInfo:{NSCameraUsageDescription:"Lumo needs access to your camera for video calls.",NSMicrophoneUsageDescription:"Lumo needs access to your microphone for voice and video calls.",NSScreenCaptureUsageDescription:"Lumo needs access to share your screen."},artifactName:"LumoSetup_mac-${version}.${ext}"},linux:{target:"AppImage",icon:"public/lumo-logo.png",category:"Network",artifactName:"LumoSetup_linux-${version}.${ext}"},publish:[{provider:"github",owner:"opsdazlakss",repo:"lumobuild"}]},qB={type:"git",url:"https://github.com/opsdazlakss/lumobuild.git"},GB={"@capacitor/assets":"^3.0.5","@eslint/js":"^9.39.1","@types/react":"^19.2.5","@types/react-dom":"^19.2.3","@vitejs/plugin-react":"^5.1.1",autoprefixer:"^10.4.22","baseline-browser-mapping":"^2.9.19",concurrently:"^9.2.1",electron:"^39.2.6","electron-builder":"^26.0.12",eslint:"^9.39.1","eslint-plugin-react-hooks":"^7.0.1","eslint-plugin-react-refresh":"^0.4.24","gh-pages":"^6.3.0",globals:"^16.5.0",postcss:"^8.5.6",tailwindcss:"^3.4.18",vite:"^7.2.4","wait-on":"^9.0.3"},cv={name:OB,private:!0,version:LB,type:VB,main:zB,scripts:UB,dependencies:BB,description:FB,author:HB,build:$B,repository:qB,devDependencies:GB},YB=({isOpen:t,onClose:e,version:n,downloadUrl:r,forceUpdate:a})=>c.jsx(Es,{isOpen:t,onClose:a?()=>{}:e,title:"Update Available",size:"sm",children:c.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[c.jsx("div",{className:"w-16 h-16 bg-brand-primary/20 rounded-full flex items-center justify-center animate-bounce",children:c.jsx(d7,{size:32,className:"text-brand-primary"})}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-white",children:["New Version ",n," Available!"]}),c.jsx("p",{className:"text-dark-muted text-sm mt-2",children:"A new version of Lumo is available. Please update to get the latest features and fixes."})]}),c.jsxs("div",{className:"w-full space-y-2 pt-2",children:[c.jsxs(ot,{variant:"primary",className:"w-full flex items-center justify-center gap-2",onClick:()=>{window.open(r,"_system")},children:[c.jsx(PT,{size:20}),"Download Update"]}),!a&&c.jsx(ot,{variant:"secondary",className:"w-full",onClick:e,children:"Update Later"})]})]})}),KB=()=>{const{hotkeys:t}=z6(),{toggleAudio:e,toggleDeafen:n,callStatus:r}=Ic(),{toggleMute:a,toggleDeafen:o,currentVoiceChannel:u}=Dc();return C.useEffect(()=>{const h=m=>{["INPUT","TEXTAREA","SELECT"].includes(document.activeElement?.tagName)||document.activeElement?.contentEditable,m.ctrlKey||m.altKey||m.metaKey;const p=[];m.ctrlKey&&p.push("Control"),m.shiftKey&&p.push("Shift"),m.altKey&&p.push("Alt"),m.metaKey&&p.push("Meta");let y=m.key;y.length===1&&(y=y.toUpperCase()),["Control","Shift","Alt","Meta"].includes(y)||p.push(y);const b=[...new Set(p)].join("+"),x=b===t.toggleMute,k=b===t.toggleDeafen;if(x||k){const j=["INPUT","TEXTAREA","SELECT"].includes(document.activeElement?.tagName)||document.activeElement?.contentEditable==="true",R=m.ctrlKey||m.altKey||m.metaKey;(!j||R)&&m.preventDefault(),x?u?a():e():u?o():n()}};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[t,e,n,a,o,u]),null},QB=()=>{const{currentUser:t,userProfile:e,logout:n}=yn(),{users:r,channels:a,server:o,servers:u,currentServer:h,setCurrentServer:m,unreadMentions:p,unreadDms:y,dms:b}=Za();kP(),pO(t?.uid);const[x,k]=C.useState(null),[j,R]=C.useState(null),[N,U]=C.useState(!1),[F,I]=C.useState(!1),[O,B]=C.useState(!1),[H,w]=C.useState(!1),[E,A]=C.useState(!1),P=gP({onSwipeLeft:()=>{if(H){w(!1);return}h!=="home"&&A(!0)},onSwipeRight:()=>{if(E){A(!1);return}w(!0)}}),[L,z]=C.useState(!1),[M,se]=C.useState(!1),[ae,G]=C.useState(null),[J,W]=C.useState([]),[Ee,Pe]=C.useState(!1),[$,X]=C.useState(null),[oe,fe]=C.useState("idle");C.useEffect(()=>{if(!$o.isNativePlatform())return;(async()=>{fe("checking");const Le=Date.now();try{const Re=Ae(de,"system","app_version"),We=await Od(Re);let ke=!1,he=null;if(We.exists()){const qe=We.data(),ve=cv.version,Oe=qe.android;if(Oe&&Oe!==ve){const Me=ve.split(".").map(Number),K=Oe.split(".").map(Number);for(let ue=0;ue<Math.max(Me.length,K.length);ue++){const je=Me[ue]||0,me=K[ue]||0;if(me>je){ke=!0;break}else if(me<je)break}ke&&(he={version:Oe,downloadUrl:qe.downloadUrl,forceUpdate:qe.forceUpdate||!1})}}const ee=Date.now()-Le;ee<1500&&await new Promise(qe=>setTimeout(qe,1500-ee)),ke?(X(he),fe("available"),Pe(!0)):(fe("uptodate"),setTimeout(()=>{fe("idle")},1500))}catch(Re){console.error("Failed to check for updates:",Re),fe("idle")}})()},[]),C.useEffect(()=>{!t||!h||!p||p[h]?.count>0&&it(Ae(de,"users",t.uid),{[`unreadMentions.${h}`]:aw()}).catch(re=>{console.error("Error clearing unread mentions:",re)})},[h,t,p]),C.useEffect(()=>{!t||!j||!y||y[j.id]?.count>0&&it(Ae(de,"users",t.uid),{[`unreadDms.${j.id}`]:aw()}).catch(re=>{console.error("Error clearing unread DM count:",re)})},[j,t,y]),C.useEffect(()=>{const re=()=>{window.innerWidth<768&&!x&&!j&&w(!0)};return window.innerWidth<768&&w(!0),window.addEventListener("resize",re),()=>window.removeEventListener("resize",re)},[x,j]),C.useEffect(()=>{a.length>0?k(a[0]):k(null)},[h,a]);const Ce=async re=>{if(m(re),t)try{await it(Ae(de,"users",t.uid),{currentServer:re})}catch(Le){console.error("Failed to persist server selection:",Le)}},Ue=async re=>{if(!(!t||!re))try{let Le=b.find(Re=>Re.participants.includes(re.id)&&Re.participants.includes(t.uid));if(!Le){const Re=qr(wt(de,"dms"),Na("participants","array-contains",t.uid)),ke=(await Qa(Re)).docs.find(he=>he.data().participants.includes(re.id));ke&&(Le={id:ke.id,...ke.data()})}if(Le)Le.hiddenFor?.includes(t.uid)&&await it(Ae(de,"dms",Le.id),{hiddenFor:Le.hiddenFor.filter(Re=>Re!==t.uid)}),R(Le);else{const Re={participants:[t.uid,re.id],createdAt:mt(),updatedAt:mt(),lastMessage:null,hiddenFor:[]},We=await Fn(wt(de,"dms"),Re);R({id:We.id,...Re})}Ce("home")}catch(Le){console.error("Error starting DM:",Le)}};return t&&!t.emailVerified?c.jsx(MB,{}):c.jsx(hO,{children:c.jsx(wO,{children:c.jsx(mB,{children:c.jsxs(fO,{children:[c.jsx(KB,{}),c.jsxs("div",{className:"flex h-screen bg-dark-bg overflow-hidden",...P,children:[c.jsxs("div",{className:"hidden md:flex h-full",children:[c.jsx(Qw,{servers:u,currentServerId:h,onServerChange:Ce,onCreateServer:()=>z(!0),onJoinServer:()=>se(!0),userRole:e?.role,userId:t?.uid,unreadMentions:p,unreadDms:y}),c.jsx(Kw,{server:o,channels:a,selectedChannel:x,onSelectChannel:k,onOpenSettings:()=>U(!0),onOpenAdmin:()=>I(!0),onLogout:n,userProfile:e,serverId:h,userRole:e?.role,userId:t?.uid,dms:b,unreadDms:y,selectedDm:j,onSelectDm:R})]}),H&&c.jsxs("div",{className:"fixed inset-0 z-50 flex md:hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>w(!1)}),c.jsxs("div",{className:"relative flex h-full animate-slide-in-left bg-dark-bg",children:[c.jsx(Qw,{servers:u,currentServerId:h,onServerChange:re=>Ce(re),onCreateServer:()=>z(!0),onJoinServer:()=>se(!0),userRole:e?.role,userId:t?.uid,unreadMentions:p,unreadDms:y}),c.jsx(Kw,{server:o,channels:a,selectedChannel:x,onSelectChannel:re=>{k(re),w(!1)},onOpenSettings:()=>{U(!0),w(!1)},onOpenAdmin:()=>{I(!0),w(!1)},onLogout:n,userProfile:e,serverId:h,userRole:e?.role,userId:t?.uid,dms:b,unreadDms:y,selectedDm:j,onSelectDm:re=>{R(re),w(!1)}}),c.jsx("button",{onClick:()=>w(!1),className:"absolute top-2 right-2 p-2 bg-dark-bg/50 rounded-full text-white md:hidden",style:{right:"-3rem"},children:c.jsx(Vn,{size:24})})]})]}),c.jsx("div",{className:"flex-1 flex flex-col",children:h==="home"?j?c.jsx(PB,{dmId:j.id,dms:b}):c.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-dark-muted relative",children:[c.jsx("button",{onClick:()=>w(!0),className:"absolute top-4 left-4 md:hidden p-2 text-dark-muted hover:text-dark-text",children:c.jsx(bw,{size:32})}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"mb-2 text-lg",children:" Welcome!"}),c.jsx("p",{children:"Select a conversation to start chatting"})]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"h-12 md:h-12 pt-safe-top md:pt-0 px-4 flex items-center justify-between border-b border-dark-hover shadow-sm bg-dark-bg box-content",children:[c.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[c.jsx("button",{onClick:()=>w(!0),className:"md:hidden p-1 mr-1 text-dark-muted hover:text-dark-text",children:c.jsx(bw,{size:24})}),c.jsx(hp,{className:"text-dark-muted flex-shrink-0"}),c.jsxs("h2",{className:"font-semibold text-dark-text flex items-center min-w-0",children:[c.jsx("span",{className:"truncate",children:x?.name||"Select a channel"}),x?.description&&c.jsx("span",{className:"hidden md:block ml-4 text-sm text-dark-muted font-normal border-l border-dark-muted/30 pl-4 truncate max-w-md",children:x.description})]})]}),c.jsx("div",{className:"flex items-center gap-3",children:x&&c.jsxs(c.Fragment,{children:[J.filter(re=>re.pinned).length>0&&c.jsxs("button",{onClick:()=>B(!O),className:`hidden sm:flex items-center gap-2 px-3 py-1.5 rounded transition-colors ${O?"bg-brand-primary text-white":"bg-dark-hover text-dark-text hover:bg-dark-input"}`,children:[c.jsx(tc,{size:16}),c.jsxs("span",{className:"text-sm font-medium",children:[J.filter(re=>re.pinned).length," Pinned"]})]}),c.jsx("div",{className:"hidden sm:block",children:c.jsx(L6,{messages:J,users:r,onResultClick:re=>console.log("Scroll to:",re)})}),h!=="home"&&c.jsx("button",{onClick:()=>A(!0),className:"lg:hidden p-2 text-dark-muted hover:text-dark-text",children:c.jsx(y1,{size:24})})]})})]}),x?c.jsxs(c.Fragment,{children:[c.jsx(o3,{serverId:h,channelId:x.id,users:r,currentUserId:t?.uid,userRole:e?.role,onReply:G,onMessagesChange:W}),c.jsx(O6,{serverId:h,channelId:x.id,channel:x,userId:t?.uid,userProfile:e,userRole:e?.role,users:r,replyingTo:ae,onCancelReply:()=>G(null)})]}):c.jsx("div",{className:"flex-1 flex items-center justify-center text-dark-muted",children:"Select a channel to start chatting"})]})}),c.jsx("div",{className:"hidden lg:block h-full",children:h!=="home"&&c.jsx(Xw,{users:r,currentUserId:t?.uid,onStartDm:Ue})}),E&&h!=="home"&&c.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end lg:hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>A(!1)}),c.jsxs("div",{className:"relative h-full bg-dark-sidebar shadow-xl w-64 animate-slide-in-right pt-safe-top",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-hover",children:[c.jsx("h3",{className:"font-semibold text-dark-text",children:"Members"}),c.jsx("button",{onClick:()=>A(!1),children:c.jsx(Vn,{size:24,className:"text-dark-muted"})})]}),c.jsx("div",{className:"h-[calc(100%-60px)]",children:c.jsx(Xw,{users:r,currentUserId:t?.uid,onStartDm:re=>{Ue(re),A(!1)}})})]})]}),O&&x&&c.jsx(cB,{messages:J,users:r,onClose:()=>B(!1),onJumpToMessage:re=>{const Le=document.getElementById(`message-${re}`);Le&&(Le.scrollIntoView({behavior:"smooth",block:"center"}),Le.classList.add("bg-brand-primary/10"),setTimeout(()=>{Le.classList.remove("bg-brand-primary/10")},2e3)),B(!1)}}),c.jsx(IB,{}),c.jsx(vB,{isOpen:N,onClose:()=>U(!1),onOpenAdmin:()=>I(!0)}),c.jsx(xB,{isOpen:F,onClose:()=>I(!1)}),c.jsx(_B,{isOpen:L,onClose:()=>z(!1),userId:t?.uid,onSuccess:re=>m(re)}),c.jsx(wB,{isOpen:M,onClose:()=>se(!1),userId:t?.uid,onSuccess:re=>m(re)}),Ee&&c.jsx(YB,{isOpen:Ee,onClose:()=>!$?.forceUpdate&&Pe(!1),version:$?.version,downloadUrl:$?.downloadUrl,forceUpdate:$?.forceUpdate}),["checking","uptodate"].includes(oe)&&c.jsxs("div",{className:"fixed inset-0 z-[60] bg-dark-bg flex flex-col items-center justify-center text-white transition-opacity duration-300",children:[oe==="checking"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-brand-primary mb-6"}),c.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Checking for updates..."}),c.jsxs("p",{className:"text-dark-muted font-mono text-sm",children:["v",cv.version]})]}),oe==="uptodate"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"rounded-full bg-green-500/20 p-4 mb-6",children:c.jsx(PT,{size:48,className:"text-green-500"})}),c.jsx("h2",{className:"text-xl font-semibold mb-2 text-green-400",children:"You are up to date!"}),c.jsxs("p",{className:"text-dark-muted font-mono text-sm",children:["v",cv.version]})]})]})]})]})})})})};class XB extends ye.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n),this.setState({errorInfo:n})}render(){return this.state.hasError?c.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-8 flex flex-col items-center justify-center text-center",children:[c.jsx("h1",{className:"text-2xl font-bold text-red-500 mb-4",children:"Something went wrong"}),c.jsxs("div",{className:"bg-gray-800 p-4 rounded overflow-auto max-w-full text-left font-mono text-xs",children:[c.jsx("p",{className:"font-bold text-yellow-400 mb-2",children:this.state.error&&this.state.error.toString()}),c.jsx("pre",{className:"text-gray-400 whitespace-pre-wrap",children:this.state.errorInfo&&this.state.errorInfo.componentStack})]}),c.jsx("button",{className:"mt-6 px-4 py-2 bg-blue-600 rounded hover:bg-blue-700",onClick:()=>window.location.reload(),children:"Reload App"})]}):this.props.children}}const No=dp("PushNotifications",{}),WB=()=>{const{currentUser:t}=yn();C.useEffect(()=>{let e,n,r,a;return $o.getPlatform()!=="web"&&t&&(async()=>{console.log("PushNotifications hook: Initializing for user",t.uid);let u=await No.checkPermissions();if(u.receive==="prompt"&&(u=await No.requestPermissions()),u.receive!=="granted"){console.warn("PushNotifications hook: User denied permissions!");return}e=await No.addListener("registration",async h=>{console.log("Push registration success, token: "+h.value);try{const m=Ae(de,"users",t.uid);await gr(m,{fcmTokens:h.value},{merge:!0}),console.log("FCM Token saved to Firestore for user:",t.uid)}catch(m){console.error("Error saving FCM token to Firestore:",m)}}),n=await No.addListener("registrationError",h=>{console.error("Error on registration: "+JSON.stringify(h))}),r=await No.addListener("pushNotificationReceived",h=>{console.log("Push received: "+JSON.stringify(h))}),a=await No.addListener("pushNotificationActionPerformed",h=>{console.log("Push action performed: "+JSON.stringify(h))}),console.log("PushNotifications hook: Requesting registration..."),await No.register()})(),()=>{e&&e.remove(),n&&n.remove(),r&&r.remove(),a&&a.remove()}},[t])};function JB(){const{currentUser:t,userProfile:e,loading:n}=yn();WB();const[r,a]=C.useState("login");return C.useEffect(()=>{const o=new URLSearchParams(window.location.search);(o.get("sso")||o.get("sso_token"))&&!t&&a("sso-login")},[t]),n?c.jsx("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center",children:c.jsx("div",{className:"text-dark-text text-xl",children:"Loading..."})}):t&&e?.isBanned?c.jsx("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-dark-sidebar p-8 rounded-xl max-w-md w-full text-center border border-admin",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("h1",{className:"text-2xl font-bold text-dark-text mb-2",children:"Account Banned"}),c.jsx("p",{className:"text-dark-muted mb-6",children:"Your account has been banned from this server. Please contact an administrator if you believe this is a mistake."}),c.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-hover transition-colors",children:"Refresh"})]})}):t?c.jsx(EM,{children:c.jsx(QB,{})}):c.jsxs(c.Fragment,{children:[r==="login"&&c.jsx(dP,{onSwitchToRegister:()=>a("register"),onSwitchToReset:()=>a("reset"),onSwitchToSSOTest:()=>a("sso-test")}),r==="register"&&c.jsx(hP,{onSwitchToLogin:()=>a("login")}),r==="reset"&&c.jsx(fP,{onSwitchToLogin:()=>a("login")}),r==="sso-test"&&c.jsx(mP,{onBack:()=>a("login")}),r==="sso-login"&&c.jsx(pP,{onBackToLogin:()=>a("login")})]})}function ZB(){return c.jsx(v7,{children:c.jsx(XB,{children:c.jsx(_M,{children:c.jsx(JB,{})})})})}R5.createRoot(document.getElementById("root")).render(c.jsx(C.StrictMode,{children:c.jsx(ZB,{})}));
