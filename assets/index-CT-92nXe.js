function R3(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in n)){const l=Object.getOwnPropertyDescriptor(r,a);l&&Object.defineProperty(n,a,l.get?l:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function rd(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function N3(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){var a=!1;try{a=this instanceof r}catch{}return a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var a=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,a.get?a:{enumerable:!0,get:function(){return n[r]}})}),t}var iy={exports:{}},pu={};var Wx;function I3(){if(Wx)return pu;Wx=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:n,type:r,key:c,ref:a!==void 0?a:null,props:l}}return pu.Fragment=e,pu.jsx=t,pu.jsxs=t,pu}var Jx;function j3(){return Jx||(Jx=1,iy.exports=I3()),iy.exports}var d=j3(),ay={exports:{}},Je={};var Zx;function D3(){if(Zx)return Je;Zx=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),x=Symbol.iterator;function C(H){return H===null||typeof H!="object"?null:(H=x&&H[x]||H["@@iterator"],typeof H=="function"?H:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,A={};function B(H,J,ue){this.props=H,this.context=J,this.refs=A,this.updater=ue||R}B.prototype.isReactComponent={},B.prototype.setState=function(H,J){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,J,"setState")},B.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function G(){}G.prototype=B.prototype;function I(H,J,ue){this.props=H,this.context=J,this.refs=A,this.updater=ue||R}var V=I.prototype=new G;V.constructor=I,j(V,B.prototype),V.isPureReactComponent=!0;var z=Array.isArray;function F(){}var w={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function k(H,J,ue){var me=ue.ref;return{$$typeof:n,type:H,key:J,ref:me!==void 0?me:null,props:ue}}function D(H,J){return k(H.type,J,H.props)}function M(H){return typeof H=="object"&&H!==null&&H.$$typeof===n}function U(H){var J={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(ue){return J[ue]})}var O=/\/+/g;function be(H,J){return typeof H=="object"&&H!==null&&H.key!=null?U(""+H.key):J.toString(36)}function Ee(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(F,F):(H.status="pending",H.then(function(J){H.status==="pending"&&(H.status="fulfilled",H.value=J)},function(J){H.status==="pending"&&(H.status="rejected",H.reason=J)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function $(H,J,ue,me,Ce){var ye=typeof H;(ye==="undefined"||ye==="boolean")&&(H=null);var Se=!1;if(H===null)Se=!0;else switch(ye){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(H.$$typeof){case n:case e:Se=!0;break;case v:return Se=H._init,$(Se(H._payload),J,ue,me,Ce)}}if(Se)return Ce=Ce(H),Se=me===""?"."+be(H,0):me,z(Ce)?(ue="",Se!=null&&(ue=Se.replace(O,"$&/")+"/"),$(Ce,J,ue,"",function(_e){return _e})):Ce!=null&&(M(Ce)&&(Ce=D(Ce,ue+(Ce.key==null||H&&H.key===Ce.key?"":(""+Ce.key).replace(O,"$&/")+"/")+Se)),J.push(Ce)),1;Se=0;var He=me===""?".":me+":";if(z(H))for(var Ge=0;Ge<H.length;Ge++)me=H[Ge],ye=He+be(me,Ge),Se+=$(me,J,ue,ye,Ce);else if(Ge=C(H),typeof Ge=="function")for(H=Ge.call(H),Ge=0;!(me=H.next()).done;)me=me.value,ye=He+be(me,Ge++),Se+=$(me,J,ue,ye,Ce);else if(ye==="object"){if(typeof H.then=="function")return $(Ee(H),J,ue,me,Ce);throw J=String(H),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Se}function K(H,J,ue){if(H==null)return H;var me=[],Ce=0;return $(H,me,"","",function(ye){return J.call(ue,ye,Ce++)}),me}function W(H){if(H._status===-1){var J=H._result;J=J(),J.then(function(ue){(H._status===0||H._status===-1)&&(H._status=1,H._result=ue)},function(ue){(H._status===0||H._status===-1)&&(H._status=2,H._result=ue)}),H._status===-1&&(H._status=0,H._result=J)}if(H._status===1)return H._result.default;throw H._result}var Te=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},Re={map:K,forEach:function(H,J,ue){K(H,function(){J.apply(this,arguments)},ue)},count:function(H){var J=0;return K(H,function(){J++}),J},toArray:function(H){return K(H,function(J){return J})||[]},only:function(H){if(!M(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return Je.Activity=b,Je.Children=Re,Je.Component=B,Je.Fragment=t,Je.Profiler=a,Je.PureComponent=I,Je.StrictMode=r,Je.Suspense=p,Je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,Je.__COMPILER_RUNTIME={__proto__:null,c:function(H){return w.H.useMemoCache(H)}},Je.cache=function(H){return function(){return H.apply(null,arguments)}},Je.cacheSignal=function(){return null},Je.cloneElement=function(H,J,ue){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var me=j({},H.props),Ce=H.key;if(J!=null)for(ye in J.key!==void 0&&(Ce=""+J.key),J)!S.call(J,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&J.ref===void 0||(me[ye]=J[ye]);var ye=arguments.length-2;if(ye===1)me.children=ue;else if(1<ye){for(var Se=Array(ye),He=0;He<ye;He++)Se[He]=arguments[He+2];me.children=Se}return k(H.type,Ce,me)},Je.createContext=function(H){return H={$$typeof:c,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:l,_context:H},H},Je.createElement=function(H,J,ue){var me,Ce={},ye=null;if(J!=null)for(me in J.key!==void 0&&(ye=""+J.key),J)S.call(J,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(Ce[me]=J[me]);var Se=arguments.length-2;if(Se===1)Ce.children=ue;else if(1<Se){for(var He=Array(Se),Ge=0;Ge<Se;Ge++)He[Ge]=arguments[Ge+2];Ce.children=He}if(H&&H.defaultProps)for(me in Se=H.defaultProps,Se)Ce[me]===void 0&&(Ce[me]=Se[me]);return k(H,ye,Ce)},Je.createRef=function(){return{current:null}},Je.forwardRef=function(H){return{$$typeof:h,render:H}},Je.isValidElement=M,Je.lazy=function(H){return{$$typeof:v,_payload:{_status:-1,_result:H},_init:W}},Je.memo=function(H,J){return{$$typeof:g,type:H,compare:J===void 0?null:J}},Je.startTransition=function(H){var J=w.T,ue={};w.T=ue;try{var me=H(),Ce=w.S;Ce!==null&&Ce(ue,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(F,Te)}catch(ye){Te(ye)}finally{J!==null&&ue.types!==null&&(J.types=ue.types),w.T=J}},Je.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},Je.use=function(H){return w.H.use(H)},Je.useActionState=function(H,J,ue){return w.H.useActionState(H,J,ue)},Je.useCallback=function(H,J){return w.H.useCallback(H,J)},Je.useContext=function(H){return w.H.useContext(H)},Je.useDebugValue=function(){},Je.useDeferredValue=function(H,J){return w.H.useDeferredValue(H,J)},Je.useEffect=function(H,J){return w.H.useEffect(H,J)},Je.useEffectEvent=function(H){return w.H.useEffectEvent(H)},Je.useId=function(){return w.H.useId()},Je.useImperativeHandle=function(H,J,ue){return w.H.useImperativeHandle(H,J,ue)},Je.useInsertionEffect=function(H,J){return w.H.useInsertionEffect(H,J)},Je.useLayoutEffect=function(H,J){return w.H.useLayoutEffect(H,J)},Je.useMemo=function(H,J){return w.H.useMemo(H,J)},Je.useOptimistic=function(H,J){return w.H.useOptimistic(H,J)},Je.useReducer=function(H,J,ue){return w.H.useReducer(H,J,ue)},Je.useRef=function(H){return w.H.useRef(H)},Je.useState=function(H){return w.H.useState(H)},Je.useSyncExternalStore=function(H,J,ue){return w.H.useSyncExternalStore(H,J,ue)},Je.useTransition=function(){return w.H.useTransition()},Je.version="19.2.0",Je}var e2;function Ra(){return e2||(e2=1,ay.exports=D3()),ay.exports}var P=Ra();const de=rd(P);var oy={exports:{}},mu={},ly={exports:{}},cy={};var t2;function M3(){return t2||(t2=1,(function(n){function e($,K){var W=$.length;$.push(K);e:for(;0<W;){var Te=W-1>>>1,Re=$[Te];if(0<a(Re,K))$[Te]=K,$[W]=Re,W=Te;else break e}}function t($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var K=$[0],W=$.pop();if(W!==K){$[0]=W;e:for(var Te=0,Re=$.length,H=Re>>>1;Te<H;){var J=2*(Te+1)-1,ue=$[J],me=J+1,Ce=$[me];if(0>a(ue,W))me<Re&&0>a(Ce,ue)?($[Te]=Ce,$[me]=W,Te=me):($[Te]=ue,$[J]=W,Te=J);else if(me<Re&&0>a(Ce,W))$[Te]=Ce,$[me]=W,Te=me;else break e}}return K}function a($,K){var W=$.sortIndex-K.sortIndex;return W!==0?W:$.id-K.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var p=[],g=[],v=1,b=null,x=3,C=!1,R=!1,j=!1,A=!1,B=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function V($){for(var K=t(g);K!==null;){if(K.callback===null)r(g);else if(K.startTime<=$)r(g),K.sortIndex=K.expirationTime,e(p,K);else break;K=t(g)}}function z($){if(j=!1,V($),!R)if(t(p)!==null)R=!0,F||(F=!0,U());else{var K=t(g);K!==null&&Ee(z,K.startTime-$)}}var F=!1,w=-1,S=5,k=-1;function D(){return A?!0:!(n.unstable_now()-k<S)}function M(){if(A=!1,F){var $=n.unstable_now();k=$;var K=!0;try{e:{R=!1,j&&(j=!1,G(w),w=-1),C=!0;var W=x;try{t:{for(V($),b=t(p);b!==null&&!(b.expirationTime>$&&D());){var Te=b.callback;if(typeof Te=="function"){b.callback=null,x=b.priorityLevel;var Re=Te(b.expirationTime<=$);if($=n.unstable_now(),typeof Re=="function"){b.callback=Re,V($),K=!0;break t}b===t(p)&&r(p),V($)}else r(p);b=t(p)}if(b!==null)K=!0;else{var H=t(g);H!==null&&Ee(z,H.startTime-$),K=!1}}break e}finally{b=null,x=W,C=!1}K=void 0}}finally{K?U():F=!1}}}var U;if(typeof I=="function")U=function(){I(M)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,be=O.port2;O.port1.onmessage=M,U=function(){be.postMessage(null)}}else U=function(){B(M,0)};function Ee($,K){w=B(function(){$(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function($){switch(x){case 1:case 2:case 3:var K=3;break;default:K=x}var W=x;x=K;try{return $()}finally{x=W}},n.unstable_requestPaint=function(){A=!0},n.unstable_runWithPriority=function($,K){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var W=x;x=$;try{return K()}finally{x=W}},n.unstable_scheduleCallback=function($,K,W){var Te=n.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Te+W:Te):W=Te,$){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=W+Re,$={id:v++,callback:K,priorityLevel:$,startTime:W,expirationTime:Re,sortIndex:-1},W>Te?($.sortIndex=W,e(g,$),t(p)===null&&$===t(g)&&(j?(G(w),w=-1):j=!0,Ee(z,W-Te))):($.sortIndex=Re,e(p,$),R||C||(R=!0,F||(F=!0,U()))),$},n.unstable_shouldYield=D,n.unstable_wrapCallback=function($){var K=x;return function(){var W=x;x=K;try{return $.apply(this,arguments)}finally{x=W}}}})(cy)),cy}var n2;function O3(){return n2||(n2=1,ly.exports=M3()),ly.exports}var uy={exports:{}},Vn={};var r2;function P3(){if(r2)return Vn;r2=1;var n=Ra();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,g,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:p,containerInfo:g,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Vn.createPortal=function(p,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,v)},Vn.flushSync=function(p){var g=c.T,v=r.p;try{if(c.T=null,r.p=2,p)return p()}finally{c.T=g,r.p=v,r.d.f()}},Vn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(p,g))},Vn.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},Vn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var v=g.as,b=h(v,g.crossOrigin),x=typeof g.integrity=="string"?g.integrity:void 0,C=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?r.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:x,fetchPriority:C}):v==="script"&&r.d.X(p,{crossOrigin:b,integrity:x,fetchPriority:C,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Vn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=h(g.as,g.crossOrigin);r.d.M(p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(p)},Vn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,b=h(v,g.crossOrigin);r.d.L(p,v,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Vn.preloadModule=function(p,g){if(typeof p=="string")if(g){var v=h(g.as,g.crossOrigin);r.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(p)},Vn.requestFormReset=function(p){r.d.r(p)},Vn.unstable_batchedUpdates=function(p,g){return p(g)},Vn.useFormState=function(p,g,v){return c.H.useFormState(p,g,v)},Vn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Vn.version="19.2.0",Vn}var s2;function Y0(){if(s2)return uy.exports;s2=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),uy.exports=P3(),uy.exports}var i2;function L3(){if(i2)return mu;i2=1;var n=O3(),e=Ra(),t=Y0();function r(s){var i="https://react.dev/errors/"+s;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var i=s,o=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(o=i.return),s=i.return;while(s)}return i.tag===3?o:null}function c(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function h(s){if(s.tag===31){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function p(s){if(l(s)!==s)throw Error(r(188))}function g(s){var i=s.alternate;if(!i){if(i=l(s),i===null)throw Error(r(188));return i!==s?null:s}for(var o=s,u=i;;){var m=o.return;if(m===null)break;var y=m.alternate;if(y===null){if(u=m.return,u!==null){o=u;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===o)return p(m),s;if(y===u)return p(m),i;y=y.sibling}throw Error(r(188))}if(o.return!==u.return)o=m,u=y;else{for(var E=!1,N=m.child;N;){if(N===o){E=!0,o=m,u=y;break}if(N===u){E=!0,u=m,o=y;break}N=N.sibling}if(!E){for(N=y.child;N;){if(N===o){E=!0,o=y,u=m;break}if(N===u){E=!0,u=y,o=m;break}N=N.sibling}if(!E)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?s:i}function v(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s;for(s=s.child;s!==null;){if(i=v(s),i!==null)return i;s=s.sibling}return null}var b=Object.assign,x=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),I=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function U(s){return s===null||typeof s!="object"?null:(s=M&&s[M]||s["@@iterator"],typeof s=="function"?s:null)}var O=Symbol.for("react.client.reference");function be(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===O?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case j:return"Fragment";case B:return"Profiler";case A:return"StrictMode";case z:return"Suspense";case F:return"SuspenseList";case k:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case R:return"Portal";case I:return s.displayName||"Context";case G:return(s._context.displayName||"Context")+".Consumer";case V:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case w:return i=s.displayName||null,i!==null?i:be(s.type)||"Memo";case S:i=s._payload,s=s._init;try{return be(s(i))}catch{}}return null}var Ee=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},Te=[],Re=-1;function H(s){return{current:s}}function J(s){0>Re||(s.current=Te[Re],Te[Re]=null,Re--)}function ue(s,i){Re++,Te[Re]=s.current,s.current=i}var me=H(null),Ce=H(null),ye=H(null),Se=H(null);function He(s,i){switch(ue(ye,i),ue(Ce,s),ue(me,null),i.nodeType){case 9:case 11:s=(s=i.documentElement)&&(s=s.namespaceURI)?_x(s):0;break;default:if(s=i.tagName,i=i.namespaceURI)i=_x(i),s=xx(i,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}J(me),ue(me,s)}function Ge(){J(me),J(Ce),J(ye)}function _e(s){s.memoizedState!==null&&ue(Se,s);var i=me.current,o=xx(i,s.type);i!==o&&(ue(Ce,s),ue(me,o))}function ce(s){Ce.current===s&&(J(me),J(Ce)),Se.current===s&&(J(Se),uu._currentValue=W)}var ve,ie;function Ne(s){if(ve===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);ve=i&&i[1]||"",ie=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ve+s+ie}var Me=!1;function Q(s,i){if(!s||Me)return"";Me=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(se){var ne=se}Reflect.construct(s,[],fe)}else{try{fe.call()}catch(se){ne=se}s.call(fe.prototype)}}else{try{throw Error()}catch(se){ne=se}(fe=s())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(se){if(se&&ne&&typeof se.stack=="string")return[se.stack,ne.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),E=y[0],N=y[1];if(E&&N){var q=E.split(`
`),te=N.split(`
`);for(m=u=0;u<q.length&&!q[u].includes("DetermineComponentFrameRoot");)u++;for(;m<te.length&&!te[m].includes("DetermineComponentFrameRoot");)m++;if(u===q.length||m===te.length)for(u=q.length-1,m=te.length-1;1<=u&&0<=m&&q[u]!==te[m];)m--;for(;1<=u&&0<=m;u--,m--)if(q[u]!==te[m]){if(u!==1||m!==1)do if(u--,m--,0>m||q[u]!==te[m]){var le=`
`+q[u].replace(" at new "," at ");return s.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",s.displayName)),le}while(1<=u&&0<=m);break}}}finally{Me=!1,Error.prepareStackTrace=o}return(o=s?s.displayName||s.name:"")?Ne(o):""}function ae(s,i){switch(s.tag){case 26:case 27:case 5:return Ne(s.type);case 16:return Ne("Lazy");case 13:return s.child!==i&&i!==null?Ne("Suspense Fallback"):Ne("Suspense");case 19:return Ne("SuspenseList");case 0:case 15:return Q(s.type,!1);case 11:return Q(s.type.render,!1);case 1:return Q(s.type,!0);case 31:return Ne("Activity");default:return""}}function we(s){try{var i="",o=null;do i+=ae(s,o),o=s,s=s.return;while(s);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Ie=Object.prototype.hasOwnProperty,Ye=n.unstable_scheduleCallback,ot=n.unstable_cancelCallback,Qt=n.unstable_shouldYield,dr=n.unstable_requestPaint,xe=n.unstable_now,Be=n.unstable_getCurrentPriorityLevel,vt=n.unstable_ImmediatePriority,Xt=n.unstable_UserBlockingPriority,Gn=n.unstable_NormalPriority,Jn=n.unstable_LowPriority,Ht=n.unstable_IdlePriority,Ai=n.log,Ed=n.unstable_setDisableYieldValue,Fr=null,Cn=null;function Ar(s){if(typeof Ai=="function"&&Ed(s),Cn&&typeof Cn.setStrictMode=="function")try{Cn.setStrictMode(Fr,s)}catch{}}var Wt=Math.clz32?Math.clz32:Sd,wd=Math.log,Po=Math.LN2;function Sd(s){return s>>>=0,s===0?32:31-(wd(s)/Po|0)|0}var os=256,Da=262144,rn=4194304;function ls(s){var i=s&42;if(i!==0)return i;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function cs(s,i,o){var u=s.pendingLanes;if(u===0)return 0;var m=0,y=s.suspendedLanes,E=s.pingedLanes;s=s.warmLanes;var N=u&134217727;return N!==0?(u=N&~y,u!==0?m=ls(u):(E&=N,E!==0?m=ls(E):o||(o=N&~s,o!==0&&(m=ls(o))))):(N=u&~y,N!==0?m=ls(N):E!==0?m=ls(E):o||(o=u&~s,o!==0&&(m=ls(o)))),m===0?0:i!==0&&i!==m&&(i&y)===0&&(y=m&-m,o=i&-i,y>=o||y===32&&(o&4194048)!==0)?i:m}function $r(s,i){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&i)===0}function cm(s,i){switch(s){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Td(){var s=rn;return rn<<=1,(rn&62914560)===0&&(rn=4194304),s}function us(s){for(var i=[],o=0;31>o;o++)i.push(s);return i}function Ma(s,i){s.pendingLanes|=i,i!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function um(s,i,o,u,m,y){var E=s.pendingLanes;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=o,s.entangledLanes&=o,s.errorRecoveryDisabledLanes&=o,s.shellSuspendCounter=0;var N=s.entanglements,q=s.expirationTimes,te=s.hiddenUpdates;for(o=E&~o;0<o;){var le=31-Wt(o),fe=1<<le;N[le]=0,q[le]=-1;var ne=te[le];if(ne!==null)for(te[le]=null,le=0;le<ne.length;le++){var se=ne[le];se!==null&&(se.lane&=-536870913)}o&=~fe}u!==0&&Oa(s,u,0),y!==0&&m===0&&s.tag!==0&&(s.suspendedLanes|=y&~(E&~i))}function Oa(s,i,o){s.pendingLanes|=i,s.suspendedLanes&=~i;var u=31-Wt(i);s.entangledLanes|=i,s.entanglements[u]=s.entanglements[u]|1073741824|o&261930}function mc(s,i){var o=s.entangledLanes|=i;for(s=s.entanglements;o;){var u=31-Wt(o),m=1<<u;m&i|s[u]&i&&(s[u]|=i),o&=~m}}function gc(s,i){var o=i&-i;return o=(o&42)!==0?1:Pa(o),(o&(s.suspendedLanes|i))!==0?0:o}function Pa(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ks(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Cd(){var s=K.p;return s!==0?s:(s=window.event,s===void 0?32:Hx(s.type))}function Hr(s,i){var o=K.p;try{return K.p=s,i()}finally{K.p=o}}var qr=Math.random().toString(36).slice(2),sn="__reactFiber$"+qr,xn="__reactProps$"+qr,ds="__reactContainer$"+qr,Lo="__reactEvents$"+qr,dm="__reactListeners$"+qr,Ad="__reactHandles$"+qr,kd="__reactResources$"+qr,hs="__reactMarker$"+qr;function Vo(s){delete s[sn],delete s[xn],delete s[Lo],delete s[dm],delete s[Ad]}function fs(s){var i=s[sn];if(i)return i;for(var o=s.parentNode;o;){if(i=o[ds]||o[sn]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(s=kx(s);s!==null;){if(o=s[sn])return o;s=kx(s)}return i}s=o,o=s.parentNode}return null}function kr(s){if(s=s[sn]||s[ds]){var i=s.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return s}return null}function hr(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s.stateNode;throw Error(r(33))}function ps(s){var i=s[kd];return i||(i=s[kd]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function an(s){s[hs]=!0}var yc=new Set,vc={};function ms(s,i){gs(s,i),gs(s+"Capture",i)}function gs(s,i){for(vc[s]=i,s=0;s<i.length;s++)yc.add(i[s])}var bc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_c={},xc={};function Rd(s){return Ie.call(xc,s)?!0:Ie.call(_c,s)?!1:bc.test(s)?xc[s]=!0:(_c[s]=!0,!1)}function Uo(s,i,o){if(Rd(i))if(o===null)s.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":s.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(i);return}}s.setAttribute(i,""+o)}}function fr(s,i,o){if(o===null)s.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(i);return}s.setAttribute(i,""+o)}}function on(s,i,o,u){if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttributeNS(i,o,""+u)}}function En(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ki(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ec(s,i,o){var u=Object.getOwnPropertyDescriptor(s.constructor.prototype,i);if(!s.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,y=u.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return m.call(this)},set:function(E){o=""+E,y.call(this,E)}}),Object.defineProperty(s,i,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(E){o=""+E},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function Ct(s){if(!s._valueTracker){var i=ki(s)?"checked":"value";s._valueTracker=Ec(s,i,""+s[i])}}function La(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return s&&(u=ki(s)?s.checked?"true":"false":s.value),s=u,s!==o?(i.setValue(s),!0):!1}function ys(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Va=/[\n"\\]/g;function Zn(s){return s.replace(Va,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function zo(s,i,o,u,m,y,E,N){s.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?s.type=E:s.removeAttribute("type"),i!=null?E==="number"?(i===0&&s.value===""||s.value!=i)&&(s.value=""+En(i)):s.value!==""+En(i)&&(s.value=""+En(i)):E!=="submit"&&E!=="reset"||s.removeAttribute("value"),i!=null?wc(s,E,En(i)):o!=null?wc(s,E,En(o)):u!=null&&s.removeAttribute("value"),m==null&&y!=null&&(s.defaultChecked=!!y),m!=null&&(s.checked=m&&typeof m!="function"&&typeof m!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?s.name=""+En(N):s.removeAttribute("name")}function Nd(s,i,o,u,m,y,E,N){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(s.type=y),i!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||i!=null)){Ct(s);return}o=o!=null?""+En(o):"",i=i!=null?""+En(i):o,N||i===s.value||(s.value=i),s.defaultValue=i}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=N?s.checked:!!u,s.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.name=E),Ct(s)}function wc(s,i,o){i==="number"&&ys(s.ownerDocument)===s||s.defaultValue===""+o||(s.defaultValue=""+o)}function Ri(s,i,o,u){if(s=s.options,i){i={};for(var m=0;m<o.length;m++)i["$"+o[m]]=!0;for(o=0;o<s.length;o++)m=i.hasOwnProperty("$"+s[o].value),s[o].selected!==m&&(s[o].selected=m),m&&u&&(s[o].defaultSelected=!0)}else{for(o=""+En(o),i=null,m=0;m<s.length;m++){if(s[m].value===o){s[m].selected=!0,u&&(s[m].defaultSelected=!0);return}i!==null||s[m].disabled||(i=s[m])}i!==null&&(i.selected=!0)}}function Id(s,i,o){if(i!=null&&(i=""+En(i),i!==s.value&&(s.value=i),o==null)){s.defaultValue!==i&&(s.defaultValue=i);return}s.defaultValue=o!=null?""+En(o):""}function Ni(s,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(r(92));if(Ee(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=En(i),s.defaultValue=o,u=s.textContent,u===o&&u!==""&&u!==null&&(s.value=u),Ct(s)}function er(s,i){if(i){var o=s.firstChild;if(o&&o===s.lastChild&&o.nodeType===3){o.nodeValue=i;return}}s.textContent=i}var jd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sc(s,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?s.setProperty(i,""):i==="float"?s.cssFloat="":s[i]="":u?s.setProperty(i,o):typeof o!="number"||o===0||jd.has(i)?i==="float"?s.cssFloat=o:s[i]=(""+o).trim():s[i]=o+"px"}function Tc(s,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(s=s.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var m in i)u=i[m],i.hasOwnProperty(m)&&o[m]!==u&&Sc(s,m,u)}else for(var y in i)i.hasOwnProperty(y)&&Sc(s,y,i[y])}function Bo(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ii=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fo(s){return Ii.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Gr(){}var Cc=null;function Rr(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ji=null,vs=null;function Ua(s){var i=kr(s);if(i&&(s=i.stateNode)){var o=s[xn]||null;e:switch(s=i.stateNode,i.type){case"input":if(zo(s,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=s;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Zn(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==s&&u.form===s.form){var m=u[xn]||null;if(!m)throw Error(r(90));zo(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===s.form&&La(u)}break e;case"textarea":Id(s,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Ri(s,!!o.multiple,i,!1)}}}var $o=!1;function Di(s,i,o){if($o)return s(i,o);$o=!0;try{var u=s(i);return u}finally{if($o=!1,(ji!==null||vs!==null)&&(Ch(),ji&&(i=ji,s=vs,vs=ji=null,Ua(i),s)))for(i=0;i<s.length;i++)Ua(s[i])}}function Yr(s,i){var o=s.stateNode;if(o===null)return null;var u=o[xn]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break e;default:s=!1}if(s)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var Nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),za=!1;if(Nr)try{var Nt={};Object.defineProperty(Nt,"passive",{get:function(){za=!0}}),window.addEventListener("test",Nt,Nt),window.removeEventListener("test",Nt,Nt)}catch{za=!1}var bs=null,Ac=null,Ba=null;function kc(){if(Ba)return Ba;var s,i=Ac,o=i.length,u,m="value"in bs?bs.value:bs.textContent,y=m.length;for(s=0;s<o&&i[s]===m[s];s++);var E=o-s;for(u=1;u<=E&&i[o-u]===m[y-u];u++);return Ba=m.slice(s,1<u?1-u:void 0)}function Fa(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function Qs(){return!0}function Kr(){return!1}function An(s){function i(o,u,m,y,E){this._reactName=o,this._targetInst=m,this.type=u,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var N in s)s.hasOwnProperty(N)&&(o=s[N],this[N]=o?o(y):y[N]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Qs:Kr,this.isPropagationStopped=Kr,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Qs)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Qs)},persist:function(){},isPersistent:Qs}),i}var Xs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_s=An(Xs),Mi=b({},Xs,{view:0,detail:0}),Rc=An(Mi),Oi,Ho,xs,qo=b({},Mi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pi,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==xs&&(xs&&s.type==="mousemove"?(Oi=s.screenX-xs.screenX,Ho=s.screenY-xs.screenY):Ho=Oi=0,xs=s),Oi)},movementY:function(s){return"movementY"in s?s.movementY:Ho}}),Nc=An(qo),$a=b({},qo,{dataTransfer:0}),Md=An($a),Od=b({},Mi,{relatedTarget:0}),Ha=An(Od),Ic=b({},Xs,{animationName:0,elapsedTime:0,pseudoElement:0}),Pd=An(Ic),Go=b({},Xs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Ld=An(Go),Vd=b({},Xs,{data:0}),Es=An(Vd),Ud={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fd(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=Bd[s])?!!i[s]:!1}function Pi(){return Fd}var Yn=b({},Mi,{key:function(s){if(s.key){var i=Ud[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=Fa(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?zd[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pi,charCode:function(s){return s.type==="keypress"?Fa(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Fa(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),$d=An(Yn),Hd=b({},qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ws=An(Hd),f=b({},Mi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pi}),_=An(f),T=b({},Xs,{propertyName:0,elapsedTime:0,pseudoElement:0}),L=An(T),Z=b({},qo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),re=An(Z),Ae=b({},Xs,{newState:0,oldState:0}),tt=An(Ae),Jt=[9,13,27,32],Et=Nr&&"CompositionEvent"in window,Bt=null;Nr&&"documentMode"in document&&(Bt=document.documentMode);var Ir=Nr&&"TextEvent"in window&&!Bt,ws=Nr&&(!Et||Bt&&8<Bt&&11>=Bt),Qr=" ",Xr=!1;function qa(s,i){switch(s){case"keyup":return Jt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yo(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ko=!1;function Zk(s,i){switch(s){case"compositionend":return Yo(i);case"keypress":return i.which!==32?null:(Xr=!0,Qr);case"textInput":return s=i.data,s===Qr&&Xr?null:s;default:return null}}function eR(s,i){if(Ko)return s==="compositionend"||!Et&&qa(s,i)?(s=kc(),Ba=Ac=bs=null,Ko=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return ws&&i.locale!=="ko"?null:i.data;default:return null}}var tR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function I1(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!tR[s.type]:i==="textarea"}function j1(s,i,o,u){ji?vs?vs.push(u):vs=[u]:ji=u,i=Dh(i,"onChange"),0<i.length&&(o=new _s("onChange","change",null,o,u),s.push({event:o,listeners:i}))}var jc=null,Dc=null;function nR(s){px(s,0)}function qd(s){var i=hr(s);if(La(i))return s}function D1(s,i){if(s==="change")return i}var M1=!1;if(Nr){var hm;if(Nr){var fm="oninput"in document;if(!fm){var O1=document.createElement("div");O1.setAttribute("oninput","return;"),fm=typeof O1.oninput=="function"}hm=fm}else hm=!1;M1=hm&&(!document.documentMode||9<document.documentMode)}function P1(){jc&&(jc.detachEvent("onpropertychange",L1),Dc=jc=null)}function L1(s){if(s.propertyName==="value"&&qd(Dc)){var i=[];j1(i,Dc,s,Rr(s)),Di(nR,i)}}function rR(s,i,o){s==="focusin"?(P1(),jc=i,Dc=o,jc.attachEvent("onpropertychange",L1)):s==="focusout"&&P1()}function sR(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return qd(Dc)}function iR(s,i){if(s==="click")return qd(i)}function aR(s,i){if(s==="input"||s==="change")return qd(i)}function oR(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var pr=typeof Object.is=="function"?Object.is:oR;function Mc(s,i){if(pr(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var o=Object.keys(s),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var m=o[u];if(!Ie.call(i,m)||!pr(s[m],i[m]))return!1}return!0}function V1(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function U1(s,i){var o=V1(s);s=0;for(var u;o;){if(o.nodeType===3){if(u=s+o.textContent.length,s<=i&&u>=i)return{node:o,offset:i-s};s=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=V1(o)}}function z1(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?z1(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function B1(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var i=ys(s.document);i instanceof s.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)s=i.contentWindow;else break;i=ys(s.document)}return i}function pm(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}var lR=Nr&&"documentMode"in document&&11>=document.documentMode,Qo=null,mm=null,Oc=null,gm=!1;function F1(s,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;gm||Qo==null||Qo!==ys(u)||(u=Qo,"selectionStart"in u&&pm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Oc&&Mc(Oc,u)||(Oc=u,u=Dh(mm,"onSelect"),0<u.length&&(i=new _s("onSelect","select",null,i,o),s.push({event:i,listeners:u}),i.target=Qo)))}function Ga(s,i){var o={};return o[s.toLowerCase()]=i.toLowerCase(),o["Webkit"+s]="webkit"+i,o["Moz"+s]="moz"+i,o}var Xo={animationend:Ga("Animation","AnimationEnd"),animationiteration:Ga("Animation","AnimationIteration"),animationstart:Ga("Animation","AnimationStart"),transitionrun:Ga("Transition","TransitionRun"),transitionstart:Ga("Transition","TransitionStart"),transitioncancel:Ga("Transition","TransitionCancel"),transitionend:Ga("Transition","TransitionEnd")},ym={},$1={};Nr&&($1=document.createElement("div").style,"AnimationEvent"in window||(delete Xo.animationend.animation,delete Xo.animationiteration.animation,delete Xo.animationstart.animation),"TransitionEvent"in window||delete Xo.transitionend.transition);function Ya(s){if(ym[s])return ym[s];if(!Xo[s])return s;var i=Xo[s],o;for(o in i)if(i.hasOwnProperty(o)&&o in $1)return ym[s]=i[o];return s}var H1=Ya("animationend"),q1=Ya("animationiteration"),G1=Ya("animationstart"),cR=Ya("transitionrun"),uR=Ya("transitionstart"),dR=Ya("transitioncancel"),Y1=Ya("transitionend"),K1=new Map,vm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vm.push("scrollEnd");function Wr(s,i){K1.set(s,i),ms(i,[s])}var Gd=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},jr=[],Wo=0,bm=0;function Yd(){for(var s=Wo,i=bm=Wo=0;i<s;){var o=jr[i];jr[i++]=null;var u=jr[i];jr[i++]=null;var m=jr[i];jr[i++]=null;var y=jr[i];if(jr[i++]=null,u!==null&&m!==null){var E=u.pending;E===null?m.next=m:(m.next=E.next,E.next=m),u.pending=m}y!==0&&Q1(o,m,y)}}function Kd(s,i,o,u){jr[Wo++]=s,jr[Wo++]=i,jr[Wo++]=o,jr[Wo++]=u,bm|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function _m(s,i,o,u){return Kd(s,i,o,u),Qd(s)}function Ka(s,i){return Kd(s,null,null,i),Qd(s)}function Q1(s,i,o){s.lanes|=o;var u=s.alternate;u!==null&&(u.lanes|=o);for(var m=!1,y=s.return;y!==null;)y.childLanes|=o,u=y.alternate,u!==null&&(u.childLanes|=o),y.tag===22&&(s=y.stateNode,s===null||s._visibility&1||(m=!0)),s=y,y=y.return;return s.tag===3?(y=s.stateNode,m&&i!==null&&(m=31-Wt(o),s=y.hiddenUpdates,u=s[m],u===null?s[m]=[i]:u.push(i),i.lane=o|536870912),y):null}function Qd(s){if(50<ru)throw ru=0,Rg=null,Error(r(185));for(var i=s.return;i!==null;)s=i,i=s.return;return s.tag===3?s.stateNode:null}var Jo={};function hR(s,i,o,u){this.tag=s,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mr(s,i,o,u){return new hR(s,i,o,u)}function xm(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Js(s,i){var o=s.alternate;return o===null?(o=mr(s.tag,i,s.key,s.mode),o.elementType=s.elementType,o.type=s.type,o.stateNode=s.stateNode,o.alternate=s,s.alternate=o):(o.pendingProps=i,o.type=s.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=s.flags&65011712,o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,i=s.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=s.sibling,o.index=s.index,o.ref=s.ref,o.refCleanup=s.refCleanup,o}function X1(s,i){s.flags&=65011714;var o=s.alternate;return o===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,i=o.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s}function Xd(s,i,o,u,m,y){var E=0;if(u=s,typeof s=="function")xm(s)&&(E=1);else if(typeof s=="string")E=y3(s,o,me.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case k:return s=mr(31,o,i,m),s.elementType=k,s.lanes=y,s;case j:return Qa(o.children,m,y,i);case A:E=8,m|=24;break;case B:return s=mr(12,o,i,m|2),s.elementType=B,s.lanes=y,s;case z:return s=mr(13,o,i,m),s.elementType=z,s.lanes=y,s;case F:return s=mr(19,o,i,m),s.elementType=F,s.lanes=y,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case I:E=10;break e;case G:E=9;break e;case V:E=11;break e;case w:E=14;break e;case S:E=16,u=null;break e}E=29,o=Error(r(130,s===null?"null":typeof s,"")),u=null}return i=mr(E,o,i,m),i.elementType=s,i.type=u,i.lanes=y,i}function Qa(s,i,o,u){return s=mr(7,s,u,i),s.lanes=o,s}function Em(s,i,o){return s=mr(6,s,null,i),s.lanes=o,s}function W1(s){var i=mr(18,null,null,0);return i.stateNode=s,i}function wm(s,i,o){return i=mr(4,s.children!==null?s.children:[],s.key,i),i.lanes=o,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}var J1=new WeakMap;function Dr(s,i){if(typeof s=="object"&&s!==null){var o=J1.get(s);return o!==void 0?o:(i={value:s,source:i,stack:we(i)},J1.set(s,i),i)}return{value:s,source:i,stack:we(i)}}var Zo=[],el=0,Wd=null,Pc=0,Mr=[],Or=0,Li=null,Ss=1,Ts="";function Zs(s,i){Zo[el++]=Pc,Zo[el++]=Wd,Wd=s,Pc=i}function Z1(s,i,o){Mr[Or++]=Ss,Mr[Or++]=Ts,Mr[Or++]=Li,Li=s;var u=Ss;s=Ts;var m=32-Wt(u)-1;u&=~(1<<m),o+=1;var y=32-Wt(i)+m;if(30<y){var E=m-m%5;y=(u&(1<<E)-1).toString(32),u>>=E,m-=E,Ss=1<<32-Wt(i)+m|o<<m|u,Ts=y+s}else Ss=1<<y|o<<m|u,Ts=s}function Sm(s){s.return!==null&&(Zs(s,1),Z1(s,1,0))}function Tm(s){for(;s===Wd;)Wd=Zo[--el],Zo[el]=null,Pc=Zo[--el],Zo[el]=null;for(;s===Li;)Li=Mr[--Or],Mr[Or]=null,Ts=Mr[--Or],Mr[Or]=null,Ss=Mr[--Or],Mr[Or]=null}function eb(s,i){Mr[Or++]=Ss,Mr[Or++]=Ts,Mr[Or++]=Li,Ss=i.id,Ts=i.overflow,Li=s}var kn=null,Lt=null,gt=!1,Vi=null,Pr=!1,Cm=Error(r(519));function Ui(s){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Lc(Dr(i,s)),Cm}function tb(s){var i=s.stateNode,o=s.type,u=s.memoizedProps;switch(i[sn]=s,i[xn]=u,o){case"dialog":ct("cancel",i),ct("close",i);break;case"iframe":case"object":case"embed":ct("load",i);break;case"video":case"audio":for(o=0;o<iu.length;o++)ct(iu[o],i);break;case"source":ct("error",i);break;case"img":case"image":case"link":ct("error",i),ct("load",i);break;case"details":ct("toggle",i);break;case"input":ct("invalid",i),Nd(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":ct("invalid",i);break;case"textarea":ct("invalid",i),Ni(i,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||vx(i.textContent,o)?(u.popover!=null&&(ct("beforetoggle",i),ct("toggle",i)),u.onScroll!=null&&ct("scroll",i),u.onScrollEnd!=null&&ct("scrollend",i),u.onClick!=null&&(i.onclick=Gr),i=!0):i=!1,i||Ui(s,!0)}function nb(s){for(kn=s.return;kn;)switch(kn.tag){case 5:case 31:case 13:Pr=!1;return;case 27:case 3:Pr=!0;return;default:kn=kn.return}}function tl(s){if(s!==kn)return!1;if(!gt)return nb(s),gt=!0,!1;var i=s.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=s.type,o=!(o!=="form"&&o!=="button")||Hg(s.type,s.memoizedProps)),o=!o),o&&Lt&&Ui(s),nb(s),i===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Lt=Ax(s)}else if(i===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Lt=Ax(s)}else i===27?(i=Lt,Zi(s.type)?(s=Qg,Qg=null,Lt=s):Lt=i):Lt=kn?Vr(s.stateNode.nextSibling):null;return!0}function Xa(){Lt=kn=null,gt=!1}function Am(){var s=Vi;return s!==null&&(sr===null?sr=s:sr.push.apply(sr,s),Vi=null),s}function Lc(s){Vi===null?Vi=[s]:Vi.push(s)}var km=H(null),Wa=null,ei=null;function zi(s,i,o){ue(km,i._currentValue),i._currentValue=o}function ti(s){s._currentValue=km.current,J(km)}function Rm(s,i,o){for(;s!==null;){var u=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),s===o)break;s=s.return}}function Nm(s,i,o,u){var m=s.child;for(m!==null&&(m.return=s);m!==null;){var y=m.dependencies;if(y!==null){var E=m.child;y=y.firstContext;e:for(;y!==null;){var N=y;y=m;for(var q=0;q<i.length;q++)if(N.context===i[q]){y.lanes|=o,N=y.alternate,N!==null&&(N.lanes|=o),Rm(y.return,o,s),u||(E=null);break e}y=N.next}}else if(m.tag===18){if(E=m.return,E===null)throw Error(r(341));E.lanes|=o,y=E.alternate,y!==null&&(y.lanes|=o),Rm(E,o,s),E=null}else E=m.child;if(E!==null)E.return=m;else for(E=m;E!==null;){if(E===s){E=null;break}if(m=E.sibling,m!==null){m.return=E.return,E=m;break}E=E.return}m=E}}function nl(s,i,o,u){s=null;for(var m=i,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var E=m.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var N=m.type;pr(m.pendingProps.value,E.value)||(s!==null?s.push(N):s=[N])}}else if(m===Se.current){if(E=m.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(s!==null?s.push(uu):s=[uu])}m=m.return}s!==null&&Nm(i,s,o,u),i.flags|=262144}function Jd(s){for(s=s.firstContext;s!==null;){if(!pr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Ja(s){Wa=s,ei=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Rn(s){return rb(Wa,s)}function Zd(s,i){return Wa===null&&Ja(s),rb(s,i)}function rb(s,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},ei===null){if(s===null)throw Error(r(308));ei=i,s.dependencies={lanes:0,firstContext:i},s.flags|=524288}else ei=ei.next=i;return o}var fR=typeof AbortController<"u"?AbortController:function(){var s=[],i=this.signal={aborted:!1,addEventListener:function(o,u){s.push(u)}};this.abort=function(){i.aborted=!0,s.forEach(function(o){return o()})}},pR=n.unstable_scheduleCallback,mR=n.unstable_NormalPriority,ln={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Im(){return{controller:new fR,data:new Map,refCount:0}}function Vc(s){s.refCount--,s.refCount===0&&pR(mR,function(){s.controller.abort()})}var Uc=null,jm=0,rl=0,sl=null;function gR(s,i){if(Uc===null){var o=Uc=[];jm=0,rl=Og(),sl={status:"pending",value:void 0,then:function(u){o.push(u)}}}return jm++,i.then(sb,sb),i}function sb(){if(--jm===0&&Uc!==null){sl!==null&&(sl.status="fulfilled");var s=Uc;Uc=null,rl=0,sl=null;for(var i=0;i<s.length;i++)(0,s[i])()}}function yR(s,i){var o=[],u={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return s.then(function(){u.status="fulfilled",u.value=i;for(var m=0;m<o.length;m++)(0,o[m])(i)},function(m){for(u.status="rejected",u.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),u}var ib=$.S;$.S=function(s,i){F_=xe(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&gR(s,i),ib!==null&&ib(s,i)};var Za=H(null);function Dm(){var s=Za.current;return s!==null?s:Mt.pooledCache}function eh(s,i){i===null?ue(Za,Za.current):ue(Za,i.pool)}function ab(){var s=Dm();return s===null?null:{parent:ln._currentValue,pool:s}}var il=Error(r(460)),Mm=Error(r(474)),th=Error(r(542)),nh={then:function(){}};function ob(s){return s=s.status,s==="fulfilled"||s==="rejected"}function lb(s,i,o){switch(o=s[o],o===void 0?s.push(i):o!==i&&(i.then(Gr,Gr),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,ub(s),s;default:if(typeof i.status=="string")i.then(Gr,Gr);else{if(s=Mt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=i,s.status="pending",s.then(function(u){if(i.status==="pending"){var m=i;m.status="fulfilled",m.value=u}},function(u){if(i.status==="pending"){var m=i;m.status="rejected",m.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,ub(s),s}throw to=i,il}}function eo(s){try{var i=s._init;return i(s._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(to=o,il):o}}var to=null;function cb(){if(to===null)throw Error(r(459));var s=to;return to=null,s}function ub(s){if(s===il||s===th)throw Error(r(483))}var al=null,zc=0;function rh(s){var i=zc;return zc+=1,al===null&&(al=[]),lb(al,s,i)}function Bc(s,i){i=i.props.ref,s.ref=i!==void 0?i:null}function sh(s,i){throw i.$$typeof===x?Error(r(525)):(s=Object.prototype.toString.call(i),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s)))}function db(s){function i(X,Y){if(s){var ee=X.deletions;ee===null?(X.deletions=[Y],X.flags|=16):ee.push(Y)}}function o(X,Y){if(!s)return null;for(;Y!==null;)i(X,Y),Y=Y.sibling;return null}function u(X){for(var Y=new Map;X!==null;)X.key!==null?Y.set(X.key,X):Y.set(X.index,X),X=X.sibling;return Y}function m(X,Y){return X=Js(X,Y),X.index=0,X.sibling=null,X}function y(X,Y,ee){return X.index=ee,s?(ee=X.alternate,ee!==null?(ee=ee.index,ee<Y?(X.flags|=67108866,Y):ee):(X.flags|=67108866,Y)):(X.flags|=1048576,Y)}function E(X){return s&&X.alternate===null&&(X.flags|=67108866),X}function N(X,Y,ee,he){return Y===null||Y.tag!==6?(Y=Em(ee,X.mode,he),Y.return=X,Y):(Y=m(Y,ee),Y.return=X,Y)}function q(X,Y,ee,he){var $e=ee.type;return $e===j?le(X,Y,ee.props.children,he,ee.key):Y!==null&&(Y.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===S&&eo($e)===Y.type)?(Y=m(Y,ee.props),Bc(Y,ee),Y.return=X,Y):(Y=Xd(ee.type,ee.key,ee.props,null,X.mode,he),Bc(Y,ee),Y.return=X,Y)}function te(X,Y,ee,he){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==ee.containerInfo||Y.stateNode.implementation!==ee.implementation?(Y=wm(ee,X.mode,he),Y.return=X,Y):(Y=m(Y,ee.children||[]),Y.return=X,Y)}function le(X,Y,ee,he,$e){return Y===null||Y.tag!==7?(Y=Qa(ee,X.mode,he,$e),Y.return=X,Y):(Y=m(Y,ee),Y.return=X,Y)}function fe(X,Y,ee){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=Em(""+Y,X.mode,ee),Y.return=X,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case C:return ee=Xd(Y.type,Y.key,Y.props,null,X.mode,ee),Bc(ee,Y),ee.return=X,ee;case R:return Y=wm(Y,X.mode,ee),Y.return=X,Y;case S:return Y=eo(Y),fe(X,Y,ee)}if(Ee(Y)||U(Y))return Y=Qa(Y,X.mode,ee,null),Y.return=X,Y;if(typeof Y.then=="function")return fe(X,rh(Y),ee);if(Y.$$typeof===I)return fe(X,Zd(X,Y),ee);sh(X,Y)}return null}function ne(X,Y,ee,he){var $e=Y!==null?Y.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return $e!==null?null:N(X,Y,""+ee,he);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case C:return ee.key===$e?q(X,Y,ee,he):null;case R:return ee.key===$e?te(X,Y,ee,he):null;case S:return ee=eo(ee),ne(X,Y,ee,he)}if(Ee(ee)||U(ee))return $e!==null?null:le(X,Y,ee,he,null);if(typeof ee.then=="function")return ne(X,Y,rh(ee),he);if(ee.$$typeof===I)return ne(X,Y,Zd(X,ee),he);sh(X,ee)}return null}function se(X,Y,ee,he,$e){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return X=X.get(ee)||null,N(Y,X,""+he,$e);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case C:return X=X.get(he.key===null?ee:he.key)||null,q(Y,X,he,$e);case R:return X=X.get(he.key===null?ee:he.key)||null,te(Y,X,he,$e);case S:return he=eo(he),se(X,Y,ee,he,$e)}if(Ee(he)||U(he))return X=X.get(ee)||null,le(Y,X,he,$e,null);if(typeof he.then=="function")return se(X,Y,ee,rh(he),$e);if(he.$$typeof===I)return se(X,Y,ee,Zd(Y,he),$e);sh(Y,he)}return null}function Oe(X,Y,ee,he){for(var $e=null,bt=null,ze=Y,st=Y=0,dt=null;ze!==null&&st<ee.length;st++){ze.index>st?(dt=ze,ze=null):dt=ze.sibling;var _t=ne(X,ze,ee[st],he);if(_t===null){ze===null&&(ze=dt);break}s&&ze&&_t.alternate===null&&i(X,ze),Y=y(_t,Y,st),bt===null?$e=_t:bt.sibling=_t,bt=_t,ze=dt}if(st===ee.length)return o(X,ze),gt&&Zs(X,st),$e;if(ze===null){for(;st<ee.length;st++)ze=fe(X,ee[st],he),ze!==null&&(Y=y(ze,Y,st),bt===null?$e=ze:bt.sibling=ze,bt=ze);return gt&&Zs(X,st),$e}for(ze=u(ze);st<ee.length;st++)dt=se(ze,X,st,ee[st],he),dt!==null&&(s&&dt.alternate!==null&&ze.delete(dt.key===null?st:dt.key),Y=y(dt,Y,st),bt===null?$e=dt:bt.sibling=dt,bt=dt);return s&&ze.forEach(function(sa){return i(X,sa)}),gt&&Zs(X,st),$e}function Ke(X,Y,ee,he){if(ee==null)throw Error(r(151));for(var $e=null,bt=null,ze=Y,st=Y=0,dt=null,_t=ee.next();ze!==null&&!_t.done;st++,_t=ee.next()){ze.index>st?(dt=ze,ze=null):dt=ze.sibling;var sa=ne(X,ze,_t.value,he);if(sa===null){ze===null&&(ze=dt);break}s&&ze&&sa.alternate===null&&i(X,ze),Y=y(sa,Y,st),bt===null?$e=sa:bt.sibling=sa,bt=sa,ze=dt}if(_t.done)return o(X,ze),gt&&Zs(X,st),$e;if(ze===null){for(;!_t.done;st++,_t=ee.next())_t=fe(X,_t.value,he),_t!==null&&(Y=y(_t,Y,st),bt===null?$e=_t:bt.sibling=_t,bt=_t);return gt&&Zs(X,st),$e}for(ze=u(ze);!_t.done;st++,_t=ee.next())_t=se(ze,X,st,_t.value,he),_t!==null&&(s&&_t.alternate!==null&&ze.delete(_t.key===null?st:_t.key),Y=y(_t,Y,st),bt===null?$e=_t:bt.sibling=_t,bt=_t);return s&&ze.forEach(function(k3){return i(X,k3)}),gt&&Zs(X,st),$e}function Dt(X,Y,ee,he){if(typeof ee=="object"&&ee!==null&&ee.type===j&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case C:e:{for(var $e=ee.key;Y!==null;){if(Y.key===$e){if($e=ee.type,$e===j){if(Y.tag===7){o(X,Y.sibling),he=m(Y,ee.props.children),he.return=X,X=he;break e}}else if(Y.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===S&&eo($e)===Y.type){o(X,Y.sibling),he=m(Y,ee.props),Bc(he,ee),he.return=X,X=he;break e}o(X,Y);break}else i(X,Y);Y=Y.sibling}ee.type===j?(he=Qa(ee.props.children,X.mode,he,ee.key),he.return=X,X=he):(he=Xd(ee.type,ee.key,ee.props,null,X.mode,he),Bc(he,ee),he.return=X,X=he)}return E(X);case R:e:{for($e=ee.key;Y!==null;){if(Y.key===$e)if(Y.tag===4&&Y.stateNode.containerInfo===ee.containerInfo&&Y.stateNode.implementation===ee.implementation){o(X,Y.sibling),he=m(Y,ee.children||[]),he.return=X,X=he;break e}else{o(X,Y);break}else i(X,Y);Y=Y.sibling}he=wm(ee,X.mode,he),he.return=X,X=he}return E(X);case S:return ee=eo(ee),Dt(X,Y,ee,he)}if(Ee(ee))return Oe(X,Y,ee,he);if(U(ee)){if($e=U(ee),typeof $e!="function")throw Error(r(150));return ee=$e.call(ee),Ke(X,Y,ee,he)}if(typeof ee.then=="function")return Dt(X,Y,rh(ee),he);if(ee.$$typeof===I)return Dt(X,Y,Zd(X,ee),he);sh(X,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,Y!==null&&Y.tag===6?(o(X,Y.sibling),he=m(Y,ee),he.return=X,X=he):(o(X,Y),he=Em(ee,X.mode,he),he.return=X,X=he),E(X)):o(X,Y)}return function(X,Y,ee,he){try{zc=0;var $e=Dt(X,Y,ee,he);return al=null,$e}catch(ze){if(ze===il||ze===th)throw ze;var bt=mr(29,ze,null,X.mode);return bt.lanes=he,bt.return=X,bt}finally{}}}var no=db(!0),hb=db(!1),Bi=!1;function Om(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pm(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Fi(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function $i(s,i,o){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(wt&2)!==0){var m=u.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),u.pending=i,i=Qd(s),Q1(s,null,o),i}return Kd(s,u,i,o),Qd(s)}function Fc(s,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=s.pendingLanes,o|=u,i.lanes=o,mc(s,o)}}function Lm(s,i){var o=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var m=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?m=y=E:y=y.next=E,o=o.next}while(o!==null);y===null?m=y=i:y=y.next=i}else m=y=i;o={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},s.updateQueue=o;return}s=o.lastBaseUpdate,s===null?o.firstBaseUpdate=i:s.next=i,o.lastBaseUpdate=i}var Vm=!1;function $c(){if(Vm){var s=sl;if(s!==null)throw s}}function Hc(s,i,o,u){Vm=!1;var m=s.updateQueue;Bi=!1;var y=m.firstBaseUpdate,E=m.lastBaseUpdate,N=m.shared.pending;if(N!==null){m.shared.pending=null;var q=N,te=q.next;q.next=null,E===null?y=te:E.next=te,E=q;var le=s.alternate;le!==null&&(le=le.updateQueue,N=le.lastBaseUpdate,N!==E&&(N===null?le.firstBaseUpdate=te:N.next=te,le.lastBaseUpdate=q))}if(y!==null){var fe=m.baseState;E=0,le=te=q=null,N=y;do{var ne=N.lane&-536870913,se=ne!==N.lane;if(se?(ut&ne)===ne:(u&ne)===ne){ne!==0&&ne===rl&&(Vm=!0),le!==null&&(le=le.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Oe=s,Ke=N;ne=i;var Dt=o;switch(Ke.tag){case 1:if(Oe=Ke.payload,typeof Oe=="function"){fe=Oe.call(Dt,fe,ne);break e}fe=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=Ke.payload,ne=typeof Oe=="function"?Oe.call(Dt,fe,ne):Oe,ne==null)break e;fe=b({},fe,ne);break e;case 2:Bi=!0}}ne=N.callback,ne!==null&&(s.flags|=64,se&&(s.flags|=8192),se=m.callbacks,se===null?m.callbacks=[ne]:se.push(ne))}else se={lane:ne,tag:N.tag,payload:N.payload,callback:N.callback,next:null},le===null?(te=le=se,q=fe):le=le.next=se,E|=ne;if(N=N.next,N===null){if(N=m.shared.pending,N===null)break;se=N,N=se.next,se.next=null,m.lastBaseUpdate=se,m.shared.pending=null}}while(!0);le===null&&(q=fe),m.baseState=q,m.firstBaseUpdate=te,m.lastBaseUpdate=le,y===null&&(m.shared.lanes=0),Ki|=E,s.lanes=E,s.memoizedState=fe}}function fb(s,i){if(typeof s!="function")throw Error(r(191,s));s.call(i)}function pb(s,i){var o=s.callbacks;if(o!==null)for(s.callbacks=null,s=0;s<o.length;s++)fb(o[s],i)}var ol=H(null),ih=H(0);function mb(s,i){s=ui,ue(ih,s),ue(ol,i),ui=s|i.baseLanes}function Um(){ue(ih,ui),ue(ol,ol.current)}function zm(){ui=ih.current,J(ol),J(ih)}var gr=H(null),Lr=null;function Hi(s){var i=s.alternate;ue(Zt,Zt.current&1),ue(gr,s),Lr===null&&(i===null||ol.current!==null||i.memoizedState!==null)&&(Lr=s)}function Bm(s){ue(Zt,Zt.current),ue(gr,s),Lr===null&&(Lr=s)}function gb(s){s.tag===22?(ue(Zt,Zt.current),ue(gr,s),Lr===null&&(Lr=s)):qi()}function qi(){ue(Zt,Zt.current),ue(gr,gr.current)}function yr(s){J(gr),Lr===s&&(Lr=null),J(Zt)}var Zt=H(0);function ah(s){for(var i=s;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Yg(o)||Kg(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ni=0,nt=null,It=null,cn=null,oh=!1,ll=!1,ro=!1,lh=0,qc=0,cl=null,vR=0;function qt(){throw Error(r(321))}function Fm(s,i){if(i===null)return!1;for(var o=0;o<i.length&&o<s.length;o++)if(!pr(s[o],i[o]))return!1;return!0}function $m(s,i,o,u,m,y){return ni=y,nt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,$.H=s===null||s.memoizedState===null?Zb:sg,ro=!1,y=o(u,m),ro=!1,ll&&(y=vb(i,o,u,m)),yb(s),y}function yb(s){$.H=Kc;var i=It!==null&&It.next!==null;if(ni=0,cn=It=nt=null,oh=!1,qc=0,cl=null,i)throw Error(r(300));s===null||un||(s=s.dependencies,s!==null&&Jd(s)&&(un=!0))}function vb(s,i,o,u){nt=s;var m=0;do{if(ll&&(cl=null),qc=0,ll=!1,25<=m)throw Error(r(301));if(m+=1,cn=It=null,s.updateQueue!=null){var y=s.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}$.H=e_,y=i(o,u)}while(ll);return y}function bR(){var s=$.H,i=s.useState()[0];return i=typeof i.then=="function"?Gc(i):i,s=s.useState()[0],(It!==null?It.memoizedState:null)!==s&&(nt.flags|=1024),i}function Hm(){var s=lh!==0;return lh=0,s}function qm(s,i,o){i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~o}function Gm(s){if(oh){for(s=s.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}oh=!1}ni=0,cn=It=nt=null,ll=!1,qc=lh=0,cl=null}function Kn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?nt.memoizedState=cn=s:cn=cn.next=s,cn}function en(){if(It===null){var s=nt.alternate;s=s!==null?s.memoizedState:null}else s=It.next;var i=cn===null?nt.memoizedState:cn.next;if(i!==null)cn=i,It=s;else{if(s===null)throw nt.alternate===null?Error(r(467)):Error(r(310));It=s,s={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},cn===null?nt.memoizedState=cn=s:cn=cn.next=s}return cn}function ch(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gc(s){var i=qc;return qc+=1,cl===null&&(cl=[]),s=lb(cl,s,i),i=nt,(cn===null?i.memoizedState:cn.next)===null&&(i=i.alternate,$.H=i===null||i.memoizedState===null?Zb:sg),s}function uh(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Gc(s);if(s.$$typeof===I)return Rn(s)}throw Error(r(438,String(s)))}function Ym(s){var i=null,o=nt.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=nt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(m){return m.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=ch(),nt.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(s),u=0;u<s;u++)o[u]=D;return i.index++,o}function ri(s,i){return typeof i=="function"?i(s):i}function dh(s){var i=en();return Km(i,It,s)}function Km(s,i,o){var u=s.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var m=s.baseQueue,y=u.pending;if(y!==null){if(m!==null){var E=m.next;m.next=y.next,y.next=E}i.baseQueue=m=y,u.pending=null}if(y=s.baseState,m===null)s.memoizedState=y;else{i=m.next;var N=E=null,q=null,te=i,le=!1;do{var fe=te.lane&-536870913;if(fe!==te.lane?(ut&fe)===fe:(ni&fe)===fe){var ne=te.revertLane;if(ne===0)q!==null&&(q=q.next={lane:0,revertLane:0,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),fe===rl&&(le=!0);else if((ni&ne)===ne){te=te.next,ne===rl&&(le=!0);continue}else fe={lane:0,revertLane:te.revertLane,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},q===null?(N=q=fe,E=y):q=q.next=fe,nt.lanes|=ne,Ki|=ne;fe=te.action,ro&&o(y,fe),y=te.hasEagerState?te.eagerState:o(y,fe)}else ne={lane:fe,revertLane:te.revertLane,gesture:te.gesture,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},q===null?(N=q=ne,E=y):q=q.next=ne,nt.lanes|=fe,Ki|=fe;te=te.next}while(te!==null&&te!==i);if(q===null?E=y:q.next=N,!pr(y,s.memoizedState)&&(un=!0,le&&(o=sl,o!==null)))throw o;s.memoizedState=y,s.baseState=E,s.baseQueue=q,u.lastRenderedState=y}return m===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function Qm(s){var i=en(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=s;var u=o.dispatch,m=o.pending,y=i.memoizedState;if(m!==null){o.pending=null;var E=m=m.next;do y=s(y,E.action),E=E.next;while(E!==m);pr(y,i.memoizedState)||(un=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),o.lastRenderedState=y}return[y,u]}function bb(s,i,o){var u=nt,m=en(),y=gt;if(y){if(o===void 0)throw Error(r(407));o=o()}else o=i();var E=!pr((It||m).memoizedState,o);if(E&&(m.memoizedState=o,un=!0),m=m.queue,Jm(Eb.bind(null,u,m,s),[s]),m.getSnapshot!==i||E||cn!==null&&cn.memoizedState.tag&1){if(u.flags|=2048,ul(9,{destroy:void 0},xb.bind(null,u,m,o,i),null),Mt===null)throw Error(r(349));y||(ni&127)!==0||_b(u,i,o)}return o}function _b(s,i,o){s.flags|=16384,s={getSnapshot:i,value:o},i=nt.updateQueue,i===null?(i=ch(),nt.updateQueue=i,i.stores=[s]):(o=i.stores,o===null?i.stores=[s]:o.push(s))}function xb(s,i,o,u){i.value=o,i.getSnapshot=u,wb(i)&&Sb(s)}function Eb(s,i,o){return o(function(){wb(i)&&Sb(s)})}function wb(s){var i=s.getSnapshot;s=s.value;try{var o=i();return!pr(s,o)}catch{return!0}}function Sb(s){var i=Ka(s,2);i!==null&&ir(i,s,2)}function Xm(s){var i=Kn();if(typeof s=="function"){var o=s;if(s=o(),ro){Ar(!0);try{o()}finally{Ar(!1)}}}return i.memoizedState=i.baseState=s,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:s},i}function Tb(s,i,o,u){return s.baseState=o,Km(s,It,typeof u=="function"?u:ri)}function _R(s,i,o,u,m){if(ph(s))throw Error(r(485));if(s=i.action,s!==null){var y={payload:m,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){y.listeners.push(E)}};$.T!==null?o(!0):y.isTransition=!1,u(y),o=i.pending,o===null?(y.next=i.pending=y,Cb(i,y)):(y.next=o.next,i.pending=o.next=y)}}function Cb(s,i){var o=i.action,u=i.payload,m=s.state;if(i.isTransition){var y=$.T,E={};$.T=E;try{var N=o(m,u),q=$.S;q!==null&&q(E,N),Ab(s,i,N)}catch(te){Wm(s,i,te)}finally{y!==null&&E.types!==null&&(y.types=E.types),$.T=y}}else try{y=o(m,u),Ab(s,i,y)}catch(te){Wm(s,i,te)}}function Ab(s,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){kb(s,i,u)},function(u){return Wm(s,i,u)}):kb(s,i,o)}function kb(s,i,o){i.status="fulfilled",i.value=o,Rb(i),s.state=o,i=s.pending,i!==null&&(o=i.next,o===i?s.pending=null:(o=o.next,i.next=o,Cb(s,o)))}function Wm(s,i,o){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,Rb(i),i=i.next;while(i!==u)}s.action=null}function Rb(s){s=s.listeners;for(var i=0;i<s.length;i++)(0,s[i])()}function Nb(s,i){return i}function Ib(s,i){if(gt){var o=Mt.formState;if(o!==null){e:{var u=nt;if(gt){if(Lt){t:{for(var m=Lt,y=Pr;m.nodeType!==8;){if(!y){m=null;break t}if(m=Vr(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){Lt=Vr(m.nextSibling),u=m.data==="F!";break e}}Ui(u)}u=!1}u&&(i=o[0])}}return o=Kn(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nb,lastRenderedState:i},o.queue=u,o=Xb.bind(null,nt,u),u.dispatch=o,u=Xm(!1),y=rg.bind(null,nt,!1,u.queue),u=Kn(),m={state:i,dispatch:null,action:s,pending:null},u.queue=m,o=_R.bind(null,nt,m,y,o),m.dispatch=o,u.memoizedState=s,[i,o,!1]}function jb(s){var i=en();return Db(i,It,s)}function Db(s,i,o){if(i=Km(s,i,Nb)[0],s=dh(ri)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Gc(i)}catch(E){throw E===il?th:E}else u=i;i=en();var m=i.queue,y=m.dispatch;return o!==i.memoizedState&&(nt.flags|=2048,ul(9,{destroy:void 0},xR.bind(null,m,o),null)),[u,y,s]}function xR(s,i){s.action=i}function Mb(s){var i=en(),o=It;if(o!==null)return Db(i,o,s);en(),i=i.memoizedState,o=en();var u=o.queue.dispatch;return o.memoizedState=s,[i,u,!1]}function ul(s,i,o,u){return s={tag:s,create:o,deps:u,inst:i,next:null},i=nt.updateQueue,i===null&&(i=ch(),nt.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=s.next=s:(u=o.next,o.next=s,s.next=u,i.lastEffect=s),s}function Ob(){return en().memoizedState}function hh(s,i,o,u){var m=Kn();nt.flags|=s,m.memoizedState=ul(1|i,{destroy:void 0},o,u===void 0?null:u)}function fh(s,i,o,u){var m=en();u=u===void 0?null:u;var y=m.memoizedState.inst;It!==null&&u!==null&&Fm(u,It.memoizedState.deps)?m.memoizedState=ul(i,y,o,u):(nt.flags|=s,m.memoizedState=ul(1|i,y,o,u))}function Pb(s,i){hh(8390656,8,s,i)}function Jm(s,i){fh(2048,8,s,i)}function ER(s){nt.flags|=4;var i=nt.updateQueue;if(i===null)i=ch(),nt.updateQueue=i,i.events=[s];else{var o=i.events;o===null?i.events=[s]:o.push(s)}}function Lb(s){var i=en().memoizedState;return ER({ref:i,nextImpl:s}),function(){if((wt&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function Vb(s,i){return fh(4,2,s,i)}function Ub(s,i){return fh(4,4,s,i)}function zb(s,i){if(typeof i=="function"){s=s();var o=i(s);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function Bb(s,i,o){o=o!=null?o.concat([s]):null,fh(4,4,zb.bind(null,i,s),o)}function Zm(){}function Fb(s,i){var o=en();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&Fm(i,u[1])?u[0]:(o.memoizedState=[s,i],s)}function $b(s,i){var o=en();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&Fm(i,u[1]))return u[0];if(u=s(),ro){Ar(!0);try{s()}finally{Ar(!1)}}return o.memoizedState=[u,i],u}function eg(s,i,o){return o===void 0||(ni&1073741824)!==0&&(ut&261930)===0?s.memoizedState=i:(s.memoizedState=o,s=H_(),nt.lanes|=s,Ki|=s,o)}function Hb(s,i,o,u){return pr(o,i)?o:ol.current!==null?(s=eg(s,o,u),pr(s,i)||(un=!0),s):(ni&42)===0||(ni&1073741824)!==0&&(ut&261930)===0?(un=!0,s.memoizedState=o):(s=H_(),nt.lanes|=s,Ki|=s,i)}function qb(s,i,o,u,m){var y=K.p;K.p=y!==0&&8>y?y:8;var E=$.T,N={};$.T=N,rg(s,!1,i,o);try{var q=m(),te=$.S;if(te!==null&&te(N,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var le=yR(q,u);Yc(s,i,le,_r(s))}else Yc(s,i,u,_r(s))}catch(fe){Yc(s,i,{then:function(){},status:"rejected",reason:fe},_r())}finally{K.p=y,E!==null&&N.types!==null&&(E.types=N.types),$.T=E}}function wR(){}function tg(s,i,o,u){if(s.tag!==5)throw Error(r(476));var m=Gb(s).queue;qb(s,m,i,W,o===null?wR:function(){return Yb(s),o(u)})}function Gb(s){var i=s.memoizedState;if(i!==null)return i;i={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:W},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:o},next:null},s.memoizedState=i,s=s.alternate,s!==null&&(s.memoizedState=i),i}function Yb(s){var i=Gb(s);i.next===null&&(i=s.alternate.memoizedState),Yc(s,i.next.queue,{},_r())}function ng(){return Rn(uu)}function Kb(){return en().memoizedState}function Qb(){return en().memoizedState}function SR(s){for(var i=s.return;i!==null;){switch(i.tag){case 24:case 3:var o=_r();s=Fi(o);var u=$i(i,s,o);u!==null&&(ir(u,i,o),Fc(u,i,o)),i={cache:Im()},s.payload=i;return}i=i.return}}function TR(s,i,o){var u=_r();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},ph(s)?Wb(i,o):(o=_m(s,i,o,u),o!==null&&(ir(o,s,u),Jb(o,i,u)))}function Xb(s,i,o){var u=_r();Yc(s,i,o,u)}function Yc(s,i,o,u){var m={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(ph(s))Wb(i,m);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var E=i.lastRenderedState,N=y(E,o);if(m.hasEagerState=!0,m.eagerState=N,pr(N,E))return Kd(s,i,m,0),Mt===null&&Yd(),!1}catch{}finally{}if(o=_m(s,i,m,u),o!==null)return ir(o,s,u),Jb(o,i,u),!0}return!1}function rg(s,i,o,u){if(u={lane:2,revertLane:Og(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},ph(s)){if(i)throw Error(r(479))}else i=_m(s,o,u,2),i!==null&&ir(i,s,2)}function ph(s){var i=s.alternate;return s===nt||i!==null&&i===nt}function Wb(s,i){ll=oh=!0;var o=s.pending;o===null?i.next=i:(i.next=o.next,o.next=i),s.pending=i}function Jb(s,i,o){if((o&4194048)!==0){var u=i.lanes;u&=s.pendingLanes,o|=u,i.lanes=o,mc(s,o)}}var Kc={readContext:Rn,use:uh,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useLayoutEffect:qt,useInsertionEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useSyncExternalStore:qt,useId:qt,useHostTransitionStatus:qt,useFormState:qt,useActionState:qt,useOptimistic:qt,useMemoCache:qt,useCacheRefresh:qt};Kc.useEffectEvent=qt;var Zb={readContext:Rn,use:uh,useCallback:function(s,i){return Kn().memoizedState=[s,i===void 0?null:i],s},useContext:Rn,useEffect:Pb,useImperativeHandle:function(s,i,o){o=o!=null?o.concat([s]):null,hh(4194308,4,zb.bind(null,i,s),o)},useLayoutEffect:function(s,i){return hh(4194308,4,s,i)},useInsertionEffect:function(s,i){hh(4,2,s,i)},useMemo:function(s,i){var o=Kn();i=i===void 0?null:i;var u=s();if(ro){Ar(!0);try{s()}finally{Ar(!1)}}return o.memoizedState=[u,i],u},useReducer:function(s,i,o){var u=Kn();if(o!==void 0){var m=o(i);if(ro){Ar(!0);try{o(i)}finally{Ar(!1)}}}else m=i;return u.memoizedState=u.baseState=m,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:m},u.queue=s,s=s.dispatch=TR.bind(null,nt,s),[u.memoizedState,s]},useRef:function(s){var i=Kn();return s={current:s},i.memoizedState=s},useState:function(s){s=Xm(s);var i=s.queue,o=Xb.bind(null,nt,i);return i.dispatch=o,[s.memoizedState,o]},useDebugValue:Zm,useDeferredValue:function(s,i){var o=Kn();return eg(o,s,i)},useTransition:function(){var s=Xm(!1);return s=qb.bind(null,nt,s.queue,!0,!1),Kn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,i,o){var u=nt,m=Kn();if(gt){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),Mt===null)throw Error(r(349));(ut&127)!==0||_b(u,i,o)}m.memoizedState=o;var y={value:o,getSnapshot:i};return m.queue=y,Pb(Eb.bind(null,u,y,s),[s]),u.flags|=2048,ul(9,{destroy:void 0},xb.bind(null,u,y,o,i),null),o},useId:function(){var s=Kn(),i=Mt.identifierPrefix;if(gt){var o=Ts,u=Ss;o=(u&~(1<<32-Wt(u)-1)).toString(32)+o,i="_"+i+"R_"+o,o=lh++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=vR++,i="_"+i+"r_"+o.toString(32)+"_";return s.memoizedState=i},useHostTransitionStatus:ng,useFormState:Ib,useActionState:Ib,useOptimistic:function(s){var i=Kn();i.memoizedState=i.baseState=s;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=rg.bind(null,nt,!0,o),o.dispatch=i,[s,i]},useMemoCache:Ym,useCacheRefresh:function(){return Kn().memoizedState=SR.bind(null,nt)},useEffectEvent:function(s){var i=Kn(),o={impl:s};return i.memoizedState=o,function(){if((wt&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},sg={readContext:Rn,use:uh,useCallback:Fb,useContext:Rn,useEffect:Jm,useImperativeHandle:Bb,useInsertionEffect:Vb,useLayoutEffect:Ub,useMemo:$b,useReducer:dh,useRef:Ob,useState:function(){return dh(ri)},useDebugValue:Zm,useDeferredValue:function(s,i){var o=en();return Hb(o,It.memoizedState,s,i)},useTransition:function(){var s=dh(ri)[0],i=en().memoizedState;return[typeof s=="boolean"?s:Gc(s),i]},useSyncExternalStore:bb,useId:Kb,useHostTransitionStatus:ng,useFormState:jb,useActionState:jb,useOptimistic:function(s,i){var o=en();return Tb(o,It,s,i)},useMemoCache:Ym,useCacheRefresh:Qb};sg.useEffectEvent=Lb;var e_={readContext:Rn,use:uh,useCallback:Fb,useContext:Rn,useEffect:Jm,useImperativeHandle:Bb,useInsertionEffect:Vb,useLayoutEffect:Ub,useMemo:$b,useReducer:Qm,useRef:Ob,useState:function(){return Qm(ri)},useDebugValue:Zm,useDeferredValue:function(s,i){var o=en();return It===null?eg(o,s,i):Hb(o,It.memoizedState,s,i)},useTransition:function(){var s=Qm(ri)[0],i=en().memoizedState;return[typeof s=="boolean"?s:Gc(s),i]},useSyncExternalStore:bb,useId:Kb,useHostTransitionStatus:ng,useFormState:Mb,useActionState:Mb,useOptimistic:function(s,i){var o=en();return It!==null?Tb(o,It,s,i):(o.baseState=s,[s,o.queue.dispatch])},useMemoCache:Ym,useCacheRefresh:Qb};e_.useEffectEvent=Lb;function ig(s,i,o,u){i=s.memoizedState,o=o(u,i),o=o==null?i:b({},i,o),s.memoizedState=o,s.lanes===0&&(s.updateQueue.baseState=o)}var ag={enqueueSetState:function(s,i,o){s=s._reactInternals;var u=_r(),m=Fi(u);m.payload=i,o!=null&&(m.callback=o),i=$i(s,m,u),i!==null&&(ir(i,s,u),Fc(i,s,u))},enqueueReplaceState:function(s,i,o){s=s._reactInternals;var u=_r(),m=Fi(u);m.tag=1,m.payload=i,o!=null&&(m.callback=o),i=$i(s,m,u),i!==null&&(ir(i,s,u),Fc(i,s,u))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var o=_r(),u=Fi(o);u.tag=2,i!=null&&(u.callback=i),i=$i(s,u,o),i!==null&&(ir(i,s,o),Fc(i,s,o))}};function t_(s,i,o,u,m,y,E){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,y,E):i.prototype&&i.prototype.isPureReactComponent?!Mc(o,u)||!Mc(m,y):!0}function n_(s,i,o,u){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==s&&ag.enqueueReplaceState(i,i.state,null)}function so(s,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(s=s.defaultProps){o===i&&(o=b({},o));for(var m in s)o[m]===void 0&&(o[m]=s[m])}return o}function r_(s){Gd(s)}function s_(s){console.error(s)}function i_(s){Gd(s)}function mh(s,i){try{var o=s.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function a_(s,i,o){try{var u=s.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function og(s,i,o){return o=Fi(o),o.tag=3,o.payload={element:null},o.callback=function(){mh(s,i)},o}function o_(s){return s=Fi(s),s.tag=3,s}function l_(s,i,o,u){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var y=u.value;s.payload=function(){return m(y)},s.callback=function(){a_(i,o,u)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(s.callback=function(){a_(i,o,u),typeof m!="function"&&(Qi===null?Qi=new Set([this]):Qi.add(this));var N=u.stack;this.componentDidCatch(u.value,{componentStack:N!==null?N:""})})}function CR(s,i,o,u,m){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&nl(i,o,m,!0),o=gr.current,o!==null){switch(o.tag){case 31:case 13:return Lr===null?Ah():o.alternate===null&&Gt===0&&(Gt=3),o.flags&=-257,o.flags|=65536,o.lanes=m,u===nh?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),jg(s,u,m)),!1;case 22:return o.flags|=65536,u===nh?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),jg(s,u,m)),!1}throw Error(r(435,o.tag))}return jg(s,u,m),Ah(),!1}if(gt)return i=gr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=m,u!==Cm&&(s=Error(r(422),{cause:u}),Lc(Dr(s,o)))):(u!==Cm&&(i=Error(r(423),{cause:u}),Lc(Dr(i,o))),s=s.current.alternate,s.flags|=65536,m&=-m,s.lanes|=m,u=Dr(u,o),m=og(s.stateNode,u,m),Lm(s,m),Gt!==4&&(Gt=2)),!1;var y=Error(r(520),{cause:u});if(y=Dr(y,o),nu===null?nu=[y]:nu.push(y),Gt!==4&&(Gt=2),i===null)return!0;u=Dr(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,s=m&-m,o.lanes|=s,s=og(o.stateNode,u,s),Lm(o,s),!1;case 1:if(i=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Qi===null||!Qi.has(y))))return o.flags|=65536,m&=-m,o.lanes|=m,m=o_(m),l_(m,s,o,u),Lm(o,m),!1}o=o.return}while(o!==null);return!1}var lg=Error(r(461)),un=!1;function Nn(s,i,o,u){i.child=s===null?hb(i,null,o,u):no(i,s.child,o,u)}function c_(s,i,o,u,m){o=o.render;var y=i.ref;if("ref"in u){var E={};for(var N in u)N!=="ref"&&(E[N]=u[N])}else E=u;return Ja(i),u=$m(s,i,o,E,y,m),N=Hm(),s!==null&&!un?(qm(s,i,m),si(s,i,m)):(gt&&N&&Sm(i),i.flags|=1,Nn(s,i,u,m),i.child)}function u_(s,i,o,u,m){if(s===null){var y=o.type;return typeof y=="function"&&!xm(y)&&y.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=y,d_(s,i,y,u,m)):(s=Xd(o.type,null,u,i,i.mode,m),s.ref=i.ref,s.return=i,i.child=s)}if(y=s.child,!gg(s,m)){var E=y.memoizedProps;if(o=o.compare,o=o!==null?o:Mc,o(E,u)&&s.ref===i.ref)return si(s,i,m)}return i.flags|=1,s=Js(y,u),s.ref=i.ref,s.return=i,i.child=s}function d_(s,i,o,u,m){if(s!==null){var y=s.memoizedProps;if(Mc(y,u)&&s.ref===i.ref)if(un=!1,i.pendingProps=u=y,gg(s,m))(s.flags&131072)!==0&&(un=!0);else return i.lanes=s.lanes,si(s,i,m)}return cg(s,i,o,u,m)}function h_(s,i,o,u){var m=u.children,y=s!==null?s.memoizedState:null;if(s===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(y=y!==null?y.baseLanes|o:o,s!==null){for(u=i.child=s.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~y}else u=0,i.child=null;return f_(s,i,y,o,u)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},s!==null&&eh(i,y!==null?y.cachePool:null),y!==null?mb(i,y):Um(),gb(i);else return u=i.lanes=536870912,f_(s,i,y!==null?y.baseLanes|o:o,o,u)}else y!==null?(eh(i,y.cachePool),mb(i,y),qi(),i.memoizedState=null):(s!==null&&eh(i,null),Um(),qi());return Nn(s,i,m,o),i.child}function Qc(s,i){return s!==null&&s.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function f_(s,i,o,u,m){var y=Dm();return y=y===null?null:{parent:ln._currentValue,pool:y},i.memoizedState={baseLanes:o,cachePool:y},s!==null&&eh(i,null),Um(),gb(i),s!==null&&nl(s,i,u,!0),i.childLanes=m,null}function gh(s,i){return i=vh({mode:i.mode,children:i.children},s.mode),i.ref=s.ref,s.child=i,i.return=s,i}function p_(s,i,o){return no(i,s.child,null,o),s=gh(i,i.pendingProps),s.flags|=2,yr(i),i.memoizedState=null,s}function AR(s,i,o){var u=i.pendingProps,m=(i.flags&128)!==0;if(i.flags&=-129,s===null){if(gt){if(u.mode==="hidden")return s=gh(i,u),i.lanes=536870912,Qc(null,s);if(Bm(i),(s=Lt)?(s=Cx(s,Pr),s=s!==null&&s.data==="&"?s:null,s!==null&&(i.memoizedState={dehydrated:s,treeContext:Li!==null?{id:Ss,overflow:Ts}:null,retryLane:536870912,hydrationErrors:null},o=W1(s),o.return=i,i.child=o,kn=i,Lt=null)):s=null,s===null)throw Ui(i);return i.lanes=536870912,null}return gh(i,u)}var y=s.memoizedState;if(y!==null){var E=y.dehydrated;if(Bm(i),m)if(i.flags&256)i.flags&=-257,i=p_(s,i,o);else if(i.memoizedState!==null)i.child=s.child,i.flags|=128,i=null;else throw Error(r(558));else if(un||nl(s,i,o,!1),m=(o&s.childLanes)!==0,un||m){if(u=Mt,u!==null&&(E=gc(u,o),E!==0&&E!==y.retryLane))throw y.retryLane=E,Ka(s,E),ir(u,s,E),lg;Ah(),i=p_(s,i,o)}else s=y.treeContext,Lt=Vr(E.nextSibling),kn=i,gt=!0,Vi=null,Pr=!1,s!==null&&eb(i,s),i=gh(i,u),i.flags|=4096;return i}return s=Js(s.child,{mode:u.mode,children:u.children}),s.ref=i.ref,i.child=s,s.return=i,s}function yh(s,i){var o=i.ref;if(o===null)s!==null&&s.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(s===null||s.ref!==o)&&(i.flags|=4194816)}}function cg(s,i,o,u,m){return Ja(i),o=$m(s,i,o,u,void 0,m),u=Hm(),s!==null&&!un?(qm(s,i,m),si(s,i,m)):(gt&&u&&Sm(i),i.flags|=1,Nn(s,i,o,m),i.child)}function m_(s,i,o,u,m,y){return Ja(i),i.updateQueue=null,o=vb(i,u,o,m),yb(s),u=Hm(),s!==null&&!un?(qm(s,i,y),si(s,i,y)):(gt&&u&&Sm(i),i.flags|=1,Nn(s,i,o,y),i.child)}function g_(s,i,o,u,m){if(Ja(i),i.stateNode===null){var y=Jo,E=o.contextType;typeof E=="object"&&E!==null&&(y=Rn(E)),y=new o(u,y),i.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=ag,i.stateNode=y,y._reactInternals=i,y=i.stateNode,y.props=u,y.state=i.memoizedState,y.refs={},Om(i),E=o.contextType,y.context=typeof E=="object"&&E!==null?Rn(E):Jo,y.state=i.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(ig(i,o,E,u),y.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(E=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),E!==y.state&&ag.enqueueReplaceState(y,y.state,null),Hc(i,u,y,m),$c(),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(s===null){y=i.stateNode;var N=i.memoizedProps,q=so(o,N);y.props=q;var te=y.context,le=o.contextType;E=Jo,typeof le=="object"&&le!==null&&(E=Rn(le));var fe=o.getDerivedStateFromProps;le=typeof fe=="function"||typeof y.getSnapshotBeforeUpdate=="function",N=i.pendingProps!==N,le||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(N||te!==E)&&n_(i,y,u,E),Bi=!1;var ne=i.memoizedState;y.state=ne,Hc(i,u,y,m),$c(),te=i.memoizedState,N||ne!==te||Bi?(typeof fe=="function"&&(ig(i,o,fe,u),te=i.memoizedState),(q=Bi||t_(i,o,q,u,ne,te,E))?(le||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(i.flags|=4194308)):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=te),y.props=u,y.state=te,y.context=E,u=q):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{y=i.stateNode,Pm(s,i),E=i.memoizedProps,le=so(o,E),y.props=le,fe=i.pendingProps,ne=y.context,te=o.contextType,q=Jo,typeof te=="object"&&te!==null&&(q=Rn(te)),N=o.getDerivedStateFromProps,(te=typeof N=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==fe||ne!==q)&&n_(i,y,u,q),Bi=!1,ne=i.memoizedState,y.state=ne,Hc(i,u,y,m),$c();var se=i.memoizedState;E!==fe||ne!==se||Bi||s!==null&&s.dependencies!==null&&Jd(s.dependencies)?(typeof N=="function"&&(ig(i,o,N,u),se=i.memoizedState),(le=Bi||t_(i,o,le,u,ne,se,q)||s!==null&&s.dependencies!==null&&Jd(s.dependencies))?(te||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,se,q),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,se,q)),typeof y.componentDidUpdate=="function"&&(i.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof y.componentDidUpdate!="function"||E===s.memoizedProps&&ne===s.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&ne===s.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=se),y.props=u,y.state=se,y.context=q,u=le):(typeof y.componentDidUpdate!="function"||E===s.memoizedProps&&ne===s.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&ne===s.memoizedState||(i.flags|=1024),u=!1)}return y=u,yh(s,i),u=(i.flags&128)!==0,y||u?(y=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:y.render(),i.flags|=1,s!==null&&u?(i.child=no(i,s.child,null,m),i.child=no(i,null,o,m)):Nn(s,i,o,m),i.memoizedState=y.state,s=i.child):s=si(s,i,m),s}function y_(s,i,o,u){return Xa(),i.flags|=256,Nn(s,i,o,u),i.child}var ug={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function dg(s){return{baseLanes:s,cachePool:ab()}}function hg(s,i,o){return s=s!==null?s.childLanes&~o:0,i&&(s|=br),s}function v_(s,i,o){var u=i.pendingProps,m=!1,y=(i.flags&128)!==0,E;if((E=y)||(E=s!==null&&s.memoizedState===null?!1:(Zt.current&2)!==0),E&&(m=!0,i.flags&=-129),E=(i.flags&32)!==0,i.flags&=-33,s===null){if(gt){if(m?Hi(i):qi(),(s=Lt)?(s=Cx(s,Pr),s=s!==null&&s.data!=="&"?s:null,s!==null&&(i.memoizedState={dehydrated:s,treeContext:Li!==null?{id:Ss,overflow:Ts}:null,retryLane:536870912,hydrationErrors:null},o=W1(s),o.return=i,i.child=o,kn=i,Lt=null)):s=null,s===null)throw Ui(i);return Kg(s)?i.lanes=32:i.lanes=536870912,null}var N=u.children;return u=u.fallback,m?(qi(),m=i.mode,N=vh({mode:"hidden",children:N},m),u=Qa(u,m,o,null),N.return=i,u.return=i,N.sibling=u,i.child=N,u=i.child,u.memoizedState=dg(o),u.childLanes=hg(s,E,o),i.memoizedState=ug,Qc(null,u)):(Hi(i),fg(i,N))}var q=s.memoizedState;if(q!==null&&(N=q.dehydrated,N!==null)){if(y)i.flags&256?(Hi(i),i.flags&=-257,i=pg(s,i,o)):i.memoizedState!==null?(qi(),i.child=s.child,i.flags|=128,i=null):(qi(),N=u.fallback,m=i.mode,u=vh({mode:"visible",children:u.children},m),N=Qa(N,m,o,null),N.flags|=2,u.return=i,N.return=i,u.sibling=N,i.child=u,no(i,s.child,null,o),u=i.child,u.memoizedState=dg(o),u.childLanes=hg(s,E,o),i.memoizedState=ug,i=Qc(null,u));else if(Hi(i),Kg(N)){if(E=N.nextSibling&&N.nextSibling.dataset,E)var te=E.dgst;E=te,u=Error(r(419)),u.stack="",u.digest=E,Lc({value:u,source:null,stack:null}),i=pg(s,i,o)}else if(un||nl(s,i,o,!1),E=(o&s.childLanes)!==0,un||E){if(E=Mt,E!==null&&(u=gc(E,o),u!==0&&u!==q.retryLane))throw q.retryLane=u,Ka(s,u),ir(E,s,u),lg;Yg(N)||Ah(),i=pg(s,i,o)}else Yg(N)?(i.flags|=192,i.child=s.child,i=null):(s=q.treeContext,Lt=Vr(N.nextSibling),kn=i,gt=!0,Vi=null,Pr=!1,s!==null&&eb(i,s),i=fg(i,u.children),i.flags|=4096);return i}return m?(qi(),N=u.fallback,m=i.mode,q=s.child,te=q.sibling,u=Js(q,{mode:"hidden",children:u.children}),u.subtreeFlags=q.subtreeFlags&65011712,te!==null?N=Js(te,N):(N=Qa(N,m,o,null),N.flags|=2),N.return=i,u.return=i,u.sibling=N,i.child=u,Qc(null,u),u=i.child,N=s.child.memoizedState,N===null?N=dg(o):(m=N.cachePool,m!==null?(q=ln._currentValue,m=m.parent!==q?{parent:q,pool:q}:m):m=ab(),N={baseLanes:N.baseLanes|o,cachePool:m}),u.memoizedState=N,u.childLanes=hg(s,E,o),i.memoizedState=ug,Qc(s.child,u)):(Hi(i),o=s.child,s=o.sibling,o=Js(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,s!==null&&(E=i.deletions,E===null?(i.deletions=[s],i.flags|=16):E.push(s)),i.child=o,i.memoizedState=null,o)}function fg(s,i){return i=vh({mode:"visible",children:i},s.mode),i.return=s,s.child=i}function vh(s,i){return s=mr(22,s,null,i),s.lanes=0,s}function pg(s,i,o){return no(i,s.child,null,o),s=fg(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function b_(s,i,o){s.lanes|=i;var u=s.alternate;u!==null&&(u.lanes|=i),Rm(s.return,i,o)}function mg(s,i,o,u,m,y){var E=s.memoizedState;E===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:m,treeForkCount:y}:(E.isBackwards=i,E.rendering=null,E.renderingStartTime=0,E.last=u,E.tail=o,E.tailMode=m,E.treeForkCount=y)}function __(s,i,o){var u=i.pendingProps,m=u.revealOrder,y=u.tail;u=u.children;var E=Zt.current,N=(E&2)!==0;if(N?(E=E&1|2,i.flags|=128):E&=1,ue(Zt,E),Nn(s,i,u,o),u=gt?Pc:0,!N&&s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&b_(s,o,i);else if(s.tag===19)b_(s,o,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(m){case"forwards":for(o=i.child,m=null;o!==null;)s=o.alternate,s!==null&&ah(s)===null&&(m=o),o=o.sibling;o=m,o===null?(m=i.child,i.child=null):(m=o.sibling,o.sibling=null),mg(i,!1,m,o,y,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=i.child,i.child=null;m!==null;){if(s=m.alternate,s!==null&&ah(s)===null){i.child=m;break}s=m.sibling,m.sibling=o,o=m,m=s}mg(i,!0,o,null,y,u);break;case"together":mg(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function si(s,i,o){if(s!==null&&(i.dependencies=s.dependencies),Ki|=i.lanes,(o&i.childLanes)===0)if(s!==null){if(nl(s,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(s!==null&&i.child!==s.child)throw Error(r(153));if(i.child!==null){for(s=i.child,o=Js(s,s.pendingProps),i.child=o,o.return=i;s.sibling!==null;)s=s.sibling,o=o.sibling=Js(s,s.pendingProps),o.return=i;o.sibling=null}return i.child}function gg(s,i){return(s.lanes&i)!==0?!0:(s=s.dependencies,!!(s!==null&&Jd(s)))}function kR(s,i,o){switch(i.tag){case 3:He(i,i.stateNode.containerInfo),zi(i,ln,s.memoizedState.cache),Xa();break;case 27:case 5:_e(i);break;case 4:He(i,i.stateNode.containerInfo);break;case 10:zi(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Bm(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Hi(i),i.flags|=128,null):(o&i.child.childLanes)!==0?v_(s,i,o):(Hi(i),s=si(s,i,o),s!==null?s.sibling:null);Hi(i);break;case 19:var m=(s.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(nl(s,i,o,!1),u=(o&i.childLanes)!==0),m){if(u)return __(s,i,o);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ue(Zt,Zt.current),u)break;return null;case 22:return i.lanes=0,h_(s,i,o,i.pendingProps);case 24:zi(i,ln,s.memoizedState.cache)}return si(s,i,o)}function x_(s,i,o){if(s!==null)if(s.memoizedProps!==i.pendingProps)un=!0;else{if(!gg(s,o)&&(i.flags&128)===0)return un=!1,kR(s,i,o);un=(s.flags&131072)!==0}else un=!1,gt&&(i.flags&1048576)!==0&&Z1(i,Pc,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(s=eo(i.elementType),i.type=s,typeof s=="function")xm(s)?(u=so(s,u),i.tag=1,i=g_(null,i,s,u,o)):(i.tag=0,i=cg(null,i,s,u,o));else{if(s!=null){var m=s.$$typeof;if(m===V){i.tag=11,i=c_(null,i,s,u,o);break e}else if(m===w){i.tag=14,i=u_(null,i,s,u,o);break e}}throw i=be(s)||s,Error(r(306,i,""))}}return i;case 0:return cg(s,i,i.type,i.pendingProps,o);case 1:return u=i.type,m=so(u,i.pendingProps),g_(s,i,u,m,o);case 3:e:{if(He(i,i.stateNode.containerInfo),s===null)throw Error(r(387));u=i.pendingProps;var y=i.memoizedState;m=y.element,Pm(s,i),Hc(i,u,null,o);var E=i.memoizedState;if(u=E.cache,zi(i,ln,u),u!==y.cache&&Nm(i,[ln],o,!0),$c(),u=E.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:E.cache},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){i=y_(s,i,u,o);break e}else if(u!==m){m=Dr(Error(r(424)),i),Lc(m),i=y_(s,i,u,o);break e}else{switch(s=i.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Lt=Vr(s.firstChild),kn=i,gt=!0,Vi=null,Pr=!0,o=hb(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Xa(),u===m){i=si(s,i,o);break e}Nn(s,i,u,o)}i=i.child}return i;case 26:return yh(s,i),s===null?(o=jx(i.type,null,i.pendingProps,null))?i.memoizedState=o:gt||(o=i.type,s=i.pendingProps,u=Mh(ye.current).createElement(o),u[sn]=i,u[xn]=s,In(u,o,s),an(u),i.stateNode=u):i.memoizedState=jx(i.type,s.memoizedProps,i.pendingProps,s.memoizedState),null;case 27:return _e(i),s===null&&gt&&(u=i.stateNode=Rx(i.type,i.pendingProps,ye.current),kn=i,Pr=!0,m=Lt,Zi(i.type)?(Qg=m,Lt=Vr(u.firstChild)):Lt=m),Nn(s,i,i.pendingProps.children,o),yh(s,i),s===null&&(i.flags|=4194304),i.child;case 5:return s===null&&gt&&((m=u=Lt)&&(u=s3(u,i.type,i.pendingProps,Pr),u!==null?(i.stateNode=u,kn=i,Lt=Vr(u.firstChild),Pr=!1,m=!0):m=!1),m||Ui(i)),_e(i),m=i.type,y=i.pendingProps,E=s!==null?s.memoizedProps:null,u=y.children,Hg(m,y)?u=null:E!==null&&Hg(m,E)&&(i.flags|=32),i.memoizedState!==null&&(m=$m(s,i,bR,null,null,o),uu._currentValue=m),yh(s,i),Nn(s,i,u,o),i.child;case 6:return s===null&&gt&&((s=o=Lt)&&(o=i3(o,i.pendingProps,Pr),o!==null?(i.stateNode=o,kn=i,Lt=null,s=!0):s=!1),s||Ui(i)),null;case 13:return v_(s,i,o);case 4:return He(i,i.stateNode.containerInfo),u=i.pendingProps,s===null?i.child=no(i,null,u,o):Nn(s,i,u,o),i.child;case 11:return c_(s,i,i.type,i.pendingProps,o);case 7:return Nn(s,i,i.pendingProps,o),i.child;case 8:return Nn(s,i,i.pendingProps.children,o),i.child;case 12:return Nn(s,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,zi(i,i.type,u.value),Nn(s,i,u.children,o),i.child;case 9:return m=i.type._context,u=i.pendingProps.children,Ja(i),m=Rn(m),u=u(m),i.flags|=1,Nn(s,i,u,o),i.child;case 14:return u_(s,i,i.type,i.pendingProps,o);case 15:return d_(s,i,i.type,i.pendingProps,o);case 19:return __(s,i,o);case 31:return AR(s,i,o);case 22:return h_(s,i,o,i.pendingProps);case 24:return Ja(i),u=Rn(ln),s===null?(m=Dm(),m===null&&(m=Mt,y=Im(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=o),m=y),i.memoizedState={parent:u,cache:m},Om(i),zi(i,ln,m)):((s.lanes&o)!==0&&(Pm(s,i),Hc(i,null,null,o),$c()),m=s.memoizedState,y=i.memoizedState,m.parent!==u?(m={parent:u,cache:u},i.memoizedState=m,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=m),zi(i,ln,u)):(u=y.cache,zi(i,ln,u),u!==m.cache&&Nm(i,[ln],o,!0))),Nn(s,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function ii(s){s.flags|=4}function yg(s,i,o,u,m){if((i=(s.mode&32)!==0)&&(i=!1),i){if(s.flags|=16777216,(m&335544128)===m)if(s.stateNode.complete)s.flags|=8192;else if(K_())s.flags|=8192;else throw to=nh,Mm}else s.flags&=-16777217}function E_(s,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Lx(i))if(K_())s.flags|=8192;else throw to=nh,Mm}function bh(s,i){i!==null&&(s.flags|=4),s.flags&16384&&(i=s.tag!==22?Td():536870912,s.lanes|=i,pl|=i)}function Xc(s,i){if(!gt)switch(s.tailMode){case"hidden":i=s.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?s.tail=null:o.sibling=null;break;case"collapsed":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function Vt(s){var i=s.alternate!==null&&s.alternate.child===s.child,o=0,u=0;if(i)for(var m=s.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=u,s.childLanes=o,i}function RR(s,i,o){var u=i.pendingProps;switch(Tm(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(i),null;case 1:return Vt(i),null;case 3:return o=i.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),ti(ln),Ge(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(s===null||s.child===null)&&(tl(i)?ii(i):s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Am())),Vt(i),null;case 26:var m=i.type,y=i.memoizedState;return s===null?(ii(i),y!==null?(Vt(i),E_(i,y)):(Vt(i),yg(i,m,null,u,o))):y?y!==s.memoizedState?(ii(i),Vt(i),E_(i,y)):(Vt(i),i.flags&=-16777217):(s=s.memoizedProps,s!==u&&ii(i),Vt(i),yg(i,m,s,u,o)),null;case 27:if(ce(i),o=ye.current,m=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==u&&ii(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return Vt(i),null}s=me.current,tl(i)?tb(i):(s=Rx(m,u,o),i.stateNode=s,ii(i))}return Vt(i),null;case 5:if(ce(i),m=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==u&&ii(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return Vt(i),null}if(y=me.current,tl(i))tb(i);else{var E=Mh(ye.current);switch(y){case 1:y=E.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:y=E.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":y=E.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":y=E.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":y=E.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?E.createElement("select",{is:u.is}):E.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?E.createElement(m,{is:u.is}):E.createElement(m)}}y[sn]=i,y[xn]=u;e:for(E=i.child;E!==null;){if(E.tag===5||E.tag===6)y.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===i)break e;for(;E.sibling===null;){if(E.return===null||E.return===i)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}i.stateNode=y;e:switch(In(y,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ii(i)}}return Vt(i),yg(i,i.type,s===null?null:s.memoizedProps,i.pendingProps,o),null;case 6:if(s&&i.stateNode!=null)s.memoizedProps!==u&&ii(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(r(166));if(s=ye.current,tl(i)){if(s=i.stateNode,o=i.memoizedProps,u=null,m=kn,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}s[sn]=i,s=!!(s.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||vx(s.nodeValue,o)),s||Ui(i,!0)}else s=Mh(s).createTextNode(u),s[sn]=i,i.stateNode=s}return Vt(i),null;case 31:if(o=i.memoizedState,s===null||s.memoizedState!==null){if(u=tl(i),o!==null){if(s===null){if(!u)throw Error(r(318));if(s=i.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[sn]=i}else Xa(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Vt(i),s=!1}else o=Am(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=o),s=!0;if(!s)return i.flags&256?(yr(i),i):(yr(i),null);if((i.flags&128)!==0)throw Error(r(558))}return Vt(i),null;case 13:if(u=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(m=tl(i),u!==null&&u.dehydrated!==null){if(s===null){if(!m)throw Error(r(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[sn]=i}else Xa(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Vt(i),m=!1}else m=Am(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=m),m=!0;if(!m)return i.flags&256?(yr(i),i):(yr(i),null)}return yr(i),(i.flags&128)!==0?(i.lanes=o,i):(o=u!==null,s=s!==null&&s.memoizedState!==null,o&&(u=i.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==m&&(u.flags|=2048)),o!==s&&o&&(i.child.flags|=8192),bh(i,i.updateQueue),Vt(i),null);case 4:return Ge(),s===null&&Ug(i.stateNode.containerInfo),Vt(i),null;case 10:return ti(i.type),Vt(i),null;case 19:if(J(Zt),u=i.memoizedState,u===null)return Vt(i),null;if(m=(i.flags&128)!==0,y=u.rendering,y===null)if(m)Xc(u,!1);else{if(Gt!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(y=ah(s),y!==null){for(i.flags|=128,Xc(u,!1),s=y.updateQueue,i.updateQueue=s,bh(i,s),i.subtreeFlags=0,s=o,o=i.child;o!==null;)X1(o,s),o=o.sibling;return ue(Zt,Zt.current&1|2),gt&&Zs(i,u.treeForkCount),i.child}s=s.sibling}u.tail!==null&&xe()>Sh&&(i.flags|=128,m=!0,Xc(u,!1),i.lanes=4194304)}else{if(!m)if(s=ah(y),s!==null){if(i.flags|=128,m=!0,s=s.updateQueue,i.updateQueue=s,bh(i,s),Xc(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!gt)return Vt(i),null}else 2*xe()-u.renderingStartTime>Sh&&o!==536870912&&(i.flags|=128,m=!0,Xc(u,!1),i.lanes=4194304);u.isBackwards?(y.sibling=i.child,i.child=y):(s=u.last,s!==null?s.sibling=y:i.child=y,u.last=y)}return u.tail!==null?(s=u.tail,u.rendering=s,u.tail=s.sibling,u.renderingStartTime=xe(),s.sibling=null,o=Zt.current,ue(Zt,m?o&1|2:o&1),gt&&Zs(i,u.treeForkCount),s):(Vt(i),null);case 22:case 23:return yr(i),zm(),u=i.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(Vt(i),i.subtreeFlags&6&&(i.flags|=8192)):Vt(i),o=i.updateQueue,o!==null&&bh(i,o.retryQueue),o=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),s!==null&&J(Za),null;case 24:return o=null,s!==null&&(o=s.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),ti(ln),Vt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function NR(s,i){switch(Tm(i),i.tag){case 1:return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return ti(ln),Ge(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 26:case 27:case 5:return ce(i),null;case 31:if(i.memoizedState!==null){if(yr(i),i.alternate===null)throw Error(r(340));Xa()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 13:if(yr(i),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Xa()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return J(Zt),null;case 4:return Ge(),null;case 10:return ti(i.type),null;case 22:case 23:return yr(i),zm(),s!==null&&J(Za),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 24:return ti(ln),null;case 25:return null;default:return null}}function w_(s,i){switch(Tm(i),i.tag){case 3:ti(ln),Ge();break;case 26:case 27:case 5:ce(i);break;case 4:Ge();break;case 31:i.memoizedState!==null&&yr(i);break;case 13:yr(i);break;case 19:J(Zt);break;case 10:ti(i.type);break;case 22:case 23:yr(i),zm(),s!==null&&J(Za);break;case 24:ti(ln)}}function Wc(s,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&s)===s){u=void 0;var y=o.create,E=o.inst;u=y(),E.destroy=u}o=o.next}while(o!==m)}}catch(N){kt(i,i.return,N)}}function Gi(s,i,o){try{var u=i.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var y=m.next;u=y;do{if((u.tag&s)===s){var E=u.inst,N=E.destroy;if(N!==void 0){E.destroy=void 0,m=i;var q=o,te=N;try{te()}catch(le){kt(m,q,le)}}}u=u.next}while(u!==y)}}catch(le){kt(i,i.return,le)}}function S_(s){var i=s.updateQueue;if(i!==null){var o=s.stateNode;try{pb(i,o)}catch(u){kt(s,s.return,u)}}}function T_(s,i,o){o.props=so(s.type,s.memoizedProps),o.state=s.memoizedState;try{o.componentWillUnmount()}catch(u){kt(s,i,u)}}function Jc(s,i){try{var o=s.ref;if(o!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof o=="function"?s.refCleanup=o(u):o.current=u}}catch(m){kt(s,i,m)}}function Cs(s,i){var o=s.ref,u=s.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(m){kt(s,i,m)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){kt(s,i,m)}else o.current=null}function C_(s){var i=s.type,o=s.memoizedProps,u=s.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(m){kt(s,s.return,m)}}function vg(s,i,o){try{var u=s.stateNode;JR(u,s.type,o,i),u[xn]=i}catch(m){kt(s,s.return,m)}}function A_(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Zi(s.type)||s.tag===4}function bg(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||A_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Zi(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function _g(s,i,o){var u=s.tag;if(u===5||u===6)s=s.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(s,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(s),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Gr));else if(u!==4&&(u===27&&Zi(s.type)&&(o=s.stateNode,i=null),s=s.child,s!==null))for(_g(s,i,o),s=s.sibling;s!==null;)_g(s,i,o),s=s.sibling}function _h(s,i,o){var u=s.tag;if(u===5||u===6)s=s.stateNode,i?o.insertBefore(s,i):o.appendChild(s);else if(u!==4&&(u===27&&Zi(s.type)&&(o=s.stateNode),s=s.child,s!==null))for(_h(s,i,o),s=s.sibling;s!==null;)_h(s,i,o),s=s.sibling}function k_(s){var i=s.stateNode,o=s.memoizedProps;try{for(var u=s.type,m=i.attributes;m.length;)i.removeAttributeNode(m[0]);In(i,u,o),i[sn]=s,i[xn]=o}catch(y){kt(s,s.return,y)}}var ai=!1,dn=!1,xg=!1,R_=typeof WeakSet=="function"?WeakSet:Set,wn=null;function IR(s,i){if(s=s.containerInfo,Fg=Bh,s=B1(s),pm(s)){if("selectionStart"in s)var o={start:s.selectionStart,end:s.selectionEnd};else e:{o=(o=s.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var m=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var E=0,N=-1,q=-1,te=0,le=0,fe=s,ne=null;t:for(;;){for(var se;fe!==o||m!==0&&fe.nodeType!==3||(N=E+m),fe!==y||u!==0&&fe.nodeType!==3||(q=E+u),fe.nodeType===3&&(E+=fe.nodeValue.length),(se=fe.firstChild)!==null;)ne=fe,fe=se;for(;;){if(fe===s)break t;if(ne===o&&++te===m&&(N=E),ne===y&&++le===u&&(q=E),(se=fe.nextSibling)!==null)break;fe=ne,ne=fe.parentNode}fe=se}o=N===-1||q===-1?null:{start:N,end:q}}else o=null}o=o||{start:0,end:0}}else o=null;for($g={focusedElem:s,selectionRange:o},Bh=!1,wn=i;wn!==null;)if(i=wn,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,wn=s;else for(;wn!==null;){switch(i=wn,y=i.alternate,s=i.flags,i.tag){case 0:if((s&4)!==0&&(s=i.updateQueue,s=s!==null?s.events:null,s!==null))for(o=0;o<s.length;o++)m=s[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&y!==null){s=void 0,o=i,m=y.memoizedProps,y=y.memoizedState,u=o.stateNode;try{var Oe=so(o.type,m);s=u.getSnapshotBeforeUpdate(Oe,y),u.__reactInternalSnapshotBeforeUpdate=s}catch(Ke){kt(o,o.return,Ke)}}break;case 3:if((s&1024)!==0){if(s=i.stateNode.containerInfo,o=s.nodeType,o===9)Gg(s);else if(o===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Gg(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=i.sibling,s!==null){s.return=i.return,wn=s;break}wn=i.return}}function N_(s,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:li(s,o),u&4&&Wc(5,o);break;case 1:if(li(s,o),u&4)if(s=o.stateNode,i===null)try{s.componentDidMount()}catch(E){kt(o,o.return,E)}else{var m=so(o.type,i.memoizedProps);i=i.memoizedState;try{s.componentDidUpdate(m,i,s.__reactInternalSnapshotBeforeUpdate)}catch(E){kt(o,o.return,E)}}u&64&&S_(o),u&512&&Jc(o,o.return);break;case 3:if(li(s,o),u&64&&(s=o.updateQueue,s!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{pb(s,i)}catch(E){kt(o,o.return,E)}}break;case 27:i===null&&u&4&&k_(o);case 26:case 5:li(s,o),i===null&&u&4&&C_(o),u&512&&Jc(o,o.return);break;case 12:li(s,o);break;case 31:li(s,o),u&4&&D_(s,o);break;case 13:li(s,o),u&4&&M_(s,o),u&64&&(s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(o=zR.bind(null,o),a3(s,o))));break;case 22:if(u=o.memoizedState!==null||ai,!u){i=i!==null&&i.memoizedState!==null||dn,m=ai;var y=dn;ai=u,(dn=i)&&!y?ci(s,o,(o.subtreeFlags&8772)!==0):li(s,o),ai=m,dn=y}break;case 30:break;default:li(s,o)}}function I_(s){var i=s.alternate;i!==null&&(s.alternate=null,I_(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&Vo(i)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Ft=null,tr=!1;function oi(s,i,o){for(o=o.child;o!==null;)j_(s,i,o),o=o.sibling}function j_(s,i,o){if(Cn&&typeof Cn.onCommitFiberUnmount=="function")try{Cn.onCommitFiberUnmount(Fr,o)}catch{}switch(o.tag){case 26:dn||Cs(o,i),oi(s,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:dn||Cs(o,i);var u=Ft,m=tr;Zi(o.type)&&(Ft=o.stateNode,tr=!1),oi(s,i,o),ou(o.stateNode),Ft=u,tr=m;break;case 5:dn||Cs(o,i);case 6:if(u=Ft,m=tr,Ft=null,oi(s,i,o),Ft=u,tr=m,Ft!==null)if(tr)try{(Ft.nodeType===9?Ft.body:Ft.nodeName==="HTML"?Ft.ownerDocument.body:Ft).removeChild(o.stateNode)}catch(y){kt(o,i,y)}else try{Ft.removeChild(o.stateNode)}catch(y){kt(o,i,y)}break;case 18:Ft!==null&&(tr?(s=Ft,Sx(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,o.stateNode),El(s)):Sx(Ft,o.stateNode));break;case 4:u=Ft,m=tr,Ft=o.stateNode.containerInfo,tr=!0,oi(s,i,o),Ft=u,tr=m;break;case 0:case 11:case 14:case 15:Gi(2,o,i),dn||Gi(4,o,i),oi(s,i,o);break;case 1:dn||(Cs(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&T_(o,i,u)),oi(s,i,o);break;case 21:oi(s,i,o);break;case 22:dn=(u=dn)||o.memoizedState!==null,oi(s,i,o),dn=u;break;default:oi(s,i,o)}}function D_(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{El(s)}catch(o){kt(i,i.return,o)}}}function M_(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{El(s)}catch(o){kt(i,i.return,o)}}function jR(s){switch(s.tag){case 31:case 13:case 19:var i=s.stateNode;return i===null&&(i=s.stateNode=new R_),i;case 22:return s=s.stateNode,i=s._retryCache,i===null&&(i=s._retryCache=new R_),i;default:throw Error(r(435,s.tag))}}function xh(s,i){var o=jR(s);i.forEach(function(u){if(!o.has(u)){o.add(u);var m=BR.bind(null,s,u);u.then(m,m)}})}function nr(s,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var m=o[u],y=s,E=i,N=E;e:for(;N!==null;){switch(N.tag){case 27:if(Zi(N.type)){Ft=N.stateNode,tr=!1;break e}break;case 5:Ft=N.stateNode,tr=!1;break e;case 3:case 4:Ft=N.stateNode.containerInfo,tr=!0;break e}N=N.return}if(Ft===null)throw Error(r(160));j_(y,E,m),Ft=null,tr=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)O_(i,s),i=i.sibling}var Jr=null;function O_(s,i){var o=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:nr(i,s),rr(s),u&4&&(Gi(3,s,s.return),Wc(3,s),Gi(5,s,s.return));break;case 1:nr(i,s),rr(s),u&512&&(dn||o===null||Cs(o,o.return)),u&64&&ai&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(o=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var m=Jr;if(nr(i,s),rr(s),u&512&&(dn||o===null||Cs(o,o.return)),u&4){var y=o!==null?o.memoizedState:null;if(u=s.memoizedState,o===null)if(u===null)if(s.stateNode===null){e:{u=s.type,o=s.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":y=m.getElementsByTagName("title")[0],(!y||y[hs]||y[sn]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(u),m.head.insertBefore(y,m.querySelector("head > title"))),In(y,u,o),y[sn]=s,an(y),u=y;break e;case"link":var E=Ox("link","href",m).get(u+(o.href||""));if(E){for(var N=0;N<E.length;N++)if(y=E[N],y.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(N,1);break t}}y=m.createElement(u),In(y,u,o),m.head.appendChild(y);break;case"meta":if(E=Ox("meta","content",m).get(u+(o.content||""))){for(N=0;N<E.length;N++)if(y=E[N],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(N,1);break t}}y=m.createElement(u),In(y,u,o),m.head.appendChild(y);break;default:throw Error(r(468,u))}y[sn]=s,an(y),u=y}s.stateNode=u}else Px(m,s.type,s.stateNode);else s.stateNode=Mx(m,u,s.memoizedProps);else y!==u?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,u===null?Px(m,s.type,s.stateNode):Mx(m,u,s.memoizedProps)):u===null&&s.stateNode!==null&&vg(s,s.memoizedProps,o.memoizedProps)}break;case 27:nr(i,s),rr(s),u&512&&(dn||o===null||Cs(o,o.return)),o!==null&&u&4&&vg(s,s.memoizedProps,o.memoizedProps);break;case 5:if(nr(i,s),rr(s),u&512&&(dn||o===null||Cs(o,o.return)),s.flags&32){m=s.stateNode;try{er(m,"")}catch(Oe){kt(s,s.return,Oe)}}u&4&&s.stateNode!=null&&(m=s.memoizedProps,vg(s,m,o!==null?o.memoizedProps:m)),u&1024&&(xg=!0);break;case 6:if(nr(i,s),rr(s),u&4){if(s.stateNode===null)throw Error(r(162));u=s.memoizedProps,o=s.stateNode;try{o.nodeValue=u}catch(Oe){kt(s,s.return,Oe)}}break;case 3:if(Lh=null,m=Jr,Jr=Oh(i.containerInfo),nr(i,s),Jr=m,rr(s),u&4&&o!==null&&o.memoizedState.isDehydrated)try{El(i.containerInfo)}catch(Oe){kt(s,s.return,Oe)}xg&&(xg=!1,P_(s));break;case 4:u=Jr,Jr=Oh(s.stateNode.containerInfo),nr(i,s),rr(s),Jr=u;break;case 12:nr(i,s),rr(s);break;case 31:nr(i,s),rr(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,xh(s,u)));break;case 13:nr(i,s),rr(s),s.child.flags&8192&&s.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(wh=xe()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,xh(s,u)));break;case 22:m=s.memoizedState!==null;var q=o!==null&&o.memoizedState!==null,te=ai,le=dn;if(ai=te||m,dn=le||q,nr(i,s),dn=le,ai=te,rr(s),u&8192)e:for(i=s.stateNode,i._visibility=m?i._visibility&-2:i._visibility|1,m&&(o===null||q||ai||dn||io(s)),o=null,i=s;;){if(i.tag===5||i.tag===26){if(o===null){q=o=i;try{if(y=q.stateNode,m)E=y.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{N=q.stateNode;var fe=q.memoizedProps.style,ne=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;N.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(Oe){kt(q,q.return,Oe)}}}else if(i.tag===6){if(o===null){q=i;try{q.stateNode.nodeValue=m?"":q.memoizedProps}catch(Oe){kt(q,q.return,Oe)}}}else if(i.tag===18){if(o===null){q=i;try{var se=q.stateNode;m?Tx(se,!0):Tx(q.stateNode,!1)}catch(Oe){kt(q,q.return,Oe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===s)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=s.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,xh(s,o))));break;case 19:nr(i,s),rr(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,xh(s,u)));break;case 30:break;case 21:break;default:nr(i,s),rr(s)}}function rr(s){var i=s.flags;if(i&2){try{for(var o,u=s.return;u!==null;){if(A_(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var m=o.stateNode,y=bg(s);_h(s,y,m);break;case 5:var E=o.stateNode;o.flags&32&&(er(E,""),o.flags&=-33);var N=bg(s);_h(s,N,E);break;case 3:case 4:var q=o.stateNode.containerInfo,te=bg(s);_g(s,te,q);break;default:throw Error(r(161))}}catch(le){kt(s,s.return,le)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function P_(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var i=s;P_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),s=s.sibling}}function li(s,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)N_(s,i.alternate,i),i=i.sibling}function io(s){for(s=s.child;s!==null;){var i=s;switch(i.tag){case 0:case 11:case 14:case 15:Gi(4,i,i.return),io(i);break;case 1:Cs(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&T_(i,i.return,o),io(i);break;case 27:ou(i.stateNode);case 26:case 5:Cs(i,i.return),io(i);break;case 22:i.memoizedState===null&&io(i);break;case 30:io(i);break;default:io(i)}s=s.sibling}}function ci(s,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,m=s,y=i,E=y.flags;switch(y.tag){case 0:case 11:case 15:ci(m,y,o),Wc(4,y);break;case 1:if(ci(m,y,o),u=y,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(te){kt(u,u.return,te)}if(u=y,m=u.updateQueue,m!==null){var N=u.stateNode;try{var q=m.shared.hiddenCallbacks;if(q!==null)for(m.shared.hiddenCallbacks=null,m=0;m<q.length;m++)fb(q[m],N)}catch(te){kt(u,u.return,te)}}o&&E&64&&S_(y),Jc(y,y.return);break;case 27:k_(y);case 26:case 5:ci(m,y,o),o&&u===null&&E&4&&C_(y),Jc(y,y.return);break;case 12:ci(m,y,o);break;case 31:ci(m,y,o),o&&E&4&&D_(m,y);break;case 13:ci(m,y,o),o&&E&4&&M_(m,y);break;case 22:y.memoizedState===null&&ci(m,y,o),Jc(y,y.return);break;case 30:break;default:ci(m,y,o)}i=i.sibling}}function Eg(s,i){var o=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==o&&(s!=null&&s.refCount++,o!=null&&Vc(o))}function wg(s,i){s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&Vc(s))}function Zr(s,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)L_(s,i,o,u),i=i.sibling}function L_(s,i,o,u){var m=i.flags;switch(i.tag){case 0:case 11:case 15:Zr(s,i,o,u),m&2048&&Wc(9,i);break;case 1:Zr(s,i,o,u);break;case 3:Zr(s,i,o,u),m&2048&&(s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&Vc(s)));break;case 12:if(m&2048){Zr(s,i,o,u),s=i.stateNode;try{var y=i.memoizedProps,E=y.id,N=y.onPostCommit;typeof N=="function"&&N(E,i.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(q){kt(i,i.return,q)}}else Zr(s,i,o,u);break;case 31:Zr(s,i,o,u);break;case 13:Zr(s,i,o,u);break;case 23:break;case 22:y=i.stateNode,E=i.alternate,i.memoizedState!==null?y._visibility&2?Zr(s,i,o,u):Zc(s,i):y._visibility&2?Zr(s,i,o,u):(y._visibility|=2,dl(s,i,o,u,(i.subtreeFlags&10256)!==0||!1)),m&2048&&Eg(E,i);break;case 24:Zr(s,i,o,u),m&2048&&wg(i.alternate,i);break;default:Zr(s,i,o,u)}}function dl(s,i,o,u,m){for(m=m&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var y=s,E=i,N=o,q=u,te=E.flags;switch(E.tag){case 0:case 11:case 15:dl(y,E,N,q,m),Wc(8,E);break;case 23:break;case 22:var le=E.stateNode;E.memoizedState!==null?le._visibility&2?dl(y,E,N,q,m):Zc(y,E):(le._visibility|=2,dl(y,E,N,q,m)),m&&te&2048&&Eg(E.alternate,E);break;case 24:dl(y,E,N,q,m),m&&te&2048&&wg(E.alternate,E);break;default:dl(y,E,N,q,m)}i=i.sibling}}function Zc(s,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=s,u=i,m=u.flags;switch(u.tag){case 22:Zc(o,u),m&2048&&Eg(u.alternate,u);break;case 24:Zc(o,u),m&2048&&wg(u.alternate,u);break;default:Zc(o,u)}i=i.sibling}}var eu=8192;function hl(s,i,o){if(s.subtreeFlags&eu)for(s=s.child;s!==null;)V_(s,i,o),s=s.sibling}function V_(s,i,o){switch(s.tag){case 26:hl(s,i,o),s.flags&eu&&s.memoizedState!==null&&v3(o,Jr,s.memoizedState,s.memoizedProps);break;case 5:hl(s,i,o);break;case 3:case 4:var u=Jr;Jr=Oh(s.stateNode.containerInfo),hl(s,i,o),Jr=u;break;case 22:s.memoizedState===null&&(u=s.alternate,u!==null&&u.memoizedState!==null?(u=eu,eu=16777216,hl(s,i,o),eu=u):hl(s,i,o));break;default:hl(s,i,o)}}function U_(s){var i=s.alternate;if(i!==null&&(s=i.child,s!==null)){i.child=null;do i=s.sibling,s.sibling=null,s=i;while(s!==null)}}function tu(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];wn=u,B_(u,s)}U_(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)z_(s),s=s.sibling}function z_(s){switch(s.tag){case 0:case 11:case 15:tu(s),s.flags&2048&&Gi(9,s,s.return);break;case 3:tu(s);break;case 12:tu(s);break;case 22:var i=s.stateNode;s.memoizedState!==null&&i._visibility&2&&(s.return===null||s.return.tag!==13)?(i._visibility&=-3,Eh(s)):tu(s);break;default:tu(s)}}function Eh(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];wn=u,B_(u,s)}U_(s)}for(s=s.child;s!==null;){switch(i=s,i.tag){case 0:case 11:case 15:Gi(8,i,i.return),Eh(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Eh(i));break;default:Eh(i)}s=s.sibling}}function B_(s,i){for(;wn!==null;){var o=wn;switch(o.tag){case 0:case 11:case 15:Gi(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Vc(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,wn=u;else e:for(o=s;wn!==null;){u=wn;var m=u.sibling,y=u.return;if(I_(u),u===o){wn=null;break e}if(m!==null){m.return=y,wn=m;break e}wn=y}}}var DR={getCacheForType:function(s){var i=Rn(ln),o=i.data.get(s);return o===void 0&&(o=s(),i.data.set(s,o)),o},cacheSignal:function(){return Rn(ln).controller.signal}},MR=typeof WeakMap=="function"?WeakMap:Map,wt=0,Mt=null,lt=null,ut=0,At=0,vr=null,Yi=!1,fl=!1,Sg=!1,ui=0,Gt=0,Ki=0,ao=0,Tg=0,br=0,pl=0,nu=null,sr=null,Cg=!1,wh=0,F_=0,Sh=1/0,Th=null,Qi=null,vn=0,Xi=null,ml=null,di=0,Ag=0,kg=null,$_=null,ru=0,Rg=null;function _r(){return(wt&2)!==0&&ut!==0?ut&-ut:$.T!==null?Og():Cd()}function H_(){if(br===0)if((ut&536870912)===0||gt){var s=Da;Da<<=1,(Da&3932160)===0&&(Da=262144),br=s}else br=536870912;return s=gr.current,s!==null&&(s.flags|=32),br}function ir(s,i,o){(s===Mt&&(At===2||At===9)||s.cancelPendingCommit!==null)&&(gl(s,0),Wi(s,ut,br,!1)),Ma(s,o),((wt&2)===0||s!==Mt)&&(s===Mt&&((wt&2)===0&&(ao|=o),Gt===4&&Wi(s,ut,br,!1)),As(s))}function q_(s,i,o){if((wt&6)!==0)throw Error(r(327));var u=!o&&(i&127)===0&&(i&s.expiredLanes)===0||$r(s,i),m=u?LR(s,i):Ig(s,i,!0),y=u;do{if(m===0){fl&&!u&&Wi(s,i,0,!1);break}else{if(o=s.current.alternate,y&&!OR(o)){m=Ig(s,i,!1),y=!1;continue}if(m===2){if(y=i,s.errorRecoveryDisabledLanes&y)var E=0;else E=s.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){i=E;e:{var N=s;m=nu;var q=N.current.memoizedState.isDehydrated;if(q&&(gl(N,E).flags|=256),E=Ig(N,E,!1),E!==2){if(Sg&&!q){N.errorRecoveryDisabledLanes|=y,ao|=y,m=4;break e}y=sr,sr=m,y!==null&&(sr===null?sr=y:sr.push.apply(sr,y))}m=E}if(y=!1,m!==2)continue}}if(m===1){gl(s,0),Wi(s,i,0,!0);break}e:{switch(u=s,y=m,y){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Wi(u,i,br,!Yi);break e;case 2:sr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(m=wh+300-xe(),10<m)){if(Wi(u,i,br,!Yi),cs(u,0,!0)!==0)break e;di=i,u.timeoutHandle=Ex(G_.bind(null,u,o,sr,Th,Cg,i,br,ao,pl,Yi,y,"Throttled",-0,0),m);break e}G_(u,o,sr,Th,Cg,i,br,ao,pl,Yi,y,null,-0,0)}}break}while(!0);As(s)}function G_(s,i,o,u,m,y,E,N,q,te,le,fe,ne,se){if(s.timeoutHandle=-1,fe=i.subtreeFlags,fe&8192||(fe&16785408)===16785408){fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Gr},V_(i,y,fe);var Oe=(y&62914560)===y?wh-xe():(y&4194048)===y?F_-xe():0;if(Oe=b3(fe,Oe),Oe!==null){di=y,s.cancelPendingCommit=Oe(ex.bind(null,s,i,y,o,u,m,E,N,q,le,fe,null,ne,se)),Wi(s,y,E,!te);return}}ex(s,i,y,o,u,m,E,N,q)}function OR(s){for(var i=s;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var m=o[u],y=m.getSnapshot;m=m.value;try{if(!pr(y(),m))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Wi(s,i,o,u){i&=~Tg,i&=~ao,s.suspendedLanes|=i,s.pingedLanes&=~i,u&&(s.warmLanes|=i),u=s.expirationTimes;for(var m=i;0<m;){var y=31-Wt(m),E=1<<y;u[y]=-1,m&=~E}o!==0&&Oa(s,o,i)}function Ch(){return(wt&6)===0?(su(0),!1):!0}function Ng(){if(lt!==null){if(At===0)var s=lt.return;else s=lt,ei=Wa=null,Gm(s),al=null,zc=0,s=lt;for(;s!==null;)w_(s.alternate,s),s=s.return;lt=null}}function gl(s,i){var o=s.timeoutHandle;o!==-1&&(s.timeoutHandle=-1,t3(o)),o=s.cancelPendingCommit,o!==null&&(s.cancelPendingCommit=null,o()),di=0,Ng(),Mt=s,lt=o=Js(s.current,null),ut=i,At=0,vr=null,Yi=!1,fl=$r(s,i),Sg=!1,pl=br=Tg=ao=Ki=Gt=0,sr=nu=null,Cg=!1,(i&8)!==0&&(i|=i&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=i;0<u;){var m=31-Wt(u),y=1<<m;i|=s[m],u&=~y}return ui=i,Yd(),o}function Y_(s,i){nt=null,$.H=Kc,i===il||i===th?(i=cb(),At=3):i===Mm?(i=cb(),At=4):At=i===lg?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,vr=i,lt===null&&(Gt=1,mh(s,Dr(i,s.current)))}function K_(){var s=gr.current;return s===null?!0:(ut&4194048)===ut?Lr===null:(ut&62914560)===ut||(ut&536870912)!==0?s===Lr:!1}function Q_(){var s=$.H;return $.H=Kc,s===null?Kc:s}function X_(){var s=$.A;return $.A=DR,s}function Ah(){Gt=4,Yi||(ut&4194048)!==ut&&gr.current!==null||(fl=!0),(Ki&134217727)===0&&(ao&134217727)===0||Mt===null||Wi(Mt,ut,br,!1)}function Ig(s,i,o){var u=wt;wt|=2;var m=Q_(),y=X_();(Mt!==s||ut!==i)&&(Th=null,gl(s,i)),i=!1;var E=Gt;e:do try{if(At!==0&&lt!==null){var N=lt,q=vr;switch(At){case 8:Ng(),E=6;break e;case 3:case 2:case 9:case 6:gr.current===null&&(i=!0);var te=At;if(At=0,vr=null,yl(s,N,q,te),o&&fl){E=0;break e}break;default:te=At,At=0,vr=null,yl(s,N,q,te)}}PR(),E=Gt;break}catch(le){Y_(s,le)}while(!0);return i&&s.shellSuspendCounter++,ei=Wa=null,wt=u,$.H=m,$.A=y,lt===null&&(Mt=null,ut=0,Yd()),E}function PR(){for(;lt!==null;)W_(lt)}function LR(s,i){var o=wt;wt|=2;var u=Q_(),m=X_();Mt!==s||ut!==i?(Th=null,Sh=xe()+500,gl(s,i)):fl=$r(s,i);e:do try{if(At!==0&&lt!==null){i=lt;var y=vr;t:switch(At){case 1:At=0,vr=null,yl(s,i,y,1);break;case 2:case 9:if(ob(y)){At=0,vr=null,J_(i);break}i=function(){At!==2&&At!==9||Mt!==s||(At=7),As(s)},y.then(i,i);break e;case 3:At=7;break e;case 4:At=5;break e;case 7:ob(y)?(At=0,vr=null,J_(i)):(At=0,vr=null,yl(s,i,y,7));break;case 5:var E=null;switch(lt.tag){case 26:E=lt.memoizedState;case 5:case 27:var N=lt;if(E?Lx(E):N.stateNode.complete){At=0,vr=null;var q=N.sibling;if(q!==null)lt=q;else{var te=N.return;te!==null?(lt=te,kh(te)):lt=null}break t}}At=0,vr=null,yl(s,i,y,5);break;case 6:At=0,vr=null,yl(s,i,y,6);break;case 8:Ng(),Gt=6;break e;default:throw Error(r(462))}}VR();break}catch(le){Y_(s,le)}while(!0);return ei=Wa=null,$.H=u,$.A=m,wt=o,lt!==null?0:(Mt=null,ut=0,Yd(),Gt)}function VR(){for(;lt!==null&&!Qt();)W_(lt)}function W_(s){var i=x_(s.alternate,s,ui);s.memoizedProps=s.pendingProps,i===null?kh(s):lt=i}function J_(s){var i=s,o=i.alternate;switch(i.tag){case 15:case 0:i=m_(o,i,i.pendingProps,i.type,void 0,ut);break;case 11:i=m_(o,i,i.pendingProps,i.type.render,i.ref,ut);break;case 5:Gm(i);default:w_(o,i),i=lt=X1(i,ui),i=x_(o,i,ui)}s.memoizedProps=s.pendingProps,i===null?kh(s):lt=i}function yl(s,i,o,u){ei=Wa=null,Gm(i),al=null,zc=0;var m=i.return;try{if(CR(s,m,i,o,ut)){Gt=1,mh(s,Dr(o,s.current)),lt=null;return}}catch(y){if(m!==null)throw lt=m,y;Gt=1,mh(s,Dr(o,s.current)),lt=null;return}i.flags&32768?(gt||u===1?s=!0:fl||(ut&536870912)!==0?s=!1:(Yi=s=!0,(u===2||u===9||u===3||u===6)&&(u=gr.current,u!==null&&u.tag===13&&(u.flags|=16384))),Z_(i,s)):kh(i)}function kh(s){var i=s;do{if((i.flags&32768)!==0){Z_(i,Yi);return}s=i.return;var o=RR(i.alternate,i,ui);if(o!==null){lt=o;return}if(i=i.sibling,i!==null){lt=i;return}lt=i=s}while(i!==null);Gt===0&&(Gt=5)}function Z_(s,i){do{var o=NR(s.alternate,s);if(o!==null){o.flags&=32767,lt=o;return}if(o=s.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(s=s.sibling,s!==null)){lt=s;return}lt=s=o}while(s!==null);Gt=6,lt=null}function ex(s,i,o,u,m,y,E,N,q){s.cancelPendingCommit=null;do Rh();while(vn!==0);if((wt&6)!==0)throw Error(r(327));if(i!==null){if(i===s.current)throw Error(r(177));if(y=i.lanes|i.childLanes,y|=bm,um(s,o,y,E,N,q),s===Mt&&(lt=Mt=null,ut=0),ml=i,Xi=s,di=o,Ag=y,kg=m,$_=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,FR(Gn,function(){return ix(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=$.T,$.T=null,m=K.p,K.p=2,E=wt,wt|=4;try{IR(s,i,o)}finally{wt=E,K.p=m,$.T=u}}vn=1,tx(),nx(),rx()}}function tx(){if(vn===1){vn=0;var s=Xi,i=ml,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=$.T,$.T=null;var u=K.p;K.p=2;var m=wt;wt|=4;try{O_(i,s);var y=$g,E=B1(s.containerInfo),N=y.focusedElem,q=y.selectionRange;if(E!==N&&N&&N.ownerDocument&&z1(N.ownerDocument.documentElement,N)){if(q!==null&&pm(N)){var te=q.start,le=q.end;if(le===void 0&&(le=te),"selectionStart"in N)N.selectionStart=te,N.selectionEnd=Math.min(le,N.value.length);else{var fe=N.ownerDocument||document,ne=fe&&fe.defaultView||window;if(ne.getSelection){var se=ne.getSelection(),Oe=N.textContent.length,Ke=Math.min(q.start,Oe),Dt=q.end===void 0?Ke:Math.min(q.end,Oe);!se.extend&&Ke>Dt&&(E=Dt,Dt=Ke,Ke=E);var X=U1(N,Ke),Y=U1(N,Dt);if(X&&Y&&(se.rangeCount!==1||se.anchorNode!==X.node||se.anchorOffset!==X.offset||se.focusNode!==Y.node||se.focusOffset!==Y.offset)){var ee=fe.createRange();ee.setStart(X.node,X.offset),se.removeAllRanges(),Ke>Dt?(se.addRange(ee),se.extend(Y.node,Y.offset)):(ee.setEnd(Y.node,Y.offset),se.addRange(ee))}}}}for(fe=[],se=N;se=se.parentNode;)se.nodeType===1&&fe.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<fe.length;N++){var he=fe[N];he.element.scrollLeft=he.left,he.element.scrollTop=he.top}}Bh=!!Fg,$g=Fg=null}finally{wt=m,K.p=u,$.T=o}}s.current=i,vn=2}}function nx(){if(vn===2){vn=0;var s=Xi,i=ml,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=$.T,$.T=null;var u=K.p;K.p=2;var m=wt;wt|=4;try{N_(s,i.alternate,i)}finally{wt=m,K.p=u,$.T=o}}vn=3}}function rx(){if(vn===4||vn===3){vn=0,dr();var s=Xi,i=ml,o=di,u=$_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?vn=5:(vn=0,ml=Xi=null,sx(s,s.pendingLanes));var m=s.pendingLanes;if(m===0&&(Qi=null),Ks(o),i=i.stateNode,Cn&&typeof Cn.onCommitFiberRoot=="function")try{Cn.onCommitFiberRoot(Fr,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=$.T,m=K.p,K.p=2,$.T=null;try{for(var y=s.onRecoverableError,E=0;E<u.length;E++){var N=u[E];y(N.value,{componentStack:N.stack})}}finally{$.T=i,K.p=m}}(di&3)!==0&&Rh(),As(s),m=s.pendingLanes,(o&261930)!==0&&(m&42)!==0?s===Rg?ru++:(ru=0,Rg=s):ru=0,su(0)}}function sx(s,i){(s.pooledCacheLanes&=i)===0&&(i=s.pooledCache,i!=null&&(s.pooledCache=null,Vc(i)))}function Rh(){return tx(),nx(),rx(),ix()}function ix(){if(vn!==5)return!1;var s=Xi,i=Ag;Ag=0;var o=Ks(di),u=$.T,m=K.p;try{K.p=32>o?32:o,$.T=null,o=kg,kg=null;var y=Xi,E=di;if(vn=0,ml=Xi=null,di=0,(wt&6)!==0)throw Error(r(331));var N=wt;if(wt|=4,z_(y.current),L_(y,y.current,E,o),wt=N,su(0,!1),Cn&&typeof Cn.onPostCommitFiberRoot=="function")try{Cn.onPostCommitFiberRoot(Fr,y)}catch{}return!0}finally{K.p=m,$.T=u,sx(s,i)}}function ax(s,i,o){i=Dr(o,i),i=og(s.stateNode,i,2),s=$i(s,i,2),s!==null&&(Ma(s,2),As(s))}function kt(s,i,o){if(s.tag===3)ax(s,s,o);else for(;i!==null;){if(i.tag===3){ax(i,s,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Qi===null||!Qi.has(u))){s=Dr(o,s),o=o_(2),u=$i(i,o,2),u!==null&&(l_(o,u,i,s),Ma(u,2),As(u));break}}i=i.return}}function jg(s,i,o){var u=s.pingCache;if(u===null){u=s.pingCache=new MR;var m=new Set;u.set(i,m)}else m=u.get(i),m===void 0&&(m=new Set,u.set(i,m));m.has(o)||(Sg=!0,m.add(o),s=UR.bind(null,s,i,o),i.then(s,s))}function UR(s,i,o){var u=s.pingCache;u!==null&&u.delete(i),s.pingedLanes|=s.suspendedLanes&o,s.warmLanes&=~o,Mt===s&&(ut&o)===o&&(Gt===4||Gt===3&&(ut&62914560)===ut&&300>xe()-wh?(wt&2)===0&&gl(s,0):Tg|=o,pl===ut&&(pl=0)),As(s)}function ox(s,i){i===0&&(i=Td()),s=Ka(s,i),s!==null&&(Ma(s,i),As(s))}function zR(s){var i=s.memoizedState,o=0;i!==null&&(o=i.retryLane),ox(s,o)}function BR(s,i){var o=0;switch(s.tag){case 31:case 13:var u=s.stateNode,m=s.memoizedState;m!==null&&(o=m.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(i),ox(s,o)}function FR(s,i){return Ye(s,i)}var Nh=null,vl=null,Dg=!1,Ih=!1,Mg=!1,Ji=0;function As(s){s!==vl&&s.next===null&&(vl===null?Nh=vl=s:vl=vl.next=s),Ih=!0,Dg||(Dg=!0,HR())}function su(s,i){if(!Mg&&Ih){Mg=!0;do for(var o=!1,u=Nh;u!==null;){if(s!==0){var m=u.pendingLanes;if(m===0)var y=0;else{var E=u.suspendedLanes,N=u.pingedLanes;y=(1<<31-Wt(42|s)+1)-1,y&=m&~(E&~N),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(o=!0,dx(u,y))}else y=ut,y=cs(u,u===Mt?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||$r(u,y)||(o=!0,dx(u,y));u=u.next}while(o);Mg=!1}}function $R(){lx()}function lx(){Ih=Dg=!1;var s=0;Ji!==0&&e3()&&(s=Ji);for(var i=xe(),o=null,u=Nh;u!==null;){var m=u.next,y=cx(u,i);y===0?(u.next=null,o===null?Nh=m:o.next=m,m===null&&(vl=o)):(o=u,(s!==0||(y&3)!==0)&&(Ih=!0)),u=m}vn!==0&&vn!==5||su(s),Ji!==0&&(Ji=0)}function cx(s,i){for(var o=s.suspendedLanes,u=s.pingedLanes,m=s.expirationTimes,y=s.pendingLanes&-62914561;0<y;){var E=31-Wt(y),N=1<<E,q=m[E];q===-1?((N&o)===0||(N&u)!==0)&&(m[E]=cm(N,i)):q<=i&&(s.expiredLanes|=N),y&=~N}if(i=Mt,o=ut,o=cs(s,s===i?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,o===0||s===i&&(At===2||At===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&ot(u),s.callbackNode=null,s.callbackPriority=0;if((o&3)===0||$r(s,o)){if(i=o&-o,i===s.callbackPriority)return i;switch(u!==null&&ot(u),Ks(o)){case 2:case 8:o=Xt;break;case 32:o=Gn;break;case 268435456:o=Ht;break;default:o=Gn}return u=ux.bind(null,s),o=Ye(o,u),s.callbackPriority=i,s.callbackNode=o,i}return u!==null&&u!==null&&ot(u),s.callbackPriority=2,s.callbackNode=null,2}function ux(s,i){if(vn!==0&&vn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var o=s.callbackNode;if(Rh()&&s.callbackNode!==o)return null;var u=ut;return u=cs(s,s===Mt?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(q_(s,u,i),cx(s,xe()),s.callbackNode!=null&&s.callbackNode===o?ux.bind(null,s):null)}function dx(s,i){if(Rh())return null;q_(s,i,!0)}function HR(){n3(function(){(wt&6)!==0?Ye(vt,$R):lx()})}function Og(){if(Ji===0){var s=rl;s===0&&(s=os,os<<=1,(os&261888)===0&&(os=256)),Ji=s}return Ji}function hx(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Fo(""+s)}function fx(s,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,s.id&&o.setAttribute("form",s.id),i.parentNode.insertBefore(o,i),s=new FormData(s),o.parentNode.removeChild(o),s}function qR(s,i,o,u,m){if(i==="submit"&&o&&o.stateNode===m){var y=hx((m[xn]||null).action),E=u.submitter;E&&(i=(i=E[xn]||null)?hx(i.formAction):E.getAttribute("formAction"),i!==null&&(y=i,E=null));var N=new _s("action","action",null,u,m);s.push({event:N,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ji!==0){var q=E?fx(m,E):new FormData(m);tg(o,{pending:!0,data:q,method:m.method,action:y},null,q)}}else typeof y=="function"&&(N.preventDefault(),q=E?fx(m,E):new FormData(m),tg(o,{pending:!0,data:q,method:m.method,action:y},y,q))},currentTarget:m}]})}}for(var Pg=0;Pg<vm.length;Pg++){var Lg=vm[Pg],GR=Lg.toLowerCase(),YR=Lg[0].toUpperCase()+Lg.slice(1);Wr(GR,"on"+YR)}Wr(H1,"onAnimationEnd"),Wr(q1,"onAnimationIteration"),Wr(G1,"onAnimationStart"),Wr("dblclick","onDoubleClick"),Wr("focusin","onFocus"),Wr("focusout","onBlur"),Wr(cR,"onTransitionRun"),Wr(uR,"onTransitionStart"),Wr(dR,"onTransitionCancel"),Wr(Y1,"onTransitionEnd"),gs("onMouseEnter",["mouseout","mouseover"]),gs("onMouseLeave",["mouseout","mouseover"]),gs("onPointerEnter",["pointerout","pointerover"]),gs("onPointerLeave",["pointerout","pointerover"]),ms("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ms("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ms("onBeforeInput",["compositionend","keypress","textInput","paste"]),ms("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ms("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ms("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var iu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(iu));function px(s,i){i=(i&4)!==0;for(var o=0;o<s.length;o++){var u=s[o],m=u.event;u=u.listeners;e:{var y=void 0;if(i)for(var E=u.length-1;0<=E;E--){var N=u[E],q=N.instance,te=N.currentTarget;if(N=N.listener,q!==y&&m.isPropagationStopped())break e;y=N,m.currentTarget=te;try{y(m)}catch(le){Gd(le)}m.currentTarget=null,y=q}else for(E=0;E<u.length;E++){if(N=u[E],q=N.instance,te=N.currentTarget,N=N.listener,q!==y&&m.isPropagationStopped())break e;y=N,m.currentTarget=te;try{y(m)}catch(le){Gd(le)}m.currentTarget=null,y=q}}}}function ct(s,i){var o=i[Lo];o===void 0&&(o=i[Lo]=new Set);var u=s+"__bubble";o.has(u)||(mx(i,s,2,!1),o.add(u))}function Vg(s,i,o){var u=0;i&&(u|=4),mx(o,s,u,i)}var jh="_reactListening"+Math.random().toString(36).slice(2);function Ug(s){if(!s[jh]){s[jh]=!0,yc.forEach(function(o){o!=="selectionchange"&&(KR.has(o)||Vg(o,!1,s),Vg(o,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[jh]||(i[jh]=!0,Vg("selectionchange",!1,i))}}function mx(s,i,o,u){switch(Hx(i)){case 2:var m=E3;break;case 8:m=w3;break;default:m=ey}o=m.bind(null,i,o,s),m=void 0,!za||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),u?m!==void 0?s.addEventListener(i,o,{capture:!0,passive:m}):s.addEventListener(i,o,!0):m!==void 0?s.addEventListener(i,o,{passive:m}):s.addEventListener(i,o,!1)}function zg(s,i,o,u,m){var y=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var N=u.stateNode.containerInfo;if(N===m)break;if(E===4)for(E=u.return;E!==null;){var q=E.tag;if((q===3||q===4)&&E.stateNode.containerInfo===m)return;E=E.return}for(;N!==null;){if(E=fs(N),E===null)return;if(q=E.tag,q===5||q===6||q===26||q===27){u=y=E;continue e}N=N.parentNode}}u=u.return}Di(function(){var te=y,le=Rr(o),fe=[];e:{var ne=K1.get(s);if(ne!==void 0){var se=_s,Oe=s;switch(s){case"keypress":if(Fa(o)===0)break e;case"keydown":case"keyup":se=$d;break;case"focusin":Oe="focus",se=Ha;break;case"focusout":Oe="blur",se=Ha;break;case"beforeblur":case"afterblur":se=Ha;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=Nc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=Md;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=_;break;case H1:case q1:case G1:se=Pd;break;case Y1:se=L;break;case"scroll":case"scrollend":se=Rc;break;case"wheel":se=re;break;case"copy":case"cut":case"paste":se=Ld;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=Ws;break;case"toggle":case"beforetoggle":se=tt}var Ke=(i&4)!==0,Dt=!Ke&&(s==="scroll"||s==="scrollend"),X=Ke?ne!==null?ne+"Capture":null:ne;Ke=[];for(var Y=te,ee;Y!==null;){var he=Y;if(ee=he.stateNode,he=he.tag,he!==5&&he!==26&&he!==27||ee===null||X===null||(he=Yr(Y,X),he!=null&&Ke.push(au(Y,he,ee))),Dt)break;Y=Y.return}0<Ke.length&&(ne=new se(ne,Oe,null,o,le),fe.push({event:ne,listeners:Ke}))}}if((i&7)===0){e:{if(ne=s==="mouseover"||s==="pointerover",se=s==="mouseout"||s==="pointerout",ne&&o!==Cc&&(Oe=o.relatedTarget||o.fromElement)&&(fs(Oe)||Oe[ds]))break e;if((se||ne)&&(ne=le.window===le?le:(ne=le.ownerDocument)?ne.defaultView||ne.parentWindow:window,se?(Oe=o.relatedTarget||o.toElement,se=te,Oe=Oe?fs(Oe):null,Oe!==null&&(Dt=l(Oe),Ke=Oe.tag,Oe!==Dt||Ke!==5&&Ke!==27&&Ke!==6)&&(Oe=null)):(se=null,Oe=te),se!==Oe)){if(Ke=Nc,he="onMouseLeave",X="onMouseEnter",Y="mouse",(s==="pointerout"||s==="pointerover")&&(Ke=Ws,he="onPointerLeave",X="onPointerEnter",Y="pointer"),Dt=se==null?ne:hr(se),ee=Oe==null?ne:hr(Oe),ne=new Ke(he,Y+"leave",se,o,le),ne.target=Dt,ne.relatedTarget=ee,he=null,fs(le)===te&&(Ke=new Ke(X,Y+"enter",Oe,o,le),Ke.target=ee,Ke.relatedTarget=Dt,he=Ke),Dt=he,se&&Oe)t:{for(Ke=QR,X=se,Y=Oe,ee=0,he=X;he;he=Ke(he))ee++;he=0;for(var $e=Y;$e;$e=Ke($e))he++;for(;0<ee-he;)X=Ke(X),ee--;for(;0<he-ee;)Y=Ke(Y),he--;for(;ee--;){if(X===Y||Y!==null&&X===Y.alternate){Ke=X;break t}X=Ke(X),Y=Ke(Y)}Ke=null}else Ke=null;se!==null&&gx(fe,ne,se,Ke,!1),Oe!==null&&Dt!==null&&gx(fe,Dt,Oe,Ke,!0)}}e:{if(ne=te?hr(te):window,se=ne.nodeName&&ne.nodeName.toLowerCase(),se==="select"||se==="input"&&ne.type==="file")var bt=D1;else if(I1(ne))if(M1)bt=aR;else{bt=sR;var ze=rR}else se=ne.nodeName,!se||se.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?te&&Bo(te.elementType)&&(bt=D1):bt=iR;if(bt&&(bt=bt(s,te))){j1(fe,bt,o,le);break e}ze&&ze(s,ne,te),s==="focusout"&&te&&ne.type==="number"&&te.memoizedProps.value!=null&&wc(ne,"number",ne.value)}switch(ze=te?hr(te):window,s){case"focusin":(I1(ze)||ze.contentEditable==="true")&&(Qo=ze,mm=te,Oc=null);break;case"focusout":Oc=mm=Qo=null;break;case"mousedown":gm=!0;break;case"contextmenu":case"mouseup":case"dragend":gm=!1,F1(fe,o,le);break;case"selectionchange":if(lR)break;case"keydown":case"keyup":F1(fe,o,le)}var st;if(Et)e:{switch(s){case"compositionstart":var dt="onCompositionStart";break e;case"compositionend":dt="onCompositionEnd";break e;case"compositionupdate":dt="onCompositionUpdate";break e}dt=void 0}else Ko?qa(s,o)&&(dt="onCompositionEnd"):s==="keydown"&&o.keyCode===229&&(dt="onCompositionStart");dt&&(ws&&o.locale!=="ko"&&(Ko||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&Ko&&(st=kc()):(bs=le,Ac="value"in bs?bs.value:bs.textContent,Ko=!0)),ze=Dh(te,dt),0<ze.length&&(dt=new Es(dt,s,null,o,le),fe.push({event:dt,listeners:ze}),st?dt.data=st:(st=Yo(o),st!==null&&(dt.data=st)))),(st=Ir?Zk(s,o):eR(s,o))&&(dt=Dh(te,"onBeforeInput"),0<dt.length&&(ze=new Es("onBeforeInput","beforeinput",null,o,le),fe.push({event:ze,listeners:dt}),ze.data=st)),qR(fe,s,te,o,le)}px(fe,i)})}function au(s,i,o){return{instance:s,listener:i,currentTarget:o}}function Dh(s,i){for(var o=i+"Capture",u=[];s!==null;){var m=s,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=Yr(s,o),m!=null&&u.unshift(au(s,m,y)),m=Yr(s,i),m!=null&&u.push(au(s,m,y))),s.tag===3)return u;s=s.return}return[]}function QR(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function gx(s,i,o,u,m){for(var y=i._reactName,E=[];o!==null&&o!==u;){var N=o,q=N.alternate,te=N.stateNode;if(N=N.tag,q!==null&&q===u)break;N!==5&&N!==26&&N!==27||te===null||(q=te,m?(te=Yr(o,y),te!=null&&E.unshift(au(o,te,q))):m||(te=Yr(o,y),te!=null&&E.push(au(o,te,q)))),o=o.return}E.length!==0&&s.push({event:i,listeners:E})}var XR=/\r\n?/g,WR=/\u0000|\uFFFD/g;function yx(s){return(typeof s=="string"?s:""+s).replace(XR,`
`).replace(WR,"")}function vx(s,i){return i=yx(i),yx(s)===i}function jt(s,i,o,u,m,y){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||er(s,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&er(s,""+u);break;case"className":fr(s,"class",u);break;case"tabIndex":fr(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":fr(s,o,u);break;case"style":Tc(s,u,y);break;case"data":if(i!=="object"){fr(s,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){s.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(o);break}u=Fo(""+u),s.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(i!=="input"&&jt(s,i,"name",m.name,m,null),jt(s,i,"formEncType",m.formEncType,m,null),jt(s,i,"formMethod",m.formMethod,m,null),jt(s,i,"formTarget",m.formTarget,m,null)):(jt(s,i,"encType",m.encType,m,null),jt(s,i,"method",m.method,m,null),jt(s,i,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(o);break}u=Fo(""+u),s.setAttribute(o,u);break;case"onClick":u!=null&&(s.onclick=Gr);break;case"onScroll":u!=null&&ct("scroll",s);break;case"onScrollEnd":u!=null&&ct("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}o=Fo(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,""+u):s.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,""):s.removeAttribute(o);break;case"capture":case"download":u===!0?s.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,u):s.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(o,u):s.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(o):s.setAttribute(o,u);break;case"popover":ct("beforetoggle",s),ct("toggle",s),Uo(s,"popover",u);break;case"xlinkActuate":on(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":on(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":on(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":on(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":on(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":on(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":on(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":on(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":on(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Uo(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Dd.get(o)||o,Uo(s,o,u))}}function Bg(s,i,o,u,m,y){switch(o){case"style":Tc(s,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"children":typeof u=="string"?er(s,u):(typeof u=="number"||typeof u=="bigint")&&er(s,""+u);break;case"onScroll":u!=null&&ct("scroll",s);break;case"onScrollEnd":u!=null&&ct("scrollend",s);break;case"onClick":u!=null&&(s.onclick=Gr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vc.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),i=o.slice(2,m?o.length-7:void 0),y=s[xn]||null,y=y!=null?y[o]:null,typeof y=="function"&&s.removeEventListener(i,y,m),typeof u=="function")){typeof y!="function"&&y!==null&&(o in s?s[o]=null:s.hasAttribute(o)&&s.removeAttribute(o)),s.addEventListener(i,u,m);break e}o in s?s[o]=u:u===!0?s.setAttribute(o,""):Uo(s,o,u)}}}function In(s,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ct("error",s),ct("load",s);var u=!1,m=!1,y;for(y in o)if(o.hasOwnProperty(y)){var E=o[y];if(E!=null)switch(y){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:jt(s,i,y,E,o,null)}}m&&jt(s,i,"srcSet",o.srcSet,o,null),u&&jt(s,i,"src",o.src,o,null);return;case"input":ct("invalid",s);var N=y=E=m=null,q=null,te=null;for(u in o)if(o.hasOwnProperty(u)){var le=o[u];if(le!=null)switch(u){case"name":m=le;break;case"type":E=le;break;case"checked":q=le;break;case"defaultChecked":te=le;break;case"value":y=le;break;case"defaultValue":N=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,i));break;default:jt(s,i,u,le,o,null)}}Nd(s,y,N,q,te,E,m,!1);return;case"select":ct("invalid",s),u=E=y=null;for(m in o)if(o.hasOwnProperty(m)&&(N=o[m],N!=null))switch(m){case"value":y=N;break;case"defaultValue":E=N;break;case"multiple":u=N;default:jt(s,i,m,N,o,null)}i=y,o=E,s.multiple=!!u,i!=null?Ri(s,!!u,i,!1):o!=null&&Ri(s,!!u,o,!0);return;case"textarea":ct("invalid",s),y=m=u=null;for(E in o)if(o.hasOwnProperty(E)&&(N=o[E],N!=null))switch(E){case"value":u=N;break;case"defaultValue":m=N;break;case"children":y=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(r(91));break;default:jt(s,i,E,N,o,null)}Ni(s,u,m,y);return;case"option":for(q in o)if(o.hasOwnProperty(q)&&(u=o[q],u!=null))switch(q){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:jt(s,i,q,u,o,null)}return;case"dialog":ct("beforetoggle",s),ct("toggle",s),ct("cancel",s),ct("close",s);break;case"iframe":case"object":ct("load",s);break;case"video":case"audio":for(u=0;u<iu.length;u++)ct(iu[u],s);break;case"image":ct("error",s),ct("load",s);break;case"details":ct("toggle",s);break;case"embed":case"source":case"link":ct("error",s),ct("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in o)if(o.hasOwnProperty(te)&&(u=o[te],u!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:jt(s,i,te,u,o,null)}return;default:if(Bo(i)){for(le in o)o.hasOwnProperty(le)&&(u=o[le],u!==void 0&&Bg(s,i,le,u,o,void 0));return}}for(N in o)o.hasOwnProperty(N)&&(u=o[N],u!=null&&jt(s,i,N,u,o,null))}function JR(s,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,E=null,N=null,q=null,te=null,le=null;for(se in o){var fe=o[se];if(o.hasOwnProperty(se)&&fe!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":q=fe;default:u.hasOwnProperty(se)||jt(s,i,se,null,u,fe)}}for(var ne in u){var se=u[ne];if(fe=o[ne],u.hasOwnProperty(ne)&&(se!=null||fe!=null))switch(ne){case"type":y=se;break;case"name":m=se;break;case"checked":te=se;break;case"defaultChecked":le=se;break;case"value":E=se;break;case"defaultValue":N=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,i));break;default:se!==fe&&jt(s,i,ne,se,u,fe)}}zo(s,E,N,q,te,le,y,m);return;case"select":se=E=N=ne=null;for(y in o)if(q=o[y],o.hasOwnProperty(y)&&q!=null)switch(y){case"value":break;case"multiple":se=q;default:u.hasOwnProperty(y)||jt(s,i,y,null,u,q)}for(m in u)if(y=u[m],q=o[m],u.hasOwnProperty(m)&&(y!=null||q!=null))switch(m){case"value":ne=y;break;case"defaultValue":N=y;break;case"multiple":E=y;default:y!==q&&jt(s,i,m,y,u,q)}i=N,o=E,u=se,ne!=null?Ri(s,!!o,ne,!1):!!u!=!!o&&(i!=null?Ri(s,!!o,i,!0):Ri(s,!!o,o?[]:"",!1));return;case"textarea":se=ne=null;for(N in o)if(m=o[N],o.hasOwnProperty(N)&&m!=null&&!u.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:jt(s,i,N,null,u,m)}for(E in u)if(m=u[E],y=o[E],u.hasOwnProperty(E)&&(m!=null||y!=null))switch(E){case"value":ne=m;break;case"defaultValue":se=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==y&&jt(s,i,E,m,u,y)}Id(s,ne,se);return;case"option":for(var Oe in o)if(ne=o[Oe],o.hasOwnProperty(Oe)&&ne!=null&&!u.hasOwnProperty(Oe))switch(Oe){case"selected":s.selected=!1;break;default:jt(s,i,Oe,null,u,ne)}for(q in u)if(ne=u[q],se=o[q],u.hasOwnProperty(q)&&ne!==se&&(ne!=null||se!=null))switch(q){case"selected":s.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:jt(s,i,q,ne,u,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ke in o)ne=o[Ke],o.hasOwnProperty(Ke)&&ne!=null&&!u.hasOwnProperty(Ke)&&jt(s,i,Ke,null,u,ne);for(te in u)if(ne=u[te],se=o[te],u.hasOwnProperty(te)&&ne!==se&&(ne!=null||se!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,i));break;default:jt(s,i,te,ne,u,se)}return;default:if(Bo(i)){for(var Dt in o)ne=o[Dt],o.hasOwnProperty(Dt)&&ne!==void 0&&!u.hasOwnProperty(Dt)&&Bg(s,i,Dt,void 0,u,ne);for(le in u)ne=u[le],se=o[le],!u.hasOwnProperty(le)||ne===se||ne===void 0&&se===void 0||Bg(s,i,le,ne,u,se);return}}for(var X in o)ne=o[X],o.hasOwnProperty(X)&&ne!=null&&!u.hasOwnProperty(X)&&jt(s,i,X,null,u,ne);for(fe in u)ne=u[fe],se=o[fe],!u.hasOwnProperty(fe)||ne===se||ne==null&&se==null||jt(s,i,fe,ne,u,se)}function bx(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ZR(){if(typeof performance.getEntriesByType=="function"){for(var s=0,i=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var m=o[u],y=m.transferSize,E=m.initiatorType,N=m.duration;if(y&&N&&bx(E)){for(E=0,N=m.responseEnd,u+=1;u<o.length;u++){var q=o[u],te=q.startTime;if(te>N)break;var le=q.transferSize,fe=q.initiatorType;le&&bx(fe)&&(q=q.responseEnd,E+=le*(q<N?1:(N-te)/(q-te)))}if(--u,i+=8*(y+E)/(m.duration/1e3),s++,10<s)break}}if(0<s)return i/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Fg=null,$g=null;function Mh(s){return s.nodeType===9?s:s.ownerDocument}function _x(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xx(s,i){if(s===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&i==="foreignObject"?0:s}function Hg(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var qg=null;function e3(){var s=window.event;return s&&s.type==="popstate"?s===qg?!1:(qg=s,!0):(qg=null,!1)}var Ex=typeof setTimeout=="function"?setTimeout:void 0,t3=typeof clearTimeout=="function"?clearTimeout:void 0,wx=typeof Promise=="function"?Promise:void 0,n3=typeof queueMicrotask=="function"?queueMicrotask:typeof wx<"u"?function(s){return wx.resolve(null).then(s).catch(r3)}:Ex;function r3(s){setTimeout(function(){throw s})}function Zi(s){return s==="head"}function Sx(s,i){var o=i,u=0;do{var m=o.nextSibling;if(s.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(u===0){s.removeChild(m),El(i);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")ou(s.ownerDocument.documentElement);else if(o==="head"){o=s.ownerDocument.head,ou(o);for(var y=o.firstChild;y;){var E=y.nextSibling,N=y.nodeName;y[hs]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&y.rel.toLowerCase()==="stylesheet"||o.removeChild(y),y=E}}else o==="body"&&ou(s.ownerDocument.body);o=m}while(o);El(i)}function Tx(s,i){var o=s;s=0;do{var u=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(s===0)break;s--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||s++;o=u}while(o)}function Gg(s){var i=s.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Gg(o),Vo(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}s.removeChild(o)}}function s3(s,i,o,u){for(;s.nodeType===1;){var m=o;if(s.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[hs])switch(i){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(y=s.getAttribute("rel"),y==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(y!==m.rel||s.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||s.getAttribute("title")!==(m.title==null?null:m.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(y=s.getAttribute("src"),(y!==(m.src==null?null:m.src)||s.getAttribute("type")!==(m.type==null?null:m.type)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(i==="input"&&s.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&s.getAttribute("name")===y)return s}else return s;if(s=Vr(s.nextSibling),s===null)break}return null}function i3(s,i,o){if(i==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=Vr(s.nextSibling),s===null))return null;return s}function Cx(s,i){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!i||(s=Vr(s.nextSibling),s===null))return null;return s}function Yg(s){return s.data==="$?"||s.data==="$~"}function Kg(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function a3(s,i){var o=s.ownerDocument;if(s.data==="$~")s._reactRetry=i;else if(s.data!=="$?"||o.readyState!=="loading")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function Vr(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return s}var Qg=null;function Ax(s){s=s.nextSibling;for(var i=0;s;){if(s.nodeType===8){var o=s.data;if(o==="/$"||o==="/&"){if(i===0)return Vr(s.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}s=s.nextSibling}return null}function kx(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var o=s.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return s;i--}else o!=="/$"&&o!=="/&"||i++}s=s.previousSibling}return null}function Rx(s,i,o){switch(i=Mh(o),s){case"html":if(s=i.documentElement,!s)throw Error(r(452));return s;case"head":if(s=i.head,!s)throw Error(r(453));return s;case"body":if(s=i.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function ou(s){for(var i=s.attributes;i.length;)s.removeAttributeNode(i[0]);Vo(s)}var Ur=new Map,Nx=new Set;function Oh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var hi=K.d;K.d={f:o3,r:l3,D:c3,C:u3,L:d3,m:h3,X:p3,S:f3,M:m3};function o3(){var s=hi.f(),i=Ch();return s||i}function l3(s){var i=kr(s);i!==null&&i.tag===5&&i.type==="form"?Yb(i):hi.r(s)}var bl=typeof document>"u"?null:document;function Ix(s,i,o){var u=bl;if(u&&typeof i=="string"&&i){var m=Zn(i);m='link[rel="'+s+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),Nx.has(m)||(Nx.add(m),s={rel:s,crossOrigin:o,href:i},u.querySelector(m)===null&&(i=u.createElement("link"),In(i,"link",s),an(i),u.head.appendChild(i)))}}function c3(s){hi.D(s),Ix("dns-prefetch",s,null)}function u3(s,i){hi.C(s,i),Ix("preconnect",s,i)}function d3(s,i,o){hi.L(s,i,o);var u=bl;if(u&&s&&i){var m='link[rel="preload"][as="'+Zn(i)+'"]';i==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+Zn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+Zn(o.imageSizes)+'"]')):m+='[href="'+Zn(s)+'"]';var y=m;switch(i){case"style":y=_l(s);break;case"script":y=xl(s)}Ur.has(y)||(s=b({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:s,as:i},o),Ur.set(y,s),u.querySelector(m)!==null||i==="style"&&u.querySelector(lu(y))||i==="script"&&u.querySelector(cu(y))||(i=u.createElement("link"),In(i,"link",s),an(i),u.head.appendChild(i)))}}function h3(s,i){hi.m(s,i);var o=bl;if(o&&s){var u=i&&typeof i.as=="string"?i.as:"script",m='link[rel="modulepreload"][as="'+Zn(u)+'"][href="'+Zn(s)+'"]',y=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=xl(s)}if(!Ur.has(y)&&(s=b({rel:"modulepreload",href:s},i),Ur.set(y,s),o.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(cu(y)))return}u=o.createElement("link"),In(u,"link",s),an(u),o.head.appendChild(u)}}}function f3(s,i,o){hi.S(s,i,o);var u=bl;if(u&&s){var m=ps(u).hoistableStyles,y=_l(s);i=i||"default";var E=m.get(y);if(!E){var N={loading:0,preload:null};if(E=u.querySelector(lu(y)))N.loading=5;else{s=b({rel:"stylesheet",href:s,"data-precedence":i},o),(o=Ur.get(y))&&Xg(s,o);var q=E=u.createElement("link");an(q),In(q,"link",s),q._p=new Promise(function(te,le){q.onload=te,q.onerror=le}),q.addEventListener("load",function(){N.loading|=1}),q.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Ph(E,i,u)}E={type:"stylesheet",instance:E,count:1,state:N},m.set(y,E)}}}function p3(s,i){hi.X(s,i);var o=bl;if(o&&s){var u=ps(o).hoistableScripts,m=xl(s),y=u.get(m);y||(y=o.querySelector(cu(m)),y||(s=b({src:s,async:!0},i),(i=Ur.get(m))&&Wg(s,i),y=o.createElement("script"),an(y),In(y,"link",s),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function m3(s,i){hi.M(s,i);var o=bl;if(o&&s){var u=ps(o).hoistableScripts,m=xl(s),y=u.get(m);y||(y=o.querySelector(cu(m)),y||(s=b({src:s,async:!0,type:"module"},i),(i=Ur.get(m))&&Wg(s,i),y=o.createElement("script"),an(y),In(y,"link",s),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function jx(s,i,o,u){var m=(m=ye.current)?Oh(m):null;if(!m)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=_l(o.href),o=ps(m).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){s=_l(o.href);var y=ps(m).hoistableStyles,E=y.get(s);if(E||(m=m.ownerDocument||m,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(s,E),(y=m.querySelector(lu(s)))&&!y._p&&(E.instance=y,E.state.loading=5),Ur.has(s)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Ur.set(s,o),y||g3(m,s,o,E.state))),i&&u===null)throw Error(r(528,""));return E}if(i&&u!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=xl(o),o=ps(m).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function _l(s){return'href="'+Zn(s)+'"'}function lu(s){return'link[rel="stylesheet"]['+s+"]"}function Dx(s){return b({},s,{"data-precedence":s.precedence,precedence:null})}function g3(s,i,o,u){s.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=s.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),In(i,"link",o),an(i),s.head.appendChild(i))}function xl(s){return'[src="'+Zn(s)+'"]'}function cu(s){return"script[async]"+s}function Mx(s,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=s.querySelector('style[data-href~="'+Zn(o.href)+'"]');if(u)return i.instance=u,an(u),u;var m=b({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),an(u),In(u,"style",m),Ph(u,o.precedence,s),i.instance=u;case"stylesheet":m=_l(o.href);var y=s.querySelector(lu(m));if(y)return i.state.loading|=4,i.instance=y,an(y),y;u=Dx(o),(m=Ur.get(m))&&Xg(u,m),y=(s.ownerDocument||s).createElement("link"),an(y);var E=y;return E._p=new Promise(function(N,q){E.onload=N,E.onerror=q}),In(y,"link",u),i.state.loading|=4,Ph(y,o.precedence,s),i.instance=y;case"script":return y=xl(o.src),(m=s.querySelector(cu(y)))?(i.instance=m,an(m),m):(u=o,(m=Ur.get(y))&&(u=b({},o),Wg(u,m)),s=s.ownerDocument||s,m=s.createElement("script"),an(m),In(m,"link",u),s.head.appendChild(m),i.instance=m);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Ph(u,o.precedence,s));return i.instance}function Ph(s,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,y=m,E=0;E<u.length;E++){var N=u[E];if(N.dataset.precedence===i)y=N;else if(y!==m)break}y?y.parentNode.insertBefore(s,y.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(s,i.firstChild))}function Xg(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.title==null&&(s.title=i.title)}function Wg(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.integrity==null&&(s.integrity=i.integrity)}var Lh=null;function Ox(s,i,o){if(Lh===null){var u=new Map,m=Lh=new Map;m.set(o,u)}else m=Lh,u=m.get(o),u||(u=new Map,m.set(o,u));if(u.has(s))return u;for(u.set(s,null),o=o.getElementsByTagName(s),m=0;m<o.length;m++){var y=o[m];if(!(y[hs]||y[sn]||s==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var E=y.getAttribute(i)||"";E=s+E;var N=u.get(E);N?N.push(y):u.set(E,[y])}}return u}function Px(s,i,o){s=s.ownerDocument||s,s.head.insertBefore(o,i==="title"?s.querySelector("head > title"):null)}function y3(s,i,o){if(o===1||i.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return s=i.disabled,typeof i.precedence=="string"&&s==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Lx(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function v3(s,i,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=_l(u.href),y=i.querySelector(lu(m));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(s.count++,s=Vh.bind(s),i.then(s,s)),o.state.loading|=4,o.instance=y,an(y);return}y=i.ownerDocument||i,u=Dx(u),(m=Ur.get(m))&&Xg(u,m),y=y.createElement("link"),an(y);var E=y;E._p=new Promise(function(N,q){E.onload=N,E.onerror=q}),In(y,"link",u),o.instance=y}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(s.count++,o=Vh.bind(s),i.addEventListener("load",o),i.addEventListener("error",o))}}var Jg=0;function b3(s,i){return s.stylesheets&&s.count===0&&zh(s,s.stylesheets),0<s.count||0<s.imgCount?function(o){var u=setTimeout(function(){if(s.stylesheets&&zh(s,s.stylesheets),s.unsuspend){var y=s.unsuspend;s.unsuspend=null,y()}},6e4+i);0<s.imgBytes&&Jg===0&&(Jg=62500*ZR());var m=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&zh(s,s.stylesheets),s.unsuspend)){var y=s.unsuspend;s.unsuspend=null,y()}},(s.imgBytes>Jg?50:800)+i);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function Vh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)zh(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Uh=null;function zh(s,i){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Uh=new Map,i.forEach(_3,s),Uh=null,Vh.call(s))}function _3(s,i){if(!(i.state.loading&4)){var o=Uh.get(s);if(o)var u=o.get(null);else{o=new Map,Uh.set(s,o);for(var m=s.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var E=m[y];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),u=E)}u&&o.set(null,u)}m=i.instance,E=m.getAttribute("data-precedence"),y=o.get(E)||u,y===u&&o.set(null,m),o.set(E,m),this.count++,u=Vh.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),y?y.parentNode.insertBefore(m,y.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(m,s.firstChild)),i.state.loading|=4}}var uu={$$typeof:I,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function x3(s,i,o,u,m,y,E,N,q){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=us(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=us(0),this.hiddenUpdates=us(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function Vx(s,i,o,u,m,y,E,N,q,te,le,fe){return s=new x3(s,i,o,E,q,te,le,fe,N),i=1,y===!0&&(i|=24),y=mr(3,null,null,i),s.current=y,y.stateNode=s,i=Im(),i.refCount++,s.pooledCache=i,i.refCount++,y.memoizedState={element:u,isDehydrated:o,cache:i},Om(y),s}function Ux(s){return s?(s=Jo,s):Jo}function zx(s,i,o,u,m,y){m=Ux(m),u.context===null?u.context=m:u.pendingContext=m,u=Fi(i),u.payload={element:o},y=y===void 0?null:y,y!==null&&(u.callback=y),o=$i(s,u,i),o!==null&&(ir(o,s,i),Fc(o,s,i))}function Bx(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var o=s.retryLane;s.retryLane=o!==0&&o<i?o:i}}function Zg(s,i){Bx(s,i),(s=s.alternate)&&Bx(s,i)}function Fx(s){if(s.tag===13||s.tag===31){var i=Ka(s,67108864);i!==null&&ir(i,s,67108864),Zg(s,67108864)}}function $x(s){if(s.tag===13||s.tag===31){var i=_r();i=Pa(i);var o=Ka(s,i);o!==null&&ir(o,s,i),Zg(s,i)}}var Bh=!0;function E3(s,i,o,u){var m=$.T;$.T=null;var y=K.p;try{K.p=2,ey(s,i,o,u)}finally{K.p=y,$.T=m}}function w3(s,i,o,u){var m=$.T;$.T=null;var y=K.p;try{K.p=8,ey(s,i,o,u)}finally{K.p=y,$.T=m}}function ey(s,i,o,u){if(Bh){var m=ty(u);if(m===null)zg(s,i,u,Fh,o),qx(s,u);else if(T3(m,s,i,o,u))u.stopPropagation();else if(qx(s,u),i&4&&-1<S3.indexOf(s)){for(;m!==null;){var y=kr(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var E=ls(y.pendingLanes);if(E!==0){var N=y;for(N.pendingLanes|=2,N.entangledLanes|=2;E;){var q=1<<31-Wt(E);N.entanglements[1]|=q,E&=~q}As(y),(wt&6)===0&&(Sh=xe()+500,su(0))}}break;case 31:case 13:N=Ka(y,2),N!==null&&ir(N,y,2),Ch(),Zg(y,2)}if(y=ty(u),y===null&&zg(s,i,u,Fh,o),y===m)break;m=y}m!==null&&u.stopPropagation()}else zg(s,i,u,null,o)}}function ty(s){return s=Rr(s),ny(s)}var Fh=null;function ny(s){if(Fh=null,s=fs(s),s!==null){var i=l(s);if(i===null)s=null;else{var o=i.tag;if(o===13){if(s=c(i),s!==null)return s;s=null}else if(o===31){if(s=h(i),s!==null)return s;s=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null)}}return Fh=s,null}function Hx(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Be()){case vt:return 2;case Xt:return 8;case Gn:case Jn:return 32;case Ht:return 268435456;default:return 32}default:return 32}}var ry=!1,ea=null,ta=null,na=null,du=new Map,hu=new Map,ra=[],S3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function qx(s,i){switch(s){case"focusin":case"focusout":ea=null;break;case"dragenter":case"dragleave":ta=null;break;case"mouseover":case"mouseout":na=null;break;case"pointerover":case"pointerout":du.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":hu.delete(i.pointerId)}}function fu(s,i,o,u,m,y){return s===null||s.nativeEvent!==y?(s={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:y,targetContainers:[m]},i!==null&&(i=kr(i),i!==null&&Fx(i)),s):(s.eventSystemFlags|=u,i=s.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),s)}function T3(s,i,o,u,m){switch(i){case"focusin":return ea=fu(ea,s,i,o,u,m),!0;case"dragenter":return ta=fu(ta,s,i,o,u,m),!0;case"mouseover":return na=fu(na,s,i,o,u,m),!0;case"pointerover":var y=m.pointerId;return du.set(y,fu(du.get(y)||null,s,i,o,u,m)),!0;case"gotpointercapture":return y=m.pointerId,hu.set(y,fu(hu.get(y)||null,s,i,o,u,m)),!0}return!1}function Gx(s){var i=fs(s.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){s.blockedOn=i,Hr(s.priority,function(){$x(o)});return}}else if(i===31){if(i=h(o),i!==null){s.blockedOn=i,Hr(s.priority,function(){$x(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){s.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}s.blockedOn=null}function $h(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var o=ty(s.nativeEvent);if(o===null){o=s.nativeEvent;var u=new o.constructor(o.type,o);Cc=u,o.target.dispatchEvent(u),Cc=null}else return i=kr(o),i!==null&&Fx(i),s.blockedOn=o,!1;i.shift()}return!0}function Yx(s,i,o){$h(s)&&o.delete(i)}function C3(){ry=!1,ea!==null&&$h(ea)&&(ea=null),ta!==null&&$h(ta)&&(ta=null),na!==null&&$h(na)&&(na=null),du.forEach(Yx),hu.forEach(Yx)}function Hh(s,i){s.blockedOn===i&&(s.blockedOn=null,ry||(ry=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,C3)))}var qh=null;function Kx(s){qh!==s&&(qh=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){qh===s&&(qh=null);for(var i=0;i<s.length;i+=3){var o=s[i],u=s[i+1],m=s[i+2];if(typeof u!="function"){if(ny(u||o)===null)continue;break}var y=kr(o);y!==null&&(s.splice(i,3),i-=3,tg(y,{pending:!0,data:m,method:o.method,action:u},u,m))}}))}function El(s){function i(q){return Hh(q,s)}ea!==null&&Hh(ea,s),ta!==null&&Hh(ta,s),na!==null&&Hh(na,s),du.forEach(i),hu.forEach(i);for(var o=0;o<ra.length;o++){var u=ra[o];u.blockedOn===s&&(u.blockedOn=null)}for(;0<ra.length&&(o=ra[0],o.blockedOn===null);)Gx(o),o.blockedOn===null&&ra.shift();if(o=(s.ownerDocument||s).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var m=o[u],y=o[u+1],E=m[xn]||null;if(typeof y=="function")E||Kx(o);else if(E){var N=null;if(y&&y.hasAttribute("formAction")){if(m=y,E=y[xn]||null)N=E.formAction;else if(ny(m)!==null)continue}else N=E.action;typeof N=="function"?o[u+1]=N:(o.splice(u,3),u-=3),Kx(o)}}}function Qx(){function s(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(E){return m=E})},focusReset:"manual",scroll:"manual"})}function i(){m!==null&&(m(),m=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),m!==null&&(m(),m=null)}}}function sy(s){this._internalRoot=s}Gh.prototype.render=sy.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,u=_r();zx(o,u,s,i,null,null)},Gh.prototype.unmount=sy.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;zx(s.current,2,null,s,null,null),Ch(),i[ds]=null}};function Gh(s){this._internalRoot=s}Gh.prototype.unstable_scheduleHydration=function(s){if(s){var i=Cd();s={blockedOn:null,target:s,priority:i};for(var o=0;o<ra.length&&i!==0&&i<ra[o].priority;o++);ra.splice(o,0,s),o===0&&Gx(s)}};var Xx=e.version;if(Xx!=="19.2.0")throw Error(r(527,Xx,"19.2.0"));K.findDOMNode=function(s){var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=g(i),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var A3={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yh.isDisabled&&Yh.supportsFiber)try{Fr=Yh.inject(A3),Cn=Yh}catch{}}return mu.createRoot=function(s,i){if(!a(s))throw Error(r(299));var o=!1,u="",m=r_,y=s_,E=i_;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError)),i=Vx(s,1,!1,null,null,o,u,null,m,y,E,Qx),s[ds]=i.current,Ug(s),new sy(i)},mu.hydrateRoot=function(s,i,o){if(!a(s))throw Error(r(299));var u=!1,m="",y=r_,E=s_,N=i_,q=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(N=o.onRecoverableError),o.formState!==void 0&&(q=o.formState)),i=Vx(s,1,!0,i,o??null,u,m,q,y,E,N,Qx),i.context=Ux(null),o=i.current,u=_r(),u=Pa(u),m=Fi(u),m.callback=null,$i(o,m,u),o=u,i.current.lanes=o,Ma(i,o),As(i),s[ds]=i.current,Ug(s),new Gh(i)},mu.version="19.2.0",mu}var a2;function V3(){if(a2)return oy.exports;a2=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),oy.exports=L3(),oy.exports}var U3=V3();const z3=()=>{};var o2={};const AS=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let a=n.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},B3=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const a=n[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],c=n[t++],h=n[t++],p=((a&7)<<18|(l&63)<<12|(c&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},kS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<n.length;a+=3){const l=n[a],c=a+1<n.length,h=c?n[a+1]:0,p=a+2<n.length,g=p?n[a+2]:0,v=l>>2,b=(l&3)<<4|h>>4;let x=(h&15)<<2|g>>6,C=g&63;p||(C=64,c||(x=64)),r.push(t[v],t[b],t[x],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(AS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):B3(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],h=a<n.length?t[n.charAt(a)]:0;++a;const g=a<n.length?t[n.charAt(a)]:64;++a;const b=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||h==null||g==null||b==null)throw new F3;const x=l<<2|h>>4;if(r.push(x),g!==64){const C=h<<4&240|g>>2;if(r.push(C),b!==64){const R=g<<6&192|b;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class F3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $3=function(n){const e=AS(n);return kS.encodeByteArray(e,!0)},Lf=function(n){return $3(n).replace(/\./g,"")},RS=function(n){try{return kS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function H3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const q3=()=>H3().__FIREBASE_DEFAULTS__,G3=()=>{if(typeof process>"u"||typeof o2>"u")return;const n=o2.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Y3=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&RS(n[1]);return e&&JSON.parse(e)},bp=()=>{try{return z3()||q3()||G3()||Y3()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},NS=n=>bp()?.emulatorHosts?.[n],IS=n=>{const e=NS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},jS=()=>bp()?.config,DS=n=>bp()?.[`_${n}`];class K3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function To(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function K0(n){return(await fetch(n,{credentials:"include"})).ok}function MS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Lf(JSON.stringify(t)),Lf(JSON.stringify(c)),""].join(".")}const Iu={};function Q3(){const n={prod:[],emulator:[]};for(const e of Object.keys(Iu))Iu[e]?n.emulator.push(e):n.prod.push(e);return n}function X3(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let l2=!1;function Q0(n,e){if(typeof window>"u"||typeof document>"u"||!To(window.location.host)||Iu[n]===e||Iu[n]||l2)return;Iu[n]=e;function t(x){return`__firebase__banner__${x}`}const r="__firebase__banner",l=Q3().prod.length>0;function c(){const x=document.getElementById(r);x&&x.remove()}function h(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function p(x,C){x.setAttribute("width","24"),x.setAttribute("id",C),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function g(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{l2=!0,c()},x}function v(x,C){x.setAttribute("id",C),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function b(){const x=X3(r),C=t("text"),R=document.getElementById(C)||document.createElement("span"),j=t("learnmore"),A=document.getElementById(j)||document.createElement("a"),B=t("preprendIcon"),G=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const I=x.element;h(I),v(A,j);const V=g();p(G,B),I.append(G,R,A,V),document.body.appendChild(I)}l?(R.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function $n(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function W3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($n())}function J3(){const n=bp()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Z3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function eN(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function tN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nN(){const n=$n();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function rN(){return!J3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sN(){try{return typeof indexedDB=="object"}catch{return!1}}function iN(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const aN="FirebaseError";class $s extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=aN,Object.setPrototypeOf(this,$s.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sd.prototype.create)}}class sd{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?oN(l,r):"Error",h=`${this.serviceName}: ${c} (${a}).`;return new $s(a,h,r)}}function oN(n,e){return n.replace(lN,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const lN=/\{\$([^}]+)}/g;function cN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function _i(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=n[a],c=e[a];if(c2(l)&&c2(c)){if(!_i(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function c2(n){return n!==null&&typeof n=="object"}function id(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Eu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function wu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function uN(n,e){const t=new dN(n,e);return t.subscribe.bind(t)}class dN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");hN(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=dy),a.error===void 0&&(a.error=dy),a.complete===void 0&&(a.complete=dy);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hN(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function dy(){}function Pt(n){return n&&n._delegate?n._delegate:n}class Ea{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const co="[DEFAULT]";class fN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new K3;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mN(e))try{this.getOrInitializeService({instanceIdentifier:co})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=co){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=co){return this.instances.has(e)}getOptions(e=co){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);r===h&&c.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:pN(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=co){return this.component?this.component.multipleInstances?e:co:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pN(n){return n===co?void 0:n}function mN(n){return n.instantiationMode==="EAGER"}class gN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new fN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var ht;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ht||(ht={}));const yN={debug:ht.DEBUG,verbose:ht.VERBOSE,info:ht.INFO,warn:ht.WARN,error:ht.ERROR,silent:ht.SILENT},vN=ht.INFO,bN={[ht.DEBUG]:"log",[ht.VERBOSE]:"log",[ht.INFO]:"info",[ht.WARN]:"warn",[ht.ERROR]:"error"},_N=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),a=bN[e];if(a)console[a](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let X0=class{constructor(e){this.name=e,this._logLevel=vN,this._logHandler=_N,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ht))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ht.DEBUG,...e),this._logHandler(this,ht.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ht.VERBOSE,...e),this._logHandler(this,ht.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ht.INFO,...e),this._logHandler(this,ht.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ht.WARN,...e),this._logHandler(this,ht.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ht.ERROR,...e),this._logHandler(this,ht.ERROR,...e)}};const xN=(n,e)=>e.some(t=>n instanceof t);let u2,d2;function EN(){return u2||(u2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wN(){return d2||(d2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const OS=new WeakMap,Gy=new WeakMap,PS=new WeakMap,hy=new WeakMap,W0=new WeakMap;function SN(n){const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(ya(n.result)),a()},c=()=>{r(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&OS.set(t,n)}).catch(()=>{}),W0.set(e,n),e}function TN(n){if(Gy.has(n))return;const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Gy.set(n,e)}let Yy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Gy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||PS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ya(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function CN(n){Yy=n(Yy)}function AN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(fy(this),e,...t);return PS.set(r,e.sort?e.sort():[e]),ya(r)}:wN().includes(n)?function(...e){return n.apply(fy(this),e),ya(OS.get(this))}:function(...e){return ya(n.apply(fy(this),e))}}function kN(n){return typeof n=="function"?AN(n):(n instanceof IDBTransaction&&TN(n),xN(n,EN())?new Proxy(n,Yy):n)}function ya(n){if(n instanceof IDBRequest)return SN(n);if(hy.has(n))return hy.get(n);const e=kN(n);return e!==n&&(hy.set(n,e),W0.set(e,n)),e}const fy=n=>W0.get(n);function RN(n,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(n,e),h=ya(c);return r&&c.addEventListener("upgradeneeded",p=>{r(ya(c.result),p.oldVersion,p.newVersion,ya(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),h.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}const NN=["get","getKey","getAll","getAllKeys","count"],IN=["put","add","delete","clear"],py=new Map;function h2(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(py.get(e))return py.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=IN.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||NN.includes(t)))return;const l=async function(c,...h){const p=this.transaction(c,a?"readwrite":"readonly");let g=p.store;return r&&(g=g.index(h.shift())),(await Promise.all([g[t](...h),a&&p.done]))[0]};return py.set(e,l),l}CN(n=>({...n,get:(e,t,r)=>h2(e,t)||n.get(e,t,r),has:(e,t)=>!!h2(e,t)||n.has(e,t)}));class jN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(DN(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function DN(n){return n.getComponent()?.type==="VERSION"}const Ky="@firebase/app",f2="0.14.6";const xi=new X0("@firebase/app"),MN="@firebase/app-compat",ON="@firebase/analytics-compat",PN="@firebase/analytics",LN="@firebase/app-check-compat",VN="@firebase/app-check",UN="@firebase/auth",zN="@firebase/auth-compat",BN="@firebase/database",FN="@firebase/data-connect",$N="@firebase/database-compat",HN="@firebase/functions",qN="@firebase/functions-compat",GN="@firebase/installations",YN="@firebase/installations-compat",KN="@firebase/messaging",QN="@firebase/messaging-compat",XN="@firebase/performance",WN="@firebase/performance-compat",JN="@firebase/remote-config",ZN="@firebase/remote-config-compat",e6="@firebase/storage",t6="@firebase/storage-compat",n6="@firebase/firestore",r6="@firebase/ai",s6="@firebase/firestore-compat",i6="firebase",a6="12.6.0";const Qy="[DEFAULT]",o6={[Ky]:"fire-core",[MN]:"fire-core-compat",[PN]:"fire-analytics",[ON]:"fire-analytics-compat",[VN]:"fire-app-check",[LN]:"fire-app-check-compat",[UN]:"fire-auth",[zN]:"fire-auth-compat",[BN]:"fire-rtdb",[FN]:"fire-data-connect",[$N]:"fire-rtdb-compat",[HN]:"fire-fn",[qN]:"fire-fn-compat",[GN]:"fire-iid",[YN]:"fire-iid-compat",[KN]:"fire-fcm",[QN]:"fire-fcm-compat",[XN]:"fire-perf",[WN]:"fire-perf-compat",[JN]:"fire-rc",[ZN]:"fire-rc-compat",[e6]:"fire-gcs",[t6]:"fire-gcs-compat",[n6]:"fire-fst",[s6]:"fire-fst-compat",[r6]:"fire-vertex","fire-js":"fire-js",[i6]:"fire-js-all"};const Vf=new Map,l6=new Map,Xy=new Map;function p2(n,e){try{n.container.addComponent(e)}catch(t){xi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function bo(n){const e=n.name;if(Xy.has(e))return xi.debug(`There were multiple attempts to register component ${e}.`),!1;Xy.set(e,n);for(const t of Vf.values())p2(t,n);for(const t of l6.values())p2(t,n);return!0}function _p(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Sr(n){return n==null?!1:n.settings!==void 0}const c6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},va=new sd("app","Firebase",c6);class u6{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ea("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw va.create("app-deleted",{appName:this._name})}}const Co=a6;function LS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Qy,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw va.create("bad-app-name",{appName:String(a)});if(t||(t=jS()),!t)throw va.create("no-options");const l=Vf.get(a);if(l){if(_i(t,l.options)&&_i(r,l.config))return l;throw va.create("duplicate-app",{appName:a})}const c=new gN(a);for(const p of Xy.values())c.addComponent(p);const h=new u6(t,r,c);return Vf.set(a,h),h}function J0(n=Qy){const e=Vf.get(n);if(!e&&n===Qy&&jS())return LS();if(!e)throw va.create("no-app",{appName:n});return e}function js(n,e,t){let r=o6[n]??n;t&&(r+=`-${t}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${r}" with version "${e}":`];a&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xi.warn(c.join(" "));return}bo(new Ea(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const d6="firebase-heartbeat-database",h6=1,Vu="firebase-heartbeat-store";let my=null;function VS(){return my||(my=RN(d6,h6,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Vu)}catch(t){console.warn(t)}}}}).catch(n=>{throw va.create("idb-open",{originalErrorMessage:n.message})})),my}async function f6(n){try{const t=(await VS()).transaction(Vu),r=await t.objectStore(Vu).get(US(n));return await t.done,r}catch(e){if(e instanceof $s)xi.warn(e.message);else{const t=va.create("idb-get",{originalErrorMessage:e?.message});xi.warn(t.message)}}}async function m2(n,e){try{const r=(await VS()).transaction(Vu,"readwrite");await r.objectStore(Vu).put(e,US(n)),await r.done}catch(t){if(t instanceof $s)xi.warn(t.message);else{const r=va.create("idb-set",{originalErrorMessage:t?.message});xi.warn(r.message)}}}function US(n){return`${n.name}!${n.options.appId}`}const p6=1024,m6=30;class g6{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new v6(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=g2();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>m6){const a=b6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){xi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=g2(),{heartbeatsToSend:t,unsentEntries:r}=y6(this._heartbeatsCache.heartbeats),a=Lf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return xi.warn(e),""}}}function g2(){return new Date().toISOString().substring(0,10)}function y6(n,e=p6){const t=[];let r=n.slice();for(const a of n){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),y2(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),y2(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class v6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sN()?iN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await f6(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return m2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return m2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function y2(n){return Lf(JSON.stringify({version:2,heartbeats:n})).length}function b6(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function _6(n){bo(new Ea("platform-logger",e=>new jN(e),"PRIVATE")),bo(new Ea("heartbeat",e=>new g6(e),"PRIVATE")),js(Ky,f2,n),js(Ky,f2,"esm2020"),js("fire-js","")}_6("");var x6="firebase",E6="12.6.0";js(x6,E6,"app");function zS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const w6=zS,BS=new sd("auth","Firebase",zS());const Uf=new X0("@firebase/auth");function S6(n,...e){Uf.logLevel<=ht.WARN&&Uf.warn(`Auth (${Co}): ${n}`,...e)}function pf(n,...e){Uf.logLevel<=ht.ERROR&&Uf.error(`Auth (${Co}): ${n}`,...e)}function is(n,...e){throw Z0(n,...e)}function Ds(n,...e){return Z0(n,...e)}function FS(n,e,t){const r={...w6(),[e]:t};return new sd("auth","Firebase",r).create(e,{appName:n.name})}function vi(n){return FS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Z0(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return BS.create(n,...e)}function Qe(n,e,...t){if(!n)throw Z0(e,...t)}function gi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw pf(e),new Error(e)}function Ei(n,e){n||gi(e)}function Wy(){return typeof self<"u"&&self.location?.href||""}function T6(){return v2()==="http:"||v2()==="https:"}function v2(){return typeof self<"u"&&self.location?.protocol||null}function C6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(T6()||eN()||"connection"in navigator)?navigator.onLine:!0}function A6(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class ad{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ei(t>e,"Short delay should be less than long delay!"),this.isMobile=W3()||tN()}get(){return C6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ev(n,e){Ei(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class $S{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const k6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const R6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],N6=new ad(3e4,6e4);function Ci(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Hs(n,e,t,r,a={}){return HS(n,a,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const h=id({key:n.config.apiKey,...c}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:p,...l};return Z3()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&To(n.emulatorConfig.host)&&(g.credentials="include"),$S.fetch()(await qS(n,n.config.apiHost,t,h),g)})}async function HS(n,e,t){n._canInitEmulator=!1;const r={...k6,...e};try{const a=new j6(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Kh(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const h=l.ok?c.errorMessage:c.error.message,[p,g]=h.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kh(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Kh(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw Kh(n,"user-disabled",c);const v=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw FS(n,v,g);is(n,v)}}catch(a){if(a instanceof $s)throw a;is(n,"network-request-failed",{message:String(a)})}}async function od(n,e,t,r,a={}){const l=await Hs(n,e,t,r,a);return"mfaPendingCredential"in l&&is(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function qS(n,e,t,r){const a=`${e}${t}?${r}`,l=n,c=l.config.emulator?ev(n.config,a):`${n.config.apiScheme}://${a}`;return R6.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function I6(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class j6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ds(this.auth,"network-request-failed")),N6.get())})}}function Kh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=Ds(n,e,r);return a.customData._tokenResponse=t,a}function b2(n){return n!==void 0&&n.enterprise!==void 0}class D6{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return I6(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function M6(n,e){return Hs(n,"GET","/v2/recaptchaConfig",Ci(n,e))}async function O6(n,e){return Hs(n,"POST","/v1/accounts:delete",e)}async function zf(n,e){return Hs(n,"POST","/v1/accounts:lookup",e)}function ju(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function P6(n,e=!1){const t=Pt(n),r=await t.getIdToken(e),a=tv(r);Qe(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:r,authTime:ju(gy(a.auth_time)),issuedAtTime:ju(gy(a.iat)),expirationTime:ju(gy(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function gy(n){return Number(n)*1e3}function tv(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return pf("JWT malformed, contained fewer than 3 sections"),null;try{const a=RS(t);return a?JSON.parse(a):(pf("Failed to decode base64 JWT payload"),null)}catch(a){return pf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function _2(n){const e=tv(n);return Qe(e,"internal-error"),Qe(typeof e.exp<"u","internal-error"),Qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Bl(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof $s&&L6(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function L6({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class V6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Jy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ju(this.lastLoginAt),this.creationTime=ju(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Bf(n){const e=n.auth,t=await n.getIdToken(),r=await Bl(n,zf(e,{idToken:t}));Qe(r?.users.length,e,"internal-error");const a=r.users[0];n._notifyReloadListener(a);const l=a.providerUserInfo?.length?GS(a.providerUserInfo):[],c=z6(n.providerData,l),h=n.isAnonymous,p=!(n.email&&a.passwordHash)&&!c?.length,g=h?p:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Jy(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(n,v)}async function U6(n){const e=Pt(n);await Bf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function z6(n,e){return[...n.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function GS(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function B6(n,e){const t=await HS(n,{},async()=>{const r=id({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,c=await qS(n,a,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:h,body:r};return n.emulatorConfig&&To(n.emulatorConfig.host)&&(p.credentials="include"),$S.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function F6(n,e){return Hs(n,"POST","/v2/accounts:revokeToken",Ci(n,e))}class Dl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Qe(e.idToken,"internal-error"),Qe(typeof e.idToken<"u","internal-error"),Qe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Qe(e.length!==0,"internal-error");const t=_2(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await B6(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,c=new Dl;return r&&(Qe(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(Qe(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Qe(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Dl,this.toJSON())}_performRefresh(){return gi("not implemented")}}function ia(n,e){Qe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ns{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new V6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Jy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Bl(this,this.stsTokenManager.getToken(this.auth,e));return Qe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return P6(this,e)}reload(){return U6(this)}_assign(e){this!==e&&(Qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ns({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Bf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sr(this.auth.app))return Promise.reject(vi(this.auth));const e=await this.getIdToken();return await Bl(this,O6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,h=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:b,emailVerified:x,isAnonymous:C,providerData:R,stsTokenManager:j}=t;Qe(b&&j,e,"internal-error");const A=Dl.fromJSON(this.name,j);Qe(typeof b=="string",e,"internal-error"),ia(r,e.name),ia(a,e.name),Qe(typeof x=="boolean",e,"internal-error"),Qe(typeof C=="boolean",e,"internal-error"),ia(l,e.name),ia(c,e.name),ia(h,e.name),ia(p,e.name),ia(g,e.name),ia(v,e.name);const B=new ns({uid:b,auth:e,email:a,emailVerified:x,displayName:r,isAnonymous:C,photoURL:c,phoneNumber:l,tenantId:h,stsTokenManager:A,createdAt:g,lastLoginAt:v});return R&&Array.isArray(R)&&(B.providerData=R.map(G=>({...G}))),p&&(B._redirectEventId=p),B}static async _fromIdTokenResponse(e,t,r=!1){const a=new Dl;a.updateFromServerResponse(t);const l=new ns({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await Bf(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];Qe(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?GS(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,h=new Dl;h.updateFromIdToken(r);const p=new ns({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Jy(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(p,g),p}}const x2=new Map;function yi(n){Ei(n instanceof Function,"Expected a class definition");let e=x2.get(n);return e?(Ei(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,x2.set(n,e),e)}class YS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}YS.type="NONE";const E2=YS;function mf(n,e,t){return`firebase:${n}:${e}:${t}`}class Ml{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=mf(this.userKey,a.apiKey,l),this.fullPersistenceKey=mf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await zf(this.auth,{idToken:e}).catch(()=>{});return t?ns._fromGetAccountInfoResponse(this.auth,t,e):null}return ns._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ml(yi(E2),e,r);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||yi(E2);const c=mf(r,e.config.apiKey,e.name);let h=null;for(const g of t)try{const v=await g._get(c);if(v){let b;if(typeof v=="string"){const x=await zf(e,{idToken:v}).catch(()=>{});if(!x)break;b=await ns._fromGetAccountInfoResponse(e,x,v)}else b=ns._fromJSON(e,v);g!==l&&(h=b),l=g;break}}catch{}const p=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Ml(l,e,r):(l=p[0],h&&await l._set(c,h.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Ml(l,e,r))}}function w2(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(WS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(KS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ZS(e))return"Blackberry";if(e4(e))return"Webos";if(QS(e))return"Safari";if((e.includes("chrome/")||XS(e))&&!e.includes("edge/"))return"Chrome";if(JS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function KS(n=$n()){return/firefox\//i.test(n)}function QS(n=$n()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function XS(n=$n()){return/crios\//i.test(n)}function WS(n=$n()){return/iemobile/i.test(n)}function JS(n=$n()){return/android/i.test(n)}function ZS(n=$n()){return/blackberry/i.test(n)}function e4(n=$n()){return/webos/i.test(n)}function nv(n=$n()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function $6(n=$n()){return nv(n)&&!!window.navigator?.standalone}function H6(){return nN()&&document.documentMode===10}function t4(n=$n()){return nv(n)||JS(n)||e4(n)||ZS(n)||/windows phone/i.test(n)||WS(n)}function n4(n,e=[]){let t;switch(n){case"Browser":t=w2($n());break;case"Worker":t=`${w2($n())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Co}/${r}`}class q6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,h)=>{try{const p=e(l);c(p)}catch(p){h(p)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function G6(n,e={}){return Hs(n,"GET","/v2/passwordPolicy",Ci(n,e))}const Y6=6;class K6{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Y6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class Q6{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new S2(this),this.idTokenSubscription=new S2(this),this.beforeStateQueue=new q6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=BS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=yi(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ml.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await zf(this,{idToken:e}),r=await ns._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Sr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=r?._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===c)&&h?.user&&(r=h.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Bf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=A6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Sr(this.app))return Promise.reject(vi(this));const t=e?Pt(e):null;return t&&Qe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Sr(this.app)?Promise.reject(vi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Sr(this.app)?Promise.reject(vi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await G6(this),t=new K6(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new sd("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await F6(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&yi(e)||this._popupRedirectResolver;Qe(t,this,"argument-error"),this.redirectPersistenceManager=await Ml.create(this,[yi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Qe(h,this,"internal-error"),h.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,r,a);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=n4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Sr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&S6(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Na(n){return Pt(n)}class S2{constructor(e){this.auth=e,this.observer=null,this.addObserver=uN(t=>this.observer=t)}get next(){return Qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let xp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function X6(n){xp=n}function r4(n){return xp.loadJS(n)}function W6(){return xp.recaptchaEnterpriseScript}function J6(){return xp.gapiScript}function Z6(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class e5{constructor(){this.enterprise=new t5}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class t5{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const n5="recaptcha-enterprise",s4="NO_RECAPTCHA";class r5{constructor(e){this.type=n5,this.auth=Na(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,h)=>{M6(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const g=new D6(p);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(p=>{h(p)})})}function a(l,c,h){const p=window.grecaptcha;b2(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(g=>{c(g)}).catch(()=>{c(s4)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new e5().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{r(this.auth).then(h=>{if(!t&&b2(window.grecaptcha))a(h,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=W6();p.length!==0&&(p+=h),r4(p).then(()=>{a(h,l,c)}).catch(g=>{c(g)})}}).catch(h=>{c(h)})})}}async function T2(n,e,t,r=!1,a=!1){const l=new r5(n);let c;if(a)c=s4;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const p=h.phoneEnrollmentInfo.phoneNumber,g=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const p=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Ff(n,e,t,r,a){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await T2(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await T2(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(l)})}function s5(n,e){const t=_p(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(_i(l,e??{}))return a;is(a,"already-initialized")}return t.initialize({options:e})}function i5(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(yi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function a5(n,e,t){const r=Na(n);Qe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=i4(e),{host:c,port:h}=o5(e),p=h===null?"":`:${h}`,g={url:`${l}//${c}${p}/`},v=Object.freeze({host:c,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){Qe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Qe(_i(g,r.config.emulator)&&_i(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,To(c)?(K0(`${l}//${c}${p}`),Q0("Auth",!0)):l5()}function i4(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function o5(n){const e=i4(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:C2(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:C2(c)}}}function C2(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function l5(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class rv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return gi("not implemented")}_getIdTokenResponse(e){return gi("not implemented")}_linkToIdToken(e,t){return gi("not implemented")}_getReauthenticationResolver(e){return gi("not implemented")}}async function c5(n,e){return Hs(n,"POST","/v1/accounts:update",e)}async function u5(n,e){return Hs(n,"POST","/v1/accounts:signUp",e)}async function d5(n,e){return od(n,"POST","/v1/accounts:signInWithPassword",Ci(n,e))}async function a4(n,e){return Hs(n,"POST","/v1/accounts:sendOobCode",Ci(n,e))}async function h5(n,e){return a4(n,e)}async function f5(n,e){return a4(n,e)}async function p5(n,e){return od(n,"POST","/v1/accounts:signInWithEmailLink",Ci(n,e))}async function m5(n,e){return od(n,"POST","/v1/accounts:signInWithEmailLink",Ci(n,e))}class Uu extends rv{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Uu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Uu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ff(e,t,"signInWithPassword",d5);case"emailLink":return p5(e,{email:this._email,oobCode:this._password});default:is(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ff(e,r,"signUpPassword",u5);case"emailLink":return m5(e,{idToken:t,email:this._email,oobCode:this._password});default:is(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ol(n,e){return od(n,"POST","/v1/accounts:signInWithIdp",Ci(n,e))}const g5="http://localhost";class _o extends rv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new _o(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):is("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=t;if(!r||!a)return null;const c=new _o(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Ol(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ol(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ol(e,t)}buildRequest(){const e={requestUri:g5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=id(t)}return e}}function y5(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function v5(n){const e=Eu(wu(n)).link,t=e?Eu(wu(e)).deep_link_id:null,r=Eu(wu(n)).deep_link_id;return(r?Eu(wu(r)).link:null)||r||t||e||n}class sv{constructor(e){const t=Eu(wu(e)),r=t.apiKey??null,a=t.oobCode??null,l=y5(t.mode??null);Qe(r&&a&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=v5(e);try{return new sv(t)}catch{return null}}}class Ao{constructor(){this.providerId=Ao.PROVIDER_ID}static credential(e,t){return Uu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=sv.parseLink(t);return Qe(r,"argument-error"),Uu._fromEmailAndCode(e,r.code,r.tenantId)}}Ao.PROVIDER_ID="password";Ao.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ao.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class o4{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ld extends o4{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ua extends ld{constructor(){super("facebook.com")}static credential(e){return _o._fromParams({providerId:ua.PROVIDER_ID,signInMethod:ua.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ua.credentialFromTaggedObject(e)}static credentialFromError(e){return ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ua.credential(e.oauthAccessToken)}catch{return null}}}ua.FACEBOOK_SIGN_IN_METHOD="facebook.com";ua.PROVIDER_ID="facebook.com";class da extends ld{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return _o._fromParams({providerId:da.PROVIDER_ID,signInMethod:da.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return da.credentialFromTaggedObject(e)}static credentialFromError(e){return da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return da.credential(t,r)}catch{return null}}}da.GOOGLE_SIGN_IN_METHOD="google.com";da.PROVIDER_ID="google.com";class ha extends ld{constructor(){super("github.com")}static credential(e){return _o._fromParams({providerId:ha.PROVIDER_ID,signInMethod:ha.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ha.credentialFromTaggedObject(e)}static credentialFromError(e){return ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ha.credential(e.oauthAccessToken)}catch{return null}}}ha.GITHUB_SIGN_IN_METHOD="github.com";ha.PROVIDER_ID="github.com";class fa extends ld{constructor(){super("twitter.com")}static credential(e,t){return _o._fromParams({providerId:fa.PROVIDER_ID,signInMethod:fa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return fa.credentialFromTaggedObject(e)}static credentialFromError(e){return fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return fa.credential(t,r)}catch{return null}}}fa.TWITTER_SIGN_IN_METHOD="twitter.com";fa.PROVIDER_ID="twitter.com";async function b5(n,e){return od(n,"POST","/v1/accounts:signUp",Ci(n,e))}class xo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await ns._fromIdTokenResponse(e,r,a),c=A2(r);return new xo({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=A2(r);return new xo({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function A2(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class $f extends $s{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,$f.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new $f(e,t,r,a)}}function l4(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?$f._fromErrorAndOperation(n,l,e,r):l})}async function _5(n,e,t=!1){const r=await Bl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return xo._forOperation(n,"link",r)}async function c4(n,e,t=!1){const{auth:r}=n;if(Sr(r.app))return Promise.reject(vi(r));const a="reauthenticate";try{const l=await Bl(n,l4(r,a,e,n),t);Qe(l.idToken,r,"internal-error");const c=tv(l.idToken);Qe(c,r,"internal-error");const{sub:h}=c;return Qe(n.uid===h,r,"user-mismatch"),xo._forOperation(n,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&is(r,"user-mismatch"),l}}async function u4(n,e,t=!1){if(Sr(n.app))return Promise.reject(vi(n));const r="signIn",a=await l4(n,r,e),l=await xo._fromIdTokenResponse(n,r,a);return t||await n._updateCurrentUser(l.user),l}async function x5(n,e){return u4(Na(n),e)}async function E5(n,e){return c4(Pt(n),e)}async function d4(n){const e=Na(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function h4(n,e,t){const r=Na(n);await Ff(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",f5)}async function w5(n,e,t){if(Sr(n.app))return Promise.reject(vi(n));const r=Na(n),c=await Ff(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",b5).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&d4(n),p}),h=await xo._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(h.user),h}function S5(n,e,t){return Sr(n.app)?Promise.reject(vi(n)):x5(Pt(n),Ao.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&d4(n),r})}async function k2(n,e){const t=Pt(n),a={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:l}=await h5(t.auth,a);l!==n.email&&await n.reload()}function T5(n,e){return C5(Pt(n),null,e)}async function C5(n,e,t){const{auth:r}=n,l={idToken:await n.getIdToken(),returnSecureToken:!0};t&&(l.password=t);const c=await Bl(n,c5(r,l));await n._updateTokensIfNecessary(c,!0)}function A5(n,e,t,r){return Pt(n).onIdTokenChanged(e,t,r)}function k5(n,e,t){return Pt(n).beforeAuthStateChanged(e,t)}function R5(n,e,t,r){return Pt(n).onAuthStateChanged(e,t,r)}function N5(n){return Pt(n).signOut()}const Hf="__sak";class f4{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Hf,"1"),this.storage.removeItem(Hf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const I5=1e3,j5=10;class p4 extends f4{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=t4(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,p)=>{this.notifyListeners(c,p)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);H6()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,j5):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},I5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}p4.type="LOCAL";const D5=p4;class m4 extends f4{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}m4.type="SESSION";const g4=m4;function M5(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Ep{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new Ep(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const h=Array.from(c).map(async g=>g(t.origin,l)),p=await M5(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ep.receivers=[];function iv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class O5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((h,p)=>{const g=iv("",20);a.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(b){const x=b;if(x.data.eventId===g)switch(x.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(x.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Ms(){return window}function P5(n){Ms().location.href=n}function y4(){return typeof Ms().WorkerGlobalScope<"u"&&typeof Ms().importScripts=="function"}async function L5(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function V5(){return navigator?.serviceWorker?.controller||null}function U5(){return y4()?self:null}const v4="firebaseLocalStorageDb",z5=1,qf="firebaseLocalStorage",b4="fbase_key";class cd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function wp(n,e){return n.transaction([qf],e?"readwrite":"readonly").objectStore(qf)}function B5(){const n=indexedDB.deleteDatabase(v4);return new cd(n).toPromise()}function Zy(){const n=indexedDB.open(v4,z5);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(qf,{keyPath:b4})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(qf)?e(r):(r.close(),await B5(),e(await Zy()))})})}async function R2(n,e,t){const r=wp(n,!0).put({[b4]:e,value:t});return new cd(r).toPromise()}async function F5(n,e){const t=wp(n,!1).get(e),r=await new cd(t).toPromise();return r===void 0?null:r.value}function N2(n,e){const t=wp(n,!0).delete(e);return new cd(t).toPromise()}const $5=800,H5=3;class _4{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>H5)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return y4()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ep._getInstance(U5()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await L5(),!this.activeServiceWorker)return;this.sender=new O5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||V5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zy();return await R2(e,Hf,"1"),await N2(e,Hf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>R2(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>F5(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>N2(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=wp(a,!1).getAll();return new cd(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_4.type="LOCAL";const q5=_4;new ad(3e4,6e4);function G5(n,e){return e?yi(e):(Qe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class av extends rv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ol(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ol(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ol(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Y5(n){return u4(n.auth,new av(n),n.bypassAuthState)}function K5(n){const{auth:e,user:t}=n;return Qe(t,e,"internal-error"),c4(t,new av(n),n.bypassAuthState)}async function Q5(n){const{auth:e,user:t}=n;return Qe(t,e,"internal-error"),_5(t,new av(n),n.bypassAuthState)}class x4{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:c,type:h}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Y5;case"linkViaPopup":case"linkViaRedirect":return Q5;case"reauthViaPopup":case"reauthViaRedirect":return K5;default:is(this.auth,"internal-error")}}resolve(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const X5=new ad(2e3,1e4);class Il extends x4{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,Il.currentPopupAction&&Il.currentPopupAction.cancel(),Il.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Qe(e,this.auth,"internal-error"),e}async onExecution(){Ei(this.filter.length===1,"Popup operations only handle one event");const e=iv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ds(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ds(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Il.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ds(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,X5.get())};e()}}Il.currentPopupAction=null;const W5="pendingRedirect",gf=new Map;class J5 extends x4{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=gf.get(this.auth._key());if(!e){try{const r=await Z5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}gf.set(this.auth._key(),e)}return this.bypassAuthState||gf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Z5(n,e){const t=nI(e),r=tI(n);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function eI(n,e){gf.set(n._key(),e)}function tI(n){return yi(n._redirectPersistence)}function nI(n){return mf(W5,n.config.apiKey,n.name)}async function rI(n,e,t=!1){if(Sr(n.app))return Promise.reject(vi(n));const r=Na(n),a=G5(r,e),c=await new J5(r,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}const sI=600*1e3;class iI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!aI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!E4(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ds(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sI&&this.cachedEventUids.clear(),this.cachedEventUids.has(I2(e))}saveEventToCache(e){this.cachedEventUids.add(I2(e)),this.lastProcessedEventTime=Date.now()}}function I2(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function E4({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function aI(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return E4(n);default:return!1}}async function oI(n,e={}){return Hs(n,"GET","/v1/projects",e)}const lI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cI=/^https?/;async function uI(n){if(n.config.emulator)return;const{authorizedDomains:e}=await oI(n);for(const t of e)try{if(dI(t))return}catch{}is(n,"unauthorized-domain")}function dI(n){const e=Wy(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!cI.test(t))return!1;if(lI.test(n))return r===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const hI=new ad(3e4,6e4);function j2(){const n=Ms().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function fI(n){return new Promise((e,t)=>{function r(){j2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{j2(),t(Ds(n,"network-request-failed"))},timeout:hI.get()})}if(Ms().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ms().gapi?.load)r();else{const a=Z6("iframefcb");return Ms()[a]=()=>{gapi.load?r():t(Ds(n,"network-request-failed"))},r4(`${J6()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw yf=null,e})}let yf=null;function pI(n){return yf=yf||fI(n),yf}const mI=new ad(5e3,15e3),gI="__/auth/iframe",yI="emulator/auth/iframe",vI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _I(n){const e=n.config;Qe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ev(e,yI):`https://${n.config.authDomain}/${gI}`,r={apiKey:e.apiKey,appName:n.name,v:Co},a=bI.get(n.config.apiHost);a&&(r.eid=a);const l=n._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${id(r).slice(1)}`}async function xI(n){const e=await pI(n),t=Ms().gapi;return Qe(t,n,"internal-error"),e.open({where:document.body,url:_I(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vI,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=Ds(n,"network-request-failed"),h=Ms().setTimeout(()=>{l(c)},mI.get());function p(){Ms().clearTimeout(h),a(r)}r.ping(p).then(p,()=>{l(c)})}))}const EI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wI=500,SI=600,TI="_blank",CI="http://localhost";class D2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function AI(n,e,t,r=wI,a=SI){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const p={...EI,width:r.toString(),height:a.toString(),top:l,left:c},g=$n().toLowerCase();t&&(h=XS(g)?TI:t),KS(g)&&(e=e||CI,p.scrollbars="yes");const v=Object.entries(p).reduce((x,[C,R])=>`${x}${C}=${R},`,"");if($6(g)&&h!=="_self")return kI(e||"",h),new D2(null);const b=window.open(e||"",h,v);Qe(b,n,"popup-blocked");try{b.focus()}catch{}return new D2(b)}function kI(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const RI="__/auth/handler",NI="emulator/auth/handler",II=encodeURIComponent("fac");async function M2(n,e,t,r,a,l){Qe(n.config.authDomain,n,"auth-domain-config-required"),Qe(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Co,eventId:a};if(e instanceof o4){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",cN(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,b]of Object.entries({}))c[v]=b}if(e instanceof ld){const v=e.getScopes().filter(b=>b!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const p=await n._getAppCheckToken(),g=p?`#${II}=${encodeURIComponent(p)}`:"";return`${jI(n)}?${id(h).slice(1)}${g}`}function jI({config:n}){return n.emulator?ev(n,NI):`https://${n.authDomain}/${RI}`}const yy="webStorageSupport";class DI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=g4,this._completeRedirectFn=rI,this._overrideRedirectResult=eI}async _openPopup(e,t,r,a){Ei(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await M2(e,t,r,Wy(),a);return AI(e,l,iv())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await M2(e,t,r,Wy(),a);return P5(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Ei(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await xI(e),r=new iI(e);return t.register("authEvent",a=>(Qe(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(yy,{type:yy},a=>{const l=a?.[0]?.[yy];l!==void 0&&t(!!l),is(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=uI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return t4()||QS()||nv()}}const MI=DI;var O2="@firebase/auth",P2="1.11.1";class OI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function PI(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LI(n){bo(new Ea("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=r.options;Qe(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:n4(n)},g=new Q6(r,a,l,p);return i5(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),bo(new Ea("auth-internal",e=>{const t=Na(e.getProvider("auth").getImmediate());return(r=>new OI(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),js(O2,P2,PI(n)),js(O2,P2,"esm2020")}const VI=300,UI=DS("authIdTokenMaxAge")||VI;let L2=null;const zI=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>UI)return;const a=t?.token;L2!==a&&(L2=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function BI(n=J0()){const e=_p(n,"auth");if(e.isInitialized())return e.getImmediate();const t=s5(n,{popupRedirectResolver:MI,persistence:[q5,D5,g4]}),r=DS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=zI(l.toString());k5(t,c,()=>c(t.currentUser)),A5(t,h=>c(h))}}const a=NS("auth");return a&&a5(t,`http://${a}`),t}function FI(){return document.getElementsByTagName("head")?.[0]??document}X6({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=a=>{const l=Ds("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",FI().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LI("Browser");var V2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ba,w4;(function(){var n;function e(w,S){function k(){}k.prototype=S.prototype,w.F=S.prototype,w.prototype=new k,w.prototype.constructor=w,w.D=function(D,M,U){for(var O=Array(arguments.length-2),be=2;be<arguments.length;be++)O[be-2]=arguments[be];return S.prototype[M].apply(D,O)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(w,S,k){k||(k=0);const D=Array(16);if(typeof S=="string")for(var M=0;M<16;++M)D[M]=S.charCodeAt(k++)|S.charCodeAt(k++)<<8|S.charCodeAt(k++)<<16|S.charCodeAt(k++)<<24;else for(M=0;M<16;++M)D[M]=S[k++]|S[k++]<<8|S[k++]<<16|S[k++]<<24;S=w.g[0],k=w.g[1],M=w.g[2];let U=w.g[3],O;O=S+(U^k&(M^U))+D[0]+3614090360&4294967295,S=k+(O<<7&4294967295|O>>>25),O=U+(M^S&(k^M))+D[1]+3905402710&4294967295,U=S+(O<<12&4294967295|O>>>20),O=M+(k^U&(S^k))+D[2]+606105819&4294967295,M=U+(O<<17&4294967295|O>>>15),O=k+(S^M&(U^S))+D[3]+3250441966&4294967295,k=M+(O<<22&4294967295|O>>>10),O=S+(U^k&(M^U))+D[4]+4118548399&4294967295,S=k+(O<<7&4294967295|O>>>25),O=U+(M^S&(k^M))+D[5]+1200080426&4294967295,U=S+(O<<12&4294967295|O>>>20),O=M+(k^U&(S^k))+D[6]+2821735955&4294967295,M=U+(O<<17&4294967295|O>>>15),O=k+(S^M&(U^S))+D[7]+4249261313&4294967295,k=M+(O<<22&4294967295|O>>>10),O=S+(U^k&(M^U))+D[8]+1770035416&4294967295,S=k+(O<<7&4294967295|O>>>25),O=U+(M^S&(k^M))+D[9]+2336552879&4294967295,U=S+(O<<12&4294967295|O>>>20),O=M+(k^U&(S^k))+D[10]+4294925233&4294967295,M=U+(O<<17&4294967295|O>>>15),O=k+(S^M&(U^S))+D[11]+2304563134&4294967295,k=M+(O<<22&4294967295|O>>>10),O=S+(U^k&(M^U))+D[12]+1804603682&4294967295,S=k+(O<<7&4294967295|O>>>25),O=U+(M^S&(k^M))+D[13]+4254626195&4294967295,U=S+(O<<12&4294967295|O>>>20),O=M+(k^U&(S^k))+D[14]+2792965006&4294967295,M=U+(O<<17&4294967295|O>>>15),O=k+(S^M&(U^S))+D[15]+1236535329&4294967295,k=M+(O<<22&4294967295|O>>>10),O=S+(M^U&(k^M))+D[1]+4129170786&4294967295,S=k+(O<<5&4294967295|O>>>27),O=U+(k^M&(S^k))+D[6]+3225465664&4294967295,U=S+(O<<9&4294967295|O>>>23),O=M+(S^k&(U^S))+D[11]+643717713&4294967295,M=U+(O<<14&4294967295|O>>>18),O=k+(U^S&(M^U))+D[0]+3921069994&4294967295,k=M+(O<<20&4294967295|O>>>12),O=S+(M^U&(k^M))+D[5]+3593408605&4294967295,S=k+(O<<5&4294967295|O>>>27),O=U+(k^M&(S^k))+D[10]+38016083&4294967295,U=S+(O<<9&4294967295|O>>>23),O=M+(S^k&(U^S))+D[15]+3634488961&4294967295,M=U+(O<<14&4294967295|O>>>18),O=k+(U^S&(M^U))+D[4]+3889429448&4294967295,k=M+(O<<20&4294967295|O>>>12),O=S+(M^U&(k^M))+D[9]+568446438&4294967295,S=k+(O<<5&4294967295|O>>>27),O=U+(k^M&(S^k))+D[14]+3275163606&4294967295,U=S+(O<<9&4294967295|O>>>23),O=M+(S^k&(U^S))+D[3]+4107603335&4294967295,M=U+(O<<14&4294967295|O>>>18),O=k+(U^S&(M^U))+D[8]+1163531501&4294967295,k=M+(O<<20&4294967295|O>>>12),O=S+(M^U&(k^M))+D[13]+2850285829&4294967295,S=k+(O<<5&4294967295|O>>>27),O=U+(k^M&(S^k))+D[2]+4243563512&4294967295,U=S+(O<<9&4294967295|O>>>23),O=M+(S^k&(U^S))+D[7]+1735328473&4294967295,M=U+(O<<14&4294967295|O>>>18),O=k+(U^S&(M^U))+D[12]+2368359562&4294967295,k=M+(O<<20&4294967295|O>>>12),O=S+(k^M^U)+D[5]+4294588738&4294967295,S=k+(O<<4&4294967295|O>>>28),O=U+(S^k^M)+D[8]+2272392833&4294967295,U=S+(O<<11&4294967295|O>>>21),O=M+(U^S^k)+D[11]+1839030562&4294967295,M=U+(O<<16&4294967295|O>>>16),O=k+(M^U^S)+D[14]+4259657740&4294967295,k=M+(O<<23&4294967295|O>>>9),O=S+(k^M^U)+D[1]+2763975236&4294967295,S=k+(O<<4&4294967295|O>>>28),O=U+(S^k^M)+D[4]+1272893353&4294967295,U=S+(O<<11&4294967295|O>>>21),O=M+(U^S^k)+D[7]+4139469664&4294967295,M=U+(O<<16&4294967295|O>>>16),O=k+(M^U^S)+D[10]+3200236656&4294967295,k=M+(O<<23&4294967295|O>>>9),O=S+(k^M^U)+D[13]+681279174&4294967295,S=k+(O<<4&4294967295|O>>>28),O=U+(S^k^M)+D[0]+3936430074&4294967295,U=S+(O<<11&4294967295|O>>>21),O=M+(U^S^k)+D[3]+3572445317&4294967295,M=U+(O<<16&4294967295|O>>>16),O=k+(M^U^S)+D[6]+76029189&4294967295,k=M+(O<<23&4294967295|O>>>9),O=S+(k^M^U)+D[9]+3654602809&4294967295,S=k+(O<<4&4294967295|O>>>28),O=U+(S^k^M)+D[12]+3873151461&4294967295,U=S+(O<<11&4294967295|O>>>21),O=M+(U^S^k)+D[15]+530742520&4294967295,M=U+(O<<16&4294967295|O>>>16),O=k+(M^U^S)+D[2]+3299628645&4294967295,k=M+(O<<23&4294967295|O>>>9),O=S+(M^(k|~U))+D[0]+4096336452&4294967295,S=k+(O<<6&4294967295|O>>>26),O=U+(k^(S|~M))+D[7]+1126891415&4294967295,U=S+(O<<10&4294967295|O>>>22),O=M+(S^(U|~k))+D[14]+2878612391&4294967295,M=U+(O<<15&4294967295|O>>>17),O=k+(U^(M|~S))+D[5]+4237533241&4294967295,k=M+(O<<21&4294967295|O>>>11),O=S+(M^(k|~U))+D[12]+1700485571&4294967295,S=k+(O<<6&4294967295|O>>>26),O=U+(k^(S|~M))+D[3]+2399980690&4294967295,U=S+(O<<10&4294967295|O>>>22),O=M+(S^(U|~k))+D[10]+4293915773&4294967295,M=U+(O<<15&4294967295|O>>>17),O=k+(U^(M|~S))+D[1]+2240044497&4294967295,k=M+(O<<21&4294967295|O>>>11),O=S+(M^(k|~U))+D[8]+1873313359&4294967295,S=k+(O<<6&4294967295|O>>>26),O=U+(k^(S|~M))+D[15]+4264355552&4294967295,U=S+(O<<10&4294967295|O>>>22),O=M+(S^(U|~k))+D[6]+2734768916&4294967295,M=U+(O<<15&4294967295|O>>>17),O=k+(U^(M|~S))+D[13]+1309151649&4294967295,k=M+(O<<21&4294967295|O>>>11),O=S+(M^(k|~U))+D[4]+4149444226&4294967295,S=k+(O<<6&4294967295|O>>>26),O=U+(k^(S|~M))+D[11]+3174756917&4294967295,U=S+(O<<10&4294967295|O>>>22),O=M+(S^(U|~k))+D[2]+718787259&4294967295,M=U+(O<<15&4294967295|O>>>17),O=k+(U^(M|~S))+D[9]+3951481745&4294967295,w.g[0]=w.g[0]+S&4294967295,w.g[1]=w.g[1]+(M+(O<<21&4294967295|O>>>11))&4294967295,w.g[2]=w.g[2]+M&4294967295,w.g[3]=w.g[3]+U&4294967295}r.prototype.v=function(w,S){S===void 0&&(S=w.length);const k=S-this.blockSize,D=this.C;let M=this.h,U=0;for(;U<S;){if(M==0)for(;U<=k;)a(this,w,U),U+=this.blockSize;if(typeof w=="string"){for(;U<S;)if(D[M++]=w.charCodeAt(U++),M==this.blockSize){a(this,D),M=0;break}}else for(;U<S;)if(D[M++]=w[U++],M==this.blockSize){a(this,D),M=0;break}}this.h=M,this.o+=S},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var S=1;S<w.length-8;++S)w[S]=0;S=this.o*8;for(var k=w.length-8;k<w.length;++k)w[k]=S&255,S/=256;for(this.v(w),w=Array(16),S=0,k=0;k<4;++k)for(let D=0;D<32;D+=8)w[S++]=this.g[k]>>>D&255;return w};function l(w,S){var k=h;return Object.prototype.hasOwnProperty.call(k,w)?k[w]:k[w]=S(w)}function c(w,S){this.h=S;const k=[];let D=!0;for(let M=w.length-1;M>=0;M--){const U=w[M]|0;D&&U==S||(k[M]=U,D=!1)}this.g=k}var h={};function p(w){return-128<=w&&w<128?l(w,function(S){return new c([S|0],S<0?-1:0)}):new c([w|0],w<0?-1:0)}function g(w){if(isNaN(w)||!isFinite(w))return b;if(w<0)return A(g(-w));const S=[];let k=1;for(let D=0;w>=k;D++)S[D]=w/k|0,k*=4294967296;return new c(S,0)}function v(w,S){if(w.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(w.charAt(0)=="-")return A(v(w.substring(1),S));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=g(Math.pow(S,8));let D=b;for(let U=0;U<w.length;U+=8){var M=Math.min(8,w.length-U);const O=parseInt(w.substring(U,U+M),S);M<8?(M=g(Math.pow(S,M)),D=D.j(M).add(g(O))):(D=D.j(k),D=D.add(g(O)))}return D}var b=p(0),x=p(1),C=p(16777216);n=c.prototype,n.m=function(){if(j(this))return-A(this).m();let w=0,S=1;for(let k=0;k<this.g.length;k++){const D=this.i(k);w+=(D>=0?D:4294967296+D)*S,S*=4294967296}return w},n.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(R(this))return"0";if(j(this))return"-"+A(this).toString(w);const S=g(Math.pow(w,6));var k=this;let D="";for(;;){const M=V(k,S).g;k=B(k,M.j(S));let U=((k.g.length>0?k.g[0]:k.h)>>>0).toString(w);if(k=M,R(k))return U+D;for(;U.length<6;)U="0"+U;D=U+D}},n.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function R(w){if(w.h!=0)return!1;for(let S=0;S<w.g.length;S++)if(w.g[S]!=0)return!1;return!0}function j(w){return w.h==-1}n.l=function(w){return w=B(this,w),j(w)?-1:R(w)?0:1};function A(w){const S=w.g.length,k=[];for(let D=0;D<S;D++)k[D]=~w.g[D];return new c(k,~w.h).add(x)}n.abs=function(){return j(this)?A(this):this},n.add=function(w){const S=Math.max(this.g.length,w.g.length),k=[];let D=0;for(let M=0;M<=S;M++){let U=D+(this.i(M)&65535)+(w.i(M)&65535),O=(U>>>16)+(this.i(M)>>>16)+(w.i(M)>>>16);D=O>>>16,U&=65535,O&=65535,k[M]=O<<16|U}return new c(k,k[k.length-1]&-2147483648?-1:0)};function B(w,S){return w.add(A(S))}n.j=function(w){if(R(this)||R(w))return b;if(j(this))return j(w)?A(this).j(A(w)):A(A(this).j(w));if(j(w))return A(this.j(A(w)));if(this.l(C)<0&&w.l(C)<0)return g(this.m()*w.m());const S=this.g.length+w.g.length,k=[];for(var D=0;D<2*S;D++)k[D]=0;for(D=0;D<this.g.length;D++)for(let M=0;M<w.g.length;M++){const U=this.i(D)>>>16,O=this.i(D)&65535,be=w.i(M)>>>16,Ee=w.i(M)&65535;k[2*D+2*M]+=O*Ee,G(k,2*D+2*M),k[2*D+2*M+1]+=U*Ee,G(k,2*D+2*M+1),k[2*D+2*M+1]+=O*be,G(k,2*D+2*M+1),k[2*D+2*M+2]+=U*be,G(k,2*D+2*M+2)}for(w=0;w<S;w++)k[w]=k[2*w+1]<<16|k[2*w];for(w=S;w<2*S;w++)k[w]=0;return new c(k,0)};function G(w,S){for(;(w[S]&65535)!=w[S];)w[S+1]+=w[S]>>>16,w[S]&=65535,S++}function I(w,S){this.g=w,this.h=S}function V(w,S){if(R(S))throw Error("division by zero");if(R(w))return new I(b,b);if(j(w))return S=V(A(w),S),new I(A(S.g),A(S.h));if(j(S))return S=V(w,A(S)),new I(A(S.g),S.h);if(w.g.length>30){if(j(w)||j(S))throw Error("slowDivide_ only works with positive integers.");for(var k=x,D=S;D.l(w)<=0;)k=z(k),D=z(D);var M=F(k,1),U=F(D,1);for(D=F(D,2),k=F(k,2);!R(D);){var O=U.add(D);O.l(w)<=0&&(M=M.add(k),U=O),D=F(D,1),k=F(k,1)}return S=B(w,M.j(S)),new I(M,S)}for(M=b;w.l(S)>=0;){for(k=Math.max(1,Math.floor(w.m()/S.m())),D=Math.ceil(Math.log(k)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),U=g(k),O=U.j(S);j(O)||O.l(w)>0;)k-=D,U=g(k),O=U.j(S);R(U)&&(U=x),M=M.add(U),w=B(w,O)}return new I(M,w)}n.B=function(w){return V(this,w).h},n.and=function(w){const S=Math.max(this.g.length,w.g.length),k=[];for(let D=0;D<S;D++)k[D]=this.i(D)&w.i(D);return new c(k,this.h&w.h)},n.or=function(w){const S=Math.max(this.g.length,w.g.length),k=[];for(let D=0;D<S;D++)k[D]=this.i(D)|w.i(D);return new c(k,this.h|w.h)},n.xor=function(w){const S=Math.max(this.g.length,w.g.length),k=[];for(let D=0;D<S;D++)k[D]=this.i(D)^w.i(D);return new c(k,this.h^w.h)};function z(w){const S=w.g.length+1,k=[];for(let D=0;D<S;D++)k[D]=w.i(D)<<1|w.i(D-1)>>>31;return new c(k,w.h)}function F(w,S){const k=S>>5;S%=32;const D=w.g.length-k,M=[];for(let U=0;U<D;U++)M[U]=S>0?w.i(U+k)>>>S|w.i(U+k+1)<<32-S:w.i(U+k);return new c(M,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,w4=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=v,ba=c}).apply(typeof V2<"u"?V2:typeof self<"u"?self:typeof window<"u"?window:{});var Qh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var S4,Su,T4,vf,e0,C4,A4,k4;(function(){var n,e=Object.defineProperty;function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qh=="object"&&Qh];for(var _=0;_<f.length;++_){var T=f[_];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function a(f,_){if(_)e:{var T=r;f=f.split(".");for(var L=0;L<f.length-1;L++){var Z=f[L];if(!(Z in T))break e;T=T[Z]}f=f[f.length-1],L=T[f],_=_(L),_!=L&&_!=null&&e(T,f,{configurable:!0,writable:!0,value:_})}}a("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(f){return f||function(_){var T=[],L;for(L in _)Object.prototype.hasOwnProperty.call(_,L)&&T.push([L,_[L]]);return T}});var l=l||{},c=this||self;function h(f){var _=typeof f;return _=="object"&&f!=null||_=="function"}function p(f,_,T){return f.call.apply(f.bind,arguments)}function g(f,_,T){return g=p,g.apply(null,arguments)}function v(f,_){var T=Array.prototype.slice.call(arguments,1);return function(){var L=T.slice();return L.push.apply(L,arguments),f.apply(this,L)}}function b(f,_){function T(){}T.prototype=_.prototype,f.Z=_.prototype,f.prototype=new T,f.prototype.constructor=f,f.Ob=function(L,Z,re){for(var Ae=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)Ae[tt-2]=arguments[tt];return _.prototype[Z].apply(L,Ae)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function C(f){const _=f.length;if(_>0){const T=Array(_);for(let L=0;L<_;L++)T[L]=f[L];return T}return[]}function R(f,_){for(let L=1;L<arguments.length;L++){const Z=arguments[L];var T=typeof Z;if(T=T!="object"?T:Z?Array.isArray(Z)?"array":T:"null",T=="array"||T=="object"&&typeof Z.length=="number"){T=f.length||0;const re=Z.length||0;f.length=T+re;for(let Ae=0;Ae<re;Ae++)f[T+Ae]=Z[Ae]}else f.push(Z)}}class j{constructor(_,T){this.i=_,this.j=T,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function A(f){c.setTimeout(()=>{throw f},0)}function B(){var f=w;let _=null;return f.g&&(_=f.g,f.g=f.g.next,f.g||(f.h=null),_.next=null),_}class G{constructor(){this.h=this.g=null}add(_,T){const L=I.get();L.set(_,T),this.h?this.h.next=L:this.g=L,this.h=L}}var I=new j(()=>new V,f=>f.reset());class V{constructor(){this.next=this.g=this.h=null}set(_,T){this.h=_,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let z,F=!1,w=new G,S=()=>{const f=Promise.resolve(void 0);z=()=>{f.then(k)}};function k(){for(var f;f=B();){try{f.h.call(f.g)}catch(T){A(T)}var _=I;_.j(f),_.h<100&&(_.h++,f.next=_.g,_.g=f)}F=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(f,_){this.type=f,this.g=this.target=_,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var f=!1,_=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const T=()=>{};c.addEventListener("test",T,_),c.removeEventListener("test",T,_)}catch{}return f})();function O(f){return/^[\s\xa0]*$/.test(f)}function be(f,_){M.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,_)}b(be,M),be.prototype.init=function(f,_){const T=this.type=f.type,L=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=_,_=f.relatedTarget,_||(T=="mouseover"?_=f.fromElement:T=="mouseout"&&(_=f.toElement)),this.relatedTarget=_,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&be.Z.h.call(this)},be.prototype.h=function(){be.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Ee="closure_listenable_"+(Math.random()*1e6|0),$=0;function K(f,_,T,L,Z){this.listener=f,this.proxy=null,this.src=_,this.type=T,this.capture=!!L,this.ha=Z,this.key=++$,this.da=this.fa=!1}function W(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Te(f,_,T){for(const L in f)_.call(T,f[L],L,f)}function Re(f,_){for(const T in f)_.call(void 0,f[T],T,f)}function H(f){const _={};for(const T in f)_[T]=f[T];return _}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(f,_){let T,L;for(let Z=1;Z<arguments.length;Z++){L=arguments[Z];for(T in L)f[T]=L[T];for(let re=0;re<J.length;re++)T=J[re],Object.prototype.hasOwnProperty.call(L,T)&&(f[T]=L[T])}}function me(f){this.src=f,this.g={},this.h=0}me.prototype.add=function(f,_,T,L,Z){const re=f.toString();f=this.g[re],f||(f=this.g[re]=[],this.h++);const Ae=ye(f,_,L,Z);return Ae>-1?(_=f[Ae],T||(_.fa=!1)):(_=new K(_,this.src,re,!!L,Z),_.fa=T,f.push(_)),_};function Ce(f,_){const T=_.type;if(T in f.g){var L=f.g[T],Z=Array.prototype.indexOf.call(L,_,void 0),re;(re=Z>=0)&&Array.prototype.splice.call(L,Z,1),re&&(W(_),f.g[T].length==0&&(delete f.g[T],f.h--))}}function ye(f,_,T,L){for(let Z=0;Z<f.length;++Z){const re=f[Z];if(!re.da&&re.listener==_&&re.capture==!!T&&re.ha==L)return Z}return-1}var Se="closure_lm_"+(Math.random()*1e6|0),He={};function Ge(f,_,T,L,Z){if(Array.isArray(_)){for(let re=0;re<_.length;re++)Ge(f,_[re],T,L,Z);return null}return T=we(T),f&&f[Ee]?f.J(_,T,h(L)?!!L.capture:!1,Z):_e(f,_,T,!1,L,Z)}function _e(f,_,T,L,Z,re){if(!_)throw Error("Invalid event type");const Ae=h(Z)?!!Z.capture:!!Z;let tt=Q(f);if(tt||(f[Se]=tt=new me(f)),T=tt.add(_,T,L,Ae,re),T.proxy)return T;if(L=ce(),T.proxy=L,L.src=f,L.listener=T,f.addEventListener)U||(Z=Ae),Z===void 0&&(Z=!1),f.addEventListener(_.toString(),L,Z);else if(f.attachEvent)f.attachEvent(Ne(_.toString()),L);else if(f.addListener&&f.removeListener)f.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return T}function ce(){function f(T){return _.call(f.src,f.listener,T)}const _=Me;return f}function ve(f,_,T,L,Z){if(Array.isArray(_))for(var re=0;re<_.length;re++)ve(f,_[re],T,L,Z);else L=h(L)?!!L.capture:!!L,T=we(T),f&&f[Ee]?(f=f.i,re=String(_).toString(),re in f.g&&(_=f.g[re],T=ye(_,T,L,Z),T>-1&&(W(_[T]),Array.prototype.splice.call(_,T,1),_.length==0&&(delete f.g[re],f.h--)))):f&&(f=Q(f))&&(_=f.g[_.toString()],f=-1,_&&(f=ye(_,T,L,Z)),(T=f>-1?_[f]:null)&&ie(T))}function ie(f){if(typeof f!="number"&&f&&!f.da){var _=f.src;if(_&&_[Ee])Ce(_.i,f);else{var T=f.type,L=f.proxy;_.removeEventListener?_.removeEventListener(T,L,f.capture):_.detachEvent?_.detachEvent(Ne(T),L):_.addListener&&_.removeListener&&_.removeListener(L),(T=Q(_))?(Ce(T,f),T.h==0&&(T.src=null,_[Se]=null)):W(f)}}}function Ne(f){return f in He?He[f]:He[f]="on"+f}function Me(f,_){if(f.da)f=!0;else{_=new be(_,this);const T=f.listener,L=f.ha||f.src;f.fa&&ie(f),f=T.call(L,_)}return f}function Q(f){return f=f[Se],f instanceof me?f:null}var ae="__closure_events_fn_"+(Math.random()*1e9>>>0);function we(f){return typeof f=="function"?f:(f[ae]||(f[ae]=function(_){return f.handleEvent(_)}),f[ae])}function Ie(){D.call(this),this.i=new me(this),this.M=this,this.G=null}b(Ie,D),Ie.prototype[Ee]=!0,Ie.prototype.removeEventListener=function(f,_,T,L){ve(this,f,_,T,L)};function Ye(f,_){var T,L=f.G;if(L)for(T=[];L;L=L.G)T.push(L);if(f=f.M,L=_.type||_,typeof _=="string")_=new M(_,f);else if(_ instanceof M)_.target=_.target||f;else{var Z=_;_=new M(L,f),ue(_,Z)}Z=!0;let re,Ae;if(T)for(Ae=T.length-1;Ae>=0;Ae--)re=_.g=T[Ae],Z=ot(re,L,!0,_)&&Z;if(re=_.g=f,Z=ot(re,L,!0,_)&&Z,Z=ot(re,L,!1,_)&&Z,T)for(Ae=0;Ae<T.length;Ae++)re=_.g=T[Ae],Z=ot(re,L,!1,_)&&Z}Ie.prototype.N=function(){if(Ie.Z.N.call(this),this.i){var f=this.i;for(const _ in f.g){const T=f.g[_];for(let L=0;L<T.length;L++)W(T[L]);delete f.g[_],f.h--}}this.G=null},Ie.prototype.J=function(f,_,T,L){return this.i.add(String(f),_,!1,T,L)},Ie.prototype.K=function(f,_,T,L){return this.i.add(String(f),_,!0,T,L)};function ot(f,_,T,L){if(_=f.i.g[String(_)],!_)return!0;_=_.concat();let Z=!0;for(let re=0;re<_.length;++re){const Ae=_[re];if(Ae&&!Ae.da&&Ae.capture==T){const tt=Ae.listener,Jt=Ae.ha||Ae.src;Ae.fa&&Ce(f.i,Ae),Z=tt.call(Jt,L)!==!1&&Z}}return Z&&!L.defaultPrevented}function Qt(f,_){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=g(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:c.setTimeout(f,_||0)}function dr(f){f.g=Qt(()=>{f.g=null,f.i&&(f.i=!1,dr(f))},f.l);const _=f.h;f.h=null,f.m.apply(null,_)}class xe extends D{constructor(_,T){super(),this.m=_,this.l=T,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:dr(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Be(f){D.call(this),this.h=f,this.g={}}b(Be,D);var vt=[];function Xt(f){Te(f.g,function(_,T){this.g.hasOwnProperty(T)&&ie(_)},f),f.g={}}Be.prototype.N=function(){Be.Z.N.call(this),Xt(this)},Be.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gn=c.JSON.stringify,Jn=c.JSON.parse,Ht=class{stringify(f){return c.JSON.stringify(f,void 0)}parse(f){return c.JSON.parse(f,void 0)}};function Ai(){}function Ed(){}var Fr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Cn(){M.call(this,"d")}b(Cn,M);function Ar(){M.call(this,"c")}b(Ar,M);var Wt={},wd=null;function Po(){return wd=wd||new Ie}Wt.Ia="serverreachability";function Sd(f){M.call(this,Wt.Ia,f)}b(Sd,M);function os(f){const _=Po();Ye(_,new Sd(_))}Wt.STAT_EVENT="statevent";function Da(f,_){M.call(this,Wt.STAT_EVENT,f),this.stat=_}b(Da,M);function rn(f){const _=Po();Ye(_,new Da(_,f))}Wt.Ja="timingevent";function ls(f,_){M.call(this,Wt.Ja,f),this.size=_}b(ls,M);function cs(f,_){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){f()},_)}function $r(){this.g=!0}$r.prototype.ua=function(){this.g=!1};function cm(f,_,T,L,Z,re){f.info(function(){if(f.g)if(re){var Ae="",tt=re.split("&");for(let Et=0;Et<tt.length;Et++){var Jt=tt[Et].split("=");if(Jt.length>1){const Bt=Jt[0];Jt=Jt[1];const Ir=Bt.split("_");Ae=Ir.length>=2&&Ir[1]=="type"?Ae+(Bt+"="+Jt+"&"):Ae+(Bt+"=redacted&")}}}else Ae=null;else Ae=re;return"XMLHTTP REQ ("+L+") [attempt "+Z+"]: "+_+`
`+T+`
`+Ae})}function Td(f,_,T,L,Z,re,Ae){f.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+Z+"]: "+_+`
`+T+`
`+re+" "+Ae})}function us(f,_,T,L){f.info(function(){return"XMLHTTP TEXT ("+_+"): "+um(f,T)+(L?" "+L:"")})}function Ma(f,_){f.info(function(){return"TIMEOUT: "+_})}$r.prototype.info=function(){};function um(f,_){if(!f.g)return _;if(!_)return null;try{const re=JSON.parse(_);if(re){for(f=0;f<re.length;f++)if(Array.isArray(re[f])){var T=re[f];if(!(T.length<2)){var L=T[1];if(Array.isArray(L)&&!(L.length<1)){var Z=L[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(let Ae=1;Ae<L.length;Ae++)L[Ae]=""}}}}return Gn(re)}catch{return _}}var Oa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},mc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},gc;function Pa(){}b(Pa,Ai),Pa.prototype.g=function(){return new XMLHttpRequest},gc=new Pa;function Ks(f){return encodeURIComponent(String(f))}function Cd(f){var _=1;f=f.split(":");const T=[];for(;_>0&&f.length;)T.push(f.shift()),_--;return f.length&&T.push(f.join(":")),T}function Hr(f,_,T,L){this.j=f,this.i=_,this.l=T,this.S=L||1,this.V=new Be(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new qr}function qr(){this.i=null,this.g="",this.h=!1}var sn={},xn={};function ds(f,_,T){f.M=1,f.A=La(on(_)),f.u=T,f.R=!0,Lo(f,null)}function Lo(f,_){f.F=Date.now(),hs(f),f.B=on(f.A);var T=f.B,L=f.S;Array.isArray(L)||(L=[String(L)]),Bo(T.i,"t",L),f.C=0,T=f.j.L,f.h=new qr,f.g=Bd(f.j,T?_:null,!f.u),f.P>0&&(f.O=new xe(g(f.Y,f,f.g),f.P)),_=f.V,T=f.g,L=f.ba;var Z="readystatechange";Array.isArray(Z)||(Z&&(vt[0]=Z.toString()),Z=vt);for(let re=0;re<Z.length;re++){const Ae=Ge(T,Z[re],L||_.handleEvent,!1,_.h||_);if(!Ae)break;_.g[Ae.key]=Ae}_=f.J?H(f.J):{},f.u?(f.v||(f.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,_)):(f.v="GET",f.g.ea(f.B,f.v,null,_)),os(),cm(f.i,f.v,f.B,f.l,f.S,f.u)}Hr.prototype.ba=function(f){f=f.target;const _=this.O;_&&Kr(f)==3?_.j():this.Y(f)},Hr.prototype.Y=function(f){try{if(f==this.g)e:{const tt=Kr(this.g),Jt=this.g.ya(),Et=this.g.ca();if(!(tt<3)&&(tt!=3||this.g&&(this.h.h||this.g.la()||An(this.g)))){this.K||tt!=4||Jt==7||(Jt==8||Et<=0?os(3):os(2)),fs(this);var _=this.g.ca();this.X=_;var T=dm(this);if(this.o=_==200,Td(this.i,this.v,this.B,this.l,this.S,tt,_),this.o){if(this.U&&!this.L){t:{if(this.g){var L,Z=this.g;if((L=Z.g?Z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(L)){var re=L;break t}}re=null}if(f=re)us(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ps(this,f);else{this.o=!1,this.m=3,rn(12),hr(this),kr(this);break e}}if(this.R){f=!0;let Bt;for(;!this.K&&this.C<T.length;)if(Bt=kd(this,T),Bt==xn){tt==4&&(this.m=4,rn(14),f=!1),us(this.i,this.l,null,"[Incomplete Response]");break}else if(Bt==sn){this.m=4,rn(15),us(this.i,this.l,T,"[Invalid Chunk]"),f=!1;break}else us(this.i,this.l,Bt,null),ps(this,Bt);if(Ad(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tt!=4||T.length!=0||this.h.h||(this.m=1,rn(16),f=!1),this.o=this.o&&f,!f)us(this.i,this.l,T,"[Invalid Chunked Response]"),hr(this),kr(this);else if(T.length>0&&!this.W){this.W=!0;var Ae=this.j;Ae.g==this&&Ae.aa&&!Ae.P&&(Ae.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Ic(Ae),Ae.P=!0,rn(11))}}else us(this.i,this.l,T,null),ps(this,T);tt==4&&hr(this),this.o&&!this.K&&(tt==4?Ld(this.j,this):(this.o=!1,hs(this)))}else Xs(this.g),_==400&&T.indexOf("Unknown SID")>0?(this.m=3,rn(12)):(this.m=0,rn(13)),hr(this),kr(this)}}}catch{}finally{}};function dm(f){if(!Ad(f))return f.g.la();const _=An(f.g);if(_==="")return"";let T="";const L=_.length,Z=Kr(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return hr(f),kr(f),"";f.h.i=new c.TextDecoder}for(let re=0;re<L;re++)f.h.h=!0,T+=f.h.i.decode(_[re],{stream:!(Z&&re==L-1)});return _.length=0,f.h.g+=T,f.C=0,f.h.g}function Ad(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function kd(f,_){var T=f.C,L=_.indexOf(`
`,T);return L==-1?xn:(T=Number(_.substring(T,L)),isNaN(T)?sn:(L+=1,L+T>_.length?xn:(_=_.slice(L,L+T),f.C=L+T,_)))}Hr.prototype.cancel=function(){this.K=!0,hr(this)};function hs(f){f.T=Date.now()+f.H,Vo(f,f.H)}function Vo(f,_){if(f.D!=null)throw Error("WatchDog timer not null");f.D=cs(g(f.aa,f),_)}function fs(f){f.D&&(c.clearTimeout(f.D),f.D=null)}Hr.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(Ma(this.i,this.B),this.M!=2&&(os(),rn(17)),hr(this),this.m=2,kr(this)):Vo(this,this.T-f)};function kr(f){f.j.I==0||f.K||Ld(f.j,f)}function hr(f){fs(f);var _=f.O;_&&typeof _.dispose=="function"&&_.dispose(),f.O=null,Xt(f.V),f.g&&(_=f.g,f.g=null,_.abort(),_.dispose())}function ps(f,_){try{var T=f.j;if(T.I!=0&&(T.g==f||gs(T.h,f))){if(!f.L&&gs(T.h,f)&&T.I==3){try{var L=T.Ba.g.parse(_)}catch{L=null}if(Array.isArray(L)&&L.length==3){var Z=L;if(Z[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<f.F)Go(T),Oi(T);else break e;Ha(T),rn(18)}}else T.xa=Z[1],0<T.xa-T.K&&Z[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=cs(g(T.Va,T),6e3));ms(T.h)<=1&&T.ta&&(T.ta=void 0)}else Es(T,11)}else if((f.L||T.g==f)&&Go(T),!O(_))for(Z=T.Ba.g.parse(_),_=0;_<Z.length;_++){let Et=Z[_];const Bt=Et[0];if(!(Bt<=T.K))if(T.K=Bt,Et=Et[1],T.I==2)if(Et[0]=="c"){T.M=Et[1],T.ba=Et[2];const Ir=Et[3];Ir!=null&&(T.ka=Ir,T.j.info("VER="+T.ka));const ws=Et[4];ws!=null&&(T.za=ws,T.j.info("SVER="+T.za));const Qr=Et[5];Qr!=null&&typeof Qr=="number"&&Qr>0&&(L=1.5*Qr,T.O=L,T.j.info("backChannelRequestTimeoutMs_="+L)),L=T;const Xr=f.g;if(Xr){const qa=Xr.g?Xr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qa){var re=L.h;re.g||qa.indexOf("spdy")==-1&&qa.indexOf("quic")==-1&&qa.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(bc(re,re.h),re.h=null))}if(L.G){const Yo=Xr.g?Xr.g.getResponseHeader("X-HTTP-Session-Id"):null;Yo&&(L.wa=Yo,Ct(L.J,L.G,Yo))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-f.F,T.j.info("Handshake RTT: "+T.T+"ms")),L=T;var Ae=f;if(L.na=zd(L,L.L?L.ba:null,L.W),Ae.L){_c(L.h,Ae);var tt=Ae,Jt=L.O;Jt&&(tt.H=Jt),tt.D&&(fs(tt),hs(tt)),L.g=Ae}else Od(L);T.i.length>0&&xs(T)}else Et[0]!="stop"&&Et[0]!="close"||Es(T,7);else T.I==3&&(Et[0]=="stop"||Et[0]=="close"?Et[0]=="stop"?Es(T,7):Rc(T):Et[0]!="noop"&&T.l&&T.l.qa(Et),T.A=0)}}os(4)}catch{}}var an=class{constructor(f,_){this.g=f,this.map=_}};function yc(f){this.l=f||10,c.PerformanceNavigationTiming?(f=c.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function vc(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function ms(f){return f.h?1:f.g?f.g.size:0}function gs(f,_){return f.h?f.h==_:f.g?f.g.has(_):!1}function bc(f,_){f.g?f.g.add(_):f.h=_}function _c(f,_){f.h&&f.h==_?f.h=null:f.g&&f.g.has(_)&&f.g.delete(_)}yc.prototype.cancel=function(){if(this.i=xc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function xc(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let _=f.i;for(const T of f.g.values())_=_.concat(T.G);return _}return C(f.i)}var Rd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Uo(f,_){if(f){f=f.split("&");for(let T=0;T<f.length;T++){const L=f[T].indexOf("=");let Z,re=null;L>=0?(Z=f[T].substring(0,L),re=f[T].substring(L+1)):Z=f[T],_(Z,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function fr(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;f instanceof fr?(this.l=f.l,En(this,f.j),this.o=f.o,this.g=f.g,ki(this,f.u),this.h=f.h,Ec(this,Dd(f.i)),this.m=f.m):f&&(_=String(f).match(Rd))?(this.l=!1,En(this,_[1]||"",!0),this.o=ys(_[2]||""),this.g=ys(_[3]||"",!0),ki(this,_[4]),this.h=ys(_[5]||"",!0),Ec(this,_[6]||"",!0),this.m=ys(_[7]||"")):(this.l=!1,this.i=new Ni(null,this.l))}fr.prototype.toString=function(){const f=[];var _=this.j;_&&f.push(Va(_,zo,!0),":");var T=this.g;return(T||_=="file")&&(f.push("//"),(_=this.o)&&f.push(Va(_,zo,!0),"@"),f.push(Ks(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&f.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&f.push("/"),f.push(Va(T,T.charAt(0)=="/"?wc:Nd,!0))),(T=this.i.toString())&&f.push("?",T),(T=this.m)&&f.push("#",Va(T,Id)),f.join("")},fr.prototype.resolve=function(f){const _=on(this);let T=!!f.j;T?En(_,f.j):T=!!f.o,T?_.o=f.o:T=!!f.g,T?_.g=f.g:T=f.u!=null;var L=f.h;if(T)ki(_,f.u);else if(T=!!f.h){if(L.charAt(0)!="/")if(this.g&&!this.h)L="/"+L;else{var Z=_.h.lastIndexOf("/");Z!=-1&&(L=_.h.slice(0,Z+1)+L)}if(Z=L,Z==".."||Z==".")L="";else if(Z.indexOf("./")!=-1||Z.indexOf("/.")!=-1){L=Z.lastIndexOf("/",0)==0,Z=Z.split("/");const re=[];for(let Ae=0;Ae<Z.length;){const tt=Z[Ae++];tt=="."?L&&Ae==Z.length&&re.push(""):tt==".."?((re.length>1||re.length==1&&re[0]!="")&&re.pop(),L&&Ae==Z.length&&re.push("")):(re.push(tt),L=!0)}L=re.join("/")}else L=Z}return T?_.h=L:T=f.i.toString()!=="",T?Ec(_,Dd(f.i)):T=!!f.m,T&&(_.m=f.m),_};function on(f){return new fr(f)}function En(f,_,T){f.j=T?ys(_,!0):_,f.j&&(f.j=f.j.replace(/:$/,""))}function ki(f,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);f.u=_}else f.u=null}function Ec(f,_,T){_ instanceof Ni?(f.i=_,Fo(f.i,f.l)):(T||(_=Va(_,Ri)),f.i=new Ni(_,f.l))}function Ct(f,_,T){f.i.set(_,T)}function La(f){return Ct(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function ys(f,_){return f?_?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Va(f,_,T){return typeof f=="string"?(f=encodeURI(f).replace(_,Zn),T&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Zn(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var zo=/[#\/\?@]/g,Nd=/[#\?:]/g,wc=/[#\?]/g,Ri=/[#\?@]/g,Id=/#/g;function Ni(f,_){this.h=this.g=null,this.i=f||null,this.j=!!_}function er(f){f.g||(f.g=new Map,f.h=0,f.i&&Uo(f.i,function(_,T){f.add(decodeURIComponent(_.replace(/\+/g," ")),T)}))}n=Ni.prototype,n.add=function(f,_){er(this),this.i=null,f=Ii(this,f);let T=this.g.get(f);return T||this.g.set(f,T=[]),T.push(_),this.h+=1,this};function jd(f,_){er(f),_=Ii(f,_),f.g.has(_)&&(f.i=null,f.h-=f.g.get(_).length,f.g.delete(_))}function Sc(f,_){return er(f),_=Ii(f,_),f.g.has(_)}n.forEach=function(f,_){er(this),this.g.forEach(function(T,L){T.forEach(function(Z){f.call(_,Z,L,this)},this)},this)};function Tc(f,_){er(f);let T=[];if(typeof _=="string")Sc(f,_)&&(T=T.concat(f.g.get(Ii(f,_))));else for(f=Array.from(f.g.values()),_=0;_<f.length;_++)T=T.concat(f[_]);return T}n.set=function(f,_){return er(this),this.i=null,f=Ii(this,f),Sc(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[_]),this.h+=1,this},n.get=function(f,_){return f?(f=Tc(this,f),f.length>0?String(f[0]):_):_};function Bo(f,_,T){jd(f,_),T.length>0&&(f.i=null,f.g.set(Ii(f,_),C(T)),f.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],_=Array.from(this.g.keys());for(let L=0;L<_.length;L++){var T=_[L];const Z=Ks(T);T=Tc(this,T);for(let re=0;re<T.length;re++){let Ae=Z;T[re]!==""&&(Ae+="="+Ks(T[re])),f.push(Ae)}}return this.i=f.join("&")};function Dd(f){const _=new Ni;return _.i=f.i,f.g&&(_.g=new Map(f.g),_.h=f.h),_}function Ii(f,_){return _=String(_),f.j&&(_=_.toLowerCase()),_}function Fo(f,_){_&&!f.j&&(er(f),f.i=null,f.g.forEach(function(T,L){const Z=L.toLowerCase();L!=Z&&(jd(this,L),Bo(this,Z,T))},f)),f.j=_}function Gr(f,_){const T=new $r;if(c.Image){const L=new Image;L.onload=v(Rr,T,"TestLoadImage: loaded",!0,_,L),L.onerror=v(Rr,T,"TestLoadImage: error",!1,_,L),L.onabort=v(Rr,T,"TestLoadImage: abort",!1,_,L),L.ontimeout=v(Rr,T,"TestLoadImage: timeout",!1,_,L),c.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=f}else _(!1)}function Cc(f,_){const T=new $r,L=new AbortController,Z=setTimeout(()=>{L.abort(),Rr(T,"TestPingServer: timeout",!1,_)},1e4);fetch(f,{signal:L.signal}).then(re=>{clearTimeout(Z),re.ok?Rr(T,"TestPingServer: ok",!0,_):Rr(T,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(Z),Rr(T,"TestPingServer: error",!1,_)})}function Rr(f,_,T,L,Z){try{Z&&(Z.onload=null,Z.onerror=null,Z.onabort=null,Z.ontimeout=null),L(T)}catch{}}function ji(){this.g=new Ht}function vs(f){this.i=f.Sb||null,this.h=f.ab||!1}b(vs,Ai),vs.prototype.g=function(){return new Ua(this.i,this.h)};function Ua(f,_){Ie.call(this),this.H=f,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(Ua,Ie),n=Ua.prototype,n.open=function(f,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=_,this.readyState=1,Yr(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(_.body=f),(this.H||c).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Di(this)),this.readyState=0},n.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Yr(this)),this.g&&(this.readyState=3,Yr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;$o(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function $o(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}n.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var _=f.value?f.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!f.done}))&&(this.response=this.responseText+=_)}f.done?Di(this):Yr(this),this.readyState==3&&$o(this)}},n.Oa=function(f){this.g&&(this.response=this.responseText=f,Di(this))},n.Na=function(f){this.g&&(this.response=f,Di(this))},n.ga=function(){this.g&&Di(this)};function Di(f){f.readyState=4,f.l=null,f.j=null,f.B=null,Yr(f)}n.setRequestHeader=function(f,_){this.A.append(f,_)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],_=this.h.entries();for(var T=_.next();!T.done;)T=T.value,f.push(T[0]+": "+T[1]),T=_.next();return f.join(`\r
`)};function Yr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Ua.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Nr(f){let _="";return Te(f,function(T,L){_+=L,_+=":",_+=T,_+=`\r
`}),_}function za(f,_,T){e:{for(L in T){var L=!1;break e}L=!0}L||(T=Nr(T),typeof f=="string"?T!=null&&Ks(T):Ct(f,_,T))}function Nt(f){Ie.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(Nt,Ie);var bs=/^https?$/i,Ac=["POST","PUT"];n=Nt.prototype,n.Fa=function(f){this.H=f},n.ea=function(f,_,T,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);_=_?_.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():gc.g(),this.g.onreadystatechange=x(g(this.Ca,this));try{this.B=!0,this.g.open(_,String(f),!0),this.B=!1}catch(re){Ba(this,re);return}if(f=T||"",T=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var Z in L)T.set(Z,L[Z]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const re of L.keys())T.set(re,L.get(re));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(T.keys()).find(re=>re.toLowerCase()=="content-type"),Z=c.FormData&&f instanceof c.FormData,!(Array.prototype.indexOf.call(Ac,_,void 0)>=0)||L||Z||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,Ae]of T)this.g.setRequestHeader(re,Ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(re){Ba(this,re)}};function Ba(f,_){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=_,f.o=5,kc(f),Qs(f)}function kc(f){f.A||(f.A=!0,Ye(f,"complete"),Ye(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,Ye(this,"complete"),Ye(this,"abort"),Qs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qs(this,!0)),Nt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Fa(this):this.Xa())},n.Xa=function(){Fa(this)};function Fa(f){if(f.h&&typeof l<"u"){if(f.v&&Kr(f)==4)setTimeout(f.Ca.bind(f),0);else if(Ye(f,"readystatechange"),Kr(f)==4){f.h=!1;try{const re=f.ca();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var T;if(!(T=_)){var L;if(L=re===0){let Ae=String(f.D).match(Rd)[1]||null;!Ae&&c.self&&c.self.location&&(Ae=c.self.location.protocol.slice(0,-1)),L=!bs.test(Ae?Ae.toLowerCase():"")}T=L}if(T)Ye(f,"complete"),Ye(f,"success");else{f.o=6;try{var Z=Kr(f)>2?f.g.statusText:""}catch{Z=""}f.l=Z+" ["+f.ca()+"]",kc(f)}}finally{Qs(f)}}}}function Qs(f,_){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const T=f.g;f.g=null,_||Ye(f,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Kr(f){return f.g?f.g.readyState:0}n.ca=function(){try{return Kr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(f){if(this.g){var _=this.g.responseText;return f&&_.indexOf(f)==0&&(_=_.substring(f.length)),Jn(_)}};function An(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Xs(f){const _={};f=(f.g&&Kr(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<f.length;L++){if(O(f[L]))continue;var T=Cd(f[L]);const Z=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const re=_[Z]||[];_[Z]=re,re.push(T)}Re(_,function(L){return L.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function _s(f,_,T){return T&&T.internalChannelParams&&T.internalChannelParams[f]||_}function Mi(f){this.za=0,this.i=[],this.j=new $r,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=_s("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=_s("baseRetryDelayMs",5e3,f),this.Za=_s("retryDelaySeedMs",1e4,f),this.Ta=_s("forwardChannelMaxRetries",2,f),this.va=_s("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new yc(f&&f.concurrentRequestLimit),this.Ba=new ji,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Mi.prototype,n.ka=8,n.I=1,n.connect=function(f,_,T,L){rn(0),this.W=f,this.H=_||{},T&&L!==void 0&&(this.H.OSID=T,this.H.OAID=L),this.F=this.X,this.J=zd(this,null,this.W),xs(this)};function Rc(f){if(Ho(f),f.I==3){var _=f.V++,T=on(f.J);if(Ct(T,"SID",f.M),Ct(T,"RID",_),Ct(T,"TYPE","terminate"),$a(f,T),_=new Hr(f,f.j,_),_.M=2,_.A=La(on(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(_.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=_.A,T=!0),T||(_.g=Bd(_.j,null),_.g.ea(_.A)),_.F=Date.now(),hs(_)}Ud(f)}function Oi(f){f.g&&(Ic(f),f.g.cancel(),f.g=null)}function Ho(f){Oi(f),f.v&&(c.clearTimeout(f.v),f.v=null),Go(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&c.clearTimeout(f.m),f.m=null)}function xs(f){if(!vc(f.h)&&!f.m){f.m=!0;var _=f.Ea;z||S(),F||(z(),F=!0),w.add(_,f),f.D=0}}function qo(f,_){return ms(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=_.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=cs(g(f.Ea,f,_),Vd(f,f.D)),f.D++,!0)}n.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const Z=new Hr(this,this.j,f);let re=this.o;if(this.U&&(re?(re=H(re),ue(re,this.U)):re=this.U),this.u!==null||this.R||(Z.J=re,re=null),this.S)e:{for(var _=0,T=0;T<this.i.length;T++){t:{var L=this.i[T];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(_+=L,_>4096){_=T;break e}if(_===4096||T===this.i.length-1){_=T+1;break e}}_=1e3}else _=1e3;_=Md(this,Z,_),T=on(this.J),Ct(T,"RID",f),Ct(T,"CVER",22),this.G&&Ct(T,"X-HTTP-Session-Id",this.G),$a(this,T),re&&(this.R?_="headers="+Ks(Nr(re))+"&"+_:this.u&&za(T,this.u,re)),bc(this.h,Z),this.Ra&&Ct(T,"TYPE","init"),this.S?(Ct(T,"$req",_),Ct(T,"SID","null"),Z.U=!0,ds(Z,T,null)):ds(Z,T,_),this.I=2}}else this.I==3&&(f?Nc(this,f):this.i.length==0||vc(this.h)||Nc(this))};function Nc(f,_){var T;_?T=_.l:T=f.V++;const L=on(f.J);Ct(L,"SID",f.M),Ct(L,"RID",T),Ct(L,"AID",f.K),$a(f,L),f.u&&f.o&&za(L,f.u,f.o),T=new Hr(f,f.j,T,f.D+1),f.u===null&&(T.J=f.o),_&&(f.i=_.G.concat(f.i)),_=Md(f,T,1e3),T.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),bc(f.h,T),ds(T,L,_)}function $a(f,_){f.H&&Te(f.H,function(T,L){Ct(_,L,T)}),f.l&&Te({},function(T,L){Ct(_,L,T)})}function Md(f,_,T){T=Math.min(f.i.length,T);const L=f.l?g(f.l.Ka,f.l,f):null;e:{var Z=f.i;let tt=-1;for(;;){const Jt=["count="+T];tt==-1?T>0?(tt=Z[0].g,Jt.push("ofs="+tt)):tt=0:Jt.push("ofs="+tt);let Et=!0;for(let Bt=0;Bt<T;Bt++){var re=Z[Bt].g;const Ir=Z[Bt].map;if(re-=tt,re<0)tt=Math.max(0,Z[Bt].g-100),Et=!1;else try{re="req"+re+"_"||"";try{var Ae=Ir instanceof Map?Ir:Object.entries(Ir);for(const[ws,Qr]of Ae){let Xr=Qr;h(Qr)&&(Xr=Gn(Qr)),Jt.push(re+ws+"="+encodeURIComponent(Xr))}}catch(ws){throw Jt.push(re+"type="+encodeURIComponent("_badmap")),ws}}catch{L&&L(Ir)}}if(Et){Ae=Jt.join("&");break e}}Ae=void 0}return f=f.i.splice(0,T),_.G=f,Ae}function Od(f){if(!f.g&&!f.v){f.Y=1;var _=f.Da;z||S(),F||(z(),F=!0),w.add(_,f),f.A=0}}function Ha(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=cs(g(f.Da,f),Vd(f,f.A)),f.A++,!0)}n.Da=function(){if(this.v=null,Pd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=cs(g(this.Wa,this),f)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,rn(10),Oi(this),Pd(this))};function Ic(f){f.B!=null&&(c.clearTimeout(f.B),f.B=null)}function Pd(f){f.g=new Hr(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var _=on(f.na);Ct(_,"RID","rpc"),Ct(_,"SID",f.M),Ct(_,"AID",f.K),Ct(_,"CI",f.F?"0":"1"),!f.F&&f.ia&&Ct(_,"TO",f.ia),Ct(_,"TYPE","xmlhttp"),$a(f,_),f.u&&f.o&&za(_,f.u,f.o),f.O&&(f.g.H=f.O);var T=f.g;f=f.ba,T.M=1,T.A=La(on(_)),T.u=null,T.R=!0,Lo(T,f)}n.Va=function(){this.C!=null&&(this.C=null,Oi(this),Ha(this),rn(19))};function Go(f){f.C!=null&&(c.clearTimeout(f.C),f.C=null)}function Ld(f,_){var T=null;if(f.g==_){Go(f),Ic(f),f.g=null;var L=2}else if(gs(f.h,_))T=_.G,_c(f.h,_),L=1;else return;if(f.I!=0){if(_.o)if(L==1){T=_.u?_.u.length:0,_=Date.now()-_.F;var Z=f.D;L=Po(),Ye(L,new ls(L,T)),xs(f)}else Od(f);else if(Z=_.m,Z==3||Z==0&&_.X>0||!(L==1&&qo(f,_)||L==2&&Ha(f)))switch(T&&T.length>0&&(_=f.h,_.i=_.i.concat(T)),Z){case 1:Es(f,5);break;case 4:Es(f,10);break;case 3:Es(f,6);break;default:Es(f,2)}}}function Vd(f,_){let T=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(T*=2),T*_}function Es(f,_){if(f.j.info("Error code "+_),_==2){var T=g(f.bb,f),L=f.Ua;const Z=!L;L=new fr(L||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||En(L,"https"),La(L),Z?Gr(L.toString(),T):Cc(L.toString(),T)}else rn(2);f.I=0,f.l&&f.l.pa(_),Ud(f),Ho(f)}n.bb=function(f){f?(this.j.info("Successfully pinged google.com"),rn(2)):(this.j.info("Failed to ping google.com"),rn(1))};function Ud(f){if(f.I=0,f.ja=[],f.l){const _=xc(f.h);(_.length!=0||f.i.length!=0)&&(R(f.ja,_),R(f.ja,f.i),f.h.i.length=0,C(f.i),f.i.length=0),f.l.oa()}}function zd(f,_,T){var L=T instanceof fr?on(T):new fr(T);if(L.g!="")_&&(L.g=_+"."+L.g),ki(L,L.u);else{var Z=c.location;L=Z.protocol,_=_?_+"."+Z.hostname:Z.hostname,Z=+Z.port;const re=new fr(null);L&&En(re,L),_&&(re.g=_),Z&&ki(re,Z),T&&(re.h=T),L=re}return T=f.G,_=f.wa,T&&_&&Ct(L,T,_),Ct(L,"VER",f.ka),$a(f,L),L}function Bd(f,_,T){if(_&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=f.Aa&&!f.ma?new Nt(new vs({ab:T})):new Nt(f.ma),_.Fa(f.L),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fd(){}n=Fd.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Pi(){}Pi.prototype.g=function(f,_){return new Yn(f,_)};function Yn(f,_){Ie.call(this),this.g=new Mi(_),this.l=f,this.h=_&&_.messageUrlParams||null,f=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(f?f["X-WebChannel-Content-Type"]=_.messageContentType:f={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(f?f["X-WebChannel-Client-Profile"]=_.sa:f={"X-WebChannel-Client-Profile":_.sa}),this.g.U=f,(f=_&&_.Qb)&&!O(f)&&(this.g.u=f),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!O(_)&&(this.g.G=_,f=this.h,f!==null&&_ in f&&(f=this.h,_ in f&&delete f[_])),this.j=new Ws(this)}b(Yn,Ie),Yn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Yn.prototype.close=function(){Rc(this.g)},Yn.prototype.o=function(f){var _=this.g;if(typeof f=="string"){var T={};T.__data__=f,f=T}else this.v&&(T={},T.__data__=Gn(f),f=T);_.i.push(new an(_.Ya++,f)),_.I==3&&xs(_)},Yn.prototype.N=function(){this.g.l=null,delete this.j,Rc(this.g),delete this.g,Yn.Z.N.call(this)};function $d(f){Cn.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var _=f.__sm__;if(_){e:{for(const T in _){f=T;break e}f=void 0}(this.i=f)&&(f=this.i,_=_!==null&&f in _?_[f]:void 0),this.data=_}else this.data=f}b($d,Cn);function Hd(){Ar.call(this),this.status=1}b(Hd,Ar);function Ws(f){this.g=f}b(Ws,Fd),Ws.prototype.ra=function(){Ye(this.g,"a")},Ws.prototype.qa=function(f){Ye(this.g,new $d(f))},Ws.prototype.pa=function(f){Ye(this.g,new Hd)},Ws.prototype.oa=function(){Ye(this.g,"b")},Pi.prototype.createWebChannel=Pi.prototype.g,Yn.prototype.send=Yn.prototype.o,Yn.prototype.open=Yn.prototype.m,Yn.prototype.close=Yn.prototype.close,k4=function(){return new Pi},A4=function(){return Po()},C4=Wt,e0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Oa.NO_ERROR=0,Oa.TIMEOUT=8,Oa.HTTP_ERROR=6,vf=Oa,mc.COMPLETE="complete",T4=mc,Ed.EventType=Fr,Fr.OPEN="a",Fr.CLOSE="b",Fr.ERROR="c",Fr.MESSAGE="d",Ie.prototype.listen=Ie.prototype.J,Su=Ed,Nt.prototype.listenOnce=Nt.prototype.K,Nt.prototype.getLastError=Nt.prototype.Ha,Nt.prototype.getLastErrorCode=Nt.prototype.ya,Nt.prototype.getStatus=Nt.prototype.ca,Nt.prototype.getResponseJson=Nt.prototype.La,Nt.prototype.getResponseText=Nt.prototype.la,Nt.prototype.send=Nt.prototype.ea,Nt.prototype.setWithCredentials=Nt.prototype.Fa,S4=Nt}).apply(typeof Qh<"u"?Qh:typeof self<"u"?self:typeof window<"u"?window:{});const U2="@firebase/firestore",z2="4.9.2";let zn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};zn.UNAUTHENTICATED=new zn(null),zn.GOOGLE_CREDENTIALS=new zn("google-credentials-uid"),zn.FIRST_PARTY=new zn("first-party-uid"),zn.MOCK_USER=new zn("mock-user");let ac="12.3.0";const Eo=new X0("@firebase/firestore");function Cl(){return Eo.logLevel}function je(n,...e){if(Eo.logLevel<=ht.DEBUG){const t=e.map(ov);Eo.debug(`Firestore (${ac}): ${n}`,...t)}}function wi(n,...e){if(Eo.logLevel<=ht.ERROR){const t=e.map(ov);Eo.error(`Firestore (${ac}): ${n}`,...t)}}function Fl(n,...e){if(Eo.logLevel<=ht.WARN){const t=e.map(ov);Eo.warn(`Firestore (${ac}): ${n}`,...t)}}function ov(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Xe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,R4(n,r,t)}function R4(n,e,t){let r=`FIRESTORE (${ac}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw wi(r),new Error(r)}function Tt(n,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,n||R4(e,a,r)}function et(n,e){return n}const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends $s{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class bi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class N4{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $I{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(zn.UNAUTHENTICATED)))}shutdown(){}}class HI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class qI{constructor(e){this.t=e,this.currentUser=zn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Tt(this.o===void 0,42304);let r=this.i;const a=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let l=new bi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new bi,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},h=p=>{je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>h(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?h(p):(je("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new bi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tt(typeof r.accessToken=="string",31837,{l:r}),new N4(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Tt(e===null||typeof e=="string",2055,{h:e}),new zn(e)}}class GI{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=zn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class YI{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new GI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(zn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class B2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Sr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Tt(this.o===void 0,3512);const r=l=>{l.error!=null&&je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,je("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new B2(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Tt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new B2(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function QI(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class lv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=QI(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function ft(n,e){return n<e?-1:n>e?1:0}function t0(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const a=n.charAt(r),l=e.charAt(r);if(a!==l)return vy(a)===vy(l)?ft(a,l):vy(a)?1:-1}return ft(n.length,e.length)}const XI=55296,WI=57343;function vy(n){const e=n.charCodeAt(0);return e>=XI&&e<=WI}function $l(n,e,t){return n.length===e.length&&n.every(((r,a)=>t(r,e[a])))}const F2="__name__";class Ns{constructor(e,t,r){t===void 0?t=0:t>e.length&&Xe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Xe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ns.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ns?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=Ns.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return ft(e.length,t.length)}static compareSegments(e,t){const r=Ns.isNumericId(e),a=Ns.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?Ns.extractNumericId(e).compare(Ns.extractNumericId(t)):t0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ba.fromString(e.substring(4,e.length-2))}}class Ot extends Ns{construct(e,t,r){return new Ot(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ke(oe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new Ot(t)}static emptyPath(){return new Ot([])}}const JI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pn extends Ns{construct(e,t,r){return new Pn(e,t,r)}static isValidIdentifier(e){return JI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===F2}static keyField(){return new Pn([F2])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new ke(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new ke(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ke(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,a+=2}else h==="`"?(c=!c,a++):h!=="."||c?(r+=h,a++):(l(),a++)}if(l(),c)throw new ke(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pn(t)}static emptyPath(){return new Pn([])}}class Fe{constructor(e){this.path=e}static fromPath(e){return new Fe(Ot.fromString(e))}static fromName(e){return new Fe(Ot.fromString(e).popFirst(5))}static empty(){return new Fe(Ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ot.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fe(new Ot(e.slice()))}}function I4(n,e,t){if(!t)throw new ke(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ZI(n,e,t,r){if(e===!0&&r===!0)throw new ke(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function $2(n){if(!Fe.isDocumentKey(n))throw new ke(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function H2(n){if(Fe.isDocumentKey(n))throw new ke(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function j4(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Sp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Xe(12329,{type:typeof n})}function Qn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ke(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Sp(n);throw new ke(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function e9(n,e){if(e<=0)throw new ke(oe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function yn(n,e){const t={typeString:n};return e&&(t.value=e),t}function ud(n,e){if(!j4(n))throw new ke(oe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(a&&typeof c!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new ke(oe.INVALID_ARGUMENT,t);return!0}const q2=-62135596800,G2=1e6;class zt{static now(){return zt.fromMillis(Date.now())}static fromDate(e){return zt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*G2);return new zt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<q2)throw new ke(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/G2}_compareTo(e){return this.seconds===e.seconds?ft(this.nanoseconds,e.nanoseconds):ft(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:zt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ud(e,zt._jsonSchema))return new zt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-q2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}zt._jsonSchemaVersion="firestore/timestamp/1.0",zt._jsonSchema={type:yn("string",zt._jsonSchemaVersion),seconds:yn("number"),nanoseconds:yn("number")};class We{static fromTimestamp(e){return new We(e)}static min(){return new We(new zt(0,0))}static max(){return new We(new zt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const zu=-1;function t9(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=We.fromTimestamp(r===1e9?new zt(t+1,0):new zt(t,r));return new wa(a,Fe.empty(),e)}function n9(n){return new wa(n.readTime,n.key,zu)}class wa{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new wa(We.min(),Fe.empty(),zu)}static max(){return new wa(We.max(),Fe.empty(),zu)}}function r9(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Fe.comparator(n.documentKey,e.documentKey),t!==0?t:ft(n.largestBatchId,e.largestBatchId))}const s9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class i9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function oc(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==s9)throw n;je("LocalStore","Unexpectedly lost primary lease")}class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new pe(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof pe?t:pe.resolve(t)}catch(t){return pe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):pe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):pe.reject(t)}static resolve(e){return new pe(((t,r)=>{t(e)}))}static reject(e){return new pe(((t,r)=>{r(e)}))}static waitFor(e){return new pe(((t,r)=>{let a=0,l=0,c=!1;e.forEach((h=>{++a,h.next((()=>{++l,c&&l===a&&t()}),(p=>r(p)))})),c=!0,l===a&&t()}))}static or(e){let t=pe.resolve(!1);for(const r of e)t=t.next((a=>a?pe.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,l)=>{r.push(t.call(this,a,l))})),this.waitFor(r)}static mapArray(e,t){return new pe(((r,a)=>{const l=e.length,c=new Array(l);let h=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next((v=>{c[g]=v,++h,h===l&&r(c)}),(v=>a(v)))}}))}static doWhile(e,t){return new pe(((r,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):r()};l()}))}}function a9(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function lc(n){return n.name==="IndexedDbTransactionError"}class Tp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Tp.ce=-1;const cv=-1;function Cp(n){return n==null}function Gf(n){return n===0&&1/n==-1/0}function o9(n){return typeof n=="number"&&Number.isInteger(n)&&!Gf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const D4="";function l9(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Y2(e)),e=c9(n.get(t),e);return Y2(e)}function c9(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case D4:t+="";break;default:t+=l}}return t}function Y2(n){return n+D4+""}function K2(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ia(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function M4(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class $t{constructor(e,t){this.comparator=e,this.root=t||Mn.EMPTY}insert(e,t){return new $t(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Mn.BLACK,null,null))}remove(e){return new $t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xh(this.root,e,this.comparator,!0)}}class Xh{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mn{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??Mn.RED,this.left=a??Mn.EMPTY,this.right=l??Mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new Mn(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Mn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Xe(27949);return e+(this.isRed()?0:1)}}Mn.EMPTY=null,Mn.RED=!0,Mn.BLACK=!1;Mn.EMPTY=new class{constructor(){this.size=0}get key(){throw Xe(57766)}get value(){throw Xe(16141)}get color(){throw Xe(16727)}get left(){throw Xe(29726)}get right(){throw Xe(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new Mn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _n{constructor(e){this.comparator=e,this.data=new $t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Q2(this.data.getIterator())}getIteratorFrom(e){return new Q2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof _n)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new _n(this.comparator);return t.data=e,t}}class Q2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Tr{constructor(e){this.fields=e,e.sort(Pn.comparator)}static empty(){return new Tr([])}unionWith(e){let t=new _n(Pn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Tr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $l(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class O4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ln{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new O4("Invalid base64 string: "+l):l}})(e);return new Ln(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new Ln(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ft(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ln.EMPTY_BYTE_STRING=new Ln("");const u9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sa(n){if(Tt(!!n,39018),typeof n=="string"){let e=0;const t=u9.exec(n);if(Tt(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nn(n.seconds),nanos:nn(n.nanos)}}function nn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ta(n){return typeof n=="string"?Ln.fromBase64String(n):Ln.fromUint8Array(n)}const P4="server_timestamp",L4="__type__",V4="__previous_value__",U4="__local_write_time__";function Ap(n){return(n?.mapValue?.fields||{})[L4]?.stringValue===P4}function kp(n){const e=n.mapValue.fields[V4];return Ap(e)?kp(e):e}function Bu(n){const e=Sa(n.mapValue.fields[U4].timestampValue);return new zt(e.seconds,e.nanos)}class d9{constructor(e,t,r,a,l,c,h,p,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=v}}const Yf="(default)";class Fu{constructor(e,t){this.projectId=e,this.database=t||Yf}static empty(){return new Fu("","")}get isDefaultDatabase(){return this.database===Yf}isEqual(e){return e instanceof Fu&&e.projectId===this.projectId&&e.database===this.database}}const z4="__type__",h9="__max__",Wh={mapValue:{}},B4="__vector__",Kf="value";function Ca(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ap(n)?4:p9(n)?9007199254740991:f9(n)?10:11:Xe(28295,{value:n})}function zs(n,e){if(n===e)return!0;const t=Ca(n);if(t!==Ca(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Bu(n).isEqual(Bu(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Sa(a.timestampValue),h=Sa(l.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return Ta(a.bytesValue).isEqual(Ta(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return nn(a.geoPointValue.latitude)===nn(l.geoPointValue.latitude)&&nn(a.geoPointValue.longitude)===nn(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return nn(a.integerValue)===nn(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=nn(a.doubleValue),h=nn(l.doubleValue);return c===h?Gf(c)===Gf(h):isNaN(c)&&isNaN(h)}return!1})(n,e);case 9:return $l(n.arrayValue.values||[],e.arrayValue.values||[],zs);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},h=l.mapValue.fields||{};if(K2(c)!==K2(h))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(h[p]===void 0||!zs(c[p],h[p])))return!1;return!0})(n,e);default:return Xe(52216,{left:n})}}function $u(n,e){return(n.values||[]).find((t=>zs(t,e)))!==void 0}function Hl(n,e){if(n===e)return 0;const t=Ca(n),r=Ca(e);if(t!==r)return ft(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ft(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const h=nn(l.integerValue||l.doubleValue),p=nn(c.integerValue||c.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1})(n,e);case 3:return X2(n.timestampValue,e.timestampValue);case 4:return X2(Bu(n),Bu(e));case 5:return t0(n.stringValue,e.stringValue);case 6:return(function(l,c){const h=Ta(l),p=Ta(c);return h.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const h=l.split("/"),p=c.split("/");for(let g=0;g<h.length&&g<p.length;g++){const v=ft(h[g],p[g]);if(v!==0)return v}return ft(h.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const h=ft(nn(l.latitude),nn(c.latitude));return h!==0?h:ft(nn(l.longitude),nn(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return W2(n.arrayValue,e.arrayValue);case 10:return(function(l,c){const h=l.fields||{},p=c.fields||{},g=h[Kf]?.arrayValue,v=p[Kf]?.arrayValue,b=ft(g?.values?.length||0,v?.values?.length||0);return b!==0?b:W2(g,v)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Wh.mapValue&&c===Wh.mapValue)return 0;if(l===Wh.mapValue)return 1;if(c===Wh.mapValue)return-1;const h=l.fields||{},p=Object.keys(h),g=c.fields||{},v=Object.keys(g);p.sort(),v.sort();for(let b=0;b<p.length&&b<v.length;++b){const x=t0(p[b],v[b]);if(x!==0)return x;const C=Hl(h[p[b]],g[v[b]]);if(C!==0)return C}return ft(p.length,v.length)})(n.mapValue,e.mapValue);default:throw Xe(23264,{he:t})}}function X2(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ft(n,e);const t=Sa(n),r=Sa(e),a=ft(t.seconds,r.seconds);return a!==0?a:ft(t.nanos,r.nanos)}function W2(n,e){const t=n.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=Hl(t[a],r[a]);if(l)return l}return ft(t.length,r.length)}function ql(n){return n0(n)}function n0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Sa(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ta(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Fe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=n0(l);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${n0(t.fields[c])}`;return a+"}"})(n.mapValue):Xe(61005,{value:n})}function bf(n){switch(Ca(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kp(n);return e?16+bf(e):16;case 5:return 2*n.stringValue.length;case 6:return Ta(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+bf(l)),0)})(n.arrayValue);case 10:case 11:return(function(r){let a=0;return Ia(r.fields,((l,c)=>{a+=l.length+bf(c)})),a})(n.mapValue);default:throw Xe(13486,{value:n})}}function Qf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function r0(n){return!!n&&"integerValue"in n}function uv(n){return!!n&&"arrayValue"in n}function J2(n){return!!n&&"nullValue"in n}function Z2(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function _f(n){return!!n&&"mapValue"in n}function f9(n){return(n?.mapValue?.fields||{})[z4]?.stringValue===B4}function Du(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ia(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Du(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Du(n.arrayValue.values[t]);return e}return{...n}}function p9(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===h9}class cr{constructor(e){this.value=e}static empty(){return new cr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!_f(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Du(t)}setAll(e){let t=Pn.emptyPath(),r={},a=[];e.forEach(((c,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,r,a),r={},a=[],t=h.popLast()}c?r[h.lastSegment()]=Du(c):a.push(h.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());_f(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];_f(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Ia(t,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new cr(Du(this.value))}}function F4(n){const e=[];return Ia(n.fields,((t,r)=>{const a=new Pn([t]);if(_f(r)){const l=F4(r.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new Tr(e)}class Fn{constructor(e,t,r,a,l,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=h}static newInvalidDocument(e){return new Fn(e,0,We.min(),We.min(),We.min(),cr.empty(),0)}static newFoundDocument(e,t,r,a){return new Fn(e,1,t,We.min(),r,a,0)}static newNoDocument(e,t){return new Fn(e,2,t,We.min(),We.min(),cr.empty(),0)}static newUnknownDocument(e,t){return new Fn(e,3,t,We.min(),We.min(),cr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(We.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=We.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Gl{constructor(e,t){this.position=e,this.inclusive=t}}function eE(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const l=e[a],c=n.position[a];if(l.field.isKeyField()?r=Fe.comparator(Fe.fromName(c.referenceValue),t.key):r=Hl(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function tE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!zs(n.position[t],e.position[t]))return!1;return!0}class Hu{constructor(e,t="asc"){this.field=e,this.dir=t}}function m9(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class $4{}class gn extends $4{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new y9(e,t,r):t==="array-contains"?new _9(e,r):t==="in"?new x9(e,r):t==="not-in"?new E9(e,r):t==="array-contains-any"?new w9(e,r):new gn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new v9(e,r):new b9(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Hl(t,this.value)):t!==null&&Ca(this.value)===Ca(t)&&this.matchesComparison(Hl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class as extends $4{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new as(e,t)}matches(e){return H4(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function H4(n){return n.op==="and"}function q4(n){return g9(n)&&H4(n)}function g9(n){for(const e of n.filters)if(e instanceof as)return!1;return!0}function s0(n){if(n instanceof gn)return n.field.canonicalString()+n.op.toString()+ql(n.value);if(q4(n))return n.filters.map((e=>s0(e))).join(",");{const e=n.filters.map((t=>s0(t))).join(",");return`${n.op}(${e})`}}function G4(n,e){return n instanceof gn?(function(r,a){return a instanceof gn&&r.op===a.op&&r.field.isEqual(a.field)&&zs(r.value,a.value)})(n,e):n instanceof as?(function(r,a){return a instanceof as&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,c,h)=>l&&G4(c,a.filters[h])),!0):!1})(n,e):void Xe(19439)}function Y4(n){return n instanceof gn?(function(t){return`${t.field.canonicalString()} ${t.op} ${ql(t.value)}`})(n):n instanceof as?(function(t){return t.op.toString()+" {"+t.getFilters().map(Y4).join(" ,")+"}"})(n):"Filter"}class y9 extends gn{constructor(e,t,r){super(e,t,r),this.key=Fe.fromName(r.referenceValue)}matches(e){const t=Fe.comparator(e.key,this.key);return this.matchesComparison(t)}}class v9 extends gn{constructor(e,t){super(e,"in",t),this.keys=K4("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class b9 extends gn{constructor(e,t){super(e,"not-in",t),this.keys=K4("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function K4(n,e){return(e.arrayValue?.values||[]).map((t=>Fe.fromName(t.referenceValue)))}class _9 extends gn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return uv(t)&&$u(t.arrayValue,this.value)}}class x9 extends gn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&$u(this.value.arrayValue,t)}}class E9 extends gn{constructor(e,t){super(e,"not-in",t)}matches(e){if($u(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!$u(this.value.arrayValue,t)}}class w9 extends gn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!uv(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>$u(this.value.arrayValue,r)))}}class S9{constructor(e,t=null,r=[],a=[],l=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=h,this.Te=null}}function nE(n,e=null,t=[],r=[],a=null,l=null,c=null){return new S9(n,e,t,r,a,l,c)}function dv(n){const e=et(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>s0(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),Cp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>ql(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>ql(r))).join(",")),e.Te=t}return e.Te}function hv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!m9(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!G4(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!tE(n.startAt,e.startAt)&&tE(n.endAt,e.endAt)}function i0(n){return Fe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class ko{constructor(e,t=null,r=[],a=[],l=null,c="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=h,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function T9(n,e,t,r,a,l,c,h){return new ko(n,e,t,r,a,l,c,h)}function Rp(n){return new ko(n)}function rE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function fv(n){return n.collectionGroup!==null}function Pl(n){const e=et(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new _n(Pn.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(h=h.add(g.field))}))})),h})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Hu(l,r))})),t.has(Pn.keyField().canonicalString())||e.Ie.push(new Hu(Pn.keyField(),r))}return e.Ie}function Os(n){const e=et(n);return e.Ee||(e.Ee=C9(e,Pl(n))),e.Ee}function C9(n,e){if(n.limitType==="F")return nE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Hu(a.field,l)}));const t=n.endAt?new Gl(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Gl(n.startAt.position,n.startAt.inclusive):null;return nE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function a0(n,e){const t=n.filters.concat([e]);return new ko(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Xf(n,e,t){return new ko(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Np(n,e){return hv(Os(n),Os(e))&&n.limitType===e.limitType}function Q4(n){return`${dv(Os(n))}|lt:${n.limitType}`}function Al(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>Y4(a))).join(", ")}]`),Cp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>ql(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>ql(a))).join(",")),`Target(${r})`})(Os(n))}; limitType=${n.limitType})`}function Ip(n,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):Fe.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(n,e)&&(function(r,a){for(const l of Pl(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(r,a){return!(r.startAt&&!(function(c,h,p){const g=eE(c,h,p);return c.inclusive?g<=0:g<0})(r.startAt,Pl(r),a)||r.endAt&&!(function(c,h,p){const g=eE(c,h,p);return c.inclusive?g>=0:g>0})(r.endAt,Pl(r),a))})(n,e)}function A9(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function X4(n){return(e,t)=>{let r=!1;for(const a of Pl(n)){const l=k9(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function k9(n,e,t){const r=n.field.isKeyField()?Fe.comparator(e.key,t.key):(function(l,c,h){const p=c.data.field(l),g=h.data.field(l);return p!==null&&g!==null?Hl(p,g):Xe(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Xe(19790,{direction:n.dir})}}class Ro{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ia(this.inner,((t,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return M4(this.inner)}size(){return this.innerSize}}const R9=new $t(Fe.comparator);function Si(){return R9}const W4=new $t(Fe.comparator);function Tu(...n){let e=W4;for(const t of n)e=e.insert(t.key,t);return e}function J4(n){let e=W4;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function ho(){return Mu()}function Z4(){return Mu()}function Mu(){return new Ro((n=>n.toString()),((n,e)=>n.isEqual(e)))}const N9=new $t(Fe.comparator),I9=new _n(Fe.comparator);function mt(...n){let e=I9;for(const t of n)e=e.add(t);return e}const j9=new _n(ft);function D9(){return j9}function pv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gf(e)?"-0":e}}function eT(n){return{integerValue:""+n}}function tT(n,e){return o9(e)?eT(e):pv(n,e)}class jp{constructor(){this._=void 0}}function M9(n,e,t){return n instanceof qu?(function(a,l){const c={fields:{[L4]:{stringValue:P4},[U4]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Ap(l)&&(l=kp(l)),l&&(c.fields[V4]=l),{mapValue:c}})(t,e):n instanceof Yl?rT(n,e):n instanceof Kl?sT(n,e):(function(a,l){const c=nT(a,l),h=sE(c)+sE(a.Ae);return r0(c)&&r0(a.Ae)?eT(h):pv(a.serializer,h)})(n,e)}function O9(n,e,t){return n instanceof Yl?rT(n,e):n instanceof Kl?sT(n,e):t}function nT(n,e){return n instanceof Gu?(function(r){return r0(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class qu extends jp{}class Yl extends jp{constructor(e){super(),this.elements=e}}function rT(n,e){const t=iT(e);for(const r of n.elements)t.some((a=>zs(a,r)))||t.push(r);return{arrayValue:{values:t}}}class Kl extends jp{constructor(e){super(),this.elements=e}}function sT(n,e){let t=iT(e);for(const r of n.elements)t=t.filter((a=>!zs(a,r)));return{arrayValue:{values:t}}}class Gu extends jp{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function sE(n){return nn(n.integerValue||n.doubleValue)}function iT(n){return uv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Dp{constructor(e,t){this.field=e,this.transform=t}}function P9(n,e){return n.field.isEqual(e.field)&&(function(r,a){return r instanceof Yl&&a instanceof Yl||r instanceof Kl&&a instanceof Kl?$l(r.elements,a.elements,zs):r instanceof Gu&&a instanceof Gu?zs(r.Ae,a.Ae):r instanceof qu&&a instanceof qu})(n.transform,e.transform)}class L9{constructor(e,t){this.version=e,this.transformResults=t}}class Xn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xn}static exists(e){return new Xn(void 0,e)}static updateTime(e){return new Xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Mp{}function aT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Op(n.key,Xn.none()):new dd(n.key,n.data,Xn.none());{const t=n.data,r=cr.empty();let a=new _n(Pn.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new ja(n.key,r,new Tr(a.toArray()),Xn.none())}}function V9(n,e,t){n instanceof dd?(function(a,l,c){const h=a.value.clone(),p=aE(a.fieldTransforms,l,c.transformResults);h.setAll(p),l.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(n,e,t):n instanceof ja?(function(a,l,c){if(!xf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const h=aE(a.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(oT(a)),p.setAll(h),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Ou(n,e,t,r){return n instanceof dd?(function(l,c,h,p){if(!xf(l.precondition,c))return h;const g=l.value.clone(),v=oE(l.fieldTransforms,p,c);return g.setAll(v),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,e,t,r):n instanceof ja?(function(l,c,h,p){if(!xf(l.precondition,c))return h;const g=oE(l.fieldTransforms,p,c),v=c.data;return v.setAll(oT(l)),v.setAll(g),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((b=>b.field)))})(n,e,t,r):(function(l,c,h){return xf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h})(n,e,t)}function U9(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),l=nT(r.transform,a||null);l!=null&&(t===null&&(t=cr.empty()),t.set(r.field,l))}return t||null}function iE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&$l(r,a,((l,c)=>P9(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class dd extends Mp{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ja extends Mp{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function oT(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function aE(n,e,t){const r=new Map;Tt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const l=n[a],c=l.transform,h=e.data.field(l.field);r.set(l.field,O9(c,h,t[a]))}return r}function oE(n,e,t){const r=new Map;for(const a of n){const l=a.transform,c=t.data.field(a.field);r.set(a.field,M9(l,c,e))}return r}class Op extends Mp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class z9 extends Mp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class B9{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&V9(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ou(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ou(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Z4();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let h=this.applyToLocalView(c,l.mutatedFields);h=t.has(a.key)?null:h;const p=aT(c,h);p!==null&&r.set(a.key,p),c.isValidDocument()||c.convertToNoDocument(We.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),mt())}isEqual(e){return this.batchId===e.batchId&&$l(this.mutations,e.mutations,((t,r)=>iE(t,r)))&&$l(this.baseMutations,e.baseMutations,((t,r)=>iE(t,r)))}}class mv{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){Tt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return N9})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new mv(e,t,r,a)}}class F9{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class $9{constructor(e,t){this.count=e,this.unchangedNames=t}}var hn,yt;function H9(n){switch(n){case oe.OK:return Xe(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Xe(15467,{code:n})}}function lT(n){if(n===void 0)return wi("GRPC error has no .code"),oe.UNKNOWN;switch(n){case hn.OK:return oe.OK;case hn.CANCELLED:return oe.CANCELLED;case hn.UNKNOWN:return oe.UNKNOWN;case hn.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case hn.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case hn.INTERNAL:return oe.INTERNAL;case hn.UNAVAILABLE:return oe.UNAVAILABLE;case hn.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case hn.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case hn.NOT_FOUND:return oe.NOT_FOUND;case hn.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case hn.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case hn.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case hn.ABORTED:return oe.ABORTED;case hn.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case hn.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case hn.DATA_LOSS:return oe.DATA_LOSS;default:return Xe(39323,{code:n})}}(yt=hn||(hn={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";function q9(){return new TextEncoder}const G9=new ba([4294967295,4294967295],0);function lE(n){const e=q9().encode(n),t=new w4;return t.update(e),new Uint8Array(t.digest())}function cE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ba([t,r],0),new ba([a,l],0)]}class gv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Cu(`Invalid padding: ${t}`);if(r<0)throw new Cu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Cu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Cu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ba.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(ba.fromNumber(r)));return a.compare(G9)===1&&(a=new ba([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=lE(e),[r,a]=cE(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);if(!this.we(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new gv(l,a,t);return r.forEach((h=>c.insert(h))),c}insert(e){if(this.ge===0)return;const t=lE(e),[r,a]=cE(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Cu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Pp{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,hd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Pp(We.min(),a,new $t(ft),Si(),mt())}}class hd{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new hd(r,t,mt(),mt(),mt())}}class Ef{constructor(e,t,r,a){this.be=e,this.removedTargetIds=t,this.key=r,this.De=a}}class cT{constructor(e,t){this.targetId=e,this.Ce=t}}class uT{constructor(e,t,r=Ln.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class uE{constructor(){this.ve=0,this.Fe=dE(),this.Me=Ln.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=mt(),t=mt(),r=mt();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:Xe(38017,{changeType:l})}})),new hd(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=dE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Tt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Y9{constructor(e){this.Ge=e,this.ze=new Map,this.je=Si(),this.Je=Jh(),this.He=Jh(),this.Ye=new $t(ft)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Xe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(i0(l))if(r===0){const c=new Fe(l.path);this.et(t,c,Fn.newNoDocument(c,We.min()))}else Tt(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const h=this.ut(e),p=h?this.ct(h,e,c):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let c,h;try{c=Ta(r).toUint8Array()}catch(p){if(p instanceof O4)return Fl("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new gv(c,a,l)}catch(p){return Fl(p instanceof Cu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return h.ge===0?null:h}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach((l=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const h=this.ot(c);if(h){if(l.current&&i0(h.target)){const p=new Fe(h.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,Fn.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let r=mt();this.He.forEach(((l,c)=>{let h=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new Pp(e,t,this.Ye,this.je,r);return this.je=Si(),this.Je=Jh(),this.He=Jh(),this.Ye=new $t(ft),a}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new uE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new _n(ft),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new _n(ft),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||je("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new uE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Jh(){return new $t(Fe.comparator)}function dE(){return new $t(Fe.comparator)}const K9={asc:"ASCENDING",desc:"DESCENDING"},Q9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},X9={and:"AND",or:"OR"};class W9{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function o0(n,e){return n.useProto3Json||Cp(e)?e:{value:e}}function Wf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function J9(n,e){return Wf(n,e.toTimestamp())}function Ps(n){return Tt(!!n,49232),We.fromTimestamp((function(t){const r=Sa(t);return new zt(r.seconds,r.nanos)})(n))}function yv(n,e){return l0(n,e).canonicalString()}function l0(n,e){const t=(function(a){return new Ot(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function hT(n){const e=Ot.fromString(n);return Tt(yT(e),10190,{key:e.toString()}),e}function c0(n,e){return yv(n.databaseId,e.path)}function by(n,e){const t=hT(e);if(t.get(1)!==n.databaseId.projectId)throw new ke(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ke(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Fe(pT(t))}function fT(n,e){return yv(n.databaseId,e)}function Z9(n){const e=hT(n);return e.length===4?Ot.emptyPath():pT(e)}function u0(n){return new Ot(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function pT(n){return Tt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function hE(n,e,t){return{name:c0(n,e),fields:t.value.mapValue.fields}}function ej(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Xe(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,v){return g.useProto3Json?(Tt(v===void 0||typeof v=="string",58123),Ln.fromBase64String(v||"")):(Tt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Ln.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&(function(g){const v=g.code===void 0?oe.UNKNOWN:lT(g.code);return new ke(v,g.message||"")})(c);t=new uT(r,a,l,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=by(n,r.document.name),l=Ps(r.document.updateTime),c=r.document.createTime?Ps(r.document.createTime):We.min(),h=new cr({mapValue:{fields:r.document.fields}}),p=Fn.newFoundDocument(a,l,c,h),g=r.targetIds||[],v=r.removedTargetIds||[];t=new Ef(g,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=by(n,r.document),l=r.readTime?Ps(r.readTime):We.min(),c=Fn.newNoDocument(a,l),h=r.removedTargetIds||[];t=new Ef([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=by(n,r.document),l=r.removedTargetIds||[];t=new Ef([],l,a,null)}else{if(!("filter"in e))return Xe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new $9(a,l),h=r.targetId;t=new cT(h,c)}}return t}function tj(n,e){let t;if(e instanceof dd)t={update:hE(n,e.key,e.value)};else if(e instanceof Op)t={delete:c0(n,e.key)};else if(e instanceof ja)t={update:hE(n,e.key,e.data),updateMask:uj(e.fieldMask)};else{if(!(e instanceof z9))return Xe(16599,{Vt:e.type});t={verify:c0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const h=c.transform;if(h instanceof qu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Yl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Kl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Gu)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw Xe(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:J9(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Xe(27497)})(n,e.precondition)),t}function nj(n,e){return n&&n.length>0?(Tt(e!==void 0,14353),n.map((t=>(function(a,l){let c=a.updateTime?Ps(a.updateTime):Ps(l);return c.isEqual(We.min())&&(c=Ps(l)),new L9(c,a.transformResults||[])})(t,e)))):[]}function rj(n,e){return{documents:[fT(n,e.path)]}}function sj(n,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=fT(n,a);const l=(function(g){if(g.length!==0)return gT(as.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((v=>(function(x){return{field:kl(x.field),direction:oj(x.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=o0(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function ij(n){let e=Z9(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){Tt(r===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(b){const x=mT(b);return x instanceof as&&q4(x)?x.getFilters():[x]})(t.where));let c=[];t.orderBy&&(c=(function(b){return b.map((x=>(function(R){return new Hu(Rl(R.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(x)))})(t.orderBy));let h=null;t.limit&&(h=(function(b){let x;return x=typeof b=="object"?b.value:b,Cp(x)?null:x})(t.limit));let p=null;t.startAt&&(p=(function(b){const x=!!b.before,C=b.values||[];return new Gl(C,x)})(t.startAt));let g=null;return t.endAt&&(g=(function(b){const x=!b.before,C=b.values||[];return new Gl(C,x)})(t.endAt)),T9(e,a,c,l,h,"F",p,g)}function aj(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Xe(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function mT(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Rl(t.unaryFilter.field);return gn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Rl(t.unaryFilter.field);return gn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Rl(t.unaryFilter.field);return gn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Rl(t.unaryFilter.field);return gn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Xe(61313);default:return Xe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return gn.create(Rl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Xe(58110);default:return Xe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return as.create(t.compositeFilter.filters.map((r=>mT(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Xe(1026)}})(t.compositeFilter.op))})(n):Xe(30097,{filter:n})}function oj(n){return K9[n]}function lj(n){return Q9[n]}function cj(n){return X9[n]}function kl(n){return{fieldPath:n.canonicalString()}}function Rl(n){return Pn.fromServerFormat(n.fieldPath)}function gT(n){return n instanceof gn?(function(t){if(t.op==="=="){if(Z2(t.value))return{unaryFilter:{field:kl(t.field),op:"IS_NAN"}};if(J2(t.value))return{unaryFilter:{field:kl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Z2(t.value))return{unaryFilter:{field:kl(t.field),op:"IS_NOT_NAN"}};if(J2(t.value))return{unaryFilter:{field:kl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kl(t.field),op:lj(t.op),value:t.value}}})(n):n instanceof as?(function(t){const r=t.getFilters().map((a=>gT(a)));return r.length===1?r[0]:{compositeFilter:{op:cj(t.op),filters:r}}})(n):Xe(54877,{filter:n})}function uj(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function yT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class pa{constructor(e,t,r,a,l=We.min(),c=We.min(),h=Ln.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new pa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new pa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new pa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new pa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class dj{constructor(e){this.yt=e}}function hj(n){const e=ij({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Xf(e,e.limit,"L"):e}class fj{constructor(){this.Cn=new pj}addToCollectionParentIndex(e,t){return this.Cn.add(t),pe.resolve()}getCollectionParents(e,t){return pe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return pe.resolve()}deleteFieldIndex(e,t){return pe.resolve()}deleteAllFieldIndexes(e){return pe.resolve()}createTargetIndexes(e,t){return pe.resolve()}getDocumentsMatchingTarget(e,t){return pe.resolve(null)}getIndexType(e,t){return pe.resolve(0)}getFieldIndexes(e,t){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,t){return pe.resolve(wa.min())}getMinOffsetFromCollectionGroup(e,t){return pe.resolve(wa.min())}updateCollectionGroup(e,t,r){return pe.resolve()}updateIndexEntries(e,t){return pe.resolve()}}class pj{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new _n(Ot.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new _n(Ot.comparator)).toArray()}}const fE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vT=41943040;class lr{static withCacheSize(e){return new lr(e,lr.DEFAULT_COLLECTION_PERCENTILE,lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}lr.DEFAULT_COLLECTION_PERCENTILE=10,lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lr.DEFAULT=new lr(vT,lr.DEFAULT_COLLECTION_PERCENTILE,lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lr.DISABLED=new lr(-1,0,0);class Ql{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ql(0)}static cr(){return new Ql(-1)}}const pE="LruGarbageCollector",mj=1048576;function mE([n,e],[t,r]){const a=ft(n,t);return a===0?ft(e,r):a}class gj{constructor(e){this.Ir=e,this.buffer=new _n(mE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();mE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class yj{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){je(pE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){lc(t)?je(pE,"Ignoring IndexedDB error during garbage collection: ",t):await oc(t)}await this.Vr(3e5)}))}}class vj{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return pe.resolve(Tp.ce);const r=new gj(t);return this.mr.forEachTarget(e,(a=>r.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>r.Ar(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(je("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(fE)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,a,l,c,h,p,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),a=this.params.maximumSequenceNumbersToCollect):a=b,c=Date.now(),this.nthSequenceNumber(e,a)))).next((b=>(r=b,h=Date.now(),this.removeTargets(e,r,t)))).next((b=>(l=b,p=Date.now(),this.removeOrphanedDocuments(e,r)))).next((b=>(g=Date.now(),Cl()<=ht.DEBUG&&je("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${a} in `+(h-c)+`ms
	Removed ${l} targets in `+(p-h)+`ms
	Removed ${b} documents in `+(g-p)+`ms
Total Duration: ${g-v}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:b}))))}}function bj(n,e){return new vj(n,e)}class _j{constructor(){this.changes=new Ro((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?pe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class xj{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Ej{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&Ou(r.mutation,a,Tr.empty(),zt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,mt()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=mt()){const a=ho();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((l=>{let c=Tu();return l.forEach(((h,p)=>{c=c.insert(h,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=ho();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,mt())))}populateOverlays(e,t,r){const a=[];return r.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,h)=>{t.set(c,h)}))}))}computeViews(e,t,r,a){let l=Si();const c=Mu(),h=(function(){return Mu()})();return t.forEach(((p,g)=>{const v=r.get(g.key);a.has(g.key)&&(v===void 0||v.mutation instanceof ja)?l=l.insert(g.key,g):v!==void 0?(c.set(g.key,v.mutation.getFieldMask()),Ou(v.mutation,g,v.mutation.getFieldMask(),zt.now())):c.set(g.key,Tr.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,v)=>c.set(g,v))),t.forEach(((g,v)=>h.set(g,new xj(v,c.get(g)??null)))),h)))}recalculateAndSaveOverlays(e,t){const r=Mu();let a=new $t(((c,h)=>c-h)),l=mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const h of c)h.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let v=r.get(p)||Tr.empty();v=h.applyToLocalView(g,v),r.set(p,v);const b=(a.get(h.batchId)||mt()).add(p);a=a.insert(h.batchId,b)}))})).next((()=>{const c=[],h=a.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),g=p.key,v=p.value,b=Z4();v.forEach((x=>{if(!l.has(x)){const C=aT(t.get(x),r.get(x));C!==null&&b.set(x,C),l=l.add(x)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,b))}return pe.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return(function(c){return Fe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):fv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):pe.resolve(ho());let h=zu,p=l;return c.next((g=>pe.forEach(g,((v,b)=>(h<b.largestBatchId&&(h=b.largestBatchId),l.get(v)?pe.resolve():this.remoteDocumentCache.getEntry(e,v).next((x=>{p=p.insert(v,x)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,mt()))).next((v=>({batchId:h,changes:J4(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Fe(t)).next((r=>{let a=Tu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let c=Tu();return this.indexManager.getCollectionParents(e,l).next((h=>pe.forEach(h,(p=>{const g=(function(b,x){return new ko(x,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,r,a).next((v=>{v.forEach(((b,x)=>{c=c.insert(b,x)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a)))).next((c=>{l.forEach(((p,g)=>{const v=g.getKey();c.get(v)===null&&(c=c.insert(v,Fn.newInvalidDocument(v)))}));let h=Tu();return c.forEach(((p,g)=>{const v=l.get(p);v!==void 0&&Ou(v.mutation,g,Tr.empty(),zt.now()),Ip(t,g)&&(h=h.insert(p,g))})),h}))}}class wj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return pe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Ps(a.createTime)}})(t)),pe.resolve()}getNamedQuery(e,t){return pe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:hj(a.bundledQuery),readTime:Ps(a.readTime)}})(t)),pe.resolve()}}class Sj{constructor(){this.overlays=new $t(Fe.comparator),this.qr=new Map}getOverlay(e,t){return pe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ho();return pe.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,l)=>{this.St(e,t,l)})),pe.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.qr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(r)),pe.resolve()}getOverlaysForCollection(e,t,r){const a=ho(),l=t.length+1,c=new Fe(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const p=h.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>r&&a.set(p.getKey(),p)}return pe.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new $t(((g,v)=>g-v));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let v=l.get(g.largestBatchId);v===null&&(v=ho(),l=l.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const h=ho(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,v)=>h.set(g,v))),!(h.size()>=a)););return pe.resolve(h)}St(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(r.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new F9(t,r));let l=this.qr.get(t);l===void 0&&(l=mt(),this.qr.set(t,l)),this.qr.set(t,l.add(r.key))}}class Tj{constructor(){this.sessionToken=Ln.EMPTY_BYTE_STRING}getSessionToken(e){return pe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,pe.resolve()}}class vv{constructor(){this.Qr=new _n(Sn.$r),this.Ur=new _n(Sn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Sn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Sn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Fe(new Ot([])),r=new Sn(t,e),a=new Sn(t,e+1),l=[];return this.Ur.forEachInRange([r,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Fe(new Ot([])),r=new Sn(t,e),a=new Sn(t,e+1);let l=mt();return this.Ur.forEachInRange([r,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Sn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Sn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Fe.comparator(e.key,t.key)||ft(e.Yr,t.Yr)}static Kr(e,t){return ft(e.Yr,t.Yr)||Fe.comparator(e.key,t.key)}}class Cj{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new _n(Sn.$r)}checkEmpty(e){return pe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new B9(l,t,r,a);this.mutationQueue.push(c);for(const h of a)this.Zr=this.Zr.add(new Sn(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return pe.resolve(c)}lookupMutationBatch(e,t){return pe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.ei(r),l=a<0?0:a;return pe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(this.mutationQueue.length===0?cv:this.tr-1)}getAllMutationBatches(e){return pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Sn(t,0),a=new Sn(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([r,a],(c=>{const h=this.Xr(c.Yr);l.push(h)})),pe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n(ft);return t.forEach((a=>{const l=new Sn(a,0),c=new Sn(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(h=>{r=r.add(h.Yr)}))})),pe.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;Fe.isDocumentKey(l)||(l=l.child(""));const c=new Sn(new Fe(l),0);let h=new _n(ft);return this.Zr.forEachWhile((p=>{const g=p.key.path;return!!r.isPrefixOf(g)&&(g.length===a&&(h=h.add(p.Yr)),!0)}),c),pe.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((r=>{const a=this.Xr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Tt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return pe.forEach(t.mutations,(a=>{const l=new Sn(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Sn(t,0),a=this.Zr.firstAfterOrEqual(r);return pe.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,pe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Aj{constructor(e){this.ri=e,this.docs=(function(){return new $t(Fe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return pe.resolve(r?r.document.mutableCopy():Fn.newInvalidDocument(t))}getEntries(e,t){let r=Si();return t.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():Fn.newInvalidDocument(a))})),pe.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=Si();const c=t.path,h=new Fe(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:g,value:{document:v}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||r9(n9(v),r)<=0||(a.has(v.key)||Ip(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return pe.resolve(l)}getAllFromCollectionGroup(e,t,r,a){Xe(9500)}ii(e,t){return pe.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new kj(this)}getSize(e){return pe.resolve(this.size)}}class kj extends _j{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(r)})),pe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Rj{constructor(e){this.persistence=e,this.si=new Ro((t=>dv(t)),hv),this.lastRemoteSnapshotVersion=We.min(),this.highestTargetId=0,this.oi=0,this._i=new vv,this.targetCount=0,this.ai=Ql.ur()}forEachTarget(e,t){return this.si.forEach(((r,a)=>t(a))),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),pe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ql(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,pe.resolve()}updateTargetData(e,t){return this.Pr(t),pe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.si.forEach(((c,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)})),pe.waitFor(l).next((()=>a))}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return pe.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),pe.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),pe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),pe.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return pe.resolve(r)}containsKey(e,t){return pe.resolve(this._i.containsKey(t))}}class bT{constructor(e,t){this.ui={},this.overlays={},this.ci=new Tp(0),this.li=!1,this.li=!0,this.hi=new Tj,this.referenceDelegate=e(this),this.Pi=new Rj(this),this.indexManager=new fj,this.remoteDocumentCache=(function(a){return new Aj(a)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new dj(t),this.Ii=new wj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Sj,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new Cj(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){je("MemoryPersistence","Starting transaction:",e);const a=new Nj(this.ci.next());return this.referenceDelegate.Ei(),r(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return pe.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class Nj extends i9{constructor(e){super(),this.currentSequenceNumber=e}}class bv{constructor(e){this.persistence=e,this.Ri=new vv,this.Vi=null}static mi(e){return new bv(e)}get fi(){if(this.Vi)return this.Vi;throw Xe(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),pe.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),pe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),pe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.fi,(r=>{const a=Fe.fromPath(r);return this.gi(e,a).next((l=>{l||t.removeEntry(a,We.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return pe.or([()=>pe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Jf{constructor(e,t){this.persistence=e,this.pi=new Ro((r=>l9(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=bj(this,t)}static mi(e,t){return new Jf(e,t)}Ei(){}di(e){return pe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return pe.forEach(this.pi,((r,a)=>this.br(e,r,a).next((l=>l?pe.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((h=>{h||(r++,l.removeEntry(c,We.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),pe.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),pe.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),pe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),pe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=bf(e.data.value)),t}br(e,t,r){return pe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return pe.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class _v{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=a}static As(e,t){let r=mt(),a=mt();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new _v(e,t.fromCache,r,a)}}class Ij{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class jj{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return rN()?8:a9($n())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,a,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new Ij;return this.Ss(e,t,c).next((h=>{if(l.result=h,this.Vs)return this.bs(e,t,c,h.size)}))})).next((()=>l.result))}bs(e,t,r,a){return r.documentReadCount<this.fs?(Cl()<=ht.DEBUG&&je("QueryEngine","SDK will not create cache indexes for query:",Al(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),pe.resolve()):(Cl()<=ht.DEBUG&&je("QueryEngine","Query:",Al(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.gs*a?(Cl()<=ht.DEBUG&&je("QueryEngine","The SDK decides to create cache indexes for query:",Al(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Os(t))):pe.resolve())}ys(e,t){if(rE(t))return pe.resolve(null);let r=Os(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Xf(t,null,"F"),r=Os(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=mt(...l);return this.ps.getDocuments(e,c).next((h=>this.indexManager.getMinOffset(e,r).next((p=>{const g=this.Ds(t,h);return this.Cs(t,g,c,p.readTime)?this.ys(e,Xf(t,null,"F")):this.vs(e,g,t,p)}))))})))))}ws(e,t,r,a){return rE(t)||a.isEqual(We.min())?pe.resolve(null):this.ps.getDocuments(e,r).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,r,a)?pe.resolve(null):(Cl()<=ht.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Al(t)),this.vs(e,c,t,t9(a,zu)).next((h=>h)))}))}Ds(e,t){let r=new _n(X4(e));return t.forEach(((a,l)=>{Ip(e,l)&&(r=r.add(l))})),r}Cs(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,r){return Cl()<=ht.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",Al(t)),this.ps.getDocumentsMatchingQuery(e,t,wa.min(),r)}vs(e,t,r,a){return this.ps.getDocumentsMatchingQuery(e,r,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const xv="LocalStore",Dj=3e8;class Mj{constructor(e,t,r,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new $t(ft),this.xs=new Ro((l=>dv(l)),hv),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ej(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function Oj(n,e,t,r){return new Mj(n,e,t,r)}async function _T(n,e){const t=et(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],h=[];let p=mt();for(const g of a){c.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}for(const g of l){h.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(r,p).next((g=>({Ls:g,removedBatchIds:c,addedBatchIds:h})))}))}))}function Pj(n,e){const t=et(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,p,g,v){const b=g.batch,x=b.keys();let C=pe.resolve();return x.forEach((R=>{C=C.next((()=>v.getEntry(p,R))).next((j=>{const A=g.docVersions.get(R);Tt(A!==null,48541),j.version.compareTo(A)<0&&(b.applyToRemoteDocument(j,g),j.isValidDocument()&&(j.setReadTime(g.commitVersion),v.addEntry(j)))}))})),C.next((()=>h.mutationQueue.removeMutationBatch(p,b)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let p=mt();for(let g=0;g<h.mutationResults.length;++g)h.mutationResults[g].transformResults.length>0&&(p=p.add(h.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function xT(n){const e=et(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Lj(n,e){const t=et(n),r=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const h=[];e.targetChanges.forEach(((v,b)=>{const x=a.get(b);if(!x)return;h.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,b).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,b))));let C=x.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(b)!==null?C=C.withResumeToken(Ln.EMPTY_BYTE_STRING,We.min()).withLastLimboFreeSnapshotVersion(We.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,r)),a=a.insert(b,C),(function(j,A,B){return j.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=Dj?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(x,C,v)&&h.push(t.Pi.updateTargetData(l,C))}));let p=Si(),g=mt();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),h.push(Vj(l,c,e.documentUpdates).next((v=>{p=v.ks,g=v.qs}))),!r.isEqual(We.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((b=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,r)));h.push(v)}return pe.waitFor(h).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(t.Ms=a,l)))}function Vj(n,e,t){let r=mt(),a=mt();return t.forEach((l=>r=r.add(l))),e.getEntries(n,r).next((l=>{let c=Si();return t.forEach(((h,p)=>{const g=l.get(h);p.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(h)),p.isNoDocument()&&p.version.isEqual(We.min())?(e.removeEntry(h,p.readTime),c=c.insert(h,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(h,p)):je(xv,"Ignoring outdated watch update for ",h,". Current version:",g.version," Watch version:",p.version)})),{ks:c,qs:a}}))}function Uj(n,e){const t=et(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=cv),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function zj(n,e){const t=et(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.Pi.getTargetData(r,e).next((l=>l?(a=l,pe.resolve(a)):t.Pi.allocateTargetId(r).next((c=>(a=new pa(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.Ms.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function d0(n,e,t){const r=et(n),a=r.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!lc(c))throw c;je(xv,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(a.target)}function gE(n,e,t){const r=et(n);let a=We.min(),l=mt();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,v){const b=et(p),x=b.xs.get(v);return x!==void 0?pe.resolve(b.Ms.get(x)):b.Pi.getTargetData(g,v)})(r,c,Os(e)).next((h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,h.targetId).next((p=>{l=p}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?a:We.min(),t?l:mt()))).next((h=>(Bj(r,A9(e),h),{documents:h,Qs:l})))))}function Bj(n,e,t){let r=n.Os.get(e)||We.min();t.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),n.Os.set(e,r)}class yE{constructor(){this.activeTargetIds=D9()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Fj{constructor(){this.Mo=new yE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new yE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class $j{Oo(e){}shutdown(){}}const vE="ConnectivityMonitor";class bE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){je(vE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){je(vE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Zh=null;function h0(){return Zh===null?Zh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Zh++,"0x"+Zh.toString(16)}const _y="RestConnection",Hj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${a}`,this.Wo=this.databaseId.database===Yf?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Go(e,t,r,a,l){const c=h0(),h=this.zo(e,t.toUriEncodedString());je(_y,`Sending RPC '${e}' ${c}:`,h,r);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,a,l);const{host:g}=new URL(h),v=To(g);return this.Jo(e,h,p,r,v).then((b=>(je(_y,`Received RPC '${e}' ${c}: `,b),b)),(b=>{throw Fl(_y,`RPC '${e}' ${c} failed with error: `,b,"url: ",h,"request:",r),b}))}Ho(e,t,r,a,l,c){return this.Go(e,t,r,a,l)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ac})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const r=Hj[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class Gj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Un="WebChannelConnection";class Yj extends qj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,a,l){const c=h0();return new Promise(((h,p)=>{const g=new S4;g.setWithCredentials(!0),g.listenOnce(T4.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case vf.NO_ERROR:const b=g.getResponseJson();je(Un,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(b)),h(b);break;case vf.TIMEOUT:je(Un,`RPC '${e}' ${c} timed out`),p(new ke(oe.DEADLINE_EXCEEDED,"Request time out"));break;case vf.HTTP_ERROR:const x=g.getStatus();if(je(Un,`RPC '${e}' ${c} failed with status:`,x,"response text:",g.getResponseText()),x>0){let C=g.getResponseJson();Array.isArray(C)&&(C=C[0]);const R=C?.error;if(R&&R.status&&R.message){const j=(function(B){const G=B.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(G)>=0?G:oe.UNKNOWN})(R.status);p(new ke(j,R.message))}else p(new ke(oe.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new ke(oe.UNAVAILABLE,"Connection failed."));break;default:Xe(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{je(Un,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(a);je(Un,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",v,r,15)}))}T_(e,t,r){const a=h0(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=k4(),h=A4(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const v=l.join("");je(Un,`Creating RPC '${e}' stream ${a}: ${v}`,p);const b=c.createWebChannel(v,p);this.I_(b);let x=!1,C=!1;const R=new Gj({Yo:A=>{C?je(Un,`Not sending because RPC '${e}' stream ${a} is closed:`,A):(x||(je(Un,`Opening RPC '${e}' stream ${a} transport.`),b.open(),x=!0),je(Un,`RPC '${e}' stream ${a} sending:`,A),b.send(A))},Zo:()=>b.close()}),j=(A,B,G)=>{A.listen(B,(I=>{try{G(I)}catch(V){setTimeout((()=>{throw V}),0)}}))};return j(b,Su.EventType.OPEN,(()=>{C||(je(Un,`RPC '${e}' stream ${a} transport opened.`),R.o_())})),j(b,Su.EventType.CLOSE,(()=>{C||(C=!0,je(Un,`RPC '${e}' stream ${a} transport closed`),R.a_(),this.E_(b))})),j(b,Su.EventType.ERROR,(A=>{C||(C=!0,Fl(Un,`RPC '${e}' stream ${a} transport errored. Name:`,A.name,"Message:",A.message),R.a_(new ke(oe.UNAVAILABLE,"The operation could not be completed")))})),j(b,Su.EventType.MESSAGE,(A=>{if(!C){const B=A.data[0];Tt(!!B,16349);const G=B,I=G?.error||G[0]?.error;if(I){je(Un,`RPC '${e}' stream ${a} received error:`,I);const V=I.status;let z=(function(S){const k=hn[S];if(k!==void 0)return lT(k)})(V),F=I.message;z===void 0&&(z=oe.INTERNAL,F="Unknown error status: "+V+" with message "+I.message),C=!0,R.a_(new ke(z,F)),b.close()}else je(Un,`RPC '${e}' stream ${a} received:`,B),R.u_(B)}})),j(h,C4.STAT_EVENT,(A=>{A.stat===e0.PROXY?je(Un,`RPC '${e}' stream ${a} detected buffering proxy`):A.stat===e0.NOPROXY&&je(Un,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{R.__()}),0),R}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function xy(){return typeof document<"u"?document:null}function Lp(n){return new W9(n,!0)}class ET{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&je("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const _E="PersistentStream";class wT{constructor(e,t,r,a,l,c,h,p){this.Mi=e,this.S_=r,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ET(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(wi(t.toString()),wi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===t&&this.G_(r,a)}),(r=>{e((()=>{const a=new ke(oe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return je(_E,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(je(_E,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Kj extends wT{constructor(e,t,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=ej(this.serializer,e),r=(function(l){if(!("targetChange"in l))return We.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?We.min():c.readTime?Ps(c.readTime):We.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=u0(this.serializer),t.addTarget=(function(l,c){let h;const p=c.target;if(h=i0(p)?{documents:rj(l,p)}:{query:sj(l,p).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=dT(l,c.resumeToken);const g=o0(l,c.expectedCount);g!==null&&(h.expectedCount=g)}else if(c.snapshotVersion.compareTo(We.min())>0){h.readTime=Wf(l,c.snapshotVersion.toTimestamp());const g=o0(l,c.expectedCount);g!==null&&(h.expectedCount=g)}return h})(this.serializer,e);const r=aj(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=u0(this.serializer),t.removeTarget=e,this.q_(t)}}class Qj extends wT{constructor(e,t,r,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Tt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Tt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Tt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=nj(e.writeResults,e.commitTime),r=Ps(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=u0(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>tj(this.serializer,r)))};this.q_(t)}}class Xj{}class Wj extends Xj{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new ke(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,l0(t,r),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ke(oe.UNKNOWN,l.toString())}))}Ho(e,t,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Ho(e,l0(t,r),a,c,h,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ke(oe.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Jj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(wi(t),this.aa=!1):je("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const wo="RemoteStore";class Zj{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{No(this)&&(je(wo,"Restarting streams for network reachability change."),await(async function(p){const g=et(p);g.Ea.add(4),await fd(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Vp(g)})(this))}))})),this.Ra=new Jj(r,a)}}async function Vp(n){if(No(n))for(const e of n.da)await e(!0)}async function fd(n){for(const e of n.da)await e(!1)}function ST(n,e){const t=et(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Tv(t)?Sv(t):cc(t).O_()&&wv(t,e))}function Ev(n,e){const t=et(n),r=cc(t);t.Ia.delete(e),r.O_()&&TT(t,e),t.Ia.size===0&&(r.O_()?r.L_():No(t)&&t.Ra.set("Unknown"))}function wv(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(We.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}cc(n).Y_(e)}function TT(n,e){n.Va.Ue(e),cc(n).Z_(e)}function Sv(n){n.Va=new Y9({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),cc(n).start(),n.Ra.ua()}function Tv(n){return No(n)&&!cc(n).x_()&&n.Ia.size>0}function No(n){return et(n).Ea.size===0}function CT(n){n.Va=void 0}async function eD(n){n.Ra.set("Online")}async function tD(n){n.Ia.forEach(((e,t)=>{wv(n,e)}))}async function nD(n,e){CT(n),Tv(n)?(n.Ra.ha(e),Sv(n)):n.Ra.set("Unknown")}async function rD(n,e,t){if(n.Ra.set("Online"),e instanceof uT&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const h of l.targetIds)a.Ia.has(h)&&(await a.remoteSyncer.rejectListen(h,c),a.Ia.delete(h),a.Va.removeTarget(h))})(n,e)}catch(r){je(wo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Zf(n,r)}else if(e instanceof Ef?n.Va.Ze(e):e instanceof cT?n.Va.st(e):n.Va.tt(e),!t.isEqual(We.min()))try{const r=await xT(n.localStore);t.compareTo(r)>=0&&await(function(l,c){const h=l.Va.Tt(c);return h.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Ia.get(g);v&&l.Ia.set(g,v.withResumeToken(p.resumeToken,c))}})),h.targetMismatches.forEach(((p,g)=>{const v=l.Ia.get(p);if(!v)return;l.Ia.set(p,v.withResumeToken(Ln.EMPTY_BYTE_STRING,v.snapshotVersion)),TT(l,p);const b=new pa(v.target,p,g,v.sequenceNumber);wv(l,b)})),l.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(r){je(wo,"Failed to raise snapshot:",r),await Zf(n,r)}}async function Zf(n,e,t){if(!lc(e))throw e;n.Ea.add(1),await fd(n),n.Ra.set("Offline"),t||(t=()=>xT(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{je(wo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Vp(n)}))}function AT(n,e){return e().catch((t=>Zf(n,t,e)))}async function Up(n){const e=et(n),t=Aa(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:cv;for(;sD(e);)try{const a=await Uj(e.localStore,r);if(a===null){e.Ta.length===0&&t.L_();break}r=a.batchId,iD(e,a)}catch(a){await Zf(e,a)}kT(e)&&RT(e)}function sD(n){return No(n)&&n.Ta.length<10}function iD(n,e){n.Ta.push(e);const t=Aa(n);t.O_()&&t.X_&&t.ea(e.mutations)}function kT(n){return No(n)&&!Aa(n).x_()&&n.Ta.length>0}function RT(n){Aa(n).start()}async function aD(n){Aa(n).ra()}async function oD(n){const e=Aa(n);for(const t of n.Ta)e.ea(t.mutations)}async function lD(n,e,t){const r=n.Ta.shift(),a=mv.from(r,e,t);await AT(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await Up(n)}async function cD(n,e){e&&Aa(n).X_&&await(async function(r,a){if((function(c){return H9(c)&&c!==oe.ABORTED})(a.code)){const l=r.Ta.shift();Aa(r).B_(),await AT(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Up(r)}})(n,e),kT(n)&&RT(n)}async function xE(n,e){const t=et(n);t.asyncQueue.verifyOperationInProgress(),je(wo,"RemoteStore received new credentials");const r=No(t);t.Ea.add(3),await fd(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Vp(t)}async function uD(n,e){const t=et(n);e?(t.Ea.delete(2),await Vp(t)):e||(t.Ea.add(2),await fd(t),t.Ra.set("Unknown"))}function cc(n){return n.ma||(n.ma=(function(t,r,a){const l=et(t);return l.sa(),new Kj(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:eD.bind(null,n),t_:tD.bind(null,n),r_:nD.bind(null,n),H_:rD.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Tv(n)?Sv(n):n.Ra.set("Unknown")):(await n.ma.stop(),CT(n))}))),n.ma}function Aa(n){return n.fa||(n.fa=(function(t,r,a){const l=et(t);return l.sa(),new Qj(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:aD.bind(null,n),r_:cD.bind(null,n),ta:oD.bind(null,n),na:lD.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Up(n)):(await n.fa.stop(),n.Ta.length>0&&(je(wo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class Cv{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const c=Date.now()+r,h=new Cv(e,t,c,a,l);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ke(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Av(n,e){if(wi("AsyncQueue",`${e}: ${n}`),lc(n))return new ke(oe.UNAVAILABLE,`${e}: ${n}`);throw n}class Ll{static emptySet(e){return new Ll(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Fe.comparator(t.key,r.key):(t,r)=>Fe.comparator(t.key,r.key),this.keyedMap=Tu(),this.sortedSet=new $t(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ll)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ll;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class EE{constructor(){this.ga=new $t(Fe.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Xe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Xl{constructor(e,t,r,a,l,c,h,p,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,a,l){const c=[];return t.forEach((h=>{c.push({type:0,doc:h})})),new Xl(e,t,Ll.emptySet(t),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Np(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class dD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class hD{constructor(){this.queries=wE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=et(t),l=a.queries;a.queries=wE(),l.forEach(((c,h)=>{for(const p of h.Sa)p.onError(r)}))})(this,new ke(oe.ABORTED,"Firestore shutting down"))}}function wE(){return new Ro((n=>Q4(n)),Np)}async function kv(n,e){const t=et(n);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(r=2):(l=new dD,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const h=Av(c,`Initialization of query '${Al(e.query)}' failed`);return void e.onError(h)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Nv(t)}async function Rv(n,e){const t=et(n),r=e.query;let a=3;const l=t.queries.get(r);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function fD(n,e){const t=et(n);let r=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const h of c.Sa)h.Fa(a)&&(r=!0);c.wa=a}}r&&Nv(t)}function pD(n,e,t){const r=et(n),a=r.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);r.queries.delete(e)}function Nv(n){n.Ca.forEach((e=>{e.next()}))}var f0,SE;(SE=f0||(f0={})).Ma="default",SE.Cache="cache";class Iv{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new Xl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Xl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==f0.Cache}}class NT{constructor(e){this.key=e}}class IT{constructor(e){this.key=e}}class mD{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=mt(),this.mutatedKeys=mt(),this.eu=X4(e),this.tu=new Ll(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new EE,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,h=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,b)=>{const x=a.get(v),C=Ip(this.query,b)?b:null,R=!!x&&this.mutatedKeys.has(x.key),j=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let A=!1;x&&C?x.data.isEqual(C.data)?R!==j&&(r.track({type:3,doc:C}),A=!0):this.su(x,C)||(r.track({type:2,doc:C}),A=!0,(p&&this.eu(C,p)>0||g&&this.eu(C,g)<0)&&(h=!0)):!x&&C?(r.track({type:0,doc:C}),A=!0):x&&!C&&(r.track({type:1,doc:x}),A=!0,(p||g)&&(h=!0)),A&&(C?(c=c.add(C),l=j?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),r.track({type:1,doc:v})}return{tu:c,iu:r,Cs:h,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,b)=>(function(C,R){const j=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xe(20277,{Rt:A})}};return j(C)-j(R)})(v.type,b.type)||this.eu(v.doc,b.doc))),this.ou(r),a=a??!1;const h=t&&!a?this._u():[],p=this.Xa.size===0&&this.current&&!a?1:0,g=p!==this.Za;return this.Za=p,c.length!==0||g?{snapshot:new Xl(this.query,e.tu,l,c,e.mutatedKeys,p===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new EE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=mt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new IT(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new NT(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=mt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Xl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const jv="SyncEngine";class gD{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class yD{constructor(e){this.key=e,this.hu=!1}}class vD{constructor(e,t,r,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ro((h=>Q4(h)),Np),this.Iu=new Map,this.Eu=new Set,this.du=new $t(Fe.comparator),this.Au=new Map,this.Ru=new vv,this.Vu={},this.mu=new Map,this.fu=Ql.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function bD(n,e,t=!0){const r=LT(n);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await jT(r,e,t,!0),a}async function _D(n,e){const t=LT(n);await jT(t,e,!0,!1)}async function jT(n,e,t,r){const a=await zj(n.localStore,Os(e)),l=a.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let h;return r&&(h=await xD(n,e,l,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&ST(n.remoteStore,a),h}async function xD(n,e,t,r,a){n.pu=(b,x,C)=>(async function(j,A,B,G){let I=A.view.ru(B);I.Cs&&(I=await gE(j.localStore,A.query,!1).then((({documents:w})=>A.view.ru(w,I))));const V=G&&G.targetChanges.get(A.targetId),z=G&&G.targetMismatches.get(A.targetId)!=null,F=A.view.applyChanges(I,j.isPrimaryClient,V,z);return CE(j,A.targetId,F.au),F.snapshot})(n,b,x,C);const l=await gE(n.localStore,e,!0),c=new mD(e,l.Qs),h=c.ru(l.documents),p=hd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",a),g=c.applyChanges(h,n.isPrimaryClient,p);CE(n,t,g.au);const v=new gD(e,t,c);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function ED(n,e,t){const r=et(n),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter((c=>!Np(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await d0(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&Ev(r.remoteStore,a.targetId),p0(r,a.targetId)})).catch(oc)):(p0(r,a.targetId),await d0(r.localStore,a.targetId,!0))}async function wD(n,e){const t=et(n),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ev(t.remoteStore,r.targetId))}async function SD(n,e,t){const r=ID(n);try{const a=await(function(c,h){const p=et(c),g=zt.now(),v=h.reduce(((C,R)=>C.add(R.key)),mt());let b,x;return p.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let R=Si(),j=mt();return p.Ns.getEntries(C,v).next((A=>{R=A,R.forEach(((B,G)=>{G.isValidDocument()||(j=j.add(B))}))})).next((()=>p.localDocuments.getOverlayedDocuments(C,R))).next((A=>{b=A;const B=[];for(const G of h){const I=U9(G,b.get(G.key).overlayedDocument);I!=null&&B.push(new ja(G.key,I,F4(I.value.mapValue),Xn.exists(!0)))}return p.mutationQueue.addMutationBatch(C,g,B,h)})).next((A=>{x=A;const B=A.applyToLocalDocumentSet(b,j);return p.documentOverlayCache.saveOverlays(C,A.batchId,B)}))})).then((()=>({batchId:x.batchId,changes:J4(b)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(c,h,p){let g=c.Vu[c.currentUser.toKey()];g||(g=new $t(ft)),g=g.insert(h,p),c.Vu[c.currentUser.toKey()]=g})(r,a.batchId,t),await pd(r,a.changes),await Up(r.remoteStore)}catch(a){const l=Av(a,"Failed to persist write");t.reject(l)}}async function DT(n,e){const t=et(n);try{const r=await Lj(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(Tt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?Tt(c.hu,14607):a.removedDocuments.size>0&&(Tt(c.hu,42227),c.hu=!1))})),await pd(t,r,e)}catch(r){await oc(r)}}function TE(n,e,t){const r=et(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach(((l,c)=>{const h=c.view.va(e);h.snapshot&&a.push(h.snapshot)})),(function(c,h){const p=et(c);p.onlineState=h;let g=!1;p.queries.forEach(((v,b)=>{for(const x of b.Sa)x.va(h)&&(g=!0)})),g&&Nv(p)})(r.eventManager,e),a.length&&r.Pu.H_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function TD(n,e,t){const r=et(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),l=a&&a.key;if(l){let c=new $t(Fe.comparator);c=c.insert(l,Fn.newNoDocument(l,We.min()));const h=mt().add(l),p=new Pp(We.min(),new Map,new $t(ft),c,h);await DT(r,p),r.du=r.du.remove(l),r.Au.delete(e),Dv(r)}else await d0(r.localStore,e,!1).then((()=>p0(r,e,t))).catch(oc)}async function CD(n,e){const t=et(n),r=e.batch.batchId;try{const a=await Pj(t.localStore,e);OT(t,r,null),MT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await pd(t,a)}catch(a){await oc(a)}}async function AD(n,e,t){const r=et(n);try{const a=await(function(c,h){const p=et(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return p.mutationQueue.lookupMutationBatch(g,h).next((b=>(Tt(b!==null,37113),v=b.keys(),p.mutationQueue.removeMutationBatch(g,b)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,v,h))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>p.localDocuments.getDocuments(g,v)))}))})(r.localStore,e);OT(r,e,t),MT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await pd(r,a)}catch(a){await oc(a)}}function MT(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function OT(n,e,t){const r=et(n);let a=r.Vu[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.Vu[r.currentUser.toKey()]=a}}function p0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||PT(n,r)}))}function PT(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Ev(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Dv(n))}function CE(n,e,t){for(const r of t)r instanceof NT?(n.Ru.addReference(r.key,e),kD(n,r)):r instanceof IT?(je(jv,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||PT(n,r.key)):Xe(19791,{wu:r})}function kD(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(je(jv,"New document in limbo: "+t),n.Eu.add(r),Dv(n))}function Dv(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Fe(Ot.fromString(e)),r=n.fu.next();n.Au.set(r,new yD(t)),n.du=n.du.insert(t,r),ST(n.remoteStore,new pa(Os(Rp(t.path)),r,"TargetPurposeLimboResolution",Tp.ce))}}async function pd(n,e,t){const r=et(n),a=[],l=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((h,p)=>{c.push(r.pu(p,e,t).then((g=>{if((g||t)&&r.isPrimaryClient){const v=g?!g.fromCache:t?.targetChanges.get(p.targetId)?.current;r.sharedClientState.updateQueryState(p.targetId,v?"current":"not-current")}if(g){a.push(g);const v=_v.As(p.targetId,g);l.push(v)}})))})),await Promise.all(c),r.Pu.H_(a),await(async function(p,g){const v=et(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>pe.forEach(g,(x=>pe.forEach(x.Es,(C=>v.persistence.referenceDelegate.addReference(b,x.targetId,C))).next((()=>pe.forEach(x.ds,(C=>v.persistence.referenceDelegate.removeReference(b,x.targetId,C)))))))))}catch(b){if(!lc(b))throw b;je(xv,"Failed to update sequence numbers: "+b)}for(const b of g){const x=b.targetId;if(!b.fromCache){const C=v.Ms.get(x),R=C.snapshotVersion,j=C.withLastLimboFreeSnapshotVersion(R);v.Ms=v.Ms.insert(x,j)}}})(r.localStore,l))}async function RD(n,e){const t=et(n);if(!t.currentUser.isEqual(e)){je(jv,"User change. New user:",e.toKey());const r=await _T(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((h=>{h.forEach((p=>{p.reject(new ke(oe.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await pd(t,r.Ls)}}function ND(n,e){const t=et(n),r=t.Au.get(e);if(r&&r.hu)return mt().add(r.key);{let a=mt();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const h=t.Tu.get(c);a=a.unionWith(h.view.nu)}return a}}function LT(n){const e=et(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=DT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ND.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TD.bind(null,e),e.Pu.H_=fD.bind(null,e.eventManager),e.Pu.yu=pD.bind(null,e.eventManager),e}function ID(n){const e=et(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=CD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AD.bind(null,e),e}class ep{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Oj(this.persistence,new jj,e.initialUser,this.serializer)}Cu(e){return new bT(bv.mi,this.serializer)}Du(e){return new Fj}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ep.provider={build:()=>new ep};class jD extends ep{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Tt(this.persistence.referenceDelegate instanceof Jf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new yj(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?lr.withCacheSize(this.cacheSizeBytes):lr.DEFAULT;return new bT((r=>Jf.mi(r,t)),this.serializer)}}class m0{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>TE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=RD.bind(null,this.syncEngine),await uD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new hD})()}createDatastore(e){const t=Lp(e.databaseInfo.databaseId),r=(function(l){return new Yj(l)})(e.databaseInfo);return(function(l,c,h,p){return new Wj(l,c,h,p)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,l,c,h){return new Zj(r,a,l,c,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>TE(this.syncEngine,t,0)),(function(){return bE.v()?new bE:new $j})())}createSyncEngine(e,t){return(function(a,l,c,h,p,g,v){const b=new vD(a,l,c,h,p,g);return v&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=et(t);je(wo,"RemoteStore shutting down."),r.Ea.add(5),await fd(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}m0.provider={build:()=>new m0};class Mv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):wi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const ka="FirestoreClient";class DD{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=zn.UNAUTHENTICATED,this.clientId=lv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{je(ka,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(je(ka,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Av(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Ey(n,e){n.asyncQueue.verifyOperationInProgress(),je(ka,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async a=>{r.isEqual(a)||(await _T(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function AE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await MD(n);je(ka,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>xE(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,a)=>xE(e.remoteStore,a))),n._onlineComponents=e}async function MD(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){je(ka,"Using user provided OfflineComponentProvider");try{await Ey(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===oe.FAILED_PRECONDITION||a.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Fl("Error using user provided cache. Falling back to memory cache: "+t),await Ey(n,new ep)}}else je(ka,"Using default OfflineComponentProvider"),await Ey(n,new jD(void 0));return n._offlineComponents}async function VT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(je(ka,"Using user provided OnlineComponentProvider"),await AE(n,n._uninitializedComponentsProvider._online)):(je(ka,"Using default OnlineComponentProvider"),await AE(n,new m0))),n._onlineComponents}function OD(n){return VT(n).then((e=>e.syncEngine))}async function tp(n){const e=await VT(n),t=e.eventManager;return t.onListen=bD.bind(null,e.syncEngine),t.onUnlisten=ED.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=_D.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=wD.bind(null,e.syncEngine),t}function PD(n,e,t={}){const r=new bi;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,p,g){const v=new Mv({next:x=>{v.Nu(),c.enqueueAndForget((()=>Rv(l,b)));const C=x.docs.has(h);!C&&x.fromCache?g.reject(new ke(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&x.fromCache&&p&&p.source==="server"?g.reject(new ke(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(x)},error:x=>g.reject(x)}),b=new Iv(Rp(h.path),v,{includeMetadataChanges:!0,qa:!0});return kv(l,b)})(await tp(n),n.asyncQueue,e,t,r))),r.promise}function LD(n,e,t={}){const r=new bi;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,p,g){const v=new Mv({next:x=>{v.Nu(),c.enqueueAndForget((()=>Rv(l,b))),x.fromCache&&p.source==="server"?g.reject(new ke(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(x)},error:x=>g.reject(x)}),b=new Iv(h,v,{includeMetadataChanges:!0,qa:!0});return kv(l,b)})(await tp(n),n.asyncQueue,e,t,r))),r.promise}function UT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const kE=new Map;const zT="firestore.googleapis.com",RE=!0;class NE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ke(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zT,this.ssl=RE}else this.host=e.host,this.ssl=e.ssl??RE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=vT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<mj)throw new ke(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=UT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ke(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ke(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ke(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zp{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new NE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ke(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ke(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new NE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new $I;switch(r.type){case"firstParty":return new YI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ke(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=kE.get(t);r&&(je("ComponentProvider","Removing Datastore"),kE.delete(t),r.terminate())})(this),Promise.resolve()}}function VD(n,e,t,r={}){n=Qn(n,zp);const a=To(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;a&&(K0(`https://${h}`),Q0("Firestore",!0)),l.host!==zT&&l.host!==h&&Fl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:h,ssl:a,emulatorOptions:r};if(!_i(p,c)&&(n._setSettings(p),r.mockUserToken)){let g,v;if(typeof r.mockUserToken=="string")g=r.mockUserToken,v=zn.MOCK_USER;else{g=MS(r.mockUserToken,n._app?.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new ke(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new zn(b)}n._authCredentials=new HI(new N4(g,v))}}class qs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new qs(this.firestore,e,this._query)}}class Kt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _a(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kt(this.firestore,e,this._key)}toJSON(){return{type:Kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(ud(t,Kt._jsonSchema))return new Kt(e,r||null,new Fe(Ot.fromString(t.referencePath)))}}Kt._jsonSchemaVersion="firestore/documentReference/1.0",Kt._jsonSchema={type:yn("string",Kt._jsonSchemaVersion),referencePath:yn("string")};class _a extends qs{constructor(e,t,r){super(e,t,Rp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new Fe(e))}withConverter(e){return new _a(this.firestore,e,this._path)}}function pt(n,e,...t){if(n=Pt(n),I4("collection","path",e),n instanceof zp){const r=Ot.fromString(e,...t);return H2(r),new _a(n,null,r)}{if(!(n instanceof Kt||n instanceof _a))throw new ke(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ot.fromString(e,...t));return H2(r),new _a(n.firestore,null,r)}}function De(n,e,...t){if(n=Pt(n),arguments.length===1&&(e=lv.newId()),I4("doc","path",e),n instanceof zp){const r=Ot.fromString(e,...t);return $2(r),new Kt(n,null,new Fe(r))}{if(!(n instanceof Kt||n instanceof _a))throw new ke(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ot.fromString(e,...t));return $2(r),new Kt(n.firestore,n instanceof _a?n.converter:null,new Fe(r))}}const IE="AsyncQueue";class jE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ET(this,"async_queue_retry"),this._c=()=>{const r=xy();r&&je(IE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=xy();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=xy();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new bi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!lc(e))throw e;je(IE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,wi("INTERNAL UNHANDLED ERROR: ",DE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Cv.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&Xe(47125,{Pc:DE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function DE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function ME(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1})(n,["next","error","complete"])}class Bs extends zp{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new jE,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jE(e),this._firestoreClient=void 0,await e}}}function UD(n,e){const t=typeof n=="object"?n:J0(),r=typeof n=="string"?n:Yf,a=_p(t,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=IS("firestore");l&&VD(a,...l)}return a}function md(n){if(n._terminated)throw new ke(oe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||zD(n),n._firestoreClient}function zD(n){const e=n._freezeSettings(),t=(function(a,l,c,h){return new d9(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,UT(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new DD(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(n._componentsProvider))}class zr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zr(Ln.fromBase64String(e))}catch(t){throw new ke(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new zr(Ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ud(e,zr._jsonSchema))return zr.fromBase64String(e.bytes)}}zr._jsonSchemaVersion="firestore/bytes/1.0",zr._jsonSchema={type:yn("string",zr._jsonSchemaVersion),bytes:yn("string")};class gd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ke(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Io{constructor(e){this._methodName=e}}class Ls{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ft(this._lat,e._lat)||ft(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ls._jsonSchemaVersion}}static fromJSON(e){if(ud(e,Ls._jsonSchema))return new Ls(e.latitude,e.longitude)}}Ls._jsonSchemaVersion="firestore/geoPoint/1.0",Ls._jsonSchema={type:yn("string",Ls._jsonSchemaVersion),latitude:yn("number"),longitude:yn("number")};class Vs{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Vs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ud(e,Vs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Vs(e.vectorValues);throw new ke(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vs._jsonSchemaVersion="firestore/vectorValue/1.0",Vs._jsonSchema={type:yn("string",Vs._jsonSchemaVersion),vectorValues:yn("object")};const BD=/^__.*__$/;class FD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ja(e,this.data,this.fieldMask,t,this.fieldTransforms):new dd(e,this.data,t,this.fieldTransforms)}}class BT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ja(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function FT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xe(40011,{Ac:n})}}class Bp{constructor(e,t,r,a,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Bp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return np(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(FT(this.Ac)&&BD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class $D{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Lp(e)}Cc(e,t,r,a=!1){return new Bp({Ac:e,methodName:t,Dc:r,path:Pn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function uc(n){const e=n._freezeSettings(),t=Lp(n._databaseId);return new $D(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ov(n,e,t,r,a,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,a);zv("Data must be an object, but it was:",c,r);const h=YT(r,c);let p,g;if(l.merge)p=new Tr(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const b of l.mergeFields){const x=g0(e,b,t);if(!c.contains(x))throw new ke(oe.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);QT(v,x)||v.push(x)}p=new Tr(v),g=c.fieldTransforms.filter((b=>p.covers(b.field)))}else p=null,g=c.fieldTransforms;return new FD(new cr(h),p,g)}class yd extends Io{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yd}}function $T(n,e,t){return new Bp({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Pv extends Io{_toFieldTransform(e){return new Dp(e.path,new qu)}isEqual(e){return e instanceof Pv}}class Lv extends Io{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=$T(this,e,!0),r=this.vc.map((l=>jo(l,t))),a=new Yl(r);return new Dp(e.path,a)}isEqual(e){return e instanceof Lv&&_i(this.vc,e.vc)}}class Vv extends Io{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=$T(this,e,!0),r=this.vc.map((l=>jo(l,t))),a=new Kl(r);return new Dp(e.path,a)}isEqual(e){return e instanceof Vv&&_i(this.vc,e.vc)}}class Uv extends Io{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new Gu(e.serializer,tT(e.serializer,this.Fc));return new Dp(e.path,t)}isEqual(e){return e instanceof Uv&&this.Fc===e.Fc}}function HT(n,e,t,r){const a=n.Cc(1,e,t);zv("Data must be an object, but it was:",a,r);const l=[],c=cr.empty();Ia(r,((p,g)=>{const v=Bv(e,p,t);g=Pt(g);const b=a.yc(v);if(g instanceof yd)l.push(v);else{const x=jo(g,b);x!=null&&(l.push(v),c.set(v,x))}}));const h=new Tr(l);return new BT(c,h,a.fieldTransforms)}function qT(n,e,t,r,a,l){const c=n.Cc(1,e,t),h=[g0(e,r,t)],p=[a];if(l.length%2!=0)throw new ke(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<l.length;x+=2)h.push(g0(e,l[x])),p.push(l[x+1]);const g=[],v=cr.empty();for(let x=h.length-1;x>=0;--x)if(!QT(g,h[x])){const C=h[x];let R=p[x];R=Pt(R);const j=c.yc(C);if(R instanceof yd)g.push(C);else{const A=jo(R,j);A!=null&&(g.push(C),v.set(C,A))}}const b=new Tr(g);return new BT(v,b,c.fieldTransforms)}function GT(n,e,t,r=!1){return jo(t,n.Cc(r?4:3,e))}function jo(n,e){if(KT(n=Pt(n)))return zv("Unsupported field value:",e,n),YT(n,e);if(n instanceof Io)return(function(r,a){if(!FT(a.Ac))throw a.Sc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,a){const l=[];let c=0;for(const h of r){let p=jo(h,a.wc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(n,e)}return(function(r,a){if((r=Pt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return tT(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=zt.fromDate(r);return{timestampValue:Wf(a.serializer,l)}}if(r instanceof zt){const l=new zt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wf(a.serializer,l)}}if(r instanceof Ls)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zr)return{bytesValue:dT(a.serializer,r._byteString)};if(r instanceof Kt){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:yv(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Vs)return(function(c,h){return{mapValue:{fields:{[z4]:{stringValue:B4},[Kf]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw h.Sc("VectorValues must only contain numeric values.");return pv(h.serializer,g)}))}}}}}})(r,a);throw a.Sc(`Unsupported field value: ${Sp(r)}`)})(n,e)}function YT(n,e){const t={};return M4(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ia(n,((r,a)=>{const l=jo(a,e.mc(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function KT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof zt||n instanceof Ls||n instanceof zr||n instanceof Kt||n instanceof Io||n instanceof Vs)}function zv(n,e,t){if(!KT(t)||!j4(t)){const r=Sp(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function g0(n,e,t){if((e=Pt(e))instanceof gd)return e._internalPath;if(typeof e=="string")return Bv(n,e);throw np("Field path arguments must be of type string or ",n,!1,void 0,t)}const HD=new RegExp("[~\\*/\\[\\]]");function Bv(n,e,t){if(e.search(HD)>=0)throw np(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new gd(...e.split("."))._internalPath}catch{throw np(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function np(n,e,t,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${r}`),c&&(p+=` in document ${a}`),p+=")"),new ke(oe.INVALID_ARGUMENT,h+n+p)}function QT(n,e){return n.some((t=>t.isEqual(e)))}class Fv{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Fp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class qD extends Fv{data(){return super.data()}}function Fp(n,e){return typeof e=="string"?Bv(n,e):e instanceof gd?e._internalPath:e._delegate._internalPath}function XT(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ke(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $v{}class $p extends $v{}function ts(n,e,...t){let r=[];e instanceof $v&&r.push(e),r=r.concat(t),(function(l){const c=l.filter((p=>p instanceof Hv)).length,h=l.filter((p=>p instanceof Hp)).length;if(c>1||c>0&&h>0)throw new ke(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)n=a._apply(n);return n}class Hp extends $p{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Hp(e,t,r)}_apply(e){const t=this._parse(e);return WT(e._query,t),new qs(e.firestore,e.converter,a0(e._query,t))}_parse(e){const t=uc(e.firestore);return(function(l,c,h,p,g,v,b){let x;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ke(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){PE(b,v);const R=[];for(const j of b)R.push(OE(p,l,j));x={arrayValue:{values:R}}}else x=OE(p,l,b)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||PE(b,v),x=GT(h,c,b,v==="in"||v==="not-in");return gn.create(g,v,x)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function uo(n,e,t){const r=e,a=Fp("where",n);return Hp._create(a,r,t)}class Hv extends $v{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Hv(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:as.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const h=l.getFlattenedFilters();for(const p of h)WT(c,p),c=a0(c,p)})(e._query,t),new qs(e.firestore,e.converter,a0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class qv extends $p{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new qv(e,t)}_apply(e){const t=(function(a,l,c){if(a.startAt!==null)throw new ke(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ke(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Hu(l,c)})(e._query,this._field,this._direction);return new qs(e.firestore,e.converter,(function(a,l){const c=a.explicitOrderBy.concat([l]);return new ko(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function y0(n,e="asc"){const t=e,r=Fp("orderBy",n);return qv._create(r,t)}class Gv extends $p{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Gv(e,t,r)}_apply(e){return new qs(e.firestore,e.converter,Xf(e._query,this._limit,this._limitType))}}function v0(n){return e9("limit",n),Gv._create("limit",n,"F")}class Yv extends $p{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Yv(e,t,r)}_apply(e){const t=YD(e,this.type,this._docOrFields,this._inclusive);return new qs(e.firestore,e.converter,(function(a,l){return new ko(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)})(e._query,t))}}function GD(...n){return Yv._create("startAfter",n,!1)}function YD(n,e,t,r){if(t[0]=Pt(t[0]),t[0]instanceof Fv)return(function(l,c,h,p,g){if(!p)throw new ke(oe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const v=[];for(const b of Pl(l))if(b.field.isKeyField())v.push(Qf(c,p.key));else{const x=p.data.field(b.field);if(Ap(x))throw new ke(oe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(x===null){const C=b.field.canonicalString();throw new ke(oe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${C}' (used as the orderBy) does not exist.`)}v.push(x)}return new Gl(v,g)})(n._query,n.firestore._databaseId,e,t[0]._document,r);{const a=uc(n.firestore);return(function(c,h,p,g,v,b){const x=c.explicitOrderBy;if(v.length>x.length)throw new ke(oe.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const C=[];for(let R=0;R<v.length;R++){const j=v[R];if(x[R].field.isKeyField()){if(typeof j!="string")throw new ke(oe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof j}`);if(!fv(c)&&j.indexOf("/")!==-1)throw new ke(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${j}' contains a slash.`);const A=c.path.child(Ot.fromString(j));if(!Fe.isDocumentKey(A))throw new ke(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);const B=new Fe(A);C.push(Qf(h,B))}else{const A=GT(p,g,j);C.push(A)}}return new Gl(C,b)})(n._query,n.firestore._databaseId,a,e,t,r)}}function OE(n,e,t){if(typeof(t=Pt(t))=="string"){if(t==="")throw new ke(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fv(e)&&t.indexOf("/")!==-1)throw new ke(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ot.fromString(t));if(!Fe.isDocumentKey(r))throw new ke(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Qf(n,new Fe(r))}if(t instanceof Kt)return Qf(n,t._key);throw new ke(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sp(t)}.`)}function PE(n,e){if(!Array.isArray(n)||n.length===0)throw new ke(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function WT(n,e){const t=(function(a,l){for(const c of a)for(const h of c.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ke(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ke(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class KD{convertValue(e,t="none"){switch(Ca(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ta(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Xe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ia(e,((a,l)=>{r[a]=this.convertValue(l,t)})),r}convertVectorValue(e){const t=e.fields?.[Kf].arrayValue?.values?.map((r=>nn(r.doubleValue)));return new Vs(t)}convertGeoPoint(e){return new Ls(nn(e.latitude),nn(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=kp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Bu(e));default:return null}}convertTimestamp(e){const t=Sa(e);return new zt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ot.fromString(e);Tt(yT(r),9688,{name:e});const a=new Fu(r.get(1),r.get(3)),l=new Fe(r.popFirst(5));return a.isEqual(t)||wi(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function Kv(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Au{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class po extends Fv{constructor(e,t,r,a,l,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Fp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ke(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=po._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}po._jsonSchemaVersion="firestore/documentSnapshot/1.0",po._jsonSchema={type:yn("string",po._jsonSchemaVersion),bundleSource:yn("string","DocumentSnapshot"),bundleName:yn("string"),bundle:yn("string")};class wf extends po{data(e={}){return super.data(e)}}class mo{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Au(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new wf(this._firestore,this._userDataWriter,r.key,r,new Au(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((h=>{const p=new wf(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Au(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const p=new wf(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Au(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,v=-1;return h.type!==0&&(g=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),v=c.indexOf(h.doc.key)),{type:QD(h.type),doc:p,oldIndex:g,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ke(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=mo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=lv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function QD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xe(61501,{type:n})}}function qp(n){n=Qn(n,Kt);const e=Qn(n.firestore,Bs);return PD(md(e),n._key).then((t=>JT(e,n,t)))}mo._jsonSchemaVersion="firestore/querySnapshot/1.0",mo._jsonSchema={type:yn("string",mo._jsonSchemaVersion),bundleSource:yn("string","QuerySnapshot"),bundleName:yn("string"),bundle:yn("string")};class Qv extends KD{constructor(e){super(),this.firestore=e}convertBytes(e){return new zr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,t)}}function So(n){n=Qn(n,qs);const e=Qn(n.firestore,Bs),t=md(e),r=new Qv(e);return XT(n._query),LD(t,n._query).then((a=>new mo(e,r,n,a)))}function Yu(n,e,t){n=Qn(n,Kt);const r=Qn(n.firestore,Bs),a=Kv(n.converter,e,t);return vd(r,[Ov(uc(r),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Xn.none())])}function rt(n,e,t,...r){n=Qn(n,Kt);const a=Qn(n.firestore,Bs),l=uc(a);let c;return c=typeof(e=Pt(e))=="string"||e instanceof gd?qT(l,"updateDoc",n._key,e,t,r):HT(l,"updateDoc",n._key,e),vd(a,[c.toMutation(n._key,Xn.exists(!0))])}function Wl(n){return vd(Qn(n.firestore,Bs),[new Op(n._key,Xn.none())])}function On(n,e){const t=Qn(n.firestore,Bs),r=De(n),a=Kv(n.converter,e);return vd(t,[Ov(uc(n.firestore),"addDoc",r._key,a,n.converter!==null,{}).toMutation(r._key,Xn.exists(!1))]).then((()=>r))}function wr(n,...e){n=Pt(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||ME(e[r])||(t=e[r++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(ME(e[r])){const p=e[r];e[r]=p.next?.bind(p),e[r+1]=p.error?.bind(p),e[r+2]=p.complete?.bind(p)}let l,c,h;if(n instanceof Kt)c=Qn(n.firestore,Bs),h=Rp(n._key.path),l={next:p=>{e[r]&&e[r](JT(c,n,p))},error:e[r+1],complete:e[r+2]};else{const p=Qn(n,qs);c=Qn(p.firestore,Bs),h=p._query;const g=new Qv(c);l={next:v=>{e[r]&&e[r](new mo(c,g,p,v))},error:e[r+1],complete:e[r+2]},XT(n._query)}return(function(g,v,b,x){const C=new Mv(x),R=new Iv(v,C,b);return g.asyncQueue.enqueueAndForget((async()=>kv(await tp(g),R))),()=>{C.Nu(),g.asyncQueue.enqueueAndForget((async()=>Rv(await tp(g),R)))}})(md(c),h,a,l)}function vd(n,e){return(function(r,a){const l=new bi;return r.asyncQueue.enqueueAndForget((async()=>SD(await OD(r),a,l))),l.promise})(md(n),e)}function JT(n,e,t){const r=t.docs.get(e._key),a=new Qv(n);return new po(n,a,e._key,r,new Au(t.hasPendingWrites,t.fromCache),e.converter)}class XD{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=uc(e)}set(e,t,r){this._verifyNotCommitted();const a=wy(e,this._firestore),l=Kv(a.converter,t,r),c=Ov(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,r);return this._mutations.push(c.toMutation(a._key,Xn.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const l=wy(e,this._firestore);let c;return c=typeof(t=Pt(t))=="string"||t instanceof gd?qT(this._dataReader,"WriteBatch.update",l._key,t,r,a):HT(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,Xn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=wy(e,this._firestore);return this._mutations=this._mutations.concat(new Op(t._key,Xn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ke(oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function wy(n,e){if((n=Pt(n)).firestore!==e)throw new ke(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function WD(){return new yd("deleteField")}function xt(){return new Pv("serverTimestamp")}function Gp(...n){return new Lv("arrayUnion",n)}function rp(...n){return new Vv("arrayRemove",n)}function sp(n){return new Uv("increment",n)}function LE(n){return md(n=Qn(n,Bs)),new XD(n,(e=>vd(n,e)))}(function(e,t=!0){(function(a){ac=a})(Co),bo(new Ea("firestore",((r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),h=new Bs(new qI(r.getProvider("auth-internal")),new KI(c,r.getProvider("app-check-internal")),(function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ke(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fu(g.options.projectId,v)})(c,a),c);return l={useFetchStreams:t,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),js(U2,z2,e),js(U2,z2,"esm2020")})();const ZT="firebasestorage.googleapis.com",JD="storageBucket",ZD=120*1e3,e8=600*1e3;class Gs extends $s{constructor(e,t,r=0){super(Sy(e),`Firebase Storage: ${t} (${Sy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Gs.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Sy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Fs;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Fs||(Fs={}));function Sy(n){return"storage/"+n}function t8(){const n="An unknown error occurred, please check the error payload for server response.";return new Gs(Fs.UNKNOWN,n)}function n8(){return new Gs(Fs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function r8(){return new Gs(Fs.CANCELED,"User canceled the upload/download.")}function s8(n){return new Gs(Fs.INVALID_URL,"Invalid URL '"+n+"'.")}function i8(n){return new Gs(Fs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function VE(n){return new Gs(Fs.INVALID_ARGUMENT,n)}function eC(){return new Gs(Fs.APP_DELETED,"The Firebase app was deleted.")}function a8(n){return new Gs(Fs.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class rs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=rs.makeFromUrl(e,t)}catch{return new rs(e,"")}if(r.path==="")return r;throw i8(e)}static makeFromUrl(e,t){let r=null;const a="([A-Za-z0-9.\\-_]+)";function l(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}const c="(/(.*))?$",h=new RegExp("^gs://"+a+c,"i"),p={bucket:1,path:3};function g(V){V.path_=decodeURIComponent(V.path)}const v="v[A-Za-z0-9_]+",b=t.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",C=new RegExp(`^https?://${b}/${v}/b/${a}/o${x}`,"i"),R={bucket:1,path:3},j=t===ZT?"(?:storage.googleapis.com|storage.cloud.google.com)":t,A="([^?#]*)",B=new RegExp(`^https?://${j}/${a}/${A}`,"i"),I=[{regex:h,indices:p,postModify:l},{regex:C,indices:R,postModify:g},{regex:B,indices:{bucket:1,path:2},postModify:g}];for(let V=0;V<I.length;V++){const z=I[V],F=z.regex.exec(e);if(F){const w=F[z.indices.bucket];let S=F[z.indices.path];S||(S=""),r=new rs(w,S),z.postModify(r);break}}if(r==null)throw s8(e);return r}}class o8{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function l8(n,e,t){let r=1,a=null,l=null,c=!1,h=0;function p(){return h===2}let g=!1;function v(...A){g||(g=!0,e.apply(null,A))}function b(A){a=setTimeout(()=>{a=null,n(C,p())},A)}function x(){l&&clearTimeout(l)}function C(A,...B){if(g){x();return}if(A){x(),v.call(null,A,...B);return}if(p()||c){x(),v.call(null,A,...B);return}r<64&&(r*=2);let I;h===1?(h=2,I=0):I=(r+Math.random())*1e3,b(I)}let R=!1;function j(A){R||(R=!0,x(),!g&&(a!==null?(A||(h=2),clearTimeout(a),b(0)):A||(h=1)))}return b(0),l=setTimeout(()=>{c=!0,j(!0)},t),j}function c8(n){n(!1)}function u8(n){return n!==void 0}function UE(n,e,t,r){if(r<e)throw VE(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw VE(`Invalid value for '${n}'. Expected ${t} or less.`)}function d8(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const a=e(r)+"="+e(n[r]);t=t+a+"&"}return t=t.slice(0,-1),t}var ip;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(ip||(ip={}));function h8(n,e){const t=n>=500&&n<600,a=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||a||l}class f8{constructor(e,t,r,a,l,c,h,p,g,v,b,x=!0,C=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=p,this.timeout_=g,this.progressCallback_=v,this.connectionFactory_=b,this.retry=x,this.isUsingEmulator=C,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,j)=>{this.resolve_=R,this.reject_=j,this.start_()})}start_(){const e=(r,a)=>{if(a){r(!1,new ef(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=h=>{const p=h.loaded,g=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,g)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const h=l.getErrorCode()===ip.NO_ERROR,p=l.getStatus();if(!h||h8(p,this.additionalRetryCodes_)&&this.retry){const v=l.getErrorCode()===ip.ABORT;r(!1,new ef(!1,null,v));return}const g=this.successCodes_.indexOf(p)!==-1;r(!0,new ef(g,l))})},t=(r,a)=>{const l=this.resolve_,c=this.reject_,h=a.connection;if(a.wasSuccessCode)try{const p=this.callback_(h,h.getResponse());u8(p)?l(p):l()}catch(p){c(p)}else if(h!==null){const p=t8();p.serverResponse=h.getErrorText(),this.errorCallback_?c(this.errorCallback_(h,p)):c(p)}else if(a.canceled){const p=this.appDelete_?eC():r8();c(p)}else{const p=n8();c(p)}};this.canceled_?t(!1,new ef(!1,null,!0)):this.backoffId_=l8(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&c8(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ef{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function p8(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function m8(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function g8(n,e){e&&(n["X-Firebase-GMPID"]=e)}function y8(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function v8(n,e,t,r,a,l,c=!0,h=!1){const p=d8(n.urlParams),g=n.url+p,v=Object.assign({},n.headers);return g8(v,e),p8(v,t),m8(v,l),y8(v,r),new f8(g,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a,c,h)}function b8(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function _8(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}class ap{constructor(e,t){this._service=e,t instanceof rs?this._location=t:this._location=rs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ap(e,t)}get root(){const e=new rs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return _8(this._location.path)}get storage(){return this._service}get parent(){const e=b8(this._location.path);if(e===null)return null;const t=new rs(this._location.bucket,e);return new ap(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw a8(e)}}function zE(n,e){const t=e?.[JD];return t==null?null:rs.makeFromBucketSpec(t,n)}function x8(n,e,t,r={}){n.host=`${e}:${t}`;const a=To(e);a&&(K0(`https://${n.host}/b`),Q0("Storage",!0)),n._isUsingEmulator=!0,n._protocol=a?"https":"http";const{mockUserToken:l}=r;l&&(n._overrideAuthToken=typeof l=="string"?l:MS(l,n.app.options.projectId))}class E8{constructor(e,t,r,a,l,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=c,this._bucket=null,this._host=ZT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ZD,this._maxUploadRetryTime=e8,this._requests=new Set,a!=null?this._bucket=rs.makeFromBucketSpec(a,this._host):this._bucket=zE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=rs.makeFromBucketSpec(this._url,e):this._bucket=zE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){UE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){UE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Sr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ap(this,e)}_makeRequest(e,t,r,a,l=!0){if(this._deleted)return new o8(eC());{const c=v8(e,this._appId,r,a,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[r,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,a).getPromise()}}const BE="@firebase/storage",FE="0.14.0";const tC="storage";function w8(n=J0(),e){n=Pt(n);const r=_p(n,tC).getImmediate({identifier:e}),a=IS("storage");return a&&S8(r,...a),r}function S8(n,e,t,r={}){x8(n,e,t,r)}function T8(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new E8(t,r,a,e,Co)}function C8(){bo(new Ea(tC,T8,"PUBLIC").setMultipleInstances(!0)),js(BE,FE,""),js(BE,FE,"esm2020")}C8();const A8={apiKey:"AIzaSyAaaBO8Nw49Xsyo4QG1ropL0UYWeY2zrlU",authDomain:"meydan-academy.firebaseapp.com",projectId:"meydan-academy",storageBucket:"meydan-academy.firebasestorage.app",messagingSenderId:"267697346186",appId:"1:267697346186:web:d53b7d91fe0fabf8d37f73"},Xv=LS(A8),Nl=BI(Xv),ge=UD(Xv);w8(Xv);const nC=P.createContext({}),Cr=()=>{const n=P.useContext(nC);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},k8=({children:n})=>{const[e,t]=P.useState(null),[r,a]=P.useState(null),[l,c]=P.useState(!0),h=async(R,j=!0)=>{if(R)try{await Yu(De(ge,"users",R),{isOnline:j,lastSeen:xt()},{merge:!0})}catch(A){console.error("Presence update failed:",A)}};P.useEffect(()=>R5(Nl,async j=>{if(t(j),j){const A=wr(De(ge,"users",j.uid),I=>{I.exists()&&a({id:I.id,...I.data()})});await h(j.uid);const B=setInterval(()=>{h(j.uid)},120*1e3),G=()=>{De(ge,"users",j.uid),navigator.sendBeacon(`https://firestore.googleapis.com/v1/projects/meydan-academy/databases/(default)/documents/users/${j.uid}`,JSON.stringify({fields:{lastSeen:{timestampValue:new Date().toISOString()}}}))};return window.addEventListener("beforeunload",G),c(!1),()=>{A(),clearInterval(B),window.removeEventListener("beforeunload",G)}}else a(null),c(!1)}),[]);const C={currentUser:e,userProfile:r,register:async(R,j,A)=>{const B=await w5(Nl,R,j);try{await k2(B.user)}catch(G){console.error("Error sending verification email:",G)}return await Yu(De(ge,"users",B.user.uid),{displayName:A,email:R,role:"member",createdAt:xt(),isOnline:!0,lastSeen:xt()}),B},login:async(R,j)=>{const A=await S5(Nl,R,j);return await h(A.user.uid,!0),A},logout:async()=>{if(e)try{await h(e.uid,!1)}catch(R){console.log("Final presence update failed (expected):",R.code)}return N5(Nl)},resetPassword:R=>h4(Nl,R),resendVerification:()=>{if(e)return k2(e)}};return d.jsx(nC.Provider,{value:C,children:!l&&n})};let Ty=null;const R8=()=>(Ty||(Ty=new(window.AudioContext||window.webkitAudioContext)),Ty),b0=()=>{try{const n=R8(),e=n.currentTime,t=n.createOscillator(),r=n.createGain();t.connect(r),r.connect(n.destination),t.frequency.value=880,t.type="sine",r.gain.setValueAtTime(0,e),r.gain.linearRampToValueAtTime(.2,e+.01),r.gain.linearRampToValueAtTime(0,e+.1),t.start(e),t.stop(e+.1);const a=n.createOscillator(),l=n.createGain();a.connect(l),l.connect(n.destination),a.frequency.value=660,a.type="sine",l.gain.setValueAtTime(0,e+.08),l.gain.linearRampToValueAtTime(.2,e+.09),l.gain.linearRampToValueAtTime(0,e+.25),a.start(e+.08),a.stop(e+.25)}catch(n){console.error("Error playing notification sound:",n)}},N8=(n,e)=>!n||!e?!1:/@everyone\b/i.test(n)?!0:new RegExp(`@${e}\\b`,"i").test(n),rC=P.createContext(),bd=()=>{const n=P.useContext(rC);if(!n)throw new Error("useData must be used within DataProvider");return n},I8=({children:n})=>{const{currentUser:e}=Cr(),[t,r]=P.useState([]),[a,l]=P.useState([]),[c,h]=P.useState(null),[p,g]=P.useState([]),[v,b]=P.useState(null),[x,C]=P.useState({}),[R,j]=P.useState([]),A=P.useRef({}),B=P.useRef(!0);P.useEffect(()=>{if(r([]),!c)return;const z=wr(pt(ge,"servers",c,"members"),async S=>{const k=[],D=[],M=new Map;if(S.docChanges().forEach(U=>{const O=U.doc.data();U.type==="added"&&(k.push(O.userId),M.set(O.userId,O.role)),U.type==="removed"&&D.push(O.userId),U.type==="modified"&&M.set(O.userId,O.role)}),t.length===0&&k.length>0){const U=new Map;S.docs.forEach(Ee=>{U.set(Ee.data().userId,Ee.data().role||"member")});const O=Array.from(U.keys()),be=[];for(let Ee=0;Ee<O.length;Ee+=10){const $=O.slice(Ee,Ee+10),K=ts(pt(ge,"users"),uo("__name__","in",$));(await So(K)).forEach(Te=>{be.push({id:Te.id,...Te.data(),serverRole:U.get(Te.id)})})}r(be);return}if(k.length>0&&t.length>0){const U=[];for(let O=0;O<k.length;O+=10){const be=k.slice(O,O+10),Ee=ts(pt(ge,"users"),uo("__name__","in",be));(await So(Ee)).forEach(K=>{U.push({id:K.id,...K.data(),serverRole:M.get(K.id)})})}r(O=>[...O,...U])}D.length>0&&r(U=>U.filter(O=>!D.includes(O.id))),S.docChanges().some(U=>U.type==="modified")&&r(U=>U.map(O=>M.has(O.id)?{...O,serverRole:M.get(O.id)}:O))}),F=ts(pt(ge,"users"),uo("servers","array-contains",c),uo("isOnline","==",!0)),w=wr(F,S=>{r(k=>{const D=new Map;return S.forEach(M=>{const U=M.data();D.set(M.id,{presence:U.presence,isOnline:U.isOnline,status:U.status,lastSeen:U.lastSeen,displayName:U.displayName,photoUrl:U.photoUrl||U.photoURL,bio:U.bio,role:U.role})}),k.map(M=>{const U=D.get(M.id);return U?{...M,...U}:{...M,isOnline:!1,presence:"offline",status:null}})})});return()=>{z(),w()}},[c]);const[G,I]=P.useState([]);P.useEffect(()=>{if(!e){l([]),h(null),I([]);return}return wr(De(ge,"users",e.uid),F=>{if(!F.exists())return;const w=F.data(),S=w?.servers||[],k=w?.unreadMentions||{};Object.keys(k).forEach(D=>{const M=A.current[D]||0;(k[D]?.count||0)>M&&D!==c&&b0()}),A.current=Object.fromEntries(Object.entries(k).map(([D,M])=>[D,M.count])),C(k),I(D=>JSON.stringify(D)!==JSON.stringify(S)?S:D),h(D=>{const M=w?.currentServer;return D?D==="home"||S.includes(D)?D:S.length>0?S[0]:"home":M&&(M==="home"||S.includes(M))?M:S.length>0?S[0]:"home"})})},[e]),P.useEffect(()=>{if(l(F=>F.filter(w=>G.includes(w.id))),G.length===0){l([]);return}const z=[];for(let F=0;F<G.length;F+=10){const w=G.slice(F,F+10),S=ts(pt(ge,"servers"),uo("__name__","in",w)),k=wr(S,D=>{const M=[];D.forEach(U=>{M.push({id:U.id,...U.data()})}),l(U=>[...U.filter(Ee=>!w.includes(Ee.id)),...M].sort((Ee,$)=>G.indexOf(Ee.id)-G.indexOf($.id)))});z.push(k)}return()=>{z.forEach(F=>F())}},[G]),P.useEffect(()=>{if(!e){j([]);return}B.current=!0;const z=ts(pt(ge,"dms"),uo("participants","array-contains",e.uid)),F=wr(z,w=>{const S=[];w.forEach(D=>{S.push({id:D.id,...D.data()})}),S.sort((D,M)=>{const U=D.updatedAt?.toMillis()||0;return(M.updatedAt?.toMillis()||0)-U});const k=S.filter(D=>!D.hiddenFor||!D.hiddenFor.includes(e.uid));j(k),B.current||w.docChanges().forEach(D=>{if(D.type==="modified"||D.type==="added"){const M=D.doc.data();if(M.lastMessage&&M.lastMessage.userId!==e.uid){const U=Date.now(),O=M.lastMessage.timestamp?.toMillis()||0;U-O<3e4&&b0()}}}),B.current=!1});return()=>F()},[e]),P.useEffect(()=>{if(!c){g([]),b(null);return}const z=a.find(w=>w.id===c);b(z||null);const F=wr(pt(ge,"servers",c,"channels"),w=>{const S=[];w.forEach(k=>{S.push({id:k.id,...k.data()})}),g(S.sort((k,D)=>k.position-D.position))});return()=>{F()}},[c,a]);const V={users:t,servers:a,currentServer:c,setCurrentServer:h,channels:p,server:v,dms:R,unreadMentions:x};return d.jsx(rC.Provider,{value:V,children:n})};var sC={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},$E=de.createContext&&de.createContext(sC),j8=["attr","size","title"];function D8(n,e){if(n==null)return{};var t=M8(n,e),r,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(a=0;a<l.length;a++)r=l[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function M8(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function op(){return op=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},op.apply(this,arguments)}function HE(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,r)}return t}function lp(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?HE(Object(t),!0).forEach(function(r){O8(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):HE(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function O8(n,e,t){return e=P8(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function P8(n){var e=L8(n,"string");return typeof e=="symbol"?e:e+""}function L8(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function iC(n){return n&&n.map((e,t)=>de.createElement(e.tag,lp({key:t},e.attr),iC(e.child)))}function Pe(n){return e=>de.createElement(V8,op({attr:lp({},n.attr)},e),iC(n.child))}function V8(n){var e=t=>{var{attr:r,size:a,title:l}=n,c=D8(n,j8),h=a||t.size||"1em",p;return t.className&&(p=t.className),n.className&&(p=(p?p+" ":"")+n.className),de.createElement("svg",op({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,c,{className:p,style:lp(lp({color:n.color||t.color},t.style),n.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),l&&de.createElement("title",null,l),n.children)};return $E!==void 0?de.createElement($E.Consumer,null,t=>e(t)):e(sC)}function U8(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6z"},child:[]},{tag:"path",attr:{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12zm0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17z"},child:[]}]})(n)}function aC(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m17.6 9.48 1.84-3.18c.16-.31.04-.69-.26-.85a.637.637 0 0 0-.83.22l-1.88 3.24a11.463 11.463 0 0 0-8.94 0L5.65 5.67a.643.643 0 0 0-.87-.2c-.28.18-.37.54-.22.83L6.4 9.48A10.78 10.78 0 0 0 1 18h22a10.78 10.78 0 0 0-5.4-8.52zM7 15.25a1.25 1.25 0 1 1 0-2.5 1.25 1.25 0 0 1 0 2.5zm10 0a1.25 1.25 0 1 1 0-2.5 1.25 1.25 0 0 1 0 2.5z"},child:[]}]})(n)}function z8(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"},child:[]}]})(n)}function go(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(n)}function B8(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10.09 15.59 11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5a2 2 0 0 0-2 2v4h2V5h14v14H5v-4H3v4a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"},child:[]}]})(n)}function F8(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 3a9 9 0 0 0-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42A8.954 8.954 0 0 0 13 21a9 9 0 0 0 0-18zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"},child:[]}]})(n)}function Wv(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"},child:[]}]})(n)}function $8(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"},child:[]}]})(n)}function H8(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"},child:[]}]})(n)}function Jv(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 19H5V5h7V3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"},child:[]}]})(n)}function oC(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"},child:[]}]})(n)}function Zv(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(n)}function q8(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"},child:[]}]})(n)}function G8(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"},child:[]}]})(n)}function _0(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28zm-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18l5.98 5.99zM4.27 3 3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73 4.27 3z"},child:[]}]})(n)}function qE(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"},child:[]}]})(n)}function Y8(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM9.5 16.5v-9l7 4.5-7 4.5z"},child:[]}]})(n)}function K8(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 6h12v12H6z"},child:[]}]})(n)}function x0(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m21 6.5-4 4V7c0-.55-.45-1-1-1H9.82L21 17.18V6.5zM3.27 2 2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.54-.18L19.73 21 21 19.73 3.27 2z"},child:[]}]})(n)}function cp(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"},child:[]}]})(n)}function Q8(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 9v6h4l5 5V4l-5 5H7z"},child:[]}]})(n)}function GE(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16.5 12A4.5 4.5 0 0 0 14 7.97v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51A8.796 8.796 0 0 0 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06a8.99 8.99 0 0 0 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4 9.91 6.09 12 8.18V4z"},child:[]}]})(n)}function YE(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3A4.5 4.5 0 0 0 14 7.97v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"},child:[]}]})(n)}function Cy(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.7.28-.28 0-.53-.11-.71-.29L.29 13.08a.956.956 0 0 1-.29-.7c0-.28.11-.53.29-.71C3.34 8.78 7.46 7 12 7s8.66 1.78 11.71 4.67c.18.18.29.43.29.71 0 .28-.11.53-.29.71l-2.48 2.48c-.18.18-.43.29-.71.29-.27 0-.52-.11-.7-.28a11.27 11.27 0 0 0-2.67-1.85.996.996 0 0 1-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z"},child:[]}]})(n)}function X8(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20.01 15.38c-1.23 0-2.42-.2-3.53-.56a.977.977 0 0 0-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"},child:[]}]})(n)}function W8(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"},child:[]}]})(n)}function J8(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"},child:[]}]})(n)}function Z8(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M20 18c1.1 0 1.99-.9 1.99-2L22 6a2 2 0 0 0-2-2H4c-1.11 0-2 .89-2 2v10a2 2 0 0 0 2 2H0v2h24v-2h-4zm-7-3.53v-2.19c-2.78 0-4.61.85-6 2.72.56-2.67 2.11-5.33 6-5.87V7l4 3.73-4 3.74z"},child:[]}]})(n)}function eM(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m21.22 18.02 2 2H24v-2h-2.78zm.77-2 .01-10a2 2 0 0 0-2-2H7.22l5.23 5.23c.18-.04.36-.07.55-.1V7.02l4 3.73-1.58 1.47 5.54 5.54c.61-.33 1.03-.99 1.03-1.74zM2.39 1.73 1.11 3l1.54 1.54c-.4.36-.65.89-.65 1.48v10a2 2 0 0 0 2 2H0v2h18.13l2.71 2.71 1.27-1.27L2.39 1.73zM7 15.02c.31-1.48.92-2.95 2.07-4.06l1.59 1.59c-1.54.38-2.7 1.18-3.66 2.47z"},child:[]}]})(n)}function KE(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"},child:[]}]})(n)}function Pu(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(n)}function tM(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(n)}function Vl(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M16 9V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3z"},child:[]}]})(n)}function nM(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"},child:[]}]})(n)}function QE(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"},child:[]}]})(n)}function lC(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 10V8h-4V4h-2v4h-4V4H8v4H4v2h4v4H4v2h4v4h2v-4h4v4h2v-4h4v-2h-4v-4h4zm-6 4h-4v-4h4v4z"},child:[]}]})(n)}function rM(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 9H4v2h16V9zM4 15h16v-2H4v2z"},child:[]}]})(n)}function sM(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"},child:[]}]})(n)}function E0(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zm0-10h4v6h6v-6h4l-7-7-7 7z"},child:[]}]})(n)}function iM(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"},child:[]}]})(n)}function aM(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 7v2.99s-1.99.01-2 0V7h-3s.01-1.99 0-2h3V2h2v3h3v2h-3zm-3 4V8h-3V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8h-3zM5 19l3-4 2 3 3-4 4 5H5z"},child:[]}]})(n)}function oM(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2z"},child:[]}]})(n)}function Ul(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},child:[]}]})(n)}function XE(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"},child:[]}]})(n)}function lM(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"},child:[]}]})(n)}function cM(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 11h-1V3c0-1.1-.9-2-2-2h-2c-1.1 0-2 .9-2 2v8H8c-2.76 0-5 2.24-5 5v7h18v-7c0-2.76-2.24-5-5-5zm3 10h-2v-3c0-.55-.45-1-1-1s-1 .45-1 1v3h-2v-3c0-.55-.45-1-1-1s-1 .45-1 1v3H9v-3c0-.55-.45-1-1-1s-1 .45-1 1v3H5v-5c0-1.65 1.35-3 3-3h8c1.65 0 3 1.35 3 3v5z"},child:[]}]})(n)}function Ku(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"},child:[]}]})(n)}function Hn(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(n)}function uM(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"},child:[]}]})(n)}function dM(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"},child:[]}]})(n)}function WE(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"},child:[]}]})(n)}function hM(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(n)}function fM(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"},child:[]}]})(n)}function pM(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 1.01 7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14zm-1-6h-3V8h-2v5H8l4 4 4-4z"},child:[]}]})(n)}function JE(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 9V7h-2V2.84A9.929 9.929 0 0 0 11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12c0-1.05-.17-2.05-.47-3H18zm-2.5-1c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5.67-1.5 1.5-1.5zm-7 0c.83 0 1.5.67 1.5 1.5S9.33 11 8.5 11 7 10.33 7 9.5 7.67 8 8.5 8zm3.5 9.5c-2.33 0-4.31-1.46-5.11-3.5h10.22c-.8 2.04-2.78 3.5-5.11 3.5zM22 3h2v2h-2v2h-2V5h-2V3h2V1h2v2z"},child:[]}]})(n)}function mM(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM8.5 8c.83 0 1.5.67 1.5 1.5S9.33 11 8.5 11 7 10.33 7 9.5 7.67 8 8.5 8zM12 18c-2.28 0-4.22-1.66-5-4h10c-.78 2.34-2.72 4-5 4zm3.5-7c-.83 0-1.5-.67-1.5-1.5S14.67 8 15.5 8s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"},child:[]}]})(n)}function e1(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"},child:[]}]})(n)}function gM(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"},child:[]}]})(n)}function yM(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"},child:[]}]})(n)}function t1(n){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"},child:[]}]})(n)}const cC=P.createContext(),Ys=()=>{const n=P.useContext(cC);if(!n)throw new Error("useToast must be used within ToastProvider");return n},vM=({children:n})=>{const[e,t]=P.useState([]),r=P.useCallback((g,v="info")=>{const b=Date.now();t(x=>[...x,{id:b,message:g,type:v}]),setTimeout(()=>{t(x=>x.filter(C=>C.id!==b))},4e3)},[]),a=P.useCallback(g=>{t(v=>v.filter(b=>b.id!==g))},[]),l=P.useCallback(g=>r(g,"success"),[r]),c=P.useCallback(g=>r(g,"error"),[r]),h=P.useCallback(g=>r(g,"info"),[r]),p=P.useCallback(g=>r(g,"warning"),[r]);return d.jsxs(cC.Provider,{value:{success:l,error:c,info:h,warning:p},children:[n,d.jsx(bM,{toasts:e,removeToast:a})]})},bM=({toasts:n,removeToast:e})=>d.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:n.map(t=>d.jsx(_M,{toast:t,onClose:()=>e(t.id)},t.id))}),_M=({toast:n,onClose:e})=>{const t={success:d.jsx(z8,{size:20}),error:d.jsx(q8,{size:20}),warning:d.jsx(G8,{size:20}),info:d.jsx(Wv,{size:20})},r={success:"bg-green-600 border-green-500",error:"bg-red-600 border-red-500",warning:"bg-yellow-600 border-yellow-500",info:"bg-blue-600 border-blue-500"};return d.jsxs("div",{className:`${r[n.type]} border-l-4 text-white px-4 py-3 rounded-lg shadow-lg 
                  flex items-center gap-3 min-w-[300px] max-w-md animate-slide-in`,children:[d.jsx("div",{className:"flex-shrink-0",children:t[n.type]}),d.jsx("div",{className:"flex-1 text-sm font-medium",children:n.message}),d.jsx("button",{onClick:e,className:"flex-shrink-0 hover:bg-white/20 rounded p-1 transition-colors",children:d.jsx(Hn,{size:18})})]})};function uC(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var a=n.length;for(e=0;e<a;e++)n[e]&&(t=uC(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function xM(){for(var n,e,t=0,r="",a=arguments.length;t<a;t++)(n=arguments[t])&&(e=uC(n))&&(r&&(r+=" "),r+=e);return r}const EM=(n,e)=>{const t=new Array(n.length+e.length);for(let r=0;r<n.length;r++)t[r]=n[r];for(let r=0;r<e.length;r++)t[n.length+r]=e[r];return t},wM=(n,e)=>({classGroupId:n,validator:e}),dC=(n=new Map,e=null,t)=>({nextPart:n,validators:e,classGroupId:t}),up="-",ZE=[],SM="arbitrary..",TM=n=>{const e=AM(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:c=>{if(c.startsWith("[")&&c.endsWith("]"))return CM(c);const h=c.split(up),p=h[0]===""&&h.length>1?1:0;return hC(h,p,e)},getConflictingClassGroupIds:(c,h)=>{if(h){const p=r[c],g=t[c];return p?g?EM(g,p):p:g||ZE}return t[c]||ZE}}},hC=(n,e,t)=>{if(n.length-e===0)return t.classGroupId;const a=n[e],l=t.nextPart.get(a);if(l){const g=hC(n,e+1,l);if(g)return g}const c=t.validators;if(c===null)return;const h=e===0?n.join(up):n.slice(e).join(up),p=c.length;for(let g=0;g<p;g++){const v=c[g];if(v.validator(h))return v.classGroupId}},CM=n=>n.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=n.slice(1,-1),t=e.indexOf(":"),r=e.slice(0,t);return r?SM+r:void 0})(),AM=n=>{const{theme:e,classGroups:t}=n;return kM(t,e)},kM=(n,e)=>{const t=dC();for(const r in n){const a=n[r];n1(a,t,r,e)}return t},n1=(n,e,t,r)=>{const a=n.length;for(let l=0;l<a;l++){const c=n[l];RM(c,e,t,r)}},RM=(n,e,t,r)=>{if(typeof n=="string"){NM(n,e,t);return}if(typeof n=="function"){IM(n,e,t,r);return}jM(n,e,t,r)},NM=(n,e,t)=>{const r=n===""?e:fC(e,n);r.classGroupId=t},IM=(n,e,t,r)=>{if(DM(n)){n1(n(r),e,t,r);return}e.validators===null&&(e.validators=[]),e.validators.push(wM(t,n))},jM=(n,e,t,r)=>{const a=Object.entries(n),l=a.length;for(let c=0;c<l;c++){const[h,p]=a[c];n1(p,fC(e,h),t,r)}},fC=(n,e)=>{let t=n;const r=e.split(up),a=r.length;for(let l=0;l<a;l++){const c=r[l];let h=t.nextPart.get(c);h||(h=dC(),t.nextPart.set(c,h)),t=h}return t},DM=n=>"isThemeGetter"in n&&n.isThemeGetter===!0,MM=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=Object.create(null),r=Object.create(null);const a=(l,c)=>{t[l]=c,e++,e>n&&(e=0,r=t,t=Object.create(null))};return{get(l){let c=t[l];if(c!==void 0)return c;if((c=r[l])!==void 0)return a(l,c),c},set(l,c){l in t?t[l]=c:a(l,c)}}},w0="!",ew=":",OM=[],tw=(n,e,t,r,a)=>({modifiers:n,hasImportantModifier:e,baseClassName:t,maybePostfixModifierPosition:r,isExternal:a}),PM=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=a=>{const l=[];let c=0,h=0,p=0,g;const v=a.length;for(let j=0;j<v;j++){const A=a[j];if(c===0&&h===0){if(A===ew){l.push(a.slice(p,j)),p=j+1;continue}if(A==="/"){g=j;continue}}A==="["?c++:A==="]"?c--:A==="("?h++:A===")"&&h--}const b=l.length===0?a:a.slice(p);let x=b,C=!1;b.endsWith(w0)?(x=b.slice(0,-1),C=!0):b.startsWith(w0)&&(x=b.slice(1),C=!0);const R=g&&g>p?g-p:void 0;return tw(l,C,x,R)};if(e){const a=e+ew,l=r;r=c=>c.startsWith(a)?l(c.slice(a.length)):tw(OM,!1,c,void 0,!0)}if(t){const a=r;r=l=>t({className:l,parseClassName:a})}return r},LM=n=>{const e=new Map;return n.orderSensitiveModifiers.forEach((t,r)=>{e.set(t,1e6+r)}),t=>{const r=[];let a=[];for(let l=0;l<t.length;l++){const c=t[l],h=c[0]==="[",p=e.has(c);h||p?(a.length>0&&(a.sort(),r.push(...a),a=[]),r.push(c)):a.push(c)}return a.length>0&&(a.sort(),r.push(...a)),r}},VM=n=>({cache:MM(n.cacheSize),parseClassName:PM(n),sortModifiers:LM(n),...TM(n)}),UM=/\s+/,zM=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:l}=e,c=[],h=n.trim().split(UM);let p="";for(let g=h.length-1;g>=0;g-=1){const v=h[g],{isExternal:b,modifiers:x,hasImportantModifier:C,baseClassName:R,maybePostfixModifierPosition:j}=t(v);if(b){p=v+(p.length>0?" "+p:p);continue}let A=!!j,B=r(A?R.substring(0,j):R);if(!B){if(!A){p=v+(p.length>0?" "+p:p);continue}if(B=r(R),!B){p=v+(p.length>0?" "+p:p);continue}A=!1}const G=x.length===0?"":x.length===1?x[0]:l(x).join(":"),I=C?G+w0:G,V=I+B;if(c.indexOf(V)>-1)continue;c.push(V);const z=a(B,A);for(let F=0;F<z.length;++F){const w=z[F];c.push(I+w)}p=v+(p.length>0?" "+p:p)}return p},BM=(...n)=>{let e=0,t,r,a="";for(;e<n.length;)(t=n[e++])&&(r=pC(t))&&(a&&(a+=" "),a+=r);return a},pC=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=pC(n[r]))&&(t&&(t+=" "),t+=e);return t},FM=(n,...e)=>{let t,r,a,l;const c=p=>{const g=e.reduce((v,b)=>b(v),n());return t=VM(g),r=t.cache.get,a=t.cache.set,l=h,h(p)},h=p=>{const g=r(p);if(g)return g;const v=zM(p,t);return a(p,v),v};return l=c,(...p)=>l(BM(...p))},$M=[],bn=n=>{const e=t=>t[n]||$M;return e.isThemeGetter=!0,e},mC=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,gC=/^\((?:(\w[\w-]*):)?(.+)\)$/i,HM=/^\d+\/\d+$/,qM=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,GM=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,YM=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,KM=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,QM=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,wl=n=>HM.test(n),at=n=>!!n&&!Number.isNaN(Number(n)),aa=n=>!!n&&Number.isInteger(Number(n)),Ay=n=>n.endsWith("%")&&at(n.slice(0,-1)),fi=n=>qM.test(n),XM=()=>!0,WM=n=>GM.test(n)&&!YM.test(n),yC=()=>!1,JM=n=>KM.test(n),ZM=n=>QM.test(n),eO=n=>!Le(n)&&!Ve(n),tO=n=>dc(n,_C,yC),Le=n=>mC.test(n),oo=n=>dc(n,xC,WM),ky=n=>dc(n,aO,at),nw=n=>dc(n,vC,yC),nO=n=>dc(n,bC,ZM),tf=n=>dc(n,EC,JM),Ve=n=>gC.test(n),gu=n=>hc(n,xC),rO=n=>hc(n,oO),rw=n=>hc(n,vC),sO=n=>hc(n,_C),iO=n=>hc(n,bC),nf=n=>hc(n,EC,!0),dc=(n,e,t)=>{const r=mC.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},hc=(n,e,t=!1)=>{const r=gC.exec(n);return r?r[1]?e(r[1]):t:!1},vC=n=>n==="position"||n==="percentage",bC=n=>n==="image"||n==="url",_C=n=>n==="length"||n==="size"||n==="bg-size",xC=n=>n==="length",aO=n=>n==="number",oO=n=>n==="family-name",EC=n=>n==="shadow",lO=()=>{const n=bn("color"),e=bn("font"),t=bn("text"),r=bn("font-weight"),a=bn("tracking"),l=bn("leading"),c=bn("breakpoint"),h=bn("container"),p=bn("spacing"),g=bn("radius"),v=bn("shadow"),b=bn("inset-shadow"),x=bn("text-shadow"),C=bn("drop-shadow"),R=bn("blur"),j=bn("perspective"),A=bn("aspect"),B=bn("ease"),G=bn("animate"),I=()=>["auto","avoid","all","avoid-page","page","left","right","column"],V=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],z=()=>[...V(),Ve,Le],F=()=>["auto","hidden","clip","visible","scroll"],w=()=>["auto","contain","none"],S=()=>[Ve,Le,p],k=()=>[wl,"full","auto",...S()],D=()=>[aa,"none","subgrid",Ve,Le],M=()=>["auto",{span:["full",aa,Ve,Le]},aa,Ve,Le],U=()=>[aa,"auto",Ve,Le],O=()=>["auto","min","max","fr",Ve,Le],be=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Ee=()=>["start","end","center","stretch","center-safe","end-safe"],$=()=>["auto",...S()],K=()=>[wl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...S()],W=()=>[n,Ve,Le],Te=()=>[...V(),rw,nw,{position:[Ve,Le]}],Re=()=>["no-repeat",{repeat:["","x","y","space","round"]}],H=()=>["auto","cover","contain",sO,tO,{size:[Ve,Le]}],J=()=>[Ay,gu,oo],ue=()=>["","none","full",g,Ve,Le],me=()=>["",at,gu,oo],Ce=()=>["solid","dashed","dotted","double"],ye=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Se=()=>[at,Ay,rw,nw],He=()=>["","none",R,Ve,Le],Ge=()=>["none",at,Ve,Le],_e=()=>["none",at,Ve,Le],ce=()=>[at,Ve,Le],ve=()=>[wl,"full",...S()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[fi],breakpoint:[fi],color:[XM],container:[fi],"drop-shadow":[fi],ease:["in","out","in-out"],font:[eO],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[fi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[fi],shadow:[fi],spacing:["px",at],text:[fi],"text-shadow":[fi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",wl,Le,Ve,A]}],container:["container"],columns:[{columns:[at,Le,Ve,h]}],"break-after":[{"break-after":I()}],"break-before":[{"break-before":I()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:z()}],overflow:[{overflow:F()}],"overflow-x":[{"overflow-x":F()}],"overflow-y":[{"overflow-y":F()}],overscroll:[{overscroll:w()}],"overscroll-x":[{"overscroll-x":w()}],"overscroll-y":[{"overscroll-y":w()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:k()}],"inset-x":[{"inset-x":k()}],"inset-y":[{"inset-y":k()}],start:[{start:k()}],end:[{end:k()}],top:[{top:k()}],right:[{right:k()}],bottom:[{bottom:k()}],left:[{left:k()}],visibility:["visible","invisible","collapse"],z:[{z:[aa,"auto",Ve,Le]}],basis:[{basis:[wl,"full","auto",h,...S()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[at,wl,"auto","initial","none",Le]}],grow:[{grow:["",at,Ve,Le]}],shrink:[{shrink:["",at,Ve,Le]}],order:[{order:[aa,"first","last","none",Ve,Le]}],"grid-cols":[{"grid-cols":D()}],"col-start-end":[{col:M()}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":D()}],"row-start-end":[{row:M()}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":O()}],"auto-rows":[{"auto-rows":O()}],gap:[{gap:S()}],"gap-x":[{"gap-x":S()}],"gap-y":[{"gap-y":S()}],"justify-content":[{justify:[...be(),"normal"]}],"justify-items":[{"justify-items":[...Ee(),"normal"]}],"justify-self":[{"justify-self":["auto",...Ee()]}],"align-content":[{content:["normal",...be()]}],"align-items":[{items:[...Ee(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Ee(),{baseline:["","last"]}]}],"place-content":[{"place-content":be()}],"place-items":[{"place-items":[...Ee(),"baseline"]}],"place-self":[{"place-self":["auto",...Ee()]}],p:[{p:S()}],px:[{px:S()}],py:[{py:S()}],ps:[{ps:S()}],pe:[{pe:S()}],pt:[{pt:S()}],pr:[{pr:S()}],pb:[{pb:S()}],pl:[{pl:S()}],m:[{m:$()}],mx:[{mx:$()}],my:[{my:$()}],ms:[{ms:$()}],me:[{me:$()}],mt:[{mt:$()}],mr:[{mr:$()}],mb:[{mb:$()}],ml:[{ml:$()}],"space-x":[{"space-x":S()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":S()}],"space-y-reverse":["space-y-reverse"],size:[{size:K()}],w:[{w:[h,"screen",...K()]}],"min-w":[{"min-w":[h,"screen","none",...K()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[c]},...K()]}],h:[{h:["screen","lh",...K()]}],"min-h":[{"min-h":["screen","lh","none",...K()]}],"max-h":[{"max-h":["screen","lh",...K()]}],"font-size":[{text:["base",t,gu,oo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Ve,ky]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Ay,Le]}],"font-family":[{font:[rO,Le,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,Ve,Le]}],"line-clamp":[{"line-clamp":[at,"none",Ve,ky]}],leading:[{leading:[l,...S()]}],"list-image":[{"list-image":["none",Ve,Le]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ve,Le]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:W()}],"text-color":[{text:W()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ce(),"wavy"]}],"text-decoration-thickness":[{decoration:[at,"from-font","auto",Ve,oo]}],"text-decoration-color":[{decoration:W()}],"underline-offset":[{"underline-offset":[at,"auto",Ve,Le]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ve,Le]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ve,Le]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Te()}],"bg-repeat":[{bg:Re()}],"bg-size":[{bg:H()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},aa,Ve,Le],radial:["",Ve,Le],conic:[aa,Ve,Le]},iO,nO]}],"bg-color":[{bg:W()}],"gradient-from-pos":[{from:J()}],"gradient-via-pos":[{via:J()}],"gradient-to-pos":[{to:J()}],"gradient-from":[{from:W()}],"gradient-via":[{via:W()}],"gradient-to":[{to:W()}],rounded:[{rounded:ue()}],"rounded-s":[{"rounded-s":ue()}],"rounded-e":[{"rounded-e":ue()}],"rounded-t":[{"rounded-t":ue()}],"rounded-r":[{"rounded-r":ue()}],"rounded-b":[{"rounded-b":ue()}],"rounded-l":[{"rounded-l":ue()}],"rounded-ss":[{"rounded-ss":ue()}],"rounded-se":[{"rounded-se":ue()}],"rounded-ee":[{"rounded-ee":ue()}],"rounded-es":[{"rounded-es":ue()}],"rounded-tl":[{"rounded-tl":ue()}],"rounded-tr":[{"rounded-tr":ue()}],"rounded-br":[{"rounded-br":ue()}],"rounded-bl":[{"rounded-bl":ue()}],"border-w":[{border:me()}],"border-w-x":[{"border-x":me()}],"border-w-y":[{"border-y":me()}],"border-w-s":[{"border-s":me()}],"border-w-e":[{"border-e":me()}],"border-w-t":[{"border-t":me()}],"border-w-r":[{"border-r":me()}],"border-w-b":[{"border-b":me()}],"border-w-l":[{"border-l":me()}],"divide-x":[{"divide-x":me()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":me()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ce(),"hidden","none"]}],"divide-style":[{divide:[...Ce(),"hidden","none"]}],"border-color":[{border:W()}],"border-color-x":[{"border-x":W()}],"border-color-y":[{"border-y":W()}],"border-color-s":[{"border-s":W()}],"border-color-e":[{"border-e":W()}],"border-color-t":[{"border-t":W()}],"border-color-r":[{"border-r":W()}],"border-color-b":[{"border-b":W()}],"border-color-l":[{"border-l":W()}],"divide-color":[{divide:W()}],"outline-style":[{outline:[...Ce(),"none","hidden"]}],"outline-offset":[{"outline-offset":[at,Ve,Le]}],"outline-w":[{outline:["",at,gu,oo]}],"outline-color":[{outline:W()}],shadow:[{shadow:["","none",v,nf,tf]}],"shadow-color":[{shadow:W()}],"inset-shadow":[{"inset-shadow":["none",b,nf,tf]}],"inset-shadow-color":[{"inset-shadow":W()}],"ring-w":[{ring:me()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:W()}],"ring-offset-w":[{"ring-offset":[at,oo]}],"ring-offset-color":[{"ring-offset":W()}],"inset-ring-w":[{"inset-ring":me()}],"inset-ring-color":[{"inset-ring":W()}],"text-shadow":[{"text-shadow":["none",x,nf,tf]}],"text-shadow-color":[{"text-shadow":W()}],opacity:[{opacity:[at,Ve,Le]}],"mix-blend":[{"mix-blend":[...ye(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ye()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[at]}],"mask-image-linear-from-pos":[{"mask-linear-from":Se()}],"mask-image-linear-to-pos":[{"mask-linear-to":Se()}],"mask-image-linear-from-color":[{"mask-linear-from":W()}],"mask-image-linear-to-color":[{"mask-linear-to":W()}],"mask-image-t-from-pos":[{"mask-t-from":Se()}],"mask-image-t-to-pos":[{"mask-t-to":Se()}],"mask-image-t-from-color":[{"mask-t-from":W()}],"mask-image-t-to-color":[{"mask-t-to":W()}],"mask-image-r-from-pos":[{"mask-r-from":Se()}],"mask-image-r-to-pos":[{"mask-r-to":Se()}],"mask-image-r-from-color":[{"mask-r-from":W()}],"mask-image-r-to-color":[{"mask-r-to":W()}],"mask-image-b-from-pos":[{"mask-b-from":Se()}],"mask-image-b-to-pos":[{"mask-b-to":Se()}],"mask-image-b-from-color":[{"mask-b-from":W()}],"mask-image-b-to-color":[{"mask-b-to":W()}],"mask-image-l-from-pos":[{"mask-l-from":Se()}],"mask-image-l-to-pos":[{"mask-l-to":Se()}],"mask-image-l-from-color":[{"mask-l-from":W()}],"mask-image-l-to-color":[{"mask-l-to":W()}],"mask-image-x-from-pos":[{"mask-x-from":Se()}],"mask-image-x-to-pos":[{"mask-x-to":Se()}],"mask-image-x-from-color":[{"mask-x-from":W()}],"mask-image-x-to-color":[{"mask-x-to":W()}],"mask-image-y-from-pos":[{"mask-y-from":Se()}],"mask-image-y-to-pos":[{"mask-y-to":Se()}],"mask-image-y-from-color":[{"mask-y-from":W()}],"mask-image-y-to-color":[{"mask-y-to":W()}],"mask-image-radial":[{"mask-radial":[Ve,Le]}],"mask-image-radial-from-pos":[{"mask-radial-from":Se()}],"mask-image-radial-to-pos":[{"mask-radial-to":Se()}],"mask-image-radial-from-color":[{"mask-radial-from":W()}],"mask-image-radial-to-color":[{"mask-radial-to":W()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":V()}],"mask-image-conic-pos":[{"mask-conic":[at]}],"mask-image-conic-from-pos":[{"mask-conic-from":Se()}],"mask-image-conic-to-pos":[{"mask-conic-to":Se()}],"mask-image-conic-from-color":[{"mask-conic-from":W()}],"mask-image-conic-to-color":[{"mask-conic-to":W()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Te()}],"mask-repeat":[{mask:Re()}],"mask-size":[{mask:H()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ve,Le]}],filter:[{filter:["","none",Ve,Le]}],blur:[{blur:He()}],brightness:[{brightness:[at,Ve,Le]}],contrast:[{contrast:[at,Ve,Le]}],"drop-shadow":[{"drop-shadow":["","none",C,nf,tf]}],"drop-shadow-color":[{"drop-shadow":W()}],grayscale:[{grayscale:["",at,Ve,Le]}],"hue-rotate":[{"hue-rotate":[at,Ve,Le]}],invert:[{invert:["",at,Ve,Le]}],saturate:[{saturate:[at,Ve,Le]}],sepia:[{sepia:["",at,Ve,Le]}],"backdrop-filter":[{"backdrop-filter":["","none",Ve,Le]}],"backdrop-blur":[{"backdrop-blur":He()}],"backdrop-brightness":[{"backdrop-brightness":[at,Ve,Le]}],"backdrop-contrast":[{"backdrop-contrast":[at,Ve,Le]}],"backdrop-grayscale":[{"backdrop-grayscale":["",at,Ve,Le]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[at,Ve,Le]}],"backdrop-invert":[{"backdrop-invert":["",at,Ve,Le]}],"backdrop-opacity":[{"backdrop-opacity":[at,Ve,Le]}],"backdrop-saturate":[{"backdrop-saturate":[at,Ve,Le]}],"backdrop-sepia":[{"backdrop-sepia":["",at,Ve,Le]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":S()}],"border-spacing-x":[{"border-spacing-x":S()}],"border-spacing-y":[{"border-spacing-y":S()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ve,Le]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[at,"initial",Ve,Le]}],ease:[{ease:["linear","initial",B,Ve,Le]}],delay:[{delay:[at,Ve,Le]}],animate:[{animate:["none",G,Ve,Le]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[j,Ve,Le]}],"perspective-origin":[{"perspective-origin":z()}],rotate:[{rotate:Ge()}],"rotate-x":[{"rotate-x":Ge()}],"rotate-y":[{"rotate-y":Ge()}],"rotate-z":[{"rotate-z":Ge()}],scale:[{scale:_e()}],"scale-x":[{"scale-x":_e()}],"scale-y":[{"scale-y":_e()}],"scale-z":[{"scale-z":_e()}],"scale-3d":["scale-3d"],skew:[{skew:ce()}],"skew-x":[{"skew-x":ce()}],"skew-y":[{"skew-y":ce()}],transform:[{transform:[Ve,Le,"","none","gpu","cpu"]}],"transform-origin":[{origin:z()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ve()}],"translate-x":[{"translate-x":ve()}],"translate-y":[{"translate-y":ve()}],"translate-z":[{"translate-z":ve()}],"translate-none":["translate-none"],accent:[{accent:W()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:W()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ve,Le]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ve,Le]}],fill:[{fill:["none",...W()]}],"stroke-w":[{stroke:[at,gu,oo,ky]}],stroke:[{stroke:["none",...W()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},cO=FM(lO);function Rt(...n){return cO(xM(n))}function Yp(n){if(!n)return"";const e=n.toDate?n.toDate():new Date(n),r=new Date-e;return r<6e4?"Just now":r<36e5?`${Math.floor(r/6e4)}m ago`:r<864e5?`${Math.floor(r/36e5)}h ago`:r<6048e5?`${Math.floor(r/864e5)}d ago`:e.toLocaleDateString()}function wC(n){switch(n){case"admin":return"bg-admin/20 text-admin border-admin/30";case"moderator":return"bg-moderator/20 text-moderator border-moderator/30";default:return"bg-member/20 text-member border-member/30"}}const Yt=({label:n,error:e,className:t,containerClassName:r,...a})=>d.jsxs("div",{className:Rt("flex flex-col gap-1.5",r),children:[n&&d.jsx("label",{className:"text-sm font-medium text-dark-text",children:n}),d.jsx("input",{className:Rt("bg-dark-input text-dark-text px-4 py-2.5 rounded-md","border border-transparent focus:border-brand-primary","outline-none transition-colors duration-200","placeholder:text-dark-muted",e&&"border-admin",t),...a}),e&&d.jsx("span",{className:"text-sm text-admin",children:e})]}),Ze=({children:n,variant:e="primary",size:t="md",className:r,disabled:a,...l})=>{const c="font-medium rounded-md transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",h={primary:"bg-brand-primary hover:bg-brand-hover text-white",secondary:"bg-dark-input hover:bg-dark-hover text-dark-text",danger:"bg-admin hover:bg-admin/80 text-white",ghost:"hover:bg-dark-hover text-dark-text"},p={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};return d.jsx("button",{className:Rt(c,h[e],p[t],r),disabled:a,...l,children:n})},uO=({isOpen:n,onClose:e})=>{const[t,r]=P.useState(""),[a,l]=P.useState(!1),[c,h]=P.useState(!1),{success:p,error:g}=Ys(),v=async b=>{b.preventDefault(),l(!0);try{await h4(Nl,t),h(!0),p("Password reset email sent! Check your inbox."),setTimeout(()=>{e(),h(!1),r("")},3e3)}catch(x){console.error("Password reset error:",x),x.code==="auth/user-not-found"?g("No account found with this email address."):x.code==="auth/invalid-email"?g("Invalid email address."):g("Failed to send reset email. Please try again.")}finally{l(!1)}};return n?d.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-dark-sidebar rounded-lg shadow-2xl w-full max-w-md p-6 relative",children:[d.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-dark-muted hover:text-dark-text transition-colors",children:d.jsx(Hn,{size:24})}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-dark-text mb-2",children:"Reset Password"}),d.jsx("p",{className:"text-dark-muted text-sm",children:"Enter your email address and we'll send you a link to reset your password."})]}),c?d.jsx("div",{className:"bg-green-500/10 border border-green-500/30 text-green-400 px-4 py-3 rounded-md text-sm text-center",children:" Reset email sent successfully! Check your inbox."}):d.jsxs("form",{onSubmit:v,className:"space-y-4",children:[d.jsx(Yt,{label:"Email Address",type:"email",placeholder:"your@email.com",value:t,onChange:b=>r(b.target.value),required:!0,autoFocus:!0}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx(Ze,{type:"button",variant:"secondary",onClick:e,className:"flex-1",children:"Cancel"}),d.jsx(Ze,{type:"submit",variant:"primary",className:"flex-1",disabled:a||!t,children:a?"Sending...":"Send Reset Link"})]})]})]})}):null},dO=({onSwitchToRegister:n,onSwitchToReset:e})=>{const{login:t}=Cr(),[r,a]=P.useState({email:"",password:""}),[l,c]=P.useState(""),[h,p]=P.useState(!1),[g,v]=P.useState(!1),b=async x=>{x.preventDefault(),c(""),p(!0);try{await t(r.email,r.password)}catch(C){c(C.message||"Failed to login")}finally{p(!1)}};return d.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-dark-bg p-4",children:[d.jsxs("div",{className:"w-full max-w-md bg-dark-sidebar rounded-lg shadow-2xl p-8",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("h1",{className:"text-3xl font-bold text-dark-text mb-2",children:"Welcome Back!"}),d.jsx("p",{className:"text-dark-muted",children:"Login to Lumo"})]}),d.jsxs("form",{onSubmit:b,className:"space-y-4",children:[d.jsx(Yt,{label:"Email",type:"email",placeholder:"Enter your email",value:r.email,onChange:x=>a({...r,email:x.target.value}),required:!0}),d.jsxs("div",{children:[d.jsx(Yt,{label:"Password",type:"password",placeholder:"Enter your password",value:r.password,onChange:x=>a({...r,password:x.target.value}),required:!0}),d.jsx("div",{className:"mt-2 text-right",children:d.jsx("button",{type:"button",onClick:()=>v(!0),className:"text-sm text-brand-primary hover:underline",children:"Forgot Password?"})})]}),l&&d.jsx("div",{className:"bg-admin/10 border border-admin/30 text-admin px-4 py-3 rounded-md text-sm",children:l}),d.jsx(Ze,{type:"submit",variant:"primary",className:"w-full",disabled:h,children:h?"Logging in...":"Login"})]}),d.jsx("div",{className:"mt-6 text-center",children:d.jsxs("div",{className:"text-dark-muted text-sm",children:["Don't have an account?"," ",d.jsx("button",{onClick:n,className:"text-brand-primary hover:underline",children:"Register"})]})})]}),d.jsx(uO,{isOpen:g,onClose:()=>v(!1)})]})},hO=({onSwitchToLogin:n})=>{const{register:e}=Cr(),[t,r]=P.useState({displayName:"",email:"",password:"",confirmPassword:""}),[a,l]=P.useState(""),[c,h]=P.useState(""),[p,g]=P.useState(!1),[v,b]=P.useState([]);P.useEffect(()=>{(async()=>{try{const R=pt(ge,"users"),j=await So(R),A=[];j.forEach(B=>{const G=B.data().displayName;G&&A.push(G.toLowerCase())}),b(A)}catch(R){console.error("Error loading usernames:",R)}})()},[]),P.useEffect(()=>{const C=t.displayName;if(C){if(C.length<3){h("Username must be at least 3 characters");return}if(!/^[a-zA-Z0-9-_]+$/.test(C)){h("Only letters, numbers, hyphens (-) and underscores (_) allowed");return}const R=C.toLowerCase();v.includes(R)?h("This username is already taken"):h("")}else h("")},[t.displayName,v]);const x=async C=>{if(C.preventDefault(),l(""),c){l(c);return}if(t.password!==t.confirmPassword){l("Passwords do not match");return}if(t.password.length<6){l("Password must be at least 6 characters");return}g(!0);try{await e(t.email,t.password,t.displayName)}catch(R){l(R.message||"Failed to register")}finally{g(!1)}};return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-bg p-4",children:d.jsxs("div",{className:"w-full max-w-md bg-dark-sidebar rounded-lg shadow-2xl p-8",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("h1",{className:"text-3xl font-bold text-dark-text mb-2",children:"Create Account"}),d.jsx("p",{className:"text-dark-muted",children:"Join Lumo"})]}),d.jsxs("form",{onSubmit:x,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx(Yt,{label:"Display Name",type:"text",placeholder:"Enter your display name",value:t.displayName,onChange:C=>r({...t,displayName:C.target.value}),required:!0}),c&&d.jsx("p",{className:"text-xs text-admin mt-1",children:c}),t.displayName&&!c&&d.jsx("p",{className:"text-xs text-green-500 mt-1",children:" Username available"})]}),d.jsx(Yt,{label:"Email",type:"email",placeholder:"Enter your email",value:t.email,onChange:C=>r({...t,email:C.target.value}),required:!0}),d.jsx(Yt,{label:"Password",type:"password",placeholder:"Enter your password",value:t.password,onChange:C=>r({...t,password:C.target.value}),required:!0}),d.jsx(Yt,{label:"Confirm Password",type:"password",placeholder:"Confirm your password",value:t.confirmPassword,onChange:C=>r({...t,confirmPassword:C.target.value}),required:!0}),a&&d.jsx("div",{className:"bg-admin/10 border border-admin/30 text-admin px-4 py-3 rounded-md text-sm",children:a}),d.jsx(Ze,{type:"submit",variant:"primary",className:"w-full",disabled:p||!!c,children:p?"Creating account...":"Register"})]}),d.jsx("div",{className:"mt-6 text-center",children:d.jsxs("div",{className:"text-dark-muted text-sm",children:["Already have an account?"," ",d.jsx("button",{onClick:n,className:"text-brand-primary hover:underline",children:"Login"})]})})]})})},fO=({onSwitchToLogin:n})=>{const{resetPassword:e}=Cr(),[t,r]=P.useState(""),[a,l]=P.useState(""),[c,h]=P.useState(!1),[p,g]=P.useState(!1),v=async b=>{b.preventDefault(),l(""),h(!1),g(!0);try{await e(t),h(!0)}catch(x){l(x.message||"Failed to send reset email")}finally{g(!1)}};return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-bg p-4",children:d.jsxs("div",{className:"w-full max-w-md bg-dark-sidebar rounded-lg shadow-2xl p-8",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("h1",{className:"text-3xl font-bold text-dark-text mb-2",children:"Reset Password"}),d.jsx("p",{className:"text-dark-muted",children:"Enter your email to receive a reset link"})]}),d.jsxs("form",{onSubmit:v,className:"space-y-4",children:[d.jsx(Yt,{label:"Email",type:"email",placeholder:"Enter your email",value:t,onChange:b=>r(b.target.value),required:!0}),a&&d.jsx("div",{className:"bg-admin/10 border border-admin/30 text-admin px-4 py-3 rounded-md text-sm",children:a}),c&&d.jsx("div",{className:"bg-green-500/10 border border-green-500/30 text-green-500 px-4 py-3 rounded-md text-sm",children:"Password reset email sent! Check your inbox."}),d.jsx(Ze,{type:"submit",variant:"primary",className:"w-full",disabled:p,children:p?"Sending...":"Send Reset Link"})]}),d.jsx("div",{className:"mt-6 text-center",children:d.jsx("button",{onClick:n,className:"text-brand-primary hover:underline text-sm",children:"Back to Login"})})]})})},pO=({onSwipeLeft:n,onSwipeRight:e,minSwipeDistance:t=50})=>{const r=P.useRef(null),a=P.useRef(null);return{onTouchStart:p=>{a.current=null,r.current=p.targetTouches[0].clientX},onTouchMove:p=>{a.current=p.targetTouches[0].clientX},onTouchEnd:()=>{if(!r.current||!a.current)return;const p=r.current-a.current,g=p>t,v=p<-t;g&&n&&n(),v&&e&&e()}}};function mO(n){return Pe({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111.1 8 0 119.1 0 256s111.1 248 248 248 248-111.1 248-248S384.9 8 248 8zm100.7 364.9c-4.2 0-6.8-1.3-10.7-3.6-62.4-37.6-135-39.2-206.7-24.5-3.9 1-9 2.6-11.9 2.6-9.7 0-15.8-7.7-15.8-15.8 0-10.3 6.1-15.2 13.6-16.8 81.9-18.1 165.6-16.5 237 26.2 6.1 3.9 9.7 7.4 9.7 16.5s-7.1 15.4-15.2 15.4zm26.9-65.6c-5.2 0-8.7-2.3-12.3-4.2-62.5-37-155.7-51.9-238.6-29.4-4.8 1.3-7.4 2.6-11.9 2.6-10.7 0-19.4-8.7-19.4-19.4s5.2-17.8 15.5-20.7c27.8-7.8 56.2-13.6 97.8-13.6 64.9 0 127.6 16.1 177 45.5 8.1 4.8 11.3 11 11.3 19.7-.1 10.8-8.5 19.5-19.4 19.5zm31-76.2c-5.2 0-8.4-1.3-12.9-3.9-71.2-42.5-198.5-52.7-280.9-29.7-3.6 1-8.1 2.6-12.9 2.6-13.2 0-23.3-10.3-23.3-23.6 0-13.6 8.4-21.3 17.4-23.9 35.2-10.3 74.6-15.2 117.5-15.2 73 0 149.5 15.2 205.4 47.8 7.8 4.5 12.9 10.7 12.9 22.6 0 13.6-11 23.3-23.2 23.3z"},child:[]}]})(n)}function sw(n){return Pe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(n)}function gO(n){return Pe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(n)}function Kp(n){return Pe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M440.667 182.109l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l14.623-81.891C377.123 38.754 371.468 32 363.997 32h-40.632a12 12 0 0 0-11.813 9.891L296.175 128H197.54l14.623-81.891C213.477 38.754 207.822 32 200.35 32h-40.632a12 12 0 0 0-11.813 9.891L132.528 128H53.432a12 12 0 0 0-11.813 9.891l-7.143 40C33.163 185.246 38.818 192 46.289 192h74.81L98.242 320H19.146a12 12 0 0 0-11.813 9.891l-7.143 40C-1.123 377.246 4.532 384 12.003 384h74.81L72.19 465.891C70.877 473.246 76.532 480 84.003 480h40.632a12 12 0 0 0 11.813-9.891L151.826 384h98.634l-14.623 81.891C234.523 473.246 240.178 480 247.65 480h40.632a12 12 0 0 0 11.813-9.891L315.472 384h79.096a12 12 0 0 0 11.813-9.891l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l22.857-128h79.096a12 12 0 0 0 11.813-9.891zM261.889 320h-98.634l22.857-128h98.634l-22.857 128z"},child:[]}]})(n)}function iw(n){return Pe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(n)}const Us=({isOpen:n,onClose:e,title:t,children:r,size:a="md",showCloseButton:l=!0})=>{if(P.useEffect(()=>{const h=p=>{p.key==="Escape"&&n&&e()};return n?(document.body.style.overflow="hidden",document.addEventListener("keydown",h)):document.body.style.overflow="unset",()=>{document.body.style.overflow="unset",document.removeEventListener("keydown",h)}},[n,e]),!n)return null;const c={sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl"};return d.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center",children:[d.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:e}),d.jsxs("div",{className:Rt("relative bg-dark-sidebar rounded-lg shadow-2xl","w-full mx-4 max-h-[90vh] overflow-y-auto",c[a]),children:[(t||l)&&d.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-dark-hover",children:[d.jsx("h2",{className:"text-xl font-semibold text-dark-text",children:t}),l&&d.jsx("button",{onClick:e,className:"text-dark-muted hover:text-dark-text transition-colors",children:d.jsx(Hn,{size:24})})]}),d.jsx("div",{className:"p-6",children:r})]})]})};class yO{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const t of this._parts)e.push(t);return vO(e).buffer}}function vO(n){let e=0;for(const a of n)e+=a.byteLength;const t=new Uint8Array(e);let r=0;for(const a of n){const l=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);t.set(l,r),r+=a.byteLength}return t}function SC(n){return new bO(n).unpack()}function TC(n){const e=new _O,t=e.pack(n);return t instanceof Promise?t.then(()=>e.getBuffer()):e.getBuffer()}class bO{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let t;if((t=e^160)<=15)return this.unpack_raw(t);if((t=e^176)<=15)return this.unpack_string(t);if((t=e^144)<=15)return this.unpack_array(t);if((t=e^128)<=15)return this.unpack_map(t);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),t=(e[0]&255)*256+(e[1]&255);return this.index+=2,t}unpack_uint32(){const e=this.read(4),t=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,t}unpack_uint64(){const e=this.read(8),t=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,t}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t}unpack_string(e){const t=this.read(e);let r=0,a="",l,c;for(;r<e;)l=t[r],l<160?(c=l,r++):(l^192)<32?(c=(l&31)<<6|t[r+1]&63,r+=2):(l^224)<16?(c=(l&15)<<12|(t[r+1]&63)<<6|t[r+2]&63,r+=3):(c=(l&7)<<18|(t[r+1]&63)<<12|(t[r+2]&63)<<6|t[r+3]&63,r+=4),a+=String.fromCodePoint(c);return this.index+=e,a}unpack_array(e){const t=new Array(e);for(let r=0;r<e;r++)t[r]=this.unpack();return t}unpack_map(e){const t={};for(let r=0;r<e;r++){const a=this.unpack();t[a]=this.unpack()}return t}unpack_float(){const e=this.unpack_uint32(),t=e>>31,r=(e>>23&255)-127,a=e&8388607|8388608;return(t===0?1:-1)*a*2**(r-23)}unpack_double(){const e=this.unpack_uint32(),t=this.unpack_uint32(),r=e>>31,a=(e>>20&2047)-1023,c=(e&1048575|1048576)*2**(a-20)+t*2**(a-52);return(r===0?1:-1)*c}read(e){const t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")}}class _O{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const t=e.constructor;if(e instanceof Array){const r=this.pack_array(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const r=e;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(t==Object||t.toString().startsWith("class")){const r=this.pack_object(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${t.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const t=e.length;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this._bufferBuilder.append(218),this.pack_uint16(t);else if(t<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(t);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const t=this._textEncoder.encode(e),r=t.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_array(e){const t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this._bufferBuilder.append(220),this.pack_uint16(t);else if(t<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(t);else throw new Error("Invalid length");const r=a=>{if(a<t){const l=this.pack(e[a]);return l instanceof Promise?l.then(()=>r(a+1)):r(a+1)}};return r(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let t=0;e<0&&(t=1,e=-e);const r=Math.floor(Math.log(e)/Math.LN2),a=e/2**r-1,l=Math.floor(a*2**52),c=2**32,h=t<<31|r+1023<<20|l/c&1048575,p=l%c;this._bufferBuilder.append(203),this.pack_int32(h),this.pack_int32(p)}pack_object(e){const t=Object.keys(e),r=t.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const a=l=>{if(l<t.length){const c=t[l];if(e.hasOwnProperty(c)){this.pack(c);const h=this.pack(e[c]);if(h instanceof Promise)return h.then(()=>a(l+1))}return a(l+1)}};return a(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const t=e&4294967295;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_uint64(e){const t=e/4294967296,r=e%2**32;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const t=Math.floor(e/4294967296),r=e%2**32;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new yO,this._textEncoder=new TextEncoder}}let CC=!0,AC=!0;function ku(n,e,t){const r=n.match(e);return r&&r.length>=t&&parseFloat(r[t],10)}function Do(n,e,t){if(!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype,a=r.addEventListener;r.addEventListener=function(c,h){if(c!==e)return a.apply(this,arguments);const p=g=>{const v=t(g);v&&(h.handleEvent?h.handleEvent(v):h(v))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(h,p),a.apply(this,[c,p])};const l=r.removeEventListener;r.removeEventListener=function(c,h){if(c!==e||!this._eventMap||!this._eventMap[e])return l.apply(this,arguments);if(!this._eventMap[e].has(h))return l.apply(this,arguments);const p=this._eventMap[e].get(h);return this._eventMap[e].delete(h),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,l.apply(this,[c,p])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(c){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),c&&this.addEventListener(e,this["_on"+e]=c)},enumerable:!0,configurable:!0})}function xO(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(CC=n,n?"adapter.js logging disabled":"adapter.js logging enabled")}function EO(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(AC=!n,"adapter.js deprecation warnings "+(n?"disabled":"enabled"))}function kC(){if(typeof window=="object"){if(CC)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function r1(n,e){AC&&console.warn(n+" is deprecated, please use "+e+" instead.")}function wO(n){const e={browser:null,version:null};if(typeof n>"u"||!n.navigator||!n.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:t}=n;if(t.userAgentData&&t.userAgentData.brands){const r=t.userAgentData.brands.find(a=>a.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(t.mozGetUserMedia)e.browser="firefox",e.version=parseInt(ku(t.userAgent,/Firefox\/(\d+)\./,1));else if(t.webkitGetUserMedia||n.isSecureContext===!1&&n.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(ku(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(n.RTCPeerConnection&&t.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(ku(t.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=n.RTCRtpTransceiver&&"currentDirection"in n.RTCRtpTransceiver.prototype,e._safariVersion=ku(t.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function aw(n){return Object.prototype.toString.call(n)==="[object Object]"}function RC(n){return aw(n)?Object.keys(n).reduce(function(e,t){const r=aw(n[t]),a=r?RC(n[t]):n[t],l=r&&!Object.keys(a).length;return a===void 0||l?e:Object.assign(e,{[t]:a})},{}):n}function S0(n,e,t){!e||t.has(e.id)||(t.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?S0(n,n.get(e[r]),t):r.endsWith("Ids")&&e[r].forEach(a=>{S0(n,n.get(a),t)})}))}function ow(n,e,t){const r=t?"outbound-rtp":"inbound-rtp",a=new Map;if(e===null)return a;const l=[];return n.forEach(c=>{c.type==="track"&&c.trackIdentifier===e.id&&l.push(c)}),l.forEach(c=>{n.forEach(h=>{h.type===r&&h.trackId===c.id&&S0(n,h,a)})}),a}const lw=kC;function NC(n,e){const t=n&&n.navigator;if(!t.mediaDevices)return;const r=function(h){if(typeof h!="object"||h.mandatory||h.optional)return h;const p={};return Object.keys(h).forEach(g=>{if(g==="require"||g==="advanced"||g==="mediaSource")return;const v=typeof h[g]=="object"?h[g]:{ideal:h[g]};v.exact!==void 0&&typeof v.exact=="number"&&(v.min=v.max=v.exact);const b=function(x,C){return x?x+C.charAt(0).toUpperCase()+C.slice(1):C==="deviceId"?"sourceId":C};if(v.ideal!==void 0){p.optional=p.optional||[];let x={};typeof v.ideal=="number"?(x[b("min",g)]=v.ideal,p.optional.push(x),x={},x[b("max",g)]=v.ideal,p.optional.push(x)):(x[b("",g)]=v.ideal,p.optional.push(x))}v.exact!==void 0&&typeof v.exact!="number"?(p.mandatory=p.mandatory||{},p.mandatory[b("",g)]=v.exact):["min","max"].forEach(x=>{v[x]!==void 0&&(p.mandatory=p.mandatory||{},p.mandatory[b(x,g)]=v[x])})}),h.advanced&&(p.optional=(p.optional||[]).concat(h.advanced)),p},a=function(h,p){if(e.version>=61)return p(h);if(h=JSON.parse(JSON.stringify(h)),h&&typeof h.audio=="object"){const g=function(v,b,x){b in v&&!(x in v)&&(v[x]=v[b],delete v[b])};h=JSON.parse(JSON.stringify(h)),g(h.audio,"autoGainControl","googAutoGainControl"),g(h.audio,"noiseSuppression","googNoiseSuppression"),h.audio=r(h.audio)}if(h&&typeof h.video=="object"){let g=h.video.facingMode;g=g&&(typeof g=="object"?g:{ideal:g});const v=e.version<66;if(g&&(g.exact==="user"||g.exact==="environment"||g.ideal==="user"||g.ideal==="environment")&&!(t.mediaDevices.getSupportedConstraints&&t.mediaDevices.getSupportedConstraints().facingMode&&!v)){delete h.video.facingMode;let b;if(g.exact==="environment"||g.ideal==="environment"?b=["back","rear"]:(g.exact==="user"||g.ideal==="user")&&(b=["front"]),b)return t.mediaDevices.enumerateDevices().then(x=>{x=x.filter(R=>R.kind==="videoinput");let C=x.find(R=>b.some(j=>R.label.toLowerCase().includes(j)));return!C&&x.length&&b.includes("back")&&(C=x[x.length-1]),C&&(h.video.deviceId=g.exact?{exact:C.deviceId}:{ideal:C.deviceId}),h.video=r(h.video),lw("chrome: "+JSON.stringify(h)),p(h)})}h.video=r(h.video)}return lw("chrome: "+JSON.stringify(h)),p(h)},l=function(h){return e.version>=64?h:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[h.name]||h.name,message:h.message,constraint:h.constraint||h.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},c=function(h,p,g){a(h,v=>{t.webkitGetUserMedia(v,p,b=>{g&&g(l(b))})})};if(t.getUserMedia=c.bind(t),t.mediaDevices.getUserMedia){const h=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(p){return a(p,g=>h(g).then(v=>{if(g.audio&&!v.getAudioTracks().length||g.video&&!v.getVideoTracks().length)throw v.getTracks().forEach(b=>{b.stop()}),new DOMException("","NotFoundError");return v},v=>Promise.reject(l(v))))}}}function IC(n){n.MediaStream=n.MediaStream||n.webkitMediaStream}function jC(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("ontrack"in n.RTCPeerConnection.prototype)){Object.defineProperty(n.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)},enumerable:!0,configurable:!0});const e=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",a=>{let l;n.RTCPeerConnection.prototype.getReceivers?l=this.getReceivers().find(h=>h.track&&h.track.id===a.track.id):l={track:a.track};const c=new Event("track");c.track=a.track,c.receiver=l,c.transceiver={receiver:l},c.streams=[r.stream],this.dispatchEvent(c)}),r.stream.getTracks().forEach(a=>{let l;n.RTCPeerConnection.prototype.getReceivers?l=this.getReceivers().find(h=>h.track&&h.track.id===a.id):l={track:a};const c=new Event("track");c.track=a,c.receiver=l,c.transceiver={receiver:l},c.streams=[r.stream],this.dispatchEvent(c)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Do(n,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function DC(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("getSenders"in n.RTCPeerConnection.prototype)&&"createDTMFSender"in n.RTCPeerConnection.prototype){const e=function(a,l){return{track:l,get dtmf(){return this._dtmf===void 0&&(l.kind==="audio"?this._dtmf=a.createDTMFSender(l):this._dtmf=null),this._dtmf},_pc:a}};if(!n.RTCPeerConnection.prototype.getSenders){n.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const a=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(h,p){let g=a.apply(this,arguments);return g||(g=e(this,h),this._senders.push(g)),g};const l=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(h){l.apply(this,arguments);const p=this._senders.indexOf(h);p!==-1&&this._senders.splice(p,1)}}const t=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(l){this._senders=this._senders||[],t.apply(this,[l]),l.getTracks().forEach(c=>{this._senders.push(e(this,c))})};const r=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(l){this._senders=this._senders||[],r.apply(this,[l]),l.getTracks().forEach(c=>{const h=this._senders.find(p=>p.track===c);h&&this._senders.splice(this._senders.indexOf(h),1)})}}else if(typeof n=="object"&&n.RTCPeerConnection&&"getSenders"in n.RTCPeerConnection.prototype&&"createDTMFSender"in n.RTCPeerConnection.prototype&&n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)){const e=n.RTCPeerConnection.prototype.getSenders;n.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(a=>a._pc=this),r},Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function MC(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender&&n.RTCRtpReceiver))return;if(!("getStats"in n.RTCRtpSender.prototype)){const t=n.RTCPeerConnection.prototype.getSenders;t&&(n.RTCPeerConnection.prototype.getSenders=function(){const l=t.apply(this,[]);return l.forEach(c=>c._pc=this),l});const r=n.RTCPeerConnection.prototype.addTrack;r&&(n.RTCPeerConnection.prototype.addTrack=function(){const l=r.apply(this,arguments);return l._pc=this,l}),n.RTCRtpSender.prototype.getStats=function(){const l=this;return this._pc.getStats().then(c=>ow(c,l.track,!0))}}if(!("getStats"in n.RTCRtpReceiver.prototype)){const t=n.RTCPeerConnection.prototype.getReceivers;t&&(n.RTCPeerConnection.prototype.getReceivers=function(){const a=t.apply(this,[]);return a.forEach(l=>l._pc=this),a}),Do(n,"track",r=>(r.receiver._pc=r.srcElement,r)),n.RTCRtpReceiver.prototype.getStats=function(){const a=this;return this._pc.getStats().then(l=>ow(l,a.track,!1))}}if(!("getStats"in n.RTCRtpSender.prototype&&"getStats"in n.RTCRtpReceiver.prototype))return;const e=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof n.MediaStreamTrack){const r=arguments[0];let a,l,c;return this.getSenders().forEach(h=>{h.track===r&&(a?c=!0:a=h)}),this.getReceivers().forEach(h=>(h.track===r&&(l?c=!0:l=h),h.track===r)),c||a&&l?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):a?a.getStats():l?l.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function OC(n){n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(c=>this._shimmedLocalStreams[c][0])};const e=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(c,h){if(!h)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const p=e.apply(this,arguments);return this._shimmedLocalStreams[h.id]?this._shimmedLocalStreams[h.id].indexOf(p)===-1&&this._shimmedLocalStreams[h.id].push(p):this._shimmedLocalStreams[h.id]=[h,p],p};const t=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(c){this._shimmedLocalStreams=this._shimmedLocalStreams||{},c.getTracks().forEach(g=>{if(this.getSenders().find(b=>b.track===g))throw new DOMException("Track already exists.","InvalidAccessError")});const h=this.getSenders();t.apply(this,arguments);const p=this.getSenders().filter(g=>h.indexOf(g)===-1);this._shimmedLocalStreams[c.id]=[c].concat(p)};const r=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[c.id],r.apply(this,arguments)};const a=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},c&&Object.keys(this._shimmedLocalStreams).forEach(h=>{const p=this._shimmedLocalStreams[h].indexOf(c);p!==-1&&this._shimmedLocalStreams[h].splice(p,1),this._shimmedLocalStreams[h].length===1&&delete this._shimmedLocalStreams[h]}),a.apply(this,arguments)}}function PC(n,e){if(!n.RTCPeerConnection)return;if(n.RTCPeerConnection.prototype.addTrack&&e.version>=65)return OC(n);const t=n.RTCPeerConnection.prototype.getLocalStreams;n.RTCPeerConnection.prototype.getLocalStreams=function(){const v=t.apply(this);return this._reverseStreams=this._reverseStreams||{},v.map(b=>this._reverseStreams[b.id])};const r=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(v){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},v.getTracks().forEach(b=>{if(this.getSenders().find(C=>C.track===b))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[v.id]){const b=new n.MediaStream(v.getTracks());this._streams[v.id]=b,this._reverseStreams[b.id]=v,v=b}r.apply(this,[v])};const a=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(v){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},a.apply(this,[this._streams[v.id]||v]),delete this._reverseStreams[this._streams[v.id]?this._streams[v.id].id:v.id],delete this._streams[v.id]},n.RTCPeerConnection.prototype.addTrack=function(v,b){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const x=[].slice.call(arguments,1);if(x.length!==1||!x[0].getTracks().find(j=>j===v))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(j=>j.track===v))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const R=this._streams[b.id];if(R)R.addTrack(v),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const j=new n.MediaStream([v]);this._streams[b.id]=j,this._reverseStreams[j.id]=b,this.addStream(j)}return this.getSenders().find(j=>j.track===v)};function l(g,v){let b=v.sdp;return Object.keys(g._reverseStreams||[]).forEach(x=>{const C=g._reverseStreams[x],R=g._streams[C.id];b=b.replace(new RegExp(R.id,"g"),C.id)}),new RTCSessionDescription({type:v.type,sdp:b})}function c(g,v){let b=v.sdp;return Object.keys(g._reverseStreams||[]).forEach(x=>{const C=g._reverseStreams[x],R=g._streams[C.id];b=b.replace(new RegExp(C.id,"g"),R.id)}),new RTCSessionDescription({type:v.type,sdp:b})}["createOffer","createAnswer"].forEach(function(g){const v=n.RTCPeerConnection.prototype[g],b={[g](){const x=arguments;return arguments.length&&typeof arguments[0]=="function"?v.apply(this,[R=>{const j=l(this,R);x[0].apply(null,[j])},R=>{x[1]&&x[1].apply(null,R)},arguments[2]]):v.apply(this,arguments).then(R=>l(this,R))}};n.RTCPeerConnection.prototype[g]=b[g]});const h=n.RTCPeerConnection.prototype.setLocalDescription;n.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?h.apply(this,arguments):(arguments[0]=c(this,arguments[0]),h.apply(this,arguments))};const p=Object.getOwnPropertyDescriptor(n.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(n.RTCPeerConnection.prototype,"localDescription",{get(){const g=p.get.apply(this);return g.type===""?g:l(this,g)}}),n.RTCPeerConnection.prototype.removeTrack=function(v){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!v._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(v._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let x;Object.keys(this._streams).forEach(C=>{this._streams[C].getTracks().find(j=>v.track===j)&&(x=this._streams[C])}),x&&(x.getTracks().length===1?this.removeStream(this._reverseStreams[x.id]):x.removeTrack(v.track),this.dispatchEvent(new Event("negotiationneeded")))}}function T0(n,e){!n.RTCPeerConnection&&n.webkitRTCPeerConnection&&(n.RTCPeerConnection=n.webkitRTCPeerConnection),n.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const r=n.RTCPeerConnection.prototype[t],a={[t](){return arguments[0]=new(t==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};n.RTCPeerConnection.prototype[t]=a[t]})}function LC(n,e){Do(n,"negotiationneeded",t=>{const r=t.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return t})}const cw=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:LC,shimAddTrackRemoveTrack:PC,shimAddTrackRemoveTrackWithNative:OC,shimGetSendersWithDtmf:DC,shimGetUserMedia:NC,shimMediaStream:IC,shimOnTrack:jC,shimPeerConnection:T0,shimSenderReceiverGetStats:MC},Symbol.toStringTag,{value:"Module"}));function VC(n,e){const t=n&&n.navigator,r=n&&n.MediaStreamTrack;if(t.getUserMedia=function(a,l,c){r1("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),t.mediaDevices.getUserMedia(a).then(l,c)},!(e.version>55&&"autoGainControl"in t.mediaDevices.getSupportedConstraints())){const a=function(c,h,p){h in c&&!(p in c)&&(c[p]=c[h],delete c[h])},l=t.mediaDevices.getUserMedia.bind(t.mediaDevices);if(t.mediaDevices.getUserMedia=function(c){return typeof c=="object"&&typeof c.audio=="object"&&(c=JSON.parse(JSON.stringify(c)),a(c.audio,"autoGainControl","mozAutoGainControl"),a(c.audio,"noiseSuppression","mozNoiseSuppression")),l(c)},r&&r.prototype.getSettings){const c=r.prototype.getSettings;r.prototype.getSettings=function(){const h=c.apply(this,arguments);return a(h,"mozAutoGainControl","autoGainControl"),a(h,"mozNoiseSuppression","noiseSuppression"),h}}if(r&&r.prototype.applyConstraints){const c=r.prototype.applyConstraints;r.prototype.applyConstraints=function(h){return this.kind==="audio"&&typeof h=="object"&&(h=JSON.parse(JSON.stringify(h)),a(h,"autoGainControl","mozAutoGainControl"),a(h,"noiseSuppression","mozNoiseSuppression")),c.apply(this,[h])}}}}function SO(n,e){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&(n.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const a=new DOMException("getDisplayMedia without video constraints is undefined");return a.name="NotFoundError",a.code=8,Promise.reject(a)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,n.navigator.mediaDevices.getUserMedia(r)})}function UC(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function C0(n,e){if(typeof n!="object"||!(n.RTCPeerConnection||n.mozRTCPeerConnection))return;!n.RTCPeerConnection&&n.mozRTCPeerConnection&&(n.RTCPeerConnection=n.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(a){const l=n.RTCPeerConnection.prototype[a],c={[a](){return arguments[0]=new(a==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),l.apply(this,arguments)}};n.RTCPeerConnection.prototype[a]=c[a]});const t={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[l,c,h]=arguments;return r.apply(this,[l||null]).then(p=>{if(e.version<53&&!c)try{p.forEach(g=>{g.type=t[g.type]||g.type})}catch(g){if(g.name!=="TypeError")throw g;p.forEach((v,b)=>{p.set(b,Object.assign({},v,{type:t[v.type]||v.type}))})}return p}).then(c,h)}}function zC(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender)||n.RTCRtpSender&&"getStats"in n.RTCRtpSender.prototype)return;const e=n.RTCPeerConnection.prototype.getSenders;e&&(n.RTCPeerConnection.prototype.getSenders=function(){const a=e.apply(this,[]);return a.forEach(l=>l._pc=this),a});const t=n.RTCPeerConnection.prototype.addTrack;t&&(n.RTCPeerConnection.prototype.addTrack=function(){const a=t.apply(this,arguments);return a._pc=this,a}),n.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function BC(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender)||n.RTCRtpSender&&"getStats"in n.RTCRtpReceiver.prototype)return;const e=n.RTCPeerConnection.prototype.getReceivers;e&&(n.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(a=>a._pc=this),r}),Do(n,"track",t=>(t.receiver._pc=t.srcElement,t)),n.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function FC(n){!n.RTCPeerConnection||"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(t){r1("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&t.getTracks().includes(r.track)&&this.removeTrack(r)})})}function $C(n){n.DataChannel&&!n.RTCDataChannel&&(n.RTCDataChannel=n.DataChannel)}function HC(n){if(!(typeof n=="object"&&n.RTCPeerConnection))return;const e=n.RTCPeerConnection.prototype.addTransceiver;e&&(n.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const a=r.length>0;a&&r.forEach(c=>{if("rid"in c&&!/^[a-z0-9]{0,16}$/i.test(c.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in c&&!(parseFloat(c.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in c&&!(parseFloat(c.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const l=e.apply(this,arguments);if(a){const{sender:c}=l,h=c.getParameters();(!("encodings"in h)||h.encodings.length===1&&Object.keys(h.encodings[0]).length===0)&&(h.encodings=r,c.sendEncodings=r,this.setParametersPromises.push(c.setParameters(h).then(()=>{delete c.sendEncodings}).catch(()=>{delete c.sendEncodings})))}return l})}function qC(n){if(!(typeof n=="object"&&n.RTCRtpSender))return;const e=n.RTCRtpSender.prototype.getParameters;e&&(n.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function GC(n){if(!(typeof n=="object"&&n.RTCPeerConnection))return;const e=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function YC(n){if(!(typeof n=="object"&&n.RTCPeerConnection))return;const e=n.RTCPeerConnection.prototype.createAnswer;n.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const uw=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:HC,shimCreateAnswer:YC,shimCreateOffer:GC,shimGetDisplayMedia:SO,shimGetParameters:qC,shimGetUserMedia:VC,shimOnTrack:UC,shimPeerConnection:C0,shimRTCDataChannel:$C,shimReceiverGetStats:BC,shimRemoveStream:FC,shimSenderGetStats:zC},Symbol.toStringTag,{value:"Module"}));function KC(n){if(!(typeof n!="object"||!n.RTCPeerConnection)){if("getLocalStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in n.RTCPeerConnection.prototype)){const e=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(a=>e.call(this,a,r)),r.getVideoTracks().forEach(a=>e.call(this,a,r))},n.RTCPeerConnection.prototype.addTrack=function(r,...a){return a&&a.forEach(l=>{this._localStreams?this._localStreams.includes(l)||this._localStreams.push(l):this._localStreams=[l]}),e.apply(this,arguments)}}"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(t){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(t);if(r===-1)return;this._localStreams.splice(r,1);const a=t.getTracks();this.getSenders().forEach(l=>{a.includes(l.track)&&this.removeTrack(l)})})}}function QC(n){if(!(typeof n!="object"||!n.RTCPeerConnection)&&("getRemoteStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in n.RTCPeerConnection.prototype))){Object.defineProperty(n.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(t){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(a=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(a))return;this._remoteStreams.push(a);const l=new Event("addstream");l.stream=a,this.dispatchEvent(l)})})}});const e=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(a){a.streams.forEach(l=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(l)>=0)return;r._remoteStreams.push(l);const c=new Event("addstream");c.stream=l,r.dispatchEvent(c)})}),e.apply(r,arguments)}}}function XC(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const e=n.RTCPeerConnection.prototype,t=e.createOffer,r=e.createAnswer,a=e.setLocalDescription,l=e.setRemoteDescription,c=e.addIceCandidate;e.createOffer=function(g,v){const b=arguments.length>=2?arguments[2]:arguments[0],x=t.apply(this,[b]);return v?(x.then(g,v),Promise.resolve()):x},e.createAnswer=function(g,v){const b=arguments.length>=2?arguments[2]:arguments[0],x=r.apply(this,[b]);return v?(x.then(g,v),Promise.resolve()):x};let h=function(p,g,v){const b=a.apply(this,[p]);return v?(b.then(g,v),Promise.resolve()):b};e.setLocalDescription=h,h=function(p,g,v){const b=l.apply(this,[p]);return v?(b.then(g,v),Promise.resolve()):b},e.setRemoteDescription=h,h=function(p,g,v){const b=c.apply(this,[p]);return v?(b.then(g,v),Promise.resolve()):b},e.addIceCandidate=h}function WC(n){const e=n&&n.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const t=e.mediaDevices,r=t.getUserMedia.bind(t);e.mediaDevices.getUserMedia=a=>r(JC(a))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,a,l){e.mediaDevices.getUserMedia(r).then(a,l)}).bind(e))}function JC(n){return n&&n.video!==void 0?Object.assign({},n,{video:RC(n.video)}):n}function ZC(n){if(!n.RTCPeerConnection)return;const e=n.RTCPeerConnection;n.RTCPeerConnection=function(r,a){if(r&&r.iceServers){const l=[];for(let c=0;c<r.iceServers.length;c++){let h=r.iceServers[c];h.urls===void 0&&h.url?(r1("RTCIceServer.url","RTCIceServer.urls"),h=JSON.parse(JSON.stringify(h)),h.urls=h.url,delete h.url,l.push(h)):l.push(r.iceServers[c])}r.iceServers=l}return new e(r,a)},n.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(n.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function eA(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function tA(n){const e=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const a=this.getTransceivers().find(c=>c.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):r.offerToReceiveAudio===!0&&!a&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const l=this.getTransceivers().find(c=>c.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&l?l.direction==="sendrecv"?l.setDirection?l.setDirection("sendonly"):l.direction="sendonly":l.direction==="recvonly"&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive"):r.offerToReceiveVideo===!0&&!l&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function nA(n){typeof n!="object"||n.AudioContext||(n.AudioContext=n.webkitAudioContext)}const dw=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:nA,shimCallbacksAPI:XC,shimConstraints:JC,shimCreateOfferLegacy:tA,shimGetUserMedia:WC,shimLocalStreamsAPI:KC,shimRTCIceServerUrls:ZC,shimRemoteStreamsAPI:QC,shimTrackEventTransceiver:eA},Symbol.toStringTag,{value:"Module"}));var Ry={exports:{}},hw;function TO(){return hw||(hw=1,(function(n){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(t){return t.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(t){return t.split(`
m=`).map((a,l)=>(l>0?"m="+a:a).trim()+`\r
`)},e.getDescription=function(t){const r=e.splitSections(t);return r&&r[0]},e.getMediaSections=function(t){const r=e.splitSections(t);return r.shift(),r},e.matchPrefix=function(t,r){return e.splitLines(t).filter(a=>a.indexOf(r)===0)},e.parseCandidate=function(t){let r;t.indexOf("a=candidate:")===0?r=t.substring(12).split(" "):r=t.substring(10).split(" ");const a={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let l=8;l<r.length;l+=2)switch(r[l]){case"raddr":a.relatedAddress=r[l+1];break;case"rport":a.relatedPort=parseInt(r[l+1],10);break;case"tcptype":a.tcpType=r[l+1];break;case"ufrag":a.ufrag=r[l+1],a.usernameFragment=r[l+1];break;default:a[r[l]]===void 0&&(a[r[l]]=r[l+1]);break}return a},e.writeCandidate=function(t){const r=[];r.push(t.foundation);const a=t.component;a==="rtp"?r.push(1):a==="rtcp"?r.push(2):r.push(a),r.push(t.protocol.toUpperCase()),r.push(t.priority),r.push(t.address||t.ip),r.push(t.port);const l=t.type;return r.push("typ"),r.push(l),l!=="host"&&t.relatedAddress&&t.relatedPort&&(r.push("raddr"),r.push(t.relatedAddress),r.push("rport"),r.push(t.relatedPort)),t.tcpType&&t.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(t.tcpType)),(t.usernameFragment||t.ufrag)&&(r.push("ufrag"),r.push(t.usernameFragment||t.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(t){return t.substring(14).split(" ")},e.parseRtpMap=function(t){let r=t.substring(9).split(" ");const a={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),a.name=r[0],a.clockRate=parseInt(r[1],10),a.channels=r.length===3?parseInt(r[2],10):1,a.numChannels=a.channels,a},e.writeRtpMap=function(t){let r=t.payloadType;t.preferredPayloadType!==void 0&&(r=t.preferredPayloadType);const a=t.channels||t.numChannels||1;return"a=rtpmap:"+r+" "+t.name+"/"+t.clockRate+(a!==1?"/"+a:"")+`\r
`},e.parseExtmap=function(t){const r=t.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&t.direction!=="sendrecv"?"/"+t.direction:"")+" "+t.uri+(t.attributes?" "+t.attributes:"")+`\r
`},e.parseFmtp=function(t){const r={};let a;const l=t.substring(t.indexOf(" ")+1).split(";");for(let c=0;c<l.length;c++)a=l[c].trim().split("="),r[a[0].trim()]=a[1];return r},e.writeFmtp=function(t){let r="",a=t.payloadType;if(t.preferredPayloadType!==void 0&&(a=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){const l=[];Object.keys(t.parameters).forEach(c=>{t.parameters[c]!==void 0?l.push(c+"="+t.parameters[c]):l.push(c)}),r+="a=fmtp:"+a+" "+l.join(";")+`\r
`}return r},e.parseRtcpFb=function(t){const r=t.substring(t.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(t){let r="",a=t.payloadType;return t.preferredPayloadType!==void 0&&(a=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach(l=>{r+="a=rtcp-fb:"+a+" "+l.type+(l.parameter&&l.parameter.length?" "+l.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(t){const r=t.indexOf(" "),a={ssrc:parseInt(t.substring(7,r),10)},l=t.indexOf(":",r);return l>-1?(a.attribute=t.substring(r+1,l),a.value=t.substring(l+1)):a.attribute=t.substring(r+1),a},e.parseSsrcGroup=function(t){const r=t.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(a=>parseInt(a,10))}},e.getMid=function(t){const r=e.matchPrefix(t,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(t){const r=t.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(t,r){return{role:"auto",fingerprints:e.matchPrefix(t+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(t,r){let a="a=setup:"+r+`\r
`;return t.fingerprints.forEach(l=>{a+="a=fingerprint:"+l.algorithm+" "+l.value+`\r
`}),a},e.parseCryptoLine=function(t){const r=t.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(t){return"a=crypto:"+t.tag+" "+t.cryptoSuite+" "+(typeof t.keyParams=="object"?e.writeCryptoKeyParams(t.keyParams):t.keyParams)+(t.sessionParams?" "+t.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(t){if(t.indexOf("inline:")!==0)return null;const r=t.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(t){return t.keyMethod+":"+t.keySalt+(t.lifeTime?"|"+t.lifeTime:"")+(t.mkiValue&&t.mkiLength?"|"+t.mkiValue+":"+t.mkiLength:"")},e.getCryptoParameters=function(t,r){return e.matchPrefix(t+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(t,r){const a=e.matchPrefix(t+r,"a=ice-ufrag:")[0],l=e.matchPrefix(t+r,"a=ice-pwd:")[0];return a&&l?{usernameFragment:a.substring(12),password:l.substring(10)}:null},e.writeIceParameters=function(t){let r="a=ice-ufrag:"+t.usernameFragment+`\r
a=ice-pwd:`+t.password+`\r
`;return t.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(t){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},l=e.splitLines(t)[0].split(" ");r.profile=l[2];for(let h=3;h<l.length;h++){const p=l[h],g=e.matchPrefix(t,"a=rtpmap:"+p+" ")[0];if(g){const v=e.parseRtpMap(g),b=e.matchPrefix(t,"a=fmtp:"+p+" ");switch(v.parameters=b.length?e.parseFmtp(b[0]):{},v.rtcpFeedback=e.matchPrefix(t,"a=rtcp-fb:"+p+" ").map(e.parseRtcpFb),r.codecs.push(v),v.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(v.name.toUpperCase());break}}}e.matchPrefix(t,"a=extmap:").forEach(h=>{r.headerExtensions.push(e.parseExtmap(h))});const c=e.matchPrefix(t,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(h=>{c.forEach(p=>{h.rtcpFeedback.find(v=>v.type===p.type&&v.parameter===p.parameter)||h.rtcpFeedback.push(p)})}),r},e.writeRtpDescription=function(t,r){let a="";a+="m="+t+" ",a+=r.codecs.length>0?"9":"0",a+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",a+=r.codecs.map(c=>c.preferredPayloadType!==void 0?c.preferredPayloadType:c.payloadType).join(" ")+`\r
`,a+=`c=IN IP4 0.0.0.0\r
`,a+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(c=>{a+=e.writeRtpMap(c),a+=e.writeFmtp(c),a+=e.writeRtcpFb(c)});let l=0;return r.codecs.forEach(c=>{c.maxptime>l&&(l=c.maxptime)}),l>0&&(a+="a=maxptime:"+l+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(c=>{a+=e.writeExtmap(c)}),a},e.parseRtpEncodingParameters=function(t){const r=[],a=e.parseRtpParameters(t),l=a.fecMechanisms.indexOf("RED")!==-1,c=a.fecMechanisms.indexOf("ULPFEC")!==-1,h=e.matchPrefix(t,"a=ssrc:").map(x=>e.parseSsrcMedia(x)).filter(x=>x.attribute==="cname"),p=h.length>0&&h[0].ssrc;let g;const v=e.matchPrefix(t,"a=ssrc-group:FID").map(x=>x.substring(17).split(" ").map(R=>parseInt(R,10)));v.length>0&&v[0].length>1&&v[0][0]===p&&(g=v[0][1]),a.codecs.forEach(x=>{if(x.name.toUpperCase()==="RTX"&&x.parameters.apt){let C={ssrc:p,codecPayloadType:parseInt(x.parameters.apt,10)};p&&g&&(C.rtx={ssrc:g}),r.push(C),l&&(C=JSON.parse(JSON.stringify(C)),C.fec={ssrc:p,mechanism:c?"red+ulpfec":"red"},r.push(C))}}),r.length===0&&p&&r.push({ssrc:p});let b=e.matchPrefix(t,"b=");return b.length&&(b[0].indexOf("b=TIAS:")===0?b=parseInt(b[0].substring(7),10):b[0].indexOf("b=AS:")===0?b=parseInt(b[0].substring(5),10)*1e3*.95-2e3*8:b=void 0,r.forEach(x=>{x.maxBitrate=b})),r},e.parseRtcpParameters=function(t){const r={},a=e.matchPrefix(t,"a=ssrc:").map(h=>e.parseSsrcMedia(h)).filter(h=>h.attribute==="cname")[0];a&&(r.cname=a.value,r.ssrc=a.ssrc);const l=e.matchPrefix(t,"a=rtcp-rsize");r.reducedSize=l.length>0,r.compound=l.length===0;const c=e.matchPrefix(t,"a=rtcp-mux");return r.mux=c.length>0,r},e.writeRtcpParameters=function(t){let r="";return t.reducedSize&&(r+=`a=rtcp-rsize\r
`),t.mux&&(r+=`a=rtcp-mux\r
`),t.ssrc!==void 0&&t.cname&&(r+="a=ssrc:"+t.ssrc+" cname:"+t.cname+`\r
`),r},e.parseMsid=function(t){let r;const a=e.matchPrefix(t,"a=msid:");if(a.length===1)return r=a[0].substring(7).split(" "),{stream:r[0],track:r[1]};const l=e.matchPrefix(t,"a=ssrc:").map(c=>e.parseSsrcMedia(c)).filter(c=>c.attribute==="msid");if(l.length>0)return r=l[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(t){const r=e.parseMLine(t),a=e.matchPrefix(t,"a=max-message-size:");let l;a.length>0&&(l=parseInt(a[0].substring(19),10)),isNaN(l)&&(l=65536);const c=e.matchPrefix(t,"a=sctp-port:");if(c.length>0)return{port:parseInt(c[0].substring(12),10),protocol:r.fmt,maxMessageSize:l};const h=e.matchPrefix(t,"a=sctpmap:");if(h.length>0){const p=h[0].substring(10).split(" ");return{port:parseInt(p[0],10),protocol:p[1],maxMessageSize:l}}},e.writeSctpDescription=function(t,r){let a=[];return t.protocol!=="DTLS/SCTP"?a=["m="+t.kind+" 9 "+t.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:a=["m="+t.kind+" 9 "+t.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&a.push("a=max-message-size:"+r.maxMessageSize+`\r
`),a.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(t,r,a){let l;const c=r!==void 0?r:2;return t?l=t:l=e.generateSessionId(),`v=0\r
o=`+(a||"thisisadapterortc")+" "+l+" "+c+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(t,r){const a=e.splitLines(t);for(let l=0;l<a.length;l++)switch(a[l]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return a[l].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(t){return e.splitLines(t)[0].split(" ")[0].substring(2)},e.isRejected=function(t){return t.split(" ",2)[1]==="0"},e.parseMLine=function(t){const a=e.splitLines(t)[0].substring(2).split(" ");return{kind:a[0],port:parseInt(a[1],10),protocol:a[2],fmt:a.slice(3).join(" ")}},e.parseOLine=function(t){const a=e.matchPrefix(t,"o=")[0].substring(2).split(" ");return{username:a[0],sessionId:a[1],sessionVersion:parseInt(a[2],10),netType:a[3],addressType:a[4],address:a[5]}},e.isValidSDP=function(t){if(typeof t!="string"||t.length===0)return!1;const r=e.splitLines(t);for(let a=0;a<r.length;a++)if(r[a].length<2||r[a].charAt(1)!=="=")return!1;return!0},n.exports=e})(Ry)),Ry.exports}var rA=TO();const zl=rd(rA),CO=R3({__proto__:null,default:zl},[rA]);function Sf(n){if(!n.RTCIceCandidate||n.RTCIceCandidate&&"foundation"in n.RTCIceCandidate.prototype)return;const e=n.RTCIceCandidate;n.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const a=new e(r),l=zl.parseCandidate(r.candidate);for(const c in l)c in a||Object.defineProperty(a,c,{value:l[c]});return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new e(r)},n.RTCIceCandidate.prototype=e.prototype,Do(n,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new n.RTCIceCandidate(t.candidate),writable:"false"}),t))}function A0(n){!n.RTCIceCandidate||n.RTCIceCandidate&&"relayProtocol"in n.RTCIceCandidate.prototype||Do(n,"icecandidate",e=>{if(e.candidate){const t=zl.parseCandidate(e.candidate.candidate);t.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e})}function Tf(n,e){if(!n.RTCPeerConnection)return;"sctp"in n.RTCPeerConnection.prototype||Object.defineProperty(n.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const t=function(h){if(!h||!h.sdp)return!1;const p=zl.splitSections(h.sdp);return p.shift(),p.some(g=>{const v=zl.parseMLine(g);return v&&v.kind==="application"&&v.protocol.indexOf("SCTP")!==-1})},r=function(h){const p=h.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(p===null||p.length<2)return-1;const g=parseInt(p[1],10);return g!==g?-1:g},a=function(h){let p=65536;return e.browser==="firefox"&&(e.version<57?h===-1?p=16384:p=2147483637:e.version<60?p=e.version===57?65535:65536:p=2147483637),p},l=function(h,p){let g=65536;e.browser==="firefox"&&e.version===57&&(g=65535);const v=zl.matchPrefix(h.sdp,"a=max-message-size:");return v.length>0?g=parseInt(v[0].substring(19),10):e.browser==="firefox"&&p!==-1&&(g=2147483637),g},c=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:p}=this.getConfiguration();p==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(t(arguments[0])){const p=r(arguments[0]),g=a(p),v=l(arguments[0],p);let b;g===0&&v===0?b=Number.POSITIVE_INFINITY:g===0||v===0?b=Math.max(g,v):b=Math.min(g,v);const x={};Object.defineProperty(x,"maxMessageSize",{get(){return b}}),this._sctp=x}return c.apply(this,arguments)}}function Cf(n){if(!(n.RTCPeerConnection&&"createDataChannel"in n.RTCPeerConnection.prototype))return;function e(r,a){const l=r.send;r.send=function(){const h=arguments[0],p=h.length||h.size||h.byteLength;if(r.readyState==="open"&&a.sctp&&p>a.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+a.sctp.maxMessageSize+" bytes)");return l.apply(r,arguments)}}const t=n.RTCPeerConnection.prototype.createDataChannel;n.RTCPeerConnection.prototype.createDataChannel=function(){const a=t.apply(this,arguments);return e(a,this),a},Do(n,"datachannel",r=>(e(r.channel,r.target),r))}function k0(n){if(!n.RTCPeerConnection||"connectionState"in n.RTCPeerConnection.prototype)return;const e=n.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(t){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),t&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=t)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(t=>{const r=e[t];e[t]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=a=>{const l=a.target;if(l._lastConnectionState!==l.connectionState){l._lastConnectionState=l.connectionState;const c=new Event("connectionstatechange",a);l.dispatchEvent(c)}return a},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function R0(n,e){if(!n.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const t=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(a){if(a&&a.sdp&&a.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const l=a.sdp.split(`
`).filter(c=>c.trim()!=="a=extmap-allow-mixed").join(`
`);n.RTCSessionDescription&&a instanceof n.RTCSessionDescription?arguments[0]=new n.RTCSessionDescription({type:a.type,sdp:l}):a.sdp=l}return t.apply(this,arguments)}}function Af(n,e){if(!(n.RTCPeerConnection&&n.RTCPeerConnection.prototype))return;const t=n.RTCPeerConnection.prototype.addIceCandidate;!t||t.length===0||(n.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function kf(n,e){if(!(n.RTCPeerConnection&&n.RTCPeerConnection.prototype))return;const t=n.RTCPeerConnection.prototype.setLocalDescription;!t||t.length===0||(n.RTCPeerConnection.prototype.setLocalDescription=function(){let a=arguments[0]||{};if(typeof a!="object"||a.type&&a.sdp)return t.apply(this,arguments);if(a={type:a.type,sdp:a.sdp},!a.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":a.type="offer";break;default:a.type="answer";break}return a.sdp||a.type!=="offer"&&a.type!=="answer"?t.apply(this,[a]):(a.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(c=>t.apply(this,[c]))})}const AO=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:R0,shimAddIceCandidateNullOrEmpty:Af,shimConnectionState:k0,shimMaxMessageSize:Tf,shimParameterlessSetLocalDescription:kf,shimRTCIceCandidate:Sf,shimRTCIceCandidateRelayProtocol:A0,shimSendThrowTypeError:Cf},Symbol.toStringTag,{value:"Module"}));function kO({window:n}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const t=kC,r=wO(n),a={browserDetails:r,commonShim:AO,extractVersion:ku,disableLog:xO,disableWarnings:EO,sdp:CO};switch(r.browser){case"chrome":if(!cw||!T0||!e.shimChrome)return t("Chrome shim is not included in this adapter release."),a;if(r.version===null)return t("Chrome shim can not determine version, not shimming."),a;t("adapter.js shimming chrome."),a.browserShim=cw,Af(n,r),kf(n),NC(n,r),IC(n),T0(n,r),jC(n),PC(n,r),DC(n),MC(n),LC(n,r),Sf(n),A0(n),k0(n),Tf(n,r),Cf(n),R0(n,r);break;case"firefox":if(!uw||!C0||!e.shimFirefox)return t("Firefox shim is not included in this adapter release."),a;t("adapter.js shimming firefox."),a.browserShim=uw,Af(n,r),kf(n),VC(n,r),C0(n,r),UC(n),FC(n),zC(n),BC(n),$C(n),HC(n),qC(n),GC(n),YC(n),Sf(n),k0(n),Tf(n,r),Cf(n);break;case"safari":if(!dw||!e.shimSafari)return t("Safari shim is not included in this adapter release."),a;t("adapter.js shimming safari."),a.browserShim=dw,Af(n,r),kf(n),ZC(n),tA(n),XC(n),KC(n),QC(n),eA(n),WC(n),nA(n),Sf(n),A0(n),Tf(n,r),Cf(n),R0(n,r);break;default:t("Unsupported browser!");break}return a}const fw=kO({window:typeof window>"u"?void 0:window});function Mo(n,e,t,r){Object.defineProperty(n,e,{get:t,set:r,enumerable:!0,configurable:!0})}class sA{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const t=[],r=e.byteLength,a=Math.ceil(r/this.chunkedMTU);let l=0,c=0;for(;c<r;){const h=Math.min(r,c+this.chunkedMTU),p=e.slice(c,h),g={__peerData:this._dataCount,n:l,data:p,total:a};t.push(g),c=h,l++}return this._dataCount++,t}}}function RO(n){let e=0;for(const a of n)e+=a.byteLength;const t=new Uint8Array(e);let r=0;for(const a of n)t.set(a,r),r+=a.byteLength;return t}const Ny=fw.default||fw,yu=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const n=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(n)?n==="chrome"?e>=this.minChromeVersion:n==="firefox"?e>=this.minFirefoxVersion:n==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return Ny.browserDetails.browser}getVersion(){return Ny.browserDetails.version||0}isUnifiedPlanSupported(){const n=this.getBrowser(),e=Ny.browserDetails.version||0;if(n==="chrome"&&e<this.minChromeVersion)return!1;if(n==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let t,r=!1;try{t=new RTCPeerConnection,t.addTransceiver("audio"),r=!0}catch{}finally{t&&t.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},NO=n=>!n||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(n),iA=()=>Math.random().toString(36).slice(2),pw={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class IO extends sA{noop(){}blobToArrayBuffer(e,t){const r=new FileReader;return r.onload=function(a){a.target&&t(a.target.result)},r.readAsArrayBuffer(e),r}binaryStringToArrayBuffer(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r)&255;return t.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=pw,this.browser=yu.getBrowser(),this.browserVersion=yu.getVersion(),this.pack=TC,this.unpack=SC,this.supports=(function(){const t={browser:yu.isBrowserSupported(),webRTC:yu.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;let r;try{r=new RTCPeerConnection(pw),t.audioVideo=!0;let a;try{a=r.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!a.ordered;try{a.binaryType="blob",t.binaryBlob=!yu.isIOS}catch{}}catch{}finally{a&&a.close()}}catch{}finally{r&&r.close()}return t})(),this.validateId=NO,this.randomToken=iA}}const or=new IO,jO="PeerJS: ";class DO{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...t){const r=[jO,...t];for(const a in r)r[a]instanceof Error&&(r[a]="("+r[a].name+") "+r[a].message);e>=3?console.log(...r):e>=2?console.warn("WARNING",...r):e>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var Ue=new DO,s1={},MO=Object.prototype.hasOwnProperty,Wn="~";function Qu(){}Object.create&&(Qu.prototype=Object.create(null),new Qu().__proto__||(Wn=!1));function OO(n,e,t){this.fn=n,this.context=e,this.once=t||!1}function aA(n,e,t,r,a){if(typeof t!="function")throw new TypeError("The listener must be a function");var l=new OO(t,r||n,a),c=Wn?Wn+e:e;return n._events[c]?n._events[c].fn?n._events[c]=[n._events[c],l]:n._events[c].push(l):(n._events[c]=l,n._eventsCount++),n}function Rf(n,e){--n._eventsCount===0?n._events=new Qu:delete n._events[e]}function qn(){this._events=new Qu,this._eventsCount=0}qn.prototype.eventNames=function(){var e=[],t,r;if(this._eventsCount===0)return e;for(r in t=this._events)MO.call(t,r)&&e.push(Wn?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};qn.prototype.listeners=function(e){var t=Wn?Wn+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var a=0,l=r.length,c=new Array(l);a<l;a++)c[a]=r[a].fn;return c};qn.prototype.listenerCount=function(e){var t=Wn?Wn+e:e,r=this._events[t];return r?r.fn?1:r.length:0};qn.prototype.emit=function(e,t,r,a,l,c){var h=Wn?Wn+e:e;if(!this._events[h])return!1;var p=this._events[h],g=arguments.length,v,b;if(p.fn){switch(p.once&&this.removeListener(e,p.fn,void 0,!0),g){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,t),!0;case 3:return p.fn.call(p.context,t,r),!0;case 4:return p.fn.call(p.context,t,r,a),!0;case 5:return p.fn.call(p.context,t,r,a,l),!0;case 6:return p.fn.call(p.context,t,r,a,l,c),!0}for(b=1,v=new Array(g-1);b<g;b++)v[b-1]=arguments[b];p.fn.apply(p.context,v)}else{var x=p.length,C;for(b=0;b<x;b++)switch(p[b].once&&this.removeListener(e,p[b].fn,void 0,!0),g){case 1:p[b].fn.call(p[b].context);break;case 2:p[b].fn.call(p[b].context,t);break;case 3:p[b].fn.call(p[b].context,t,r);break;case 4:p[b].fn.call(p[b].context,t,r,a);break;default:if(!v)for(C=1,v=new Array(g-1);C<g;C++)v[C-1]=arguments[C];p[b].fn.apply(p[b].context,v)}}return!0};qn.prototype.on=function(e,t,r){return aA(this,e,t,r,!1)};qn.prototype.once=function(e,t,r){return aA(this,e,t,r,!0)};qn.prototype.removeListener=function(e,t,r,a){var l=Wn?Wn+e:e;if(!this._events[l])return this;if(!t)return Rf(this,l),this;var c=this._events[l];if(c.fn)c.fn===t&&(!a||c.once)&&(!r||c.context===r)&&Rf(this,l);else{for(var h=0,p=[],g=c.length;h<g;h++)(c[h].fn!==t||a&&!c[h].once||r&&c[h].context!==r)&&p.push(c[h]);p.length?this._events[l]=p.length===1?p[0]:p:Rf(this,l)}return this};qn.prototype.removeAllListeners=function(e){var t;return e?(t=Wn?Wn+e:e,this._events[t]&&Rf(this,t)):(this._events=new Qu,this._eventsCount=0),this};qn.prototype.off=qn.prototype.removeListener;qn.prototype.addListener=qn.prototype.on;qn.prefixed=Wn;qn.EventEmitter=qn;s1=qn;var Oo={};Mo(Oo,"ConnectionType",()=>xa);Mo(Oo,"PeerErrorType",()=>fn);Mo(Oo,"BaseConnectionErrorType",()=>N0);Mo(Oo,"DataConnectionErrorType",()=>i1);Mo(Oo,"SerializationType",()=>Qp);Mo(Oo,"SocketEventType",()=>ma);Mo(Oo,"ServerMessageType",()=>Bn);var xa=(function(n){return n.Data="data",n.Media="media",n})({}),fn=(function(n){return n.BrowserIncompatible="browser-incompatible",n.Disconnected="disconnected",n.InvalidID="invalid-id",n.InvalidKey="invalid-key",n.Network="network",n.PeerUnavailable="peer-unavailable",n.SslUnavailable="ssl-unavailable",n.ServerError="server-error",n.SocketError="socket-error",n.SocketClosed="socket-closed",n.UnavailableID="unavailable-id",n.WebRTC="webrtc",n})({}),N0=(function(n){return n.NegotiationFailed="negotiation-failed",n.ConnectionClosed="connection-closed",n})({}),i1=(function(n){return n.NotOpenYet="not-open-yet",n.MessageToBig="message-too-big",n})({}),Qp=(function(n){return n.Binary="binary",n.BinaryUTF8="binary-utf8",n.JSON="json",n.None="raw",n})({}),ma=(function(n){return n.Message="message",n.Disconnected="disconnected",n.Error="error",n.Close="close",n})({}),Bn=(function(n){return n.Heartbeat="HEARTBEAT",n.Candidate="CANDIDATE",n.Offer="OFFER",n.Answer="ANSWER",n.Open="OPEN",n.Error="ERROR",n.IdTaken="ID-TAKEN",n.InvalidKey="INVALID-KEY",n.Leave="LEAVE",n.Expire="EXPIRE",n})({});const oA="1.5.5";class PO extends s1.EventEmitter{constructor(e,t,r,a,l,c=5e3){super(),this.pingInterval=c,this._disconnected=!0,this._messagesQueue=[];const h=e?"wss://":"ws://";this._baseUrl=h+t+":"+r+a+"peerjs?key="+l}start(e,t){this._id=e;const r=`${this._baseUrl}&id=${e}&token=${t}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+oA),this._disconnected=!1,this._socket.onmessage=a=>{let l;try{l=JSON.parse(a.data),Ue.log("Server message received:",l)}catch{Ue.log("Invalid server message",a.data);return}this.emit(ma.Message,l)},this._socket.onclose=a=>{this._disconnected||(Ue.log("Socket closed.",a),this._cleanup(),this._disconnected=!0,this.emit(ma.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),Ue.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){Ue.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:Bn.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const t of e)this.send(t)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(ma.Error,"Invalid message");return}if(!this._wsOpen())return;const t=JSON.stringify(e);this._socket.send(t)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class lA{constructor(e){this.connection=e}startConnection(e){const t=this._startPeerConnection();if(this.connection.peerConnection=t,this.connection.type===xa.Media&&e._stream&&this._addTracksToConnection(e._stream,t),e.originator){const r=this.connection,a={ordered:!!e.reliable},l=t.createDataChannel(r.label,a);r._initializeDataChannel(l),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){Ue.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const t=this.connection.peer,r=this.connection.connectionId,a=this.connection.type,l=this.connection.provider;Ue.log("Listening for ICE candidates."),e.onicecandidate=c=>{!c.candidate||!c.candidate.candidate||(Ue.log(`Received ICE candidates for ${t}:`,c.candidate),l.socket.send({type:Bn.Candidate,payload:{candidate:c.candidate,type:a,connectionId:r},dst:t}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":Ue.log("iceConnectionState is failed, closing connections to "+t),this.connection.emitError(N0.NegotiationFailed,"Negotiation of connection to "+t+" failed."),this.connection.close();break;case"closed":Ue.log("iceConnectionState is closed, closing connections to "+t),this.connection.emitError(N0.ConnectionClosed,"Connection to "+t+" closed."),this.connection.close();break;case"disconnected":Ue.log("iceConnectionState changed to disconnected on the connection with "+t);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},Ue.log("Listening for data channel"),e.ondatachannel=c=>{Ue.log("Received data channel");const h=c.channel;l.getConnection(t,r)._initializeDataChannel(h)},Ue.log("Listening for remote stream"),e.ontrack=c=>{Ue.log("Received remote stream");const h=c.streams[0],p=l.getConnection(t,r);if(p.type===xa.Media){const g=p;this._addStreamToMediaConnection(h,g)}}}cleanup(){Ue.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const t=e.signalingState!=="closed";let r=!1;const a=this.connection.dataChannel;a&&(r=!!a.readyState&&a.readyState!=="closed"),(t||r)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const r=await e.createOffer(this.connection.options.constraints);Ue.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),Ue.log("Set localDescription:",r,`for:${this.connection.peer}`);let a={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===xa.Data){const l=this.connection;a={...a,label:l.label,reliable:l.reliable,serialization:l.serialization}}t.socket.send({type:Bn.Offer,payload:a,dst:this.connection.peer})}catch(a){a!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(t.emitError(fn.WebRTC,a),Ue.log("Failed to setLocalDescription, ",a))}}catch(r){t.emitError(fn.WebRTC,r),Ue.log("Failed to createOffer, ",r)}}async _makeAnswer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const r=await e.createAnswer();Ue.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),Ue.log("Set localDescription:",r,`for:${this.connection.peer}`),t.socket.send({type:Bn.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(a){t.emitError(fn.WebRTC,a),Ue.log("Failed to setLocalDescription, ",a)}}catch(r){t.emitError(fn.WebRTC,r),Ue.log("Failed to create answer, ",r)}}async handleSDP(e,t){t=new RTCSessionDescription(t);const r=this.connection.peerConnection,a=this.connection.provider;Ue.log("Setting remote description",t);const l=this;try{await r.setRemoteDescription(t),Ue.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await l._makeAnswer()}catch(c){a.emitError(fn.WebRTC,c),Ue.log("Failed to setRemoteDescription, ",c)}}async handleCandidate(e){Ue.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),Ue.log(`Added ICE candidate for:${this.connection.peer}`)}catch(t){this.connection.provider.emitError(fn.WebRTC,t),Ue.log("Failed to handleCandidate, ",t)}}_addTracksToConnection(e,t){if(Ue.log(`add tracks from stream ${e.id} to peer connection`),!t.addTrack)return Ue.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(r=>{t.addTrack(r,e)})}_addStreamToMediaConnection(e,t){Ue.log(`add stream ${e.id} to media connection ${t.connectionId}`),t.addStream(e)}}class cA extends s1.EventEmitter{emitError(e,t){Ue.error("Error:",t),this.emit("error",new LO(`${e}`,t))}}class LO extends Error{constructor(e,t){typeof t=="string"?super(t):(super(),Object.assign(this,t)),this.type=e}}class uA extends cA{get open(){return this._open}constructor(e,t,r){super(),this.peer=e,this.provider=t,this.options=r,this._open=!1,this.metadata=r.metadata}}class dp extends uA{static#e=this.ID_PREFIX="mc_";get type(){return xa.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,t,r){super(e,t,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||dp.ID_PREFIX+or.randomToken(),this._negotiator=new lA(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{Ue.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{Ue.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){Ue.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const t=e.type,r=e.payload;switch(e.type){case Bn.Answer:this._negotiator.handleSDP(t,r.sdp),this._open=!0;break;case Bn.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:Ue.warn(`Unrecognized message type:${t} from peer:${this.peer}`);break}}answer(e,t={}){if(this._localStream){Ue.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,t&&t.sdpTransform&&(this.options.sdpTransform=t.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const r=this.provider._getMessages(this.connectionId);for(const a of r)this.handleMessage(a);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class VO{constructor(e){this._options=e}_buildRequest(e){const t=this._options.secure?"https":"http",{host:r,port:a,path:l,key:c}=this._options,h=new URL(`${t}://${r}:${a}${l}${c}/${e}`);return h.searchParams.set("ts",`${Date.now()}${Math.random()}`),h.searchParams.set("version",oA),fetch(h.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){Ue.error("Error retrieving ID",e);let t="";throw this._options.path==="/"&&this._options.host!==or.CLOUD_HOST&&(t=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+t)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let t="";throw this._options.host===or.CLOUD_HOST?t="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":t="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+t)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw Ue.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}class hp extends uA{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return xa.Data}constructor(e,t,r){super(e,t,r),this.connectionId=this.options.connectionId||hp.ID_PREFIX+iA(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new lA(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{Ue.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=t=>{Ue.log(`DC#${this.connectionId} dc onmessage:`,t.data)},this.dataChannel.onclose=()=>{Ue.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,t=!1){if(!this.open){this.emitError(i1.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,t)}async handleMessage(e){const t=e.payload;switch(e.type){case Bn.Answer:await this._negotiator.handleSDP(e.type,t.sdp);break;case Bn.Candidate:await this._negotiator.handleCandidate(t.candidate);break;default:Ue.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}}class a1 extends hp{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",t=>this._handleDataMessage(t))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>hp.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(t){return Ue.error(`DC#:${this.connectionId} Error when sending:`,t),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Iy extends a1{close(e){super.close(e),this._chunkedData={}}constructor(e,t,r){super(e,t,r),this.chunker=new sA,this.serialization=Qp.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const t=SC(e),r=t.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(t);return}this.emit("data",t)}_handleChunk(e){const t=e.__peerData,r=this._chunkedData[t]||{data:[],count:0,total:e.total};if(r.data[e.n]=new Uint8Array(e.data),r.count++,this._chunkedData[t]=r,r.total===r.count){delete this._chunkedData[t];const a=RO(r.data);this._handleDataMessage({data:a})}}_send(e,t){const r=TC(e);if(r instanceof Promise)return this._send_blob(r);if(!t&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(e){const t=await e;if(t.byteLength>this.chunker.chunkedMTU){this._sendChunks(t);return}this._bufferedSend(t)}_sendChunks(e){const t=this.chunker.chunk(e);Ue.log(`DC#${this.connectionId} Try to send ${t.length} chunks...`);for(const r of t)this.send(r,!0)}}class UO extends a1{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,t){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=Qp.None}}class zO extends a1{_handleDataMessage({data:e}){const t=this.parse(this.decoder.decode(e)),r=t.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",t)}_send(e,t){const r=this.encoder.encode(this.stringify(e));if(r.byteLength>=or.chunkedMTU){this.emitError(i1.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...e){super(...e),this.serialization=Qp.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class o1 extends cA{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[t,r]of this._connections)e[t]=r;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,t){super(),this._serializers={raw:UO,json:zO,binary:Iy,"binary-utf8":Iy,default:Iy},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(e&&e.constructor==Object?t=e:e&&(r=e.toString()),t={debug:0,host:or.CLOUD_HOST,port:or.CLOUD_PORT,path:"/",key:o1.DEFAULT_KEY,token:or.randomToken(),config:or.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...t},this._options=t,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==or.CLOUD_HOST?this._options.secure=or.isSecure():this._options.host==or.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&Ue.setLogFunction(this._options.logFunction),Ue.logLevel=this._options.debug||0,this._api=new VO(t),this._socket=this._createServerConnection(),!or.supports.audioVideo&&!or.supports.data){this._delayedAbort(fn.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!or.validateId(r)){this._delayedAbort(fn.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(a=>this._initialize(a)).catch(a=>this._abort(fn.ServerError,a))}_createServerConnection(){const e=new PO(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(ma.Message,t=>{this._handleMessage(t)}),e.on(ma.Error,t=>{this._abort(fn.SocketError,t)}),e.on(ma.Disconnected,()=>{this.disconnected||(this.emitError(fn.Network,"Lost connection to server."),this.disconnect())}),e.on(ma.Close,()=>{this.disconnected||this._abort(fn.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const t=e.type,r=e.payload,a=e.src;switch(t){case Bn.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Bn.Error:this._abort(fn.ServerError,r.msg);break;case Bn.IdTaken:this._abort(fn.UnavailableID,`ID "${this.id}" is taken`);break;case Bn.InvalidKey:this._abort(fn.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case Bn.Leave:Ue.log(`Received leave message from ${a}`),this._cleanupPeer(a),this._connections.delete(a);break;case Bn.Expire:this.emitError(fn.PeerUnavailable,`Could not connect to peer ${a}`);break;case Bn.Offer:{const l=r.connectionId;let c=this.getConnection(a,l);if(c&&(c.close(),Ue.warn(`Offer received for existing Connection ID:${l}`)),r.type===xa.Media){const p=new dp(a,this,{connectionId:l,_payload:r,metadata:r.metadata});c=p,this._addConnection(a,c),this.emit("call",p)}else if(r.type===xa.Data){const p=new this._serializers[r.serialization](a,this,{connectionId:l,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});c=p,this._addConnection(a,c),this.emit("connection",p)}else{Ue.warn(`Received malformed connection type:${r.type}`);return}const h=this._getMessages(l);for(const p of h)c.handleMessage(p);break}default:{if(!r){Ue.warn(`You received a malformed message from ${a} of type ${t}`);return}const l=r.connectionId,c=this.getConnection(a,l);c&&c.peerConnection?c.handleMessage(e):l?this._storeMessage(l,e):Ue.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,t){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(t)}_getMessages(e){const t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]}connect(e,t={}){if(t={serialization:"default",...t},this.disconnected){Ue.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(fn.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[t.serialization](e,this,t);return this._addConnection(e,r),r}call(e,t,r={}){if(this.disconnected){Ue.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(fn.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!t){Ue.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const a=new dp(e,this,{...r,_stream:t});return this._addConnection(e,a),a}_addConnection(e,t){Ue.log(`add connection ${t.type}:${t.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(t)}_removeConnection(e){const t=this._connections.get(e.peer);if(t){const r=t.indexOf(e);r!==-1&&t.splice(r,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,t){const r=this._connections.get(e);if(!r)return null;for(const a of r)if(a.connectionId===t)return a;return null}_delayedAbort(e,t){setTimeout(()=>{this._abort(e,t)},0)}_abort(e,t){Ue.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(Ue.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const t=this._connections.get(e);if(t)for(const r of t)r.close()}disconnect(){if(this.disconnected)return;const e=this.id;Ue.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)Ue.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)Ue.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=t=>{}){this._api.listAllPeers().then(t=>e(t)).catch(t=>this._abort(fn.ServerError,t))}}var BO=o1;let jy=null,Xu=[],fp=[];const dA=()=>(jy||(jy=new(window.AudioContext||window.webkitAudioContext)),jy),Wu=()=>{Xu.forEach(n=>{try{n.stop(),n.disconnect()}catch{}}),Xu=[],fp.forEach(n=>{try{n.disconnect()}catch{}}),fp=[]},FO=()=>{try{const n=dA();n.state==="suspended"&&n.resume(),Wu();const e=n.createOscillator(),t=n.createGain();e.type="sine",e.frequency.value=440,e.connect(t),t.connect(n.destination);const r=n.currentTime;let a=!0;const l=()=>{if(!a)return;const h=n.createOscillator(),p=n.createGain();h.connect(p),p.connect(n.destination),h.frequency.value=425,h.type="sine";const g=n.currentTime,v=n.createOscillator();v.type="sine",v.frequency.value=20;const b=n.createGain();b.gain.value=500,v.connect(b),b.connect(h.frequency),v.start(g),v.stop(g+2),p.gain.setValueAtTime(0,g),p.gain.linearRampToValueAtTime(.1,g+.1),p.gain.setValueAtTime(.1,g+1.8),p.gain.linearRampToValueAtTime(0,g+2),h.start(g),h.stop(g+2),Xu.push(h),Xu.push(v),fp.push(p)};l();const c=setInterval(l,4e3);return()=>{a=!1,clearInterval(c),Wu()}}catch(n){return console.error("Error playing outgoing ring:",n),()=>{}}},$O=()=>{try{const n=dA();n.state==="suspended"&&n.resume(),Wu();let e=!0;const t=()=>{if(!e)return;const a=n.currentTime,l=(c,h)=>{const p=n.createOscillator(),g=n.createGain();p.connect(g),g.connect(n.destination),p.frequency.value=h,p.type="square",g.gain.setValueAtTime(0,c),g.gain.linearRampToValueAtTime(.1,c+.05),g.gain.setValueAtTime(.1,c+.2),g.gain.linearRampToValueAtTime(0,c+.25),p.start(c),p.stop(c+.3),Xu.push(p),fp.push(g)};l(a,880),l(a+.4,880),l(a+.8,880)};t();const r=setInterval(t,3e3);return()=>{e=!1,clearInterval(r),Wu()}}catch(n){return console.error("Error playing incoming ring:",n),()=>{}}},mw=()=>{Wu()},hA=P.createContext(),Xp=()=>{const n=P.useContext(hA);if(!n)throw new Error("useCall must be used within CallProvider");return n},HO=({children:n})=>{const{currentUser:e,userProfile:t}=Cr(),{error:r}=Ys(),[a,l]=P.useState(null),[c,h]=P.useState(null),[p,g]=P.useState("idle"),[v,b]=P.useState(null),[x,C]=P.useState(null),[R,j]=P.useState(null),[A,B]=P.useState(null),[G,I]=P.useState(null),[V,z]=P.useState(!1),[F,w]=P.useState(!1),[S,k]=P.useState({audioInputs:[],videoInputs:[],audioOutputs:[]}),[D,M]=P.useState(""),[U,O]=P.useState("");P.useRef(null),P.useRef(null);const be=P.useRef(null),Ee=P.useRef(null),$=P.useRef(null),K=P.useRef(null);P.useEffect(()=>{Ee.current=A},[A]),P.useEffect(()=>{$.current=R},[R]),P.useEffect(()=>(K.current&&(K.current(),K.current=null),mw(),p==="incoming"?K.current=$O():p==="outgoing"&&(K.current=FO()),()=>{K.current&&K.current(),mw()}),[p]),P.useEffect(()=>{if(!e)return;const _e=new BO;return _e.on("open",ce=>{console.log("My Peer ID is:",ce),h(ce),l(_e)}),_e.on("call",ce=>{console.log("Receiving PeerJS call connection..."),$.current&&$.current.peer===ce.peer&&(console.log("Replacing existing call (upgrade/renegotiation detected)"),$.current.removeAllListeners&&$.current.removeAllListeners("close"),$.current.close());const ve=Ee.current||ye.current;ve?(console.log("Answering call with local stream"),ce.answer(ve)):(console.warn("No local stream found when answering! Answering audio-only or empty."),ce.answer()),ce.on("stream",ie=>{console.log("Received remote stream"),I(ie)}),ce.on("close",()=>{J()}),j(ce),g("connected")}),_e.on("error",ce=>{console.error("PeerJS Error:",ce),ce.type}),()=>{_e.destroy()}},[e]),P.useEffect(()=>{if(!e)return;const _e=ts(pt(ge,"users",e.uid,"incomingCalls"),uo("status","==","pending")),ce=wr(_e,ve=>{ve.docChanges().forEach(ie=>{if(ie.type==="added"){const Ne=ie.doc.data();b({id:ie.doc.id,...Ne}),g("incoming")}ie.type==="removed"&&b(Ne=>Ne&&Ne.id===ie.doc.id?(g(Me=>(Me!=="connected"&&J(!1),Me)),null):Ne)})});return()=>ce()},[e]);const W=async()=>{try{const _e=await navigator.mediaDevices.enumerateDevices(),ce=_e.filter(Ne=>Ne.kind==="audioinput"),ve=_e.filter(Ne=>Ne.kind==="videoinput"),ie=_e.filter(Ne=>Ne.kind==="audiooutput");return k({audioInputs:ce,videoInputs:ve,audioOutputs:ie}),!D&&ce.length>0&&M(ce[0].deviceId),!U&&ve.length>0&&O(ve[0].deviceId),console.log("Devices enumerated:",{audioInputs:ce.length,videoInputs:ve.length}),{audioInputs:ce,videoInputs:ve,audioOutputs:ie}}catch(_e){return console.error("Failed to enumerate devices:",_e),{audioInputs:[],videoInputs:[],audioOutputs:[]}}};P.useEffect(()=>(W(),navigator.mediaDevices.addEventListener("devicechange",W),()=>navigator.mediaDevices.removeEventListener("devicechange",W)),[]);const Te=async(_e=!0)=>{try{S.audioInputs.length===0&&await W();const ce={echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,channelCount:1,sampleRate:48e3,sampleSize:16,...D&&{deviceId:{exact:D}}},ve=_e?{width:1280,height:720,...U&&{deviceId:{exact:U}}}:!1,ie=await navigator.mediaDevices.getUserMedia({video:ve,audio:ce});return console.log("Media stream acquired with selected devices"),B(ie),ie}catch(ce){return console.error("Failed to get local stream",ce),r("Could not access camera/microphone"),null}},Re=async(_e,ce="video")=>{if(!a||!c){r("Connection not ready. Please wait a moment.");return}if(C(_e),g("outgoing"),!await Te(ce==="video")){g("idle");return}w(ce==="voice");try{const ie=e.displayName||t?.displayName||"Unknown",Ne=e.photoURL||t?.photoURL||t?.photoUrl||null,Me=await On(pt(ge,"users",_e.id,"incomingCalls"),{callerId:e.uid,callerName:ie,callerPhotoUrl:Ne,peerId:c,type:ce,status:"pending",timestamp:xt()});be.current=Me.id;const Q=wr(De(ge,"users",_e.id,"incomingCalls",Me.id),ae=>{const we=be.current===Me.id;if(!ae.exists())we&&p==="outgoing"&&(r("Call ended or declined"),J(!1)),Q();else{const Ie=ae.data();Ie.status==="accepted"?we&&g("connected"):Ie.status==="rejected"&&we&&(r("Call declined"),J(!0))}},ae=>{console.warn("Call snapshot error:",ae),be.current===Me.id&&(r("Call declined"),J(!1))})}catch(ie){console.error("Signaling failed:",ie),r("Failed to direct call"),J()}};P.useEffect(()=>{if(!R||!R.peerConnection)return;const _e=()=>{const ce=R.peerConnection.connectionState,ve=R.peerConnection.iceConnectionState;console.log(`Connection State: ${ce}, ICE State: ${ve}`),(ve==="disconnected"||ve==="failed"||ve==="closed")&&(console.warn("Peer connection lost/failed. Ending call..."),ve==="failed"||ve==="closed"?J():ve==="disconnected"&&$.current===R&&setTimeout(()=>{$.current&&$.current.peerConnection.iceConnectionState==="disconnected"&&(console.log("Connection still disconnected after timeout. Ending."),J())},3e3))};return R.peerConnection.addEventListener("iceconnectionstatechange",_e),R.peerConnection.addEventListener("connectionstatechange",_e),()=>{R&&R.peerConnection&&(R.peerConnection.removeEventListener("iceconnectionstatechange",_e),R.peerConnection.removeEventListener("connectionstatechange",_e))}},[R]);const H=async()=>{if(!v||!a)return;g("connected");const _e=v.type==="video",ce=await Te(_e);if(!ce){console.error("Stream failed, rejecting call signal.");try{await rt(De(ge,"users",e.uid,"incomingCalls",v.id),{status:"rejected"})}catch{}J(!1);return}if(_e||w(!0),console.log("Connecting to peer:",v.peerId),(!a||a.disconnected)&&(r("Peer connection lost. Reconnecting..."),a?.reconnect(),await new Promise(ve=>setTimeout(ve,1e3)),!a||a.disconnected)){r("Could not establish P2P connection."),J();return}try{const ve=a.call(v.peerId,ce);if(!ve){r("Call failed to initialize."),J();return}ve.on("stream",ie=>{I(ie)}),ve.on("close",()=>{J()}),ve.on("error",ie=>{console.error("Call error:",ie),J()}),j(ve);try{await rt(De(ge,"users",e.uid,"incomingCalls",v.id),{status:"accepted"})}catch(ie){console.error("Error updating signal doc",ie)}}catch(ve){console.error("Error calling peer:",ve),r("Failed to connect to peer."),J()}},J=async(_e=!0)=>{Ce.current&&(Ce.current.getTracks().forEach(ve=>ve.stop()),Ce.current=null),ye.current=null;const ce=Ee.current;if(ce&&ce.getTracks().forEach(ve=>{ve.stop(),console.log("Stopped track:",ve.kind)}),A&&A.getTracks().forEach(ve=>ve.stop()),B(null),Ee.current=null,R&&(R.close(),j(null)),I(null),g("idle"),b(null),C(null),z(!1),w(!1),be.current&&_e&&x)try{await Wl(De(ge,"users",x.id,"incomingCalls",be.current))}catch{}if(v&&_e)try{p==="incoming"?await rt(De(ge,"users",e.uid,"incomingCalls",v.id),{status:"rejected"}):await Wl(De(ge,"users",e.uid,"incomingCalls",v.id))}catch{}be.current=null},ue=()=>{if(A){const _e=A.getAudioTracks()[0];_e&&(_e.enabled=!_e.enabled,z(!_e.enabled))}},me=()=>{if(A){const _e=A.getVideoTracks()[0];_e&&(_e.enabled=!_e.enabled,w(!_e.enabled))}},Ce=P.useRef(null),ye=P.useRef(null),Se=async()=>{if(Ce.current){await He();return}try{console.log("Requesting display media...");const _e=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1}),ce=_e.getVideoTracks()[0];w(!1),console.log("Display media obtained:",ce.label),A&&(ye.current=A),ce.onended=()=>{console.log("Screen track ended by user/browser UI"),He()},Ce.current=_e;const ve=A?A.getAudioTracks():[],ie=new MediaStream([ce,...ve]);if(B(ie),R&&R.peerConnection){const Me=R.peerConnection.getSenders().find(Q=>Q.track&&Q.track.kind==="video");if(Me)console.log("Found video sender, replacing track..."),await Me.replaceTrack(ce),console.log("Track replaced successfully.");else{console.log("No video sender found (Audio-only call). Renegotiating via Re-Call...");const Q=R.peer,ae=R;if(a&&Q){ae.removeAllListeners("close"),console.log("Starting new call to upgrade stream...");const we=a.call(Q,ie);we.on("stream",Ie=>{console.log("Received remote stream (upgrade)"),I(Ie)}),we.on("close",()=>{J()}),we.on("error",Ie=>{console.error("New Call error:",Ie),J()}),j(we)}}}else console.warn("No active peer connection to share screen with.")}catch(_e){console.error("Error starting screen share:",_e),r("Failed to start screen share")}},He=async()=>{if(Ce.current)if(console.log("Stopping screen share..."),Ce.current.getTracks().forEach(_e=>_e.stop()),Ce.current=null,ye.current){console.log("Reverting to previous stream state...");const _e=ye.current.getVideoTracks()[0];if(R&&R.peerConnection){const ce=R.peerConnection.getSenders().find(ve=>ve.track&&ve.track.kind==="video");if(_e){if(ce)try{await ce.replaceTrack(_e),console.log("Reverted to camera track.")}catch(ve){console.error("Failed to revert track:",ve)}}else ce&&(console.log("Reverting to audio-only, removing video sender..."),R.peerConnection.removeTrack(ce))}B(ye.current),ye.current=null}else{console.log("No stored camera stream, requesting new user media...");try{const _e=await Te(!0);if(_e&&R&&R.peerConnection){const ce=_e.getVideoTracks()[0],ve=R.peerConnection.getSenders().find(ie=>ie.track&&ie.track.kind==="video");ve&&await ve.replaceTrack(ce)}}catch(_e){console.error("Failed to restore camera:",_e)}}},Ge={startCall:Re,answerCall:H,endCall:J,toggleAudio:ue,toggleVideo:me,callStatus:p,incomingCall:v,outgoingCallUser:x,localStream:A,remoteStream:G,isMuted:V,isVideoOff:F,activeCall:R,isScreenSharing:!!Ce.current,toggleScreenShare:Se,availableDevices:S,selectedMicId:D,selectedCameraId:U,setSelectedMicId:M,setSelectedCameraId:O,refreshDevices:W};return d.jsx(hA.Provider,{value:Ge,children:n})},l1=({user:n,isOpen:e,onClose:t,onMessage:r})=>{if(!n)return null;const a=c=>({admin:"#f23f42",moderator:"#faa81a",member:"#80848e"})[c]||"#80848e",{startCall:l}=Xp();return d.jsx(Us,{isOpen:e,onClose:t,title:"",size:"sm",children:d.jsxs("div",{className:"space-y-4 -mt-6",children:[d.jsxs("div",{className:"flex justify-center pt-4",children:[n.photoUrl?d.jsx("img",{src:n.photoUrl,alt:n.displayName,className:"w-24 h-24 rounded-full border-4 border-dark-bg object-cover",onError:c=>{c.target.style.display="none",c.target.nextSibling.style.display="flex"}}):null,d.jsx("div",{className:"w-24 h-24 rounded-full border-4 border-dark-bg bg-brand-primary flex items-center justify-center text-white font-bold text-3xl",style:{display:n.photoUrl?"none":"flex"},children:n.displayName?.[0]?.toUpperCase()||"U"})]}),d.jsxs("div",{className:"text-center space-y-2",children:[d.jsx("h2",{className:"text-2xl font-bold text-dark-text",children:n.displayName||"Unknown"}),d.jsx("div",{className:"flex justify-center",children:d.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium",style:{backgroundColor:`${a(n.role)}20`,color:a(n.role),border:`1px solid ${a(n.role)}50`},children:n.role?.charAt(0).toUpperCase()+n.role?.slice(1)})}),d.jsx("div",{className:"flex items-center justify-center gap-2",children:(()=>{const c=n.presence||(n.isOnline?"online":"offline"),h={online:{color:"bg-green-500",label:"Online"},idle:{color:"bg-yellow-500",label:"Idle"},dnd:{color:"bg-red-500",label:"Do Not Disturb"},invisible:{color:"bg-gray-500",label:"Offline"},offline:{color:"bg-gray-500",label:"Offline"}},p=h[c]||h.offline;return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:Rt("w-3 h-3 rounded-full",p.color)}),d.jsx("span",{className:"text-sm text-dark-muted",children:p.label})]})})()}),n.status&&d.jsxs("div",{className:"flex items-center justify-center gap-2 mt-2",children:[d.jsx("span",{className:"text-lg",children:n.status.emoji}),d.jsx("span",{className:"text-sm text-dark-text",children:n.status.text})]}),n.id!==Cr().currentUser?.uid&&d.jsxs("div",{className:"flex gap-2 justify-center mt-4",children:[d.jsx("button",{onClick:()=>r&&r(n),className:"p-2 rounded-full bg-dark-hover hover:bg-dark-sidebar transition-colors text-dark-text",title:"Send Message",children:d.jsx(W8,{size:20})}),d.jsx("button",{onClick:()=>l(n,"voice"),className:"p-2 rounded-full bg-dark-hover hover:bg-dark-sidebar transition-colors text-dark-text",title:"Voice Call",children:d.jsx(J8,{size:20})}),d.jsx("button",{onClick:()=>l(n,"video"),className:"p-2 rounded-full bg-dark-hover hover:bg-dark-sidebar transition-colors text-dark-text",title:"Video Call",children:d.jsx(cp,{size:20})})]})]}),n.bio&&d.jsxs("div",{className:"bg-dark-bg p-4 rounded-lg",children:[d.jsx("h3",{className:"text-xs font-semibold text-dark-muted uppercase mb-2",children:"About Me"}),d.jsx("p",{className:"text-dark-text text-sm whitespace-pre-wrap",children:n.bio})]}),d.jsxs("div",{className:"bg-dark-bg p-4 rounded-lg",children:[d.jsx("h3",{className:"text-xs font-semibold text-dark-muted uppercase mb-2",children:"Member Since"}),d.jsx("p",{className:"text-dark-text text-sm",children:n.createdAt?new Date(n.createdAt.seconds*1e3).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Unknown"})]})]})})},Jl=({isOpen:n,onClose:e,onConfirm:t,title:r="Confirm Action",message:a="Are you sure you want to proceed?",confirmText:l="Confirm",cancelText:c="Cancel",variant:h="danger"})=>{const p=()=>{t(),e()};return d.jsx(Us,{isOpen:n,onClose:e,title:r,size:"sm",children:d.jsxs("div",{className:"space-y-6",children:[d.jsx("p",{className:"text-dark-text",children:a}),d.jsxs("div",{className:"flex gap-3 justify-end",children:[d.jsx(Ze,{variant:"secondary",onClick:e,children:c}),d.jsx(Ze,{variant:h,onClick:p,children:l})]})]})})},qO=()=>{const n="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let t=0;t<8;t++)e+=n.charAt(Math.floor(Math.random()*n.length));return e},GO=({isOpen:n,onClose:e,serverId:t})=>{const[r,a]=P.useState(""),[l,c]=P.useState(!1),[h,p]=P.useState(!1),[g,v]=P.useState(!1),{success:b,error:x}=Ys(),C=async()=>{c(!0);try{const j=qO();await Yu(De(ge,"inviteCodes",j),{serverId:t,createdAt:xt(),expiresAt:new Date(Date.now()+(g?365*24*60*60*1e3:1440*60*1e3)),maxUses:g?-1:1,uses:0,isActive:!0,isUnlimited:g}),a(j),b("Invite code generated!")}catch(j){console.error("Error generating invite:",j),x("Failed to generate invite code")}finally{c(!1)}},R=()=>{navigator.clipboard.writeText(r),p(!0),b("Copied to clipboard!"),setTimeout(()=>p(!1),2e3)};return d.jsx(Us,{isOpen:n,onClose:e,title:"Invite Code",size:"sm",children:d.jsx("div",{className:"space-y-4",children:r?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"bg-dark-bg p-4 rounded-lg text-center",children:[d.jsx("div",{className:"text-3xl font-mono font-bold text-brand-primary mb-2",children:r}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Ze,{variant:"secondary",onClick:R,className:"flex-1 flex items-center justify-center gap-2",children:h?d.jsxs(d.Fragment,{children:[d.jsx(Ku,{size:20}),"Copied!"]}):d.jsxs(d.Fragment,{children:[d.jsx(tM,{size:20}),"Copy Code"]})}),d.jsx(Ze,{variant:"secondary",onClick:()=>{a(""),p(!1),v(!1)},className:"flex items-center justify-center gap-2 px-4",title:"Generate new code",children:d.jsx(fM,{size:20})})]})]}),d.jsxs("div",{className:"text-xs text-dark-muted space-y-1",children:[d.jsxs("div",{children:[" ",g?"Expires in 1 year":"Expires in 24 hours"]}),d.jsxs("div",{children:[" ",g?"Unlimited uses":"One-time use only"]}),d.jsx("div",{children:" Share with trusted users"})]}),d.jsx(Ze,{variant:"secondary",onClick:e,className:"w-full",children:"Close"})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("p",{className:"text-dark-text text-sm",children:"Generate an invite code for this server."}),d.jsxs("label",{className:"flex items-center gap-2 p-3 rounded bg-dark-bg cursor-pointer hover:bg-opacity-80 transition-colors",children:[d.jsx("input",{type:"checkbox",checked:g,onChange:j=>v(j.target.checked),className:"w-4 h-4 rounded border-gray-600 bg-dark-bg text-brand-primary focus:ring-brand-primary"}),d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-white text-sm font-medium",children:"Unlimited Uses"}),d.jsx("span",{className:"text-dark-muted text-xs",children:"Code will not expire after one use"})]})]})]}),d.jsx(Ze,{variant:"primary",onClick:C,disabled:l,className:"w-full",children:l?"Generating...":"Generate Invite Code"})]})})})},YO=[{emoji:"",text:"Gaming",type:"gaming"},{emoji:"",text:"Working",type:"working"},{emoji:"",text:"Listening to music",type:"music"},{emoji:"",text:"Watching",type:"watching"},{emoji:"",text:"Eating",type:"eating"},{emoji:"",text:"AFK",type:"afk"},{emoji:"",text:"Focusing",type:"focusing"},{emoji:"",text:"Studying",type:"studying"}],gw={online:{color:"bg-green-500",label:"Online",icon:""},idle:{color:"bg-yellow-500",label:"Idle",icon:""},dnd:{color:"bg-red-500",label:"Do Not Disturb",icon:""},invisible:{color:"bg-gray-500",label:"Invisible",icon:""},offline:{color:"bg-gray-500",label:"Offline",icon:""}},KO=n=>gw[n]||gw.offline,fA=({status:n,size:e="md",className:t})=>{const r=KO(n),a={sm:"w-2.5 h-2.5",md:"w-3 h-3",lg:"w-4 h-4"};return n==="invisible"?null:d.jsx("div",{className:Rt("rounded-full border-2 border-dark-bg",r.color,a[e]||a.md,t),title:r.label})},QO=({dm:n,currentUserId:e,isSelected:t,onClick:r,onContextMenu:a})=>{const l=n.participants.find(p=>p!==e),[c,h]=P.useState(null);return P.useEffect(()=>{(async()=>{if(l)try{const g=await qp(De(ge,"users",l));g.exists()&&h({id:g.id,...g.data()})}catch(g){console.error("Error fetching DM user:",g)}})()},[l]),c?d.jsxs("button",{onClick:r,onContextMenu:a,className:Rt("w-full flex items-center gap-3 px-2 py-2 rounded mb-1 group relative","text-dark-muted hover:bg-dark-hover hover:text-dark-text","transition-colors duration-150",t&&"bg-dark-hover text-dark-text"),children:[d.jsx("div",{className:"relative",children:c.photoUrl?d.jsx("img",{src:c.photoUrl,alt:c.displayName,className:"w-8 h-8 rounded-full object-cover"}):d.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white text-sm font-bold",children:c.displayName?.[0]?.toUpperCase()})}),d.jsxs("div",{className:"flex-1 text-left overflow-hidden",children:[d.jsxs("div",{className:"text-sm font-medium truncate flex justify-between items-center",children:[d.jsx("span",{children:c.displayName}),n.updatedAt&&d.jsx("span",{className:"text-[10px] text-gray-500 hidden group-hover:block",children:Yp(n.updatedAt)})]}),d.jsx("div",{className:"text-xs truncate opacity-70",children:n.lastMessage?.text||"Start a conversation"})]})]}):null},XO=({dms:n,selectedDmId:e,onSelectDm:t})=>{const{currentUser:r}=Cr(),[a,l]=P.useState(null),[c,h]=P.useState([]),p=(b,x)=>{b.preventDefault(),l({x:b.pageX,y:b.pageY,dmId:x.id})},g=async b=>{if(h(x=>[...x,b]),l(null),!!r)try{const x=De(ge,"dms",b);await rt(x,{hiddenFor:Gp(r.uid)}),e===b&&t(null)}catch(x){console.error("Error deleting DM:",x),h(C=>C.filter(R=>R!==b))}};P.useEffect(()=>{const b=()=>l(null);return window.addEventListener("click",b),()=>window.removeEventListener("click",b)},[]);const v=n?.filter(b=>!c.includes(b.id))||[];return v.length===0?d.jsxs("div",{className:"px-4 py-8 text-center text-dark-muted text-sm",children:[d.jsx("p",{children:"No conversations yet."}),d.jsx("p",{className:"mt-2",children:"Start a DM from the friends list!"})]}):d.jsxs("div",{className:"flex-1 overflow-y-auto py-3",children:[d.jsxs("div",{className:"px-2",children:[d.jsx("div",{className:"text-xs font-semibold text-dark-muted uppercase px-2 mb-2 flex justify-between items-center",children:d.jsx("span",{children:"Direct Messages"})}),d.jsx("div",{className:"space-y-0.5",children:v.map(b=>d.jsx(QO,{dm:b,currentUserId:r.uid,isSelected:e===b.id,onClick:()=>t(b),onContextMenu:x=>p(x,b)},b.id))})]}),a&&d.jsx("div",{className:"fixed bg-dark-sidebar border border-dark-hover shadow-xl rounded-md z-50 py-1 min-w-[160px]",style:{top:a.y,left:a.x},children:d.jsxs("button",{onClick:()=>g(a.dmId),className:"w-full text-left px-4 py-2 hover:bg-red-500/10 text-red-400 hover:text-red-500 text-sm flex items-center gap-2 transition-colors",children:[d.jsx(go,{size:16}),"Delete Conversation"]})})]})},yw=({server:n,channels:e,selectedChannel:t,onSelectChannel:r,onOpenSettings:a,onOpenAdmin:l,onLogout:c,userProfile:h,serverId:p,userRole:g,userId:v,dms:b,selectedDm:x,onSelectDm:C})=>{const[R,j]=P.useState(!1),[A,B]=P.useState(!1),[G,I]=P.useState(!1),V=()=>{B(!1),c()};return d.jsxs("div",{className:"w-60 bg-dark-sidebar flex flex-col h-full",children:[d.jsxs("div",{className:"h-12 px-4 flex items-center justify-between border-b border-dark-hover shadow-md",children:[d.jsx("h2",{className:"font-semibold text-dark-text truncate",children:n?.name||"Lumo"}),d.jsxs("div",{className:"flex items-center gap-1",children:[p&&g==="admin"&&d.jsx("button",{onClick:()=>I(!0),className:"p-1.5 hover:bg-dark-hover rounded transition-colors",title:"Generate Invite",children:d.jsx(gM,{className:"text-green-500",size:20})}),h?.role==="admin"&&d.jsx("button",{onClick:l,className:"p-1.5 hover:bg-dark-hover rounded transition-colors",title:"Admin Panel",children:d.jsx(U8,{className:"text-admin",size:20})})]})]}),d.jsx("div",{className:"flex-1 overflow-y-auto py-3",children:p==="home"?d.jsx(XO,{dms:b,selectedDmId:x?.id,onSelectDm:C}):d.jsxs("div",{className:"px-2",children:[d.jsx("div",{className:"text-xs font-semibold text-dark-muted uppercase px-2 mb-1",children:"Text Channels"}),e.map(z=>d.jsxs("button",{onClick:()=>r(z),className:Rt("w-full flex items-center gap-2 px-2 py-1.5 rounded","text-dark-muted hover:bg-dark-hover hover:text-dark-text","transition-colors duration-150",t?.id===z.id&&"bg-dark-hover text-dark-text"),children:[d.jsx(Kp,{className:"flex-shrink-0"}),d.jsx("span",{className:"truncate text-sm flex-1 text-left",children:z.name}),z.locked&&d.jsx($8,{className:"flex-shrink-0 text-yellow-500",size:14,title:"Locked channel"})]},z.id))]})}),d.jsxs("div",{className:"h-20 bg-dark-bg px-2 flex items-center justify-between gap-2 border-t border-dark-hover -ml-[72px] w-[calc(100%+72px)] relative z-10",children:[d.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1 cursor-pointer hover:bg-dark-hover rounded p-2 transition-colors",onClick:()=>j(!0),children:[d.jsxs("div",{className:"relative flex-shrink-0",children:[h?.photoUrl?d.jsx("img",{src:h.photoUrl,alt:h.displayName,className:"w-12 h-12 rounded-full object-cover",onError:z=>{z.target.style.display="none",z.target.nextSibling.style.display="flex"}}):null,d.jsx("div",{className:"w-12 h-12 rounded-full bg-brand-primary flex items-center justify-center text-white font-bold text-lg",style:{display:h?.photoUrl?"none":"flex"},children:h?.displayName?.[0]?.toUpperCase()||"U"}),d.jsx("div",{className:"absolute bottom-0 right-0",children:d.jsx(fA,{status:h?.presence||"online",size:"md"})})]}),d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("div",{className:"text-base font-semibold text-dark-text truncate",children:h?.displayName||"User"}),d.jsx("div",{className:"text-sm text-dark-muted truncate",children:h?.role||"member"})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:a,className:"p-2.5 hover:bg-dark-hover rounded-lg transition-colors",title:"Settings",children:d.jsx(Zv,{className:"text-dark-muted hover:text-dark-text",size:24})}),d.jsx("button",{onClick:()=>B(!0),className:"p-2.5 hover:bg-dark-hover rounded-lg transition-colors",title:"Logout",children:d.jsx(H8,{className:"text-dark-muted hover:text-admin",size:24})})]})]}),d.jsx(l1,{user:h,isOpen:R,onClose:()=>j(!1)}),d.jsx(Jl,{isOpen:A,onClose:()=>B(!1),onConfirm:V,title:"Logout",message:"Are you sure you want to logout?",confirmText:"Logout",variant:"danger"}),d.jsx(GO,{isOpen:G,onClose:()=>I(!1),serverId:p})]})},WO=(n,e)=>{if(e===0)return"0 KB/s";const t=n/e;return t>1024*1024?`${(t/(1024*1024)).toFixed(1)} MB/s`:`${(t/1024).toFixed(0)} KB/s`},Wp=(n,e)=>new Promise((t,r)=>{const a="5c1c5b7cae2edd508a2f35f98c4eec96",l=new FormData;l.append("image",n);const c=new XMLHttpRequest;c.open("POST",`https://api.imgbb.com/1/upload?key=${a}`);const h=Date.now();c.upload.onprogress=p=>{if(p.lengthComputable){const g=p.loaded/p.total*100,v=(Date.now()-h)/1e3,b=WO(p.loaded,v);e&&e(g,b)}},c.onload=()=>{if(c.status===200)try{const p=JSON.parse(c.responseText);p.success?t(p.data.url):r(new Error(p.error?.message||"Failed to upload image"))}catch{r(new Error("Invalid response from ImgBB"))}else r(new Error(`Upload failed with status ${c.status}`))},c.onerror=()=>r(new Error("Network error during upload")),c.send(l)}),JO=({server:n,onClose:e,onDelete:t,position:r,userRole:a,userId:l})=>{const[c,h]=P.useState(!1),[p,g]=P.useState(n.name),[v,b]=P.useState(!1),[x,C]=P.useState(!1),[R,j]=P.useState(n.icon||null),[A,B]=P.useState(null),[G,I]=P.useState({progress:0,speed:""}),[V,z]=P.useState(!1),[F,w]=P.useState(!1),S=P.useRef(null),{success:k,error:D}=Ys(),M=async()=>{if(!p.trim()){D("Server name is required");return}b(!0);try{await rt(De(ge,"servers",n.id),{name:p.trim()}),k("Server updated!"),h(!1),e()}catch($){console.error("Error updating server:",$),D("Failed to update server")}finally{b(!1)}},U=async()=>{try{const $=pt(ge,"servers",n.id,"members"),K=await So($),W=[];K.forEach(Te=>{const Re=Te.data().userId;W.push(rt(De(ge,"users",Re),{servers:rp(n.id),...Te.data().currentServer===n.id?{currentServer:null}:{}}))}),await Promise.all(W),await Wl(De(ge,"servers",n.id)),k("Server deleted"),z(!1),t(),e()}catch($){console.error("Error deleting server:",$),D("Failed to delete server"),z(!1)}},O=async()=>{try{await rt(De(ge,"users",l),{servers:rp(n.id),currentServer:null}),await Wl(De(ge,"servers",n.id,"members",l)),await rt(De(ge,"servers",n.id),{memberCount:sp(-1)}),k("Left server"),w(!1),e()}catch($){console.error("Error leaving server:",$),w(!1),e()}},be=$=>{const K=$.target.files?.[0];if(K){if(!K.type.startsWith("image/")){D("Please select an image file");return}if(K.size>10*1024*1024){D("Image size must be less than 10MB");return}B(K),j(URL.createObjectURL(K))}},Ee=async()=>{if(!A){D("Please select an image first");return}b(!0);try{const $=await Wp(A,(K,W)=>{I({progress:K,speed:W})});await rt(De(ge,"servers",n.id),{icon:$}),k("Server icon updated!"),C(!1),e()}catch($){console.error("Error updating icon:",$),D("Failed to update icon")}finally{b(!1),I({progress:0,speed:""})}};return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 z-40",onClick:e}),d.jsx("div",{className:"fixed bg-dark-sidebar border border-dark-hover rounded-lg shadow-xl py-2 z-50 w-64",style:{top:r.y,left:r.x},children:c?d.jsxs("div",{className:"px-3 py-2 space-y-2",children:[d.jsx(Yt,{value:p,onChange:$=>g($.target.value),placeholder:"Server name",autoFocus:!0}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Ze,{variant:"secondary",onClick:()=>h(!1),className:"flex-1 text-xs py-1",children:"Cancel"}),d.jsx(Ze,{variant:"primary",onClick:M,disabled:v,className:"flex-1 text-xs py-1",children:v?"Saving...":"Save"})]})]}):x?d.jsxs("div",{className:"px-3 py-2 space-y-3",children:[d.jsx("input",{type:"file",ref:S,onChange:be,accept:"image/*",className:"hidden"}),d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx("button",{onClick:()=>S.current?.click(),className:"w-16 h-16 rounded-full bg-dark-hover border-2 border-dashed border-dark-muted hover:border-brand-primary flex items-center justify-center transition-colors overflow-hidden",children:R?d.jsx("img",{src:R,alt:"Preview",className:"w-full h-full object-cover"}):d.jsx(E0,{size:24,className:"text-dark-muted"})}),d.jsx("span",{className:"text-xs text-dark-muted mt-2",children:"Click to select image"})]}),v&&G.progress>0&&d.jsxs("div",{className:"text-xs text-center text-dark-muted",children:[Math.round(G.progress),"% (",G.speed,")"]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Ze,{variant:"secondary",onClick:()=>{C(!1),B(null),j(n.icon||null)},className:"flex-1 text-xs py-1",children:"Cancel"}),d.jsx(Ze,{variant:"primary",onClick:Ee,disabled:v||!A,className:"flex-1 text-xs py-1",children:v?"Uploading...":"Save"})]})]}):d.jsx(d.Fragment,{children:a==="admin"?d.jsxs(d.Fragment,{children:[d.jsxs("button",{onClick:()=>h(!0),className:"w-full px-4 py-2 text-left text-sm text-dark-text hover:bg-dark-hover transition-colors flex items-center gap-2",children:[d.jsx(Ul,{size:16}),"Edit Server Name"]}),d.jsxs("button",{onClick:()=>C(!0),className:"w-full px-4 py-2 text-left text-sm text-dark-text hover:bg-dark-hover transition-colors flex items-center gap-2",children:[d.jsx(E0,{size:16}),"Change Icon"]}),d.jsxs("button",{onClick:()=>z(!0),className:"w-full px-4 py-2 text-left text-sm text-admin hover:bg-dark-hover transition-colors flex items-center gap-2",children:[d.jsx(go,{size:16}),"Delete Server"]})]}):d.jsxs("button",{onClick:()=>w(!0),className:"w-full px-4 py-2 text-left text-sm text-orange-500 hover:bg-dark-hover transition-colors flex items-center gap-2",children:[d.jsx(B8,{size:16}),"Leave Server"]})})}),d.jsx(Jl,{isOpen:V,onClose:()=>z(!1),onConfirm:U,title:"Delete Server",message:`Are you sure you want to delete "${n.name}"? This action cannot be undone!`,confirmText:"Delete",confirmVariant:"danger"}),d.jsx(Jl,{isOpen:F,onClose:()=>w(!1),onConfirm:O,title:"Leave Server",message:`Are you sure you want to leave "${n.name}"?`,confirmText:"Leave",confirmVariant:"warning"})]})},ZO=""+new URL("lumo-logo-DYOsjf-q.png",import.meta.url).href,vw=({servers:n,currentServerId:e,onServerChange:t,onCreateServer:r,onJoinServer:a,userRole:l,userId:c,unreadMentions:h={}})=>{const[p,g]=P.useState(!1),[v,b]=P.useState(null),x=(C,R)=>{C.preventDefault(),b({server:R,position:{x:C.clientX,y:C.clientY}})};return d.jsxs("div",{className:"w-20 bg-dark-bg h-full flex flex-col items-center",children:[d.jsx("div",{className:"flex flex-col items-center",children:d.jsx("button",{onClick:()=>t("home"),className:Rt("transition-all duration-200 rounded-2xl overflow-hidden",e==="home"||!e?"rounded-xl ring-2 ring-brand-primary ring-offset-2 ring-offset-dark-bg":"hover:rounded-xl"),children:d.jsx("img",{src:ZO,alt:"Home",className:"w-16 h-16 object-contain cursor-pointer bg-dark-bg p-1"})})}),d.jsx("div",{className:"w-8 h-0.5 bg-dark-hover my-2"}),d.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1 overflow-y-auto",children:[n.map(C=>d.jsxs("div",{className:"relative",children:[d.jsx("button",{onClick:()=>t(C.id),onContextMenu:R=>x(R,C),className:Rt("w-12 h-12 rounded-2xl flex items-center justify-center transition-all duration-200","hover:rounded-xl",e===C.id?"bg-brand-primary text-white rounded-xl":"bg-dark-sidebar text-dark-text hover:bg-brand-primary hover:text-white"),title:C.name,children:C.icon?d.jsx("img",{src:C.icon,alt:C.name,className:"w-full h-full rounded-2xl object-cover"}):d.jsx("span",{className:"text-xl font-bold",children:C.name.charAt(0).toUpperCase()})}),h[C.id]?.count>0&&d.jsx("div",{className:"absolute -top-1 -right-1 min-w-5 h-5 bg-red-500 rounded-full flex items-center justify-center border-2 border-dark-bg pointer-events-none",children:d.jsx("span",{className:"text-white text-xs font-bold px-1",children:h[C.id].count>99?"99+":h[C.id].count})})]},C.id)),d.jsx("div",{className:"w-8 h-0.5 bg-dark-hover my-1"}),d.jsxs("div",{className:"relative pb-2",children:[d.jsx("button",{id:"add-server-btn",onClick:C=>{const R=C.currentTarget.getBoundingClientRect();document.documentElement.style.setProperty("--btn-top",`${R.top}px`),g(!p)},className:"w-12 h-12 rounded-2xl bg-dark-sidebar text-green-500 flex items-center justify-center hover:bg-green-500 hover:text-white hover:rounded-xl transition-all duration-200",title:"Add Server",children:d.jsx(Pu,{size:28})}),p&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 z-50",onClick:()=>g(!1)}),d.jsxs("div",{className:"fixed left-[80px] bg-dark-sidebar border border-dark-hover rounded-lg shadow-lg py-2 z-50 w-48",style:{top:"var(--btn-top)"},children:[l==="admin"&&d.jsx("button",{onClick:()=>{r(),g(!1)},className:"w-full px-4 py-2 text-left text-sm text-dark-text hover:bg-dark-hover transition-colors",children:"Create Server"}),d.jsx("button",{onClick:()=>{a(),g(!1)},className:"w-full px-4 py-2 text-left text-sm text-dark-text hover:bg-dark-hover transition-colors",children:"Join Server"})]})]})]})]}),v&&d.jsx(JO,{server:v.server,position:v.position,userRole:l,userId:c,onClose:()=>b(null),onDelete:()=>{b(null)}})]})},eP=300*1e3,tP=n=>{const e=P.useRef(null);P.useEffect(()=>{if(!n)return;const t=async()=>{try{await rt(De(ge,"users",n),{lastSeen:xt(),isOnline:!0})}catch(a){console.error("Error updating presence:",a)}};t(),e.current=setInterval(t,eP);const r=()=>{navigator.sendBeacon&&t()};return window.addEventListener("beforeunload",r),()=>{e.current&&clearInterval(e.current),window.removeEventListener("beforeunload",r)}},[n])},nP=(n,e=6)=>{if(!n)return!1;const t=n.toMillis?n.toMillis():new Date(n).getTime(),r=Date.now(),a=e*60*1e3;return r-t<a},bw=({users:n,currentUserId:e,onStartDm:t})=>{const{currentServer:r}=bd(),[a,l]=P.useState(null),[c,h]=P.useState([]);P.useEffect(()=>{if(!r||r==="home"){h([]);return}const A=ts(pt(ge,"servers",r,"roles"));return wr(A,G=>{const I=[];G.forEach(V=>{I.push({id:V.id,...V.data()})}),h(I)})},[r]);const p=A=>A.presence==="invisible"?!1:nP(A.lastSeen),g=n.filter(A=>p(A)),v=n.filter(A=>!p(A)),b=g.reduce((A,B)=>{const G=B.serverRole||B.role||"member";return A[G]||(A[G]=[]),A[G].push(B),A},{}),R=[...[{name:"admin",position:-3},{name:"moderator",position:-2},{name:"member",position:-1}],...c.map(A=>({name:A.name,position:A.position??999}))].sort((A,B)=>A.position-B.position).map(A=>A.name).filter(A=>b[A]?.length>0),j=A=>{const B=p(A);return d.jsxs("div",{onClick:()=>l(A),className:Rt("flex items-center gap-2 px-2 py-1.5 rounded cursor-pointer","hover:bg-dark-hover transition-colors",A.id===e&&"bg-dark-hover/50",!B&&"opacity-50"),children:[d.jsxs("div",{className:"relative flex-shrink-0",children:[A.photoUrl?d.jsx("img",{src:A.photoUrl,alt:A.displayName,className:"w-8 h-8 rounded-full object-cover",onError:G=>{G.target.style.display="none",G.target.nextSibling.style.display="flex"}}):null,d.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold text-sm",style:{display:A.photoUrl?"none":"flex"},children:A.displayName?.[0]?.toUpperCase()||"U"}),d.jsx("div",{className:"absolute bottom-0 right-0",children:d.jsx(fA,{status:B?A.presence||"online":"offline",size:"sm"})})]}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-sm text-dark-text truncate",children:A.displayName||"Unknown"}),d.jsx("span",{className:Rt("text-xs px-1.5 py-0.5 rounded border",wC(A.serverRole||A.role)),children:(A.serverRole||A.role)?.charAt(0).toUpperCase()+(A.serverRole||A.role)?.slice(1)})]}),A.status&&d.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[d.jsx("span",{className:"text-xs",children:A.status.emoji}),d.jsx("span",{className:"text-xs text-dark-muted truncate",children:A.status.text})]})]})]},A.id)};return d.jsxs("div",{className:"w-60 bg-dark-sidebar h-full overflow-y-auto py-3",children:[d.jsxs("div",{className:"px-2",children:[R.map(A=>{const B=b[A]||[];return B.length===0?null:d.jsxs("div",{className:"mb-4",children:[d.jsxs("div",{className:"text-xs font-semibold text-dark-muted uppercase px-2 mb-2",children:[A.charAt(0).toUpperCase()+A.slice(1),"s  ",B.length]}),B.map(j)]},A)}),v.length>0&&d.jsxs("div",{className:"mt-4",children:[d.jsxs("div",{className:"text-xs font-semibold text-gray-500 uppercase px-2 mb-2",children:["Offline  ",v.length]}),v.map(j)]})]}),d.jsx(l1,{user:a,isOpen:!!a,onClose:()=>l(null),onMessage:A=>{t&&t(A),l(null)}})]})},rP=({isOpen:n,onClose:e,onConfirm:t,url:r})=>{const[a,l]=P.useState(!1),c=()=>{a&&localStorage.setItem("dontAskExternalLinks","true"),t(),e()};return d.jsx(Us,{isOpen:n,onClose:e,title:"External Link Warning",size:"sm",children:d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:d.jsxs("p",{className:"text-dark-text text-sm",children:[d.jsx("span",{className:"font-semibold text-yellow-500",children:" Security Warning"}),d.jsx("br",{}),d.jsx("br",{}),"You are about to open an external link. External links may lead to harmful or malicious websites. Please ensure you trust the source before proceeding."]})}),d.jsxs("div",{className:"bg-dark-bg p-3 rounded-lg",children:[d.jsx("p",{className:"text-xs text-dark-muted mb-1",children:"Link:"}),d.jsx("p",{className:"text-dark-text text-sm break-all font-mono",children:r})]}),d.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:a,onChange:h=>l(h.target.checked),className:`w-4 h-4 rounded border-dark-hover bg-dark-input text-brand-primary 
                       focus:ring-2 focus:ring-brand-primary cursor-pointer`}),d.jsx("span",{className:"text-sm text-dark-text",children:"Don't ask me again"})]}),d.jsxs("div",{className:"flex gap-3 justify-end pt-2",children:[d.jsx(Ze,{variant:"secondary",onClick:e,children:"Cancel"}),d.jsx(Ze,{variant:"primary",onClick:c,children:"Open Link"})]})]})})},sP=n=>{if(!n)return n;let e=n;return e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=e.replace(/```([^`]+)```/g,'<pre class="bg-dark-input text-dark-text p-2 rounded my-1 overflow-x-auto"><code>$1</code></pre>'),e=e.replace(/`([^`]+)`/g,'<code class="bg-dark-input text-dark-text px-1 py-0.5 rounded text-sm">$1</code>'),e=e.replace(/\*\*([^*]+)\*\*/g,'<strong class="font-bold">$1</strong>'),e=e.replace(/\*([^*]+)\*/g,'<em class="italic">$1</em>'),e=e.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer" class="text-brand-primary hover:underline">$1</a>'),e=e.replace(/@(everyone|[a-zA-Z0-9_]+)\b/g,'<span class="text-brand-primary font-medium cursor-pointer hover:underline" data-mention="$1">$1</span>'),e=e.replace(/\n/g,"<br>"),e},pA=({children:n,onMentionClick:e})=>{const t=sP(n),r=a=>{const l=a.target.getAttribute("data-mention");l&&e&&e(l)};return d.jsx("div",{dangerouslySetInnerHTML:{__html:t},className:"markdown-content",onClick:r})},iP=["","","","","","","","","",""],_w=({onSelect:n,onClose:e})=>d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 z-40",onClick:e}),d.jsx("div",{className:"absolute left-0 bottom-full mb-2 bg-dark-sidebar border border-dark-hover rounded-lg shadow-lg p-2 z-50",children:d.jsx("div",{className:"flex gap-1",children:iP.map(t=>d.jsx("button",{onClick:()=>n(t),className:"w-8 h-8 flex items-center justify-center text-lg hover:bg-dark-hover rounded transition-colors",title:t,children:t},t))})})]}),aP=({message:n,currentUserId:e,serverId:t,channelId:r,users:a})=>{const[l,c]=P.useState(!1),h=n.poll;if(!h)return null;const p=n.userId===e,g=h.ended===!0,v=h.options.reduce((j,A,B)=>j+(h.votes?.[`option_${B}`]?.length||0),0),b=h.options.map((j,A)=>h.votes?.[`option_${A}`]?.includes(e)?A:-1).filter(j=>j!==-1);b.length>0;const x=async j=>{if(!(l||g)){c(!0);try{const A=`poll.votes.option_${j}`,B=De(ge,"servers",t,"channels",r,"messages",n.id);if(h.votes?.[`option_${j}`]?.includes(e))await rt(B,{[A]:rp(e)});else{if(!h.multipleChoice&&b.length>0)for(const I of b)await rt(B,{[`poll.votes.option_${I}`]:rp(e)});await rt(B,{[A]:Gp(e)})}}catch(A){console.error("Error voting:",A)}finally{c(!1)}}},C=async()=>{if(!(!p||g))try{const j=De(ge,"servers",t,"channels",r,"messages",n.id);await rt(j,{"poll.ended":!0})}catch(j){console.error("Error ending poll:",j)}},R=j=>h.anonymous?null:(h.votes?.[`option_${j}`]||[]).map(B=>a?.find(G=>G.id===B)?.displayName||"Unknown").join(", ");return d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4 mt-2 border border-dark-hover max-w-md",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx(t1,{className:"text-brand-primary",size:20}),d.jsx("span",{className:"text-xs text-dark-muted uppercase tracking-wide font-semibold",children:"Poll"}),h.multipleChoice&&d.jsx("span",{className:"text-xs text-dark-muted bg-dark-hover px-2 py-0.5 rounded",children:"Multiple Choice"}),g&&d.jsx("span",{className:"text-xs text-red-400 bg-red-400/10 px-2 py-0.5 rounded",children:"Ended"})]}),d.jsx("h3",{className:"text-dark-text font-semibold mb-4",children:h.question}),d.jsx("div",{className:"space-y-2",children:h.options.map((j,A)=>{const B=h.votes?.[`option_${A}`]?.length||0,G=v>0?Math.round(B/v*100):0,I=b.includes(A),V=R(A);return d.jsxs("button",{onClick:()=>x(A),disabled:l||g,className:`w-full text-left p-3 rounded-lg relative overflow-hidden transition-all group ${I?"bg-brand-primary/20 border-2 border-brand-primary":"bg-dark-sidebar border border-dark-hover hover:border-dark-muted"} ${g?"cursor-not-allowed opacity-80":""}`,children:[v>0&&d.jsx("div",{className:`absolute inset-0 transition-all duration-500 ${I?"bg-brand-primary/30":"bg-dark-hover/50"}`,style:{width:`${G}%`}}),d.jsxs("div",{className:"relative flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[I&&d.jsx("div",{className:"w-5 h-5 bg-brand-primary rounded-full flex items-center justify-center",children:d.jsx(Ku,{className:"text-white",size:14})}),d.jsx("span",{className:`text-sm ${I?"text-dark-text font-medium":"text-dark-muted"}`,children:j})]}),v>0&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("span",{className:"text-xs text-dark-muted",children:[B," vote",B!==1?"s":""]}),d.jsxs("span",{className:"text-sm font-semibold text-dark-text",children:[G,"%"]})]})]}),V&&B>0&&d.jsx("div",{className:"text-xs text-dark-muted mt-1 truncate opacity-0 group-hover:opacity-100 transition-opacity",children:V})]},A)})}),d.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-dark-hover",children:[d.jsxs("div",{className:"flex items-center gap-1 text-xs text-dark-muted",children:[d.jsx(e1,{size:14}),d.jsxs("span",{children:[v," total vote",v!==1?"s":""]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[h.anonymous&&d.jsx("span",{className:"text-xs text-dark-muted",children:"Anonymous"}),p&&!g&&d.jsxs("button",{onClick:C,className:"flex items-center gap-1.5 text-xs font-medium text-red-400 bg-red-400/10 hover:bg-red-400/20 px-3 py-1.5 rounded transition-all border border-red-400/20 hover:border-red-400/30",children:[d.jsx(K8,{size:14}),"End Poll"]})]})]})]})},mA=/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:watch\?v=|embed\/|shorts\/)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,gA=/(?:https?:\/\/)?(?:open\.)?spotify\.com\/(track|album|playlist|artist|episode|show)\/([a-zA-Z0-9]+)/,yA=/(?:https?:\/\/)?(?:www\.)?(?:twitter\.com|x\.com)\/(\w+)\/status\/(\d+)/,oP=/\.(jpg|jpeg|png|gif|webp|bmp|svg)(\?.*)?$/i,lP=/\.(mp4|webm|ogg|mov)(\?.*)?$/i,cP=/\.(mp3|wav|ogg|m4a)(\?.*)?$/i,uP=n=>{const e=n.match(mA);return e?e[1]:null},dP=n=>{const e=n.match(gA);return e?{type:e[1],id:e[2]}:null},hP=n=>{const e=n.match(yA);return e?{user:e[1],id:e[2]}:null},vA=n=>mA.test(n)?"youtube":gA.test(n)?"spotify":yA.test(n)?"twitter":oP.test(n)?"image":lP.test(n)?"video":cP.test(n)?"audio":n.includes("/raw/upload/")||/\.(zip|rar|7z|exe|pdf|docx|xlsx|txt|iso|yml|json|xml|csv)$/i.test(n)?"file":"generic",bA=n=>{const e=/(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/g;return n.match(e)||[]},fP=({url:n})=>{const e=uP(n),[t,r]=P.useState(!1);if(!e)return null;const a=`https://img.youtube.com/vi/${e}/mqdefault.jpg`;return d.jsxs("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar",children:[d.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border-b border-dark-hover",children:[d.jsx(gO,{className:"text-red-500",size:18}),d.jsx("span",{className:"text-xs text-dark-muted font-medium",children:"YouTube"})]}),t?d.jsx("div",{className:"relative pt-[56.25%]",children:d.jsx("iframe",{className:"absolute inset-0 w-full h-full",src:`https://www.youtube.com/embed/${e}?autoplay=1`,title:"YouTube video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):d.jsxs("div",{className:"relative cursor-pointer group",onClick:()=>r(!0),children:[d.jsx("img",{src:a,alt:"YouTube thumbnail",className:"w-full h-auto",onError:l=>{l.target.src=`https://img.youtube.com/vi/${e}/default.jpg`}}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 group-hover:bg-black/50 transition-colors",children:d.jsx(Y8,{className:"text-white/90 group-hover:text-white group-hover:scale-110 transition-all",size:64})})]}),d.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[d.jsx("span",{className:"text-xs text-dark-muted truncate",children:n}),d.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-dark-muted hover:text-brand-primary transition-colors",onClick:l=>l.stopPropagation(),children:d.jsx(Jv,{size:16})})]})]})},pP=({url:n})=>{const e=dP(n);if(!e)return null;const r={track:152,album:352,playlist:352,artist:352,episode:232,show:232}[e.type]||152;return d.jsxs("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar",children:[d.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border-b border-dark-hover",children:[d.jsx(mO,{className:"text-green-500",size:18}),d.jsxs("span",{className:"text-xs text-dark-muted font-medium",children:["Spotify ",e.type]})]}),d.jsx("iframe",{src:`https://open.spotify.com/embed/${e.type}/${e.id}?utm_source=generator&theme=0`,width:"100%",height:r,frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",className:"bg-transparent"}),d.jsxs("div",{className:"px-3 py-2 flex items-center justify-between border-t border-dark-hover",children:[d.jsx("span",{className:"text-xs text-dark-muted truncate",children:n}),d.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-dark-muted hover:text-green-500 transition-colors",children:d.jsx(Jv,{size:16})})]})]})},mP=({url:n})=>d.jsx("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar",children:d.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"block cursor-pointer",children:d.jsx("img",{src:n,alt:"Attachment",className:"w-full h-auto max-h-[400px] object-contain bg-black/50",loading:"lazy",onError:e=>{e.target.style.display="none"}})})}),gP=({url:n})=>{const e=P.useRef(null),[t,r]=P.useState(!1),[a,l]=P.useState(!1);P.useEffect(()=>{if(window.twttr)c();else{const h=document.createElement("script");h.src="https://platform.twitter.com/widgets.js",h.async=!0,h.onload=()=>{window.twttr&&e.current&&c()},h.onerror=()=>l(!0),document.body.appendChild(h)}},[n]);const c=()=>{window.twttr&&e.current&&(e.current.innerHTML="",window.twttr.widgets.createTweet(hP(n)?.id,e.current,{theme:"dark",conversation:"none"}).then(h=>{r(!!h),h||l(!0)}).catch(()=>l(!0)))};return a?d.jsx("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar p-3",children:d.jsxs("div",{className:"flex items-center gap-2 text-dark-muted",children:[d.jsx(sw,{className:"text-sky-400",size:18}),d.jsx("span",{className:"text-sm",children:"Tweet could not be loaded"}),d.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"ml-auto text-brand-primary hover:underline text-sm",children:"View on X"})]})}):d.jsxs("div",{className:"mt-2 max-w-md",children:[!t&&d.jsx("div",{className:"rounded-lg border border-dark-hover bg-dark-sidebar p-4 animate-pulse",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(sw,{className:"text-sky-400",size:18}),d.jsx("span",{className:"text-sm text-dark-muted",children:"Loading tweet..."})]})}),d.jsx("div",{ref:e,className:t?"":"hidden"})]})},yP=({url:n})=>d.jsx("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar",children:d.jsx("video",{src:n,controls:!0,className:"w-full max-h-[400px] bg-black"})}),vP=({url:n})=>d.jsxs("div",{className:"mt-2 max-w-md rounded-lg border border-dark-hover bg-dark-sidebar p-3 flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-primary/20 flex items-center justify-center flex-shrink-0",children:d.jsx(lM,{className:"text-brand-primary",size:24})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"text-xs text-dark-muted mb-1 truncate",children:n.split("/").pop()}),d.jsx("audio",{src:n,controls:!0,className:"w-full h-8"})]})]}),bP=({url:n})=>{const e=n.split("/").pop().split("?")[0]||"file",t=e.split(".").pop();return d.jsxs("div",{className:"mt-2 max-w-md rounded-lg border border-dark-hover bg-dark-sidebar p-3 flex items-center gap-3 hover:bg-dark-hover transition-colors",children:[d.jsx("div",{className:"w-12 h-12 rounded bg-dark-input flex items-center justify-center flex-shrink-0",children:d.jsx("span",{className:"text-xs font-bold text-dark-text uppercase",children:t.length<5?t:"FILE"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"text-sm font-medium text-dark-text truncate",children:e}),d.jsx("div",{className:"text-xs text-dark-muted",children:"Attachment"})]}),d.jsx("a",{href:n,download:!0,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-full hover:bg-white/10 text-dark-muted hover:text-white transition-colors",title:"Download",children:d.jsx(sM,{size:20})})]})},_P=({url:n})=>{let e="";try{e=new URL(n).hostname.replace("www.","")}catch{e=n}return d.jsxs("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"mt-2 flex items-center gap-3 max-w-md rounded-lg border border-dark-hover bg-dark-sidebar p-3 hover:bg-dark-hover transition-colors group",children:[d.jsx("div",{className:"w-10 h-10 rounded-lg bg-brand-primary/20 flex items-center justify-center",children:d.jsx(Jv,{className:"text-brand-primary",size:20})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"text-sm font-medium text-dark-text truncate group-hover:text-brand-primary transition-colors",children:e}),d.jsx("div",{className:"text-xs text-dark-muted truncate",children:n})]})]})},xP=({url:n})=>{switch(vA(n)){case"youtube":return d.jsx(fP,{url:n});case"spotify":return d.jsx(pP,{url:n});case"twitter":return d.jsx(gP,{url:n});case"image":return d.jsx(mP,{url:n});case"video":return d.jsx(yP,{url:n});case"audio":return d.jsx(vP,{url:n});case"file":return d.jsx(bP,{url:n});default:return d.jsx(_P,{url:n})}},EP=({text:n})=>{const t=bA(n).slice(0,3);return t.length===0?null:d.jsx("div",{className:"space-y-2",children:t.map((r,a)=>d.jsx(xP,{url:r},`${r}-${a}`))})},_A=({serverId:n,channelId:e,users:t,currentUserId:r,userRole:a,onReply:l,onMessagesChange:c})=>{const[h,p]=P.useState([]),[g,v]=P.useState(null),[b,x]=P.useState(null),[C,R]=P.useState(null),[j,A]=P.useState(null),[B,G]=P.useState(""),[I,V]=P.useState(null),[z,F]=P.useState("bottom"),[w,S]=P.useState(null),[k,D]=P.useState(!0),[M,U]=P.useState(!1),[O,be]=P.useState(null),Ee=P.useRef(null),$=P.useRef(null),K=P.useRef(0),W=P.useRef(!0),Te=P.useRef(t);P.useEffect(()=>{Te.current=t},[t]);const{success:Re,error:H}=Ys(),J=()=>{Ee.current?.scrollIntoView({behavior:"smooth"})};P.useEffect(()=>{if(!e||!e)return;const Ne=ts(n?pt(ge,"servers",n,"channels",e,"messages"):pt(ge,"dms",e,"messages"),y0("timestamp","desc"),v0(20)),Me=wr(Ne,Q=>{const ae=[];if(Q.forEach(we=>{ae.push({id:we.id,...we.data()})}),ae.reverse(),!W.current&&ae.length>K.current&&r){const we=Te.current?.find(Ie=>Ie.id===r);if(we?.displayName){const Ie=ae.slice(K.current),Ye=Ie.some(Qt=>Qt.userId!==r&&N8(Qt.text,we.displayName)),ot=Ie.some(Qt=>{const dr=Qt.userId!==r&&Qt.replyTo?.userId===r;return dr&&console.log("Reply notification:",Qt),dr});(Ye||ot)&&(console.log("Playing notification sound",{hasMention:Ye,hasReply:ot}),b0())}}K.current=ae.length,p(ae),W.current&&(W.current=!1),ae.length>0&&be(ae[0]),D(ae.length===20),c&&c(ae),setTimeout(J,100)});return()=>{Me(),W.current=!0}},[e,n,r,c]);const ue=async()=>{if(!e||!O||M||!k)return;U(!0);const ie=$.current,Ne=ie?.scrollHeight||0;try{const Me=ts(n?pt(ge,"servers",n,"channels",e,"messages"):pt(ge,"dms",e,"messages"),y0("timestamp","desc"),GD(O.timestamp),v0(20)),Q=await So(Me),ae=[];Q.forEach(we=>{ae.push({id:we.id,...we.data()})}),ae.length>0?(ae.reverse(),p(we=>[...ae,...we]),be(ae[0]),D(ae.length===20),setTimeout(()=>{ie&&(ie.scrollTop=ie.scrollHeight-Ne)},0)):D(!1)}catch(Me){console.error("Error loading more messages:",Me),H("Failed to load more messages")}finally{U(!1)}},me=ie=>t.find(Ne=>Ne.id===ie)||{displayName:"Unknown",role:"member"},Ce=ie=>r===ie||a==="admin",ye=ie=>{if(ie.userId!==r)return!1;if(!ie.timestamp)return!0;const Ne=ie.timestamp.toDate();return(new Date-Ne)/1e3/60<15},Se=async()=>{if(g)try{const ie=t.find(Me=>Me.id===g.userId),Ne=n?De(ge,"servers",n,"channels",e,"messages",g.id):De(ge,"dms",e,"messages",g.id);await Wl(Ne),await On(pt(ge,"adminLogs"),{type:"message_delete",channelId:e,messageId:g.id,userId:r,deletedText:g.text||"(empty)",originalUserId:g.userId,originalUserName:ie?.displayName||"Unknown User",timestamp:xt()}),Re("Message deleted successfully")}catch(ie){console.error("Error deleting message:",ie),H("Failed to delete message")}finally{v(null)}},He=ie=>{A(ie.id),G(ie.text)},Ge=()=>{A(null),G("")},_e=async()=>{if(!j)return;if(!B.trim()){H("Message cannot be empty");return}const ie=j,Ne=B.trim(),Q=h.find(ae=>ae.id===ie)?.text||"";A(null),G("");try{const ae=n?De(ge,"servers",n,"channels",e,"messages",ie):De(ge,"dms",e,"messages",ie);await rt(ae,{text:Ne,edited:!0,editedAt:xt()}),await On(pt(ge,"adminLogs"),{type:"message_edit",channelId:e,messageId:ie,userId:r,originalText:Q,newText:Ne,timestamp:xt()}),Re("Message updated successfully")}catch(ae){console.error("Error editing message:",ae),ae.code==="resource-exhausted"?H("Quota exceeded. Please try again tomorrow."):H("Failed to edit message")}},ce=async(ie,Ne)=>{try{const Me=h.find(Ie=>Ie.id===ie);if(!Me)return;const Q={...Me.reactions},ae=Q[Ne]||[];if(ae.includes(r)){const Ie=ae.filter(Ye=>Ye!==r);Ie.length===0?delete Q[Ne]:Q[Ne]=Ie}else Q[Ne]=[...ae,r];const we=n?De(ge,"servers",n,"channels",e,"messages",ie):De(ge,"dms",e,"messages",ie);await rt(we,{reactions:Q})}catch(Me){console.error("Error toggling reaction:",Me),H("Failed to update reaction")}},ve=async ie=>{if(a!=="admin"&&a!=="moderator"){H("Only admins and moderators can pin messages");return}try{const Ne=!ie.pinned,Me=n?De(ge,"servers",n,"channels",e,"messages",ie.id):De(ge,"dms",e,"messages",ie.id);await rt(Me,{pinned:Ne,pinnedBy:Ne?r:null,pinnedAt:Ne?xt():null}),await On(pt(ge,"adminLogs"),{type:Ne?"message_pin":"message_unpin",channelId:e,messageId:ie.id,userId:r,messageText:ie.text,timestamp:xt()}),Re(Ne?"Message pinned":"Message unpinned")}catch(Ne){console.error("Error toggling pin:",Ne),H("Failed to pin message")}};return d.jsxs("div",{ref:$,className:"flex-1 overflow-y-auto px-4 py-4 space-y-4",children:[k&&h.length>0&&d.jsx("div",{className:"flex justify-center mb-4",children:d.jsx("button",{onClick:ue,disabled:M,className:"px-4 py-2 bg-brand-primary hover:bg-brand-primary/80 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:M?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Loading..."]}):"Load More Messages"})}),h.length===0?d.jsx("div",{className:"text-center text-dark-muted py-8",children:"No messages yet. Start the conversation!"}):h.map(ie=>{const Ne=me(ie.userId);return d.jsxs("div",{id:`message-${ie.id}`,className:"flex gap-3 hover:bg-dark-hover/30 px-2 py-1 rounded group transition-colors",children:[d.jsxs("div",{className:"relative flex-shrink-0",children:[Ne.photoUrl?d.jsx("img",{src:Ne.photoUrl,alt:Ne.displayName,onClick:()=>R(Ne),className:"w-10 h-10 rounded-full object-cover cursor-pointer hover:opacity-80 transition-opacity",onError:Me=>{Me.target.style.display="none",Me.target.nextSibling.style.display="flex"}}):null,d.jsx("div",{onClick:()=>R(Ne),className:"w-10 h-10 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold cursor-pointer hover:opacity-80 transition-opacity",style:{display:Ne.photoUrl?"none":"flex"},children:Ne.displayName?.[0]?.toUpperCase()||"U"})]}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("span",{className:"font-semibold text-dark-text hover:underline cursor-pointer",onClick:()=>R(Ne),children:Ne.displayName||"Unknown"}),d.jsx("span",{className:Rt("text-xs px-1.5 py-0.5 rounded border",wC(Ne.role)),children:Ne.role?.charAt(0).toUpperCase()+Ne.role?.slice(1)}),d.jsx("span",{className:"text-xs text-dark-muted",children:Yp(ie.timestamp)}),ie.edited&&d.jsx("span",{className:"text-xs text-dark-muted italic",children:"(edited)"}),j!==ie.id&&d.jsxs("div",{className:"ml-auto relative z-50",children:[d.jsx("button",{onClick:Me=>{const Q=Me.clientY,ae=window.innerHeight,we=Q<ae/2;F(we?"bottom":"top"),V(I===ie.id?null:ie.id)},className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-dark-hover rounded transition-all",title:"More options",children:d.jsx(hM,{size:18,className:"text-dark-muted"})}),I===ie.id&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>V(null)}),d.jsxs("div",{className:`absolute right-0 ${z==="top"?"bottom-full mb-1":"top-full mt-1"} bg-dark-sidebar border border-dark-hover rounded-lg shadow-lg py-1 z-50 min-w-[120px]`,children:[d.jsxs("button",{onClick:()=>{l&&l(ie),V(null)},className:"w-full px-3 py-2 text-left text-sm text-dark-text hover:bg-dark-hover flex items-center gap-2",children:[d.jsx(nM,{size:16,className:"text-green-400"}),"Reply"]}),ye(ie)&&d.jsxs("button",{onClick:()=>{He(ie),V(null)},className:"w-full px-3 py-2 text-left text-sm text-dark-text hover:bg-dark-hover flex items-center gap-2",children:[d.jsx(Ul,{size:16,className:"text-blue-400"}),"Edit"]}),(a==="admin"||a==="moderator")&&d.jsxs("button",{onClick:()=>{ve(ie),V(null)},className:"w-full px-3 py-2 text-left text-sm text-dark-text hover:bg-dark-hover flex items-center gap-2",children:[d.jsx(Vl,{size:16,className:"text-blue-400"}),ie.pinned?"Unpin":"Pin"]}),Ce(ie.userId)&&d.jsxs("button",{onClick:()=>{v({id:ie.id,text:ie.text,userId:ie.userId}),V(null)},className:"w-full px-3 py-2 text-left text-sm text-admin hover:bg-dark-hover flex items-center gap-2",children:[d.jsx(go,{size:16}),"Delete"]})]})]})]})]}),j===ie.id?d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"text",value:B,onChange:Me=>G(Me.target.value),onKeyDown:Me=>{Me.key==="Enter"&&_e(),Me.key==="Escape"&&Ge()},className:`flex-1 bg-dark-input text-dark-text px-3 py-1.5 rounded
                                 border border-brand-primary outline-none`,autoFocus:!0}),d.jsx("button",{onClick:_e,className:"text-green-500 hover:text-green-400 transition-colors",title:"Save (Enter)",children:d.jsx(Ku,{size:20})}),d.jsx("button",{onClick:Ge,className:"text-admin hover:text-admin/80 transition-colors",title:"Cancel (Esc)",children:d.jsx(Hn,{size:20})})]}):d.jsxs(d.Fragment,{children:[ie.replyTo&&d.jsxs("div",{className:"mb-2 ml-2 pl-3 border-l-2 border-green-400 text-sm bg-dark-sidebar/30 rounded py-1",children:[d.jsxs("div",{className:"text-xs text-green-400 font-semibold",children:["Replying to ",me(ie.replyTo.userId).displayName]}),d.jsx("div",{className:"text-dark-muted italic truncate",children:ie.replyTo.text})]}),ie.pinned&&d.jsxs("div",{className:"flex items-center gap-1 text-xs text-blue-400 mb-1",children:[d.jsx(Vl,{size:14}),d.jsx("span",{children:"Pinned"})]}),(()=>{const Me=bA(ie.text);let Q=ie.text;return Me.filter(we=>{const Ie=vA(we);return["youtube","spotify","twitter","image","video","audio","file"].includes(Ie)}).forEach(we=>{Q=Q.replace(we,"")}),Q=Q.trim(),Q.length>0&&d.jsx("div",{className:"text-dark-text whitespace-pre-wrap break-words",children:d.jsx(pA,{onMentionClick:we=>{const Ie=t.find(Ye=>Ye.displayName?.toLowerCase()===we.toLowerCase());Ie&&R(Ie)},children:Q})})})(),d.jsx(EP,{text:ie.text}),ie.type==="poll"&&d.jsx(aP,{message:ie,currentUserId:r,serverId:n,channelId:e,users:t}),ie.reactions&&Object.keys(ie.reactions).length>0&&d.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[Object.entries(ie.reactions).map(([Me,Q])=>d.jsxs("button",{onClick:()=>ce(ie.id,Me),className:Rt("px-2 py-1 rounded-full text-sm flex items-center gap-1 transition-colors",Q.includes(r)?"bg-brand-primary/20 border border-brand-primary text-brand-primary":"bg-dark-hover border border-dark-hover text-dark-text hover:border-dark-muted"),title:`${Q.map(ae=>me(ae).displayName).join(", ")}`,children:[d.jsx("span",{children:Me}),d.jsx("span",{className:"text-xs",children:Q.length})]},Me)),d.jsxs("div",{className:"relative",children:[d.jsx("button",{onClick:()=>S(w===ie.id?null:ie.id),className:"px-2 py-1 rounded-full text-sm bg-dark-hover border border-dark-hover hover:border-dark-muted transition-colors",title:"Add reaction",children:d.jsx(JE,{size:16,className:"text-dark-muted"})}),w===ie.id&&d.jsx(_w,{onSelect:Me=>{ce(ie.id,Me),S(null)},onClose:()=>S(null)})]})]}),(!ie.reactions||Object.keys(ie.reactions).length===0)&&d.jsxs("div",{className:"relative mt-2",children:[d.jsxs("button",{onClick:()=>S(w===ie.id?null:ie.id),className:"opacity-0 group-hover:opacity-100 px-2 py-1 rounded text-xs bg-dark-hover hover:bg-dark-input transition-all flex items-center gap-1",title:"Add reaction",children:[d.jsx(JE,{size:14}),d.jsx("span",{className:"text-dark-muted",children:"Add reaction"})]}),w===ie.id&&d.jsx(_w,{onSelect:Me=>{ce(ie.id,Me),S(null)},onClose:()=>S(null)})]})]})]})]},ie.id)}),d.jsx("div",{ref:Ee}),d.jsx(Jl,{isOpen:!!g,onClose:()=>v(null),onConfirm:Se,title:"Delete Message",message:"Are you sure you want to delete this message? This action cannot be undone.",confirmText:"Delete",variant:"danger"}),d.jsx(rP,{isOpen:!!b,onClose:()=>x(null),onConfirm:()=>window.open(b?.url,"_blank","noopener,noreferrer"),url:b?.url}),d.jsx(l1,{user:C,isOpen:!!C,onClose:()=>R(null)})]})},xw={smileys:{name:"Smileys & People",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},animals:{name:"Animals & Nature",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},food:{name:"Food & Drink",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},activities:{name:"Activities",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},travel:{name:"Travel & Places",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},objects:{name:"Objects",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},symbols:{name:"Symbols",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","0","1","2","3","4","5","6","7","8","9","","","#","*","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},flags:{name:"Flags",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]}},wP=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],SP=({onSelect:n,onClose:e})=>{const[t,r]=P.useState("smileys");return d.jsxs("div",{className:"absolute bottom-full right-0 mb-2 bg-dark-sidebar border border-dark-hover rounded-lg shadow-xl w-80 z-50",children:[d.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-dark-hover",children:[d.jsx("span",{className:"text-sm font-semibold text-dark-text",children:"Emoji Picker"}),d.jsx("button",{onClick:e,className:"text-dark-muted hover:text-dark-text transition-colors",children:d.jsx(Hn,{size:18})})]}),d.jsxs("div",{className:"p-3 border-b border-dark-hover",children:[d.jsx("div",{className:"text-xs text-dark-muted mb-2 font-semibold",children:"POPULAR"}),d.jsx("div",{className:"grid grid-cols-10 gap-1",children:wP.map((a,l)=>d.jsx("button",{onClick:()=>n(a),className:"text-2xl hover:bg-dark-hover rounded p-1 transition-colors",title:a,children:a},l))})]}),d.jsx("div",{className:"flex gap-1 p-2 border-b border-dark-hover overflow-x-auto",children:Object.entries(xw).map(([a,l])=>d.jsx("button",{onClick:()=>r(a),className:`text-xl p-2 rounded transition-colors ${t===a?"bg-brand-primary/20 text-brand-primary":"hover:bg-dark-hover text-dark-muted"}`,title:l.name,children:l.icon},a))}),d.jsx("div",{className:"p-3 h-64 overflow-y-auto",children:d.jsx("div",{className:"grid grid-cols-8 gap-1",children:xw[t].emojis.map((a,l)=>d.jsx("button",{onClick:()=>n(a),className:"text-2xl hover:bg-dark-hover rounded p-1 transition-colors",title:a,children:a},l))})})]})};let rf;const TP=new Uint8Array(16);function CP(){if(!rf&&(rf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!rf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return rf(TP)}const jn=[];for(let n=0;n<256;++n)jn.push((n+256).toString(16).slice(1));function AP(n,e=0){return jn[n[e+0]]+jn[n[e+1]]+jn[n[e+2]]+jn[n[e+3]]+"-"+jn[n[e+4]]+jn[n[e+5]]+"-"+jn[n[e+6]]+jn[n[e+7]]+"-"+jn[n[e+8]]+jn[n[e+9]]+"-"+jn[n[e+10]]+jn[n[e+11]]+jn[n[e+12]]+jn[n[e+13]]+jn[n[e+14]]+jn[n[e+15]]}const kP=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ew={randomUUID:kP};function RP(n,e,t){if(Ew.randomUUID&&!n)return Ew.randomUUID();n=n||{};const r=n.random||(n.rng||CP)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,AP(r)}var NP=Object.defineProperty,IP=Object.defineProperties,jP=Object.getOwnPropertyDescriptors,ww=Object.getOwnPropertySymbols,DP=Object.prototype.hasOwnProperty,MP=Object.prototype.propertyIsEnumerable,Sw=(n,e,t)=>e in n?NP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,c1=(n,e)=>{for(var t in e||(e={}))DP.call(e,t)&&Sw(n,t,e[t]);if(ww)for(var t of ww(e))MP.call(e,t)&&Sw(n,t,e[t]);return n},OP=(n,e)=>IP(n,jP(e)),Dn={ENABLED:typeof window<"u"&&typeof location<"u"&&location.search.indexOf("giphy-debug")!==-1,LEVEL:0,PREFIX:"GiphyJS",debug:(...n)=>{Dn.ENABLED&&Dn.LEVEL<=0&&console.debug(Dn.PREFIX,...n)},info:(...n)=>{Dn.ENABLED&&Dn.LEVEL<=1&&console.info(Dn.PREFIX,...n)},warn:(...n)=>{Dn.ENABLED&&Dn.LEVEL<=2&&console.warn(Dn.PREFIX,...n)},error:(...n)=>{Dn.ENABLED&&Dn.LEVEL<=3&&console.error(Dn.PREFIX,...n)}},PP=(n,e,t)=>{let r=1/0,a;return t.forEach(l=>{const c=l.width/n,h=l.height/e,p=c*h,g=Math.abs(1-p);g<r&&(r=g,a=l)}),a},LP=50;function VP(n,e,t,r=LP){let[a]=n;const l=n.filter(c=>(c.width*c.height>a.width*a.height&&(a=c),e-c.width<=r&&t-c.height<=r));return l.length===0?a:PP(e,t,l)}var xA=VP;function UP(n,e=0){return n.slice(0,e)}function zP(n,e){return n.filter(t=>e.indexOf(t)===-1)}function I0(n,e){const t={};return e.forEach(r=>{n[r]!==void 0&&(t[r]=n[r])}),t}var BP=n=>{let e=0,t=0;const r=n.offsetWidth,a=n.offsetHeight;do e+=n.offsetLeft,t+=n.offsetTop,n=n.offsetParent;while(n);const l={left:e,top:t,width:r,height:a,right:e+r,bottom:t+a,x:e,y:t};return OP(c1({},l),{toJSON:()=>JSON.stringify(l)})},FP=BP,lo="",EA=16,wA=()=>{let n="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=e.length;for(let r=0;r<EA;r++)n+=e.charAt(Math.floor(Math.random()*t));return n},$P=()=>{if(!lo){try{lo=sessionStorage.getItem("giphyPingbackId")}catch{}if(!lo){const n=new Date().getTime().toString(16);try{lo=`${n}${RP().replace(/-/g,"")}`.substring(0,EA)}catch{lo=wA()}try{sessionStorage.setItem("giphyPingbackId",lo)}catch{}}}return lo},u1=$P,sf=null;new Promise(n=>{typeof Image>"u"&&n(!1);const e=new Image;e.onload=()=>{sf=!0,n(sf)},e.onerror=()=>{sf=!1,n(sf)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"});var Tw=(n,e,t)=>{let r=n?.assets;if(r){r=c1({},r),delete r.source;const a=Object.values(r).sort((l,c)=>l.width-c.width);return xA(a,e,t)}},HP=(n,e,t,r)=>{const a=I0(n,["original","fixed_width","fixed_height","fixed_width_small","fixed_height_small"]),l=Object.entries(a).map(([c,h])=>c1({renditionName:c},h));return xA(l,e,t,r)},Jp=({images:n},e)=>{const{fixed_width:t}=n;if(t){const{width:r,height:a}=t,l=r/a;return Math.round(e/l)}return 0},qP=({images:n},e)=>{const{fixed_width:t}=n;if(t){const{width:r,height:a}=t,l=r/a;return Math.round(e*l)}return 0},GP=({alt_text:n,user:e,tags:t=[],is_sticker:r=!1,title:a=""})=>{if(n)return n;if(a)return a;const l=e&&e.username||"",c=UP(zP(t,["transparent"]),l?4:5);return`${l?`${l} `:""}${c.join(" ")} ${r?"Sticker":"GIF"}`},Ru=(typeof window<"u"?window:global)||{};Ru._GIPHY_SDK_HEADERS_=Ru._GIPHY_SDK_HEADERS_||(Ru.Headers?new Ru.Headers({"X-GIPHY-SDK-PLATFORM":"web"}):void 0);var d1=()=>Ru._GIPHY_SDK_HEADERS_,j0=(n,e)=>{var t;return(t=d1())==null?void 0:t.set(n,e)},YP=Object.defineProperty,KP=Object.defineProperties,QP=Object.getOwnPropertyDescriptors,XP=Object.getOwnPropertyNames,Cw=Object.getOwnPropertySymbols,WP=Object.prototype.hasOwnProperty,JP=Object.prototype.propertyIsEnumerable,Aw=(n,e,t)=>e in n?YP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Rs=(n,e)=>{for(var t in e||(e={}))WP.call(e,t)&&Aw(n,t,e[t]);if(Cw)for(var t of Cw(e))JP.call(e,t)&&Aw(n,t,e[t]);return n},Dy=(n,e)=>KP(n,QP(e)),ZP=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')}),e7=(n,e)=>function(){return e||(0,n[XP(n)[0]])((e={exports:{}}).exports,e),e.exports},SA=(n,e,t)=>new Promise((r,a)=>{var l=p=>{try{h(t.next(p))}catch(g){a(g)}},c=p=>{try{h(t.throw(p))}catch(g){a(g)}},h=p=>p.done?r(p.value):Promise.resolve(p.value).then(l,c);h((t=t.apply(n,e)).next())}),t7=e7({"package.json"(n,e){e.exports={scripts:{lint:"run -T eslint . --ext .ts,.tsx",clean:"rm -rf ./dist",dev:"parcel public/test.html",docs:"typedoc src/index.ts",build:"run -T tsup src/index.ts --format cjs,esm --dts && run -T publint",prepublish:"npm run clean && npm run build",test:"run -T jest --config ./jestconfig.js","test:watch":"run -T jest --config ./jestconfig.js --watchAll"},name:"@giphy/js-fetch-api",version:"5.7.0",description:"Javascript API to fetch gifs and stickers from the GIPHY API.",homepage:"https://github.com/Giphy/giphy-js/tree/master/packages/fetch-api",main:"dist/index.cjs",types:"dist/index.d.ts",module:"dist/index.js",type:"module",sideEffects:!1,exports:{".":{types:"./dist/index.d.ts",import:"./dist/index.js",require:"./dist/index.cjs"},"./package.json":"./package.json"},files:["dist/","src/**/*"],license:"MIT",publishConfig:{access:"public"},dependencies:{"@giphy/js-types":"*","@giphy/js-util":"*"},devDependencies:{"jest-fetch-mock":"^3.0.3","parcel-bundler":"latest",typedoc:"^0.20.37","typedoc-thunder-theme":"^0.0.3",typescript:"^5.0.4"}}}}),n7=["is_anonymous","is_community","is_featured","is_hidden","is_indexable","is_preserve_size","is_realtime","is_removed","is_sticker","is_dynamic"],r7=["suppress_chrome","is_public","is_verified"],kw=n=>e=>n[e]=!!n[e],s7=n=>typeof n=="string"?n:n.text,TA=(n,e="")=>{const t=Rs({},n);t.id=String(t.id),t.tags=(t.tags||[]).map(s7),t.bottle_data||(t.bottle_data={}),t.response_id=e,n7.forEach(kw(t)),Object.keys(t.images||{}).forEach(a=>{const l=t.images[a];l.width=parseInt(l.width),l.height=parseInt(l.height)});const{user:r}=t;if(r){const a=Rs({},r);r7.forEach(kw(a)),t.user=a}return t},Rw=n=>{const{response_id:e}=n.meta;return n.data=TA(n.data,e),n},pi=n=>{const{response_id:e}=n.meta;return n.data=n.data.map(t=>TA(t,e)),n},i7=(typeof window<"u"?window:global)||{},a7=i7.GIPHY_API_URL||"https://api.giphy.com/v1/",CA=class extends Error{constructor(e,t,r=0,a=""){super(e),this.url=t,this.status=r,this.statusText=a}},o7=class extends CA{},Nw=CA,l7="@giphy/js-fetch-api: ",c7="Error fetching",u7=n=>n,es={},d7=6e4,h7=6e3,f7=()=>{const n=Date.now();Object.keys(es).forEach(e=>{const t=es[e].isError?h7:d7;n-es[e].ts>=t&&delete es[e]})};function p7(n,e={}){const{apiVersion:t=1,noCache:r=!1,normalizer:a=u7}=e,l=a7.replace(/\/v\d+\/$/,`/v${t}/`);if(f7(),!es[n]||r){const c=`${l}${n}`,h=()=>SA(this,null,function*(){var p,g;let v;try{const b=yield fetch(c,{method:"get"});if(b.ok){const x=yield b.json();if((p=x.meta)!=null&&p.response_id)return a(x);throw{message:"synthetic response"}}else{let x=c7;try{const R=yield b.json();R.message&&(x=R.message),(g=R.meta)!=null&&g.msg&&(x=R.meta.msg)}catch{}es[n]&&(es[n].isError=!0);let C=Nw;x==="This content is not available in your location"&&(C=o7),v=new C(`${l7}${x}`,c,b.status,b.statusText)}}catch(b){v=new Nw(b.message,c),es[n]&&(es[n].isError=!0)}throw v});es[n]={request:h(),ts:Date.now()}}return es[n].request}var ar=p7,My=n=>n&&n.type?n.type:"gifs",m7=class{constructor(n,e={}){this.getQS=(t={})=>new URLSearchParams(Rs(Dy(Rs({},t),{api_key:this.apiKey,pingback_id:u1()}),this.qsParams)).toString(),this.apiKey=n,this.qsParams=e}categories(n){return ar(`gifs/categories?${this.getQS(n)}`)}gif(n,e){const t=e?.internal?"internal/":"";return ar(`${t}gifs/${n}?${this.getQS()}`,{normalizer:Rw})}gifs(n,e){return Array.isArray(n)?ar(`gifs?${this.getQS({ids:n.join(",")})}`,{normalizer:pi}):ar(`gifs/categories/${n}/${e}?${this.getQS()}`,{normalizer:pi})}emoji(n){return ar(`emoji?${this.getQS(n)}`,{normalizer:pi})}emojiDefaultVariations(n){return ar(`emoji?${this.getQS(n)}`,{apiVersion:2,normalizer:pi})}emojiVariations(n){return ar(`emoji/${n}/variations?${this.getQS()}`,{apiVersion:2,normalizer:pi})}animate(n,e={}){const t=this.getQS(Dy(Rs({},e),{m:n}));return ar(`text/animate?${t}`,{normalizer:pi})}search(n,e={}){const t=e.channel?`@${e.channel} ${n}`:n;let r;e.type==="text"&&(r=!0);const a=this.getQS(Dy(Rs({rating:"pg-13"},e),{q:t,excludeDynamicResults:r}));return ar(`${My(e)}/search?${a}`,{normalizer:pi})}subcategories(n,e){return ar(`gifs/categories/${n}?${this.getQS(e)}`)}trending(n={}){return ar(`${My(n)}/trending?${this.getQS(Rs({rating:"pg-13"},n))}`,{normalizer:pi})}random(n){return ar(`${My(n)}/random?${this.getQS(Rs({rating:"pg-13"},n))}`,{noCache:!0,normalizer:Rw})}related(n,e={}){const{type:t="gifs"}=e;return ar(`${t}/related?${this.getQS(Rs({gif_id:n,rating:"pg-13"},e))}`,{normalizer:pi})}channels(n,e={}){return ar(`channels/search?${this.getQS(Rs({q:n,rating:"pg-13"},e))}`)}},g7=m7,y7=Symbol("has inivisible gifs"),AA=(n,e=[])=>{let t=[...e],r=e.map(c=>c.id),a=e.length,l=!1;return c=>SA(void 0,null,function*(){if(c&&(t=c,r=c.map(b=>b.id)),l)return t;const h=yield n(a),{pagination:p,data:g}=h;a=p.count+p.offset,l=a===p.total_count,g.forEach(b=>{const{id:x}=b;r.includes(x)||(t.push(b),r.push(x))});const v=[...t];return p.hasMoreGifs&&(v.skipCountCheck=y7),v})},Iw;if(typeof ZP<"u"){const{version:n}=t7();(Iw=d1())!=null&&Iw.get("X-GIPHY-SDK-NAME")||(j0("X-GIPHY-SDK-NAME","FetchAPI"),j0("X-GIPHY-SDK-VERSION",n))}var ur=function(){return ur=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},ur.apply(this,arguments)};function Ju(n,e,t){if(t||arguments.length===2)for(var r=0,a=e.length,l;r<a;r++)(l||!(r in e))&&(l||(l=Array.prototype.slice.call(e,0,r)),l[r]=e[r]);return n.concat(l||Array.prototype.slice.call(e))}var Ut="-ms-",Lu="-moz-",St="-webkit-",kA="comm",Zp="rule",h1="decl",v7="@import",RA="@keyframes",b7="@layer",NA=Math.abs,f1=String.fromCharCode,D0=Object.assign;function _7(n,e){return Tn(n,0)^45?(((e<<2^Tn(n,0))<<2^Tn(n,1))<<2^Tn(n,2))<<2^Tn(n,3):0}function IA(n){return n.trim()}function mi(n,e){return(n=e.exec(n))?n[0]:n}function it(n,e,t){return n.replace(e,t)}function Nf(n,e,t){return n.indexOf(e,t)}function Tn(n,e){return n.charCodeAt(e)|0}function Zl(n,e,t){return n.slice(e,t)}function Is(n){return n.length}function jA(n){return n.length}function Nu(n,e){return e.push(n),n}function x7(n,e){return n.map(e).join("")}function jw(n,e){return n.filter(function(t){return!mi(t,e)})}var em=1,ec=1,DA=0,Br=0,mn=0,fc="";function tm(n,e,t,r,a,l,c,h){return{value:n,root:e,parent:t,type:r,props:a,children:l,line:em,column:ec,length:c,return:"",siblings:h}}function ca(n,e){return D0(tm("",null,null,"",null,null,0,n.siblings),n,{length:-n.length},e)}function Sl(n){for(;n.root;)n=ca(n.root,{children:[n]});Nu(n,n.siblings)}function E7(){return mn}function w7(){return mn=Br>0?Tn(fc,--Br):0,ec--,mn===10&&(ec=1,em--),mn}function ss(){return mn=Br<DA?Tn(fc,Br++):0,ec++,mn===10&&(ec=1,em++),mn}function yo(){return Tn(fc,Br)}function If(){return Br}function nm(n,e){return Zl(fc,n,e)}function M0(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function S7(n){return em=ec=1,DA=Is(fc=n),Br=0,[]}function T7(n){return fc="",n}function Oy(n){return IA(nm(Br-1,O0(n===91?n+2:n===40?n+1:n)))}function C7(n){for(;(mn=yo())&&mn<33;)ss();return M0(n)>2||M0(mn)>3?"":" "}function A7(n,e){for(;--e&&ss()&&!(mn<48||mn>102||mn>57&&mn<65||mn>70&&mn<97););return nm(n,If()+(e<6&&yo()==32&&ss()==32))}function O0(n){for(;ss();)switch(mn){case n:return Br;case 34:case 39:n!==34&&n!==39&&O0(mn);break;case 40:n===41&&O0(n);break;case 92:ss();break}return Br}function k7(n,e){for(;ss()&&n+mn!==57;)if(n+mn===84&&yo()===47)break;return"/*"+nm(e,Br-1)+"*"+f1(n===47?n:ss())}function R7(n){for(;!M0(yo());)ss();return nm(n,Br)}function N7(n){return T7(jf("",null,null,null,[""],n=S7(n),0,[0],n))}function jf(n,e,t,r,a,l,c,h,p){for(var g=0,v=0,b=c,x=0,C=0,R=0,j=1,A=1,B=1,G=0,I="",V=a,z=l,F=r,w=I;A;)switch(R=G,G=ss()){case 40:if(R!=108&&Tn(w,b-1)==58){Nf(w+=it(Oy(G),"&","&\f"),"&\f",NA(g?h[g-1]:0))!=-1&&(B=-1);break}case 34:case 39:case 91:w+=Oy(G);break;case 9:case 10:case 13:case 32:w+=C7(R);break;case 92:w+=A7(If()-1,7);continue;case 47:switch(yo()){case 42:case 47:Nu(I7(k7(ss(),If()),e,t,p),p);break;default:w+="/"}break;case 123*j:h[g++]=Is(w)*B;case 125*j:case 59:case 0:switch(G){case 0:case 125:A=0;case 59+v:B==-1&&(w=it(w,/\f/g,"")),C>0&&Is(w)-b&&Nu(C>32?Mw(w+";",r,t,b-1,p):Mw(it(w," ","")+";",r,t,b-2,p),p);break;case 59:w+=";";default:if(Nu(F=Dw(w,e,t,g,v,a,h,I,V=[],z=[],b,l),l),G===123)if(v===0)jf(w,e,F,F,V,l,b,h,z);else switch(x===99&&Tn(w,3)===110?100:x){case 100:case 108:case 109:case 115:jf(n,F,F,r&&Nu(Dw(n,F,F,0,0,a,h,I,a,V=[],b,z),z),a,z,b,h,r?V:z);break;default:jf(w,F,F,F,[""],z,0,h,z)}}g=v=C=0,j=B=1,I=w="",b=c;break;case 58:b=1+Is(w),C=R;default:if(j<1){if(G==123)--j;else if(G==125&&j++==0&&w7()==125)continue}switch(w+=f1(G),G*j){case 38:B=v>0?1:(w+="\f",-1);break;case 44:h[g++]=(Is(w)-1)*B,B=1;break;case 64:yo()===45&&(w+=Oy(ss())),x=yo(),v=b=Is(I=w+=R7(If())),G++;break;case 45:R===45&&Is(w)==2&&(j=0)}}return l}function Dw(n,e,t,r,a,l,c,h,p,g,v,b){for(var x=a-1,C=a===0?l:[""],R=jA(C),j=0,A=0,B=0;j<r;++j)for(var G=0,I=Zl(n,x+1,x=NA(A=c[j])),V=n;G<R;++G)(V=IA(A>0?C[G]+" "+I:it(I,/&\f/g,C[G])))&&(p[B++]=V);return tm(n,e,t,a===0?Zp:h,p,g,v,b)}function I7(n,e,t,r){return tm(n,e,t,kA,f1(E7()),Zl(n,2,-2),0,r)}function Mw(n,e,t,r,a){return tm(n,e,t,h1,Zl(n,0,r),Zl(n,r+1,-1),r,a)}function MA(n,e,t){switch(_7(n,e)){case 5103:return St+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return St+n+n;case 4789:return Lu+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return St+n+Lu+n+Ut+n+n;case 5936:switch(Tn(n,e+11)){case 114:return St+n+Ut+it(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return St+n+Ut+it(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return St+n+Ut+it(n,/[svh]\w+-[tblr]{2}/,"lr")+n}case 6828:case 4268:case 2903:return St+n+Ut+n+n;case 6165:return St+n+Ut+"flex-"+n+n;case 5187:return St+n+it(n,/(\w+).+(:[^]+)/,St+"box-$1$2"+Ut+"flex-$1$2")+n;case 5443:return St+n+Ut+"flex-item-"+it(n,/flex-|-self/g,"")+(mi(n,/flex-|baseline/)?"":Ut+"grid-row-"+it(n,/flex-|-self/g,""))+n;case 4675:return St+n+Ut+"flex-line-pack"+it(n,/align-content|flex-|-self/g,"")+n;case 5548:return St+n+Ut+it(n,"shrink","negative")+n;case 5292:return St+n+Ut+it(n,"basis","preferred-size")+n;case 6060:return St+"box-"+it(n,"-grow","")+St+n+Ut+it(n,"grow","positive")+n;case 4554:return St+it(n,/([^-])(transform)/g,"$1"+St+"$2")+n;case 6187:return it(it(it(n,/(zoom-|grab)/,St+"$1"),/(image-set)/,St+"$1"),n,"")+n;case 5495:case 3959:return it(n,/(image-set\([^]*)/,St+"$1$`$1");case 4968:return it(it(n,/(.+:)(flex-)?(.*)/,St+"box-pack:$3"+Ut+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+St+n+n;case 4200:if(!mi(n,/flex-|baseline/))return Ut+"grid-column-align"+Zl(n,e)+n;break;case 2592:case 3360:return Ut+it(n,"template-","")+n;case 4384:case 3616:return t&&t.some(function(r,a){return e=a,mi(r.props,/grid-\w+-end/)})?~Nf(n+(t=t[e].value),"span",0)?n:Ut+it(n,"-start","")+n+Ut+"grid-row-span:"+(~Nf(t,"span",0)?mi(t,/\d+/):+mi(t,/\d+/)-+mi(n,/\d+/))+";":Ut+it(n,"-start","")+n;case 4896:case 4128:return t&&t.some(function(r){return mi(r.props,/grid-\w+-start/)})?n:Ut+it(it(n,"-end","-span"),"span ","")+n;case 4095:case 3583:case 4068:case 2532:return it(n,/(.+)-inline(.+)/,St+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Is(n)-1-e>6)switch(Tn(n,e+1)){case 109:if(Tn(n,e+4)!==45)break;case 102:return it(n,/(.+:)(.+)-([^]+)/,"$1"+St+"$2-$3$1"+Lu+(Tn(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~Nf(n,"stretch",0)?MA(it(n,"stretch","fill-available"),e,t)+n:n}break;case 5152:case 5920:return it(n,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,a,l,c,h,p,g){return Ut+a+":"+l+g+(c?Ut+a+"-span:"+(h?p:+p-+l)+g:"")+n});case 4949:if(Tn(n,e+6)===121)return it(n,":",":"+St)+n;break;case 6444:switch(Tn(n,Tn(n,14)===45?18:11)){case 120:return it(n,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+St+(Tn(n,14)===45?"inline-":"")+"box$3$1"+St+"$2$3$1"+Ut+"$2box$3")+n;case 100:return it(n,":",":"+Ut)+n}break;case 5719:case 2647:case 2135:case 3927:case 2391:return it(n,"scroll-","scroll-snap-")+n}return n}function pp(n,e){for(var t="",r=0;r<n.length;r++)t+=e(n[r],r,n,e)||"";return t}function j7(n,e,t,r){switch(n.type){case b7:if(n.children.length)break;case v7:case h1:return n.return=n.return||n.value;case kA:return"";case RA:return n.return=n.value+"{"+pp(n.children,r)+"}";case Zp:if(!Is(n.value=n.props.join(",")))return""}return Is(t=pp(n.children,r))?n.return=n.value+"{"+t+"}":""}function D7(n){var e=jA(n);return function(t,r,a,l){for(var c="",h=0;h<e;h++)c+=n[h](t,r,a,l)||"";return c}}function M7(n){return function(e){e.root||(e=e.return)&&n(e)}}function O7(n,e,t,r){if(n.length>-1&&!n.return)switch(n.type){case h1:n.return=MA(n.value,n.length,t);return;case RA:return pp([ca(n,{value:it(n.value,"@","@"+St)})],r);case Zp:if(n.length)return x7(t=n.props,function(a){switch(mi(a,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Sl(ca(n,{props:[it(a,/:(read-\w+)/,":"+Lu+"$1")]})),Sl(ca(n,{props:[a]})),D0(n,{props:jw(t,r)});break;case"::placeholder":Sl(ca(n,{props:[it(a,/:(plac\w+)/,":"+St+"input-$1")]})),Sl(ca(n,{props:[it(a,/:(plac\w+)/,":"+Lu+"$1")]})),Sl(ca(n,{props:[it(a,/:(plac\w+)/,Ut+"input-$1")]})),Sl(ca(n,{props:[a]})),D0(n,{props:jw(t,r)});break}return""})}}var P7={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Er={},tc=typeof process<"u"&&Er!==void 0&&(Er.REACT_APP_SC_ATTR||Er.SC_ATTR)||"data-styled",OA="active",PA="data-styled-version",rm="6.1.19",p1=`/*!sc*/
`,mp=typeof window<"u"&&typeof document<"u",L7=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&Er!==void 0&&Er.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&Er.REACT_APP_SC_DISABLE_SPEEDY!==""?Er.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&Er.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&Er!==void 0&&Er.SC_DISABLE_SPEEDY!==void 0&&Er.SC_DISABLE_SPEEDY!==""&&Er.SC_DISABLE_SPEEDY!=="false"&&Er.SC_DISABLE_SPEEDY),sm=Object.freeze([]),nc=Object.freeze({});function V7(n,e,t){return t===void 0&&(t=nc),n.theme!==t.theme&&n.theme||e||t.theme}var LA=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),U7=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,z7=/(^-|-$)/g;function Ow(n){return n.replace(U7,"-").replace(z7,"")}var B7=/(a)(d)/gi,af=52,Pw=function(n){return String.fromCharCode(n+(n>25?39:97))};function P0(n){var e,t="";for(e=Math.abs(n);e>af;e=e/af|0)t=Pw(e%af)+t;return(Pw(e%af)+t).replace(B7,"$1-$2")}var Py,VA=5381,jl=function(n,e){for(var t=e.length;t;)n=33*n^e.charCodeAt(--t);return n},UA=function(n){return jl(VA,n)};function zA(n){return P0(UA(n)>>>0)}function F7(n){return n.displayName||n.name||"Component"}function Ly(n){return typeof n=="string"&&!0}var BA=typeof Symbol=="function"&&Symbol.for,FA=BA?Symbol.for("react.memo"):60115,$7=BA?Symbol.for("react.forward_ref"):60112,H7={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},q7={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},$A={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},G7=((Py={})[$7]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Py[FA]=$A,Py);function Lw(n){return("type"in(e=n)&&e.type.$$typeof)===FA?$A:"$$typeof"in n?G7[n.$$typeof]:H7;var e}var Y7=Object.defineProperty,K7=Object.getOwnPropertyNames,Vw=Object.getOwnPropertySymbols,Q7=Object.getOwnPropertyDescriptor,X7=Object.getPrototypeOf,Uw=Object.prototype;function HA(n,e,t){if(typeof e!="string"){if(Uw){var r=X7(e);r&&r!==Uw&&HA(n,r,t)}var a=K7(e);Vw&&(a=a.concat(Vw(e)));for(var l=Lw(n),c=Lw(e),h=0;h<a.length;++h){var p=a[h];if(!(p in q7||t&&t[p]||c&&p in c||l&&p in l)){var g=Q7(e,p);try{Y7(n,p,g)}catch{}}}}return n}function rc(n){return typeof n=="function"}function m1(n){return typeof n=="object"&&"styledComponentId"in n}function fo(n,e){return n&&e?"".concat(n," ").concat(e):n||e||""}function L0(n,e){if(n.length===0)return"";for(var t=n[0],r=1;r<n.length;r++)t+=n[r];return t}function Zu(n){return n!==null&&typeof n=="object"&&n.constructor.name===Object.name&&!("props"in n&&n.$$typeof)}function V0(n,e,t){if(t===void 0&&(t=!1),!t&&!Zu(n)&&!Array.isArray(n))return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)n[r]=V0(n[r],e[r]);else if(Zu(e))for(var r in e)n[r]=V0(n[r],e[r]);return n}function g1(n,e){Object.defineProperty(n,"toString",{value:e})}function _d(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(n," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var W7=(function(){function n(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return n.prototype.indexOfGroup=function(e){for(var t=0,r=0;r<e;r++)t+=this.groupSizes[r];return t},n.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var r=this.groupSizes,a=r.length,l=a;e>=l;)if((l<<=1)<0)throw _d(16,"".concat(e));this.groupSizes=new Uint32Array(l),this.groupSizes.set(r),this.length=l;for(var c=a;c<l;c++)this.groupSizes[c]=0}for(var h=this.indexOfGroup(e+1),p=(c=0,t.length);c<p;c++)this.tag.insertRule(h,t[c])&&(this.groupSizes[e]++,h++)},n.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],r=this.indexOfGroup(e),a=r+t;this.groupSizes[e]=0;for(var l=r;l<a;l++)this.tag.deleteRule(r)}},n.prototype.getGroup=function(e){var t="";if(e>=this.length||this.groupSizes[e]===0)return t;for(var r=this.groupSizes[e],a=this.indexOfGroup(e),l=a+r,c=a;c<l;c++)t+="".concat(this.tag.getRule(c)).concat(p1);return t},n})(),Df=new Map,gp=new Map,Mf=1,of=function(n){if(Df.has(n))return Df.get(n);for(;gp.has(Mf);)Mf++;var e=Mf++;return Df.set(n,e),gp.set(e,n),e},J7=function(n,e){Mf=e+1,Df.set(n,e),gp.set(e,n)},Z7="style[".concat(tc,"][").concat(PA,'="').concat(rm,'"]'),eL=new RegExp("^".concat(tc,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),tL=function(n,e,t){for(var r,a=t.split(","),l=0,c=a.length;l<c;l++)(r=a[l])&&n.registerName(e,r)},nL=function(n,e){for(var t,r=((t=e.textContent)!==null&&t!==void 0?t:"").split(p1),a=[],l=0,c=r.length;l<c;l++){var h=r[l].trim();if(h){var p=h.match(eL);if(p){var g=0|parseInt(p[1],10),v=p[2];g!==0&&(J7(v,g),tL(n,v,p[3]),n.getTag().insertRules(g,a)),a.length=0}else a.push(h)}}},zw=function(n){for(var e=document.querySelectorAll(Z7),t=0,r=e.length;t<r;t++){var a=e[t];a&&a.getAttribute(tc)!==OA&&(nL(n,a),a.parentNode&&a.parentNode.removeChild(a))}};function rL(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var qA=function(n){var e=document.head,t=n||e,r=document.createElement("style"),a=(function(h){var p=Array.from(h.querySelectorAll("style[".concat(tc,"]")));return p[p.length-1]})(t),l=a!==void 0?a.nextSibling:null;r.setAttribute(tc,OA),r.setAttribute(PA,rm);var c=rL();return c&&r.setAttribute("nonce",c),t.insertBefore(r,l),r},sL=(function(){function n(e){this.element=qA(e),this.element.appendChild(document.createTextNode("")),this.sheet=(function(t){if(t.sheet)return t.sheet;for(var r=document.styleSheets,a=0,l=r.length;a<l;a++){var c=r[a];if(c.ownerNode===t)return c}throw _d(17)})(this.element),this.length=0}return n.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch{return!1}},n.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},n.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},n})(),iL=(function(){function n(e){this.element=qA(e),this.nodes=this.element.childNodes,this.length=0}return n.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var r=document.createTextNode(t);return this.element.insertBefore(r,this.nodes[e]||null),this.length++,!0}return!1},n.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},n.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},n})(),aL=(function(){function n(e){this.rules=[],this.length=0}return n.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},n.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},n.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},n})(),Bw=mp,oL={isServer:!mp,useCSSOMInjection:!L7},GA=(function(){function n(e,t,r){e===void 0&&(e=nc),t===void 0&&(t={});var a=this;this.options=ur(ur({},oL),e),this.gs=t,this.names=new Map(r),this.server=!!e.isServer,!this.server&&mp&&Bw&&(Bw=!1,zw(this)),g1(this,function(){return(function(l){for(var c=l.getTag(),h=c.length,p="",g=function(b){var x=(function(B){return gp.get(B)})(b);if(x===void 0)return"continue";var C=l.names.get(x),R=c.getGroup(b);if(C===void 0||!C.size||R.length===0)return"continue";var j="".concat(tc,".g").concat(b,'[id="').concat(x,'"]'),A="";C!==void 0&&C.forEach(function(B){B.length>0&&(A+="".concat(B,","))}),p+="".concat(R).concat(j,'{content:"').concat(A,'"}').concat(p1)},v=0;v<h;v++)g(v);return p})(a)})}return n.registerId=function(e){return of(e)},n.prototype.rehydrate=function(){!this.server&&mp&&zw(this)},n.prototype.reconstructWithOptions=function(e,t){return t===void 0&&(t=!0),new n(ur(ur({},this.options),e),this.gs,t&&this.names||void 0)},n.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},n.prototype.getTag=function(){return this.tag||(this.tag=(e=(function(t){var r=t.useCSSOMInjection,a=t.target;return t.isServer?new aL(a):r?new sL(a):new iL(a)})(this.options),new W7(e)));var e},n.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},n.prototype.registerName=function(e,t){if(of(e),this.names.has(e))this.names.get(e).add(t);else{var r=new Set;r.add(t),this.names.set(e,r)}},n.prototype.insertRules=function(e,t,r){this.registerName(e,t),this.getTag().insertRules(of(e),r)},n.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},n.prototype.clearRules=function(e){this.getTag().clearGroup(of(e)),this.clearNames(e)},n.prototype.clearTag=function(){this.tag=void 0},n})(),lL=/&/g,cL=/^\s*\/\/.*$/gm;function YA(n,e){return n.map(function(t){return t.type==="rule"&&(t.value="".concat(e," ").concat(t.value),t.value=t.value.replaceAll(",",",".concat(e," ")),t.props=t.props.map(function(r){return"".concat(e," ").concat(r)})),Array.isArray(t.children)&&t.type!=="@keyframes"&&(t.children=YA(t.children,e)),t})}function uL(n){var e,t,r,a=nc,l=a.options,c=l===void 0?nc:l,h=a.plugins,p=h===void 0?sm:h,g=function(x,C,R){return R.startsWith(t)&&R.endsWith(t)&&R.replaceAll(t,"").length>0?".".concat(e):x},v=p.slice();v.push(function(x){x.type===Zp&&x.value.includes("&")&&(x.props[0]=x.props[0].replace(lL,t).replace(r,g))}),c.prefix&&v.push(O7),v.push(j7);var b=function(x,C,R,j){C===void 0&&(C=""),R===void 0&&(R=""),j===void 0&&(j="&"),e=j,t=C,r=new RegExp("\\".concat(t,"\\b"),"g");var A=x.replace(cL,""),B=N7(R||C?"".concat(R," ").concat(C," { ").concat(A," }"):A);c.namespace&&(B=YA(B,c.namespace));var G=[];return pp(B,D7(v.concat(M7(function(I){return G.push(I)})))),G};return b.hash=p.length?p.reduce(function(x,C){return C.name||_d(15),jl(x,C.name)},VA).toString():"",b}var dL=new GA,U0=uL(),KA=de.createContext({shouldForwardProp:void 0,styleSheet:dL,stylis:U0});KA.Consumer;de.createContext(void 0);function Fw(){return P.useContext(KA)}var QA=(function(){function n(e,t){var r=this;this.inject=function(a,l){l===void 0&&(l=U0);var c=r.name+l.hash;a.hasNameForId(r.id,c)||a.insertRules(r.id,c,l(r.rules,c,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,g1(this,function(){throw _d(12,String(r.name))})}return n.prototype.getName=function(e){return e===void 0&&(e=U0),this.name+e.hash},n})(),hL=function(n){return n>="A"&&n<="Z"};function $w(n){for(var e="",t=0;t<n.length;t++){var r=n[t];if(t===1&&r==="-"&&n[0]==="-")return n;hL(r)?e+="-"+r.toLowerCase():e+=r}return e.startsWith("ms-")?"-"+e:e}var XA=function(n){return n==null||n===!1||n===""},WA=function(n){var e,t,r=[];for(var a in n){var l=n[a];n.hasOwnProperty(a)&&!XA(l)&&(Array.isArray(l)&&l.isCss||rc(l)?r.push("".concat($w(a),":"),l,";"):Zu(l)?r.push.apply(r,Ju(Ju(["".concat(a," {")],WA(l),!1),["}"],!1)):r.push("".concat($w(a),": ").concat((e=a,(t=l)==null||typeof t=="boolean"||t===""?"":typeof t!="number"||t===0||e in P7||e.startsWith("--")?String(t).trim():"".concat(t,"px")),";")))}return r};function vo(n,e,t,r){if(XA(n))return[];if(m1(n))return[".".concat(n.styledComponentId)];if(rc(n)){if(!rc(l=n)||l.prototype&&l.prototype.isReactComponent||!e)return[n];var a=n(e);return vo(a,e,t,r)}var l;return n instanceof QA?t?(n.inject(t,r),[n.getName(r)]):[n]:Zu(n)?WA(n):Array.isArray(n)?Array.prototype.concat.apply(sm,n.map(function(c){return vo(c,e,t,r)})):[n.toString()]}function fL(n){for(var e=0;e<n.length;e+=1){var t=n[e];if(rc(t)&&!m1(t))return!1}return!0}var pL=UA(rm),mL=(function(){function n(e,t,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&fL(e),this.componentId=t,this.baseHash=jl(pL,t),this.baseStyle=r,GA.registerId(t)}return n.prototype.generateAndInjectStyles=function(e,t,r){var a=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))a=fo(a,this.staticRulesId);else{var l=L0(vo(this.rules,e,t,r)),c=P0(jl(this.baseHash,l)>>>0);if(!t.hasNameForId(this.componentId,c)){var h=r(l,".".concat(c),void 0,this.componentId);t.insertRules(this.componentId,c,h)}a=fo(a,c),this.staticRulesId=c}else{for(var p=jl(this.baseHash,r.hash),g="",v=0;v<this.rules.length;v++){var b=this.rules[v];if(typeof b=="string")g+=b;else if(b){var x=L0(vo(b,e,t,r));p=jl(p,x+v),g+=x}}if(g){var C=P0(p>>>0);t.hasNameForId(this.componentId,C)||t.insertRules(this.componentId,C,r(g,".".concat(C),void 0,this.componentId)),a=fo(a,C)}}return a},n})(),JA=de.createContext(void 0);JA.Consumer;var Vy={};function gL(n,e,t){var r=m1(n),a=n,l=!Ly(n),c=e.attrs,h=c===void 0?sm:c,p=e.componentId,g=p===void 0?(function(V,z){var F=typeof V!="string"?"sc":Ow(V);Vy[F]=(Vy[F]||0)+1;var w="".concat(F,"-").concat(zA(rm+F+Vy[F]));return z?"".concat(z,"-").concat(w):w})(e.displayName,e.parentComponentId):p,v=e.displayName,b=v===void 0?(function(V){return Ly(V)?"styled.".concat(V):"Styled(".concat(F7(V),")")})(n):v,x=e.displayName&&e.componentId?"".concat(Ow(e.displayName),"-").concat(e.componentId):e.componentId||g,C=r&&a.attrs?a.attrs.concat(h).filter(Boolean):h,R=e.shouldForwardProp;if(r&&a.shouldForwardProp){var j=a.shouldForwardProp;if(e.shouldForwardProp){var A=e.shouldForwardProp;R=function(V,z){return j(V,z)&&A(V,z)}}else R=j}var B=new mL(t,x,r?a.componentStyle:void 0);function G(V,z){return(function(F,w,S){var k=F.attrs,D=F.componentStyle,M=F.defaultProps,U=F.foldedComponentIds,O=F.styledComponentId,be=F.target,Ee=de.useContext(JA),$=Fw(),K=F.shouldForwardProp||$.shouldForwardProp,W=V7(w,Ee,M)||nc,Te=(function(Ce,ye,Se){for(var He,Ge=ur(ur({},ye),{className:void 0,theme:Se}),_e=0;_e<Ce.length;_e+=1){var ce=rc(He=Ce[_e])?He(Ge):He;for(var ve in ce)Ge[ve]=ve==="className"?fo(Ge[ve],ce[ve]):ve==="style"?ur(ur({},Ge[ve]),ce[ve]):ce[ve]}return ye.className&&(Ge.className=fo(Ge.className,ye.className)),Ge})(k,w,W),Re=Te.as||be,H={};for(var J in Te)Te[J]===void 0||J[0]==="$"||J==="as"||J==="theme"&&Te.theme===W||(J==="forwardedAs"?H.as=Te.forwardedAs:K&&!K(J,Re)||(H[J]=Te[J]));var ue=(function(Ce,ye){var Se=Fw(),He=Ce.generateAndInjectStyles(ye,Se.styleSheet,Se.stylis);return He})(D,Te),me=fo(U,O);return ue&&(me+=" "+ue),Te.className&&(me+=" "+Te.className),H[Ly(Re)&&!LA.has(Re)?"class":"className"]=me,S&&(H.ref=S),P.createElement(Re,H)})(I,V,z)}G.displayName=b;var I=de.forwardRef(G);return I.attrs=C,I.componentStyle=B,I.displayName=b,I.shouldForwardProp=R,I.foldedComponentIds=r?fo(a.foldedComponentIds,a.styledComponentId):"",I.styledComponentId=x,I.target=r?a.target:n,Object.defineProperty(I,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(V){this._foldedDefaultProps=r?(function(z){for(var F=[],w=1;w<arguments.length;w++)F[w-1]=arguments[w];for(var S=0,k=F;S<k.length;S++)V0(z,k[S],!0);return z})({},a.defaultProps,V):V}}),g1(I,function(){return".".concat(I.styledComponentId)}),l&&HA(I,n,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),I}function Hw(n,e){for(var t=[n[0]],r=0,a=e.length;r<a;r+=1)t.push(e[r],n[r+1]);return t}var qw=function(n){return Object.assign(n,{isCss:!0})};function im(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(rc(n)||Zu(n))return qw(vo(Hw(sm,Ju([n],e,!0))));var r=n;return e.length===0&&r.length===1&&typeof r[0]=="string"?vo(r):qw(vo(Hw(r,e)))}function z0(n,e,t){if(t===void 0&&(t=nc),!e)throw _d(1,e);var r=function(a){for(var l=[],c=1;c<arguments.length;c++)l[c-1]=arguments[c];return n(e,t,im.apply(void 0,Ju([a],l,!1)))};return r.attrs=function(a){return z0(n,e,ur(ur({},t),{attrs:Array.prototype.concat(t.attrs,a).filter(Boolean)}))},r.withConfig=function(a){return z0(n,e,ur(ur({},t),a))},r}var ZA=function(n){return z0(gL,n)},qe=ZA;LA.forEach(function(n){qe[n]=ZA(n)});function xd(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var r=L0(im.apply(void 0,Ju([n],e,!1))),a=zA(r);return new QA(a,r)}var B0="#121212",ek="#212121",yL="#3e3e3e",vL="#4a4a4a",tk="#a6a6a6",bL="#ececec",Of="#ffffff",y1="#00ccff",nk="#00ff99",rk="#9933ff",sk="#ff6666",ik="#fff35c",_L="#6157ff";function Gw(n,e,t,r){var a,l=!1,c=0;function h(){a&&clearTimeout(a)}function p(){h(),l=!0}typeof e!="boolean"&&(r=t,t=e,e=void 0);function g(){for(var v=arguments.length,b=new Array(v),x=0;x<v;x++)b[x]=arguments[x];var C=this,R=Date.now()-c;if(l)return;function j(){c=Date.now(),t.apply(C,b)}function A(){a=void 0}r&&!a&&j(),h(),r===void 0&&R>n?j():e!==!0&&(a=setTimeout(r?A:j,r===void 0?n-R:n))}return g.cancel=p,g}function v1(n,e,t){return t===void 0?Gw(n,e,!1):Gw(n,t,e!==!1)}var Yw={},Kw;function xL(){return Kw||(Kw=1,(function(){if(typeof window!="object")return;if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});return}function n(I){try{return I.defaultView&&I.defaultView.frameElement||null}catch{return null}}var e=(function(I){for(var V=I,z=n(V);z;)V=z.ownerDocument,z=n(V);return V})(window.document),t=[],r=null,a=null;function l(I){this.time=I.time,this.target=I.target,this.rootBounds=R(I.rootBounds),this.boundingClientRect=R(I.boundingClientRect),this.intersectionRect=R(I.intersectionRect||C()),this.isIntersecting=!!I.intersectionRect;var V=this.boundingClientRect,z=V.width*V.height,F=this.intersectionRect,w=F.width*F.height;z?this.intersectionRatio=Number((w/z).toFixed(4)):this.intersectionRatio=this.isIntersecting?1:0}function c(I,V){var z=V||{};if(typeof I!="function")throw new Error("callback must be a function");if(z.root&&z.root.nodeType!=1&&z.root.nodeType!=9)throw new Error("root must be a Document or Element");this._checkForIntersections=p(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=I,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(z.rootMargin),this.thresholds=this._initThresholds(z.threshold),this.root=z.root||null,this.rootMargin=this._rootMarginValues.map(function(F){return F.value+F.unit}).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}c.prototype.THROTTLE_TIMEOUT=100,c.prototype.POLL_INTERVAL=null,c.prototype.USE_MUTATION_OBSERVER=!0,c._setupCrossOriginUpdater=function(){return r||(r=function(I,V){!I||!V?a=C():a=j(I,V),t.forEach(function(z){z._checkForIntersections()})}),r},c._resetCrossOriginUpdater=function(){r=null,a=null},c.prototype.observe=function(I){var V=this._observationTargets.some(function(z){return z.element==I});if(!V){if(!(I&&I.nodeType==1))throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:I,entry:null}),this._monitorIntersections(I.ownerDocument),this._checkForIntersections()}},c.prototype.unobserve=function(I){this._observationTargets=this._observationTargets.filter(function(V){return V.element!=I}),this._unmonitorIntersections(I.ownerDocument),this._observationTargets.length==0&&this._unregisterInstance()},c.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},c.prototype.takeRecords=function(){var I=this._queuedEntries.slice();return this._queuedEntries=[],I},c.prototype._initThresholds=function(I){var V=I||[0];return Array.isArray(V)||(V=[V]),V.sort().filter(function(z,F,w){if(typeof z!="number"||isNaN(z)||z<0||z>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return z!==w[F-1]})},c.prototype._parseRootMargin=function(I){var V=I||"0px",z=V.split(/\s+/).map(function(F){var w=/^(-?\d*\.?\d+)(px|%)$/.exec(F);if(!w)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(w[1]),unit:w[2]}});return z[1]=z[1]||z[0],z[2]=z[2]||z[0],z[3]=z[3]||z[1],z},c.prototype._monitorIntersections=function(I){var V=I.defaultView;if(V&&this._monitoringDocuments.indexOf(I)==-1){var z=this._checkForIntersections,F=null,w=null;this.POLL_INTERVAL?F=V.setInterval(z,this.POLL_INTERVAL):(g(V,"resize",z,!0),g(I,"scroll",z,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in V&&(w=new V.MutationObserver(z),w.observe(I,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))),this._monitoringDocuments.push(I),this._monitoringUnsubscribes.push(function(){var D=I.defaultView;D&&(F&&D.clearInterval(F),v(D,"resize",z,!0)),v(I,"scroll",z,!0),w&&w.disconnect()});var S=this.root&&(this.root.ownerDocument||this.root)||e;if(I!=S){var k=n(I);k&&this._monitorIntersections(k.ownerDocument)}}},c.prototype._unmonitorIntersections=function(I){var V=this._monitoringDocuments.indexOf(I);if(V!=-1){var z=this.root&&(this.root.ownerDocument||this.root)||e,F=this._observationTargets.some(function(k){var D=k.element.ownerDocument;if(D==I)return!0;for(;D&&D!=z;){var M=n(D);if(D=M&&M.ownerDocument,D==I)return!0}return!1});if(!F){var w=this._monitoringUnsubscribes[V];if(this._monitoringDocuments.splice(V,1),this._monitoringUnsubscribes.splice(V,1),w(),I!=z){var S=n(I);S&&this._unmonitorIntersections(S.ownerDocument)}}}},c.prototype._unmonitorAllIntersections=function(){var I=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var V=0;V<I.length;V++)I[V]()},c.prototype._checkForIntersections=function(){if(!(!this.root&&r&&!a)){var I=this._rootIsInDom(),V=I?this._getRootRect():C();this._observationTargets.forEach(function(z){var F=z.element,w=x(F),S=this._rootContainsTarget(F),k=z.entry,D=I&&S&&this._computeTargetAndRootIntersection(F,w,V),M=null;this._rootContainsTarget(F)?(!r||this.root)&&(M=V):M=C();var U=z.entry=new l({time:h(),target:F,boundingClientRect:w,rootBounds:M,intersectionRect:D});k?I&&S?this._hasCrossedThreshold(k,U)&&this._queuedEntries.push(U):k&&k.isIntersecting&&this._queuedEntries.push(U):this._queuedEntries.push(U)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},c.prototype._computeTargetAndRootIntersection=function(I,V,z){if(window.getComputedStyle(I).display!="none"){for(var F=V,w=B(I),S=!1;!S&&w;){var k=null,D=w.nodeType==1?window.getComputedStyle(w):{};if(D.display=="none")return null;if(w==this.root||w.nodeType==9)if(S=!0,w==this.root||w==e)r&&!this.root?!a||a.width==0&&a.height==0?(w=null,k=null,F=null):k=a:k=z;else{var M=B(w),U=M&&x(M),O=M&&this._computeTargetAndRootIntersection(M,U,z);U&&O?(w=M,k=j(U,O)):(w=null,F=null)}else{var be=w.ownerDocument;w!=be.body&&w!=be.documentElement&&D.overflow!="visible"&&(k=x(w))}if(k&&(F=b(k,F)),!F)break;w=w&&B(w)}return F}},c.prototype._getRootRect=function(){var I;if(this.root&&!G(this.root))I=x(this.root);else{var V=G(this.root)?this.root:e,z=V.documentElement,F=V.body;I={top:0,left:0,right:z.clientWidth||F.clientWidth,width:z.clientWidth||F.clientWidth,bottom:z.clientHeight||F.clientHeight,height:z.clientHeight||F.clientHeight}}return this._expandRectByRootMargin(I)},c.prototype._expandRectByRootMargin=function(I){var V=this._rootMarginValues.map(function(F,w){return F.unit=="px"?F.value:F.value*(w%2?I.width:I.height)/100}),z={top:I.top-V[0],right:I.right+V[1],bottom:I.bottom+V[2],left:I.left-V[3]};return z.width=z.right-z.left,z.height=z.bottom-z.top,z},c.prototype._hasCrossedThreshold=function(I,V){var z=I&&I.isIntersecting?I.intersectionRatio||0:-1,F=V.isIntersecting?V.intersectionRatio||0:-1;if(z!==F)for(var w=0;w<this.thresholds.length;w++){var S=this.thresholds[w];if(S==z||S==F||S<z!=S<F)return!0}},c.prototype._rootIsInDom=function(){return!this.root||A(e,this.root)},c.prototype._rootContainsTarget=function(I){var V=this.root&&(this.root.ownerDocument||this.root)||e;return A(V,I)&&(!this.root||V==I.ownerDocument)},c.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},c.prototype._unregisterInstance=function(){var I=t.indexOf(this);I!=-1&&t.splice(I,1)};function h(){return window.performance&&performance.now&&performance.now()}function p(I,V){var z=null;return function(){z||(z=setTimeout(function(){I(),z=null},V))}}function g(I,V,z,F){typeof I.addEventListener=="function"?I.addEventListener(V,z,F):typeof I.attachEvent=="function"&&I.attachEvent("on"+V,z)}function v(I,V,z,F){typeof I.removeEventListener=="function"?I.removeEventListener(V,z,F):typeof I.detachEvent=="function"&&I.detachEvent("on"+V,z)}function b(I,V){var z=Math.max(I.top,V.top),F=Math.min(I.bottom,V.bottom),w=Math.max(I.left,V.left),S=Math.min(I.right,V.right),k=S-w,D=F-z;return k>=0&&D>=0&&{top:z,bottom:F,left:w,right:S,width:k,height:D}||null}function x(I){var V;try{V=I.getBoundingClientRect()}catch{}return V?(V.width&&V.height||(V={top:V.top,right:V.right,bottom:V.bottom,left:V.left,width:V.right-V.left,height:V.bottom-V.top}),V):C()}function C(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function R(I){return!I||"x"in I?I:{top:I.top,y:I.top,bottom:I.bottom,left:I.left,x:I.left,right:I.right,width:I.width,height:I.height}}function j(I,V){var z=V.top-I.top,F=V.left-I.left;return{top:z,left:F,height:V.height,width:V.width,bottom:z+V.height,right:F+V.width}}function A(I,V){for(var z=V;z;){if(z==I)return!0;z=B(z)}return!1}function B(I){var V=I.parentNode;return I.nodeType==9&&I!=e?n(I):(V&&V.assignedSlot&&(V=V.assignedSlot.parentNode),V&&V.nodeType==11&&V.host?V.host:V)}function G(I){return I&&I.nodeType===9}window.IntersectionObserver=c,window.IntersectionObserverEntry=l})()),Yw}xL();var EL=Object.defineProperty,Qw=Object.getOwnPropertySymbols,wL=Object.prototype.hasOwnProperty,SL=Object.prototype.propertyIsEnumerable,Xw=(n,e,t)=>e in n?EL(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,vu=(n,e)=>{for(var t in e||(e={}))wL.call(e,t)&&Xw(n,t,e[t]);if(Qw)for(var t of Qw(e))SL.call(e,t)&&Xw(n,t,e[t]);return n},TL=(n,e,t)=>{const r=I0(n,[t]),a=I0(e,[t]);return r[t]&&a[t]?vu(vu(vu({},n),e),{[t]:r[t]+", "+a[t]}):vu(vu({},n),e)},CL=TL,b1=(typeof window<"u"?window:global)||{},Ww,AL=((Ww=b1)==null?void 0:Ww.GIPHY_PINGBACK_URL)||"https://pingback.giphy.com",kL=`${AL}/v2/pingback?apikey=l0HlIwPWyBBUDAUgM`,RL=n=>{const e=d1();return e?.set("Content-Type","application/json"),Dn.debug("Pingback session",n),n.length?fetch(kL,{method:"POST",body:JSON.stringify({events:n}),headers:e}).catch(t=>{Dn.warn(`pingbacks failing to post ${t}`)}):new Promise(t=>t())},F0=[];b1.giphyRandomId=u1();var lf="";function _1(){const n=[...F0];F0=[],RL(n)}var NL=v1(1e3,_1),Jw,Zw;(Zw=(Jw=b1).addEventListener)==null||Zw.call(Jw,"beforeunload",_1);var IL=({userId:n,eventType:e,actionType:t,attributes:r,queueEvents:a=!0,analyticsResponsePayload:l})=>{lf=n?String(n):lf;const c={ts:Date.now(),attributes:r,action_type:t,user_id:u1(),analytics_response_payload:l};lf&&(c.logged_in_user_id=lf),c.analytics_response_payload&&(c.analytics_response_payload=`${c.analytics_response_payload}${Dn.ENABLED?"&mode=verification":""}`),e&&(c.event_type=e),F0.push(c),a?NL():_1()},x1=IL,$0=function(n,e){return $0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])},$0(n,e)};function ak(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");$0(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var yp=function(){return yp=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},yp.apply(this,arguments)};function ok(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(n);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(n,r[a])&&(t[r[a]]=n[r[a]]);return t}function lk(n,e,t,r){var a=arguments.length,l=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(n,e,t,r);else for(var h=n.length-1;h>=0;h--)(c=n[h])&&(l=(a<3?c(l):a>3?c(e,t,l):c(e,t))||l);return a>3&&l&&Object.defineProperty(e,t,l),l}function ck(n,e){return function(t,r){e(t,r,n)}}function uk(n,e,t,r,a,l){function c(B){if(B!==void 0&&typeof B!="function")throw new TypeError("Function expected");return B}for(var h=r.kind,p=h==="getter"?"get":h==="setter"?"set":"value",g=!e&&n?r.static?n:n.prototype:null,v=e||(g?Object.getOwnPropertyDescriptor(g,r.name):{}),b,x=!1,C=t.length-1;C>=0;C--){var R={};for(var j in r)R[j]=j==="access"?{}:r[j];for(var j in r.access)R.access[j]=r.access[j];R.addInitializer=function(B){if(x)throw new TypeError("Cannot add initializers after decoration has completed");l.push(c(B||null))};var A=(0,t[C])(h==="accessor"?{get:v.get,set:v.set}:v[p],R);if(h==="accessor"){if(A===void 0)continue;if(A===null||typeof A!="object")throw new TypeError("Object expected");(b=c(A.get))&&(v.get=b),(b=c(A.set))&&(v.set=b),(b=c(A.init))&&a.unshift(b)}else(b=c(A))&&(h==="field"?a.unshift(b):v[p]=b)}g&&Object.defineProperty(g,r.name,v),x=!0}function dk(n,e,t){for(var r=arguments.length>2,a=0;a<e.length;a++)t=r?e[a].call(n,t):e[a].call(n);return r?t:void 0}function hk(n){return typeof n=="symbol"?n:"".concat(n)}function fk(n,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function pk(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function mk(n,e,t,r){function a(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function h(v){try{g(r.next(v))}catch(b){c(b)}}function p(v){try{g(r.throw(v))}catch(b){c(b)}}function g(v){v.done?l(v.value):a(v.value).then(h,p)}g((r=r.apply(n,e||[])).next())})}function gk(n,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,a,l,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=h(0),c.throw=h(1),c.return=h(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(g){return function(v){return p([g,v])}}function p(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(t=0)),t;)try{if(r=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,a=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){t.label=g[1];break}if(g[0]===6&&t.label<l[1]){t.label=l[1],l=g;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(g);break}l[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(n,t)}catch(v){g=[6,v],a=0}finally{r=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}var am=Object.create?(function(n,e,t,r){r===void 0&&(r=t);var a=Object.getOwnPropertyDescriptor(e,t);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,a)}):(function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]});function yk(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&am(e,n,t)}function vp(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function E1(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),a,l=[],c;try{for(;(e===void 0||e-- >0)&&!(a=r.next()).done;)l.push(a.value)}catch(h){c={error:h}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(c)throw c.error}}return l}function vk(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(E1(arguments[e]));return n}function bk(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),a=0,e=0;e<t;e++)for(var l=arguments[e],c=0,h=l.length;c<h;c++,a++)r[a]=l[c];return r}function _k(n,e,t){if(t||arguments.length===2)for(var r=0,a=e.length,l;r<a;r++)(l||!(r in e))&&(l||(l=Array.prototype.slice.call(e,0,r)),l[r]=e[r]);return n.concat(l||Array.prototype.slice.call(e))}function sc(n){return this instanceof sc?(this.v=n,this):new sc(n)}function xk(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(C){return function(R){return Promise.resolve(R).then(C,b)}}function h(C,R){r[C]&&(a[C]=function(j){return new Promise(function(A,B){l.push([C,j,A,B])>1||p(C,j)})},R&&(a[C]=R(a[C])))}function p(C,R){try{g(r[C](R))}catch(j){x(l[0][3],j)}}function g(C){C.value instanceof sc?Promise.resolve(C.value.v).then(v,b):x(l[0][2],C)}function v(C){p("next",C)}function b(C){p("throw",C)}function x(C,R){C(R),l.shift(),l.length&&p(l[0][0],l[0][1])}}function Ek(n){var e,t;return e={},r("next"),r("throw",function(a){throw a}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(a,l){e[a]=n[a]?function(c){return(t=!t)?{value:sc(n[a](c)),done:!1}:l?l(c):c}:l}}function wk(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof vp=="function"?vp(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(l){t[l]=n[l]&&function(c){return new Promise(function(h,p){c=n[l](c),a(h,p,c.done,c.value)})}}function a(l,c,h,p){Promise.resolve(p).then(function(g){l({value:g,done:h})},c)}}function Sk(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}var jL=Object.create?(function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}):function(n,e){n.default=e},H0=function(n){return H0=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},H0(n)};function Tk(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t=H0(n),r=0;r<t.length;r++)t[r]!=="default"&&am(e,n,t[r]);return jL(e,n),e}function Ck(n){return n&&n.__esModule?n:{default:n}}function Ak(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}function kk(n,e,t,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(n,t):a?a.value=t:e.set(n,t),t}function Rk(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}function Nk(n,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,a;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],t&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(l){return Promise.reject(l)}}),n.stack.push({value:e,dispose:r,async:t})}else t&&n.stack.push({async:!0});return e}var DL=typeof SuppressedError=="function"?SuppressedError:function(n,e,t){var r=new Error(t);return r.name="SuppressedError",r.error=n,r.suppressed=e,r};function Ik(n){function e(l){n.error=n.hasError?new DL(l,n.error,"An error was suppressed during disposal."):l,n.hasError=!0}var t,r=0;function a(){for(;t=n.stack.pop();)try{if(!t.async&&r===1)return r=0,n.stack.push(t),Promise.resolve().then(a);if(t.dispose){var l=t.dispose.call(t.value);if(t.async)return r|=2,Promise.resolve(l).then(a,function(c){return e(c),a()})}else r|=1}catch(c){e(c)}if(r===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return a()}function jk(n,e){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,r,a,l,c){return r?e?".jsx":".js":a&&(!l||!c)?t:a+l+"."+c.toLowerCase()+"js"}):n}const ML={__extends:ak,__assign:yp,__rest:ok,__decorate:lk,__param:ck,__esDecorate:uk,__runInitializers:dk,__propKey:hk,__setFunctionName:fk,__metadata:pk,__awaiter:mk,__generator:gk,__createBinding:am,__exportStar:yk,__values:vp,__read:E1,__spread:vk,__spreadArrays:bk,__spreadArray:_k,__await:sc,__asyncGenerator:xk,__asyncDelegator:Ek,__asyncValues:wk,__makeTemplateObject:Sk,__importStar:Tk,__importDefault:Ck,__classPrivateFieldGet:Ak,__classPrivateFieldSet:kk,__classPrivateFieldIn:Rk,__addDisposableResource:Nk,__disposeResources:Ik,__rewriteRelativeImportExtension:jk},OL=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Nk,get __assign(){return yp},__asyncDelegator:Ek,__asyncGenerator:xk,__asyncValues:wk,__await:sc,__awaiter:mk,__classPrivateFieldGet:Ak,__classPrivateFieldIn:Rk,__classPrivateFieldSet:kk,__createBinding:am,__decorate:lk,__disposeResources:Ik,__esDecorate:uk,__exportStar:yk,__extends:ak,__generator:gk,__importDefault:Ck,__importStar:Tk,__makeTemplateObject:Sk,__metadata:pk,__param:ck,__propKey:hk,__read:E1,__rest:ok,__rewriteRelativeImportExtension:jk,__runInitializers:dk,__setFunctionName:fk,__spread:vk,__spreadArray:_k,__spreadArrays:bk,__values:vp,default:ML},Symbol.toStringTag,{value:"Module"})),PL=N3(OL);var cf={},eS;function LL(){if(eS)return cf;eS=1,Object.defineProperty(cf,"__esModule",{value:!0});var n=Ra();function e(t,r){r===void 0&&(r=0);var a=n.useRef(!1),l=n.useRef(),c=n.useRef(t),h=n.useCallback(function(){return a.current},[]),p=n.useCallback(function(){a.current=!1,l.current&&clearTimeout(l.current),l.current=setTimeout(function(){a.current=!0,c.current()},r)},[r]),g=n.useCallback(function(){a.current=null,l.current&&clearTimeout(l.current)},[]);return n.useEffect(function(){c.current=t},[t]),n.useEffect(function(){return p(),g},[r]),[h,g,p]}return cf.default=e,cf}var VL=LL();const UL=rd(VL);var uf={},df={},xr={},tS;function zL(){if(tS)return xr;tS=1,Object.defineProperty(xr,"__esModule",{value:!0}),xr.isNavigator=xr.isBrowser=xr.off=xr.on=xr.noop=void 0;var n=function(){};xr.noop=n;function e(r){for(var a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];r&&r.addEventListener&&r.addEventListener.apply(r,a)}xr.on=e;function t(r){for(var a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];r&&r.removeEventListener&&r.removeEventListener.apply(r,a)}return xr.off=t,xr.isBrowser=typeof window<"u",xr.isNavigator=typeof navigator<"u",xr}var nS;function BL(){if(nS)return df;nS=1,Object.defineProperty(df,"__esModule",{value:!0});var n=Ra(),e=zL(),t=e.isBrowser?n.useLayoutEffect:n.useEffect;return df.default=t,df}var rS;function FL(){if(rS)return uf;rS=1,Object.defineProperty(uf,"__esModule",{value:!0});var n=PL,e=Ra(),t=n.__importDefault(BL()),r=function(a,l){a===void 0&&(a=1e12),l===void 0&&(l=0);var c=e.useState(0),h=c[0],p=c[1];return t.default(function(){var g,v,b,x=function(){var A=Math.min(1,(Date.now()-b)/a);p(A),C()},C=function(){g=requestAnimationFrame(x)},R=function(){v=setTimeout(function(){cancelAnimationFrame(g),p(1)},a),b=Date.now(),C()},j=setTimeout(R,l);return function(){clearTimeout(v),clearTimeout(j),cancelAnimationFrame(g)}},[a,l]),h};return uf.default=r,uf}var $L=FL();const HL=rd($L);var qL=Object.defineProperty,GL=Object.defineProperties,YL=Object.getOwnPropertyDescriptors,sS=Object.getOwnPropertySymbols,KL=Object.prototype.hasOwnProperty,QL=Object.prototype.propertyIsEnumerable,iS=(n,e,t)=>e in n?qL(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ti=(n,e)=>{for(var t in e||(e={}))KL.call(e,t)&&iS(n,t,e[t]);if(sS)for(var t of sS(e))QL.call(e,t)&&iS(n,t,e[t]);return n},w1=(n,e)=>GL(n,YL(e)),S1=(n,e,t)=>new Promise((r,a)=>{var l=p=>{try{h(t.next(p))}catch(g){a(g)}},c=p=>{try{h(t.throw(p))}catch(g){a(g)}},h=p=>p.done?r(p.value):Promise.resolve(p.value).then(l,c);h((t=t.apply(n,e)).next())}),XL=n=>{var e,t;if(!n)return"";const r=(t=(e=n?.split("."))==null?void 0:e.pop())==null?void 0:t.toLowerCase();return n.replace(`.${r}`,`/80h.${r}`)},WL=qe.img`
    object-fit: cover;
    width: 32px;
    height: 32px;
    margin-right: 8px;
`,JL=({user:n,className:e=""})=>{const t=P.useRef(Math.floor(Math.random()*5)+1),r=n.avatar_url?XL(n.avatar_url):`https://media.giphy.com/avatars/default${t.current}.gif`;return de.createElement(WL,{src:r,className:e})},om=JL,ed=({className:n="",size:e=17,fill:t="#15CDFF"})=>de.createElement("svg",{className:[ed.className,n].join(" "),height:e,width:"19px",viewBox:"0 0 19 17"},de.createElement("path",{className:ed.checkMarkClassName,d:"M9.32727273,9.44126709 L9.32727273,3.03016561 L6.55027155,3.03016561 L6.55027155,10.8150746 L6.55027155,12.188882 L12.1042739,12.188882 L12.1042739,9.44126709 L9.32727273,9.44126709 Z",fill:B0,transform:"translate(9.327273, 7.609524) scale(-1, 1) rotate(-45.000000) translate(-9.327273, -7.609524) "}),de.createElement("g",{transform:"translate(-532.000000, -466.000000)",fill:t},de.createElement("g",{transform:"translate(141.000000, 235.000000)"},de.createElement("g",{transform:"translate(264.000000, 0.000000)"},de.createElement("g",{transform:"translate(10.000000, 224.000000)"},de.createElement("g",{transform:"translate(114.000000, 2.500000)"},de.createElement("path",{d:"M15.112432,4.80769231 L16.8814194,6.87556817 L19.4157673,7.90116318 L19.6184416,10.6028916 L21.0594951,12.9065042 L19.6184416,15.2101168 L19.4157673,17.9118452 L16.8814194,18.9374402 L15.112432,21.0053161 L12.4528245,20.3611511 L9.79321699,21.0053161 L8.02422954,18.9374402 L5.48988167,17.9118452 L5.28720734,15.2101168 L3.84615385,12.9065042 L5.28720734,10.6028916 L5.48988167,7.90116318 L8.02422954,6.87556817 L9.79321699,4.80769231 L12.4528245,5.4518573 L15.112432,4.80769231 Z M17.8163503,10.8991009 L15.9282384,9.01098901 L11.5681538,13.3696923 L9.68115218,11.4818515 L7.81302031,13.3499833 L9.7011322,15.2380952 L11.5892441,17.1262071 L17.8163503,10.8991009 Z"})))))));ed.className="giphy-verified-badge";ed.checkMarkClassName="giphy-verified-checkmark";var q0=ed,ZL=qe.div`
    color: white;
    font-size: 16px;
    font-weight: 700;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    -webkit-font-smoothing: antialiased;
`,eV=qe(q0)`
    margin-left: 4px;
    flex-shrink: 0;
`,tV=qe.div`
    display: flex;
    align-items: center;
    min-width: 0;
`,nV=({user:n})=>{const{display_name:e,username:t}=n;return de.createElement(tV,null,de.createElement(ZL,null,e||`@${t}`),n.is_verified?de.createElement(eV,{size:14}):null)},Dk=nV,rV=qe.div`
    display: flex;
    align-items: center;
    font-family: interface, helvetica, arial;
`,sV=qe(om)`
    flex-shrink: 0;
`,T1=({gif:n,className:e,onClick:t})=>{const{user:r}=n;return!r?.username&&!r?.display_name?null:de.createElement(rV,{className:[T1.className,e].join(" "),onClick:a=>{if(a.preventDefault(),a.stopPropagation(),t)t(n);else{const l=r.profile_url;l&&window.open(l,"_blank")}}},de.createElement(sV,{user:r}),de.createElement(Dk,{user:n.user}))};T1.className="giphy-attribution";var iV=T1,aV=qe.div`
    background: linear-gradient(rgba(0, 0, 0, 0), rgba(18, 18, 18, 0.6));
    cursor: default;
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 75px;
    pointer-events: none;
`,oV=qe(iV)`
    position: absolute;
    bottom: 10px;
    left: 10px;
    right: 10px;
`,lV=qe.div`
    transition: opacity 150ms ease-in;
`,cV=({gif:n,isHovered:e,onClick:t})=>{const r=P.useRef(e);return e&&(r.current=!0),n.user&&r.current?de.createElement(lV,{style:{opacity:e?1:0}},de.createElement(aV,null),de.createElement(oV,{gif:n,onClick:t})):null},uV=cV,dV=({children:n,className:e,onVisibleChange:t,config:r})=>{const a=P.useRef(null);return P.useEffect(()=>{let l;return a.current&&(l=new IntersectionObserver(([c])=>{t&&t(c.isIntersecting)},r),l.observe(a.current)),()=>l?.disconnect()},[t,a,r]),de.createElement("div",{ref:a,className:e},n)},Mk=dV,Ok=n=>(e,t,r,a={})=>{e.analytics_response_payload&&x1({analyticsResponsePayload:e.analytics_response_payload,userId:t,actionType:n,attributes:Ti({position:JSON.stringify(FP(r))},a)})},hV=(n,e,t,r={})=>{n.analytics_response_payload&&x1({analyticsResponsePayload:n.analytics_response_payload,userId:e,actionType:"SEEN",attributes:Ti({position:JSON.stringify(t)},r)})},fV=Ok("CLICK"),pV=Ok("HOVER");function mV(n){return n=n.replace("%%CACHEBUSTER%%",wA()),n=n.replace("%%TIMESTAMP%%",`${Date.now()}`),n=n.replace("%%APPBUNDLE%%","web"),typeof window<"u"&&(n=n.replace("%%APP_WINDOW_SIZE%%",`${window.innerWidth},${window.innerHeight}`),n=n.replace("%%DEVICE_LANGUAGE%%",`${navigator.language}`)),n}function gV({src:n}){const e=P.useRef(mV(n)),[t,r]=P.useState(!1);return P.useEffect(()=>{r(!0)},[]),t?de.createElement("img",{src:e.current,width:0,height:0}):null}var yV=gV,G0=P.createContext({}),vV=({attributes:n,children:e})=>{const{attributes:t={}}=P.useContext(G0);return de.createElement(G0.Provider,{value:{attributes:CL(t,n,"layout_type")}},e)},Pk=vV,bV=qe.div`
    position: relative;
    display: block;
    picture {
        display: block;
        width: 100%;
        height: 100%;
    }
    img {
        display: block;
    }
    .${q0.className} {
        g {
            fill: white;
        }
    }
    .${q0.checkMarkClassName} {
        opacity: 0;
    }
`,aS=[y1,nk,rk,sk,ik],_V=()=>aS[Math.round(Math.random()*(aS.length-1))],xV=200,oS="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",EV=!!(typeof window<"u"&&window.document&&window.document.createElement),Tl=()=>{},wV=({children:n})=>{const[e,t]=P.useState(!1);return P.useEffect(()=>{t(!0)},[]),e?de.createElement(de.Fragment,null,n):null},ga=({gif:n,gif:{bottle_data:e={}},width:t,percentWidth:r,percentHeight:a,height:l,onGifRightClick:c=Tl,className:h="",onGifClick:p=Tl,onGifKeyPress:g=Tl,onGifSeen:v=Tl,onGifVisible:b=Tl,user:x={},backgroundColor:C,overlay:R,hideAttribution:j=!1,noLink:A=!1,borderRadius:B=4,style:G,tabIndex:I,lazyLoad:V=!0})=>{var z;const[F,w]=P.useState(!1),[S,k]=P.useState(!1),[D,M]=P.useState(!EV||!V),[U,O]=P.useState(""),be=P.useRef(_V()),Ee=P.useRef(null),$=P.useRef(null),K=P.useRef(),W=P.useRef(),Te=P.useRef(),Re=P.useRef(Tl),H=Object.keys(e).length>0,{attributes:J}=P.useContext(G0);let ue=R;!ue&&!j&&(ue=uV);const me=ae=>{clearTimeout(Te.current),ae.persist(),k(!0),Te.current=window.setTimeout(()=>{pV(n,x?.id,ae.target,J)},xV)},Ce=()=>{clearTimeout(Te.current),k(!1)},ye=ae=>{fV(n,x?.id,ae.target,J),p(n,ae)},Se=ae=>{g(n,ae)};Re.current=ae=>{w(!0),Dn.debug(`GIF ${n.id} seen. ${n.title}`),hV(n,x?.id,ae.boundingClientRect,J),v?.(n,ae.boundingClientRect),W.current&&W.current.disconnect()};const He=()=>{W.current||(W.current=new IntersectionObserver(([ae])=>{ae.isIntersecting&&Re.current(ae)},{threshold:[.99]})),!F&&Ee.current&&W.current&&W.current.observe(Ee.current)},Ge=ae=>{He(),b(n,ae),O(ga.imgLoadedClassName)};P.useEffect(()=>{var ae,we;(ae=$.current)!=null&&ae.complete&&(He(),b(n)),(we=W.current)==null||we.disconnect(),w(!1)},[n.id]),P.useEffect(()=>(K.current=new IntersectionObserver(([ae])=>{const{isIntersecting:we}=ae;M(we),!we&&W.current&&W.current.disconnect()}),K.current.observe(Ee.current),()=>{K.current&&K.current.disconnect(),W.current&&W.current.disconnect(),Te.current&&clearTimeout(Te.current)}),[]);const _e=Jp(n,t);let ce=l;!G?.aspectRatio&&!l&&(ce=_e);const ve=HP(n.images,t,l||_e);if(!ve)return n.images?console.error(`no rendition for ${n.id}, rendition names: ${Object.keys(n.images).join(", ")}`):console.error(`no rendition for ${n.id} - no images`),null;const ie=n.images[ve.renditionName],Me=U===ga.imgLoadedClassName&&!n.is_sticker?"unset":C||(n.is_sticker?"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4AQMAAACSSKldAAAABlBMVEUhIiIWFhYoSqvJAAAAGElEQVQY02MAAv7///8PWxqIPwDZw5UGABtgwz2xhFKxAAAAAElFTkSuQmCC') 0 0":be.current),Q=B?"hidden":"unset";return de.createElement(bV,{as:A?"div":"a",href:A?void 0:n.url,"data-giphy-id":n.id,"data-giphy-is-sticker":n.is_sticker,style:Ti({width:r||t,height:a||ce,overflow:Q,borderRadius:B},G),className:[ga.className,h].join(" "),onMouseOver:me,onMouseLeave:Ce,onClick:ye,onContextMenu:ae=>c(n,ae),onKeyPress:Se,tabIndex:I,ref:Ee},de.createElement("picture",null,de.createElement("source",{type:"image/webp",srcSet:D?ie.webp:oS,suppressHydrationWarning:!0}),de.createElement("img",{ref:$,suppressHydrationWarning:!0,className:[ga.imgClassName,U].join(" "),src:D?ie.url:oS,style:{background:Me},width:"100%",height:"100%",alt:GP(n),onLoad:D?Ge:()=>{}})),H&&((z=e?.tags)==null?void 0:z.map((ae,we)=>de.createElement(yV,{src:ae,key:we}))),ue&&de.createElement(wV,null,D&&de.createElement(ue,{gif:n,isHovered:S,width:t,height:ce})))};ga.className="giphy-gif";ga.imgClassName="giphy-gif-img";ga.imgLoadedClassName="giphy-img-loaded";var td=ga,SV=qe.div`
    -webkit-overflow-scrolling: touch;
    overflow-x: auto;
    overflow-y: hidden;
    white-space: nowrap;
    position: relative;
`,TV=qe(td)`
    position: relative;
    display: inline-block;
    list-style: none;
    margin-left: ${n=>n.$ml}px;
    /* make sure gifs are fully visible with a scrollbar */
    margin-bottom: 1px;

    &:first-of-type {
        margin-left: 0;
    }
    .${td.imgClassName} {
        position: absolute;
        top: 0;
        left: 0;
    }
`,CV=qe(Mk)`
    display: inline-block;
`,AV=qe.div`
    width: 30px;
    display: inline-block;
    opacity: ${n=>n.$isFirstLoad?0:1};
    height: ${n=>n.$height}px;
`,kV=Object.freeze({gutter:6,user:{},initialGifs:[]}),RV=Object.freeze({isFetching:!1,gifs:[],isLoaderVisible:!1,isDoneFetching:!1}),Lk=class Vk extends P.PureComponent{constructor(){super(...arguments),this.state=w1(Ti({},RV),{gifs:this.props.initialGifs||[]}),this.unmounted=!1,this.paginator=AA(this.props.fetchGifs,this.state.gifs),this.onLoaderVisible=e=>{this.unmounted||this.setState({isLoaderVisible:e},this.onFetch)},this.onFetch=v1(100,()=>S1(this,null,function*(){if(this.unmounted)return;const{isFetching:e,isLoaderVisible:t,gifs:r}=this.state;if(!e&&t){this.setState({isFetching:!0});let a;try{a=yield this.paginator()}catch{this.setState({isFetching:!1})}if(a)if(!!!a?.skipCountCheck&&r.length===a.length)this.setState({isDoneFetching:!0});else{this.setState({gifs:a,isFetching:!1});const{onGifsFetched:c}=this.props;c&&c(a),this.onFetch()}}}))}componentDidMount(){this.unmounted=!1,this.onFetch()}componentWillUnmount(){this.unmounted=!0}render(){const{onGifVisible:e,onGifRightClick:t,gifHeight:r,gifWidth:a,gutter:l,className:c=Vk.className,onGifSeen:h,onGifClick:p,onGifKeyPress:g,user:v,overlay:b,hideAttribution:x,noLink:C,noResultsMessage:R,backgroundColor:j,borderRadius:A,tabIndex:B=0,loaderConfig:G}=this.props,{gifs:I,isDoneFetching:V}=this.state,z=!V,F=I.length===0;return de.createElement(Pk,{attributes:{layout_type:"CAROUSEL"}},de.createElement(SV,{className:c},I.map(w=>de.createElement(TV,{gif:w,key:w.id,tabIndex:B,width:a||qP(w,r),height:r,onGifClick:p,onGifKeyPress:g,onGifSeen:h,onGifVisible:e,onGifRightClick:t,user:v,$ml:l,overlay:b,hideAttribution:x,noLink:C,borderRadius:A,backgroundColor:j})),!z&&I.length===0&&R,z&&de.createElement(CV,{onVisibleChange:this.onLoaderVisible,config:G},de.createElement(AV,{$isFirstLoad:F,$height:r}))))}};Lk.className="giphy-carousel";Lk.defaultProps=kV;var NV=qe.div`
    color: ${tk};
    display: flex;
    justify-content: center;
    margin: 30px 0;
    font-family: interface, Helvetica Neue, helvetica, sans-serif;
    font-size: 16px;
    font-weight: 600;
    a {
        color: ${y1};
        cursor: pointer;
        &:hover {
            color: white;
        }
    }
`,IV=({onClick:n})=>de.createElement(NV,null,"Error loading GIFs.",de.createElement("a",{onClick:n},"Try again?")),jV=IV,DV=.75;qe.div`
    align-items: center;
    background-color: ${({$backgroundColor:n})=>n};
    border-radius: 16px;
    display: flex;
    max-width: fit-content;
    overflow: hidden;
    padding: 4px 5px 5px 6px;
`;qe.div`
    overflow-x: auto;
    overflow-y: hidden;
    position: relative;
    -webkit-overflow-scrolling: touch;
`;qe.div`
    display: inline-flex;
    justify-content: space-between;
    overflow: hidden;
    white-space: nowrap;
    width: ${({$width:n})=>`${n}px`};
`;qe.div`
    background-color: ${({$color:n})=>n};
    box-sizing: border-box;
    height: ${({$gifHeight:n})=>`${Math.round(n*DV)}px`};
    margin: ${({$gutter:n})=>`0 ${n}px`};
    width: 2px;
`;qe(td)`
    display: inline-block;
    flex-shrink: 0;
    list-style: none;
    /* make sure gifs are fully visible with a scrollbar */
    margin-bottom: 1px;
    position: relative;

    .${td.imgClassName} {
        position: absolute;
        top: 0;
        left: 0;
    }
`;var MV=xd`
     to {
    transform: scale(1.75) translateY(-20px);
  }
`,Uk=52,OV=qe.div`
    display: flex;
    align-items: center;
    height: ${Uk}px;
    margin: 0 auto;
    text-align: center;
    justify-content: center;
    animation: pulse 0.8s ease-in-out 0s infinite alternate backwards;
`,bu=qe.div`
    display: inline-block;
    height: 10px;
    width: 10px;
    margin: ${Uk}px 10px 10px 10px;
    position: relative;
    box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.3);
    animation: ${MV} cubic-bezier(0.455, 0.03, 0.515, 0.955) 0.75s infinite alternate;
    background: ${n=>n.$color};
    animation-delay: ${n=>n.$delay};
`,PV=({className:n=""})=>de.createElement(OV,{className:n},de.createElement(bu,{$color:nk,$delay:"0"}),de.createElement(bu,{$color:y1,$delay:".1s"}),de.createElement(bu,{$color:rk,$delay:".2s"}),de.createElement(bu,{$color:sk,$delay:".3s"}),de.createElement(bu,{$color:ik,$delay:".4s"})),LV=PV,VV=qe.div`
    opacity: ${n=>n.$isFirstLoad?0:1};
`;function lS(n,e,t=[]){return Array.apply(null,Array(n)).map((r,a)=>t[a]||e)}function UV(n,e,t,r){const a=lS(n,[]),l=lS(n,0,e);return t.forEach(c=>{const h=l.indexOf(Math.min(...l));a[h]=[...a[h],c],l[h]+=Jp(c,r)}),a}var zV=Object.freeze({gutter:6,user:{},initialGifs:[]}),BV=Object.freeze({isFetching:!1,isError:!1,gifs:[],isLoaderVisible:!1,isDoneFetching:!1}),pc=class Pf extends P.PureComponent{constructor(){super(...arguments),this.state=w1(Ti({},BV),{gifs:this.props.initialGifs||[]}),this.unmounted=!1,this.paginator=AA(this.props.fetchGifs,this.state.gifs),this.onLoaderVisible=e=>{this.unmounted||this.setState({isLoaderVisible:e},this.onFetch)},this.onFetch=v1(Pf.fetchDebounce,()=>S1(this,null,function*(){if(this.unmounted)return;const{isFetching:e,isLoaderVisible:t}=this.state,{externalGifs:r}=this.props,a=(r||this.state.gifs).length;if(!e&&t){this.setState({isFetching:!0,isError:!1});let l;try{if(l=yield this.paginator(r),this.unmounted)return}catch(c){if(this.unmounted)return;this.setState({isFetching:!1,isError:!0});const{onGifsFetchError:h}=this.props;h&&h(c)}if(l)if(!!!l?.skipCountCheck&&a===l.length)this.setState({isDoneFetching:!0});else{this.setState({gifs:l,isFetching:!1});const{onGifsFetched:h}=this.props;h&&h(l),this.onFetch()}}}))}componentDidMount(){this.unmounted=!1,this.onFetch()}componentWillUnmount(){this.unmounted=!0}render(){const{onGifVisible:e,onGifRightClick:t,className:r=Pf.className,onGifSeen:a,onGifClick:l,onGifKeyPress:c,user:h,overlay:p,hideAttribution:g,noLink:v,borderRadius:b,noResultsMessage:x,columns:C,width:R,gutter:j,percentWidth:A,columnOffsets:B,backgroundColor:G,loaderConfig:I,tabIndex:V=0,layoutType:z="GRID",loader:F=LV,eagerIds:w}=this.props,{gifs:S,isError:k,isDoneFetching:D}=this.state,M=!D,U=S.length===0,O=j*(C-1),be=(R-O)/C,Ee=UV(C,B,S,be);return de.createElement(Pk,{attributes:{layout_type:z}},de.createElement("div",{className:r},de.createElement("div",{style:{width:A||R,display:"flex",gap:j}},Ee.map(($=[],K)=>de.createElement("div",{key:K,style:{display:"flex",flexDirection:"column",gap:j,width:A?"100%":be,marginTop:B?.[K]}},$.map(W=>de.createElement(td,{style:{aspectRatio:W.images.original.width/W.images.original.height},gif:W,tabIndex:V,key:W.id,width:be,percentWidth:A?"100%":void 0,onGifClick:l,onGifKeyPress:c,onGifSeen:a,onGifVisible:e,onGifRightClick:t,user:h,overlay:p,backgroundColor:G,hideAttribution:g,noLink:v,borderRadius:b,lazyLoad:!w?.includes(W.id)}))))),!M&&S.length===0&&x,k?de.createElement(jV,{onClick:this.onFetch}):M&&de.createElement(Mk,{onVisibleChange:this.onLoaderVisible,config:I},de.createElement(VV,{$isFirstLoad:U},de.createElement(F,{className:Pf.loaderClassName})))))}};pc.className="giphy-grid";pc.loaderClassName="loader";pc.fetchDebounce=250;pc.defaultProps=zV;pc.getDerivedStateFromProps=({externalGifs:n},e)=>n&&n!==e.gifs?{gifs:n}:null;var FV=pc,$V=FV,pn={searchbarHeight:"--searchbar-height",bgColor:"--searchbar-bg-color",bgColor2:"--searchbar-bg-color-2",fgColor:"--searchbar-fg-color",cancelButtonDisplay:"--searchbar-cancel-button-display"};qe.div`
    ${pn.searchbarHeight}: ${n=>n.$searchbarHeight||42}px;
    @media (${n=>n.$mobileMediaQuery}) {
        ${pn.searchbarHeight}: ${n=>n.$mobileSearchbarHeight||35}px;
    }
    ${pn.bgColor}: ${Of};
    ${pn.bgColor2}: ${Of};
    ${pn.fgColor}: ${B0};
    ${n=>n.$darkMode&&im`
            ${pn.fgColor}: ${Of};
            ${pn.bgColor}: ${B0};
            ${pn.bgColor2}: ${vL};
        `}
    ${pn.cancelButtonDisplay}: ${n=>n.$hideCancelButton?"none":"block"};
`;P.createContext({});P.createContext({});qe.svg`
    position: relative;
    right: 10px;
    margin-left: 5px;
    cursor: pointer;
    display: var(${pn.cancelButtonDisplay});
`;var zk=6,C1=`calc(var(${pn.searchbarHeight}) - ${zk*2}px)`,HV=xd`
to {
    width: ${C1};
}
`;qe(om)`
    height: ${C1};
    margin: 0;
    width: 0;
    animation: ${HV} 100ms ease-in-out forwards;
`;qe.div`
    background: var(${pn.bgColor2});
    display: flex;
    align-items: center;
    padding-left: ${zk}px;
`;qe.div`
    background: ${bL};
    display: flex;
    padding: 0 4px;
    color: ${yL};
    font-family: interface, Helvetica Neue, helvetica, sans-serif;
    font-weight: 600;
    font-size: 12px;
    align-items: center;
    height: ${C1};
    @media (max-width: 480px) {
        display: none;
    }
`;var qV=({className:n=""})=>de.createElement("svg",{viewBox:"0 0 30 30",version:"1.1",className:n},de.createElement("defs",null,de.createElement("path",{d:"M11.5482521,20.4090671 L4.24727698,28.2009189 C3.68084207,28.8054377 2.73159653,28.8363108 2.12707771,28.2698759 C1.5225589,27.703441 1.4916858,26.7541954 2.0581207,26.1496766 L9.40599838,18.3077689 C7.95982241,16.4371424 7.0978836,14.0789715 7.0978836,11.5181818 C7.0978836,5.44914339 11.9392549,0.518181818 17.9252787,0.518181818 C23.9113026,0.518181818 28.7526738,5.44914339 28.7526738,11.5181818 C28.7526738,17.5872202 23.9113026,22.5181818 17.9252787,22.5181818 C15.539851,22.5181818 13.3361963,21.7351359 11.5482521,20.4090671 Z M17.9252787,19.5181818 C22.242011,19.5181818 25.7526738,15.9425536 25.7526738,11.5181818 C25.7526738,7.09381 22.242011,3.51818182 17.9252787,3.51818182 C13.6085464,3.51818182 10.0978836,7.09381 10.0978836,11.5181818 C10.0978836,15.9425536 13.6085464,19.5181818 17.9252787,19.5181818 Z",id:"giphy-search-icon-path-1"})),de.createElement("g",{id:"search",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},de.createElement("g",{id:"icons/search"},de.createElement("mask",{id:"giphy-search-icon-mask-2",fill:"white"},de.createElement("use",{xlinkHref:"#giphy-search-icon-path-1"})),de.createElement("use",{id:"Mask",fill:"#FFFFFF",fillRule:"nonzero",xlinkHref:"#giphy-search-icon-path-1"}),de.createElement("g",{mask:"url(#giphy-search-icon-mask-2)"},de.createElement("g",{transform:"translate(0.250000, 0.250000)"},de.createElement("g",null)))))),GV=qV,YV="2s",Uy="#E646B6",cS="#FF6666",Bk="cubic-bezier(0.920, 0.240, 0.185, 0.730)",KV=xd`
    0% {
      transform: rotate(34deg) translate(-10px, 80px);
    };
    
    100% {
      transform: rotate(34deg) translate(-10px, -20px);
    }
`,QV=xd`
    0% { 
      transform: translate(0px, 0px);
      opacity: 0;
    }
    50% {
      opacity: 1;
    }
    100% {
      transform: translate(10px, -17px);
      opacity: 0;
    }
`,XV=xd`
    0% {
      opacity: 0;
      transform: translateX(-400%);
    }
    50% {
      opacity: 1;
    }
    100% {
      opacity: 0;
      transform: translateX(0);
    }
`;qe.div`
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    cursor: pointer;
    @media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {
        display: none;
    }
    height: var(${pn.searchbarHeight});
    width: var(${pn.searchbarHeight});
`;qe.div`
    position: absolute;
    height: 100%;
    width: 100%;
    background: linear-gradient(45deg, ${Uy} 0%, ${cS} 100%);
    border-radius: 0 4px 4px 0;
    overflow: hidden;
    &:before {
        animation: ${XV} ${YV} linear 0s infinite;
        background-image: linear-gradient(45deg, ${Uy} 0%, ${cS} 50%, ${Uy} 100%);
        background-size: 400%;
        background-position: 0% 100%;
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        width: 400%;
    }
`;qe.div`
    width: 100%;
    height: 100%;
    position: absolute;
    overflow: hidden;
    &::after {
        content: '+';
        color: white;
        font-family: 'SS Standard';
        font-size: 8px;
        position: absolute;
        top: 65%;
        left: 66%;
        animation: ${QV} 1s ${Bk} 0s 1 forwards;
    }
`;qe.div`
    position: absolute;
    width: 200%;
    height: 20px;
    background: rgba(255, 255, 255, 0.5);
    transform: rotate(34deg) translate(-10px, -20px);
    animation: ${KV} 1s ${Bk} 0s 1;
    filter: blur(1px);
`;qe(GV)`
    z-index: 1;
    display: flex;
    width: 50%;
    height: 50%;
`;qe.div`
    display: flex;
    background: white;
    align-items: center;
    border-radius: 4px;
    height: var(${pn.searchbarHeight});
    background: var(${pn.bgColor2});
`;qe.input`
    background: inherit;
    box-sizing: border-box;
    border: 0;
    appearance: none;
    font-weight: normal;
    font-family: interface, Helvetica Neue, helvetica, sans-serif;
    outline: 0;
    font-size: 15px;
    padding: 0 10px;
    border-radius: 0;
    text-overflow: ellipsis;
    color: var(${pn.fgColor});
    &::placeholder {
        color: ${tk};
    }
    min-width: 150px;
    flex: 1;
    ${n=>n.$isUsernameSearch&&im`
            color: ${_L};
        `}
`;var WV=({size:n=18,className:e})=>de.createElement("svg",{width:n,height:n,viewBox:"0 0 18 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:e},de.createElement("g",{id:"trending",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},de.createElement("g",null,de.createElement("rect",{id:"Rectangle",stroke:"#979797",fill:"#D8D8D8",opacity:"0",x:"0.5",y:"0.5",width:"17",height:"17"}),de.createElement("path",{d:"M12.6093329,3.12057664 L15.156896,3.12057664 L9.64199318,9.04253019 L6.88133868,6.8175119 C6.7544587,6.67603813 6.56616874,6.60087259 6.38404017,6.61897279 C6.2490402,6.63288422 6.11891631,6.69661171 6.02063992,6.79697337 C2.21226835,10.5943119 0.308082561,12.4929812 0.308082561,12.4929812 C0.308082561,12.4929812 0.527106106,12.8074292 0.710953088,13.0215425 C0.833517743,13.1642848 0.975497751,13.3098497 1.13689311,13.4582373 L6.47329888,8.13191205 L9.16381134,10.2953038 C9.40800276,10.5710787 9.68933701,10.7021044 10.019278,10.4570223 L16.0239805,4.04474473 C16.0239805,5.87956383 16.0239805,6.79697337 16.0239805,6.79697337 C16.0239805,6.79697337 16.4320205,6.79697337 17.2481004,6.79697337 L17.2481004,1.80604505 C14.1555887,1.80604505 12.6093329,1.80604505 12.6093329,1.80604505 C12.6093329,1.80604505 12.6093329,2.24422225 12.6093329,3.12057664 Z",id:"Shape",stroke:"#00CCFF",strokeWidth:"0.4",fill:"#00CCFF",fillRule:"nonzero",transform:"translate(8.778091, 7.632141) rotate(-2.000000) translate(-8.778091, -7.632141) "})))),JV=WV,Fk=9;qe.div`
    background: ${ek};
    display: flex;
    padding-right: 4px;
    align-items: center;
    margin-right: ${Fk}px;
    cursor: pointer;
`;qe.div`
    background: ${ek};
    display: flex;
    padding: 14px;
    align-items: center;
    margin-right: ${Fk}px;
    white-space: nowrap;
    cursor: pointer;
    font-style: italic;
    border-radius: 20px;
`;qe(om)`
    height: var(${pn.searchbarHeight});
    width: var(${pn.searchbarHeight});
`;qe(JV)`
    margin-right: 2px;
`;qe.div`
    display: flex;
    color: white;
    flex-direction: row;
    font-family: 'interface';
    font-weight: 600;
    font-size: 14px;
    -webkit-overflow-scrolling: touch;
    overflow-x: auto;
    overflow-y: hidden;
    padding-bottom: 10px;
    height: var(${pn.searchbarHeight});
`;var ZV=({onClick:n})=>de.createElement("svg",{width:"66px",height:"13px",viewBox:"0 0 66 13",onClick:n},de.createElement("g",{stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},de.createElement("g",{transform:"translate(-1060.000000, -462.000000)",fill:"#FFFFFF",fillRule:"nonzero"},de.createElement("g",{transform:"translate(931.000000, 286.375671)"},de.createElement("g",{transform:"translate(86.000000, 136.124329)"},de.createElement("path",{d:"M47.968,49.1962322 C49.588,49.1962322 51.052,48.6202322 51.58,47.5522322 L51.58,43.8202322 L47.476,43.8202322 L47.476,45.6802322 L49.6,45.6802322 L49.6,46.7602322 C49.12,47.1082322 48.424,47.1922322 47.98,47.1922322 C46.288,47.1922322 45.724,45.8602322 45.724,44.7802322 C45.724,43.1362322 46.612,42.3202322 47.98,42.3202322 C48.544,42.3202322 49.288,42.4762322 49.9,43.0522322 L51.28,41.6842322 C50.176,40.5682322 49.144,40.3282322 47.98,40.3282322 C44.824,40.3282322 43.384,42.5842322 43.384,44.7802322 C43.384,46.9762322 44.644,49.1962322 47.968,49.1962322 Z M54.928,48.9682322 L54.928,40.5682322 L52.564,40.5682322 L52.564,48.9682322 L54.928,48.9682322 Z M58.648,48.9682322 L58.648,46.7002322 L60.352,46.7002322 C62.596,46.6762322 63.724,45.3442322 63.724,43.6282322 C63.724,41.9842322 62.608,40.5682322 60.352,40.5682322 L56.272,40.5682322 L56.272,48.9682322 L58.648,48.9682322 Z M60.352,44.6962322 L58.648,44.6962322 L58.648,42.6082322 L60.352,42.6082322 C61,42.6082322 61.348,43.1122322 61.348,43.6642322 C61.348,44.2162322 61.012,44.6962322 60.352,44.6962322 Z M66.796,48.9802322 L66.796,45.8002322 L69.82,45.8002322 L69.82,48.9802322 L72.172,48.9802322 L72.172,40.5802322 L69.82,40.5802322 L69.82,43.7722322 L66.796,43.7722322 L66.796,40.5802322 L64.42,40.5802322 L64.42,48.9802322 L66.796,48.9802322 Z M78.16,48.9682322 L78.16,45.6202322 L81.496,40.6762322 L81.496,40.5682322 L78.82,40.5682322 L77.008,43.4482322 L75.268,40.5682322 L72.592,40.5682322 L72.592,40.6642322 L75.784,45.6202322 L75.784,48.9682322 L78.16,48.9682322 Z M87.796,49.1362322 C88.972,49.1362322 90.088,48.7402322 90.952,47.8882322 L90.028,46.9642322 C89.44,47.5522322 88.576,47.8762322 87.796,47.8762322 C85.624,47.8762322 84.712,46.3522322 84.7,44.8162322 C84.688,43.2682322 85.66,41.6962322 87.796,41.6962322 C88.576,41.6962322 89.368,41.9722322 89.968,42.5602322 L90.868,41.6962322 C90.016,40.8442322 88.924,40.4242322 87.796,40.4242322 C84.796,40.4242322 83.356,42.6202322 83.3679256,44.8282322 C83.38,47.0362322 84.748,49.1362322 87.796,49.1362322 Z M93.028,48.9682322 L93.028,40.5802322 L91.792,40.5802322 L91.792,48.9682322 L93.028,48.9682322 Z M94.252,41.3122322 C94.252,42.3322322 95.788,42.3322322 95.788,41.3122322 C95.788,40.3042322 94.252,40.3042322 94.252,41.3122322 Z M95.632,48.9682322 L95.632,43.0282322 L94.396,43.0282322 L94.396,48.9682322 L95.632,48.9682322 Z M98.188,51.7162322 L98.188,48.1042322 C98.632,48.8362322 99.556,49.1002322 100.276,49.1002322 C102.112,49.1002322 103.264,47.8042322 103.264,46.0162322 C103.264,44.2282322 102.04,42.9442322 100.276,42.9322322 C99.484,42.9322322 98.644,43.2922322 98.188,44.0122322 L98.116,43.0522322 L96.952,43.0522322 L96.952,51.7162322 L98.188,51.7162322 Z M100.156,47.9002322 C99.076,47.9002322 98.296,47.0722322 98.296,46.0162322 C98.296,44.9602322 99.016,44.1322322 100.156,44.1322322 C101.284,44.1322322 102.028,44.9002322 102.028,46.0162322 C102.028,47.1202322 101.236,47.9002322 100.156,47.9002322 Z M106.456,49.1482322 C107.992,49.1482322 108.964,48.3802322 108.976,47.2762322 C108.988,45.7522322 107.56,45.5122322 106.468,45.4162322 C105.712,45.3442322 105.196,45.1522322 105.184,44.6602322 C105.184,44.1922322 105.688,43.9402322 106.444,43.9522322 C107.032,43.9522322 107.536,44.0722322 108.004,44.5042322 L108.7,43.6882322 C108.04,43.1002322 107.332,42.8962322 106.42,42.8962322 C105.316,42.8962322 103.96,43.3882322 103.96,44.6962322 C103.972,46.0042322 105.256,46.3642322 106.372,46.4722322 C107.248,46.5562322 107.752,46.7602322 107.74,47.2882322 C107.728,47.8402322 107.068,48.0562322 106.48,48.0562322 C105.784,48.0442322 104.956,47.7922322 104.404,47.1802322 L103.756,48.0562322 C104.536,48.9322322 105.496,49.1482322 106.456,49.1482322 Z",id:"GIPHYClips"})))))),eU=ZV,tU=qe.div`
    display: flex;
    align-items: center;
    font-family: interface, helvetica, arial;
    cursor: pointer;
`,nU=qe(om)`
    flex-shrink: 0;
`,rU=qe.div`
    display: flex;
    flex-direction: column;
`,A1=({gif:n,className:e,onClick:t})=>{const{user:r}=n;return!r?.username&&!r?.display_name?null:de.createElement(tU,{className:[A1.className,e].join(" "),onClick:a=>{if(a.preventDefault(),a.stopPropagation(),t)t(n);else{const l=r.profile_url;l&&window.open(l,"_blank")}}},de.createElement(nU,{user:r}),de.createElement(rU,null,de.createElement(eU,{onClick:a=>{a.preventDefault(),a.stopPropagation(),t?t(n):n.url&&window.open(n.url,"_blank")}}),de.createElement(Dk,{user:r})))};A1.className="giphy-attribution";var sU=A1,$k=25,iU=({size:n=$k,onClick:e=()=>{}})=>de.createElement("svg",{width:n,height:n,viewBox:"0 0 26 23",onClick:e},de.createElement("g",{stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},de.createElement("g",{transform:"translate(1.000000, 0.000000)",fill:"#FFF",fillRule:"nonzero"},de.createElement("path",{d:"M11.9625091,0.572584405 L11.9625091,22.2272644 C11.9625091,22.4856644 11.8466091,22.6635044 11.6151891,22.7611644 C11.3480491,22.8413444 11.1390491,22.7968844 10.9878091,22.6277844 L4.8732291,15.9143244 L0.573909096,15.9143244 C0.413549096,15.9143244 0.277509096,15.8588444 0.166549096,15.7475044 C0.0573082348,15.6406091 -0.00292164572,15.4933347 -1.77635684e-15,15.3405244 L-1.77635684e-15,7.45058441 C-1.77635684e-15,7.29022441 0.0555890961,7.15456441 0.167309096,7.04322441 C0.278269096,6.93226441 0.414309096,6.87640441 0.573909096,6.87640441 L4.8732291,6.87640441 L10.9874291,0.172064405 C11.1390491,0.00296440549 11.3484291,-0.0414955945 11.6151891,0.0386844055 C11.8466091,0.136344405 11.9621291,0.314564405 11.9621291,0.572584405 L11.9625091,0.572584405 Z"}),de.createElement("path",{d:"M15.7579491,16.0914044 L14.6798891,13.6594044 C15.5739159,13.2635547 16.1503537,12.3776671 16.1501091,11.3999244 C16.150386,10.4242626 15.5763999,9.53983269 14.6852091,9.14272441 L15.7697291,6.71376441 C17.6193585,7.53872062 18.810518,9.37466359 18.8101092,11.3999244 C18.8105521,13.4298903 17.6139475,15.2691931 15.7579491,16.0914044 L15.7579491,16.0914044 Z"}),de.createElement("path",{d:"M18.3647491,20.2619044 L17.2863091,17.8299044 C19.8302925,16.7031661 21.4705725,14.1822599 21.4701091,11.3999244 C21.4701091,8.59818441 19.8167291,6.09892441 17.3022691,4.97678441 L18.3864091,2.54782441 C21.8804724,4.10607079 24.1307363,7.57414217 24.1301093,11.3999244 C24.1308375,15.2343934 21.8705556,18.7086904 18.3647491,20.2619044 Z"})))),aU=({size:n=$k,onClick:e=()=>{}})=>de.createElement("svg",{onClick:e,height:n,width:n,viewBox:"0 0 26 23",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},de.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},de.createElement("g",{id:"Group",transform:"translate(1.000000, 0.000000)",fill:"#FFFFFF",fillRule:"nonzero"},de.createElement("path",{d:"M11.9625091,0.572584405 L11.9625091,22.2272644 C11.9625091,22.4856644 11.8466091,22.6635044 11.6151891,22.7611644 C11.3480491,22.8413444 11.1390491,22.7968844 10.9878091,22.6277844 L4.8732291,15.9143244 L0.573909096,15.9143244 C0.413549096,15.9143244 0.277509096,15.8588444 0.166549096,15.7475044 C0.0573082348,15.6406091 -0.00292164572,15.4933347 0,15.3405244 L0,7.45058441 C0,7.29022441 0.0555890961,7.15456441 0.167309096,7.04322441 C0.278269096,6.93226441 0.414309096,6.87640441 0.573909096,6.87640441 L4.8732291,6.87640441 L10.9874291,0.172064405 C11.1390491,0.00296440549 11.3484291,-0.0414955945 11.6151891,0.0386844055 C11.8466091,0.136344405 11.9621291,0.314564405 11.9621291,0.572584405 L11.9625091,0.572584405 Z",id:"Path"})),de.createElement("g",{id:"Group",transform:"translate(14.887009, 6.947630)",fill:"#FFFFFF",fillRule:"nonzero"},de.createElement("path",{d:"M7.88199149,6.27905236 C7.94693088,6.35707599 7.94693088,6.47033309 7.88199149,6.54835671 L6.54835671,7.88199149 C6.47033309,7.94693088 6.35707599,7.94693088 6.27905236,7.88199149 L3.96534802,5.56828715 L1.65164367,7.88199149 C1.57362004,7.94693088 1.46036294,7.94693088 1.38233932,7.88199149 L0.0487045381,6.54835671 C-0.016234846,6.47033309 -0.016234846,6.35707599 0.0487045381,6.27905236 L2.36240889,3.96534802 L0.0487045381,1.65164367 C-0.016234846,1.57362004 -0.016234846,1.46036294 0.0487045381,1.38233932 L1.38233932,0.0487045381 C1.46036294,-0.016234846 1.57362004,-0.016234846 1.65164367,0.0487045381 L3.96534802,2.36240889 L6.27905236,0.0487045381 C6.35707599,-0.016234846 6.47033309,-0.016234846 6.54835671,0.0487045381 L7.88199149,1.38233932 C7.94693088,1.46036294 7.94693088,1.57362004 7.88199149,1.65164367 L5.56828715,3.96534802 L7.88199149,6.27905236 Z",id:"Shape"})))),oU=qe.div`
    background: ${Of};
    height: ${n=>n.$barHeight}px;
    position: absolute;
    width: 5px;
    bottom: 0;
    left: 0;
    opacity: 0.95;
`,lU=({videoEl:n})=>{HL(2147483647,100);const e=n?.currentTime||0,t=n?.duration||0,r=e/t;let a=Math.round(r*100),l=5;return n?.height<200?l=3:n?.height<300&&(l=4),a=t<10&&a>98?100:a,de.createElement(oU,{style:{width:`${a}%`},$barHeight:l,className:"hide-in-percy"})},cU=lU,uU=(n,e="")=>{switch(n){case 1:return"Aborted. The fetching process for the media resource was aborted by the user agent at the user's request.";case 2:return"Network Error. A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.";case 3:return"Decode Error. An error of some description occurred while decoding the media resource, after the resource was established to be usable.";case 4:return`Can not play a video of type "${e.split(".").pop()}" on this platform.`;default:return""}},dU=(n,e,t,r,a)=>{const l=a+n;return!r.has(l)&&t>0&&e>t*n?(r.add(l),!0):!1},hU=[.25,.5,.75],Hk="giphy-video",fU={IDLE:1},qk=({muted:n,ccEnabled:e=!1,ccLanguage:t="en",loop:r=!0,onStateChange:a,onTimeUpdate:l,onCanPlay:c,onFirstPlay:h,onWaiting:p,onMuted:g,onError:v,onEnded:b,onLoop:x,onQuartile:C,onEndFullscreen:R,setVideoEl:j,gif:A,width:B,percentWidth:G,height:I,volume:V=.7,className:z=Hk,isInPlayer:F})=>{var w,S,k;const D=I||Jp(A,B);let M;G&&(M=`${Math.round(D/B*100)}%`);const[U,O]=P.useState(Tw(A.video,B,D)),be=P.useRef(0);U||console.warn(`GiphyJS No video content for id: ${A.id}`);const Ee=P.useRef(Date.now()),$=P.useRef(!1),K=P.useRef(0),W=P.useRef(0),Te=P.useRef(new Set);P.useEffect(()=>{Ee.current=Date.now(),$.current=!1,K.current=1,W.current=0,Te.current=new Set},[A.id]);const Re=P.useRef(null);P.useEffect(()=>{const ce=Tw(A.video,B,D);Re.current&&U?.url&&ce.url!==U.url&&(U.url.indexOf(String(A.id))!==-1&&(be.current=Re.current.currentTime),O(ce))},[B,I,A.video,D,U?.url,A.id]),P.useEffect(()=>{Re.current&&U?.url&&be.current&&(Re.current.currentTime=be.current,be.current=0)},[U?.url,be]);const H=P.useCallback(()=>{var ce;const ve=Re.current,ie=(ce=ve?.error)==null?void 0:ce.code;if(ie&&ve?.src){const Ne=uU(ie,ve?.src);console.error(Ne),v?.(ie)}},[v]),J=P.useCallback(()=>{a?.("playing"),$.current||($.current=!0,A.analytics_response_payload&&x1({actionType:"START",analyticsResponsePayload:A.analytics_response_payload}),h?.(Date.now()-Ee.current))},[h,a,A]),ue=P.useCallback(()=>a?.("paused"),[a]),me=P.useCallback(()=>{const ce=Re.current;if(ce){const ve=ce.currentTime;hU.some(ie=>dU(ie,ve,ce.duration,Te.current,K.current)?(C?.(ie),!0):!1),l?.(ve||0)}},[C,l]),Ce=P.useCallback(()=>c?.(),[c]),ye=P.useCallback(()=>{const ce=Re.current;ce?.currentTime!==0&&ce?.networkState!==fU.IDLE&&p?.(++W.current)},[p]),Se=P.useCallback(()=>{r&&Re.current&&Re.current.play(),x?.(K.current),K.current=K.current+1,$.current&&b?.()},[b,r,x]),He=P.useCallback(()=>R?.(),[R]),Ge=P.useCallback(ce=>S1(void 0,null,function*(){if(ce){const ve=ce.play();if(ve!==void 0)try{yield ve,g?.(!1)}catch{ce.muted=!0,g?.(!0),ce.play()}}}),[g]);P.useEffect(()=>{const ce=Re.current;ce&&(Ge(ce),j?.(ce),isNaN(V)||(ce.volume=V))},[]),P.useEffect(()=>{const ce=Re.current;return ce&&(ce.addEventListener("play",J),ce.addEventListener("pause",ue),ce.addEventListener("error",H),ce.addEventListener("timeupdate",me),ce.addEventListener("canplay",Ce),ce.addEventListener("ended",Se),ce.addEventListener("waiting",ye),ce.addEventListener("webkitendfullscreen",He)),()=>{ce&&(ce.removeEventListener("play",J),ce.removeEventListener("pause",ue),ce.removeEventListener("error",H),ce.removeEventListener("timeupdate",me),ce.removeEventListener("canplay",Ce),ce.removeEventListener("ended",Se),ce.removeEventListener("waiting",ye),ce.removeEventListener("webkitendfullscreen",He))}},[J,ue,H,me,Ce,Se,ye,He]);const _e=(k=(S=(w=A.video)==null?void 0:w.captions)==null?void 0:S[t])==null?void 0:k.vtt;return U?.url?de.createElement("video",{crossOrigin:"anonymous",draggable:!0,className:z,width:F?"100%":G||B,height:F?"100%":M||D,muted:n,autoPlay:!0,playsInline:!0,ref:Re,src:U?.url,"data-giphy-id":A.id},e&&_e&&de.createElement("track",{label:"English",kind:"subtitles",srcLang:t,src:_e,default:!0})):null};qk.className=Hk;var Gk=qk,pU=qe.div`
    position: relative;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: black;
    font-family: interface, helvetica, arial;
    -webkit-font-smoothing: antialiased;
`,mU=qe.div`
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    cursor: pointer;
`,gU=qe.div`
    position: absolute;
    top: 10px;
    right: 10px;
    left: 10px;
    bottom: 0;
    display: flex;
    justify-content: space-between;
    opacity: ${n=>n.$isHovered?1:0};
    transition: opacity ease-out 250ms;
    align-items: flex-start;
`,yU=qe.div`
    font-size: 22px;
    color: white;
    margin-bottom: 5px;
    font-weight: bold;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    user-select: none;
    cursor: pointer;
`,vU=qe.div`
    position: relative;
    min-width: 0;
`,bU=qe.div`
    &:before {
        background: linear-gradient(rgba(18, 18, 18, 0.6), rgba(0, 0, 0, 0));
        content: '';
        height: ${n=>n.$isLargePlayer?125:75}px;
        left: 0;
        pointer-events: none;
        position: absolute;
        top: 0;
        width: 100%;
    }
    &:after {
        background: linear-gradient(rgba(0, 0, 0, 0), rgba(18, 18, 18, 0.6));
        content: '';
        height: ${n=>n.$isLargePlayer?125:75}px;
        left: 0;
        pointer-events: none;
        position: absolute;
        bottom: 0;
        width: 100%;
    }
`,_U=300,xU=4e3,EU=n=>{const{style:e,width:t,percentWidth:r,hideMute:a,hideAttribution:l,hideProgressBar:c,hideTitle:h,className:p,persistentControls:g,gif:v,overlay:b}=n,[x,C]=P.useState(!1),[R,j]=P.useState(null),[A,B]=P.useState(n.muted),[G,I]=P.useState(!1),{setVideoEl:V,onMuted:z,onUserMuted:F}=n,w=n.height||Jp(v,t);let S;r&&(S=`${Math.round(w/t*100)}%`);const[,k,D]=UL(()=>{C(!1)},xU),M=P.useCallback($=>{z?.($),I($)},[I,z]),U=P.useCallback($=>{V?.($),j($)},[V,j]),O=()=>{G?(I(!1),B(!1)):B(!A)};P.useEffect(()=>{B(n.muted)},[n.muted]);const be=g||x,Ee=w>=_U;return P.useEffect(()=>(be?D():k(),()=>k()),[be,k,D]),de.createElement(pU,{className:p,style:Ti({width:r||t,height:S||w},e),onMouseOver:()=>C(!0),onMouseLeave:()=>C(!1),onMouseMove:()=>{C(!0),D()},onClick:$=>{F?.(!(A||G)),R?.play(),$.preventDefault(),O()}},de.createElement(Gk,w1(Ti({},n),{isInPlayer:!0,onMuted:M,setVideoEl:U,muted:A})),be&&de.createElement(bU,{$isLargePlayer:Ee}),de.createElement(gU,{$isHovered:be},de.createElement(vU,null,!h&&Ee&&de.createElement(yU,{onClick:$=>{$.preventDefault(),$.stopPropagation(),window.open(v.url,"_blank")}},v.title),R&&!l?de.createElement(sU,{gif:v}):null),!a&&de.createElement(mU,null,A||G?de.createElement(aU,null):de.createElement(iU,null))),be&&!c&&R?de.createElement(cU,{videoEl:R}):null,b&&de.createElement(b,{gif:v,isHovered:x,width:t,height:w}))},wU=n=>(n.overlay&&!n.controls&&console.warn(`${Dn.PREFIX}: Overlays only work when controls are enabled`),n.controls?de.createElement(EU,Ti({},n)):de.createElement(Gk,Ti({},n))),SU=wU;qe.div`
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    height: 100%;
    width: 100%;
`;qe(SU)`
    height: 100%;
    display: inline-block;
    object-fit: fill;
    pointer-events: none;
    background: rgb(0, 0, 0, 0);
`;qe.div`
    position: absolute;
    top: 6px;
    right: 6px;
    cursor: pointer;
    opacity: ${n=>n.$isHovered?1:.8};
    transition: opacity ease-out 800ms;
`;j0("X-GIPHY-SDK-NAME","ReactSDK");const TU="9S3bPWJJTZZdynuLXHFSBstNA5B6tes9",uS=new g7(TU),CU=({onSelect:n})=>{const[e,t]=P.useState(""),[r,a]=P.useState(400),l=P.useRef(null);P.useEffect(()=>{l.current&&a(l.current.offsetWidth)},[]);const c=h=>e?uS.search(e,{offset:h,limit:10}):uS.trending({offset:h,limit:10});return d.jsxs("div",{className:"w-full h-full flex flex-col bg-dark-sidebar rounded-lg overflow-hidden border border-dark-hover",children:[d.jsx("div",{className:"p-3 border-b border-dark-hover",children:d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"text",placeholder:"Search GIFs...",value:e,onChange:h=>t(h.target.value),className:"w-full bg-dark-input text-dark-text px-4 py-2 pl-10 rounded outline-none border border-transparent focus:border-brand-primary transition-all",autoFocus:!0}),d.jsx(oC,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-dark-muted",size:20})]})}),d.jsx("div",{ref:l,className:"flex-1 overflow-y-auto overflow-x-hidden p-2 custom-scrollbar",children:r>0&&d.jsx($V,{width:r-20,columns:3,fetchGifs:c,onGifClick:(h,p)=>{p.preventDefault(),n(h.images.original.url)},noLink:!0,hideAttribution:!0,gutter:6},e)})]})},AU=({onSubmit:n,onClose:e})=>{const[t,r]=P.useState(""),[a,l]=P.useState(["",""]),[c,h]=P.useState(!1),[p,g]=P.useState(!1),v=()=>{a.length<10&&l([...a,""])},b=j=>{a.length>2&&l(a.filter((A,B)=>B!==j))},x=(j,A)=>{const B=[...a];B[j]=A,l(B)},C=()=>{const j=a.filter(A=>A.trim()!=="");t.trim()&&j.length>=2&&(n({question:t.trim(),options:j,multipleChoice:c,anonymous:p}),e())},R=t.trim()&&a.filter(j=>j.trim()).length>=2;return d.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-dark-sidebar rounded-lg w-full max-w-md mx-4 shadow-2xl animate-fadeIn",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-hover",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(t1,{className:"text-brand-primary",size:24}),d.jsx("h2",{className:"text-lg font-semibold text-dark-text",children:"Create Poll"})]}),d.jsx("button",{onClick:e,className:"p-1 hover:bg-dark-hover rounded transition-colors",children:d.jsx(Hn,{className:"text-dark-muted",size:20})})]}),d.jsxs("div",{className:"p-4 space-y-4 max-h-[60vh] overflow-y-auto custom-scrollbar",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-dark-muted mb-2",children:"Question"}),d.jsx("input",{type:"text",value:t,onChange:j=>r(j.target.value),placeholder:"Ask a question...",maxLength:300,className:`w-full bg-dark-input text-dark-text px-4 py-3 rounded-lg
                         border border-transparent focus:border-brand-primary
                         outline-none transition-colors`,autoFocus:!0}),d.jsxs("div",{className:"text-xs text-dark-muted mt-1 text-right",children:[t.length,"/300"]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-dark-muted mb-2",children:"Options"}),d.jsx("div",{className:"space-y-2",children:a.map((j,A)=>d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("span",{className:"text-dark-muted text-sm w-6",children:[A+1,"."]}),d.jsx("input",{type:"text",value:j,onChange:B=>x(A,B.target.value),placeholder:`Option ${A+1}`,maxLength:100,className:`flex-1 bg-dark-input text-dark-text px-3 py-2 rounded
                               border border-transparent focus:border-brand-primary
                               outline-none transition-colors text-sm`}),a.length>2&&d.jsx("button",{onClick:()=>b(A),className:"p-1 hover:bg-red-500/20 text-red-400 rounded transition-colors",children:d.jsx(Hn,{size:18})})]},A))}),a.length<10&&d.jsxs("button",{onClick:v,className:"mt-2 flex items-center gap-1 text-sm text-brand-primary hover:text-brand-primary/80 transition-colors",children:[d.jsx(Pu,{size:18}),"Add Option"]})]}),d.jsxs("div",{className:"space-y-3 pt-2 border-t border-dark-hover",children:[d.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[d.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${c?"bg-brand-primary border-brand-primary":"border-dark-muted group-hover:border-dark-text"}`,children:c&&d.jsx(Ku,{size:14,className:"text-white"})}),d.jsx("span",{className:"text-dark-text text-sm",children:"Allow multiple selections"}),d.jsx("input",{type:"checkbox",checked:c,onChange:j=>h(j.target.checked),className:"sr-only"})]}),d.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[d.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${p?"bg-brand-primary border-brand-primary":"border-dark-muted group-hover:border-dark-text"}`,children:p&&d.jsx(Ku,{size:14,className:"text-white"})}),d.jsx("span",{className:"text-dark-text text-sm",children:"Anonymous voting"}),d.jsx("input",{type:"checkbox",checked:p,onChange:j=>g(j.target.checked),className:"sr-only"})]})]})]}),d.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t border-dark-hover",children:[d.jsx(Ze,{variant:"secondary",onClick:e,children:"Cancel"}),d.jsx(Ze,{variant:"primary",onClick:C,disabled:!R,children:"Create Poll"})]})]})})},kU=(n,e)=>{if(e===0)return"0 KB/s";const t=n/e;return t>1024*1024?`${(t/(1024*1024)).toFixed(1)} MB/s`:`${(t/1024).toFixed(0)} KB/s`},RU=n=>n.type.startsWith("image/")?"image":n.type.startsWith("video/")||n.type.startsWith("audio/")?"video":"auto",NU=(n,e)=>new Promise((t,r)=>{const a="dcqipv1hn",l="lumo_upload",c=RU(n),h=`https://api.cloudinary.com/v1_1/${a}/${c}/upload`,p=new FormData;p.append("file",n),p.append("upload_preset",l);const g=n.name.replace(/\.[^/.]+$/,"").replace(/[^a-zA-Z0-9_-]/g,"_");p.append("public_id",g);const v=new XMLHttpRequest;v.open("POST",h);const b=Date.now();v.upload.onprogress=x=>{if(x.lengthComputable){const C=x.loaded/x.total*100,R=(Date.now()-b)/1e3,j=kU(x.loaded,R);e&&e(C,j)}},v.onload=()=>{if(v.status===200)try{const x=JSON.parse(v.responseText);t({url:x.secure_url,name:x.original_filename||n.name,type:x.resource_type,format:x.format,bytes:x.bytes})}catch{r(new Error("Invalid response from Cloudinary"))}else try{const x=JSON.parse(v.responseText);r(new Error(x.error?.message||`Upload failed with status ${v.status}`))}catch{r(new Error(`Upload failed with status ${v.status}`))}},v.onerror=()=>r(new Error("Network error during upload")),v.send(p)}),Yk=({serverId:n,channelId:e,channel:t,userId:r,userProfile:a,userRole:l,users:c,replyingTo:h,onCancelReply:p})=>{const[g,v]=P.useState(""),[b,x]=P.useState(!1),[C,R]=P.useState(!1),[j,A]=P.useState(""),[B,G]=P.useState(0),[I,V]=P.useState(!1),[z,F]=P.useState(!1),[w,S]=P.useState(!1),[k,D]=P.useState(!1),[M,U]=P.useState({uploading:!1,progress:0,speed:""}),[O,be]=P.useState(null),[Ee,$]=P.useState(null),[K,W]=P.useState(""),[Te,Re]=P.useState(!1),H=P.useRef(0),J=P.useRef(null),ue=P.useRef(null),{warning:me,error:Ce}=Ys(),ye=["owner","admin","moderator"].includes(l),Se=!t?.locked||ye,He="This channel is locked. Only staff can send messages.",Ge=xe=>{const Be=ue.current?.selectionStart||g.length,vt=g.slice(0,Be)+xe+g.slice(Be);v(vt),V(!1),ue.current?.focus()},_e=async xe=>{if(F(!1),!(!g.trim()&&!Se))try{x(!0);const Be={text:xe,userId:r,timestamp:xt(),mentions:[],replyTo:null};n?await On(pt(ge,"servers",n,"channels",e,"messages"),Be):(await On(pt(ge,"dms",e,"messages"),Be),await rt(De(ge,"dms",e),{lastMessage:{text:"GIF",userId:r,timestamp:xt()},updatedAt:xt(),hiddenFor:[]}))}catch(Be){console.error("Error sending GIF:",Be),Ce("Failed to send GIF")}finally{x(!1)}},ce=async xe=>{if(Se)try{x(!0);const Be={type:"poll",text:xe.question,poll:{question:xe.question,options:xe.options,votes:{},multipleChoice:xe.multipleChoice,anonymous:xe.anonymous},userId:r,timestamp:xt(),mentions:[]};n?await On(pt(ge,"servers",n,"channels",e,"messages"),Be):(await On(pt(ge,"dms",e,"messages"),Be),await rt(De(ge,"dms",e),{lastMessage:{text:` Poll: ${xe.question}`,userId:r,timestamp:xt()},updatedAt:xt(),hiddenFor:[]}))}catch(Be){console.error("Error creating poll:",Be),Ce("Failed to create poll")}finally{x(!1)}},ve=xe=>{if(!xe)return;if(xe.size>40*1024*1024){Ce("File size must be less than 40MB");return}let Be=null;xe.type.startsWith("image/")&&(Be=URL.createObjectURL(xe)),be(xe),$(Be),W(""),S(!1),J.current&&(J.current.value="")},ie=xe=>{ve(xe.target.files?.[0])},Ne=()=>document.querySelector('[role="dialog"]')!==null||document.querySelector(".modal-overlay")!==null||document.body.style.overflow==="hidden",Me=xe=>{xe.preventDefault(),xe.stopPropagation(),!Ne()&&(H.current++,xe.dataTransfer.items&&xe.dataTransfer.items.length>0&&Re(!0))},Q=xe=>{xe.preventDefault(),xe.stopPropagation(),H.current--,H.current===0&&Re(!1)},ae=xe=>{xe.preventDefault(),xe.stopPropagation()},we=xe=>{if(xe.preventDefault(),xe.stopPropagation(),Re(!1),H.current=0,Ne())return;const Be=xe.dataTransfer.files;Be&&Be.length>0&&ve(Be[0])};P.useEffect(()=>(window.addEventListener("dragenter",Me),window.addEventListener("dragleave",Q),window.addEventListener("dragover",ae),window.addEventListener("drop",we),()=>{window.removeEventListener("dragenter",Me),window.removeEventListener("dragleave",Q),window.removeEventListener("dragover",ae),window.removeEventListener("drop",we)}),[]);const Ie=()=>{Ee&&URL.revokeObjectURL(Ee),be(null),$(null),W("")},Ye=async()=>{if(O)try{U({uploading:!0,progress:0,speed:"0 KB/s"});let xe,Be;if(O.type.startsWith("image/"))xe=await Wp(O,(Jn,Ht)=>{U({uploading:!0,progress:Jn,speed:Ht})});else{const Gn=await NU(O,(Jn,Ht)=>{U({uploading:!0,progress:Jn,speed:Ht})});xe=Gn.url,Be=Gn}const Xt={text:K.trim()?`${xe}
${K}`:xe,userId:r,timestamp:xt(),mentions:[],replyTo:null};n?await On(pt(ge,"servers",n,"channels",e,"messages"),Xt):(await On(pt(ge,"dms",e,"messages"),Xt),await rt(De(ge,"dms",e),{lastMessage:{text:O.type.startsWith("image/")?" Image":" Attachment",userId:r,timestamp:xt()},updatedAt:xt(),hiddenFor:[]})),Ie()}catch(xe){console.error("Error uploading file:",xe),Ce("Failed to upload file")}finally{U({uploading:!1,progress:0,speed:""})}};P.useEffect(()=>{const xe=g.length,Be=g.slice(0,xe),vt=Be.lastIndexOf("@");if(vt!==-1){const Xt=Be.slice(vt+1);if(!Xt.includes(" ")){A(Xt.toLowerCase()),G(vt),R(!0);return}}R(!1)},[g]);const ot=()=>{const xe=[];return n&&("everyone".startsWith(j.toLowerCase())&&xe.push({id:"everyone",displayName:"everyone",type:"special"}),["admin","moderator","member"].forEach(vt=>{vt.startsWith(j.toLowerCase())&&xe.push({id:`role-${vt}`,displayName:vt,type:"role"})})),c&&c.filter(vt=>vt.id!==r&&vt.displayName.toLowerCase().startsWith(j.toLowerCase())).forEach(vt=>{xe.push({...vt,type:"user"})}),xe.slice(0,8)},Qt=xe=>{const Be=g.slice(0,B),vt=g.slice(B+j.length+1),Xt=`${Be}@${xe.displayName} ${vt}`;v(Xt),R(!1)};P.useEffect(()=>{const xe=Be=>{document.activeElement!==ue.current&&(document.activeElement?.tagName==="INPUT"||document.activeElement?.tagName==="TEXTAREA"||Be.ctrlKey||Be.metaKey||Be.altKey||["Escape","Tab","Enter","Backspace","Delete"].includes(Be.key)||document.querySelector('[role="dialog"]')||Be.key.length===1&&ue.current?.focus())};return window.addEventListener("keydown",xe),()=>window.removeEventListener("keydown",xe)},[]);const dr=async xe=>{if(xe.preventDefault(),!!g.trim()&&!(!e||!r)){a?.isMuted&&me("You are muted and cannot send messages"),x(!0);try{const Be=/@(\w+)/g,vt=[];let Xt;for(;(Xt=Be.exec(g))!==null;){const Jn=Xt[1].toLowerCase();if(Jn==="everyone")c.forEach(Ht=>{Ht.id!==r&&vt.push(Ht.id)});else if(["admin","moderator","member"].includes(Jn))c.forEach(Ht=>{Ht.role===Jn&&Ht.id!==r&&vt.push(Ht.id)});else{const Ht=c.find(Ai=>Ai.displayName.toLowerCase()===Jn);Ht&&Ht.id!==r&&vt.push(Ht.id)}}const Gn={text:g.trim(),userId:r,timestamp:xt(),mentions:[...new Set(vt)],replyTo:h?{messageId:h.id,userId:h.userId,text:h.text.substring(0,100)}:null};if(n){if(await On(pt(ge,"servers",n,"channels",e,"messages"),Gn),vt.length>0){const Jn=vt.map(Ht=>rt(De(ge,"users",Ht),{[`unreadMentions.${n}.count`]:sp(1),[`unreadMentions.${n}.lastMentionAt`]:xt(),[`unreadMentions.${n}.lastMentionText`]:g.trim().substring(0,50)}).catch(Ai=>{console.error("Error updating mention for user:",Ht,Ai)}));await Promise.all(Jn)}}else await On(pt(ge,"dms",e,"messages"),Gn),await rt(De(ge,"dms",e),{lastMessage:{text:g.trim().substring(0,100),userId:r,timestamp:xt()},updatedAt:xt(),hiddenFor:[]});v(""),p&&p()}catch(Be){console.error("Error sending message:",Be),Ce("Failed to send message")}finally{x(!1)}}};return d.jsxs("div",{className:"px-4 pb-6 relative",children:[h&&d.jsxs("div",{className:"mb-2 bg-dark-sidebar border-l-4 border-green-400 p-3 rounded flex items-start justify-between",children:[d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"text-xs text-green-400 font-semibold mb-1",children:["Replying to ",c.find(xe=>xe.id===h.userId)?.displayName||"Unknown"]}),d.jsx("div",{className:"text-sm text-dark-muted truncate",children:h.text})]}),d.jsx("button",{onClick:p,className:"ml-2 text-dark-muted hover:text-dark-text transition-colors",title:"Cancel reply",children:d.jsx(Hn,{size:18})})]}),C&&d.jsx("div",{className:"absolute bottom-full left-4 right-4 mb-2 bg-dark-sidebar rounded-lg shadow-lg border border-dark-hover max-h-48 overflow-y-auto",children:ot().map(xe=>d.jsx("button",{onClick:()=>Qt(xe),className:"w-full px-4 py-2 text-left hover:bg-dark-hover transition-colors flex items-center gap-2",children:xe.type==="special"||xe.type==="role"?d.jsxs("span",{className:"text-dark-text font-medium",children:["@",xe.displayName,xe.type==="role"&&d.jsx("span",{className:"ml-2 text-xs text-dark-muted",children:"(role)"})]}):d.jsxs(d.Fragment,{children:[xe.photoUrl?d.jsx("img",{src:xe.photoUrl,alt:xe.displayName,className:"w-8 h-8 rounded-full object-cover",onError:Be=>{Be.target.style.display="none",Be.target.nextSibling.style.display="flex"}}):null,d.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold text-sm",style:{display:xe.photoUrl?"none":"flex"},children:xe.displayName[0].toUpperCase()}),d.jsxs("span",{className:"text-dark-text",children:["@",xe.displayName]})]})},xe.id))}),d.jsxs("form",{onSubmit:dr,className:"relative",children:[I&&d.jsx(SP,{onSelect:Ge,onClose:()=>V(!1)}),M.uploading&&d.jsxs("div",{className:"absolute -top-12 left-0 right-0 bg-dark-sidebar border border-dark-hover rounded-lg p-2 shadow-lg animate-fade-in-up z-50",children:[d.jsxs("div",{className:"flex items-center justify-between text-xs text-dark-text mb-1",children:[d.jsx("span",{className:"font-semibold",children:"Uploading Image..."}),d.jsxs("span",{className:"text-dark-muted",children:[Math.round(M.progress),"%  ",M.speed]})]}),d.jsx("div",{className:"h-1.5 bg-dark-hover rounded-full overflow-hidden",children:d.jsx("div",{className:"h-full bg-brand-primary transition-all duration-200 ease-out",style:{width:`${M.progress}%`}})})]}),O&&d.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-dark-bg border border-dark-hover rounded-lg shadow-2xl max-w-lg w-full overflow-hidden flex flex-col p-4",children:[d.jsxs("h3",{className:"text-dark-text font-semibold mb-4 flex items-center gap-2",children:[d.jsx(XE,{className:"text-brand-primary"}),"Upload Attachment"]}),d.jsx("div",{className:"flex-1 w-full bg-black/50 rounded-lg overflow-hidden flex items-center justify-center mb-4 border border-dark-hover min-h-[200px] max-h-[400px]",children:Ee?d.jsx("img",{src:Ee,alt:"Preview",className:"max-w-full max-h-full object-contain"}):d.jsxs("div",{className:"flex flex-col items-center gap-2 text-dark-muted",children:[d.jsx("div",{className:"text-6xl",children:""}),d.jsx("div",{className:"text-sm font-medium text-dark-text max-w-xs truncate px-4",children:O.name}),d.jsxs("div",{className:"text-xs",children:[(O.size/1024/1024).toFixed(2)," MB"]})]})}),d.jsx("input",{type:"text",value:K,onChange:xe=>W(xe.target.value),placeholder:"Add a caption... (optional)",className:"w-full bg-dark-input text-dark-text px-4 py-2 rounded-lg border border-dark-hover focus:border-brand-primary outline-none mb-4",onKeyDown:xe=>{xe.key==="Enter"&&!M.uploading&&Ye()}}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("button",{onClick:Ie,className:"px-4 py-2 text-dark-text hover:text-dark-muted transition-colors font-medium",disabled:M.uploading,children:"Cancel"}),d.jsx("button",{onClick:Ye,className:"px-6 py-2 bg-brand-primary hover:bg-brand-secondary text-white rounded-md transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",disabled:M.uploading,children:M.uploading?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Uploading..."]}):d.jsxs(d.Fragment,{children:[d.jsx(QE,{size:18}),"Send"]})})]}),M.uploading&&d.jsxs("div",{className:"mt-4",children:[d.jsxs("div",{className:"flex justify-between text-xs text-dark-muted mb-1",children:[d.jsx("span",{children:M.speed}),d.jsxs("span",{children:[Math.round(M.progress),"%"]})]}),d.jsx("div",{className:"h-1 bg-dark-hover rounded-full overflow-hidden",children:d.jsx("div",{className:"h-full bg-brand-primary transition-all duration-200",style:{width:`${M.progress}%`}})})]})]})}),z&&d.jsxs("div",{className:"absolute bottom-full right-0 mb-4 w-[85vw] max-w-[400px] h-[450px] shadow-2xl rounded-lg z-50",children:[d.jsx("div",{className:"fixed inset-0 z-[-1]",onClick:()=>F(!1)}),d.jsx(CU,{onSelect:_e})]}),d.jsx("input",{ref:ue,type:"text",value:g,onChange:xe=>v(xe.target.value),onKeyDown:xe=>{if(xe.key==="Tab"&&C){xe.preventDefault();const Be=ot();Be.length>0&&Qt(Be[0])}},onPaste:async xe=>{const Be=xe.clipboardData.items;for(let vt=0;vt<Be.length;vt++)for(let Xt=0;Xt<Be.length;Xt++)if(Be[Xt].kind==="file"){xe.preventDefault(),ve(Be[Xt].getAsFile());break}},placeholder:Se?a?.isMuted?"You are muted":"Type a message...":He,disabled:b||a?.isMuted||!Se||O!==null,className:`w-full bg-dark-input text-dark-text px-12 py-3 pr-36 rounded-lg
                     border border-transparent focus:border-brand-primary
                     outline-none transition-colors duration-200
                     placeholder:text-dark-muted
                     disabled:opacity-50 disabled:cursor-not-allowed`}),Te&&d.jsxs("div",{className:"fixed inset-0 z-[200] bg-brand-primary/90 flex flex-col items-center justify-center animate-fade-in pointer-events-none",children:[d.jsx("div",{className:"bg-white/10 p-8 rounded-full mb-6",children:d.jsx(KE,{size:64,className:"text-white animate-bounce"})}),d.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Drop your file here"}),d.jsx("p",{className:"text-white/80",children:"to upload instantly"})]}),d.jsxs("div",{className:"absolute left-3 top-0 bottom-0 flex items-center plus-menu-container",children:[" ",d.jsx("button",{type:"button",onClick:()=>S(!w),className:`text-dark-muted hover:text-brand-primary transition-colors flex items-center justify-center ${w?"text-brand-primary":""}`,title:"Add attachment",disabled:!Se,children:d.jsx(KE,{size:26})}),w&&d.jsxs("div",{className:"absolute bottom-full left-0 mb-2 w-48 bg-dark-sidebar border border-dark-hover rounded-lg shadow-xl overflow-hidden z-50 animate-fade-in-up",children:[d.jsxs("button",{type:"button",onClick:()=>{J.current?.click(),S(!1)},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-dark-hover text-left transition-colors",children:[d.jsx(XE,{className:"text-green-400",size:20}),d.jsx("span",{className:"text-sm text-dark-text font-medium",children:"Upload File"})]}),d.jsxs("button",{type:"button",onClick:()=>{D(!0),S(!1)},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-dark-hover text-left transition-colors",disabled:!n,children:[d.jsx(t1,{className:"text-brand-primary",size:20}),d.jsx("span",{className:"text-sm text-dark-text font-medium",children:"Create Poll"})]})]})]}),d.jsx("input",{type:"file",ref:J,onChange:ie,className:"hidden"}),d.jsx("button",{type:"button",onClick:()=>V(!I),className:`absolute right-14 top-1/2 -translate-y-1/2
                     text-dark-muted hover:text-brand-primary
                     transition-colors`,title:"Add emoji",children:d.jsx(mM,{size:24})}),d.jsx("button",{type:"button",onClick:()=>F(!z),className:`absolute right-24 top-1/2 -translate-y-1/2
                     text-dark-muted hover:text-brand-primary
                     transition-colors border-2 border-current rounded px-1 text-[10px] font-bold h-6 flex items-center justify-center`,title:"Add GIF",children:"GIF"}),d.jsx("button",{type:"submit",disabled:!g.trim()||b||a?.isMuted||!Se,className:`absolute right-3 top-1/2 -translate-y-1/2
                     text-dark-muted hover:text-brand-primary
                     transition-colors disabled:opacity-50 disabled:cursor-not-allowed`,children:d.jsx(QE,{size:24})})]}),k&&d.jsx(AU,{onSubmit:ce,onClose:()=>D(!1)})]})},Kk=({messages:n,users:e,onResultClick:t})=>{const[r,a]=P.useState(""),[l,c]=P.useState([]),[h,p]=P.useState(!1),g=b=>{if(a(b),!b.trim()){c([]);return}const x=n.filter(C=>C.text.toLowerCase().includes(b.toLowerCase())).slice(0,20);c(x)},v=b=>e.find(x=>x.id===b)||{displayName:"Unknown"};return h?d.jsxs("div",{className:"relative flex-1 max-w-md",children:[d.jsx("input",{type:"text",value:r,onChange:b=>g(b.target.value),placeholder:"Search messages...",autoFocus:!0,className:`w-full bg-dark-input text-dark-text px-4 py-2 pr-10 rounded-lg
                   border border-transparent focus:border-brand-primary
                   outline-none transition-colors placeholder:text-dark-muted`}),d.jsx("button",{onClick:()=>{p(!1),a(""),c([])},className:"absolute right-2 top-1/2 -translate-y-1/2 text-dark-muted hover:text-dark-text",children:d.jsx(Hn,{size:20})}),l.length>0&&d.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-dark-sidebar border border-dark-hover rounded-lg shadow-xl max-h-96 overflow-y-auto z-50",children:l.map(b=>d.jsxs("button",{onClick:()=>{t&&t(b),p(!1),a(""),c([])},className:"w-full px-4 py-3 text-left hover:bg-dark-hover transition-colors border-b border-dark-hover last:border-b-0",children:[d.jsx("div",{className:"text-xs text-brand-primary font-semibold mb-1",children:v(b.userId).displayName}),d.jsx("div",{className:"text-sm text-dark-text line-clamp-2",children:b.text})]},b.id))})]}):d.jsx("button",{onClick:()=>p(!0),className:"p-2 hover:bg-dark-hover rounded transition-colors",title:"Search messages",children:d.jsx(oC,{size:20,className:"text-dark-muted"})})},IU=({messages:n,users:e,onClose:t,onJumpToMessage:r})=>{const a=n.filter(c=>c.pinned),l=c=>e.find(h=>h.id===c)||{displayName:"Unknown"};return a.length===0?d.jsxs("div",{className:"w-80 bg-dark-sidebar border-l border-dark-hover h-full flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-hover",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Vl,{className:"text-blue-400",size:20}),d.jsx("h3",{className:"font-semibold text-dark-text",children:"Pinned Messages"})]}),d.jsx("button",{onClick:t,className:"text-dark-muted hover:text-dark-text transition-colors",children:d.jsx(Hn,{size:20})})]}),d.jsx("div",{className:"flex-1 flex items-center justify-center text-dark-muted text-sm",children:"No pinned messages"})]}):d.jsxs("div",{className:"w-80 bg-dark-sidebar border-l border-dark-hover h-full flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-hover",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Vl,{className:"text-blue-400",size:20}),d.jsx("h3",{className:"font-semibold text-dark-text",children:"Pinned Messages"}),d.jsxs("span",{className:"text-xs text-dark-muted",children:["(",a.length,")"]})]}),d.jsx("button",{onClick:t,className:"text-dark-muted hover:text-dark-text transition-colors",children:d.jsx(Hn,{size:20})})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:a.map(c=>{const h=l(c.userId);return d.jsx("div",{onClick:()=>r(c.id),className:"bg-dark-bg p-3 rounded-lg cursor-pointer hover:bg-dark-hover transition-colors border border-transparent hover:border-brand-primary",children:d.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[h.photoUrl?d.jsx("img",{src:h.photoUrl,alt:h.displayName,className:"w-8 h-8 rounded-full object-cover",onError:p=>{p.target.style.display="none",p.target.nextSibling.style.display="flex"}}):null,d.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold text-sm",style:{display:h.photoUrl?"none":"flex"},children:h.displayName?.[0]?.toUpperCase()||"U"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"font-semibold text-dark-text text-sm",children:h.displayName}),d.jsx("span",{className:"text-xs text-dark-muted",children:Yp(c.timestamp)})]}),d.jsx("div",{className:"text-dark-text text-sm mt-1 line-clamp-3",children:d.jsx(pA,{children:c.text})}),c.pinnedBy&&d.jsxs("div",{className:"text-xs text-blue-400 mt-2 flex items-center gap-1",children:[d.jsx(Vl,{size:12}),d.jsxs("span",{children:["Pinned by ",l(c.pinnedBy).displayName]})]})]})]})},c.id)})})]})},jU=({currentStatus:n,onStatusChange:e,onClose:t})=>{const[r,a]=P.useState(!1),[l,c]=P.useState(""),[h,p]=P.useState(""),g=x=>{e(x),t()},v=()=>{h.trim()&&(e({emoji:l,text:h.trim(),type:"custom"}),t())},b=()=>{e(null),t()};return d.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-dark-sidebar rounded-lg p-6 w-96 max-w-full mx-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h3",{className:"text-lg font-semibold text-dark-text",children:"Set Status"}),d.jsx("button",{onClick:t,className:"text-dark-muted hover:text-dark-text transition-colors",children:d.jsx(Hn,{size:24})})]}),r?d.jsx(d.Fragment,{children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-sm text-dark-muted mb-2 block",children:"Emoji"}),d.jsx("input",{type:"text",value:l,onChange:x=>c(x.target.value.slice(0,2)),className:"w-full bg-dark-input text-dark-text px-4 py-2 rounded-lg text-2xl text-center",placeholder:"",maxLength:2})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm text-dark-muted mb-2 block",children:"Status Text"}),d.jsx("input",{type:"text",value:h,onChange:x=>p(x.target.value),className:"w-full bg-dark-input text-dark-text px-4 py-2 rounded-lg",placeholder:"What's on your mind?",maxLength:50,autoFocus:!0}),d.jsxs("div",{className:"text-xs text-dark-muted mt-1 text-right",children:[h.length,"/50"]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>a(!1),className:"flex-1 px-4 py-2 rounded-lg bg-dark-bg hover:bg-dark-hover transition-colors text-dark-text",children:"Back"}),d.jsx("button",{onClick:v,disabled:!h.trim(),className:"flex-1 px-4 py-2 rounded-lg bg-brand-primary hover:bg-brand-primary/80 transition-colors text-white font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Set Status"})]})]})}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"space-y-2 mb-4",children:YO.map(x=>d.jsxs("button",{onClick:()=>g(x),className:"w-full px-4 py-3 rounded-lg bg-dark-bg hover:bg-dark-hover transition-colors text-left flex items-center gap-3",children:[d.jsx("span",{className:"text-2xl",children:x.emoji}),d.jsx("span",{className:"text-dark-text",children:x.text})]},x.type))}),d.jsx("button",{onClick:()=>a(!0),className:"w-full px-4 py-3 rounded-lg bg-brand-primary hover:bg-brand-primary/80 transition-colors text-white font-medium",children:" Custom Status"}),n&&d.jsx("button",{onClick:b,className:"w-full mt-2 px-4 py-2 rounded-lg bg-dark-bg hover:bg-dark-hover transition-colors text-admin text-sm",children:"Clear Status"})]})]})})},DU=[{id:"account",label:"My Account",icon:yM,category:"User Settings"},{id:"status",label:"Status",icon:oM,category:"User Settings"},{id:"security",label:"Privacy & Security",icon:iM,category:"User Settings"},{id:"about",label:"About",icon:Wv,category:"App Settings"}],MU=({isOpen:n,onClose:e})=>{const{currentUser:t,userProfile:r}=Cr(),{success:a,error:l}=Ys(),[c,h]=P.useState("account"),[p,g]=P.useState(r?.photoUrl||""),[v,b]=P.useState(r?.bio||""),[x,C]=P.useState(!1),[R,j]=P.useState(!1),[A,B]=P.useState({progress:0,speed:""}),G=P.useRef(null),[I,V]=P.useState(!1),[z,F]=P.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[w,S]=P.useState(!1);P.useEffect(()=>{g(r?.photoUrl||""),b(r?.bio||"")},[r]),P.useEffect(()=>{const K=W=>{W.key==="Escape"&&n&&e()};return n&&(document.addEventListener("keydown",K),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",K),document.body.style.overflow="unset"}},[n,e]);const k=async()=>{if(t){C(!0);try{await rt(De(ge,"users",t.uid),{photoUrl:p.trim()}),a("Profile photo updated successfully")}catch(K){console.error("Error updating photo:",K),l("Failed to update profile photo")}finally{C(!1)}}},D=async K=>{if(!(!K||!t)){if(!K.type.startsWith("image/")){l("Please select an image file");return}if(K.size>10*1024*1024){l("Image size must be less than 10MB");return}j(!0);try{const W=await Wp(K,(Te,Re)=>{B({progress:Te,speed:Re})});await rt(De(ge,"users",t.uid),{photoUrl:W}),g(W),a("Profile photo updated successfully!")}catch(W){console.error("Error uploading photo:",W),l("Failed to upload photo")}finally{j(!1),B({progress:0,speed:""}),G.current&&(G.current.value="")}}},M=async()=>{if(t){C(!0);try{await rt(De(ge,"users",t.uid),{bio:v.trim()}),a("Bio updated successfully")}catch(K){console.error("Error updating bio:",K),l("Failed to update bio")}finally{C(!1)}}},U=async()=>{if(!(!t||!t.email)){if(!z.currentPassword||!z.newPassword||!z.confirmPassword){l("Please fill in all password fields");return}if(z.newPassword.length<6){l("New password must be at least 6 characters");return}if(z.newPassword!==z.confirmPassword){l("New passwords do not match");return}S(!0);try{const K=Ao.credential(t.email,z.currentPassword);await E5(t,K),await T5(t,z.newPassword),a("Password changed successfully"),F({currentPassword:"",newPassword:"",confirmPassword:""})}catch(K){console.error("Error changing password:",K),K.code==="auth/wrong-password"?l("Current password is incorrect"):K.code==="auth/weak-password"?l("New password is too weak"):l("Failed to change password")}finally{S(!1)}}},O=async K=>{if(t)try{await rt(De(ge,"users",t.uid),{status:K}),a(K?"Status updated":"Status cleared")}catch(W){console.error("Error updating status:",W),l("Failed to update status")}},be=async K=>{if(t)try{await rt(De(ge,"users",t.uid),{presence:K}),a(`Status set to ${K}`)}catch{l("Failed to update status")}};if(!n)return null;const Ee=DU.reduce((K,W)=>(K[W.category]||(K[W.category]=[]),K[W.category].push(W),K),{}),$=()=>{switch(c){case"account":return d.jsxs("div",{className:"space-y-8",children:[d.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"My Account"}),d.jsxs("div",{className:"bg-dark-bg rounded-lg overflow-hidden",children:[d.jsx("div",{className:"h-24 bg-gradient-to-r from-brand-primary to-purple-600"}),d.jsx("div",{className:"p-4 relative",children:d.jsxs("div",{className:"flex items-end gap-4 -mt-12",children:[d.jsxs("div",{className:"relative",children:[p?d.jsx("img",{src:p,alt:"Profile",className:"w-20 h-20 rounded-full object-cover border-4 border-dark-bg",onError:K=>{K.target.style.display="none",K.target.nextSibling.style.display="flex"}}):null,d.jsx("div",{className:"w-20 h-20 rounded-full bg-brand-primary flex items-center justify-center text-white font-bold text-2xl border-4 border-dark-bg",style:{display:p?"none":"flex"},children:r?.displayName?.[0]?.toUpperCase()||"U"})]}),d.jsxs("div",{className:"flex-1 pb-2",children:[d.jsx("h2",{className:"text-xl font-bold text-dark-text",children:r?.displayName}),d.jsx("p",{className:"text-dark-muted text-sm",children:t?.email})]})]})})]}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Profile Photo"}),d.jsx("input",{type:"file",ref:G,onChange:K=>D(K.target.files?.[0]),accept:"image/*",className:"hidden"}),d.jsx("div",{className:"flex gap-3 mb-4",children:d.jsx("button",{onClick:()=>G.current?.click(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-brand-primary hover:bg-brand-secondary text-white rounded-lg transition-colors disabled:opacity-50",disabled:R,children:R?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Uploading..."]}):d.jsxs(d.Fragment,{children:[d.jsx(E0,{size:20}),"Upload Image"]})})}),R&&d.jsxs("div",{className:"mb-4",children:[d.jsxs("div",{className:"flex justify-between text-xs text-dark-muted mb-1",children:[d.jsx("span",{children:A.speed}),d.jsxs("span",{children:[Math.round(A.progress),"%"]})]}),d.jsx("div",{className:"h-1 bg-dark-hover rounded-full overflow-hidden",children:d.jsx("div",{className:"h-full bg-brand-primary transition-all duration-200",style:{width:`${A.progress}%`}})})]}),d.jsx("div",{className:"text-xs text-dark-muted text-center mb-2",children:"or paste image URL"}),d.jsx(Yt,{placeholder:"https://example.com/photo.jpg",value:p,onChange:K=>g(K.target.value)}),d.jsx(Ze,{variant:"secondary",className:"mt-3 w-full",onClick:k,disabled:x||p===r?.photoUrl||R,children:x?"Updating...":"Update from URL"})]}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"About Me"}),d.jsx("textarea",{placeholder:"Tell others about yourself...",value:v,onChange:K=>b(K.target.value),maxLength:190,rows:4,className:`w-full bg-dark-input text-dark-text px-4 py-3 rounded-lg
                           border border-transparent focus:border-brand-primary
                           outline-none transition-colors duration-200
                           placeholder:text-dark-muted resize-none`}),d.jsxs("div",{className:"flex justify-between items-center mt-2",children:[d.jsxs("span",{className:"text-xs text-dark-muted",children:[v.length,"/190"]}),d.jsx(Ze,{variant:"primary",onClick:M,disabled:x||v===r?.bio,children:x?"Updating...":"Save"})]})]}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Account Info"}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"flex justify-between items-center py-2 border-b border-dark-hover",children:d.jsxs("div",{children:[d.jsx("div",{className:"text-xs text-dark-muted uppercase",children:"Display Name"}),d.jsx("div",{className:"text-dark-text font-medium",children:r?.displayName})]})}),d.jsx("div",{className:"flex justify-between items-center py-2 border-b border-dark-hover",children:d.jsxs("div",{children:[d.jsx("div",{className:"text-xs text-dark-muted uppercase",children:"Email"}),d.jsx("div",{className:"text-dark-text font-medium",children:t?.email})]})}),d.jsx("div",{className:"flex justify-between items-center py-2",children:d.jsxs("div",{children:[d.jsx("div",{className:"text-xs text-dark-muted uppercase",children:"Role"}),d.jsx("div",{className:"text-dark-text font-medium capitalize",children:r?.role||"member"})]})})]})]})]});case"status":return d.jsxs("div",{className:"space-y-8",children:[d.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Status"}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Online Status"}),d.jsx("div",{className:"grid grid-cols-1 gap-2",children:[{key:"online",label:"Online",color:"bg-green-500",desc:"Visible to others"},{key:"idle",label:"Idle",color:"bg-yellow-500",desc:"Away from keyboard"},{key:"dnd",label:"Do Not Disturb",color:"bg-red-500",desc:"Mute notifications"},{key:"invisible",label:"Invisible",color:"bg-gray-500",desc:"Appear offline to others"}].map(K=>d.jsxs("button",{onClick:()=>be(K.key),className:`p-4 rounded-lg border transition-all text-left flex items-center gap-4 ${r?.presence===K.key||!r?.presence&&K.key==="online"?"border-brand-primary bg-brand-primary/10":"border-dark-hover hover:border-dark-muted bg-dark-sidebar"}`,children:[d.jsx("span",{className:`w-4 h-4 rounded-full ${K.color}`}),d.jsxs("div",{children:[d.jsx("div",{className:"text-sm font-medium text-dark-text",children:K.label}),d.jsx("div",{className:"text-xs text-dark-muted",children:K.desc})]})]},K.key))})]}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Custom Status"}),r?.status?d.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-sidebar rounded-lg",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("span",{className:"text-2xl",children:r.status.emoji}),d.jsx("span",{className:"text-dark-text",children:r.status.text})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Ze,{variant:"secondary",onClick:()=>V(!0),children:"Edit"}),d.jsx(Ze,{variant:"danger",onClick:()=>O(null),children:"Clear"})]})]}):d.jsxs("div",{className:"text-center py-6",children:[d.jsx("p",{className:"text-dark-muted mb-4",children:"No custom status set"}),d.jsx(Ze,{variant:"primary",onClick:()=>V(!0),children:"Set a Status"})]})]})]});case"security":return d.jsxs("div",{className:"space-y-8",children:[d.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Privacy & Security"}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Change Password"}),d.jsxs("div",{className:"space-y-4 max-w-md",children:[d.jsx(Yt,{label:"Current Password",type:"password",placeholder:"Enter current password",value:z.currentPassword,onChange:K=>F({...z,currentPassword:K.target.value})}),d.jsx(Yt,{label:"New Password",type:"password",placeholder:"Enter new password (min 6 characters)",value:z.newPassword,onChange:K=>F({...z,newPassword:K.target.value})}),d.jsx(Yt,{label:"Confirm New Password",type:"password",placeholder:"Confirm new password",value:z.confirmPassword,onChange:K=>F({...z,confirmPassword:K.target.value})}),d.jsx(Ze,{variant:"primary",onClick:U,disabled:w||!z.currentPassword||!z.newPassword||!z.confirmPassword,children:w?"Changing Password...":"Change Password"})]})]})]});case"about":return d.jsxs("div",{className:"space-y-8",children:[d.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"About"}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-6",children:[d.jsx("h2",{className:"text-xl font-bold text-dark-text mb-2",children:"Lumo Chat"}),d.jsxs("div",{className:"space-y-4 text-dark-muted text-sm",children:[d.jsx("p",{children:"A modern real-time chat application built for seamless communication."}),d.jsxs("div",{children:[d.jsx("div",{className:"font-semibold text-dark-text",children:"Version"}),d.jsx("div",{children:"1.5.7"})]}),d.jsxs("div",{children:[d.jsx("div",{className:"font-semibold text-dark-text",children:"Developer"}),d.jsx("div",{children:"Dazlakss"})]}),d.jsxs("div",{children:[d.jsx("div",{className:"font-semibold text-dark-text",children:"Tech Stack"}),d.jsx("div",{children:"React, Firebase, TailwindCSS, Electron"})]})]})]}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Acknowledgments"}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"flex items-center gap-4 p-3 bg-dark-sidebar rounded-lg border border-dark-hover",children:d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"text-dark-text font-medium",children:"GIPHY"}),d.jsx("div",{className:"text-xs text-dark-muted",children:"We use GIPHY for finding and sharing GIFs."}),d.jsx("a",{href:"https://giphy.com",target:"_blank",rel:"noopener noreferrer",className:"mt-2 text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500 block w-fit hover:opacity-80 transition-opacity",children:"Powered by GIPHY"})]})}),d.jsx("div",{className:"flex items-center gap-4 p-3 bg-dark-sidebar rounded-lg border border-dark-hover",children:d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"text-dark-text font-medium",children:"Cloudinary"}),d.jsx("div",{className:"text-xs text-dark-muted",children:"Robust cloud storage and delivery for images and files."}),d.jsx("a",{href:"https://cloudinary.com",target:"_blank",rel:"noopener noreferrer",className:"mt-2 text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-sky-400 block w-fit hover:opacity-80 transition-opacity",children:"Powered by Cloudinary"})]})}),d.jsx("div",{className:"flex items-center gap-4 p-3 bg-dark-sidebar rounded-lg border border-dark-hover",children:d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"text-dark-text font-medium",children:"ImgBB"}),d.jsx("div",{className:"text-xs text-dark-muted",children:"Simple and fast image hosting service."}),d.jsx("a",{href:"https://imgbb.com",target:"_blank",rel:"noopener noreferrer",className:"mt-2 text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-gray-200 to-gray-400 block w-fit hover:opacity-80 transition-opacity",children:"Powered by ImgBB"})]})})]})]})]});default:return null}};return d.jsxs("div",{className:"fixed inset-0 bg-black/80 z-50 flex flex-col md:flex-row",children:[d.jsx("div",{className:"w-full md:w-56 bg-dark-sidebar flex flex-col shrink-0 border-b md:border-b-0 md:border-r border-dark-hover",children:d.jsx("div",{className:"flex md:flex-col overflow-x-auto md:overflow-y-auto py-2 md:py-4 px-2 gap-2 md:gap-0 no-scrollbar",children:Object.entries(Ee).map(([K,W])=>d.jsxs("div",{className:"mb-0 md:mb-4 flex md:block gap-2 md:gap-0 shrink-0",children:[d.jsx("div",{className:"hidden md:block px-3 py-2 text-xs font-semibold text-dark-muted uppercase tracking-wide",children:K}),W.map(Te=>{const Re=Te.icon;return d.jsxs("button",{onClick:()=>h(Te.id),className:`whitespace-nowrap flex items-center gap-2 md:gap-3 px-3 py-2 rounded-md text-left transition-colors ${c===Te.id?"bg-dark-hover text-dark-text":"text-dark-muted hover:text-dark-text hover:bg-dark-hover/50"}`,children:[d.jsx(Re,{size:18}),d.jsx("span",{className:"text-sm",children:Te.label})]},Te.id)})]},K))})}),d.jsxs("div",{className:"flex-1 flex flex-col bg-dark-bg overflow-hidden min-w-0",children:[d.jsx("div",{className:"flex justify-end p-4 shrink-0",children:d.jsx("button",{onClick:e,className:"p-2 hover:bg-dark-hover rounded-full transition-colors group",title:"Close",children:d.jsx(Hn,{size:24,className:"text-dark-muted group-hover:text-dark-text"})})}),d.jsx("div",{className:"flex-1 overflow-y-auto px-4 md:px-10 pb-10",children:d.jsx("div",{className:"max-w-2xl mx-auto md:mx-0",children:$()})})]}),I&&d.jsx(jU,{currentStatus:r?.status,onStatusChange:O,onClose:()=>V(!1)})]})},OU=()=>{const[n,e]=P.useState([]),{channels:t}=bd();P.useEffect(()=>{const a=ts(pt(ge,"adminLogs"),y0("timestamp","desc"),v0(100));return wr(a,c=>{const h=[];c.forEach(p=>{h.push({id:p.id,...p.data()})}),e(h)})},[]);const r=a=>{const l=t.find(c=>c.id===a);return l?`#${l.name}`:"Unknown Channel"};return d.jsxs("div",{children:[d.jsx("h3",{className:"text-2xl font-bold text-dark-text mb-6",children:"Admin Logs"}),d.jsx("div",{className:"space-y-3 max-h-[520px] overflow-y-auto pr-2",children:n.length===0?d.jsx("div",{className:"text-center text-dark-muted py-8",children:"No logs yet"}):n.map(a=>d.jsxs("div",{className:"bg-dark-bg p-5 rounded-xl hover:bg-dark-hover transition-colors",children:[d.jsxs("div",{className:"flex items-start justify-between mb-2",children:[d.jsx("div",{className:"flex items-center gap-2",children:a.type==="message_delete"?d.jsxs(d.Fragment,{children:[d.jsx(go,{className:"text-admin",size:20}),d.jsx("span",{className:"font-semibold text-dark-text",children:"Message Deleted"})]}):a.type==="message_edit"?d.jsxs(d.Fragment,{children:[d.jsx(Ul,{className:"text-blue-400",size:20}),d.jsx("span",{className:"font-semibold text-dark-text",children:"Message Edited"})]}):d.jsx("span",{className:"font-semibold text-dark-text",children:a.type})}),d.jsx("span",{className:"text-xs text-dark-muted",children:a.timestamp&&Yp(a.timestamp)})]}),d.jsxs("div",{className:"space-y-1 text-sm",children:[d.jsxs("div",{className:"flex gap-2",children:[d.jsx("span",{className:"text-dark-muted",children:"Channel:"}),d.jsx("span",{className:"text-dark-text font-medium",children:r(a.channelId)})]}),a.type==="message_delete"&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex gap-2",children:[d.jsx("span",{className:"text-dark-muted",children:"Original Author:"}),d.jsx("span",{className:"text-dark-text",children:a.originalAuthorName||a.originalUserName||"Unknown"})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("span",{className:"text-dark-muted",children:"Message:"}),d.jsxs("span",{className:"text-dark-text italic",children:['"',a.messageText||a.deletedText||"(empty message)",'"']})]})]}),a.type==="message_edit"&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex gap-2",children:[d.jsx("span",{className:"text-dark-muted",children:"Before:"}),d.jsxs("span",{className:"text-dark-text italic",children:['"',a.originalText,'"']})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("span",{className:"text-dark-muted",children:"After:"}),d.jsxs("span",{className:"text-blue-400 italic",children:['"',a.newText,'"']})]})]})]})]},a.id))})]})},PU=[{id:"users",label:"Users",icon:e1,category:"Moderation"},{id:"roles",label:"Roles",icon:lC,category:"Moderation"},{id:"channels",label:"Channels",icon:Kp,category:"Server Settings"},{id:"server",label:"Overview",icon:Wv,category:"Server Settings"},{id:"logs",label:"Audit Log",icon:F8,category:"Server Settings"},{id:"cleanup",label:"Cleanup",icon:cM,category:"Maintenance"}],LU=({isOpen:n,onClose:e})=>{const{userProfile:t}=Cr(),{users:r,channels:a,server:l,currentServer:c}=bd(),[h,p]=P.useState("users"),[g,v]=P.useState(null),[b,x]=P.useState(""),[C,R]=P.useState(""),[j,A]=P.useState(null),[B,G]=P.useState([]),[I,V]=P.useState(null),[z,F]=P.useState({name:"",color:"#5865f2"}),[w,S]=P.useState(null),[k,D]=P.useState(null),{success:M,error:U}=Ys(),[O,be]=P.useState(0),[Ee,$]=P.useState(!1),[K,W]=P.useState(null);P.useEffect(()=>{const Q=ae=>{ae.key==="Escape"&&n&&e()};return n&&(document.addEventListener("keydown",Q),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",Q),document.body.style.overflow="unset"}},[n,e]),P.useEffect(()=>{if(!c||c==="home")return;const Q=ts(pt(ge,"servers",c,"roles"));return wr(Q,we=>{const Ie=[];we.forEach(Ye=>{Ie.push({id:Ye.id,...Ye.data()})}),G(Ie)})},[c]),P.useEffect(()=>{if(h!=="cleanup")return;(async()=>{try{const ae=await So(pt(ge,"inviteCodes")),we=new Date;let Ie=0;ae.forEach(Ye=>{const ot=Ye.data(),Qt=ot.expiresAt?.toDate()<we,dr=!ot.isActive||ot.uses>=ot.maxUses;(Qt||dr)&&Ie++}),be(Ie)}catch(ae){console.error("Error fetching cleanup stats:",ae)}})()},[h]);const Te=async()=>{$(!0);try{const Q=await So(pt(ge,"inviteCodes")),ae=new Date,we=LE(ge);let Ie=0;Q.forEach(Ye=>{const ot=Ye.data(),Qt=ot.expiresAt?.toDate()<ae,dr=!ot.isActive||ot.uses>=ot.maxUses;(Qt||dr)&&(we.delete(De(ge,"inviteCodes",Ye.id)),Ie++)}),Ie>0?(await we.commit(),M(`${Ie} expired invite code(s) deleted`),be(0)):M("No expired invite codes to delete")}catch(Q){console.error("Error cleaning invite codes:",Q),U("Failed to clean invite codes")}finally{$(!1),W(null)}};if(!n||t?.role!=="admin")return null;const Re=async(Q,ae)=>{try{await rt(De(ge,"users",Q),{role:ae}),c&&await rt(De(ge,"servers",c,"members",Q),{role:ae}),M(`Role updated to ${ae}`),v(null)}catch(we){console.error("Error updating user role:",we),U(`Failed to update role: ${we.message}`)}},H=async(Q,ae)=>{try{await rt(De(ge,"users",Q),{isMuted:!ae})}catch(we){console.error("Error toggling mute:",we)}},J=async(Q,ae)=>{try{await rt(De(ge,"users",Q),{isBanned:!ae})}catch(we){console.error("Error toggling ban:",we)}},ue=async()=>{if(!(!b.trim()||!c))try{await On(pt(ge,"servers",c,"channels"),{name:b.trim(),type:"text",description:C.trim(),position:a.length,createdAt:xt()}),x(""),R("")}catch(Q){console.error("Error creating channel:",Q)}},me=async(Q,ae)=>{try{await rt(De(ge,"servers",c,"channels",Q),ae),A(null)}catch(we){console.error("Error updating channel:",we)}},Ce=async()=>{if(!(!k?.data||!c))try{await Wl(De(ge,"servers",c,"channels",k.data))}catch(Q){console.error("Error deleting channel:",Q)}},ye=async(Q,ae)=>{if(c)try{await rt(De(ge,"servers",c,"channels",Q),{locked:!ae})}catch(we){console.error("Error toggling channel lock:",we)}},Se=async()=>{if(z.name.trim())try{const Q=B.reduce((ae,we)=>Math.max(ae,we.position||0),0);c&&await On(pt(ge,"servers",c,"roles"),{name:z.name.trim(),color:z.color,position:Q+1,createdAt:xt()}),F({name:"",color:"#5865f2"})}catch(Q){console.error("Error creating role:",Q)}},He=async(Q,ae)=>{if(c)try{await rt(De(ge,"servers",c,"roles",Q),ae),V(null)}catch(we){console.error("Error updating role:",we)}},Ge=async()=>{if(!k?.data)return;const Q=k.data;try{const ae=B.find(ot=>ot.id===Q);if(!ae)return;const we=ae.name,Ie=LE(ge),Ye=r.filter(ot=>(ot.serverRole||ot.role)===we);if(Ye.forEach(ot=>{if(ot.role===we){const Qt=De(ge,"users",ot.id);Ie.update(Qt,{role:"member"})}if(c){const Qt=De(ge,"servers",c,"members",ot.id);Ie.update(Qt,{role:"member"})}}),c){const ot=De(ge,"servers",c,"roles",Q);Ie.delete(ot),await Ie.commit(),M(`Role '${we}' deleted and ${Ye.length} users reassigned to Member`)}}catch(ae){console.error("Error deleting role:",ae),U(`Failed to delete role: ${ae.message}`)}},_e=[{id:"admin",name:"admin",color:"#f23f42",isDefault:!0,position:-3},{id:"moderator",name:"moderator",color:"#faa81a",isDefault:!0,position:-2},{id:"member",name:"member",color:"#80848e",isDefault:!0,position:-1},...B].sort((Q,ae)=>(Q.position??999)-(ae.position??999)),ce=(Q,ae)=>{S(ae),Q.dataTransfer.effectAllowed="move"},ve=Q=>{Q.preventDefault(),Q.dataTransfer.dropEffect="move"},ie=async(Q,ae)=>{if(Q.preventDefault(),!w||w===ae){S(null);return}const we=_e.find(Ye=>Ye.id===w),Ie=_e.find(Ye=>Ye.id===ae);if(we?.isDefault||Ie?.isDefault){S(null);return}try{const Ye=we.position??0,ot=Ie.position??0;c&&(await rt(De(ge,"servers",c,"roles",w),{position:ot}),await rt(De(ge,"servers",c,"roles",ae),{position:Ye}))}catch(Ye){console.error("Error reordering roles:",Ye)}S(null)},Ne=PU.reduce((Q,ae)=>(Q[ae.category]||(Q[ae.category]=[]),Q[ae.category].push(ae),Q),{}),Me=()=>{switch(h){case"users":return d.jsxs("div",{className:"space-y-6",children:[d.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"User Management"}),d.jsx("p",{className:"text-dark-muted",children:"Manage server members, assign roles, and moderate users."}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[d.jsxs("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:["Members  ",r.length]}),d.jsx("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:r.map(Q=>d.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-dark-hover transition-colors",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold",children:Q.displayName?.[0]?.toUpperCase()||"U"}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"font-medium text-dark-text",children:Q.displayName}),d.jsx("span",{className:"text-xs px-2 py-0.5 rounded",style:{backgroundColor:`${_e.find(ae=>ae.name===(Q.serverRole||Q.role))?.color}20`,color:_e.find(ae=>ae.name===(Q.serverRole||Q.role))?.color},children:Q.serverRole||Q.role}),Q.isMuted&&d.jsx("span",{className:"text-xs text-yellow-500",children:"MUTED"}),Q.isBanned&&d.jsx("span",{className:"text-xs text-red-500",children:"BANNED"})]}),d.jsx("div",{className:"text-sm text-dark-muted",children:Q.email})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Ze,{size:"sm",variant:Q.isMuted?"warning":"secondary",onClick:()=>H(Q.id,Q.isMuted),children:Q.isMuted?"Unmute":"Mute"}),d.jsx(Ze,{size:"sm",variant:Q.isBanned?"danger":"secondary",onClick:()=>J(Q.id,Q.isBanned),children:Q.isBanned?"Unban":"Ban"}),d.jsx(Ze,{size:"sm",variant:"ghost",onClick:()=>v(Q),children:d.jsx(Ul,{size:16})})]})]},Q.id))})]})]});case"roles":return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Roles"}),d.jsx("p",{className:"text-dark-muted mt-1",children:"Use roles to organize your members and customize permissions."})]}),d.jsxs("div",{className:"bg-dark-bg rounded-xl p-6 border border-dark-hover",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-primary/20 flex items-center justify-center",children:d.jsx(Pu,{className:"text-brand-primary",size:24})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-dark-text",children:"Create New Role"}),d.jsx("p",{className:"text-sm text-dark-muted",children:"Add a custom role with a unique color"})]})]}),d.jsxs("div",{className:"flex gap-4 items-end",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("label",{className:"block text-xs font-medium text-dark-muted uppercase tracking-wide mb-2",children:"Role Name"}),d.jsx(Yt,{placeholder:"e.g. VIP, Helper, Supporter...",value:z.name,onChange:Q=>F({...z,name:Q.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-dark-muted uppercase tracking-wide mb-2",children:"Color"}),d.jsx("div",{className:"relative",children:d.jsx("input",{type:"color",value:z.color,onChange:Q=>F({...z,color:Q.target.value}),className:"w-14 h-10 rounded-lg cursor-pointer border-2 border-dark-hover hover:border-brand-primary transition-colors",style:{backgroundColor:z.color}})})]}),d.jsxs(Ze,{onClick:Se,disabled:!z.name.trim(),className:"px-6",children:[d.jsx(Pu,{size:18,className:"mr-1"}),"Create Role"]})]})]}),d.jsxs("div",{className:"bg-dark-bg rounded-xl border border-dark-hover overflow-hidden",children:[d.jsxs("div",{className:"px-6 py-4 border-b border-dark-hover flex items-center justify-between",children:[d.jsxs("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide",children:["Roles  ",_e.length]}),d.jsx("span",{className:"text-xs text-dark-muted",children:"Drag custom roles to reorder hierarchy"})]}),d.jsxs("div",{className:"divide-y divide-dark-hover",children:[_e.map((Q,ae)=>d.jsxs("div",{draggable:!Q.isDefault,onDragStart:we=>ce(we,Q.id),onDragOver:ve,onDrop:we=>ie(we,Q.id),className:Rt("group flex items-center justify-between px-6 py-4 transition-colors",!Q.isDefault&&"cursor-grab active:cursor-grabbing hover:bg-dark-sidebar/50",Q.isDefault&&"opacity-70",w===Q.id&&"opacity-50 bg-brand-primary/10"),children:[d.jsxs("div",{className:"flex items-center gap-4",children:[!Q.isDefault&&d.jsx("div",{className:"text-dark-muted opacity-0 group-hover:opacity-100 transition-opacity",children:d.jsx(rM,{size:20})}),d.jsx("div",{className:"w-5 h-5 rounded-full ring-2 ring-offset-2 ring-offset-dark-bg",style:{backgroundColor:Q.color,ringColor:Q.color}}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"font-semibold text-dark-text",style:{color:Q.color},children:Q.name}),Q.isDefault&&d.jsx("span",{className:"text-[10px] px-2 py-0.5 bg-dark-hover text-dark-muted rounded-full uppercase font-medium",children:"System"})]}),d.jsx("p",{className:"text-xs text-dark-muted mt-0.5",children:Q.isDefault?"Default system role":`Position: ${Q.position??0}`})]})]}),!Q.isDefault&&d.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[d.jsx("button",{onClick:()=>V(Q),className:"p-2 rounded-lg hover:bg-dark-hover text-dark-muted hover:text-brand-primary transition-colors",title:"Edit Role",children:d.jsx(Ul,{size:18})}),d.jsx("button",{onClick:()=>D({type:"role",data:Q.id,name:Q.name}),className:"p-2 rounded-lg hover:bg-red-500/20 text-dark-muted hover:text-red-500 transition-colors",title:"Delete Role",children:d.jsx(go,{size:18})})]})]},Q.id)),_e.length===0&&d.jsxs("div",{className:"px-6 py-12 text-center",children:[d.jsx(lC,{className:"mx-auto text-dark-muted mb-3",size:40}),d.jsx("p",{className:"text-dark-muted",children:"No roles created yet"}),d.jsx("p",{className:"text-xs text-dark-muted mt-1",children:"Create your first role above!"})]})]})]})]});case"channels":return d.jsxs("div",{className:"space-y-6",children:[d.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Channels"}),d.jsx("p",{className:"text-dark-muted",children:"Create and manage server channels."}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Create New Channel"}),d.jsxs("div",{className:"flex gap-3",children:[d.jsxs("div",{className:"flex-1 space-y-2",children:[d.jsx(Yt,{placeholder:"Channel name (#general)",value:b,onChange:Q=>x(Q.target.value)}),d.jsx(Yt,{placeholder:"Channel topic/description (Optional)",value:C,onChange:Q=>R(Q.target.value)})]}),d.jsxs(Ze,{onClick:ue,className:"h-fit mt-auto",children:[d.jsx(Pu,{size:20}),"Create"]})]})]}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[d.jsxs("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:["Text Channels  ",a.length]}),d.jsx("div",{className:"space-y-2",children:a.map(Q=>d.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-dark-hover transition-colors",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(Kp,{className:"text-dark-muted"}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"font-medium text-dark-text",children:Q.name}),Q.description&&d.jsx("span",{className:"text-xs text-dark-muted ml-2 truncate max-w-[200px]",children:Q.description}),Q.locked&&d.jsxs("span",{className:"text-xs px-2 py-0.5 rounded bg-yellow-500/20 text-yellow-500 flex items-center gap-1",children:[d.jsx(Zv,{size:12}),"LOCKED"]})]}),d.jsx("div",{className:"text-xs text-dark-muted",children:Q.locked?"Only admins can send messages":"Everyone can send messages"})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Ze,{size:"sm",variant:"ghost",onClick:()=>A(Q),children:d.jsx(Ul,{size:16})}),d.jsx(Ze,{size:"sm",variant:Q.locked?"warning":"secondary",onClick:()=>ye(Q.id,Q.locked),children:Q.locked?"Unlock":"Lock"}),d.jsx(Ze,{size:"sm",variant:"danger",onClick:()=>D({type:"channel",data:Q.id,name:Q.name}),children:d.jsx(go,{size:16})})]})]},Q.id))})]})]});case"server":return d.jsxs("div",{className:"space-y-6",children:[d.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Server Overview"}),d.jsx("p",{className:"text-dark-muted",children:"View server statistics and information."}),d.jsxs("div",{className:"bg-dark-bg rounded-lg p-6",children:[d.jsxs("div",{className:"mb-6",children:[d.jsx("div",{className:"text-xs text-dark-muted uppercase tracking-wide mb-1",children:"Server Name"}),d.jsx("div",{className:"text-2xl font-bold text-dark-text",children:l?.name||"Unknown"})]}),d.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d.jsxs("div",{className:"bg-dark-sidebar p-4 rounded-lg text-center",children:[d.jsx("div",{className:"text-3xl font-bold text-brand-primary mb-1",children:r.length}),d.jsx("div",{className:"text-sm text-dark-muted",children:"Members"})]}),d.jsxs("div",{className:"bg-dark-sidebar p-4 rounded-lg text-center",children:[d.jsx("div",{className:"text-3xl font-bold text-green-500 mb-1",children:a.length}),d.jsx("div",{className:"text-sm text-dark-muted",children:"Channels"})]}),d.jsxs("div",{className:"bg-dark-sidebar p-4 rounded-lg text-center",children:[d.jsx("div",{className:"text-3xl font-bold text-purple-500 mb-1",children:_e.length}),d.jsx("div",{className:"text-sm text-dark-muted",children:"Roles"})]})]})]})]});case"logs":return d.jsxs("div",{className:"space-y-6",children:[d.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Audit Log"}),d.jsx("p",{className:"text-dark-muted",children:"View server activity and moderation history."}),d.jsx(OU,{})]});case"cleanup":return d.jsxs("div",{className:"space-y-6",children:[d.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Database Cleanup"}),d.jsx("p",{className:"text-dark-muted",children:"Remove unused data to keep your database clean and reduce storage costs."}),d.jsx("div",{className:"grid gap-4",children:d.jsxs("div",{className:"bg-dark-bg rounded-lg p-6 border border-dark-hover",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-dark-text",children:"Expired Invite Codes"}),d.jsx("p",{className:"text-sm text-dark-muted mt-1",children:"Expired, used, or deactivated invite codes that are no longer valid."})]}),d.jsx("div",{className:"text-3xl font-bold text-yellow-500",children:O})]}),d.jsxs(Ze,{variant:"warning",onClick:()=>W("invites"),disabled:O===0||Ee,className:"w-full",children:[d.jsx(go,{size:20}),Ee?"Cleaning...":"Clean Invite Codes"]})]})}),d.jsxs("div",{className:"text-xs text-dark-muted bg-dark-sidebar p-4 rounded-lg",children:[d.jsx("strong",{children:"Note:"})," These actions are irreversible. Deleted data cannot be recovered. Running cleanup periodically helps keep your Firestore quota usage low."]})]});default:return null}};return d.jsxs("div",{className:"fixed inset-0 bg-black/80 z-[100] flex flex-col md:flex-row",children:[d.jsx("div",{className:"w-full md:w-56 bg-dark-sidebar flex flex-col shrink-0 border-b md:border-b-0 md:border-r border-dark-hover",children:d.jsx("div",{className:"flex md:flex-col overflow-x-auto md:overflow-y-auto py-2 md:py-4 px-2 gap-2 md:gap-0 no-scrollbar",children:Object.entries(Ne).map(([Q,ae])=>d.jsxs("div",{className:"mb-0 md:mb-4 flex md:block gap-2 md:gap-0 shrink-0",children:[d.jsx("div",{className:"hidden md:block px-3 py-2 text-xs font-semibold text-dark-muted uppercase tracking-wide",children:Q}),ae.map(we=>{const Ie=we.icon;return d.jsxs("button",{onClick:()=>p(we.id),className:Rt("whitespace-nowrap flex items-center gap-2 md:gap-3 px-3 py-2 rounded-md text-left transition-colors",h===we.id?"bg-dark-hover text-dark-text":"text-dark-muted hover:text-dark-text hover:bg-dark-hover/50"),children:[d.jsx(Ie,{size:18}),d.jsx("span",{className:"text-sm",children:we.label})]},we.id)})]},Q))})}),d.jsxs("div",{className:"flex-1 flex flex-col bg-dark-bg overflow-hidden min-w-0",children:[d.jsx("div",{className:"flex justify-end p-4 shrink-0",children:d.jsx("button",{onClick:e,className:"p-2 hover:bg-dark-hover rounded-full transition-colors group",title:"Close (ESC)",children:d.jsx(Hn,{size:24,className:"text-dark-muted group-hover:text-dark-text"})})}),d.jsx("div",{className:"flex-1 overflow-y-auto px-4 md:px-10 pb-10",children:d.jsx("div",{className:"max-w-3xl mx-auto md:mx-0",children:Me()})})]}),g&&(()=>{const Q=r.find(ae=>ae.id===g.id)||g;return d.jsx(Us,{isOpen:!!g,onClose:()=>v(null),title:"Edit User Role",size:"sm",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-sm text-dark-muted mb-1",children:"User"}),d.jsx("div",{className:"font-medium text-dark-text",children:Q.displayName})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-sm text-dark-muted mb-2",children:"Select Role"}),d.jsx("div",{className:"space-y-2",children:_e.map(ae=>d.jsxs("button",{onClick:()=>Re(g.id,ae.name),className:Rt("w-full px-3 py-2 rounded-lg border text-left transition-all flex items-center gap-3",(Q.serverRole||Q.role)===ae.name?"border-brand-primary bg-brand-primary/20":"border-dark-hover hover:bg-dark-hover"),children:[d.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:ae.color}}),d.jsx("span",{className:"text-dark-text",children:ae.name})]},ae.id))})]})]})})})(),I&&d.jsx(Us,{isOpen:!!I,onClose:()=>V(null),title:"Edit Role",size:"sm",children:d.jsxs("div",{className:"space-y-4",children:[d.jsx(Yt,{label:"Role Name",value:I.name,onChange:Q=>V({...I,name:Q.target.value})}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium text-dark-text mb-2 block",children:"Role Color"}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("input",{type:"color",value:I.color,onChange:Q=>V({...I,color:Q.target.value}),className:"w-14 h-10 rounded cursor-pointer"}),d.jsx(Yt,{value:I.color,onChange:Q=>V({...I,color:Q.target.value}),className:"flex-1"})]})]}),d.jsx(Ze,{variant:"primary",className:"w-full",onClick:()=>He(I.id,{name:I.name,color:I.color}),children:"Save Changes"})]})}),j&&d.jsx(Us,{isOpen:!!j,onClose:()=>A(null),title:"Edit Channel",size:"sm",children:d.jsxs("div",{className:"space-y-4",children:[d.jsx(Yt,{label:"Channel Name",value:j.name,onChange:Q=>A({...j,name:Q.target.value})}),d.jsx(Yt,{label:"Channel Topic / Description",value:j.description||"",onChange:Q=>A({...j,description:Q.target.value})}),d.jsx(Ze,{variant:"primary",className:"w-full",onClick:()=>me(j.id,{name:j.name,description:j.description}),children:"Save Changes"})]})}),d.jsx(Jl,{isOpen:!!k,onClose:()=>D(null),onConfirm:k?.type==="channel"?Ce:Ge,title:`Delete ${k?.type==="channel"?"Channel":"Role"}`,message:`Are you sure you want to delete "${k?.name}"? This cannot be undone.`,confirmText:"Delete",variant:"danger"}),d.jsx(Jl,{isOpen:!!K,onClose:()=>W(null),onConfirm:Te,title:"Clean Invite Codes",message:`Are you sure you want to delete ${O} expired/used invite code(s)? This action cannot be undone.`,confirmText:"Clean",variant:"danger"})]})},VU=({isOpen:n,onClose:e,userId:t,onSuccess:r})=>{const[a,l]=P.useState(""),[c,h]=P.useState(null),[p,g]=P.useState(null),[v,b]=P.useState(!1),[x,C]=P.useState({progress:0,speed:""}),R=P.useRef(null),{success:j,error:A}=Ys(),B=I=>{const V=I.target.files?.[0];if(V){if(!V.type.startsWith("image/")){A("Please select an image file");return}if(V.size>10*1024*1024){A("Image size must be less than 10MB");return}h(V),g(URL.createObjectURL(V))}},G=async()=>{if(!a.trim()){A("Server name is required");return}b(!0);try{let I=null;c&&(I=await Wp(c,(z,F)=>{C({progress:z,speed:F})}));const V=await On(pt(ge,"servers"),{name:a.trim(),icon:I,ownerId:t,createdAt:xt(),isDefault:!1,memberCount:1});await Yu(De(ge,"servers",V.id,"members",t),{userId:t,joinedAt:xt(),role:"admin"}),await On(pt(ge,"servers",V.id,"channels"),{name:"general",type:"text",description:"General discussion",position:0,createdAt:xt()}),await rt(De(ge,"users",t),{servers:Gp(V.id),currentServer:V.id}),j("Server created successfully!"),l(""),h(null),p&&URL.revokeObjectURL(p),g(null),r&&r(V.id),e()}catch(I){console.error("Error creating server:",I),A("Failed to create server")}finally{b(!1),C({progress:0,speed:""})}};return d.jsx(Us,{isOpen:n,onClose:e,title:"Create Server",size:"sm",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx("input",{type:"file",ref:R,onChange:B,accept:"image/*",className:"hidden"}),d.jsx("button",{onClick:()=>R.current?.click(),className:"w-20 h-20 rounded-full bg-dark-hover border-2 border-dashed border-dark-muted hover:border-brand-primary flex items-center justify-center transition-colors overflow-hidden",children:p?d.jsx("img",{src:p,alt:"Preview",className:"w-full h-full object-cover"}):d.jsx(aM,{size:32,className:"text-dark-muted"})}),d.jsx("span",{className:"text-xs text-dark-muted mt-2",children:"Server Icon (Optional)"})]}),v&&c&&x.progress>0&&d.jsxs("div",{className:"text-xs text-dark-muted text-center",children:["Uploading icon: ",Math.round(x.progress),"% (",x.speed,")"]}),d.jsx(Yt,{label:"Server Name",placeholder:"My Awesome Server",value:a,onChange:I=>l(I.target.value),maxLength:50,autoFocus:!0}),d.jsxs("div",{className:"text-xs text-dark-muted",children:[a.length,"/50 characters"]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Ze,{variant:"secondary",onClick:e,className:"flex-1",children:"Cancel"}),d.jsx(Ze,{variant:"primary",onClick:G,disabled:!a.trim()||v,className:"flex-1",children:v?"Creating...":"Create Server"})]})]})})},UU=({isOpen:n,onClose:e,userId:t,onSuccess:r})=>{const[a,l]=P.useState(""),[c,h]=P.useState(!1),{success:p,error:g}=Ys(),v=async()=>{if(!a.trim()){g("Invite code is required");return}h(!0);try{const b=a.trim().toUpperCase(),x=De(ge,"inviteCodes",b),C=await qp(x);if(!C.exists()){g("Invalid invite code");return}const R=C.data();if(!R.isActive){g("This invite code has already been used");return}const j=R.isUnlimited===!0||R.maxUses===-1;if(!j&&R.uses>=R.maxUses){g("This invite code has reached its usage limit");return}if(R.expiresAt.toDate()<new Date){g("This invite code has expired");return}await Yu(De(ge,"servers",R.serverId,"members",t),{userId:t,joinedAt:xt(),role:"member"}),await rt(De(ge,"users",t),{servers:Gp(R.serverId),currentServer:R.serverId});const A={uses:sp(1)};j||(A.isActive=!1),await rt(x,A),await rt(De(ge,"servers",R.serverId),{memberCount:sp(1)}),p("Successfully joined server!"),l(""),r&&r(R.serverId),e()}catch(b){console.error("Error joining server:",b),console.error("Error code:",b.code),console.error("Error message:",b.message),b.code!=="permission-denied"?b.code==="not-found"?g("Server not found"):g(`Failed to join server: ${b.message}`):e()}finally{h(!1)}};return d.jsx(Us,{isOpen:n,onClose:e,title:"Join Server",size:"sm",children:d.jsxs("div",{className:"space-y-4",children:[d.jsx(Yt,{label:"Invite Code",placeholder:"ABC12XYZ",value:a,onChange:b=>l(b.target.value.toUpperCase()),maxLength:8,autoFocus:!0}),d.jsx("div",{className:"text-xs text-dark-muted",children:"Enter the 8-character invite code"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Ze,{variant:"secondary",onClick:e,className:"flex-1",children:"Cancel"}),d.jsx(Ze,{variant:"primary",onClick:v,disabled:a.length!==8||c,className:"flex-1",children:c?"Joining...":"Join Server"})]})]})})};var _u={exports:{}},zy={},By={exports:{}},Fy,dS;function zU(){if(dS)return Fy;dS=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Fy=n,Fy}var $y,hS;function BU(){if(hS)return $y;hS=1;var n=zU();function e(){}function t(){}return t.resetWarningCache=e,$y=function(){function r(c,h,p,g,v,b){if(b!==n){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}r.isRequired=r;function a(){return r}var l={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:a,element:r,elementType:r,instanceOf:a,node:r,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:t,resetWarningCache:e};return l.PropTypes=l,l},$y}var fS;function Qk(){return fS||(fS=1,By.exports=BU()()),By.exports}var hf={exports:{}},pS;function FU(){if(pS)return hf.exports;pS=1;function n(t){var r,a,l="";if(typeof t=="string"||typeof t=="number")l+=t;else if(typeof t=="object")if(Array.isArray(t)){var c=t.length;for(r=0;r<c;r++)t[r]&&(a=n(t[r]))&&(l&&(l+=" "),l+=a)}else for(a in t)t[a]&&(l&&(l+=" "),l+=a);return l}function e(){for(var t,r,a=0,l="",c=arguments.length;a<c;a++)(t=arguments[a])&&(r=n(t))&&(l&&(l+=" "),l+=r);return l}return hf.exports=e,hf.exports.clsx=e,hf.exports}var tn={},oa={},mS;function lm(){if(mS)return oa;mS=1,Object.defineProperty(oa,"__esModule",{value:!0}),oa.dontSetMe=a,oa.findInArray=n,oa.int=r,oa.isFunction=e,oa.isNum=t;function n(l,c){for(let h=0,p=l.length;h<p;h++)if(c.apply(c,[l[h],h,l]))return l[h]}function e(l){return typeof l=="function"||Object.prototype.toString.call(l)==="[object Function]"}function t(l){return typeof l=="number"&&!isNaN(l)}function r(l){return parseInt(l,10)}function a(l,c,h){if(l[c])return new Error(`Invalid prop ${c} passed to ${h} - do not set this, set it on the child.`)}return oa}var la={},gS;function $U(){if(gS)return la;gS=1,Object.defineProperty(la,"__esModule",{value:!0}),la.browserPrefixToKey=t,la.browserPrefixToStyle=r,la.default=void 0,la.getPrefix=e;const n=["Moz","Webkit","O","ms"];function e(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const c=window.document?.documentElement?.style;if(!c||l in c)return"";for(let h=0;h<n.length;h++)if(t(l,n[h])in c)return n[h];return""}function t(l,c){return c?`${c}${a(l)}`:l}function r(l,c){return c?`-${c.toLowerCase()}-${l}`:l}function a(l){let c="",h=!0;for(let p=0;p<l.length;p++)h?(c+=l[p].toUpperCase(),h=!1):l[p]==="-"?h=!0:c+=l[p];return c}return la.default=e(),la}var yS;function k1(){if(yS)return tn;yS=1,Object.defineProperty(tn,"__esModule",{value:!0}),tn.addClassName=z,tn.addEvent=c,tn.addUserSelectStyles=G,tn.createCSSTransform=C,tn.createSVGTransform=R,tn.getTouch=A,tn.getTouchIdentifier=B,tn.getTranslation=j,tn.innerHeight=v,tn.innerWidth=b,tn.matchesSelector=a,tn.matchesSelectorAndParentsTo=l,tn.offsetXYFromParent=x,tn.outerHeight=p,tn.outerWidth=g,tn.removeClassName=F,tn.removeEvent=h,tn.scheduleRemoveUserSelectStyles=I;var n=lm(),e=t($U());function t(w,S){if(typeof WeakMap=="function")var k=new WeakMap,D=new WeakMap;return(t=function(M,U){if(!U&&M&&M.__esModule)return M;var O,be,Ee={__proto__:null,default:M};if(M===null||typeof M!="object"&&typeof M!="function")return Ee;if(O=U?D:k){if(O.has(M))return O.get(M);O.set(M,Ee)}for(const $ in M)$!=="default"&&{}.hasOwnProperty.call(M,$)&&((be=(O=Object.defineProperty)&&Object.getOwnPropertyDescriptor(M,$))&&(be.get||be.set)?O(Ee,$,be):Ee[$]=M[$]);return Ee})(w,S)}let r="";function a(w,S){return r||(r=(0,n.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(k){return(0,n.isFunction)(w[k])})),(0,n.isFunction)(w[r])?w[r](S):!1}function l(w,S,k){let D=w;do{if(a(D,S))return!0;if(D===k)return!1;D=D.parentNode}while(D);return!1}function c(w,S,k,D){if(!w)return;const M={capture:!0,...D};w.addEventListener?w.addEventListener(S,k,M):w.attachEvent?w.attachEvent("on"+S,k):w["on"+S]=k}function h(w,S,k,D){if(!w)return;const M={capture:!0,...D};w.removeEventListener?w.removeEventListener(S,k,M):w.detachEvent?w.detachEvent("on"+S,k):w["on"+S]=null}function p(w){let S=w.clientHeight;const k=w.ownerDocument.defaultView.getComputedStyle(w);return S+=(0,n.int)(k.borderTopWidth),S+=(0,n.int)(k.borderBottomWidth),S}function g(w){let S=w.clientWidth;const k=w.ownerDocument.defaultView.getComputedStyle(w);return S+=(0,n.int)(k.borderLeftWidth),S+=(0,n.int)(k.borderRightWidth),S}function v(w){let S=w.clientHeight;const k=w.ownerDocument.defaultView.getComputedStyle(w);return S-=(0,n.int)(k.paddingTop),S-=(0,n.int)(k.paddingBottom),S}function b(w){let S=w.clientWidth;const k=w.ownerDocument.defaultView.getComputedStyle(w);return S-=(0,n.int)(k.paddingLeft),S-=(0,n.int)(k.paddingRight),S}function x(w,S,k){const M=S===S.ownerDocument.body?{left:0,top:0}:S.getBoundingClientRect(),U=(w.clientX+S.scrollLeft-M.left)/k,O=(w.clientY+S.scrollTop-M.top)/k;return{x:U,y:O}}function C(w,S){const k=j(w,S,"px");return{[(0,e.browserPrefixToKey)("transform",e.default)]:k}}function R(w,S){return j(w,S,"")}function j(w,S,k){let{x:D,y:M}=w,U=`translate(${D}${k},${M}${k})`;if(S){const O=`${typeof S.x=="string"?S.x:S.x+k}`,be=`${typeof S.y=="string"?S.y:S.y+k}`;U=`translate(${O}, ${be})`+U}return U}function A(w,S){return w.targetTouches&&(0,n.findInArray)(w.targetTouches,k=>S===k.identifier)||w.changedTouches&&(0,n.findInArray)(w.changedTouches,k=>S===k.identifier)}function B(w){if(w.targetTouches&&w.targetTouches[0])return w.targetTouches[0].identifier;if(w.changedTouches&&w.changedTouches[0])return w.changedTouches[0].identifier}function G(w){if(!w)return;let S=w.getElementById("react-draggable-style-el");S||(S=w.createElement("style"),S.type="text/css",S.id="react-draggable-style-el",S.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,S.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,w.getElementsByTagName("head")[0].appendChild(S)),w.body&&z(w.body,"react-draggable-transparent-selection")}function I(w){window.requestAnimationFrame?window.requestAnimationFrame(()=>{V(w)}):V(w)}function V(w){if(w)try{if(w.body&&F(w.body,"react-draggable-transparent-selection"),w.selection)w.selection.empty();else{const S=(w.defaultView||window).getSelection();S&&S.type!=="Caret"&&S.removeAllRanges()}}catch{}}function z(w,S){w.classList?w.classList.add(S):w.className.match(new RegExp(`(?:^|\\s)${S}(?!\\S)`))||(w.className+=` ${S}`)}function F(w,S){w.classList?w.classList.remove(S):w.className=w.className.replace(new RegExp(`(?:^|\\s)${S}(?!\\S)`,"g"),"")}return tn}var ks={},vS;function Xk(){if(vS)return ks;vS=1,Object.defineProperty(ks,"__esModule",{value:!0}),ks.canDragX=a,ks.canDragY=l,ks.createCoreData=h,ks.createDraggableData=p,ks.getBoundPosition=t,ks.getControlPosition=c,ks.snapToGrid=r;var n=lm(),e=k1();function t(b,x,C){if(!b.props.bounds)return[x,C];let{bounds:R}=b.props;R=typeof R=="string"?R:g(R);const j=v(b);if(typeof R=="string"){const{ownerDocument:A}=j,B=A.defaultView;let G;if(R==="parent"?G=j.parentNode:G=j.getRootNode().querySelector(R),!(G instanceof B.HTMLElement))throw new Error('Bounds selector "'+R+'" could not find an element.');const I=G,V=B.getComputedStyle(j),z=B.getComputedStyle(I);R={left:-j.offsetLeft+(0,n.int)(z.paddingLeft)+(0,n.int)(V.marginLeft),top:-j.offsetTop+(0,n.int)(z.paddingTop)+(0,n.int)(V.marginTop),right:(0,e.innerWidth)(I)-(0,e.outerWidth)(j)-j.offsetLeft+(0,n.int)(z.paddingRight)-(0,n.int)(V.marginRight),bottom:(0,e.innerHeight)(I)-(0,e.outerHeight)(j)-j.offsetTop+(0,n.int)(z.paddingBottom)-(0,n.int)(V.marginBottom)}}return(0,n.isNum)(R.right)&&(x=Math.min(x,R.right)),(0,n.isNum)(R.bottom)&&(C=Math.min(C,R.bottom)),(0,n.isNum)(R.left)&&(x=Math.max(x,R.left)),(0,n.isNum)(R.top)&&(C=Math.max(C,R.top)),[x,C]}function r(b,x,C){const R=Math.round(x/b[0])*b[0],j=Math.round(C/b[1])*b[1];return[R,j]}function a(b){return b.props.axis==="both"||b.props.axis==="x"}function l(b){return b.props.axis==="both"||b.props.axis==="y"}function c(b,x,C){const R=typeof x=="number"?(0,e.getTouch)(b,x):null;if(typeof x=="number"&&!R)return null;const j=v(C),A=C.props.offsetParent||j.offsetParent||j.ownerDocument.body;return(0,e.offsetXYFromParent)(R||b,A,C.props.scale)}function h(b,x,C){const R=!(0,n.isNum)(b.lastX),j=v(b);return R?{node:j,deltaX:0,deltaY:0,lastX:x,lastY:C,x,y:C}:{node:j,deltaX:x-b.lastX,deltaY:C-b.lastY,lastX:b.lastX,lastY:b.lastY,x,y:C}}function p(b,x){const C=b.props.scale;return{node:x.node,x:b.state.x+x.deltaX/C,y:b.state.y+x.deltaY/C,deltaX:x.deltaX/C,deltaY:x.deltaY/C,lastX:b.state.x,lastY:b.state.y}}function g(b){return{left:b.left,top:b.top,right:b.right,bottom:b.bottom}}function v(b){const x=b.findDOMNode();if(!x)throw new Error("<DraggableCore>: Unmounted during event!");return x}return ks}var xu={},ff={},bS;function Wk(){if(bS)return ff;bS=1,Object.defineProperty(ff,"__esModule",{value:!0}),ff.default=n;function n(){}return ff}var _S;function HU(){if(_S)return xu;_S=1,Object.defineProperty(xu,"__esModule",{value:!0}),xu.default=void 0;var n=p(Ra()),e=h(Qk()),t=h(Y0()),r=k1(),a=Xk(),l=lm(),c=h(Wk());function h(j){return j&&j.__esModule?j:{default:j}}function p(j,A){if(typeof WeakMap=="function")var B=new WeakMap,G=new WeakMap;return(p=function(I,V){if(!V&&I&&I.__esModule)return I;var z,F,w={__proto__:null,default:I};if(I===null||typeof I!="object"&&typeof I!="function")return w;if(z=V?G:B){if(z.has(I))return z.get(I);z.set(I,w)}for(const S in I)S!=="default"&&{}.hasOwnProperty.call(I,S)&&((F=(z=Object.defineProperty)&&Object.getOwnPropertyDescriptor(I,S))&&(F.get||F.set)?z(w,S,F):w[S]=I[S]);return w})(j,A)}function g(j,A,B){return(A=v(A))in j?Object.defineProperty(j,A,{value:B,enumerable:!0,configurable:!0,writable:!0}):j[A]=B,j}function v(j){var A=b(j,"string");return typeof A=="symbol"?A:A+""}function b(j,A){if(typeof j!="object"||!j)return j;var B=j[Symbol.toPrimitive];if(B!==void 0){var G=B.call(j,A);if(typeof G!="object")return G;throw new TypeError("@@toPrimitive must return a primitive value.")}return(A==="string"?String:Number)(j)}const x={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let C=x.mouse,R=class extends n.Component{constructor(){super(...arguments),g(this,"dragging",!1),g(this,"lastX",NaN),g(this,"lastY",NaN),g(this,"touchIdentifier",null),g(this,"mounted",!1),g(this,"handleDragStart",A=>{if(this.props.onMouseDown(A),!this.props.allowAnyClick&&typeof A.button=="number"&&A.button!==0)return!1;const B=this.findDOMNode();if(!B||!B.ownerDocument||!B.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:G}=B;if(this.props.disabled||!(A.target instanceof G.defaultView.Node)||this.props.handle&&!(0,r.matchesSelectorAndParentsTo)(A.target,this.props.handle,B)||this.props.cancel&&(0,r.matchesSelectorAndParentsTo)(A.target,this.props.cancel,B))return;A.type==="touchstart"&&!this.props.allowMobileScroll&&A.preventDefault();const I=(0,r.getTouchIdentifier)(A);this.touchIdentifier=I;const V=(0,a.getControlPosition)(A,I,this);if(V==null)return;const{x:z,y:F}=V,w=(0,a.createCoreData)(this,z,F);(0,c.default)("DraggableCore: handleDragStart: %j",w),(0,c.default)("calling",this.props.onStart),!(this.props.onStart(A,w)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,r.addUserSelectStyles)(G),this.dragging=!0,this.lastX=z,this.lastY=F,(0,r.addEvent)(G,C.move,this.handleDrag),(0,r.addEvent)(G,C.stop,this.handleDragStop))}),g(this,"handleDrag",A=>{const B=(0,a.getControlPosition)(A,this.touchIdentifier,this);if(B==null)return;let{x:G,y:I}=B;if(Array.isArray(this.props.grid)){let F=G-this.lastX,w=I-this.lastY;if([F,w]=(0,a.snapToGrid)(this.props.grid,F,w),!F&&!w)return;G=this.lastX+F,I=this.lastY+w}const V=(0,a.createCoreData)(this,G,I);if((0,c.default)("DraggableCore: handleDrag: %j",V),this.props.onDrag(A,V)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const w=document.createEvent("MouseEvents");w.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(w)}return}this.lastX=G,this.lastY=I}),g(this,"handleDragStop",A=>{if(!this.dragging)return;const B=(0,a.getControlPosition)(A,this.touchIdentifier,this);if(B==null)return;let{x:G,y:I}=B;if(Array.isArray(this.props.grid)){let w=G-this.lastX||0,S=I-this.lastY||0;[w,S]=(0,a.snapToGrid)(this.props.grid,w,S),G=this.lastX+w,I=this.lastY+S}const V=(0,a.createCoreData)(this,G,I);if(this.props.onStop(A,V)===!1||this.mounted===!1)return!1;const F=this.findDOMNode();F&&this.props.enableUserSelectHack&&(0,r.scheduleRemoveUserSelectStyles)(F.ownerDocument),(0,c.default)("DraggableCore: handleDragStop: %j",V),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,F&&((0,c.default)("DraggableCore: Removing handlers"),(0,r.removeEvent)(F.ownerDocument,C.move,this.handleDrag),(0,r.removeEvent)(F.ownerDocument,C.stop,this.handleDragStop))}),g(this,"onMouseDown",A=>(C=x.mouse,this.handleDragStart(A))),g(this,"onMouseUp",A=>(C=x.mouse,this.handleDragStop(A))),g(this,"onTouchStart",A=>(C=x.touch,this.handleDragStart(A))),g(this,"onTouchEnd",A=>(C=x.touch,this.handleDragStop(A)))}componentDidMount(){this.mounted=!0;const A=this.findDOMNode();A&&(0,r.addEvent)(A,x.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const A=this.findDOMNode();if(A){const{ownerDocument:B}=A;(0,r.removeEvent)(B,x.mouse.move,this.handleDrag),(0,r.removeEvent)(B,x.touch.move,this.handleDrag),(0,r.removeEvent)(B,x.mouse.stop,this.handleDragStop),(0,r.removeEvent)(B,x.touch.stop,this.handleDragStop),(0,r.removeEvent)(A,x.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,r.scheduleRemoveUserSelectStyles)(B)}}findDOMNode(){return this.props?.nodeRef?this.props?.nodeRef?.current:t.default.findDOMNode(this)}render(){return n.cloneElement(n.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};return xu.default=R,g(R,"displayName","DraggableCore"),g(R,"propTypes",{allowAnyClick:e.default.bool,allowMobileScroll:e.default.bool,children:e.default.node.isRequired,disabled:e.default.bool,enableUserSelectHack:e.default.bool,offsetParent:function(j,A){if(j[A]&&j[A].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:e.default.arrayOf(e.default.number),handle:e.default.string,cancel:e.default.string,nodeRef:e.default.object,onStart:e.default.func,onDrag:e.default.func,onStop:e.default.func,onMouseDown:e.default.func,scale:e.default.number,className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),g(R,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),xu}var xS;function qU(){return xS||(xS=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"DraggableCore",{enumerable:!0,get:function(){return p.default}}),n.default=void 0;var e=b(Ra()),t=v(Qk()),r=v(Y0()),a=FU(),l=k1(),c=Xk(),h=lm(),p=v(HU()),g=v(Wk());function v(B){return B&&B.__esModule?B:{default:B}}function b(B,G){if(typeof WeakMap=="function")var I=new WeakMap,V=new WeakMap;return(b=function(z,F){if(!F&&z&&z.__esModule)return z;var w,S,k={__proto__:null,default:z};if(z===null||typeof z!="object"&&typeof z!="function")return k;if(w=F?V:I){if(w.has(z))return w.get(z);w.set(z,k)}for(const D in z)D!=="default"&&{}.hasOwnProperty.call(z,D)&&((S=(w=Object.defineProperty)&&Object.getOwnPropertyDescriptor(z,D))&&(S.get||S.set)?w(k,D,S):k[D]=z[D]);return k})(B,G)}function x(){return x=Object.assign?Object.assign.bind():function(B){for(var G=1;G<arguments.length;G++){var I=arguments[G];for(var V in I)({}).hasOwnProperty.call(I,V)&&(B[V]=I[V])}return B},x.apply(null,arguments)}function C(B,G,I){return(G=R(G))in B?Object.defineProperty(B,G,{value:I,enumerable:!0,configurable:!0,writable:!0}):B[G]=I,B}function R(B){var G=j(B,"string");return typeof G=="symbol"?G:G+""}function j(B,G){if(typeof B!="object"||!B)return B;var I=B[Symbol.toPrimitive];if(I!==void 0){var V=I.call(B,G);if(typeof V!="object")return V;throw new TypeError("@@toPrimitive must return a primitive value.")}return(G==="string"?String:Number)(B)}class A extends e.Component{static getDerivedStateFromProps(G,I){let{position:V}=G,{prevPropsPosition:z}=I;return V&&(!z||V.x!==z.x||V.y!==z.y)?((0,g.default)("Draggable: getDerivedStateFromProps %j",{position:V,prevPropsPosition:z}),{x:V.x,y:V.y,prevPropsPosition:{...V}}):null}constructor(G){super(G),C(this,"onDragStart",(I,V)=>{if((0,g.default)("Draggable: onDragStart: %j",V),this.props.onStart(I,(0,c.createDraggableData)(this,V))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),C(this,"onDrag",(I,V)=>{if(!this.state.dragging)return!1;(0,g.default)("Draggable: onDrag: %j",V);const z=(0,c.createDraggableData)(this,V),F={x:z.x,y:z.y,slackX:0,slackY:0};if(this.props.bounds){const{x:S,y:k}=F;F.x+=this.state.slackX,F.y+=this.state.slackY;const[D,M]=(0,c.getBoundPosition)(this,F.x,F.y);F.x=D,F.y=M,F.slackX=this.state.slackX+(S-F.x),F.slackY=this.state.slackY+(k-F.y),z.x=F.x,z.y=F.y,z.deltaX=F.x-this.state.x,z.deltaY=F.y-this.state.y}if(this.props.onDrag(I,z)===!1)return!1;this.setState(F)}),C(this,"onDragStop",(I,V)=>{if(!this.state.dragging||this.props.onStop(I,(0,c.createDraggableData)(this,V))===!1)return!1;(0,g.default)("Draggable: onDragStop: %j",V);const F={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:S,y:k}=this.props.position;F.x=S,F.y=k}this.setState(F)}),this.state={dragging:!1,dragged:!1,x:G.position?G.position.x:G.defaultPosition.x,y:G.position?G.position.y:G.defaultPosition.y,prevPropsPosition:{...G.position},slackX:0,slackY:0,isElementSVG:!1},G.position&&!(G.onDrag||G.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){return this.props?.nodeRef?.current??r.default.findDOMNode(this)}render(){const{axis:G,bounds:I,children:V,defaultPosition:z,defaultClassName:F,defaultClassNameDragging:w,defaultClassNameDragged:S,position:k,positionOffset:D,scale:M,...U}=this.props;let O={},be=null;const $=!!!k||this.state.dragging,K=k||z,W={x:(0,c.canDragX)(this)&&$?this.state.x:K.x,y:(0,c.canDragY)(this)&&$?this.state.y:K.y};this.state.isElementSVG?be=(0,l.createSVGTransform)(W,D):O=(0,l.createCSSTransform)(W,D);const Te=(0,a.clsx)(V.props.className||"",F,{[w]:this.state.dragging,[S]:this.state.dragged});return e.createElement(p.default,x({},U,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(V),{className:Te,style:{...V.props.style,...O},transform:be}))}}n.default=A,C(A,"displayName","Draggable"),C(A,"propTypes",{...p.default.propTypes,axis:t.default.oneOf(["both","x","y","none"]),bounds:t.default.oneOfType([t.default.shape({left:t.default.number,right:t.default.number,top:t.default.number,bottom:t.default.number}),t.default.string,t.default.oneOf([!1])]),defaultClassName:t.default.string,defaultClassNameDragging:t.default.string,defaultClassNameDragged:t.default.string,defaultPosition:t.default.shape({x:t.default.number,y:t.default.number}),positionOffset:t.default.shape({x:t.default.oneOfType([t.default.number,t.default.string]),y:t.default.oneOfType([t.default.number,t.default.string])}),position:t.default.shape({x:t.default.number,y:t.default.number}),className:h.dontSetMe,style:h.dontSetMe,transform:h.dontSetMe}),C(A,"defaultProps",{...p.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(zy)),zy}var ES;function GU(){if(ES)return _u.exports;ES=1;const{default:n,DraggableCore:e}=qU();return _u.exports=n,_u.exports.default=n,_u.exports.DraggableCore=e,_u.exports}var YU=GU();const Jk=rd(YU);var ic;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(ic||(ic={}));class Hy extends Error{constructor(e,t,r){super(e),this.message=e,this.code=t,this.data=r}}const KU=n=>{var e,t;return n?.androidBridge?"android":!((t=(e=n?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},QU=n=>{const e=n.CapacitorCustomPlatform||null,t=n.Capacitor||{},r=t.Plugins=t.Plugins||{},a=()=>e!==null?e.name:KU(n),l=()=>a()!=="web",c=b=>{const x=g.get(b);return!!(x?.platforms.has(a())||h(b))},h=b=>{var x;return(x=t.PluginHeaders)===null||x===void 0?void 0:x.find(C=>C.name===b)},p=b=>n.console.error(b),g=new Map,v=(b,x={})=>{const C=g.get(b);if(C)return console.warn(`Capacitor plugin "${b}" already registered. Cannot register plugins twice.`),C.proxy;const R=a(),j=h(b);let A;const B=async()=>(!A&&R in x?A=typeof x[R]=="function"?A=await x[R]():A=x[R]:e!==null&&!A&&"web"in x&&(A=typeof x.web=="function"?A=await x.web():A=x.web),A),G=(S,k)=>{var D,M;if(j){const U=j?.methods.find(O=>k===O.name);if(U)return U.rtype==="promise"?O=>t.nativePromise(b,k.toString(),O):(O,be)=>t.nativeCallback(b,k.toString(),O,be);if(S)return(D=S[k])===null||D===void 0?void 0:D.bind(S)}else{if(S)return(M=S[k])===null||M===void 0?void 0:M.bind(S);throw new Hy(`"${b}" plugin is not implemented on ${R}`,ic.Unimplemented)}},I=S=>{let k;const D=(...M)=>{const U=B().then(O=>{const be=G(O,S);if(be){const Ee=be(...M);return k=Ee?.remove,Ee}else throw new Hy(`"${b}.${S}()" is not implemented on ${R}`,ic.Unimplemented)});return S==="addListener"&&(U.remove=async()=>k()),U};return D.toString=()=>`${S.toString()}() { [capacitor code] }`,Object.defineProperty(D,"name",{value:S,writable:!1,configurable:!1}),D},V=I("addListener"),z=I("removeListener"),F=(S,k)=>{const D=V({eventName:S},k),M=async()=>{const O=await D;z({eventName:S,callbackId:O},k)},U=new Promise(O=>D.then(()=>O({remove:M})));return U.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await M()},U},w=new Proxy({},{get(S,k){switch(k){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return j?F:V;case"removeListener":return z;default:return I(k)}}});return r[b]=w,g.set(b,{name:b,proxy:w,platforms:new Set([...Object.keys(x),...j?[R]:[]])}),w};return t.convertFileSrc||(t.convertFileSrc=b=>b),t.getPlatform=a,t.handleError=p,t.isNativePlatform=l,t.isPluginAvailable=c,t.registerPlugin=v,t.Exception=Hy,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},XU=n=>n.Capacitor=QU(n),nd=XU(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),R1=nd.registerPlugin;class N1{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(t);const l=this.windowListeners[e];l&&!l.registered&&this.addWindowListener(l),r&&this.sendRetainedArgumentsForEvent(e);const c=async()=>this.removeListener(e,t);return Promise.resolve({remove:c})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,r){const a=this.listeners[e];if(!a){if(r){let l=this.retainedEventArguments[e];l||(l=[]),l.push(t),this.retainedEventArguments[e]=l}return}a.forEach(l=>l(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:r=>{this.notifyListeners(t,r)}}}unimplemented(e="not implemented"){return new nd.Exception(e,ic.Unimplemented)}unavailable(e="not available"){return new nd.Exception(e,ic.Unavailable)}async removeListener(e,t){const r=this.listeners[e];if(!r)return;const a=r.indexOf(t);this.listeners[e].splice(a,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(r=>{this.notifyListeners(e,r)}))}}const wS=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),SS=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class WU extends N1{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[a,l]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=SS(a).trim(),l=SS(l).trim(),t[a]=l}),t}async setCookie(e){try{const t=wS(e.key),r=wS(e.value),a=`; expires=${(e.expires||"").replace("expires=","")}`,l=(e.path||"/").replace("path=",""),c=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${r||""}${a}; path=${l}; ${c};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}R1("CapacitorCookies",{web:()=>new WU});const JU=async n=>new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{const a=r.result;e(a.indexOf(",")>=0?a.split(",")[1]:a)},r.onerror=a=>t(a),r.readAsDataURL(n)}),ZU=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(a=>a.toLocaleLowerCase()).reduce((a,l,c)=>(a[l]=n[e[c]],a),{})},ez=(n,e=!0)=>n?Object.entries(n).reduce((r,a)=>{const[l,c]=a;let h,p;return Array.isArray(c)?(p="",c.forEach(g=>{h=e?encodeURIComponent(g):g,p+=`${l}=${h}&`}),p.slice(0,-1)):(h=e?encodeURIComponent(c):c,p=`${l}=${h}`),`${r}&${p}`},"").substr(1):null,tz=(n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),a=ZU(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(a.includes("application/x-www-form-urlencoded")){const l=new URLSearchParams;for(const[c,h]of Object.entries(n.data||{}))l.set(c,h);t.body=l.toString()}else if(a.includes("multipart/form-data")||n.data instanceof FormData){const l=new FormData;if(n.data instanceof FormData)n.data.forEach((h,p)=>{l.append(p,h)});else for(const h of Object.keys(n.data))l.append(h,n.data[h]);t.body=l;const c=new Headers(t.headers);c.delete("content-type"),t.headers=c}else(a.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t};class nz extends N1{async request(e){const t=tz(e,e.webFetchExtra),r=ez(e.params,e.shouldEncodeUrlParams),a=r?`${e.url}?${r}`:e.url,l=await fetch(a,t),c=l.headers.get("content-type")||"";let{responseType:h="text"}=l.ok?e:{};c.includes("application/json")&&(h="json");let p,g;switch(h){case"arraybuffer":case"blob":g=await l.blob(),p=await JU(g);break;case"json":p=await l.json();break;case"document":case"text":default:p=await l.text()}const v={};return l.headers.forEach((b,x)=>{v[x]=b}),{data:p,headers:v,status:l.status,url:l.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}R1("CapacitorHttp",{web:()=>new nz});var TS;(function(n){n.Dark="DARK",n.Light="LIGHT",n.Default="DEFAULT"})(TS||(TS={}));var CS;(function(n){n.StatusBar="StatusBar",n.NavigationBar="NavigationBar"})(CS||(CS={}));class rz extends N1{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}R1("SystemBars",{web:()=>new rz});const sz=()=>{const{callStatus:n,incomingCall:e,outgoingCallUser:t,answerCall:r,endCall:a,localStream:l,remoteStream:c,toggleAudio:h,toggleVideo:p,isMuted:g,isVideoOff:v,activeCall:b,isScreenSharing:x,toggleScreenShare:C,availableDevices:R,selectedMicId:j,selectedCameraId:A,setSelectedMicId:B,setSelectedCameraId:G}=Xp(),I=P.useRef(null),V=P.useRef(null),z=P.useRef(null),[F,w]=P.useState(!1),[S,k]=P.useState(!1),[D,M]=P.useState(100),[U,O]=P.useState(!1),[be,Ee]=P.useState(!1);return P.useEffect(()=>{I.current&&l&&(I.current.srcObject=l)},[l,n]),P.useEffect(()=>{V.current&&c&&(V.current.srcObject=c)},[c,n]),P.useEffect(()=>{V.current&&(V.current.volume=D/100)},[D,c]),n==="idle"?null:n==="incoming"?d.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in",children:d.jsxs("div",{className:"bg-dark-sidebar p-6 rounded-2xl shadow-2xl w-80 text-center border border-dark-hover",children:[d.jsxs("div",{className:"w-24 h-24 mx-auto mb-4 relative",children:[e?.callerPhotoUrl?d.jsx("img",{src:e.callerPhotoUrl,alt:"Caller",className:"w-full h-full rounded-full object-cover border-4 border-dark-bg"}):d.jsx("div",{className:"w-full h-full rounded-full bg-brand-primary flex items-center justify-center text-3xl font-bold text-white border-4 border-dark-bg",children:e?.callerName?.[0]?.toUpperCase()}),d.jsx("div",{className:"absolute -bottom-1 -right-1 bg-green-500 rounded-full p-2 animate-bounce",children:d.jsx(iw,{size:16,className:"text-white"})})]}),d.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:e?.callerName}),d.jsxs("p",{className:"text-dark-muted mb-6",children:["Incoming ",e?.type," call..."]}),d.jsxs("div",{className:"flex gap-4 justify-center",children:[d.jsx("button",{onClick:()=>a(!0),className:"w-12 h-12 rounded-full bg-red-500 flex items-center justify-center text-white hover:bg-red-600 transition-colors",children:d.jsx(Cy,{size:24})}),d.jsx("button",{onClick:r,className:"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center text-white hover:bg-green-600 transition-colors",children:d.jsx(iw,{size:20})})]})]})}):d.jsx(Jk,{nodeRef:z,disabled:!F,bounds:"body",onStart:()=>k(!0),onStop:()=>k(!1),children:d.jsxs("div",{ref:z,style:F?void 0:{transform:"none !important"},className:Rt("fixed z-[100] bg-gray-900 shadow-2xl overflow-hidden border border-gray-700 group",!S&&"transition-all duration-300",F?"bottom-4 right-4 w-64 h-48 rounded-lg cursor-move":"inset-0 flex flex-col !transform-none"),children:[d.jsxs("div",{className:Rt("absolute top-0 left-0 right-0 p-4 z-50 flex justify-between items-start bg-gradient-to-b from-black/80 to-transparent transition-opacity duration-200 opacity-100"),children:[d.jsx("div",{className:"flex gap-2",children:d.jsxs("div",{className:"bg-black/40 backdrop-blur px-3 py-1 rounded-full flex items-center gap-2",children:[d.jsx("span",{className:Rt("w-2 h-2 rounded-full",b?"bg-green-500":"bg-yellow-500 animate-pulse")}),d.jsx("span",{className:"text-xs text-white font-medium",children:b?"Connected":"Calling..."})]})}),d.jsx("button",{onClick:()=>w(!F),className:"p-2 rounded-full bg-black/40 hover:bg-white/10 text-white backdrop-blur transition-colors",title:F?"Maximize":"Minimize",children:F?d.jsx(dM,{size:20}):d.jsx(uM,{size:20})})]}),d.jsxs("div",{className:"relative flex-1 bg-black flex items-center justify-center w-full h-full",children:[c?d.jsx("video",{ref:V,autoPlay:!0,playsInline:!0,className:"w-full h-full object-contain"}):d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"w-32 h-32 mx-auto mb-4 rounded-full bg-gray-800 flex items-center justify-center text-6xl font-bold text-gray-500 animate-pulse",children:t?.displayName?.[0]||b?.metadata?.name?.[0]||"?"}),d.jsx("p",{className:"text-xl text-white font-medium",children:n==="outgoing"?"Calling...":"Connecting..."}),d.jsx("p",{className:"text-gray-400 text-sm mt-1",children:t?.displayName})]}),!F&&l&&d.jsx(iz,{})]}),d.jsxs("div",{className:Rt("absolute bottom-4 md:bottom-8 left-1/2 -translate-x-1/2 z-50 flex flex-wrap justify-center items-center gap-2 md:gap-4 p-2 md:p-3 bg-gray-900/80 backdrop-blur-md rounded-xl md:rounded-2xl border border-gray-700 shadow-xl transition-opacity duration-300 hover:opacity-100 w-[95%] md:w-auto max-w-screen-sm",F&&"hidden"),children:[d.jsx("button",{onClick:h,className:Rt("p-3 rounded-xl transition-all hover:scale-110 active:scale-95",g?"bg-red-500/20 text-red-500":"bg-gray-700/50 text-white hover:bg-gray-600"),title:g?"Unmute":"Mute",children:g?d.jsx(_0,{size:22}):d.jsx(qE,{size:22})}),d.jsx("button",{onClick:p,className:Rt("p-3 rounded-xl transition-all hover:scale-110 active:scale-95",v?"bg-red-500/20 text-red-500":"bg-gray-700/50 text-white hover:bg-gray-600"),title:v?"Turn Video On":"Turn Video Off",children:v?d.jsx(x0,{size:22}):d.jsx(cp,{size:22})}),!nd.isNativePlatform()&&d.jsx("button",{onClick:C,disabled:!b,className:Rt("p-3 rounded-xl transition-all hover:scale-110 active:scale-95 disabled:opacity-30 disabled:cursor-not-allowed",x?"bg-green-500 text-white":"bg-gray-700/50 text-white hover:bg-gray-600"),title:x?"Stop Sharing":"Share Screen",children:x?d.jsx(eM,{size:22}):d.jsx(Z8,{size:22})}),d.jsx("div",{className:"w-px h-8 bg-gray-700 mx-2"}),d.jsxs("div",{className:"relative",children:[d.jsx("button",{onClick:()=>O(!U),onDoubleClick:()=>M(D>0?0:100),className:Rt("p-3 rounded-xl transition-all hover:scale-110 active:scale-95",D===0?"bg-red-500/20 text-red-500":"bg-gray-700/50 text-white hover:bg-gray-600"),title:`Volume: ${D}% (click to show slider, double-click to mute)`,children:D===0?d.jsx(GE,{size:22}):D<50?d.jsx(Q8,{size:22}):d.jsx(YE,{size:22})}),U&&d.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-3 p-3 bg-gray-900/95 backdrop-blur-md rounded-xl border border-gray-700 shadow-xl",children:d.jsxs("div",{className:"flex flex-col items-center gap-2",children:[d.jsxs("span",{className:"text-xs text-gray-400 font-medium",children:[D,"%"]}),d.jsx("input",{type:"range",min:"0",max:"100",value:D,onChange:$=>M(Number($.target.value)),className:`w-24 h-2 appearance-none bg-gray-700 rounded-full cursor-pointer accent-brand-primary
                     [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 
                     [&::-webkit-slider-thumb]:bg-brand-primary [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer
                     [&::-webkit-slider-thumb]:shadow-lg [&::-webkit-slider-thumb]:hover:scale-110 [&::-webkit-slider-thumb]:transition-transform`,style:{background:`linear-gradient(to right, rgb(88, 101, 242) ${D}%, rgb(55, 65, 81) ${D}%)`}}),d.jsx("span",{className:"text-[10px] text-gray-500",children:"Remote Volume"})]})})]}),d.jsxs("div",{className:"relative",children:[d.jsx("button",{onClick:()=>Ee(!be),className:Rt("p-3 rounded-xl transition-all hover:scale-110 active:scale-95",be?"bg-brand-primary/20 text-brand-primary":"bg-gray-700/50 text-white hover:bg-gray-600"),title:"Audio/Video Settings",children:d.jsx(Zv,{size:22})}),be&&d.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-3 p-4 bg-gray-900/95 backdrop-blur-md rounded-xl border border-gray-700 shadow-xl w-64",children:d.jsxs("div",{className:"space-y-4",children:[d.jsx("h4",{className:"text-sm font-semibold text-white mb-3",children:"Device Settings"}),d.jsxs("div",{children:[d.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Microphone"}),d.jsx("select",{value:j,onChange:$=>B($.target.value),className:"w-full bg-gray-800 text-white text-sm rounded-lg px-3 py-2 border border-gray-700 focus:border-brand-primary outline-none cursor-pointer",children:R.audioInputs.map($=>d.jsx("option",{value:$.deviceId,children:$.label||`Microphone ${$.deviceId.slice(0,8)}...`},$.deviceId))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Camera"}),d.jsx("select",{value:A,onChange:$=>G($.target.value),className:"w-full bg-gray-800 text-white text-sm rounded-lg px-3 py-2 border border-gray-700 focus:border-brand-primary outline-none cursor-pointer",children:R.videoInputs.map($=>d.jsx("option",{value:$.deviceId,children:$.label||`Camera ${$.deviceId.slice(0,8)}...`},$.deviceId))})]}),d.jsx("p",{className:"text-[10px] text-gray-500 mt-2",children:"Changes apply on next call"})]})})]}),d.jsx("div",{className:"w-px h-8 bg-gray-700 mx-2"}),d.jsx("button",{onClick:()=>a(!0),className:"p-3 rounded-xl bg-red-600 text-white hover:bg-red-700 transition-all hover:scale-110 active:scale-95 shadow-lg shadow-red-900/20",title:"End Call",children:d.jsx(Cy,{size:24})})]}),F&&d.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 flex justify-center gap-2 bg-gradient-to-t from-black/90 to-transparent opacity-0 group-hover:opacity-100 transition-opacity z-50",children:[d.jsx("button",{onMouseDown:$=>$.stopPropagation(),onClick:h,className:Rt("p-1.5 rounded-full text-white hover:bg-white/20",g&&"bg-red-500/50 text-red-100"),title:"Mute",children:g?d.jsx(_0,{size:16}):d.jsx(qE,{size:16})}),d.jsx("button",{onMouseDown:$=>$.stopPropagation(),onClick:p,className:Rt("p-1.5 rounded-full text-white hover:bg-white/20",v&&"bg-red-500/50 text-red-100"),title:"Camera",children:v?d.jsx(x0,{size:16}):d.jsx(cp,{size:16})}),d.jsx("button",{onMouseDown:$=>$.stopPropagation(),onClick:()=>M(D===0?100:0),className:Rt("p-1.5 rounded-full text-white hover:bg-white/20",D===0&&"bg-red-500/50 text-red-100"),title:"Volume Toggle",children:D===0?d.jsx(GE,{size:16}):d.jsx(YE,{size:16})}),d.jsx("button",{onMouseDown:$=>$.stopPropagation(),onClick:()=>a(!0),className:"p-1.5 rounded-full bg-red-600/80 text-white hover:bg-red-600",title:"End Call",children:d.jsx(Cy,{size:16})})]})]})})},iz=()=>{const n=P.useRef(null),{localStream:e,isMuted:t,isVideoOff:r}=Xp(),a=P.useRef(null);return P.useEffect(()=>{a.current&&e&&(a.current.srcObject=e)},[e]),d.jsx(Jk,{bounds:"parent",nodeRef:n,children:d.jsxs("div",{ref:n,className:"absolute bottom-24 right-4 w-48 h-36 bg-gray-800 rounded-lg overflow-hidden shadow-lg border border-gray-700 cursor-move hover:scale-105 transition-transform z-50",children:[d.jsx("video",{ref:a,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),d.jsxs("div",{className:"absolute bottom-2 left-2 flex gap-1",children:[t&&d.jsx("div",{className:"bg-red-500/80 p-1 rounded",children:d.jsx(_0,{size:12,className:"text-white"})}),r&&d.jsx("div",{className:"bg-red-500/80 p-1 rounded",children:d.jsx(x0,{size:12,className:"text-white"})})]})]})})},az=()=>{const{currentUser:n,logout:e,resendVerification:t}=Cr(),[r,a]=P.useState(!1),[l,c]=P.useState(""),h=async()=>{a(!0);try{await t(),c("Verification email sent! Check your inbox.")}catch(g){c("Error sending email: "+g.message)}finally{a(!1)}},p=async()=>{a(!0);try{await n.reload(),n.emailVerified?window.location.reload():c("Email is not verified yet. Please check your inbox.")}catch(g){console.error(g)}finally{a(!1)}};return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-bg p-4",children:d.jsxs("div",{className:"w-full max-w-md bg-dark-sidebar rounded-lg shadow-2xl p-8 text-center space-y-6",children:[d.jsx("div",{className:"bg-brand-primary/10 w-16 h-16 rounded-full flex items-center justify-center mx-auto text-3xl",children:""}),d.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Verify Your Email"}),d.jsxs("p",{className:"text-dark-muted",children:["We've sent a verification email to ",d.jsx("br",{}),d.jsx("span",{className:"font-semibold text-white",children:n?.email})]}),d.jsxs("div",{className:"bg-yellow-500/10 text-yellow-500 p-3 rounded-md text-sm",children:[" Please check your ",d.jsx("b",{children:"Spam/Junk"})," folder if you don't see the email in your inbox."]}),d.jsx("p",{className:"text-sm text-dark-muted",children:"You must verify your email address to access Lumo. To prevent spam, unverified accounts are restricted."}),l&&d.jsx("div",{className:"p-3 bg-brand-primary/20 text-brand-primary rounded-md text-sm",children:l}),d.jsxs("div",{className:"space-y-3 pt-4",children:[d.jsx(Ze,{onClick:p,className:"w-full",disabled:r,children:"I've Verified My Email"}),d.jsx(Ze,{onClick:h,variant:"secondary",className:"w-full",disabled:r,children:"Resend Verification Email"}),d.jsx("button",{onClick:e,className:"text-sm text-dark-muted hover:text-dark-text underline mt-4",children:"Logout"})]})]})})},oz=({dmId:n,dms:e})=>{const{currentUser:t,userProfile:r}=Cr(),{users:a}=bd(),{startCall:l}=Xp(),[c,h]=P.useState(null),[p,g]=P.useState(null),[v,b]=P.useState([]),x=e.find(j=>j.id===n),C=x?.participants.find(j=>j!==t?.uid);P.useEffect(()=>{(async()=>{if(C)try{const A=await qp(De(ge,"users",C));A.exists()&&h({id:A.id,...A.data()})}catch(A){console.error("Error fetching DM user:",A)}})()},[C]);const R=P.useMemo(()=>[{id:t.uid,displayName:t.displayName||r?.displayName||"User",photoUrl:t.photoURL||r?.photoUrl,role:r?.role},c].filter(Boolean),[t,r,c]);return x?d.jsxs("div",{className:"flex-1 flex flex-col h-full bg-dark-bg",children:[d.jsxs("div",{className:"h-12 px-4 flex items-center justify-between border-b border-dark-hover shadow-sm bg-dark-bg",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"relative",children:c?.photoUrl?d.jsx("img",{src:c.photoUrl,alt:c.displayName,className:"w-8 h-8 rounded-full object-cover"}):d.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white text-sm font-bold",children:c?.displayName?.[0]?.toUpperCase()||"?"})}),d.jsx("span",{className:"font-semibold text-dark-text",children:c?.displayName||"Loading..."})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("button",{onClick:()=>l(c,"voice"),className:"text-dark-muted hover:text-dark-text transition-colors p-1 rounded hover:bg-dark-hover",title:"Start Voice Call",disabled:!c,children:d.jsx(X8,{size:22})}),d.jsx("button",{onClick:()=>l(c,"video"),className:"text-dark-muted hover:text-dark-text transition-colors p-1 rounded hover:bg-dark-hover",title:"Start Video Call",disabled:!c,children:d.jsx(cp,{size:22})}),d.jsx("div",{className:"w-px h-6 bg-dark-hover mx-1"}),d.jsx(Kk,{messages:v,users:R,onResultClick:j=>document.getElementById(`message-${j.id}`)?.scrollIntoView({behavior:"smooth",block:"center"})})]})]}),d.jsx(_A,{serverId:null,channelId:n,users:R,currentUserId:t?.uid,userRole:r?.role,onReply:g,onMessagesChange:b}),d.jsx(Yk,{serverId:null,channelId:n,channel:{id:n,name:c?.displayName},userId:t?.uid,userProfile:r,userRole:r?.role,users:R,replyingTo:p,onCancelReply:()=>g(null)})]}):d.jsx("div",{className:"flex-1 flex items-center justify-center text-dark-muted",children:"Select a conversation"})},lz="lumo",cz="1.5.7",uz="module",dz="electron/main.cjs",hz={dev:"vite",build:"vite build",lint:"eslint .",preview:"vite preview",predeploy:"npm run build",deploy:"gh-pages -d dist","electron:dev":'concurrently -k "npm run dev" "wait-on tcp:5173 && electron ."',"electron:build":"vite build && electron-builder"},fz={"@capacitor/android":"^8.0.0","@capacitor/cli":"^8.0.0","@capacitor/core":"^8.0.0","@giphy/js-fetch-api":"^5.7.0","@giphy/react-components":"^10.1.0",clsx:"^2.1.1","date-fns":"^4.1.0","electron-log":"^5.4.3","electron-updater":"^6.6.2","emoji-picker-react":"^4.16.1",firebase:"^12.6.0",peerjs:"^1.5.5",react:"^19.2.0","react-dom":"^19.2.0","react-draggable":"^4.5.0","react-icons":"^5.5.0","react-router-dom":"^7.10.0","simple-peer":"^9.11.1","tailwind-merge":"^3.4.0"},pz="Lumo - Modern Chat Application",mz="Hasan",gz={appId:"com.hasan.lumo",productName:"Lumo",files:["dist/**/*","electron/main.cjs"],directories:{output:"dist"},win:{target:"nsis",icon:"public/lumo-logo.png",artifactName:"LumoSetup_win-${version}.${ext}"},mac:{target:"dmg",icon:"public/lumo-logo.png",category:"public.app-category.social-networking",extendInfo:{NSCameraUsageDescription:"Lumo needs access to your camera for video calls.",NSMicrophoneUsageDescription:"Lumo needs access to your microphone for voice and video calls.",NSScreenCaptureUsageDescription:"Lumo needs access to share your screen."},artifactName:"LumoSetup_mac-${version}.${ext}"},linux:{target:"AppImage",icon:"public/lumo-logo.png",category:"Network",artifactName:"LumoSetup_linux-${version}.${ext}"},publish:[{provider:"github",owner:"opsdazlakss",repo:"lumobuild"}]},yz={type:"git",url:"https://github.com/opsdazlakss/lumobuild.git"},vz={"@eslint/js":"^9.39.1","@types/react":"^19.2.5","@types/react-dom":"^19.2.3","@vitejs/plugin-react":"^5.1.1",autoprefixer:"^10.4.22",concurrently:"^9.2.1",electron:"^39.2.6","electron-builder":"^26.0.12",eslint:"^9.39.1","eslint-plugin-react-hooks":"^7.0.1","eslint-plugin-react-refresh":"^0.4.24","gh-pages":"^6.3.0",globals:"^16.5.0",postcss:"^8.5.6",tailwindcss:"^3.4.18",vite:"^7.2.4","wait-on":"^9.0.3"},qy={name:lz,private:!0,version:cz,type:uz,main:dz,scripts:hz,dependencies:fz,description:pz,author:mz,build:gz,repository:yz,devDependencies:vz},bz=({isOpen:n,onClose:e,version:t,downloadUrl:r,forceUpdate:a})=>d.jsx(Us,{isOpen:n,onClose:a?()=>{}:e,title:"Update Available",size:"sm",children:d.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[d.jsx("div",{className:"w-16 h-16 bg-brand-primary/20 rounded-full flex items-center justify-center animate-bounce",children:d.jsx(pM,{size:32,className:"text-brand-primary"})}),d.jsxs("div",{children:[d.jsxs("h3",{className:"text-lg font-semibold text-white",children:["New Version ",t," Available!"]}),d.jsx("p",{className:"text-dark-muted text-sm mt-2",children:"A new version of Lumo is available. Please update to get the latest features and fixes."})]}),d.jsxs("div",{className:"w-full space-y-2 pt-2",children:[d.jsxs(Ze,{variant:"primary",className:"w-full flex items-center justify-center gap-2",onClick:()=>{window.open(r,"_system")},children:[d.jsx(aC,{size:20}),"Download Update"]}),!a&&d.jsx(Ze,{variant:"secondary",className:"w-full",onClick:e,children:"Update Later"})]})]})}),_z=()=>{const{currentUser:n,userProfile:e,logout:t}=Cr(),{users:r,channels:a,server:l,servers:c,currentServer:h,setCurrentServer:p,unreadMentions:g,dms:v}=bd();tP(n?.uid);const[b,x]=P.useState(null),[C,R]=P.useState(null),[j,A]=P.useState(!1),[B,G]=P.useState(!1),[I,V]=P.useState(!1),[z,F]=P.useState(!1),[w,S]=P.useState(!1),k=pO({onSwipeLeft:()=>{if(z){F(!1);return}h!=="home"&&S(!0)},onSwipeRight:()=>{if(w){S(!1);return}F(!0)}}),[D,M]=P.useState(!1),[U,O]=P.useState(!1),[be,Ee]=P.useState(null),[$,K]=P.useState([]),[W,Te]=P.useState(!1),[Re,H]=P.useState(null),[J,ue]=P.useState("idle");P.useEffect(()=>{if(!nd.isNativePlatform())return;(async()=>{ue("checking");const Se=Date.now();try{const He=De(ge,"system","app_version"),Ge=await qp(He);let _e=!1,ce=null;if(Ge.exists()){const ie=Ge.data(),Ne=qy.version,Me=ie.android;if(Me&&Me!==Ne){const Q=Ne.split(".").map(Number),ae=Me.split(".").map(Number);for(let we=0;we<Math.max(Q.length,ae.length);we++){const Ie=Q[we]||0,Ye=ae[we]||0;if(Ye>Ie){_e=!0;break}else if(Ye<Ie)break}_e&&(ce={version:Me,downloadUrl:ie.downloadUrl,forceUpdate:ie.forceUpdate||!1})}}const ve=Date.now()-Se;ve<1500&&await new Promise(ie=>setTimeout(ie,1500-ve)),_e?(H(ce),ue("available"),Te(!0)):(ue("uptodate"),setTimeout(()=>{ue("idle")},1500))}catch(He){console.error("Failed to check for updates:",He),ue("idle")}})()},[]),P.useEffect(()=>{!n||!h||!g||g[h]?.count>0&&rt(De(ge,"users",n.uid),{[`unreadMentions.${h}`]:WD()}).catch(ye=>{console.error("Error clearing unread mentions:",ye)})},[h,n,g]),P.useEffect(()=>{const ye=()=>{window.innerWidth<768&&!b&&!C&&F(!0)};return window.innerWidth<768&&F(!0),window.addEventListener("resize",ye),()=>window.removeEventListener("resize",ye)},[b,C]),P.useEffect(()=>{a.length>0?x(a[0]):x(null)},[h,a]);const me=async ye=>{if(p(ye),n)try{await rt(De(ge,"users",n.uid),{currentServer:ye})}catch(Se){console.error("Failed to persist server selection:",Se)}},Ce=async ye=>{if(!n||!ye)return;const Se=v.find(He=>He.participants.includes(ye.id)&&He.participants.includes(n.uid));if(Se)R(Se),me("home");else try{const He=await On(pt(ge,"dms"),{participants:[n.uid,ye.id],createdAt:xt(),updatedAt:xt(),lastMessage:null});me("home")}catch(He){console.error("Error creating DM:",He)}};return n&&!n.emailVerified?d.jsx(az,{}):d.jsx(HO,{children:d.jsxs("div",{className:"flex h-screen bg-dark-bg overflow-hidden",...k,children:[d.jsxs("div",{className:"hidden md:flex h-full",children:[d.jsx(vw,{servers:c,currentServerId:h,onServerChange:me,onCreateServer:()=>M(!0),onJoinServer:()=>O(!0),userRole:e?.role,userId:n?.uid,unreadMentions:g}),d.jsx(yw,{server:l,channels:a,selectedChannel:b,onSelectChannel:x,onOpenSettings:()=>A(!0),onOpenAdmin:()=>G(!0),onLogout:t,userProfile:e,serverId:h,userRole:e?.role,userId:n?.uid,dms:v,selectedDm:C,onSelectDm:R})]}),z&&d.jsxs("div",{className:"fixed inset-0 z-50 flex md:hidden",children:[d.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>F(!1)}),d.jsxs("div",{className:"relative flex h-full animate-slide-in-left",children:[d.jsx(vw,{servers:c,currentServerId:h,onServerChange:ye=>{me(ye)},onCreateServer:()=>M(!0),onJoinServer:()=>O(!0),userRole:e?.role,userId:n?.uid,unreadMentions:g}),d.jsx(yw,{server:l,channels:a,selectedChannel:b,onSelectChannel:ye=>{x(ye),F(!1)},onOpenSettings:()=>{A(!0),F(!1)},onOpenAdmin:()=>{G(!0),F(!1)},onLogout:t,userProfile:e,serverId:h,userRole:e?.role,userId:n?.uid,dms:v,selectedDm:C,onSelectDm:ye=>{R(ye),F(!1)}}),d.jsx("button",{onClick:()=>F(!1),className:"absolute top-2 right-2 p-2 bg-dark-bg/50 rounded-full text-white md:hidden",style:{right:"-3rem"},children:d.jsx(Hn,{size:24})})]})]}),d.jsx("div",{className:"flex-1 flex flex-col",children:h==="home"?C?d.jsx(oz,{dmId:C.id,dms:v}):d.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-dark-muted relative",children:[d.jsx("button",{onClick:()=>F(!0),className:"absolute top-4 left-4 md:hidden p-2 text-dark-muted hover:text-dark-text",children:d.jsx(WE,{size:32})}),d.jsxs("div",{className:"text-center",children:[d.jsx("p",{className:"mb-2 text-lg",children:" Welcome!"}),d.jsx("p",{children:"Select a conversation to start chatting"})]})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"h-12 px-4 flex items-center justify-between border-b border-dark-hover shadow-sm bg-dark-bg",children:[d.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[d.jsx("button",{onClick:()=>F(!0),className:"md:hidden p-1 mr-1 text-dark-muted hover:text-dark-text",children:d.jsx(WE,{size:24})}),d.jsx(Kp,{className:"text-dark-muted flex-shrink-0"}),d.jsxs("h2",{className:"font-semibold text-dark-text flex items-center min-w-0",children:[d.jsx("span",{className:"truncate",children:b?.name||"Select a channel"}),b?.description&&d.jsx("span",{className:"hidden md:block ml-4 text-sm text-dark-muted font-normal border-l border-dark-muted/30 pl-4 truncate max-w-md",children:b.description})]})]}),d.jsx("div",{className:"flex items-center gap-3",children:b&&d.jsxs(d.Fragment,{children:[$.filter(ye=>ye.pinned).length>0&&d.jsxs("button",{onClick:()=>V(!I),className:`hidden sm:flex items-center gap-2 px-3 py-1.5 rounded transition-colors ${I?"bg-brand-primary text-white":"bg-dark-hover text-dark-text hover:bg-dark-input"}`,children:[d.jsx(Vl,{size:16}),d.jsxs("span",{className:"text-sm font-medium",children:[$.filter(ye=>ye.pinned).length," Pinned"]})]}),d.jsx("div",{className:"hidden sm:block",children:d.jsx(Kk,{messages:$,users:r,onResultClick:ye=>console.log("Scroll to:",ye)})}),h!=="home"&&d.jsx("button",{onClick:()=>S(!0),className:"lg:hidden p-2 text-dark-muted hover:text-dark-text",children:d.jsx(e1,{size:24})})]})})]}),b?d.jsxs(d.Fragment,{children:[d.jsx(_A,{serverId:h,channelId:b.id,users:r,currentUserId:n?.uid,userRole:e?.role,onReply:Ee,onMessagesChange:K}),d.jsx(Yk,{serverId:h,channelId:b.id,channel:b,userId:n?.uid,userProfile:e,userRole:e?.role,users:r,replyingTo:be,onCancelReply:()=>Ee(null)})]}):d.jsx("div",{className:"flex-1 flex items-center justify-center text-dark-muted",children:"Select a channel to start chatting"})]})}),d.jsx("div",{className:"hidden lg:block h-full",children:h!=="home"&&d.jsx(bw,{users:r,currentUserId:n?.uid,onStartDm:Ce})}),w&&h!=="home"&&d.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end lg:hidden",children:[d.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>S(!1)}),d.jsxs("div",{className:"relative h-full bg-dark-sidebar shadow-xl w-64 animate-slide-in-right",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-hover",children:[d.jsx("h3",{className:"font-semibold text-dark-text",children:"Members"}),d.jsx("button",{onClick:()=>S(!1),children:d.jsx(Hn,{size:24,className:"text-dark-muted"})})]}),d.jsx("div",{className:"h-[calc(100%-60px)]",children:d.jsx(bw,{users:r,currentUserId:n?.uid,onStartDm:ye=>{Ce(ye),S(!1)}})})]})]}),I&&b&&d.jsx(IU,{messages:$,users:r,onClose:()=>V(!1),onJumpToMessage:ye=>{const Se=document.getElementById(`message-${ye}`);Se&&(Se.scrollIntoView({behavior:"smooth",block:"center"}),Se.classList.add("bg-brand-primary/10"),setTimeout(()=>{Se.classList.remove("bg-brand-primary/10")},2e3)),V(!1)}}),d.jsx(sz,{}),d.jsx(MU,{isOpen:j,onClose:()=>A(!1),onOpenAdmin:()=>G(!0)}),d.jsx(LU,{isOpen:B,onClose:()=>G(!1)}),d.jsx(VU,{isOpen:D,onClose:()=>M(!1),userId:n?.uid,onSuccess:ye=>p(ye)}),d.jsx(UU,{isOpen:U,onClose:()=>O(!1),userId:n?.uid,onSuccess:ye=>p(ye)}),W&&d.jsx(bz,{isOpen:W,onClose:()=>!Re?.forceUpdate&&Te(!1),version:Re?.version,downloadUrl:Re?.downloadUrl,forceUpdate:Re?.forceUpdate}),["checking","uptodate"].includes(J)&&d.jsxs("div",{className:"fixed inset-0 z-[60] bg-dark-bg flex flex-col items-center justify-center text-white transition-opacity duration-300",children:[J==="checking"&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-brand-primary mb-6"}),d.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Checking for updates..."}),d.jsxs("p",{className:"text-dark-muted font-mono text-sm",children:["v",qy.version]})]}),J==="uptodate"&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"rounded-full bg-green-500/20 p-4 mb-6",children:d.jsx(aC,{size:48,className:"text-green-500"})}),d.jsx("h2",{className:"text-xl font-semibold mb-2 text-green-400",children:"You are up to date!"}),d.jsxs("p",{className:"text-dark-muted font-mono text-sm",children:["v",qy.version]})]})]})]})})};class xz extends de.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState({errorInfo:t})}render(){return this.state.hasError?d.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-8 flex flex-col items-center justify-center text-center",children:[d.jsx("h1",{className:"text-2xl font-bold text-red-500 mb-4",children:"Something went wrong"}),d.jsxs("div",{className:"bg-gray-800 p-4 rounded overflow-auto max-w-full text-left font-mono text-xs",children:[d.jsx("p",{className:"font-bold text-yellow-400 mb-2",children:this.state.error&&this.state.error.toString()}),d.jsx("pre",{className:"text-gray-400 whitespace-pre-wrap",children:this.state.errorInfo&&this.state.errorInfo.componentStack})]}),d.jsx("button",{className:"mt-6 px-4 py-2 bg-blue-600 rounded hover:bg-blue-700",onClick:()=>window.location.reload(),children:"Reload App"})]}):this.props.children}}function Ez(){const{currentUser:n,userProfile:e,loading:t}=Cr(),[r,a]=P.useState("login");return t?d.jsx("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center",children:d.jsx("div",{className:"text-dark-text text-xl",children:"Loading..."})}):n&&e?.isBanned?d.jsx("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-dark-sidebar p-8 rounded-xl max-w-md w-full text-center border border-admin",children:[d.jsx("div",{className:"text-6xl mb-4",children:""}),d.jsx("h1",{className:"text-2xl font-bold text-dark-text mb-2",children:"Account Banned"}),d.jsx("p",{className:"text-dark-muted mb-6",children:"Your account has been banned from this server. Please contact an administrator if you believe this is a mistake."}),d.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-hover transition-colors",children:"Refresh"})]})}):n?d.jsx(I8,{children:d.jsx(_z,{})}):d.jsxs(d.Fragment,{children:[r==="login"&&d.jsx(dO,{onSwitchToRegister:()=>a("register"),onSwitchToReset:()=>a("reset")}),r==="register"&&d.jsx(hO,{onSwitchToLogin:()=>a("login")}),r==="reset"&&d.jsx(fO,{onSwitchToLogin:()=>a("login")})]})}function wz(){return d.jsx(vM,{children:d.jsx(xz,{children:d.jsx(k8,{children:d.jsx(Ez,{})})})})}U3.createRoot(document.getElementById("root")).render(d.jsx(P.StrictMode,{children:d.jsx(wz,{})}));
