function lN(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const l=Object.getOwnPropertyDescriptor(r,a);l&&Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function dd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function cN(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){var a=!1;try{a=this instanceof r}catch{}return a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),n}var g0={exports:{}},Eu={};var f_;function uN(){if(f_)return Eu;f_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:t,type:r,key:c,ref:a!==void 0?a:null,props:l}}return Eu.Fragment=e,Eu.jsx=n,Eu.jsxs=n,Eu}var m_;function dN(){return m_||(m_=1,g0.exports=uN()),g0.exports}var u=dN(),v0={exports:{}},st={};var p_;function hN(){if(p_)return st;p_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),_=Symbol.iterator;function k(F){return F===null||typeof F!="object"?null:(F=_&&F[_]||F["@@iterator"],typeof F=="function"?F:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,T={};function H(F,W,ae){this.props=F,this.context=W,this.refs=T,this.updater=ae||R}H.prototype.isReactComponent={},H.prototype.setState=function(F,W){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,W,"setState")},H.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function q(){}q.prototype=H.prototype;function I(F,W,ae){this.props=F,this.context=W,this.refs=T,this.updater=ae||R}var z=I.prototype=new q;z.constructor=I,j(z,H.prototype),z.isPureReactComponent=!0;var B=Array.isArray;function $(){}var w={H:null,A:null,T:null,S:null},E=Object.prototype.hasOwnProperty;function A(F,W,ae){var ge=ae.ref;return{$$typeof:t,type:F,key:W,ref:ge!==void 0?ge:null,props:ae}}function D(F,W){return A(F.type,W,F.props)}function O(F){return typeof F=="object"&&F!==null&&F.$$typeof===t}function L(F){var W={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ae){return W[ae]})}var P=/\/+/g;function pe(F,W){return typeof F=="object"&&F!==null&&F.key!=null?L(""+F.key):W.toString(36)}function ce(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then($,$):(F.status="pending",F.then(function(W){F.status==="pending"&&(F.status="fulfilled",F.value=W)},function(W){F.status==="pending"&&(F.status="rejected",F.reason=W)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function Y(F,W,ae,ge,Re){var _e=typeof F;(_e==="undefined"||_e==="boolean")&&(F=null);var Ne=!1;if(F===null)Ne=!0;else switch(_e){case"bigint":case"string":case"number":Ne=!0;break;case"object":switch(F.$$typeof){case t:case e:Ne=!0;break;case y:return Ne=F._init,Y(Ne(F._payload),W,ae,ge,Re)}}if(Ne)return Re=Re(F),Ne=ge===""?"."+pe(F,0):ge,B(Re)?(ae="",Ne!=null&&(ae=Ne.replace(P,"$&/")+"/"),Y(Re,W,ae,"",function(he){return he})):Re!=null&&(O(Re)&&(Re=D(Re,ae+(Re.key==null||F&&F.key===Re.key?"":(""+Re.key).replace(P,"$&/")+"/")+Ne)),W.push(Re)),1;Ne=0;var Ke=ge===""?".":ge+":";if(B(F))for(var Ge=0;Ge<F.length;Ge++)ge=F[Ge],_e=Ke+pe(ge,Ge),Ne+=Y(ge,W,ae,_e,Re);else if(Ge=k(F),typeof Ge=="function")for(F=Ge.call(F),Ge=0;!(ge=F.next()).done;)ge=ge.value,_e=Ke+pe(ge,Ge++),Ne+=Y(ge,W,ae,_e,Re);else if(_e==="object"){if(typeof F.then=="function")return Y(ce(F),W,ae,ge,Re);throw W=String(F),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Ne}function Z(F,W,ae){if(F==null)return F;var ge=[],Re=0;return Y(F,ge,"","",function(_e){return W.call(ae,_e,Re++)}),ge}function J(F){if(F._status===-1){var W=F._result;W=W(),W.then(function(ae){(F._status===0||F._status===-1)&&(F._status=1,F._result=ae)},function(ae){(F._status===0||F._status===-1)&&(F._status=2,F._result=ae)}),F._status===-1&&(F._status=0,F._result=W)}if(F._status===1)return F._result.default;throw F._result}var Te=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},Ae={map:Z,forEach:function(F,W,ae){Z(F,function(){W.apply(this,arguments)},ae)},count:function(F){var W=0;return Z(F,function(){W++}),W},toArray:function(F){return Z(F,function(W){return W})||[]},only:function(F){if(!O(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return st.Activity=b,st.Children=Ae,st.Component=H,st.Fragment=n,st.Profiler=a,st.PureComponent=I,st.StrictMode=r,st.Suspense=m,st.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,st.__COMPILER_RUNTIME={__proto__:null,c:function(F){return w.H.useMemoCache(F)}},st.cache=function(F){return function(){return F.apply(null,arguments)}},st.cacheSignal=function(){return null},st.cloneElement=function(F,W,ae){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var ge=j({},F.props),Re=F.key;if(W!=null)for(_e in W.key!==void 0&&(Re=""+W.key),W)!E.call(W,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&W.ref===void 0||(ge[_e]=W[_e]);var _e=arguments.length-2;if(_e===1)ge.children=ae;else if(1<_e){for(var Ne=Array(_e),Ke=0;Ke<_e;Ke++)Ne[Ke]=arguments[Ke+2];ge.children=Ne}return A(F.type,Re,ge)},st.createContext=function(F){return F={$$typeof:c,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:l,_context:F},F},st.createElement=function(F,W,ae){var ge,Re={},_e=null;if(W!=null)for(ge in W.key!==void 0&&(_e=""+W.key),W)E.call(W,ge)&&ge!=="key"&&ge!=="__self"&&ge!=="__source"&&(Re[ge]=W[ge]);var Ne=arguments.length-2;if(Ne===1)Re.children=ae;else if(1<Ne){for(var Ke=Array(Ne),Ge=0;Ge<Ne;Ge++)Ke[Ge]=arguments[Ge+2];Re.children=Ke}if(F&&F.defaultProps)for(ge in Ne=F.defaultProps,Ne)Re[ge]===void 0&&(Re[ge]=Ne[ge]);return A(F,_e,Re)},st.createRef=function(){return{current:null}},st.forwardRef=function(F){return{$$typeof:h,render:F}},st.isValidElement=O,st.lazy=function(F){return{$$typeof:y,_payload:{_status:-1,_result:F},_init:J}},st.memo=function(F,W){return{$$typeof:g,type:F,compare:W===void 0?null:W}},st.startTransition=function(F){var W=w.T,ae={};w.T=ae;try{var ge=F(),Re=w.S;Re!==null&&Re(ae,ge),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&ge.then($,Te)}catch(_e){Te(_e)}finally{W!==null&&ae.types!==null&&(W.types=ae.types),w.T=W}},st.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},st.use=function(F){return w.H.use(F)},st.useActionState=function(F,W,ae){return w.H.useActionState(F,W,ae)},st.useCallback=function(F,W){return w.H.useCallback(F,W)},st.useContext=function(F){return w.H.useContext(F)},st.useDebugValue=function(){},st.useDeferredValue=function(F,W){return w.H.useDeferredValue(F,W)},st.useEffect=function(F,W){return w.H.useEffect(F,W)},st.useEffectEvent=function(F){return w.H.useEffectEvent(F)},st.useId=function(){return w.H.useId()},st.useImperativeHandle=function(F,W,ae){return w.H.useImperativeHandle(F,W,ae)},st.useInsertionEffect=function(F,W){return w.H.useInsertionEffect(F,W)},st.useLayoutEffect=function(F,W){return w.H.useLayoutEffect(F,W)},st.useMemo=function(F,W){return w.H.useMemo(F,W)},st.useOptimistic=function(F,W){return w.H.useOptimistic(F,W)},st.useReducer=function(F,W,ae){return w.H.useReducer(F,W,ae)},st.useRef=function(F){return w.H.useRef(F)},st.useState=function(F){return w.H.useState(F)},st.useSyncExternalStore=function(F,W,ae){return w.H.useSyncExternalStore(F,W,ae)},st.useTransition=function(){return w.H.useTransition()},st.version="19.2.3",st}var g_;function Da(){return g_||(g_=1,v0.exports=hN()),v0.exports}var N=Da();const me=dd(N);var y0={exports:{}},Cu={},b0={exports:{}},x0={};var v_;function fN(){return v_||(v_=1,(function(t){function e(Y,Z){var J=Y.length;Y.push(Z);e:for(;0<J;){var Te=J-1>>>1,Ae=Y[Te];if(0<a(Ae,Z))Y[Te]=Z,Y[J]=Ae,J=Te;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var Z=Y[0],J=Y.pop();if(J!==Z){Y[0]=J;e:for(var Te=0,Ae=Y.length,F=Ae>>>1;Te<F;){var W=2*(Te+1)-1,ae=Y[W],ge=W+1,Re=Y[ge];if(0>a(ae,J))ge<Ae&&0>a(Re,ae)?(Y[Te]=Re,Y[ge]=J,Te=ge):(Y[Te]=ae,Y[W]=J,Te=W);else if(ge<Ae&&0>a(Re,J))Y[Te]=Re,Y[ge]=J,Te=ge;else break e}}return Z}function a(Y,Z){var J=Y.sortIndex-Z.sortIndex;return J!==0?J:Y.id-Z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();t.unstable_now=function(){return c.now()-h}}var m=[],g=[],y=1,b=null,_=3,k=!1,R=!1,j=!1,T=!1,H=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function z(Y){for(var Z=n(g);Z!==null;){if(Z.callback===null)r(g);else if(Z.startTime<=Y)r(g),Z.sortIndex=Z.expirationTime,e(m,Z);else break;Z=n(g)}}function B(Y){if(j=!1,z(Y),!R)if(n(m)!==null)R=!0,$||($=!0,L());else{var Z=n(g);Z!==null&&ce(B,Z.startTime-Y)}}var $=!1,w=-1,E=5,A=-1;function D(){return T?!0:!(t.unstable_now()-A<E)}function O(){if(T=!1,$){var Y=t.unstable_now();A=Y;var Z=!0;try{e:{R=!1,j&&(j=!1,q(w),w=-1),k=!0;var J=_;try{t:{for(z(Y),b=n(m);b!==null&&!(b.expirationTime>Y&&D());){var Te=b.callback;if(typeof Te=="function"){b.callback=null,_=b.priorityLevel;var Ae=Te(b.expirationTime<=Y);if(Y=t.unstable_now(),typeof Ae=="function"){b.callback=Ae,z(Y),Z=!0;break t}b===n(m)&&r(m),z(Y)}else r(m);b=n(m)}if(b!==null)Z=!0;else{var F=n(g);F!==null&&ce(B,F.startTime-Y),Z=!1}}break e}finally{b=null,_=J,k=!1}Z=void 0}}finally{Z?L():$=!1}}}var L;if(typeof I=="function")L=function(){I(O)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,pe=P.port2;P.port1.onmessage=O,L=function(){pe.postMessage(null)}}else L=function(){H(O,0)};function ce(Y,Z){w=H(function(){Y(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_next=function(Y){switch(_){case 1:case 2:case 3:var Z=3;break;default:Z=_}var J=_;_=Z;try{return Y()}finally{_=J}},t.unstable_requestPaint=function(){T=!0},t.unstable_runWithPriority=function(Y,Z){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var J=_;_=Y;try{return Z()}finally{_=J}},t.unstable_scheduleCallback=function(Y,Z,J){var Te=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?Te+J:Te):J=Te,Y){case 1:var Ae=-1;break;case 2:Ae=250;break;case 5:Ae=1073741823;break;case 4:Ae=1e4;break;default:Ae=5e3}return Ae=J+Ae,Y={id:y++,callback:Z,priorityLevel:Y,startTime:J,expirationTime:Ae,sortIndex:-1},J>Te?(Y.sortIndex=J,e(g,Y),n(m)===null&&Y===n(g)&&(j?(q(w),w=-1):j=!0,ce(B,J-Te))):(Y.sortIndex=Ae,e(m,Y),R||k||(R=!0,$||($=!0,L()))),Y},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(Y){var Z=_;return function(){var J=_;_=Z;try{return Y.apply(this,arguments)}finally{_=J}}}})(x0)),x0}var y_;function mN(){return y_||(y_=1,b0.exports=fN()),b0.exports}var _0={exports:{}},Yn={};var b_;function pN(){if(b_)return Yn;b_=1;var t=Da();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,g,y){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:m,containerInfo:g,implementation:y}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Yn.createPortal=function(m,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(m,g,null,y)},Yn.flushSync=function(m){var g=c.T,y=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=g,r.p=y,r.d.f()}},Yn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(m,g))},Yn.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},Yn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var y=g.as,b=h(y,g.crossOrigin),_=typeof g.integrity=="string"?g.integrity:void 0,k=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?r.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:_,fetchPriority:k}):y==="script"&&r.d.X(m,{crossOrigin:b,integrity:_,fetchPriority:k,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Yn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=h(g.as,g.crossOrigin);r.d.M(m,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(m)},Yn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,b=h(y,g.crossOrigin);r.d.L(m,y,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Yn.preloadModule=function(m,g){if(typeof m=="string")if(g){var y=h(g.as,g.crossOrigin);r.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(m)},Yn.requestFormReset=function(m){r.d.r(m)},Yn.unstable_batchedUpdates=function(m,g){return m(g)},Yn.useFormState=function(m,g,y){return c.H.useFormState(m,g,y)},Yn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Yn.version="19.2.3",Yn}var x_;function oy(){if(x_)return _0.exports;x_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),_0.exports=pN(),_0.exports}var __;function gN(){if(__)return Cu;__=1;var t=mN(),e=Da(),n=oy();function r(s){var i="https://react.dev/errors/"+s;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var i=s,o=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(o=i.return),s=i.return;while(s)}return i.tag===3?o:null}function c(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function h(s){if(s.tag===31){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function m(s){if(l(s)!==s)throw Error(r(188))}function g(s){var i=s.alternate;if(!i){if(i=l(s),i===null)throw Error(r(188));return i!==s?null:s}for(var o=s,d=i;;){var p=o.return;if(p===null)break;var v=p.alternate;if(v===null){if(d=p.return,d!==null){o=d;continue}break}if(p.child===v.child){for(v=p.child;v;){if(v===o)return m(p),s;if(v===d)return m(p),i;v=v.sibling}throw Error(r(188))}if(o.return!==d.return)o=p,d=v;else{for(var S=!1,M=p.child;M;){if(M===o){S=!0,o=p,d=v;break}if(M===d){S=!0,d=p,o=v;break}M=M.sibling}if(!S){for(M=v.child;M;){if(M===o){S=!0,o=v,d=p;break}if(M===d){S=!0,d=v,o=p;break}M=M.sibling}if(!S)throw Error(r(189))}}if(o.alternate!==d)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?s:i}function y(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s;for(s=s.child;s!==null;){if(i=y(s),i!==null)return i;s=s.sibling}return null}var b=Object.assign,_=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),q=Symbol.for("react.consumer"),I=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function L(s){return s===null||typeof s!="object"?null:(s=O&&s[O]||s["@@iterator"],typeof s=="function"?s:null)}var P=Symbol.for("react.client.reference");function pe(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===P?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case j:return"Fragment";case H:return"Profiler";case T:return"StrictMode";case B:return"Suspense";case $:return"SuspenseList";case A:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case R:return"Portal";case I:return s.displayName||"Context";case q:return(s._context.displayName||"Context")+".Consumer";case z:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case w:return i=s.displayName||null,i!==null?i:pe(s.type)||"Memo";case E:i=s._payload,s=s._init;try{return pe(s(i))}catch{}}return null}var ce=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},Te=[],Ae=-1;function F(s){return{current:s}}function W(s){0>Ae||(s.current=Te[Ae],Te[Ae]=null,Ae--)}function ae(s,i){Ae++,Te[Ae]=s.current,s.current=i}var ge=F(null),Re=F(null),_e=F(null),Ne=F(null);function Ke(s,i){switch(ae(_e,i),ae(Re,s),ae(ge,null),i.nodeType){case 9:case 11:s=(s=i.documentElement)&&(s=s.namespaceURI)?Ox(s):0;break;default:if(s=i.tagName,i=i.namespaceURI)i=Ox(i),s=Lx(i,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}W(ge),ae(ge,s)}function Ge(){W(ge),W(Re),W(_e)}function he(s){s.memoizedState!==null&&ae(Ne,s);var i=ge.current,o=Lx(i,s.type);i!==o&&(ae(Re,s),ae(ge,o))}function Ce(s){Re.current===s&&(W(ge),W(Re)),Ne.current===s&&(W(Ne),xu._currentValue=J)}var Ve,oe;function xe(s){if(Ve===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Ve=i&&i[1]||"",oe=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ve+s+oe}var ze=!1;function Se(s,i){if(!s||ze)return"";ze=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(i){var be=function(){throw Error()};if(Object.defineProperty(be.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(be,[])}catch(le){var se=le}Reflect.construct(s,[],be)}else{try{be.call()}catch(le){se=le}s.call(be.prototype)}}else{try{throw Error()}catch(le){se=le}(be=s())&&typeof be.catch=="function"&&be.catch(function(){})}}catch(le){if(le&&se&&typeof le.stack=="string")return[le.stack,se.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=d.DetermineComponentFrameRoot(),S=v[0],M=v[1];if(S&&M){var G=S.split(`
`),re=M.split(`
`);for(p=d=0;d<G.length&&!G[d].includes("DetermineComponentFrameRoot");)d++;for(;p<re.length&&!re[p].includes("DetermineComponentFrameRoot");)p++;if(d===G.length||p===re.length)for(d=G.length-1,p=re.length-1;1<=d&&0<=p&&G[d]!==re[p];)p--;for(;1<=d&&0<=p;d--,p--)if(G[d]!==re[p]){if(d!==1||p!==1)do if(d--,p--,0>p||G[d]!==re[p]){var fe=`
`+G[d].replace(" at new "," at ");return s.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",s.displayName)),fe}while(1<=d&&0<=p);break}}}finally{ze=!1,Error.prepareStackTrace=o}return(o=s?s.displayName||s.name:"")?xe(o):""}function ue(s,i){switch(s.tag){case 26:case 27:case 5:return xe(s.type);case 16:return xe("Lazy");case 13:return s.child!==i&&i!==null?xe("Suspense Fallback"):xe("Suspense");case 19:return xe("SuspenseList");case 0:case 15:return Se(s.type,!1);case 11:return Se(s.type.render,!1);case 1:return Se(s.type,!0);case 31:return xe("Activity");default:return""}}function U(s){try{var i="",o=null;do i+=ue(s,o),o=s,s=s.return;while(s);return i}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var K=Object.prototype.hasOwnProperty,ee=t.unstable_scheduleCallback,ke=t.unstable_cancelCallback,Oe=t.unstable_shouldYield,Fe=t.unstable_requestPaint,Le=t.unstable_now,Et=t.unstable_getCurrentPriorityLevel,Tt=t.unstable_ImmediatePriority,Qt=t.unstable_UserBlockingPriority,Ee=t.unstable_NormalPriority,Pe=t.unstable_LowPriority,nt=t.unstable_IdlePriority,ht=t.log,Zt=t.unstable_setDisableYieldValue,Ht=null,mt=null;function Tn(s){if(typeof ht=="function"&&Zt(s),mt&&typeof mt.setStrictMode=="function")try{mt.setStrictMode(Ht,s)}catch{}}var Xt=Math.clz32?Math.clz32:Id,jd=Math.log,qo=Math.LN2;function Id(s){return s>>>=0,s===0?32:31-(jd(s)/qo|0)|0}var ds=256,Va=262144,dn=4194304;function hs(s){var i=s&42;if(i!==0)return i;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function fs(s,i,o){var d=s.pendingLanes;if(d===0)return 0;var p=0,v=s.suspendedLanes,S=s.pingedLanes;s=s.warmLanes;var M=d&134217727;return M!==0?(d=M&~v,d!==0?p=hs(d):(S&=M,S!==0?p=hs(S):o||(o=M&~s,o!==0&&(p=hs(o))))):(M=d&~v,M!==0?p=hs(M):S!==0?p=hs(S):o||(o=d&~s,o!==0&&(p=hs(o)))),p===0?0:i!==0&&i!==p&&(i&v)===0&&(v=p&-p,o=i&-i,v>=o||v===32&&(o&4194048)!==0)?i:p}function Yr(s,i){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&i)===0}function xp(s,i){switch(s){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dd(){var s=dn;return dn<<=1,(dn&62914560)===0&&(dn=4194304),s}function ms(s){for(var i=[],o=0;31>o;o++)i.push(s);return i}function Ua(s,i){s.pendingLanes|=i,i!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function _p(s,i,o,d,p,v){var S=s.pendingLanes;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=o,s.entangledLanes&=o,s.errorRecoveryDisabledLanes&=o,s.shellSuspendCounter=0;var M=s.entanglements,G=s.expirationTimes,re=s.hiddenUpdates;for(o=S&~o;0<o;){var fe=31-Xt(o),be=1<<fe;M[fe]=0,G[fe]=-1;var se=re[fe];if(se!==null)for(re[fe]=null,fe=0;fe<se.length;fe++){var le=se[fe];le!==null&&(le.lane&=-536870913)}o&=~be}d!==0&&za(s,d,0),v!==0&&p===0&&s.tag!==0&&(s.suspendedLanes|=v&~(S&~i))}function za(s,i,o){s.pendingLanes|=i,s.suspendedLanes&=~i;var d=31-Xt(i);s.entangledLanes|=i,s.entanglements[d]=s.entanglements[d]|1073741824|o&261930}function Cc(s,i){var o=s.entangledLanes|=i;for(s=s.entanglements;o;){var d=31-Xt(o),p=1<<d;p&i|s[d]&i&&(s[d]|=i),o&=~p}}function Tc(s,i){var o=i&-i;return o=(o&42)!==0?1:Ba(o),(o&(s.suspendedLanes|i))!==0?0:o}function Ba(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ws(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Md(){var s=Z.p;return s!==0?s:(s=window.event,s===void 0?32:a_(s.type))}function Kr(s,i){var o=Z.p;try{return Z.p=s,i()}finally{Z.p=o}}var Qr=Math.random().toString(36).slice(2),hn="__reactFiber$"+Qr,jn="__reactProps$"+Qr,ps="__reactContainer$"+Qr,Go="__reactEvents$"+Qr,wp="__reactListeners$"+Qr,Pd="__reactHandles$"+Qr,Od="__reactResources$"+Qr,gs="__reactMarker$"+Qr;function Yo(s){delete s[hn],delete s[jn],delete s[Go],delete s[wp],delete s[Pd]}function vs(s){var i=s[hn];if(i)return i;for(var o=s.parentNode;o;){if(i=o[ps]||o[hn]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(s=$x(s);s!==null;){if(o=s[hn])return o;s=$x(s)}return i}s=o,o=s.parentNode}return null}function Ir(s){if(s=s[hn]||s[ps]){var i=s.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return s}return null}function yr(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s.stateNode;throw Error(r(33))}function ys(s){var i=s[Od];return i||(i=s[Od]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function fn(s){s[gs]=!0}var kc=new Set,Nc={};function bs(s,i){xs(s,i),xs(s+"Capture",i)}function xs(s,i){for(Nc[s]=i,s=0;s<i.length;s++)kc.add(i[s])}var Ac=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Rc={},jc={};function Ld(s){return K.call(jc,s)?!0:K.call(Rc,s)?!1:Ac.test(s)?jc[s]=!0:(Rc[s]=!0,!1)}function Ko(s,i,o){if(Ld(i))if(o===null)s.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":s.removeAttribute(i);return;case"boolean":var d=i.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){s.removeAttribute(i);return}}s.setAttribute(i,""+o)}}function br(s,i,o){if(o===null)s.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(i);return}s.setAttribute(i,""+o)}}function mn(s,i,o,d){if(d===null)s.removeAttribute(o);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttributeNS(i,o,""+d)}}function In(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ii(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ic(s,i,o){var d=Object.getOwnPropertyDescriptor(s.constructor.prototype,i);if(!s.hasOwnProperty(i)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var p=d.get,v=d.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return p.call(this)},set:function(S){o=""+S,v.call(this,S)}}),Object.defineProperty(s,i,{enumerable:d.enumerable}),{getValue:function(){return o},setValue:function(S){o=""+S},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function Mt(s){if(!s._valueTracker){var i=Ii(s)?"checked":"value";s._valueTracker=Ic(s,i,""+s[i])}}function Fa(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var o=i.getValue(),d="";return s&&(d=Ii(s)?s.checked?"true":"false":s.value),s=d,s!==o?(i.setValue(s),!0):!1}function _s(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Ha=/[\n"\\]/g;function ar(s){return s.replace(Ha,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Qo(s,i,o,d,p,v,S,M){s.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?s.type=S:s.removeAttribute("type"),i!=null?S==="number"?(i===0&&s.value===""||s.value!=i)&&(s.value=""+In(i)):s.value!==""+In(i)&&(s.value=""+In(i)):S!=="submit"&&S!=="reset"||s.removeAttribute("value"),i!=null?Dc(s,S,In(i)):o!=null?Dc(s,S,In(o)):d!=null&&s.removeAttribute("value"),p==null&&v!=null&&(s.defaultChecked=!!v),p!=null&&(s.checked=p&&typeof p!="function"&&typeof p!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?s.name=""+In(M):s.removeAttribute("name")}function Vd(s,i,o,d,p,v,S,M){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.type=v),i!=null||o!=null){if(!(v!=="submit"&&v!=="reset"||i!=null)){Mt(s);return}o=o!=null?""+In(o):"",i=i!=null?""+In(i):o,M||i===s.value||(s.value=i),s.defaultValue=i}d=d??p,d=typeof d!="function"&&typeof d!="symbol"&&!!d,s.checked=M?s.checked:!!d,s.defaultChecked=!!d,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(s.name=S),Mt(s)}function Dc(s,i,o){i==="number"&&_s(s.ownerDocument)===s||s.defaultValue===""+o||(s.defaultValue=""+o)}function Di(s,i,o,d){if(s=s.options,i){i={};for(var p=0;p<o.length;p++)i["$"+o[p]]=!0;for(o=0;o<s.length;o++)p=i.hasOwnProperty("$"+s[o].value),s[o].selected!==p&&(s[o].selected=p),p&&d&&(s[o].defaultSelected=!0)}else{for(o=""+In(o),i=null,p=0;p<s.length;p++){if(s[p].value===o){s[p].selected=!0,d&&(s[p].defaultSelected=!0);return}i!==null||s[p].disabled||(i=s[p])}i!==null&&(i.selected=!0)}}function Ud(s,i,o){if(i!=null&&(i=""+In(i),i!==s.value&&(s.value=i),o==null)){s.defaultValue!==i&&(s.defaultValue=i);return}s.defaultValue=o!=null?""+In(o):""}function Mi(s,i,o,d){if(i==null){if(d!=null){if(o!=null)throw Error(r(92));if(ce(d)){if(1<d.length)throw Error(r(93));d=d[0]}o=d}o==null&&(o=""),i=o}o=In(i),s.defaultValue=o,d=s.textContent,d===o&&d!==""&&d!==null&&(s.value=d),Mt(s)}function or(s,i){if(i){var o=s.firstChild;if(o&&o===s.lastChild&&o.nodeType===3){o.nodeValue=i;return}}s.textContent=i}var zd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Mc(s,i,o){var d=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?d?s.setProperty(i,""):i==="float"?s.cssFloat="":s[i]="":d?s.setProperty(i,o):typeof o!="number"||o===0||zd.has(i)?i==="float"?s.cssFloat=o:s[i]=(""+o).trim():s[i]=o+"px"}function Pc(s,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(s=s.style,o!=null){for(var d in o)!o.hasOwnProperty(d)||i!=null&&i.hasOwnProperty(d)||(d.indexOf("--")===0?s.setProperty(d,""):d==="float"?s.cssFloat="":s[d]="");for(var p in i)d=i[p],i.hasOwnProperty(p)&&o[p]!==d&&Mc(s,p,d)}else for(var v in i)i.hasOwnProperty(v)&&Mc(s,v,i[v])}function Xo(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wo(s){return Pi.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Xr(){}var Oc=null;function Dr(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Oi=null,ws=null;function $a(s){var i=Ir(s);if(i&&(s=i.stateNode)){var o=s[jn]||null;e:switch(s=i.stateNode,i.type){case"input":if(Qo(s,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=s;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+ar(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var d=o[i];if(d!==s&&d.form===s.form){var p=d[jn]||null;if(!p)throw Error(r(90));Qo(d,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(i=0;i<o.length;i++)d=o[i],d.form===s.form&&Fa(d)}break e;case"textarea":Ud(s,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Di(s,!!o.multiple,i,!1)}}}var Jo=!1;function Li(s,i,o){if(Jo)return s(i,o);Jo=!0;try{var d=s(i);return d}finally{if(Jo=!1,(Oi!==null||ws!==null)&&(Mh(),Oi&&(i=Oi,s=ws,ws=Oi=null,$a(i),s)))for(i=0;i<s.length;i++)$a(s[i])}}function Wr(s,i){var o=s.stateNode;if(o===null)return null;var d=o[jn]||null;if(d===null)return null;o=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break e;default:s=!1}if(s)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var Mr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qa=!1;if(Mr)try{var Lt={};Object.defineProperty(Lt,"passive",{get:function(){qa=!0}}),window.addEventListener("test",Lt,Lt),window.removeEventListener("test",Lt,Lt)}catch{qa=!1}var Ss=null,Lc=null,Ga=null;function Vc(){if(Ga)return Ga;var s,i=Lc,o=i.length,d,p="value"in Ss?Ss.value:Ss.textContent,v=p.length;for(s=0;s<o&&i[s]===p[s];s++);var S=o-s;for(d=1;d<=S&&i[o-d]===p[v-d];d++);return Ga=p.slice(s,1<d?1-d:void 0)}function Ya(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function Js(){return!0}function Jr(){return!1}function Ln(s){function i(o,d,p,v,S){this._reactName=o,this._targetInst=p,this.type=d,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var M in s)s.hasOwnProperty(M)&&(o=s[M],this[M]=o?o(v):v[M]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Js:Jr,this.isPropagationStopped=Jr,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Js)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Js)},persist:function(){},isPersistent:Js}),i}var Zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Es=Ln(Zs),Vi=b({},Zs,{view:0,detail:0}),Uc=Ln(Vi),Ui,Zo,Cs,el=b({},Vi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zi,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Cs&&(Cs&&s.type==="mousemove"?(Ui=s.screenX-Cs.screenX,Zo=s.screenY-Cs.screenY):Zo=Ui=0,Cs=s),Ui)},movementY:function(s){return"movementY"in s?s.movementY:Zo}}),zc=Ln(el),Ka=b({},el,{dataTransfer:0}),Fd=Ln(Ka),Hd=b({},Vi,{relatedTarget:0}),Qa=Ln(Hd),Bc=b({},Zs,{animationName:0,elapsedTime:0,pseudoElement:0}),$d=Ln(Bc),tl=b({},Zs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),qd=Ln(tl),Gd=b({},Zs,{data:0}),Ts=Ln(Gd),Yd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xd(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=Qd[s])?!!i[s]:!1}function zi(){return Xd}var er=b({},Vi,{key:function(s){if(s.key){var i=Yd[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=Ya(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Kd[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zi,charCode:function(s){return s.type==="keypress"?Ya(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ya(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Wd=Ln(er),Jd=b({},el,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ei=Ln(Jd),f=b({},Vi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zi}),x=Ln(f),C=b({},Zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),V=Ln(C),te=b({},el,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ie=Ln(te),Ie=b({},Zs,{newState:0,oldState:0}),ot=Ln(Ie),sn=[9,13,27,32],Rt=Mr&&"CompositionEvent"in window,Wt=null;Mr&&"documentMode"in document&&(Wt=document.documentMode);var Pr=Mr&&"TextEvent"in window&&!Wt,ks=Mr&&(!Rt||Wt&&8<Wt&&11>=Wt),Zr=" ",es=!1;function Xa(s,i){switch(s){case"keyup":return sn.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nl(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var rl=!1;function Ik(s,i){switch(s){case"compositionend":return nl(i);case"keypress":return i.which!==32?null:(es=!0,Zr);case"textInput":return s=i.data,s===Zr&&es?null:s;default:return null}}function Dk(s,i){if(rl)return s==="compositionend"||!Rt&&Xa(s,i)?(s=Vc(),Ga=Lc=Ss=null,rl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return ks&&i.locale!=="ko"?null:i.data;default:return null}}var Mk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Y1(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!Mk[s.type]:i==="textarea"}function K1(s,i,o,d){Oi?ws?ws.push(d):ws=[d]:Oi=d,i=Bh(i,"onChange"),0<i.length&&(o=new Es("onChange","change",null,o,d),s.push({event:o,listeners:i}))}var Fc=null,Hc=null;function Pk(s){Rx(s,0)}function Zd(s){var i=yr(s);if(Fa(i))return s}function Q1(s,i){if(s==="change")return i}var X1=!1;if(Mr){var Sp;if(Mr){var Ep="oninput"in document;if(!Ep){var W1=document.createElement("div");W1.setAttribute("oninput","return;"),Ep=typeof W1.oninput=="function"}Sp=Ep}else Sp=!1;X1=Sp&&(!document.documentMode||9<document.documentMode)}function J1(){Fc&&(Fc.detachEvent("onpropertychange",Z1),Hc=Fc=null)}function Z1(s){if(s.propertyName==="value"&&Zd(Hc)){var i=[];K1(i,Hc,s,Dr(s)),Li(Pk,i)}}function Ok(s,i,o){s==="focusin"?(J1(),Fc=i,Hc=o,Fc.attachEvent("onpropertychange",Z1)):s==="focusout"&&J1()}function Lk(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Zd(Hc)}function Vk(s,i){if(s==="click")return Zd(i)}function Uk(s,i){if(s==="input"||s==="change")return Zd(i)}function zk(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var xr=typeof Object.is=="function"?Object.is:zk;function $c(s,i){if(xr(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var o=Object.keys(s),d=Object.keys(i);if(o.length!==d.length)return!1;for(d=0;d<o.length;d++){var p=o[d];if(!K.call(i,p)||!xr(s[p],i[p]))return!1}return!0}function eb(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function tb(s,i){var o=eb(s);s=0;for(var d;o;){if(o.nodeType===3){if(d=s+o.textContent.length,s<=i&&d>=i)return{node:o,offset:i-s};s=d}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=eb(o)}}function nb(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?nb(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function rb(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var i=_s(s.document);i instanceof s.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)s=i.contentWindow;else break;i=_s(s.document)}return i}function Cp(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}var Bk=Mr&&"documentMode"in document&&11>=document.documentMode,sl=null,Tp=null,qc=null,kp=!1;function sb(s,i,o){var d=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;kp||sl==null||sl!==_s(d)||(d=sl,"selectionStart"in d&&Cp(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),qc&&$c(qc,d)||(qc=d,d=Bh(Tp,"onSelect"),0<d.length&&(i=new Es("onSelect","select",null,i,o),s.push({event:i,listeners:d}),i.target=sl)))}function Wa(s,i){var o={};return o[s.toLowerCase()]=i.toLowerCase(),o["Webkit"+s]="webkit"+i,o["Moz"+s]="moz"+i,o}var il={animationend:Wa("Animation","AnimationEnd"),animationiteration:Wa("Animation","AnimationIteration"),animationstart:Wa("Animation","AnimationStart"),transitionrun:Wa("Transition","TransitionRun"),transitionstart:Wa("Transition","TransitionStart"),transitioncancel:Wa("Transition","TransitionCancel"),transitionend:Wa("Transition","TransitionEnd")},Np={},ib={};Mr&&(ib=document.createElement("div").style,"AnimationEvent"in window||(delete il.animationend.animation,delete il.animationiteration.animation,delete il.animationstart.animation),"TransitionEvent"in window||delete il.transitionend.transition);function Ja(s){if(Np[s])return Np[s];if(!il[s])return s;var i=il[s],o;for(o in i)if(i.hasOwnProperty(o)&&o in ib)return Np[s]=i[o];return s}var ab=Ja("animationend"),ob=Ja("animationiteration"),lb=Ja("animationstart"),Fk=Ja("transitionrun"),Hk=Ja("transitionstart"),$k=Ja("transitioncancel"),cb=Ja("transitionend"),ub=new Map,Ap="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ap.push("scrollEnd");function ts(s,i){ub.set(s,i),bs(i,[s])}var eh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Or=[],al=0,Rp=0;function th(){for(var s=al,i=Rp=al=0;i<s;){var o=Or[i];Or[i++]=null;var d=Or[i];Or[i++]=null;var p=Or[i];Or[i++]=null;var v=Or[i];if(Or[i++]=null,d!==null&&p!==null){var S=d.pending;S===null?p.next=p:(p.next=S.next,S.next=p),d.pending=p}v!==0&&db(o,p,v)}}function nh(s,i,o,d){Or[al++]=s,Or[al++]=i,Or[al++]=o,Or[al++]=d,Rp|=d,s.lanes|=d,s=s.alternate,s!==null&&(s.lanes|=d)}function jp(s,i,o,d){return nh(s,i,o,d),rh(s)}function Za(s,i){return nh(s,null,null,i),rh(s)}function db(s,i,o){s.lanes|=o;var d=s.alternate;d!==null&&(d.lanes|=o);for(var p=!1,v=s.return;v!==null;)v.childLanes|=o,d=v.alternate,d!==null&&(d.childLanes|=o),v.tag===22&&(s=v.stateNode,s===null||s._visibility&1||(p=!0)),s=v,v=v.return;return s.tag===3?(v=s.stateNode,p&&i!==null&&(p=31-Xt(o),s=v.hiddenUpdates,d=s[p],d===null?s[p]=[i]:d.push(i),i.lane=o|536870912),v):null}function rh(s){if(50<fu)throw fu=0,zg=null,Error(r(185));for(var i=s.return;i!==null;)s=i,i=s.return;return s.tag===3?s.stateNode:null}var ol={};function qk(s,i,o,d){this.tag=s,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _r(s,i,o,d){return new qk(s,i,o,d)}function Ip(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ti(s,i){var o=s.alternate;return o===null?(o=_r(s.tag,i,s.key,s.mode),o.elementType=s.elementType,o.type=s.type,o.stateNode=s.stateNode,o.alternate=s,s.alternate=o):(o.pendingProps=i,o.type=s.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=s.flags&65011712,o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,i=s.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=s.sibling,o.index=s.index,o.ref=s.ref,o.refCleanup=s.refCleanup,o}function hb(s,i){s.flags&=65011714;var o=s.alternate;return o===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,i=o.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s}function sh(s,i,o,d,p,v){var S=0;if(d=s,typeof s=="function")Ip(s)&&(S=1);else if(typeof s=="string")S=X5(s,o,ge.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case A:return s=_r(31,o,i,p),s.elementType=A,s.lanes=v,s;case j:return eo(o.children,p,v,i);case T:S=8,p|=24;break;case H:return s=_r(12,o,i,p|2),s.elementType=H,s.lanes=v,s;case B:return s=_r(13,o,i,p),s.elementType=B,s.lanes=v,s;case $:return s=_r(19,o,i,p),s.elementType=$,s.lanes=v,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case I:S=10;break e;case q:S=9;break e;case z:S=11;break e;case w:S=14;break e;case E:S=16,d=null;break e}S=29,o=Error(r(130,s===null?"null":typeof s,"")),d=null}return i=_r(S,o,i,p),i.elementType=s,i.type=d,i.lanes=v,i}function eo(s,i,o,d){return s=_r(7,s,d,i),s.lanes=o,s}function Dp(s,i,o){return s=_r(6,s,null,i),s.lanes=o,s}function fb(s){var i=_r(18,null,null,0);return i.stateNode=s,i}function Mp(s,i,o){return i=_r(4,s.children!==null?s.children:[],s.key,i),i.lanes=o,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}var mb=new WeakMap;function Lr(s,i){if(typeof s=="object"&&s!==null){var o=mb.get(s);return o!==void 0?o:(i={value:s,source:i,stack:U(i)},mb.set(s,i),i)}return{value:s,source:i,stack:U(i)}}var ll=[],cl=0,ih=null,Gc=0,Vr=[],Ur=0,Bi=null,Ns=1,As="";function ni(s,i){ll[cl++]=Gc,ll[cl++]=ih,ih=s,Gc=i}function pb(s,i,o){Vr[Ur++]=Ns,Vr[Ur++]=As,Vr[Ur++]=Bi,Bi=s;var d=Ns;s=As;var p=32-Xt(d)-1;d&=~(1<<p),o+=1;var v=32-Xt(i)+p;if(30<v){var S=p-p%5;v=(d&(1<<S)-1).toString(32),d>>=S,p-=S,Ns=1<<32-Xt(i)+p|o<<p|d,As=v+s}else Ns=1<<v|o<<p|d,As=s}function Pp(s){s.return!==null&&(ni(s,1),pb(s,1,0))}function Op(s){for(;s===ih;)ih=ll[--cl],ll[cl]=null,Gc=ll[--cl],ll[cl]=null;for(;s===Bi;)Bi=Vr[--Ur],Vr[Ur]=null,As=Vr[--Ur],Vr[Ur]=null,Ns=Vr[--Ur],Vr[Ur]=null}function gb(s,i){Vr[Ur++]=Ns,Vr[Ur++]=As,Vr[Ur++]=Bi,Ns=i.id,As=i.overflow,Bi=s}var Vn=null,qt=null,St=!1,Fi=null,zr=!1,Lp=Error(r(519));function Hi(s){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Yc(Lr(i,s)),Lp}function vb(s){var i=s.stateNode,o=s.type,d=s.memoizedProps;switch(i[hn]=s,i[jn]=d,o){case"dialog":gt("cancel",i),gt("close",i);break;case"iframe":case"object":case"embed":gt("load",i);break;case"video":case"audio":for(o=0;o<pu.length;o++)gt(pu[o],i);break;case"source":gt("error",i);break;case"img":case"image":case"link":gt("error",i),gt("load",i);break;case"details":gt("toggle",i);break;case"input":gt("invalid",i),Vd(i,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":gt("invalid",i);break;case"textarea":gt("invalid",i),Mi(i,d.value,d.defaultValue,d.children)}o=d.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||d.suppressHydrationWarning===!0||Mx(i.textContent,o)?(d.popover!=null&&(gt("beforetoggle",i),gt("toggle",i)),d.onScroll!=null&&gt("scroll",i),d.onScrollEnd!=null&&gt("scrollend",i),d.onClick!=null&&(i.onclick=Xr),i=!0):i=!1,i||Hi(s,!0)}function yb(s){for(Vn=s.return;Vn;)switch(Vn.tag){case 5:case 31:case 13:zr=!1;return;case 27:case 3:zr=!0;return;default:Vn=Vn.return}}function ul(s){if(s!==Vn)return!1;if(!St)return yb(s),St=!0,!1;var i=s.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=s.type,o=!(o!=="form"&&o!=="button")||t0(s.type,s.memoizedProps)),o=!o),o&&qt&&Hi(s),yb(s),i===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));qt=Hx(s)}else if(i===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));qt=Hx(s)}else i===27?(i=qt,ra(s.type)?(s=a0,a0=null,qt=s):qt=i):qt=Vn?Fr(s.stateNode.nextSibling):null;return!0}function to(){qt=Vn=null,St=!1}function Vp(){var s=Fi;return s!==null&&(dr===null?dr=s:dr.push.apply(dr,s),Fi=null),s}function Yc(s){Fi===null?Fi=[s]:Fi.push(s)}var Up=F(null),no=null,ri=null;function $i(s,i,o){ae(Up,i._currentValue),i._currentValue=o}function si(s){s._currentValue=Up.current,W(Up)}function zp(s,i,o){for(;s!==null;){var d=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),s===o)break;s=s.return}}function Bp(s,i,o,d){var p=s.child;for(p!==null&&(p.return=s);p!==null;){var v=p.dependencies;if(v!==null){var S=p.child;v=v.firstContext;e:for(;v!==null;){var M=v;v=p;for(var G=0;G<i.length;G++)if(M.context===i[G]){v.lanes|=o,M=v.alternate,M!==null&&(M.lanes|=o),zp(v.return,o,s),d||(S=null);break e}v=M.next}}else if(p.tag===18){if(S=p.return,S===null)throw Error(r(341));S.lanes|=o,v=S.alternate,v!==null&&(v.lanes|=o),zp(S,o,s),S=null}else S=p.child;if(S!==null)S.return=p;else for(S=p;S!==null;){if(S===s){S=null;break}if(p=S.sibling,p!==null){p.return=S.return,S=p;break}S=S.return}p=S}}function dl(s,i,o,d){s=null;for(var p=i,v=!1;p!==null;){if(!v){if((p.flags&524288)!==0)v=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var S=p.alternate;if(S===null)throw Error(r(387));if(S=S.memoizedProps,S!==null){var M=p.type;xr(p.pendingProps.value,S.value)||(s!==null?s.push(M):s=[M])}}else if(p===Ne.current){if(S=p.alternate,S===null)throw Error(r(387));S.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(s!==null?s.push(xu):s=[xu])}p=p.return}s!==null&&Bp(i,s,o,d),i.flags|=262144}function ah(s){for(s=s.firstContext;s!==null;){if(!xr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ro(s){no=s,ri=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Un(s){return bb(no,s)}function oh(s,i){return no===null&&ro(s),bb(s,i)}function bb(s,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},ri===null){if(s===null)throw Error(r(308));ri=i,s.dependencies={lanes:0,firstContext:i},s.flags|=524288}else ri=ri.next=i;return o}var Gk=typeof AbortController<"u"?AbortController:function(){var s=[],i=this.signal={aborted:!1,addEventListener:function(o,d){s.push(d)}};this.abort=function(){i.aborted=!0,s.forEach(function(o){return o()})}},Yk=t.unstable_scheduleCallback,Kk=t.unstable_NormalPriority,pn={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fp(){return{controller:new Gk,data:new Map,refCount:0}}function Kc(s){s.refCount--,s.refCount===0&&Yk(Kk,function(){s.controller.abort()})}var Qc=null,Hp=0,hl=0,fl=null;function Qk(s,i){if(Qc===null){var o=Qc=[];Hp=0,hl=Gg(),fl={status:"pending",value:void 0,then:function(d){o.push(d)}}}return Hp++,i.then(xb,xb),i}function xb(){if(--Hp===0&&Qc!==null){fl!==null&&(fl.status="fulfilled");var s=Qc;Qc=null,hl=0,fl=null;for(var i=0;i<s.length;i++)(0,s[i])()}}function Xk(s,i){var o=[],d={status:"pending",value:null,reason:null,then:function(p){o.push(p)}};return s.then(function(){d.status="fulfilled",d.value=i;for(var p=0;p<o.length;p++)(0,o[p])(i)},function(p){for(d.status="rejected",d.reason=p,p=0;p<o.length;p++)(0,o[p])(void 0)}),d}var _b=Y.S;Y.S=function(s,i){sx=Le(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Qk(s,i),_b!==null&&_b(s,i)};var so=F(null);function $p(){var s=so.current;return s!==null?s:Bt.pooledCache}function lh(s,i){i===null?ae(so,so.current):ae(so,i.pool)}function wb(){var s=$p();return s===null?null:{parent:pn._currentValue,pool:s}}var ml=Error(r(460)),qp=Error(r(474)),ch=Error(r(542)),uh={then:function(){}};function Sb(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Eb(s,i,o){switch(o=s[o],o===void 0?s.push(i):o!==i&&(i.then(Xr,Xr),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,Tb(s),s;default:if(typeof i.status=="string")i.then(Xr,Xr);else{if(s=Bt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=i,s.status="pending",s.then(function(d){if(i.status==="pending"){var p=i;p.status="fulfilled",p.value=d}},function(d){if(i.status==="pending"){var p=i;p.status="rejected",p.reason=d}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,Tb(s),s}throw ao=i,ml}}function io(s){try{var i=s._init;return i(s._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(ao=o,ml):o}}var ao=null;function Cb(){if(ao===null)throw Error(r(459));var s=ao;return ao=null,s}function Tb(s){if(s===ml||s===ch)throw Error(r(483))}var pl=null,Xc=0;function dh(s){var i=Xc;return Xc+=1,pl===null&&(pl=[]),Eb(pl,s,i)}function Wc(s,i){i=i.props.ref,s.ref=i!==void 0?i:null}function hh(s,i){throw i.$$typeof===_?Error(r(525)):(s=Object.prototype.toString.call(i),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s)))}function kb(s){function i(X,Q){if(s){var ne=X.deletions;ne===null?(X.deletions=[Q],X.flags|=16):ne.push(Q)}}function o(X,Q){if(!s)return null;for(;Q!==null;)i(X,Q),Q=Q.sibling;return null}function d(X){for(var Q=new Map;X!==null;)X.key!==null?Q.set(X.key,X):Q.set(X.index,X),X=X.sibling;return Q}function p(X,Q){return X=ti(X,Q),X.index=0,X.sibling=null,X}function v(X,Q,ne){return X.index=ne,s?(ne=X.alternate,ne!==null?(ne=ne.index,ne<Q?(X.flags|=67108866,Q):ne):(X.flags|=67108866,Q)):(X.flags|=1048576,Q)}function S(X){return s&&X.alternate===null&&(X.flags|=67108866),X}function M(X,Q,ne,ve){return Q===null||Q.tag!==6?(Q=Dp(ne,X.mode,ve),Q.return=X,Q):(Q=p(Q,ne),Q.return=X,Q)}function G(X,Q,ne,ve){var Xe=ne.type;return Xe===j?fe(X,Q,ne.props.children,ve,ne.key):Q!==null&&(Q.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===E&&io(Xe)===Q.type)?(Q=p(Q,ne.props),Wc(Q,ne),Q.return=X,Q):(Q=sh(ne.type,ne.key,ne.props,null,X.mode,ve),Wc(Q,ne),Q.return=X,Q)}function re(X,Q,ne,ve){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==ne.containerInfo||Q.stateNode.implementation!==ne.implementation?(Q=Mp(ne,X.mode,ve),Q.return=X,Q):(Q=p(Q,ne.children||[]),Q.return=X,Q)}function fe(X,Q,ne,ve,Xe){return Q===null||Q.tag!==7?(Q=eo(ne,X.mode,ve,Xe),Q.return=X,Q):(Q=p(Q,ne),Q.return=X,Q)}function be(X,Q,ne){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=Dp(""+Q,X.mode,ne),Q.return=X,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case k:return ne=sh(Q.type,Q.key,Q.props,null,X.mode,ne),Wc(ne,Q),ne.return=X,ne;case R:return Q=Mp(Q,X.mode,ne),Q.return=X,Q;case E:return Q=io(Q),be(X,Q,ne)}if(ce(Q)||L(Q))return Q=eo(Q,X.mode,ne,null),Q.return=X,Q;if(typeof Q.then=="function")return be(X,dh(Q),ne);if(Q.$$typeof===I)return be(X,oh(X,Q),ne);hh(X,Q)}return null}function se(X,Q,ne,ve){var Xe=Q!==null?Q.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return Xe!==null?null:M(X,Q,""+ne,ve);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case k:return ne.key===Xe?G(X,Q,ne,ve):null;case R:return ne.key===Xe?re(X,Q,ne,ve):null;case E:return ne=io(ne),se(X,Q,ne,ve)}if(ce(ne)||L(ne))return Xe!==null?null:fe(X,Q,ne,ve,null);if(typeof ne.then=="function")return se(X,Q,dh(ne),ve);if(ne.$$typeof===I)return se(X,Q,oh(X,ne),ve);hh(X,ne)}return null}function le(X,Q,ne,ve,Xe){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return X=X.get(ne)||null,M(Q,X,""+ve,Xe);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case k:return X=X.get(ve.key===null?ne:ve.key)||null,G(Q,X,ve,Xe);case R:return X=X.get(ve.key===null?ne:ve.key)||null,re(Q,X,ve,Xe);case E:return ve=io(ve),le(X,Q,ne,ve,Xe)}if(ce(ve)||L(ve))return X=X.get(ne)||null,fe(Q,X,ve,Xe,null);if(typeof ve.then=="function")return le(X,Q,ne,dh(ve),Xe);if(ve.$$typeof===I)return le(X,Q,ne,oh(Q,ve),Xe);hh(Q,ve)}return null}function Be(X,Q,ne,ve){for(var Xe=null,kt=null,Ye=Q,ct=Q=0,yt=null;Ye!==null&&ct<ne.length;ct++){Ye.index>ct?(yt=Ye,Ye=null):yt=Ye.sibling;var Nt=se(X,Ye,ne[ct],ve);if(Nt===null){Ye===null&&(Ye=yt);break}s&&Ye&&Nt.alternate===null&&i(X,Ye),Q=v(Nt,Q,ct),kt===null?Xe=Nt:kt.sibling=Nt,kt=Nt,Ye=yt}if(ct===ne.length)return o(X,Ye),St&&ni(X,ct),Xe;if(Ye===null){for(;ct<ne.length;ct++)Ye=be(X,ne[ct],ve),Ye!==null&&(Q=v(Ye,Q,ct),kt===null?Xe=Ye:kt.sibling=Ye,kt=Ye);return St&&ni(X,ct),Xe}for(Ye=d(Ye);ct<ne.length;ct++)yt=le(Ye,X,ct,ne[ct],ve),yt!==null&&(s&&yt.alternate!==null&&Ye.delete(yt.key===null?ct:yt.key),Q=v(yt,Q,ct),kt===null?Xe=yt:kt.sibling=yt,kt=yt);return s&&Ye.forEach(function(la){return i(X,la)}),St&&ni(X,ct),Xe}function Je(X,Q,ne,ve){if(ne==null)throw Error(r(151));for(var Xe=null,kt=null,Ye=Q,ct=Q=0,yt=null,Nt=ne.next();Ye!==null&&!Nt.done;ct++,Nt=ne.next()){Ye.index>ct?(yt=Ye,Ye=null):yt=Ye.sibling;var la=se(X,Ye,Nt.value,ve);if(la===null){Ye===null&&(Ye=yt);break}s&&Ye&&la.alternate===null&&i(X,Ye),Q=v(la,Q,ct),kt===null?Xe=la:kt.sibling=la,kt=la,Ye=yt}if(Nt.done)return o(X,Ye),St&&ni(X,ct),Xe;if(Ye===null){for(;!Nt.done;ct++,Nt=ne.next())Nt=be(X,Nt.value,ve),Nt!==null&&(Q=v(Nt,Q,ct),kt===null?Xe=Nt:kt.sibling=Nt,kt=Nt);return St&&ni(X,ct),Xe}for(Ye=d(Ye);!Nt.done;ct++,Nt=ne.next())Nt=le(Ye,X,ct,Nt.value,ve),Nt!==null&&(s&&Nt.alternate!==null&&Ye.delete(Nt.key===null?ct:Nt.key),Q=v(Nt,Q,ct),kt===null?Xe=Nt:kt.sibling=Nt,kt=Nt);return s&&Ye.forEach(function(oN){return i(X,oN)}),St&&ni(X,ct),Xe}function zt(X,Q,ne,ve){if(typeof ne=="object"&&ne!==null&&ne.type===j&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case k:e:{for(var Xe=ne.key;Q!==null;){if(Q.key===Xe){if(Xe=ne.type,Xe===j){if(Q.tag===7){o(X,Q.sibling),ve=p(Q,ne.props.children),ve.return=X,X=ve;break e}}else if(Q.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===E&&io(Xe)===Q.type){o(X,Q.sibling),ve=p(Q,ne.props),Wc(ve,ne),ve.return=X,X=ve;break e}o(X,Q);break}else i(X,Q);Q=Q.sibling}ne.type===j?(ve=eo(ne.props.children,X.mode,ve,ne.key),ve.return=X,X=ve):(ve=sh(ne.type,ne.key,ne.props,null,X.mode,ve),Wc(ve,ne),ve.return=X,X=ve)}return S(X);case R:e:{for(Xe=ne.key;Q!==null;){if(Q.key===Xe)if(Q.tag===4&&Q.stateNode.containerInfo===ne.containerInfo&&Q.stateNode.implementation===ne.implementation){o(X,Q.sibling),ve=p(Q,ne.children||[]),ve.return=X,X=ve;break e}else{o(X,Q);break}else i(X,Q);Q=Q.sibling}ve=Mp(ne,X.mode,ve),ve.return=X,X=ve}return S(X);case E:return ne=io(ne),zt(X,Q,ne,ve)}if(ce(ne))return Be(X,Q,ne,ve);if(L(ne)){if(Xe=L(ne),typeof Xe!="function")throw Error(r(150));return ne=Xe.call(ne),Je(X,Q,ne,ve)}if(typeof ne.then=="function")return zt(X,Q,dh(ne),ve);if(ne.$$typeof===I)return zt(X,Q,oh(X,ne),ve);hh(X,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,Q!==null&&Q.tag===6?(o(X,Q.sibling),ve=p(Q,ne),ve.return=X,X=ve):(o(X,Q),ve=Dp(ne,X.mode,ve),ve.return=X,X=ve),S(X)):o(X,Q)}return function(X,Q,ne,ve){try{Xc=0;var Xe=zt(X,Q,ne,ve);return pl=null,Xe}catch(Ye){if(Ye===ml||Ye===ch)throw Ye;var kt=_r(29,Ye,null,X.mode);return kt.lanes=ve,kt.return=X,kt}finally{}}}var oo=kb(!0),Nb=kb(!1),qi=!1;function Gp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yp(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Gi(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Yi(s,i,o){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(jt&2)!==0){var p=d.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),d.pending=i,i=rh(s),db(s,null,o),i}return nh(s,d,i,o),rh(s)}function Jc(s,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var d=i.lanes;d&=s.pendingLanes,o|=d,i.lanes=o,Cc(s,o)}}function Kp(s,i){var o=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,o===d)){var p=null,v=null;if(o=o.firstBaseUpdate,o!==null){do{var S={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};v===null?p=v=S:v=v.next=S,o=o.next}while(o!==null);v===null?p=v=i:v=v.next=i}else p=v=i;o={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:v,shared:d.shared,callbacks:d.callbacks},s.updateQueue=o;return}s=o.lastBaseUpdate,s===null?o.firstBaseUpdate=i:s.next=i,o.lastBaseUpdate=i}var Qp=!1;function Zc(){if(Qp){var s=fl;if(s!==null)throw s}}function eu(s,i,o,d){Qp=!1;var p=s.updateQueue;qi=!1;var v=p.firstBaseUpdate,S=p.lastBaseUpdate,M=p.shared.pending;if(M!==null){p.shared.pending=null;var G=M,re=G.next;G.next=null,S===null?v=re:S.next=re,S=G;var fe=s.alternate;fe!==null&&(fe=fe.updateQueue,M=fe.lastBaseUpdate,M!==S&&(M===null?fe.firstBaseUpdate=re:M.next=re,fe.lastBaseUpdate=G))}if(v!==null){var be=p.baseState;S=0,fe=re=G=null,M=v;do{var se=M.lane&-536870913,le=se!==M.lane;if(le?(vt&se)===se:(d&se)===se){se!==0&&se===hl&&(Qp=!0),fe!==null&&(fe=fe.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var Be=s,Je=M;se=i;var zt=o;switch(Je.tag){case 1:if(Be=Je.payload,typeof Be=="function"){be=Be.call(zt,be,se);break e}be=Be;break e;case 3:Be.flags=Be.flags&-65537|128;case 0:if(Be=Je.payload,se=typeof Be=="function"?Be.call(zt,be,se):Be,se==null)break e;be=b({},be,se);break e;case 2:qi=!0}}se=M.callback,se!==null&&(s.flags|=64,le&&(s.flags|=8192),le=p.callbacks,le===null?p.callbacks=[se]:le.push(se))}else le={lane:se,tag:M.tag,payload:M.payload,callback:M.callback,next:null},fe===null?(re=fe=le,G=be):fe=fe.next=le,S|=se;if(M=M.next,M===null){if(M=p.shared.pending,M===null)break;le=M,M=le.next,le.next=null,p.lastBaseUpdate=le,p.shared.pending=null}}while(!0);fe===null&&(G=be),p.baseState=G,p.firstBaseUpdate=re,p.lastBaseUpdate=fe,v===null&&(p.shared.lanes=0),Ji|=S,s.lanes=S,s.memoizedState=be}}function Ab(s,i){if(typeof s!="function")throw Error(r(191,s));s.call(i)}function Rb(s,i){var o=s.callbacks;if(o!==null)for(s.callbacks=null,s=0;s<o.length;s++)Ab(o[s],i)}var gl=F(null),fh=F(0);function jb(s,i){s=fi,ae(fh,s),ae(gl,i),fi=s|i.baseLanes}function Xp(){ae(fh,fi),ae(gl,gl.current)}function Wp(){fi=fh.current,W(gl),W(fh)}var wr=F(null),Br=null;function Ki(s){var i=s.alternate;ae(an,an.current&1),ae(wr,s),Br===null&&(i===null||gl.current!==null||i.memoizedState!==null)&&(Br=s)}function Jp(s){ae(an,an.current),ae(wr,s),Br===null&&(Br=s)}function Ib(s){s.tag===22?(ae(an,an.current),ae(wr,s),Br===null&&(Br=s)):Qi()}function Qi(){ae(an,an.current),ae(wr,wr.current)}function Sr(s){W(wr),Br===s&&(Br=null),W(an)}var an=F(0);function mh(s){for(var i=s;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||s0(o)||i0(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ii=0,lt=null,Vt=null,gn=null,ph=!1,vl=!1,lo=!1,gh=0,tu=0,yl=null,Wk=0;function tn(){throw Error(r(321))}function Zp(s,i){if(i===null)return!1;for(var o=0;o<i.length&&o<s.length;o++)if(!xr(s[o],i[o]))return!1;return!0}function eg(s,i,o,d,p,v){return ii=v,lt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Y.H=s===null||s.memoizedState===null?p2:pg,lo=!1,v=o(d,p),lo=!1,vl&&(v=Mb(i,o,d,p)),Db(s),v}function Db(s){Y.H=su;var i=Vt!==null&&Vt.next!==null;if(ii=0,gn=Vt=lt=null,ph=!1,tu=0,yl=null,i)throw Error(r(300));s===null||vn||(s=s.dependencies,s!==null&&ah(s)&&(vn=!0))}function Mb(s,i,o,d){lt=s;var p=0;do{if(vl&&(yl=null),tu=0,vl=!1,25<=p)throw Error(r(301));if(p+=1,gn=Vt=null,s.updateQueue!=null){var v=s.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}Y.H=g2,v=i(o,d)}while(vl);return v}function Jk(){var s=Y.H,i=s.useState()[0];return i=typeof i.then=="function"?nu(i):i,s=s.useState()[0],(Vt!==null?Vt.memoizedState:null)!==s&&(lt.flags|=1024),i}function tg(){var s=gh!==0;return gh=0,s}function ng(s,i,o){i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~o}function rg(s){if(ph){for(s=s.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}ph=!1}ii=0,gn=Vt=lt=null,vl=!1,tu=gh=0,yl=null}function tr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gn===null?lt.memoizedState=gn=s:gn=gn.next=s,gn}function on(){if(Vt===null){var s=lt.alternate;s=s!==null?s.memoizedState:null}else s=Vt.next;var i=gn===null?lt.memoizedState:gn.next;if(i!==null)gn=i,Vt=s;else{if(s===null)throw lt.alternate===null?Error(r(467)):Error(r(310));Vt=s,s={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},gn===null?lt.memoizedState=gn=s:gn=gn.next=s}return gn}function vh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function nu(s){var i=tu;return tu+=1,yl===null&&(yl=[]),s=Eb(yl,s,i),i=lt,(gn===null?i.memoizedState:gn.next)===null&&(i=i.alternate,Y.H=i===null||i.memoizedState===null?p2:pg),s}function yh(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return nu(s);if(s.$$typeof===I)return Un(s)}throw Error(r(438,String(s)))}function sg(s){var i=null,o=lt.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var d=lt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(i={data:d.data.map(function(p){return p.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=vh(),lt.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(s),d=0;d<s;d++)o[d]=D;return i.index++,o}function ai(s,i){return typeof i=="function"?i(s):i}function bh(s){var i=on();return ig(i,Vt,s)}function ig(s,i,o){var d=s.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=o;var p=s.baseQueue,v=d.pending;if(v!==null){if(p!==null){var S=p.next;p.next=v.next,v.next=S}i.baseQueue=p=v,d.pending=null}if(v=s.baseState,p===null)s.memoizedState=v;else{i=p.next;var M=S=null,G=null,re=i,fe=!1;do{var be=re.lane&-536870913;if(be!==re.lane?(vt&be)===be:(ii&be)===be){var se=re.revertLane;if(se===0)G!==null&&(G=G.next={lane:0,revertLane:0,gesture:null,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),be===hl&&(fe=!0);else if((ii&se)===se){re=re.next,se===hl&&(fe=!0);continue}else be={lane:0,revertLane:re.revertLane,gesture:null,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},G===null?(M=G=be,S=v):G=G.next=be,lt.lanes|=se,Ji|=se;be=re.action,lo&&o(v,be),v=re.hasEagerState?re.eagerState:o(v,be)}else se={lane:be,revertLane:re.revertLane,gesture:re.gesture,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},G===null?(M=G=se,S=v):G=G.next=se,lt.lanes|=be,Ji|=be;re=re.next}while(re!==null&&re!==i);if(G===null?S=v:G.next=M,!xr(v,s.memoizedState)&&(vn=!0,fe&&(o=fl,o!==null)))throw o;s.memoizedState=v,s.baseState=S,s.baseQueue=G,d.lastRenderedState=v}return p===null&&(d.lanes=0),[s.memoizedState,d.dispatch]}function ag(s){var i=on(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=s;var d=o.dispatch,p=o.pending,v=i.memoizedState;if(p!==null){o.pending=null;var S=p=p.next;do v=s(v,S.action),S=S.next;while(S!==p);xr(v,i.memoizedState)||(vn=!0),i.memoizedState=v,i.baseQueue===null&&(i.baseState=v),o.lastRenderedState=v}return[v,d]}function Pb(s,i,o){var d=lt,p=on(),v=St;if(v){if(o===void 0)throw Error(r(407));o=o()}else o=i();var S=!xr((Vt||p).memoizedState,o);if(S&&(p.memoizedState=o,vn=!0),p=p.queue,cg(Vb.bind(null,d,p,s),[s]),p.getSnapshot!==i||S||gn!==null&&gn.memoizedState.tag&1){if(d.flags|=2048,bl(9,{destroy:void 0},Lb.bind(null,d,p,o,i),null),Bt===null)throw Error(r(349));v||(ii&127)!==0||Ob(d,i,o)}return o}function Ob(s,i,o){s.flags|=16384,s={getSnapshot:i,value:o},i=lt.updateQueue,i===null?(i=vh(),lt.updateQueue=i,i.stores=[s]):(o=i.stores,o===null?i.stores=[s]:o.push(s))}function Lb(s,i,o,d){i.value=o,i.getSnapshot=d,Ub(i)&&zb(s)}function Vb(s,i,o){return o(function(){Ub(i)&&zb(s)})}function Ub(s){var i=s.getSnapshot;s=s.value;try{var o=i();return!xr(s,o)}catch{return!0}}function zb(s){var i=Za(s,2);i!==null&&hr(i,s,2)}function og(s){var i=tr();if(typeof s=="function"){var o=s;if(s=o(),lo){Tn(!0);try{o()}finally{Tn(!1)}}}return i.memoizedState=i.baseState=s,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:s},i}function Bb(s,i,o,d){return s.baseState=o,ig(s,Vt,typeof d=="function"?d:ai)}function Zk(s,i,o,d,p){if(wh(s))throw Error(r(485));if(s=i.action,s!==null){var v={payload:p,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){v.listeners.push(S)}};Y.T!==null?o(!0):v.isTransition=!1,d(v),o=i.pending,o===null?(v.next=i.pending=v,Fb(i,v)):(v.next=o.next,i.pending=o.next=v)}}function Fb(s,i){var o=i.action,d=i.payload,p=s.state;if(i.isTransition){var v=Y.T,S={};Y.T=S;try{var M=o(p,d),G=Y.S;G!==null&&G(S,M),Hb(s,i,M)}catch(re){lg(s,i,re)}finally{v!==null&&S.types!==null&&(v.types=S.types),Y.T=v}}else try{v=o(p,d),Hb(s,i,v)}catch(re){lg(s,i,re)}}function Hb(s,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(d){$b(s,i,d)},function(d){return lg(s,i,d)}):$b(s,i,o)}function $b(s,i,o){i.status="fulfilled",i.value=o,qb(i),s.state=o,i=s.pending,i!==null&&(o=i.next,o===i?s.pending=null:(o=o.next,i.next=o,Fb(s,o)))}function lg(s,i,o){var d=s.pending;if(s.pending=null,d!==null){d=d.next;do i.status="rejected",i.reason=o,qb(i),i=i.next;while(i!==d)}s.action=null}function qb(s){s=s.listeners;for(var i=0;i<s.length;i++)(0,s[i])()}function Gb(s,i){return i}function Yb(s,i){if(St){var o=Bt.formState;if(o!==null){e:{var d=lt;if(St){if(qt){t:{for(var p=qt,v=zr;p.nodeType!==8;){if(!v){p=null;break t}if(p=Fr(p.nextSibling),p===null){p=null;break t}}v=p.data,p=v==="F!"||v==="F"?p:null}if(p){qt=Fr(p.nextSibling),d=p.data==="F!";break e}}Hi(d)}d=!1}d&&(i=o[0])}}return o=tr(),o.memoizedState=o.baseState=i,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gb,lastRenderedState:i},o.queue=d,o=h2.bind(null,lt,d),d.dispatch=o,d=og(!1),v=mg.bind(null,lt,!1,d.queue),d=tr(),p={state:i,dispatch:null,action:s,pending:null},d.queue=p,o=Zk.bind(null,lt,p,v,o),p.dispatch=o,d.memoizedState=s,[i,o,!1]}function Kb(s){var i=on();return Qb(i,Vt,s)}function Qb(s,i,o){if(i=ig(s,i,Gb)[0],s=bh(ai)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var d=nu(i)}catch(S){throw S===ml?ch:S}else d=i;i=on();var p=i.queue,v=p.dispatch;return o!==i.memoizedState&&(lt.flags|=2048,bl(9,{destroy:void 0},e5.bind(null,p,o),null)),[d,v,s]}function e5(s,i){s.action=i}function Xb(s){var i=on(),o=Vt;if(o!==null)return Qb(i,o,s);on(),i=i.memoizedState,o=on();var d=o.queue.dispatch;return o.memoizedState=s,[i,d,!1]}function bl(s,i,o,d){return s={tag:s,create:o,deps:d,inst:i,next:null},i=lt.updateQueue,i===null&&(i=vh(),lt.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=s.next=s:(d=o.next,o.next=s,s.next=d,i.lastEffect=s),s}function Wb(){return on().memoizedState}function xh(s,i,o,d){var p=tr();lt.flags|=s,p.memoizedState=bl(1|i,{destroy:void 0},o,d===void 0?null:d)}function _h(s,i,o,d){var p=on();d=d===void 0?null:d;var v=p.memoizedState.inst;Vt!==null&&d!==null&&Zp(d,Vt.memoizedState.deps)?p.memoizedState=bl(i,v,o,d):(lt.flags|=s,p.memoizedState=bl(1|i,v,o,d))}function Jb(s,i){xh(8390656,8,s,i)}function cg(s,i){_h(2048,8,s,i)}function t5(s){lt.flags|=4;var i=lt.updateQueue;if(i===null)i=vh(),lt.updateQueue=i,i.events=[s];else{var o=i.events;o===null?i.events=[s]:o.push(s)}}function Zb(s){var i=on().memoizedState;return t5({ref:i,nextImpl:s}),function(){if((jt&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function e2(s,i){return _h(4,2,s,i)}function t2(s,i){return _h(4,4,s,i)}function n2(s,i){if(typeof i=="function"){s=s();var o=i(s);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function r2(s,i,o){o=o!=null?o.concat([s]):null,_h(4,4,n2.bind(null,i,s),o)}function ug(){}function s2(s,i){var o=on();i=i===void 0?null:i;var d=o.memoizedState;return i!==null&&Zp(i,d[1])?d[0]:(o.memoizedState=[s,i],s)}function i2(s,i){var o=on();i=i===void 0?null:i;var d=o.memoizedState;if(i!==null&&Zp(i,d[1]))return d[0];if(d=s(),lo){Tn(!0);try{s()}finally{Tn(!1)}}return o.memoizedState=[d,i],d}function dg(s,i,o){return o===void 0||(ii&1073741824)!==0&&(vt&261930)===0?s.memoizedState=i:(s.memoizedState=o,s=ax(),lt.lanes|=s,Ji|=s,o)}function a2(s,i,o,d){return xr(o,i)?o:gl.current!==null?(s=dg(s,o,d),xr(s,i)||(vn=!0),s):(ii&42)===0||(ii&1073741824)!==0&&(vt&261930)===0?(vn=!0,s.memoizedState=o):(s=ax(),lt.lanes|=s,Ji|=s,i)}function o2(s,i,o,d,p){var v=Z.p;Z.p=v!==0&&8>v?v:8;var S=Y.T,M={};Y.T=M,mg(s,!1,i,o);try{var G=p(),re=Y.S;if(re!==null&&re(M,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var fe=Xk(G,d);ru(s,i,fe,Tr(s))}else ru(s,i,d,Tr(s))}catch(be){ru(s,i,{then:function(){},status:"rejected",reason:be},Tr())}finally{Z.p=v,S!==null&&M.types!==null&&(S.types=M.types),Y.T=S}}function n5(){}function hg(s,i,o,d){if(s.tag!==5)throw Error(r(476));var p=l2(s).queue;o2(s,p,i,J,o===null?n5:function(){return c2(s),o(d)})}function l2(s){var i=s.memoizedState;if(i!==null)return i;i={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:J},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:o},next:null},s.memoizedState=i,s=s.alternate,s!==null&&(s.memoizedState=i),i}function c2(s){var i=l2(s);i.next===null&&(i=s.alternate.memoizedState),ru(s,i.next.queue,{},Tr())}function fg(){return Un(xu)}function u2(){return on().memoizedState}function d2(){return on().memoizedState}function r5(s){for(var i=s.return;i!==null;){switch(i.tag){case 24:case 3:var o=Tr();s=Gi(o);var d=Yi(i,s,o);d!==null&&(hr(d,i,o),Jc(d,i,o)),i={cache:Fp()},s.payload=i;return}i=i.return}}function s5(s,i,o){var d=Tr();o={lane:d,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},wh(s)?f2(i,o):(o=jp(s,i,o,d),o!==null&&(hr(o,s,d),m2(o,i,d)))}function h2(s,i,o){var d=Tr();ru(s,i,o,d)}function ru(s,i,o,d){var p={lane:d,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(wh(s))f2(i,p);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=i.lastRenderedReducer,v!==null))try{var S=i.lastRenderedState,M=v(S,o);if(p.hasEagerState=!0,p.eagerState=M,xr(M,S))return nh(s,i,p,0),Bt===null&&th(),!1}catch{}finally{}if(o=jp(s,i,p,d),o!==null)return hr(o,s,d),m2(o,i,d),!0}return!1}function mg(s,i,o,d){if(d={lane:2,revertLane:Gg(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},wh(s)){if(i)throw Error(r(479))}else i=jp(s,o,d,2),i!==null&&hr(i,s,2)}function wh(s){var i=s.alternate;return s===lt||i!==null&&i===lt}function f2(s,i){vl=ph=!0;var o=s.pending;o===null?i.next=i:(i.next=o.next,o.next=i),s.pending=i}function m2(s,i,o){if((o&4194048)!==0){var d=i.lanes;d&=s.pendingLanes,o|=d,i.lanes=o,Cc(s,o)}}var su={readContext:Un,use:yh,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useLayoutEffect:tn,useInsertionEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useSyncExternalStore:tn,useId:tn,useHostTransitionStatus:tn,useFormState:tn,useActionState:tn,useOptimistic:tn,useMemoCache:tn,useCacheRefresh:tn};su.useEffectEvent=tn;var p2={readContext:Un,use:yh,useCallback:function(s,i){return tr().memoizedState=[s,i===void 0?null:i],s},useContext:Un,useEffect:Jb,useImperativeHandle:function(s,i,o){o=o!=null?o.concat([s]):null,xh(4194308,4,n2.bind(null,i,s),o)},useLayoutEffect:function(s,i){return xh(4194308,4,s,i)},useInsertionEffect:function(s,i){xh(4,2,s,i)},useMemo:function(s,i){var o=tr();i=i===void 0?null:i;var d=s();if(lo){Tn(!0);try{s()}finally{Tn(!1)}}return o.memoizedState=[d,i],d},useReducer:function(s,i,o){var d=tr();if(o!==void 0){var p=o(i);if(lo){Tn(!0);try{o(i)}finally{Tn(!1)}}}else p=i;return d.memoizedState=d.baseState=p,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:p},d.queue=s,s=s.dispatch=s5.bind(null,lt,s),[d.memoizedState,s]},useRef:function(s){var i=tr();return s={current:s},i.memoizedState=s},useState:function(s){s=og(s);var i=s.queue,o=h2.bind(null,lt,i);return i.dispatch=o,[s.memoizedState,o]},useDebugValue:ug,useDeferredValue:function(s,i){var o=tr();return dg(o,s,i)},useTransition:function(){var s=og(!1);return s=o2.bind(null,lt,s.queue,!0,!1),tr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,i,o){var d=lt,p=tr();if(St){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),Bt===null)throw Error(r(349));(vt&127)!==0||Ob(d,i,o)}p.memoizedState=o;var v={value:o,getSnapshot:i};return p.queue=v,Jb(Vb.bind(null,d,v,s),[s]),d.flags|=2048,bl(9,{destroy:void 0},Lb.bind(null,d,v,o,i),null),o},useId:function(){var s=tr(),i=Bt.identifierPrefix;if(St){var o=As,d=Ns;o=(d&~(1<<32-Xt(d)-1)).toString(32)+o,i="_"+i+"R_"+o,o=gh++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=Wk++,i="_"+i+"r_"+o.toString(32)+"_";return s.memoizedState=i},useHostTransitionStatus:fg,useFormState:Yb,useActionState:Yb,useOptimistic:function(s){var i=tr();i.memoizedState=i.baseState=s;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=mg.bind(null,lt,!0,o),o.dispatch=i,[s,i]},useMemoCache:sg,useCacheRefresh:function(){return tr().memoizedState=r5.bind(null,lt)},useEffectEvent:function(s){var i=tr(),o={impl:s};return i.memoizedState=o,function(){if((jt&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},pg={readContext:Un,use:yh,useCallback:s2,useContext:Un,useEffect:cg,useImperativeHandle:r2,useInsertionEffect:e2,useLayoutEffect:t2,useMemo:i2,useReducer:bh,useRef:Wb,useState:function(){return bh(ai)},useDebugValue:ug,useDeferredValue:function(s,i){var o=on();return a2(o,Vt.memoizedState,s,i)},useTransition:function(){var s=bh(ai)[0],i=on().memoizedState;return[typeof s=="boolean"?s:nu(s),i]},useSyncExternalStore:Pb,useId:u2,useHostTransitionStatus:fg,useFormState:Kb,useActionState:Kb,useOptimistic:function(s,i){var o=on();return Bb(o,Vt,s,i)},useMemoCache:sg,useCacheRefresh:d2};pg.useEffectEvent=Zb;var g2={readContext:Un,use:yh,useCallback:s2,useContext:Un,useEffect:cg,useImperativeHandle:r2,useInsertionEffect:e2,useLayoutEffect:t2,useMemo:i2,useReducer:ag,useRef:Wb,useState:function(){return ag(ai)},useDebugValue:ug,useDeferredValue:function(s,i){var o=on();return Vt===null?dg(o,s,i):a2(o,Vt.memoizedState,s,i)},useTransition:function(){var s=ag(ai)[0],i=on().memoizedState;return[typeof s=="boolean"?s:nu(s),i]},useSyncExternalStore:Pb,useId:u2,useHostTransitionStatus:fg,useFormState:Xb,useActionState:Xb,useOptimistic:function(s,i){var o=on();return Vt!==null?Bb(o,Vt,s,i):(o.baseState=s,[s,o.queue.dispatch])},useMemoCache:sg,useCacheRefresh:d2};g2.useEffectEvent=Zb;function gg(s,i,o,d){i=s.memoizedState,o=o(d,i),o=o==null?i:b({},i,o),s.memoizedState=o,s.lanes===0&&(s.updateQueue.baseState=o)}var vg={enqueueSetState:function(s,i,o){s=s._reactInternals;var d=Tr(),p=Gi(d);p.payload=i,o!=null&&(p.callback=o),i=Yi(s,p,d),i!==null&&(hr(i,s,d),Jc(i,s,d))},enqueueReplaceState:function(s,i,o){s=s._reactInternals;var d=Tr(),p=Gi(d);p.tag=1,p.payload=i,o!=null&&(p.callback=o),i=Yi(s,p,d),i!==null&&(hr(i,s,d),Jc(i,s,d))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var o=Tr(),d=Gi(o);d.tag=2,i!=null&&(d.callback=i),i=Yi(s,d,o),i!==null&&(hr(i,s,o),Jc(i,s,o))}};function v2(s,i,o,d,p,v,S){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,v,S):i.prototype&&i.prototype.isPureReactComponent?!$c(o,d)||!$c(p,v):!0}function y2(s,i,o,d){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,d),i.state!==s&&vg.enqueueReplaceState(i,i.state,null)}function co(s,i){var o=i;if("ref"in i){o={};for(var d in i)d!=="ref"&&(o[d]=i[d])}if(s=s.defaultProps){o===i&&(o=b({},o));for(var p in s)o[p]===void 0&&(o[p]=s[p])}return o}function b2(s){eh(s)}function x2(s){console.error(s)}function _2(s){eh(s)}function Sh(s,i){try{var o=s.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(d){setTimeout(function(){throw d})}}function w2(s,i,o){try{var d=s.onCaughtError;d(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function yg(s,i,o){return o=Gi(o),o.tag=3,o.payload={element:null},o.callback=function(){Sh(s,i)},o}function S2(s){return s=Gi(s),s.tag=3,s}function E2(s,i,o,d){var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var v=d.value;s.payload=function(){return p(v)},s.callback=function(){w2(i,o,d)}}var S=o.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(s.callback=function(){w2(i,o,d),typeof p!="function"&&(Zi===null?Zi=new Set([this]):Zi.add(this));var M=d.stack;this.componentDidCatch(d.value,{componentStack:M!==null?M:""})})}function i5(s,i,o,d,p){if(o.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(i=o.alternate,i!==null&&dl(i,o,p,!0),o=wr.current,o!==null){switch(o.tag){case 31:case 13:return Br===null?Ph():o.alternate===null&&nn===0&&(nn=3),o.flags&=-257,o.flags|=65536,o.lanes=p,d===uh?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([d]):i.add(d),Hg(s,d,p)),!1;case 22:return o.flags|=65536,d===uh?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([d])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([d]):o.add(d)),Hg(s,d,p)),!1}throw Error(r(435,o.tag))}return Hg(s,d,p),Ph(),!1}if(St)return i=wr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=p,d!==Lp&&(s=Error(r(422),{cause:d}),Yc(Lr(s,o)))):(d!==Lp&&(i=Error(r(423),{cause:d}),Yc(Lr(i,o))),s=s.current.alternate,s.flags|=65536,p&=-p,s.lanes|=p,d=Lr(d,o),p=yg(s.stateNode,d,p),Kp(s,p),nn!==4&&(nn=2)),!1;var v=Error(r(520),{cause:d});if(v=Lr(v,o),hu===null?hu=[v]:hu.push(v),nn!==4&&(nn=2),i===null)return!0;d=Lr(d,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,s=p&-p,o.lanes|=s,s=yg(o.stateNode,d,s),Kp(o,s),!1;case 1:if(i=o.type,v=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Zi===null||!Zi.has(v))))return o.flags|=65536,p&=-p,o.lanes|=p,p=S2(p),E2(p,s,o,d),Kp(o,p),!1}o=o.return}while(o!==null);return!1}var bg=Error(r(461)),vn=!1;function zn(s,i,o,d){i.child=s===null?Nb(i,null,o,d):oo(i,s.child,o,d)}function C2(s,i,o,d,p){o=o.render;var v=i.ref;if("ref"in d){var S={};for(var M in d)M!=="ref"&&(S[M]=d[M])}else S=d;return ro(i),d=eg(s,i,o,S,v,p),M=tg(),s!==null&&!vn?(ng(s,i,p),oi(s,i,p)):(St&&M&&Pp(i),i.flags|=1,zn(s,i,d,p),i.child)}function T2(s,i,o,d,p){if(s===null){var v=o.type;return typeof v=="function"&&!Ip(v)&&v.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=v,k2(s,i,v,d,p)):(s=sh(o.type,null,d,i,i.mode,p),s.ref=i.ref,s.return=i,i.child=s)}if(v=s.child,!kg(s,p)){var S=v.memoizedProps;if(o=o.compare,o=o!==null?o:$c,o(S,d)&&s.ref===i.ref)return oi(s,i,p)}return i.flags|=1,s=ti(v,d),s.ref=i.ref,s.return=i,i.child=s}function k2(s,i,o,d,p){if(s!==null){var v=s.memoizedProps;if($c(v,d)&&s.ref===i.ref)if(vn=!1,i.pendingProps=d=v,kg(s,p))(s.flags&131072)!==0&&(vn=!0);else return i.lanes=s.lanes,oi(s,i,p)}return xg(s,i,o,d,p)}function N2(s,i,o,d){var p=d.children,v=s!==null?s.memoizedState:null;if(s===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((i.flags&128)!==0){if(v=v!==null?v.baseLanes|o:o,s!==null){for(d=i.child=s.child,p=0;d!==null;)p=p|d.lanes|d.childLanes,d=d.sibling;d=p&~v}else d=0,i.child=null;return A2(s,i,v,o,d)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},s!==null&&lh(i,v!==null?v.cachePool:null),v!==null?jb(i,v):Xp(),Ib(i);else return d=i.lanes=536870912,A2(s,i,v!==null?v.baseLanes|o:o,o,d)}else v!==null?(lh(i,v.cachePool),jb(i,v),Qi(),i.memoizedState=null):(s!==null&&lh(i,null),Xp(),Qi());return zn(s,i,p,o),i.child}function iu(s,i){return s!==null&&s.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function A2(s,i,o,d,p){var v=$p();return v=v===null?null:{parent:pn._currentValue,pool:v},i.memoizedState={baseLanes:o,cachePool:v},s!==null&&lh(i,null),Xp(),Ib(i),s!==null&&dl(s,i,d,!0),i.childLanes=p,null}function Eh(s,i){return i=Th({mode:i.mode,children:i.children},s.mode),i.ref=s.ref,s.child=i,i.return=s,i}function R2(s,i,o){return oo(i,s.child,null,o),s=Eh(i,i.pendingProps),s.flags|=2,Sr(i),i.memoizedState=null,s}function a5(s,i,o){var d=i.pendingProps,p=(i.flags&128)!==0;if(i.flags&=-129,s===null){if(St){if(d.mode==="hidden")return s=Eh(i,d),i.lanes=536870912,iu(null,s);if(Jp(i),(s=qt)?(s=Fx(s,zr),s=s!==null&&s.data==="&"?s:null,s!==null&&(i.memoizedState={dehydrated:s,treeContext:Bi!==null?{id:Ns,overflow:As}:null,retryLane:536870912,hydrationErrors:null},o=fb(s),o.return=i,i.child=o,Vn=i,qt=null)):s=null,s===null)throw Hi(i);return i.lanes=536870912,null}return Eh(i,d)}var v=s.memoizedState;if(v!==null){var S=v.dehydrated;if(Jp(i),p)if(i.flags&256)i.flags&=-257,i=R2(s,i,o);else if(i.memoizedState!==null)i.child=s.child,i.flags|=128,i=null;else throw Error(r(558));else if(vn||dl(s,i,o,!1),p=(o&s.childLanes)!==0,vn||p){if(d=Bt,d!==null&&(S=Tc(d,o),S!==0&&S!==v.retryLane))throw v.retryLane=S,Za(s,S),hr(d,s,S),bg;Ph(),i=R2(s,i,o)}else s=v.treeContext,qt=Fr(S.nextSibling),Vn=i,St=!0,Fi=null,zr=!1,s!==null&&gb(i,s),i=Eh(i,d),i.flags|=4096;return i}return s=ti(s.child,{mode:d.mode,children:d.children}),s.ref=i.ref,i.child=s,s.return=i,s}function Ch(s,i){var o=i.ref;if(o===null)s!==null&&s.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(s===null||s.ref!==o)&&(i.flags|=4194816)}}function xg(s,i,o,d,p){return ro(i),o=eg(s,i,o,d,void 0,p),d=tg(),s!==null&&!vn?(ng(s,i,p),oi(s,i,p)):(St&&d&&Pp(i),i.flags|=1,zn(s,i,o,p),i.child)}function j2(s,i,o,d,p,v){return ro(i),i.updateQueue=null,o=Mb(i,d,o,p),Db(s),d=tg(),s!==null&&!vn?(ng(s,i,v),oi(s,i,v)):(St&&d&&Pp(i),i.flags|=1,zn(s,i,o,v),i.child)}function I2(s,i,o,d,p){if(ro(i),i.stateNode===null){var v=ol,S=o.contextType;typeof S=="object"&&S!==null&&(v=Un(S)),v=new o(d,v),i.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=vg,i.stateNode=v,v._reactInternals=i,v=i.stateNode,v.props=d,v.state=i.memoizedState,v.refs={},Gp(i),S=o.contextType,v.context=typeof S=="object"&&S!==null?Un(S):ol,v.state=i.memoizedState,S=o.getDerivedStateFromProps,typeof S=="function"&&(gg(i,o,S,d),v.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(S=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),S!==v.state&&vg.enqueueReplaceState(v,v.state,null),eu(i,d,v,p),Zc(),v.state=i.memoizedState),typeof v.componentDidMount=="function"&&(i.flags|=4194308),d=!0}else if(s===null){v=i.stateNode;var M=i.memoizedProps,G=co(o,M);v.props=G;var re=v.context,fe=o.contextType;S=ol,typeof fe=="object"&&fe!==null&&(S=Un(fe));var be=o.getDerivedStateFromProps;fe=typeof be=="function"||typeof v.getSnapshotBeforeUpdate=="function",M=i.pendingProps!==M,fe||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(M||re!==S)&&y2(i,v,d,S),qi=!1;var se=i.memoizedState;v.state=se,eu(i,d,v,p),Zc(),re=i.memoizedState,M||se!==re||qi?(typeof be=="function"&&(gg(i,o,be,d),re=i.memoizedState),(G=qi||v2(i,o,G,d,se,re,S))?(fe||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(i.flags|=4194308)):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=re),v.props=d,v.state=re,v.context=S,d=G):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{v=i.stateNode,Yp(s,i),S=i.memoizedProps,fe=co(o,S),v.props=fe,be=i.pendingProps,se=v.context,re=o.contextType,G=ol,typeof re=="object"&&re!==null&&(G=Un(re)),M=o.getDerivedStateFromProps,(re=typeof M=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==be||se!==G)&&y2(i,v,d,G),qi=!1,se=i.memoizedState,v.state=se,eu(i,d,v,p),Zc();var le=i.memoizedState;S!==be||se!==le||qi||s!==null&&s.dependencies!==null&&ah(s.dependencies)?(typeof M=="function"&&(gg(i,o,M,d),le=i.memoizedState),(fe=qi||v2(i,o,fe,d,se,le,G)||s!==null&&s.dependencies!==null&&ah(s.dependencies))?(re||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(d,le,G),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(d,le,G)),typeof v.componentDidUpdate=="function"&&(i.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===s.memoizedProps&&se===s.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&se===s.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=le),v.props=d,v.state=le,v.context=G,d=fe):(typeof v.componentDidUpdate!="function"||S===s.memoizedProps&&se===s.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&se===s.memoizedState||(i.flags|=1024),d=!1)}return v=d,Ch(s,i),d=(i.flags&128)!==0,v||d?(v=i.stateNode,o=d&&typeof o.getDerivedStateFromError!="function"?null:v.render(),i.flags|=1,s!==null&&d?(i.child=oo(i,s.child,null,p),i.child=oo(i,null,o,p)):zn(s,i,o,p),i.memoizedState=v.state,s=i.child):s=oi(s,i,p),s}function D2(s,i,o,d){return to(),i.flags|=256,zn(s,i,o,d),i.child}var _g={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function wg(s){return{baseLanes:s,cachePool:wb()}}function Sg(s,i,o){return s=s!==null?s.childLanes&~o:0,i&&(s|=Cr),s}function M2(s,i,o){var d=i.pendingProps,p=!1,v=(i.flags&128)!==0,S;if((S=v)||(S=s!==null&&s.memoizedState===null?!1:(an.current&2)!==0),S&&(p=!0,i.flags&=-129),S=(i.flags&32)!==0,i.flags&=-33,s===null){if(St){if(p?Ki(i):Qi(),(s=qt)?(s=Fx(s,zr),s=s!==null&&s.data!=="&"?s:null,s!==null&&(i.memoizedState={dehydrated:s,treeContext:Bi!==null?{id:Ns,overflow:As}:null,retryLane:536870912,hydrationErrors:null},o=fb(s),o.return=i,i.child=o,Vn=i,qt=null)):s=null,s===null)throw Hi(i);return i0(s)?i.lanes=32:i.lanes=536870912,null}var M=d.children;return d=d.fallback,p?(Qi(),p=i.mode,M=Th({mode:"hidden",children:M},p),d=eo(d,p,o,null),M.return=i,d.return=i,M.sibling=d,i.child=M,d=i.child,d.memoizedState=wg(o),d.childLanes=Sg(s,S,o),i.memoizedState=_g,iu(null,d)):(Ki(i),Eg(i,M))}var G=s.memoizedState;if(G!==null&&(M=G.dehydrated,M!==null)){if(v)i.flags&256?(Ki(i),i.flags&=-257,i=Cg(s,i,o)):i.memoizedState!==null?(Qi(),i.child=s.child,i.flags|=128,i=null):(Qi(),M=d.fallback,p=i.mode,d=Th({mode:"visible",children:d.children},p),M=eo(M,p,o,null),M.flags|=2,d.return=i,M.return=i,d.sibling=M,i.child=d,oo(i,s.child,null,o),d=i.child,d.memoizedState=wg(o),d.childLanes=Sg(s,S,o),i.memoizedState=_g,i=iu(null,d));else if(Ki(i),i0(M)){if(S=M.nextSibling&&M.nextSibling.dataset,S)var re=S.dgst;S=re,d=Error(r(419)),d.stack="",d.digest=S,Yc({value:d,source:null,stack:null}),i=Cg(s,i,o)}else if(vn||dl(s,i,o,!1),S=(o&s.childLanes)!==0,vn||S){if(S=Bt,S!==null&&(d=Tc(S,o),d!==0&&d!==G.retryLane))throw G.retryLane=d,Za(s,d),hr(S,s,d),bg;s0(M)||Ph(),i=Cg(s,i,o)}else s0(M)?(i.flags|=192,i.child=s.child,i=null):(s=G.treeContext,qt=Fr(M.nextSibling),Vn=i,St=!0,Fi=null,zr=!1,s!==null&&gb(i,s),i=Eg(i,d.children),i.flags|=4096);return i}return p?(Qi(),M=d.fallback,p=i.mode,G=s.child,re=G.sibling,d=ti(G,{mode:"hidden",children:d.children}),d.subtreeFlags=G.subtreeFlags&65011712,re!==null?M=ti(re,M):(M=eo(M,p,o,null),M.flags|=2),M.return=i,d.return=i,d.sibling=M,i.child=d,iu(null,d),d=i.child,M=s.child.memoizedState,M===null?M=wg(o):(p=M.cachePool,p!==null?(G=pn._currentValue,p=p.parent!==G?{parent:G,pool:G}:p):p=wb(),M={baseLanes:M.baseLanes|o,cachePool:p}),d.memoizedState=M,d.childLanes=Sg(s,S,o),i.memoizedState=_g,iu(s.child,d)):(Ki(i),o=s.child,s=o.sibling,o=ti(o,{mode:"visible",children:d.children}),o.return=i,o.sibling=null,s!==null&&(S=i.deletions,S===null?(i.deletions=[s],i.flags|=16):S.push(s)),i.child=o,i.memoizedState=null,o)}function Eg(s,i){return i=Th({mode:"visible",children:i},s.mode),i.return=s,s.child=i}function Th(s,i){return s=_r(22,s,null,i),s.lanes=0,s}function Cg(s,i,o){return oo(i,s.child,null,o),s=Eg(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function P2(s,i,o){s.lanes|=i;var d=s.alternate;d!==null&&(d.lanes|=i),zp(s.return,i,o)}function Tg(s,i,o,d,p,v){var S=s.memoizedState;S===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:o,tailMode:p,treeForkCount:v}:(S.isBackwards=i,S.rendering=null,S.renderingStartTime=0,S.last=d,S.tail=o,S.tailMode=p,S.treeForkCount=v)}function O2(s,i,o){var d=i.pendingProps,p=d.revealOrder,v=d.tail;d=d.children;var S=an.current,M=(S&2)!==0;if(M?(S=S&1|2,i.flags|=128):S&=1,ae(an,S),zn(s,i,d,o),d=St?Gc:0,!M&&s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&P2(s,o,i);else if(s.tag===19)P2(s,o,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(p){case"forwards":for(o=i.child,p=null;o!==null;)s=o.alternate,s!==null&&mh(s)===null&&(p=o),o=o.sibling;o=p,o===null?(p=i.child,i.child=null):(p=o.sibling,o.sibling=null),Tg(i,!1,p,o,v,d);break;case"backwards":case"unstable_legacy-backwards":for(o=null,p=i.child,i.child=null;p!==null;){if(s=p.alternate,s!==null&&mh(s)===null){i.child=p;break}s=p.sibling,p.sibling=o,o=p,p=s}Tg(i,!0,o,null,v,d);break;case"together":Tg(i,!1,null,null,void 0,d);break;default:i.memoizedState=null}return i.child}function oi(s,i,o){if(s!==null&&(i.dependencies=s.dependencies),Ji|=i.lanes,(o&i.childLanes)===0)if(s!==null){if(dl(s,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(s!==null&&i.child!==s.child)throw Error(r(153));if(i.child!==null){for(s=i.child,o=ti(s,s.pendingProps),i.child=o,o.return=i;s.sibling!==null;)s=s.sibling,o=o.sibling=ti(s,s.pendingProps),o.return=i;o.sibling=null}return i.child}function kg(s,i){return(s.lanes&i)!==0?!0:(s=s.dependencies,!!(s!==null&&ah(s)))}function o5(s,i,o){switch(i.tag){case 3:Ke(i,i.stateNode.containerInfo),$i(i,pn,s.memoizedState.cache),to();break;case 27:case 5:he(i);break;case 4:Ke(i,i.stateNode.containerInfo);break;case 10:$i(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Jp(i),null;break;case 13:var d=i.memoizedState;if(d!==null)return d.dehydrated!==null?(Ki(i),i.flags|=128,null):(o&i.child.childLanes)!==0?M2(s,i,o):(Ki(i),s=oi(s,i,o),s!==null?s.sibling:null);Ki(i);break;case 19:var p=(s.flags&128)!==0;if(d=(o&i.childLanes)!==0,d||(dl(s,i,o,!1),d=(o&i.childLanes)!==0),p){if(d)return O2(s,i,o);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),ae(an,an.current),d)break;return null;case 22:return i.lanes=0,N2(s,i,o,i.pendingProps);case 24:$i(i,pn,s.memoizedState.cache)}return oi(s,i,o)}function L2(s,i,o){if(s!==null)if(s.memoizedProps!==i.pendingProps)vn=!0;else{if(!kg(s,o)&&(i.flags&128)===0)return vn=!1,o5(s,i,o);vn=(s.flags&131072)!==0}else vn=!1,St&&(i.flags&1048576)!==0&&pb(i,Gc,i.index);switch(i.lanes=0,i.tag){case 16:e:{var d=i.pendingProps;if(s=io(i.elementType),i.type=s,typeof s=="function")Ip(s)?(d=co(s,d),i.tag=1,i=I2(null,i,s,d,o)):(i.tag=0,i=xg(null,i,s,d,o));else{if(s!=null){var p=s.$$typeof;if(p===z){i.tag=11,i=C2(null,i,s,d,o);break e}else if(p===w){i.tag=14,i=T2(null,i,s,d,o);break e}}throw i=pe(s)||s,Error(r(306,i,""))}}return i;case 0:return xg(s,i,i.type,i.pendingProps,o);case 1:return d=i.type,p=co(d,i.pendingProps),I2(s,i,d,p,o);case 3:e:{if(Ke(i,i.stateNode.containerInfo),s===null)throw Error(r(387));d=i.pendingProps;var v=i.memoizedState;p=v.element,Yp(s,i),eu(i,d,null,o);var S=i.memoizedState;if(d=S.cache,$i(i,pn,d),d!==v.cache&&Bp(i,[pn],o,!0),Zc(),d=S.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:S.cache},i.updateQueue.baseState=v,i.memoizedState=v,i.flags&256){i=D2(s,i,d,o);break e}else if(d!==p){p=Lr(Error(r(424)),i),Yc(p),i=D2(s,i,d,o);break e}else{switch(s=i.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(qt=Fr(s.firstChild),Vn=i,St=!0,Fi=null,zr=!0,o=Nb(i,null,d,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(to(),d===p){i=oi(s,i,o);break e}zn(s,i,d,o)}i=i.child}return i;case 26:return Ch(s,i),s===null?(o=Kx(i.type,null,i.pendingProps,null))?i.memoizedState=o:St||(o=i.type,s=i.pendingProps,d=Fh(_e.current).createElement(o),d[hn]=i,d[jn]=s,Bn(d,o,s),fn(d),i.stateNode=d):i.memoizedState=Kx(i.type,s.memoizedProps,i.pendingProps,s.memoizedState),null;case 27:return he(i),s===null&&St&&(d=i.stateNode=qx(i.type,i.pendingProps,_e.current),Vn=i,zr=!0,p=qt,ra(i.type)?(a0=p,qt=Fr(d.firstChild)):qt=p),zn(s,i,i.pendingProps.children,o),Ch(s,i),s===null&&(i.flags|=4194304),i.child;case 5:return s===null&&St&&((p=d=qt)&&(d=L5(d,i.type,i.pendingProps,zr),d!==null?(i.stateNode=d,Vn=i,qt=Fr(d.firstChild),zr=!1,p=!0):p=!1),p||Hi(i)),he(i),p=i.type,v=i.pendingProps,S=s!==null?s.memoizedProps:null,d=v.children,t0(p,v)?d=null:S!==null&&t0(p,S)&&(i.flags|=32),i.memoizedState!==null&&(p=eg(s,i,Jk,null,null,o),xu._currentValue=p),Ch(s,i),zn(s,i,d,o),i.child;case 6:return s===null&&St&&((s=o=qt)&&(o=V5(o,i.pendingProps,zr),o!==null?(i.stateNode=o,Vn=i,qt=null,s=!0):s=!1),s||Hi(i)),null;case 13:return M2(s,i,o);case 4:return Ke(i,i.stateNode.containerInfo),d=i.pendingProps,s===null?i.child=oo(i,null,d,o):zn(s,i,d,o),i.child;case 11:return C2(s,i,i.type,i.pendingProps,o);case 7:return zn(s,i,i.pendingProps,o),i.child;case 8:return zn(s,i,i.pendingProps.children,o),i.child;case 12:return zn(s,i,i.pendingProps.children,o),i.child;case 10:return d=i.pendingProps,$i(i,i.type,d.value),zn(s,i,d.children,o),i.child;case 9:return p=i.type._context,d=i.pendingProps.children,ro(i),p=Un(p),d=d(p),i.flags|=1,zn(s,i,d,o),i.child;case 14:return T2(s,i,i.type,i.pendingProps,o);case 15:return k2(s,i,i.type,i.pendingProps,o);case 19:return O2(s,i,o);case 31:return a5(s,i,o);case 22:return N2(s,i,o,i.pendingProps);case 24:return ro(i),d=Un(pn),s===null?(p=$p(),p===null&&(p=Bt,v=Fp(),p.pooledCache=v,v.refCount++,v!==null&&(p.pooledCacheLanes|=o),p=v),i.memoizedState={parent:d,cache:p},Gp(i),$i(i,pn,p)):((s.lanes&o)!==0&&(Yp(s,i),eu(i,null,null,o),Zc()),p=s.memoizedState,v=i.memoizedState,p.parent!==d?(p={parent:d,cache:d},i.memoizedState=p,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=p),$i(i,pn,d)):(d=v.cache,$i(i,pn,d),d!==p.cache&&Bp(i,[pn],o,!0))),zn(s,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function li(s){s.flags|=4}function Ng(s,i,o,d,p){if((i=(s.mode&32)!==0)&&(i=!1),i){if(s.flags|=16777216,(p&335544128)===p)if(s.stateNode.complete)s.flags|=8192;else if(ux())s.flags|=8192;else throw ao=uh,qp}else s.flags&=-16777217}function V2(s,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Zx(i))if(ux())s.flags|=8192;else throw ao=uh,qp}function kh(s,i){i!==null&&(s.flags|=4),s.flags&16384&&(i=s.tag!==22?Dd():536870912,s.lanes|=i,Sl|=i)}function au(s,i){if(!St)switch(s.tailMode){case"hidden":i=s.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?s.tail=null:o.sibling=null;break;case"collapsed":o=s.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function Gt(s){var i=s.alternate!==null&&s.alternate.child===s.child,o=0,d=0;if(i)for(var p=s.child;p!==null;)o|=p.lanes|p.childLanes,d|=p.subtreeFlags&65011712,d|=p.flags&65011712,p.return=s,p=p.sibling;else for(p=s.child;p!==null;)o|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=s,p=p.sibling;return s.subtreeFlags|=d,s.childLanes=o,i}function l5(s,i,o){var d=i.pendingProps;switch(Op(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(i),null;case 1:return Gt(i),null;case 3:return o=i.stateNode,d=null,s!==null&&(d=s.memoizedState.cache),i.memoizedState.cache!==d&&(i.flags|=2048),si(pn),Ge(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(s===null||s.child===null)&&(ul(i)?li(i):s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Vp())),Gt(i),null;case 26:var p=i.type,v=i.memoizedState;return s===null?(li(i),v!==null?(Gt(i),V2(i,v)):(Gt(i),Ng(i,p,null,d,o))):v?v!==s.memoizedState?(li(i),Gt(i),V2(i,v)):(Gt(i),i.flags&=-16777217):(s=s.memoizedProps,s!==d&&li(i),Gt(i),Ng(i,p,s,d,o)),null;case 27:if(Ce(i),o=_e.current,p=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==d&&li(i);else{if(!d){if(i.stateNode===null)throw Error(r(166));return Gt(i),null}s=ge.current,ul(i)?vb(i):(s=qx(p,d,o),i.stateNode=s,li(i))}return Gt(i),null;case 5:if(Ce(i),p=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==d&&li(i);else{if(!d){if(i.stateNode===null)throw Error(r(166));return Gt(i),null}if(v=ge.current,ul(i))vb(i);else{var S=Fh(_e.current);switch(v){case 1:v=S.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:v=S.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":v=S.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":v=S.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":v=S.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof d.is=="string"?S.createElement("select",{is:d.is}):S.createElement("select"),d.multiple?v.multiple=!0:d.size&&(v.size=d.size);break;default:v=typeof d.is=="string"?S.createElement(p,{is:d.is}):S.createElement(p)}}v[hn]=i,v[jn]=d;e:for(S=i.child;S!==null;){if(S.tag===5||S.tag===6)v.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===i)break e;for(;S.sibling===null;){if(S.return===null||S.return===i)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}i.stateNode=v;e:switch(Bn(v,p,d),p){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&li(i)}}return Gt(i),Ng(i,i.type,s===null?null:s.memoizedProps,i.pendingProps,o),null;case 6:if(s&&i.stateNode!=null)s.memoizedProps!==d&&li(i);else{if(typeof d!="string"&&i.stateNode===null)throw Error(r(166));if(s=_e.current,ul(i)){if(s=i.stateNode,o=i.memoizedProps,d=null,p=Vn,p!==null)switch(p.tag){case 27:case 5:d=p.memoizedProps}s[hn]=i,s=!!(s.nodeValue===o||d!==null&&d.suppressHydrationWarning===!0||Mx(s.nodeValue,o)),s||Hi(i,!0)}else s=Fh(s).createTextNode(d),s[hn]=i,i.stateNode=s}return Gt(i),null;case 31:if(o=i.memoizedState,s===null||s.memoizedState!==null){if(d=ul(i),o!==null){if(s===null){if(!d)throw Error(r(318));if(s=i.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[hn]=i}else to(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Gt(i),s=!1}else o=Vp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=o),s=!0;if(!s)return i.flags&256?(Sr(i),i):(Sr(i),null);if((i.flags&128)!==0)throw Error(r(558))}return Gt(i),null;case 13:if(d=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(p=ul(i),d!==null&&d.dehydrated!==null){if(s===null){if(!p)throw Error(r(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[hn]=i}else to(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Gt(i),p=!1}else p=Vp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=p),p=!0;if(!p)return i.flags&256?(Sr(i),i):(Sr(i),null)}return Sr(i),(i.flags&128)!==0?(i.lanes=o,i):(o=d!==null,s=s!==null&&s.memoizedState!==null,o&&(d=i.child,p=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(p=d.alternate.memoizedState.cachePool.pool),v=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(v=d.memoizedState.cachePool.pool),v!==p&&(d.flags|=2048)),o!==s&&o&&(i.child.flags|=8192),kh(i,i.updateQueue),Gt(i),null);case 4:return Ge(),s===null&&Xg(i.stateNode.containerInfo),Gt(i),null;case 10:return si(i.type),Gt(i),null;case 19:if(W(an),d=i.memoizedState,d===null)return Gt(i),null;if(p=(i.flags&128)!==0,v=d.rendering,v===null)if(p)au(d,!1);else{if(nn!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(v=mh(s),v!==null){for(i.flags|=128,au(d,!1),s=v.updateQueue,i.updateQueue=s,kh(i,s),i.subtreeFlags=0,s=o,o=i.child;o!==null;)hb(o,s),o=o.sibling;return ae(an,an.current&1|2),St&&ni(i,d.treeForkCount),i.child}s=s.sibling}d.tail!==null&&Le()>Ih&&(i.flags|=128,p=!0,au(d,!1),i.lanes=4194304)}else{if(!p)if(s=mh(v),s!==null){if(i.flags|=128,p=!0,s=s.updateQueue,i.updateQueue=s,kh(i,s),au(d,!0),d.tail===null&&d.tailMode==="hidden"&&!v.alternate&&!St)return Gt(i),null}else 2*Le()-d.renderingStartTime>Ih&&o!==536870912&&(i.flags|=128,p=!0,au(d,!1),i.lanes=4194304);d.isBackwards?(v.sibling=i.child,i.child=v):(s=d.last,s!==null?s.sibling=v:i.child=v,d.last=v)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=Le(),s.sibling=null,o=an.current,ae(an,p?o&1|2:o&1),St&&ni(i,d.treeForkCount),s):(Gt(i),null);case 22:case 23:return Sr(i),Wp(),d=i.memoizedState!==null,s!==null?s.memoizedState!==null!==d&&(i.flags|=8192):d&&(i.flags|=8192),d?(o&536870912)!==0&&(i.flags&128)===0&&(Gt(i),i.subtreeFlags&6&&(i.flags|=8192)):Gt(i),o=i.updateQueue,o!==null&&kh(i,o.retryQueue),o=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),d=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),d!==o&&(i.flags|=2048),s!==null&&W(so),null;case 24:return o=null,s!==null&&(o=s.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),si(pn),Gt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function c5(s,i){switch(Op(i),i.tag){case 1:return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return si(pn),Ge(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 26:case 27:case 5:return Ce(i),null;case 31:if(i.memoizedState!==null){if(Sr(i),i.alternate===null)throw Error(r(340));to()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 13:if(Sr(i),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(r(340));to()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return W(an),null;case 4:return Ge(),null;case 10:return si(i.type),null;case 22:case 23:return Sr(i),Wp(),s!==null&&W(so),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 24:return si(pn),null;case 25:return null;default:return null}}function U2(s,i){switch(Op(i),i.tag){case 3:si(pn),Ge();break;case 26:case 27:case 5:Ce(i);break;case 4:Ge();break;case 31:i.memoizedState!==null&&Sr(i);break;case 13:Sr(i);break;case 19:W(an);break;case 10:si(i.type);break;case 22:case 23:Sr(i),Wp(),s!==null&&W(so);break;case 24:si(pn)}}function ou(s,i){try{var o=i.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var p=d.next;o=p;do{if((o.tag&s)===s){d=void 0;var v=o.create,S=o.inst;d=v(),S.destroy=d}o=o.next}while(o!==p)}}catch(M){Ot(i,i.return,M)}}function Xi(s,i,o){try{var d=i.updateQueue,p=d!==null?d.lastEffect:null;if(p!==null){var v=p.next;d=v;do{if((d.tag&s)===s){var S=d.inst,M=S.destroy;if(M!==void 0){S.destroy=void 0,p=i;var G=o,re=M;try{re()}catch(fe){Ot(p,G,fe)}}}d=d.next}while(d!==v)}}catch(fe){Ot(i,i.return,fe)}}function z2(s){var i=s.updateQueue;if(i!==null){var o=s.stateNode;try{Rb(i,o)}catch(d){Ot(s,s.return,d)}}}function B2(s,i,o){o.props=co(s.type,s.memoizedProps),o.state=s.memoizedState;try{o.componentWillUnmount()}catch(d){Ot(s,i,d)}}function lu(s,i){try{var o=s.ref;if(o!==null){switch(s.tag){case 26:case 27:case 5:var d=s.stateNode;break;case 30:d=s.stateNode;break;default:d=s.stateNode}typeof o=="function"?s.refCleanup=o(d):o.current=d}}catch(p){Ot(s,i,p)}}function Rs(s,i){var o=s.ref,d=s.refCleanup;if(o!==null)if(typeof d=="function")try{d()}catch(p){Ot(s,i,p)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(p){Ot(s,i,p)}else o.current=null}function F2(s){var i=s.type,o=s.memoizedProps,d=s.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&d.focus();break e;case"img":o.src?d.src=o.src:o.srcSet&&(d.srcset=o.srcSet)}}catch(p){Ot(s,s.return,p)}}function Ag(s,i,o){try{var d=s.stateNode;j5(d,s.type,o,i),d[jn]=i}catch(p){Ot(s,s.return,p)}}function H2(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&ra(s.type)||s.tag===4}function Rg(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||H2(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&ra(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function jg(s,i,o){var d=s.tag;if(d===5||d===6)s=s.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(s,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(s),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Xr));else if(d!==4&&(d===27&&ra(s.type)&&(o=s.stateNode,i=null),s=s.child,s!==null))for(jg(s,i,o),s=s.sibling;s!==null;)jg(s,i,o),s=s.sibling}function Nh(s,i,o){var d=s.tag;if(d===5||d===6)s=s.stateNode,i?o.insertBefore(s,i):o.appendChild(s);else if(d!==4&&(d===27&&ra(s.type)&&(o=s.stateNode),s=s.child,s!==null))for(Nh(s,i,o),s=s.sibling;s!==null;)Nh(s,i,o),s=s.sibling}function $2(s){var i=s.stateNode,o=s.memoizedProps;try{for(var d=s.type,p=i.attributes;p.length;)i.removeAttributeNode(p[0]);Bn(i,d,o),i[hn]=s,i[jn]=o}catch(v){Ot(s,s.return,v)}}var ci=!1,yn=!1,Ig=!1,q2=typeof WeakSet=="function"?WeakSet:Set,Dn=null;function u5(s,i){if(s=s.containerInfo,Zg=Qh,s=rb(s),Cp(s)){if("selectionStart"in s)var o={start:s.selectionStart,end:s.selectionEnd};else e:{o=(o=s.ownerDocument)&&o.defaultView||window;var d=o.getSelection&&o.getSelection();if(d&&d.rangeCount!==0){o=d.anchorNode;var p=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{o.nodeType,v.nodeType}catch{o=null;break e}var S=0,M=-1,G=-1,re=0,fe=0,be=s,se=null;t:for(;;){for(var le;be!==o||p!==0&&be.nodeType!==3||(M=S+p),be!==v||d!==0&&be.nodeType!==3||(G=S+d),be.nodeType===3&&(S+=be.nodeValue.length),(le=be.firstChild)!==null;)se=be,be=le;for(;;){if(be===s)break t;if(se===o&&++re===p&&(M=S),se===v&&++fe===d&&(G=S),(le=be.nextSibling)!==null)break;be=se,se=be.parentNode}be=le}o=M===-1||G===-1?null:{start:M,end:G}}else o=null}o=o||{start:0,end:0}}else o=null;for(e0={focusedElem:s,selectionRange:o},Qh=!1,Dn=i;Dn!==null;)if(i=Dn,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,Dn=s;else for(;Dn!==null;){switch(i=Dn,v=i.alternate,s=i.flags,i.tag){case 0:if((s&4)!==0&&(s=i.updateQueue,s=s!==null?s.events:null,s!==null))for(o=0;o<s.length;o++)p=s[o],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&v!==null){s=void 0,o=i,p=v.memoizedProps,v=v.memoizedState,d=o.stateNode;try{var Be=co(o.type,p);s=d.getSnapshotBeforeUpdate(Be,v),d.__reactInternalSnapshotBeforeUpdate=s}catch(Je){Ot(o,o.return,Je)}}break;case 3:if((s&1024)!==0){if(s=i.stateNode.containerInfo,o=s.nodeType,o===9)r0(s);else if(o===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":r0(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=i.sibling,s!==null){s.return=i.return,Dn=s;break}Dn=i.return}}function G2(s,i,o){var d=o.flags;switch(o.tag){case 0:case 11:case 15:di(s,o),d&4&&ou(5,o);break;case 1:if(di(s,o),d&4)if(s=o.stateNode,i===null)try{s.componentDidMount()}catch(S){Ot(o,o.return,S)}else{var p=co(o.type,i.memoizedProps);i=i.memoizedState;try{s.componentDidUpdate(p,i,s.__reactInternalSnapshotBeforeUpdate)}catch(S){Ot(o,o.return,S)}}d&64&&z2(o),d&512&&lu(o,o.return);break;case 3:if(di(s,o),d&64&&(s=o.updateQueue,s!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{Rb(s,i)}catch(S){Ot(o,o.return,S)}}break;case 27:i===null&&d&4&&$2(o);case 26:case 5:di(s,o),i===null&&d&4&&F2(o),d&512&&lu(o,o.return);break;case 12:di(s,o);break;case 31:di(s,o),d&4&&Q2(s,o);break;case 13:di(s,o),d&4&&X2(s,o),d&64&&(s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(o=b5.bind(null,o),U5(s,o))));break;case 22:if(d=o.memoizedState!==null||ci,!d){i=i!==null&&i.memoizedState!==null||yn,p=ci;var v=yn;ci=d,(yn=i)&&!v?hi(s,o,(o.subtreeFlags&8772)!==0):di(s,o),ci=p,yn=v}break;case 30:break;default:di(s,o)}}function Y2(s){var i=s.alternate;i!==null&&(s.alternate=null,Y2(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&Yo(i)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Jt=null,lr=!1;function ui(s,i,o){for(o=o.child;o!==null;)K2(s,i,o),o=o.sibling}function K2(s,i,o){if(mt&&typeof mt.onCommitFiberUnmount=="function")try{mt.onCommitFiberUnmount(Ht,o)}catch{}switch(o.tag){case 26:yn||Rs(o,i),ui(s,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:yn||Rs(o,i);var d=Jt,p=lr;ra(o.type)&&(Jt=o.stateNode,lr=!1),ui(s,i,o),vu(o.stateNode),Jt=d,lr=p;break;case 5:yn||Rs(o,i);case 6:if(d=Jt,p=lr,Jt=null,ui(s,i,o),Jt=d,lr=p,Jt!==null)if(lr)try{(Jt.nodeType===9?Jt.body:Jt.nodeName==="HTML"?Jt.ownerDocument.body:Jt).removeChild(o.stateNode)}catch(v){Ot(o,i,v)}else try{Jt.removeChild(o.stateNode)}catch(v){Ot(o,i,v)}break;case 18:Jt!==null&&(lr?(s=Jt,zx(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,o.stateNode),jl(s)):zx(Jt,o.stateNode));break;case 4:d=Jt,p=lr,Jt=o.stateNode.containerInfo,lr=!0,ui(s,i,o),Jt=d,lr=p;break;case 0:case 11:case 14:case 15:Xi(2,o,i),yn||Xi(4,o,i),ui(s,i,o);break;case 1:yn||(Rs(o,i),d=o.stateNode,typeof d.componentWillUnmount=="function"&&B2(o,i,d)),ui(s,i,o);break;case 21:ui(s,i,o);break;case 22:yn=(d=yn)||o.memoizedState!==null,ui(s,i,o),yn=d;break;default:ui(s,i,o)}}function Q2(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{jl(s)}catch(o){Ot(i,i.return,o)}}}function X2(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{jl(s)}catch(o){Ot(i,i.return,o)}}function d5(s){switch(s.tag){case 31:case 13:case 19:var i=s.stateNode;return i===null&&(i=s.stateNode=new q2),i;case 22:return s=s.stateNode,i=s._retryCache,i===null&&(i=s._retryCache=new q2),i;default:throw Error(r(435,s.tag))}}function Ah(s,i){var o=d5(s);i.forEach(function(d){if(!o.has(d)){o.add(d);var p=x5.bind(null,s,d);d.then(p,p)}})}function cr(s,i){var o=i.deletions;if(o!==null)for(var d=0;d<o.length;d++){var p=o[d],v=s,S=i,M=S;e:for(;M!==null;){switch(M.tag){case 27:if(ra(M.type)){Jt=M.stateNode,lr=!1;break e}break;case 5:Jt=M.stateNode,lr=!1;break e;case 3:case 4:Jt=M.stateNode.containerInfo,lr=!0;break e}M=M.return}if(Jt===null)throw Error(r(160));K2(v,S,p),Jt=null,lr=!1,v=p.alternate,v!==null&&(v.return=null),p.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)W2(i,s),i=i.sibling}var ns=null;function W2(s,i){var o=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:cr(i,s),ur(s),d&4&&(Xi(3,s,s.return),ou(3,s),Xi(5,s,s.return));break;case 1:cr(i,s),ur(s),d&512&&(yn||o===null||Rs(o,o.return)),d&64&&ci&&(s=s.updateQueue,s!==null&&(d=s.callbacks,d!==null&&(o=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=o===null?d:o.concat(d))));break;case 26:var p=ns;if(cr(i,s),ur(s),d&512&&(yn||o===null||Rs(o,o.return)),d&4){var v=o!==null?o.memoizedState:null;if(d=s.memoizedState,o===null)if(d===null)if(s.stateNode===null){e:{d=s.type,o=s.memoizedProps,p=p.ownerDocument||p;t:switch(d){case"title":v=p.getElementsByTagName("title")[0],(!v||v[gs]||v[hn]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=p.createElement(d),p.head.insertBefore(v,p.querySelector("head > title"))),Bn(v,d,o),v[hn]=s,fn(v),d=v;break e;case"link":var S=Wx("link","href",p).get(d+(o.href||""));if(S){for(var M=0;M<S.length;M++)if(v=S[M],v.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&v.getAttribute("rel")===(o.rel==null?null:o.rel)&&v.getAttribute("title")===(o.title==null?null:o.title)&&v.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){S.splice(M,1);break t}}v=p.createElement(d),Bn(v,d,o),p.head.appendChild(v);break;case"meta":if(S=Wx("meta","content",p).get(d+(o.content||""))){for(M=0;M<S.length;M++)if(v=S[M],v.getAttribute("content")===(o.content==null?null:""+o.content)&&v.getAttribute("name")===(o.name==null?null:o.name)&&v.getAttribute("property")===(o.property==null?null:o.property)&&v.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&v.getAttribute("charset")===(o.charSet==null?null:o.charSet)){S.splice(M,1);break t}}v=p.createElement(d),Bn(v,d,o),p.head.appendChild(v);break;default:throw Error(r(468,d))}v[hn]=s,fn(v),d=v}s.stateNode=d}else Jx(p,s.type,s.stateNode);else s.stateNode=Xx(p,d,s.memoizedProps);else v!==d?(v===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):v.count--,d===null?Jx(p,s.type,s.stateNode):Xx(p,d,s.memoizedProps)):d===null&&s.stateNode!==null&&Ag(s,s.memoizedProps,o.memoizedProps)}break;case 27:cr(i,s),ur(s),d&512&&(yn||o===null||Rs(o,o.return)),o!==null&&d&4&&Ag(s,s.memoizedProps,o.memoizedProps);break;case 5:if(cr(i,s),ur(s),d&512&&(yn||o===null||Rs(o,o.return)),s.flags&32){p=s.stateNode;try{or(p,"")}catch(Be){Ot(s,s.return,Be)}}d&4&&s.stateNode!=null&&(p=s.memoizedProps,Ag(s,p,o!==null?o.memoizedProps:p)),d&1024&&(Ig=!0);break;case 6:if(cr(i,s),ur(s),d&4){if(s.stateNode===null)throw Error(r(162));d=s.memoizedProps,o=s.stateNode;try{o.nodeValue=d}catch(Be){Ot(s,s.return,Be)}}break;case 3:if(qh=null,p=ns,ns=Hh(i.containerInfo),cr(i,s),ns=p,ur(s),d&4&&o!==null&&o.memoizedState.isDehydrated)try{jl(i.containerInfo)}catch(Be){Ot(s,s.return,Be)}Ig&&(Ig=!1,J2(s));break;case 4:d=ns,ns=Hh(s.stateNode.containerInfo),cr(i,s),ur(s),ns=d;break;case 12:cr(i,s),ur(s);break;case 31:cr(i,s),ur(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Ah(s,d)));break;case 13:cr(i,s),ur(s),s.child.flags&8192&&s.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(jh=Le()),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Ah(s,d)));break;case 22:p=s.memoizedState!==null;var G=o!==null&&o.memoizedState!==null,re=ci,fe=yn;if(ci=re||p,yn=fe||G,cr(i,s),yn=fe,ci=re,ur(s),d&8192)e:for(i=s.stateNode,i._visibility=p?i._visibility&-2:i._visibility|1,p&&(o===null||G||ci||yn||uo(s)),o=null,i=s;;){if(i.tag===5||i.tag===26){if(o===null){G=o=i;try{if(v=G.stateNode,p)S=v.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{M=G.stateNode;var be=G.memoizedProps.style,se=be!=null&&be.hasOwnProperty("display")?be.display:null;M.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(Be){Ot(G,G.return,Be)}}}else if(i.tag===6){if(o===null){G=i;try{G.stateNode.nodeValue=p?"":G.memoizedProps}catch(Be){Ot(G,G.return,Be)}}}else if(i.tag===18){if(o===null){G=i;try{var le=G.stateNode;p?Bx(le,!0):Bx(G.stateNode,!1)}catch(Be){Ot(G,G.return,Be)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===s)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}d&4&&(d=s.updateQueue,d!==null&&(o=d.retryQueue,o!==null&&(d.retryQueue=null,Ah(s,o))));break;case 19:cr(i,s),ur(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Ah(s,d)));break;case 30:break;case 21:break;default:cr(i,s),ur(s)}}function ur(s){var i=s.flags;if(i&2){try{for(var o,d=s.return;d!==null;){if(H2(d)){o=d;break}d=d.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var p=o.stateNode,v=Rg(s);Nh(s,v,p);break;case 5:var S=o.stateNode;o.flags&32&&(or(S,""),o.flags&=-33);var M=Rg(s);Nh(s,M,S);break;case 3:case 4:var G=o.stateNode.containerInfo,re=Rg(s);jg(s,re,G);break;default:throw Error(r(161))}}catch(fe){Ot(s,s.return,fe)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function J2(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var i=s;J2(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),s=s.sibling}}function di(s,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)G2(s,i.alternate,i),i=i.sibling}function uo(s){for(s=s.child;s!==null;){var i=s;switch(i.tag){case 0:case 11:case 14:case 15:Xi(4,i,i.return),uo(i);break;case 1:Rs(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&B2(i,i.return,o),uo(i);break;case 27:vu(i.stateNode);case 26:case 5:Rs(i,i.return),uo(i);break;case 22:i.memoizedState===null&&uo(i);break;case 30:uo(i);break;default:uo(i)}s=s.sibling}}function hi(s,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var d=i.alternate,p=s,v=i,S=v.flags;switch(v.tag){case 0:case 11:case 15:hi(p,v,o),ou(4,v);break;case 1:if(hi(p,v,o),d=v,p=d.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(re){Ot(d,d.return,re)}if(d=v,p=d.updateQueue,p!==null){var M=d.stateNode;try{var G=p.shared.hiddenCallbacks;if(G!==null)for(p.shared.hiddenCallbacks=null,p=0;p<G.length;p++)Ab(G[p],M)}catch(re){Ot(d,d.return,re)}}o&&S&64&&z2(v),lu(v,v.return);break;case 27:$2(v);case 26:case 5:hi(p,v,o),o&&d===null&&S&4&&F2(v),lu(v,v.return);break;case 12:hi(p,v,o);break;case 31:hi(p,v,o),o&&S&4&&Q2(p,v);break;case 13:hi(p,v,o),o&&S&4&&X2(p,v);break;case 22:v.memoizedState===null&&hi(p,v,o),lu(v,v.return);break;case 30:break;default:hi(p,v,o)}i=i.sibling}}function Dg(s,i){var o=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==o&&(s!=null&&s.refCount++,o!=null&&Kc(o))}function Mg(s,i){s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&Kc(s))}function rs(s,i,o,d){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Z2(s,i,o,d),i=i.sibling}function Z2(s,i,o,d){var p=i.flags;switch(i.tag){case 0:case 11:case 15:rs(s,i,o,d),p&2048&&ou(9,i);break;case 1:rs(s,i,o,d);break;case 3:rs(s,i,o,d),p&2048&&(s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&Kc(s)));break;case 12:if(p&2048){rs(s,i,o,d),s=i.stateNode;try{var v=i.memoizedProps,S=v.id,M=v.onPostCommit;typeof M=="function"&&M(S,i.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(G){Ot(i,i.return,G)}}else rs(s,i,o,d);break;case 31:rs(s,i,o,d);break;case 13:rs(s,i,o,d);break;case 23:break;case 22:v=i.stateNode,S=i.alternate,i.memoizedState!==null?v._visibility&2?rs(s,i,o,d):cu(s,i):v._visibility&2?rs(s,i,o,d):(v._visibility|=2,xl(s,i,o,d,(i.subtreeFlags&10256)!==0||!1)),p&2048&&Dg(S,i);break;case 24:rs(s,i,o,d),p&2048&&Mg(i.alternate,i);break;default:rs(s,i,o,d)}}function xl(s,i,o,d,p){for(p=p&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var v=s,S=i,M=o,G=d,re=S.flags;switch(S.tag){case 0:case 11:case 15:xl(v,S,M,G,p),ou(8,S);break;case 23:break;case 22:var fe=S.stateNode;S.memoizedState!==null?fe._visibility&2?xl(v,S,M,G,p):cu(v,S):(fe._visibility|=2,xl(v,S,M,G,p)),p&&re&2048&&Dg(S.alternate,S);break;case 24:xl(v,S,M,G,p),p&&re&2048&&Mg(S.alternate,S);break;default:xl(v,S,M,G,p)}i=i.sibling}}function cu(s,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=s,d=i,p=d.flags;switch(d.tag){case 22:cu(o,d),p&2048&&Dg(d.alternate,d);break;case 24:cu(o,d),p&2048&&Mg(d.alternate,d);break;default:cu(o,d)}i=i.sibling}}var uu=8192;function _l(s,i,o){if(s.subtreeFlags&uu)for(s=s.child;s!==null;)ex(s,i,o),s=s.sibling}function ex(s,i,o){switch(s.tag){case 26:_l(s,i,o),s.flags&uu&&s.memoizedState!==null&&W5(o,ns,s.memoizedState,s.memoizedProps);break;case 5:_l(s,i,o);break;case 3:case 4:var d=ns;ns=Hh(s.stateNode.containerInfo),_l(s,i,o),ns=d;break;case 22:s.memoizedState===null&&(d=s.alternate,d!==null&&d.memoizedState!==null?(d=uu,uu=16777216,_l(s,i,o),uu=d):_l(s,i,o));break;default:_l(s,i,o)}}function tx(s){var i=s.alternate;if(i!==null&&(s=i.child,s!==null)){i.child=null;do i=s.sibling,s.sibling=null,s=i;while(s!==null)}}function du(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var d=i[o];Dn=d,rx(d,s)}tx(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)nx(s),s=s.sibling}function nx(s){switch(s.tag){case 0:case 11:case 15:du(s),s.flags&2048&&Xi(9,s,s.return);break;case 3:du(s);break;case 12:du(s);break;case 22:var i=s.stateNode;s.memoizedState!==null&&i._visibility&2&&(s.return===null||s.return.tag!==13)?(i._visibility&=-3,Rh(s)):du(s);break;default:du(s)}}function Rh(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var d=i[o];Dn=d,rx(d,s)}tx(s)}for(s=s.child;s!==null;){switch(i=s,i.tag){case 0:case 11:case 15:Xi(8,i,i.return),Rh(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Rh(i));break;default:Rh(i)}s=s.sibling}}function rx(s,i){for(;Dn!==null;){var o=Dn;switch(o.tag){case 0:case 11:case 15:Xi(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var d=o.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Kc(o.memoizedState.cache)}if(d=o.child,d!==null)d.return=o,Dn=d;else e:for(o=s;Dn!==null;){d=Dn;var p=d.sibling,v=d.return;if(Y2(d),d===o){Dn=null;break e}if(p!==null){p.return=v,Dn=p;break e}Dn=v}}}var h5={getCacheForType:function(s){var i=Un(pn),o=i.data.get(s);return o===void 0&&(o=s(),i.data.set(s,o)),o},cacheSignal:function(){return Un(pn).controller.signal}},f5=typeof WeakMap=="function"?WeakMap:Map,jt=0,Bt=null,pt=null,vt=0,Pt=0,Er=null,Wi=!1,wl=!1,Pg=!1,fi=0,nn=0,Ji=0,ho=0,Og=0,Cr=0,Sl=0,hu=null,dr=null,Lg=!1,jh=0,sx=0,Ih=1/0,Dh=null,Zi=null,kn=0,ea=null,El=null,mi=0,Vg=0,Ug=null,ix=null,fu=0,zg=null;function Tr(){return(jt&2)!==0&&vt!==0?vt&-vt:Y.T!==null?Gg():Md()}function ax(){if(Cr===0)if((vt&536870912)===0||St){var s=Va;Va<<=1,(Va&3932160)===0&&(Va=262144),Cr=s}else Cr=536870912;return s=wr.current,s!==null&&(s.flags|=32),Cr}function hr(s,i,o){(s===Bt&&(Pt===2||Pt===9)||s.cancelPendingCommit!==null)&&(Cl(s,0),ta(s,vt,Cr,!1)),Ua(s,o),((jt&2)===0||s!==Bt)&&(s===Bt&&((jt&2)===0&&(ho|=o),nn===4&&ta(s,vt,Cr,!1)),js(s))}function ox(s,i,o){if((jt&6)!==0)throw Error(r(327));var d=!o&&(i&127)===0&&(i&s.expiredLanes)===0||Yr(s,i),p=d?g5(s,i):Fg(s,i,!0),v=d;do{if(p===0){wl&&!d&&ta(s,i,0,!1);break}else{if(o=s.current.alternate,v&&!m5(o)){p=Fg(s,i,!1),v=!1;continue}if(p===2){if(v=i,s.errorRecoveryDisabledLanes&v)var S=0;else S=s.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){i=S;e:{var M=s;p=hu;var G=M.current.memoizedState.isDehydrated;if(G&&(Cl(M,S).flags|=256),S=Fg(M,S,!1),S!==2){if(Pg&&!G){M.errorRecoveryDisabledLanes|=v,ho|=v,p=4;break e}v=dr,dr=p,v!==null&&(dr===null?dr=v:dr.push.apply(dr,v))}p=S}if(v=!1,p!==2)continue}}if(p===1){Cl(s,0),ta(s,i,0,!0);break}e:{switch(d=s,v=p,v){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:ta(d,i,Cr,!Wi);break e;case 2:dr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(p=jh+300-Le(),10<p)){if(ta(d,i,Cr,!Wi),fs(d,0,!0)!==0)break e;mi=i,d.timeoutHandle=Vx(lx.bind(null,d,o,dr,Dh,Lg,i,Cr,ho,Sl,Wi,v,"Throttled",-0,0),p);break e}lx(d,o,dr,Dh,Lg,i,Cr,ho,Sl,Wi,v,null,-0,0)}}break}while(!0);js(s)}function lx(s,i,o,d,p,v,S,M,G,re,fe,be,se,le){if(s.timeoutHandle=-1,be=i.subtreeFlags,be&8192||(be&16785408)===16785408){be={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xr},ex(i,v,be);var Be=(v&62914560)===v?jh-Le():(v&4194048)===v?sx-Le():0;if(Be=J5(be,Be),Be!==null){mi=v,s.cancelPendingCommit=Be(gx.bind(null,s,i,v,o,d,p,S,M,G,fe,be,null,se,le)),ta(s,v,S,!re);return}}gx(s,i,v,o,d,p,S,M,G)}function m5(s){for(var i=s;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var d=0;d<o.length;d++){var p=o[d],v=p.getSnapshot;p=p.value;try{if(!xr(v(),p))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ta(s,i,o,d){i&=~Og,i&=~ho,s.suspendedLanes|=i,s.pingedLanes&=~i,d&&(s.warmLanes|=i),d=s.expirationTimes;for(var p=i;0<p;){var v=31-Xt(p),S=1<<v;d[v]=-1,p&=~S}o!==0&&za(s,o,i)}function Mh(){return(jt&6)===0?(mu(0),!1):!0}function Bg(){if(pt!==null){if(Pt===0)var s=pt.return;else s=pt,ri=no=null,rg(s),pl=null,Xc=0,s=pt;for(;s!==null;)U2(s.alternate,s),s=s.return;pt=null}}function Cl(s,i){var o=s.timeoutHandle;o!==-1&&(s.timeoutHandle=-1,M5(o)),o=s.cancelPendingCommit,o!==null&&(s.cancelPendingCommit=null,o()),mi=0,Bg(),Bt=s,pt=o=ti(s.current,null),vt=i,Pt=0,Er=null,Wi=!1,wl=Yr(s,i),Pg=!1,Sl=Cr=Og=ho=Ji=nn=0,dr=hu=null,Lg=!1,(i&8)!==0&&(i|=i&32);var d=s.entangledLanes;if(d!==0)for(s=s.entanglements,d&=i;0<d;){var p=31-Xt(d),v=1<<p;i|=s[p],d&=~v}return fi=i,th(),o}function cx(s,i){lt=null,Y.H=su,i===ml||i===ch?(i=Cb(),Pt=3):i===qp?(i=Cb(),Pt=4):Pt=i===bg?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Er=i,pt===null&&(nn=1,Sh(s,Lr(i,s.current)))}function ux(){var s=wr.current;return s===null?!0:(vt&4194048)===vt?Br===null:(vt&62914560)===vt||(vt&536870912)!==0?s===Br:!1}function dx(){var s=Y.H;return Y.H=su,s===null?su:s}function hx(){var s=Y.A;return Y.A=h5,s}function Ph(){nn=4,Wi||(vt&4194048)!==vt&&wr.current!==null||(wl=!0),(Ji&134217727)===0&&(ho&134217727)===0||Bt===null||ta(Bt,vt,Cr,!1)}function Fg(s,i,o){var d=jt;jt|=2;var p=dx(),v=hx();(Bt!==s||vt!==i)&&(Dh=null,Cl(s,i)),i=!1;var S=nn;e:do try{if(Pt!==0&&pt!==null){var M=pt,G=Er;switch(Pt){case 8:Bg(),S=6;break e;case 3:case 2:case 9:case 6:wr.current===null&&(i=!0);var re=Pt;if(Pt=0,Er=null,Tl(s,M,G,re),o&&wl){S=0;break e}break;default:re=Pt,Pt=0,Er=null,Tl(s,M,G,re)}}p5(),S=nn;break}catch(fe){cx(s,fe)}while(!0);return i&&s.shellSuspendCounter++,ri=no=null,jt=d,Y.H=p,Y.A=v,pt===null&&(Bt=null,vt=0,th()),S}function p5(){for(;pt!==null;)fx(pt)}function g5(s,i){var o=jt;jt|=2;var d=dx(),p=hx();Bt!==s||vt!==i?(Dh=null,Ih=Le()+500,Cl(s,i)):wl=Yr(s,i);e:do try{if(Pt!==0&&pt!==null){i=pt;var v=Er;t:switch(Pt){case 1:Pt=0,Er=null,Tl(s,i,v,1);break;case 2:case 9:if(Sb(v)){Pt=0,Er=null,mx(i);break}i=function(){Pt!==2&&Pt!==9||Bt!==s||(Pt=7),js(s)},v.then(i,i);break e;case 3:Pt=7;break e;case 4:Pt=5;break e;case 7:Sb(v)?(Pt=0,Er=null,mx(i)):(Pt=0,Er=null,Tl(s,i,v,7));break;case 5:var S=null;switch(pt.tag){case 26:S=pt.memoizedState;case 5:case 27:var M=pt;if(S?Zx(S):M.stateNode.complete){Pt=0,Er=null;var G=M.sibling;if(G!==null)pt=G;else{var re=M.return;re!==null?(pt=re,Oh(re)):pt=null}break t}}Pt=0,Er=null,Tl(s,i,v,5);break;case 6:Pt=0,Er=null,Tl(s,i,v,6);break;case 8:Bg(),nn=6;break e;default:throw Error(r(462))}}v5();break}catch(fe){cx(s,fe)}while(!0);return ri=no=null,Y.H=d,Y.A=p,jt=o,pt!==null?0:(Bt=null,vt=0,th(),nn)}function v5(){for(;pt!==null&&!Oe();)fx(pt)}function fx(s){var i=L2(s.alternate,s,fi);s.memoizedProps=s.pendingProps,i===null?Oh(s):pt=i}function mx(s){var i=s,o=i.alternate;switch(i.tag){case 15:case 0:i=j2(o,i,i.pendingProps,i.type,void 0,vt);break;case 11:i=j2(o,i,i.pendingProps,i.type.render,i.ref,vt);break;case 5:rg(i);default:U2(o,i),i=pt=hb(i,fi),i=L2(o,i,fi)}s.memoizedProps=s.pendingProps,i===null?Oh(s):pt=i}function Tl(s,i,o,d){ri=no=null,rg(i),pl=null,Xc=0;var p=i.return;try{if(i5(s,p,i,o,vt)){nn=1,Sh(s,Lr(o,s.current)),pt=null;return}}catch(v){if(p!==null)throw pt=p,v;nn=1,Sh(s,Lr(o,s.current)),pt=null;return}i.flags&32768?(St||d===1?s=!0:wl||(vt&536870912)!==0?s=!1:(Wi=s=!0,(d===2||d===9||d===3||d===6)&&(d=wr.current,d!==null&&d.tag===13&&(d.flags|=16384))),px(i,s)):Oh(i)}function Oh(s){var i=s;do{if((i.flags&32768)!==0){px(i,Wi);return}s=i.return;var o=l5(i.alternate,i,fi);if(o!==null){pt=o;return}if(i=i.sibling,i!==null){pt=i;return}pt=i=s}while(i!==null);nn===0&&(nn=5)}function px(s,i){do{var o=c5(s.alternate,s);if(o!==null){o.flags&=32767,pt=o;return}if(o=s.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(s=s.sibling,s!==null)){pt=s;return}pt=s=o}while(s!==null);nn=6,pt=null}function gx(s,i,o,d,p,v,S,M,G){s.cancelPendingCommit=null;do Lh();while(kn!==0);if((jt&6)!==0)throw Error(r(327));if(i!==null){if(i===s.current)throw Error(r(177));if(v=i.lanes|i.childLanes,v|=Rp,_p(s,o,v,S,M,G),s===Bt&&(pt=Bt=null,vt=0),El=i,ea=s,mi=o,Vg=v,Ug=p,ix=d,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,_5(Ee,function(){return _x(),null})):(s.callbackNode=null,s.callbackPriority=0),d=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||d){d=Y.T,Y.T=null,p=Z.p,Z.p=2,S=jt,jt|=4;try{u5(s,i,o)}finally{jt=S,Z.p=p,Y.T=d}}kn=1,vx(),yx(),bx()}}function vx(){if(kn===1){kn=0;var s=ea,i=El,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=Y.T,Y.T=null;var d=Z.p;Z.p=2;var p=jt;jt|=4;try{W2(i,s);var v=e0,S=rb(s.containerInfo),M=v.focusedElem,G=v.selectionRange;if(S!==M&&M&&M.ownerDocument&&nb(M.ownerDocument.documentElement,M)){if(G!==null&&Cp(M)){var re=G.start,fe=G.end;if(fe===void 0&&(fe=re),"selectionStart"in M)M.selectionStart=re,M.selectionEnd=Math.min(fe,M.value.length);else{var be=M.ownerDocument||document,se=be&&be.defaultView||window;if(se.getSelection){var le=se.getSelection(),Be=M.textContent.length,Je=Math.min(G.start,Be),zt=G.end===void 0?Je:Math.min(G.end,Be);!le.extend&&Je>zt&&(S=zt,zt=Je,Je=S);var X=tb(M,Je),Q=tb(M,zt);if(X&&Q&&(le.rangeCount!==1||le.anchorNode!==X.node||le.anchorOffset!==X.offset||le.focusNode!==Q.node||le.focusOffset!==Q.offset)){var ne=be.createRange();ne.setStart(X.node,X.offset),le.removeAllRanges(),Je>zt?(le.addRange(ne),le.extend(Q.node,Q.offset)):(ne.setEnd(Q.node,Q.offset),le.addRange(ne))}}}}for(be=[],le=M;le=le.parentNode;)le.nodeType===1&&be.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<be.length;M++){var ve=be[M];ve.element.scrollLeft=ve.left,ve.element.scrollTop=ve.top}}Qh=!!Zg,e0=Zg=null}finally{jt=p,Z.p=d,Y.T=o}}s.current=i,kn=2}}function yx(){if(kn===2){kn=0;var s=ea,i=El,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=Y.T,Y.T=null;var d=Z.p;Z.p=2;var p=jt;jt|=4;try{G2(s,i.alternate,i)}finally{jt=p,Z.p=d,Y.T=o}}kn=3}}function bx(){if(kn===4||kn===3){kn=0,Fe();var s=ea,i=El,o=mi,d=ix;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?kn=5:(kn=0,El=ea=null,xx(s,s.pendingLanes));var p=s.pendingLanes;if(p===0&&(Zi=null),Ws(o),i=i.stateNode,mt&&typeof mt.onCommitFiberRoot=="function")try{mt.onCommitFiberRoot(Ht,i,void 0,(i.current.flags&128)===128)}catch{}if(d!==null){i=Y.T,p=Z.p,Z.p=2,Y.T=null;try{for(var v=s.onRecoverableError,S=0;S<d.length;S++){var M=d[S];v(M.value,{componentStack:M.stack})}}finally{Y.T=i,Z.p=p}}(mi&3)!==0&&Lh(),js(s),p=s.pendingLanes,(o&261930)!==0&&(p&42)!==0?s===zg?fu++:(fu=0,zg=s):fu=0,mu(0)}}function xx(s,i){(s.pooledCacheLanes&=i)===0&&(i=s.pooledCache,i!=null&&(s.pooledCache=null,Kc(i)))}function Lh(){return vx(),yx(),bx(),_x()}function _x(){if(kn!==5)return!1;var s=ea,i=Vg;Vg=0;var o=Ws(mi),d=Y.T,p=Z.p;try{Z.p=32>o?32:o,Y.T=null,o=Ug,Ug=null;var v=ea,S=mi;if(kn=0,El=ea=null,mi=0,(jt&6)!==0)throw Error(r(331));var M=jt;if(jt|=4,nx(v.current),Z2(v,v.current,S,o),jt=M,mu(0,!1),mt&&typeof mt.onPostCommitFiberRoot=="function")try{mt.onPostCommitFiberRoot(Ht,v)}catch{}return!0}finally{Z.p=p,Y.T=d,xx(s,i)}}function wx(s,i,o){i=Lr(o,i),i=yg(s.stateNode,i,2),s=Yi(s,i,2),s!==null&&(Ua(s,2),js(s))}function Ot(s,i,o){if(s.tag===3)wx(s,s,o);else for(;i!==null;){if(i.tag===3){wx(i,s,o);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Zi===null||!Zi.has(d))){s=Lr(o,s),o=S2(2),d=Yi(i,o,2),d!==null&&(E2(o,d,i,s),Ua(d,2),js(d));break}}i=i.return}}function Hg(s,i,o){var d=s.pingCache;if(d===null){d=s.pingCache=new f5;var p=new Set;d.set(i,p)}else p=d.get(i),p===void 0&&(p=new Set,d.set(i,p));p.has(o)||(Pg=!0,p.add(o),s=y5.bind(null,s,i,o),i.then(s,s))}function y5(s,i,o){var d=s.pingCache;d!==null&&d.delete(i),s.pingedLanes|=s.suspendedLanes&o,s.warmLanes&=~o,Bt===s&&(vt&o)===o&&(nn===4||nn===3&&(vt&62914560)===vt&&300>Le()-jh?(jt&2)===0&&Cl(s,0):Og|=o,Sl===vt&&(Sl=0)),js(s)}function Sx(s,i){i===0&&(i=Dd()),s=Za(s,i),s!==null&&(Ua(s,i),js(s))}function b5(s){var i=s.memoizedState,o=0;i!==null&&(o=i.retryLane),Sx(s,o)}function x5(s,i){var o=0;switch(s.tag){case 31:case 13:var d=s.stateNode,p=s.memoizedState;p!==null&&(o=p.retryLane);break;case 19:d=s.stateNode;break;case 22:d=s.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(i),Sx(s,o)}function _5(s,i){return ee(s,i)}var Vh=null,kl=null,$g=!1,Uh=!1,qg=!1,na=0;function js(s){s!==kl&&s.next===null&&(kl===null?Vh=kl=s:kl=kl.next=s),Uh=!0,$g||($g=!0,S5())}function mu(s,i){if(!qg&&Uh){qg=!0;do for(var o=!1,d=Vh;d!==null;){if(s!==0){var p=d.pendingLanes;if(p===0)var v=0;else{var S=d.suspendedLanes,M=d.pingedLanes;v=(1<<31-Xt(42|s)+1)-1,v&=p&~(S&~M),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(o=!0,kx(d,v))}else v=vt,v=fs(d,d===Bt?v:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(v&3)===0||Yr(d,v)||(o=!0,kx(d,v));d=d.next}while(o);qg=!1}}function w5(){Ex()}function Ex(){Uh=$g=!1;var s=0;na!==0&&D5()&&(s=na);for(var i=Le(),o=null,d=Vh;d!==null;){var p=d.next,v=Cx(d,i);v===0?(d.next=null,o===null?Vh=p:o.next=p,p===null&&(kl=o)):(o=d,(s!==0||(v&3)!==0)&&(Uh=!0)),d=p}kn!==0&&kn!==5||mu(s),na!==0&&(na=0)}function Cx(s,i){for(var o=s.suspendedLanes,d=s.pingedLanes,p=s.expirationTimes,v=s.pendingLanes&-62914561;0<v;){var S=31-Xt(v),M=1<<S,G=p[S];G===-1?((M&o)===0||(M&d)!==0)&&(p[S]=xp(M,i)):G<=i&&(s.expiredLanes|=M),v&=~M}if(i=Bt,o=vt,o=fs(s,s===i?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d=s.callbackNode,o===0||s===i&&(Pt===2||Pt===9)||s.cancelPendingCommit!==null)return d!==null&&d!==null&&ke(d),s.callbackNode=null,s.callbackPriority=0;if((o&3)===0||Yr(s,o)){if(i=o&-o,i===s.callbackPriority)return i;switch(d!==null&&ke(d),Ws(o)){case 2:case 8:o=Qt;break;case 32:o=Ee;break;case 268435456:o=nt;break;default:o=Ee}return d=Tx.bind(null,s),o=ee(o,d),s.callbackPriority=i,s.callbackNode=o,i}return d!==null&&d!==null&&ke(d),s.callbackPriority=2,s.callbackNode=null,2}function Tx(s,i){if(kn!==0&&kn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var o=s.callbackNode;if(Lh()&&s.callbackNode!==o)return null;var d=vt;return d=fs(s,s===Bt?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d===0?null:(ox(s,d,i),Cx(s,Le()),s.callbackNode!=null&&s.callbackNode===o?Tx.bind(null,s):null)}function kx(s,i){if(Lh())return null;ox(s,i,!0)}function S5(){P5(function(){(jt&6)!==0?ee(Tt,w5):Ex()})}function Gg(){if(na===0){var s=hl;s===0&&(s=ds,ds<<=1,(ds&261888)===0&&(ds=256)),na=s}return na}function Nx(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Wo(""+s)}function Ax(s,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,s.id&&o.setAttribute("form",s.id),i.parentNode.insertBefore(o,i),s=new FormData(s),o.parentNode.removeChild(o),s}function E5(s,i,o,d,p){if(i==="submit"&&o&&o.stateNode===p){var v=Nx((p[jn]||null).action),S=d.submitter;S&&(i=(i=S[jn]||null)?Nx(i.formAction):S.getAttribute("formAction"),i!==null&&(v=i,S=null));var M=new Es("action","action",null,d,p);s.push({event:M,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(na!==0){var G=S?Ax(p,S):new FormData(p);hg(o,{pending:!0,data:G,method:p.method,action:v},null,G)}}else typeof v=="function"&&(M.preventDefault(),G=S?Ax(p,S):new FormData(p),hg(o,{pending:!0,data:G,method:p.method,action:v},v,G))},currentTarget:p}]})}}for(var Yg=0;Yg<Ap.length;Yg++){var Kg=Ap[Yg],C5=Kg.toLowerCase(),T5=Kg[0].toUpperCase()+Kg.slice(1);ts(C5,"on"+T5)}ts(ab,"onAnimationEnd"),ts(ob,"onAnimationIteration"),ts(lb,"onAnimationStart"),ts("dblclick","onDoubleClick"),ts("focusin","onFocus"),ts("focusout","onBlur"),ts(Fk,"onTransitionRun"),ts(Hk,"onTransitionStart"),ts($k,"onTransitionCancel"),ts(cb,"onTransitionEnd"),xs("onMouseEnter",["mouseout","mouseover"]),xs("onMouseLeave",["mouseout","mouseover"]),xs("onPointerEnter",["pointerout","pointerover"]),xs("onPointerLeave",["pointerout","pointerover"]),bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bs("onBeforeInput",["compositionend","keypress","textInput","paste"]),bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),k5=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pu));function Rx(s,i){i=(i&4)!==0;for(var o=0;o<s.length;o++){var d=s[o],p=d.event;d=d.listeners;e:{var v=void 0;if(i)for(var S=d.length-1;0<=S;S--){var M=d[S],G=M.instance,re=M.currentTarget;if(M=M.listener,G!==v&&p.isPropagationStopped())break e;v=M,p.currentTarget=re;try{v(p)}catch(fe){eh(fe)}p.currentTarget=null,v=G}else for(S=0;S<d.length;S++){if(M=d[S],G=M.instance,re=M.currentTarget,M=M.listener,G!==v&&p.isPropagationStopped())break e;v=M,p.currentTarget=re;try{v(p)}catch(fe){eh(fe)}p.currentTarget=null,v=G}}}}function gt(s,i){var o=i[Go];o===void 0&&(o=i[Go]=new Set);var d=s+"__bubble";o.has(d)||(jx(i,s,2,!1),o.add(d))}function Qg(s,i,o){var d=0;i&&(d|=4),jx(o,s,d,i)}var zh="_reactListening"+Math.random().toString(36).slice(2);function Xg(s){if(!s[zh]){s[zh]=!0,kc.forEach(function(o){o!=="selectionchange"&&(k5.has(o)||Qg(o,!1,s),Qg(o,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[zh]||(i[zh]=!0,Qg("selectionchange",!1,i))}}function jx(s,i,o,d){switch(a_(i)){case 2:var p=tN;break;case 8:p=nN;break;default:p=d0}o=p.bind(null,i,o,s),p=void 0,!qa||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),d?p!==void 0?s.addEventListener(i,o,{capture:!0,passive:p}):s.addEventListener(i,o,!0):p!==void 0?s.addEventListener(i,o,{passive:p}):s.addEventListener(i,o,!1)}function Wg(s,i,o,d,p){var v=d;if((i&1)===0&&(i&2)===0&&d!==null)e:for(;;){if(d===null)return;var S=d.tag;if(S===3||S===4){var M=d.stateNode.containerInfo;if(M===p)break;if(S===4)for(S=d.return;S!==null;){var G=S.tag;if((G===3||G===4)&&S.stateNode.containerInfo===p)return;S=S.return}for(;M!==null;){if(S=vs(M),S===null)return;if(G=S.tag,G===5||G===6||G===26||G===27){d=v=S;continue e}M=M.parentNode}}d=d.return}Li(function(){var re=v,fe=Dr(o),be=[];e:{var se=ub.get(s);if(se!==void 0){var le=Es,Be=s;switch(s){case"keypress":if(Ya(o)===0)break e;case"keydown":case"keyup":le=Wd;break;case"focusin":Be="focus",le=Qa;break;case"focusout":Be="blur",le=Qa;break;case"beforeblur":case"afterblur":le=Qa;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=zc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=Fd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=x;break;case ab:case ob:case lb:le=$d;break;case cb:le=V;break;case"scroll":case"scrollend":le=Uc;break;case"wheel":le=ie;break;case"copy":case"cut":case"paste":le=qd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=ei;break;case"toggle":case"beforetoggle":le=ot}var Je=(i&4)!==0,zt=!Je&&(s==="scroll"||s==="scrollend"),X=Je?se!==null?se+"Capture":null:se;Je=[];for(var Q=re,ne;Q!==null;){var ve=Q;if(ne=ve.stateNode,ve=ve.tag,ve!==5&&ve!==26&&ve!==27||ne===null||X===null||(ve=Wr(Q,X),ve!=null&&Je.push(gu(Q,ve,ne))),zt)break;Q=Q.return}0<Je.length&&(se=new le(se,Be,null,o,fe),be.push({event:se,listeners:Je}))}}if((i&7)===0){e:{if(se=s==="mouseover"||s==="pointerover",le=s==="mouseout"||s==="pointerout",se&&o!==Oc&&(Be=o.relatedTarget||o.fromElement)&&(vs(Be)||Be[ps]))break e;if((le||se)&&(se=fe.window===fe?fe:(se=fe.ownerDocument)?se.defaultView||se.parentWindow:window,le?(Be=o.relatedTarget||o.toElement,le=re,Be=Be?vs(Be):null,Be!==null&&(zt=l(Be),Je=Be.tag,Be!==zt||Je!==5&&Je!==27&&Je!==6)&&(Be=null)):(le=null,Be=re),le!==Be)){if(Je=zc,ve="onMouseLeave",X="onMouseEnter",Q="mouse",(s==="pointerout"||s==="pointerover")&&(Je=ei,ve="onPointerLeave",X="onPointerEnter",Q="pointer"),zt=le==null?se:yr(le),ne=Be==null?se:yr(Be),se=new Je(ve,Q+"leave",le,o,fe),se.target=zt,se.relatedTarget=ne,ve=null,vs(fe)===re&&(Je=new Je(X,Q+"enter",Be,o,fe),Je.target=ne,Je.relatedTarget=zt,ve=Je),zt=ve,le&&Be)t:{for(Je=N5,X=le,Q=Be,ne=0,ve=X;ve;ve=Je(ve))ne++;ve=0;for(var Xe=Q;Xe;Xe=Je(Xe))ve++;for(;0<ne-ve;)X=Je(X),ne--;for(;0<ve-ne;)Q=Je(Q),ve--;for(;ne--;){if(X===Q||Q!==null&&X===Q.alternate){Je=X;break t}X=Je(X),Q=Je(Q)}Je=null}else Je=null;le!==null&&Ix(be,se,le,Je,!1),Be!==null&&zt!==null&&Ix(be,zt,Be,Je,!0)}}e:{if(se=re?yr(re):window,le=se.nodeName&&se.nodeName.toLowerCase(),le==="select"||le==="input"&&se.type==="file")var kt=Q1;else if(Y1(se))if(X1)kt=Uk;else{kt=Lk;var Ye=Ok}else le=se.nodeName,!le||le.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?re&&Xo(re.elementType)&&(kt=Q1):kt=Vk;if(kt&&(kt=kt(s,re))){K1(be,kt,o,fe);break e}Ye&&Ye(s,se,re),s==="focusout"&&re&&se.type==="number"&&re.memoizedProps.value!=null&&Dc(se,"number",se.value)}switch(Ye=re?yr(re):window,s){case"focusin":(Y1(Ye)||Ye.contentEditable==="true")&&(sl=Ye,Tp=re,qc=null);break;case"focusout":qc=Tp=sl=null;break;case"mousedown":kp=!0;break;case"contextmenu":case"mouseup":case"dragend":kp=!1,sb(be,o,fe);break;case"selectionchange":if(Bk)break;case"keydown":case"keyup":sb(be,o,fe)}var ct;if(Rt)e:{switch(s){case"compositionstart":var yt="onCompositionStart";break e;case"compositionend":yt="onCompositionEnd";break e;case"compositionupdate":yt="onCompositionUpdate";break e}yt=void 0}else rl?Xa(s,o)&&(yt="onCompositionEnd"):s==="keydown"&&o.keyCode===229&&(yt="onCompositionStart");yt&&(ks&&o.locale!=="ko"&&(rl||yt!=="onCompositionStart"?yt==="onCompositionEnd"&&rl&&(ct=Vc()):(Ss=fe,Lc="value"in Ss?Ss.value:Ss.textContent,rl=!0)),Ye=Bh(re,yt),0<Ye.length&&(yt=new Ts(yt,s,null,o,fe),be.push({event:yt,listeners:Ye}),ct?yt.data=ct:(ct=nl(o),ct!==null&&(yt.data=ct)))),(ct=Pr?Ik(s,o):Dk(s,o))&&(yt=Bh(re,"onBeforeInput"),0<yt.length&&(Ye=new Ts("onBeforeInput","beforeinput",null,o,fe),be.push({event:Ye,listeners:yt}),Ye.data=ct)),E5(be,s,re,o,fe)}Rx(be,i)})}function gu(s,i,o){return{instance:s,listener:i,currentTarget:o}}function Bh(s,i){for(var o=i+"Capture",d=[];s!==null;){var p=s,v=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||v===null||(p=Wr(s,o),p!=null&&d.unshift(gu(s,p,v)),p=Wr(s,i),p!=null&&d.push(gu(s,p,v))),s.tag===3)return d;s=s.return}return[]}function N5(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Ix(s,i,o,d,p){for(var v=i._reactName,S=[];o!==null&&o!==d;){var M=o,G=M.alternate,re=M.stateNode;if(M=M.tag,G!==null&&G===d)break;M!==5&&M!==26&&M!==27||re===null||(G=re,p?(re=Wr(o,v),re!=null&&S.unshift(gu(o,re,G))):p||(re=Wr(o,v),re!=null&&S.push(gu(o,re,G)))),o=o.return}S.length!==0&&s.push({event:i,listeners:S})}var A5=/\r\n?/g,R5=/\u0000|\uFFFD/g;function Dx(s){return(typeof s=="string"?s:""+s).replace(A5,`
`).replace(R5,"")}function Mx(s,i){return i=Dx(i),Dx(s)===i}function Ut(s,i,o,d,p,v){switch(o){case"children":typeof d=="string"?i==="body"||i==="textarea"&&d===""||or(s,d):(typeof d=="number"||typeof d=="bigint")&&i!=="body"&&or(s,""+d);break;case"className":br(s,"class",d);break;case"tabIndex":br(s,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":br(s,o,d);break;case"style":Pc(s,d,v);break;case"data":if(i!=="object"){br(s,"data",d);break}case"src":case"href":if(d===""&&(i!=="a"||o!=="href")){s.removeAttribute(o);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(o);break}d=Wo(""+d),s.setAttribute(o,d);break;case"action":case"formAction":if(typeof d=="function"){s.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(o==="formAction"?(i!=="input"&&Ut(s,i,"name",p.name,p,null),Ut(s,i,"formEncType",p.formEncType,p,null),Ut(s,i,"formMethod",p.formMethod,p,null),Ut(s,i,"formTarget",p.formTarget,p,null)):(Ut(s,i,"encType",p.encType,p,null),Ut(s,i,"method",p.method,p,null),Ut(s,i,"target",p.target,p,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(o);break}d=Wo(""+d),s.setAttribute(o,d);break;case"onClick":d!=null&&(s.onclick=Xr);break;case"onScroll":d!=null&&gt("scroll",s);break;case"onScrollEnd":d!=null&&gt("scrollend",s);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(o=d.__html,o!=null){if(p.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"multiple":s.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":s.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){s.removeAttribute("xlink:href");break}o=Wo(""+d),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(o,""+d):s.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(o,""):s.removeAttribute(o);break;case"capture":case"download":d===!0?s.setAttribute(o,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(o,d):s.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?s.setAttribute(o,d):s.removeAttribute(o);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?s.removeAttribute(o):s.setAttribute(o,d);break;case"popover":gt("beforetoggle",s),gt("toggle",s),Ko(s,"popover",d);break;case"xlinkActuate":mn(s,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":mn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":mn(s,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":mn(s,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":mn(s,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":mn(s,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":mn(s,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":mn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":mn(s,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Ko(s,"is",d);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Bd.get(o)||o,Ko(s,o,d))}}function Jg(s,i,o,d,p,v){switch(o){case"style":Pc(s,d,v);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(o=d.__html,o!=null){if(p.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"children":typeof d=="string"?or(s,d):(typeof d=="number"||typeof d=="bigint")&&or(s,""+d);break;case"onScroll":d!=null&&gt("scroll",s);break;case"onScrollEnd":d!=null&&gt("scrollend",s);break;case"onClick":d!=null&&(s.onclick=Xr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Nc.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(p=o.endsWith("Capture"),i=o.slice(2,p?o.length-7:void 0),v=s[jn]||null,v=v!=null?v[o]:null,typeof v=="function"&&s.removeEventListener(i,v,p),typeof d=="function")){typeof v!="function"&&v!==null&&(o in s?s[o]=null:s.hasAttribute(o)&&s.removeAttribute(o)),s.addEventListener(i,d,p);break e}o in s?s[o]=d:d===!0?s.setAttribute(o,""):Ko(s,o,d)}}}function Bn(s,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":gt("error",s),gt("load",s);var d=!1,p=!1,v;for(v in o)if(o.hasOwnProperty(v)){var S=o[v];if(S!=null)switch(v){case"src":d=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Ut(s,i,v,S,o,null)}}p&&Ut(s,i,"srcSet",o.srcSet,o,null),d&&Ut(s,i,"src",o.src,o,null);return;case"input":gt("invalid",s);var M=v=S=p=null,G=null,re=null;for(d in o)if(o.hasOwnProperty(d)){var fe=o[d];if(fe!=null)switch(d){case"name":p=fe;break;case"type":S=fe;break;case"checked":G=fe;break;case"defaultChecked":re=fe;break;case"value":v=fe;break;case"defaultValue":M=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(r(137,i));break;default:Ut(s,i,d,fe,o,null)}}Vd(s,v,M,G,re,S,p,!1);return;case"select":gt("invalid",s),d=S=v=null;for(p in o)if(o.hasOwnProperty(p)&&(M=o[p],M!=null))switch(p){case"value":v=M;break;case"defaultValue":S=M;break;case"multiple":d=M;default:Ut(s,i,p,M,o,null)}i=v,o=S,s.multiple=!!d,i!=null?Di(s,!!d,i,!1):o!=null&&Di(s,!!d,o,!0);return;case"textarea":gt("invalid",s),v=p=d=null;for(S in o)if(o.hasOwnProperty(S)&&(M=o[S],M!=null))switch(S){case"value":d=M;break;case"defaultValue":p=M;break;case"children":v=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(r(91));break;default:Ut(s,i,S,M,o,null)}Mi(s,d,p,v);return;case"option":for(G in o)if(o.hasOwnProperty(G)&&(d=o[G],d!=null))switch(G){case"selected":s.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Ut(s,i,G,d,o,null)}return;case"dialog":gt("beforetoggle",s),gt("toggle",s),gt("cancel",s),gt("close",s);break;case"iframe":case"object":gt("load",s);break;case"video":case"audio":for(d=0;d<pu.length;d++)gt(pu[d],s);break;case"image":gt("error",s),gt("load",s);break;case"details":gt("toggle",s);break;case"embed":case"source":case"link":gt("error",s),gt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(re in o)if(o.hasOwnProperty(re)&&(d=o[re],d!=null))switch(re){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Ut(s,i,re,d,o,null)}return;default:if(Xo(i)){for(fe in o)o.hasOwnProperty(fe)&&(d=o[fe],d!==void 0&&Jg(s,i,fe,d,o,void 0));return}}for(M in o)o.hasOwnProperty(M)&&(d=o[M],d!=null&&Ut(s,i,M,d,o,null))}function j5(s,i,o,d){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,v=null,S=null,M=null,G=null,re=null,fe=null;for(le in o){var be=o[le];if(o.hasOwnProperty(le)&&be!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":G=be;default:d.hasOwnProperty(le)||Ut(s,i,le,null,d,be)}}for(var se in d){var le=d[se];if(be=o[se],d.hasOwnProperty(se)&&(le!=null||be!=null))switch(se){case"type":v=le;break;case"name":p=le;break;case"checked":re=le;break;case"defaultChecked":fe=le;break;case"value":S=le;break;case"defaultValue":M=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,i));break;default:le!==be&&Ut(s,i,se,le,d,be)}}Qo(s,S,M,G,re,fe,v,p);return;case"select":le=S=M=se=null;for(v in o)if(G=o[v],o.hasOwnProperty(v)&&G!=null)switch(v){case"value":break;case"multiple":le=G;default:d.hasOwnProperty(v)||Ut(s,i,v,null,d,G)}for(p in d)if(v=d[p],G=o[p],d.hasOwnProperty(p)&&(v!=null||G!=null))switch(p){case"value":se=v;break;case"defaultValue":M=v;break;case"multiple":S=v;default:v!==G&&Ut(s,i,p,v,d,G)}i=M,o=S,d=le,se!=null?Di(s,!!o,se,!1):!!d!=!!o&&(i!=null?Di(s,!!o,i,!0):Di(s,!!o,o?[]:"",!1));return;case"textarea":le=se=null;for(M in o)if(p=o[M],o.hasOwnProperty(M)&&p!=null&&!d.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:Ut(s,i,M,null,d,p)}for(S in d)if(p=d[S],v=o[S],d.hasOwnProperty(S)&&(p!=null||v!=null))switch(S){case"value":se=p;break;case"defaultValue":le=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(r(91));break;default:p!==v&&Ut(s,i,S,p,d,v)}Ud(s,se,le);return;case"option":for(var Be in o)if(se=o[Be],o.hasOwnProperty(Be)&&se!=null&&!d.hasOwnProperty(Be))switch(Be){case"selected":s.selected=!1;break;default:Ut(s,i,Be,null,d,se)}for(G in d)if(se=d[G],le=o[G],d.hasOwnProperty(G)&&se!==le&&(se!=null||le!=null))switch(G){case"selected":s.selected=se&&typeof se!="function"&&typeof se!="symbol";break;default:Ut(s,i,G,se,d,le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Je in o)se=o[Je],o.hasOwnProperty(Je)&&se!=null&&!d.hasOwnProperty(Je)&&Ut(s,i,Je,null,d,se);for(re in d)if(se=d[re],le=o[re],d.hasOwnProperty(re)&&se!==le&&(se!=null||le!=null))switch(re){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,i));break;default:Ut(s,i,re,se,d,le)}return;default:if(Xo(i)){for(var zt in o)se=o[zt],o.hasOwnProperty(zt)&&se!==void 0&&!d.hasOwnProperty(zt)&&Jg(s,i,zt,void 0,d,se);for(fe in d)se=d[fe],le=o[fe],!d.hasOwnProperty(fe)||se===le||se===void 0&&le===void 0||Jg(s,i,fe,se,d,le);return}}for(var X in o)se=o[X],o.hasOwnProperty(X)&&se!=null&&!d.hasOwnProperty(X)&&Ut(s,i,X,null,d,se);for(be in d)se=d[be],le=o[be],!d.hasOwnProperty(be)||se===le||se==null&&le==null||Ut(s,i,be,se,d,le)}function Px(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function I5(){if(typeof performance.getEntriesByType=="function"){for(var s=0,i=0,o=performance.getEntriesByType("resource"),d=0;d<o.length;d++){var p=o[d],v=p.transferSize,S=p.initiatorType,M=p.duration;if(v&&M&&Px(S)){for(S=0,M=p.responseEnd,d+=1;d<o.length;d++){var G=o[d],re=G.startTime;if(re>M)break;var fe=G.transferSize,be=G.initiatorType;fe&&Px(be)&&(G=G.responseEnd,S+=fe*(G<M?1:(M-re)/(G-re)))}if(--d,i+=8*(v+S)/(p.duration/1e3),s++,10<s)break}}if(0<s)return i/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Zg=null,e0=null;function Fh(s){return s.nodeType===9?s:s.ownerDocument}function Ox(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Lx(s,i){if(s===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&i==="foreignObject"?0:s}function t0(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var n0=null;function D5(){var s=window.event;return s&&s.type==="popstate"?s===n0?!1:(n0=s,!0):(n0=null,!1)}var Vx=typeof setTimeout=="function"?setTimeout:void 0,M5=typeof clearTimeout=="function"?clearTimeout:void 0,Ux=typeof Promise=="function"?Promise:void 0,P5=typeof queueMicrotask=="function"?queueMicrotask:typeof Ux<"u"?function(s){return Ux.resolve(null).then(s).catch(O5)}:Vx;function O5(s){setTimeout(function(){throw s})}function ra(s){return s==="head"}function zx(s,i){var o=i,d=0;do{var p=o.nextSibling;if(s.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"||o==="/&"){if(d===0){s.removeChild(p),jl(i);return}d--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")d++;else if(o==="html")vu(s.ownerDocument.documentElement);else if(o==="head"){o=s.ownerDocument.head,vu(o);for(var v=o.firstChild;v;){var S=v.nextSibling,M=v.nodeName;v[gs]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&v.rel.toLowerCase()==="stylesheet"||o.removeChild(v),v=S}}else o==="body"&&vu(s.ownerDocument.body);o=p}while(o);jl(i)}function Bx(s,i){var o=s;s=0;do{var d=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),d&&d.nodeType===8)if(o=d.data,o==="/$"){if(s===0)break;s--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||s++;o=d}while(o)}function r0(s){var i=s.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":r0(o),Yo(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}s.removeChild(o)}}function L5(s,i,o,d){for(;s.nodeType===1;){var p=o;if(s.nodeName.toLowerCase()!==i.toLowerCase()){if(!d&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(d){if(!s[gs])switch(i){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(v=s.getAttribute("rel"),v==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(v!==p.rel||s.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||s.getAttribute("title")!==(p.title==null?null:p.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(v=s.getAttribute("src"),(v!==(p.src==null?null:p.src)||s.getAttribute("type")!==(p.type==null?null:p.type)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&v&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(i==="input"&&s.type==="hidden"){var v=p.name==null?null:""+p.name;if(p.type==="hidden"&&s.getAttribute("name")===v)return s}else return s;if(s=Fr(s.nextSibling),s===null)break}return null}function V5(s,i,o){if(i==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=Fr(s.nextSibling),s===null))return null;return s}function Fx(s,i){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!i||(s=Fr(s.nextSibling),s===null))return null;return s}function s0(s){return s.data==="$?"||s.data==="$~"}function i0(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function U5(s,i){var o=s.ownerDocument;if(s.data==="$~")s._reactRetry=i;else if(s.data!=="$?"||o.readyState!=="loading")i();else{var d=function(){i(),o.removeEventListener("DOMContentLoaded",d)};o.addEventListener("DOMContentLoaded",d),s._reactRetry=d}}function Fr(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return s}var a0=null;function Hx(s){s=s.nextSibling;for(var i=0;s;){if(s.nodeType===8){var o=s.data;if(o==="/$"||o==="/&"){if(i===0)return Fr(s.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}s=s.nextSibling}return null}function $x(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var o=s.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return s;i--}else o!=="/$"&&o!=="/&"||i++}s=s.previousSibling}return null}function qx(s,i,o){switch(i=Fh(o),s){case"html":if(s=i.documentElement,!s)throw Error(r(452));return s;case"head":if(s=i.head,!s)throw Error(r(453));return s;case"body":if(s=i.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function vu(s){for(var i=s.attributes;i.length;)s.removeAttributeNode(i[0]);Yo(s)}var Hr=new Map,Gx=new Set;function Hh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var pi=Z.d;Z.d={f:z5,r:B5,D:F5,C:H5,L:$5,m:q5,X:Y5,S:G5,M:K5};function z5(){var s=pi.f(),i=Mh();return s||i}function B5(s){var i=Ir(s);i!==null&&i.tag===5&&i.type==="form"?c2(i):pi.r(s)}var Nl=typeof document>"u"?null:document;function Yx(s,i,o){var d=Nl;if(d&&typeof i=="string"&&i){var p=ar(i);p='link[rel="'+s+'"][href="'+p+'"]',typeof o=="string"&&(p+='[crossorigin="'+o+'"]'),Gx.has(p)||(Gx.add(p),s={rel:s,crossOrigin:o,href:i},d.querySelector(p)===null&&(i=d.createElement("link"),Bn(i,"link",s),fn(i),d.head.appendChild(i)))}}function F5(s){pi.D(s),Yx("dns-prefetch",s,null)}function H5(s,i){pi.C(s,i),Yx("preconnect",s,i)}function $5(s,i,o){pi.L(s,i,o);var d=Nl;if(d&&s&&i){var p='link[rel="preload"][as="'+ar(i)+'"]';i==="image"&&o&&o.imageSrcSet?(p+='[imagesrcset="'+ar(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(p+='[imagesizes="'+ar(o.imageSizes)+'"]')):p+='[href="'+ar(s)+'"]';var v=p;switch(i){case"style":v=Al(s);break;case"script":v=Rl(s)}Hr.has(v)||(s=b({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:s,as:i},o),Hr.set(v,s),d.querySelector(p)!==null||i==="style"&&d.querySelector(yu(v))||i==="script"&&d.querySelector(bu(v))||(i=d.createElement("link"),Bn(i,"link",s),fn(i),d.head.appendChild(i)))}}function q5(s,i){pi.m(s,i);var o=Nl;if(o&&s){var d=i&&typeof i.as=="string"?i.as:"script",p='link[rel="modulepreload"][as="'+ar(d)+'"][href="'+ar(s)+'"]',v=p;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Rl(s)}if(!Hr.has(v)&&(s=b({rel:"modulepreload",href:s},i),Hr.set(v,s),o.querySelector(p)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(bu(v)))return}d=o.createElement("link"),Bn(d,"link",s),fn(d),o.head.appendChild(d)}}}function G5(s,i,o){pi.S(s,i,o);var d=Nl;if(d&&s){var p=ys(d).hoistableStyles,v=Al(s);i=i||"default";var S=p.get(v);if(!S){var M={loading:0,preload:null};if(S=d.querySelector(yu(v)))M.loading=5;else{s=b({rel:"stylesheet",href:s,"data-precedence":i},o),(o=Hr.get(v))&&o0(s,o);var G=S=d.createElement("link");fn(G),Bn(G,"link",s),G._p=new Promise(function(re,fe){G.onload=re,G.onerror=fe}),G.addEventListener("load",function(){M.loading|=1}),G.addEventListener("error",function(){M.loading|=2}),M.loading|=4,$h(S,i,d)}S={type:"stylesheet",instance:S,count:1,state:M},p.set(v,S)}}}function Y5(s,i){pi.X(s,i);var o=Nl;if(o&&s){var d=ys(o).hoistableScripts,p=Rl(s),v=d.get(p);v||(v=o.querySelector(bu(p)),v||(s=b({src:s,async:!0},i),(i=Hr.get(p))&&l0(s,i),v=o.createElement("script"),fn(v),Bn(v,"link",s),o.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(p,v))}}function K5(s,i){pi.M(s,i);var o=Nl;if(o&&s){var d=ys(o).hoistableScripts,p=Rl(s),v=d.get(p);v||(v=o.querySelector(bu(p)),v||(s=b({src:s,async:!0,type:"module"},i),(i=Hr.get(p))&&l0(s,i),v=o.createElement("script"),fn(v),Bn(v,"link",s),o.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(p,v))}}function Kx(s,i,o,d){var p=(p=_e.current)?Hh(p):null;if(!p)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Al(o.href),o=ys(p).hoistableStyles,d=o.get(i),d||(d={type:"style",instance:null,count:0,state:null},o.set(i,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){s=Al(o.href);var v=ys(p).hoistableStyles,S=v.get(s);if(S||(p=p.ownerDocument||p,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(s,S),(v=p.querySelector(yu(s)))&&!v._p&&(S.instance=v,S.state.loading=5),Hr.has(s)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Hr.set(s,o),v||Q5(p,s,o,S.state))),i&&d===null)throw Error(r(528,""));return S}if(i&&d!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Rl(o),o=ys(p).hoistableScripts,d=o.get(i),d||(d={type:"script",instance:null,count:0,state:null},o.set(i,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Al(s){return'href="'+ar(s)+'"'}function yu(s){return'link[rel="stylesheet"]['+s+"]"}function Qx(s){return b({},s,{"data-precedence":s.precedence,precedence:null})}function Q5(s,i,o,d){s.querySelector('link[rel="preload"][as="style"]['+i+"]")?d.loading=1:(i=s.createElement("link"),d.preload=i,i.addEventListener("load",function(){return d.loading|=1}),i.addEventListener("error",function(){return d.loading|=2}),Bn(i,"link",o),fn(i),s.head.appendChild(i))}function Rl(s){return'[src="'+ar(s)+'"]'}function bu(s){return"script[async]"+s}function Xx(s,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var d=s.querySelector('style[data-href~="'+ar(o.href)+'"]');if(d)return i.instance=d,fn(d),d;var p=b({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return d=(s.ownerDocument||s).createElement("style"),fn(d),Bn(d,"style",p),$h(d,o.precedence,s),i.instance=d;case"stylesheet":p=Al(o.href);var v=s.querySelector(yu(p));if(v)return i.state.loading|=4,i.instance=v,fn(v),v;d=Qx(o),(p=Hr.get(p))&&o0(d,p),v=(s.ownerDocument||s).createElement("link"),fn(v);var S=v;return S._p=new Promise(function(M,G){S.onload=M,S.onerror=G}),Bn(v,"link",d),i.state.loading|=4,$h(v,o.precedence,s),i.instance=v;case"script":return v=Rl(o.src),(p=s.querySelector(bu(v)))?(i.instance=p,fn(p),p):(d=o,(p=Hr.get(v))&&(d=b({},o),l0(d,p)),s=s.ownerDocument||s,p=s.createElement("script"),fn(p),Bn(p,"link",d),s.head.appendChild(p),i.instance=p);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(d=i.instance,i.state.loading|=4,$h(d,o.precedence,s));return i.instance}function $h(s,i,o){for(var d=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=d.length?d[d.length-1]:null,v=p,S=0;S<d.length;S++){var M=d[S];if(M.dataset.precedence===i)v=M;else if(v!==p)break}v?v.parentNode.insertBefore(s,v.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(s,i.firstChild))}function o0(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.title==null&&(s.title=i.title)}function l0(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.integrity==null&&(s.integrity=i.integrity)}var qh=null;function Wx(s,i,o){if(qh===null){var d=new Map,p=qh=new Map;p.set(o,d)}else p=qh,d=p.get(o),d||(d=new Map,p.set(o,d));if(d.has(s))return d;for(d.set(s,null),o=o.getElementsByTagName(s),p=0;p<o.length;p++){var v=o[p];if(!(v[gs]||v[hn]||s==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var S=v.getAttribute(i)||"";S=s+S;var M=d.get(S);M?M.push(v):d.set(S,[v])}}return d}function Jx(s,i,o){s=s.ownerDocument||s,s.head.insertBefore(o,i==="title"?s.querySelector("head > title"):null)}function X5(s,i,o){if(o===1||i.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return s=i.disabled,typeof i.precedence=="string"&&s==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Zx(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function W5(s,i,o,d){if(o.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var p=Al(d.href),v=i.querySelector(yu(p));if(v){i=v._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(s.count++,s=Gh.bind(s),i.then(s,s)),o.state.loading|=4,o.instance=v,fn(v);return}v=i.ownerDocument||i,d=Qx(d),(p=Hr.get(p))&&o0(d,p),v=v.createElement("link"),fn(v);var S=v;S._p=new Promise(function(M,G){S.onload=M,S.onerror=G}),Bn(v,"link",d),o.instance=v}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(s.count++,o=Gh.bind(s),i.addEventListener("load",o),i.addEventListener("error",o))}}var c0=0;function J5(s,i){return s.stylesheets&&s.count===0&&Kh(s,s.stylesheets),0<s.count||0<s.imgCount?function(o){var d=setTimeout(function(){if(s.stylesheets&&Kh(s,s.stylesheets),s.unsuspend){var v=s.unsuspend;s.unsuspend=null,v()}},6e4+i);0<s.imgBytes&&c0===0&&(c0=62500*I5());var p=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Kh(s,s.stylesheets),s.unsuspend)){var v=s.unsuspend;s.unsuspend=null,v()}},(s.imgBytes>c0?50:800)+i);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(d),clearTimeout(p)}}:null}function Gh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Kh(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Yh=null;function Kh(s,i){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Yh=new Map,i.forEach(Z5,s),Yh=null,Gh.call(s))}function Z5(s,i){if(!(i.state.loading&4)){var o=Yh.get(s);if(o)var d=o.get(null);else{o=new Map,Yh.set(s,o);for(var p=s.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<p.length;v++){var S=p[v];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(o.set(S.dataset.precedence,S),d=S)}d&&o.set(null,d)}p=i.instance,S=p.getAttribute("data-precedence"),v=o.get(S)||d,v===d&&o.set(null,p),o.set(S,p),this.count++,d=Gh.bind(this),p.addEventListener("load",d),p.addEventListener("error",d),v?v.parentNode.insertBefore(p,v.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(p,s.firstChild)),i.state.loading|=4}}var xu={$$typeof:I,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function eN(s,i,o,d,p,v,S,M,G){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ms(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ms(0),this.hiddenUpdates=ms(null),this.identifierPrefix=d,this.onUncaughtError=p,this.onCaughtError=v,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=G,this.incompleteTransitions=new Map}function e_(s,i,o,d,p,v,S,M,G,re,fe,be){return s=new eN(s,i,o,S,G,re,fe,be,M),i=1,v===!0&&(i|=24),v=_r(3,null,null,i),s.current=v,v.stateNode=s,i=Fp(),i.refCount++,s.pooledCache=i,i.refCount++,v.memoizedState={element:d,isDehydrated:o,cache:i},Gp(v),s}function t_(s){return s?(s=ol,s):ol}function n_(s,i,o,d,p,v){p=t_(p),d.context===null?d.context=p:d.pendingContext=p,d=Gi(i),d.payload={element:o},v=v===void 0?null:v,v!==null&&(d.callback=v),o=Yi(s,d,i),o!==null&&(hr(o,s,i),Jc(o,s,i))}function r_(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var o=s.retryLane;s.retryLane=o!==0&&o<i?o:i}}function u0(s,i){r_(s,i),(s=s.alternate)&&r_(s,i)}function s_(s){if(s.tag===13||s.tag===31){var i=Za(s,67108864);i!==null&&hr(i,s,67108864),u0(s,67108864)}}function i_(s){if(s.tag===13||s.tag===31){var i=Tr();i=Ba(i);var o=Za(s,i);o!==null&&hr(o,s,i),u0(s,i)}}var Qh=!0;function tN(s,i,o,d){var p=Y.T;Y.T=null;var v=Z.p;try{Z.p=2,d0(s,i,o,d)}finally{Z.p=v,Y.T=p}}function nN(s,i,o,d){var p=Y.T;Y.T=null;var v=Z.p;try{Z.p=8,d0(s,i,o,d)}finally{Z.p=v,Y.T=p}}function d0(s,i,o,d){if(Qh){var p=h0(d);if(p===null)Wg(s,i,d,Xh,o),o_(s,d);else if(sN(p,s,i,o,d))d.stopPropagation();else if(o_(s,d),i&4&&-1<rN.indexOf(s)){for(;p!==null;){var v=Ir(p);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var S=hs(v.pendingLanes);if(S!==0){var M=v;for(M.pendingLanes|=2,M.entangledLanes|=2;S;){var G=1<<31-Xt(S);M.entanglements[1]|=G,S&=~G}js(v),(jt&6)===0&&(Ih=Le()+500,mu(0))}}break;case 31:case 13:M=Za(v,2),M!==null&&hr(M,v,2),Mh(),u0(v,2)}if(v=h0(d),v===null&&Wg(s,i,d,Xh,o),v===p)break;p=v}p!==null&&d.stopPropagation()}else Wg(s,i,d,null,o)}}function h0(s){return s=Dr(s),f0(s)}var Xh=null;function f0(s){if(Xh=null,s=vs(s),s!==null){var i=l(s);if(i===null)s=null;else{var o=i.tag;if(o===13){if(s=c(i),s!==null)return s;s=null}else if(o===31){if(s=h(i),s!==null)return s;s=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null)}}return Xh=s,null}function a_(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Et()){case Tt:return 2;case Qt:return 8;case Ee:case Pe:return 32;case nt:return 268435456;default:return 32}default:return 32}}var m0=!1,sa=null,ia=null,aa=null,_u=new Map,wu=new Map,oa=[],rN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function o_(s,i){switch(s){case"focusin":case"focusout":sa=null;break;case"dragenter":case"dragleave":ia=null;break;case"mouseover":case"mouseout":aa=null;break;case"pointerover":case"pointerout":_u.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":wu.delete(i.pointerId)}}function Su(s,i,o,d,p,v){return s===null||s.nativeEvent!==v?(s={blockedOn:i,domEventName:o,eventSystemFlags:d,nativeEvent:v,targetContainers:[p]},i!==null&&(i=Ir(i),i!==null&&s_(i)),s):(s.eventSystemFlags|=d,i=s.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),s)}function sN(s,i,o,d,p){switch(i){case"focusin":return sa=Su(sa,s,i,o,d,p),!0;case"dragenter":return ia=Su(ia,s,i,o,d,p),!0;case"mouseover":return aa=Su(aa,s,i,o,d,p),!0;case"pointerover":var v=p.pointerId;return _u.set(v,Su(_u.get(v)||null,s,i,o,d,p)),!0;case"gotpointercapture":return v=p.pointerId,wu.set(v,Su(wu.get(v)||null,s,i,o,d,p)),!0}return!1}function l_(s){var i=vs(s.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){s.blockedOn=i,Kr(s.priority,function(){i_(o)});return}}else if(i===31){if(i=h(o),i!==null){s.blockedOn=i,Kr(s.priority,function(){i_(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){s.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Wh(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var o=h0(s.nativeEvent);if(o===null){o=s.nativeEvent;var d=new o.constructor(o.type,o);Oc=d,o.target.dispatchEvent(d),Oc=null}else return i=Ir(o),i!==null&&s_(i),s.blockedOn=o,!1;i.shift()}return!0}function c_(s,i,o){Wh(s)&&o.delete(i)}function iN(){m0=!1,sa!==null&&Wh(sa)&&(sa=null),ia!==null&&Wh(ia)&&(ia=null),aa!==null&&Wh(aa)&&(aa=null),_u.forEach(c_),wu.forEach(c_)}function Jh(s,i){s.blockedOn===i&&(s.blockedOn=null,m0||(m0=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,iN)))}var Zh=null;function u_(s){Zh!==s&&(Zh=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Zh===s&&(Zh=null);for(var i=0;i<s.length;i+=3){var o=s[i],d=s[i+1],p=s[i+2];if(typeof d!="function"){if(f0(d||o)===null)continue;break}var v=Ir(o);v!==null&&(s.splice(i,3),i-=3,hg(v,{pending:!0,data:p,method:o.method,action:d},d,p))}}))}function jl(s){function i(G){return Jh(G,s)}sa!==null&&Jh(sa,s),ia!==null&&Jh(ia,s),aa!==null&&Jh(aa,s),_u.forEach(i),wu.forEach(i);for(var o=0;o<oa.length;o++){var d=oa[o];d.blockedOn===s&&(d.blockedOn=null)}for(;0<oa.length&&(o=oa[0],o.blockedOn===null);)l_(o),o.blockedOn===null&&oa.shift();if(o=(s.ownerDocument||s).$$reactFormReplay,o!=null)for(d=0;d<o.length;d+=3){var p=o[d],v=o[d+1],S=p[jn]||null;if(typeof v=="function")S||u_(o);else if(S){var M=null;if(v&&v.hasAttribute("formAction")){if(p=v,S=v[jn]||null)M=S.formAction;else if(f0(p)!==null)continue}else M=S.action;typeof M=="function"?o[d+1]=M:(o.splice(d,3),d-=3),u_(o)}}}function d_(){function s(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(S){return p=S})},focusReset:"manual",scroll:"manual"})}function i(){p!==null&&(p(),p=null),d||setTimeout(o,20)}function o(){if(!d&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,p=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){d=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),p!==null&&(p(),p=null)}}}function p0(s){this._internalRoot=s}ef.prototype.render=p0.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,d=Tr();n_(o,d,s,i,null,null)},ef.prototype.unmount=p0.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;n_(s.current,2,null,s,null,null),Mh(),i[ps]=null}};function ef(s){this._internalRoot=s}ef.prototype.unstable_scheduleHydration=function(s){if(s){var i=Md();s={blockedOn:null,target:s,priority:i};for(var o=0;o<oa.length&&i!==0&&i<oa[o].priority;o++);oa.splice(o,0,s),o===0&&l_(s)}};var h_=e.version;if(h_!=="19.2.3")throw Error(r(527,h_,"19.2.3"));Z.findDOMNode=function(s){var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=g(i),s=s!==null?y(s):null,s=s===null?null:s.stateNode,s};var aN={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tf.isDisabled&&tf.supportsFiber)try{Ht=tf.inject(aN),mt=tf}catch{}}return Cu.createRoot=function(s,i){if(!a(s))throw Error(r(299));var o=!1,d="",p=b2,v=x2,S=_2;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onUncaughtError!==void 0&&(p=i.onUncaughtError),i.onCaughtError!==void 0&&(v=i.onCaughtError),i.onRecoverableError!==void 0&&(S=i.onRecoverableError)),i=e_(s,1,!1,null,null,o,d,null,p,v,S,d_),s[ps]=i.current,Xg(s),new p0(i)},Cu.hydrateRoot=function(s,i,o){if(!a(s))throw Error(r(299));var d=!1,p="",v=b2,S=x2,M=_2,G=null;return o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(S=o.onCaughtError),o.onRecoverableError!==void 0&&(M=o.onRecoverableError),o.formState!==void 0&&(G=o.formState)),i=e_(s,1,!0,i,o??null,d,p,G,v,S,M,d_),i.context=t_(null),o=i.current,d=Tr(),d=Ba(d),p=Gi(d),p.callback=null,Yi(o,p,d),o=d,i.current.lanes=o,Ua(i,o),js(i),s[ps]=i.current,Xg(s),new ef(i)},Cu.version="19.2.3",Cu}var w_;function vN(){if(w_)return y0.exports;w_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),y0.exports=gN(),y0.exports}var yN=vN();const bN=()=>{};var S_={};const YS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let a=t.charCodeAt(r);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},xN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const a=t[n++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=t[n++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=t[n++],c=t[n++],h=t[n++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const l=t[n++],c=t[n++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},KS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<t.length;a+=3){const l=t[a],c=a+1<t.length,h=c?t[a+1]:0,m=a+2<t.length,g=m?t[a+2]:0,y=l>>2,b=(l&3)<<4|h>>4;let _=(h&15)<<2|g>>6,k=g&63;m||(k=64,c||(_=64)),r.push(n[y],n[b],n[_],n[k])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(YS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):xN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<t.length;){const l=n[t.charAt(a++)],h=a<t.length?n[t.charAt(a)]:0;++a;const g=a<t.length?n[t.charAt(a)]:64;++a;const b=a<t.length?n[t.charAt(a)]:64;if(++a,l==null||h==null||g==null||b==null)throw new _N;const _=l<<2|h>>4;if(r.push(_),g!==64){const k=h<<4&240|g>>2;if(r.push(k),b!==64){const R=g<<6&192|b;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class _N extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wN=function(t){const e=YS(t);return KS.encodeByteArray(e,!0)},qf=function(t){return wN(t).replace(/\./g,"")},QS=function(t){try{return KS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function SN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const EN=()=>SN().__FIREBASE_DEFAULTS__,CN=()=>{if(typeof process>"u"||typeof S_>"u")return;const t=S_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},TN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&QS(t[1]);return e&&JSON.parse(e)},Am=()=>{try{return bN()||EN()||CN()||TN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},XS=t=>Am()?.emulatorHosts?.[t],WS=t=>{const e=XS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},JS=()=>Am()?.config,ZS=t=>Am()?.[`_${t}`];class kN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function Mo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ly(t){return(await fetch(t,{credentials:"include"})).ok}function eE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",a=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...t};return[qf(JSON.stringify(n)),qf(JSON.stringify(c)),""].join(".")}const Bu={};function NN(){const t={prod:[],emulator:[]};for(const e of Object.keys(Bu))Bu[e]?t.emulator.push(e):t.prod.push(e);return t}function AN(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let E_=!1;function cy(t,e){if(typeof window>"u"||typeof document>"u"||!Mo(window.location.host)||Bu[t]===e||Bu[t]||E_)return;Bu[t]=e;function n(_){return`__firebase__banner__${_}`}const r="__firebase__banner",l=NN().prod.length>0;function c(){const _=document.getElementById(r);_&&_.remove()}function h(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function m(_,k){_.setAttribute("width","24"),_.setAttribute("id",k),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function g(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{E_=!0,c()},_}function y(_,k){_.setAttribute("id",k),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function b(){const _=AN(r),k=n("text"),R=document.getElementById(k)||document.createElement("span"),j=n("learnmore"),T=document.getElementById(j)||document.createElement("a"),H=n("preprendIcon"),q=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const I=_.element;h(I),y(T,j);const z=g();m(q,H),I.append(q,R,T,z),document.body.appendChild(I)}l?(R.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function Jn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jn())}function jN(){const t=Am()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function IN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function DN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function MN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function PN(){const t=Jn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ON(){return!jN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LN(){try{return typeof indexedDB=="object"}catch{return!1}}function VN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(n){e(n)}})}const UN="FirebaseError";class Ys extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=UN,Object.setPrototypeOf(this,Ys.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hd.prototype.create)}}class hd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?zN(l,r):"Error",h=`${this.serviceName}: ${c} (${a}).`;return new Ys(a,h,r)}}function zN(t,e){return t.replace(BN,(n,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const BN=/\{\$([^}]+)}/g;function FN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ci(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const a of n){if(!r.includes(a))return!1;const l=t[a],c=e[a];if(C_(l)&&C_(c)){if(!Ci(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!n.includes(a))return!1;return!0}function C_(t){return t!==null&&typeof t=="object"}function fd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Iu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Du(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function HN(t,e){const n=new $N(t,e);return n.subscribe.bind(n)}class $N{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let a;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");qN(e,["next","error","complete"])?a=e:a={next:e,error:n,complete:r},a.next===void 0&&(a.next=w0),a.error===void 0&&(a.error=w0),a.complete===void 0&&(a.complete=w0);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function w0(){}function $t(t){return t&&t._delegate?t._delegate:t}class Ta{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const go="[DEFAULT]";class GN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new kN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KN(e))try{this.getOrInitializeService({instanceIdentifier:go})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=go){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=go){return this.instances.has(e)}getOptions(e=go){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[l,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);r===h&&c.resolve(a)}return a}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const a of r)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:YN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=go){return this.component?this.component.multipleInstances?e:go:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function YN(t){return t===go?void 0:t}function KN(t){return t.instantiationMode==="EAGER"}class QN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new GN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var xt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xt||(xt={}));const XN={debug:xt.DEBUG,verbose:xt.VERBOSE,info:xt.INFO,warn:xt.WARN,error:xt.ERROR,silent:xt.SILENT},WN=xt.INFO,JN={[xt.DEBUG]:"log",[xt.VERBOSE]:"log",[xt.INFO]:"info",[xt.WARN]:"warn",[xt.ERROR]:"error"},ZN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),a=JN[e];if(a)console[a](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let uy=class{constructor(e){this.name=e,this._logLevel=WN,this._logHandler=ZN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?XN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xt.DEBUG,...e),this._logHandler(this,xt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xt.VERBOSE,...e),this._logHandler(this,xt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xt.INFO,...e),this._logHandler(this,xt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xt.WARN,...e),this._logHandler(this,xt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xt.ERROR,...e),this._logHandler(this,xt.ERROR,...e)}};const eA=(t,e)=>e.some(n=>t instanceof n);let T_,k_;function tA(){return T_||(T_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nA(){return k_||(k_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tE=new WeakMap,iv=new WeakMap,nE=new WeakMap,S0=new WeakMap,dy=new WeakMap;function rA(t){const e=new Promise((n,r)=>{const a=()=>{t.removeEventListener("success",l),t.removeEventListener("error",c)},l=()=>{n(_a(t.result)),a()},c=()=>{r(t.error),a()};t.addEventListener("success",l),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&tE.set(n,t)}).catch(()=>{}),dy.set(e,t),e}function sA(t){if(iv.has(t))return;const e=new Promise((n,r)=>{const a=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",c),t.removeEventListener("abort",c)},l=()=>{n(),a()},c=()=>{r(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",l),t.addEventListener("error",c),t.addEventListener("abort",c)});iv.set(t,e)}let av={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return iv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||nE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _a(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function iA(t){av=t(av)}function aA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(E0(this),e,...n);return nE.set(r,e.sort?e.sort():[e]),_a(r)}:nA().includes(t)?function(...e){return t.apply(E0(this),e),_a(tE.get(this))}:function(...e){return _a(t.apply(E0(this),e))}}function oA(t){return typeof t=="function"?aA(t):(t instanceof IDBTransaction&&sA(t),eA(t,tA())?new Proxy(t,av):t)}function _a(t){if(t instanceof IDBRequest)return rA(t);if(S0.has(t))return S0.get(t);const e=oA(t);return e!==t&&(S0.set(t,e),dy.set(e,t)),e}const E0=t=>dy.get(t);function lA(t,e,{blocked:n,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(t,e),h=_a(c);return r&&c.addEventListener("upgradeneeded",m=>{r(_a(c.result),m.oldVersion,m.newVersion,_a(c.transaction),m)}),n&&c.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),h.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}const cA=["get","getKey","getAll","getAllKeys","count"],uA=["put","add","delete","clear"],C0=new Map;function N_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(C0.get(e))return C0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,a=uA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(a||cA.includes(n)))return;const l=async function(c,...h){const m=this.transaction(c,a?"readwrite":"readonly");let g=m.store;return r&&(g=g.index(h.shift())),(await Promise.all([g[n](...h),a&&m.done]))[0]};return C0.set(e,l),l}iA(t=>({...t,get:(e,n,r)=>N_(e,n)||t.get(e,n,r),has:(e,n)=>!!N_(e,n)||t.has(e,n)}));class dA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(hA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function hA(t){return t.getComponent()?.type==="VERSION"}const ov="@firebase/app",A_="0.14.6";const Ti=new uy("@firebase/app"),fA="@firebase/app-compat",mA="@firebase/analytics-compat",pA="@firebase/analytics",gA="@firebase/app-check-compat",vA="@firebase/app-check",yA="@firebase/auth",bA="@firebase/auth-compat",xA="@firebase/database",_A="@firebase/data-connect",wA="@firebase/database-compat",SA="@firebase/functions",EA="@firebase/functions-compat",CA="@firebase/installations",TA="@firebase/installations-compat",kA="@firebase/messaging",NA="@firebase/messaging-compat",AA="@firebase/performance",RA="@firebase/performance-compat",jA="@firebase/remote-config",IA="@firebase/remote-config-compat",DA="@firebase/storage",MA="@firebase/storage-compat",PA="@firebase/firestore",OA="@firebase/ai",LA="@firebase/firestore-compat",VA="firebase",UA="12.6.0";const lv="[DEFAULT]",zA={[ov]:"fire-core",[fA]:"fire-core-compat",[pA]:"fire-analytics",[mA]:"fire-analytics-compat",[vA]:"fire-app-check",[gA]:"fire-app-check-compat",[yA]:"fire-auth",[bA]:"fire-auth-compat",[xA]:"fire-rtdb",[_A]:"fire-data-connect",[wA]:"fire-rtdb-compat",[SA]:"fire-fn",[EA]:"fire-fn-compat",[CA]:"fire-iid",[TA]:"fire-iid-compat",[kA]:"fire-fcm",[NA]:"fire-fcm-compat",[AA]:"fire-perf",[RA]:"fire-perf-compat",[jA]:"fire-rc",[IA]:"fire-rc-compat",[DA]:"fire-gcs",[MA]:"fire-gcs-compat",[PA]:"fire-fst",[LA]:"fire-fst-compat",[OA]:"fire-vertex","fire-js":"fire-js",[VA]:"fire-js-all"};const Gf=new Map,BA=new Map,cv=new Map;function R_(t,e){try{t.container.addComponent(e)}catch(n){Ti.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Co(t){const e=t.name;if(cv.has(e))return Ti.debug(`There were multiple attempts to register component ${e}.`),!1;cv.set(e,t);for(const n of Gf.values())R_(n,t);for(const n of BA.values())R_(n,t);return!0}function Rm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Rr(t){return t==null?!1:t.settings!==void 0}const FA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wa=new hd("app","Firebase",FA);class HA{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ta("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wa.create("app-deleted",{appName:this._name})}}const Po=UA;function rE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:lv,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw wa.create("bad-app-name",{appName:String(a)});if(n||(n=JS()),!n)throw wa.create("no-options");const l=Gf.get(a);if(l){if(Ci(n,l.options)&&Ci(r,l.config))return l;throw wa.create("duplicate-app",{appName:a})}const c=new QN(a);for(const m of cv.values())c.addComponent(m);const h=new HA(n,r,c);return Gf.set(a,h),h}function hy(t=lv){const e=Gf.get(t);if(!e&&t===lv&&JS())return rE();if(!e)throw wa.create("no-app",{appName:t});return e}function Os(t,e,n){let r=zA[t]??t;n&&(r+=`-${n}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${r}" with version "${e}":`];a&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ti.warn(c.join(" "));return}Co(new Ta(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const $A="firebase-heartbeat-database",qA=1,Yu="firebase-heartbeat-store";let T0=null;function sE(){return T0||(T0=lA($A,qA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Yu)}catch(n){console.warn(n)}}}}).catch(t=>{throw wa.create("idb-open",{originalErrorMessage:t.message})})),T0}async function GA(t){try{const n=(await sE()).transaction(Yu),r=await n.objectStore(Yu).get(iE(t));return await n.done,r}catch(e){if(e instanceof Ys)Ti.warn(e.message);else{const n=wa.create("idb-get",{originalErrorMessage:e?.message});Ti.warn(n.message)}}}async function j_(t,e){try{const r=(await sE()).transaction(Yu,"readwrite");await r.objectStore(Yu).put(e,iE(t)),await r.done}catch(n){if(n instanceof Ys)Ti.warn(n.message);else{const r=wa.create("idb-set",{originalErrorMessage:n?.message});Ti.warn(r.message)}}}function iE(t){return`${t.name}!${t.options.appId}`}const YA=1024,KA=30;class QA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new WA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=I_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>KA){const a=JA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ti.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=I_(),{heartbeatsToSend:n,unsentEntries:r}=XA(this._heartbeatsCache.heartbeats),a=qf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Ti.warn(e),""}}}function I_(){return new Date().toISOString().substring(0,10)}function XA(t,e=YA){const n=[];let r=t.slice();for(const a of t){const l=n.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),D_(n)>e){l.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),D_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class WA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LN()?VN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await GA(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return j_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return j_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function D_(t){return qf(JSON.stringify({version:2,heartbeats:t})).length}function JA(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function ZA(t){Co(new Ta("platform-logger",e=>new dA(e),"PRIVATE")),Co(new Ta("heartbeat",e=>new QA(e),"PRIVATE")),Os(ov,A_,t),Os(ov,A_,"esm2020"),Os("fire-js","")}ZA("");var eR="firebase",tR="12.6.0";Os(eR,tR,"app");function aE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nR=aE,oE=new hd("auth","Firebase",aE());const Yf=new uy("@firebase/auth");function rR(t,...e){Yf.logLevel<=xt.WARN&&Yf.warn(`Auth (${Po}): ${t}`,...e)}function wf(t,...e){Yf.logLevel<=xt.ERROR&&Yf.error(`Auth (${Po}): ${t}`,...e)}function cs(t,...e){throw fy(t,...e)}function Ls(t,...e){return fy(t,...e)}function lE(t,e,n){const r={...nR(),[e]:n};return new hd("auth","Firebase",r).create(e,{appName:t.name})}function wi(t){return lE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return oE.create(t,...e)}function et(t,e,...n){if(!t)throw fy(e,...n)}function bi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw wf(e),new Error(e)}function ki(t,e){t||bi(e)}function uv(){return typeof self<"u"&&self.location?.href||""}function sR(){return M_()==="http:"||M_()==="https:"}function M_(){return typeof self<"u"&&self.location?.protocol||null}function iR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sR()||DN()||"connection"in navigator)?navigator.onLine:!0}function aR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class md{constructor(e,n){this.shortDelay=e,this.longDelay=n,ki(n>e,"Short delay should be less than long delay!"),this.isMobile=RN()||MN()}get(){return iR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function my(t,e){ki(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class cE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;bi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;bi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;bi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const oR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const lR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cR=new md(3e4,6e4);function ji(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ks(t,e,n,r,a={}){return uE(t,a,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const h=fd({key:t.config.apiKey,...c}).slice(1),m=await t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);const g={method:e,headers:m,...l};return IN()||(g.referrerPolicy="no-referrer"),t.emulatorConfig&&Mo(t.emulatorConfig.host)&&(g.credentials="include"),cE.fetch()(await dE(t,t.config.apiHost,n,h),g)})}async function uE(t,e,n){t._canInitEmulator=!1;const r={...oR,...e};try{const a=new dR(t),l=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw nf(t,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const h=l.ok?c.errorMessage:c.error.message,[m,g]=h.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw nf(t,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw nf(t,"email-already-in-use",c);if(m==="USER_DISABLED")throw nf(t,"user-disabled",c);const y=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw lE(t,y,g);cs(t,y)}}catch(a){if(a instanceof Ys)throw a;cs(t,"network-request-failed",{message:String(a)})}}async function pd(t,e,n,r,a={}){const l=await Ks(t,e,n,r,a);return"mfaPendingCredential"in l&&cs(t,"multi-factor-auth-required",{_serverResponse:l}),l}async function dE(t,e,n,r){const a=`${e}${n}?${r}`,l=t,c=l.config.emulator?my(t.config,a):`${t.config.apiScheme}://${a}`;return lR.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function uR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class dR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ls(this.auth,"network-request-failed")),cR.get())})}}function nf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const a=Ls(t,e,r);return a.customData._tokenResponse=n,a}function P_(t){return t!==void 0&&t.enterprise!==void 0}class hR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return uR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function fR(t,e){return Ks(t,"GET","/v2/recaptchaConfig",ji(t,e))}async function mR(t,e){return Ks(t,"POST","/v1/accounts:delete",e)}async function Kf(t,e){return Ks(t,"POST","/v1/accounts:lookup",e)}function Fu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pR(t,e=!1){const n=$t(t),r=await n.getIdToken(e),a=py(r);et(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:r,authTime:Fu(k0(a.auth_time)),issuedAtTime:Fu(k0(a.iat)),expirationTime:Fu(k0(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function k0(t){return Number(t)*1e3}function py(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return wf("JWT malformed, contained fewer than 3 sections"),null;try{const a=QS(n);return a?JSON.parse(a):(wf("Failed to decode base64 JWT payload"),null)}catch(a){return wf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function O_(t){const e=py(t);return et(e,"internal-error"),et(typeof e.exp<"u","internal-error"),et(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Xl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ys&&gR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function gR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class vR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class dv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fu(this.lastLoginAt),this.creationTime=Fu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Qf(t){const e=t.auth,n=await t.getIdToken(),r=await Xl(t,Kf(e,{idToken:n}));et(r?.users.length,e,"internal-error");const a=r.users[0];t._notifyReloadListener(a);const l=a.providerUserInfo?.length?hE(a.providerUserInfo):[],c=bR(t.providerData,l),h=t.isAnonymous,m=!(t.email&&a.passwordHash)&&!c?.length,g=h?m:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new dv(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(t,y)}async function yR(t){const e=$t(t);await Qf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bR(t,e){return[...t.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function hE(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function xR(t,e){const n=await uE(t,{},async()=>{const r=fd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=t.config,c=await dE(t,a,"/v1/token",`key=${l}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:h,body:r};return t.emulatorConfig&&Mo(t.emulatorConfig.host)&&(m.credentials="include"),cE.fetch()(c,m)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function _R(t,e){return Ks(t,"POST","/v2/accounts:revokeToken",ji(t,e))}class Fl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){et(e.idToken,"internal-error"),et(typeof e.idToken<"u","internal-error"),et(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):O_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){et(e.length!==0,"internal-error");const n=O_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(et(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:a,expiresIn:l}=await xR(e,n);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:a,expirationTime:l}=n,c=new Fl;return r&&(et(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(et(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(et(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fl,this.toJSON())}_performRefresh(){return bi("not implemented")}}function ca(t,e){et(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class as{constructor({uid:e,auth:n,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new vR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new dv(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Xl(this,this.stsTokenManager.getToken(this.auth,e));return et(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return pR(this,e)}reload(){return yR(this)}_assign(e){this!==e&&(et(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new as({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Qf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rr(this.auth.app))return Promise.reject(wi(this.auth));const e=await this.getIdToken();return await Xl(this,mR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,a=n.email??void 0,l=n.phoneNumber??void 0,c=n.photoURL??void 0,h=n.tenantId??void 0,m=n._redirectEventId??void 0,g=n.createdAt??void 0,y=n.lastLoginAt??void 0,{uid:b,emailVerified:_,isAnonymous:k,providerData:R,stsTokenManager:j}=n;et(b&&j,e,"internal-error");const T=Fl.fromJSON(this.name,j);et(typeof b=="string",e,"internal-error"),ca(r,e.name),ca(a,e.name),et(typeof _=="boolean",e,"internal-error"),et(typeof k=="boolean",e,"internal-error"),ca(l,e.name),ca(c,e.name),ca(h,e.name),ca(m,e.name),ca(g,e.name),ca(y,e.name);const H=new as({uid:b,auth:e,email:a,emailVerified:_,displayName:r,isAnonymous:k,photoURL:c,phoneNumber:l,tenantId:h,stsTokenManager:T,createdAt:g,lastLoginAt:y});return R&&Array.isArray(R)&&(H.providerData=R.map(q=>({...q}))),m&&(H._redirectEventId=m),H}static async _fromIdTokenResponse(e,n,r=!1){const a=new Fl;a.updateFromServerResponse(n);const l=new as({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await Qf(l),l}static async _fromGetAccountInfoResponse(e,n,r){const a=n.users[0];et(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?hE(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,h=new Fl;h.updateFromIdToken(r);const m=new as({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new dv(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(m,g),m}}const L_=new Map;function xi(t){ki(t instanceof Function,"Expected a class definition");let e=L_.get(t);return e?(ki(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,L_.set(t,e),e)}class fE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}fE.type="NONE";const V_=fE;function Sf(t,e,n){return`firebase:${t}:${e}:${n}`}class Hl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=Sf(this.userKey,a.apiKey,l),this.fullPersistenceKey=Sf("persistence",a.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Kf(this.auth,{idToken:e}).catch(()=>{});return n?as._fromGetAccountInfoResponse(this.auth,n,e):null}return as._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Hl(xi(V_),e,r);const a=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||xi(V_);const c=Sf(r,e.config.apiKey,e.name);let h=null;for(const g of n)try{const y=await g._get(c);if(y){let b;if(typeof y=="string"){const _=await Kf(e,{idToken:y}).catch(()=>{});if(!_)break;b=await as._fromGetAccountInfoResponse(e,_,y)}else b=as._fromJSON(e,y);g!==l&&(h=b),l=g;break}}catch{}const m=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Hl(l,e,r):(l=m[0],h&&await l._set(c,h.toJSON()),await Promise.all(n.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Hl(l,e,r))}}function U_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bE(e))return"Blackberry";if(xE(e))return"Webos";if(pE(e))return"Safari";if((e.includes("chrome/")||gE(e))&&!e.includes("edge/"))return"Chrome";if(yE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function mE(t=Jn()){return/firefox\//i.test(t)}function pE(t=Jn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gE(t=Jn()){return/crios\//i.test(t)}function vE(t=Jn()){return/iemobile/i.test(t)}function yE(t=Jn()){return/android/i.test(t)}function bE(t=Jn()){return/blackberry/i.test(t)}function xE(t=Jn()){return/webos/i.test(t)}function gy(t=Jn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function wR(t=Jn()){return gy(t)&&!!window.navigator?.standalone}function SR(){return PN()&&document.documentMode===10}function _E(t=Jn()){return gy(t)||yE(t)||xE(t)||bE(t)||/windows phone/i.test(t)||vE(t)}function wE(t,e=[]){let n;switch(t){case"Browser":n=U_(Jn());break;case"Worker":n=`${U_(Jn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Po}/${r}`}class ER{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=l=>new Promise((c,h)=>{try{const m=e(l);c(m)}catch(m){h(m)}});r.onAbort=n,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function CR(t,e={}){return Ks(t,"GET","/v2/passwordPolicy",ji(t,e))}const TR=6;class kR{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??TR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),a&&(n.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class NR{constructor(e,n,r,a){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new z_(this),this.idTokenSubscription=new z_(this),this.beforeStateQueue=new ER(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=xi(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Hl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Kf(this,{idToken:e}),r=await as._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Rr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=r?._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===c)&&h?.user&&(r=h.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Qf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=aR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rr(this.app))return Promise.reject(wi(this));const n=e?$t(e):null;return n&&et(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&et(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Rr(this.app)?Promise.reject(wi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rr(this.app)?Promise.reject(wi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await CR(this),n=new kR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new hd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await _R(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&xi(e)||this._popupRedirectResolver;et(n,this,"argument-error"),this.redirectPersistenceManager=await Hl.create(this,[xi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,a){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(et(h,this,"internal-error"),h.then(()=>{c||l(this.currentUser)}),typeof n=="function"){const m=e.addObserver(n,r,a);return()=>{c=!0,m()}}else{const m=e.addObserver(n);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Rr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&rR(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ma(t){return $t(t)}class z_{constructor(e){this.auth=e,this.observer=null,this.addObserver=HN(n=>this.observer=n)}get next(){return et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let jm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function AR(t){jm=t}function SE(t){return jm.loadJS(t)}function RR(){return jm.recaptchaEnterpriseScript}function jR(){return jm.gapiScript}function IR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class DR{constructor(){this.enterprise=new MR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class MR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const PR="recaptcha-enterprise",EE="NO_RECAPTCHA";class OR{constructor(e){this.type=PR,this.auth=Ma(e)}async verify(e="verify",n=!1){async function r(l){if(!n){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,h)=>{fR(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const g=new hR(m);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(m=>{h(m)})})}function a(l,c,h){const m=window.grecaptcha;P_(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(g=>{c(g)}).catch(()=>{c(EE)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new DR().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{r(this.auth).then(h=>{if(!n&&P_(window.grecaptcha))a(h,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=RR();m.length!==0&&(m+=h),SE(m).then(()=>{a(h,l,c)}).catch(g=>{c(g)})}}).catch(h=>{c(h)})})}}async function B_(t,e,n,r=!1,a=!1){const l=new OR(t);let c;if(a)c=EE;else try{c=await l.verify(n)}catch{c=await l.verify(n,!0)}const h={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const m=h.phoneEnrollmentInfo.phoneNumber,g=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const m=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Xf(t,e,n,r,a){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await B_(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await B_(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(l)})}function LR(t,e){const n=Rm(t,"auth");if(n.isInitialized()){const a=n.getImmediate(),l=n.getOptions();if(Ci(l,e??{}))return a;cs(a,"already-initialized")}return n.initialize({options:e})}function VR(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(xi);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function UR(t,e,n){const r=Ma(t);et(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=CE(e),{host:c,port:h}=zR(e),m=h===null?"":`:${h}`,g={url:`${l}//${c}${m}/`},y=Object.freeze({host:c,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){et(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),et(Ci(g,r.config.emulator)&&Ci(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,Mo(c)?(ly(`${l}//${c}${m}`),cy("Auth",!0)):BR()}function CE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function zR(t){const e=CE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:F_(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:F_(c)}}}function F_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function BR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class vy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return bi("not implemented")}_getIdTokenResponse(e){return bi("not implemented")}_linkToIdToken(e,n){return bi("not implemented")}_getReauthenticationResolver(e){return bi("not implemented")}}async function FR(t,e){return Ks(t,"POST","/v1/accounts:update",e)}async function HR(t,e){return Ks(t,"POST","/v1/accounts:signUp",e)}async function $R(t,e){return pd(t,"POST","/v1/accounts:signInWithPassword",ji(t,e))}async function TE(t,e){return Ks(t,"POST","/v1/accounts:sendOobCode",ji(t,e))}async function qR(t,e){return TE(t,e)}async function GR(t,e){return TE(t,e)}async function YR(t,e){return pd(t,"POST","/v1/accounts:signInWithEmailLink",ji(t,e))}async function KR(t,e){return pd(t,"POST","/v1/accounts:signInWithEmailLink",ji(t,e))}class Ku extends vy{constructor(e,n,r,a=null){super("password",r),this._email=e,this._password=n,this._tenantId=a}static _fromEmailAndPassword(e,n){return new Ku(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ku(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xf(e,n,"signInWithPassword",$R);case"emailLink":return YR(e,{email:this._email,oobCode:this._password});default:cs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xf(e,r,"signUpPassword",HR);case"emailLink":return KR(e,{idToken:n,email:this._email,oobCode:this._password});default:cs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function $l(t,e){return pd(t,"POST","/v1/accounts:signInWithIdp",ji(t,e))}const QR="http://localhost";class To extends vy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new To(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):cs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=n;if(!r||!a)return null;const c=new To(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return $l(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,$l(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,$l(e,n)}buildRequest(){const e={requestUri:QR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=fd(n)}return e}}function XR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function WR(t){const e=Iu(Du(t)).link,n=e?Iu(Du(e)).deep_link_id:null,r=Iu(Du(t)).deep_link_id;return(r?Iu(Du(r)).link:null)||r||n||e||t}class yy{constructor(e){const n=Iu(Du(e)),r=n.apiKey??null,a=n.oobCode??null,l=XR(n.mode??null);et(r&&a&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=a,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=WR(e);try{return new yy(n)}catch{return null}}}class Oo{constructor(){this.providerId=Oo.PROVIDER_ID}static credential(e,n){return Ku._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=yy.parseLink(n);return et(r,"argument-error"),Ku._fromEmailAndCode(e,r.code,r.tenantId)}}Oo.PROVIDER_ID="password";Oo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Oo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class kE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class gd extends kE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ma extends gd{constructor(){super("facebook.com")}static credential(e){return To._fromParams({providerId:ma.PROVIDER_ID,signInMethod:ma.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ma.credentialFromTaggedObject(e)}static credentialFromError(e){return ma.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ma.credential(e.oauthAccessToken)}catch{return null}}}ma.FACEBOOK_SIGN_IN_METHOD="facebook.com";ma.PROVIDER_ID="facebook.com";class pa extends gd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return To._fromParams({providerId:pa.PROVIDER_ID,signInMethod:pa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return pa.credentialFromTaggedObject(e)}static credentialFromError(e){return pa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return pa.credential(n,r)}catch{return null}}}pa.GOOGLE_SIGN_IN_METHOD="google.com";pa.PROVIDER_ID="google.com";class ga extends gd{constructor(){super("github.com")}static credential(e){return To._fromParams({providerId:ga.PROVIDER_ID,signInMethod:ga.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ga.credentialFromTaggedObject(e)}static credentialFromError(e){return ga.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ga.credential(e.oauthAccessToken)}catch{return null}}}ga.GITHUB_SIGN_IN_METHOD="github.com";ga.PROVIDER_ID="github.com";class va extends gd{constructor(){super("twitter.com")}static credential(e,n){return To._fromParams({providerId:va.PROVIDER_ID,signInMethod:va.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return va.credentialFromTaggedObject(e)}static credentialFromError(e){return va.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return va.credential(n,r)}catch{return null}}}va.TWITTER_SIGN_IN_METHOD="twitter.com";va.PROVIDER_ID="twitter.com";async function JR(t,e){return pd(t,"POST","/v1/accounts:signUp",ji(t,e))}class ko{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,a=!1){const l=await as._fromIdTokenResponse(e,r,a),c=H_(r);return new ko({user:l,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const a=H_(r);return new ko({user:e,providerId:a,_tokenResponse:r,operationType:n})}}function H_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Wf extends Ys{constructor(e,n,r,a){super(n.code,n.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,Wf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,a){return new Wf(e,n,r,a)}}function NE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Wf._fromErrorAndOperation(t,l,e,r):l})}async function ZR(t,e,n=!1){const r=await Xl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ko._forOperation(t,"link",r)}async function AE(t,e,n=!1){const{auth:r}=t;if(Rr(r.app))return Promise.reject(wi(r));const a="reauthenticate";try{const l=await Xl(t,NE(r,a,e,t),n);et(l.idToken,r,"internal-error");const c=py(l.idToken);et(c,r,"internal-error");const{sub:h}=c;return et(t.uid===h,r,"user-mismatch"),ko._forOperation(t,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&cs(r,"user-mismatch"),l}}async function RE(t,e,n=!1){if(Rr(t.app))return Promise.reject(wi(t));const r="signIn",a=await NE(t,r,e),l=await ko._fromIdTokenResponse(t,r,a);return n||await t._updateCurrentUser(l.user),l}async function e8(t,e){return RE(Ma(t),e)}async function t8(t,e){return AE($t(t),e)}async function jE(t){const e=Ma(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function IE(t,e,n){const r=Ma(t);await Xf(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",GR)}async function n8(t,e,n){if(Rr(t.app))return Promise.reject(wi(t));const r=Ma(t),c=await Xf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",JR).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&jE(t),m}),h=await ko._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(h.user),h}function r8(t,e,n){return Rr(t.app)?Promise.reject(wi(t)):e8($t(t),Oo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&jE(t),r})}async function $_(t,e){const n=$t(t),a={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:l}=await qR(n.auth,a);l!==t.email&&await t.reload()}function s8(t,e){return i8($t(t),null,e)}async function i8(t,e,n){const{auth:r}=t,l={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(l.password=n);const c=await Xl(t,FR(r,l));await t._updateTokensIfNecessary(c,!0)}function a8(t,e,n,r){return $t(t).onIdTokenChanged(e,n,r)}function o8(t,e,n){return $t(t).beforeAuthStateChanged(e,n)}function l8(t,e,n,r){return $t(t).onAuthStateChanged(e,n,r)}function c8(t){return $t(t).signOut()}const Jf="__sak";class DE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Jf,"1"),this.storage.removeItem(Jf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const u8=1e3,d8=10;class ME extends DE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_E(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),a=this.localCache[n];r!==a&&e(n,a,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,h,m)=>{this.notifyListeners(c,m)});return}const r=e.key;n?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);SR()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,d8):a()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},u8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ME.type="LOCAL";const h8=ME;class PE extends DE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}PE.type="SESSION";const OE=PE;function f8(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Im{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(a=>a.isListeningto(e));if(n)return n;const r=new Im(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:a,data:l}=n.data,c=this.handlersMap[a];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const h=Array.from(c).map(async g=>g(n.origin,l)),m=await f8(h);n.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:m})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Im.receivers=[];function by(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class m8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((h,m)=>{const g=by("",20);a.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(b){const _=b;if(_.data.eventId===g)switch(_.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(_.data.response);break;default:clearTimeout(y),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Vs(){return window}function p8(t){Vs().location.href=t}function LE(){return typeof Vs().WorkerGlobalScope<"u"&&typeof Vs().importScripts=="function"}async function g8(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function v8(){return navigator?.serviceWorker?.controller||null}function y8(){return LE()?self:null}const VE="firebaseLocalStorageDb",b8=1,Zf="firebaseLocalStorage",UE="fbase_key";class vd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Dm(t,e){return t.transaction([Zf],e?"readwrite":"readonly").objectStore(Zf)}function x8(){const t=indexedDB.deleteDatabase(VE);return new vd(t).toPromise()}function hv(){const t=indexedDB.open(VE,b8);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Zf,{keyPath:UE})}catch(a){n(a)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Zf)?e(r):(r.close(),await x8(),e(await hv()))})})}async function q_(t,e,n){const r=Dm(t,!0).put({[UE]:e,value:n});return new vd(r).toPromise()}async function _8(t,e){const n=Dm(t,!1).get(e),r=await new vd(n).toPromise();return r===void 0?null:r.value}function G_(t,e){const n=Dm(t,!0).delete(e);return new vd(n).toPromise()}const w8=800,S8=3;class zE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>S8)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return LE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Im._getInstance(y8()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await g8(),!this.activeServiceWorker)return;this.sender=new m8(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||v8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hv();return await q_(e,Jf,"1"),await G_(e,Jf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>q_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>_8(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>G_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Dm(a,!1).getAll();return new vd(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),w8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zE.type="LOCAL";const E8=zE;new md(3e4,6e4);function C8(t,e){return e?xi(e):(et(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class xy extends vy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $l(e,this._buildIdpRequest())}_linkToIdToken(e,n){return $l(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return $l(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function T8(t){return RE(t.auth,new xy(t),t.bypassAuthState)}function k8(t){const{auth:e,user:n}=t;return et(n,e,"internal-error"),AE(n,new xy(t),t.bypassAuthState)}async function N8(t){const{auth:e,user:n}=t;return et(n,e,"internal-error"),ZR(n,new xy(t),t.bypassAuthState)}class BE{constructor(e,n,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:a,tenantId:l,error:c,type:h}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:n,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return T8;case"linkViaPopup":case"linkViaRedirect":return N8;case"reauthViaPopup":case"reauthViaRedirect":return k8;default:cs(this.auth,"internal-error")}}resolve(e){ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const A8=new md(2e3,1e4);class zl extends BE{constructor(e,n,r,a,l){super(e,n,a,l),this.provider=r,this.authWindow=null,this.pollId=null,zl.currentPopupAction&&zl.currentPopupAction.cancel(),zl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return et(e,this.auth,"internal-error"),e}async onExecution(){ki(this.filter.length===1,"Popup operations only handle one event");const e=by();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ls(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ls(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ls(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,A8.get())};e()}}zl.currentPopupAction=null;const R8="pendingRedirect",Ef=new Map;class j8 extends BE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ef.get(this.auth._key());if(!e){try{const r=await I8(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ef.set(this.auth._key(),e)}return this.bypassAuthState||Ef.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function I8(t,e){const n=P8(e),r=M8(t);if(!await r._isAvailable())return!1;const a=await r._get(n)==="true";return await r._remove(n),a}function D8(t,e){Ef.set(t._key(),e)}function M8(t){return xi(t._redirectPersistence)}function P8(t){return Sf(R8,t.config.apiKey,t.name)}async function O8(t,e,n=!1){if(Rr(t.app))return Promise.reject(wi(t));const r=Ma(t),a=C8(r,e),c=await new j8(r,a,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}const L8=600*1e3;class V8{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!U8(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!FE(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Ls(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=L8&&this.cachedEventUids.clear(),this.cachedEventUids.has(Y_(e))}saveEventToCache(e){this.cachedEventUids.add(Y_(e)),this.lastProcessedEventTime=Date.now()}}function Y_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function FE({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function U8(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FE(t);default:return!1}}async function z8(t,e={}){return Ks(t,"GET","/v1/projects",e)}const B8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,F8=/^https?/;async function H8(t){if(t.config.emulator)return;const{authorizedDomains:e}=await z8(t);for(const n of e)try{if($8(n))return}catch{}cs(t,"unauthorized-domain")}function $8(t){const e=uv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!F8.test(n))return!1;if(B8.test(t))return r===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const q8=new md(3e4,6e4);function K_(){const t=Vs().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function G8(t){return new Promise((e,n)=>{function r(){K_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{K_(),n(Ls(t,"network-request-failed"))},timeout:q8.get()})}if(Vs().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Vs().gapi?.load)r();else{const a=IR("iframefcb");return Vs()[a]=()=>{gapi.load?r():n(Ls(t,"network-request-failed"))},SE(`${jR()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Cf=null,e})}let Cf=null;function Y8(t){return Cf=Cf||G8(t),Cf}const K8=new md(5e3,15e3),Q8="__/auth/iframe",X8="emulator/auth/iframe",W8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},J8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Z8(t){const e=t.config;et(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?my(e,X8):`https://${t.config.authDomain}/${Q8}`,r={apiKey:e.apiKey,appName:t.name,v:Po},a=J8.get(t.config.apiHost);a&&(r.eid=a);const l=t._getFrameworks();return l.length&&(r.fw=l.join(",")),`${n}?${fd(r).slice(1)}`}async function ej(t){const e=await Y8(t),n=Vs().gapi;return et(n,t,"internal-error"),e.open({where:document.body,url:Z8(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:W8,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=Ls(t,"network-request-failed"),h=Vs().setTimeout(()=>{l(c)},K8.get());function m(){Vs().clearTimeout(h),a(r)}r.ping(m).then(m,()=>{l(c)})}))}const tj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nj=500,rj=600,sj="_blank",ij="http://localhost";class Q_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aj(t,e,n,r=nj,a=rj){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const m={...tj,width:r.toString(),height:a.toString(),top:l,left:c},g=Jn().toLowerCase();n&&(h=gE(g)?sj:n),mE(g)&&(e=e||ij,m.scrollbars="yes");const y=Object.entries(m).reduce((_,[k,R])=>`${_}${k}=${R},`,"");if(wR(g)&&h!=="_self")return oj(e||"",h),new Q_(null);const b=window.open(e||"",h,y);et(b,t,"popup-blocked");try{b.focus()}catch{}return new Q_(b)}function oj(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const lj="__/auth/handler",cj="emulator/auth/handler",uj=encodeURIComponent("fac");async function X_(t,e,n,r,a,l){et(t.config.authDomain,t,"auth-domain-config-required"),et(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Po,eventId:a};if(e instanceof kE){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",FN(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,b]of Object.entries({}))c[y]=b}if(e instanceof gd){const y=e.getScopes().filter(b=>b!=="");y.length>0&&(c.scopes=y.join(","))}t.tenantId&&(c.tid=t.tenantId);const h=c;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const m=await t._getAppCheckToken(),g=m?`#${uj}=${encodeURIComponent(m)}`:"";return`${dj(t)}?${fd(h).slice(1)}${g}`}function dj({config:t}){return t.emulator?my(t,cj):`https://${t.authDomain}/${lj}`}const N0="webStorageSupport";class hj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=OE,this._completeRedirectFn=O8,this._overrideRedirectResult=D8}async _openPopup(e,n,r,a){ki(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await X_(e,n,r,uv(),a);return aj(e,l,by())}async _openRedirect(e,n,r,a){await this._originValidation(e);const l=await X_(e,n,r,uv(),a);return p8(l),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:a,promise:l}=this.eventManagers[n];return a?Promise.resolve(a):(ki(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await ej(e),r=new V8(e);return n.register("authEvent",a=>(et(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(N0,{type:N0},a=>{const l=a?.[0]?.[N0];l!==void 0&&n(!!l),cs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=H8(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _E()||pE()||gy()}}const fj=hj;var W_="@firebase/auth",J_="1.11.1";class mj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function pj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function gj(t){Co(new Ta("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=r.options;et(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:c,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wE(t)},g=new NR(r,a,l,m);return VR(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Co(new Ta("auth-internal",e=>{const n=Ma(e.getProvider("auth").getImmediate());return(r=>new mj(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Os(W_,J_,pj(t)),Os(W_,J_,"esm2020")}const vj=300,yj=ZS("authIdTokenMaxAge")||vj;let Z_=null;const bj=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>yj)return;const a=n?.token;Z_!==a&&(Z_=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function xj(t=hy()){const e=Rm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=LR(t,{popupRedirectResolver:fj,persistence:[E8,h8,OE]}),r=ZS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=bj(l.toString());o8(n,c,()=>c(n.currentUser)),a8(n,h=>c(h))}}const a=XS("auth");return a&&UR(n,`http://${a}`),n}function _j(){return document.getElementsByTagName("head")?.[0]??document}AR({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=a=>{const l=Ls("internal-error");l.customData=a,n(l)},r.type="text/javascript",r.charset="UTF-8",_j().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});gj("Browser");var e4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Sa,HE;(function(){var t;function e(w,E){function A(){}A.prototype=E.prototype,w.F=E.prototype,w.prototype=new A,w.prototype.constructor=w,w.D=function(D,O,L){for(var P=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)P[pe-2]=arguments[pe];return E.prototype[O].apply(D,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(w,E,A){A||(A=0);const D=Array(16);if(typeof E=="string")for(var O=0;O<16;++O)D[O]=E.charCodeAt(A++)|E.charCodeAt(A++)<<8|E.charCodeAt(A++)<<16|E.charCodeAt(A++)<<24;else for(O=0;O<16;++O)D[O]=E[A++]|E[A++]<<8|E[A++]<<16|E[A++]<<24;E=w.g[0],A=w.g[1],O=w.g[2];let L=w.g[3],P;P=E+(L^A&(O^L))+D[0]+3614090360&4294967295,E=A+(P<<7&4294967295|P>>>25),P=L+(O^E&(A^O))+D[1]+3905402710&4294967295,L=E+(P<<12&4294967295|P>>>20),P=O+(A^L&(E^A))+D[2]+606105819&4294967295,O=L+(P<<17&4294967295|P>>>15),P=A+(E^O&(L^E))+D[3]+3250441966&4294967295,A=O+(P<<22&4294967295|P>>>10),P=E+(L^A&(O^L))+D[4]+4118548399&4294967295,E=A+(P<<7&4294967295|P>>>25),P=L+(O^E&(A^O))+D[5]+1200080426&4294967295,L=E+(P<<12&4294967295|P>>>20),P=O+(A^L&(E^A))+D[6]+2821735955&4294967295,O=L+(P<<17&4294967295|P>>>15),P=A+(E^O&(L^E))+D[7]+4249261313&4294967295,A=O+(P<<22&4294967295|P>>>10),P=E+(L^A&(O^L))+D[8]+1770035416&4294967295,E=A+(P<<7&4294967295|P>>>25),P=L+(O^E&(A^O))+D[9]+2336552879&4294967295,L=E+(P<<12&4294967295|P>>>20),P=O+(A^L&(E^A))+D[10]+4294925233&4294967295,O=L+(P<<17&4294967295|P>>>15),P=A+(E^O&(L^E))+D[11]+2304563134&4294967295,A=O+(P<<22&4294967295|P>>>10),P=E+(L^A&(O^L))+D[12]+1804603682&4294967295,E=A+(P<<7&4294967295|P>>>25),P=L+(O^E&(A^O))+D[13]+4254626195&4294967295,L=E+(P<<12&4294967295|P>>>20),P=O+(A^L&(E^A))+D[14]+2792965006&4294967295,O=L+(P<<17&4294967295|P>>>15),P=A+(E^O&(L^E))+D[15]+1236535329&4294967295,A=O+(P<<22&4294967295|P>>>10),P=E+(O^L&(A^O))+D[1]+4129170786&4294967295,E=A+(P<<5&4294967295|P>>>27),P=L+(A^O&(E^A))+D[6]+3225465664&4294967295,L=E+(P<<9&4294967295|P>>>23),P=O+(E^A&(L^E))+D[11]+643717713&4294967295,O=L+(P<<14&4294967295|P>>>18),P=A+(L^E&(O^L))+D[0]+3921069994&4294967295,A=O+(P<<20&4294967295|P>>>12),P=E+(O^L&(A^O))+D[5]+3593408605&4294967295,E=A+(P<<5&4294967295|P>>>27),P=L+(A^O&(E^A))+D[10]+38016083&4294967295,L=E+(P<<9&4294967295|P>>>23),P=O+(E^A&(L^E))+D[15]+3634488961&4294967295,O=L+(P<<14&4294967295|P>>>18),P=A+(L^E&(O^L))+D[4]+3889429448&4294967295,A=O+(P<<20&4294967295|P>>>12),P=E+(O^L&(A^O))+D[9]+568446438&4294967295,E=A+(P<<5&4294967295|P>>>27),P=L+(A^O&(E^A))+D[14]+3275163606&4294967295,L=E+(P<<9&4294967295|P>>>23),P=O+(E^A&(L^E))+D[3]+4107603335&4294967295,O=L+(P<<14&4294967295|P>>>18),P=A+(L^E&(O^L))+D[8]+1163531501&4294967295,A=O+(P<<20&4294967295|P>>>12),P=E+(O^L&(A^O))+D[13]+2850285829&4294967295,E=A+(P<<5&4294967295|P>>>27),P=L+(A^O&(E^A))+D[2]+4243563512&4294967295,L=E+(P<<9&4294967295|P>>>23),P=O+(E^A&(L^E))+D[7]+1735328473&4294967295,O=L+(P<<14&4294967295|P>>>18),P=A+(L^E&(O^L))+D[12]+2368359562&4294967295,A=O+(P<<20&4294967295|P>>>12),P=E+(A^O^L)+D[5]+4294588738&4294967295,E=A+(P<<4&4294967295|P>>>28),P=L+(E^A^O)+D[8]+2272392833&4294967295,L=E+(P<<11&4294967295|P>>>21),P=O+(L^E^A)+D[11]+1839030562&4294967295,O=L+(P<<16&4294967295|P>>>16),P=A+(O^L^E)+D[14]+4259657740&4294967295,A=O+(P<<23&4294967295|P>>>9),P=E+(A^O^L)+D[1]+2763975236&4294967295,E=A+(P<<4&4294967295|P>>>28),P=L+(E^A^O)+D[4]+1272893353&4294967295,L=E+(P<<11&4294967295|P>>>21),P=O+(L^E^A)+D[7]+4139469664&4294967295,O=L+(P<<16&4294967295|P>>>16),P=A+(O^L^E)+D[10]+3200236656&4294967295,A=O+(P<<23&4294967295|P>>>9),P=E+(A^O^L)+D[13]+681279174&4294967295,E=A+(P<<4&4294967295|P>>>28),P=L+(E^A^O)+D[0]+3936430074&4294967295,L=E+(P<<11&4294967295|P>>>21),P=O+(L^E^A)+D[3]+3572445317&4294967295,O=L+(P<<16&4294967295|P>>>16),P=A+(O^L^E)+D[6]+76029189&4294967295,A=O+(P<<23&4294967295|P>>>9),P=E+(A^O^L)+D[9]+3654602809&4294967295,E=A+(P<<4&4294967295|P>>>28),P=L+(E^A^O)+D[12]+3873151461&4294967295,L=E+(P<<11&4294967295|P>>>21),P=O+(L^E^A)+D[15]+530742520&4294967295,O=L+(P<<16&4294967295|P>>>16),P=A+(O^L^E)+D[2]+3299628645&4294967295,A=O+(P<<23&4294967295|P>>>9),P=E+(O^(A|~L))+D[0]+4096336452&4294967295,E=A+(P<<6&4294967295|P>>>26),P=L+(A^(E|~O))+D[7]+1126891415&4294967295,L=E+(P<<10&4294967295|P>>>22),P=O+(E^(L|~A))+D[14]+2878612391&4294967295,O=L+(P<<15&4294967295|P>>>17),P=A+(L^(O|~E))+D[5]+4237533241&4294967295,A=O+(P<<21&4294967295|P>>>11),P=E+(O^(A|~L))+D[12]+1700485571&4294967295,E=A+(P<<6&4294967295|P>>>26),P=L+(A^(E|~O))+D[3]+2399980690&4294967295,L=E+(P<<10&4294967295|P>>>22),P=O+(E^(L|~A))+D[10]+4293915773&4294967295,O=L+(P<<15&4294967295|P>>>17),P=A+(L^(O|~E))+D[1]+2240044497&4294967295,A=O+(P<<21&4294967295|P>>>11),P=E+(O^(A|~L))+D[8]+1873313359&4294967295,E=A+(P<<6&4294967295|P>>>26),P=L+(A^(E|~O))+D[15]+4264355552&4294967295,L=E+(P<<10&4294967295|P>>>22),P=O+(E^(L|~A))+D[6]+2734768916&4294967295,O=L+(P<<15&4294967295|P>>>17),P=A+(L^(O|~E))+D[13]+1309151649&4294967295,A=O+(P<<21&4294967295|P>>>11),P=E+(O^(A|~L))+D[4]+4149444226&4294967295,E=A+(P<<6&4294967295|P>>>26),P=L+(A^(E|~O))+D[11]+3174756917&4294967295,L=E+(P<<10&4294967295|P>>>22),P=O+(E^(L|~A))+D[2]+718787259&4294967295,O=L+(P<<15&4294967295|P>>>17),P=A+(L^(O|~E))+D[9]+3951481745&4294967295,w.g[0]=w.g[0]+E&4294967295,w.g[1]=w.g[1]+(O+(P<<21&4294967295|P>>>11))&4294967295,w.g[2]=w.g[2]+O&4294967295,w.g[3]=w.g[3]+L&4294967295}r.prototype.v=function(w,E){E===void 0&&(E=w.length);const A=E-this.blockSize,D=this.C;let O=this.h,L=0;for(;L<E;){if(O==0)for(;L<=A;)a(this,w,L),L+=this.blockSize;if(typeof w=="string"){for(;L<E;)if(D[O++]=w.charCodeAt(L++),O==this.blockSize){a(this,D),O=0;break}}else for(;L<E;)if(D[O++]=w[L++],O==this.blockSize){a(this,D),O=0;break}}this.h=O,this.o+=E},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var E=1;E<w.length-8;++E)w[E]=0;E=this.o*8;for(var A=w.length-8;A<w.length;++A)w[A]=E&255,E/=256;for(this.v(w),w=Array(16),E=0,A=0;A<4;++A)for(let D=0;D<32;D+=8)w[E++]=this.g[A]>>>D&255;return w};function l(w,E){var A=h;return Object.prototype.hasOwnProperty.call(A,w)?A[w]:A[w]=E(w)}function c(w,E){this.h=E;const A=[];let D=!0;for(let O=w.length-1;O>=0;O--){const L=w[O]|0;D&&L==E||(A[O]=L,D=!1)}this.g=A}var h={};function m(w){return-128<=w&&w<128?l(w,function(E){return new c([E|0],E<0?-1:0)}):new c([w|0],w<0?-1:0)}function g(w){if(isNaN(w)||!isFinite(w))return b;if(w<0)return T(g(-w));const E=[];let A=1;for(let D=0;w>=A;D++)E[D]=w/A|0,A*=4294967296;return new c(E,0)}function y(w,E){if(w.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(w.charAt(0)=="-")return T(y(w.substring(1),E));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=g(Math.pow(E,8));let D=b;for(let L=0;L<w.length;L+=8){var O=Math.min(8,w.length-L);const P=parseInt(w.substring(L,L+O),E);O<8?(O=g(Math.pow(E,O)),D=D.j(O).add(g(P))):(D=D.j(A),D=D.add(g(P)))}return D}var b=m(0),_=m(1),k=m(16777216);t=c.prototype,t.m=function(){if(j(this))return-T(this).m();let w=0,E=1;for(let A=0;A<this.g.length;A++){const D=this.i(A);w+=(D>=0?D:4294967296+D)*E,E*=4294967296}return w},t.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(R(this))return"0";if(j(this))return"-"+T(this).toString(w);const E=g(Math.pow(w,6));var A=this;let D="";for(;;){const O=z(A,E).g;A=H(A,O.j(E));let L=((A.g.length>0?A.g[0]:A.h)>>>0).toString(w);if(A=O,R(A))return L+D;for(;L.length<6;)L="0"+L;D=L+D}},t.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function R(w){if(w.h!=0)return!1;for(let E=0;E<w.g.length;E++)if(w.g[E]!=0)return!1;return!0}function j(w){return w.h==-1}t.l=function(w){return w=H(this,w),j(w)?-1:R(w)?0:1};function T(w){const E=w.g.length,A=[];for(let D=0;D<E;D++)A[D]=~w.g[D];return new c(A,~w.h).add(_)}t.abs=function(){return j(this)?T(this):this},t.add=function(w){const E=Math.max(this.g.length,w.g.length),A=[];let D=0;for(let O=0;O<=E;O++){let L=D+(this.i(O)&65535)+(w.i(O)&65535),P=(L>>>16)+(this.i(O)>>>16)+(w.i(O)>>>16);D=P>>>16,L&=65535,P&=65535,A[O]=P<<16|L}return new c(A,A[A.length-1]&-2147483648?-1:0)};function H(w,E){return w.add(T(E))}t.j=function(w){if(R(this)||R(w))return b;if(j(this))return j(w)?T(this).j(T(w)):T(T(this).j(w));if(j(w))return T(this.j(T(w)));if(this.l(k)<0&&w.l(k)<0)return g(this.m()*w.m());const E=this.g.length+w.g.length,A=[];for(var D=0;D<2*E;D++)A[D]=0;for(D=0;D<this.g.length;D++)for(let O=0;O<w.g.length;O++){const L=this.i(D)>>>16,P=this.i(D)&65535,pe=w.i(O)>>>16,ce=w.i(O)&65535;A[2*D+2*O]+=P*ce,q(A,2*D+2*O),A[2*D+2*O+1]+=L*ce,q(A,2*D+2*O+1),A[2*D+2*O+1]+=P*pe,q(A,2*D+2*O+1),A[2*D+2*O+2]+=L*pe,q(A,2*D+2*O+2)}for(w=0;w<E;w++)A[w]=A[2*w+1]<<16|A[2*w];for(w=E;w<2*E;w++)A[w]=0;return new c(A,0)};function q(w,E){for(;(w[E]&65535)!=w[E];)w[E+1]+=w[E]>>>16,w[E]&=65535,E++}function I(w,E){this.g=w,this.h=E}function z(w,E){if(R(E))throw Error("division by zero");if(R(w))return new I(b,b);if(j(w))return E=z(T(w),E),new I(T(E.g),T(E.h));if(j(E))return E=z(w,T(E)),new I(T(E.g),E.h);if(w.g.length>30){if(j(w)||j(E))throw Error("slowDivide_ only works with positive integers.");for(var A=_,D=E;D.l(w)<=0;)A=B(A),D=B(D);var O=$(A,1),L=$(D,1);for(D=$(D,2),A=$(A,2);!R(D);){var P=L.add(D);P.l(w)<=0&&(O=O.add(A),L=P),D=$(D,1),A=$(A,1)}return E=H(w,O.j(E)),new I(O,E)}for(O=b;w.l(E)>=0;){for(A=Math.max(1,Math.floor(w.m()/E.m())),D=Math.ceil(Math.log(A)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),L=g(A),P=L.j(E);j(P)||P.l(w)>0;)A-=D,L=g(A),P=L.j(E);R(L)&&(L=_),O=O.add(L),w=H(w,P)}return new I(O,w)}t.B=function(w){return z(this,w).h},t.and=function(w){const E=Math.max(this.g.length,w.g.length),A=[];for(let D=0;D<E;D++)A[D]=this.i(D)&w.i(D);return new c(A,this.h&w.h)},t.or=function(w){const E=Math.max(this.g.length,w.g.length),A=[];for(let D=0;D<E;D++)A[D]=this.i(D)|w.i(D);return new c(A,this.h|w.h)},t.xor=function(w){const E=Math.max(this.g.length,w.g.length),A=[];for(let D=0;D<E;D++)A[D]=this.i(D)^w.i(D);return new c(A,this.h^w.h)};function B(w){const E=w.g.length+1,A=[];for(let D=0;D<E;D++)A[D]=w.i(D)<<1|w.i(D-1)>>>31;return new c(A,w.h)}function $(w,E){const A=E>>5;E%=32;const D=w.g.length-A,O=[];for(let L=0;L<D;L++)O[L]=E>0?w.i(L+A)>>>E|w.i(L+A+1)<<32-E:w.i(L+A);return new c(O,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,HE=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=y,Sa=c}).apply(typeof e4<"u"?e4:typeof self<"u"?self:typeof window<"u"?window:{});var rf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var $E,Mu,qE,Tf,fv,GE,YE,KE;(function(){var t,e=Object.defineProperty;function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof rf=="object"&&rf];for(var x=0;x<f.length;++x){var C=f[x];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var r=n(this);function a(f,x){if(x)e:{var C=r;f=f.split(".");for(var V=0;V<f.length-1;V++){var te=f[V];if(!(te in C))break e;C=C[te]}f=f[f.length-1],V=C[f],x=x(V),x!=V&&x!=null&&e(C,f,{configurable:!0,writable:!0,value:x})}}a("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(f){return f||function(x){var C=[],V;for(V in x)Object.prototype.hasOwnProperty.call(x,V)&&C.push([V,x[V]]);return C}});var l=l||{},c=this||self;function h(f){var x=typeof f;return x=="object"&&f!=null||x=="function"}function m(f,x,C){return f.call.apply(f.bind,arguments)}function g(f,x,C){return g=m,g.apply(null,arguments)}function y(f,x){var C=Array.prototype.slice.call(arguments,1);return function(){var V=C.slice();return V.push.apply(V,arguments),f.apply(this,V)}}function b(f,x){function C(){}C.prototype=x.prototype,f.Z=x.prototype,f.prototype=new C,f.prototype.constructor=f,f.Ob=function(V,te,ie){for(var Ie=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)Ie[ot-2]=arguments[ot];return x.prototype[te].apply(V,Ie)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function k(f){const x=f.length;if(x>0){const C=Array(x);for(let V=0;V<x;V++)C[V]=f[V];return C}return[]}function R(f,x){for(let V=1;V<arguments.length;V++){const te=arguments[V];var C=typeof te;if(C=C!="object"?C:te?Array.isArray(te)?"array":C:"null",C=="array"||C=="object"&&typeof te.length=="number"){C=f.length||0;const ie=te.length||0;f.length=C+ie;for(let Ie=0;Ie<ie;Ie++)f[C+Ie]=te[Ie]}else f.push(te)}}class j{constructor(x,C){this.i=x,this.j=C,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function T(f){c.setTimeout(()=>{throw f},0)}function H(){var f=w;let x=null;return f.g&&(x=f.g,f.g=f.g.next,f.g||(f.h=null),x.next=null),x}class q{constructor(){this.h=this.g=null}add(x,C){const V=I.get();V.set(x,C),this.h?this.h.next=V:this.g=V,this.h=V}}var I=new j(()=>new z,f=>f.reset());class z{constructor(){this.next=this.g=this.h=null}set(x,C){this.h=x,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let B,$=!1,w=new q,E=()=>{const f=Promise.resolve(void 0);B=()=>{f.then(A)}};function A(){for(var f;f=H();){try{f.h.call(f.g)}catch(C){T(C)}var x=I;x.j(f),x.h<100&&(x.h++,f.next=x.g,x.g=f)}$=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(f,x){this.type=f,this.g=this.target=x,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var f=!1,x=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const C=()=>{};c.addEventListener("test",C,x),c.removeEventListener("test",C,x)}catch{}return f})();function P(f){return/^[\s\xa0]*$/.test(f)}function pe(f,x){O.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,x)}b(pe,O),pe.prototype.init=function(f,x){const C=this.type=f.type,V=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=x,x=f.relatedTarget,x||(C=="mouseover"?x=f.fromElement:C=="mouseout"&&(x=f.toElement)),this.relatedTarget=x,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&pe.Z.h.call(this)},pe.prototype.h=function(){pe.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var ce="closure_listenable_"+(Math.random()*1e6|0),Y=0;function Z(f,x,C,V,te){this.listener=f,this.proxy=null,this.src=x,this.type=C,this.capture=!!V,this.ha=te,this.key=++Y,this.da=this.fa=!1}function J(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Te(f,x,C){for(const V in f)x.call(C,f[V],V,f)}function Ae(f,x){for(const C in f)x.call(void 0,f[C],C,f)}function F(f){const x={};for(const C in f)x[C]=f[C];return x}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ae(f,x){let C,V;for(let te=1;te<arguments.length;te++){V=arguments[te];for(C in V)f[C]=V[C];for(let ie=0;ie<W.length;ie++)C=W[ie],Object.prototype.hasOwnProperty.call(V,C)&&(f[C]=V[C])}}function ge(f){this.src=f,this.g={},this.h=0}ge.prototype.add=function(f,x,C,V,te){const ie=f.toString();f=this.g[ie],f||(f=this.g[ie]=[],this.h++);const Ie=_e(f,x,V,te);return Ie>-1?(x=f[Ie],C||(x.fa=!1)):(x=new Z(x,this.src,ie,!!V,te),x.fa=C,f.push(x)),x};function Re(f,x){const C=x.type;if(C in f.g){var V=f.g[C],te=Array.prototype.indexOf.call(V,x,void 0),ie;(ie=te>=0)&&Array.prototype.splice.call(V,te,1),ie&&(J(x),f.g[C].length==0&&(delete f.g[C],f.h--))}}function _e(f,x,C,V){for(let te=0;te<f.length;++te){const ie=f[te];if(!ie.da&&ie.listener==x&&ie.capture==!!C&&ie.ha==V)return te}return-1}var Ne="closure_lm_"+(Math.random()*1e6|0),Ke={};function Ge(f,x,C,V,te){if(Array.isArray(x)){for(let ie=0;ie<x.length;ie++)Ge(f,x[ie],C,V,te);return null}return C=U(C),f&&f[ce]?f.J(x,C,h(V)?!!V.capture:!1,te):he(f,x,C,!1,V,te)}function he(f,x,C,V,te,ie){if(!x)throw Error("Invalid event type");const Ie=h(te)?!!te.capture:!!te;let ot=Se(f);if(ot||(f[Ne]=ot=new ge(f)),C=ot.add(x,C,V,Ie,ie),C.proxy)return C;if(V=Ce(),C.proxy=V,V.src=f,V.listener=C,f.addEventListener)L||(te=Ie),te===void 0&&(te=!1),f.addEventListener(x.toString(),V,te);else if(f.attachEvent)f.attachEvent(xe(x.toString()),V);else if(f.addListener&&f.removeListener)f.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Ce(){function f(C){return x.call(f.src,f.listener,C)}const x=ze;return f}function Ve(f,x,C,V,te){if(Array.isArray(x))for(var ie=0;ie<x.length;ie++)Ve(f,x[ie],C,V,te);else V=h(V)?!!V.capture:!!V,C=U(C),f&&f[ce]?(f=f.i,ie=String(x).toString(),ie in f.g&&(x=f.g[ie],C=_e(x,C,V,te),C>-1&&(J(x[C]),Array.prototype.splice.call(x,C,1),x.length==0&&(delete f.g[ie],f.h--)))):f&&(f=Se(f))&&(x=f.g[x.toString()],f=-1,x&&(f=_e(x,C,V,te)),(C=f>-1?x[f]:null)&&oe(C))}function oe(f){if(typeof f!="number"&&f&&!f.da){var x=f.src;if(x&&x[ce])Re(x.i,f);else{var C=f.type,V=f.proxy;x.removeEventListener?x.removeEventListener(C,V,f.capture):x.detachEvent?x.detachEvent(xe(C),V):x.addListener&&x.removeListener&&x.removeListener(V),(C=Se(x))?(Re(C,f),C.h==0&&(C.src=null,x[Ne]=null)):J(f)}}}function xe(f){return f in Ke?Ke[f]:Ke[f]="on"+f}function ze(f,x){if(f.da)f=!0;else{x=new pe(x,this);const C=f.listener,V=f.ha||f.src;f.fa&&oe(f),f=C.call(V,x)}return f}function Se(f){return f=f[Ne],f instanceof ge?f:null}var ue="__closure_events_fn_"+(Math.random()*1e9>>>0);function U(f){return typeof f=="function"?f:(f[ue]||(f[ue]=function(x){return f.handleEvent(x)}),f[ue])}function K(){D.call(this),this.i=new ge(this),this.M=this,this.G=null}b(K,D),K.prototype[ce]=!0,K.prototype.removeEventListener=function(f,x,C,V){Ve(this,f,x,C,V)};function ee(f,x){var C,V=f.G;if(V)for(C=[];V;V=V.G)C.push(V);if(f=f.M,V=x.type||x,typeof x=="string")x=new O(x,f);else if(x instanceof O)x.target=x.target||f;else{var te=x;x=new O(V,f),ae(x,te)}te=!0;let ie,Ie;if(C)for(Ie=C.length-1;Ie>=0;Ie--)ie=x.g=C[Ie],te=ke(ie,V,!0,x)&&te;if(ie=x.g=f,te=ke(ie,V,!0,x)&&te,te=ke(ie,V,!1,x)&&te,C)for(Ie=0;Ie<C.length;Ie++)ie=x.g=C[Ie],te=ke(ie,V,!1,x)&&te}K.prototype.N=function(){if(K.Z.N.call(this),this.i){var f=this.i;for(const x in f.g){const C=f.g[x];for(let V=0;V<C.length;V++)J(C[V]);delete f.g[x],f.h--}}this.G=null},K.prototype.J=function(f,x,C,V){return this.i.add(String(f),x,!1,C,V)},K.prototype.K=function(f,x,C,V){return this.i.add(String(f),x,!0,C,V)};function ke(f,x,C,V){if(x=f.i.g[String(x)],!x)return!0;x=x.concat();let te=!0;for(let ie=0;ie<x.length;++ie){const Ie=x[ie];if(Ie&&!Ie.da&&Ie.capture==C){const ot=Ie.listener,sn=Ie.ha||Ie.src;Ie.fa&&Re(f.i,Ie),te=ot.call(sn,V)!==!1&&te}}return te&&!V.defaultPrevented}function Oe(f,x){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=g(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:c.setTimeout(f,x||0)}function Fe(f){f.g=Oe(()=>{f.g=null,f.i&&(f.i=!1,Fe(f))},f.l);const x=f.h;f.h=null,f.m.apply(null,x)}class Le extends D{constructor(x,C){super(),this.m=x,this.l=C,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:Fe(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Et(f){D.call(this),this.h=f,this.g={}}b(Et,D);var Tt=[];function Qt(f){Te(f.g,function(x,C){this.g.hasOwnProperty(C)&&oe(x)},f),f.g={}}Et.prototype.N=function(){Et.Z.N.call(this),Qt(this)},Et.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ee=c.JSON.stringify,Pe=c.JSON.parse,nt=class{stringify(f){return c.JSON.stringify(f,void 0)}parse(f){return c.JSON.parse(f,void 0)}};function ht(){}function Zt(){}var Ht={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function mt(){O.call(this,"d")}b(mt,O);function Tn(){O.call(this,"c")}b(Tn,O);var Xt={},jd=null;function qo(){return jd=jd||new K}Xt.Ia="serverreachability";function Id(f){O.call(this,Xt.Ia,f)}b(Id,O);function ds(f){const x=qo();ee(x,new Id(x))}Xt.STAT_EVENT="statevent";function Va(f,x){O.call(this,Xt.STAT_EVENT,f),this.stat=x}b(Va,O);function dn(f){const x=qo();ee(x,new Va(x,f))}Xt.Ja="timingevent";function hs(f,x){O.call(this,Xt.Ja,f),this.size=x}b(hs,O);function fs(f,x){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){f()},x)}function Yr(){this.g=!0}Yr.prototype.ua=function(){this.g=!1};function xp(f,x,C,V,te,ie){f.info(function(){if(f.g)if(ie){var Ie="",ot=ie.split("&");for(let Rt=0;Rt<ot.length;Rt++){var sn=ot[Rt].split("=");if(sn.length>1){const Wt=sn[0];sn=sn[1];const Pr=Wt.split("_");Ie=Pr.length>=2&&Pr[1]=="type"?Ie+(Wt+"="+sn+"&"):Ie+(Wt+"=redacted&")}}}else Ie=null;else Ie=ie;return"XMLHTTP REQ ("+V+") [attempt "+te+"]: "+x+`
`+C+`
`+Ie})}function Dd(f,x,C,V,te,ie,Ie){f.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+te+"]: "+x+`
`+C+`
`+ie+" "+Ie})}function ms(f,x,C,V){f.info(function(){return"XMLHTTP TEXT ("+x+"): "+_p(f,C)+(V?" "+V:"")})}function Ua(f,x){f.info(function(){return"TIMEOUT: "+x})}Yr.prototype.info=function(){};function _p(f,x){if(!f.g)return x;if(!x)return null;try{const ie=JSON.parse(x);if(ie){for(f=0;f<ie.length;f++)if(Array.isArray(ie[f])){var C=ie[f];if(!(C.length<2)){var V=C[1];if(Array.isArray(V)&&!(V.length<1)){var te=V[0];if(te!="noop"&&te!="stop"&&te!="close")for(let Ie=1;Ie<V.length;Ie++)V[Ie]=""}}}}return Ee(ie)}catch{return x}}var za={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Cc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Tc;function Ba(){}b(Ba,ht),Ba.prototype.g=function(){return new XMLHttpRequest},Tc=new Ba;function Ws(f){return encodeURIComponent(String(f))}function Md(f){var x=1;f=f.split(":");const C=[];for(;x>0&&f.length;)C.push(f.shift()),x--;return f.length&&C.push(f.join(":")),C}function Kr(f,x,C,V){this.j=f,this.i=x,this.l=C,this.S=V||1,this.V=new Et(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Qr}function Qr(){this.i=null,this.g="",this.h=!1}var hn={},jn={};function ps(f,x,C){f.M=1,f.A=Fa(mn(x)),f.u=C,f.R=!0,Go(f,null)}function Go(f,x){f.F=Date.now(),gs(f),f.B=mn(f.A);var C=f.B,V=f.S;Array.isArray(V)||(V=[String(V)]),Xo(C.i,"t",V),f.C=0,C=f.j.L,f.h=new Qr,f.g=Qd(f.j,C?x:null,!f.u),f.P>0&&(f.O=new Le(g(f.Y,f,f.g),f.P)),x=f.V,C=f.g,V=f.ba;var te="readystatechange";Array.isArray(te)||(te&&(Tt[0]=te.toString()),te=Tt);for(let ie=0;ie<te.length;ie++){const Ie=Ge(C,te[ie],V||x.handleEvent,!1,x.h||x);if(!Ie)break;x.g[Ie.key]=Ie}x=f.J?F(f.J):{},f.u?(f.v||(f.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,x)):(f.v="GET",f.g.ea(f.B,f.v,null,x)),ds(),xp(f.i,f.v,f.B,f.l,f.S,f.u)}Kr.prototype.ba=function(f){f=f.target;const x=this.O;x&&Jr(f)==3?x.j():this.Y(f)},Kr.prototype.Y=function(f){try{if(f==this.g)e:{const ot=Jr(this.g),sn=this.g.ya(),Rt=this.g.ca();if(!(ot<3)&&(ot!=3||this.g&&(this.h.h||this.g.la()||Ln(this.g)))){this.K||ot!=4||sn==7||(sn==8||Rt<=0?ds(3):ds(2)),vs(this);var x=this.g.ca();this.X=x;var C=wp(this);if(this.o=x==200,Dd(this.i,this.v,this.B,this.l,this.S,ot,x),this.o){if(this.U&&!this.L){t:{if(this.g){var V,te=this.g;if((V=te.g?te.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(V)){var ie=V;break t}}ie=null}if(f=ie)ms(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ys(this,f);else{this.o=!1,this.m=3,dn(12),yr(this),Ir(this);break e}}if(this.R){f=!0;let Wt;for(;!this.K&&this.C<C.length;)if(Wt=Od(this,C),Wt==jn){ot==4&&(this.m=4,dn(14),f=!1),ms(this.i,this.l,null,"[Incomplete Response]");break}else if(Wt==hn){this.m=4,dn(15),ms(this.i,this.l,C,"[Invalid Chunk]"),f=!1;break}else ms(this.i,this.l,Wt,null),ys(this,Wt);if(Pd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||C.length!=0||this.h.h||(this.m=1,dn(16),f=!1),this.o=this.o&&f,!f)ms(this.i,this.l,C,"[Invalid Chunked Response]"),yr(this),Ir(this);else if(C.length>0&&!this.W){this.W=!0;var Ie=this.j;Ie.g==this&&Ie.aa&&!Ie.P&&(Ie.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),Bc(Ie),Ie.P=!0,dn(11))}}else ms(this.i,this.l,C,null),ys(this,C);ot==4&&yr(this),this.o&&!this.K&&(ot==4?qd(this.j,this):(this.o=!1,gs(this)))}else Zs(this.g),x==400&&C.indexOf("Unknown SID")>0?(this.m=3,dn(12)):(this.m=0,dn(13)),yr(this),Ir(this)}}}catch{}finally{}};function wp(f){if(!Pd(f))return f.g.la();const x=Ln(f.g);if(x==="")return"";let C="";const V=x.length,te=Jr(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return yr(f),Ir(f),"";f.h.i=new c.TextDecoder}for(let ie=0;ie<V;ie++)f.h.h=!0,C+=f.h.i.decode(x[ie],{stream:!(te&&ie==V-1)});return x.length=0,f.h.g+=C,f.C=0,f.h.g}function Pd(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function Od(f,x){var C=f.C,V=x.indexOf(`
`,C);return V==-1?jn:(C=Number(x.substring(C,V)),isNaN(C)?hn:(V+=1,V+C>x.length?jn:(x=x.slice(V,V+C),f.C=V+C,x)))}Kr.prototype.cancel=function(){this.K=!0,yr(this)};function gs(f){f.T=Date.now()+f.H,Yo(f,f.H)}function Yo(f,x){if(f.D!=null)throw Error("WatchDog timer not null");f.D=fs(g(f.aa,f),x)}function vs(f){f.D&&(c.clearTimeout(f.D),f.D=null)}Kr.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(Ua(this.i,this.B),this.M!=2&&(ds(),dn(17)),yr(this),this.m=2,Ir(this)):Yo(this,this.T-f)};function Ir(f){f.j.I==0||f.K||qd(f.j,f)}function yr(f){vs(f);var x=f.O;x&&typeof x.dispose=="function"&&x.dispose(),f.O=null,Qt(f.V),f.g&&(x=f.g,f.g=null,x.abort(),x.dispose())}function ys(f,x){try{var C=f.j;if(C.I!=0&&(C.g==f||xs(C.h,f))){if(!f.L&&xs(C.h,f)&&C.I==3){try{var V=C.Ba.g.parse(x)}catch{V=null}if(Array.isArray(V)&&V.length==3){var te=V;if(te[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<f.F)tl(C),Ui(C);else break e;Qa(C),dn(18)}}else C.xa=te[1],0<C.xa-C.K&&te[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=fs(g(C.Va,C),6e3));bs(C.h)<=1&&C.ta&&(C.ta=void 0)}else Ts(C,11)}else if((f.L||C.g==f)&&tl(C),!P(x))for(te=C.Ba.g.parse(x),x=0;x<te.length;x++){let Rt=te[x];const Wt=Rt[0];if(!(Wt<=C.K))if(C.K=Wt,Rt=Rt[1],C.I==2)if(Rt[0]=="c"){C.M=Rt[1],C.ba=Rt[2];const Pr=Rt[3];Pr!=null&&(C.ka=Pr,C.j.info("VER="+C.ka));const ks=Rt[4];ks!=null&&(C.za=ks,C.j.info("SVER="+C.za));const Zr=Rt[5];Zr!=null&&typeof Zr=="number"&&Zr>0&&(V=1.5*Zr,C.O=V,C.j.info("backChannelRequestTimeoutMs_="+V)),V=C;const es=f.g;if(es){const Xa=es.g?es.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xa){var ie=V.h;ie.g||Xa.indexOf("spdy")==-1&&Xa.indexOf("quic")==-1&&Xa.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(Ac(ie,ie.h),ie.h=null))}if(V.G){const nl=es.g?es.g.getResponseHeader("X-HTTP-Session-Id"):null;nl&&(V.wa=nl,Mt(V.J,V.G,nl))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-f.F,C.j.info("Handshake RTT: "+C.T+"ms")),V=C;var Ie=f;if(V.na=Kd(V,V.L?V.ba:null,V.W),Ie.L){Rc(V.h,Ie);var ot=Ie,sn=V.O;sn&&(ot.H=sn),ot.D&&(vs(ot),gs(ot)),V.g=Ie}else Hd(V);C.i.length>0&&Cs(C)}else Rt[0]!="stop"&&Rt[0]!="close"||Ts(C,7);else C.I==3&&(Rt[0]=="stop"||Rt[0]=="close"?Rt[0]=="stop"?Ts(C,7):Uc(C):Rt[0]!="noop"&&C.l&&C.l.qa(Rt),C.A=0)}}ds(4)}catch{}}var fn=class{constructor(f,x){this.g=f,this.map=x}};function kc(f){this.l=f||10,c.PerformanceNavigationTiming?(f=c.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Nc(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function bs(f){return f.h?1:f.g?f.g.size:0}function xs(f,x){return f.h?f.h==x:f.g?f.g.has(x):!1}function Ac(f,x){f.g?f.g.add(x):f.h=x}function Rc(f,x){f.h&&f.h==x?f.h=null:f.g&&f.g.has(x)&&f.g.delete(x)}kc.prototype.cancel=function(){if(this.i=jc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function jc(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let x=f.i;for(const C of f.g.values())x=x.concat(C.G);return x}return k(f.i)}var Ld=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ko(f,x){if(f){f=f.split("&");for(let C=0;C<f.length;C++){const V=f[C].indexOf("=");let te,ie=null;V>=0?(te=f[C].substring(0,V),ie=f[C].substring(V+1)):te=f[C],x(te,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function br(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;f instanceof br?(this.l=f.l,In(this,f.j),this.o=f.o,this.g=f.g,Ii(this,f.u),this.h=f.h,Ic(this,Bd(f.i)),this.m=f.m):f&&(x=String(f).match(Ld))?(this.l=!1,In(this,x[1]||"",!0),this.o=_s(x[2]||""),this.g=_s(x[3]||"",!0),Ii(this,x[4]),this.h=_s(x[5]||"",!0),Ic(this,x[6]||"",!0),this.m=_s(x[7]||"")):(this.l=!1,this.i=new Mi(null,this.l))}br.prototype.toString=function(){const f=[];var x=this.j;x&&f.push(Ha(x,Qo,!0),":");var C=this.g;return(C||x=="file")&&(f.push("//"),(x=this.o)&&f.push(Ha(x,Qo,!0),"@"),f.push(Ws(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&f.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&f.push("/"),f.push(Ha(C,C.charAt(0)=="/"?Dc:Vd,!0))),(C=this.i.toString())&&f.push("?",C),(C=this.m)&&f.push("#",Ha(C,Ud)),f.join("")},br.prototype.resolve=function(f){const x=mn(this);let C=!!f.j;C?In(x,f.j):C=!!f.o,C?x.o=f.o:C=!!f.g,C?x.g=f.g:C=f.u!=null;var V=f.h;if(C)Ii(x,f.u);else if(C=!!f.h){if(V.charAt(0)!="/")if(this.g&&!this.h)V="/"+V;else{var te=x.h.lastIndexOf("/");te!=-1&&(V=x.h.slice(0,te+1)+V)}if(te=V,te==".."||te==".")V="";else if(te.indexOf("./")!=-1||te.indexOf("/.")!=-1){V=te.lastIndexOf("/",0)==0,te=te.split("/");const ie=[];for(let Ie=0;Ie<te.length;){const ot=te[Ie++];ot=="."?V&&Ie==te.length&&ie.push(""):ot==".."?((ie.length>1||ie.length==1&&ie[0]!="")&&ie.pop(),V&&Ie==te.length&&ie.push("")):(ie.push(ot),V=!0)}V=ie.join("/")}else V=te}return C?x.h=V:C=f.i.toString()!=="",C?Ic(x,Bd(f.i)):C=!!f.m,C&&(x.m=f.m),x};function mn(f){return new br(f)}function In(f,x,C){f.j=C?_s(x,!0):x,f.j&&(f.j=f.j.replace(/:$/,""))}function Ii(f,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);f.u=x}else f.u=null}function Ic(f,x,C){x instanceof Mi?(f.i=x,Wo(f.i,f.l)):(C||(x=Ha(x,Di)),f.i=new Mi(x,f.l))}function Mt(f,x,C){f.i.set(x,C)}function Fa(f){return Mt(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function _s(f,x){return f?x?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Ha(f,x,C){return typeof f=="string"?(f=encodeURI(f).replace(x,ar),C&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function ar(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Qo=/[#\/\?@]/g,Vd=/[#\?:]/g,Dc=/[#\?]/g,Di=/[#\?@]/g,Ud=/#/g;function Mi(f,x){this.h=this.g=null,this.i=f||null,this.j=!!x}function or(f){f.g||(f.g=new Map,f.h=0,f.i&&Ko(f.i,function(x,C){f.add(decodeURIComponent(x.replace(/\+/g," ")),C)}))}t=Mi.prototype,t.add=function(f,x){or(this),this.i=null,f=Pi(this,f);let C=this.g.get(f);return C||this.g.set(f,C=[]),C.push(x),this.h+=1,this};function zd(f,x){or(f),x=Pi(f,x),f.g.has(x)&&(f.i=null,f.h-=f.g.get(x).length,f.g.delete(x))}function Mc(f,x){return or(f),x=Pi(f,x),f.g.has(x)}t.forEach=function(f,x){or(this),this.g.forEach(function(C,V){C.forEach(function(te){f.call(x,te,V,this)},this)},this)};function Pc(f,x){or(f);let C=[];if(typeof x=="string")Mc(f,x)&&(C=C.concat(f.g.get(Pi(f,x))));else for(f=Array.from(f.g.values()),x=0;x<f.length;x++)C=C.concat(f[x]);return C}t.set=function(f,x){return or(this),this.i=null,f=Pi(this,f),Mc(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[x]),this.h+=1,this},t.get=function(f,x){return f?(f=Pc(this,f),f.length>0?String(f[0]):x):x};function Xo(f,x,C){zd(f,x),C.length>0&&(f.i=null,f.g.set(Pi(f,x),k(C)),f.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],x=Array.from(this.g.keys());for(let V=0;V<x.length;V++){var C=x[V];const te=Ws(C);C=Pc(this,C);for(let ie=0;ie<C.length;ie++){let Ie=te;C[ie]!==""&&(Ie+="="+Ws(C[ie])),f.push(Ie)}}return this.i=f.join("&")};function Bd(f){const x=new Mi;return x.i=f.i,f.g&&(x.g=new Map(f.g),x.h=f.h),x}function Pi(f,x){return x=String(x),f.j&&(x=x.toLowerCase()),x}function Wo(f,x){x&&!f.j&&(or(f),f.i=null,f.g.forEach(function(C,V){const te=V.toLowerCase();V!=te&&(zd(this,V),Xo(this,te,C))},f)),f.j=x}function Xr(f,x){const C=new Yr;if(c.Image){const V=new Image;V.onload=y(Dr,C,"TestLoadImage: loaded",!0,x,V),V.onerror=y(Dr,C,"TestLoadImage: error",!1,x,V),V.onabort=y(Dr,C,"TestLoadImage: abort",!1,x,V),V.ontimeout=y(Dr,C,"TestLoadImage: timeout",!1,x,V),c.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=f}else x(!1)}function Oc(f,x){const C=new Yr,V=new AbortController,te=setTimeout(()=>{V.abort(),Dr(C,"TestPingServer: timeout",!1,x)},1e4);fetch(f,{signal:V.signal}).then(ie=>{clearTimeout(te),ie.ok?Dr(C,"TestPingServer: ok",!0,x):Dr(C,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(te),Dr(C,"TestPingServer: error",!1,x)})}function Dr(f,x,C,V,te){try{te&&(te.onload=null,te.onerror=null,te.onabort=null,te.ontimeout=null),V(C)}catch{}}function Oi(){this.g=new nt}function ws(f){this.i=f.Sb||null,this.h=f.ab||!1}b(ws,ht),ws.prototype.g=function(){return new $a(this.i,this.h)};function $a(f,x){K.call(this),this.H=f,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b($a,K),t=$a.prototype,t.open=function(f,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=x,this.readyState=1,Wr(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(x.body=f),(this.H||c).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Li(this)),this.readyState=0},t.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Wr(this)),this.g&&(this.readyState=3,Wr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Jo(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function Jo(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}t.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var x=f.value?f.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!f.done}))&&(this.response=this.responseText+=x)}f.done?Li(this):Wr(this),this.readyState==3&&Jo(this)}},t.Oa=function(f){this.g&&(this.response=this.responseText=f,Li(this))},t.Na=function(f){this.g&&(this.response=f,Li(this))},t.ga=function(){this.g&&Li(this)};function Li(f){f.readyState=4,f.l=null,f.j=null,f.B=null,Wr(f)}t.setRequestHeader=function(f,x){this.A.append(f,x)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],x=this.h.entries();for(var C=x.next();!C.done;)C=C.value,f.push(C[0]+": "+C[1]),C=x.next();return f.join(`\r
`)};function Wr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty($a.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Mr(f){let x="";return Te(f,function(C,V){x+=V,x+=":",x+=C,x+=`\r
`}),x}function qa(f,x,C){e:{for(V in C){var V=!1;break e}V=!0}V||(C=Mr(C),typeof f=="string"?C!=null&&Ws(C):Mt(f,x,C))}function Lt(f){K.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(Lt,K);var Ss=/^https?$/i,Lc=["POST","PUT"];t=Lt.prototype,t.Fa=function(f){this.H=f},t.ea=function(f,x,C,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);x=x?x.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Tc.g(),this.g.onreadystatechange=_(g(this.Ca,this));try{this.B=!0,this.g.open(x,String(f),!0),this.B=!1}catch(ie){Ga(this,ie);return}if(f=C||"",C=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var te in V)C.set(te,V[te]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const ie of V.keys())C.set(ie,V.get(ie));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(C.keys()).find(ie=>ie.toLowerCase()=="content-type"),te=c.FormData&&f instanceof c.FormData,!(Array.prototype.indexOf.call(Lc,x,void 0)>=0)||V||te||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,Ie]of C)this.g.setRequestHeader(ie,Ie);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(ie){Ga(this,ie)}};function Ga(f,x){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=x,f.o=5,Vc(f),Js(f)}function Vc(f){f.A||(f.A=!0,ee(f,"complete"),ee(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,ee(this,"complete"),ee(this,"abort"),Js(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Js(this,!0)),Lt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ya(this):this.Xa())},t.Xa=function(){Ya(this)};function Ya(f){if(f.h&&typeof l<"u"){if(f.v&&Jr(f)==4)setTimeout(f.Ca.bind(f),0);else if(ee(f,"readystatechange"),Jr(f)==4){f.h=!1;try{const ie=f.ca();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var C;if(!(C=x)){var V;if(V=ie===0){let Ie=String(f.D).match(Ld)[1]||null;!Ie&&c.self&&c.self.location&&(Ie=c.self.location.protocol.slice(0,-1)),V=!Ss.test(Ie?Ie.toLowerCase():"")}C=V}if(C)ee(f,"complete"),ee(f,"success");else{f.o=6;try{var te=Jr(f)>2?f.g.statusText:""}catch{te=""}f.l=te+" ["+f.ca()+"]",Vc(f)}}finally{Js(f)}}}}function Js(f,x){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const C=f.g;f.g=null,x||ee(f,"ready");try{C.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Jr(f){return f.g?f.g.readyState:0}t.ca=function(){try{return Jr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(f){if(this.g){var x=this.g.responseText;return f&&x.indexOf(f)==0&&(x=x.substring(f.length)),Pe(x)}};function Ln(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Zs(f){const x={};f=(f.g&&Jr(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<f.length;V++){if(P(f[V]))continue;var C=Md(f[V]);const te=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const ie=x[te]||[];x[te]=ie,ie.push(C)}Ae(x,function(V){return V.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Es(f,x,C){return C&&C.internalChannelParams&&C.internalChannelParams[f]||x}function Vi(f){this.za=0,this.i=[],this.j=new Yr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Es("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Es("baseRetryDelayMs",5e3,f),this.Za=Es("retryDelaySeedMs",1e4,f),this.Ta=Es("forwardChannelMaxRetries",2,f),this.va=Es("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new kc(f&&f.concurrentRequestLimit),this.Ba=new Oi,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Vi.prototype,t.ka=8,t.I=1,t.connect=function(f,x,C,V){dn(0),this.W=f,this.H=x||{},C&&V!==void 0&&(this.H.OSID=C,this.H.OAID=V),this.F=this.X,this.J=Kd(this,null,this.W),Cs(this)};function Uc(f){if(Zo(f),f.I==3){var x=f.V++,C=mn(f.J);if(Mt(C,"SID",f.M),Mt(C,"RID",x),Mt(C,"TYPE","terminate"),Ka(f,C),x=new Kr(f,f.j,x),x.M=2,x.A=Fa(mn(C)),C=!1,c.navigator&&c.navigator.sendBeacon)try{C=c.navigator.sendBeacon(x.A.toString(),"")}catch{}!C&&c.Image&&(new Image().src=x.A,C=!0),C||(x.g=Qd(x.j,null),x.g.ea(x.A)),x.F=Date.now(),gs(x)}Yd(f)}function Ui(f){f.g&&(Bc(f),f.g.cancel(),f.g=null)}function Zo(f){Ui(f),f.v&&(c.clearTimeout(f.v),f.v=null),tl(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&c.clearTimeout(f.m),f.m=null)}function Cs(f){if(!Nc(f.h)&&!f.m){f.m=!0;var x=f.Ea;B||E(),$||(B(),$=!0),w.add(x,f),f.D=0}}function el(f,x){return bs(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=x.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=fs(g(f.Ea,f,x),Gd(f,f.D)),f.D++,!0)}t.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const te=new Kr(this,this.j,f);let ie=this.o;if(this.U&&(ie?(ie=F(ie),ae(ie,this.U)):ie=this.U),this.u!==null||this.R||(te.J=ie,ie=null),this.S)e:{for(var x=0,C=0;C<this.i.length;C++){t:{var V=this.i[C];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(x+=V,x>4096){x=C;break e}if(x===4096||C===this.i.length-1){x=C+1;break e}}x=1e3}else x=1e3;x=Fd(this,te,x),C=mn(this.J),Mt(C,"RID",f),Mt(C,"CVER",22),this.G&&Mt(C,"X-HTTP-Session-Id",this.G),Ka(this,C),ie&&(this.R?x="headers="+Ws(Mr(ie))+"&"+x:this.u&&qa(C,this.u,ie)),Ac(this.h,te),this.Ra&&Mt(C,"TYPE","init"),this.S?(Mt(C,"$req",x),Mt(C,"SID","null"),te.U=!0,ps(te,C,null)):ps(te,C,x),this.I=2}}else this.I==3&&(f?zc(this,f):this.i.length==0||Nc(this.h)||zc(this))};function zc(f,x){var C;x?C=x.l:C=f.V++;const V=mn(f.J);Mt(V,"SID",f.M),Mt(V,"RID",C),Mt(V,"AID",f.K),Ka(f,V),f.u&&f.o&&qa(V,f.u,f.o),C=new Kr(f,f.j,C,f.D+1),f.u===null&&(C.J=f.o),x&&(f.i=x.G.concat(f.i)),x=Fd(f,C,1e3),C.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),Ac(f.h,C),ps(C,V,x)}function Ka(f,x){f.H&&Te(f.H,function(C,V){Mt(x,V,C)}),f.l&&Te({},function(C,V){Mt(x,V,C)})}function Fd(f,x,C){C=Math.min(f.i.length,C);const V=f.l?g(f.l.Ka,f.l,f):null;e:{var te=f.i;let ot=-1;for(;;){const sn=["count="+C];ot==-1?C>0?(ot=te[0].g,sn.push("ofs="+ot)):ot=0:sn.push("ofs="+ot);let Rt=!0;for(let Wt=0;Wt<C;Wt++){var ie=te[Wt].g;const Pr=te[Wt].map;if(ie-=ot,ie<0)ot=Math.max(0,te[Wt].g-100),Rt=!1;else try{ie="req"+ie+"_"||"";try{var Ie=Pr instanceof Map?Pr:Object.entries(Pr);for(const[ks,Zr]of Ie){let es=Zr;h(Zr)&&(es=Ee(Zr)),sn.push(ie+ks+"="+encodeURIComponent(es))}}catch(ks){throw sn.push(ie+"type="+encodeURIComponent("_badmap")),ks}}catch{V&&V(Pr)}}if(Rt){Ie=sn.join("&");break e}}Ie=void 0}return f=f.i.splice(0,C),x.G=f,Ie}function Hd(f){if(!f.g&&!f.v){f.Y=1;var x=f.Da;B||E(),$||(B(),$=!0),w.add(x,f),f.A=0}}function Qa(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=fs(g(f.Da,f),Gd(f,f.A)),f.A++,!0)}t.Da=function(){if(this.v=null,$d(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=fs(g(this.Wa,this),f)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,dn(10),Ui(this),$d(this))};function Bc(f){f.B!=null&&(c.clearTimeout(f.B),f.B=null)}function $d(f){f.g=new Kr(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var x=mn(f.na);Mt(x,"RID","rpc"),Mt(x,"SID",f.M),Mt(x,"AID",f.K),Mt(x,"CI",f.F?"0":"1"),!f.F&&f.ia&&Mt(x,"TO",f.ia),Mt(x,"TYPE","xmlhttp"),Ka(f,x),f.u&&f.o&&qa(x,f.u,f.o),f.O&&(f.g.H=f.O);var C=f.g;f=f.ba,C.M=1,C.A=Fa(mn(x)),C.u=null,C.R=!0,Go(C,f)}t.Va=function(){this.C!=null&&(this.C=null,Ui(this),Qa(this),dn(19))};function tl(f){f.C!=null&&(c.clearTimeout(f.C),f.C=null)}function qd(f,x){var C=null;if(f.g==x){tl(f),Bc(f),f.g=null;var V=2}else if(xs(f.h,x))C=x.G,Rc(f.h,x),V=1;else return;if(f.I!=0){if(x.o)if(V==1){C=x.u?x.u.length:0,x=Date.now()-x.F;var te=f.D;V=qo(),ee(V,new hs(V,C)),Cs(f)}else Hd(f);else if(te=x.m,te==3||te==0&&x.X>0||!(V==1&&el(f,x)||V==2&&Qa(f)))switch(C&&C.length>0&&(x=f.h,x.i=x.i.concat(C)),te){case 1:Ts(f,5);break;case 4:Ts(f,10);break;case 3:Ts(f,6);break;default:Ts(f,2)}}}function Gd(f,x){let C=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(C*=2),C*x}function Ts(f,x){if(f.j.info("Error code "+x),x==2){var C=g(f.bb,f),V=f.Ua;const te=!V;V=new br(V||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||In(V,"https"),Fa(V),te?Xr(V.toString(),C):Oc(V.toString(),C)}else dn(2);f.I=0,f.l&&f.l.pa(x),Yd(f),Zo(f)}t.bb=function(f){f?(this.j.info("Successfully pinged google.com"),dn(2)):(this.j.info("Failed to ping google.com"),dn(1))};function Yd(f){if(f.I=0,f.ja=[],f.l){const x=jc(f.h);(x.length!=0||f.i.length!=0)&&(R(f.ja,x),R(f.ja,f.i),f.h.i.length=0,k(f.i),f.i.length=0),f.l.oa()}}function Kd(f,x,C){var V=C instanceof br?mn(C):new br(C);if(V.g!="")x&&(V.g=x+"."+V.g),Ii(V,V.u);else{var te=c.location;V=te.protocol,x=x?x+"."+te.hostname:te.hostname,te=+te.port;const ie=new br(null);V&&In(ie,V),x&&(ie.g=x),te&&Ii(ie,te),C&&(ie.h=C),V=ie}return C=f.G,x=f.wa,C&&x&&Mt(V,C,x),Mt(V,"VER",f.ka),Ka(f,V),V}function Qd(f,x,C){if(x&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=f.Aa&&!f.ma?new Lt(new ws({ab:C})):new Lt(f.ma),x.Fa(f.L),x}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xd(){}t=Xd.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function zi(){}zi.prototype.g=function(f,x){return new er(f,x)};function er(f,x){K.call(this),this.g=new Vi(x),this.l=f,this.h=x&&x.messageUrlParams||null,f=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(f?f["X-WebChannel-Content-Type"]=x.messageContentType:f={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(f?f["X-WebChannel-Client-Profile"]=x.sa:f={"X-WebChannel-Client-Profile":x.sa}),this.g.U=f,(f=x&&x.Qb)&&!P(f)&&(this.g.u=f),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!P(x)&&(this.g.G=x,f=this.h,f!==null&&x in f&&(f=this.h,x in f&&delete f[x])),this.j=new ei(this)}b(er,K),er.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},er.prototype.close=function(){Uc(this.g)},er.prototype.o=function(f){var x=this.g;if(typeof f=="string"){var C={};C.__data__=f,f=C}else this.v&&(C={},C.__data__=Ee(f),f=C);x.i.push(new fn(x.Ya++,f)),x.I==3&&Cs(x)},er.prototype.N=function(){this.g.l=null,delete this.j,Uc(this.g),delete this.g,er.Z.N.call(this)};function Wd(f){mt.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var x=f.__sm__;if(x){e:{for(const C in x){f=C;break e}f=void 0}(this.i=f)&&(f=this.i,x=x!==null&&f in x?x[f]:void 0),this.data=x}else this.data=f}b(Wd,mt);function Jd(){Tn.call(this),this.status=1}b(Jd,Tn);function ei(f){this.g=f}b(ei,Xd),ei.prototype.ra=function(){ee(this.g,"a")},ei.prototype.qa=function(f){ee(this.g,new Wd(f))},ei.prototype.pa=function(f){ee(this.g,new Jd)},ei.prototype.oa=function(){ee(this.g,"b")},zi.prototype.createWebChannel=zi.prototype.g,er.prototype.send=er.prototype.o,er.prototype.open=er.prototype.m,er.prototype.close=er.prototype.close,KE=function(){return new zi},YE=function(){return qo()},GE=Xt,fv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},za.NO_ERROR=0,za.TIMEOUT=8,za.HTTP_ERROR=6,Tf=za,Cc.COMPLETE="complete",qE=Cc,Zt.EventType=Ht,Ht.OPEN="a",Ht.CLOSE="b",Ht.ERROR="c",Ht.MESSAGE="d",K.prototype.listen=K.prototype.J,Mu=Zt,Lt.prototype.listenOnce=Lt.prototype.K,Lt.prototype.getLastError=Lt.prototype.Ha,Lt.prototype.getLastErrorCode=Lt.prototype.ya,Lt.prototype.getStatus=Lt.prototype.ca,Lt.prototype.getResponseJson=Lt.prototype.La,Lt.prototype.getResponseText=Lt.prototype.la,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Fa,$E=Lt}).apply(typeof rf<"u"?rf:typeof self<"u"?self:typeof window<"u"?window:{});const t4="@firebase/firestore",n4="4.9.2";let Qn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Qn.UNAUTHENTICATED=new Qn(null),Qn.GOOGLE_CREDENTIALS=new Qn("google-credentials-uid"),Qn.FIRST_PARTY=new Qn("first-party-uid"),Qn.MOCK_USER=new Qn("mock-user");let gc="12.3.0";const No=new uy("@firebase/firestore");function Pl(){return No.logLevel}function Ue(t,...e){if(No.logLevel<=xt.DEBUG){const n=e.map(_y);No.debug(`Firestore (${gc}): ${t}`,...n)}}function Ni(t,...e){if(No.logLevel<=xt.ERROR){const n=e.map(_y);No.error(`Firestore (${gc}): ${t}`,...n)}}function Wl(t,...e){if(No.logLevel<=xt.WARN){const n=e.map(_y);No.warn(`Firestore (${gc}): ${t}`,...n)}}function _y(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function tt(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,QE(t,r,n)}function QE(t,e,n){let r=`FIRESTORE (${gc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ni(r),new Error(r)}function Dt(t,e,n,r){let a="Unexpected state";typeof n=="string"?a=n:r=n,t||QE(e,a,r)}function at(t,e){return t}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class De extends Ys{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Si{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class XE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Qn.UNAUTHENTICATED)))}shutdown(){}}class Sj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Ej{constructor(e){this.t=e,this.currentUser=Qn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Dt(this.o===void 0,42304);let r=this.i;const a=m=>this.i!==r?(r=this.i,n(m)):Promise.resolve();let l=new Si;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Si,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},h=m=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>h(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?h(m):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Si)}}),0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Dt(typeof r.accessToken=="string",31837,{l:r}),new XE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Dt(e===null||typeof e=="string",2055,{h:e}),new Qn(e)}}class Cj{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Qn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Tj{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Cj(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Qn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class r4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kj{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Rr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Dt(this.o===void 0,3512);const r=l=>{l.error!=null&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Ue("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new r4(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Dt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new r4(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Nj(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class wy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=Nj(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<n&&(r+=e.charAt(a[l]%62))}return r}}function _t(t,e){return t<e?-1:t>e?1:0}function mv(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const a=t.charAt(r),l=e.charAt(r);if(a!==l)return A0(a)===A0(l)?_t(a,l):A0(a)?1:-1}return _t(t.length,e.length)}const Aj=55296,Rj=57343;function A0(t){const e=t.charCodeAt(0);return e>=Aj&&e<=Rj}function Jl(t,e,n){return t.length===e.length&&t.every(((r,a)=>n(r,e[a])))}const s4="__name__";class Ms{constructor(e,n,r){n===void 0?n=0:n>e.length&&tt(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&tt(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ms.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ms?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let a=0;a<r;a++){const l=Ms.compareSegments(e.get(a),n.get(a));if(l!==0)return l}return _t(e.length,n.length)}static compareSegments(e,n){const r=Ms.isNumericId(e),a=Ms.isNumericId(n);return r&&!a?-1:!r&&a?1:r&&a?Ms.extractNumericId(e).compare(Ms.extractNumericId(n)):mv(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Sa.fromString(e.substring(4,e.length-2))}}class Ft extends Ms{construct(e,n,r){return new Ft(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new De(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((a=>a.length>0)))}return new Ft(n)}static emptyPath(){return new Ft([])}}const jj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qn extends Ms{construct(e,n,r){return new qn(e,n,r)}static isValidIdentifier(e){return jj.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===s4}static keyField(){return new qn([s4])}static fromServerFormat(e){const n=[];let r="",a=0;const l=()=>{if(r.length===0)throw new De(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new De(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new De(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,a+=2}else h==="`"?(c=!c,a++):h!=="."||c?(r+=h,a++):(l(),a++)}if(l(),c)throw new De(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qn(n)}static emptyPath(){return new qn([])}}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(Ft.fromString(e))}static fromName(e){return new Qe(Ft.fromString(e).popFirst(5))}static empty(){return new Qe(Ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ft.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new Ft(e.slice()))}}function WE(t,e,n){if(!n)throw new De(de.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Ij(t,e,n,r){if(e===!0&&r===!0)throw new De(de.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function i4(t){if(!Qe.isDocumentKey(t))throw new De(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function a4(t){if(Qe.isDocumentKey(t))throw new De(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function JE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Mm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":tt(12329,{type:typeof t})}function rr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new De(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Mm(t);throw new De(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Dj(t,e){if(e<=0)throw new De(de.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function En(t,e){const n={typeString:t};return e&&(n.value=e),n}function yd(t,e){if(!JE(t))throw new De(de.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const c=t[r];if(a&&typeof c!==a){n=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){n=`Expected '${r}' field to equal '${l.value}'`;break}}if(n)throw new De(de.INVALID_ARGUMENT,n);return!0}const o4=-62135596800,l4=1e6;class Kt{static now(){return Kt.fromMillis(Date.now())}static fromDate(e){return Kt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*l4);return new Kt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new De(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new De(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<o4)throw new De(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new De(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/l4}_compareTo(e){return this.seconds===e.seconds?_t(this.nanoseconds,e.nanoseconds):_t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Kt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yd(e,Kt._jsonSchema))return new Kt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-o4;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Kt._jsonSchemaVersion="firestore/timestamp/1.0",Kt._jsonSchema={type:En("string",Kt._jsonSchemaVersion),seconds:En("number"),nanoseconds:En("number")};class rt{static fromTimestamp(e){return new rt(e)}static min(){return new rt(new Kt(0,0))}static max(){return new rt(new Kt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Qu=-1;function Mj(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,a=rt.fromTimestamp(r===1e9?new Kt(n+1,0):new Kt(n,r));return new ka(a,Qe.empty(),e)}function Pj(t){return new ka(t.readTime,t.key,Qu)}class ka{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ka(rt.min(),Qe.empty(),Qu)}static max(){return new ka(rt.max(),Qe.empty(),Qu)}}function Oj(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Qe.comparator(t.documentKey,e.documentKey),n!==0?n:_t(t.largestBatchId,e.largestBatchId))}const Lj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Vj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function vc(t){if(t.code!==de.FAILED_PRECONDITION||t.message!==Lj)throw t;Ue("LocalStore","Unexpectedly lost primary lease")}class we{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&tt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new we(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(n,l).next(r,a)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof we?n:we.resolve(n)}catch(n){return we.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):we.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):we.reject(n)}static resolve(e){return new we(((n,r)=>{n(e)}))}static reject(e){return new we(((n,r)=>{r(e)}))}static waitFor(e){return new we(((n,r)=>{let a=0,l=0,c=!1;e.forEach((h=>{++a,h.next((()=>{++l,c&&l===a&&n()}),(m=>r(m)))})),c=!0,l===a&&n()}))}static or(e){let n=we.resolve(!1);for(const r of e)n=n.next((a=>a?we.resolve(a):r()));return n}static forEach(e,n){const r=[];return e.forEach(((a,l)=>{r.push(n.call(this,a,l))})),this.waitFor(r)}static mapArray(e,n){return new we(((r,a)=>{const l=e.length,c=new Array(l);let h=0;for(let m=0;m<l;m++){const g=m;n(e[g]).next((y=>{c[g]=y,++h,h===l&&r(c)}),(y=>a(y)))}}))}static doWhile(e,n){return new we(((r,a)=>{const l=()=>{e()===!0?n().next((()=>{l()}),a):r()};l()}))}}function Uj(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function yc(t){return t.name==="IndexedDbTransactionError"}class Pm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Pm.ce=-1;const Sy=-1;function Om(t){return t==null}function em(t){return t===0&&1/t==-1/0}function zj(t){return typeof t=="number"&&Number.isInteger(t)&&!em(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const ZE="";function Bj(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=c4(e)),e=Fj(t.get(n),e);return c4(e)}function Fj(t,e){let n=e;const r=t.length;for(let a=0;a<r;a++){const l=t.charAt(a);switch(l){case"\0":n+="";break;case ZE:n+="";break;default:n+=l}}return n}function c4(t){return t+ZE+""}function u4(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Pa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function eC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class en{constructor(e,n){this.comparator=e,this.root=n||$n.EMPTY}insert(e,n){return new en(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$n.BLACK,null,null))}remove(e){return new en(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$n.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return n+r.left.size;a<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sf(this.root,e,this.comparator,!1)}getReverseIterator(){return new sf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sf(this.root,e,this.comparator,!0)}}class sf{constructor(e,n,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?r(e.key,n):1,n&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $n{constructor(e,n,r,a,l){this.key=e,this.value=n,this.color=r??$n.RED,this.left=a??$n.EMPTY,this.right=l??$n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,a,l){return new $n(e??this.key,n??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,n,r),null):l===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return $n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return $n.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw tt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw tt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw tt(27949);return e+(this.isRed()?0:1)}}$n.EMPTY=null,$n.RED=!0,$n.BLACK=!1;$n.EMPTY=new class{constructor(){this.size=0}get key(){throw tt(57766)}get value(){throw tt(16141)}get color(){throw tt(16727)}get left(){throw tt(29726)}get right(){throw tt(36894)}copy(e,n,r,a,l){return this}insert(e,n,r){return new $n(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Rn{constructor(e){this.comparator=e,this.data=new en(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new d4(this.data.getIterator())}getIteratorFrom(e){return new d4(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Rn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Rn(this.comparator);return n.data=e,n}}class d4{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class jr{constructor(e){this.fields=e,e.sort(qn.comparator)}static empty(){return new jr([])}unionWith(e){let n=new Rn(qn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new jr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Jl(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class tC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Gn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new tC("Invalid base64 string: "+l):l}})(e);return new Gn(n)}static fromUint8Array(e){const n=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new Gn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gn.EMPTY_BYTE_STRING=new Gn("");const Hj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Na(t){if(Dt(!!t,39018),typeof t=="string"){let e=0;const n=Hj.exec(t);if(Dt(!!n,46558,{timestamp:t}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:cn(t.seconds),nanos:cn(t.nanos)}}function cn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Aa(t){return typeof t=="string"?Gn.fromBase64String(t):Gn.fromUint8Array(t)}const nC="server_timestamp",rC="__type__",sC="__previous_value__",iC="__local_write_time__";function Lm(t){return(t?.mapValue?.fields||{})[rC]?.stringValue===nC}function Vm(t){const e=t.mapValue.fields[sC];return Lm(e)?Vm(e):e}function Xu(t){const e=Na(t.mapValue.fields[iC].timestampValue);return new Kt(e.seconds,e.nanos)}class $j{constructor(e,n,r,a,l,c,h,m,g,y){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=y}}const tm="(default)";class Wu{constructor(e,n){this.projectId=e,this.database=n||tm}static empty(){return new Wu("","")}get isDefaultDatabase(){return this.database===tm}isEqual(e){return e instanceof Wu&&e.projectId===this.projectId&&e.database===this.database}}const aC="__type__",qj="__max__",af={mapValue:{}},oC="__vector__",nm="value";function Ra(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Lm(t)?4:Yj(t)?9007199254740991:Gj(t)?10:11:tt(28295,{value:t})}function $s(t,e){if(t===e)return!0;const n=Ra(t);if(n!==Ra(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xu(t).isEqual(Xu(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Na(a.timestampValue),h=Na(l.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(a,l){return Aa(a.bytesValue).isEqual(Aa(l.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(a,l){return cn(a.geoPointValue.latitude)===cn(l.geoPointValue.latitude)&&cn(a.geoPointValue.longitude)===cn(l.geoPointValue.longitude)})(t,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return cn(a.integerValue)===cn(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=cn(a.doubleValue),h=cn(l.doubleValue);return c===h?em(c)===em(h):isNaN(c)&&isNaN(h)}return!1})(t,e);case 9:return Jl(t.arrayValue.values||[],e.arrayValue.values||[],$s);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},h=l.mapValue.fields||{};if(u4(c)!==u4(h))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(h[m]===void 0||!$s(c[m],h[m])))return!1;return!0})(t,e);default:return tt(52216,{left:t})}}function Ju(t,e){return(t.values||[]).find((n=>$s(n,e)))!==void 0}function Zl(t,e){if(t===e)return 0;const n=Ra(t),r=Ra(e);if(n!==r)return _t(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _t(t.booleanValue,e.booleanValue);case 2:return(function(l,c){const h=cn(l.integerValue||l.doubleValue),m=cn(c.integerValue||c.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1})(t,e);case 3:return h4(t.timestampValue,e.timestampValue);case 4:return h4(Xu(t),Xu(e));case 5:return mv(t.stringValue,e.stringValue);case 6:return(function(l,c){const h=Aa(l),m=Aa(c);return h.compareTo(m)})(t.bytesValue,e.bytesValue);case 7:return(function(l,c){const h=l.split("/"),m=c.split("/");for(let g=0;g<h.length&&g<m.length;g++){const y=_t(h[g],m[g]);if(y!==0)return y}return _t(h.length,m.length)})(t.referenceValue,e.referenceValue);case 8:return(function(l,c){const h=_t(cn(l.latitude),cn(c.latitude));return h!==0?h:_t(cn(l.longitude),cn(c.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return f4(t.arrayValue,e.arrayValue);case 10:return(function(l,c){const h=l.fields||{},m=c.fields||{},g=h[nm]?.arrayValue,y=m[nm]?.arrayValue,b=_t(g?.values?.length||0,y?.values?.length||0);return b!==0?b:f4(g,y)})(t.mapValue,e.mapValue);case 11:return(function(l,c){if(l===af.mapValue&&c===af.mapValue)return 0;if(l===af.mapValue)return 1;if(c===af.mapValue)return-1;const h=l.fields||{},m=Object.keys(h),g=c.fields||{},y=Object.keys(g);m.sort(),y.sort();for(let b=0;b<m.length&&b<y.length;++b){const _=mv(m[b],y[b]);if(_!==0)return _;const k=Zl(h[m[b]],g[y[b]]);if(k!==0)return k}return _t(m.length,y.length)})(t.mapValue,e.mapValue);default:throw tt(23264,{he:n})}}function h4(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return _t(t,e);const n=Na(t),r=Na(e),a=_t(n.seconds,r.seconds);return a!==0?a:_t(n.nanos,r.nanos)}function f4(t,e){const n=t.values||[],r=e.values||[];for(let a=0;a<n.length&&a<r.length;++a){const l=Zl(n[a],r[a]);if(l)return l}return _t(n.length,r.length)}function ec(t){return pv(t)}function pv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Na(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Aa(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Qe.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",a=!0;for(const l of n.values||[])a?a=!1:r+=",",r+=pv(l);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${pv(n.fields[c])}`;return a+"}"})(t.mapValue):tt(61005,{value:t})}function kf(t){switch(Ra(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vm(t);return e?16+kf(e):16;case 5:return 2*t.stringValue.length;case 6:return Aa(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+kf(l)),0)})(t.arrayValue);case 10:case 11:return(function(r){let a=0;return Pa(r.fields,((l,c)=>{a+=l.length+kf(c)})),a})(t.mapValue);default:throw tt(13486,{value:t})}}function rm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function gv(t){return!!t&&"integerValue"in t}function Ey(t){return!!t&&"arrayValue"in t}function m4(t){return!!t&&"nullValue"in t}function p4(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Nf(t){return!!t&&"mapValue"in t}function Gj(t){return(t?.mapValue?.fields||{})[aC]?.stringValue===oC}function Hu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Pa(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Hu(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Hu(t.arrayValue.values[n]);return e}return{...t}}function Yj(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===qj}class gr{constructor(e){this.value=e}static empty(){return new gr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Nf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hu(n)}setAll(e){let n=qn.emptyPath(),r={},a=[];e.forEach(((c,h)=>{if(!n.isImmediateParentOf(h)){const m=this.getFieldsMap(n);this.applyChanges(m,r,a),r={},a=[],n=h.popLast()}c?r[h.lastSegment()]=Hu(c):a.push(h.lastSegment())}));const l=this.getFieldsMap(n);this.applyChanges(l,r,a)}delete(e){const n=this.field(e.popLast());Nf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return $s(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=n.mapValue.fields[e.get(r)];Nf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,r){Pa(n,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new gr(Hu(this.value))}}function lC(t){const e=[];return Pa(t.fields,((n,r)=>{const a=new qn([n]);if(Nf(r)){const l=lC(r.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new jr(e)}class Wn{constructor(e,n,r,a,l,c,h){this.key=e,this.documentType=n,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=h}static newInvalidDocument(e){return new Wn(e,0,rt.min(),rt.min(),rt.min(),gr.empty(),0)}static newFoundDocument(e,n,r,a){return new Wn(e,1,n,rt.min(),r,a,0)}static newNoDocument(e,n){return new Wn(e,2,n,rt.min(),rt.min(),gr.empty(),0)}static newUnknownDocument(e,n){return new Wn(e,3,n,rt.min(),rt.min(),gr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(rt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class tc{constructor(e,n){this.position=e,this.inclusive=n}}function g4(t,e,n){let r=0;for(let a=0;a<t.position.length;a++){const l=e[a],c=t.position[a];if(l.field.isKeyField()?r=Qe.comparator(Qe.fromName(c.referenceValue),n.key):r=Zl(c,n.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function v4(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!$s(t.position[n],e.position[n]))return!1;return!0}class Zu{constructor(e,n="asc"){this.field=e,this.dir=n}}function Kj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class cC{}class Sn extends cC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Xj(e,n,r):n==="array-contains"?new Zj(e,r):n==="in"?new e9(e,r):n==="not-in"?new t9(e,r):n==="array-contains-any"?new n9(e,r):new Sn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Wj(e,r):new Jj(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Zl(n,this.value)):n!==null&&Ra(this.value)===Ra(n)&&this.matchesComparison(Zl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return tt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class us extends cC{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new us(e,n)}matches(e){return uC(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function uC(t){return t.op==="and"}function dC(t){return Qj(t)&&uC(t)}function Qj(t){for(const e of t.filters)if(e instanceof us)return!1;return!0}function vv(t){if(t instanceof Sn)return t.field.canonicalString()+t.op.toString()+ec(t.value);if(dC(t))return t.filters.map((e=>vv(e))).join(",");{const e=t.filters.map((n=>vv(n))).join(",");return`${t.op}(${e})`}}function hC(t,e){return t instanceof Sn?(function(r,a){return a instanceof Sn&&r.op===a.op&&r.field.isEqual(a.field)&&$s(r.value,a.value)})(t,e):t instanceof us?(function(r,a){return a instanceof us&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,c,h)=>l&&hC(c,a.filters[h])),!0):!1})(t,e):void tt(19439)}function fC(t){return t instanceof Sn?(function(n){return`${n.field.canonicalString()} ${n.op} ${ec(n.value)}`})(t):t instanceof us?(function(n){return n.op.toString()+" {"+n.getFilters().map(fC).join(" ,")+"}"})(t):"Filter"}class Xj extends Sn{constructor(e,n,r){super(e,n,r),this.key=Qe.fromName(r.referenceValue)}matches(e){const n=Qe.comparator(e.key,this.key);return this.matchesComparison(n)}}class Wj extends Sn{constructor(e,n){super(e,"in",n),this.keys=mC("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Jj extends Sn{constructor(e,n){super(e,"not-in",n),this.keys=mC("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function mC(t,e){return(e.arrayValue?.values||[]).map((n=>Qe.fromName(n.referenceValue)))}class Zj extends Sn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ey(n)&&Ju(n.arrayValue,this.value)}}class e9 extends Sn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ju(this.value.arrayValue,n)}}class t9 extends Sn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ju(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ju(this.value.arrayValue,n)}}class n9 extends Sn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ey(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Ju(this.value.arrayValue,r)))}}class r9{constructor(e,n=null,r=[],a=[],l=null,c=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=h,this.Te=null}}function y4(t,e=null,n=[],r=[],a=null,l=null,c=null){return new r9(t,e,n,r,a,l,c)}function Cy(t){const e=at(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>vv(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),Om(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>ec(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>ec(r))).join(",")),e.Te=n}return e.Te}function Ty(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Kj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!hC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!v4(t.startAt,e.startAt)&&v4(t.endAt,e.endAt)}function yv(t){return Qe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Lo{constructor(e,n=null,r=[],a=[],l=null,c="F",h=null,m=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=h,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function s9(t,e,n,r,a,l,c,h){return new Lo(t,e,n,r,a,l,c,h)}function Um(t){return new Lo(t)}function b4(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ky(t){return t.collectionGroup!==null}function ql(t){const e=at(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),n.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new Rn(qn.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(h=h.add(g.field))}))})),h})(e).forEach((l=>{n.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Zu(l,r))})),n.has(qn.keyField().canonicalString())||e.Ie.push(new Zu(qn.keyField(),r))}return e.Ie}function Us(t){const e=at(t);return e.Ee||(e.Ee=i9(e,ql(t))),e.Ee}function i9(t,e){if(t.limitType==="F")return y4(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Zu(a.field,l)}));const n=t.endAt?new tc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new tc(t.startAt.position,t.startAt.inclusive):null;return y4(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function bv(t,e){const n=t.filters.concat([e]);return new Lo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function sm(t,e,n){return new Lo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zm(t,e){return Ty(Us(t),Us(e))&&t.limitType===e.limitType}function pC(t){return`${Cy(Us(t))}|lt:${t.limitType}`}function Ol(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((a=>fC(a))).join(", ")}]`),Om(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((a=>ec(a))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((a=>ec(a))).join(",")),`Target(${r})`})(Us(t))}; limitType=${t.limitType})`}function Bm(t,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):Qe.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(t,e)&&(function(r,a){for(const l of ql(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(t,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(t,e)&&(function(r,a){return!(r.startAt&&!(function(c,h,m){const g=g4(c,h,m);return c.inclusive?g<=0:g<0})(r.startAt,ql(r),a)||r.endAt&&!(function(c,h,m){const g=g4(c,h,m);return c.inclusive?g>=0:g>0})(r.endAt,ql(r),a))})(t,e)}function a9(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function gC(t){return(e,n)=>{let r=!1;for(const a of ql(t)){const l=o9(a,e,n);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function o9(t,e,n){const r=t.field.isKeyField()?Qe.comparator(e.key,n.key):(function(l,c,h){const m=c.data.field(l),g=h.data.field(l);return m!==null&&g!==null?Zl(m,g):tt(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return tt(19790,{direction:t.dir})}}class Vo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[n]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Pa(this.inner,((n,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return eC(this.inner)}size(){return this.innerSize}}const l9=new en(Qe.comparator);function Ai(){return l9}const vC=new en(Qe.comparator);function Pu(...t){let e=vC;for(const n of t)e=e.insert(n.key,n);return e}function yC(t){let e=vC;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function yo(){return $u()}function bC(){return $u()}function $u(){return new Vo((t=>t.toString()),((t,e)=>t.isEqual(e)))}const c9=new en(Qe.comparator),u9=new Rn(Qe.comparator);function wt(...t){let e=u9;for(const n of t)e=e.add(n);return e}const d9=new Rn(_t);function h9(){return d9}function Ny(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:em(e)?"-0":e}}function xC(t){return{integerValue:""+t}}function _C(t,e){return zj(e)?xC(e):Ny(t,e)}class Fm{constructor(){this._=void 0}}function f9(t,e,n){return t instanceof ed?(function(a,l){const c={fields:{[rC]:{stringValue:nC},[iC]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Lm(l)&&(l=Vm(l)),l&&(c.fields[sC]=l),{mapValue:c}})(n,e):t instanceof nc?SC(t,e):t instanceof rc?EC(t,e):(function(a,l){const c=wC(a,l),h=x4(c)+x4(a.Ae);return gv(c)&&gv(a.Ae)?xC(h):Ny(a.serializer,h)})(t,e)}function m9(t,e,n){return t instanceof nc?SC(t,e):t instanceof rc?EC(t,e):n}function wC(t,e){return t instanceof td?(function(r){return gv(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class ed extends Fm{}class nc extends Fm{constructor(e){super(),this.elements=e}}function SC(t,e){const n=CC(e);for(const r of t.elements)n.some((a=>$s(a,r)))||n.push(r);return{arrayValue:{values:n}}}class rc extends Fm{constructor(e){super(),this.elements=e}}function EC(t,e){let n=CC(e);for(const r of t.elements)n=n.filter((a=>!$s(a,r)));return{arrayValue:{values:n}}}class td extends Fm{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function x4(t){return cn(t.integerValue||t.doubleValue)}function CC(t){return Ey(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Hm{constructor(e,n){this.field=e,this.transform=n}}function p9(t,e){return t.field.isEqual(e.field)&&(function(r,a){return r instanceof nc&&a instanceof nc||r instanceof rc&&a instanceof rc?Jl(r.elements,a.elements,$s):r instanceof td&&a instanceof td?$s(r.Ae,a.Ae):r instanceof ed&&a instanceof ed})(t.transform,e.transform)}class g9{constructor(e,n){this.version=e,this.transformResults=n}}class sr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new sr}static exists(e){return new sr(void 0,e)}static updateTime(e){return new sr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Af(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class $m{}function TC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new qm(t.key,sr.none()):new bd(t.key,t.data,sr.none());{const n=t.data,r=gr.empty();let a=new Rn(qn.comparator);for(let l of e.fields)if(!a.has(l)){let c=n.field(l);c===null&&l.length>1&&(l=l.popLast(),c=n.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new Oa(t.key,r,new jr(a.toArray()),sr.none())}}function v9(t,e,n){t instanceof bd?(function(a,l,c){const h=a.value.clone(),m=w4(a.fieldTransforms,l,c.transformResults);h.setAll(m),l.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(t,e,n):t instanceof Oa?(function(a,l,c){if(!Af(a.precondition,l))return void l.convertToUnknownDocument(c.version);const h=w4(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(kC(a)),m.setAll(h),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(t,e,n):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,n)}function qu(t,e,n,r){return t instanceof bd?(function(l,c,h,m){if(!Af(l.precondition,c))return h;const g=l.value.clone(),y=S4(l.fieldTransforms,m,c);return g.setAll(y),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(t,e,n,r):t instanceof Oa?(function(l,c,h,m){if(!Af(l.precondition,c))return h;const g=S4(l.fieldTransforms,m,c),y=c.data;return y.setAll(kC(l)),y.setAll(g),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((b=>b.field)))})(t,e,n,r):(function(l,c,h){return Af(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h})(t,e,n)}function y9(t,e){let n=null;for(const r of t.fieldTransforms){const a=e.data.field(r.field),l=wC(r.transform,a||null);l!=null&&(n===null&&(n=gr.empty()),n.set(r.field,l))}return n||null}function _4(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&Jl(r,a,((l,c)=>p9(l,c)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class bd extends $m{constructor(e,n,r,a=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Oa extends $m{constructor(e,n,r,a,l=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function kC(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function w4(t,e,n){const r=new Map;Dt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let a=0;a<n.length;a++){const l=t[a],c=l.transform,h=e.data.field(l.field);r.set(l.field,m9(c,h,n[a]))}return r}function S4(t,e,n){const r=new Map;for(const a of t){const l=a.transform,c=n.data.field(a.field);r.set(a.field,f9(l,c,e))}return r}class qm extends $m{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class b9 extends $m{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class x9{constructor(e,n,r,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&v9(l,e,r[a])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=qu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=qu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=bC();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let h=this.applyToLocalView(c,l.mutatedFields);h=n.has(a.key)?null:h;const m=TC(c,h);m!==null&&r.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(rt.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),wt())}isEqual(e){return this.batchId===e.batchId&&Jl(this.mutations,e.mutations,((n,r)=>_4(n,r)))&&Jl(this.baseMutations,e.baseMutations,((n,r)=>_4(n,r)))}}class Ay{constructor(e,n,r,a){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=a}static from(e,n,r){Dt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return c9})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new Ay(e,n,r,a)}}class _9{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class w9{constructor(e,n){this.count=e,this.unchangedNames=n}}var bn,Ct;function S9(t){switch(t){case de.OK:return tt(64938);case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0;default:return tt(15467,{code:t})}}function NC(t){if(t===void 0)return Ni("GRPC error has no .code"),de.UNKNOWN;switch(t){case bn.OK:return de.OK;case bn.CANCELLED:return de.CANCELLED;case bn.UNKNOWN:return de.UNKNOWN;case bn.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case bn.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case bn.INTERNAL:return de.INTERNAL;case bn.UNAVAILABLE:return de.UNAVAILABLE;case bn.UNAUTHENTICATED:return de.UNAUTHENTICATED;case bn.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case bn.NOT_FOUND:return de.NOT_FOUND;case bn.ALREADY_EXISTS:return de.ALREADY_EXISTS;case bn.PERMISSION_DENIED:return de.PERMISSION_DENIED;case bn.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case bn.ABORTED:return de.ABORTED;case bn.OUT_OF_RANGE:return de.OUT_OF_RANGE;case bn.UNIMPLEMENTED:return de.UNIMPLEMENTED;case bn.DATA_LOSS:return de.DATA_LOSS;default:return tt(39323,{code:t})}}(Ct=bn||(bn={}))[Ct.OK=0]="OK",Ct[Ct.CANCELLED=1]="CANCELLED",Ct[Ct.UNKNOWN=2]="UNKNOWN",Ct[Ct.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ct[Ct.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ct[Ct.NOT_FOUND=5]="NOT_FOUND",Ct[Ct.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ct[Ct.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ct[Ct.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ct[Ct.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ct[Ct.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ct[Ct.ABORTED=10]="ABORTED",Ct[Ct.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ct[Ct.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ct[Ct.INTERNAL=13]="INTERNAL",Ct[Ct.UNAVAILABLE=14]="UNAVAILABLE",Ct[Ct.DATA_LOSS=15]="DATA_LOSS";function E9(){return new TextEncoder}const C9=new Sa([4294967295,4294967295],0);function E4(t){const e=E9().encode(t),n=new HE;return n.update(e),new Uint8Array(n.digest())}function C4(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Sa([n,r],0),new Sa([a,l],0)]}class Ry{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ou(`Invalid padding: ${n}`);if(r<0)throw new Ou(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ou(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ou(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Sa.fromNumber(this.ge)}ye(e,n,r){let a=e.add(n.multiply(Sa.fromNumber(r)));return a.compare(C9)===1&&(a=new Sa([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=E4(e),[r,a]=C4(n);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);if(!this.we(c))return!1}return!0}static create(e,n,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Ry(l,a,n);return r.forEach((h=>c.insert(h))),c}insert(e){if(this.ge===0)return;const n=E4(e),[r,a]=C4(n);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);this.Se(c)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ou extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Gm{constructor(e,n,r,a,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const a=new Map;return a.set(e,xd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Gm(rt.min(),a,new en(_t),Ai(),wt())}}class xd{constructor(e,n,r,a,l){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new xd(r,n,wt(),wt(),wt())}}class Rf{constructor(e,n,r,a){this.be=e,this.removedTargetIds=n,this.key=r,this.De=a}}class AC{constructor(e,n){this.targetId=e,this.Ce=n}}class RC{constructor(e,n,r=Gn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=a}}class T4{constructor(){this.ve=0,this.Fe=k4(),this.Me=Gn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=wt(),n=wt(),r=wt();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:r=r.add(a);break;default:tt(38017,{changeType:l})}})),new xd(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=k4()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Dt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class T9{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ai(),this.Je=of(),this.He=of(),this.Ye=new en(_t)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:tt(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,a)=>{this.rt(a)&&n(a)}))}st(e){const n=e.targetId,r=e.Ce.count,a=this.ot(n);if(a){const l=a.target;if(yv(l))if(r===0){const c=new Qe(l.path);this.et(n,c,Wn.newNoDocument(c,rt.min()))}else Dt(r===1,20013,{expectedCount:r});else{const c=this._t(n);if(c!==r){const h=this.ut(e),m=h?this.ct(h,e,c):1;if(m!==0){this.it(n);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,g)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=n;let c,h;try{c=Aa(r).toUint8Array()}catch(m){if(m instanceof tC)return Wl("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{h=new Ry(c,a,l)}catch(m){return Wl(m instanceof Ou?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return h.ge===0?null:h}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let a=0;return r.forEach((l=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(n,l,null),a++)})),a}Tt(e){const n=new Map;this.ze.forEach(((l,c)=>{const h=this.ot(c);if(h){if(l.current&&yv(h.target)){const m=new Qe(h.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,Wn.newNoDocument(m,e))}l.Be&&(n.set(c,l.ke()),l.qe())}}));let r=wt();this.He.forEach(((l,c)=>{let h=!0;c.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new Gm(e,n,this.Ye,this.je,r);return this.je=Ai(),this.Je=of(),this.He=of(),this.Ye=new en(_t),a}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,n)?a.Qe(n,1):a.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new T4,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Rn(_t),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Rn(_t),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ue("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new T4),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function of(){return new en(Qe.comparator)}function k4(){return new en(Qe.comparator)}const k9={asc:"ASCENDING",desc:"DESCENDING"},N9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},A9={and:"AND",or:"OR"};class R9{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function xv(t,e){return t.useProto3Json||Om(e)?e:{value:e}}function im(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function j9(t,e){return im(t,e.toTimestamp())}function zs(t){return Dt(!!t,49232),rt.fromTimestamp((function(n){const r=Na(n);return new Kt(r.seconds,r.nanos)})(t))}function jy(t,e){return _v(t,e).canonicalString()}function _v(t,e){const n=(function(a){return new Ft(["projects",a.projectId,"databases",a.database])})(t).child("documents");return e===void 0?n:n.child(e)}function IC(t){const e=Ft.fromString(t);return Dt(LC(e),10190,{key:e.toString()}),e}function wv(t,e){return jy(t.databaseId,e.path)}function R0(t,e){const n=IC(e);if(n.get(1)!==t.databaseId.projectId)throw new De(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new De(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Qe(MC(n))}function DC(t,e){return jy(t.databaseId,e)}function I9(t){const e=IC(t);return e.length===4?Ft.emptyPath():MC(e)}function Sv(t){return new Ft(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function MC(t){return Dt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function N4(t,e,n){return{name:wv(t,e),fields:n.value.mapValue.fields}}function D9(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:tt(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,y){return g.useProto3Json?(Dt(y===void 0||typeof y=="string",58123),Gn.fromBase64String(y||"")):(Dt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Gn.fromUint8Array(y||new Uint8Array))})(t,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&(function(g){const y=g.code===void 0?de.UNKNOWN:NC(g.code);return new De(y,g.message||"")})(c);n=new RC(r,a,l,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=R0(t,r.document.name),l=zs(r.document.updateTime),c=r.document.createTime?zs(r.document.createTime):rt.min(),h=new gr({mapValue:{fields:r.document.fields}}),m=Wn.newFoundDocument(a,l,c,h),g=r.targetIds||[],y=r.removedTargetIds||[];n=new Rf(g,y,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=R0(t,r.document),l=r.readTime?zs(r.readTime):rt.min(),c=Wn.newNoDocument(a,l),h=r.removedTargetIds||[];n=new Rf([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=R0(t,r.document),l=r.removedTargetIds||[];n=new Rf([],l,a,null)}else{if(!("filter"in e))return tt(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new w9(a,l),h=r.targetId;n=new AC(h,c)}}return n}function M9(t,e){let n;if(e instanceof bd)n={update:N4(t,e.key,e.value)};else if(e instanceof qm)n={delete:wv(t,e.key)};else if(e instanceof Oa)n={update:N4(t,e.key,e.data),updateMask:H9(e.fieldMask)};else{if(!(e instanceof b9))return tt(16599,{Vt:e.type});n={verify:wv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const h=c.transform;if(h instanceof ed)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof nc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof rc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof td)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw tt(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:j9(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:tt(27497)})(t,e.precondition)),n}function P9(t,e){return t&&t.length>0?(Dt(e!==void 0,14353),t.map((n=>(function(a,l){let c=a.updateTime?zs(a.updateTime):zs(l);return c.isEqual(rt.min())&&(c=zs(l)),new g9(c,a.transformResults||[])})(n,e)))):[]}function O9(t,e){return{documents:[DC(t,e.path)]}}function L9(t,e){const n={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=DC(t,a);const l=(function(g){if(g.length!==0)return OC(us.create(g,"and"))})(e.filters);l&&(n.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((y=>(function(_){return{field:Ll(_.field),direction:z9(_.dir)}})(y)))})(e.orderBy);c&&(n.structuredQuery.orderBy=c);const h=xv(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:n,parent:a}}function V9(t){let e=I9(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let a=null;if(r>0){Dt(r===1,65062);const y=n.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];n.where&&(l=(function(b){const _=PC(b);return _ instanceof us&&dC(_)?_.getFilters():[_]})(n.where));let c=[];n.orderBy&&(c=(function(b){return b.map((_=>(function(R){return new Zu(Vl(R.field),(function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(_)))})(n.orderBy));let h=null;n.limit&&(h=(function(b){let _;return _=typeof b=="object"?b.value:b,Om(_)?null:_})(n.limit));let m=null;n.startAt&&(m=(function(b){const _=!!b.before,k=b.values||[];return new tc(k,_)})(n.startAt));let g=null;return n.endAt&&(g=(function(b){const _=!b.before,k=b.values||[];return new tc(k,_)})(n.endAt)),s9(e,a,c,l,h,"F",m,g)}function U9(t,e){const n=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tt(28987,{purpose:a})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function PC(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Vl(n.unaryFilter.field);return Sn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Vl(n.unaryFilter.field);return Sn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Vl(n.unaryFilter.field);return Sn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Vl(n.unaryFilter.field);return Sn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return tt(61313);default:return tt(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Sn.create(Vl(n.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return tt(58110);default:return tt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return us.create(n.compositeFilter.filters.map((r=>PC(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return tt(1026)}})(n.compositeFilter.op))})(t):tt(30097,{filter:t})}function z9(t){return k9[t]}function B9(t){return N9[t]}function F9(t){return A9[t]}function Ll(t){return{fieldPath:t.canonicalString()}}function Vl(t){return qn.fromServerFormat(t.fieldPath)}function OC(t){return t instanceof Sn?(function(n){if(n.op==="=="){if(p4(n.value))return{unaryFilter:{field:Ll(n.field),op:"IS_NAN"}};if(m4(n.value))return{unaryFilter:{field:Ll(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(p4(n.value))return{unaryFilter:{field:Ll(n.field),op:"IS_NOT_NAN"}};if(m4(n.value))return{unaryFilter:{field:Ll(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ll(n.field),op:B9(n.op),value:n.value}}})(t):t instanceof us?(function(n){const r=n.getFilters().map((a=>OC(a)));return r.length===1?r[0]:{compositeFilter:{op:F9(n.op),filters:r}}})(t):tt(54877,{filter:t})}function H9(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function LC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class ya{constructor(e,n,r,a,l=rt.min(),c=rt.min(),h=Gn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new ya(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ya(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ya(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ya(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class $9{constructor(e){this.yt=e}}function q9(t){const e=V9({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?sm(e,e.limit,"L"):e}class G9{constructor(){this.Cn=new Y9}addToCollectionParentIndex(e,n){return this.Cn.add(n),we.resolve()}getCollectionParents(e,n){return we.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return we.resolve()}deleteFieldIndex(e,n){return we.resolve()}deleteAllFieldIndexes(e){return we.resolve()}createTargetIndexes(e,n){return we.resolve()}getDocumentsMatchingTarget(e,n){return we.resolve(null)}getIndexType(e,n){return we.resolve(0)}getFieldIndexes(e,n){return we.resolve([])}getNextCollectionGroupToUpdate(e){return we.resolve(null)}getMinOffset(e,n){return we.resolve(ka.min())}getMinOffsetFromCollectionGroup(e,n){return we.resolve(ka.min())}updateCollectionGroup(e,n,r){return we.resolve()}updateIndexEntries(e,n){return we.resolve()}}class Y9{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),a=this.index[n]||new Rn(Ft.comparator),l=!a.has(r);return this.index[n]=a.add(r),l}has(e){const n=e.lastSegment(),r=e.popLast(),a=this.index[n];return a&&a.has(r)}getEntries(e){return(this.index[e]||new Rn(Ft.comparator)).toArray()}}const A4={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},VC=41943040;class pr{static withCacheSize(e){return new pr(e,pr.DEFAULT_COLLECTION_PERCENTILE,pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}pr.DEFAULT_COLLECTION_PERCENTILE=10,pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pr.DEFAULT=new pr(VC,pr.DEFAULT_COLLECTION_PERCENTILE,pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pr.DISABLED=new pr(-1,0,0);class sc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new sc(0)}static cr(){return new sc(-1)}}const R4="LruGarbageCollector",K9=1048576;function j4([t,e],[n,r]){const a=_t(t,n);return a===0?_t(e,r):a}class Q9{constructor(e){this.Ir=e,this.buffer=new Rn(j4),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();j4(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class X9{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ue(R4,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){yc(n)?Ue(R4,"Ignoring IndexedDB error during garbage collection: ",n):await vc(n)}await this.Vr(3e5)}))}}class W9{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return we.resolve(Pm.ce);const r=new Q9(n);return this.mr.forEachTarget(e,(a=>r.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>r.Ar(a))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ue("LruGarbageCollector","Garbage collection skipped; disabled"),we.resolve(A4)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),A4):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,a,l,c,h,m,g;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(Ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),a=this.params.maximumSequenceNumbersToCollect):a=b,c=Date.now(),this.nthSequenceNumber(e,a)))).next((b=>(r=b,h=Date.now(),this.removeTargets(e,r,n)))).next((b=>(l=b,m=Date.now(),this.removeOrphanedDocuments(e,r)))).next((b=>(g=Date.now(),Pl()<=xt.DEBUG&&Ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(h-c)+`ms
	Removed ${l} targets in `+(m-h)+`ms
	Removed ${b} documents in `+(g-m)+`ms
Total Duration: ${g-y}ms`),we.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:b}))))}}function J9(t,e){return new W9(t,e)}class Z9{constructor(){this.changes=new Vo((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Wn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?we.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class eI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class tI{constructor(e,n,r,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,n)))).next((a=>(r!==null&&qu(r.mutation,a,jr.empty(),Kt.now()),a)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,wt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=wt()){const a=yo();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,r).next((l=>{let c=Pu();return l.forEach(((h,m)=>{c=c.insert(h,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,n){const r=yo();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,wt())))}populateOverlays(e,n,r){const a=[];return r.forEach((l=>{n.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,h)=>{n.set(c,h)}))}))}computeViews(e,n,r,a){let l=Ai();const c=$u(),h=(function(){return $u()})();return n.forEach(((m,g)=>{const y=r.get(g.key);a.has(g.key)&&(y===void 0||y.mutation instanceof Oa)?l=l.insert(g.key,g):y!==void 0?(c.set(g.key,y.mutation.getFieldMask()),qu(y.mutation,g,y.mutation.getFieldMask(),Kt.now())):c.set(g.key,jr.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((g,y)=>c.set(g,y))),n.forEach(((g,y)=>h.set(g,new eI(y,c.get(g)??null)))),h)))}recalculateAndSaveOverlays(e,n){const r=$u();let a=new en(((c,h)=>c-h)),l=wt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((c=>{for(const h of c)h.keys().forEach((m=>{const g=n.get(m);if(g===null)return;let y=r.get(m)||jr.empty();y=h.applyToLocalView(g,y),r.set(m,y);const b=(a.get(h.batchId)||wt()).add(m);a=a.insert(h.batchId,b)}))})).next((()=>{const c=[],h=a.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),g=m.key,y=m.value,b=bC();y.forEach((_=>{if(!l.has(_)){const k=TC(n.get(_),r.get(_));k!==null&&b.set(_,k),l=l.add(_)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,b))}return we.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,a){return(function(c){return Qe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ky(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,a):this.getDocumentsMatchingCollectionQuery(e,n,r,a)}getNextDocuments(e,n,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,a-l.size):we.resolve(yo());let h=Qu,m=l;return c.next((g=>we.forEach(g,((y,b)=>(h<b.largestBatchId&&(h=b.largestBatchId),l.get(y)?we.resolve():this.remoteDocumentCache.getEntry(e,y).next((_=>{m=m.insert(y,_)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,m,g,wt()))).next((y=>({batchId:h,changes:yC(y)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Qe(n)).next((r=>{let a=Pu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,a){const l=n.collectionGroup;let c=Pu();return this.indexManager.getCollectionParents(e,l).next((h=>we.forEach(h,(m=>{const g=(function(b,_){return new Lo(_,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(n,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,r,a).next((y=>{y.forEach(((b,_)=>{c=c.insert(b,_)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,n,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,l,a)))).next((c=>{l.forEach(((m,g)=>{const y=g.getKey();c.get(y)===null&&(c=c.insert(y,Wn.newInvalidDocument(y)))}));let h=Pu();return c.forEach(((m,g)=>{const y=l.get(m);y!==void 0&&qu(y.mutation,g,jr.empty(),Kt.now()),Bm(n,g)&&(h=h.insert(m,g))})),h}))}}class nI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return we.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(a){return{id:a.id,version:a.version,createTime:zs(a.createTime)}})(n)),we.resolve()}getNamedQuery(e,n){return we.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(a){return{name:a.name,query:q9(a.bundledQuery),readTime:zs(a.readTime)}})(n)),we.resolve()}}class rI{constructor(){this.overlays=new en(Qe.comparator),this.qr=new Map}getOverlay(e,n){return we.resolve(this.overlays.get(n))}getOverlays(e,n){const r=yo();return we.forEach(n,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((a,l)=>{this.St(e,n,l)})),we.resolve()}removeOverlaysForBatchId(e,n,r){const a=this.qr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(r)),we.resolve()}getOverlaysForCollection(e,n,r){const a=yo(),l=n.length+1,c=new Qe(n.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const m=h.getNext().value,g=m.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>r&&a.set(m.getKey(),m)}return we.resolve(a)}getOverlaysForCollectionGroup(e,n,r,a){let l=new en(((g,y)=>g-y));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>r){let y=l.get(g.largestBatchId);y===null&&(y=yo(),l=l.insert(g.largestBatchId,y)),y.set(g.getKey(),g)}}const h=yo(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,y)=>h.set(g,y))),!(h.size()>=a)););return we.resolve(h)}St(e,n,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(r.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new _9(n,r));let l=this.qr.get(n);l===void 0&&(l=wt(),this.qr.set(n,l)),this.qr.set(n,l.add(r.key))}}class sI{constructor(){this.sessionToken=Gn.EMPTY_BYTE_STRING}getSessionToken(e){return we.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,we.resolve()}}class Iy{constructor(){this.Qr=new Rn(Mn.$r),this.Ur=new Rn(Mn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Mn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Mn(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new Qe(new Ft([])),r=new Mn(n,e),a=new Mn(n,e+1),l=[];return this.Ur.forEachInRange([r,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Qe(new Ft([])),r=new Mn(n,e),a=new Mn(n,e+1);let l=wt();return this.Ur.forEachInRange([r,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const n=new Mn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Mn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Qe.comparator(e.key,n.key)||_t(e.Yr,n.Yr)}static Kr(e,n){return _t(e.Yr,n.Yr)||Qe.comparator(e.key,n.key)}}class iI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Rn(Mn.$r)}checkEmpty(e){return we.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new x9(l,n,r,a);this.mutationQueue.push(c);for(const h of a)this.Zr=this.Zr.add(new Mn(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return we.resolve(c)}lookupMutationBatch(e,n){return we.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,a=this.ei(r),l=a<0?0:a;return we.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return we.resolve(this.mutationQueue.length===0?Sy:this.tr-1)}getAllMutationBatches(e){return we.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Mn(n,0),a=new Mn(n,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([r,a],(c=>{const h=this.Xr(c.Yr);l.push(h)})),we.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Rn(_t);return n.forEach((a=>{const l=new Mn(a,0),c=new Mn(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(h=>{r=r.add(h.Yr)}))})),we.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,a=r.length+1;let l=r;Qe.isDocumentKey(l)||(l=l.child(""));const c=new Mn(new Qe(l),0);let h=new Rn(_t);return this.Zr.forEachWhile((m=>{const g=m.key.path;return!!r.isPrefixOf(g)&&(g.length===a&&(h=h.add(m.Yr)),!0)}),c),we.resolve(this.ti(h))}ti(e){const n=[];return e.forEach((r=>{const a=this.Xr(r);a!==null&&n.push(a)})),n}removeMutationBatch(e,n){Dt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return we.forEach(n.mutations,(a=>{const l=new Mn(a.key,n.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Mn(n,0),a=this.Zr.firstAfterOrEqual(r);return we.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,we.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class aI{constructor(e){this.ri=e,this.docs=(function(){return new en(Qe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,a=this.docs.get(r),l=a?a.size:0,c=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return we.resolve(r?r.document.mutableCopy():Wn.newInvalidDocument(n))}getEntries(e,n){let r=Ai();return n.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():Wn.newInvalidDocument(a))})),we.resolve(r)}getDocumentsMatchingQuery(e,n,r,a){let l=Ai();const c=n.path,h=new Qe(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:g,value:{document:y}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||Oj(Pj(y),r)<=0||(a.has(y.key)||Bm(n,y))&&(l=l.insert(y.key,y.mutableCopy()))}return we.resolve(l)}getAllFromCollectionGroup(e,n,r,a){tt(9500)}ii(e,n){return we.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new oI(this)}getSize(e){return we.resolve(this.size)}}class oI extends Z9{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?n.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(r)})),we.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class lI{constructor(e){this.persistence=e,this.si=new Vo((n=>Cy(n)),Ty),this.lastRemoteSnapshotVersion=rt.min(),this.highestTargetId=0,this.oi=0,this._i=new Iy,this.targetCount=0,this.ai=sc.ur()}forEachTarget(e,n){return this.si.forEach(((r,a)=>n(a))),we.resolve()}getLastRemoteSnapshotVersion(e){return we.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return we.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),we.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),we.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new sc(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,we.resolve()}updateTargetData(e,n){return this.Pr(n),we.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,we.resolve()}removeTargets(e,n,r){let a=0;const l=[];return this.si.forEach(((c,h)=>{h.sequenceNumber<=n&&r.get(h.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)})),we.waitFor(l).next((()=>a))}getTargetCount(e){return we.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return we.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),we.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const a=this.persistence.referenceDelegate,l=[];return a&&n.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),we.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),we.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return we.resolve(r)}containsKey(e,n){return we.resolve(this._i.containsKey(n))}}class UC{constructor(e,n){this.ui={},this.overlays={},this.ci=new Pm(0),this.li=!1,this.li=!0,this.hi=new sI,this.referenceDelegate=e(this),this.Pi=new lI(this),this.indexManager=new G9,this.remoteDocumentCache=(function(a){return new aI(a)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new $9(n),this.Ii=new nI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new rI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new iI(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Ue("MemoryPersistence","Starting transaction:",e);const a=new cI(this.ci.next());return this.referenceDelegate.Ei(),r(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,n){return we.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class cI extends Vj{constructor(e){super(),this.currentSequenceNumber=e}}class Dy{constructor(e){this.persistence=e,this.Ri=new Iy,this.Vi=null}static mi(e){return new Dy(e)}get fi(){if(this.Vi)return this.Vi;throw tt(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),we.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),we.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),we.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((a=>this.fi.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return we.forEach(this.fi,(r=>{const a=Qe.fromPath(r);return this.gi(e,a).next((l=>{l||n.removeEntry(a,rt.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return we.or([()=>we.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class am{constructor(e,n){this.persistence=e,this.pi=new Vo((r=>Bj(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=J9(this,n)}static mi(e,n){return new am(e,n)}Ei(){}di(e){return we.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((a=>r+a))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return we.forEach(this.pi,((r,a)=>this.br(e,r,a).next((l=>l?we.resolve():n(a)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,n).next((h=>{h||(r++,l.removeEntry(c,rt.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),we.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),we.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),we.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),we.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=kf(e.data.value)),n}br(e,n,r){return we.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.pi.get(n);return we.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class My{constructor(e,n,r,a){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=a}static As(e,n){let r=wt(),a=wt();for(const l of n.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new My(e,n.fromCache,r,a)}}class uI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class dI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return ON()?8:Uj(Jn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,a){const l={result:null};return this.ys(e,n).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,n,a,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new uI;return this.Ss(e,n,c).next((h=>{if(l.result=h,this.Vs)return this.bs(e,n,c,h.size)}))})).next((()=>l.result))}bs(e,n,r,a){return r.documentReadCount<this.fs?(Pl()<=xt.DEBUG&&Ue("QueryEngine","SDK will not create cache indexes for query:",Ol(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),we.resolve()):(Pl()<=xt.DEBUG&&Ue("QueryEngine","Query:",Ol(n),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.gs*a?(Pl()<=xt.DEBUG&&Ue("QueryEngine","The SDK decides to create cache indexes for query:",Ol(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Us(n))):we.resolve())}ys(e,n){if(b4(n))return we.resolve(null);let r=Us(n);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(n.limit!==null&&a===1&&(n=sm(n,null,"F"),r=Us(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=wt(...l);return this.ps.getDocuments(e,c).next((h=>this.indexManager.getMinOffset(e,r).next((m=>{const g=this.Ds(n,h);return this.Cs(n,g,c,m.readTime)?this.ys(e,sm(n,null,"F")):this.vs(e,g,n,m)}))))})))))}ws(e,n,r,a){return b4(n)||a.isEqual(rt.min())?we.resolve(null):this.ps.getDocuments(e,r).next((l=>{const c=this.Ds(n,l);return this.Cs(n,c,r,a)?we.resolve(null):(Pl()<=xt.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ol(n)),this.vs(e,c,n,Mj(a,Qu)).next((h=>h)))}))}Ds(e,n){let r=new Rn(gC(e));return n.forEach(((a,l)=>{Bm(e,l)&&(r=r.add(l))})),r}Cs(e,n,r,a){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,n,r){return Pl()<=xt.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",Ol(n)),this.ps.getDocumentsMatchingQuery(e,n,ka.min(),r)}vs(e,n,r,a){return this.ps.getDocumentsMatchingQuery(e,r,a).next((l=>(n.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const Py="LocalStore",hI=3e8;class fI{constructor(e,n,r,a){this.persistence=e,this.Fs=n,this.serializer=a,this.Ms=new en(_t),this.xs=new Vo((l=>Cy(l)),Ty),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function mI(t,e,n,r){return new fI(t,e,n,r)}async function zC(t,e){const n=at(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return n.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],h=[];let m=wt();for(const g of a){c.push(g.batchId);for(const y of g.mutations)m=m.add(y.key)}for(const g of l){h.push(g.batchId);for(const y of g.mutations)m=m.add(y.key)}return n.localDocuments.getDocuments(r,m).next((g=>({Ls:g,removedBatchIds:c,addedBatchIds:h})))}))}))}function pI(t,e){const n=at(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,m,g,y){const b=g.batch,_=b.keys();let k=we.resolve();return _.forEach((R=>{k=k.next((()=>y.getEntry(m,R))).next((j=>{const T=g.docVersions.get(R);Dt(T!==null,48541),j.version.compareTo(T)<0&&(b.applyToRemoteDocument(j,g),j.isValidDocument()&&(j.setReadTime(g.commitVersion),y.addEntry(j)))}))})),k.next((()=>h.mutationQueue.removeMutationBatch(m,b)))})(n,r,e,l).next((()=>l.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let m=wt();for(let g=0;g<h.mutationResults.length;++g)h.mutationResults[g].transformResults.length>0&&(m=m.add(h.batch.mutations[g].key));return m})(e)))).next((()=>n.localDocuments.getDocuments(r,a)))}))}function BC(t){const e=at(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function gI(t,e){const n=at(t),r=e.snapshotVersion;let a=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=n.Ns.newChangeBuffer({trackRemovals:!0});a=n.Ms;const h=[];e.targetChanges.forEach(((y,b)=>{const _=a.get(b);if(!_)return;h.push(n.Pi.removeMatchingKeys(l,y.removedDocuments,b).next((()=>n.Pi.addMatchingKeys(l,y.addedDocuments,b))));let k=_.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(b)!==null?k=k.withResumeToken(Gn.EMPTY_BYTE_STRING,rt.min()).withLastLimboFreeSnapshotVersion(rt.min()):y.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(y.resumeToken,r)),a=a.insert(b,k),(function(j,T,H){return j.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=hI?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(_,k,y)&&h.push(n.Pi.updateTargetData(l,k))}));let m=Ai(),g=wt();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(l,y))})),h.push(vI(l,c,e.documentUpdates).next((y=>{m=y.ks,g=y.qs}))),!r.isEqual(rt.min())){const y=n.Pi.getLastRemoteSnapshotVersion(l).next((b=>n.Pi.setTargetsMetadata(l,l.currentSequenceNumber,r)));h.push(y)}return we.waitFor(h).next((()=>c.apply(l))).next((()=>n.localDocuments.getLocalViewOfDocuments(l,m,g))).next((()=>m))})).then((l=>(n.Ms=a,l)))}function vI(t,e,n){let r=wt(),a=wt();return n.forEach((l=>r=r.add(l))),e.getEntries(t,r).next((l=>{let c=Ai();return n.forEach(((h,m)=>{const g=l.get(h);m.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(h)),m.isNoDocument()&&m.version.isEqual(rt.min())?(e.removeEntry(h,m.readTime),c=c.insert(h,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),c=c.insert(h,m)):Ue(Py,"Ignoring outdated watch update for ",h,". Current version:",g.version," Watch version:",m.version)})),{ks:c,qs:a}}))}function yI(t,e){const n=at(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Sy),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function bI(t,e){const n=at(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return n.Pi.getTargetData(r,e).next((l=>l?(a=l,we.resolve(a)):n.Pi.allocateTargetId(r).next((c=>(a=new ya(e,c,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=n.Ms.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Ev(t,e,n){const r=at(t),a=r.Ms.get(e),l=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!yc(c))throw c;Ue(Py,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(a.target)}function I4(t,e,n){const r=at(t);let a=rt.min(),l=wt();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,g,y){const b=at(m),_=b.xs.get(y);return _!==void 0?we.resolve(b.Ms.get(_)):b.Pi.getTargetData(g,y)})(r,c,Us(e)).next((h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,h.targetId).next((m=>{l=m}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,n?a:rt.min(),n?l:wt()))).next((h=>(xI(r,a9(e),h),{documents:h,Qs:l})))))}function xI(t,e,n){let r=t.Os.get(e)||rt.min();n.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),t.Os.set(e,r)}class D4{constructor(){this.activeTargetIds=h9()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _I{constructor(){this.Mo=new D4,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new D4,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class wI{Oo(e){}shutdown(){}}const M4="ConnectivityMonitor";class P4{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ue(M4,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ue(M4,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let lf=null;function Cv(){return lf===null?lf=(function(){return 268435456+Math.round(2147483648*Math.random())})():lf++,"0x"+lf.toString(16)}const j0="RestConnection",SI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class EI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${a}`,this.Wo=this.databaseId.database===tm?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Go(e,n,r,a,l){const c=Cv(),h=this.zo(e,n.toUriEncodedString());Ue(j0,`Sending RPC '${e}' ${c}:`,h,r);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,l);const{host:g}=new URL(h),y=Mo(g);return this.Jo(e,h,m,r,y).then((b=>(Ue(j0,`Received RPC '${e}' ${c}: `,b),b)),(b=>{throw Wl(j0,`RPC '${e}' ${c} failed with error: `,b,"url: ",h,"request:",r),b}))}Ho(e,n,r,a,l,c){return this.Go(e,n,r,a,l)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+gc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}zo(e,n){const r=SI[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class CI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Kn="WebChannelConnection";class TI extends EI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,a,l){const c=Cv();return new Promise(((h,m)=>{const g=new $E;g.setWithCredentials(!0),g.listenOnce(qE.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Tf.NO_ERROR:const b=g.getResponseJson();Ue(Kn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(b)),h(b);break;case Tf.TIMEOUT:Ue(Kn,`RPC '${e}' ${c} timed out`),m(new De(de.DEADLINE_EXCEEDED,"Request time out"));break;case Tf.HTTP_ERROR:const _=g.getStatus();if(Ue(Kn,`RPC '${e}' ${c} failed with status:`,_,"response text:",g.getResponseText()),_>0){let k=g.getResponseJson();Array.isArray(k)&&(k=k[0]);const R=k?.error;if(R&&R.status&&R.message){const j=(function(H){const q=H.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(q)>=0?q:de.UNKNOWN})(R.status);m(new De(j,R.message))}else m(new De(de.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new De(de.UNAVAILABLE,"Connection failed."));break;default:tt(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{Ue(Kn,`RPC '${e}' ${c} completed.`)}}));const y=JSON.stringify(a);Ue(Kn,`RPC '${e}' ${c} sending request:`,a),g.send(n,"POST",y,r,15)}))}T_(e,n,r){const a=Cv(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=KE(),h=YE(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,n,r),m.encodeInitMessageHeaders=!0;const y=l.join("");Ue(Kn,`Creating RPC '${e}' stream ${a}: ${y}`,m);const b=c.createWebChannel(y,m);this.I_(b);let _=!1,k=!1;const R=new CI({Yo:T=>{k?Ue(Kn,`Not sending because RPC '${e}' stream ${a} is closed:`,T):(_||(Ue(Kn,`Opening RPC '${e}' stream ${a} transport.`),b.open(),_=!0),Ue(Kn,`RPC '${e}' stream ${a} sending:`,T),b.send(T))},Zo:()=>b.close()}),j=(T,H,q)=>{T.listen(H,(I=>{try{q(I)}catch(z){setTimeout((()=>{throw z}),0)}}))};return j(b,Mu.EventType.OPEN,(()=>{k||(Ue(Kn,`RPC '${e}' stream ${a} transport opened.`),R.o_())})),j(b,Mu.EventType.CLOSE,(()=>{k||(k=!0,Ue(Kn,`RPC '${e}' stream ${a} transport closed`),R.a_(),this.E_(b))})),j(b,Mu.EventType.ERROR,(T=>{k||(k=!0,Wl(Kn,`RPC '${e}' stream ${a} transport errored. Name:`,T.name,"Message:",T.message),R.a_(new De(de.UNAVAILABLE,"The operation could not be completed")))})),j(b,Mu.EventType.MESSAGE,(T=>{if(!k){const H=T.data[0];Dt(!!H,16349);const q=H,I=q?.error||q[0]?.error;if(I){Ue(Kn,`RPC '${e}' stream ${a} received error:`,I);const z=I.status;let B=(function(E){const A=bn[E];if(A!==void 0)return NC(A)})(z),$=I.message;B===void 0&&(B=de.INTERNAL,$="Unknown error status: "+z+" with message "+I.message),k=!0,R.a_(new De(B,$)),b.close()}else Ue(Kn,`RPC '${e}' stream ${a} received:`,H),R.u_(H)}})),j(h,GE.STAT_EVENT,(T=>{T.stat===fv.PROXY?Ue(Kn,`RPC '${e}' stream ${a} detected buffering proxy`):T.stat===fv.NOPROXY&&Ue(Kn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{R.__()}),0),R}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function I0(){return typeof document<"u"?document:null}function Ym(t){return new R9(t,!0)}class FC{constructor(e,n,r=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,n-r);a>0&&Ue("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const O4="PersistentStream";class HC{constructor(e,n,r,a,l,c,h,m){this.Mi=e,this.S_=r,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new FC(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===de.RESOURCE_EXHAUSTED?(Ni(n.toString()),Ni("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===de.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===n&&this.G_(r,a)}),(r=>{e((()=>{const a=new De(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ue(O4,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Ue(O4,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class kI extends HC{constructor(e,n,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,a,c),this.serializer=l}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=D9(this.serializer,e),r=(function(l){if(!("targetChange"in l))return rt.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?rt.min():c.readTime?zs(c.readTime):rt.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Sv(this.serializer),n.addTarget=(function(l,c){let h;const m=c.target;if(h=yv(m)?{documents:O9(l,m)}:{query:L9(l,m).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=jC(l,c.resumeToken);const g=xv(l,c.expectedCount);g!==null&&(h.expectedCount=g)}else if(c.snapshotVersion.compareTo(rt.min())>0){h.readTime=im(l,c.snapshotVersion.toTimestamp());const g=xv(l,c.expectedCount);g!==null&&(h.expectedCount=g)}return h})(this.serializer,e);const r=U9(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Sv(this.serializer),n.removeTarget=e,this.q_(n)}}class NI extends HC{constructor(e,n,r,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Dt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Dt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Dt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=P9(e.writeResults,e.commitTime),r=zs(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Sv(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>M9(this.serializer,r)))};this.q_(n)}}class AI{}class RI extends AI{constructor(e,n,r,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new De(de.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,_v(n,r),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new De(de.UNKNOWN,l.toString())}))}Ho(e,n,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Ho(e,_v(n,r),a,c,h,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new De(de.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class jI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ni(n),this.aa=!1):Ue("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ao="RemoteStore";class II{constructor(e,n,r,a,l){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{Uo(this)&&(Ue(Ao,"Restarting streams for network reachability change."),await(async function(m){const g=at(m);g.Ea.add(4),await _d(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Km(g)})(this))}))})),this.Ra=new jI(r,a)}}async function Km(t){if(Uo(t))for(const e of t.da)await e(!0)}async function _d(t){for(const e of t.da)await e(!1)}function $C(t,e){const n=at(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Uy(n)?Vy(n):bc(n).O_()&&Ly(n,e))}function Oy(t,e){const n=at(t),r=bc(n);n.Ia.delete(e),r.O_()&&qC(n,e),n.Ia.size===0&&(r.O_()?r.L_():Uo(n)&&n.Ra.set("Unknown"))}function Ly(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(rt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}bc(t).Y_(e)}function qC(t,e){t.Va.Ue(e),bc(t).Z_(e)}function Vy(t){t.Va=new T9({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),bc(t).start(),t.Ra.ua()}function Uy(t){return Uo(t)&&!bc(t).x_()&&t.Ia.size>0}function Uo(t){return at(t).Ea.size===0}function GC(t){t.Va=void 0}async function DI(t){t.Ra.set("Online")}async function MI(t){t.Ia.forEach(((e,n)=>{Ly(t,e)}))}async function PI(t,e){GC(t),Uy(t)?(t.Ra.ha(e),Vy(t)):t.Ra.set("Unknown")}async function OI(t,e,n){if(t.Ra.set("Online"),e instanceof RC&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const h of l.targetIds)a.Ia.has(h)&&(await a.remoteSyncer.rejectListen(h,c),a.Ia.delete(h),a.Va.removeTarget(h))})(t,e)}catch(r){Ue(Ao,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await om(t,r)}else if(e instanceof Rf?t.Va.Ze(e):e instanceof AC?t.Va.st(e):t.Va.tt(e),!n.isEqual(rt.min()))try{const r=await BC(t.localStore);n.compareTo(r)>=0&&await(function(l,c){const h=l.Va.Tt(c);return h.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const y=l.Ia.get(g);y&&l.Ia.set(g,y.withResumeToken(m.resumeToken,c))}})),h.targetMismatches.forEach(((m,g)=>{const y=l.Ia.get(m);if(!y)return;l.Ia.set(m,y.withResumeToken(Gn.EMPTY_BYTE_STRING,y.snapshotVersion)),qC(l,m);const b=new ya(y.target,m,g,y.sequenceNumber);Ly(l,b)})),l.remoteSyncer.applyRemoteEvent(h)})(t,n)}catch(r){Ue(Ao,"Failed to raise snapshot:",r),await om(t,r)}}async function om(t,e,n){if(!yc(e))throw e;t.Ea.add(1),await _d(t),t.Ra.set("Offline"),n||(n=()=>BC(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Ue(Ao,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Km(t)}))}function YC(t,e){return e().catch((n=>om(t,n,e)))}async function Qm(t){const e=at(t),n=ja(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Sy;for(;LI(e);)try{const a=await yI(e.localStore,r);if(a===null){e.Ta.length===0&&n.L_();break}r=a.batchId,VI(e,a)}catch(a){await om(e,a)}KC(e)&&QC(e)}function LI(t){return Uo(t)&&t.Ta.length<10}function VI(t,e){t.Ta.push(e);const n=ja(t);n.O_()&&n.X_&&n.ea(e.mutations)}function KC(t){return Uo(t)&&!ja(t).x_()&&t.Ta.length>0}function QC(t){ja(t).start()}async function UI(t){ja(t).ra()}async function zI(t){const e=ja(t);for(const n of t.Ta)e.ea(n.mutations)}async function BI(t,e,n){const r=t.Ta.shift(),a=Ay.from(r,e,n);await YC(t,(()=>t.remoteSyncer.applySuccessfulWrite(a))),await Qm(t)}async function FI(t,e){e&&ja(t).X_&&await(async function(r,a){if((function(c){return S9(c)&&c!==de.ABORTED})(a.code)){const l=r.Ta.shift();ja(r).B_(),await YC(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Qm(r)}})(t,e),KC(t)&&QC(t)}async function L4(t,e){const n=at(t);n.asyncQueue.verifyOperationInProgress(),Ue(Ao,"RemoteStore received new credentials");const r=Uo(n);n.Ea.add(3),await _d(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Km(n)}async function HI(t,e){const n=at(t);e?(n.Ea.delete(2),await Km(n)):e||(n.Ea.add(2),await _d(n),n.Ra.set("Unknown"))}function bc(t){return t.ma||(t.ma=(function(n,r,a){const l=at(n);return l.sa(),new kI(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(t.datastore,t.asyncQueue,{Xo:DI.bind(null,t),t_:MI.bind(null,t),r_:PI.bind(null,t),H_:OI.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),Uy(t)?Vy(t):t.Ra.set("Unknown")):(await t.ma.stop(),GC(t))}))),t.ma}function ja(t){return t.fa||(t.fa=(function(n,r,a){const l=at(n);return l.sa(),new NI(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:UI.bind(null,t),r_:FI.bind(null,t),ta:zI.bind(null,t),na:BI.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Qm(t)):(await t.fa.stop(),t.Ta.length>0&&(Ue(Ao,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class zy{constructor(e,n,r,a,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Si,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,a,l){const c=Date.now()+r,h=new zy(e,n,c,a,l);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new De(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function By(t,e){if(Ni("AsyncQueue",`${e}: ${t}`),yc(t))return new De(de.UNAVAILABLE,`${e}: ${t}`);throw t}class Gl{static emptySet(e){return new Gl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Qe.comparator(n.key,r.key):(n,r)=>Qe.comparator(n.key,r.key),this.keyedMap=Pu(),this.sortedSet=new en(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Gl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Gl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class V4{constructor(){this.ga=new en(Qe.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):tt(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class ic{constructor(e,n,r,a,l,c,h,m,g){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,n,r,a,l){const c=[];return n.forEach((h=>{c.push({type:0,doc:h})})),new ic(e,n,Gl.emptySet(n),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==r[a].type||!n[a].doc.isEqual(r[a].doc))return!1;return!0}}class $I{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class qI{constructor(){this.queries=U4(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const a=at(n),l=a.queries;a.queries=U4(),l.forEach(((c,h)=>{for(const m of h.Sa)m.onError(r)}))})(this,new De(de.ABORTED,"Firestore shutting down"))}}function U4(){return new Vo((t=>pC(t)),zm)}async function Fy(t,e){const n=at(t);let r=3;const a=e.query;let l=n.queries.get(a);l?!l.ba()&&e.Da()&&(r=2):(l=new $I,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await n.onListen(a,!0);break;case 1:l.wa=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(c){const h=By(c,`Initialization of query '${Ol(e.query)}' failed`);return void e.onError(h)}n.queries.set(a,l),l.Sa.push(e),e.va(n.onlineState),l.wa&&e.Fa(l.wa)&&$y(n)}async function Hy(t,e){const n=at(t),r=e.query;let a=3;const l=n.queries.get(r);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function GI(t,e){const n=at(t);let r=!1;for(const a of e){const l=a.query,c=n.queries.get(l);if(c){for(const h of c.Sa)h.Fa(a)&&(r=!0);c.wa=a}}r&&$y(n)}function YI(t,e,n){const r=at(t),a=r.queries.get(e);if(a)for(const l of a.Sa)l.onError(n);r.queries.delete(e)}function $y(t){t.Ca.forEach((e=>{e.next()}))}var Tv,z4;(z4=Tv||(Tv={})).Ma="default",z4.Cache="cache";class qy{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new ic(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ic.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Tv.Cache}}class XC{constructor(e){this.key=e}}class WC{constructor(e){this.key=e}}class KI{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=wt(),this.mutatedKeys=wt(),this.eu=gC(e),this.tu=new Gl(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new V4,a=n?n.tu:this.tu;let l=n?n.mutatedKeys:this.mutatedKeys,c=a,h=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((y,b)=>{const _=a.get(y),k=Bm(this.query,b)?b:null,R=!!_&&this.mutatedKeys.has(_.key),j=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let T=!1;_&&k?_.data.isEqual(k.data)?R!==j&&(r.track({type:3,doc:k}),T=!0):this.su(_,k)||(r.track({type:2,doc:k}),T=!0,(m&&this.eu(k,m)>0||g&&this.eu(k,g)<0)&&(h=!0)):!_&&k?(r.track({type:0,doc:k}),T=!0):_&&!k&&(r.track({type:1,doc:_}),T=!0,(m||g)&&(h=!0)),T&&(k?(c=c.add(k),l=j?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),r.track({type:1,doc:y})}return{tu:c,iu:r,Cs:h,mutatedKeys:l}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((y,b)=>(function(k,R){const j=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt(20277,{Rt:T})}};return j(k)-j(R)})(y.type,b.type)||this.eu(y.doc,b.doc))),this.ou(r),a=a??!1;const h=n&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,g=m!==this.Za;return this.Za=m,c.length!==0||g?{snapshot:new ic(this.query,e.tu,l,c,e.mutatedKeys,m===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new V4,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=wt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new WC(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new XC(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=wt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ic.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Gy="SyncEngine";class QI{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class XI{constructor(e){this.key=e,this.hu=!1}}class WI{constructor(e,n,r,a,l,c){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Vo((h=>pC(h)),zm),this.Iu=new Map,this.Eu=new Set,this.du=new en(Qe.comparator),this.Au=new Map,this.Ru=new Iy,this.Vu={},this.mu=new Map,this.fu=sc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function JI(t,e,n=!0){const r=rT(t);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await JC(r,e,n,!0),a}async function ZI(t,e){const n=rT(t);await JC(n,e,!0,!1)}async function JC(t,e,n,r){const a=await bI(t.localStore,Us(e)),l=a.targetId,c=t.sharedClientState.addLocalQueryTarget(l,n);let h;return r&&(h=await eD(t,e,l,c==="current",a.resumeToken)),t.isPrimaryClient&&n&&$C(t.remoteStore,a),h}async function eD(t,e,n,r,a){t.pu=(b,_,k)=>(async function(j,T,H,q){let I=T.view.ru(H);I.Cs&&(I=await I4(j.localStore,T.query,!1).then((({documents:w})=>T.view.ru(w,I))));const z=q&&q.targetChanges.get(T.targetId),B=q&&q.targetMismatches.get(T.targetId)!=null,$=T.view.applyChanges(I,j.isPrimaryClient,z,B);return F4(j,T.targetId,$.au),$.snapshot})(t,b,_,k);const l=await I4(t.localStore,e,!0),c=new KI(e,l.Qs),h=c.ru(l.documents),m=xd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",a),g=c.applyChanges(h,t.isPrimaryClient,m);F4(t,n,g.au);const y=new QI(e,n,c);return t.Tu.set(e,y),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),g.snapshot}async function tD(t,e,n){const r=at(t),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter((c=>!zm(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await Ev(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),n&&Oy(r.remoteStore,a.targetId),kv(r,a.targetId)})).catch(vc)):(kv(r,a.targetId),await Ev(r.localStore,a.targetId,!0))}async function nD(t,e){const n=at(t),r=n.Tu.get(e),a=n.Iu.get(r.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Oy(n.remoteStore,r.targetId))}async function rD(t,e,n){const r=uD(t);try{const a=await(function(c,h){const m=at(c),g=Kt.now(),y=h.reduce(((k,R)=>k.add(R.key)),wt());let b,_;return m.persistence.runTransaction("Locally write mutations","readwrite",(k=>{let R=Ai(),j=wt();return m.Ns.getEntries(k,y).next((T=>{R=T,R.forEach(((H,q)=>{q.isValidDocument()||(j=j.add(H))}))})).next((()=>m.localDocuments.getOverlayedDocuments(k,R))).next((T=>{b=T;const H=[];for(const q of h){const I=y9(q,b.get(q.key).overlayedDocument);I!=null&&H.push(new Oa(q.key,I,lC(I.value.mapValue),sr.exists(!0)))}return m.mutationQueue.addMutationBatch(k,g,H,h)})).next((T=>{_=T;const H=T.applyToLocalDocumentSet(b,j);return m.documentOverlayCache.saveOverlays(k,T.batchId,H)}))})).then((()=>({batchId:_.batchId,changes:yC(b)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(c,h,m){let g=c.Vu[c.currentUser.toKey()];g||(g=new en(_t)),g=g.insert(h,m),c.Vu[c.currentUser.toKey()]=g})(r,a.batchId,n),await wd(r,a.changes),await Qm(r.remoteStore)}catch(a){const l=By(a,"Failed to persist write");n.reject(l)}}async function ZC(t,e){const n=at(t);try{const r=await gI(n.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=n.Au.get(l);c&&(Dt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?Dt(c.hu,14607):a.removedDocuments.size>0&&(Dt(c.hu,42227),c.hu=!1))})),await wd(n,r,e)}catch(r){await vc(r)}}function B4(t,e,n){const r=at(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const a=[];r.Tu.forEach(((l,c)=>{const h=c.view.va(e);h.snapshot&&a.push(h.snapshot)})),(function(c,h){const m=at(c);m.onlineState=h;let g=!1;m.queries.forEach(((y,b)=>{for(const _ of b.Sa)_.va(h)&&(g=!0)})),g&&$y(m)})(r.eventManager,e),a.length&&r.Pu.H_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function sD(t,e,n){const r=at(t);r.sharedClientState.updateQueryState(e,"rejected",n);const a=r.Au.get(e),l=a&&a.key;if(l){let c=new en(Qe.comparator);c=c.insert(l,Wn.newNoDocument(l,rt.min()));const h=wt().add(l),m=new Gm(rt.min(),new Map,new en(_t),c,h);await ZC(r,m),r.du=r.du.remove(l),r.Au.delete(e),Yy(r)}else await Ev(r.localStore,e,!1).then((()=>kv(r,e,n))).catch(vc)}async function iD(t,e){const n=at(t),r=e.batch.batchId;try{const a=await pI(n.localStore,e);tT(n,r,null),eT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await wd(n,a)}catch(a){await vc(a)}}async function aD(t,e,n){const r=at(t);try{const a=await(function(c,h){const m=at(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let y;return m.mutationQueue.lookupMutationBatch(g,h).next((b=>(Dt(b!==null,37113),y=b.keys(),m.mutationQueue.removeMutationBatch(g,b)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,y,h))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y))).next((()=>m.localDocuments.getDocuments(g,y)))}))})(r.localStore,e);tT(r,e,n),eT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await wd(r,a)}catch(a){await vc(a)}}function eT(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function tT(t,e,n){const r=at(t);let a=r.Vu[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(n?l.reject(n):l.resolve(),a=a.remove(e)),r.Vu[r.currentUser.toKey()]=a}}function kv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||nT(t,r)}))}function nT(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Oy(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Yy(t))}function F4(t,e,n){for(const r of n)r instanceof XC?(t.Ru.addReference(r.key,e),oD(t,r)):r instanceof WC?(Ue(Gy,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||nT(t,r.key)):tt(19791,{wu:r})}function oD(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Ue(Gy,"New document in limbo: "+n),t.Eu.add(r),Yy(t))}function Yy(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Qe(Ft.fromString(e)),r=t.fu.next();t.Au.set(r,new XI(n)),t.du=t.du.insert(n,r),$C(t.remoteStore,new ya(Us(Um(n.path)),r,"TargetPurposeLimboResolution",Pm.ce))}}async function wd(t,e,n){const r=at(t),a=[],l=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((h,m)=>{c.push(r.pu(m,e,n).then((g=>{if((g||n)&&r.isPrimaryClient){const y=g?!g.fromCache:n?.targetChanges.get(m.targetId)?.current;r.sharedClientState.updateQueryState(m.targetId,y?"current":"not-current")}if(g){a.push(g);const y=My.As(m.targetId,g);l.push(y)}})))})),await Promise.all(c),r.Pu.H_(a),await(async function(m,g){const y=at(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>we.forEach(g,(_=>we.forEach(_.Es,(k=>y.persistence.referenceDelegate.addReference(b,_.targetId,k))).next((()=>we.forEach(_.ds,(k=>y.persistence.referenceDelegate.removeReference(b,_.targetId,k)))))))))}catch(b){if(!yc(b))throw b;Ue(Py,"Failed to update sequence numbers: "+b)}for(const b of g){const _=b.targetId;if(!b.fromCache){const k=y.Ms.get(_),R=k.snapshotVersion,j=k.withLastLimboFreeSnapshotVersion(R);y.Ms=y.Ms.insert(_,j)}}})(r.localStore,l))}async function lD(t,e){const n=at(t);if(!n.currentUser.isEqual(e)){Ue(Gy,"User change. New user:",e.toKey());const r=await zC(n.localStore,e);n.currentUser=e,(function(l,c){l.mu.forEach((h=>{h.forEach((m=>{m.reject(new De(de.CANCELLED,c))}))})),l.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await wd(n,r.Ls)}}function cD(t,e){const n=at(t),r=n.Au.get(e);if(r&&r.hu)return wt().add(r.key);{let a=wt();const l=n.Iu.get(e);if(!l)return a;for(const c of l){const h=n.Tu.get(c);a=a.unionWith(h.view.nu)}return a}}function rT(t){const e=at(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sD.bind(null,e),e.Pu.H_=GI.bind(null,e.eventManager),e.Pu.yu=YI.bind(null,e.eventManager),e}function uD(t){const e=at(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aD.bind(null,e),e}class lm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ym(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return mI(this.persistence,new dI,e.initialUser,this.serializer)}Cu(e){return new UC(Dy.mi,this.serializer)}Du(e){return new _I}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}lm.provider={build:()=>new lm};class dD extends lm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Dt(this.persistence.referenceDelegate instanceof am,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new X9(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?pr.withCacheSize(this.cacheSizeBytes):pr.DEFAULT;return new UC((r=>am.mi(r,n)),this.serializer)}}class Nv{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>B4(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=lD.bind(null,this.syncEngine),await HI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new qI})()}createDatastore(e){const n=Ym(e.databaseInfo.databaseId),r=(function(l){return new TI(l)})(e.databaseInfo);return(function(l,c,h,m){return new RI(l,c,h,m)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,a,l,c,h){return new II(r,a,l,c,h)})(this.localStore,this.datastore,e.asyncQueue,(n=>B4(this.syncEngine,n,0)),(function(){return P4.v()?new P4:new wI})())}createSyncEngine(e,n){return(function(a,l,c,h,m,g,y){const b=new WI(a,l,c,h,m,g);return y&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=at(n);Ue(Ao,"RemoteStore shutting down."),r.Ea.add(5),await _d(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Nv.provider={build:()=>new Nv};class Ky{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ni("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Ia="FirestoreClient";class hD{constructor(e,n,r,a,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=a,this.user=Qn.UNAUTHENTICATED,this.clientId=wy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{Ue(Ia,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(Ue(Ia,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Si;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=By(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function D0(t,e){t.asyncQueue.verifyOperationInProgress(),Ue(Ia,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async a=>{r.isEqual(a)||(await zC(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function H4(t,e){t.asyncQueue.verifyOperationInProgress();const n=await fD(t);Ue(Ia,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>L4(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,a)=>L4(e.remoteStore,a))),t._onlineComponents=e}async function fD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ue(Ia,"Using user provided OfflineComponentProvider");try{await D0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(a){return a.name==="FirebaseError"?a.code===de.FAILED_PRECONDITION||a.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(n))throw n;Wl("Error using user provided cache. Falling back to memory cache: "+n),await D0(t,new lm)}}else Ue(Ia,"Using default OfflineComponentProvider"),await D0(t,new dD(void 0));return t._offlineComponents}async function sT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ue(Ia,"Using user provided OnlineComponentProvider"),await H4(t,t._uninitializedComponentsProvider._online)):(Ue(Ia,"Using default OnlineComponentProvider"),await H4(t,new Nv))),t._onlineComponents}function mD(t){return sT(t).then((e=>e.syncEngine))}async function cm(t){const e=await sT(t),n=e.eventManager;return n.onListen=JI.bind(null,e.syncEngine),n.onUnlisten=tD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ZI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=nD.bind(null,e.syncEngine),n}function pD(t,e,n={}){const r=new Si;return t.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,m,g){const y=new Ky({next:_=>{y.Nu(),c.enqueueAndForget((()=>Hy(l,b)));const k=_.docs.has(h);!k&&_.fromCache?g.reject(new De(de.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&_.fromCache&&m&&m.source==="server"?g.reject(new De(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(_)},error:_=>g.reject(_)}),b=new qy(Um(h.path),y,{includeMetadataChanges:!0,qa:!0});return Fy(l,b)})(await cm(t),t.asyncQueue,e,n,r))),r.promise}function gD(t,e,n={}){const r=new Si;return t.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,m,g){const y=new Ky({next:_=>{y.Nu(),c.enqueueAndForget((()=>Hy(l,b))),_.fromCache&&m.source==="server"?g.reject(new De(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(_)},error:_=>g.reject(_)}),b=new qy(h,y,{includeMetadataChanges:!0,qa:!0});return Fy(l,b)})(await cm(t),t.asyncQueue,e,n,r))),r.promise}function iT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const $4=new Map;const aT="firestore.googleapis.com",q4=!0;class G4{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new De(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=aT,this.ssl=q4}else this.host=e.host,this.ssl=e.ssl??q4;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=VC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<K9)throw new De(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ij("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new De(de.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new De(de.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new De(de.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xm{constructor(e,n,r,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new G4({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new De(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new De(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new G4(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new wj;switch(r.type){case"firstParty":return new Tj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new De(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=$4.get(n);r&&(Ue("ComponentProvider","Removing Datastore"),$4.delete(n),r.terminate())})(this),Promise.resolve()}}function vD(t,e,n,r={}){t=rr(t,Xm);const a=Mo(e),l=t._getSettings(),c={...l,emulatorOptions:t._getEmulatorOptions()},h=`${e}:${n}`;a&&(ly(`https://${h}`),cy("Firestore",!0)),l.host!==aT&&l.host!==h&&Wl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:h,ssl:a,emulatorOptions:r};if(!Ci(m,c)&&(t._setSettings(m),r.mockUserToken)){let g,y;if(typeof r.mockUserToken=="string")g=r.mockUserToken,y=Qn.MOCK_USER;else{g=eE(r.mockUserToken,t._app?.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new De(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Qn(b)}t._authCredentials=new Sj(new XE(g,y))}}class Qs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Qs(this.firestore,e,this._query)}}class rn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ea(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rn(this.firestore,e,this._key)}toJSON(){return{type:rn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(yd(n,rn._jsonSchema))return new rn(e,r||null,new Qe(Ft.fromString(n.referencePath)))}}rn._jsonSchemaVersion="firestore/documentReference/1.0",rn._jsonSchema={type:En("string",rn._jsonSchemaVersion),referencePath:En("string")};class Ea extends Qs{constructor(e,n,r){super(e,n,Um(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rn(this.firestore,null,new Qe(e))}withConverter(e){return new Ea(this.firestore,e,this._path)}}function dt(t,e,...n){if(t=$t(t),WE("collection","path",e),t instanceof Xm){const r=Ft.fromString(e,...n);return a4(r),new Ea(t,null,r)}{if(!(t instanceof rn||t instanceof Ea))throw new De(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ft.fromString(e,...n));return a4(r),new Ea(t.firestore,null,r)}}function Me(t,e,...n){if(t=$t(t),arguments.length===1&&(e=wy.newId()),WE("doc","path",e),t instanceof Xm){const r=Ft.fromString(e,...n);return i4(r),new rn(t,null,new Qe(r))}{if(!(t instanceof rn||t instanceof Ea))throw new De(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ft.fromString(e,...n));return i4(r),new rn(t.firestore,t instanceof Ea?t.converter:null,new Qe(r))}}const Y4="AsyncQueue";class K4{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new FC(this,"async_queue_retry"),this._c=()=>{const r=I0();r&&Ue(Y4,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=I0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=I0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Si;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!yc(e))throw e;Ue(Y4,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ni("INTERNAL UNHANDLED ERROR: ",Q4(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const a=zy.createAndSchedule(this,e,n,r,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&tt(47125,{Pc:Q4(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Q4(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function X4(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const a=n;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1})(t,["next","error","complete"])}class qs extends Xm{constructor(e,n,r,a){super(e,n,r,a),this.type="firestore",this._queue=new K4,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new K4(e),this._firestoreClient=void 0,await e}}}function yD(t,e){const n=typeof t=="object"?t:hy(),r=typeof t=="string"?t:tm,a=Rm(n,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=WS("firestore");l&&vD(a,...l)}return a}function Sd(t){if(t._terminated)throw new De(de.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||bD(t),t._firestoreClient}function bD(t){const e=t._freezeSettings(),n=(function(a,l,c,h){return new $j(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,iT(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new hD(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(t._componentsProvider))}class $r{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $r(Gn.fromBase64String(e))}catch(n){throw new De(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new $r(Gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:$r._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yd(e,$r._jsonSchema))return $r.fromBase64String(e.bytes)}}$r._jsonSchemaVersion="firestore/bytes/1.0",$r._jsonSchema={type:En("string",$r._jsonSchemaVersion),bytes:En("string")};class Ed{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new De(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class zo{constructor(e){this._methodName=e}}class Bs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new De(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new De(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return _t(this._lat,e._lat)||_t(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Bs._jsonSchemaVersion}}static fromJSON(e){if(yd(e,Bs._jsonSchema))return new Bs(e.latitude,e.longitude)}}Bs._jsonSchemaVersion="firestore/geoPoint/1.0",Bs._jsonSchema={type:En("string",Bs._jsonSchemaVersion),latitude:En("number"),longitude:En("number")};class Fs{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Fs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yd(e,Fs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Fs(e.vectorValues);throw new De(de.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Fs._jsonSchemaVersion="firestore/vectorValue/1.0",Fs._jsonSchema={type:En("string",Fs._jsonSchemaVersion),vectorValues:En("object")};const xD=/^__.*__$/;class _D{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Oa(e,this.data,this.fieldMask,n,this.fieldTransforms):new bd(e,this.data,n,this.fieldTransforms)}}class oT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Oa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function lT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt(40011,{Ac:t})}}class Wm{constructor(e,n,r,a,l,c){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Wm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return um(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(lT(this.Ac)&&xD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class wD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ym(e)}Cc(e,n,r,a=!1){return new Wm({Ac:e,methodName:n,Dc:r,path:qn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xc(t){const e=t._freezeSettings(),n=Ym(t._databaseId);return new wD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Qy(t,e,n,r,a,l={}){const c=t.Cc(l.merge||l.mergeFields?2:0,e,n,a);e1("Data must be an object, but it was:",c,r);const h=fT(r,c);let m,g;if(l.merge)m=new jr(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const b of l.mergeFields){const _=Av(e,b,n);if(!c.contains(_))throw new De(de.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);pT(y,_)||y.push(_)}m=new jr(y),g=c.fieldTransforms.filter((b=>m.covers(b.field)))}else m=null,g=c.fieldTransforms;return new _D(new gr(h),m,g)}class Cd extends zo{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Cd}}function cT(t,e,n){return new Wm({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Xy extends zo{_toFieldTransform(e){return new Hm(e.path,new ed)}isEqual(e){return e instanceof Xy}}class Wy extends zo{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=cT(this,e,!0),r=this.vc.map((l=>Bo(l,n))),a=new nc(r);return new Hm(e.path,a)}isEqual(e){return e instanceof Wy&&Ci(this.vc,e.vc)}}class Jy extends zo{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=cT(this,e,!0),r=this.vc.map((l=>Bo(l,n))),a=new rc(r);return new Hm(e.path,a)}isEqual(e){return e instanceof Jy&&Ci(this.vc,e.vc)}}class Zy extends zo{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new td(e.serializer,_C(e.serializer,this.Fc));return new Hm(e.path,n)}isEqual(e){return e instanceof Zy&&this.Fc===e.Fc}}function uT(t,e,n,r){const a=t.Cc(1,e,n);e1("Data must be an object, but it was:",a,r);const l=[],c=gr.empty();Pa(r,((m,g)=>{const y=t1(e,m,n);g=$t(g);const b=a.yc(y);if(g instanceof Cd)l.push(y);else{const _=Bo(g,b);_!=null&&(l.push(y),c.set(y,_))}}));const h=new jr(l);return new oT(c,h,a.fieldTransforms)}function dT(t,e,n,r,a,l){const c=t.Cc(1,e,n),h=[Av(e,r,n)],m=[a];if(l.length%2!=0)throw new De(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<l.length;_+=2)h.push(Av(e,l[_])),m.push(l[_+1]);const g=[],y=gr.empty();for(let _=h.length-1;_>=0;--_)if(!pT(g,h[_])){const k=h[_];let R=m[_];R=$t(R);const j=c.yc(k);if(R instanceof Cd)g.push(k);else{const T=Bo(R,j);T!=null&&(g.push(k),y.set(k,T))}}const b=new jr(g);return new oT(y,b,c.fieldTransforms)}function hT(t,e,n,r=!1){return Bo(n,t.Cc(r?4:3,e))}function Bo(t,e){if(mT(t=$t(t)))return e1("Unsupported field value:",e,t),fT(t,e);if(t instanceof zo)return(function(r,a){if(!lT(a.Ac))throw a.Sc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,a){const l=[];let c=0;for(const h of r){let m=Bo(h,a.wc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(t,e)}return(function(r,a){if((r=$t(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return _C(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=Kt.fromDate(r);return{timestampValue:im(a.serializer,l)}}if(r instanceof Kt){const l=new Kt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:im(a.serializer,l)}}if(r instanceof Bs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $r)return{bytesValue:jC(a.serializer,r._byteString)};if(r instanceof rn){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:jy(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Fs)return(function(c,h){return{mapValue:{fields:{[aC]:{stringValue:oC},[nm]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw h.Sc("VectorValues must only contain numeric values.");return Ny(h.serializer,g)}))}}}}}})(r,a);throw a.Sc(`Unsupported field value: ${Mm(r)}`)})(t,e)}function fT(t,e){const n={};return eC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pa(t,((r,a)=>{const l=Bo(a,e.mc(r));l!=null&&(n[r]=l)})),{mapValue:{fields:n}}}function mT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Kt||t instanceof Bs||t instanceof $r||t instanceof rn||t instanceof zo||t instanceof Fs)}function e1(t,e,n){if(!mT(n)||!JE(n)){const r=Mm(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Av(t,e,n){if((e=$t(e))instanceof Ed)return e._internalPath;if(typeof e=="string")return t1(t,e);throw um("Field path arguments must be of type string or ",t,!1,void 0,n)}const SD=new RegExp("[~\\*/\\[\\]]");function t1(t,e,n){if(e.search(SD)>=0)throw um(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ed(...e.split("."))._internalPath}catch{throw um(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function um(t,e,n,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${r}`),c&&(m+=` in document ${a}`),m+=")"),new De(de.INVALID_ARGUMENT,h+t+m)}function pT(t,e){return t.some((n=>n.isEqual(e)))}class n1{constructor(e,n,r,a,l){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ED(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Jm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ED extends n1{data(){return super.data()}}function Jm(t,e){return typeof e=="string"?t1(t,e):e instanceof Ed?e._internalPath:e._delegate._internalPath}function gT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new De(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class r1{}class Zm extends r1{}function is(t,e,...n){let r=[];e instanceof r1&&r.push(e),r=r.concat(n),(function(l){const c=l.filter((m=>m instanceof s1)).length,h=l.filter((m=>m instanceof ep)).length;if(c>1||c>0&&h>0)throw new De(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)t=a._apply(t);return t}class ep extends Zm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ep(e,n,r)}_apply(e){const n=this._parse(e);return vT(e._query,n),new Qs(e.firestore,e.converter,bv(e._query,n))}_parse(e){const n=xc(e.firestore);return(function(l,c,h,m,g,y,b){let _;if(g.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new De(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){J4(b,y);const R=[];for(const j of b)R.push(W4(m,l,j));_={arrayValue:{values:R}}}else _=W4(m,l,b)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||J4(b,y),_=hT(h,c,b,y==="in"||y==="not-in");return Sn.create(g,y,_)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function vo(t,e,n){const r=e,a=Jm("where",t);return ep._create(a,r,n)}class s1 extends r1{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new s1(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:us.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(a,l){let c=a;const h=l.getFlattenedFilters();for(const m of h)vT(c,m),c=bv(c,m)})(e._query,n),new Qs(e.firestore,e.converter,bv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class i1 extends Zm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new i1(e,n)}_apply(e){const n=(function(a,l,c){if(a.startAt!==null)throw new De(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new De(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zu(l,c)})(e._query,this._field,this._direction);return new Qs(e.firestore,e.converter,(function(a,l){const c=a.explicitOrderBy.concat([l]);return new Lo(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,n))}}function Rv(t,e="asc"){const n=e,r=Jm("orderBy",t);return i1._create(r,n)}class a1 extends Zm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new a1(e,n,r)}_apply(e){return new Qs(e.firestore,e.converter,sm(e._query,this._limit,this._limitType))}}function jv(t){return Dj("limit",t),a1._create("limit",t,"F")}class o1 extends Zm{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new o1(e,n,r)}_apply(e){const n=TD(e,this.type,this._docOrFields,this._inclusive);return new Qs(e.firestore,e.converter,(function(a,l){return new Lo(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)})(e._query,n))}}function CD(...t){return o1._create("startAfter",t,!1)}function TD(t,e,n,r){if(n[0]=$t(n[0]),n[0]instanceof n1)return(function(l,c,h,m,g){if(!m)throw new De(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const y=[];for(const b of ql(l))if(b.field.isKeyField())y.push(rm(c,m.key));else{const _=m.data.field(b.field);if(Lm(_))throw new De(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(_===null){const k=b.field.canonicalString();throw new De(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${k}' (used as the orderBy) does not exist.`)}y.push(_)}return new tc(y,g)})(t._query,t.firestore._databaseId,e,n[0]._document,r);{const a=xc(t.firestore);return(function(c,h,m,g,y,b){const _=c.explicitOrderBy;if(y.length>_.length)throw new De(de.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const k=[];for(let R=0;R<y.length;R++){const j=y[R];if(_[R].field.isKeyField()){if(typeof j!="string")throw new De(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof j}`);if(!ky(c)&&j.indexOf("/")!==-1)throw new De(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${j}' contains a slash.`);const T=c.path.child(Ft.fromString(j));if(!Qe.isDocumentKey(T))throw new De(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${T}' is not because it contains an odd number of segments.`);const H=new Qe(T);k.push(rm(h,H))}else{const T=hT(m,g,j);k.push(T)}}return new tc(k,b)})(t._query,t.firestore._databaseId,a,e,n,r)}}function W4(t,e,n){if(typeof(n=$t(n))=="string"){if(n==="")throw new De(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ky(e)&&n.indexOf("/")!==-1)throw new De(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ft.fromString(n));if(!Qe.isDocumentKey(r))throw new De(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return rm(t,new Qe(r))}if(n instanceof rn)return rm(t,n._key);throw new De(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Mm(n)}.`)}function J4(t,e){if(!Array.isArray(t)||t.length===0)throw new De(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vT(t,e){const n=(function(a,l){for(const c of a)for(const h of c.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null})(t.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new De(de.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new De(de.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class kD{convertValue(e,n="none"){switch(Ra(e)){case 0:return null;case 1:return e.booleanValue;case 2:return cn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Aa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw tt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Pa(e,((a,l)=>{r[a]=this.convertValue(l,n)})),r}convertVectorValue(e){const n=e.fields?.[nm].arrayValue?.values?.map((r=>cn(r.doubleValue)));return new Fs(n)}convertGeoPoint(e){return new Bs(cn(e.latitude),cn(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Vm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Xu(e));default:return null}}convertTimestamp(e){const n=Na(e);return new Kt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ft.fromString(e);Dt(LC(r),9688,{name:e});const a=new Wu(r.get(1),r.get(3)),l=new Qe(r.popFirst(5));return a.isEqual(n)||Ni(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}function l1(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Lu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xo extends n1{constructor(e,n,r,a,l,c){super(e,n,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Jm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new De(de.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=xo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}xo._jsonSchemaVersion="firestore/documentSnapshot/1.0",xo._jsonSchema={type:En("string",xo._jsonSchemaVersion),bundleSource:En("string","DocumentSnapshot"),bundleName:En("string"),bundle:En("string")};class jf extends xo{data(e={}){return super.data(e)}}class _o{constructor(e,n,r,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new Lu(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new jf(this._firestore,this._userDataWriter,r.key,r,new Lu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new De(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((h=>{const m=new jf(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Lu(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const m=new jf(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Lu(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,y=-1;return h.type!==0&&(g=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),y=c.indexOf(h.doc.key)),{type:ND(h.type),doc:m,oldIndex:g,newIndex:y}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new De(de.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_o._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=wy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(n.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ND(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt(61501,{type:t})}}function tp(t){t=rr(t,rn);const e=rr(t.firestore,qs);return pD(Sd(e),t._key).then((n=>yT(e,t,n)))}_o._jsonSchemaVersion="firestore/querySnapshot/1.0",_o._jsonSchema={type:En("string",_o._jsonSchemaVersion),bundleSource:En("string","QuerySnapshot"),bundleName:En("string"),bundle:En("string")};class c1 extends kD{constructor(e){super(),this.firestore=e}convertBytes(e){return new $r(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new rn(this.firestore,null,n)}}function Ro(t){t=rr(t,Qs);const e=rr(t.firestore,qs),n=Sd(e),r=new c1(e);return gT(t._query),gD(n,t._query).then((a=>new _o(e,r,t,a)))}function Ar(t,e,n){t=rr(t,rn);const r=rr(t.firestore,qs),a=l1(t.converter,e,n);return Td(r,[Qy(xc(r),"setDoc",t._key,a,t.converter!==null,n).toMutation(t._key,sr.none())])}function it(t,e,n,...r){t=rr(t,rn);const a=rr(t.firestore,qs),l=xc(a);let c;return c=typeof(e=$t(e))=="string"||e instanceof Ed?dT(l,"updateDoc",t._key,e,n,r):uT(l,"updateDoc",t._key,e),Td(a,[c.toMutation(t._key,sr.exists(!0))])}function jo(t){return Td(rr(t.firestore,qs),[new qm(t._key,sr.none())])}function An(t,e){const n=rr(t.firestore,qs),r=Me(t),a=l1(t.converter,e);return Td(n,[Qy(xc(t.firestore),"addDoc",r._key,a,t.converter!==null,{}).toMutation(r._key,sr.exists(!1))]).then((()=>r))}function nr(t,...e){t=$t(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||X4(e[r])||(n=e[r++]);const a={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(X4(e[r])){const m=e[r];e[r]=m.next?.bind(m),e[r+1]=m.error?.bind(m),e[r+2]=m.complete?.bind(m)}let l,c,h;if(t instanceof rn)c=rr(t.firestore,qs),h=Um(t._key.path),l={next:m=>{e[r]&&e[r](yT(c,t,m))},error:e[r+1],complete:e[r+2]};else{const m=rr(t,Qs);c=rr(m.firestore,qs),h=m._query;const g=new c1(c);l={next:y=>{e[r]&&e[r](new _o(c,g,m,y))},error:e[r+1],complete:e[r+2]},gT(t._query)}return(function(g,y,b,_){const k=new Ky(_),R=new qy(y,k,b);return g.asyncQueue.enqueueAndForget((async()=>Fy(await cm(g),R))),()=>{k.Nu(),g.asyncQueue.enqueueAndForget((async()=>Hy(await cm(g),R)))}})(Sd(c),h,a,l)}function Td(t,e){return(function(r,a){const l=new Si;return r.asyncQueue.enqueueAndForget((async()=>rD(await mD(r),a,l))),l.promise})(Sd(t),e)}function yT(t,e,n){const r=n.docs.get(e._key),a=new c1(t);return new xo(t,a,e._key,r,new Lu(n.hasPendingWrites,n.fromCache),e.converter)}class AD{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=xc(e)}set(e,n,r){this._verifyNotCommitted();const a=M0(e,this._firestore),l=l1(a.converter,n,r),c=Qy(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,r);return this._mutations.push(c.toMutation(a._key,sr.none())),this}update(e,n,r,...a){this._verifyNotCommitted();const l=M0(e,this._firestore);let c;return c=typeof(n=$t(n))=="string"||n instanceof Ed?dT(this._dataReader,"WriteBatch.update",l._key,n,r,a):uT(this._dataReader,"WriteBatch.update",l._key,n),this._mutations.push(c.toMutation(l._key,sr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=M0(e,this._firestore);return this._mutations=this._mutations.concat(new qm(n._key,sr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new De(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function M0(t,e){if((t=$t(t)).firestore!==e)throw new De(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function RD(){return new Cd("deleteField")}function bt(){return new Xy("serverTimestamp")}function np(...t){return new Wy("arrayUnion",t)}function dm(...t){return new Jy("arrayRemove",t)}function hm(t){return new Zy("increment",t)}function Z4(t){return Sd(t=rr(t,qs)),new AD(t,(e=>Td(t,e)))}(function(e,n=!0){(function(a){gc=a})(Po),Co(new Ta("firestore",((r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),h=new qs(new Ej(r.getProvider("auth-internal")),new kj(c,r.getProvider("app-check-internal")),(function(g,y){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new De(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wu(g.options.projectId,y)})(c,a),c);return l={useFetchStreams:n,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),Os(t4,n4,e),Os(t4,n4,"esm2020")})();const bT="firebasestorage.googleapis.com",jD="storageBucket",ID=120*1e3,DD=600*1e3;class Xs extends Ys{constructor(e,n,r=0){super(P0(e),`Firebase Storage: ${n} (${P0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Xs.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return P0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Gs;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Gs||(Gs={}));function P0(t){return"storage/"+t}function MD(){const t="An unknown error occurred, please check the error payload for server response.";return new Xs(Gs.UNKNOWN,t)}function PD(){return new Xs(Gs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function OD(){return new Xs(Gs.CANCELED,"User canceled the upload/download.")}function LD(t){return new Xs(Gs.INVALID_URL,"Invalid URL '"+t+"'.")}function VD(t){return new Xs(Gs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function ew(t){return new Xs(Gs.INVALID_ARGUMENT,t)}function xT(){return new Xs(Gs.APP_DELETED,"The Firebase app was deleted.")}function UD(t){return new Xs(Gs.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class os{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=os.makeFromUrl(e,n)}catch{return new os(e,"")}if(r.path==="")return r;throw VD(e)}static makeFromUrl(e,n){let r=null;const a="([A-Za-z0-9.\\-_]+)";function l(z){z.path.charAt(z.path.length-1)==="/"&&(z.path_=z.path_.slice(0,-1))}const c="(/(.*))?$",h=new RegExp("^gs://"+a+c,"i"),m={bucket:1,path:3};function g(z){z.path_=decodeURIComponent(z.path)}const y="v[A-Za-z0-9_]+",b=n.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",k=new RegExp(`^https?://${b}/${y}/b/${a}/o${_}`,"i"),R={bucket:1,path:3},j=n===bT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",H=new RegExp(`^https?://${j}/${a}/${T}`,"i"),I=[{regex:h,indices:m,postModify:l},{regex:k,indices:R,postModify:g},{regex:H,indices:{bucket:1,path:2},postModify:g}];for(let z=0;z<I.length;z++){const B=I[z],$=B.regex.exec(e);if($){const w=$[B.indices.bucket];let E=$[B.indices.path];E||(E=""),r=new os(w,E),B.postModify(r);break}}if(r==null)throw LD(e);return r}}class zD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function BD(t,e,n){let r=1,a=null,l=null,c=!1,h=0;function m(){return h===2}let g=!1;function y(...T){g||(g=!0,e.apply(null,T))}function b(T){a=setTimeout(()=>{a=null,t(k,m())},T)}function _(){l&&clearTimeout(l)}function k(T,...H){if(g){_();return}if(T){_(),y.call(null,T,...H);return}if(m()||c){_(),y.call(null,T,...H);return}r<64&&(r*=2);let I;h===1?(h=2,I=0):I=(r+Math.random())*1e3,b(I)}let R=!1;function j(T){R||(R=!0,_(),!g&&(a!==null?(T||(h=2),clearTimeout(a),b(0)):T||(h=1)))}return b(0),l=setTimeout(()=>{c=!0,j(!0)},n),j}function FD(t){t(!1)}function HD(t){return t!==void 0}function tw(t,e,n,r){if(r<e)throw ew(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw ew(`Invalid value for '${t}'. Expected ${n} or less.`)}function $D(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const a=e(r)+"="+e(t[r]);n=n+a+"&"}return n=n.slice(0,-1),n}var fm;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(fm||(fm={}));function qD(t,e){const n=t>=500&&t<600,a=[408,429].indexOf(t)!==-1,l=e.indexOf(t)!==-1;return n||a||l}class GD{constructor(e,n,r,a,l,c,h,m,g,y,b,_=!0,k=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=m,this.timeout_=g,this.progressCallback_=y,this.connectionFactory_=b,this.retry=_,this.isUsingEmulator=k,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,j)=>{this.resolve_=R,this.reject_=j,this.start_()})}start_(){const e=(r,a)=>{if(a){r(!1,new cf(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=h=>{const m=h.loaded,g=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,g)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const h=l.getErrorCode()===fm.NO_ERROR,m=l.getStatus();if(!h||qD(m,this.additionalRetryCodes_)&&this.retry){const y=l.getErrorCode()===fm.ABORT;r(!1,new cf(!1,null,y));return}const g=this.successCodes_.indexOf(m)!==-1;r(!0,new cf(g,l))})},n=(r,a)=>{const l=this.resolve_,c=this.reject_,h=a.connection;if(a.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());HD(m)?l(m):l()}catch(m){c(m)}else if(h!==null){const m=MD();m.serverResponse=h.getErrorText(),this.errorCallback_?c(this.errorCallback_(h,m)):c(m)}else if(a.canceled){const m=this.appDelete_?xT():OD();c(m)}else{const m=PD();c(m)}};this.canceled_?n(!1,new cf(!1,null,!0)):this.backoffId_=BD(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&FD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class cf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function YD(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function KD(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function QD(t,e){e&&(t["X-Firebase-GMPID"]=e)}function XD(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function WD(t,e,n,r,a,l,c=!0,h=!1){const m=$D(t.urlParams),g=t.url+m,y=Object.assign({},t.headers);return QD(y,e),YD(y,n),KD(y,l),XD(y,r),new GD(g,t.method,y,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,a,c,h)}function JD(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function ZD(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}class mm{constructor(e,n){this._service=e,n instanceof os?this._location=n:this._location=os.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new mm(e,n)}get root(){const e=new os(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ZD(this._location.path)}get storage(){return this._service}get parent(){const e=JD(this._location.path);if(e===null)return null;const n=new os(this._location.bucket,e);return new mm(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw UD(e)}}function nw(t,e){const n=e?.[jD];return n==null?null:os.makeFromBucketSpec(n,t)}function e7(t,e,n,r={}){t.host=`${e}:${n}`;const a=Mo(e);a&&(ly(`https://${t.host}/b`),cy("Storage",!0)),t._isUsingEmulator=!0,t._protocol=a?"https":"http";const{mockUserToken:l}=r;l&&(t._overrideAuthToken=typeof l=="string"?l:eE(l,t.app.options.projectId))}class t7{constructor(e,n,r,a,l,c=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=c,this._bucket=null,this._host=bT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ID,this._maxUploadRetryTime=DD,this._requests=new Set,a!=null?this._bucket=os.makeFromBucketSpec(a,this._host):this._bucket=nw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=os.makeFromBucketSpec(this._url,e):this._bucket=nw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){tw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){tw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Rr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new mm(this,e)}_makeRequest(e,n,r,a,l=!0){if(this._deleted)return new zD(xT());{const c=WD(e,this._appId,r,a,n,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,n){const[r,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,a).getPromise()}}const rw="@firebase/storage",sw="0.14.0";const _T="storage";function n7(t=hy(),e){t=$t(t);const r=Rm(t,_T).getImmediate({identifier:e}),a=WS("storage");return a&&r7(r,...a),r}function r7(t,e,n,r={}){e7(t,e,n,r)}function s7(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new t7(n,r,a,e,Po)}function i7(){Co(new Ta(_T,s7,"PUBLIC").setMultipleInstances(!0)),Os(rw,sw,""),Os(rw,sw,"esm2020")}i7();const a7={apiKey:"AIzaSyAaaBO8Nw49Xsyo4QG1ropL0UYWeY2zrlU",authDomain:"meydan-academy.firebaseapp.com",projectId:"meydan-academy",storageBucket:"meydan-academy.firebasestorage.app",messagingSenderId:"267697346186",appId:"1:267697346186:web:d53b7d91fe0fabf8d37f73"},u1=rE(a7),Ul=xj(u1),ye=yD(u1);n7(u1);const wT=N.createContext({}),Cn=()=>{const t=N.useContext(wT);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},o7=({children:t})=>{const[e,n]=N.useState(null),[r,a]=N.useState(null),[l,c]=N.useState(!0),h=async(R,j=!0)=>{if(R)try{await Ar(Me(ye,"users",R),{isOnline:j,lastSeen:bt()},{merge:!0})}catch(T){console.error("Presence update failed:",T)}};N.useEffect(()=>{let R=null;const j=l8(Ul,async T=>{R&&(R(),R=null),n(T),T?(R=nr(Me(ye,"users",T.uid),H=>{H.exists()&&a({id:H.id,...H.data()})},H=>console.error("[AuthContext] Profile listener error:",H)),h(T.uid).catch(()=>{}),c(!1)):(a(null),c(!1))});return()=>{j(),R&&R()}},[]);const k={currentUser:e,userProfile:r,register:async(R,j,T)=>{const H=await n8(Ul,R,j);try{await $_(H.user)}catch(q){console.error("Error sending verification email:",q)}return await Ar(Me(ye,"users",H.user.uid),{displayName:T,email:R,role:"member",createdAt:bt(),isOnline:!0,lastSeen:bt()}),H},login:async(R,j)=>{const T=await r8(Ul,R,j);return await h(T.user.uid,!0),T},logout:async()=>{if(e)try{await h(e.uid,!1)}catch{console.log("[AuthContext] Final presence update skipped or failed during logout")}return c8(Ul)},resetPassword:R=>IE(Ul,R),resendVerification:()=>{if(e)return $_(e)}};return u.jsx(wT.Provider,{value:k,children:!l&&t})};let O0=null;const l7=()=>(O0||(O0=new(window.AudioContext||window.webkitAudioContext)),O0),Iv=()=>{try{const t=l7(),e=t.currentTime,n=t.createOscillator(),r=t.createGain();n.connect(r),r.connect(t.destination),n.frequency.value=880,n.type="sine",r.gain.setValueAtTime(0,e),r.gain.linearRampToValueAtTime(.2,e+.01),r.gain.linearRampToValueAtTime(0,e+.1),n.start(e),n.stop(e+.1);const a=t.createOscillator(),l=t.createGain();a.connect(l),l.connect(t.destination),a.frequency.value=660,a.type="sine",l.gain.setValueAtTime(0,e+.08),l.gain.linearRampToValueAtTime(.2,e+.09),l.gain.linearRampToValueAtTime(0,e+.25),a.start(e+.08),a.stop(e+.25)}catch(t){console.error("Error playing notification sound:",t)}},c7=(t,e)=>!t||!e?!1:/@everyone\b/i.test(t)?!0:new RegExp(`@${e}\\b`,"i").test(t),ST=N.createContext(),La=()=>{const t=N.useContext(ST);if(!t)throw new Error("useData must be used within DataProvider");return t},u7=({children:t})=>{const{currentUser:e}=Cn(),[n,r]=N.useState([]),[a,l]=N.useState([]),[c,h]=N.useState(null),[m,g]=N.useState([]),[y,b]=N.useState(null),[_,k]=N.useState({}),[R,j]=N.useState([]),T=N.useRef({}),H=N.useRef(!0);N.useEffect(()=>{if(r([]),!c)return;const B=nr(dt(ye,"servers",c,"members"),async E=>{const A=[],D=[],O=new Map;if(E.docChanges().forEach(L=>{const P=L.doc.data();L.type==="added"&&(A.push(P.userId),O.set(P.userId,P.role)),L.type==="removed"&&D.push(P.userId),L.type==="modified"&&O.set(P.userId,P.role)}),n.length===0&&A.length>0){const L=new Map;E.docs.forEach(ce=>{L.set(ce.data().userId,ce.data().role||"member")});const P=Array.from(L.keys()),pe=[];for(let ce=0;ce<P.length;ce+=10){const Y=P.slice(ce,ce+10),Z=is(dt(ye,"users"),vo("__name__","in",Y));(await Ro(Z)).forEach(Te=>{pe.push({id:Te.id,...Te.data(),serverRole:L.get(Te.id)})})}r(pe);return}if(A.length>0&&n.length>0){const L=[];for(let P=0;P<A.length;P+=10){const pe=A.slice(P,P+10),ce=is(dt(ye,"users"),vo("__name__","in",pe));(await Ro(ce)).forEach(Z=>{L.push({id:Z.id,...Z.data(),serverRole:O.get(Z.id)})})}r(P=>[...P,...L])}D.length>0&&r(L=>L.filter(P=>!D.includes(P.id))),E.docChanges().some(L=>L.type==="modified")&&r(L=>L.map(P=>O.has(P.id)?{...P,serverRole:O.get(P.id)}:P))}),$=is(dt(ye,"users"),vo("servers","array-contains",c),vo("isOnline","==",!0)),w=nr($,E=>{r(A=>{const D=new Map;return E.forEach(O=>{const L=O.data();D.set(O.id,{presence:L.presence,isOnline:L.isOnline,status:L.status,lastSeen:L.lastSeen,displayName:L.displayName,photoUrl:L.photoUrl||L.photoURL,bio:L.bio,role:L.role})}),A.map(O=>{const L=D.get(O.id);return L?{...O,...L}:{...O,isOnline:!1,presence:"offline",status:null}})})});return()=>{B(),w()}},[c]);const[q,I]=N.useState([]);N.useEffect(()=>{if(!e){l([]),h(null),I([]);return}return nr(Me(ye,"users",e.uid),$=>{if(!$.exists())return;const w=$.data(),E=w?.servers||[],A=w?.unreadMentions||{};Object.keys(A).forEach(D=>{const O=T.current[D]||0;(A[D]?.count||0)>O&&D!==c&&Iv()}),T.current=Object.fromEntries(Object.entries(A).map(([D,O])=>[D,O.count])),k(A),I(D=>JSON.stringify(D)!==JSON.stringify(E)?E:D),h(D=>{const O=w?.currentServer;return D?D==="home"||E.includes(D)?D:E.length>0?E[0]:"home":O&&(O==="home"||E.includes(O))?O:E.length>0?E[0]:"home"})})},[e]),N.useEffect(()=>{if(l($=>$.filter(w=>q.includes(w.id))),q.length===0){l([]);return}const B=[];for(let $=0;$<q.length;$+=10){const w=q.slice($,$+10),E=is(dt(ye,"servers"),vo("__name__","in",w)),A=nr(E,D=>{const O=[];D.forEach(L=>{O.push({id:L.id,...L.data()})}),l(L=>[...L.filter(ce=>!w.includes(ce.id)),...O].sort((ce,Y)=>q.indexOf(ce.id)-q.indexOf(Y.id)))});B.push(A)}return()=>{B.forEach($=>$())}},[q]),N.useEffect(()=>{if(!e){j([]);return}H.current=!0;const B=is(dt(ye,"dms"),vo("participants","array-contains",e.uid)),$=nr(B,w=>{const E=[];w.forEach(D=>{E.push({id:D.id,...D.data()})}),E.sort((D,O)=>{const L=D.updatedAt?.toMillis()||0;return(O.updatedAt?.toMillis()||0)-L});const A=E.filter(D=>!D.hiddenFor||!D.hiddenFor.includes(e.uid));j(A),H.current||w.docChanges().forEach(D=>{if(D.type==="modified"||D.type==="added"){const O=D.doc.data();if(O.lastMessage&&O.lastMessage.userId!==e.uid){const L=Date.now(),P=O.lastMessage.timestamp?.toMillis()||0;L-P<3e4&&Iv()}}}),H.current=!1});return()=>$()},[e]),N.useEffect(()=>{if(!c){g([]),b(null);return}const B=a.find(w=>w.id===c);b(B||null);const $=nr(dt(ye,"servers",c,"channels"),w=>{const E=[];w.forEach(A=>{E.push({id:A.id,...A.data()})}),g(E.sort((A,D)=>A.position-D.position))});return()=>{$()}},[c,a]);const z={users:n,servers:a,currentServer:c,setCurrentServer:h,channels:m,server:y,dms:R,unreadMentions:_};return u.jsx(ST.Provider,{value:z,children:t})};var ET={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},iw=me.createContext&&me.createContext(ET),d7=["attr","size","title"];function h7(t,e){if(t==null)return{};var n=f7(t,e),r,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(a=0;a<l.length;a++)r=l[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function f7(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function pm(){return pm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pm.apply(this,arguments)}function aw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function gm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aw(Object(n),!0).forEach(function(r){m7(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aw(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function m7(t,e,n){return e=p7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p7(t){var e=g7(t,"string");return typeof e=="symbol"?e:e+""}function g7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function CT(t){return t&&t.map((e,n)=>me.createElement(e.tag,gm({key:n},e.attr),CT(e.child)))}function je(t){return e=>me.createElement(v7,pm({attr:gm({},t.attr)},e),CT(t.child))}function v7(t){var e=n=>{var{attr:r,size:a,title:l}=t,c=h7(t,d7),h=a||n.size||"1em",m;return n.className&&(m=n.className),t.className&&(m=(m?m+" ":"")+t.className),me.createElement("svg",pm({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,c,{className:m,style:gm(gm({color:t.color||n.color},n.style),t.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),l&&me.createElement("title",null,l),t.children)};return iw!==void 0?me.createElement(iw.Consumer,null,n=>e(n)):e(ET)}function TT(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6z"},child:[]},{tag:"path",attr:{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12zm0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17z"},child:[]}]})(t)}function kT(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m17.6 9.48 1.84-3.18c.16-.31.04-.69-.26-.85a.637.637 0 0 0-.83.22l-1.88 3.24a11.463 11.463 0 0 0-8.94 0L5.65 5.67a.643.643 0 0 0-.87-.2c-.28.18-.37.54-.22.83L6.4 9.48A10.78 10.78 0 0 0 1 18h22a10.78 10.78 0 0 0-5.4-8.52zM7 15.25a1.25 1.25 0 1 1 0-2.5 1.25 1.25 0 0 1 0 2.5zm10 0a1.25 1.25 0 1 1 0-2.5 1.25 1.25 0 0 1 0 2.5z"},child:[]}]})(t)}function y7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"},child:[]}]})(t)}function b7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"},child:[]}]})(t)}function Ei(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(t)}function x7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10.09 15.59 11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5a2 2 0 0 0-2 2v4h2V5h14v14H5v-4H3v4a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"},child:[]}]})(t)}function _7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 3a9 9 0 0 0-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42A8.954 8.954 0 0 0 13 21a9 9 0 0 0 0-18zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"},child:[]}]})(t)}function d1(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"},child:[]}]})(t)}function w7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"},child:[]}]})(t)}function S7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"},child:[]}]})(t)}function h1(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 19H5V5h7V3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"},child:[]}]})(t)}function Io(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9.19 6.35c-2.04 2.29-3.44 5.58-3.57 5.89L2 10.69l4.05-4.05c.47-.47 1.15-.68 1.81-.55l1.33.26zM11.17 17s3.74-1.55 5.89-3.7c5.4-5.4 4.5-9.62 4.21-10.57-.95-.3-5.17-1.19-10.57 4.21C8.55 9.09 7 12.83 7 12.83L11.17 17zm6.48-2.19c-2.29 2.04-5.58 3.44-5.89 3.57L13.31 22l4.05-4.05c.47-.47.68-1.15.55-1.81l-.26-1.33zM9 18c0 .83-.34 1.58-.88 2.12C6.94 21.3 2 22 2 22s.7-4.94 1.88-6.12A2.996 2.996 0 0 1 9 18zm4-9c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2z"},child:[]}]})(t)}function f1(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"},child:[]}]})(t)}function rp(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(t)}function E7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m23 12-2.44-2.79.34-3.69-3.61-.82-1.89-3.2L12 2.96 8.6 1.5 6.71 4.69 3.1 5.5l.34 3.7L1 12l2.44 2.79-.34 3.7 3.61.82L8.6 22.5l3.4-1.47 3.4 1.46 1.89-3.19 3.61-.82-.34-3.69L23 12zm-12.91 4.72-3.8-3.81 1.48-1.48 2.32 2.33 5.85-5.87 1.48 1.48-7.33 7.35z"},child:[]}]})(t)}function C7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"},child:[]}]})(t)}function T7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"},child:[]}]})(t)}function Dv(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28zm-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18l5.98 5.99zM4.27 3 3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73 4.27 3z"},child:[]}]})(t)}function Mv(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"},child:[]}]})(t)}function k7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM9.5 16.5v-9l7 4.5-7 4.5z"},child:[]}]})(t)}function N7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 6h12v12H6z"},child:[]}]})(t)}function Pv(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m21 6.5-4 4V7c0-.55-.45-1-1-1H9.82L21 17.18V6.5zM3.27 2 2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.54-.18L19.73 21 21 19.73 3.27 2z"},child:[]}]})(t)}function nd(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"},child:[]}]})(t)}function A7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 9v6h4l5 5V4l-5 5H7z"},child:[]}]})(t)}function ow(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16.5 12A4.5 4.5 0 0 0 14 7.97v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51A8.796 8.796 0 0 0 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06a8.99 8.99 0 0 0 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4 9.91 6.09 12 8.18V4z"},child:[]}]})(t)}function lw(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3A4.5 4.5 0 0 0 14 7.97v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"},child:[]}]})(t)}function L0(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.7.28-.28 0-.53-.11-.71-.29L.29 13.08a.956.956 0 0 1-.29-.7c0-.28.11-.53.29-.71C3.34 8.78 7.46 7 12 7s8.66 1.78 11.71 4.67c.18.18.29.43.29.71 0 .28-.11.53-.29.71l-2.48 2.48c-.18.18-.43.29-.71.29-.27 0-.52-.11-.7-.28a11.27 11.27 0 0 0-2.67-1.85.996.996 0 0 1-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z"},child:[]}]})(t)}function R7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20.01 15.38c-1.23 0-2.42-.2-3.53-.56a.977.977 0 0 0-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"},child:[]}]})(t)}function j7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"},child:[]}]})(t)}function I7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"},child:[]}]})(t)}function vm(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M20 18c1.1 0 1.99-.9 1.99-2L22 6a2 2 0 0 0-2-2H4c-1.11 0-2 .89-2 2v10a2 2 0 0 0 2 2H0v2h24v-2h-4zm-7-3.53v-2.19c-2.78 0-4.61.85-6 2.72.56-2.67 2.11-5.33 6-5.87V7l4 3.73-4 3.74z"},child:[]}]})(t)}function D7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m21.22 18.02 2 2H24v-2h-2.78zm.77-2 .01-10a2 2 0 0 0-2-2H7.22l5.23 5.23c.18-.04.36-.07.55-.1V7.02l4 3.73-1.58 1.47 5.54 5.54c.61-.33 1.03-.99 1.03-1.74zM2.39 1.73 1.11 3l1.54 1.54c-.4.36-.65.89-.65 1.48v10a2 2 0 0 0 2 2H0v2h18.13l2.71 2.71 1.27-1.27L2.39 1.73zM7 15.02c.31-1.48.92-2.95 2.07-4.06l1.59 1.59c-1.54.38-2.7 1.18-3.66 2.47z"},child:[]}]})(t)}function cw(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"},child:[]}]})(t)}function wo(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(t)}function NT(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(t)}function Yl(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M16 9V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3z"},child:[]}]})(t)}function M7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"},child:[]}]})(t)}function uw(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"},child:[]}]})(t)}function AT(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 10V8h-4V4h-2v4h-4V4H8v4H4v2h4v4H4v2h4v4h2v-4h4v4h2v-4h4v-2h-4v-4h4zm-6 4h-4v-4h4v4z"},child:[]}]})(t)}function ym(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 18h2V6H7v12zm4 4h2V2h-2v20zm-8-8h2v-4H3v4zm12 4h2V6h-2v12zm4-8v4h2v-4h-2z"},child:[]}]})(t)}function P7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 9H4v2h16V9zM4 15h16v-2H4v2z"},child:[]}]})(t)}function O7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"},child:[]}]})(t)}function Ov(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zm0-10h4v6h6v-6h4l-7-7-7 7z"},child:[]}]})(t)}function L7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 3H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h6v2H8v2h8v-2h-2v-2h6c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"},child:[]}]})(t)}function V7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"},child:[]}]})(t)}function U7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"},child:[]}]})(t)}function z7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 7v2.99s-1.99.01-2 0V7h-3s.01-1.99 0-2h3V2h2v3h3v2h-3zm-3 4V8h-3V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8h-3zM5 19l3-4 2 3 3-4 4 5H5z"},child:[]}]})(t)}function B7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m19 9 1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25L19 9zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12l-5.5-2.5zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25L19 15z"},child:[]}]})(t)}function Kl(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},child:[]}]})(t)}function bm(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"},child:[]}]})(t)}function F7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"},child:[]}]})(t)}function H7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10a2.5 2.5 0 0 0 2.5-2.5c0-.61-.23-1.2-.64-1.67a.528.528 0 0 1-.13-.33c0-.28.22-.5.5-.5H16c3.31 0 6-2.69 6-6 0-4.96-4.49-9-10-9zm5.5 11c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm-3-4c-.83 0-1.5-.67-1.5-1.5S13.67 6 14.5 6s1.5.67 1.5 1.5S15.33 9 14.5 9zM5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S7.33 13 6.5 13 5 12.33 5 11.5zm6-4c0 .83-.67 1.5-1.5 1.5S8 8.33 8 7.5 8.67 6 9.5 6s1.5.67 1.5 1.5z"},child:[]}]})(t)}function $7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 11h-1V3c0-1.1-.9-2-2-2h-2c-1.1 0-2 .9-2 2v8H8c-2.76 0-5 2.24-5 5v7h18v-7c0-2.76-2.24-5-5-5zm3 10h-2v-3c0-.55-.45-1-1-1s-1 .45-1 1v3h-2v-3c0-.55-.45-1-1-1s-1 .45-1 1v3H9v-3c0-.55-.45-1-1-1s-1 .45-1 1v3H5v-5c0-1.65 1.35-3 3-3h8c1.65 0 3 1.35 3 3v5z"},child:[]}]})(t)}function q7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.16 3h-.32L9.21 8.25h5.58zM16.46 8.25h5.16L19 3h-5.16zM21.38 9.75h-8.63V20.1zM11.25 20.1V9.75H2.62zM7.54 8.25 10.16 3H5L2.38 8.25z"},child:[]}]})(t)}function Do(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"},child:[]}]})(t)}function On(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(t)}function G7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"},child:[]}]})(t)}function Y7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"},child:[]}]})(t)}function dw(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"},child:[]}]})(t)}function K7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(t)}function Q7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"},child:[]}]})(t)}function X7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 12.22C21 6.73 16.74 3 12 3c-4.69 0-9 3.65-9 9.28-.6.34-1 .98-1 1.72v2c0 1.1.9 2 2 2h1v-6.1c0-3.87 3.13-7 7-7s7 3.13 7 7V19h-8v2h8c1.1 0 2-.9 2-2v-1.22c.59-.31 1-.92 1-1.64v-2.3c0-.7-.41-1.31-1-1.62z"},child:[]},{tag:"circle",attr:{cx:"9",cy:"13",r:"1"},child:[]},{tag:"circle",attr:{cx:"15",cy:"13",r:"1"},child:[]},{tag:"path",attr:{d:"M18 11.03A6.04 6.04 0 0 0 12.05 6c-3.03 0-6.29 2.51-6.03 6.45a8.075 8.075 0 0 0 4.86-5.89c1.31 2.63 4 4.44 7.12 4.47z"},child:[]}]})(t)}function W7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 1.01 7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14zm-1-6h-3V8h-2v5H8l4 4 4-4z"},child:[]}]})(t)}function J7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 11V3H5c-1.1 0-2 .9-2 2v6h8zm2 0h8V5c0-1.1-.9-2-2-2h-6v8zm-2 2H3v6c0 1.1.9 2 2 2h6v-8zm2 0v8h6c1.1 0 2-.9 2-2v-6h-8z"},child:[]}]})(t)}function hw(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 9V7h-2V2.84A9.929 9.929 0 0 0 11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12c0-1.05-.17-2.05-.47-3H18zm-2.5-1c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5.67-1.5 1.5-1.5zm-7 0c.83 0 1.5.67 1.5 1.5S9.33 11 8.5 11 7 10.33 7 9.5 7.67 8 8.5 8zm3.5 9.5c-2.33 0-4.31-1.46-5.11-3.5h10.22c-.8 2.04-2.78 3.5-5.11 3.5zM22 3h2v2h-2v2h-2V5h-2V3h2V1h2v2z"},child:[]}]})(t)}function RT(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM8.5 8c.83 0 1.5.67 1.5 1.5S9.33 11 8.5 11 7 10.33 7 9.5 7.67 8 8.5 8zM12 18c-2.28 0-4.22-1.66-5-4h10c-.78 2.34-2.72 4-5 4zm3.5-7c-.83 0-1.5-.67-1.5-1.5S14.67 8 15.5 8s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"},child:[]}]})(t)}function Z7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 22c1.1 0 2-.9 2-2h-4a2 2 0 0 0 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"},child:[]}]})(t)}function m1(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"},child:[]}]})(t)}function eM(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"},child:[]}]})(t)}function tM(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"},child:[]}]})(t)}function p1(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"},child:[]}]})(t)}function nM(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"},child:[]}]})(t)}const jT=N.createContext(),Gr=()=>{const t=N.useContext(jT);if(!t)throw new Error("useToast must be used within ToastProvider");return t},rM=({children:t})=>{const[e,n]=N.useState([]),r=N.useCallback((g,y="info")=>{const b=Date.now();n(_=>[..._,{id:b,message:g,type:y}]),setTimeout(()=>{n(_=>_.filter(k=>k.id!==b))},4e3)},[]),a=N.useCallback(g=>{n(y=>y.filter(b=>b.id!==g))},[]),l=N.useCallback(g=>r(g,"success"),[r]),c=N.useCallback(g=>r(g,"error"),[r]),h=N.useCallback(g=>r(g,"info"),[r]),m=N.useCallback(g=>r(g,"warning"),[r]);return u.jsxs(jT.Provider,{value:{success:l,error:c,info:h,warning:m},children:[t,u.jsx(sM,{toasts:e,removeToast:a})]})},sM=({toasts:t,removeToast:e})=>u.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(n=>u.jsx(iM,{toast:n,onClose:()=>e(n.id)},n.id))}),iM=({toast:t,onClose:e})=>{const n={success:u.jsx(y7,{size:20}),error:u.jsx(C7,{size:20}),warning:u.jsx(T7,{size:20}),info:u.jsx(d1,{size:20})},r={success:"bg-green-600 border-green-500",error:"bg-red-600 border-red-500",warning:"bg-yellow-600 border-yellow-500",info:"bg-blue-600 border-blue-500"};return u.jsxs("div",{className:`${r[t.type]} border-l-4 text-white px-4 py-3 rounded-lg shadow-lg 
                  flex items-center gap-3 min-w-[300px] max-w-md animate-slide-in`,children:[u.jsx("div",{className:"flex-shrink-0",children:n[t.type]}),u.jsx("div",{className:"flex-1 text-sm font-medium",children:t.message}),u.jsx("button",{onClick:e,className:"flex-shrink-0 hover:bg-white/20 rounded p-1 transition-colors",children:u.jsx(On,{size:18})})]})};function IT(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(n=IT(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function aM(){for(var t,e,n=0,r="",a=arguments.length;n<a;n++)(t=arguments[n])&&(e=IT(t))&&(r&&(r+=" "),r+=e);return r}const oM=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},lM=(t,e)=>({classGroupId:t,validator:e}),DT=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),xm="-",fw=[],cM="arbitrary..",uM=t=>{const e=hM(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:c=>{if(c.startsWith("[")&&c.endsWith("]"))return dM(c);const h=c.split(xm),m=h[0]===""&&h.length>1?1:0;return MT(h,m,e)},getConflictingClassGroupIds:(c,h)=>{if(h){const m=r[c],g=n[c];return m?g?oM(g,m):m:g||fw}return n[c]||fw}}},MT=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const a=t[e],l=n.nextPart.get(a);if(l){const g=MT(t,e+1,l);if(g)return g}const c=n.validators;if(c===null)return;const h=e===0?t.join(xm):t.slice(e).join(xm),m=c.length;for(let g=0;g<m;g++){const y=c[g];if(y.validator(h))return y.classGroupId}},dM=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?cM+r:void 0})(),hM=t=>{const{theme:e,classGroups:n}=t;return fM(n,e)},fM=(t,e)=>{const n=DT();for(const r in t){const a=t[r];g1(a,n,r,e)}return n},g1=(t,e,n,r)=>{const a=t.length;for(let l=0;l<a;l++){const c=t[l];mM(c,e,n,r)}},mM=(t,e,n,r)=>{if(typeof t=="string"){pM(t,e,n);return}if(typeof t=="function"){gM(t,e,n,r);return}vM(t,e,n,r)},pM=(t,e,n)=>{const r=t===""?e:PT(e,t);r.classGroupId=n},gM=(t,e,n,r)=>{if(yM(t)){g1(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(lM(n,t))},vM=(t,e,n,r)=>{const a=Object.entries(t),l=a.length;for(let c=0;c<l;c++){const[h,m]=a[c];g1(m,PT(e,h),n,r)}},PT=(t,e)=>{let n=t;const r=e.split(xm),a=r.length;for(let l=0;l<a;l++){const c=r[l];let h=n.nextPart.get(c);h||(h=DT(),n.nextPart.set(c,h)),n=h}return n},yM=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,bM=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const a=(l,c)=>{n[l]=c,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(l){let c=n[l];if(c!==void 0)return c;if((c=r[l])!==void 0)return a(l,c),c},set(l,c){l in n?n[l]=c:a(l,c)}}},Lv="!",mw=":",xM=[],pw=(t,e,n,r,a)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:a}),_M=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=a=>{const l=[];let c=0,h=0,m=0,g;const y=a.length;for(let j=0;j<y;j++){const T=a[j];if(c===0&&h===0){if(T===mw){l.push(a.slice(m,j)),m=j+1;continue}if(T==="/"){g=j;continue}}T==="["?c++:T==="]"?c--:T==="("?h++:T===")"&&h--}const b=l.length===0?a:a.slice(m);let _=b,k=!1;b.endsWith(Lv)?(_=b.slice(0,-1),k=!0):b.startsWith(Lv)&&(_=b.slice(1),k=!0);const R=g&&g>m?g-m:void 0;return pw(l,k,_,R)};if(e){const a=e+mw,l=r;r=c=>c.startsWith(a)?l(c.slice(a.length)):pw(xM,!1,c,void 0,!0)}if(n){const a=r;r=l=>n({className:l,parseClassName:a})}return r},wM=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let a=[];for(let l=0;l<n.length;l++){const c=n[l],h=c[0]==="[",m=e.has(c);h||m?(a.length>0&&(a.sort(),r.push(...a),a=[]),r.push(c)):a.push(c)}return a.length>0&&(a.sort(),r.push(...a)),r}},SM=t=>({cache:bM(t.cacheSize),parseClassName:_M(t),sortModifiers:wM(t),...uM(t)}),EM=/\s+/,CM=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:l}=e,c=[],h=t.trim().split(EM);let m="";for(let g=h.length-1;g>=0;g-=1){const y=h[g],{isExternal:b,modifiers:_,hasImportantModifier:k,baseClassName:R,maybePostfixModifierPosition:j}=n(y);if(b){m=y+(m.length>0?" "+m:m);continue}let T=!!j,H=r(T?R.substring(0,j):R);if(!H){if(!T){m=y+(m.length>0?" "+m:m);continue}if(H=r(R),!H){m=y+(m.length>0?" "+m:m);continue}T=!1}const q=_.length===0?"":_.length===1?_[0]:l(_).join(":"),I=k?q+Lv:q,z=I+H;if(c.indexOf(z)>-1)continue;c.push(z);const B=a(H,T);for(let $=0;$<B.length;++$){const w=B[$];c.push(I+w)}m=y+(m.length>0?" "+m:m)}return m},TM=(...t)=>{let e=0,n,r,a="";for(;e<t.length;)(n=t[e++])&&(r=OT(n))&&(a&&(a+=" "),a+=r);return a},OT=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=OT(t[r]))&&(n&&(n+=" "),n+=e);return n},kM=(t,...e)=>{let n,r,a,l;const c=m=>{const g=e.reduce((y,b)=>b(y),t());return n=SM(g),r=n.cache.get,a=n.cache.set,l=h,h(m)},h=m=>{const g=r(m);if(g)return g;const y=CM(m,n);return a(m,y),y};return l=c,(...m)=>l(TM(...m))},NM=[],Nn=t=>{const e=n=>n[t]||NM;return e.isThemeGetter=!0,e},LT=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,VT=/^\((?:(\w[\w-]*):)?(.+)\)$/i,AM=/^\d+\/\d+$/,RM=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,jM=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,IM=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,DM=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,MM=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Il=t=>AM.test(t),ft=t=>!!t&&!Number.isNaN(Number(t)),ua=t=>!!t&&Number.isInteger(Number(t)),V0=t=>t.endsWith("%")&&ft(t.slice(0,-1)),gi=t=>RM.test(t),PM=()=>!0,OM=t=>jM.test(t)&&!IM.test(t),UT=()=>!1,LM=t=>DM.test(t),VM=t=>MM.test(t),UM=t=>!He(t)&&!$e(t),zM=t=>_c(t,FT,UT),He=t=>LT.test(t),fo=t=>_c(t,HT,OM),U0=t=>_c(t,qM,ft),gw=t=>_c(t,zT,UT),BM=t=>_c(t,BT,VM),uf=t=>_c(t,$T,LM),$e=t=>VT.test(t),Tu=t=>wc(t,HT),FM=t=>wc(t,GM),vw=t=>wc(t,zT),HM=t=>wc(t,FT),$M=t=>wc(t,BT),df=t=>wc(t,$T,!0),_c=(t,e,n)=>{const r=LT.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},wc=(t,e,n=!1)=>{const r=VT.exec(t);return r?r[1]?e(r[1]):n:!1},zT=t=>t==="position"||t==="percentage",BT=t=>t==="image"||t==="url",FT=t=>t==="length"||t==="size"||t==="bg-size",HT=t=>t==="length",qM=t=>t==="number",GM=t=>t==="family-name",$T=t=>t==="shadow",YM=()=>{const t=Nn("color"),e=Nn("font"),n=Nn("text"),r=Nn("font-weight"),a=Nn("tracking"),l=Nn("leading"),c=Nn("breakpoint"),h=Nn("container"),m=Nn("spacing"),g=Nn("radius"),y=Nn("shadow"),b=Nn("inset-shadow"),_=Nn("text-shadow"),k=Nn("drop-shadow"),R=Nn("blur"),j=Nn("perspective"),T=Nn("aspect"),H=Nn("ease"),q=Nn("animate"),I=()=>["auto","avoid","all","avoid-page","page","left","right","column"],z=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],B=()=>[...z(),$e,He],$=()=>["auto","hidden","clip","visible","scroll"],w=()=>["auto","contain","none"],E=()=>[$e,He,m],A=()=>[Il,"full","auto",...E()],D=()=>[ua,"none","subgrid",$e,He],O=()=>["auto",{span:["full",ua,$e,He]},ua,$e,He],L=()=>[ua,"auto",$e,He],P=()=>["auto","min","max","fr",$e,He],pe=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ce=()=>["start","end","center","stretch","center-safe","end-safe"],Y=()=>["auto",...E()],Z=()=>[Il,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...E()],J=()=>[t,$e,He],Te=()=>[...z(),vw,gw,{position:[$e,He]}],Ae=()=>["no-repeat",{repeat:["","x","y","space","round"]}],F=()=>["auto","cover","contain",HM,zM,{size:[$e,He]}],W=()=>[V0,Tu,fo],ae=()=>["","none","full",g,$e,He],ge=()=>["",ft,Tu,fo],Re=()=>["solid","dashed","dotted","double"],_e=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ne=()=>[ft,V0,vw,gw],Ke=()=>["","none",R,$e,He],Ge=()=>["none",ft,$e,He],he=()=>["none",ft,$e,He],Ce=()=>[ft,$e,He],Ve=()=>[Il,"full",...E()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[gi],breakpoint:[gi],color:[PM],container:[gi],"drop-shadow":[gi],ease:["in","out","in-out"],font:[UM],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[gi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[gi],shadow:[gi],spacing:["px",ft],text:[gi],"text-shadow":[gi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Il,He,$e,T]}],container:["container"],columns:[{columns:[ft,He,$e,h]}],"break-after":[{"break-after":I()}],"break-before":[{"break-before":I()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:B()}],overflow:[{overflow:$()}],"overflow-x":[{"overflow-x":$()}],"overflow-y":[{"overflow-y":$()}],overscroll:[{overscroll:w()}],"overscroll-x":[{"overscroll-x":w()}],"overscroll-y":[{"overscroll-y":w()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:A()}],"inset-x":[{"inset-x":A()}],"inset-y":[{"inset-y":A()}],start:[{start:A()}],end:[{end:A()}],top:[{top:A()}],right:[{right:A()}],bottom:[{bottom:A()}],left:[{left:A()}],visibility:["visible","invisible","collapse"],z:[{z:[ua,"auto",$e,He]}],basis:[{basis:[Il,"full","auto",h,...E()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ft,Il,"auto","initial","none",He]}],grow:[{grow:["",ft,$e,He]}],shrink:[{shrink:["",ft,$e,He]}],order:[{order:[ua,"first","last","none",$e,He]}],"grid-cols":[{"grid-cols":D()}],"col-start-end":[{col:O()}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":D()}],"row-start-end":[{row:O()}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":P()}],"auto-rows":[{"auto-rows":P()}],gap:[{gap:E()}],"gap-x":[{"gap-x":E()}],"gap-y":[{"gap-y":E()}],"justify-content":[{justify:[...pe(),"normal"]}],"justify-items":[{"justify-items":[...ce(),"normal"]}],"justify-self":[{"justify-self":["auto",...ce()]}],"align-content":[{content:["normal",...pe()]}],"align-items":[{items:[...ce(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ce(),{baseline:["","last"]}]}],"place-content":[{"place-content":pe()}],"place-items":[{"place-items":[...ce(),"baseline"]}],"place-self":[{"place-self":["auto",...ce()]}],p:[{p:E()}],px:[{px:E()}],py:[{py:E()}],ps:[{ps:E()}],pe:[{pe:E()}],pt:[{pt:E()}],pr:[{pr:E()}],pb:[{pb:E()}],pl:[{pl:E()}],m:[{m:Y()}],mx:[{mx:Y()}],my:[{my:Y()}],ms:[{ms:Y()}],me:[{me:Y()}],mt:[{mt:Y()}],mr:[{mr:Y()}],mb:[{mb:Y()}],ml:[{ml:Y()}],"space-x":[{"space-x":E()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":E()}],"space-y-reverse":["space-y-reverse"],size:[{size:Z()}],w:[{w:[h,"screen",...Z()]}],"min-w":[{"min-w":[h,"screen","none",...Z()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[c]},...Z()]}],h:[{h:["screen","lh",...Z()]}],"min-h":[{"min-h":["screen","lh","none",...Z()]}],"max-h":[{"max-h":["screen","lh",...Z()]}],"font-size":[{text:["base",n,Tu,fo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,$e,U0]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",V0,He]}],"font-family":[{font:[FM,He,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,$e,He]}],"line-clamp":[{"line-clamp":[ft,"none",$e,U0]}],leading:[{leading:[l,...E()]}],"list-image":[{"list-image":["none",$e,He]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",$e,He]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:J()}],"text-color":[{text:J()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Re(),"wavy"]}],"text-decoration-thickness":[{decoration:[ft,"from-font","auto",$e,fo]}],"text-decoration-color":[{decoration:J()}],"underline-offset":[{"underline-offset":[ft,"auto",$e,He]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",$e,He]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",$e,He]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Te()}],"bg-repeat":[{bg:Ae()}],"bg-size":[{bg:F()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ua,$e,He],radial:["",$e,He],conic:[ua,$e,He]},$M,BM]}],"bg-color":[{bg:J()}],"gradient-from-pos":[{from:W()}],"gradient-via-pos":[{via:W()}],"gradient-to-pos":[{to:W()}],"gradient-from":[{from:J()}],"gradient-via":[{via:J()}],"gradient-to":[{to:J()}],rounded:[{rounded:ae()}],"rounded-s":[{"rounded-s":ae()}],"rounded-e":[{"rounded-e":ae()}],"rounded-t":[{"rounded-t":ae()}],"rounded-r":[{"rounded-r":ae()}],"rounded-b":[{"rounded-b":ae()}],"rounded-l":[{"rounded-l":ae()}],"rounded-ss":[{"rounded-ss":ae()}],"rounded-se":[{"rounded-se":ae()}],"rounded-ee":[{"rounded-ee":ae()}],"rounded-es":[{"rounded-es":ae()}],"rounded-tl":[{"rounded-tl":ae()}],"rounded-tr":[{"rounded-tr":ae()}],"rounded-br":[{"rounded-br":ae()}],"rounded-bl":[{"rounded-bl":ae()}],"border-w":[{border:ge()}],"border-w-x":[{"border-x":ge()}],"border-w-y":[{"border-y":ge()}],"border-w-s":[{"border-s":ge()}],"border-w-e":[{"border-e":ge()}],"border-w-t":[{"border-t":ge()}],"border-w-r":[{"border-r":ge()}],"border-w-b":[{"border-b":ge()}],"border-w-l":[{"border-l":ge()}],"divide-x":[{"divide-x":ge()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ge()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Re(),"hidden","none"]}],"divide-style":[{divide:[...Re(),"hidden","none"]}],"border-color":[{border:J()}],"border-color-x":[{"border-x":J()}],"border-color-y":[{"border-y":J()}],"border-color-s":[{"border-s":J()}],"border-color-e":[{"border-e":J()}],"border-color-t":[{"border-t":J()}],"border-color-r":[{"border-r":J()}],"border-color-b":[{"border-b":J()}],"border-color-l":[{"border-l":J()}],"divide-color":[{divide:J()}],"outline-style":[{outline:[...Re(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ft,$e,He]}],"outline-w":[{outline:["",ft,Tu,fo]}],"outline-color":[{outline:J()}],shadow:[{shadow:["","none",y,df,uf]}],"shadow-color":[{shadow:J()}],"inset-shadow":[{"inset-shadow":["none",b,df,uf]}],"inset-shadow-color":[{"inset-shadow":J()}],"ring-w":[{ring:ge()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:J()}],"ring-offset-w":[{"ring-offset":[ft,fo]}],"ring-offset-color":[{"ring-offset":J()}],"inset-ring-w":[{"inset-ring":ge()}],"inset-ring-color":[{"inset-ring":J()}],"text-shadow":[{"text-shadow":["none",_,df,uf]}],"text-shadow-color":[{"text-shadow":J()}],opacity:[{opacity:[ft,$e,He]}],"mix-blend":[{"mix-blend":[..._e(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":_e()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ft]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ne()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ne()}],"mask-image-linear-from-color":[{"mask-linear-from":J()}],"mask-image-linear-to-color":[{"mask-linear-to":J()}],"mask-image-t-from-pos":[{"mask-t-from":Ne()}],"mask-image-t-to-pos":[{"mask-t-to":Ne()}],"mask-image-t-from-color":[{"mask-t-from":J()}],"mask-image-t-to-color":[{"mask-t-to":J()}],"mask-image-r-from-pos":[{"mask-r-from":Ne()}],"mask-image-r-to-pos":[{"mask-r-to":Ne()}],"mask-image-r-from-color":[{"mask-r-from":J()}],"mask-image-r-to-color":[{"mask-r-to":J()}],"mask-image-b-from-pos":[{"mask-b-from":Ne()}],"mask-image-b-to-pos":[{"mask-b-to":Ne()}],"mask-image-b-from-color":[{"mask-b-from":J()}],"mask-image-b-to-color":[{"mask-b-to":J()}],"mask-image-l-from-pos":[{"mask-l-from":Ne()}],"mask-image-l-to-pos":[{"mask-l-to":Ne()}],"mask-image-l-from-color":[{"mask-l-from":J()}],"mask-image-l-to-color":[{"mask-l-to":J()}],"mask-image-x-from-pos":[{"mask-x-from":Ne()}],"mask-image-x-to-pos":[{"mask-x-to":Ne()}],"mask-image-x-from-color":[{"mask-x-from":J()}],"mask-image-x-to-color":[{"mask-x-to":J()}],"mask-image-y-from-pos":[{"mask-y-from":Ne()}],"mask-image-y-to-pos":[{"mask-y-to":Ne()}],"mask-image-y-from-color":[{"mask-y-from":J()}],"mask-image-y-to-color":[{"mask-y-to":J()}],"mask-image-radial":[{"mask-radial":[$e,He]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ne()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ne()}],"mask-image-radial-from-color":[{"mask-radial-from":J()}],"mask-image-radial-to-color":[{"mask-radial-to":J()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":z()}],"mask-image-conic-pos":[{"mask-conic":[ft]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ne()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ne()}],"mask-image-conic-from-color":[{"mask-conic-from":J()}],"mask-image-conic-to-color":[{"mask-conic-to":J()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Te()}],"mask-repeat":[{mask:Ae()}],"mask-size":[{mask:F()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",$e,He]}],filter:[{filter:["","none",$e,He]}],blur:[{blur:Ke()}],brightness:[{brightness:[ft,$e,He]}],contrast:[{contrast:[ft,$e,He]}],"drop-shadow":[{"drop-shadow":["","none",k,df,uf]}],"drop-shadow-color":[{"drop-shadow":J()}],grayscale:[{grayscale:["",ft,$e,He]}],"hue-rotate":[{"hue-rotate":[ft,$e,He]}],invert:[{invert:["",ft,$e,He]}],saturate:[{saturate:[ft,$e,He]}],sepia:[{sepia:["",ft,$e,He]}],"backdrop-filter":[{"backdrop-filter":["","none",$e,He]}],"backdrop-blur":[{"backdrop-blur":Ke()}],"backdrop-brightness":[{"backdrop-brightness":[ft,$e,He]}],"backdrop-contrast":[{"backdrop-contrast":[ft,$e,He]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ft,$e,He]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ft,$e,He]}],"backdrop-invert":[{"backdrop-invert":["",ft,$e,He]}],"backdrop-opacity":[{"backdrop-opacity":[ft,$e,He]}],"backdrop-saturate":[{"backdrop-saturate":[ft,$e,He]}],"backdrop-sepia":[{"backdrop-sepia":["",ft,$e,He]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":E()}],"border-spacing-x":[{"border-spacing-x":E()}],"border-spacing-y":[{"border-spacing-y":E()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",$e,He]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ft,"initial",$e,He]}],ease:[{ease:["linear","initial",H,$e,He]}],delay:[{delay:[ft,$e,He]}],animate:[{animate:["none",q,$e,He]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[j,$e,He]}],"perspective-origin":[{"perspective-origin":B()}],rotate:[{rotate:Ge()}],"rotate-x":[{"rotate-x":Ge()}],"rotate-y":[{"rotate-y":Ge()}],"rotate-z":[{"rotate-z":Ge()}],scale:[{scale:he()}],"scale-x":[{"scale-x":he()}],"scale-y":[{"scale-y":he()}],"scale-z":[{"scale-z":he()}],"scale-3d":["scale-3d"],skew:[{skew:Ce()}],"skew-x":[{"skew-x":Ce()}],"skew-y":[{"skew-y":Ce()}],transform:[{transform:[$e,He,"","none","gpu","cpu"]}],"transform-origin":[{origin:B()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ve()}],"translate-x":[{"translate-x":Ve()}],"translate-y":[{"translate-y":Ve()}],"translate-z":[{"translate-z":Ve()}],"translate-none":["translate-none"],accent:[{accent:J()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:J()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",$e,He]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",$e,He]}],fill:[{fill:["none",...J()]}],"stroke-w":[{stroke:[ft,Tu,fo,U0]}],stroke:[{stroke:["none",...J()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},KM=kM(YM);function At(...t){return KM(aM(t))}function sp(t){if(!t)return"";const e=t.toDate?t.toDate():new Date(t),r=new Date-e;return r<6e4?"Just now":r<36e5?`${Math.floor(r/6e4)}m ago`:r<864e5?`${Math.floor(r/36e5)}h ago`:r<6048e5?`${Math.floor(r/864e5)}d ago`:e.toLocaleDateString()}function qT(t){switch(t){case"admin":return"bg-admin/20 text-admin border-admin/30";case"moderator":return"bg-moderator/20 text-moderator border-moderator/30";default:return"bg-member/20 text-member border-member/30"}}const un=({label:t,error:e,className:n,containerClassName:r,...a})=>u.jsxs("div",{className:At("flex flex-col gap-1.5",r),children:[t&&u.jsx("label",{className:"text-sm font-medium text-dark-text",children:t}),u.jsx("input",{className:At("bg-dark-input text-dark-text px-4 py-2.5 rounded-md","border border-transparent focus:border-brand-primary","outline-none transition-colors duration-200","placeholder:text-dark-muted",e&&"border-admin",n),...a}),e&&u.jsx("span",{className:"text-sm text-admin",children:e})]}),Ze=({children:t,variant:e="primary",size:n="md",className:r,disabled:a,...l})=>{const c="font-medium rounded-md transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",h={primary:"bg-brand-primary hover:bg-brand-hover text-white",secondary:"bg-dark-input hover:bg-dark-hover text-dark-text",danger:"bg-admin hover:bg-admin/80 text-white",ghost:"hover:bg-dark-hover text-dark-text"},m={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};return u.jsx("button",{className:At(c,h[e],m[n],r),disabled:a,...l,children:t})},QM=({isOpen:t,onClose:e})=>{const[n,r]=N.useState(""),[a,l]=N.useState(!1),[c,h]=N.useState(!1),{success:m,error:g}=Gr(),y=async b=>{b.preventDefault(),l(!0);try{await IE(Ul,n),h(!0),m("Password reset email sent! Check your inbox."),setTimeout(()=>{e(),h(!1),r("")},3e3)}catch(_){console.error("Password reset error:",_),_.code==="auth/user-not-found"?g("No account found with this email address."):_.code==="auth/invalid-email"?g("Invalid email address."):g("Failed to send reset email. Please try again.")}finally{l(!1)}};return t?u.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-dark-sidebar rounded-lg shadow-2xl w-full max-w-md p-6 relative",children:[u.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-dark-muted hover:text-dark-text transition-colors",children:u.jsx(On,{size:24})}),u.jsxs("div",{className:"mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-dark-text mb-2",children:"Reset Password"}),u.jsx("p",{className:"text-dark-muted text-sm",children:"Enter your email address and we'll send you a link to reset your password."})]}),c?u.jsx("div",{className:"bg-green-500/10 border border-green-500/30 text-green-400 px-4 py-3 rounded-md text-sm text-center",children:" Reset email sent successfully! Check your inbox."}):u.jsxs("form",{onSubmit:y,className:"space-y-4",children:[u.jsx(un,{label:"Email Address",type:"email",placeholder:"your@email.com",value:n,onChange:b=>r(b.target.value),required:!0,autoFocus:!0}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx(Ze,{type:"button",variant:"secondary",onClick:e,className:"flex-1",children:"Cancel"}),u.jsx(Ze,{type:"submit",variant:"primary",className:"flex-1",disabled:a||!n,children:a?"Sending...":"Send Reset Link"})]})]})]})}):null},XM=({onSwitchToRegister:t,onSwitchToReset:e})=>{const{login:n}=Cn(),[r,a]=N.useState({email:"",password:""}),[l,c]=N.useState(""),[h,m]=N.useState(!1),[g,y]=N.useState(!1),b=async _=>{_.preventDefault(),c(""),m(!0);try{await n(r.email,r.password)}catch(k){c(k.message||"Failed to login")}finally{m(!1)}};return u.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-dark-bg p-4",children:[u.jsxs("div",{className:"w-full max-w-md bg-dark-sidebar rounded-lg shadow-2xl p-8",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-dark-text mb-2",children:"Welcome Back!"}),u.jsx("p",{className:"text-dark-muted",children:"Login to Lumo"})]}),u.jsxs("form",{onSubmit:b,className:"space-y-4",children:[u.jsx(un,{label:"Email",type:"email",placeholder:"Enter your email",value:r.email,onChange:_=>a({...r,email:_.target.value}),required:!0}),u.jsxs("div",{children:[u.jsx(un,{label:"Password",type:"password",placeholder:"Enter your password",value:r.password,onChange:_=>a({...r,password:_.target.value}),required:!0}),u.jsx("div",{className:"mt-2 text-right",children:u.jsx("button",{type:"button",onClick:()=>y(!0),className:"text-sm text-brand-primary hover:underline",children:"Forgot Password?"})})]}),l&&u.jsx("div",{className:"bg-admin/10 border border-admin/30 text-admin px-4 py-3 rounded-md text-sm",children:l}),u.jsx(Ze,{type:"submit",variant:"primary",className:"w-full",disabled:h,children:h?"Logging in...":"Login"})]}),u.jsx("div",{className:"mt-6 text-center",children:u.jsxs("div",{className:"text-dark-muted text-sm",children:["Don't have an account?"," ",u.jsx("button",{onClick:t,className:"text-brand-primary hover:underline",children:"Register"})]})})]}),u.jsx(QM,{isOpen:g,onClose:()=>y(!1)})]})},WM=({onSwitchToLogin:t})=>{const{register:e}=Cn(),[n,r]=N.useState({displayName:"",email:"",password:"",confirmPassword:""}),[a,l]=N.useState(""),[c,h]=N.useState(""),[m,g]=N.useState(!1),[y,b]=N.useState([]);N.useEffect(()=>{(async()=>{try{const R=dt(ye,"users"),j=await Ro(R),T=[];j.forEach(H=>{const q=H.data().displayName;q&&T.push(q.toLowerCase())}),b(T)}catch(R){console.error("Error loading usernames:",R)}})()},[]),N.useEffect(()=>{const k=n.displayName;if(k){if(k.length<3){h("Username must be at least 3 characters");return}if(!/^[a-zA-Z0-9-_]+$/.test(k)){h("Only letters, numbers, hyphens (-) and underscores (_) allowed");return}const R=k.toLowerCase();y.includes(R)?h("This username is already taken"):h("")}else h("")},[n.displayName,y]);const _=async k=>{if(k.preventDefault(),l(""),c){l(c);return}if(n.password!==n.confirmPassword){l("Passwords do not match");return}if(n.password.length<6){l("Password must be at least 6 characters");return}g(!0);try{await e(n.email,n.password,n.displayName)}catch(R){l(R.message||"Failed to register")}finally{g(!1)}};return u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-bg p-4",children:u.jsxs("div",{className:"w-full max-w-md bg-dark-sidebar rounded-lg shadow-2xl p-8",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-dark-text mb-2",children:"Create Account"}),u.jsx("p",{className:"text-dark-muted",children:"Join Lumo"})]}),u.jsxs("form",{onSubmit:_,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx(un,{label:"Display Name",type:"text",placeholder:"Enter your display name",value:n.displayName,onChange:k=>r({...n,displayName:k.target.value}),required:!0}),c&&u.jsx("p",{className:"text-xs text-admin mt-1",children:c}),n.displayName&&!c&&u.jsx("p",{className:"text-xs text-green-500 mt-1",children:" Username available"})]}),u.jsx(un,{label:"Email",type:"email",placeholder:"Enter your email",value:n.email,onChange:k=>r({...n,email:k.target.value}),required:!0}),u.jsx(un,{label:"Password",type:"password",placeholder:"Enter your password",value:n.password,onChange:k=>r({...n,password:k.target.value}),required:!0}),u.jsx(un,{label:"Confirm Password",type:"password",placeholder:"Confirm your password",value:n.confirmPassword,onChange:k=>r({...n,confirmPassword:k.target.value}),required:!0}),a&&u.jsx("div",{className:"bg-admin/10 border border-admin/30 text-admin px-4 py-3 rounded-md text-sm",children:a}),u.jsx(Ze,{type:"submit",variant:"primary",className:"w-full",disabled:m||!!c,children:m?"Creating account...":"Register"})]}),u.jsx("div",{className:"mt-6 text-center",children:u.jsxs("div",{className:"text-dark-muted text-sm",children:["Already have an account?"," ",u.jsx("button",{onClick:t,className:"text-brand-primary hover:underline",children:"Login"})]})})]})})},JM=({onSwitchToLogin:t})=>{const{resetPassword:e}=Cn(),[n,r]=N.useState(""),[a,l]=N.useState(""),[c,h]=N.useState(!1),[m,g]=N.useState(!1),y=async b=>{b.preventDefault(),l(""),h(!1),g(!0);try{await e(n),h(!0)}catch(_){l(_.message||"Failed to send reset email")}finally{g(!1)}};return u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-bg p-4",children:u.jsxs("div",{className:"w-full max-w-md bg-dark-sidebar rounded-lg shadow-2xl p-8",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-dark-text mb-2",children:"Reset Password"}),u.jsx("p",{className:"text-dark-muted",children:"Enter your email to receive a reset link"})]}),u.jsxs("form",{onSubmit:y,className:"space-y-4",children:[u.jsx(un,{label:"Email",type:"email",placeholder:"Enter your email",value:n,onChange:b=>r(b.target.value),required:!0}),a&&u.jsx("div",{className:"bg-admin/10 border border-admin/30 text-admin px-4 py-3 rounded-md text-sm",children:a}),c&&u.jsx("div",{className:"bg-green-500/10 border border-green-500/30 text-green-500 px-4 py-3 rounded-md text-sm",children:"Password reset email sent! Check your inbox."}),u.jsx(Ze,{type:"submit",variant:"primary",className:"w-full",disabled:m,children:m?"Sending...":"Send Reset Link"})]}),u.jsx("div",{className:"mt-6 text-center",children:u.jsx("button",{onClick:t,className:"text-brand-primary hover:underline text-sm",children:"Back to Login"})})]})})},ZM=({onSwipeLeft:t,onSwipeRight:e,minSwipeDistance:n=50})=>{const r=N.useRef(null),a=N.useRef(null);return{onTouchStart:m=>{a.current=null,r.current=m.targetTouches[0].clientX},onTouchMove:m=>{a.current=m.targetTouches[0].clientX},onTouchEnd:()=>{if(!r.current||!a.current)return;const m=r.current-a.current,g=m>n,y=m<-n;g&&t&&t(),y&&e&&e()}}};function eP(t){return je({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111.1 8 0 119.1 0 256s111.1 248 248 248 248-111.1 248-248S384.9 8 248 8zm100.7 364.9c-4.2 0-6.8-1.3-10.7-3.6-62.4-37.6-135-39.2-206.7-24.5-3.9 1-9 2.6-11.9 2.6-9.7 0-15.8-7.7-15.8-15.8 0-10.3 6.1-15.2 13.6-16.8 81.9-18.1 165.6-16.5 237 26.2 6.1 3.9 9.7 7.4 9.7 16.5s-7.1 15.4-15.2 15.4zm26.9-65.6c-5.2 0-8.7-2.3-12.3-4.2-62.5-37-155.7-51.9-238.6-29.4-4.8 1.3-7.4 2.6-11.9 2.6-10.7 0-19.4-8.7-19.4-19.4s5.2-17.8 15.5-20.7c27.8-7.8 56.2-13.6 97.8-13.6 64.9 0 127.6 16.1 177 45.5 8.1 4.8 11.3 11 11.3 19.7-.1 10.8-8.5 19.5-19.4 19.5zm31-76.2c-5.2 0-8.4-1.3-12.9-3.9-71.2-42.5-198.5-52.7-280.9-29.7-3.6 1-8.1 2.6-12.9 2.6-13.2 0-23.3-10.3-23.3-23.6 0-13.6 8.4-21.3 17.4-23.9 35.2-10.3 74.6-15.2 117.5-15.2 73 0 149.5 15.2 205.4 47.8 7.8 4.5 12.9 10.7 12.9 22.6 0 13.6-11 23.3-23.2 23.3z"},child:[]}]})(t)}function yw(t){return je({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(t)}function tP(t){return je({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(t)}function nP(t){return je({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(t)}function rP(t){return je({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function v1(t){return je({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"},child:[]}]})(t)}function GT(t){return je({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function ip(t){return je({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M440.667 182.109l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l14.623-81.891C377.123 38.754 371.468 32 363.997 32h-40.632a12 12 0 0 0-11.813 9.891L296.175 128H197.54l14.623-81.891C213.477 38.754 207.822 32 200.35 32h-40.632a12 12 0 0 0-11.813 9.891L132.528 128H53.432a12 12 0 0 0-11.813 9.891l-7.143 40C33.163 185.246 38.818 192 46.289 192h74.81L98.242 320H19.146a12 12 0 0 0-11.813 9.891l-7.143 40C-1.123 377.246 4.532 384 12.003 384h74.81L72.19 465.891C70.877 473.246 76.532 480 84.003 480h40.632a12 12 0 0 0 11.813-9.891L151.826 384h98.634l-14.623 81.891C234.523 473.246 240.178 480 247.65 480h40.632a12 12 0 0 0 11.813-9.891L315.472 384h79.096a12 12 0 0 0 11.813-9.891l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l22.857-128h79.096a12 12 0 0 0 11.813-9.891zM261.889 320h-98.634l22.857-128h98.634l-22.857 128z"},child:[]}]})(t)}function sP(t){return je({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M160 288h-16c-35.35 0-64 28.7-64 64.12v63.76c0 35.41 28.65 64.12 64 64.12h16c17.67 0 32-14.36 32-32.06V320.06c0-17.71-14.33-32.06-32-32.06zm208 0h-16c-17.67 0-32 14.35-32 32.06v127.88c0 17.7 14.33 32.06 32 32.06h16c35.35 0 64-28.71 64-64.12v-63.76c0-35.41-28.65-64.12-64-64.12zM256 32C112.91 32 4.57 151.13 0 288v112c0 8.84 7.16 16 16 16h16c8.84 0 16-7.16 16-16V288c0-114.67 93.33-207.8 208-207.82 114.67.02 208 93.15 208 207.82v112c0 8.84 7.16 16 16 16h16c8.84 0 16-7.16 16-16V288C507.43 151.13 399.09 32 256 32z"},child:[]}]})(t)}function iP(t){return je({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.52 32 0 146.496 0 288v48a32 32 0 0 0 17.689 28.622l14.383 7.191C34.083 431.903 83.421 480 144 480h24c13.255 0 24-10.745 24-24V280c0-13.255-10.745-24-24-24h-24c-31.342 0-59.671 12.879-80 33.627V288c0-105.869 86.131-192 192-192s192 86.131 192 192v1.627C427.671 268.879 399.342 256 368 256h-24c-13.255 0-24 10.745-24 24v176c0 13.255 10.745 24 24 24h24c60.579 0 109.917-48.098 111.928-108.187l14.382-7.191A32 32 0 0 0 512 336v-48c0-141.479-114.496-256-256-256z"},child:[]}]})(t)}function y1(t){return je({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M633.82 458.1l-157.8-121.96C488.61 312.13 496 285.01 496 256v-48c0-8.84-7.16-16-16-16h-16c-8.84 0-16 7.16-16 16v48c0 17.92-3.96 34.8-10.72 50.2l-26.55-20.52c3.1-9.4 5.28-19.22 5.28-29.67V96c0-53.02-42.98-96-96-96s-96 42.98-96 96v45.36L45.47 3.37C38.49-2.05 28.43-.8 23.01 6.18L3.37 31.45C-2.05 38.42-.8 48.47 6.18 53.9l588.36 454.73c6.98 5.43 17.03 4.17 22.46-2.81l19.64-25.27c5.41-6.97 4.16-17.02-2.82-22.45zM400 464h-56v-33.77c11.66-1.6 22.85-4.54 33.67-8.31l-50.11-38.73c-6.71.4-13.41.87-20.35.2-55.85-5.45-98.74-48.63-111.18-101.85L144 241.31v6.85c0 89.64 63.97 169.55 152 181.69V464h-56c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function aP(t){return je({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M176 352c53.02 0 96-42.98 96-96V96c0-53.02-42.98-96-96-96S80 42.98 80 96v160c0 53.02 42.98 96 96 96zm160-160h-16c-8.84 0-16 7.16-16 16v48c0 74.8-64.49 134.82-140.79 127.38C96.71 376.89 48 317.11 48 250.3V208c0-8.84-7.16-16-16-16H16c-8.84 0-16 7.16-16 16v40.16c0 89.64 63.97 169.55 152 181.69V464H96c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16h-56v-33.77C285.71 418.47 352 344.9 352 256v-48c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function oP(t){return je({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M268.2 381.4l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48c-10.7 4.6-16.5 16.1-13.9 27.5l24 104c2.5 10.8 12.1 18.6 23.4 18.6 100.7 0 193.7-32.4 269.7-86.9l-80-61.8c-10.9 6.5-22.1 12.7-33.6 18.1zm365.6 76.7L475.1 335.5C537.9 256.4 576 156.9 576 48c0-11.2-7.7-20.9-18.6-23.4l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-12.2 26.1-27.9 50.3-46 72.8L45.5 3.4C38.5-2 28.5-.8 23 6.2L3.4 31.4c-5.4 7-4.2 17 2.8 22.4l588.4 454.7c7 5.4 17 4.2 22.5-2.8l19.6-25.3c5.4-6.8 4.1-16.9-2.9-22.3z"},child:[]}]})(t)}function bw(t){return je({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(t)}function lP(t){return je({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function cP(t){return je({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M633.8 458.1l-55-42.5c15.4-1.4 29.2-13.7 29.2-31.1v-257c0-25.5-29.1-40.4-50.4-25.8L448 177.3v137.2l-32-24.7v-178c0-26.4-21.4-47.8-47.8-47.8H123.9L45.5 3.4C38.5-2 28.5-.8 23 6.2L3.4 31.4c-5.4 7-4.2 17 2.8 22.4L42.7 82 416 370.6l178.5 138c7 5.4 17 4.2 22.5-2.8l19.6-25.3c5.5-6.9 4.2-17-2.8-22.4zM32 400.2c0 26.4 21.4 47.8 47.8 47.8h288.4c11.2 0 21.4-4 29.6-10.5L32 154.7v245.5z"},child:[]}]})(t)}function YT(t){return je({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M336.2 64H47.8C21.4 64 0 85.4 0 111.8v288.4C0 426.6 21.4 448 47.8 448h288.4c26.4 0 47.8-21.4 47.8-47.8V111.8c0-26.4-21.4-47.8-47.8-47.8zm189.4 37.7L416 177.3v157.4l109.6 75.5c21.2 14.6 50.4-.3 50.4-25.8V127.5c0-25.4-29.1-40.4-50.4-25.8z"},child:[]}]})(t)}function KT(t){return je({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zm233.32-51.08c-11.17-7.33-26.18-4.24-33.51 6.95-7.34 11.17-4.22 26.18 6.95 33.51 66.27 43.49 105.82 116.6 105.82 195.58 0 78.98-39.55 152.09-105.82 195.58-11.17 7.32-14.29 22.34-6.95 33.5 7.04 10.71 21.93 14.56 33.51 6.95C528.27 439.58 576 351.33 576 256S528.27 72.43 448.35 19.97zM480 256c0-63.53-32.06-121.94-85.77-156.24-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36 6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.54 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z"},child:[]}]})(t)}const Hs=({isOpen:t,onClose:e,title:n,children:r,size:a="md",showCloseButton:l=!0})=>{if(N.useEffect(()=>{const h=m=>{m.key==="Escape"&&t&&e()};return t?(document.body.style.overflow="hidden",document.addEventListener("keydown",h)):document.body.style.overflow="unset",()=>{document.body.style.overflow="unset",document.removeEventListener("keydown",h)}},[t,e]),!t)return null;const c={sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl"};return u.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center",children:[u.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:e}),u.jsxs("div",{className:At("relative bg-dark-sidebar rounded-lg shadow-2xl","w-full mx-4 max-h-[90vh] overflow-y-auto",c[a]),children:[(n||l)&&u.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-dark-hover",children:[u.jsx("h2",{className:"text-xl font-semibold text-dark-text",children:n}),l&&u.jsx("button",{onClick:e,className:"text-dark-muted hover:text-dark-text transition-colors",children:u.jsx(On,{size:24})})]}),u.jsx("div",{className:"p-6",children:r})]})]})},uP={premium:{id:"premium",label:"Premium Member",description:"Premium Member",icon:Io,color:"#F47FFF"},admin:{id:"admin",label:"Admin",description:"Server Administrator",icon:TT,color:"#f23f42"},verified:{id:"verified",label:"Verified",description:"Verified Member",icon:E7,color:"#3ba55c"},developer:{id:"developer",label:"Developer",description:"App Developer",icon:b7,color:"#5865F2"}};class dP{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const n of this._parts)e.push(n);return hP(e).buffer}}function hP(t){let e=0;for(const a of t)e+=a.byteLength;const n=new Uint8Array(e);let r=0;for(const a of t){const l=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);n.set(l,r),r+=a.byteLength}return n}function QT(t){return new fP(t).unpack()}function XT(t){const e=new mP,n=e.pack(t);return n instanceof Promise?n.then(()=>e.getBuffer()):e.getBuffer()}class fP{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let n;if((n=e^160)<=15)return this.unpack_raw(n);if((n=e^176)<=15)return this.unpack_string(n);if((n=e^144)<=15)return this.unpack_array(n);if((n=e^128)<=15)return this.unpack_map(n);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),n=(e[0]&255)*256+(e[1]&255);return this.index+=2,n}unpack_uint32(){const e=this.read(4),n=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,n}unpack_uint64(){const e=this.read(8),n=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,n}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,n}unpack_string(e){const n=this.read(e);let r=0,a="",l,c;for(;r<e;)l=n[r],l<160?(c=l,r++):(l^192)<32?(c=(l&31)<<6|n[r+1]&63,r+=2):(l^224)<16?(c=(l&15)<<12|(n[r+1]&63)<<6|n[r+2]&63,r+=3):(c=(l&7)<<18|(n[r+1]&63)<<12|(n[r+2]&63)<<6|n[r+3]&63,r+=4),a+=String.fromCodePoint(c);return this.index+=e,a}unpack_array(e){const n=new Array(e);for(let r=0;r<e;r++)n[r]=this.unpack();return n}unpack_map(e){const n={};for(let r=0;r<e;r++){const a=this.unpack();n[a]=this.unpack()}return n}unpack_float(){const e=this.unpack_uint32(),n=e>>31,r=(e>>23&255)-127,a=e&8388607|8388608;return(n===0?1:-1)*a*2**(r-23)}unpack_double(){const e=this.unpack_uint32(),n=this.unpack_uint32(),r=e>>31,a=(e>>20&2047)-1023,c=(e&1048575|1048576)*2**(a-20)+n*2**(a-52);return(r===0?1:-1)*c}read(e){const n=this.index;if(n+e<=this.length)return this.dataView.subarray(n,n+e);throw new Error("BinaryPackFailure: read index out of range")}}class mP{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const n=e.constructor;if(e instanceof Array){const r=this.pack_array(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const r=e;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const r=this.pack_object(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const n=e.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const n=this._textEncoder.encode(e),r=n.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(e){const n=e.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const r=a=>{if(a<n){const l=this.pack(e[a]);return l instanceof Promise?l.then(()=>r(a+1)):r(a+1)}};return r(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let n=0;e<0&&(n=1,e=-e);const r=Math.floor(Math.log(e)/Math.LN2),a=e/2**r-1,l=Math.floor(a*2**52),c=2**32,h=n<<31|r+1023<<20|l/c&1048575,m=l%c;this._bufferBuilder.append(203),this.pack_int32(h),this.pack_int32(m)}pack_object(e){const n=Object.keys(e),r=n.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const a=l=>{if(l<n.length){const c=n[l];if(e.hasOwnProperty(c)){this.pack(c);const h=this.pack(e[c]);if(h instanceof Promise)return h.then(()=>a(l+1))}return a(l+1)}};return a(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const n=e&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(e){const n=e/4294967296,r=e%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const n=Math.floor(e/4294967296),r=e%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new dP,this._textEncoder=new TextEncoder}}let WT=!0,JT=!0;function Vu(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseFloat(r[n],10)}function Fo(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,a=r.addEventListener;r.addEventListener=function(c,h){if(c!==e)return a.apply(this,arguments);const m=g=>{const y=n(g);y&&(h.handleEvent?h.handleEvent(y):h(y))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(h,m),a.apply(this,[c,m])};const l=r.removeEventListener;r.removeEventListener=function(c,h){if(c!==e||!this._eventMap||!this._eventMap[e])return l.apply(this,arguments);if(!this._eventMap[e].has(h))return l.apply(this,arguments);const m=this._eventMap[e].get(h);return this._eventMap[e].delete(h),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,l.apply(this,[c,m])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(c){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),c&&this.addEventListener(e,this["_on"+e]=c)},enumerable:!0,configurable:!0})}function pP(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(WT=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function gP(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(JT=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function ZT(){if(typeof window=="object"){if(WT)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function b1(t,e){JT&&console.warn(t+" is deprecated, please use "+e+" instead.")}function vP(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(a=>a.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=parseInt(Vu(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(Vu(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(Vu(n.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=Vu(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function xw(t){return Object.prototype.toString.call(t)==="[object Object]"}function e3(t){return xw(t)?Object.keys(t).reduce(function(e,n){const r=xw(t[n]),a=r?e3(t[n]):t[n],l=r&&!Object.keys(a).length;return a===void 0||l?e:Object.assign(e,{[n]:a})},{}):t}function Vv(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?Vv(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(a=>{Vv(t,t.get(a),n)})}))}function _w(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",a=new Map;if(e===null)return a;const l=[];return t.forEach(c=>{c.type==="track"&&c.trackIdentifier===e.id&&l.push(c)}),l.forEach(c=>{t.forEach(h=>{h.type===r&&h.trackId===c.id&&Vv(t,h,a)})}),a}const ww=ZT;function t3(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(h){if(typeof h!="object"||h.mandatory||h.optional)return h;const m={};return Object.keys(h).forEach(g=>{if(g==="require"||g==="advanced"||g==="mediaSource")return;const y=typeof h[g]=="object"?h[g]:{ideal:h[g]};y.exact!==void 0&&typeof y.exact=="number"&&(y.min=y.max=y.exact);const b=function(_,k){return _?_+k.charAt(0).toUpperCase()+k.slice(1):k==="deviceId"?"sourceId":k};if(y.ideal!==void 0){m.optional=m.optional||[];let _={};typeof y.ideal=="number"?(_[b("min",g)]=y.ideal,m.optional.push(_),_={},_[b("max",g)]=y.ideal,m.optional.push(_)):(_[b("",g)]=y.ideal,m.optional.push(_))}y.exact!==void 0&&typeof y.exact!="number"?(m.mandatory=m.mandatory||{},m.mandatory[b("",g)]=y.exact):["min","max"].forEach(_=>{y[_]!==void 0&&(m.mandatory=m.mandatory||{},m.mandatory[b(_,g)]=y[_])})}),h.advanced&&(m.optional=(m.optional||[]).concat(h.advanced)),m},a=function(h,m){if(e.version>=61)return m(h);if(h=JSON.parse(JSON.stringify(h)),h&&typeof h.audio=="object"){const g=function(y,b,_){b in y&&!(_ in y)&&(y[_]=y[b],delete y[b])};h=JSON.parse(JSON.stringify(h)),g(h.audio,"autoGainControl","googAutoGainControl"),g(h.audio,"noiseSuppression","googNoiseSuppression"),h.audio=r(h.audio)}if(h&&typeof h.video=="object"){let g=h.video.facingMode;g=g&&(typeof g=="object"?g:{ideal:g});const y=e.version<66;if(g&&(g.exact==="user"||g.exact==="environment"||g.ideal==="user"||g.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!y)){delete h.video.facingMode;let b;if(g.exact==="environment"||g.ideal==="environment"?b=["back","rear"]:(g.exact==="user"||g.ideal==="user")&&(b=["front"]),b)return n.mediaDevices.enumerateDevices().then(_=>{_=_.filter(R=>R.kind==="videoinput");let k=_.find(R=>b.some(j=>R.label.toLowerCase().includes(j)));return!k&&_.length&&b.includes("back")&&(k=_[_.length-1]),k&&(h.video.deviceId=g.exact?{exact:k.deviceId}:{ideal:k.deviceId}),h.video=r(h.video),ww("chrome: "+JSON.stringify(h)),m(h)})}h.video=r(h.video)}return ww("chrome: "+JSON.stringify(h)),m(h)},l=function(h){return e.version>=64?h:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[h.name]||h.name,message:h.message,constraint:h.constraint||h.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},c=function(h,m,g){a(h,y=>{n.webkitGetUserMedia(y,m,b=>{g&&g(l(b))})})};if(n.getUserMedia=c.bind(n),n.mediaDevices.getUserMedia){const h=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(m){return a(m,g=>h(g).then(y=>{if(g.audio&&!y.getAudioTracks().length||g.video&&!y.getVideoTracks().length)throw y.getTracks().forEach(b=>{b.stop()}),new DOMException("","NotFoundError");return y},y=>Promise.reject(l(y))))}}}function n3(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function r3(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",a=>{let l;t.RTCPeerConnection.prototype.getReceivers?l=this.getReceivers().find(h=>h.track&&h.track.id===a.track.id):l={track:a.track};const c=new Event("track");c.track=a.track,c.receiver=l,c.transceiver={receiver:l},c.streams=[r.stream],this.dispatchEvent(c)}),r.stream.getTracks().forEach(a=>{let l;t.RTCPeerConnection.prototype.getReceivers?l=this.getReceivers().find(h=>h.track&&h.track.id===a.id):l={track:a};const c=new Event("track");c.track=a,c.receiver=l,c.transceiver={receiver:l},c.streams=[r.stream],this.dispatchEvent(c)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Fo(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function s3(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(a,l){return{track:l,get dtmf(){return this._dtmf===void 0&&(l.kind==="audio"?this._dtmf=a.createDTMFSender(l):this._dtmf=null),this._dtmf},_pc:a}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const a=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(h,m){let g=a.apply(this,arguments);return g||(g=e(this,h),this._senders.push(g)),g};const l=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(h){l.apply(this,arguments);const m=this._senders.indexOf(h);m!==-1&&this._senders.splice(m,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(l){this._senders=this._senders||[],n.apply(this,[l]),l.getTracks().forEach(c=>{this._senders.push(e(this,c))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(l){this._senders=this._senders||[],r.apply(this,[l]),l.getTracks().forEach(c=>{const h=this._senders.find(m=>m.track===c);h&&this._senders.splice(this._senders.indexOf(h),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(a=>a._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function i3(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const l=n.apply(this,[]);return l.forEach(c=>c._pc=this),l});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const l=r.apply(this,arguments);return l._pc=this,l}),t.RTCRtpSender.prototype.getStats=function(){const l=this;return this._pc.getStats().then(c=>_w(c,l.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const a=n.apply(this,[]);return a.forEach(l=>l._pc=this),a}),Fo(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const a=this;return this._pc.getStats().then(l=>_w(l,a.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let a,l,c;return this.getSenders().forEach(h=>{h.track===r&&(a?c=!0:a=h)}),this.getReceivers().forEach(h=>(h.track===r&&(l?c=!0:l=h),h.track===r)),c||a&&l?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):a?a.getStats():l?l.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function a3(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(c=>this._shimmedLocalStreams[c][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(c,h){if(!h)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const m=e.apply(this,arguments);return this._shimmedLocalStreams[h.id]?this._shimmedLocalStreams[h.id].indexOf(m)===-1&&this._shimmedLocalStreams[h.id].push(m):this._shimmedLocalStreams[h.id]=[h,m],m};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(c){this._shimmedLocalStreams=this._shimmedLocalStreams||{},c.getTracks().forEach(g=>{if(this.getSenders().find(b=>b.track===g))throw new DOMException("Track already exists.","InvalidAccessError")});const h=this.getSenders();n.apply(this,arguments);const m=this.getSenders().filter(g=>h.indexOf(g)===-1);this._shimmedLocalStreams[c.id]=[c].concat(m)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[c.id],r.apply(this,arguments)};const a=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},c&&Object.keys(this._shimmedLocalStreams).forEach(h=>{const m=this._shimmedLocalStreams[h].indexOf(c);m!==-1&&this._shimmedLocalStreams[h].splice(m,1),this._shimmedLocalStreams[h].length===1&&delete this._shimmedLocalStreams[h]}),a.apply(this,arguments)}}function o3(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return a3(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const y=n.apply(this);return this._reverseStreams=this._reverseStreams||{},y.map(b=>this._reverseStreams[b.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(y){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},y.getTracks().forEach(b=>{if(this.getSenders().find(k=>k.track===b))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[y.id]){const b=new t.MediaStream(y.getTracks());this._streams[y.id]=b,this._reverseStreams[b.id]=y,y=b}r.apply(this,[y])};const a=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(y){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},a.apply(this,[this._streams[y.id]||y]),delete this._reverseStreams[this._streams[y.id]?this._streams[y.id].id:y.id],delete this._streams[y.id]},t.RTCPeerConnection.prototype.addTrack=function(y,b){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const _=[].slice.call(arguments,1);if(_.length!==1||!_[0].getTracks().find(j=>j===y))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(j=>j.track===y))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const R=this._streams[b.id];if(R)R.addTrack(y),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const j=new t.MediaStream([y]);this._streams[b.id]=j,this._reverseStreams[j.id]=b,this.addStream(j)}return this.getSenders().find(j=>j.track===y)};function l(g,y){let b=y.sdp;return Object.keys(g._reverseStreams||[]).forEach(_=>{const k=g._reverseStreams[_],R=g._streams[k.id];b=b.replace(new RegExp(R.id,"g"),k.id)}),new RTCSessionDescription({type:y.type,sdp:b})}function c(g,y){let b=y.sdp;return Object.keys(g._reverseStreams||[]).forEach(_=>{const k=g._reverseStreams[_],R=g._streams[k.id];b=b.replace(new RegExp(k.id,"g"),R.id)}),new RTCSessionDescription({type:y.type,sdp:b})}["createOffer","createAnswer"].forEach(function(g){const y=t.RTCPeerConnection.prototype[g],b={[g](){const _=arguments;return arguments.length&&typeof arguments[0]=="function"?y.apply(this,[R=>{const j=l(this,R);_[0].apply(null,[j])},R=>{_[1]&&_[1].apply(null,R)},arguments[2]]):y.apply(this,arguments).then(R=>l(this,R))}};t.RTCPeerConnection.prototype[g]=b[g]});const h=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?h.apply(this,arguments):(arguments[0]=c(this,arguments[0]),h.apply(this,arguments))};const m=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const g=m.get.apply(this);return g.type===""?g:l(this,g)}}),t.RTCPeerConnection.prototype.removeTrack=function(y){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!y._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(y._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let _;Object.keys(this._streams).forEach(k=>{this._streams[k].getTracks().find(j=>y.track===j)&&(_=this._streams[k])}),_&&(_.getTracks().length===1?this.removeStream(this._reverseStreams[_.id]):_.removeTrack(y.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Uv(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],a={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=a[n]})}function l3(t,e){Fo(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const Sw=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:l3,shimAddTrackRemoveTrack:o3,shimAddTrackRemoveTrackWithNative:a3,shimGetSendersWithDtmf:s3,shimGetUserMedia:t3,shimMediaStream:n3,shimOnTrack:r3,shimPeerConnection:Uv,shimSenderReceiverGetStats:i3},Symbol.toStringTag,{value:"Module"}));function c3(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(a,l,c){b1("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(a).then(l,c)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const a=function(c,h,m){h in c&&!(m in c)&&(c[m]=c[h],delete c[h])},l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(c){return typeof c=="object"&&typeof c.audio=="object"&&(c=JSON.parse(JSON.stringify(c)),a(c.audio,"autoGainControl","mozAutoGainControl"),a(c.audio,"noiseSuppression","mozNoiseSuppression")),l(c)},r&&r.prototype.getSettings){const c=r.prototype.getSettings;r.prototype.getSettings=function(){const h=c.apply(this,arguments);return a(h,"mozAutoGainControl","autoGainControl"),a(h,"mozNoiseSuppression","noiseSuppression"),h}}if(r&&r.prototype.applyConstraints){const c=r.prototype.applyConstraints;r.prototype.applyConstraints=function(h){return this.kind==="audio"&&typeof h=="object"&&(h=JSON.parse(JSON.stringify(h)),a(h,"autoGainControl","mozAutoGainControl"),a(h,"noiseSuppression","mozNoiseSuppression")),c.apply(this,[h])}}}}function yP(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const a=new DOMException("getDisplayMedia without video constraints is undefined");return a.name="NotFoundError",a.code=8,Promise.reject(a)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function u3(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function zv(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(a){const l=t.RTCPeerConnection.prototype[a],c={[a](){return arguments[0]=new(a==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),l.apply(this,arguments)}};t.RTCPeerConnection.prototype[a]=c[a]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[l,c,h]=arguments;return r.apply(this,[l||null]).then(m=>{if(e.version<53&&!c)try{m.forEach(g=>{g.type=n[g.type]||g.type})}catch(g){if(g.name!=="TypeError")throw g;m.forEach((y,b)=>{m.set(b,Object.assign({},y,{type:n[y.type]||y.type}))})}return m}).then(c,h)}}function d3(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const a=e.apply(this,[]);return a.forEach(l=>l._pc=this),a});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const a=n.apply(this,arguments);return a._pc=this,a}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function h3(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(a=>a._pc=this),r}),Fo(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function f3(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){b1("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function m3(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function p3(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const a=r.length>0;a&&r.forEach(c=>{if("rid"in c&&!/^[a-z0-9]{0,16}$/i.test(c.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in c&&!(parseFloat(c.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in c&&!(parseFloat(c.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const l=e.apply(this,arguments);if(a){const{sender:c}=l,h=c.getParameters();(!("encodings"in h)||h.encodings.length===1&&Object.keys(h.encodings[0]).length===0)&&(h.encodings=r,c.sendEncodings=r,this.setParametersPromises.push(c.setParameters(h).then(()=>{delete c.sendEncodings}).catch(()=>{delete c.sendEncodings})))}return l})}function g3(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function v3(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function y3(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const Ew=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:p3,shimCreateAnswer:y3,shimCreateOffer:v3,shimGetDisplayMedia:yP,shimGetParameters:g3,shimGetUserMedia:c3,shimOnTrack:u3,shimPeerConnection:zv,shimRTCDataChannel:m3,shimReceiverGetStats:h3,shimRemoveStream:f3,shimSenderGetStats:d3},Symbol.toStringTag,{value:"Module"}));function b3(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(a=>e.call(this,a,r)),r.getVideoTracks().forEach(a=>e.call(this,a,r))},t.RTCPeerConnection.prototype.addTrack=function(r,...a){return a&&a.forEach(l=>{this._localStreams?this._localStreams.includes(l)||this._localStreams.push(l):this._localStreams=[l]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const a=n.getTracks();this.getSenders().forEach(l=>{a.includes(l.track)&&this.removeTrack(l)})})}}function x3(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(a=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(a))return;this._remoteStreams.push(a);const l=new Event("addstream");l.stream=a,this.dispatchEvent(l)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(a){a.streams.forEach(l=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(l)>=0)return;r._remoteStreams.push(l);const c=new Event("addstream");c.stream=l,r.dispatchEvent(c)})}),e.apply(r,arguments)}}}function _3(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,a=e.setLocalDescription,l=e.setRemoteDescription,c=e.addIceCandidate;e.createOffer=function(g,y){const b=arguments.length>=2?arguments[2]:arguments[0],_=n.apply(this,[b]);return y?(_.then(g,y),Promise.resolve()):_},e.createAnswer=function(g,y){const b=arguments.length>=2?arguments[2]:arguments[0],_=r.apply(this,[b]);return y?(_.then(g,y),Promise.resolve()):_};let h=function(m,g,y){const b=a.apply(this,[m]);return y?(b.then(g,y),Promise.resolve()):b};e.setLocalDescription=h,h=function(m,g,y){const b=l.apply(this,[m]);return y?(b.then(g,y),Promise.resolve()):b},e.setRemoteDescription=h,h=function(m,g,y){const b=c.apply(this,[m]);return y?(b.then(g,y),Promise.resolve()):b},e.addIceCandidate=h}function w3(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=a=>r(S3(a))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,a,l){e.mediaDevices.getUserMedia(r).then(a,l)}).bind(e))}function S3(t){return t&&t.video!==void 0?Object.assign({},t,{video:e3(t.video)}):t}function E3(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,a){if(r&&r.iceServers){const l=[];for(let c=0;c<r.iceServers.length;c++){let h=r.iceServers[c];h.urls===void 0&&h.url?(b1("RTCIceServer.url","RTCIceServer.urls"),h=JSON.parse(JSON.stringify(h)),h.urls=h.url,delete h.url,l.push(h)):l.push(r.iceServers[c])}r.iceServers=l}return new e(r,a)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function C3(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function T3(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const a=this.getTransceivers().find(c=>c.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):r.offerToReceiveAudio===!0&&!a&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const l=this.getTransceivers().find(c=>c.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&l?l.direction==="sendrecv"?l.setDirection?l.setDirection("sendonly"):l.direction="sendonly":l.direction==="recvonly"&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive"):r.offerToReceiveVideo===!0&&!l&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function k3(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const Cw=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:k3,shimCallbacksAPI:_3,shimConstraints:S3,shimCreateOfferLegacy:T3,shimGetUserMedia:w3,shimLocalStreamsAPI:b3,shimRTCIceServerUrls:E3,shimRemoteStreamsAPI:x3,shimTrackEventTransceiver:C3},Symbol.toStringTag,{value:"Module"}));var z0={exports:{}},Tw;function bP(){return Tw||(Tw=1,(function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(n){return n.split(`
m=`).map((a,l)=>(l>0?"m="+a:a).trim()+`\r
`)},e.getDescription=function(n){const r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){const r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(a=>a.indexOf(r)===0)},e.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const a={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let l=8;l<r.length;l+=2)switch(r[l]){case"raddr":a.relatedAddress=r[l+1];break;case"rport":a.relatedPort=parseInt(r[l+1],10);break;case"tcptype":a.tcpType=r[l+1];break;case"ufrag":a.ufrag=r[l+1],a.usernameFragment=r[l+1];break;default:a[r[l]]===void 0&&(a[r[l]]=r[l+1]);break}return a},e.writeCandidate=function(n){const r=[];r.push(n.foundation);const a=n.component;a==="rtp"?r.push(1):a==="rtcp"?r.push(2):r.push(a),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const l=n.type;return r.push("typ"),r.push(l),l!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let r=n.substring(9).split(" ");const a={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),a.name=r[0],a.clockRate=parseInt(r[1],10),a.channels=r.length===3?parseInt(r[2],10):1,a.numChannels=a.channels,a},e.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const a=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(a!==1?"/"+a:"")+`\r
`},e.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const r={};let a;const l=n.substring(n.indexOf(" ")+1).split(";");for(let c=0;c<l.length;c++)a=l[c].trim().split("="),r[a[0].trim()]=a[1];return r},e.writeFmtp=function(n){let r="",a=n.payloadType;if(n.preferredPayloadType!==void 0&&(a=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const l=[];Object.keys(n.parameters).forEach(c=>{n.parameters[c]!==void 0?l.push(c+"="+n.parameters[c]):l.push(c)}),r+="a=fmtp:"+a+" "+l.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){let r="",a=n.payloadType;return n.preferredPayloadType!==void 0&&(a=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(l=>{r+="a=rtcp-fb:"+a+" "+l.type+(l.parameter&&l.parameter.length?" "+l.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){const r=n.indexOf(" "),a={ssrc:parseInt(n.substring(7,r),10)},l=n.indexOf(":",r);return l>-1?(a.attribute=n.substring(r+1,l),a.value=n.substring(l+1)):a.attribute=n.substring(r+1),a},e.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(a=>parseInt(a,10))}},e.getMid=function(n){const r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:e.matchPrefix(n+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){let a="a=setup:"+r+`\r
`;return n.fingerprints.forEach(l=>{a+="a=fingerprint:"+l.algorithm+" "+l.value+`\r
`}),a},e.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){return e.matchPrefix(n+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,r){const a=e.matchPrefix(n+r,"a=ice-ufrag:")[0],l=e.matchPrefix(n+r,"a=ice-pwd:")[0];return a&&l?{usernameFragment:a.substring(12),password:l.substring(10)}:null},e.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},l=e.splitLines(n)[0].split(" ");r.profile=l[2];for(let h=3;h<l.length;h++){const m=l[h],g=e.matchPrefix(n,"a=rtpmap:"+m+" ")[0];if(g){const y=e.parseRtpMap(g),b=e.matchPrefix(n,"a=fmtp:"+m+" ");switch(y.parameters=b.length?e.parseFmtp(b[0]):{},y.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+m+" ").map(e.parseRtcpFb),r.codecs.push(y),y.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(y.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(h=>{r.headerExtensions.push(e.parseExtmap(h))});const c=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(h=>{c.forEach(m=>{h.rtcpFeedback.find(y=>y.type===m.type&&y.parameter===m.parameter)||h.rtcpFeedback.push(m)})}),r},e.writeRtpDescription=function(n,r){let a="";a+="m="+n+" ",a+=r.codecs.length>0?"9":"0",a+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",a+=r.codecs.map(c=>c.preferredPayloadType!==void 0?c.preferredPayloadType:c.payloadType).join(" ")+`\r
`,a+=`c=IN IP4 0.0.0.0\r
`,a+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(c=>{a+=e.writeRtpMap(c),a+=e.writeFmtp(c),a+=e.writeRtcpFb(c)});let l=0;return r.codecs.forEach(c=>{c.maxptime>l&&(l=c.maxptime)}),l>0&&(a+="a=maxptime:"+l+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(c=>{a+=e.writeExtmap(c)}),a},e.parseRtpEncodingParameters=function(n){const r=[],a=e.parseRtpParameters(n),l=a.fecMechanisms.indexOf("RED")!==-1,c=a.fecMechanisms.indexOf("ULPFEC")!==-1,h=e.matchPrefix(n,"a=ssrc:").map(_=>e.parseSsrcMedia(_)).filter(_=>_.attribute==="cname"),m=h.length>0&&h[0].ssrc;let g;const y=e.matchPrefix(n,"a=ssrc-group:FID").map(_=>_.substring(17).split(" ").map(R=>parseInt(R,10)));y.length>0&&y[0].length>1&&y[0][0]===m&&(g=y[0][1]),a.codecs.forEach(_=>{if(_.name.toUpperCase()==="RTX"&&_.parameters.apt){let k={ssrc:m,codecPayloadType:parseInt(_.parameters.apt,10)};m&&g&&(k.rtx={ssrc:g}),r.push(k),l&&(k=JSON.parse(JSON.stringify(k)),k.fec={ssrc:m,mechanism:c?"red+ulpfec":"red"},r.push(k))}}),r.length===0&&m&&r.push({ssrc:m});let b=e.matchPrefix(n,"b=");return b.length&&(b[0].indexOf("b=TIAS:")===0?b=parseInt(b[0].substring(7),10):b[0].indexOf("b=AS:")===0?b=parseInt(b[0].substring(5),10)*1e3*.95-2e3*8:b=void 0,r.forEach(_=>{_.maxBitrate=b})),r},e.parseRtcpParameters=function(n){const r={},a=e.matchPrefix(n,"a=ssrc:").map(h=>e.parseSsrcMedia(h)).filter(h=>h.attribute==="cname")[0];a&&(r.cname=a.value,r.ssrc=a.ssrc);const l=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=l.length>0,r.compound=l.length===0;const c=e.matchPrefix(n,"a=rtcp-mux");return r.mux=c.length>0,r},e.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},e.parseMsid=function(n){let r;const a=e.matchPrefix(n,"a=msid:");if(a.length===1)return r=a[0].substring(7).split(" "),{stream:r[0],track:r[1]};const l=e.matchPrefix(n,"a=ssrc:").map(c=>e.parseSsrcMedia(c)).filter(c=>c.attribute==="msid");if(l.length>0)return r=l[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){const r=e.parseMLine(n),a=e.matchPrefix(n,"a=max-message-size:");let l;a.length>0&&(l=parseInt(a[0].substring(19),10)),isNaN(l)&&(l=65536);const c=e.matchPrefix(n,"a=sctp-port:");if(c.length>0)return{port:parseInt(c[0].substring(12),10),protocol:r.fmt,maxMessageSize:l};const h=e.matchPrefix(n,"a=sctpmap:");if(h.length>0){const m=h[0].substring(10).split(" ");return{port:parseInt(m[0],10),protocol:m[1],maxMessageSize:l}}},e.writeSctpDescription=function(n,r){let a=[];return n.protocol!=="DTLS/SCTP"?a=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:a=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&a.push("a=max-message-size:"+r.maxMessageSize+`\r
`),a.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,r,a){let l;const c=r!==void 0?r:2;return n?l=n:l=e.generateSessionId(),`v=0\r
o=`+(a||"thisisadapterortc")+" "+l+" "+c+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,r){const a=e.splitLines(n);for(let l=0;l<a.length;l++)switch(a[l]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return a[l].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const a=e.splitLines(n)[0].substring(2).split(" ");return{kind:a[0],port:parseInt(a[1],10),protocol:a[2],fmt:a.slice(3).join(" ")}},e.parseOLine=function(n){const a=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:a[0],sessionId:a[1],sessionVersion:parseInt(a[2],10),netType:a[3],addressType:a[4],address:a[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=e.splitLines(n);for(let a=0;a<r.length;a++)if(r[a].length<2||r[a].charAt(1)!=="=")return!1;return!0},t.exports=e})(z0)),z0.exports}var N3=bP();const Ql=dd(N3),xP=lN({__proto__:null,default:Ql},[N3]);function If(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const a=new e(r),l=Ql.parseCandidate(r.candidate);for(const c in l)c in a||Object.defineProperty(a,c,{value:l[c]});return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,Fo(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Bv(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||Fo(t,"icecandidate",e=>{if(e.candidate){const n=Ql.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function Df(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(h){if(!h||!h.sdp)return!1;const m=Ql.splitSections(h.sdp);return m.shift(),m.some(g=>{const y=Ql.parseMLine(g);return y&&y.kind==="application"&&y.protocol.indexOf("SCTP")!==-1})},r=function(h){const m=h.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(m===null||m.length<2)return-1;const g=parseInt(m[1],10);return g!==g?-1:g},a=function(h){let m=65536;return e.browser==="firefox"&&(e.version<57?h===-1?m=16384:m=2147483637:e.version<60?m=e.version===57?65535:65536:m=2147483637),m},l=function(h,m){let g=65536;e.browser==="firefox"&&e.version===57&&(g=65535);const y=Ql.matchPrefix(h.sdp,"a=max-message-size:");return y.length>0?g=parseInt(y[0].substring(19),10):e.browser==="firefox"&&m!==-1&&(g=2147483637),g},c=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:m}=this.getConfiguration();m==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const m=r(arguments[0]),g=a(m),y=l(arguments[0],m);let b;g===0&&y===0?b=Number.POSITIVE_INFINITY:g===0||y===0?b=Math.max(g,y):b=Math.min(g,y);const _={};Object.defineProperty(_,"maxMessageSize",{get(){return b}}),this._sctp=_}return c.apply(this,arguments)}}function Mf(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,a){const l=r.send;r.send=function(){const h=arguments[0],m=h.length||h.size||h.byteLength;if(r.readyState==="open"&&a.sctp&&m>a.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+a.sctp.maxMessageSize+" bytes)");return l.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const a=n.apply(this,arguments);return e(a,this),a},Fo(t,"datachannel",r=>(e(r.channel,r.target),r))}function Fv(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=a=>{const l=a.target;if(l._lastConnectionState!==l.connectionState){l._lastConnectionState=l.connectionState;const c=new Event("connectionstatechange",a);l.dispatchEvent(c)}return a},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Hv(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(a){if(a&&a.sdp&&a.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const l=a.sdp.split(`
`).filter(c=>c.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&a instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:a.type,sdp:l}):a.sdp=l}return n.apply(this,arguments)}}function Pf(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Of(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let a=arguments[0]||{};if(typeof a!="object"||a.type&&a.sdp)return n.apply(this,arguments);if(a={type:a.type,sdp:a.sdp},!a.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":a.type="offer";break;default:a.type="answer";break}return a.sdp||a.type!=="offer"&&a.type!=="answer"?n.apply(this,[a]):(a.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(c=>n.apply(this,[c]))})}const _P=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Hv,shimAddIceCandidateNullOrEmpty:Pf,shimConnectionState:Fv,shimMaxMessageSize:Df,shimParameterlessSetLocalDescription:Of,shimRTCIceCandidate:If,shimRTCIceCandidateRelayProtocol:Bv,shimSendThrowTypeError:Mf},Symbol.toStringTag,{value:"Module"}));function wP({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=ZT,r=vP(t),a={browserDetails:r,commonShim:_P,extractVersion:Vu,disableLog:pP,disableWarnings:gP,sdp:xP};switch(r.browser){case"chrome":if(!Sw||!Uv||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),a;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),a;n("adapter.js shimming chrome."),a.browserShim=Sw,Pf(t,r),Of(t),t3(t,r),n3(t),Uv(t,r),r3(t),o3(t,r),s3(t),i3(t),l3(t,r),If(t),Bv(t),Fv(t),Df(t,r),Mf(t),Hv(t,r);break;case"firefox":if(!Ew||!zv||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),a;n("adapter.js shimming firefox."),a.browserShim=Ew,Pf(t,r),Of(t),c3(t,r),zv(t,r),u3(t),f3(t),d3(t),h3(t),m3(t),p3(t),g3(t),v3(t),y3(t),If(t),Fv(t),Df(t,r),Mf(t);break;case"safari":if(!Cw||!e.shimSafari)return n("Safari shim is not included in this adapter release."),a;n("adapter.js shimming safari."),a.browserShim=Cw,Pf(t,r),Of(t),E3(t),T3(t),_3(t),b3(t),x3(t),C3(t),w3(t),k3(t),If(t),Bv(t),Df(t,r),Mf(t),Hv(t,r);break;default:n("Unsupported browser!");break}return a}const kw=wP({window:typeof window>"u"?void 0:window});function Ho(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}class A3{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const n=[],r=e.byteLength,a=Math.ceil(r/this.chunkedMTU);let l=0,c=0;for(;c<r;){const h=Math.min(r,c+this.chunkedMTU),m=e.slice(c,h),g={__peerData:this._dataCount,n:l,data:m,total:a};n.push(g),c=h,l++}return this._dataCount++,n}}}function SP(t){let e=0;for(const a of t)e+=a.byteLength;const n=new Uint8Array(e);let r=0;for(const a of t)n.set(a,r),r+=a.byteLength;return n}const B0=kw.default||kw,ku=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const t=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(t)?t==="chrome"?e>=this.minChromeVersion:t==="firefox"?e>=this.minFirefoxVersion:t==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return B0.browserDetails.browser}getVersion(){return B0.browserDetails.version||0}isUnifiedPlanSupported(){const t=this.getBrowser(),e=B0.browserDetails.version||0;if(t==="chrome"&&e<this.minChromeVersion)return!1;if(t==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch{}finally{n&&n.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},EP=t=>!t||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(t),R3=()=>Math.random().toString(36).slice(2),Nw={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class CP extends A3{noop(){}blobToArrayBuffer(e,n){const r=new FileReader;return r.onload=function(a){a.target&&n(a.target.result)},r.readAsArrayBuffer(e),r}binaryStringToArrayBuffer(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=Nw,this.browser=ku.getBrowser(),this.browserVersion=ku.getVersion(),this.pack=XT,this.unpack=QT,this.supports=(function(){const n={browser:ku.isBrowserSupported(),webRTC:ku.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let r;try{r=new RTCPeerConnection(Nw),n.audioVideo=!0;let a;try{a=r.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!a.ordered;try{a.binaryType="blob",n.binaryBlob=!ku.isIOS}catch{}}catch{}finally{a&&a.close()}}catch{}finally{r&&r.close()}return n})(),this.validateId=EP,this.randomToken=R3}}const mr=new CP,TP="PeerJS: ";class kP{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...n){const r=[TP,...n];for(const a in r)r[a]instanceof Error&&(r[a]="("+r[a].name+") "+r[a].message);e>=3?console.log(...r):e>=2?console.warn("WARNING",...r):e>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var qe=new kP,x1={},NP=Object.prototype.hasOwnProperty,ir="~";function rd(){}Object.create&&(rd.prototype=Object.create(null),new rd().__proto__||(ir=!1));function AP(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function j3(t,e,n,r,a){if(typeof n!="function")throw new TypeError("The listener must be a function");var l=new AP(n,r||t,a),c=ir?ir+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],l]:t._events[c].push(l):(t._events[c]=l,t._eventsCount++),t}function Lf(t,e){--t._eventsCount===0?t._events=new rd:delete t._events[e]}function Zn(){this._events=new rd,this._eventsCount=0}Zn.prototype.eventNames=function(){var e=[],n,r;if(this._eventsCount===0)return e;for(r in n=this._events)NP.call(n,r)&&e.push(ir?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(n)):e};Zn.prototype.listeners=function(e){var n=ir?ir+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var a=0,l=r.length,c=new Array(l);a<l;a++)c[a]=r[a].fn;return c};Zn.prototype.listenerCount=function(e){var n=ir?ir+e:e,r=this._events[n];return r?r.fn?1:r.length:0};Zn.prototype.emit=function(e,n,r,a,l,c){var h=ir?ir+e:e;if(!this._events[h])return!1;var m=this._events[h],g=arguments.length,y,b;if(m.fn){switch(m.once&&this.removeListener(e,m.fn,void 0,!0),g){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,n),!0;case 3:return m.fn.call(m.context,n,r),!0;case 4:return m.fn.call(m.context,n,r,a),!0;case 5:return m.fn.call(m.context,n,r,a,l),!0;case 6:return m.fn.call(m.context,n,r,a,l,c),!0}for(b=1,y=new Array(g-1);b<g;b++)y[b-1]=arguments[b];m.fn.apply(m.context,y)}else{var _=m.length,k;for(b=0;b<_;b++)switch(m[b].once&&this.removeListener(e,m[b].fn,void 0,!0),g){case 1:m[b].fn.call(m[b].context);break;case 2:m[b].fn.call(m[b].context,n);break;case 3:m[b].fn.call(m[b].context,n,r);break;case 4:m[b].fn.call(m[b].context,n,r,a);break;default:if(!y)for(k=1,y=new Array(g-1);k<g;k++)y[k-1]=arguments[k];m[b].fn.apply(m[b].context,y)}}return!0};Zn.prototype.on=function(e,n,r){return j3(this,e,n,r,!1)};Zn.prototype.once=function(e,n,r){return j3(this,e,n,r,!0)};Zn.prototype.removeListener=function(e,n,r,a){var l=ir?ir+e:e;if(!this._events[l])return this;if(!n)return Lf(this,l),this;var c=this._events[l];if(c.fn)c.fn===n&&(!a||c.once)&&(!r||c.context===r)&&Lf(this,l);else{for(var h=0,m=[],g=c.length;h<g;h++)(c[h].fn!==n||a&&!c[h].once||r&&c[h].context!==r)&&m.push(c[h]);m.length?this._events[l]=m.length===1?m[0]:m:Lf(this,l)}return this};Zn.prototype.removeAllListeners=function(e){var n;return e?(n=ir?ir+e:e,this._events[n]&&Lf(this,n)):(this._events=new rd,this._eventsCount=0),this};Zn.prototype.off=Zn.prototype.removeListener;Zn.prototype.addListener=Zn.prototype.on;Zn.prefixed=ir;Zn.EventEmitter=Zn;x1=Zn;var $o={};Ho($o,"ConnectionType",()=>Ca);Ho($o,"PeerErrorType",()=>xn);Ho($o,"BaseConnectionErrorType",()=>$v);Ho($o,"DataConnectionErrorType",()=>_1);Ho($o,"SerializationType",()=>ap);Ho($o,"SocketEventType",()=>ba);Ho($o,"ServerMessageType",()=>Xn);var Ca=(function(t){return t.Data="data",t.Media="media",t})({}),xn=(function(t){return t.BrowserIncompatible="browser-incompatible",t.Disconnected="disconnected",t.InvalidID="invalid-id",t.InvalidKey="invalid-key",t.Network="network",t.PeerUnavailable="peer-unavailable",t.SslUnavailable="ssl-unavailable",t.ServerError="server-error",t.SocketError="socket-error",t.SocketClosed="socket-closed",t.UnavailableID="unavailable-id",t.WebRTC="webrtc",t})({}),$v=(function(t){return t.NegotiationFailed="negotiation-failed",t.ConnectionClosed="connection-closed",t})({}),_1=(function(t){return t.NotOpenYet="not-open-yet",t.MessageToBig="message-too-big",t})({}),ap=(function(t){return t.Binary="binary",t.BinaryUTF8="binary-utf8",t.JSON="json",t.None="raw",t})({}),ba=(function(t){return t.Message="message",t.Disconnected="disconnected",t.Error="error",t.Close="close",t})({}),Xn=(function(t){return t.Heartbeat="HEARTBEAT",t.Candidate="CANDIDATE",t.Offer="OFFER",t.Answer="ANSWER",t.Open="OPEN",t.Error="ERROR",t.IdTaken="ID-TAKEN",t.InvalidKey="INVALID-KEY",t.Leave="LEAVE",t.Expire="EXPIRE",t})({});const I3="1.5.5";class RP extends x1.EventEmitter{constructor(e,n,r,a,l,c=5e3){super(),this.pingInterval=c,this._disconnected=!0,this._messagesQueue=[];const h=e?"wss://":"ws://";this._baseUrl=h+n+":"+r+a+"peerjs?key="+l}start(e,n){this._id=e;const r=`${this._baseUrl}&id=${e}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+I3),this._disconnected=!1,this._socket.onmessage=a=>{let l;try{l=JSON.parse(a.data),qe.log("Server message received:",l)}catch{qe.log("Invalid server message",a.data);return}this.emit(ba.Message,l)},this._socket.onclose=a=>{this._disconnected||(qe.log("Socket closed.",a),this._cleanup(),this._disconnected=!0,this.emit(ba.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),qe.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){qe.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:Xn.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const n of e)this.send(n)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(ba.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(e);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class D3{constructor(e){this.connection=e}startConnection(e){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===Ca.Media&&e._stream&&this._addTracksToConnection(e._stream,n),e.originator){const r=this.connection,a={ordered:!!e.reliable},l=n.createDataChannel(r.label,a);r._initializeDataChannel(l),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){qe.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const n=this.connection.peer,r=this.connection.connectionId,a=this.connection.type,l=this.connection.provider;qe.log("Listening for ICE candidates."),e.onicecandidate=c=>{!c.candidate||!c.candidate.candidate||(qe.log(`Received ICE candidates for ${n}:`,c.candidate),l.socket.send({type:Xn.Candidate,payload:{candidate:c.candidate,type:a,connectionId:r},dst:n}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":qe.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError($v.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":qe.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError($v.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":qe.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},qe.log("Listening for data channel"),e.ondatachannel=c=>{qe.log("Received data channel");const h=c.channel;l.getConnection(n,r)._initializeDataChannel(h)},qe.log("Listening for remote stream"),e.ontrack=c=>{qe.log("Received remote stream");const h=c.streams[0],m=l.getConnection(n,r);if(m.type===Ca.Media){const g=m;this._addStreamToMediaConnection(h,g)}}}cleanup(){qe.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const n=e.signalingState!=="closed";let r=!1;const a=this.connection.dataChannel;a&&(r=!!a.readyState&&a.readyState!=="closed"),(n||r)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,n=this.connection.provider;try{const r=await e.createOffer(this.connection.options.constraints);qe.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),qe.log("Set localDescription:",r,`for:${this.connection.peer}`);let a={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Ca.Data){const l=this.connection;a={...a,label:l.label,reliable:l.reliable,serialization:l.serialization}}n.socket.send({type:Xn.Offer,payload:a,dst:this.connection.peer})}catch(a){a!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(xn.WebRTC,a),qe.log("Failed to setLocalDescription, ",a))}}catch(r){n.emitError(xn.WebRTC,r),qe.log("Failed to createOffer, ",r)}}async _makeAnswer(){const e=this.connection.peerConnection,n=this.connection.provider;try{const r=await e.createAnswer();qe.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),qe.log("Set localDescription:",r,`for:${this.connection.peer}`),n.socket.send({type:Xn.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(a){n.emitError(xn.WebRTC,a),qe.log("Failed to setLocalDescription, ",a)}}catch(r){n.emitError(xn.WebRTC,r),qe.log("Failed to create answer, ",r)}}async handleSDP(e,n){n=new RTCSessionDescription(n);const r=this.connection.peerConnection,a=this.connection.provider;qe.log("Setting remote description",n);const l=this;try{await r.setRemoteDescription(n),qe.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await l._makeAnswer()}catch(c){a.emitError(xn.WebRTC,c),qe.log("Failed to setRemoteDescription, ",c)}}async handleCandidate(e){qe.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),qe.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(xn.WebRTC,n),qe.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(e,n){if(qe.log(`add tracks from stream ${e.id} to peer connection`),!n.addTrack)return qe.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(r=>{n.addTrack(r,e)})}_addStreamToMediaConnection(e,n){qe.log(`add stream ${e.id} to media connection ${n.connectionId}`),n.addStream(e)}}class M3 extends x1.EventEmitter{emitError(e,n){qe.error("Error:",n),this.emit("error",new jP(`${e}`,n))}}class jP extends Error{constructor(e,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=e}}class P3 extends M3{get open(){return this._open}constructor(e,n,r){super(),this.peer=e,this.provider=n,this.options=r,this._open=!1,this.metadata=r.metadata}}class _m extends P3{static#e=this.ID_PREFIX="mc_";get type(){return Ca.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,n,r){super(e,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||_m.ID_PREFIX+mr.randomToken(),this._negotiator=new D3(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{qe.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{qe.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){qe.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const n=e.type,r=e.payload;switch(e.type){case Xn.Answer:this._negotiator.handleSDP(n,r.sdp),this._open=!0;break;case Xn.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:qe.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(e,n={}){if(this._localStream){qe.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const r=this.provider._getMessages(this.connectionId);for(const a of r)this.handleMessage(a);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class IP{constructor(e){this._options=e}_buildRequest(e){const n=this._options.secure?"https":"http",{host:r,port:a,path:l,key:c}=this._options,h=new URL(`${n}://${r}:${a}${l}${c}/${e}`);return h.searchParams.set("ts",`${Date.now()}${Math.random()}`),h.searchParams.set("version",I3),fetch(h.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){qe.error("Error retrieving ID",e);let n="";throw this._options.path==="/"&&this._options.host!==mr.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let n="";throw this._options.host===mr.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw qe.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}class wm extends P3{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return Ca.Data}constructor(e,n,r){super(e,n,r),this.connectionId=this.options.connectionId||wm.ID_PREFIX+R3(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new D3(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{qe.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{qe.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{qe.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,n=!1){if(!this.open){this.emitError(_1.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,n)}async handleMessage(e){const n=e.payload;switch(e.type){case Xn.Answer:await this._negotiator.handleSDP(e.type,n.sdp);break;case Xn.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:qe.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}}class w1 extends wm{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>wm.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(n){return qe.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class F0 extends w1{close(e){super.close(e),this._chunkedData={}}constructor(e,n,r){super(e,n,r),this.chunker=new A3,this.serialization=ap.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const n=QT(e),r=n.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(e){const n=e.__peerData,r=this._chunkedData[n]||{data:[],count:0,total:e.total};if(r.data[e.n]=new Uint8Array(e.data),r.count++,this._chunkedData[n]=r,r.total===r.count){delete this._chunkedData[n];const a=SP(r.data);this._handleDataMessage({data:a})}}_send(e,n){const r=XT(e);if(r instanceof Promise)return this._send_blob(r);if(!n&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(e){const n=await e;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(e){const n=this.chunker.chunk(e);qe.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const r of n)this.send(r,!0)}}class DP extends w1{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,n){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=ap.None}}class MP extends w1{_handleDataMessage({data:e}){const n=this.parse(this.decoder.decode(e)),r=n.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",n)}_send(e,n){const r=this.encoder.encode(this.stringify(e));if(r.byteLength>=mr.chunkedMTU){this.emitError(_1.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...e){super(...e),this.serialization=ap.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class S1 extends M3{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[n,r]of this._connections)e[n]=r;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,n){super(),this._serializers={raw:DP,json:MP,binary:F0,"binary-utf8":F0,default:F0},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(e&&e.constructor==Object?n=e:e&&(r=e.toString()),n={debug:0,host:mr.CLOUD_HOST,port:mr.CLOUD_PORT,path:"/",key:S1.DEFAULT_KEY,token:mr.randomToken(),config:mr.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==mr.CLOUD_HOST?this._options.secure=mr.isSecure():this._options.host==mr.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&qe.setLogFunction(this._options.logFunction),qe.logLevel=this._options.debug||0,this._api=new IP(n),this._socket=this._createServerConnection(),!mr.supports.audioVideo&&!mr.supports.data){this._delayedAbort(xn.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!mr.validateId(r)){this._delayedAbort(xn.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(a=>this._initialize(a)).catch(a=>this._abort(xn.ServerError,a))}_createServerConnection(){const e=new RP(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(ba.Message,n=>{this._handleMessage(n)}),e.on(ba.Error,n=>{this._abort(xn.SocketError,n)}),e.on(ba.Disconnected,()=>{this.disconnected||(this.emitError(xn.Network,"Lost connection to server."),this.disconnect())}),e.on(ba.Close,()=>{this.disconnected||this._abort(xn.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const n=e.type,r=e.payload,a=e.src;switch(n){case Xn.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Xn.Error:this._abort(xn.ServerError,r.msg);break;case Xn.IdTaken:this._abort(xn.UnavailableID,`ID "${this.id}" is taken`);break;case Xn.InvalidKey:this._abort(xn.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case Xn.Leave:qe.log(`Received leave message from ${a}`),this._cleanupPeer(a),this._connections.delete(a);break;case Xn.Expire:this.emitError(xn.PeerUnavailable,`Could not connect to peer ${a}`);break;case Xn.Offer:{const l=r.connectionId;let c=this.getConnection(a,l);if(c&&(c.close(),qe.warn(`Offer received for existing Connection ID:${l}`)),r.type===Ca.Media){const m=new _m(a,this,{connectionId:l,_payload:r,metadata:r.metadata});c=m,this._addConnection(a,c),this.emit("call",m)}else if(r.type===Ca.Data){const m=new this._serializers[r.serialization](a,this,{connectionId:l,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});c=m,this._addConnection(a,c),this.emit("connection",m)}else{qe.warn(`Received malformed connection type:${r.type}`);return}const h=this._getMessages(l);for(const m of h)c.handleMessage(m);break}default:{if(!r){qe.warn(`You received a malformed message from ${a} of type ${n}`);return}const l=r.connectionId,c=this.getConnection(a,l);c&&c.peerConnection?c.handleMessage(e):l?this._storeMessage(l,e):qe.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,n){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(n)}_getMessages(e){const n=this._lostMessages.get(e);return n?(this._lostMessages.delete(e),n):[]}connect(e,n={}){if(n={serialization:"default",...n},this.disconnected){qe.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(xn.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[n.serialization](e,this,n);return this._addConnection(e,r),r}call(e,n,r={}){if(this.disconnected){qe.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(xn.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){qe.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const a=new _m(e,this,{...r,_stream:n});return this._addConnection(e,a),a}_addConnection(e,n){qe.log(`add connection ${n.type}:${n.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(n)}_removeConnection(e){const n=this._connections.get(e.peer);if(n){const r=n.indexOf(e);r!==-1&&n.splice(r,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,n){const r=this._connections.get(e);if(!r)return null;for(const a of r)if(a.connectionId===n)return a;return null}_delayedAbort(e,n){setTimeout(()=>{this._abort(e,n)},0)}_abort(e,n){qe.error("Aborting!"),this.emitError(e,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(qe.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const n=this._connections.get(e);if(n)for(const r of n)r.close()}disconnect(){if(this.disconnected)return;const e=this.id;qe.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)qe.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)qe.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=n=>{}){this._api.listAllPeers().then(n=>e(n)).catch(n=>this._abort(xn.ServerError,n))}}var O3=S1;let H0=null,sd=[],Sm=[];const L3=()=>(H0||(H0=new(window.AudioContext||window.webkitAudioContext)),H0),id=()=>{sd.forEach(t=>{try{t.stop(),t.disconnect()}catch{}}),sd=[],Sm.forEach(t=>{try{t.disconnect()}catch{}}),Sm=[]},PP=()=>{try{const t=L3();t.state==="suspended"&&t.resume(),id();const e=t.createOscillator(),n=t.createGain();e.type="sine",e.frequency.value=440,e.connect(n),n.connect(t.destination);const r=t.currentTime;let a=!0;const l=()=>{if(!a)return;const h=t.createOscillator(),m=t.createGain();h.connect(m),m.connect(t.destination),h.frequency.value=425,h.type="sine";const g=t.currentTime,y=t.createOscillator();y.type="sine",y.frequency.value=20;const b=t.createGain();b.gain.value=500,y.connect(b),b.connect(h.frequency),y.start(g),y.stop(g+2),m.gain.setValueAtTime(0,g),m.gain.linearRampToValueAtTime(.1,g+.1),m.gain.setValueAtTime(.1,g+1.8),m.gain.linearRampToValueAtTime(0,g+2),h.start(g),h.stop(g+2),sd.push(h),sd.push(y),Sm.push(m)};l();const c=setInterval(l,4e3);return()=>{a=!1,clearInterval(c),id()}}catch(t){return console.error("Error playing outgoing ring:",t),()=>{}}},OP=()=>{try{const t=L3();t.state==="suspended"&&t.resume(),id();let e=!0;const n=()=>{if(!e)return;const a=t.currentTime,l=(c,h)=>{const m=t.createOscillator(),g=t.createGain();m.connect(g),g.connect(t.destination),m.frequency.value=h,m.type="square",g.gain.setValueAtTime(0,c),g.gain.linearRampToValueAtTime(.1,c+.05),g.gain.setValueAtTime(.1,c+.2),g.gain.linearRampToValueAtTime(0,c+.25),m.start(c),m.stop(c+.3),sd.push(m),Sm.push(g)};l(a,880),l(a+.4,880),l(a+.8,880)};n();const r=setInterval(n,3e3);return()=>{e=!1,clearInterval(r),id()}}catch(t){return console.error("Error playing incoming ring:",t),()=>{}}},Aw=()=>{id()},_i={SCREEN_SHARE:"screen_share",HIGH_QUALITY:"high_quality"},LP={admin:[_i.SCREEN_SHARE,_i.HIGH_QUALITY],moderator:[_i.SCREEN_SHARE],member:[]},VP={premium:[_i.SCREEN_SHARE,_i.HIGH_QUALITY],developer:[_i.SCREEN_SHARE,_i.HIGH_QUALITY],verified:[]},V3=(t,e)=>{if(!t)return!1;const n=t.role||"member";if((LP[n]||[]).includes(e))return!0;const a=t.badges||[];for(const l of a)if((VP[l]||[]).includes(e))return!0;return!1},U3=N.createContext(),$0=10,Rw=300,E1=()=>{const t=N.useContext(U3);if(!t)throw new Error("useSoundboard must be used within SoundboardProvider");return t},UP=({children:t})=>{const{error:e}=Gr(),[n,r]=N.useState(()=>{try{const h=localStorage.getItem("dss_custom_sounds");return h?JSON.parse(h):[]}catch{return[]}});N.useEffect(()=>{localStorage.setItem("dss_custom_sounds",JSON.stringify(n))},[n]);const c={customSounds:n,addSound:async(h,m)=>n.length>=$0?(e(`Maximum ${$0} sounds allowed.`),!1):m.size>Rw*1024?(e(`File too large. Max ${Rw}KB.`),!1):new Promise(g=>{const y=new FileReader;y.onload=b=>{const _={id:Date.now().toString(),name:h.trim()||"Sound",src:b.target.result};r(k=>[...k,_]),g(!0)},y.readAsDataURL(m)}),removeSound:h=>{r(m=>m.filter(g=>g.id!==h))},MAX_SOUNDS:$0};return u.jsx(U3.Provider,{value:c,children:t})},z3=N.createContext(),kd=()=>{const t=N.useContext(z3);if(!t)throw new Error("useCall must be used within CallProvider");return t},zP=({children:t})=>{const{currentUser:e,userProfile:n}=Cn(),{error:r}=Gr(),[a,l]=N.useState(null),[c,h]=N.useState(null),[m,g]=N.useState("idle"),[y,b]=N.useState(null),[_,k]=N.useState(null),[R,j]=N.useState(null),[T,H]=N.useState(null),[q,I]=N.useState(null),[z,B]=N.useState(null),{customSounds:$,addSound:w,removeSound:E}=E1(),[A,D]=N.useState(!1),[O,L]=N.useState(!1),[P,pe]=N.useState({audioInputs:[],videoInputs:[],audioOutputs:[]}),[ce,Y]=N.useState(""),[Z,J]=N.useState(""),Te=U=>{const K=$.find(ke=>ke.id===U);if(!K)return;const ee=new Audio(K.src);ee.volume=.5,ae.current.push(ee),ee.onended=()=>{ae.current=ae.current.filter(ke=>ke!==ee)},ee.play().catch(ke=>console.error("Error playing sound:",ke)),z&&z.open?(console.log("Sending sound effect:",K.name),z.send({type:"SOUND_EFFECT",payload:{src:K.src,name:K.name}})):console.warn("Cannot send sound effect. Data connection missing or closed.")};N.useRef(null),N.useRef(null);const Ae=N.useRef(null),F=N.useRef(null),W=N.useRef(null),ae=N.useRef([]),ge=()=>{ae.current.forEach(U=>{U.pause(),U.currentTime=0}),ae.current=[]},Re=N.useRef(null);N.useEffect(()=>{F.current=T},[T]),N.useEffect(()=>{W.current=R},[R]),N.useEffect(()=>(Re.current&&(Re.current(),Re.current=null),Aw(),m==="incoming"?Re.current=OP():m==="outgoing"&&(Re.current=PP()),()=>{Re.current&&Re.current(),Aw()}),[m]),N.useEffect(()=>{if(!e)return;const U=new O3;return U.on("open",K=>{console.log("My Peer ID is:",K),h(K),l(U)}),U.on("call",K=>{console.log("Receiving PeerJS call connection..."),W.current&&W.current.peer===K.peer&&(console.log("Replacing existing call (upgrade/renegotiation detected)"),W.current.removeAllListeners&&W.current.removeAllListeners("close"),W.current.close());const ee=F.current||xe.current;ee?(console.log("Answering call with local stream"),K.answer(ee)):(console.warn("No local stream found when answering! Answering audio-only or empty."),K.answer()),K.on("stream",ke=>{console.log("Received remote stream"),I(ke)}),K.on("close",()=>{he()}),j(K),g("connected")}),U.on("error",K=>{console.error("PeerJS Error:",K),K.type}),U.on("connection",K=>{console.log("Data connection received from peer:",K.peer),K.on("open",()=>{console.log("Data connection open event fired."),B(K)}),K.on("data",ee=>{if(ee&&ee.type==="SOUND_EFFECT"&&ee.payload?.src){console.log("Received sound effect:",ee.payload.name);const ke=new Audio(ee.payload.src);ke.volume=.5,ae.current.push(ke),ke.onended=()=>{ae.current=ae.current.filter(Oe=>Oe!==ke)},ke.play().catch(Oe=>console.error("Error playing remote sound:",Oe))}}),K.on("close",()=>{console.log("Data connection closed."),B(null)}),K.on("error",ee=>console.error("Data connection error:",ee)),K.open&&(console.log("Data connection already open."),B(K))}),()=>{U.destroy()}},[e]),N.useEffect(()=>{if(!e)return;const U=is(dt(ye,"users",e.uid,"incomingCalls"),vo("status","==","pending")),K=nr(U,ee=>{ee.docChanges().forEach(ke=>{if(ke.type==="added"){const Oe=ke.doc.data();b({id:ke.doc.id,...Oe}),g("incoming")}ke.type==="removed"&&b(Oe=>Oe&&Oe.id===ke.doc.id?(g(Fe=>(Fe!=="connected"&&he(!1),Fe)),null):Oe)})});return()=>K()},[e]);const _e=async()=>{if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return console.warn("mediaDevices API not available"),{audioInputs:[],videoInputs:[],audioOutputs:[]};try{const U=await navigator.mediaDevices.enumerateDevices(),K=U.filter(Oe=>Oe.kind==="audioinput"),ee=U.filter(Oe=>Oe.kind==="videoinput"),ke=U.filter(Oe=>Oe.kind==="audiooutput");return pe({audioInputs:K,videoInputs:ee,audioOutputs:ke}),!ce&&K.length>0&&Y(K[0].deviceId),!Z&&ee.length>0&&J(ee[0].deviceId),console.log("Devices enumerated:",{audioInputs:K.length,videoInputs:ee.length}),{audioInputs:K,videoInputs:ee,audioOutputs:ke}}catch(U){return console.error("Failed to enumerate devices:",U),{audioInputs:[],videoInputs:[],audioOutputs:[]}}};N.useEffect(()=>{if(!navigator.mediaDevices){console.warn("mediaDevices API not available - skipping device enumeration");return}return _e(),navigator.mediaDevices.addEventListener("devicechange",_e),()=>navigator.mediaDevices.removeEventListener("devicechange",_e)},[]);const Ne=async(U=!0)=>{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return console.error("mediaDevices API not available - requires HTTPS or localhost"),r("Kamera/mikrofon iin HTTPS veya localhost gerekli"),null;try{P.audioInputs.length===0&&await _e();const K={echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,channelCount:1,sampleRate:48e3,sampleSize:16,...ce&&{deviceId:{exact:ce}}},ee=U?{width:1280,height:720,...Z&&{deviceId:{exact:Z}}}:!1,ke=await navigator.mediaDevices.getUserMedia({video:ee,audio:K});return console.log("Media stream acquired with selected devices"),H(ke),ke}catch(K){return console.error("Failed to get local stream",K),r("Could not access camera/microphone"),null}},Ke=async(U,K="video")=>{if(!a||!c){r("Connection not ready. Please wait a moment.");return}if(k(U),g("outgoing"),!await Ne(K==="video")){g("idle");return}L(K==="voice");try{const ke=e.displayName||n?.displayName||"Unknown",Oe=e.photoURL||n?.photoURL||n?.photoUrl||null,Fe=await An(dt(ye,"users",U.id,"incomingCalls"),{callerId:e.uid,callerName:ke,callerPhotoUrl:Oe,peerId:c,type:K,status:"pending",timestamp:bt()});Ae.current=Fe.id;const Le=nr(Me(ye,"users",U.id,"incomingCalls",Fe.id),Et=>{const Tt=Ae.current===Fe.id;if(!Et.exists())Tt&&m==="outgoing"&&(r("Call ended or declined"),he(!1)),Le();else{const Qt=Et.data();Qt.status==="accepted"?Tt&&g("connected"):Qt.status==="rejected"&&Tt&&(r("Call declined"),he(!0))}},Et=>{console.warn("Call snapshot error:",Et),Ae.current===Fe.id&&(r("Call declined"),he(!1))})}catch(ke){console.error("Signaling failed:",ke),r("Failed to direct call"),he()}};N.useEffect(()=>{if(!R||!R.peerConnection)return;const U=()=>{const K=R.peerConnection.connectionState,ee=R.peerConnection.iceConnectionState;console.log(`Connection State: ${K}, ICE State: ${ee}`),(ee==="disconnected"||ee==="failed"||ee==="closed")&&(console.warn("Peer connection lost/failed. Ending call..."),ee==="failed"||ee==="closed"?he():ee==="disconnected"&&W.current===R&&setTimeout(()=>{W.current&&W.current.peerConnection.iceConnectionState==="disconnected"&&(console.log("Connection still disconnected after timeout. Ending."),he())},3e3))};return R.peerConnection.addEventListener("iceconnectionstatechange",U),R.peerConnection.addEventListener("connectionstatechange",U),()=>{R&&R.peerConnection&&(R.peerConnection.removeEventListener("iceconnectionstatechange",U),R.peerConnection.removeEventListener("connectionstatechange",U))}},[R]);const Ge=async()=>{if(!y||!a)return;g("connected");const U=y.type==="video",K=await Ne(U);if(!K){console.error("Stream failed, rejecting call signal.");try{await it(Me(ye,"users",e.uid,"incomingCalls",y.id),{status:"rejected"})}catch{}he(!1);return}if(U||L(!0),console.log("Connecting to peer:",y.peerId),(!a||a.disconnected)&&(r("Peer connection lost. Reconnecting..."),a?.reconnect(),await new Promise(ee=>setTimeout(ee,1e3)),!a||a.disconnected)){r("Could not establish P2P connection."),he();return}try{const ee=a.call(y.peerId,K);if(!ee){r("Call failed to initialize."),he();return}ee.on("stream",ke=>{I(ke)}),ee.on("close",()=>{he()}),ee.on("error",ke=>{console.error("Call error:",ke),he()}),j(ee);try{await it(Me(ye,"users",e.uid,"incomingCalls",y.id),{status:"accepted"})}catch(ke){console.error("Error updating signal doc",ke)}}catch(ee){console.error("Error calling peer:",ee),r("Failed to connect to peer."),he()}try{console.log("Establishing data connection to caller:",y.peerId);const ee=a.connect(y.peerId);ee.on("open",()=>{console.log("Data connection opened (Callee side)!"),B(ee)}),ee.on("data",ke=>{if(ke&&ke.type==="SOUND_EFFECT"&&ke.payload?.src){const Oe=new Audio(ke.payload.src);Oe.volume=.5,ae.current.push(Oe),Oe.onended=()=>{ae.current=ae.current.filter(Fe=>Fe!==Oe)},Oe.play().catch(Fe=>console.error(Fe))}}),ee.on("close",()=>B(null)),ee.on("error",ke=>console.error("Data connection error (Callee):",ke))}catch(ee){console.error("Failed to establish data connection",ee)}},he=async(U=!0)=>{oe.current&&(oe.current.getTracks().forEach(ee=>ee.stop()),oe.current=null),xe.current=null;const K=F.current;if(K&&K.getTracks().forEach(ee=>{ee.stop(),console.log("Stopped track:",ee.kind)}),T&&T.getTracks().forEach(ee=>ee.stop()),H(null),F.current=null,R&&(R.close(),j(null)),I(null),g("idle"),b(null),k(null),D(!1),D(!1),L(!1),z&&(z.close(),B(null)),ge(),Ae.current&&U&&_)try{await jo(Me(ye,"users",_.id,"incomingCalls",Ae.current))}catch{}if(y&&U)try{m==="incoming"?await it(Me(ye,"users",e.uid,"incomingCalls",y.id),{status:"rejected"}):await jo(Me(ye,"users",e.uid,"incomingCalls",y.id))}catch{}Ae.current=null},Ce=()=>{if(T){const U=T.getAudioTracks()[0];U&&(U.enabled=!U.enabled,D(!U.enabled))}},Ve=()=>{if(T){const U=T.getVideoTracks()[0];U&&(U.enabled=!U.enabled,L(!U.enabled))}},oe=N.useRef(null),xe=N.useRef(null),ze=async(U=null)=>{if(oe.current){await Se();return}try{console.log("Requesting display media...",U);let K={},ee=U?.width||1280,ke=U?.height||720,Oe=U?.frameRate||30;U||V3(n,_i.HIGH_QUALITY)&&(ee=1920,ke=1080,Oe=60);let Fe;if(U?.sourceId&&window.require){console.log("Using Electron getUserMedia with sourceId:",U.sourceId);try{Fe=await navigator.mediaDevices.getUserMedia({audio:{mandatory:{chromeMediaSource:"desktop"}},video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:U.sourceId,maxWidth:ee,maxHeight:ke,maxFrameRate:Oe}}})}catch(Pe){throw console.error("Electron getUserMedia failed:",Pe),Pe}}else{const Pe={video:{width:{ideal:ee},height:{ideal:ke},frameRate:{ideal:Oe},displaySurface:U?.displaySurface},audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!1}};console.log("Using Web getDisplayMedia with constraints:",Pe),Fe=await navigator.mediaDevices.getDisplayMedia(Pe)}const Le=Fe.getVideoTracks()[0];L(!1),console.log("Display media obtained:",Le.label);const Et=Fe.getAudioTracks()[0];let Tt=null;if(Et){console.log("System audio captured! Mixing with microphone...");let Pe=T;if(!Pe&&P.audioInputs.length>0)try{Pe=await navigator.mediaDevices.getUserMedia({audio:!0})}catch{console.warn("Failed to get mic for mixing")}if(Pe&&Pe.getAudioTracks().length>0){const nt=Pe.getAudioTracks()[0],ht=new(window.AudioContext||window.webkitAudioContext),Zt=ht.createMediaStreamDestination(),Ht=ht.createMediaStreamSource(new MediaStream([nt])),mt=ht.createMediaStreamSource(new MediaStream([Et])),Tn=ht.createGain(),Xt=ht.createGain();Tn.gain.value=1,Xt.gain.value=1,Ht.connect(Tn).connect(Zt),mt.connect(Xt).connect(Zt),Tt=Zt.stream.getAudioTracks()[0],oe.currentAudioContext=ht}else Tt=Et}T&&!xe.current&&(xe.current=T),Le.onended=()=>{console.log("Screen track ended by user/browser UI"),Se()},oe.current=Fe;const Qt=Tt?[Tt]:T?T.getAudioTracks():[],Ee=new MediaStream([Le,...Qt]);if(H(Ee),R&&R.peerConnection){const Pe=R.peerConnection.getSenders(),nt=Pe.find(ht=>ht.track&&ht.track.kind==="video");if(nt&&await nt.replaceTrack(Le),Tt){const ht=Pe.find(Zt=>Zt.track&&Zt.track.kind==="audio");ht&&(console.log("Replacing audio sender with mixed track..."),await ht.replaceTrack(Tt))}if(!nt){console.log("Audio-only -> Screen Share upgrade. Renegotiating...");const ht=R.peer;if(a&&ht){R.removeAllListeners("close");const Zt=a.call(ht,Ee);Zt.on("stream",Ht=>I(Ht)),Zt.on("close",()=>he()),Zt.on("error",()=>he()),j(Zt)}}}}catch(K){console.error("Error starting screen share:",K),r("Failed to start screen share")}},Se=async()=>{if(oe.current)if(console.log("Stopping screen share..."),oe.currentAudioContext&&(oe.currentAudioContext.close(),oe.currentAudioContext=null),oe.current.getTracks().forEach(U=>U.stop()),oe.current=null,xe.current){console.log("Reverting to previous stream state...");const U=xe.current.getVideoTracks()[0],K=xe.current.getAudioTracks();if(R&&R.peerConnection){const ee=R.peerConnection.getSenders(),ke=ee.find(Fe=>Fe.track&&Fe.track.kind==="video");if(U&&ke)try{await ke.replaceTrack(U)}catch{}const Oe=ee.find(Fe=>Fe.track&&Fe.track.kind==="audio");Oe&&K.length>0&&(console.log("Reverting audio sender to original mic..."),await Oe.replaceTrack(K[0]))}H(xe.current),xe.current=null}else{console.log("No stored camera stream, requesting new user media...");try{const U=await Ne(!0);if(U&&R&&R.peerConnection){const K=U.getVideoTracks()[0],ee=R.peerConnection.getSenders().find(ke=>ke.track&&ke.track.kind==="video");ee&&await ee.replaceTrack(K)}}catch(U){console.error("Failed to restore camera:",U)}}},ue={startCall:Ke,answerCall:Ge,endCall:he,toggleAudio:Ce,toggleVideo:Ve,callStatus:m,incomingCall:y,outgoingCallUser:_,localStream:T,remoteStream:q,isMuted:A,isVideoOff:O,activeCall:R,isScreenSharing:!!oe.current,toggleScreenShare:ze,availableDevices:P,selectedMicId:ce,selectedCameraId:Z,setSelectedMicId:Y,setSelectedCameraId:J,playSound:Te,customSounds:$,addSound:w,removeSound:E};return u.jsx(z3.Provider,{value:ue,children:t})},C1=({user:t,isOpen:e,onClose:n,onMessage:r})=>{if(!t)return null;const a=c=>({admin:"#f23f42",moderator:"#faa81a",member:"#80848e"})[c]||"#80848e",{startCall:l}=kd();return u.jsx(Hs,{isOpen:e,onClose:n,title:"",size:"sm",showCloseButton:!1,children:u.jsxs("div",{className:"relative overflow-hidden rounded-lg -m-6 min-h-[400px] flex flex-col",children:[u.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-colors",style:{backgroundColor:t.themeColor||"#6366f1",backgroundImage:t.bannerUrl?`url(${t.bannerUrl})`:`linear-gradient(to bottom right, ${t.themeColor||"#6366f1"}, #000)`}}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/95 via-black/50 to-transparent"}),u.jsx("button",{onClick:n,className:"absolute top-4 right-4 p-2 bg-black/40 hover:bg-black/60 rounded-full text-white/80 hover:text-white transition-colors z-20 backdrop-blur-sm",children:u.jsxs("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{fill:"none",d:"M0 0h24v24H0z"}),u.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})]})}),u.jsxs("div",{className:"relative z-10 p-6 mt-auto flex flex-col items-center text-center",children:[u.jsxs("div",{className:"relative group mb-4",children:[t.photoUrl?u.jsx("img",{src:t.photoUrl,alt:t.displayName,className:"w-32 h-32 rounded-full border-4 object-cover shadow-2xl",style:{borderColor:t.themeColor||"#1e1f22"},onError:c=>{c.target.style.display="none",c.target.nextSibling.style.display="flex"}},t.photoUrl):null,u.jsx("div",{className:"w-32 h-32 rounded-full border-4 flex items-center justify-center text-white font-bold text-5xl shadow-2xl",style:{display:t.photoUrl?"none":"flex",borderColor:t.themeColor||"#1e1f22",backgroundColor:t.themeColor||"#6366f1"},children:t.displayName?.[0]?.toUpperCase()||"U"})]}),u.jsxs("div",{className:"space-y-1 w-full",children:[u.jsxs("h2",{className:"text-3xl font-bold text-white flex items-center justify-center gap-2 drop-shadow-md",children:[t.displayName||"Unknown",(t.role==="admin"||t.role==="premium")&&u.jsx("div",{className:"text-brand-primary drop-shadow-none",title:"Premium Member",children:u.jsx(Io,{size:24,color:t.themeColor||"#6366f1"})})]}),u.jsx("div",{className:"flex justify-center mt-2",children:u.jsx("span",{className:"px-4 py-1.5 rounded-full text-sm font-semibold border backdrop-blur-md shadow-lg",style:{backgroundColor:`${a(t.role)}30`,color:"#fff",borderColor:`${a(t.role)}80`},children:t.role?.charAt(0).toUpperCase()+t.role?.slice(1)})})]}),u.jsx("div",{className:"flex justify-center gap-2 mt-4 flex-wrap",children:(()=>{const c=new Set(t.badges||[]);t.role==="admin"&&c.add("admin");const h=Array.from(c).filter(m=>m!=="premium").map(m=>uP[m]).filter(Boolean);return h.length===0?null:u.jsx("div",{className:"p-1.5 rounded-xl bg-black/40 backdrop-blur-md border border-white/10 flex gap-2",children:h.map(m=>{const g=m.icon;return u.jsxs("div",{className:"relative group cursor-help p-1 hover:bg-white/10 rounded transition-colors",children:[u.jsx(g,{size:20,color:m.color}),u.jsxs("div",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 px-2 py-1 bg-black text-white text-xs rounded shadow-lg whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-50",children:[u.jsx("div",{className:"font-bold",children:m.label}),m.description&&u.jsx("div",{className:"text-gray-300 font-normal text-[10px]",children:m.description}),u.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-black"})]})]},m.id)})})})()}),u.jsxs("div",{className:"flex items-center gap-3 mt-4 bg-black/30 px-4 py-2 rounded-full backdrop-blur-sm border border-white/5",children:[u.jsx("div",{className:At("w-3 h-3 rounded-full shadow-lg shadow-white/20",t.presence==="online"||!t.presence&&t.isOnline?"bg-green-500":t.presence==="idle"?"bg-yellow-500":t.presence==="dnd"?"bg-red-500":"bg-gray-500")}),t.status?u.jsxs("span",{className:"text-sm text-gray-200 flex gap-2",children:[u.jsx("span",{children:t.status.emoji}),u.jsx("span",{children:t.status.text})]}):u.jsx("span",{className:"text-sm text-gray-300",children:t.presence==="online"||!t.presence&&t.isOnline?"Online":"Offline"})]}),t.id!==Cn().currentUser?.uid&&u.jsxs("div",{className:"flex gap-4 justify-center mt-6 w-full max-w-xs",children:[u.jsxs("button",{onClick:()=>r&&r(t),className:"flex-1 py-3 bg-white text-black font-bold rounded-xl hover:bg-gray-200 transition-colors shadow-lg flex items-center justify-center gap-2",children:[u.jsx(j7,{size:20})," Message"]}),u.jsx("button",{onClick:()=>l(t,"voice"),className:"p-3 bg-black/50 text-white rounded-xl hover:bg-black/70 border border-white/10 transition-colors backdrop-blur-sm",title:"Voice Call",children:u.jsx(I7,{size:22})}),u.jsx("button",{onClick:()=>l(t,"video"),className:"p-3 bg-black/50 text-white rounded-xl hover:bg-black/70 border border-white/10 transition-colors backdrop-blur-sm",title:"Video Call",children:u.jsx(nd,{size:22})})]}),t.bio&&u.jsxs("div",{className:"mt-6 w-full text-left bg-black/20 p-4 rounded-xl backdrop-blur-sm border border-white/5",children:[u.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase mb-2 tracking-wider",children:"About Me"}),u.jsx("p",{className:"text-gray-200 text-sm leading-relaxed whitespace-pre-wrap",children:t.bio})]}),u.jsxs("div",{className:"mt-4 text-xs text-gray-500 font-medium uppercase tracking-widest",children:["Member since ",t.createdAt?new Date(t.createdAt.seconds*1e3).toLocaleDateString("en-US",{month:"short",year:"numeric"}):"Unknown"]})]})]})})},ac=({isOpen:t,onClose:e,onConfirm:n,title:r="Confirm Action",message:a="Are you sure you want to proceed?",confirmText:l="Confirm",cancelText:c="Cancel",variant:h="danger"})=>{const m=()=>{n(),e()};return u.jsx(Hs,{isOpen:t,onClose:e,title:r,size:"sm",children:u.jsxs("div",{className:"space-y-6",children:[u.jsx("p",{className:"text-dark-text",children:a}),u.jsxs("div",{className:"flex gap-3 justify-end",children:[u.jsx(Ze,{variant:"secondary",onClick:e,children:c}),u.jsx(Ze,{variant:h,onClick:m,children:l})]})]})})},BP=()=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let n=0;n<8;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},FP=({isOpen:t,onClose:e,serverId:n})=>{const[r,a]=N.useState(""),[l,c]=N.useState(!1),[h,m]=N.useState(!1),[g,y]=N.useState(!1),{success:b,error:_}=Gr(),k=async()=>{c(!0);try{const j=BP();await Ar(Me(ye,"inviteCodes",j),{serverId:n,createdAt:bt(),expiresAt:new Date(Date.now()+(g?365*24*60*60*1e3:1440*60*1e3)),maxUses:g?-1:1,uses:0,isActive:!0,isUnlimited:g}),a(j),b("Invite code generated!")}catch(j){console.error("Error generating invite:",j),_("Failed to generate invite code")}finally{c(!1)}},R=()=>{navigator.clipboard.writeText(r),m(!0),b("Copied to clipboard!"),setTimeout(()=>m(!1),2e3)};return u.jsx(Hs,{isOpen:t,onClose:e,title:"Invite Code",size:"sm",children:u.jsx("div",{className:"space-y-4",children:r?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"bg-dark-bg p-4 rounded-lg text-center",children:[u.jsx("div",{className:"text-3xl font-mono font-bold text-brand-primary mb-2",children:r}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Ze,{variant:"secondary",onClick:R,className:"flex-1 flex items-center justify-center gap-2",children:h?u.jsxs(u.Fragment,{children:[u.jsx(Do,{size:20}),"Copied!"]}):u.jsxs(u.Fragment,{children:[u.jsx(NT,{size:20}),"Copy Code"]})}),u.jsx(Ze,{variant:"secondary",onClick:()=>{a(""),m(!1),y(!1)},className:"flex items-center justify-center gap-2 px-4",title:"Generate new code",children:u.jsx(Q7,{size:20})})]})]}),u.jsxs("div",{className:"text-xs text-dark-muted space-y-1",children:[u.jsxs("div",{children:[" ",g?"Expires in 1 year":"Expires in 24 hours"]}),u.jsxs("div",{children:[" ",g?"Unlimited uses":"One-time use only"]}),u.jsx("div",{children:" Share with trusted users"})]}),u.jsx(Ze,{variant:"secondary",onClick:e,className:"w-full",children:"Close"})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("p",{className:"text-dark-text text-sm",children:"Generate an invite code for this server."}),u.jsxs("label",{className:"flex items-center gap-2 p-3 rounded bg-dark-bg cursor-pointer hover:bg-opacity-80 transition-colors",children:[u.jsx("input",{type:"checkbox",checked:g,onChange:j=>y(j.target.checked),className:"w-4 h-4 rounded border-gray-600 bg-dark-bg text-brand-primary focus:ring-brand-primary"}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-white text-sm font-medium",children:"Unlimited Uses"}),u.jsx("span",{className:"text-dark-muted text-xs",children:"Code will not expire after one use"})]})]})]}),u.jsx(Ze,{variant:"primary",onClick:k,disabled:l,className:"w-full",children:l?"Generating...":"Generate Invite Code"})]})})})},HP=[{emoji:"",text:"Gaming",type:"gaming"},{emoji:"",text:"Working",type:"working"},{emoji:"",text:"Listening to music",type:"music"},{emoji:"",text:"Watching",type:"watching"},{emoji:"",text:"Eating",type:"eating"},{emoji:"",text:"AFK",type:"afk"},{emoji:"",text:"Focusing",type:"focusing"},{emoji:"",text:"Studying",type:"studying"}],jw={online:{color:"bg-green-500",label:"Online",icon:""},idle:{color:"bg-yellow-500",label:"Idle",icon:""},dnd:{color:"bg-red-500",label:"Do Not Disturb",icon:""},invisible:{color:"bg-gray-500",label:"Invisible",icon:""},offline:{color:"bg-gray-500",label:"Offline",icon:""}},$P=t=>jw[t]||jw.offline,B3=({status:t,size:e="md",className:n})=>{const r=$P(t),a={sm:"w-2.5 h-2.5",md:"w-3 h-3",lg:"w-4 h-4"};return t==="invisible"?null:u.jsx("div",{className:At("rounded-full border-2 border-dark-bg",r.color,a[e]||a.md,n),title:r.label})},qP=({dm:t,currentUserId:e,isSelected:n,onClick:r,onContextMenu:a})=>{const l=t.participants.find(m=>m!==e),[c,h]=N.useState(null);return N.useEffect(()=>{(async()=>{if(l)try{const g=await tp(Me(ye,"users",l));g.exists()&&h({id:g.id,...g.data()})}catch(g){console.error("Error fetching DM user:",g)}})()},[l]),c?u.jsxs("button",{onClick:r,onContextMenu:a,className:At("w-full flex items-center gap-3 px-2 py-2 rounded mb-1 group relative","text-dark-muted hover:bg-dark-hover hover:text-dark-text","transition-colors duration-150",n&&"bg-dark-hover text-dark-text"),children:[u.jsx("div",{className:"relative",children:c.photoUrl?u.jsx("img",{src:c.photoUrl,alt:c.displayName,className:"w-8 h-8 rounded-full object-cover"}):u.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white text-sm font-bold",children:c.displayName?.[0]?.toUpperCase()})}),u.jsxs("div",{className:"flex-1 text-left overflow-hidden",children:[u.jsxs("div",{className:"text-sm font-medium truncate flex justify-between items-center",children:[u.jsx("span",{children:c.displayName}),t.updatedAt&&u.jsx("span",{className:"text-[10px] text-gray-500 hidden group-hover:block",children:sp(t.updatedAt)})]}),u.jsx("div",{className:"text-xs truncate opacity-70",children:t.lastMessage?.text||"Start a conversation"})]})]}):null},GP=({dms:t,selectedDmId:e,onSelectDm:n})=>{const{currentUser:r}=Cn(),[a,l]=N.useState(null),[c,h]=N.useState([]),m=(b,_)=>{b.preventDefault(),l({x:b.pageX,y:b.pageY,dmId:_.id})},g=async b=>{if(h(_=>[..._,b]),l(null),!!r)try{const _=Me(ye,"dms",b);await it(_,{hiddenFor:np(r.uid)}),e===b&&n(null)}catch(_){console.error("Error deleting DM:",_),h(k=>k.filter(R=>R!==b))}};N.useEffect(()=>{const b=()=>l(null);return window.addEventListener("click",b),()=>window.removeEventListener("click",b)},[]);const y=t?.filter(b=>!c.includes(b.id))||[];return y.length===0?u.jsxs("div",{className:"px-4 py-8 text-center text-dark-muted text-sm",children:[u.jsx("p",{children:"No conversations yet."}),u.jsx("p",{className:"mt-2",children:"Start a DM from the friends list!"})]}):u.jsxs("div",{className:"flex-1 overflow-y-auto py-3",children:[u.jsxs("div",{className:"px-2",children:[u.jsx("div",{className:"text-xs font-semibold text-dark-muted uppercase px-2 mb-2 flex justify-between items-center",children:u.jsx("span",{children:"Direct Messages"})}),u.jsx("div",{className:"space-y-0.5",children:y.map(b=>u.jsx(qP,{dm:b,currentUserId:r.uid,isSelected:e===b.id,onClick:()=>n(b),onContextMenu:_=>m(_,b)},b.id))})]}),a&&u.jsx("div",{className:"fixed bg-dark-sidebar border border-dark-hover shadow-xl rounded-md z-50 py-1 min-w-[160px]",style:{top:a.y,left:a.x},children:u.jsxs("button",{onClick:()=>g(a.dmId),className:"w-full text-left px-4 py-2 hover:bg-red-500/10 text-red-400 hover:text-red-500 text-sm flex items-center gap-2 transition-colors",children:[u.jsx(Ei,{size:16}),"Delete Conversation"]})})]})};let q0=null;const op=()=>(q0||(q0=new(window.AudioContext||window.webkitAudioContext)),q0),oc=async(t,e,n="sine",r=.3)=>{try{const a=op();a.state==="suspended"&&await a.resume();const l=a.createOscillator(),c=a.createGain();l.connect(c),c.connect(a.destination),l.frequency.value=t,l.type=n,c.gain.setValueAtTime(r,a.currentTime),c.gain.exponentialRampToValueAtTime(.01,a.currentTime+e),l.start(a.currentTime),l.stop(a.currentTime+e)}catch(a){console.warn("[VoiceSound] Failed to play tone:",a)}},Iw=()=>{op(),setTimeout(()=>oc(440,.1,"sine",.2),0),setTimeout(()=>oc(554,.15,"sine",.25),80)},Dw=()=>{op(),setTimeout(()=>oc(554,.1,"sine",.2),0),setTimeout(()=>oc(440,.15,"sine",.15),80)},Mw=()=>{op(),setTimeout(()=>oc(880,.08,"sine",.2),0),setTimeout(()=>oc(1100,.12,"sine",.25),60)},F3=N.createContext(),Nd=()=>{const t=N.useContext(F3);if(!t)throw new Error("useVoiceChannel must be used within VoiceChannelProvider");return t},YP=({children:t})=>{const{currentUser:e,userProfile:n}=Cn(),{currentServer:r,channels:a}=La(),[l,c]=N.useState(null),[h,m]=N.useState([]),[g,y]=N.useState(null),[b,_]=N.useState(null),[k,R]=N.useState(new Map),[j,T]=N.useState(new Map),[H,q]=N.useState([]),[I,z]=N.useState(null),[B,$]=N.useState(new Map),[w,E]=N.useState(!1),[A,D]=N.useState(!1),[O,L]=N.useState(!1),[P,pe]=N.useState(!1),ce=N.useRef(null),Y=N.useRef(null),Z=N.useRef(null),J=N.useRef(null),Te=N.useRef(new Map),Ae=N.useRef(new Map),F=N.useRef([]);N.useEffect(()=>{if(!e)return;const Se=new O3;Se.on("open",U=>{console.log("[VoiceChannel] My Peer ID:",U),Y.current=U,ce.current=Se});const ue=U=>{if(U&&U.type==="SOUND_EFFECT"&&U.payload?.src){console.log("[VoiceChannel] Received sound effect:",U.payload.name);const K=new Audio(U.payload.src);K.volume=.5,F.current.push(K),K.onended=()=>{F.current=F.current.filter(ee=>ee!==K)},K.play().catch(ee=>console.error("[VoiceChannel] Error playing sound:",ee))}};return Se.on("connection",U=>{console.log("[VoiceChannel] Incoming data connection from:",U.peer),U.on("open",()=>{Ae.current.set(U.peer,U)}),U.on("data",ue),U.on("close",()=>{Ae.current.delete(U.peer)})}),Se.on("call",U=>{console.log("[VoiceChannel] Incoming call from:",U.peer);const K=Z.current;K?U.answer(K):U.answer(),U.on("stream",ee=>{console.log("[VoiceChannel] Received remote stream from:",U.peer),T(ke=>new Map(ke).set(U.peer,ee))}),U.on("close",()=>{T(ee=>{const ke=new Map(ee);return ke.delete(U.peer),ke})}),Te.current.set(U.peer,U)}),Se.on("error",U=>{console.error("[VoiceChannel] Peer error:",U)}),()=>{F.current.forEach(U=>{try{U.pause(),U.currentTime=0}catch{}}),F.current=[],Se.destroy(),ce.current=null,Y.current=null}},[e]);const W=N.useCallback(async()=>{try{const ue=(await navigator.mediaDevices.enumerateDevices()).filter(U=>U.kind==="audioinput");q(ue),!I&&ue.length>0&&z(ue[0].deviceId)}catch(Se){console.error("[VoiceChannel] Failed to refresh devices:",Se)}},[I]);N.useEffect(()=>(W(),navigator.mediaDevices.ondevicechange=W,()=>{navigator.mediaDevices.ondevicechange=null}),[W]);const ae=N.useCallback(async Se=>{if(z(Se),!(!l||!Z.current))try{const ue=await navigator.mediaDevices.getUserMedia({audio:{deviceId:{exact:Se}},video:O});Z.current&&Z.current.getTracks().forEach(K=>K.stop()),Z.current=ue,y(ue);const U=ue.getAudioTracks()[0];U&&(U.enabled=!w),Te.current.forEach((K,ee)=>{const ke=ce.current.call(ee,ue);ke&&(ke.on("stream",Oe=>{T(Fe=>new Map(Fe).set(ee,Oe))}),Te.current.set(ee,ke))}),console.log("[VoiceChannel] Switched to audio device:",Se)}catch(ue){console.error("[VoiceChannel] Failed to switch audio device:",ue)}},[l,O,w]),ge=N.useRef([]),Re=N.useRef(new Set);N.useEffect(()=>{if(!l||!r){m([]),ge.current=[],Re.current=new Set;return}const Se=dt(ye,"servers",r,"channels",l,"voiceParticipants"),ue=nr(Se,U=>{const K=[];U.forEach(Le=>{K.push({odaId:Le.id,...Le.data()})});const ee=new Set(ge.current.map(Le=>Le.odaId)),ke=new Set(K.map(Le=>Le.odaId));K.forEach(Le=>{!ee.has(Le.odaId)&&Le.odaId!==e?.uid&&Iw()}),ge.current.forEach(Le=>{!ke.has(Le.odaId)&&Le.odaId!==e?.uid&&Dw()});const Oe=new Set(K.filter(Le=>Le.isScreenSharing).map(Le=>Le.odaId));Oe.forEach(Le=>{!Re.current.has(Le)&&Le!==e?.uid&&Mw()}),ge.current=K,Re.current=Oe,m(K),K.forEach(Le=>{if(Le.odaId!==e?.uid&&Le.peerId&&!Te.current.has(Le.peerId)&&ce.current&&Z.current){console.log("[VoiceChannel] Calling peer:",Le.peerId);const Et=ce.current.call(Le.peerId,Z.current);if(Et&&(Et.on("stream",Tt=>{console.log("[VoiceChannel] Got stream from:",Le.peerId),T(Qt=>new Map(Qt).set(Le.peerId,Tt))}),Et.on("close",()=>{T(Tt=>{const Qt=new Map(Tt);return Qt.delete(Le.peerId),Qt})}),Te.current.set(Le.peerId,Et)),!Ae.current.has(Le.peerId)){console.log("[VoiceChannel] Opening data connection to:",Le.peerId);const Tt=ce.current.connect(Le.peerId);Tt&&(Tt.on("open",()=>{Ae.current.set(Le.peerId,Tt)}),Tt.on("data",Qt=>{if(Qt&&Qt.type==="SOUND_EFFECT"&&Qt.payload?.src){const Ee=new Audio(Qt.payload.src);Ee.volume=.5,F.current.push(Ee),Ee.onended=()=>{F.current=F.current.filter(Pe=>Pe!==Ee)},Ee.play().catch(Pe=>console.error(Pe))}}),Tt.on("close",()=>{Ae.current.delete(Le.peerId)}))}}});const Fe=new Set(K.map(Le=>Le.peerId));Te.current.forEach((Le,Et)=>{if(!Fe.has(Et)){Le.close(),Te.current.delete(Et);const Tt=Ae.current.get(Et);Tt&&(Tt.close(),Ae.current.delete(Et)),T(Qt=>{const Ee=new Map(Qt);return Ee.delete(Et),Ee})}})});return()=>ue()},[l,r,e]);const _e=N.useCallback(async Se=>{if(!e||!r||!ce.current||!Y.current){console.error("[VoiceChannel] Cannot join: missing requirements");return}try{const ue=await navigator.mediaDevices.getUserMedia({audio:I?{deviceId:{exact:I}}:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0},video:!1});y(ue),Z.current=ue;const U=Me(ye,"servers",r,"channels",Se,"voiceParticipants",e.uid);await Ar(U,{odaId:e.uid,peerId:Y.current,displayName:n?.displayName||e.displayName||"User",photoUrl:n?.photoUrl||n?.photoURL||null,joinedAt:bt(),isMuted:!1,isVideoOn:!1,isScreenSharing:!1}),c(Se),E(!1),L(!1),pe(!1),Iw(),console.log("[VoiceChannel] Joined channel:",Se)}catch(ue){console.error("[VoiceChannel] Failed to join:",ue)}},[e,r,n]),Ne=N.useCallback(async()=>{if(!(!l||!e||!r))try{const Se=Me(ye,"servers",r,"channels",l,"voiceParticipants",e.uid);await jo(Se),Z.current&&(Z.current.getTracks().forEach(ue=>{ue.stop(),console.log("[VoiceChannel] Stopped track:",ue.kind)}),Z.current=null,y(null)),J.current&&(J.current.getTracks().forEach(ue=>{ue.stop(),console.log("[VoiceChannel] Stopped screen track:",ue.kind)}),J.current=null,_(null)),Te.current.forEach(ue=>ue.close()),Te.current.clear(),T(new Map),c(null),m([]),L(!1),pe(!1),E(!1),D(!1),F.current.length>0&&(console.log("[VoiceChannel] Stopping",F.current.length,"active sounds"),F.current.forEach(ue=>{try{ue.pause(),ue.currentTime=0}catch(U){console.error("[VoiceChannel] Error stopping sound:",U)}}),F.current=[]),Dw(),console.log("[VoiceChannel] Left channel - all media stopped")}catch(Se){console.error("[VoiceChannel] Failed to leave:",Se)}},[l,e,r]),Ke=N.useCallback(()=>{if(Z.current){const Se=Z.current.getAudioTracks()[0];if(Se&&(Se.enabled=!Se.enabled,E(!Se.enabled),l&&e&&r)){const ue=Me(ye,"servers",r,"channels",l,"voiceParticipants",e.uid);Ar(ue,{isMuted:!Se.enabled},{merge:!0})}}},[l,e,r]),Ge=N.useCallback(()=>{D(Se=>{const ue=!Se;return j.forEach(U=>{U.getAudioTracks().forEach(K=>{K.enabled=!ue})}),ue})},[j]),he=N.useCallback(async()=>{if(!(!Z.current||!l))try{if(O){const Se=Z.current.getVideoTracks()[0];Se&&(Se.stop(),Z.current.removeTrack(Se)),L(!1)}else{const ue=(await navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0];Z.current.addTrack(ue),y(new MediaStream(Z.current.getTracks())),L(!0),Te.current.forEach((U,K)=>{const ee=ce.current.call(K,Z.current);ee&&(ee.on("stream",ke=>{T(Oe=>new Map(Oe).set(K,ke))}),Te.current.set(K,ee))})}if(e&&r){const Se=Me(ye,"servers",r,"channels",l,"voiceParticipants",e.uid);Ar(Se,{isVideoOn:!O},{merge:!0})}}catch(Se){console.error("[VoiceChannel] Failed to toggle video:",Se)}},[O,l,e,r]),Ce=N.useCallback(async(Se=null)=>{if(l)try{if(P||Se===null&&J.current){if(J.current&&(J.current.getTracks().forEach(K=>K.stop()),J.current=null),pe(!1),_(null),e&&r){const K=Me(ye,"servers",r,"channels",l,"voiceParticipants",e.uid);Ar(K,{isScreenSharing:!1},{merge:!0})}return}let ue;const U={width:Se?.width||1280,height:Se?.height||720,frameRate:Se?.frameRate||30};if(Se?.sourceId?ue=await navigator.mediaDevices.getUserMedia({audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:Se.sourceId,...U}}}):ue=await navigator.mediaDevices.getDisplayMedia({video:U,audio:!0}),J.current=ue,ue.getVideoTracks()[0].onended=()=>{if(pe(!1),_(null),J.current=null,e&&r&&l){const K=Me(ye,"servers",r,"channels",l,"voiceParticipants",e.uid);Ar(K,{isScreenSharing:!1},{merge:!0})}},Te.current.forEach((K,ee)=>{const ke=ce.current.call(ee,ue);ke&&ke.on("stream",Oe=>{T(Fe=>new Map(Fe).set(ee,Oe))})}),pe(!0),_(ue),Mw(),e&&r){const K=Me(ye,"servers",r,"channels",l,"voiceParticipants",e.uid);Ar(K,{isScreenSharing:!0},{merge:!0})}}catch(ue){console.error("[VoiceChannel] Failed to toggle screen share:",ue)}},[P,l,e,r]),Ve=a?.filter(Se=>Se.type==="voice")||[];N.useEffect(()=>()=>{l&&Ne()},[r]);const{customSounds:oe}=E1(),xe=N.useCallback(Se=>{const ue=oe.find(K=>K.id===Se);if(!ue)return;const U=new Audio(ue.src);U.volume=.5,F.current.push(U),U.onended=()=>{F.current=F.current.filter(K=>K!==U)},U.play().catch(K=>console.error("[VoiceChannel] Error playing sound locally:",K)),Ae.current.forEach((K,ee)=>{K.open&&(console.log("[VoiceChannel] Broadcasting sound to:",ee),K.send({type:"SOUND_EFFECT",payload:{src:ue.src,name:ue.name}}))})},[oe]),ze={currentVoiceChannel:l,participants:h,localStream:g,screenStream:b,remoteStreams:j,voiceChannels:Ve,isMuted:w,isDeafened:A,isVideoOn:O,isScreenSharing:P,audioDevices:H,selectedAudioDeviceId:I,joinVoiceChannel:_e,leaveVoiceChannel:Ne,toggleMute:Ke,toggleDeafen:Ge,toggleVideo:he,toggleScreenShare:Ce,changeAudioDevice:ae,refreshDevices:W,userVolumes:B,setUserVolume:(Se,ue)=>{$(U=>{const K=new Map(U);return K.set(Se,ue),K})},playSound:xe};return u.jsxs(F3.Provider,{value:ze,children:[t,u.jsx(KP,{remoteStreams:j,isDeafened:A,participants:h,userVolumes:B})]})},KP=({remoteStreams:t,isDeafened:e,participants:n,userVolumes:r})=>u.jsx("div",{style:{display:"none"},children:Array.from(t.entries()).map(([a,l])=>{const h=n.find(g=>g.peerId===a)?.odaId,m=h?r.get(h)??1:1;return u.jsx(QP,{stream:l,muted:e,volume:m},a)})}),QP=({stream:t,muted:e,volume:n})=>{const r=N.useRef(null);return N.useEffect(()=>{r.current&&t&&(r.current.srcObject=t,r.current.play().catch(a=>{console.log("[VoiceChannel] Audio autoplay blocked:",a)}))},[t]),N.useEffect(()=>{r.current&&(r.current.muted=e)},[e]),N.useEffect(()=>{r.current&&(r.current.volume=n)},[n]),u.jsx("audio",{ref:r,autoPlay:!0,playsInline:!0})},H3=({participant:t,position:e,onClose:n})=>{const{userVolumes:r,setUserVolume:a}=Nd(),l=Math.round((r.get(t.odaId)??1)*100),c=h=>{const m=parseInt(h.target.value)/100;a(t.odaId,m)};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-40",onClick:n,onContextMenu:h=>{h.preventDefault(),n()}}),u.jsxs("div",{className:"fixed bg-[#111214] border border-[#1e1f22] rounded-lg shadow-xl py-3 z-50 w-64 px-3",style:{top:e.y,left:e.x},onClick:h=>h.stopPropagation(),children:[u.jsxs("div",{className:"text-xs font-bold text-[#949ba4] uppercase mb-3 px-1",children:[t.displayName," SETTINGS"]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between text-sm text-[#dbdee1] font-medium mb-1 px-1",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(KT,{size:14,className:"text-[#949ba4]"}),u.jsx("span",{children:"User Volume"})]}),u.jsxs("span",{className:"text-xs font-bold text-brand-primary",children:[l,"%"]})]}),u.jsx("input",{type:"range",min:"0",max:"100",value:l,onChange:c,className:"volume-slider",style:{background:`linear-gradient(to right, #ef9f64 0%, #ef9f64 ${l}%, #1e1f22 ${l}%, #1e1f22 100%)`}})]}),u.jsx("div",{className:"mt-4 border-t border-[#1e1f22] pt-2",children:u.jsx("div",{className:"text-[11px] text-[#949ba4] px-1 italic",children:"This setting only affects the audio heard by you."})})]})]})},XP=({channel:t})=>{const{currentVoiceChannel:e,joinVoiceChannel:n,participants:r}=Nd(),{currentServer:a}=La(),{currentUser:l}=Cn(),[c,h]=N.useState([]),[m,g]=N.useState(null),y=e===t.id;N.useEffect(()=>{if(!a||!t.id)return;const _=dt(ye,"servers",a,"channels",t.id,"voiceParticipants"),k=nr(_,R=>{const j=[];R.forEach(T=>{j.push({odaId:T.id,...T.data()})}),h(j)});return()=>k()},[a,t.id]);const b=()=>{y||n(t.id)};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`w-full flex items-center gap-2 px-2 py-1.5 rounded cursor-pointer transition-colors duration-150 ${y?"bg-dark-hover text-dark-text":"text-dark-muted hover:bg-dark-hover hover:text-dark-text"}`,onClick:b,children:[u.jsx(KT,{className:"flex-shrink-0"}),u.jsx("span",{className:"truncate text-sm flex-1 text-left",children:t.name})]}),c.length>0&&u.jsx("div",{className:"voice-participants",children:c.map(_=>u.jsxs("div",{className:"voice-participant",onContextMenu:k=>{_.odaId!==l?.uid&&(k.preventDefault(),g({participant:_,x:k.clientX,y:k.clientY}))},children:[u.jsx("div",{className:"participant-avatar",children:_.photoUrl?u.jsx("img",{src:_.photoUrl,alt:""}):u.jsx("div",{className:"avatar-placeholder",children:_.displayName?.charAt(0)?.toUpperCase()||"?"})}),u.jsx("span",{className:"participant-name",children:_.displayName}),u.jsxs("div",{className:"participant-status",children:[_.isMuted&&u.jsx(y1,{className:"status-icon muted"}),_.isVideoOn&&u.jsx(YT,{className:"status-icon video"}),_.isScreenSharing&&u.jsx(v1,{className:"status-icon screen"})]})]},_.odaId))}),m&&u.jsx(H3,{participant:m.participant,position:{x:m.x,y:m.y},onClose:()=>g(null)})]})},WP=()=>{const{voiceChannels:t}=Nd();return!t||t.length===0?null:u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-xs font-semibold text-dark-muted uppercase px-2 mb-1 mt-4",children:"VOICE CHANNELS"}),u.jsx("div",{className:"voice-channel-list",children:t.map(e=>u.jsx(XP,{channel:e},e.id))})]})},JP=({onClose:t})=>{const{participants:e,localStream:n,screenStream:r,remoteStreams:a,isMuted:l,isScreenSharing:c}=Nd(),{currentUser:h}=Cn(),[m,g]=N.useState(null),[y,b]=N.useState(null),_=e.length,k=_<=1?"grid-1":_<=2?"grid-2":_<=4?"grid-4":_<=6?"grid-6":_<=9?"grid-9":"grid-many",R=()=>c&&r?r:n,j=T=>T.odaId===h?.uid?R():a.get(T.peerId);return u.jsxs("div",{className:"voice-grid-overlay",children:[u.jsxs("div",{className:"voice-grid-modal",children:[u.jsxs("div",{className:"voice-grid-header",children:[u.jsx("h3",{children:"Voice Channel"}),u.jsx("button",{className:"close-btn",onClick:t,children:u.jsx(lP,{})})]}),u.jsx("div",{className:`voice-grid ${k}`,children:e.map(T=>u.jsx(eO,{participant:T,stream:j(T),isLocal:T.odaId===h?.uid,isMuted:T.odaId===h?.uid?l:T.isMuted,onExpand:()=>g(T),isFocused:!1,onContextMenu:H=>{T.odaId!==h?.uid&&(H.preventDefault(),b({participant:T,x:H.clientX,y:H.clientY}))}},T.odaId))})]}),y&&u.jsx(H3,{participant:y.participant,position:{x:y.x,y:y.y},onClose:()=>b(null)}),m&&u.jsx("div",{className:"voice-fullscreen-overlay",onClick:()=>g(null),children:u.jsx("div",{className:"voice-fullscreen-container",onClick:T=>T.stopPropagation(),children:u.jsx(ZP,{stream:j(m),participant:m,isLocal:m.odaId===h?.uid,onClose:()=>g(null)})})})]})},ZP=({stream:t,participant:e,isLocal:n,onClose:r})=>{const a=N.useRef(null);return N.useEffect(()=>{a.current&&t&&(a.current.srcObject=t)},[t]),u.jsxs("div",{className:"fullscreen-video-wrapper",children:[u.jsx("video",{ref:a,autoPlay:!0,playsInline:!0,muted:n,className:"fullscreen-video"}),u.jsxs("div",{className:"fullscreen-overlay",children:[u.jsxs("span",{className:"fullscreen-label",children:[e.displayName,n&&" (You)"]}),u.jsx("button",{className:"fullscreen-close-btn",onClick:r,children:u.jsx(rP,{})})]})]})},eO=({participant:t,stream:e,isLocal:n,isMuted:r,onExpand:a,isFocused:l,onContextMenu:c})=>{const h=N.useRef(null);N.useEffect(()=>{h.current&&e&&(h.current.srcObject=e)},[e]);const m=e?.getVideoTracks()?.length>0&&e.getVideoTracks()[0].enabled;return u.jsxs("div",{className:`video-tile ${n?"local":""} ${l?"focused":""}`,onClick:()=>m&&a&&a(),onContextMenu:c,children:[m?u.jsx("video",{ref:h,autoPlay:!0,playsInline:!0,muted:n,className:"video-feed"}):u.jsx("div",{className:"video-placeholder",children:t.photoUrl?u.jsx("img",{src:t.photoUrl,alt:"",className:"avatar-large"}):u.jsx("div",{className:"avatar-placeholder-large",children:t.displayName?.charAt(0)?.toUpperCase()||"?"})}),u.jsxs("div",{className:"tile-overlay",children:[u.jsxs("span",{className:"participant-label",children:[t.displayName,n&&" (You)"]}),u.jsxs("div",{className:"tile-status",children:[r&&u.jsx(y1,{className:"status-muted"}),t.isScreenSharing&&u.jsx(v1,{className:"status-screen"}),m&&u.jsx(GT,{className:"status-expand",onClick:g=>{g.stopPropagation(),a&&a()},title:"Full Screen"})]})]})]})},Pw=()=>{if(window.electron&&window.electron.desktopCapturer)return window.electron.desktopCapturer;if(window.require)try{return window.require("electron").desktopCapturer}catch{return null}return null},$3=({isOpen:t,onClose:e,onConfirm:n})=>{const[r,a]=N.useState(720),[l,c]=N.useState(30),[h,m]=N.useState("screens"),[g,y]=N.useState({screens:[],windows:[]}),[b,_]=N.useState(null),[k,R]=N.useState(!1),j=!!Pw();N.useEffect(()=>{if(t&&j){T();const q=setInterval(T,3e3);return()=>clearInterval(q)}},[t,j]);const T=async()=>{const q=Pw();if(q)try{const I=await q.getSources({types:["window","screen"],thumbnailSize:{width:300,height:200}}),z=I.filter($=>$.id.startsWith("screen:")),B=I.filter($=>!$.id.startsWith("screen:"));y({screens:z,windows:B}),!b&&z.length>0&&_(z[0].id)}catch(I){console.error("Error loading sources:",I)}};if(!t)return null;const H=()=>{let q,I;r===1080?(q=1920,I=1080):(q=1280,I=720),n({width:q,height:I,frameRate:l,sourceId:b,displaySurface:h==="screens"?"monitor":"window"}),e()};return u.jsx("div",{className:"fixed inset-0 bg-black/80 z-[100] flex items-center justify-center animate-fade-in",children:u.jsxs("div",{className:"bg-dark-elem w-full max-w-2xl rounded-2xl shadow-2xl border border-dark-hover overflow-hidden transform transition-all scale-100 p-6 relative flex flex-col max-h-[90vh]",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6 shrink-0",children:[u.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[u.jsx(vm,{className:"text-brand-primary"}),"Screen Share"]}),u.jsx("button",{onClick:e,className:"p-1 hover:bg-dark-hover rounded-full transition-colors text-dark-muted hover:text-white",children:u.jsx(On,{size:24})})]}),u.jsxs("div",{className:"flex gap-6 overflow-hidden flex-1",children:[u.jsxs("div",{className:"w-64 flex flex-col gap-6 shrink-0 border-r border-dark-hover pr-6",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-xs font-bold text-dark-muted uppercase tracking-wider mb-3",children:"Resolution"}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsx("button",{onClick:()=>a(720),className:`p-2 rounded-lg border text-xs font-bold ${r===720?"border-brand-primary bg-brand-primary/10 text-white":"border-dark-hover bg-dark-input text-gray-400"}`,children:"720p"}),u.jsx("button",{onClick:()=>a(1080),className:`p-2 rounded-lg border text-xs font-bold ${r===1080?"border-brand-primary bg-brand-primary/10 text-white":"border-dark-hover bg-dark-input text-gray-400"}`,children:"1080p"})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-xs font-bold text-dark-muted uppercase tracking-wider mb-3",children:"Frame Rate"}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:[15,30,60].map(q=>u.jsx("button",{onClick:()=>c(q),className:`p-2 rounded-lg border text-xs font-bold ${l===q?"border-brand-primary bg-brand-primary/10 text-white":"border-dark-hover bg-dark-input text-gray-400"}`,children:q},q))})]})]}),u.jsx("div",{className:"flex-1 flex flex-col min-h-0",children:j?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex gap-4 border-b border-dark-hover mb-4 shrink-0",children:[u.jsxs("button",{onClick:()=>m("screens"),className:`pb-2 text-sm font-bold flex items-center gap-2 transition-colors ${h==="screens"?"text-brand-primary border-b-2 border-brand-primary":"text-gray-400 hover:text-white"}`,children:[u.jsx(L7,{size:18})," Screens"]}),u.jsxs("button",{onClick:()=>m("windows"),className:`pb-2 text-sm font-bold flex items-center gap-2 transition-colors ${h==="windows"?"text-brand-primary border-b-2 border-brand-primary":"text-gray-400 hover:text-white"}`,children:[u.jsx(J7,{size:18})," Windows"]})]}),u.jsx("div",{className:"grid grid-cols-2 gap-3 overflow-y-auto pr-2 custom-scrollbar content-start",children:(h==="screens"?g.screens:g.windows).map(q=>u.jsxs("button",{onClick:()=>_(q.id),className:`group relative rounded-lg overflow-hidden border-2 transition-all text-left ${b===q.id?"border-brand-primary ring-2 ring-brand-primary/20":"border-transparent hover:border-gray-600 bg-black/40"}`,children:[u.jsxs("div",{className:"aspect-video bg-black relative",children:[u.jsx("img",{src:q.thumbnail.toDataURL(),alt:q.name,className:"w-full h-full object-contain"}),b===q.id&&u.jsx("div",{className:"absolute inset-0 bg-brand-primary/10 flex items-center justify-center",children:u.jsx(Do,{className:"text-brand-primary drop-shadow-lg",size:48})})]}),u.jsx("div",{className:"p-2 bg-dark-input truncate text-xs font-medium text-gray-300 group-hover:text-white",children:q.name})]},q.id))})]}):u.jsx("div",{className:"flex items-center justify-center h-full text-center text-gray-500",children:u.jsxs("div",{className:"max-w-xs",children:[u.jsx(vm,{size:48,className:"mx-auto mb-4 opacity-50"}),u.jsxs("p",{className:"text-sm",children:["Browser limits source selection here.",u.jsx("br",{}),'Click "Go Live" to pick a screen or window.']})]})})})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-dark-hover mt-4 shrink-0",children:[u.jsx(Ze,{variant:"ghost",onClick:e,className:"text-dark-text hover:text-white",children:"Cancel"}),u.jsx(Ze,{variant:"primary",onClick:H,className:"px-8 shadow-lg shadow-brand-primary/20",disabled:j&&!b,children:"Go Live"})]})]})})},tO=()=>{const{currentVoiceChannel:t,participants:e,isMuted:n,isDeafened:r,isVideoOn:a,isScreenSharing:l,toggleMute:c,toggleDeafen:h,toggleVideo:m,toggleScreenShare:g,leaveVoiceChannel:y,audioDevices:b,selectedAudioDeviceId:_,changeAudioDevice:k,refreshDevices:R,playSound:j}=Nd(),{customSounds:T,addSound:H,removeSound:q}=E1(),{userProfile:I}=Cn(),z=I?.roles?.includes("premium")||I?.roles?.includes("admin")||I?.plan==="premium"||I?.badges?.includes("premium"),{channels:B}=La(),[$,w]=N.useState(!1),[E,A]=N.useState(!1),[D,O]=N.useState(!1),[L,P]=N.useState(!1),pe=N.useRef(null),ce=N.useRef(null),Y=N.useRef(null);if(N.useEffect(()=>{const F=W=>{pe.current&&!pe.current.contains(W.target)&&O(!1)};return D&&document.addEventListener("mousedown",F),()=>{document.removeEventListener("mousedown",F)}},[D]),N.useEffect(()=>{const F=W=>{ce.current&&!ce.current.contains(W.target)&&P(!1)};return L&&document.addEventListener("mousedown",F),()=>{document.removeEventListener("mousedown",F)}},[L]),!t)return null;const Z=B?.find(F=>F.id===t),J=()=>{l?g(null):A(!0)},Te=F=>{A(!1),g(F)},Ae=async F=>{const W=F.target.files[0];if(!W)return;const ae=W.name.split(".")[0].slice(0,15);await H(ae,W),Y.current&&(Y.current.value="")};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"voice-channel-bar",children:[u.jsx("div",{className:"voice-bar-info",children:u.jsxs("div",{className:"voice-bar-status",children:[u.jsx("span",{className:"status-dot"}),u.jsx("span",{className:"voice-bar-channel",children:Z?.name||"Voice Channel"})]})}),u.jsxs("div",{className:"voice-bar-controls",children:[u.jsx("button",{className:`voice-control-btn ${n?"active":""}`,onClick:c,title:n?"Unmute":"Mute",children:n?u.jsx(y1,{}):u.jsx(aP,{})}),u.jsx("button",{className:`voice-control-btn ${r?"active":""}`,onClick:h,title:r?"Undeafen":"Deafen",children:r?u.jsx(sP,{}):u.jsx(iP,{})}),u.jsx("button",{className:`voice-control-btn ${a?"active":""}`,onClick:m,title:a?"Turn Off Camera":"Turn On Camera",children:a?u.jsx(YT,{}):u.jsx(cP,{})}),u.jsx("button",{className:`voice-control-btn ${l?"active":""}`,onClick:J,title:l?"Stop Sharing":"Share Screen",children:u.jsx(v1,{})}),u.jsxs("div",{className:"voice-settings-wrapper",ref:ce,children:[u.jsx("button",{className:`voice-control-btn ${L?"active":""}`,onClick:()=>P(!L),title:"Soundboard",children:u.jsx(ym,{})}),L&&u.jsxs("div",{className:"voice-device-menu soundboard-menu",children:[u.jsxs("div",{className:"menu-header",children:[u.jsx("span",{children:"Soundboard"}),u.jsxs("span",{className:"text-[10px] opacity-50",children:[T.length,"/10"]})]}),u.jsx("div",{className:"menu-list soundboard-list",children:T.length===0?u.jsx("div",{className:"menu-item disabled",children:"No sounds added yet"}):T.map(F=>u.jsxs("div",{className:"soundboard-item-wrapper group",children:[u.jsxs("div",{className:"menu-item soundboard-item",onClick:()=>{j(F.id)},children:[u.jsx("span",{className:"truncate flex-1",children:F.name}),u.jsx("span",{className:"text-xs opacity-50",children:""})]}),u.jsx("button",{className:"sound-delete-btn",onClick:W=>{W.stopPropagation(),q(F.id)},children:u.jsx(Ei,{size:14})})]},F.id))}),T.length<10&&u.jsxs("div",{className:"menu-footer",children:[u.jsxs("button",{className:"add-sound-btn",onClick:()=>Y.current?.click(),children:[u.jsx(wo,{size:14}),u.jsx("span",{children:"Add Sound"})]}),u.jsx("input",{type:"file",ref:Y,className:"hidden",accept:"audio/mp3,audio/wav",onChange:Ae})]}),!z&&u.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center rounded-lg p-4 text-center z-[60]",children:u.jsxs("div",{children:[u.jsx("p",{className:"text-orange-400 font-bold mb-1",children:"Premium Only"}),u.jsx("p",{className:"text-white text-[11px]",children:"Unlock Soundboard with Premium!"})]})})]})]}),e.length>0&&u.jsx("button",{className:"voice-control-btn",onClick:()=>w(!0),title:"Expand Grid",children:u.jsx(GT,{})}),u.jsxs("div",{className:"voice-settings-wrapper",ref:pe,children:[u.jsx("button",{className:`voice-control-btn ${D?"active":""}`,onClick:()=>{D||R(),O(!D)},title:"Audio Settings",children:u.jsx(nP,{})}),D&&u.jsxs("div",{className:"voice-device-menu",children:[u.jsx("div",{className:"menu-header",children:"Input Device"}),u.jsx("div",{className:"menu-list",children:b.length>0?b.map(F=>u.jsxs("div",{className:`menu-item ${_===F.deviceId?"active":""}`,onClick:()=>{k(F.deviceId),O(!1)},children:[u.jsx("span",{className:"truncate",children:F.label||`Microphone ${F.deviceId.slice(0,5)}`}),_===F.deviceId&&u.jsx("div",{className:"active-dot"})]},F.deviceId)):u.jsx("div",{className:"menu-item disabled",children:"No microphone found"})})]})]}),u.jsx("button",{className:"voice-control-btn disconnect",onClick:y,title:"Disconnect",children:u.jsx(oP,{})})]})]}),$&&u.jsx(JP,{onClose:()=>w(!1)}),u.jsx($3,{isOpen:E,onClose:()=>A(!1),onConfirm:Te})]})},Ow=({server:t,channels:e,selectedChannel:n,onSelectChannel:r,onOpenSettings:a,onOpenAdmin:l,onLogout:c,userProfile:h,serverId:m,userRole:g,userId:y,dms:b,selectedDm:_,onSelectDm:k})=>{const[R,j]=N.useState(!1),[T,H]=N.useState(!1),[q,I]=N.useState(!1),z=()=>{H(!1),c()};return u.jsxs("div",{className:"w-60 bg-dark-sidebar flex flex-col h-full",children:[u.jsxs("div",{className:"h-12 md:h-12 pt-safe-top md:pt-0 px-4 flex items-center justify-between border-b border-dark-hover shadow-md box-content",children:[u.jsx("h2",{className:"font-semibold text-dark-text truncate",children:t?.name||"Lumo"}),u.jsxs("div",{className:"flex items-center gap-1",children:[m&&g==="admin"&&u.jsx("button",{onClick:()=>I(!0),className:"p-1.5 hover:bg-dark-hover rounded transition-colors",title:"Generate Invite",children:u.jsx(eM,{className:"text-green-500",size:20})}),h?.role==="admin"&&u.jsx("button",{onClick:l,className:"p-1.5 hover:bg-dark-hover rounded transition-colors",title:"Admin Panel",children:u.jsx(TT,{className:"text-admin",size:20})})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto py-3",children:m==="home"?u.jsx(GP,{dms:b,selectedDmId:_?.id,onSelectDm:k}):u.jsxs("div",{className:"px-2",children:[u.jsx("div",{className:"text-xs font-semibold text-dark-muted uppercase px-2 mb-1",children:"Text Channels"}),e.filter(B=>B.type!=="voice").map(B=>u.jsxs("button",{onClick:()=>r(B),className:At("w-full flex items-center gap-2 px-2 py-1.5 rounded","text-dark-muted hover:bg-dark-hover hover:text-dark-text","transition-colors duration-150",n?.id===B.id&&"bg-dark-hover text-dark-text"),children:[u.jsx(ip,{className:"flex-shrink-0"}),u.jsx("span",{className:"truncate text-sm flex-1 text-left",children:B.name}),B.locked&&u.jsx(w7,{className:"flex-shrink-0 text-yellow-500",size:14,title:"Locked channel"})]},B.id)),u.jsx(WP,{})]})}),u.jsx(tO,{}),u.jsxs("div",{className:"h-20 bg-dark-bg px-2 flex items-center justify-between gap-2 border-t border-dark-hover -ml-[72px] w-[calc(100%+72px)] relative z-10",children:[u.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1 cursor-pointer hover:bg-dark-hover rounded p-2 transition-colors",onClick:()=>j(!0),children:[u.jsxs("div",{className:"relative flex-shrink-0",children:[h?.photoUrl?u.jsx("img",{src:h.photoUrl,alt:h.displayName,className:"w-12 h-12 rounded-full object-cover",onError:B=>{B.target.style.display="none",B.target.nextSibling.style.display="flex"}},h.photoUrl):null,u.jsx("div",{className:"w-12 h-12 rounded-full bg-brand-primary flex items-center justify-center text-white font-bold text-lg",style:{display:h?.photoUrl?"none":"flex"},children:h?.displayName?.[0]?.toUpperCase()||"U"},`fallback-${h?.photoUrl}`),u.jsx("div",{className:"absolute bottom-0 right-0",children:u.jsx(B3,{status:h?.presence||"online",size:"md"})})]}),u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("div",{className:"text-base font-semibold text-dark-text truncate",children:h?.displayName||"User"}),u.jsx("div",{className:"text-sm text-dark-muted truncate",children:h?.role||"member"})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:a,className:"p-2.5 hover:bg-dark-hover rounded-lg transition-colors",title:"Settings",children:u.jsx(rp,{className:"text-dark-muted hover:text-dark-text",size:24})}),u.jsx("button",{onClick:()=>H(!0),className:"p-2.5 hover:bg-dark-hover rounded-lg transition-colors",title:"Logout",children:u.jsx(S7,{className:"text-dark-muted hover:text-admin",size:24})})]})]}),u.jsx(C1,{user:h,isOpen:R,onClose:()=>j(!1)}),u.jsx(ac,{isOpen:T,onClose:()=>H(!1),onConfirm:z,title:"Logout",message:"Are you sure you want to logout?",confirmText:"Logout",variant:"danger"}),u.jsx(FP,{isOpen:q,onClose:()=>I(!1),serverId:m})]})},nO=(t,e)=>{if(e===0)return"0 KB/s";const n=t/e;return n>1024*1024?`${(n/(1024*1024)).toFixed(1)} MB/s`:`${(n/1024).toFixed(0)} KB/s`},ad=(t,e)=>new Promise((n,r)=>{const a="5c1c5b7cae2edd508a2f35f98c4eec96",l=new FormData;l.append("image",t);const c=new XMLHttpRequest;c.open("POST",`https://api.imgbb.com/1/upload?key=${a}`);const h=Date.now();c.upload.onprogress=m=>{if(m.lengthComputable){const g=m.loaded/m.total*100,y=(Date.now()-h)/1e3,b=nO(m.loaded,y);e&&e(g,b)}},c.onload=()=>{if(c.status===200)try{const m=JSON.parse(c.responseText);m.success?n(m.data.url):r(new Error(m.error?.message||"Failed to upload image"))}catch{r(new Error("Invalid response from ImgBB"))}else r(new Error(`Upload failed with status ${c.status}`))},c.onerror=()=>r(new Error("Network error during upload")),c.send(l)}),rO=({server:t,onClose:e,onDelete:n,position:r,userRole:a,userId:l})=>{const[c,h]=N.useState(!1),[m,g]=N.useState(t.name),[y,b]=N.useState(!1),[_,k]=N.useState(!1),[R,j]=N.useState(t.icon||null),[T,H]=N.useState(null),[q,I]=N.useState({progress:0,speed:""}),[z,B]=N.useState(!1),[$,w]=N.useState(!1),E=N.useRef(null),{success:A,error:D}=Gr(),O=async()=>{if(!m.trim()){D("Server name is required");return}b(!0);try{await it(Me(ye,"servers",t.id),{name:m.trim()}),A("Server updated!"),h(!1),e()}catch(Y){console.error("Error updating server:",Y),D("Failed to update server")}finally{b(!1)}},L=async()=>{try{const Y=dt(ye,"servers",t.id,"members"),Z=await Ro(Y),J=[];Z.forEach(Te=>{const Ae=Te.data().userId;J.push(it(Me(ye,"users",Ae),{servers:dm(t.id),...Te.data().currentServer===t.id?{currentServer:null}:{}}))}),await Promise.all(J),await jo(Me(ye,"servers",t.id)),A("Server deleted"),B(!1),n(),e()}catch(Y){console.error("Error deleting server:",Y),D("Failed to delete server"),B(!1)}},P=async()=>{try{await it(Me(ye,"users",l),{servers:dm(t.id),currentServer:null}),await jo(Me(ye,"servers",t.id,"members",l)),await it(Me(ye,"servers",t.id),{memberCount:hm(-1)}),A("Left server"),w(!1),e()}catch(Y){console.error("Error leaving server:",Y),w(!1),e()}},pe=Y=>{const Z=Y.target.files?.[0];if(Z){if(!Z.type.startsWith("image/")){D("Please select an image file");return}if(Z.size>10*1024*1024){D("Image size must be less than 10MB");return}H(Z),j(URL.createObjectURL(Z))}},ce=async()=>{if(!T){D("Please select an image first");return}b(!0);try{const Y=await ad(T,(Z,J)=>{I({progress:Z,speed:J})});await it(Me(ye,"servers",t.id),{icon:Y}),A("Server icon updated!"),k(!1),e()}catch(Y){console.error("Error updating icon:",Y),D("Failed to update icon")}finally{b(!1),I({progress:0,speed:""})}};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-40",onClick:e}),u.jsx("div",{className:"fixed bg-dark-sidebar border border-dark-hover rounded-lg shadow-xl py-2 z-50 w-64",style:{top:r.y,left:r.x},children:c?u.jsxs("div",{className:"px-3 py-2 space-y-2",children:[u.jsx(un,{value:m,onChange:Y=>g(Y.target.value),placeholder:"Server name",autoFocus:!0}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Ze,{variant:"secondary",onClick:()=>h(!1),className:"flex-1 text-xs py-1",children:"Cancel"}),u.jsx(Ze,{variant:"primary",onClick:O,disabled:y,className:"flex-1 text-xs py-1",children:y?"Saving...":"Save"})]})]}):_?u.jsxs("div",{className:"px-3 py-2 space-y-3",children:[u.jsx("input",{type:"file",ref:E,onChange:pe,accept:"image/*",className:"hidden"}),u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx("button",{onClick:()=>E.current?.click(),className:"w-16 h-16 rounded-full bg-dark-hover border-2 border-dashed border-dark-muted hover:border-brand-primary flex items-center justify-center transition-colors overflow-hidden",children:R?u.jsx("img",{src:R,alt:"Preview",className:"w-full h-full object-cover"}):u.jsx(Ov,{size:24,className:"text-dark-muted"})}),u.jsx("span",{className:"text-xs text-dark-muted mt-2",children:"Click to select image"})]}),y&&q.progress>0&&u.jsxs("div",{className:"text-xs text-center text-dark-muted",children:[Math.round(q.progress),"% (",q.speed,")"]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Ze,{variant:"secondary",onClick:()=>{k(!1),H(null),j(t.icon||null)},className:"flex-1 text-xs py-1",children:"Cancel"}),u.jsx(Ze,{variant:"primary",onClick:ce,disabled:y||!T,className:"flex-1 text-xs py-1",children:y?"Uploading...":"Save"})]})]}):u.jsx(u.Fragment,{children:a==="admin"?u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:()=>h(!0),className:"w-full px-4 py-2 text-left text-sm text-dark-text hover:bg-dark-hover transition-colors flex items-center gap-2",children:[u.jsx(Kl,{size:16}),"Edit Server Name"]}),u.jsxs("button",{onClick:()=>k(!0),className:"w-full px-4 py-2 text-left text-sm text-dark-text hover:bg-dark-hover transition-colors flex items-center gap-2",children:[u.jsx(Ov,{size:16}),"Change Icon"]}),u.jsxs("button",{onClick:()=>B(!0),className:"w-full px-4 py-2 text-left text-sm text-admin hover:bg-dark-hover transition-colors flex items-center gap-2",children:[u.jsx(Ei,{size:16}),"Delete Server"]})]}):u.jsxs("button",{onClick:()=>w(!0),className:"w-full px-4 py-2 text-left text-sm text-orange-500 hover:bg-dark-hover transition-colors flex items-center gap-2",children:[u.jsx(x7,{size:16}),"Leave Server"]})})}),u.jsx(ac,{isOpen:z,onClose:()=>B(!1),onConfirm:L,title:"Delete Server",message:`Are you sure you want to delete "${t.name}"? This action cannot be undone!`,confirmText:"Delete",confirmVariant:"danger"}),u.jsx(ac,{isOpen:$,onClose:()=>w(!1),onConfirm:P,title:"Leave Server",message:`Are you sure you want to leave "${t.name}"?`,confirmText:"Leave",confirmVariant:"warning"})]})},sO=""+new URL("lumo-logo-DYOsjf-q.png",import.meta.url).href,Lw=({servers:t,currentServerId:e,onServerChange:n,onCreateServer:r,onJoinServer:a,userRole:l,userId:c,unreadMentions:h={}})=>{const[m,g]=N.useState(!1),[y,b]=N.useState(null),_=(k,R)=>{k.preventDefault(),b({server:R,position:{x:k.clientX,y:k.clientY}})};return u.jsxs("div",{className:"w-20 bg-dark-bg h-full flex flex-col items-center pt-safe-top md:pt-0 box-content",children:[u.jsx("div",{className:"flex flex-col items-center",children:u.jsx("button",{onClick:()=>n("home"),className:At("transition-all duration-200 rounded-2xl overflow-hidden",e==="home"||!e?"rounded-xl ring-2 ring-brand-primary ring-offset-2 ring-offset-dark-bg":"hover:rounded-xl"),children:u.jsx("img",{src:sO,alt:"Home",className:"w-16 h-16 object-contain cursor-pointer bg-dark-bg p-1"})})}),u.jsx("div",{className:"w-8 h-0.5 bg-dark-hover my-2"}),u.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1 overflow-y-auto",children:[t.map(k=>u.jsxs("div",{className:"relative",children:[u.jsx("button",{onClick:()=>n(k.id),onContextMenu:R=>_(R,k),className:At("w-12 h-12 rounded-2xl flex items-center justify-center transition-all duration-200","hover:rounded-xl",e===k.id?"bg-brand-primary text-white rounded-xl":"bg-dark-sidebar text-dark-text hover:bg-brand-primary hover:text-white"),title:k.name,children:k.icon?u.jsx("img",{src:k.icon,alt:k.name,className:"w-full h-full rounded-2xl object-cover"}):u.jsx("span",{className:"text-xl font-bold",children:k.name.charAt(0).toUpperCase()})}),h[k.id]?.count>0&&u.jsx("div",{className:"absolute -top-1 -right-1 min-w-5 h-5 bg-red-500 rounded-full flex items-center justify-center border-2 border-dark-bg pointer-events-none",children:u.jsx("span",{className:"text-white text-xs font-bold px-1",children:h[k.id].count>99?"99+":h[k.id].count})})]},k.id)),u.jsx("div",{className:"w-8 h-0.5 bg-dark-hover my-1"}),u.jsxs("div",{className:"relative pb-2",children:[u.jsx("button",{id:"add-server-btn",onClick:k=>{const R=k.currentTarget.getBoundingClientRect();document.documentElement.style.setProperty("--btn-top",`${R.top}px`),g(!m)},className:"w-12 h-12 rounded-2xl bg-dark-sidebar text-green-500 flex items-center justify-center hover:bg-green-500 hover:text-white hover:rounded-xl transition-all duration-200",title:"Add Server",children:u.jsx(wo,{size:28})}),m&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-50",onClick:()=>g(!1)}),u.jsxs("div",{className:"fixed left-[80px] bg-dark-sidebar border border-dark-hover rounded-lg shadow-lg py-2 z-50 w-48",style:{top:"var(--btn-top)"},children:[l==="admin"&&u.jsx("button",{onClick:()=>{r(),g(!1)},className:"w-full px-4 py-2 text-left text-sm text-dark-text hover:bg-dark-hover transition-colors",children:"Create Server"}),u.jsx("button",{onClick:()=>{a(),g(!1)},className:"w-full px-4 py-2 text-left text-sm text-dark-text hover:bg-dark-hover transition-colors",children:"Join Server"})]})]})]})]}),y&&u.jsx(rO,{server:y.server,position:y.position,userRole:l,userId:c,onClose:()=>b(null),onDelete:()=>{b(null)}})]})},iO=300*1e3,aO=t=>{const e=N.useRef(null);N.useEffect(()=>{if(!t)return;const n=async()=>{try{await Ar(Me(ye,"users",t),{lastSeen:bt(),isOnline:!0},{merge:!0})}catch(a){console.error("Error updating presence:",a)}};n(),e.current=setInterval(n,iO);const r=()=>{navigator.sendBeacon&&n()};return window.addEventListener("beforeunload",r),()=>{e.current&&clearInterval(e.current),window.removeEventListener("beforeunload",r)}},[t])},oO=(t,e=6)=>{if(!t)return!1;const n=t.toMillis?t.toMillis():new Date(t).getTime(),r=Date.now(),a=e*60*1e3;return r-n<a},Vw=({users:t,currentUserId:e,onStartDm:n})=>{const{currentServer:r}=La(),[a,l]=N.useState(null),[c,h]=N.useState([]);N.useEffect(()=>{if(!r||r==="home"){h([]);return}const T=is(dt(ye,"servers",r,"roles"));return nr(T,q=>{const I=[];q.forEach(z=>{I.push({id:z.id,...z.data()})}),h(I)})},[r]);const m=T=>T.presence==="invisible"?!1:oO(T.lastSeen),g=t.filter(T=>m(T)),y=t.filter(T=>!m(T)),b=g.reduce((T,H)=>{const q=H.serverRole||H.role||"member";return T[q]||(T[q]=[]),T[q].push(H),T},{}),R=[...[{name:"admin",position:-3},{name:"moderator",position:-2},{name:"member",position:-1}],...c.map(T=>({name:T.name,position:T.position??999}))].sort((T,H)=>T.position-H.position).map(T=>T.name).filter(T=>b[T]?.length>0),j=T=>{const H=m(T);return u.jsxs("div",{onClick:()=>l(T),className:At("flex items-center gap-2 px-2 py-1.5 rounded cursor-pointer","hover:bg-dark-hover transition-colors",T.id===e&&"bg-dark-hover/50",!H&&"opacity-50"),children:[u.jsxs("div",{className:"relative flex-shrink-0",children:[T.photoUrl?u.jsx("img",{src:T.photoUrl,alt:T.displayName,className:"w-8 h-8 rounded-full object-cover",onError:q=>{q.target.style.display="none",q.target.nextSibling.style.display="flex"}}):null,u.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold text-sm",style:{display:T.photoUrl?"none":"flex"},children:T.displayName?.[0]?.toUpperCase()||"U"}),u.jsx("div",{className:"absolute bottom-0 right-0",children:u.jsx(B3,{status:H?T.presence||"online":"offline",size:"sm"})})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-sm text-dark-text truncate",children:T.displayName||"Unknown"}),u.jsx("span",{className:At("text-xs px-1.5 py-0.5 rounded border",qT(T.serverRole||T.role)),children:(T.serverRole||T.role)?.charAt(0).toUpperCase()+(T.serverRole||T.role)?.slice(1)})]}),T.status&&u.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[u.jsx("span",{className:"text-xs",children:T.status.emoji}),u.jsx("span",{className:"text-xs text-dark-muted truncate",children:T.status.text})]})]})]},T.id)};return u.jsxs("div",{className:"w-60 bg-dark-sidebar h-full overflow-y-auto py-3",children:[u.jsxs("div",{className:"px-2",children:[R.map(T=>{const H=b[T]||[];return H.length===0?null:u.jsxs("div",{className:"mb-4",children:[u.jsxs("div",{className:"text-xs font-semibold text-dark-muted uppercase px-2 mb-2",children:[T.charAt(0).toUpperCase()+T.slice(1),"s  ",H.length]}),H.map(j)]},T)}),y.length>0&&u.jsxs("div",{className:"mt-4",children:[u.jsxs("div",{className:"text-xs font-semibold text-gray-500 uppercase px-2 mb-2",children:["Offline  ",y.length]}),y.map(j)]})]}),u.jsx(C1,{user:a,isOpen:!!a,onClose:()=>l(null),onMessage:T=>{n&&n(T),l(null)}})]})},lO=({isOpen:t,onClose:e,onConfirm:n,url:r})=>{const[a,l]=N.useState(!1),c=()=>{a&&localStorage.setItem("dontAskExternalLinks","true"),n(),e()};return u.jsx(Hs,{isOpen:t,onClose:e,title:"External Link Warning",size:"sm",children:u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:u.jsxs("p",{className:"text-dark-text text-sm",children:[u.jsx("span",{className:"font-semibold text-yellow-500",children:" Security Warning"}),u.jsx("br",{}),u.jsx("br",{}),"You are about to open an external link. External links may lead to harmful or malicious websites. Please ensure you trust the source before proceeding."]})}),u.jsxs("div",{className:"bg-dark-bg p-3 rounded-lg",children:[u.jsx("p",{className:"text-xs text-dark-muted mb-1",children:"Link:"}),u.jsx("p",{className:"text-dark-text text-sm break-all font-mono",children:r})]}),u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:a,onChange:h=>l(h.target.checked),className:`w-4 h-4 rounded border-dark-hover bg-dark-input text-brand-primary 
                       focus:ring-2 focus:ring-brand-primary cursor-pointer`}),u.jsx("span",{className:"text-sm text-dark-text",children:"Don't ask me again"})]}),u.jsxs("div",{className:"flex gap-3 justify-end pt-2",children:[u.jsx(Ze,{variant:"secondary",onClick:e,children:"Cancel"}),u.jsx(Ze,{variant:"primary",onClick:c,children:"Open Link"})]})]})})},cO=t=>{if(!t)return t;let e=t;return e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=e.replace(/```([^`]+)```/g,'<pre class="bg-dark-input text-dark-text p-2 rounded my-1 overflow-x-auto"><code>$1</code></pre>'),e=e.replace(/`([^`]+)`/g,'<code class="bg-dark-input text-dark-text px-1 py-0.5 rounded text-sm">$1</code>'),e=e.replace(/\*\*([^*]+)\*\*/g,'<strong class="font-bold">$1</strong>'),e=e.replace(/\*([^*]+)\*/g,'<em class="italic">$1</em>'),e=e.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer" class="text-brand-primary hover:underline">$1</a>'),e=e.replace(/@(everyone|[a-zA-Z0-9_]+)\b/g,'<span class="text-brand-primary font-medium cursor-pointer hover:underline" data-mention="$1">$1</span>'),e=e.replace(/\n/g,"<br>"),e},q3=({children:t,onMentionClick:e})=>{const n=cO(t),r=a=>{const l=a.target.getAttribute("data-mention");l&&e&&e(l)};return u.jsx("div",{dangerouslySetInnerHTML:{__html:n},className:"markdown-content",onClick:r})},uO=["","","","","","","","","",""],Uw=({onSelect:t,onClose:e})=>u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-40",onClick:e}),u.jsx("div",{className:"absolute left-0 bottom-full mb-2 bg-dark-sidebar border border-dark-hover rounded-lg shadow-lg p-2 z-50",children:u.jsx("div",{className:"flex gap-1",children:uO.map(n=>u.jsx("button",{onClick:()=>t(n),className:"w-8 h-8 flex items-center justify-center text-lg hover:bg-dark-hover rounded transition-colors",title:n,children:n},n))})})]}),dO=({message:t,currentUserId:e,serverId:n,channelId:r,users:a})=>{const[l,c]=N.useState(!1),h=t.poll;if(!h)return null;const m=t.userId===e,g=h.ended===!0,y=h.options.reduce((j,T,H)=>j+(h.votes?.[`option_${H}`]?.length||0),0),b=h.options.map((j,T)=>h.votes?.[`option_${T}`]?.includes(e)?T:-1).filter(j=>j!==-1);b.length>0;const _=async j=>{if(!(l||g)){c(!0);try{const T=`poll.votes.option_${j}`,H=Me(ye,"servers",n,"channels",r,"messages",t.id);if(h.votes?.[`option_${j}`]?.includes(e))await it(H,{[T]:dm(e)});else{if(!h.multipleChoice&&b.length>0)for(const I of b)await it(H,{[`poll.votes.option_${I}`]:dm(e)});await it(H,{[T]:np(e)})}}catch(T){console.error("Error voting:",T)}finally{c(!1)}}},k=async()=>{if(!(!m||g))try{const j=Me(ye,"servers",n,"channels",r,"messages",t.id);await it(j,{"poll.ended":!0})}catch(j){console.error("Error ending poll:",j)}},R=j=>h.anonymous?null:(h.votes?.[`option_${j}`]||[]).map(H=>a?.find(q=>q.id===H)?.displayName||"Unknown").join(", ");return u.jsxs("div",{className:"bg-dark-bg rounded-lg p-4 mt-2 border border-dark-hover max-w-md",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsx(p1,{className:"text-brand-primary",size:20}),u.jsx("span",{className:"text-xs text-dark-muted uppercase tracking-wide font-semibold",children:"Poll"}),h.multipleChoice&&u.jsx("span",{className:"text-xs text-dark-muted bg-dark-hover px-2 py-0.5 rounded",children:"Multiple Choice"}),g&&u.jsx("span",{className:"text-xs text-red-400 bg-red-400/10 px-2 py-0.5 rounded",children:"Ended"})]}),u.jsx("h3",{className:"text-dark-text font-semibold mb-4",children:h.question}),u.jsx("div",{className:"space-y-2",children:h.options.map((j,T)=>{const H=h.votes?.[`option_${T}`]?.length||0,q=y>0?Math.round(H/y*100):0,I=b.includes(T),z=R(T);return u.jsxs("button",{onClick:()=>_(T),disabled:l||g,className:`w-full text-left p-3 rounded-lg relative overflow-hidden transition-all group ${I?"bg-brand-primary/20 border-2 border-brand-primary":"bg-dark-sidebar border border-dark-hover hover:border-dark-muted"} ${g?"cursor-not-allowed opacity-80":""}`,children:[y>0&&u.jsx("div",{className:`absolute inset-0 transition-all duration-500 ${I?"bg-brand-primary/30":"bg-dark-hover/50"}`,style:{width:`${q}%`}}),u.jsxs("div",{className:"relative flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[I&&u.jsx("div",{className:"w-5 h-5 bg-brand-primary rounded-full flex items-center justify-center",children:u.jsx(Do,{className:"text-white",size:14})}),u.jsx("span",{className:`text-sm ${I?"text-dark-text font-medium":"text-dark-muted"}`,children:j})]}),y>0&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"text-xs text-dark-muted",children:[H," vote",H!==1?"s":""]}),u.jsxs("span",{className:"text-sm font-semibold text-dark-text",children:[q,"%"]})]})]}),z&&H>0&&u.jsx("div",{className:"text-xs text-dark-muted mt-1 truncate opacity-0 group-hover:opacity-100 transition-opacity",children:z})]},T)})}),u.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-dark-hover",children:[u.jsxs("div",{className:"flex items-center gap-1 text-xs text-dark-muted",children:[u.jsx(m1,{size:14}),u.jsxs("span",{children:[y," total vote",y!==1?"s":""]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[h.anonymous&&u.jsx("span",{className:"text-xs text-dark-muted",children:"Anonymous"}),m&&!g&&u.jsxs("button",{onClick:k,className:"flex items-center gap-1.5 text-xs font-medium text-red-400 bg-red-400/10 hover:bg-red-400/20 px-3 py-1.5 rounded transition-all border border-red-400/20 hover:border-red-400/30",children:[u.jsx(N7,{size:14}),"End Poll"]})]})]})]})},G3=/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:watch\?v=|embed\/|shorts\/)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,Y3=/(?:https?:\/\/)?(?:open\.)?spotify\.com\/(track|album|playlist|artist|episode|show)\/([a-zA-Z0-9]+)/,K3=/(?:https?:\/\/)?(?:www\.)?(?:twitter\.com|x\.com)\/(\w+)\/status\/(\d+)/,hO=/\.(jpg|jpeg|png|gif|webp|bmp|svg)(\?.*)?$/i,fO=/\.(mp4|webm|ogg|mov)(\?.*)?$/i,mO=/\.(mp3|wav|ogg|m4a)(\?.*)?$/i,pO=t=>{const e=t.match(G3);return e?e[1]:null},gO=t=>{const e=t.match(Y3);return e?{type:e[1],id:e[2]}:null},vO=t=>{const e=t.match(K3);return e?{user:e[1],id:e[2]}:null},Q3=t=>G3.test(t)?"youtube":Y3.test(t)?"spotify":K3.test(t)?"twitter":hO.test(t)?"image":fO.test(t)?"video":mO.test(t)?"audio":t.includes("/raw/upload/")||/\.(zip|rar|7z|exe|pdf|docx|xlsx|txt|iso|yml|json|xml|csv)$/i.test(t)?"file":"generic",X3=t=>{const e=/(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/g;return t.match(e)||[]},yO=({url:t})=>{const e=pO(t),[n,r]=N.useState(!1);if(!e)return null;const a=`https://img.youtube.com/vi/${e}/mqdefault.jpg`;return u.jsxs("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar",children:[u.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border-b border-dark-hover",children:[u.jsx(tP,{className:"text-red-500",size:18}),u.jsx("span",{className:"text-xs text-dark-muted font-medium",children:"YouTube"})]}),n?u.jsx("div",{className:"relative pt-[56.25%]",children:u.jsx("iframe",{className:"absolute inset-0 w-full h-full",src:`https://www.youtube.com/embed/${e}?autoplay=1`,title:"YouTube video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):u.jsxs("div",{className:"relative cursor-pointer group",onClick:()=>r(!0),children:[u.jsx("img",{src:a,alt:"YouTube thumbnail",className:"w-full h-auto",onError:l=>{l.target.src=`https://img.youtube.com/vi/${e}/default.jpg`}}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 group-hover:bg-black/50 transition-colors",children:u.jsx(k7,{className:"text-white/90 group-hover:text-white group-hover:scale-110 transition-all",size:64})})]}),u.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[u.jsx("span",{className:"text-xs text-dark-muted truncate",children:t}),u.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-dark-muted hover:text-brand-primary transition-colors",onClick:l=>l.stopPropagation(),children:u.jsx(h1,{size:16})})]})]})},bO=({url:t})=>{const e=gO(t);if(!e)return null;const r={track:152,album:352,playlist:352,artist:352,episode:232,show:232}[e.type]||152;return u.jsxs("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar",children:[u.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border-b border-dark-hover",children:[u.jsx(eP,{className:"text-green-500",size:18}),u.jsxs("span",{className:"text-xs text-dark-muted font-medium",children:["Spotify ",e.type]})]}),u.jsx("iframe",{src:`https://open.spotify.com/embed/${e.type}/${e.id}?utm_source=generator&theme=0`,width:"100%",height:r,frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",className:"bg-transparent"}),u.jsxs("div",{className:"px-3 py-2 flex items-center justify-between border-t border-dark-hover",children:[u.jsx("span",{className:"text-xs text-dark-muted truncate",children:t}),u.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-dark-muted hover:text-green-500 transition-colors",children:u.jsx(h1,{size:16})})]})]})},xO=({url:t})=>u.jsx("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar",children:u.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"block cursor-pointer",children:u.jsx("img",{src:t,alt:"Attachment",className:"w-full h-auto max-h-[400px] object-contain bg-black/50",loading:"lazy",onError:e=>{e.target.style.display="none"}})})}),_O=({url:t})=>{const e=N.useRef(null),[n,r]=N.useState(!1),[a,l]=N.useState(!1);N.useEffect(()=>{if(window.twttr)c();else{const h=document.createElement("script");h.src="https://platform.twitter.com/widgets.js",h.async=!0,h.onload=()=>{window.twttr&&e.current&&c()},h.onerror=()=>l(!0),document.body.appendChild(h)}},[t]);const c=()=>{window.twttr&&e.current&&(e.current.innerHTML="",window.twttr.widgets.createTweet(vO(t)?.id,e.current,{theme:"dark",conversation:"none"}).then(h=>{r(!!h),h||l(!0)}).catch(()=>l(!0)))};return a?u.jsx("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar p-3",children:u.jsxs("div",{className:"flex items-center gap-2 text-dark-muted",children:[u.jsx(yw,{className:"text-sky-400",size:18}),u.jsx("span",{className:"text-sm",children:"Tweet could not be loaded"}),u.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"ml-auto text-brand-primary hover:underline text-sm",children:"View on X"})]})}):u.jsxs("div",{className:"mt-2 max-w-md",children:[!n&&u.jsx("div",{className:"rounded-lg border border-dark-hover bg-dark-sidebar p-4 animate-pulse",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(yw,{className:"text-sky-400",size:18}),u.jsx("span",{className:"text-sm text-dark-muted",children:"Loading tweet..."})]})}),u.jsx("div",{ref:e,className:n?"":"hidden"})]})},wO=({url:t})=>u.jsx("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar",children:u.jsx("video",{src:t,controls:!0,className:"w-full max-h-[400px] bg-black"})}),SO=({url:t})=>u.jsxs("div",{className:"mt-2 max-w-md rounded-lg border border-dark-hover bg-dark-sidebar p-3 flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-primary/20 flex items-center justify-center flex-shrink-0",children:u.jsx(F7,{className:"text-brand-primary",size:24})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"text-xs text-dark-muted mb-1 truncate",children:t.split("/").pop()}),u.jsx("audio",{src:t,controls:!0,className:"w-full h-8"})]})]}),EO=({url:t})=>{const e=t.split("/").pop().split("?")[0]||"file",n=e.split(".").pop();return u.jsxs("div",{className:"mt-2 max-w-md rounded-lg border border-dark-hover bg-dark-sidebar p-3 flex items-center gap-3 hover:bg-dark-hover transition-colors",children:[u.jsx("div",{className:"w-12 h-12 rounded bg-dark-input flex items-center justify-center flex-shrink-0",children:u.jsx("span",{className:"text-xs font-bold text-dark-text uppercase",children:n.length<5?n:"FILE"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"text-sm font-medium text-dark-text truncate",children:e}),u.jsx("div",{className:"text-xs text-dark-muted",children:"Attachment"})]}),u.jsx("a",{href:t,download:!0,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-full hover:bg-white/10 text-dark-muted hover:text-white transition-colors",title:"Download",children:u.jsx(O7,{size:20})})]})},CO=({url:t})=>{let e="";try{e=new URL(t).hostname.replace("www.","")}catch{e=t}return u.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"mt-2 flex items-center gap-3 max-w-md rounded-lg border border-dark-hover bg-dark-sidebar p-3 hover:bg-dark-hover transition-colors group",children:[u.jsx("div",{className:"w-10 h-10 rounded-lg bg-brand-primary/20 flex items-center justify-center",children:u.jsx(h1,{className:"text-brand-primary",size:20})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"text-sm font-medium text-dark-text truncate group-hover:text-brand-primary transition-colors",children:e}),u.jsx("div",{className:"text-xs text-dark-muted truncate",children:t})]})]})},TO=({url:t})=>{switch(Q3(t)){case"youtube":return u.jsx(yO,{url:t});case"spotify":return u.jsx(bO,{url:t});case"twitter":return u.jsx(_O,{url:t});case"image":return u.jsx(xO,{url:t});case"video":return u.jsx(wO,{url:t});case"audio":return u.jsx(SO,{url:t});case"file":return u.jsx(EO,{url:t});default:return u.jsx(CO,{url:t})}},kO=({text:t})=>{const n=X3(t).slice(0,3);return n.length===0?null:u.jsx("div",{className:"space-y-2",children:n.map((r,a)=>u.jsx(TO,{url:r},`${r}-${a}`))})},W3=({serverId:t,channelId:e,users:n,currentUserId:r,userRole:a,onReply:l,onMessagesChange:c})=>{const[h,m]=N.useState([]),[g,y]=N.useState(null),[b,_]=N.useState(null),[k,R]=N.useState(null),[j,T]=N.useState(null),[H,q]=N.useState(""),[I,z]=N.useState(null),[B,$]=N.useState("bottom"),[w,E]=N.useState(null),[A,D]=N.useState(!0),[O,L]=N.useState(!1),[P,pe]=N.useState(null),ce=N.useRef(null),Y=N.useRef(null),Z=N.useRef(0),J=N.useRef(!0),Te=N.useRef(n);N.useEffect(()=>{Te.current=n},[n]);const{success:Ae,error:F}=Gr(),W=()=>{ce.current?.scrollIntoView({behavior:"smooth"})};N.useEffect(()=>{if(!e||!e)return;const xe=is(t?dt(ye,"servers",t,"channels",e,"messages"):dt(ye,"dms",e,"messages"),Rv("timestamp","desc"),jv(20)),ze=nr(xe,Se=>{const ue=[];if(Se.forEach(U=>{ue.push({id:U.id,...U.data()})}),ue.reverse(),!J.current&&ue.length>Z.current&&r){const U=Te.current?.find(K=>K.id===r);if(U?.displayName){const K=ue.slice(Z.current),ee=K.some(Oe=>Oe.userId!==r&&c7(Oe.text,U.displayName)),ke=K.some(Oe=>{const Fe=Oe.userId!==r&&Oe.replyTo?.userId===r;return Fe&&console.log("Reply notification:",Oe),Fe});(ee||ke)&&(console.log("Playing notification sound",{hasMention:ee,hasReply:ke}),Iv())}}Z.current=ue.length,m(ue),J.current&&(J.current=!1),ue.length>0&&pe(ue[0]),D(ue.length===20),c&&c(ue),setTimeout(W,100)});return()=>{ze(),J.current=!0}},[e,t,r,c]);const ae=async()=>{if(!e||!P||O||!A)return;L(!0);const oe=Y.current,xe=oe?.scrollHeight||0;try{const ze=is(t?dt(ye,"servers",t,"channels",e,"messages"):dt(ye,"dms",e,"messages"),Rv("timestamp","desc"),CD(P.timestamp),jv(20)),Se=await Ro(ze),ue=[];Se.forEach(U=>{ue.push({id:U.id,...U.data()})}),ue.length>0?(ue.reverse(),m(U=>[...ue,...U]),pe(ue[0]),D(ue.length===20),setTimeout(()=>{oe&&(oe.scrollTop=oe.scrollHeight-xe)},0)):D(!1)}catch(ze){console.error("Error loading more messages:",ze),F("Failed to load more messages")}finally{L(!1)}},ge=oe=>n.find(xe=>xe.id===oe)||{displayName:"Unknown",role:"member"},Re=oe=>r===oe||a==="admin",_e=oe=>{if(oe.userId!==r)return!1;if(!oe.timestamp)return!0;const xe=oe.timestamp.toDate();return(new Date-xe)/1e3/60<15},Ne=async()=>{if(g)try{const oe=n.find(ze=>ze.id===g.userId),xe=t?Me(ye,"servers",t,"channels",e,"messages",g.id):Me(ye,"dms",e,"messages",g.id);await jo(xe),await An(dt(ye,"adminLogs"),{type:"message_delete",channelId:e,messageId:g.id,userId:r,deletedText:g.text||"(empty)",originalUserId:g.userId,originalUserName:oe?.displayName||"Unknown User",timestamp:bt()}),Ae("Message deleted successfully")}catch(oe){console.error("Error deleting message:",oe),F("Failed to delete message")}finally{y(null)}},Ke=oe=>{T(oe.id),q(oe.text)},Ge=()=>{T(null),q("")},he=async()=>{if(!j)return;if(!H.trim()){F("Message cannot be empty");return}const oe=j,xe=H.trim(),Se=h.find(ue=>ue.id===oe)?.text||"";T(null),q("");try{const ue=t?Me(ye,"servers",t,"channels",e,"messages",oe):Me(ye,"dms",e,"messages",oe);await it(ue,{text:xe,edited:!0,editedAt:bt()}),await An(dt(ye,"adminLogs"),{type:"message_edit",channelId:e,messageId:oe,userId:r,originalText:Se,newText:xe,timestamp:bt()}),Ae("Message updated successfully")}catch(ue){console.error("Error editing message:",ue),ue.code==="resource-exhausted"?F("Quota exceeded. Please try again tomorrow."):F("Failed to edit message")}},Ce=async(oe,xe)=>{try{const ze=h.find(K=>K.id===oe);if(!ze)return;const Se={...ze.reactions},ue=Se[xe]||[];if(ue.includes(r)){const K=ue.filter(ee=>ee!==r);K.length===0?delete Se[xe]:Se[xe]=K}else Se[xe]=[...ue,r];const U=t?Me(ye,"servers",t,"channels",e,"messages",oe):Me(ye,"dms",e,"messages",oe);await it(U,{reactions:Se})}catch(ze){console.error("Error toggling reaction:",ze),F("Failed to update reaction")}},Ve=async oe=>{if(a!=="admin"&&a!=="moderator"){F("Only admins and moderators can pin messages");return}try{const xe=!oe.pinned,ze=t?Me(ye,"servers",t,"channels",e,"messages",oe.id):Me(ye,"dms",e,"messages",oe.id);await it(ze,{pinned:xe,pinnedBy:xe?r:null,pinnedAt:xe?bt():null}),await An(dt(ye,"adminLogs"),{type:xe?"message_pin":"message_unpin",channelId:e,messageId:oe.id,userId:r,messageText:oe.text,timestamp:bt()}),Ae(xe?"Message pinned":"Message unpinned")}catch(xe){console.error("Error toggling pin:",xe),F("Failed to pin message")}};return u.jsxs("div",{ref:Y,className:"flex-1 overflow-y-auto px-4 py-4 space-y-4",children:[A&&h.length>0&&u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("button",{onClick:ae,disabled:O,className:"px-4 py-2 bg-brand-primary hover:bg-brand-primary/80 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:O?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Loading..."]}):"Load More Messages"})}),h.length===0?u.jsx("div",{className:"text-center text-dark-muted py-8",children:"No messages yet. Start the conversation!"}):h.map(oe=>{const xe=ge(oe.userId);return u.jsxs("div",{id:`message-${oe.id}`,className:"flex gap-3 hover:bg-dark-hover/30 px-2 py-1 rounded group transition-colors",children:[u.jsxs("div",{className:"relative flex-shrink-0",children:[xe.photoUrl?u.jsx("img",{src:xe.photoUrl,alt:xe.displayName,onClick:()=>R(xe),className:"w-10 h-10 rounded-full object-cover cursor-pointer hover:opacity-80 transition-opacity",onError:ze=>{ze.target.style.display="none",ze.target.nextSibling.style.display="flex"}}):null,u.jsx("div",{onClick:()=>R(xe),className:"w-10 h-10 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold cursor-pointer hover:opacity-80 transition-opacity",style:{display:xe.photoUrl?"none":"flex"},children:xe.displayName?.[0]?.toUpperCase()||"U"})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("span",{className:"font-semibold text-dark-text hover:underline cursor-pointer",onClick:()=>R(xe),children:xe.displayName||"Unknown"}),u.jsx("span",{className:At("text-xs px-1.5 py-0.5 rounded border",qT(xe.role)),children:xe.role?.charAt(0).toUpperCase()+xe.role?.slice(1)}),u.jsx("span",{className:"text-xs text-dark-muted",children:sp(oe.timestamp)}),oe.edited&&u.jsx("span",{className:"text-xs text-dark-muted italic",children:"(edited)"}),j!==oe.id&&u.jsxs("div",{className:"ml-auto relative z-50",children:[u.jsx("button",{onClick:ze=>{const Se=ze.clientY,ue=window.innerHeight,U=Se<ue/2;$(U?"bottom":"top"),z(I===oe.id?null:oe.id)},className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-dark-hover rounded transition-all",title:"More options",children:u.jsx(K7,{size:18,className:"text-dark-muted"})}),I===oe.id&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>z(null)}),u.jsxs("div",{className:`absolute right-0 ${B==="top"?"bottom-full mb-1":"top-full mt-1"} bg-dark-sidebar border border-dark-hover rounded-lg shadow-lg py-1 z-50 min-w-[120px]`,children:[u.jsxs("button",{onClick:()=>{l&&l(oe),z(null)},className:"w-full px-3 py-2 text-left text-sm text-dark-text hover:bg-dark-hover flex items-center gap-2",children:[u.jsx(M7,{size:16,className:"text-green-400"}),"Reply"]}),_e(oe)&&u.jsxs("button",{onClick:()=>{Ke(oe),z(null)},className:"w-full px-3 py-2 text-left text-sm text-dark-text hover:bg-dark-hover flex items-center gap-2",children:[u.jsx(Kl,{size:16,className:"text-blue-400"}),"Edit"]}),(a==="admin"||a==="moderator")&&u.jsxs("button",{onClick:()=>{Ve(oe),z(null)},className:"w-full px-3 py-2 text-left text-sm text-dark-text hover:bg-dark-hover flex items-center gap-2",children:[u.jsx(Yl,{size:16,className:"text-blue-400"}),oe.pinned?"Unpin":"Pin"]}),Re(oe.userId)&&u.jsxs("button",{onClick:()=>{y({id:oe.id,text:oe.text,userId:oe.userId}),z(null)},className:"w-full px-3 py-2 text-left text-sm text-admin hover:bg-dark-hover flex items-center gap-2",children:[u.jsx(Ei,{size:16}),"Delete"]})]})]})]})]}),j===oe.id?u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"text",value:H,onChange:ze=>q(ze.target.value),onKeyDown:ze=>{ze.key==="Enter"&&he(),ze.key==="Escape"&&Ge()},className:`flex-1 bg-dark-input text-dark-text px-3 py-1.5 rounded
                                 border border-brand-primary outline-none`,autoFocus:!0}),u.jsx("button",{onClick:he,className:"text-green-500 hover:text-green-400 transition-colors",title:"Save (Enter)",children:u.jsx(Do,{size:20})}),u.jsx("button",{onClick:Ge,className:"text-admin hover:text-admin/80 transition-colors",title:"Cancel (Esc)",children:u.jsx(On,{size:20})})]}):u.jsxs(u.Fragment,{children:[oe.replyTo&&u.jsxs("div",{className:"mb-2 ml-2 pl-3 border-l-2 border-green-400 text-sm bg-dark-sidebar/30 rounded py-1",children:[u.jsxs("div",{className:"text-xs text-green-400 font-semibold",children:["Replying to ",ge(oe.replyTo.userId).displayName]}),u.jsx("div",{className:"text-dark-muted italic truncate",children:oe.replyTo.text})]}),oe.pinned&&u.jsxs("div",{className:"flex items-center gap-1 text-xs text-blue-400 mb-1",children:[u.jsx(Yl,{size:14}),u.jsx("span",{children:"Pinned"})]}),oe.type!=="sticker"&&(()=>{const ze=X3(oe.text);let Se=oe.text;return ze.filter(U=>{const K=Q3(U);return["youtube","spotify","twitter","image","video","audio","file"].includes(K)}).forEach(U=>{Se=Se.replace(U,"")}),Se=Se.trim(),Se.length>0&&u.jsx("div",{className:"text-dark-text whitespace-pre-wrap break-words select-text",children:u.jsx(q3,{onMentionClick:U=>{const K=n.find(ee=>ee.displayName?.toLowerCase()===U.toLowerCase());K&&R(K)},children:Se})})})(),oe.type==="sticker"&&u.jsx("div",{className:"mt-1 mb-1",children:u.jsx("img",{src:oe.text,alt:"Sticker",className:"w-40 h-40 object-contain drop-shadow-md hover:scale-110 transition-transform origin-bottom-left select-none cursor-pointer",onClick:()=>window.open(oe.text,"_blank")})}),oe.type!=="sticker"&&u.jsx(kO,{text:oe.text}),oe.type==="poll"&&u.jsx(dO,{message:oe,currentUserId:r,serverId:t,channelId:e,users:n}),oe.reactions&&Object.keys(oe.reactions).length>0&&u.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[Object.entries(oe.reactions).map(([ze,Se])=>u.jsxs("button",{onClick:()=>Ce(oe.id,ze),className:At("px-2 py-1 rounded-full text-sm flex items-center gap-1 transition-colors",Se.includes(r)?"bg-brand-primary/20 border border-brand-primary text-brand-primary":"bg-dark-hover border border-dark-hover text-dark-text hover:border-dark-muted"),title:`${Se.map(ue=>ge(ue).displayName).join(", ")}`,children:[u.jsx("span",{children:ze}),u.jsx("span",{className:"text-xs",children:Se.length})]},ze)),u.jsxs("div",{className:"relative",children:[u.jsx("button",{onClick:()=>E(w===oe.id?null:oe.id),className:"px-2 py-1 rounded-full text-sm bg-dark-hover border border-dark-hover hover:border-dark-muted transition-colors",title:"Add reaction",children:u.jsx(hw,{size:16,className:"text-dark-muted"})}),w===oe.id&&u.jsx(Uw,{onSelect:ze=>{Ce(oe.id,ze),E(null)},onClose:()=>E(null)})]})]}),(!oe.reactions||Object.keys(oe.reactions).length===0)&&u.jsxs("div",{className:"relative mt-2",children:[u.jsxs("button",{onClick:()=>E(w===oe.id?null:oe.id),className:"opacity-0 group-hover:opacity-100 px-2 py-1 rounded text-xs bg-dark-hover hover:bg-dark-input transition-all flex items-center gap-1",title:"Add reaction",children:[u.jsx(hw,{size:14}),u.jsx("span",{className:"text-dark-muted",children:"Add reaction"})]}),w===oe.id&&u.jsx(Uw,{onSelect:ze=>{Ce(oe.id,ze),E(null)},onClose:()=>E(null)})]})]})]})]},oe.id)}),u.jsx("div",{ref:ce}),u.jsx(ac,{isOpen:!!g,onClose:()=>y(null),onConfirm:Ne,title:"Delete Message",message:"Are you sure you want to delete this message? This action cannot be undone.",confirmText:"Delete",variant:"danger"}),u.jsx(lO,{isOpen:!!b,onClose:()=>_(null),onConfirm:()=>window.open(b?.url,"_blank","noopener,noreferrer"),url:b?.url}),u.jsx(C1,{user:k,isOpen:!!k,onClose:()=>R(null)})]})},zw={smileys:{name:"Smileys & People",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},animals:{name:"Animals & Nature",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},food:{name:"Food & Drink",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},activities:{name:"Activities",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},travel:{name:"Travel & Places",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},objects:{name:"Objects",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},symbols:{name:"Symbols",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","0","1","2","3","4","5","6","7","8","9","","","#","*","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},flags:{name:"Flags",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]}},NO=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],AO=({onSelect:t,onClose:e})=>{const[n,r]=N.useState("smileys");return u.jsxs("div",{className:"absolute bottom-full right-0 mb-2 bg-dark-sidebar border border-dark-hover rounded-lg shadow-xl w-80 z-50",children:[u.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-dark-hover",children:[u.jsx("span",{className:"text-sm font-semibold text-dark-text",children:"Emoji Picker"}),u.jsx("button",{onClick:e,className:"text-dark-muted hover:text-dark-text transition-colors",children:u.jsx(On,{size:18})})]}),u.jsxs("div",{className:"p-3 border-b border-dark-hover",children:[u.jsx("div",{className:"text-xs text-dark-muted mb-2 font-semibold",children:"POPULAR"}),u.jsx("div",{className:"grid grid-cols-10 gap-1",children:NO.map((a,l)=>u.jsx("button",{onClick:()=>t(a),className:"text-2xl hover:bg-dark-hover rounded p-1 transition-colors",title:a,children:a},l))})]}),u.jsx("div",{className:"flex gap-1 p-2 border-b border-dark-hover overflow-x-auto",children:Object.entries(zw).map(([a,l])=>u.jsx("button",{onClick:()=>r(a),className:`text-xl p-2 rounded transition-colors ${n===a?"bg-brand-primary/20 text-brand-primary":"hover:bg-dark-hover text-dark-muted"}`,title:l.name,children:l.icon},a))}),u.jsx("div",{className:"p-3 h-64 overflow-y-auto",children:u.jsx("div",{className:"grid grid-cols-8 gap-1",children:zw[n].emojis.map((a,l)=>u.jsx("button",{onClick:()=>t(a),className:"text-2xl hover:bg-dark-hover rounded p-1 transition-colors",title:a,children:a},l))})})]})};let hf;const RO=new Uint8Array(16);function jO(){if(!hf&&(hf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!hf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return hf(RO)}const Fn=[];for(let t=0;t<256;++t)Fn.push((t+256).toString(16).slice(1));function IO(t,e=0){return Fn[t[e+0]]+Fn[t[e+1]]+Fn[t[e+2]]+Fn[t[e+3]]+"-"+Fn[t[e+4]]+Fn[t[e+5]]+"-"+Fn[t[e+6]]+Fn[t[e+7]]+"-"+Fn[t[e+8]]+Fn[t[e+9]]+"-"+Fn[t[e+10]]+Fn[t[e+11]]+Fn[t[e+12]]+Fn[t[e+13]]+Fn[t[e+14]]+Fn[t[e+15]]}const DO=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Bw={randomUUID:DO};function MO(t,e,n){if(Bw.randomUUID&&!t)return Bw.randomUUID();t=t||{};const r=t.random||(t.rng||jO)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,IO(r)}var PO=Object.defineProperty,OO=Object.defineProperties,LO=Object.getOwnPropertyDescriptors,Fw=Object.getOwnPropertySymbols,VO=Object.prototype.hasOwnProperty,UO=Object.prototype.propertyIsEnumerable,Hw=(t,e,n)=>e in t?PO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,T1=(t,e)=>{for(var n in e||(e={}))VO.call(e,n)&&Hw(t,n,e[n]);if(Fw)for(var n of Fw(e))UO.call(e,n)&&Hw(t,n,e[n]);return t},zO=(t,e)=>OO(t,LO(e)),Hn={ENABLED:typeof window<"u"&&typeof location<"u"&&location.search.indexOf("giphy-debug")!==-1,LEVEL:0,PREFIX:"GiphyJS",debug:(...t)=>{Hn.ENABLED&&Hn.LEVEL<=0&&console.debug(Hn.PREFIX,...t)},info:(...t)=>{Hn.ENABLED&&Hn.LEVEL<=1&&console.info(Hn.PREFIX,...t)},warn:(...t)=>{Hn.ENABLED&&Hn.LEVEL<=2&&console.warn(Hn.PREFIX,...t)},error:(...t)=>{Hn.ENABLED&&Hn.LEVEL<=3&&console.error(Hn.PREFIX,...t)}},BO=(t,e,n)=>{let r=1/0,a;return n.forEach(l=>{const c=l.width/t,h=l.height/e,m=c*h,g=Math.abs(1-m);g<r&&(r=g,a=l)}),a},FO=50;function HO(t,e,n,r=FO){let[a]=t;const l=t.filter(c=>(c.width*c.height>a.width*a.height&&(a=c),e-c.width<=r&&n-c.height<=r));return l.length===0?a:BO(e,n,l)}var J3=HO;function $O(t,e=0){return t.slice(0,e)}function qO(t,e){return t.filter(n=>e.indexOf(n)===-1)}function qv(t,e){const n={};return e.forEach(r=>{t[r]!==void 0&&(n[r]=t[r])}),n}var GO=t=>{let e=0,n=0;const r=t.offsetWidth,a=t.offsetHeight;do e+=t.offsetLeft,n+=t.offsetTop,t=t.offsetParent;while(t);const l={left:e,top:n,width:r,height:a,right:e+r,bottom:n+a,x:e,y:n};return zO(T1({},l),{toJSON:()=>JSON.stringify(l)})},YO=GO,mo="",Z3=16,e6=()=>{let t="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=e.length;for(let r=0;r<Z3;r++)t+=e.charAt(Math.floor(Math.random()*n));return t},KO=()=>{if(!mo){try{mo=sessionStorage.getItem("giphyPingbackId")}catch{}if(!mo){const t=new Date().getTime().toString(16);try{mo=`${t}${MO().replace(/-/g,"")}`.substring(0,Z3)}catch{mo=e6()}try{sessionStorage.setItem("giphyPingbackId",mo)}catch{}}}return mo},k1=KO,ff=null;new Promise(t=>{typeof Image>"u"&&t(!1);const e=new Image;e.onload=()=>{ff=!0,t(ff)},e.onerror=()=>{ff=!1,t(ff)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"});var $w=(t,e,n)=>{let r=t?.assets;if(r){r=T1({},r),delete r.source;const a=Object.values(r).sort((l,c)=>l.width-c.width);return J3(a,e,n)}},QO=(t,e,n,r)=>{const a=qv(t,["original","fixed_width","fixed_height","fixed_width_small","fixed_height_small"]),l=Object.entries(a).map(([c,h])=>T1({renditionName:c},h));return J3(l,e,n,r)},lp=({images:t},e)=>{const{fixed_width:n}=t;if(n){const{width:r,height:a}=n,l=r/a;return Math.round(e/l)}return 0},XO=({images:t},e)=>{const{fixed_width:n}=t;if(n){const{width:r,height:a}=n,l=r/a;return Math.round(e*l)}return 0},WO=({alt_text:t,user:e,tags:n=[],is_sticker:r=!1,title:a=""})=>{if(t)return t;if(a)return a;const l=e&&e.username||"",c=$O(qO(n,["transparent"]),l?4:5);return`${l?`${l} `:""}${c.join(" ")} ${r?"Sticker":"GIF"}`},Uu=(typeof window<"u"?window:global)||{};Uu._GIPHY_SDK_HEADERS_=Uu._GIPHY_SDK_HEADERS_||(Uu.Headers?new Uu.Headers({"X-GIPHY-SDK-PLATFORM":"web"}):void 0);var N1=()=>Uu._GIPHY_SDK_HEADERS_,Gv=(t,e)=>{var n;return(n=N1())==null?void 0:n.set(t,e)},JO=Object.defineProperty,ZO=Object.defineProperties,eL=Object.getOwnPropertyDescriptors,tL=Object.getOwnPropertyNames,qw=Object.getOwnPropertySymbols,nL=Object.prototype.hasOwnProperty,rL=Object.prototype.propertyIsEnumerable,Gw=(t,e,n)=>e in t?JO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ds=(t,e)=>{for(var n in e||(e={}))nL.call(e,n)&&Gw(t,n,e[n]);if(qw)for(var n of qw(e))rL.call(e,n)&&Gw(t,n,e[n]);return t},G0=(t,e)=>ZO(t,eL(e)),sL=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,n)=>(typeof require<"u"?require:e)[n]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')}),iL=(t,e)=>function(){return e||(0,t[tL(t)[0]])((e={exports:{}}).exports,e),e.exports},t6=(t,e,n)=>new Promise((r,a)=>{var l=m=>{try{h(n.next(m))}catch(g){a(g)}},c=m=>{try{h(n.throw(m))}catch(g){a(g)}},h=m=>m.done?r(m.value):Promise.resolve(m.value).then(l,c);h((n=n.apply(t,e)).next())}),aL=iL({"package.json"(t,e){e.exports={scripts:{lint:"run -T eslint . --ext .ts,.tsx",clean:"rm -rf ./dist",dev:"parcel public/test.html",docs:"typedoc src/index.ts",build:"run -T tsup src/index.ts --format cjs,esm --dts && run -T publint",prepublish:"npm run clean && npm run build",test:"run -T jest --config ./jestconfig.js","test:watch":"run -T jest --config ./jestconfig.js --watchAll"},name:"@giphy/js-fetch-api",version:"5.7.0",description:"Javascript API to fetch gifs and stickers from the GIPHY API.",homepage:"https://github.com/Giphy/giphy-js/tree/master/packages/fetch-api",main:"dist/index.cjs",types:"dist/index.d.ts",module:"dist/index.js",type:"module",sideEffects:!1,exports:{".":{types:"./dist/index.d.ts",import:"./dist/index.js",require:"./dist/index.cjs"},"./package.json":"./package.json"},files:["dist/","src/**/*"],license:"MIT",publishConfig:{access:"public"},dependencies:{"@giphy/js-types":"*","@giphy/js-util":"*"},devDependencies:{"jest-fetch-mock":"^3.0.3","parcel-bundler":"latest",typedoc:"^0.20.37","typedoc-thunder-theme":"^0.0.3",typescript:"^5.0.4"}}}}),oL=["is_anonymous","is_community","is_featured","is_hidden","is_indexable","is_preserve_size","is_realtime","is_removed","is_sticker","is_dynamic"],lL=["suppress_chrome","is_public","is_verified"],Yw=t=>e=>t[e]=!!t[e],cL=t=>typeof t=="string"?t:t.text,n6=(t,e="")=>{const n=Ds({},t);n.id=String(n.id),n.tags=(n.tags||[]).map(cL),n.bottle_data||(n.bottle_data={}),n.response_id=e,oL.forEach(Yw(n)),Object.keys(n.images||{}).forEach(a=>{const l=n.images[a];l.width=parseInt(l.width),l.height=parseInt(l.height)});const{user:r}=n;if(r){const a=Ds({},r);lL.forEach(Yw(a)),n.user=a}return n},Kw=t=>{const{response_id:e}=t.meta;return t.data=n6(t.data,e),t},vi=t=>{const{response_id:e}=t.meta;return t.data=t.data.map(n=>n6(n,e)),t},uL=(typeof window<"u"?window:global)||{},dL=uL.GIPHY_API_URL||"https://api.giphy.com/v1/",r6=class extends Error{constructor(e,n,r=0,a=""){super(e),this.url=n,this.status=r,this.statusText=a}},hL=class extends r6{},Qw=r6,fL="@giphy/js-fetch-api: ",mL="Error fetching",pL=t=>t,ss={},gL=6e4,vL=6e3,yL=()=>{const t=Date.now();Object.keys(ss).forEach(e=>{const n=ss[e].isError?vL:gL;t-ss[e].ts>=n&&delete ss[e]})};function bL(t,e={}){const{apiVersion:n=1,noCache:r=!1,normalizer:a=pL}=e,l=dL.replace(/\/v\d+\/$/,`/v${n}/`);if(yL(),!ss[t]||r){const c=`${l}${t}`,h=()=>t6(this,null,function*(){var m,g;let y;try{const b=yield fetch(c,{method:"get"});if(b.ok){const _=yield b.json();if((m=_.meta)!=null&&m.response_id)return a(_);throw{message:"synthetic response"}}else{let _=mL;try{const R=yield b.json();R.message&&(_=R.message),(g=R.meta)!=null&&g.msg&&(_=R.meta.msg)}catch{}ss[t]&&(ss[t].isError=!0);let k=Qw;_==="This content is not available in your location"&&(k=hL),y=new k(`${fL}${_}`,c,b.status,b.statusText)}}catch(b){y=new Qw(b.message,c),ss[t]&&(ss[t].isError=!0)}throw y});ss[t]={request:h(),ts:Date.now()}}return ss[t].request}var fr=bL,Y0=t=>t&&t.type?t.type:"gifs",xL=class{constructor(t,e={}){this.getQS=(n={})=>new URLSearchParams(Ds(G0(Ds({},n),{api_key:this.apiKey,pingback_id:k1()}),this.qsParams)).toString(),this.apiKey=t,this.qsParams=e}categories(t){return fr(`gifs/categories?${this.getQS(t)}`)}gif(t,e){const n=e?.internal?"internal/":"";return fr(`${n}gifs/${t}?${this.getQS()}`,{normalizer:Kw})}gifs(t,e){return Array.isArray(t)?fr(`gifs?${this.getQS({ids:t.join(",")})}`,{normalizer:vi}):fr(`gifs/categories/${t}/${e}?${this.getQS()}`,{normalizer:vi})}emoji(t){return fr(`emoji?${this.getQS(t)}`,{normalizer:vi})}emojiDefaultVariations(t){return fr(`emoji?${this.getQS(t)}`,{apiVersion:2,normalizer:vi})}emojiVariations(t){return fr(`emoji/${t}/variations?${this.getQS()}`,{apiVersion:2,normalizer:vi})}animate(t,e={}){const n=this.getQS(G0(Ds({},e),{m:t}));return fr(`text/animate?${n}`,{normalizer:vi})}search(t,e={}){const n=e.channel?`@${e.channel} ${t}`:t;let r;e.type==="text"&&(r=!0);const a=this.getQS(G0(Ds({rating:"pg-13"},e),{q:n,excludeDynamicResults:r}));return fr(`${Y0(e)}/search?${a}`,{normalizer:vi})}subcategories(t,e){return fr(`gifs/categories/${t}?${this.getQS(e)}`)}trending(t={}){return fr(`${Y0(t)}/trending?${this.getQS(Ds({rating:"pg-13"},t))}`,{normalizer:vi})}random(t){return fr(`${Y0(t)}/random?${this.getQS(Ds({rating:"pg-13"},t))}`,{noCache:!0,normalizer:Kw})}related(t,e={}){const{type:n="gifs"}=e;return fr(`${n}/related?${this.getQS(Ds({gif_id:t,rating:"pg-13"},e))}`,{normalizer:vi})}channels(t,e={}){return fr(`channels/search?${this.getQS(Ds({q:t,rating:"pg-13"},e))}`)}},s6=xL,_L=Symbol("has inivisible gifs"),i6=(t,e=[])=>{let n=[...e],r=e.map(c=>c.id),a=e.length,l=!1;return c=>t6(void 0,null,function*(){if(c&&(n=c,r=c.map(b=>b.id)),l)return n;const h=yield t(a),{pagination:m,data:g}=h;a=m.count+m.offset,l=a===m.total_count,g.forEach(b=>{const{id:_}=b;r.includes(_)||(n.push(b),r.push(_))});const y=[...n];return m.hasMoreGifs&&(y.skipCountCheck=_L),y})},Xw;if(typeof sL<"u"){const{version:t}=aL();(Xw=N1())!=null&&Xw.get("X-GIPHY-SDK-NAME")||(Gv("X-GIPHY-SDK-NAME","FetchAPI"),Gv("X-GIPHY-SDK-VERSION",t))}var vr=function(){return vr=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},vr.apply(this,arguments)};function od(t,e,n){if(n||arguments.length===2)for(var r=0,a=e.length,l;r<a;r++)(l||!(r in e))&&(l||(l=Array.prototype.slice.call(e,0,r)),l[r]=e[r]);return t.concat(l||Array.prototype.slice.call(e))}var Yt="-ms-",Gu="-moz-",It="-webkit-",a6="comm",cp="rule",A1="decl",wL="@import",o6="@keyframes",SL="@layer",l6=Math.abs,R1=String.fromCharCode,Yv=Object.assign;function EL(t,e){return Pn(t,0)^45?(((e<<2^Pn(t,0))<<2^Pn(t,1))<<2^Pn(t,2))<<2^Pn(t,3):0}function c6(t){return t.trim()}function yi(t,e){return(t=e.exec(t))?t[0]:t}function ut(t,e,n){return t.replace(e,n)}function Vf(t,e,n){return t.indexOf(e,n)}function Pn(t,e){return t.charCodeAt(e)|0}function lc(t,e,n){return t.slice(e,n)}function Ps(t){return t.length}function u6(t){return t.length}function zu(t,e){return e.push(t),t}function CL(t,e){return t.map(e).join("")}function Ww(t,e){return t.filter(function(n){return!yi(n,e)})}var up=1,cc=1,d6=0,qr=0,wn=0,Sc="";function dp(t,e,n,r,a,l,c,h){return{value:t,root:e,parent:n,type:r,props:a,children:l,line:up,column:cc,length:c,return:"",siblings:h}}function fa(t,e){return Yv(dp("",null,null,"",null,null,0,t.siblings),t,{length:-t.length},e)}function Dl(t){for(;t.root;)t=fa(t.root,{children:[t]});zu(t,t.siblings)}function TL(){return wn}function kL(){return wn=qr>0?Pn(Sc,--qr):0,cc--,wn===10&&(cc=1,up--),wn}function ls(){return wn=qr<d6?Pn(Sc,qr++):0,cc++,wn===10&&(cc=1,up++),wn}function So(){return Pn(Sc,qr)}function Uf(){return qr}function hp(t,e){return lc(Sc,t,e)}function Kv(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function NL(t){return up=cc=1,d6=Ps(Sc=t),qr=0,[]}function AL(t){return Sc="",t}function K0(t){return c6(hp(qr-1,Qv(t===91?t+2:t===40?t+1:t)))}function RL(t){for(;(wn=So())&&wn<33;)ls();return Kv(t)>2||Kv(wn)>3?"":" "}function jL(t,e){for(;--e&&ls()&&!(wn<48||wn>102||wn>57&&wn<65||wn>70&&wn<97););return hp(t,Uf()+(e<6&&So()==32&&ls()==32))}function Qv(t){for(;ls();)switch(wn){case t:return qr;case 34:case 39:t!==34&&t!==39&&Qv(wn);break;case 40:t===41&&Qv(t);break;case 92:ls();break}return qr}function IL(t,e){for(;ls()&&t+wn!==57;)if(t+wn===84&&So()===47)break;return"/*"+hp(e,qr-1)+"*"+R1(t===47?t:ls())}function DL(t){for(;!Kv(So());)ls();return hp(t,qr)}function ML(t){return AL(zf("",null,null,null,[""],t=NL(t),0,[0],t))}function zf(t,e,n,r,a,l,c,h,m){for(var g=0,y=0,b=c,_=0,k=0,R=0,j=1,T=1,H=1,q=0,I="",z=a,B=l,$=r,w=I;T;)switch(R=q,q=ls()){case 40:if(R!=108&&Pn(w,b-1)==58){Vf(w+=ut(K0(q),"&","&\f"),"&\f",l6(g?h[g-1]:0))!=-1&&(H=-1);break}case 34:case 39:case 91:w+=K0(q);break;case 9:case 10:case 13:case 32:w+=RL(R);break;case 92:w+=jL(Uf()-1,7);continue;case 47:switch(So()){case 42:case 47:zu(PL(IL(ls(),Uf()),e,n,m),m);break;default:w+="/"}break;case 123*j:h[g++]=Ps(w)*H;case 125*j:case 59:case 0:switch(q){case 0:case 125:T=0;case 59+y:H==-1&&(w=ut(w,/\f/g,"")),k>0&&Ps(w)-b&&zu(k>32?Zw(w+";",r,n,b-1,m):Zw(ut(w," ","")+";",r,n,b-2,m),m);break;case 59:w+=";";default:if(zu($=Jw(w,e,n,g,y,a,h,I,z=[],B=[],b,l),l),q===123)if(y===0)zf(w,e,$,$,z,l,b,h,B);else switch(_===99&&Pn(w,3)===110?100:_){case 100:case 108:case 109:case 115:zf(t,$,$,r&&zu(Jw(t,$,$,0,0,a,h,I,a,z=[],b,B),B),a,B,b,h,r?z:B);break;default:zf(w,$,$,$,[""],B,0,h,B)}}g=y=k=0,j=H=1,I=w="",b=c;break;case 58:b=1+Ps(w),k=R;default:if(j<1){if(q==123)--j;else if(q==125&&j++==0&&kL()==125)continue}switch(w+=R1(q),q*j){case 38:H=y>0?1:(w+="\f",-1);break;case 44:h[g++]=(Ps(w)-1)*H,H=1;break;case 64:So()===45&&(w+=K0(ls())),_=So(),y=b=Ps(I=w+=DL(Uf())),q++;break;case 45:R===45&&Ps(w)==2&&(j=0)}}return l}function Jw(t,e,n,r,a,l,c,h,m,g,y,b){for(var _=a-1,k=a===0?l:[""],R=u6(k),j=0,T=0,H=0;j<r;++j)for(var q=0,I=lc(t,_+1,_=l6(T=c[j])),z=t;q<R;++q)(z=c6(T>0?k[q]+" "+I:ut(I,/&\f/g,k[q])))&&(m[H++]=z);return dp(t,e,n,a===0?cp:h,m,g,y,b)}function PL(t,e,n,r){return dp(t,e,n,a6,R1(TL()),lc(t,2,-2),0,r)}function Zw(t,e,n,r,a){return dp(t,e,n,A1,lc(t,0,r),lc(t,r+1,-1),r,a)}function h6(t,e,n){switch(EL(t,e)){case 5103:return It+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return It+t+t;case 4789:return Gu+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return It+t+Gu+t+Yt+t+t;case 5936:switch(Pn(t,e+11)){case 114:return It+t+Yt+ut(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return It+t+Yt+ut(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return It+t+Yt+ut(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return It+t+Yt+t+t;case 6165:return It+t+Yt+"flex-"+t+t;case 5187:return It+t+ut(t,/(\w+).+(:[^]+)/,It+"box-$1$2"+Yt+"flex-$1$2")+t;case 5443:return It+t+Yt+"flex-item-"+ut(t,/flex-|-self/g,"")+(yi(t,/flex-|baseline/)?"":Yt+"grid-row-"+ut(t,/flex-|-self/g,""))+t;case 4675:return It+t+Yt+"flex-line-pack"+ut(t,/align-content|flex-|-self/g,"")+t;case 5548:return It+t+Yt+ut(t,"shrink","negative")+t;case 5292:return It+t+Yt+ut(t,"basis","preferred-size")+t;case 6060:return It+"box-"+ut(t,"-grow","")+It+t+Yt+ut(t,"grow","positive")+t;case 4554:return It+ut(t,/([^-])(transform)/g,"$1"+It+"$2")+t;case 6187:return ut(ut(ut(t,/(zoom-|grab)/,It+"$1"),/(image-set)/,It+"$1"),t,"")+t;case 5495:case 3959:return ut(t,/(image-set\([^]*)/,It+"$1$`$1");case 4968:return ut(ut(t,/(.+:)(flex-)?(.*)/,It+"box-pack:$3"+Yt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+It+t+t;case 4200:if(!yi(t,/flex-|baseline/))return Yt+"grid-column-align"+lc(t,e)+t;break;case 2592:case 3360:return Yt+ut(t,"template-","")+t;case 4384:case 3616:return n&&n.some(function(r,a){return e=a,yi(r.props,/grid-\w+-end/)})?~Vf(t+(n=n[e].value),"span",0)?t:Yt+ut(t,"-start","")+t+Yt+"grid-row-span:"+(~Vf(n,"span",0)?yi(n,/\d+/):+yi(n,/\d+/)-+yi(t,/\d+/))+";":Yt+ut(t,"-start","")+t;case 4896:case 4128:return n&&n.some(function(r){return yi(r.props,/grid-\w+-start/)})?t:Yt+ut(ut(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return ut(t,/(.+)-inline(.+)/,It+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ps(t)-1-e>6)switch(Pn(t,e+1)){case 109:if(Pn(t,e+4)!==45)break;case 102:return ut(t,/(.+:)(.+)-([^]+)/,"$1"+It+"$2-$3$1"+Gu+(Pn(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~Vf(t,"stretch",0)?h6(ut(t,"stretch","fill-available"),e,n)+t:t}break;case 5152:case 5920:return ut(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,a,l,c,h,m,g){return Yt+a+":"+l+g+(c?Yt+a+"-span:"+(h?m:+m-+l)+g:"")+t});case 4949:if(Pn(t,e+6)===121)return ut(t,":",":"+It)+t;break;case 6444:switch(Pn(t,Pn(t,14)===45?18:11)){case 120:return ut(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+It+(Pn(t,14)===45?"inline-":"")+"box$3$1"+It+"$2$3$1"+Yt+"$2box$3")+t;case 100:return ut(t,":",":"+Yt)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return ut(t,"scroll-","scroll-snap-")+t}return t}function Em(t,e){for(var n="",r=0;r<t.length;r++)n+=e(t[r],r,t,e)||"";return n}function OL(t,e,n,r){switch(t.type){case SL:if(t.children.length)break;case wL:case A1:return t.return=t.return||t.value;case a6:return"";case o6:return t.return=t.value+"{"+Em(t.children,r)+"}";case cp:if(!Ps(t.value=t.props.join(",")))return""}return Ps(n=Em(t.children,r))?t.return=t.value+"{"+n+"}":""}function LL(t){var e=u6(t);return function(n,r,a,l){for(var c="",h=0;h<e;h++)c+=t[h](n,r,a,l)||"";return c}}function VL(t){return function(e){e.root||(e=e.return)&&t(e)}}function UL(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case A1:t.return=h6(t.value,t.length,n);return;case o6:return Em([fa(t,{value:ut(t.value,"@","@"+It)})],r);case cp:if(t.length)return CL(n=t.props,function(a){switch(yi(a,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Dl(fa(t,{props:[ut(a,/:(read-\w+)/,":"+Gu+"$1")]})),Dl(fa(t,{props:[a]})),Yv(t,{props:Ww(n,r)});break;case"::placeholder":Dl(fa(t,{props:[ut(a,/:(plac\w+)/,":"+It+"input-$1")]})),Dl(fa(t,{props:[ut(a,/:(plac\w+)/,":"+Gu+"$1")]})),Dl(fa(t,{props:[ut(a,/:(plac\w+)/,Yt+"input-$1")]})),Dl(fa(t,{props:[a]})),Yv(t,{props:Ww(n,r)});break}return""})}}var zL={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Nr={},uc=typeof process<"u"&&Nr!==void 0&&(Nr.REACT_APP_SC_ATTR||Nr.SC_ATTR)||"data-styled",f6="active",m6="data-styled-version",fp="6.1.19",j1=`/*!sc*/
`,Cm=typeof window<"u"&&typeof document<"u",BL=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&Nr!==void 0&&Nr.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&Nr.REACT_APP_SC_DISABLE_SPEEDY!==""?Nr.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&Nr.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&Nr!==void 0&&Nr.SC_DISABLE_SPEEDY!==void 0&&Nr.SC_DISABLE_SPEEDY!==""&&Nr.SC_DISABLE_SPEEDY!=="false"&&Nr.SC_DISABLE_SPEEDY),mp=Object.freeze([]),dc=Object.freeze({});function FL(t,e,n){return n===void 0&&(n=dc),t.theme!==n.theme&&t.theme||e||n.theme}var p6=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),HL=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,$L=/(^-|-$)/g;function eS(t){return t.replace(HL,"-").replace($L,"")}var qL=/(a)(d)/gi,mf=52,tS=function(t){return String.fromCharCode(t+(t>25?39:97))};function Xv(t){var e,n="";for(e=Math.abs(t);e>mf;e=e/mf|0)n=tS(e%mf)+n;return(tS(e%mf)+n).replace(qL,"$1-$2")}var Q0,g6=5381,Bl=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},v6=function(t){return Bl(g6,t)};function y6(t){return Xv(v6(t)>>>0)}function GL(t){return t.displayName||t.name||"Component"}function X0(t){return typeof t=="string"&&!0}var b6=typeof Symbol=="function"&&Symbol.for,x6=b6?Symbol.for("react.memo"):60115,YL=b6?Symbol.for("react.forward_ref"):60112,KL={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},QL={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},_6={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},XL=((Q0={})[YL]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Q0[x6]=_6,Q0);function nS(t){return("type"in(e=t)&&e.type.$$typeof)===x6?_6:"$$typeof"in t?XL[t.$$typeof]:KL;var e}var WL=Object.defineProperty,JL=Object.getOwnPropertyNames,rS=Object.getOwnPropertySymbols,ZL=Object.getOwnPropertyDescriptor,eV=Object.getPrototypeOf,sS=Object.prototype;function w6(t,e,n){if(typeof e!="string"){if(sS){var r=eV(e);r&&r!==sS&&w6(t,r,n)}var a=JL(e);rS&&(a=a.concat(rS(e)));for(var l=nS(t),c=nS(e),h=0;h<a.length;++h){var m=a[h];if(!(m in QL||n&&n[m]||c&&m in c||l&&m in l)){var g=ZL(e,m);try{WL(t,m,g)}catch{}}}}return t}function hc(t){return typeof t=="function"}function I1(t){return typeof t=="object"&&"styledComponentId"in t}function bo(t,e){return t&&e?"".concat(t," ").concat(e):t||e||""}function Wv(t,e){if(t.length===0)return"";for(var n=t[0],r=1;r<t.length;r++)n+=t[r];return n}function ld(t){return t!==null&&typeof t=="object"&&t.constructor.name===Object.name&&!("props"in t&&t.$$typeof)}function Jv(t,e,n){if(n===void 0&&(n=!1),!n&&!ld(t)&&!Array.isArray(t))return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)t[r]=Jv(t[r],e[r]);else if(ld(e))for(var r in e)t[r]=Jv(t[r],e[r]);return t}function D1(t,e){Object.defineProperty(t,"toString",{value:e})}function Ad(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(t," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var tV=(function(){function t(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return t.prototype.indexOfGroup=function(e){for(var n=0,r=0;r<e;r++)n+=this.groupSizes[r];return n},t.prototype.insertRules=function(e,n){if(e>=this.groupSizes.length){for(var r=this.groupSizes,a=r.length,l=a;e>=l;)if((l<<=1)<0)throw Ad(16,"".concat(e));this.groupSizes=new Uint32Array(l),this.groupSizes.set(r),this.length=l;for(var c=a;c<l;c++)this.groupSizes[c]=0}for(var h=this.indexOfGroup(e+1),m=(c=0,n.length);c<m;c++)this.tag.insertRule(h,n[c])&&(this.groupSizes[e]++,h++)},t.prototype.clearGroup=function(e){if(e<this.length){var n=this.groupSizes[e],r=this.indexOfGroup(e),a=r+n;this.groupSizes[e]=0;for(var l=r;l<a;l++)this.tag.deleteRule(r)}},t.prototype.getGroup=function(e){var n="";if(e>=this.length||this.groupSizes[e]===0)return n;for(var r=this.groupSizes[e],a=this.indexOfGroup(e),l=a+r,c=a;c<l;c++)n+="".concat(this.tag.getRule(c)).concat(j1);return n},t})(),Bf=new Map,Tm=new Map,Ff=1,pf=function(t){if(Bf.has(t))return Bf.get(t);for(;Tm.has(Ff);)Ff++;var e=Ff++;return Bf.set(t,e),Tm.set(e,t),e},nV=function(t,e){Ff=e+1,Bf.set(t,e),Tm.set(e,t)},rV="style[".concat(uc,"][").concat(m6,'="').concat(fp,'"]'),sV=new RegExp("^".concat(uc,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),iV=function(t,e,n){for(var r,a=n.split(","),l=0,c=a.length;l<c;l++)(r=a[l])&&t.registerName(e,r)},aV=function(t,e){for(var n,r=((n=e.textContent)!==null&&n!==void 0?n:"").split(j1),a=[],l=0,c=r.length;l<c;l++){var h=r[l].trim();if(h){var m=h.match(sV);if(m){var g=0|parseInt(m[1],10),y=m[2];g!==0&&(nV(y,g),iV(t,y,m[3]),t.getTag().insertRules(g,a)),a.length=0}else a.push(h)}}},iS=function(t){for(var e=document.querySelectorAll(rV),n=0,r=e.length;n<r;n++){var a=e[n];a&&a.getAttribute(uc)!==f6&&(aV(t,a),a.parentNode&&a.parentNode.removeChild(a))}};function oV(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var S6=function(t){var e=document.head,n=t||e,r=document.createElement("style"),a=(function(h){var m=Array.from(h.querySelectorAll("style[".concat(uc,"]")));return m[m.length-1]})(n),l=a!==void 0?a.nextSibling:null;r.setAttribute(uc,f6),r.setAttribute(m6,fp);var c=oV();return c&&r.setAttribute("nonce",c),n.insertBefore(r,l),r},lV=(function(){function t(e){this.element=S6(e),this.element.appendChild(document.createTextNode("")),this.sheet=(function(n){if(n.sheet)return n.sheet;for(var r=document.styleSheets,a=0,l=r.length;a<l;a++){var c=r[a];if(c.ownerNode===n)return c}throw Ad(17)})(this.element),this.length=0}return t.prototype.insertRule=function(e,n){try{return this.sheet.insertRule(n,e),this.length++,!0}catch{return!1}},t.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.prototype.getRule=function(e){var n=this.sheet.cssRules[e];return n&&n.cssText?n.cssText:""},t})(),cV=(function(){function t(e){this.element=S6(e),this.nodes=this.element.childNodes,this.length=0}return t.prototype.insertRule=function(e,n){if(e<=this.length&&e>=0){var r=document.createTextNode(n);return this.element.insertBefore(r,this.nodes[e]||null),this.length++,!0}return!1},t.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},t})(),uV=(function(){function t(e){this.rules=[],this.length=0}return t.prototype.insertRule=function(e,n){return e<=this.length&&(this.rules.splice(e,0,n),this.length++,!0)},t.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},t})(),aS=Cm,dV={isServer:!Cm,useCSSOMInjection:!BL},E6=(function(){function t(e,n,r){e===void 0&&(e=dc),n===void 0&&(n={});var a=this;this.options=vr(vr({},dV),e),this.gs=n,this.names=new Map(r),this.server=!!e.isServer,!this.server&&Cm&&aS&&(aS=!1,iS(this)),D1(this,function(){return(function(l){for(var c=l.getTag(),h=c.length,m="",g=function(b){var _=(function(H){return Tm.get(H)})(b);if(_===void 0)return"continue";var k=l.names.get(_),R=c.getGroup(b);if(k===void 0||!k.size||R.length===0)return"continue";var j="".concat(uc,".g").concat(b,'[id="').concat(_,'"]'),T="";k!==void 0&&k.forEach(function(H){H.length>0&&(T+="".concat(H,","))}),m+="".concat(R).concat(j,'{content:"').concat(T,'"}').concat(j1)},y=0;y<h;y++)g(y);return m})(a)})}return t.registerId=function(e){return pf(e)},t.prototype.rehydrate=function(){!this.server&&Cm&&iS(this)},t.prototype.reconstructWithOptions=function(e,n){return n===void 0&&(n=!0),new t(vr(vr({},this.options),e),this.gs,n&&this.names||void 0)},t.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.prototype.getTag=function(){return this.tag||(this.tag=(e=(function(n){var r=n.useCSSOMInjection,a=n.target;return n.isServer?new uV(a):r?new lV(a):new cV(a)})(this.options),new tV(e)));var e},t.prototype.hasNameForId=function(e,n){return this.names.has(e)&&this.names.get(e).has(n)},t.prototype.registerName=function(e,n){if(pf(e),this.names.has(e))this.names.get(e).add(n);else{var r=new Set;r.add(n),this.names.set(e,r)}},t.prototype.insertRules=function(e,n,r){this.registerName(e,n),this.getTag().insertRules(pf(e),r)},t.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.prototype.clearRules=function(e){this.getTag().clearGroup(pf(e)),this.clearNames(e)},t.prototype.clearTag=function(){this.tag=void 0},t})(),hV=/&/g,fV=/^\s*\/\/.*$/gm;function C6(t,e){return t.map(function(n){return n.type==="rule"&&(n.value="".concat(e," ").concat(n.value),n.value=n.value.replaceAll(",",",".concat(e," ")),n.props=n.props.map(function(r){return"".concat(e," ").concat(r)})),Array.isArray(n.children)&&n.type!=="@keyframes"&&(n.children=C6(n.children,e)),n})}function mV(t){var e,n,r,a=dc,l=a.options,c=l===void 0?dc:l,h=a.plugins,m=h===void 0?mp:h,g=function(_,k,R){return R.startsWith(n)&&R.endsWith(n)&&R.replaceAll(n,"").length>0?".".concat(e):_},y=m.slice();y.push(function(_){_.type===cp&&_.value.includes("&")&&(_.props[0]=_.props[0].replace(hV,n).replace(r,g))}),c.prefix&&y.push(UL),y.push(OL);var b=function(_,k,R,j){k===void 0&&(k=""),R===void 0&&(R=""),j===void 0&&(j="&"),e=j,n=k,r=new RegExp("\\".concat(n,"\\b"),"g");var T=_.replace(fV,""),H=ML(R||k?"".concat(R," ").concat(k," { ").concat(T," }"):T);c.namespace&&(H=C6(H,c.namespace));var q=[];return Em(H,LL(y.concat(VL(function(I){return q.push(I)})))),q};return b.hash=m.length?m.reduce(function(_,k){return k.name||Ad(15),Bl(_,k.name)},g6).toString():"",b}var pV=new E6,Zv=mV(),T6=me.createContext({shouldForwardProp:void 0,styleSheet:pV,stylis:Zv});T6.Consumer;me.createContext(void 0);function oS(){return N.useContext(T6)}var k6=(function(){function t(e,n){var r=this;this.inject=function(a,l){l===void 0&&(l=Zv);var c=r.name+l.hash;a.hasNameForId(r.id,c)||a.insertRules(r.id,c,l(r.rules,c,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=n,D1(this,function(){throw Ad(12,String(r.name))})}return t.prototype.getName=function(e){return e===void 0&&(e=Zv),this.name+e.hash},t})(),gV=function(t){return t>="A"&&t<="Z"};function lS(t){for(var e="",n=0;n<t.length;n++){var r=t[n];if(n===1&&r==="-"&&t[0]==="-")return t;gV(r)?e+="-"+r.toLowerCase():e+=r}return e.startsWith("ms-")?"-"+e:e}var N6=function(t){return t==null||t===!1||t===""},A6=function(t){var e,n,r=[];for(var a in t){var l=t[a];t.hasOwnProperty(a)&&!N6(l)&&(Array.isArray(l)&&l.isCss||hc(l)?r.push("".concat(lS(a),":"),l,";"):ld(l)?r.push.apply(r,od(od(["".concat(a," {")],A6(l),!1),["}"],!1)):r.push("".concat(lS(a),": ").concat((e=a,(n=l)==null||typeof n=="boolean"||n===""?"":typeof n!="number"||n===0||e in zL||e.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function Eo(t,e,n,r){if(N6(t))return[];if(I1(t))return[".".concat(t.styledComponentId)];if(hc(t)){if(!hc(l=t)||l.prototype&&l.prototype.isReactComponent||!e)return[t];var a=t(e);return Eo(a,e,n,r)}var l;return t instanceof k6?n?(t.inject(n,r),[t.getName(r)]):[t]:ld(t)?A6(t):Array.isArray(t)?Array.prototype.concat.apply(mp,t.map(function(c){return Eo(c,e,n,r)})):[t.toString()]}function vV(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(hc(n)&&!I1(n))return!1}return!0}var yV=v6(fp),bV=(function(){function t(e,n,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&vV(e),this.componentId=n,this.baseHash=Bl(yV,n),this.baseStyle=r,E6.registerId(n)}return t.prototype.generateAndInjectStyles=function(e,n,r){var a=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,n,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(this.componentId,this.staticRulesId))a=bo(a,this.staticRulesId);else{var l=Wv(Eo(this.rules,e,n,r)),c=Xv(Bl(this.baseHash,l)>>>0);if(!n.hasNameForId(this.componentId,c)){var h=r(l,".".concat(c),void 0,this.componentId);n.insertRules(this.componentId,c,h)}a=bo(a,c),this.staticRulesId=c}else{for(var m=Bl(this.baseHash,r.hash),g="",y=0;y<this.rules.length;y++){var b=this.rules[y];if(typeof b=="string")g+=b;else if(b){var _=Wv(Eo(b,e,n,r));m=Bl(m,_+y),g+=_}}if(g){var k=Xv(m>>>0);n.hasNameForId(this.componentId,k)||n.insertRules(this.componentId,k,r(g,".".concat(k),void 0,this.componentId)),a=bo(a,k)}}return a},t})(),R6=me.createContext(void 0);R6.Consumer;var W0={};function xV(t,e,n){var r=I1(t),a=t,l=!X0(t),c=e.attrs,h=c===void 0?mp:c,m=e.componentId,g=m===void 0?(function(z,B){var $=typeof z!="string"?"sc":eS(z);W0[$]=(W0[$]||0)+1;var w="".concat($,"-").concat(y6(fp+$+W0[$]));return B?"".concat(B,"-").concat(w):w})(e.displayName,e.parentComponentId):m,y=e.displayName,b=y===void 0?(function(z){return X0(z)?"styled.".concat(z):"Styled(".concat(GL(z),")")})(t):y,_=e.displayName&&e.componentId?"".concat(eS(e.displayName),"-").concat(e.componentId):e.componentId||g,k=r&&a.attrs?a.attrs.concat(h).filter(Boolean):h,R=e.shouldForwardProp;if(r&&a.shouldForwardProp){var j=a.shouldForwardProp;if(e.shouldForwardProp){var T=e.shouldForwardProp;R=function(z,B){return j(z,B)&&T(z,B)}}else R=j}var H=new bV(n,_,r?a.componentStyle:void 0);function q(z,B){return(function($,w,E){var A=$.attrs,D=$.componentStyle,O=$.defaultProps,L=$.foldedComponentIds,P=$.styledComponentId,pe=$.target,ce=me.useContext(R6),Y=oS(),Z=$.shouldForwardProp||Y.shouldForwardProp,J=FL(w,ce,O)||dc,Te=(function(Re,_e,Ne){for(var Ke,Ge=vr(vr({},_e),{className:void 0,theme:Ne}),he=0;he<Re.length;he+=1){var Ce=hc(Ke=Re[he])?Ke(Ge):Ke;for(var Ve in Ce)Ge[Ve]=Ve==="className"?bo(Ge[Ve],Ce[Ve]):Ve==="style"?vr(vr({},Ge[Ve]),Ce[Ve]):Ce[Ve]}return _e.className&&(Ge.className=bo(Ge.className,_e.className)),Ge})(A,w,J),Ae=Te.as||pe,F={};for(var W in Te)Te[W]===void 0||W[0]==="$"||W==="as"||W==="theme"&&Te.theme===J||(W==="forwardedAs"?F.as=Te.forwardedAs:Z&&!Z(W,Ae)||(F[W]=Te[W]));var ae=(function(Re,_e){var Ne=oS(),Ke=Re.generateAndInjectStyles(_e,Ne.styleSheet,Ne.stylis);return Ke})(D,Te),ge=bo(L,P);return ae&&(ge+=" "+ae),Te.className&&(ge+=" "+Te.className),F[X0(Ae)&&!p6.has(Ae)?"class":"className"]=ge,E&&(F.ref=E),N.createElement(Ae,F)})(I,z,B)}q.displayName=b;var I=me.forwardRef(q);return I.attrs=k,I.componentStyle=H,I.displayName=b,I.shouldForwardProp=R,I.foldedComponentIds=r?bo(a.foldedComponentIds,a.styledComponentId):"",I.styledComponentId=_,I.target=r?a.target:t,Object.defineProperty(I,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(z){this._foldedDefaultProps=r?(function(B){for(var $=[],w=1;w<arguments.length;w++)$[w-1]=arguments[w];for(var E=0,A=$;E<A.length;E++)Jv(B,A[E],!0);return B})({},a.defaultProps,z):z}}),D1(I,function(){return".".concat(I.styledComponentId)}),l&&w6(I,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),I}function cS(t,e){for(var n=[t[0]],r=0,a=e.length;r<a;r+=1)n.push(e[r],t[r+1]);return n}var uS=function(t){return Object.assign(t,{isCss:!0})};function pp(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(hc(t)||ld(t))return uS(Eo(cS(mp,od([t],e,!0))));var r=t;return e.length===0&&r.length===1&&typeof r[0]=="string"?Eo(r):uS(Eo(cS(r,e)))}function ey(t,e,n){if(n===void 0&&(n=dc),!e)throw Ad(1,e);var r=function(a){for(var l=[],c=1;c<arguments.length;c++)l[c-1]=arguments[c];return t(e,n,pp.apply(void 0,od([a],l,!1)))};return r.attrs=function(a){return ey(t,e,vr(vr({},n),{attrs:Array.prototype.concat(n.attrs,a).filter(Boolean)}))},r.withConfig=function(a){return ey(t,e,vr(vr({},n),a))},r}var j6=function(t){return ey(xV,t)},We=j6;p6.forEach(function(t){We[t]=j6(t)});function Rd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Wv(pp.apply(void 0,od([t],e,!1))),a=y6(r);return new k6(a,r)}var ty="#121212",I6="#212121",_V="#3e3e3e",wV="#4a4a4a",D6="#a6a6a6",SV="#ececec",Hf="#ffffff",M1="#00ccff",M6="#00ff99",P6="#9933ff",O6="#ff6666",L6="#fff35c",EV="#6157ff";function dS(t,e,n,r){var a,l=!1,c=0;function h(){a&&clearTimeout(a)}function m(){h(),l=!0}typeof e!="boolean"&&(r=n,n=e,e=void 0);function g(){for(var y=arguments.length,b=new Array(y),_=0;_<y;_++)b[_]=arguments[_];var k=this,R=Date.now()-c;if(l)return;function j(){c=Date.now(),n.apply(k,b)}function T(){a=void 0}r&&!a&&j(),h(),r===void 0&&R>t?j():e!==!0&&(a=setTimeout(r?T:j,r===void 0?t-R:t))}return g.cancel=m,g}function P1(t,e,n){return n===void 0?dS(t,e,!1):dS(t,n,e!==!1)}var hS={},fS;function CV(){return fS||(fS=1,(function(){if(typeof window!="object")return;if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});return}function t(I){try{return I.defaultView&&I.defaultView.frameElement||null}catch{return null}}var e=(function(I){for(var z=I,B=t(z);B;)z=B.ownerDocument,B=t(z);return z})(window.document),n=[],r=null,a=null;function l(I){this.time=I.time,this.target=I.target,this.rootBounds=R(I.rootBounds),this.boundingClientRect=R(I.boundingClientRect),this.intersectionRect=R(I.intersectionRect||k()),this.isIntersecting=!!I.intersectionRect;var z=this.boundingClientRect,B=z.width*z.height,$=this.intersectionRect,w=$.width*$.height;B?this.intersectionRatio=Number((w/B).toFixed(4)):this.intersectionRatio=this.isIntersecting?1:0}function c(I,z){var B=z||{};if(typeof I!="function")throw new Error("callback must be a function");if(B.root&&B.root.nodeType!=1&&B.root.nodeType!=9)throw new Error("root must be a Document or Element");this._checkForIntersections=m(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=I,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(B.rootMargin),this.thresholds=this._initThresholds(B.threshold),this.root=B.root||null,this.rootMargin=this._rootMarginValues.map(function($){return $.value+$.unit}).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}c.prototype.THROTTLE_TIMEOUT=100,c.prototype.POLL_INTERVAL=null,c.prototype.USE_MUTATION_OBSERVER=!0,c._setupCrossOriginUpdater=function(){return r||(r=function(I,z){!I||!z?a=k():a=j(I,z),n.forEach(function(B){B._checkForIntersections()})}),r},c._resetCrossOriginUpdater=function(){r=null,a=null},c.prototype.observe=function(I){var z=this._observationTargets.some(function(B){return B.element==I});if(!z){if(!(I&&I.nodeType==1))throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:I,entry:null}),this._monitorIntersections(I.ownerDocument),this._checkForIntersections()}},c.prototype.unobserve=function(I){this._observationTargets=this._observationTargets.filter(function(z){return z.element!=I}),this._unmonitorIntersections(I.ownerDocument),this._observationTargets.length==0&&this._unregisterInstance()},c.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},c.prototype.takeRecords=function(){var I=this._queuedEntries.slice();return this._queuedEntries=[],I},c.prototype._initThresholds=function(I){var z=I||[0];return Array.isArray(z)||(z=[z]),z.sort().filter(function(B,$,w){if(typeof B!="number"||isNaN(B)||B<0||B>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return B!==w[$-1]})},c.prototype._parseRootMargin=function(I){var z=I||"0px",B=z.split(/\s+/).map(function($){var w=/^(-?\d*\.?\d+)(px|%)$/.exec($);if(!w)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(w[1]),unit:w[2]}});return B[1]=B[1]||B[0],B[2]=B[2]||B[0],B[3]=B[3]||B[1],B},c.prototype._monitorIntersections=function(I){var z=I.defaultView;if(z&&this._monitoringDocuments.indexOf(I)==-1){var B=this._checkForIntersections,$=null,w=null;this.POLL_INTERVAL?$=z.setInterval(B,this.POLL_INTERVAL):(g(z,"resize",B,!0),g(I,"scroll",B,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in z&&(w=new z.MutationObserver(B),w.observe(I,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))),this._monitoringDocuments.push(I),this._monitoringUnsubscribes.push(function(){var D=I.defaultView;D&&($&&D.clearInterval($),y(D,"resize",B,!0)),y(I,"scroll",B,!0),w&&w.disconnect()});var E=this.root&&(this.root.ownerDocument||this.root)||e;if(I!=E){var A=t(I);A&&this._monitorIntersections(A.ownerDocument)}}},c.prototype._unmonitorIntersections=function(I){var z=this._monitoringDocuments.indexOf(I);if(z!=-1){var B=this.root&&(this.root.ownerDocument||this.root)||e,$=this._observationTargets.some(function(A){var D=A.element.ownerDocument;if(D==I)return!0;for(;D&&D!=B;){var O=t(D);if(D=O&&O.ownerDocument,D==I)return!0}return!1});if(!$){var w=this._monitoringUnsubscribes[z];if(this._monitoringDocuments.splice(z,1),this._monitoringUnsubscribes.splice(z,1),w(),I!=B){var E=t(I);E&&this._unmonitorIntersections(E.ownerDocument)}}}},c.prototype._unmonitorAllIntersections=function(){var I=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var z=0;z<I.length;z++)I[z]()},c.prototype._checkForIntersections=function(){if(!(!this.root&&r&&!a)){var I=this._rootIsInDom(),z=I?this._getRootRect():k();this._observationTargets.forEach(function(B){var $=B.element,w=_($),E=this._rootContainsTarget($),A=B.entry,D=I&&E&&this._computeTargetAndRootIntersection($,w,z),O=null;this._rootContainsTarget($)?(!r||this.root)&&(O=z):O=k();var L=B.entry=new l({time:h(),target:$,boundingClientRect:w,rootBounds:O,intersectionRect:D});A?I&&E?this._hasCrossedThreshold(A,L)&&this._queuedEntries.push(L):A&&A.isIntersecting&&this._queuedEntries.push(L):this._queuedEntries.push(L)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},c.prototype._computeTargetAndRootIntersection=function(I,z,B){if(window.getComputedStyle(I).display!="none"){for(var $=z,w=H(I),E=!1;!E&&w;){var A=null,D=w.nodeType==1?window.getComputedStyle(w):{};if(D.display=="none")return null;if(w==this.root||w.nodeType==9)if(E=!0,w==this.root||w==e)r&&!this.root?!a||a.width==0&&a.height==0?(w=null,A=null,$=null):A=a:A=B;else{var O=H(w),L=O&&_(O),P=O&&this._computeTargetAndRootIntersection(O,L,B);L&&P?(w=O,A=j(L,P)):(w=null,$=null)}else{var pe=w.ownerDocument;w!=pe.body&&w!=pe.documentElement&&D.overflow!="visible"&&(A=_(w))}if(A&&($=b(A,$)),!$)break;w=w&&H(w)}return $}},c.prototype._getRootRect=function(){var I;if(this.root&&!q(this.root))I=_(this.root);else{var z=q(this.root)?this.root:e,B=z.documentElement,$=z.body;I={top:0,left:0,right:B.clientWidth||$.clientWidth,width:B.clientWidth||$.clientWidth,bottom:B.clientHeight||$.clientHeight,height:B.clientHeight||$.clientHeight}}return this._expandRectByRootMargin(I)},c.prototype._expandRectByRootMargin=function(I){var z=this._rootMarginValues.map(function($,w){return $.unit=="px"?$.value:$.value*(w%2?I.width:I.height)/100}),B={top:I.top-z[0],right:I.right+z[1],bottom:I.bottom+z[2],left:I.left-z[3]};return B.width=B.right-B.left,B.height=B.bottom-B.top,B},c.prototype._hasCrossedThreshold=function(I,z){var B=I&&I.isIntersecting?I.intersectionRatio||0:-1,$=z.isIntersecting?z.intersectionRatio||0:-1;if(B!==$)for(var w=0;w<this.thresholds.length;w++){var E=this.thresholds[w];if(E==B||E==$||E<B!=E<$)return!0}},c.prototype._rootIsInDom=function(){return!this.root||T(e,this.root)},c.prototype._rootContainsTarget=function(I){var z=this.root&&(this.root.ownerDocument||this.root)||e;return T(z,I)&&(!this.root||z==I.ownerDocument)},c.prototype._registerInstance=function(){n.indexOf(this)<0&&n.push(this)},c.prototype._unregisterInstance=function(){var I=n.indexOf(this);I!=-1&&n.splice(I,1)};function h(){return window.performance&&performance.now&&performance.now()}function m(I,z){var B=null;return function(){B||(B=setTimeout(function(){I(),B=null},z))}}function g(I,z,B,$){typeof I.addEventListener=="function"?I.addEventListener(z,B,$):typeof I.attachEvent=="function"&&I.attachEvent("on"+z,B)}function y(I,z,B,$){typeof I.removeEventListener=="function"?I.removeEventListener(z,B,$):typeof I.detachEvent=="function"&&I.detachEvent("on"+z,B)}function b(I,z){var B=Math.max(I.top,z.top),$=Math.min(I.bottom,z.bottom),w=Math.max(I.left,z.left),E=Math.min(I.right,z.right),A=E-w,D=$-B;return A>=0&&D>=0&&{top:B,bottom:$,left:w,right:E,width:A,height:D}||null}function _(I){var z;try{z=I.getBoundingClientRect()}catch{}return z?(z.width&&z.height||(z={top:z.top,right:z.right,bottom:z.bottom,left:z.left,width:z.right-z.left,height:z.bottom-z.top}),z):k()}function k(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function R(I){return!I||"x"in I?I:{top:I.top,y:I.top,bottom:I.bottom,left:I.left,x:I.left,right:I.right,width:I.width,height:I.height}}function j(I,z){var B=z.top-I.top,$=z.left-I.left;return{top:B,left:$,height:z.height,width:z.width,bottom:B+z.height,right:$+z.width}}function T(I,z){for(var B=z;B;){if(B==I)return!0;B=H(B)}return!1}function H(I){var z=I.parentNode;return I.nodeType==9&&I!=e?t(I):(z&&z.assignedSlot&&(z=z.assignedSlot.parentNode),z&&z.nodeType==11&&z.host?z.host:z)}function q(I){return I&&I.nodeType===9}window.IntersectionObserver=c,window.IntersectionObserverEntry=l})()),hS}CV();var TV=Object.defineProperty,mS=Object.getOwnPropertySymbols,kV=Object.prototype.hasOwnProperty,NV=Object.prototype.propertyIsEnumerable,pS=(t,e,n)=>e in t?TV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Nu=(t,e)=>{for(var n in e||(e={}))kV.call(e,n)&&pS(t,n,e[n]);if(mS)for(var n of mS(e))NV.call(e,n)&&pS(t,n,e[n]);return t},AV=(t,e,n)=>{const r=qv(t,[n]),a=qv(e,[n]);return r[n]&&a[n]?Nu(Nu(Nu({},t),e),{[n]:r[n]+", "+a[n]}):Nu(Nu({},t),e)},RV=AV,O1=(typeof window<"u"?window:global)||{},gS,jV=((gS=O1)==null?void 0:gS.GIPHY_PINGBACK_URL)||"https://pingback.giphy.com",IV=`${jV}/v2/pingback?apikey=l0HlIwPWyBBUDAUgM`,DV=t=>{const e=N1();return e?.set("Content-Type","application/json"),Hn.debug("Pingback session",t),t.length?fetch(IV,{method:"POST",body:JSON.stringify({events:t}),headers:e}).catch(n=>{Hn.warn(`pingbacks failing to post ${n}`)}):new Promise(n=>n())},ny=[];O1.giphyRandomId=k1();var gf="";function L1(){const t=[...ny];ny=[],DV(t)}var MV=P1(1e3,L1),vS,yS;(yS=(vS=O1).addEventListener)==null||yS.call(vS,"beforeunload",L1);var PV=({userId:t,eventType:e,actionType:n,attributes:r,queueEvents:a=!0,analyticsResponsePayload:l})=>{gf=t?String(t):gf;const c={ts:Date.now(),attributes:r,action_type:n,user_id:k1(),analytics_response_payload:l};gf&&(c.logged_in_user_id=gf),c.analytics_response_payload&&(c.analytics_response_payload=`${c.analytics_response_payload}${Hn.ENABLED?"&mode=verification":""}`),e&&(c.event_type=e),ny.push(c),a?MV():L1()},V1=PV,ry=function(t,e){return ry=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},ry(t,e)};function V6(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ry(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var km=function(){return km=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},km.apply(this,arguments)};function U6(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function z6(t,e,n,r){var a=arguments.length,l=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(t,e,n,r);else for(var h=t.length-1;h>=0;h--)(c=t[h])&&(l=(a<3?c(l):a>3?c(e,n,l):c(e,n))||l);return a>3&&l&&Object.defineProperty(e,n,l),l}function B6(t,e){return function(n,r){e(n,r,t)}}function F6(t,e,n,r,a,l){function c(H){if(H!==void 0&&typeof H!="function")throw new TypeError("Function expected");return H}for(var h=r.kind,m=h==="getter"?"get":h==="setter"?"set":"value",g=!e&&t?r.static?t:t.prototype:null,y=e||(g?Object.getOwnPropertyDescriptor(g,r.name):{}),b,_=!1,k=n.length-1;k>=0;k--){var R={};for(var j in r)R[j]=j==="access"?{}:r[j];for(var j in r.access)R.access[j]=r.access[j];R.addInitializer=function(H){if(_)throw new TypeError("Cannot add initializers after decoration has completed");l.push(c(H||null))};var T=(0,n[k])(h==="accessor"?{get:y.get,set:y.set}:y[m],R);if(h==="accessor"){if(T===void 0)continue;if(T===null||typeof T!="object")throw new TypeError("Object expected");(b=c(T.get))&&(y.get=b),(b=c(T.set))&&(y.set=b),(b=c(T.init))&&a.unshift(b)}else(b=c(T))&&(h==="field"?a.unshift(b):y[m]=b)}g&&Object.defineProperty(g,r.name,y),_=!0}function H6(t,e,n){for(var r=arguments.length>2,a=0;a<e.length;a++)n=r?e[a].call(t,n):e[a].call(t);return r?n:void 0}function $6(t){return typeof t=="symbol"?t:"".concat(t)}function q6(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function G6(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Y6(t,e,n,r){function a(l){return l instanceof n?l:new n(function(c){c(l)})}return new(n||(n=Promise))(function(l,c){function h(y){try{g(r.next(y))}catch(b){c(b)}}function m(y){try{g(r.throw(y))}catch(b){c(b)}}function g(y){y.done?l(y.value):a(y.value).then(h,m)}g((r=r.apply(t,e||[])).next())})}function K6(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,a,l,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=h(0),c.throw=h(1),c.return=h(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(g){return function(y){return m([g,y])}}function m(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(n=0)),n;)try{if(r=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,a=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){n.label=g[1];break}if(g[0]===6&&n.label<l[1]){n.label=l[1],l=g;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(g);break}l[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(y){g=[6,y],a=0}finally{r=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}var gp=Object.create?(function(t,e,n,r){r===void 0&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]});function Q6(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&gp(e,t,n)}function Nm(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function U1(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),a,l=[],c;try{for(;(e===void 0||e-- >0)&&!(a=r.next()).done;)l.push(a.value)}catch(h){c={error:h}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(c)throw c.error}}return l}function X6(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(U1(arguments[e]));return t}function W6(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var l=arguments[e],c=0,h=l.length;c<h;c++,a++)r[a]=l[c];return r}function J6(t,e,n){if(n||arguments.length===2)for(var r=0,a=e.length,l;r<a;r++)(l||!(r in e))&&(l||(l=Array.prototype.slice.call(e,0,r)),l[r]=e[r]);return t.concat(l||Array.prototype.slice.call(e))}function fc(t){return this instanceof fc?(this.v=t,this):new fc(t)}function Z6(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(k){return function(R){return Promise.resolve(R).then(k,b)}}function h(k,R){r[k]&&(a[k]=function(j){return new Promise(function(T,H){l.push([k,j,T,H])>1||m(k,j)})},R&&(a[k]=R(a[k])))}function m(k,R){try{g(r[k](R))}catch(j){_(l[0][3],j)}}function g(k){k.value instanceof fc?Promise.resolve(k.value.v).then(y,b):_(l[0][2],k)}function y(k){m("next",k)}function b(k){m("throw",k)}function _(k,R){k(R),l.shift(),l.length&&m(l[0][0],l[0][1])}}function ek(t){var e,n;return e={},r("next"),r("throw",function(a){throw a}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(a,l){e[a]=t[a]?function(c){return(n=!n)?{value:fc(t[a](c)),done:!1}:l?l(c):c}:l}}function tk(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Nm=="function"?Nm(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(l){n[l]=t[l]&&function(c){return new Promise(function(h,m){c=t[l](c),a(h,m,c.done,c.value)})}}function a(l,c,h,m){Promise.resolve(m).then(function(g){l({value:g,done:h})},c)}}function nk(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var OV=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},sy=function(t){return sy=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},sy(t)};function rk(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=sy(t),r=0;r<n.length;r++)n[r]!=="default"&&gp(e,t,n[r]);return OV(e,t),e}function sk(t){return t&&t.__esModule?t:{default:t}}function ik(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function ak(t,e,n,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(t,n):a?a.value=n:e.set(t,n),n}function ok(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function lk(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(l){return Promise.reject(l)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var LV=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function ck(t){function e(l){t.error=t.hasError?new LV(l,t.error,"An error was suppressed during disposal."):l,t.hasError=!0}var n,r=0;function a(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(a);if(n.dispose){var l=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(l).then(a,function(c){return e(c),a()})}else r|=1}catch(c){e(c)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return a()}function uk(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,a,l,c){return r?e?".jsx":".js":a&&(!l||!c)?n:a+l+"."+c.toLowerCase()+"js"}):t}const VV={__extends:V6,__assign:km,__rest:U6,__decorate:z6,__param:B6,__esDecorate:F6,__runInitializers:H6,__propKey:$6,__setFunctionName:q6,__metadata:G6,__awaiter:Y6,__generator:K6,__createBinding:gp,__exportStar:Q6,__values:Nm,__read:U1,__spread:X6,__spreadArrays:W6,__spreadArray:J6,__await:fc,__asyncGenerator:Z6,__asyncDelegator:ek,__asyncValues:tk,__makeTemplateObject:nk,__importStar:rk,__importDefault:sk,__classPrivateFieldGet:ik,__classPrivateFieldSet:ak,__classPrivateFieldIn:ok,__addDisposableResource:lk,__disposeResources:ck,__rewriteRelativeImportExtension:uk},UV=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:lk,get __assign(){return km},__asyncDelegator:ek,__asyncGenerator:Z6,__asyncValues:tk,__await:fc,__awaiter:Y6,__classPrivateFieldGet:ik,__classPrivateFieldIn:ok,__classPrivateFieldSet:ak,__createBinding:gp,__decorate:z6,__disposeResources:ck,__esDecorate:F6,__exportStar:Q6,__extends:V6,__generator:K6,__importDefault:sk,__importStar:rk,__makeTemplateObject:nk,__metadata:G6,__param:B6,__propKey:$6,__read:U1,__rest:U6,__rewriteRelativeImportExtension:uk,__runInitializers:H6,__setFunctionName:q6,__spread:X6,__spreadArray:J6,__spreadArrays:W6,__values:Nm,default:VV},Symbol.toStringTag,{value:"Module"})),zV=cN(UV);var vf={},bS;function BV(){if(bS)return vf;bS=1,Object.defineProperty(vf,"__esModule",{value:!0});var t=Da();function e(n,r){r===void 0&&(r=0);var a=t.useRef(!1),l=t.useRef(),c=t.useRef(n),h=t.useCallback(function(){return a.current},[]),m=t.useCallback(function(){a.current=!1,l.current&&clearTimeout(l.current),l.current=setTimeout(function(){a.current=!0,c.current()},r)},[r]),g=t.useCallback(function(){a.current=null,l.current&&clearTimeout(l.current)},[]);return t.useEffect(function(){c.current=n},[n]),t.useEffect(function(){return m(),g},[r]),[h,g,m]}return vf.default=e,vf}var FV=BV();const HV=dd(FV);var yf={},bf={},kr={},xS;function $V(){if(xS)return kr;xS=1,Object.defineProperty(kr,"__esModule",{value:!0}),kr.isNavigator=kr.isBrowser=kr.off=kr.on=kr.noop=void 0;var t=function(){};kr.noop=t;function e(r){for(var a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];r&&r.addEventListener&&r.addEventListener.apply(r,a)}kr.on=e;function n(r){for(var a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];r&&r.removeEventListener&&r.removeEventListener.apply(r,a)}return kr.off=n,kr.isBrowser=typeof window<"u",kr.isNavigator=typeof navigator<"u",kr}var _S;function qV(){if(_S)return bf;_S=1,Object.defineProperty(bf,"__esModule",{value:!0});var t=Da(),e=$V(),n=e.isBrowser?t.useLayoutEffect:t.useEffect;return bf.default=n,bf}var wS;function GV(){if(wS)return yf;wS=1,Object.defineProperty(yf,"__esModule",{value:!0});var t=zV,e=Da(),n=t.__importDefault(qV()),r=function(a,l){a===void 0&&(a=1e12),l===void 0&&(l=0);var c=e.useState(0),h=c[0],m=c[1];return n.default(function(){var g,y,b,_=function(){var T=Math.min(1,(Date.now()-b)/a);m(T),k()},k=function(){g=requestAnimationFrame(_)},R=function(){y=setTimeout(function(){cancelAnimationFrame(g),m(1)},a),b=Date.now(),k()},j=setTimeout(R,l);return function(){clearTimeout(y),clearTimeout(j),cancelAnimationFrame(g)}},[a,l]),h};return yf.default=r,yf}var YV=GV();const KV=dd(YV);var QV=Object.defineProperty,XV=Object.defineProperties,WV=Object.getOwnPropertyDescriptors,SS=Object.getOwnPropertySymbols,JV=Object.prototype.hasOwnProperty,ZV=Object.prototype.propertyIsEnumerable,ES=(t,e,n)=>e in t?QV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ri=(t,e)=>{for(var n in e||(e={}))JV.call(e,n)&&ES(t,n,e[n]);if(SS)for(var n of SS(e))ZV.call(e,n)&&ES(t,n,e[n]);return t},z1=(t,e)=>XV(t,WV(e)),B1=(t,e,n)=>new Promise((r,a)=>{var l=m=>{try{h(n.next(m))}catch(g){a(g)}},c=m=>{try{h(n.throw(m))}catch(g){a(g)}},h=m=>m.done?r(m.value):Promise.resolve(m.value).then(l,c);h((n=n.apply(t,e)).next())}),eU=t=>{var e,n;if(!t)return"";const r=(n=(e=t?.split("."))==null?void 0:e.pop())==null?void 0:n.toLowerCase();return t.replace(`.${r}`,`/80h.${r}`)},tU=We.img`
    object-fit: cover;
    width: 32px;
    height: 32px;
    margin-right: 8px;
`,nU=({user:t,className:e=""})=>{const n=N.useRef(Math.floor(Math.random()*5)+1),r=t.avatar_url?eU(t.avatar_url):`https://media.giphy.com/avatars/default${n.current}.gif`;return me.createElement(tU,{src:r,className:e})},vp=nU,cd=({className:t="",size:e=17,fill:n="#15CDFF"})=>me.createElement("svg",{className:[cd.className,t].join(" "),height:e,width:"19px",viewBox:"0 0 19 17"},me.createElement("path",{className:cd.checkMarkClassName,d:"M9.32727273,9.44126709 L9.32727273,3.03016561 L6.55027155,3.03016561 L6.55027155,10.8150746 L6.55027155,12.188882 L12.1042739,12.188882 L12.1042739,9.44126709 L9.32727273,9.44126709 Z",fill:ty,transform:"translate(9.327273, 7.609524) scale(-1, 1) rotate(-45.000000) translate(-9.327273, -7.609524) "}),me.createElement("g",{transform:"translate(-532.000000, -466.000000)",fill:n},me.createElement("g",{transform:"translate(141.000000, 235.000000)"},me.createElement("g",{transform:"translate(264.000000, 0.000000)"},me.createElement("g",{transform:"translate(10.000000, 224.000000)"},me.createElement("g",{transform:"translate(114.000000, 2.500000)"},me.createElement("path",{d:"M15.112432,4.80769231 L16.8814194,6.87556817 L19.4157673,7.90116318 L19.6184416,10.6028916 L21.0594951,12.9065042 L19.6184416,15.2101168 L19.4157673,17.9118452 L16.8814194,18.9374402 L15.112432,21.0053161 L12.4528245,20.3611511 L9.79321699,21.0053161 L8.02422954,18.9374402 L5.48988167,17.9118452 L5.28720734,15.2101168 L3.84615385,12.9065042 L5.28720734,10.6028916 L5.48988167,7.90116318 L8.02422954,6.87556817 L9.79321699,4.80769231 L12.4528245,5.4518573 L15.112432,4.80769231 Z M17.8163503,10.8991009 L15.9282384,9.01098901 L11.5681538,13.3696923 L9.68115218,11.4818515 L7.81302031,13.3499833 L9.7011322,15.2380952 L11.5892441,17.1262071 L17.8163503,10.8991009 Z"})))))));cd.className="giphy-verified-badge";cd.checkMarkClassName="giphy-verified-checkmark";var iy=cd,rU=We.div`
    color: white;
    font-size: 16px;
    font-weight: 700;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    -webkit-font-smoothing: antialiased;
`,sU=We(iy)`
    margin-left: 4px;
    flex-shrink: 0;
`,iU=We.div`
    display: flex;
    align-items: center;
    min-width: 0;
`,aU=({user:t})=>{const{display_name:e,username:n}=t;return me.createElement(iU,null,me.createElement(rU,null,e||`@${n}`),t.is_verified?me.createElement(sU,{size:14}):null)},dk=aU,oU=We.div`
    display: flex;
    align-items: center;
    font-family: interface, helvetica, arial;
`,lU=We(vp)`
    flex-shrink: 0;
`,F1=({gif:t,className:e,onClick:n})=>{const{user:r}=t;return!r?.username&&!r?.display_name?null:me.createElement(oU,{className:[F1.className,e].join(" "),onClick:a=>{if(a.preventDefault(),a.stopPropagation(),n)n(t);else{const l=r.profile_url;l&&window.open(l,"_blank")}}},me.createElement(lU,{user:r}),me.createElement(dk,{user:t.user}))};F1.className="giphy-attribution";var cU=F1,uU=We.div`
    background: linear-gradient(rgba(0, 0, 0, 0), rgba(18, 18, 18, 0.6));
    cursor: default;
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 75px;
    pointer-events: none;
`,dU=We(cU)`
    position: absolute;
    bottom: 10px;
    left: 10px;
    right: 10px;
`,hU=We.div`
    transition: opacity 150ms ease-in;
`,fU=({gif:t,isHovered:e,onClick:n})=>{const r=N.useRef(e);return e&&(r.current=!0),t.user&&r.current?me.createElement(hU,{style:{opacity:e?1:0}},me.createElement(uU,null),me.createElement(dU,{gif:t,onClick:n})):null},mU=fU,pU=({children:t,className:e,onVisibleChange:n,config:r})=>{const a=N.useRef(null);return N.useEffect(()=>{let l;return a.current&&(l=new IntersectionObserver(([c])=>{n&&n(c.isIntersecting)},r),l.observe(a.current)),()=>l?.disconnect()},[n,a,r]),me.createElement("div",{ref:a,className:e},t)},hk=pU,fk=t=>(e,n,r,a={})=>{e.analytics_response_payload&&V1({analyticsResponsePayload:e.analytics_response_payload,userId:n,actionType:t,attributes:Ri({position:JSON.stringify(YO(r))},a)})},gU=(t,e,n,r={})=>{t.analytics_response_payload&&V1({analyticsResponsePayload:t.analytics_response_payload,userId:e,actionType:"SEEN",attributes:Ri({position:JSON.stringify(n)},r)})},vU=fk("CLICK"),yU=fk("HOVER");function bU(t){return t=t.replace("%%CACHEBUSTER%%",e6()),t=t.replace("%%TIMESTAMP%%",`${Date.now()}`),t=t.replace("%%APPBUNDLE%%","web"),typeof window<"u"&&(t=t.replace("%%APP_WINDOW_SIZE%%",`${window.innerWidth},${window.innerHeight}`),t=t.replace("%%DEVICE_LANGUAGE%%",`${navigator.language}`)),t}function xU({src:t}){const e=N.useRef(bU(t)),[n,r]=N.useState(!1);return N.useEffect(()=>{r(!0)},[]),n?me.createElement("img",{src:e.current,width:0,height:0}):null}var _U=xU,ay=N.createContext({}),wU=({attributes:t,children:e})=>{const{attributes:n={}}=N.useContext(ay);return me.createElement(ay.Provider,{value:{attributes:RV(n,t,"layout_type")}},e)},mk=wU,SU=We.div`
    position: relative;
    display: block;
    picture {
        display: block;
        width: 100%;
        height: 100%;
    }
    img {
        display: block;
    }
    .${iy.className} {
        g {
            fill: white;
        }
    }
    .${iy.checkMarkClassName} {
        opacity: 0;
    }
`,CS=[M1,M6,P6,O6,L6],EU=()=>CS[Math.round(Math.random()*(CS.length-1))],CU=200,TS="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",TU=!!(typeof window<"u"&&window.document&&window.document.createElement),Ml=()=>{},kU=({children:t})=>{const[e,n]=N.useState(!1);return N.useEffect(()=>{n(!0)},[]),e?me.createElement(me.Fragment,null,t):null},xa=({gif:t,gif:{bottle_data:e={}},width:n,percentWidth:r,percentHeight:a,height:l,onGifRightClick:c=Ml,className:h="",onGifClick:m=Ml,onGifKeyPress:g=Ml,onGifSeen:y=Ml,onGifVisible:b=Ml,user:_={},backgroundColor:k,overlay:R,hideAttribution:j=!1,noLink:T=!1,borderRadius:H=4,style:q,tabIndex:I,lazyLoad:z=!0})=>{var B;const[$,w]=N.useState(!1),[E,A]=N.useState(!1),[D,O]=N.useState(!TU||!z),[L,P]=N.useState(""),pe=N.useRef(EU()),ce=N.useRef(null),Y=N.useRef(null),Z=N.useRef(),J=N.useRef(),Te=N.useRef(),Ae=N.useRef(Ml),F=Object.keys(e).length>0,{attributes:W}=N.useContext(ay);let ae=R;!ae&&!j&&(ae=mU);const ge=ue=>{clearTimeout(Te.current),ue.persist(),A(!0),Te.current=window.setTimeout(()=>{yU(t,_?.id,ue.target,W)},CU)},Re=()=>{clearTimeout(Te.current),A(!1)},_e=ue=>{vU(t,_?.id,ue.target,W),m(t,ue)},Ne=ue=>{g(t,ue)};Ae.current=ue=>{w(!0),Hn.debug(`GIF ${t.id} seen. ${t.title}`),gU(t,_?.id,ue.boundingClientRect,W),y?.(t,ue.boundingClientRect),J.current&&J.current.disconnect()};const Ke=()=>{J.current||(J.current=new IntersectionObserver(([ue])=>{ue.isIntersecting&&Ae.current(ue)},{threshold:[.99]})),!$&&ce.current&&J.current&&J.current.observe(ce.current)},Ge=ue=>{Ke(),b(t,ue),P(xa.imgLoadedClassName)};N.useEffect(()=>{var ue,U;(ue=Y.current)!=null&&ue.complete&&(Ke(),b(t)),(U=J.current)==null||U.disconnect(),w(!1)},[t.id]),N.useEffect(()=>(Z.current=new IntersectionObserver(([ue])=>{const{isIntersecting:U}=ue;O(U),!U&&J.current&&J.current.disconnect()}),Z.current.observe(ce.current),()=>{Z.current&&Z.current.disconnect(),J.current&&J.current.disconnect(),Te.current&&clearTimeout(Te.current)}),[]);const he=lp(t,n);let Ce=l;!q?.aspectRatio&&!l&&(Ce=he);const Ve=QO(t.images,n,l||he);if(!Ve)return t.images?console.error(`no rendition for ${t.id}, rendition names: ${Object.keys(t.images).join(", ")}`):console.error(`no rendition for ${t.id} - no images`),null;const oe=t.images[Ve.renditionName],ze=L===xa.imgLoadedClassName&&!t.is_sticker?"unset":k||(t.is_sticker?"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4AQMAAACSSKldAAAABlBMVEUhIiIWFhYoSqvJAAAAGElEQVQY02MAAv7///8PWxqIPwDZw5UGABtgwz2xhFKxAAAAAElFTkSuQmCC') 0 0":pe.current),Se=H?"hidden":"unset";return me.createElement(SU,{as:T?"div":"a",href:T?void 0:t.url,"data-giphy-id":t.id,"data-giphy-is-sticker":t.is_sticker,style:Ri({width:r||n,height:a||Ce,overflow:Se,borderRadius:H},q),className:[xa.className,h].join(" "),onMouseOver:ge,onMouseLeave:Re,onClick:_e,onContextMenu:ue=>c(t,ue),onKeyPress:Ne,tabIndex:I,ref:ce},me.createElement("picture",null,me.createElement("source",{type:"image/webp",srcSet:D?oe.webp:TS,suppressHydrationWarning:!0}),me.createElement("img",{ref:Y,suppressHydrationWarning:!0,className:[xa.imgClassName,L].join(" "),src:D?oe.url:TS,style:{background:ze},width:"100%",height:"100%",alt:WO(t),onLoad:D?Ge:()=>{}})),F&&((B=e?.tags)==null?void 0:B.map((ue,U)=>me.createElement(_U,{src:ue,key:U}))),ae&&me.createElement(kU,null,D&&me.createElement(ae,{gif:t,isHovered:E,width:n,height:Ce})))};xa.className="giphy-gif";xa.imgClassName="giphy-gif-img";xa.imgLoadedClassName="giphy-img-loaded";var ud=xa,NU=We.div`
    -webkit-overflow-scrolling: touch;
    overflow-x: auto;
    overflow-y: hidden;
    white-space: nowrap;
    position: relative;
`,AU=We(ud)`
    position: relative;
    display: inline-block;
    list-style: none;
    margin-left: ${t=>t.$ml}px;
    /* make sure gifs are fully visible with a scrollbar */
    margin-bottom: 1px;

    &:first-of-type {
        margin-left: 0;
    }
    .${ud.imgClassName} {
        position: absolute;
        top: 0;
        left: 0;
    }
`,RU=We(hk)`
    display: inline-block;
`,jU=We.div`
    width: 30px;
    display: inline-block;
    opacity: ${t=>t.$isFirstLoad?0:1};
    height: ${t=>t.$height}px;
`,IU=Object.freeze({gutter:6,user:{},initialGifs:[]}),DU=Object.freeze({isFetching:!1,gifs:[],isLoaderVisible:!1,isDoneFetching:!1}),pk=class gk extends N.PureComponent{constructor(){super(...arguments),this.state=z1(Ri({},DU),{gifs:this.props.initialGifs||[]}),this.unmounted=!1,this.paginator=i6(this.props.fetchGifs,this.state.gifs),this.onLoaderVisible=e=>{this.unmounted||this.setState({isLoaderVisible:e},this.onFetch)},this.onFetch=P1(100,()=>B1(this,null,function*(){if(this.unmounted)return;const{isFetching:e,isLoaderVisible:n,gifs:r}=this.state;if(!e&&n){this.setState({isFetching:!0});let a;try{a=yield this.paginator()}catch{this.setState({isFetching:!1})}if(a)if(!!!a?.skipCountCheck&&r.length===a.length)this.setState({isDoneFetching:!0});else{this.setState({gifs:a,isFetching:!1});const{onGifsFetched:c}=this.props;c&&c(a),this.onFetch()}}}))}componentDidMount(){this.unmounted=!1,this.onFetch()}componentWillUnmount(){this.unmounted=!0}render(){const{onGifVisible:e,onGifRightClick:n,gifHeight:r,gifWidth:a,gutter:l,className:c=gk.className,onGifSeen:h,onGifClick:m,onGifKeyPress:g,user:y,overlay:b,hideAttribution:_,noLink:k,noResultsMessage:R,backgroundColor:j,borderRadius:T,tabIndex:H=0,loaderConfig:q}=this.props,{gifs:I,isDoneFetching:z}=this.state,B=!z,$=I.length===0;return me.createElement(mk,{attributes:{layout_type:"CAROUSEL"}},me.createElement(NU,{className:c},I.map(w=>me.createElement(AU,{gif:w,key:w.id,tabIndex:H,width:a||XO(w,r),height:r,onGifClick:m,onGifKeyPress:g,onGifSeen:h,onGifVisible:e,onGifRightClick:n,user:y,$ml:l,overlay:b,hideAttribution:_,noLink:k,borderRadius:T,backgroundColor:j})),!B&&I.length===0&&R,B&&me.createElement(RU,{onVisibleChange:this.onLoaderVisible,config:q},me.createElement(jU,{$isFirstLoad:$,$height:r}))))}};pk.className="giphy-carousel";pk.defaultProps=IU;var MU=We.div`
    color: ${D6};
    display: flex;
    justify-content: center;
    margin: 30px 0;
    font-family: interface, Helvetica Neue, helvetica, sans-serif;
    font-size: 16px;
    font-weight: 600;
    a {
        color: ${M1};
        cursor: pointer;
        &:hover {
            color: white;
        }
    }
`,PU=({onClick:t})=>me.createElement(MU,null,"Error loading GIFs.",me.createElement("a",{onClick:t},"Try again?")),OU=PU,LU=.75;We.div`
    align-items: center;
    background-color: ${({$backgroundColor:t})=>t};
    border-radius: 16px;
    display: flex;
    max-width: fit-content;
    overflow: hidden;
    padding: 4px 5px 5px 6px;
`;We.div`
    overflow-x: auto;
    overflow-y: hidden;
    position: relative;
    -webkit-overflow-scrolling: touch;
`;We.div`
    display: inline-flex;
    justify-content: space-between;
    overflow: hidden;
    white-space: nowrap;
    width: ${({$width:t})=>`${t}px`};
`;We.div`
    background-color: ${({$color:t})=>t};
    box-sizing: border-box;
    height: ${({$gifHeight:t})=>`${Math.round(t*LU)}px`};
    margin: ${({$gutter:t})=>`0 ${t}px`};
    width: 2px;
`;We(ud)`
    display: inline-block;
    flex-shrink: 0;
    list-style: none;
    /* make sure gifs are fully visible with a scrollbar */
    margin-bottom: 1px;
    position: relative;

    .${ud.imgClassName} {
        position: absolute;
        top: 0;
        left: 0;
    }
`;var VU=Rd`
     to {
    transform: scale(1.75) translateY(-20px);
  }
`,vk=52,UU=We.div`
    display: flex;
    align-items: center;
    height: ${vk}px;
    margin: 0 auto;
    text-align: center;
    justify-content: center;
    animation: pulse 0.8s ease-in-out 0s infinite alternate backwards;
`,Au=We.div`
    display: inline-block;
    height: 10px;
    width: 10px;
    margin: ${vk}px 10px 10px 10px;
    position: relative;
    box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.3);
    animation: ${VU} cubic-bezier(0.455, 0.03, 0.515, 0.955) 0.75s infinite alternate;
    background: ${t=>t.$color};
    animation-delay: ${t=>t.$delay};
`,zU=({className:t=""})=>me.createElement(UU,{className:t},me.createElement(Au,{$color:M6,$delay:"0"}),me.createElement(Au,{$color:M1,$delay:".1s"}),me.createElement(Au,{$color:P6,$delay:".2s"}),me.createElement(Au,{$color:O6,$delay:".3s"}),me.createElement(Au,{$color:L6,$delay:".4s"})),BU=zU,FU=We.div`
    opacity: ${t=>t.$isFirstLoad?0:1};
`;function kS(t,e,n=[]){return Array.apply(null,Array(t)).map((r,a)=>n[a]||e)}function HU(t,e,n,r){const a=kS(t,[]),l=kS(t,0,e);return n.forEach(c=>{const h=l.indexOf(Math.min(...l));a[h]=[...a[h],c],l[h]+=lp(c,r)}),a}var $U=Object.freeze({gutter:6,user:{},initialGifs:[]}),qU=Object.freeze({isFetching:!1,isError:!1,gifs:[],isLoaderVisible:!1,isDoneFetching:!1}),Ec=class $f extends N.PureComponent{constructor(){super(...arguments),this.state=z1(Ri({},qU),{gifs:this.props.initialGifs||[]}),this.unmounted=!1,this.paginator=i6(this.props.fetchGifs,this.state.gifs),this.onLoaderVisible=e=>{this.unmounted||this.setState({isLoaderVisible:e},this.onFetch)},this.onFetch=P1($f.fetchDebounce,()=>B1(this,null,function*(){if(this.unmounted)return;const{isFetching:e,isLoaderVisible:n}=this.state,{externalGifs:r}=this.props,a=(r||this.state.gifs).length;if(!e&&n){this.setState({isFetching:!0,isError:!1});let l;try{if(l=yield this.paginator(r),this.unmounted)return}catch(c){if(this.unmounted)return;this.setState({isFetching:!1,isError:!0});const{onGifsFetchError:h}=this.props;h&&h(c)}if(l)if(!!!l?.skipCountCheck&&a===l.length)this.setState({isDoneFetching:!0});else{this.setState({gifs:l,isFetching:!1});const{onGifsFetched:h}=this.props;h&&h(l),this.onFetch()}}}))}componentDidMount(){this.unmounted=!1,this.onFetch()}componentWillUnmount(){this.unmounted=!0}render(){const{onGifVisible:e,onGifRightClick:n,className:r=$f.className,onGifSeen:a,onGifClick:l,onGifKeyPress:c,user:h,overlay:m,hideAttribution:g,noLink:y,borderRadius:b,noResultsMessage:_,columns:k,width:R,gutter:j,percentWidth:T,columnOffsets:H,backgroundColor:q,loaderConfig:I,tabIndex:z=0,layoutType:B="GRID",loader:$=BU,eagerIds:w}=this.props,{gifs:E,isError:A,isDoneFetching:D}=this.state,O=!D,L=E.length===0,P=j*(k-1),pe=(R-P)/k,ce=HU(k,H,E,pe);return me.createElement(mk,{attributes:{layout_type:B}},me.createElement("div",{className:r},me.createElement("div",{style:{width:T||R,display:"flex",gap:j}},ce.map((Y=[],Z)=>me.createElement("div",{key:Z,style:{display:"flex",flexDirection:"column",gap:j,width:T?"100%":pe,marginTop:H?.[Z]}},Y.map(J=>me.createElement(ud,{style:{aspectRatio:J.images.original.width/J.images.original.height},gif:J,tabIndex:z,key:J.id,width:pe,percentWidth:T?"100%":void 0,onGifClick:l,onGifKeyPress:c,onGifSeen:a,onGifVisible:e,onGifRightClick:n,user:h,overlay:m,backgroundColor:q,hideAttribution:g,noLink:y,borderRadius:b,lazyLoad:!w?.includes(J.id)}))))),!O&&E.length===0&&_,A?me.createElement(OU,{onClick:this.onFetch}):O&&me.createElement(hk,{onVisibleChange:this.onLoaderVisible,config:I},me.createElement(FU,{$isFirstLoad:L},me.createElement($,{className:$f.loaderClassName})))))}};Ec.className="giphy-grid";Ec.loaderClassName="loader";Ec.fetchDebounce=250;Ec.defaultProps=$U;Ec.getDerivedStateFromProps=({externalGifs:t},e)=>t&&t!==e.gifs?{gifs:t}:null;var GU=Ec,yk=GU,_n={searchbarHeight:"--searchbar-height",bgColor:"--searchbar-bg-color",bgColor2:"--searchbar-bg-color-2",fgColor:"--searchbar-fg-color",cancelButtonDisplay:"--searchbar-cancel-button-display"};We.div`
    ${_n.searchbarHeight}: ${t=>t.$searchbarHeight||42}px;
    @media (${t=>t.$mobileMediaQuery}) {
        ${_n.searchbarHeight}: ${t=>t.$mobileSearchbarHeight||35}px;
    }
    ${_n.bgColor}: ${Hf};
    ${_n.bgColor2}: ${Hf};
    ${_n.fgColor}: ${ty};
    ${t=>t.$darkMode&&pp`
            ${_n.fgColor}: ${Hf};
            ${_n.bgColor}: ${ty};
            ${_n.bgColor2}: ${wV};
        `}
    ${_n.cancelButtonDisplay}: ${t=>t.$hideCancelButton?"none":"block"};
`;N.createContext({});N.createContext({});We.svg`
    position: relative;
    right: 10px;
    margin-left: 5px;
    cursor: pointer;
    display: var(${_n.cancelButtonDisplay});
`;var bk=6,H1=`calc(var(${_n.searchbarHeight}) - ${bk*2}px)`,YU=Rd`
to {
    width: ${H1};
}
`;We(vp)`
    height: ${H1};
    margin: 0;
    width: 0;
    animation: ${YU} 100ms ease-in-out forwards;
`;We.div`
    background: var(${_n.bgColor2});
    display: flex;
    align-items: center;
    padding-left: ${bk}px;
`;We.div`
    background: ${SV};
    display: flex;
    padding: 0 4px;
    color: ${_V};
    font-family: interface, Helvetica Neue, helvetica, sans-serif;
    font-weight: 600;
    font-size: 12px;
    align-items: center;
    height: ${H1};
    @media (max-width: 480px) {
        display: none;
    }
`;var KU=({className:t=""})=>me.createElement("svg",{viewBox:"0 0 30 30",version:"1.1",className:t},me.createElement("defs",null,me.createElement("path",{d:"M11.5482521,20.4090671 L4.24727698,28.2009189 C3.68084207,28.8054377 2.73159653,28.8363108 2.12707771,28.2698759 C1.5225589,27.703441 1.4916858,26.7541954 2.0581207,26.1496766 L9.40599838,18.3077689 C7.95982241,16.4371424 7.0978836,14.0789715 7.0978836,11.5181818 C7.0978836,5.44914339 11.9392549,0.518181818 17.9252787,0.518181818 C23.9113026,0.518181818 28.7526738,5.44914339 28.7526738,11.5181818 C28.7526738,17.5872202 23.9113026,22.5181818 17.9252787,22.5181818 C15.539851,22.5181818 13.3361963,21.7351359 11.5482521,20.4090671 Z M17.9252787,19.5181818 C22.242011,19.5181818 25.7526738,15.9425536 25.7526738,11.5181818 C25.7526738,7.09381 22.242011,3.51818182 17.9252787,3.51818182 C13.6085464,3.51818182 10.0978836,7.09381 10.0978836,11.5181818 C10.0978836,15.9425536 13.6085464,19.5181818 17.9252787,19.5181818 Z",id:"giphy-search-icon-path-1"})),me.createElement("g",{id:"search",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},me.createElement("g",{id:"icons/search"},me.createElement("mask",{id:"giphy-search-icon-mask-2",fill:"white"},me.createElement("use",{xlinkHref:"#giphy-search-icon-path-1"})),me.createElement("use",{id:"Mask",fill:"#FFFFFF",fillRule:"nonzero",xlinkHref:"#giphy-search-icon-path-1"}),me.createElement("g",{mask:"url(#giphy-search-icon-mask-2)"},me.createElement("g",{transform:"translate(0.250000, 0.250000)"},me.createElement("g",null)))))),QU=KU,XU="2s",J0="#E646B6",NS="#FF6666",xk="cubic-bezier(0.920, 0.240, 0.185, 0.730)",WU=Rd`
    0% {
      transform: rotate(34deg) translate(-10px, 80px);
    };
    
    100% {
      transform: rotate(34deg) translate(-10px, -20px);
    }
`,JU=Rd`
    0% { 
      transform: translate(0px, 0px);
      opacity: 0;
    }
    50% {
      opacity: 1;
    }
    100% {
      transform: translate(10px, -17px);
      opacity: 0;
    }
`,ZU=Rd`
    0% {
      opacity: 0;
      transform: translateX(-400%);
    }
    50% {
      opacity: 1;
    }
    100% {
      opacity: 0;
      transform: translateX(0);
    }
`;We.div`
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    cursor: pointer;
    @media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {
        display: none;
    }
    height: var(${_n.searchbarHeight});
    width: var(${_n.searchbarHeight});
`;We.div`
    position: absolute;
    height: 100%;
    width: 100%;
    background: linear-gradient(45deg, ${J0} 0%, ${NS} 100%);
    border-radius: 0 4px 4px 0;
    overflow: hidden;
    &:before {
        animation: ${ZU} ${XU} linear 0s infinite;
        background-image: linear-gradient(45deg, ${J0} 0%, ${NS} 50%, ${J0} 100%);
        background-size: 400%;
        background-position: 0% 100%;
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        width: 400%;
    }
`;We.div`
    width: 100%;
    height: 100%;
    position: absolute;
    overflow: hidden;
    &::after {
        content: '+';
        color: white;
        font-family: 'SS Standard';
        font-size: 8px;
        position: absolute;
        top: 65%;
        left: 66%;
        animation: ${JU} 1s ${xk} 0s 1 forwards;
    }
`;We.div`
    position: absolute;
    width: 200%;
    height: 20px;
    background: rgba(255, 255, 255, 0.5);
    transform: rotate(34deg) translate(-10px, -20px);
    animation: ${WU} 1s ${xk} 0s 1;
    filter: blur(1px);
`;We(QU)`
    z-index: 1;
    display: flex;
    width: 50%;
    height: 50%;
`;We.div`
    display: flex;
    background: white;
    align-items: center;
    border-radius: 4px;
    height: var(${_n.searchbarHeight});
    background: var(${_n.bgColor2});
`;We.input`
    background: inherit;
    box-sizing: border-box;
    border: 0;
    appearance: none;
    font-weight: normal;
    font-family: interface, Helvetica Neue, helvetica, sans-serif;
    outline: 0;
    font-size: 15px;
    padding: 0 10px;
    border-radius: 0;
    text-overflow: ellipsis;
    color: var(${_n.fgColor});
    &::placeholder {
        color: ${D6};
    }
    min-width: 150px;
    flex: 1;
    ${t=>t.$isUsernameSearch&&pp`
            color: ${EV};
        `}
`;var ez=({size:t=18,className:e})=>me.createElement("svg",{width:t,height:t,viewBox:"0 0 18 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:e},me.createElement("g",{id:"trending",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},me.createElement("g",null,me.createElement("rect",{id:"Rectangle",stroke:"#979797",fill:"#D8D8D8",opacity:"0",x:"0.5",y:"0.5",width:"17",height:"17"}),me.createElement("path",{d:"M12.6093329,3.12057664 L15.156896,3.12057664 L9.64199318,9.04253019 L6.88133868,6.8175119 C6.7544587,6.67603813 6.56616874,6.60087259 6.38404017,6.61897279 C6.2490402,6.63288422 6.11891631,6.69661171 6.02063992,6.79697337 C2.21226835,10.5943119 0.308082561,12.4929812 0.308082561,12.4929812 C0.308082561,12.4929812 0.527106106,12.8074292 0.710953088,13.0215425 C0.833517743,13.1642848 0.975497751,13.3098497 1.13689311,13.4582373 L6.47329888,8.13191205 L9.16381134,10.2953038 C9.40800276,10.5710787 9.68933701,10.7021044 10.019278,10.4570223 L16.0239805,4.04474473 C16.0239805,5.87956383 16.0239805,6.79697337 16.0239805,6.79697337 C16.0239805,6.79697337 16.4320205,6.79697337 17.2481004,6.79697337 L17.2481004,1.80604505 C14.1555887,1.80604505 12.6093329,1.80604505 12.6093329,1.80604505 C12.6093329,1.80604505 12.6093329,2.24422225 12.6093329,3.12057664 Z",id:"Shape",stroke:"#00CCFF",strokeWidth:"0.4",fill:"#00CCFF",fillRule:"nonzero",transform:"translate(8.778091, 7.632141) rotate(-2.000000) translate(-8.778091, -7.632141) "})))),tz=ez,_k=9;We.div`
    background: ${I6};
    display: flex;
    padding-right: 4px;
    align-items: center;
    margin-right: ${_k}px;
    cursor: pointer;
`;We.div`
    background: ${I6};
    display: flex;
    padding: 14px;
    align-items: center;
    margin-right: ${_k}px;
    white-space: nowrap;
    cursor: pointer;
    font-style: italic;
    border-radius: 20px;
`;We(vp)`
    height: var(${_n.searchbarHeight});
    width: var(${_n.searchbarHeight});
`;We(tz)`
    margin-right: 2px;
`;We.div`
    display: flex;
    color: white;
    flex-direction: row;
    font-family: 'interface';
    font-weight: 600;
    font-size: 14px;
    -webkit-overflow-scrolling: touch;
    overflow-x: auto;
    overflow-y: hidden;
    padding-bottom: 10px;
    height: var(${_n.searchbarHeight});
`;var nz=({onClick:t})=>me.createElement("svg",{width:"66px",height:"13px",viewBox:"0 0 66 13",onClick:t},me.createElement("g",{stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},me.createElement("g",{transform:"translate(-1060.000000, -462.000000)",fill:"#FFFFFF",fillRule:"nonzero"},me.createElement("g",{transform:"translate(931.000000, 286.375671)"},me.createElement("g",{transform:"translate(86.000000, 136.124329)"},me.createElement("path",{d:"M47.968,49.1962322 C49.588,49.1962322 51.052,48.6202322 51.58,47.5522322 L51.58,43.8202322 L47.476,43.8202322 L47.476,45.6802322 L49.6,45.6802322 L49.6,46.7602322 C49.12,47.1082322 48.424,47.1922322 47.98,47.1922322 C46.288,47.1922322 45.724,45.8602322 45.724,44.7802322 C45.724,43.1362322 46.612,42.3202322 47.98,42.3202322 C48.544,42.3202322 49.288,42.4762322 49.9,43.0522322 L51.28,41.6842322 C50.176,40.5682322 49.144,40.3282322 47.98,40.3282322 C44.824,40.3282322 43.384,42.5842322 43.384,44.7802322 C43.384,46.9762322 44.644,49.1962322 47.968,49.1962322 Z M54.928,48.9682322 L54.928,40.5682322 L52.564,40.5682322 L52.564,48.9682322 L54.928,48.9682322 Z M58.648,48.9682322 L58.648,46.7002322 L60.352,46.7002322 C62.596,46.6762322 63.724,45.3442322 63.724,43.6282322 C63.724,41.9842322 62.608,40.5682322 60.352,40.5682322 L56.272,40.5682322 L56.272,48.9682322 L58.648,48.9682322 Z M60.352,44.6962322 L58.648,44.6962322 L58.648,42.6082322 L60.352,42.6082322 C61,42.6082322 61.348,43.1122322 61.348,43.6642322 C61.348,44.2162322 61.012,44.6962322 60.352,44.6962322 Z M66.796,48.9802322 L66.796,45.8002322 L69.82,45.8002322 L69.82,48.9802322 L72.172,48.9802322 L72.172,40.5802322 L69.82,40.5802322 L69.82,43.7722322 L66.796,43.7722322 L66.796,40.5802322 L64.42,40.5802322 L64.42,48.9802322 L66.796,48.9802322 Z M78.16,48.9682322 L78.16,45.6202322 L81.496,40.6762322 L81.496,40.5682322 L78.82,40.5682322 L77.008,43.4482322 L75.268,40.5682322 L72.592,40.5682322 L72.592,40.6642322 L75.784,45.6202322 L75.784,48.9682322 L78.16,48.9682322 Z M87.796,49.1362322 C88.972,49.1362322 90.088,48.7402322 90.952,47.8882322 L90.028,46.9642322 C89.44,47.5522322 88.576,47.8762322 87.796,47.8762322 C85.624,47.8762322 84.712,46.3522322 84.7,44.8162322 C84.688,43.2682322 85.66,41.6962322 87.796,41.6962322 C88.576,41.6962322 89.368,41.9722322 89.968,42.5602322 L90.868,41.6962322 C90.016,40.8442322 88.924,40.4242322 87.796,40.4242322 C84.796,40.4242322 83.356,42.6202322 83.3679256,44.8282322 C83.38,47.0362322 84.748,49.1362322 87.796,49.1362322 Z M93.028,48.9682322 L93.028,40.5802322 L91.792,40.5802322 L91.792,48.9682322 L93.028,48.9682322 Z M94.252,41.3122322 C94.252,42.3322322 95.788,42.3322322 95.788,41.3122322 C95.788,40.3042322 94.252,40.3042322 94.252,41.3122322 Z M95.632,48.9682322 L95.632,43.0282322 L94.396,43.0282322 L94.396,48.9682322 L95.632,48.9682322 Z M98.188,51.7162322 L98.188,48.1042322 C98.632,48.8362322 99.556,49.1002322 100.276,49.1002322 C102.112,49.1002322 103.264,47.8042322 103.264,46.0162322 C103.264,44.2282322 102.04,42.9442322 100.276,42.9322322 C99.484,42.9322322 98.644,43.2922322 98.188,44.0122322 L98.116,43.0522322 L96.952,43.0522322 L96.952,51.7162322 L98.188,51.7162322 Z M100.156,47.9002322 C99.076,47.9002322 98.296,47.0722322 98.296,46.0162322 C98.296,44.9602322 99.016,44.1322322 100.156,44.1322322 C101.284,44.1322322 102.028,44.9002322 102.028,46.0162322 C102.028,47.1202322 101.236,47.9002322 100.156,47.9002322 Z M106.456,49.1482322 C107.992,49.1482322 108.964,48.3802322 108.976,47.2762322 C108.988,45.7522322 107.56,45.5122322 106.468,45.4162322 C105.712,45.3442322 105.196,45.1522322 105.184,44.6602322 C105.184,44.1922322 105.688,43.9402322 106.444,43.9522322 C107.032,43.9522322 107.536,44.0722322 108.004,44.5042322 L108.7,43.6882322 C108.04,43.1002322 107.332,42.8962322 106.42,42.8962322 C105.316,42.8962322 103.96,43.3882322 103.96,44.6962322 C103.972,46.0042322 105.256,46.3642322 106.372,46.4722322 C107.248,46.5562322 107.752,46.7602322 107.74,47.2882322 C107.728,47.8402322 107.068,48.0562322 106.48,48.0562322 C105.784,48.0442322 104.956,47.7922322 104.404,47.1802322 L103.756,48.0562322 C104.536,48.9322322 105.496,49.1482322 106.456,49.1482322 Z",id:"GIPHYClips"})))))),rz=nz,sz=We.div`
    display: flex;
    align-items: center;
    font-family: interface, helvetica, arial;
    cursor: pointer;
`,iz=We(vp)`
    flex-shrink: 0;
`,az=We.div`
    display: flex;
    flex-direction: column;
`,$1=({gif:t,className:e,onClick:n})=>{const{user:r}=t;return!r?.username&&!r?.display_name?null:me.createElement(sz,{className:[$1.className,e].join(" "),onClick:a=>{if(a.preventDefault(),a.stopPropagation(),n)n(t);else{const l=r.profile_url;l&&window.open(l,"_blank")}}},me.createElement(iz,{user:r}),me.createElement(az,null,me.createElement(rz,{onClick:a=>{a.preventDefault(),a.stopPropagation(),n?n(t):t.url&&window.open(t.url,"_blank")}}),me.createElement(dk,{user:r})))};$1.className="giphy-attribution";var oz=$1,wk=25,lz=({size:t=wk,onClick:e=()=>{}})=>me.createElement("svg",{width:t,height:t,viewBox:"0 0 26 23",onClick:e},me.createElement("g",{stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},me.createElement("g",{transform:"translate(1.000000, 0.000000)",fill:"#FFF",fillRule:"nonzero"},me.createElement("path",{d:"M11.9625091,0.572584405 L11.9625091,22.2272644 C11.9625091,22.4856644 11.8466091,22.6635044 11.6151891,22.7611644 C11.3480491,22.8413444 11.1390491,22.7968844 10.9878091,22.6277844 L4.8732291,15.9143244 L0.573909096,15.9143244 C0.413549096,15.9143244 0.277509096,15.8588444 0.166549096,15.7475044 C0.0573082348,15.6406091 -0.00292164572,15.4933347 -1.77635684e-15,15.3405244 L-1.77635684e-15,7.45058441 C-1.77635684e-15,7.29022441 0.0555890961,7.15456441 0.167309096,7.04322441 C0.278269096,6.93226441 0.414309096,6.87640441 0.573909096,6.87640441 L4.8732291,6.87640441 L10.9874291,0.172064405 C11.1390491,0.00296440549 11.3484291,-0.0414955945 11.6151891,0.0386844055 C11.8466091,0.136344405 11.9621291,0.314564405 11.9621291,0.572584405 L11.9625091,0.572584405 Z"}),me.createElement("path",{d:"M15.7579491,16.0914044 L14.6798891,13.6594044 C15.5739159,13.2635547 16.1503537,12.3776671 16.1501091,11.3999244 C16.150386,10.4242626 15.5763999,9.53983269 14.6852091,9.14272441 L15.7697291,6.71376441 C17.6193585,7.53872062 18.810518,9.37466359 18.8101092,11.3999244 C18.8105521,13.4298903 17.6139475,15.2691931 15.7579491,16.0914044 L15.7579491,16.0914044 Z"}),me.createElement("path",{d:"M18.3647491,20.2619044 L17.2863091,17.8299044 C19.8302925,16.7031661 21.4705725,14.1822599 21.4701091,11.3999244 C21.4701091,8.59818441 19.8167291,6.09892441 17.3022691,4.97678441 L18.3864091,2.54782441 C21.8804724,4.10607079 24.1307363,7.57414217 24.1301093,11.3999244 C24.1308375,15.2343934 21.8705556,18.7086904 18.3647491,20.2619044 Z"})))),cz=({size:t=wk,onClick:e=()=>{}})=>me.createElement("svg",{onClick:e,height:t,width:t,viewBox:"0 0 26 23",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},me.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},me.createElement("g",{id:"Group",transform:"translate(1.000000, 0.000000)",fill:"#FFFFFF",fillRule:"nonzero"},me.createElement("path",{d:"M11.9625091,0.572584405 L11.9625091,22.2272644 C11.9625091,22.4856644 11.8466091,22.6635044 11.6151891,22.7611644 C11.3480491,22.8413444 11.1390491,22.7968844 10.9878091,22.6277844 L4.8732291,15.9143244 L0.573909096,15.9143244 C0.413549096,15.9143244 0.277509096,15.8588444 0.166549096,15.7475044 C0.0573082348,15.6406091 -0.00292164572,15.4933347 0,15.3405244 L0,7.45058441 C0,7.29022441 0.0555890961,7.15456441 0.167309096,7.04322441 C0.278269096,6.93226441 0.414309096,6.87640441 0.573909096,6.87640441 L4.8732291,6.87640441 L10.9874291,0.172064405 C11.1390491,0.00296440549 11.3484291,-0.0414955945 11.6151891,0.0386844055 C11.8466091,0.136344405 11.9621291,0.314564405 11.9621291,0.572584405 L11.9625091,0.572584405 Z",id:"Path"})),me.createElement("g",{id:"Group",transform:"translate(14.887009, 6.947630)",fill:"#FFFFFF",fillRule:"nonzero"},me.createElement("path",{d:"M7.88199149,6.27905236 C7.94693088,6.35707599 7.94693088,6.47033309 7.88199149,6.54835671 L6.54835671,7.88199149 C6.47033309,7.94693088 6.35707599,7.94693088 6.27905236,7.88199149 L3.96534802,5.56828715 L1.65164367,7.88199149 C1.57362004,7.94693088 1.46036294,7.94693088 1.38233932,7.88199149 L0.0487045381,6.54835671 C-0.016234846,6.47033309 -0.016234846,6.35707599 0.0487045381,6.27905236 L2.36240889,3.96534802 L0.0487045381,1.65164367 C-0.016234846,1.57362004 -0.016234846,1.46036294 0.0487045381,1.38233932 L1.38233932,0.0487045381 C1.46036294,-0.016234846 1.57362004,-0.016234846 1.65164367,0.0487045381 L3.96534802,2.36240889 L6.27905236,0.0487045381 C6.35707599,-0.016234846 6.47033309,-0.016234846 6.54835671,0.0487045381 L7.88199149,1.38233932 C7.94693088,1.46036294 7.94693088,1.57362004 7.88199149,1.65164367 L5.56828715,3.96534802 L7.88199149,6.27905236 Z",id:"Shape"})))),uz=We.div`
    background: ${Hf};
    height: ${t=>t.$barHeight}px;
    position: absolute;
    width: 5px;
    bottom: 0;
    left: 0;
    opacity: 0.95;
`,dz=({videoEl:t})=>{KV(2147483647,100);const e=t?.currentTime||0,n=t?.duration||0,r=e/n;let a=Math.round(r*100),l=5;return t?.height<200?l=3:t?.height<300&&(l=4),a=n<10&&a>98?100:a,me.createElement(uz,{style:{width:`${a}%`},$barHeight:l,className:"hide-in-percy"})},hz=dz,fz=(t,e="")=>{switch(t){case 1:return"Aborted. The fetching process for the media resource was aborted by the user agent at the user's request.";case 2:return"Network Error. A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.";case 3:return"Decode Error. An error of some description occurred while decoding the media resource, after the resource was established to be usable.";case 4:return`Can not play a video of type "${e.split(".").pop()}" on this platform.`;default:return""}},mz=(t,e,n,r,a)=>{const l=a+t;return!r.has(l)&&n>0&&e>n*t?(r.add(l),!0):!1},pz=[.25,.5,.75],Sk="giphy-video",gz={IDLE:1},Ek=({muted:t,ccEnabled:e=!1,ccLanguage:n="en",loop:r=!0,onStateChange:a,onTimeUpdate:l,onCanPlay:c,onFirstPlay:h,onWaiting:m,onMuted:g,onError:y,onEnded:b,onLoop:_,onQuartile:k,onEndFullscreen:R,setVideoEl:j,gif:T,width:H,percentWidth:q,height:I,volume:z=.7,className:B=Sk,isInPlayer:$})=>{var w,E,A;const D=I||lp(T,H);let O;q&&(O=`${Math.round(D/H*100)}%`);const[L,P]=N.useState($w(T.video,H,D)),pe=N.useRef(0);L||console.warn(`GiphyJS No video content for id: ${T.id}`);const ce=N.useRef(Date.now()),Y=N.useRef(!1),Z=N.useRef(0),J=N.useRef(0),Te=N.useRef(new Set);N.useEffect(()=>{ce.current=Date.now(),Y.current=!1,Z.current=1,J.current=0,Te.current=new Set},[T.id]);const Ae=N.useRef(null);N.useEffect(()=>{const Ce=$w(T.video,H,D);Ae.current&&L?.url&&Ce.url!==L.url&&(L.url.indexOf(String(T.id))!==-1&&(pe.current=Ae.current.currentTime),P(Ce))},[H,I,T.video,D,L?.url,T.id]),N.useEffect(()=>{Ae.current&&L?.url&&pe.current&&(Ae.current.currentTime=pe.current,pe.current=0)},[L?.url,pe]);const F=N.useCallback(()=>{var Ce;const Ve=Ae.current,oe=(Ce=Ve?.error)==null?void 0:Ce.code;if(oe&&Ve?.src){const xe=fz(oe,Ve?.src);console.error(xe),y?.(oe)}},[y]),W=N.useCallback(()=>{a?.("playing"),Y.current||(Y.current=!0,T.analytics_response_payload&&V1({actionType:"START",analyticsResponsePayload:T.analytics_response_payload}),h?.(Date.now()-ce.current))},[h,a,T]),ae=N.useCallback(()=>a?.("paused"),[a]),ge=N.useCallback(()=>{const Ce=Ae.current;if(Ce){const Ve=Ce.currentTime;pz.some(oe=>mz(oe,Ve,Ce.duration,Te.current,Z.current)?(k?.(oe),!0):!1),l?.(Ve||0)}},[k,l]),Re=N.useCallback(()=>c?.(),[c]),_e=N.useCallback(()=>{const Ce=Ae.current;Ce?.currentTime!==0&&Ce?.networkState!==gz.IDLE&&m?.(++J.current)},[m]),Ne=N.useCallback(()=>{r&&Ae.current&&Ae.current.play(),_?.(Z.current),Z.current=Z.current+1,Y.current&&b?.()},[b,r,_]),Ke=N.useCallback(()=>R?.(),[R]),Ge=N.useCallback(Ce=>B1(void 0,null,function*(){if(Ce){const Ve=Ce.play();if(Ve!==void 0)try{yield Ve,g?.(!1)}catch{Ce.muted=!0,g?.(!0),Ce.play()}}}),[g]);N.useEffect(()=>{const Ce=Ae.current;Ce&&(Ge(Ce),j?.(Ce),isNaN(z)||(Ce.volume=z))},[]),N.useEffect(()=>{const Ce=Ae.current;return Ce&&(Ce.addEventListener("play",W),Ce.addEventListener("pause",ae),Ce.addEventListener("error",F),Ce.addEventListener("timeupdate",ge),Ce.addEventListener("canplay",Re),Ce.addEventListener("ended",Ne),Ce.addEventListener("waiting",_e),Ce.addEventListener("webkitendfullscreen",Ke)),()=>{Ce&&(Ce.removeEventListener("play",W),Ce.removeEventListener("pause",ae),Ce.removeEventListener("error",F),Ce.removeEventListener("timeupdate",ge),Ce.removeEventListener("canplay",Re),Ce.removeEventListener("ended",Ne),Ce.removeEventListener("waiting",_e),Ce.removeEventListener("webkitendfullscreen",Ke))}},[W,ae,F,ge,Re,Ne,_e,Ke]);const he=(A=(E=(w=T.video)==null?void 0:w.captions)==null?void 0:E[n])==null?void 0:A.vtt;return L?.url?me.createElement("video",{crossOrigin:"anonymous",draggable:!0,className:B,width:$?"100%":q||H,height:$?"100%":O||D,muted:t,autoPlay:!0,playsInline:!0,ref:Ae,src:L?.url,"data-giphy-id":T.id},e&&he&&me.createElement("track",{label:"English",kind:"subtitles",srcLang:n,src:he,default:!0})):null};Ek.className=Sk;var Ck=Ek,vz=We.div`
    position: relative;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: black;
    font-family: interface, helvetica, arial;
    -webkit-font-smoothing: antialiased;
`,yz=We.div`
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    cursor: pointer;
`,bz=We.div`
    position: absolute;
    top: 10px;
    right: 10px;
    left: 10px;
    bottom: 0;
    display: flex;
    justify-content: space-between;
    opacity: ${t=>t.$isHovered?1:0};
    transition: opacity ease-out 250ms;
    align-items: flex-start;
`,xz=We.div`
    font-size: 22px;
    color: white;
    margin-bottom: 5px;
    font-weight: bold;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    user-select: none;
    cursor: pointer;
`,_z=We.div`
    position: relative;
    min-width: 0;
`,wz=We.div`
    &:before {
        background: linear-gradient(rgba(18, 18, 18, 0.6), rgba(0, 0, 0, 0));
        content: '';
        height: ${t=>t.$isLargePlayer?125:75}px;
        left: 0;
        pointer-events: none;
        position: absolute;
        top: 0;
        width: 100%;
    }
    &:after {
        background: linear-gradient(rgba(0, 0, 0, 0), rgba(18, 18, 18, 0.6));
        content: '';
        height: ${t=>t.$isLargePlayer?125:75}px;
        left: 0;
        pointer-events: none;
        position: absolute;
        bottom: 0;
        width: 100%;
    }
`,Sz=300,Ez=4e3,Cz=t=>{const{style:e,width:n,percentWidth:r,hideMute:a,hideAttribution:l,hideProgressBar:c,hideTitle:h,className:m,persistentControls:g,gif:y,overlay:b}=t,[_,k]=N.useState(!1),[R,j]=N.useState(null),[T,H]=N.useState(t.muted),[q,I]=N.useState(!1),{setVideoEl:z,onMuted:B,onUserMuted:$}=t,w=t.height||lp(y,n);let E;r&&(E=`${Math.round(w/n*100)}%`);const[,A,D]=HV(()=>{k(!1)},Ez),O=N.useCallback(Y=>{B?.(Y),I(Y)},[I,B]),L=N.useCallback(Y=>{z?.(Y),j(Y)},[z,j]),P=()=>{q?(I(!1),H(!1)):H(!T)};N.useEffect(()=>{H(t.muted)},[t.muted]);const pe=g||_,ce=w>=Sz;return N.useEffect(()=>(pe?D():A(),()=>A()),[pe,A,D]),me.createElement(vz,{className:m,style:Ri({width:r||n,height:E||w},e),onMouseOver:()=>k(!0),onMouseLeave:()=>k(!1),onMouseMove:()=>{k(!0),D()},onClick:Y=>{$?.(!(T||q)),R?.play(),Y.preventDefault(),P()}},me.createElement(Ck,z1(Ri({},t),{isInPlayer:!0,onMuted:O,setVideoEl:L,muted:T})),pe&&me.createElement(wz,{$isLargePlayer:ce}),me.createElement(bz,{$isHovered:pe},me.createElement(_z,null,!h&&ce&&me.createElement(xz,{onClick:Y=>{Y.preventDefault(),Y.stopPropagation(),window.open(y.url,"_blank")}},y.title),R&&!l?me.createElement(oz,{gif:y}):null),!a&&me.createElement(yz,null,T||q?me.createElement(cz,null):me.createElement(lz,null))),pe&&!c&&R?me.createElement(hz,{videoEl:R}):null,b&&me.createElement(b,{gif:y,isHovered:_,width:n,height:w}))},Tz=t=>(t.overlay&&!t.controls&&console.warn(`${Hn.PREFIX}: Overlays only work when controls are enabled`),t.controls?me.createElement(Cz,Ri({},t)):me.createElement(Ck,Ri({},t))),kz=Tz;We.div`
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    height: 100%;
    width: 100%;
`;We(kz)`
    height: 100%;
    display: inline-block;
    object-fit: fill;
    pointer-events: none;
    background: rgb(0, 0, 0, 0);
`;We.div`
    position: absolute;
    top: 6px;
    right: 6px;
    cursor: pointer;
    opacity: ${t=>t.$isHovered?1:.8};
    transition: opacity ease-out 800ms;
`;Gv("X-GIPHY-SDK-NAME","ReactSDK");const Nz="9S3bPWJJTZZdynuLXHFSBstNA5B6tes9",AS=new s6(Nz),Az=({onSelect:t})=>{const[e,n]=N.useState(""),[r,a]=N.useState(400),l=N.useRef(null);N.useEffect(()=>{l.current&&a(l.current.offsetWidth)},[]);const c=h=>e?AS.search(e,{offset:h,limit:10}):AS.trending({offset:h,limit:10});return u.jsxs("div",{className:"w-full h-full flex flex-col bg-dark-sidebar rounded-lg overflow-hidden border border-dark-hover",children:[u.jsx("div",{className:"p-3 border-b border-dark-hover",children:u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",placeholder:"Search GIFs...",value:e,onChange:h=>n(h.target.value),className:"w-full bg-dark-input text-dark-text px-4 py-2 pl-10 rounded outline-none border border-transparent focus:border-brand-primary transition-all",autoFocus:!0}),u.jsx(f1,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-dark-muted",size:20})]})}),u.jsx("div",{ref:l,className:"flex-1 overflow-y-auto overflow-x-hidden p-2 custom-scrollbar",children:r>0&&u.jsx(yk,{width:r-20,columns:3,fetchGifs:c,onGifClick:(h,m)=>{m.preventDefault(),t(h.images.original.url)},noLink:!0,hideAttribution:!0,gutter:6},e)})]})},Rz="9S3bPWJJTZZdynuLXHFSBstNA5B6tes9",RS=new s6(Rz),jz=({onSelect:t})=>{const[e,n]=N.useState(""),[r,a]=N.useState(400),l=N.useRef(null);N.useEffect(()=>{l.current&&a(l.current.offsetWidth)},[]);const c=h=>e?RS.search(e,{offset:h,limit:10,type:"stickers"}):RS.trending({offset:h,limit:10,type:"stickers"});return u.jsxs("div",{className:"w-full h-full flex flex-col bg-dark-sidebar rounded-lg overflow-hidden border border-dark-hover",children:[u.jsx("div",{className:"p-3 border-b border-dark-hover bg-brand-primary/10",children:u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",placeholder:"Search Premium Stickers...",value:e,onChange:h=>n(h.target.value),className:"w-full bg-dark-input text-dark-text px-4 py-2 pl-10 rounded outline-none border border-transparent focus:border-brand-primary transition-all placeholder:text-dark-muted",autoFocus:!0}),u.jsx(f1,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-dark-muted",size:20})]})}),u.jsx("div",{className:"px-3 py-1 bg-brand-primary/5 text-[10px] text-brand-primary text-center font-bold tracking-wider uppercase",children:"Premium Stickers"}),u.jsx("div",{ref:l,className:"flex-1 overflow-y-auto overflow-x-hidden p-2 custom-scrollbar",children:r>0&&u.jsx(yk,{width:r-20,columns:3,fetchGifs:c,onGifClick:(h,m)=>{m.preventDefault(),t(h.images.original.url)},noLink:!0,hideAttribution:!0,gutter:6},e)})]})},Iz=({onSubmit:t,onClose:e})=>{const[n,r]=N.useState(""),[a,l]=N.useState(["",""]),[c,h]=N.useState(!1),[m,g]=N.useState(!1),y=()=>{a.length<10&&l([...a,""])},b=j=>{a.length>2&&l(a.filter((T,H)=>H!==j))},_=(j,T)=>{const H=[...a];H[j]=T,l(H)},k=()=>{const j=a.filter(T=>T.trim()!=="");n.trim()&&j.length>=2&&(t({question:n.trim(),options:j,multipleChoice:c,anonymous:m}),e())},R=n.trim()&&a.filter(j=>j.trim()).length>=2;return u.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-dark-sidebar rounded-lg w-full max-w-md mx-4 shadow-2xl animate-fadeIn",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-hover",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(p1,{className:"text-brand-primary",size:24}),u.jsx("h2",{className:"text-lg font-semibold text-dark-text",children:"Create Poll"})]}),u.jsx("button",{onClick:e,className:"p-1 hover:bg-dark-hover rounded transition-colors",children:u.jsx(On,{className:"text-dark-muted",size:20})})]}),u.jsxs("div",{className:"p-4 space-y-4 max-h-[60vh] overflow-y-auto custom-scrollbar",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-dark-muted mb-2",children:"Question"}),u.jsx("input",{type:"text",value:n,onChange:j=>r(j.target.value),placeholder:"Ask a question...",maxLength:300,className:`w-full bg-dark-input text-dark-text px-4 py-3 rounded-lg
                         border border-transparent focus:border-brand-primary
                         outline-none transition-colors`,autoFocus:!0}),u.jsxs("div",{className:"text-xs text-dark-muted mt-1 text-right",children:[n.length,"/300"]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-dark-muted mb-2",children:"Options"}),u.jsx("div",{className:"space-y-2",children:a.map((j,T)=>u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"text-dark-muted text-sm w-6",children:[T+1,"."]}),u.jsx("input",{type:"text",value:j,onChange:H=>_(T,H.target.value),placeholder:`Option ${T+1}`,maxLength:100,className:`flex-1 bg-dark-input text-dark-text px-3 py-2 rounded
                               border border-transparent focus:border-brand-primary
                               outline-none transition-colors text-sm`}),a.length>2&&u.jsx("button",{onClick:()=>b(T),className:"p-1 hover:bg-red-500/20 text-red-400 rounded transition-colors",children:u.jsx(On,{size:18})})]},T))}),a.length<10&&u.jsxs("button",{onClick:y,className:"mt-2 flex items-center gap-1 text-sm text-brand-primary hover:text-brand-primary/80 transition-colors",children:[u.jsx(wo,{size:18}),"Add Option"]})]}),u.jsxs("div",{className:"space-y-3 pt-2 border-t border-dark-hover",children:[u.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[u.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${c?"bg-brand-primary border-brand-primary":"border-dark-muted group-hover:border-dark-text"}`,children:c&&u.jsx(Do,{size:14,className:"text-white"})}),u.jsx("span",{className:"text-dark-text text-sm",children:"Allow multiple selections"}),u.jsx("input",{type:"checkbox",checked:c,onChange:j=>h(j.target.checked),className:"sr-only"})]}),u.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[u.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${m?"bg-brand-primary border-brand-primary":"border-dark-muted group-hover:border-dark-text"}`,children:m&&u.jsx(Do,{size:14,className:"text-white"})}),u.jsx("span",{className:"text-dark-text text-sm",children:"Anonymous voting"}),u.jsx("input",{type:"checkbox",checked:m,onChange:j=>g(j.target.checked),className:"sr-only"})]})]})]}),u.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t border-dark-hover",children:[u.jsx(Ze,{variant:"secondary",onClick:e,children:"Cancel"}),u.jsx(Ze,{variant:"primary",onClick:k,disabled:!R,children:"Create Poll"})]})]})})},Dz=(t,e)=>{if(e===0)return"0 KB/s";const n=t/e;return n>1024*1024?`${(n/(1024*1024)).toFixed(1)} MB/s`:`${(n/1024).toFixed(0)} KB/s`},Mz=t=>t.type.startsWith("image/")?"image":t.type.startsWith("video/")||t.type.startsWith("audio/")?"video":"auto",Pz=(t,e)=>new Promise((n,r)=>{const a="dcqipv1hn",l="lumo_upload",c=Mz(t),h=`https://api.cloudinary.com/v1_1/${a}/${c}/upload`,m=new FormData;m.append("file",t),m.append("upload_preset",l);const g=t.name.replace(/\.[^/.]+$/,"").replace(/[^a-zA-Z0-9_-]/g,"_");m.append("public_id",g);const y=new XMLHttpRequest;y.open("POST",h);const b=Date.now();y.upload.onprogress=_=>{if(_.lengthComputable){const k=_.loaded/_.total*100,R=(Date.now()-b)/1e3,j=Dz(_.loaded,R);e&&e(k,j)}},y.onload=()=>{if(y.status===200)try{const _=JSON.parse(y.responseText);n({url:_.secure_url,name:_.original_filename||t.name,type:_.resource_type,format:_.format,bytes:_.bytes})}catch{r(new Error("Invalid response from Cloudinary"))}else try{const _=JSON.parse(y.responseText);r(new Error(_.error?.message||`Upload failed with status ${y.status}`))}catch{r(new Error(`Upload failed with status ${y.status}`))}},y.onerror=()=>r(new Error("Network error during upload")),y.send(m)}),Tk=({serverId:t,channelId:e,channel:n,userId:r,userProfile:a,userRole:l,users:c,replyingTo:h,onCancelReply:m})=>{const[g,y]=N.useState(""),[b,_]=N.useState(!1),[k,R]=N.useState(!1),[j,T]=N.useState(""),[H,q]=N.useState(0),[I,z]=N.useState(!1),[B,$]=N.useState(!1),[w,E]=N.useState(!1),[A,D]=N.useState(!1),[O,L]=N.useState(!1),[P,pe]=N.useState({uploading:!1,progress:0,speed:""}),[ce,Y]=N.useState(null),[Z,J]=N.useState(null),[Te,Ae]=N.useState(""),[F,W]=N.useState(!1),ae=N.useRef(0),ge=N.useRef(null),Re=N.useRef(null),{warning:_e,error:Ne,info:Ke}=Gr(),Ge=["owner","admin","moderator"].includes(l),he=!n?.locked||Ge,Ce="This channel is locked. Only staff can send messages.",Ve=Ee=>{const Pe=Re.current?.selectionStart||g.length,nt=g.slice(0,Pe)+Ee+g.slice(Pe);y(nt),z(!1),Re.current?.focus()},oe=async Ee=>{if($(!1),!(!g.trim()&&!he))try{_(!0);const Pe={text:Ee,userId:r,timestamp:bt(),mentions:[],replyTo:null};t?await An(dt(ye,"servers",t,"channels",e,"messages"),Pe):(await An(dt(ye,"dms",e,"messages"),Pe),await it(Me(ye,"dms",e),{lastMessage:{text:"GIF",userId:r,timestamp:bt()},updatedAt:bt(),hiddenFor:[]}))}catch(Pe){console.error("Error sending GIF:",Pe),Ne("Failed to send GIF")}finally{_(!1)}},xe=async Ee=>{if(E(!1),!(l==="admin"||l==="premium")){Ne("Stickers are for Premium members only!");return}try{_(!0);const nt={type:"sticker",text:Ee,userId:r,timestamp:bt(),mentions:[],replyTo:null};t?await An(dt(ye,"servers",t,"channels",e,"messages"),nt):(await An(dt(ye,"dms",e,"messages"),nt),await it(Me(ye,"dms",e),{lastMessage:{text:" Sticker",userId:r,timestamp:bt()},updatedAt:bt(),hiddenFor:[]}))}catch(nt){console.error("Error sending Sticker:",nt),Ne("Failed to send Sticker")}finally{_(!1)}},ze=async Ee=>{if(he)try{_(!0);const Pe={type:"poll",text:Ee.question,poll:{question:Ee.question,options:Ee.options,votes:{},multipleChoice:Ee.multipleChoice,anonymous:Ee.anonymous},userId:r,timestamp:bt(),mentions:[]};t?await An(dt(ye,"servers",t,"channels",e,"messages"),Pe):(await An(dt(ye,"dms",e,"messages"),Pe),await it(Me(ye,"dms",e),{lastMessage:{text:` Poll: ${Ee.question}`,userId:r,timestamp:bt()},updatedAt:bt(),hiddenFor:[]}))}catch(Pe){console.error("Error creating poll:",Pe),Ne("Failed to create poll")}finally{_(!1)}},Se=Ee=>{if(!Ee)return;const Pe=l==="admin"||l==="premium"||a?.plan==="premium",nt=Pe?200*1024*1024:10*1024*1024;if(Ee.size>nt){Ne(`File too large! The limit is ${Pe?"200MB":"10MB"}. ${Pe?"":"Upgrade to Premium for larger uploads."}`);return}let ht=null;(Ee.type.startsWith("image/")||Ee.type.startsWith("video/"))&&(ht=URL.createObjectURL(Ee)),Y(Ee),J(ht),Ae(""),D(!1),ge.current&&(ge.current.value="")},ue=Ee=>{Se(Ee.target.files?.[0])},U=()=>document.querySelector('[role="dialog"]')!==null||document.querySelector(".modal-overlay")!==null||document.body.style.overflow==="hidden",K=Ee=>{if(Ee.preventDefault(),Ee.stopPropagation(),U())return;ae.current++,Ee.dataTransfer.types&&Array.from(Ee.dataTransfer.types).includes("Files")&&W(!0)},ee=Ee=>{Ee.preventDefault(),Ee.stopPropagation(),ae.current--,ae.current===0&&W(!1)},ke=Ee=>{Ee.preventDefault(),Ee.stopPropagation()},Oe=Ee=>{if(Ee.preventDefault(),Ee.stopPropagation(),W(!1),ae.current=0,U())return;const Pe=Ee.dataTransfer.files;Pe&&Pe.length>0&&Se(Pe[0])};N.useEffect(()=>(window.addEventListener("dragenter",K),window.addEventListener("dragleave",ee),window.addEventListener("dragover",ke),window.addEventListener("drop",Oe),()=>{window.removeEventListener("dragenter",K),window.removeEventListener("dragleave",ee),window.removeEventListener("dragover",ke),window.removeEventListener("drop",Oe)}),[]);const Fe=()=>{Z&&URL.revokeObjectURL(Z),Y(null),J(null),Ae("")},Le=async()=>{if(ce)try{pe({uploading:!0,progress:0,speed:"0 KB/s"});let Ee,Pe;if(ce.type.startsWith("image/"))Ee=await ad(ce,(Ht,mt)=>{pe({uploading:!0,progress:Ht,speed:mt})});else{const Zt=await Pz(ce,(Ht,mt)=>{pe({uploading:!0,progress:Ht,speed:mt})});Ee=Zt.url,Pe=Zt}const ht={text:Te.trim()?`${Ee}
${Te}`:Ee,userId:r,timestamp:bt(),mentions:[],replyTo:null};t?await An(dt(ye,"servers",t,"channels",e,"messages"),ht):(await An(dt(ye,"dms",e,"messages"),ht),await it(Me(ye,"dms",e),{lastMessage:{text:ce.type.startsWith("image/")?" Image":" Attachment",userId:r,timestamp:bt()},updatedAt:bt(),hiddenFor:[]})),Fe()}catch(Ee){console.error("Error uploading file:",Ee),Ne("Failed to upload file")}finally{pe({uploading:!1,progress:0,speed:""})}};N.useEffect(()=>{const Ee=g.length,Pe=g.slice(0,Ee),nt=Pe.lastIndexOf("@");if(nt!==-1){const ht=Pe.slice(nt+1);if(!ht.includes(" ")){T(ht.toLowerCase()),q(nt),R(!0);return}}R(!1)},[g]);const Et=()=>{const Ee=[];return t&&("everyone".startsWith(j.toLowerCase())&&Ee.push({id:"everyone",displayName:"everyone",type:"special"}),["admin","moderator","member"].forEach(nt=>{nt.startsWith(j.toLowerCase())&&Ee.push({id:`role-${nt}`,displayName:nt,type:"role"})})),c&&c.filter(nt=>nt.id!==r&&nt.displayName.toLowerCase().startsWith(j.toLowerCase())).forEach(nt=>{Ee.push({...nt,type:"user"})}),Ee.slice(0,8)},Tt=Ee=>{const Pe=g.slice(0,H),nt=g.slice(H+j.length+1),ht=`${Pe}@${Ee.displayName} ${nt}`;y(ht),R(!1)};N.useEffect(()=>{const Ee=Pe=>{document.activeElement!==Re.current&&(document.activeElement?.tagName==="INPUT"||document.activeElement?.tagName==="TEXTAREA"||Pe.ctrlKey||Pe.metaKey||Pe.altKey||["Escape","Tab","Enter","Backspace","Delete"].includes(Pe.key)||document.querySelector('[role="dialog"]')||Pe.key.length===1&&Re.current?.focus())};return window.addEventListener("keydown",Ee),()=>window.removeEventListener("keydown",Ee)},[]);const Qt=async Ee=>{if(Ee.preventDefault(),!!g.trim()&&!(!e||!r)){a?.isMuted&&_e("You are muted and cannot send messages"),_(!0);try{const Pe=/@(\w+)/g,nt=[];let ht;for(;(ht=Pe.exec(g))!==null;){const Ht=ht[1].toLowerCase();if(Ht==="everyone")c.forEach(mt=>{mt.id!==r&&nt.push(mt.id)});else if(["admin","moderator","member"].includes(Ht))c.forEach(mt=>{mt.role===Ht&&mt.id!==r&&nt.push(mt.id)});else{const mt=c.find(Tn=>Tn.displayName.toLowerCase()===Ht);mt&&mt.id!==r&&nt.push(mt.id)}}const Zt={text:g.trim(),userId:r,timestamp:bt(),mentions:[...new Set(nt)],replyTo:h?{messageId:h.id,userId:h.userId,text:h.text.substring(0,100)}:null};if(t){if(await An(dt(ye,"servers",t,"channels",e,"messages"),Zt),nt.length>0){const Ht=nt.map(mt=>it(Me(ye,"users",mt),{[`unreadMentions.${t}.count`]:hm(1),[`unreadMentions.${t}.lastMentionAt`]:bt(),[`unreadMentions.${t}.lastMentionText`]:g.trim().substring(0,50)}).catch(Tn=>{console.error("Error updating mention for user:",mt,Tn)}));await Promise.all(Ht)}}else await An(dt(ye,"dms",e,"messages"),Zt),await it(Me(ye,"dms",e),{lastMessage:{text:g.trim().substring(0,100),userId:r,timestamp:bt()},updatedAt:bt(),hiddenFor:[]});y(""),m&&m()}catch(Pe){console.error("Error sending message:",Pe),Ne("Failed to send message")}finally{_(!1)}}};return u.jsxs("div",{className:"px-4 pb-6 relative",children:[h&&u.jsxs("div",{className:"mb-2 bg-dark-sidebar border-l-4 border-green-400 p-3 rounded flex items-start justify-between",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"text-xs text-green-400 font-semibold mb-1",children:["Replying to ",c.find(Ee=>Ee.id===h.userId)?.displayName||"Unknown"]}),u.jsx("div",{className:"text-sm text-dark-muted truncate",children:h.text})]}),u.jsx("button",{onClick:m,className:"ml-2 text-dark-muted hover:text-dark-text transition-colors",title:"Cancel reply",children:u.jsx(On,{size:18})})]}),k&&u.jsx("div",{className:"absolute bottom-full left-4 right-4 mb-2 bg-dark-sidebar rounded-lg shadow-lg border border-dark-hover max-h-48 overflow-y-auto",children:Et().map(Ee=>u.jsx("button",{onClick:()=>Tt(Ee),className:"w-full px-4 py-2 text-left hover:bg-dark-hover transition-colors flex items-center gap-2",children:Ee.type==="special"||Ee.type==="role"?u.jsxs("span",{className:"text-dark-text font-medium",children:["@",Ee.displayName,Ee.type==="role"&&u.jsx("span",{className:"ml-2 text-xs text-dark-muted",children:"(role)"})]}):u.jsxs(u.Fragment,{children:[Ee.photoUrl?u.jsx("img",{src:Ee.photoUrl,alt:Ee.displayName,className:"w-8 h-8 rounded-full object-cover",onError:Pe=>{Pe.target.style.display="none",Pe.target.nextSibling.style.display="flex"}}):null,u.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold text-sm",style:{display:Ee.photoUrl?"none":"flex"},children:Ee.displayName[0].toUpperCase()}),u.jsxs("span",{className:"text-dark-text",children:["@",Ee.displayName]})]})},Ee.id))}),u.jsxs("form",{onSubmit:Qt,className:"relative",children:[I&&u.jsx(AO,{onSelect:Ve,onClose:()=>z(!1)}),P.uploading&&u.jsxs("div",{className:"absolute -top-12 left-0 right-0 bg-dark-sidebar border border-dark-hover rounded-lg p-2 shadow-lg animate-fade-in-up z-50",children:[u.jsxs("div",{className:"flex items-center justify-between text-xs text-dark-text mb-1",children:[u.jsx("span",{className:"font-semibold",children:"Uploading Image..."}),u.jsxs("span",{className:"text-dark-muted",children:[Math.round(P.progress),"%  ",P.speed]})]}),u.jsx("div",{className:"h-1.5 bg-dark-hover rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-brand-primary transition-all duration-200 ease-out",style:{width:`${P.progress}%`}})})]}),ce&&u.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-dark-bg border border-dark-hover rounded-lg shadow-2xl max-w-lg w-full overflow-hidden flex flex-col p-4",children:[u.jsxs("h3",{className:"text-dark-text font-semibold mb-4 flex items-center gap-2",children:[u.jsx(bm,{className:"text-brand-primary"}),"Upload Attachment"]}),u.jsx("div",{className:"flex-1 w-full bg-black/50 rounded-lg overflow-hidden flex items-center justify-center mb-4 border border-dark-hover min-h-[200px] max-h-[400px]",children:Z?u.jsx("img",{src:Z,alt:"Preview",className:"max-w-full max-h-full object-contain"}):u.jsxs("div",{className:"flex flex-col items-center gap-2 text-dark-muted",children:[u.jsx("div",{className:"text-6xl",children:""}),u.jsx("div",{className:"text-sm font-medium text-dark-text max-w-xs truncate px-4",children:ce.name}),u.jsxs("div",{className:"text-xs",children:[(ce.size/1024/1024).toFixed(2)," MB"]})]})}),u.jsx("input",{type:"text",value:Te,onChange:Ee=>Ae(Ee.target.value),placeholder:"Add a caption... (optional)",className:"w-full bg-dark-input text-dark-text px-4 py-2 rounded-lg border border-dark-hover focus:border-brand-primary outline-none mb-4",onKeyDown:Ee=>{Ee.key==="Enter"&&!P.uploading&&Le()}}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("button",{onClick:Fe,className:"px-4 py-2 text-dark-text hover:text-dark-muted transition-colors font-medium",disabled:P.uploading,children:"Cancel"}),u.jsx("button",{onClick:Le,className:"px-6 py-2 bg-brand-primary hover:bg-brand-secondary text-white rounded-md transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",disabled:P.uploading,children:P.uploading?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Uploading..."]}):u.jsxs(u.Fragment,{children:[u.jsx(uw,{size:18}),"Send"]})})]}),P.uploading&&u.jsxs("div",{className:"mt-4",children:[u.jsxs("div",{className:"flex justify-between text-xs text-dark-muted mb-1",children:[u.jsx("span",{children:P.speed}),u.jsxs("span",{children:[Math.round(P.progress),"%"]})]}),u.jsx("div",{className:"h-1 bg-dark-hover rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-brand-primary transition-all duration-200",style:{width:`${P.progress}%`}})})]})]})}),w&&u.jsxs("div",{className:"absolute bottom-full right-0 mb-4 w-[85vw] max-w-[400px] h-[450px] shadow-2xl rounded-lg z-50 animate-fade-in-up",children:[u.jsx("div",{className:"fixed inset-0 z-[-1]",onClick:()=>E(!1)}),u.jsx(jz,{onSelect:xe})]}),B&&u.jsxs("div",{className:"absolute bottom-full right-0 mb-4 w-[85vw] max-w-[400px] h-[450px] shadow-2xl rounded-lg z-50",children:[u.jsx("div",{className:"fixed inset-0 z-[-1]",onClick:()=>$(!1)}),u.jsx(Az,{onSelect:oe})]}),u.jsx("input",{ref:Re,type:"text",value:g,onChange:Ee=>y(Ee.target.value),onKeyDown:Ee=>{if(Ee.key==="Tab"&&k){Ee.preventDefault();const Pe=Et();Pe.length>0&&Tt(Pe[0])}},onPaste:async Ee=>{const Pe=Ee.clipboardData.items;for(let nt=0;nt<Pe.length;nt++)for(let ht=0;ht<Pe.length;ht++)if(Pe[ht].kind==="file"){Ee.preventDefault(),Se(Pe[ht].getAsFile());break}},placeholder:he?a?.isMuted?"You are muted":"Type a message...":Ce,disabled:b||a?.isMuted||!he||ce!==null,className:`w-full bg-dark-input text-dark-text px-12 py-3 pr-48 rounded-lg
                     border border-transparent focus:border-brand-primary
                     outline-none transition-colors duration-200
                     placeholder:text-dark-muted
                     disabled:opacity-50 disabled:cursor-not-allowed select-text`}),F&&u.jsxs("div",{className:"fixed inset-0 z-[200] bg-brand-primary/90 flex flex-col items-center justify-center animate-fade-in pointer-events-none",children:[u.jsx("div",{className:"bg-white/10 p-8 rounded-full mb-6",children:u.jsx(cw,{size:64,className:"text-white animate-bounce"})}),u.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Drop your file here"}),u.jsx("p",{className:"text-white/80",children:"to upload instantly"})]}),u.jsxs("div",{className:"absolute left-3 top-0 bottom-0 flex items-center plus-menu-container",children:[" ",u.jsx("button",{type:"button",onClick:()=>D(!A),className:`text-dark-muted hover:text-brand-primary transition-colors flex items-center justify-center ${A?"text-brand-primary":""}`,title:"Add attachment",disabled:!he,children:u.jsx(cw,{size:26})}),A&&u.jsxs("div",{className:"absolute bottom-full left-0 mb-2 w-48 bg-dark-sidebar border border-dark-hover rounded-lg shadow-xl overflow-hidden z-50 animate-fade-in-up",children:[u.jsxs("button",{type:"button",onClick:()=>{ge.current?.click(),D(!1)},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-dark-hover text-left transition-colors",children:[u.jsx(bm,{className:"text-green-400",size:20}),u.jsx("span",{className:"text-sm text-dark-text font-medium",children:"Upload File"})]}),u.jsxs("button",{type:"button",onClick:()=>{L(!0),D(!1)},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-dark-hover text-left transition-colors",disabled:!t,children:[u.jsx(p1,{className:"text-brand-primary",size:20}),u.jsx("span",{className:"text-sm text-dark-text font-medium",children:"Create Poll"})]})]})]}),u.jsx("input",{type:"file",ref:ge,onChange:ue,className:"hidden"}),u.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[u.jsx("button",{type:"button",onClick:()=>$(!B),className:`text-dark-muted hover:text-brand-primary
                        transition-colors border-2 border-current rounded px-1 text-[10px] font-bold h-6 flex items-center justify-center mr-1`,title:"Add GIF",children:"GIF"}),l==="admin"||l==="premium"||a?.badges?.includes("premium")||a?.plan==="premium"?u.jsx("button",{type:"button",onClick:()=>E(!w),className:`transition-colors ${w?"text-brand-primary":"text-dark-muted hover:text-brand-primary"}`,title:"Premium Stickers",children:u.jsx(B7,{size:24})}):null,u.jsx("button",{type:"button",onClick:()=>z(!I),className:`text-dark-muted hover:text-brand-primary
                       transition-colors`,title:"Add emoji",children:u.jsx(RT,{size:24})}),u.jsx("button",{type:"submit",disabled:!g.trim()||b||a?.isMuted||!he,className:`text-dark-muted hover:text-brand-primary
                       transition-colors disabled:opacity-50 disabled:cursor-not-allowed ml-1`,children:u.jsx(uw,{size:24})})]})]}),O&&u.jsx(Iz,{onSubmit:ze,onClose:()=>L(!1)})]})},kk=({messages:t,users:e,onResultClick:n})=>{const[r,a]=N.useState(""),[l,c]=N.useState([]),[h,m]=N.useState(!1),g=b=>{if(a(b),!b.trim()){c([]);return}const _=t.filter(k=>k.text.toLowerCase().includes(b.toLowerCase())).slice(0,20);c(_)},y=b=>e.find(_=>_.id===b)||{displayName:"Unknown"};return h?u.jsxs("div",{className:"relative flex-1 max-w-md",children:[u.jsx("input",{type:"text",value:r,onChange:b=>g(b.target.value),placeholder:"Search messages...",autoFocus:!0,className:`w-full bg-dark-input text-dark-text px-4 py-2 pr-10 rounded-lg
                   border border-transparent focus:border-brand-primary
                   outline-none transition-colors placeholder:text-dark-muted`}),u.jsx("button",{onClick:()=>{m(!1),a(""),c([])},className:"absolute right-2 top-1/2 -translate-y-1/2 text-dark-muted hover:text-dark-text",children:u.jsx(On,{size:20})}),l.length>0&&u.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-dark-sidebar border border-dark-hover rounded-lg shadow-xl max-h-96 overflow-y-auto z-50",children:l.map(b=>u.jsxs("button",{onClick:()=>{n&&n(b),m(!1),a(""),c([])},className:"w-full px-4 py-3 text-left hover:bg-dark-hover transition-colors border-b border-dark-hover last:border-b-0",children:[u.jsx("div",{className:"text-xs text-brand-primary font-semibold mb-1",children:y(b.userId).displayName}),u.jsx("div",{className:"text-sm text-dark-text line-clamp-2",children:b.text})]},b.id))})]}):u.jsx("button",{onClick:()=>m(!0),className:"p-2 hover:bg-dark-hover rounded transition-colors",title:"Search messages",children:u.jsx(f1,{size:20,className:"text-dark-muted"})})},Oz=({messages:t,users:e,onClose:n,onJumpToMessage:r})=>{const a=t.filter(c=>c.pinned),l=c=>e.find(h=>h.id===c)||{displayName:"Unknown"};return a.length===0?u.jsxs("div",{className:"w-80 bg-dark-sidebar border-l border-dark-hover h-full flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-hover",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Yl,{className:"text-blue-400",size:20}),u.jsx("h3",{className:"font-semibold text-dark-text",children:"Pinned Messages"})]}),u.jsx("button",{onClick:n,className:"text-dark-muted hover:text-dark-text transition-colors",children:u.jsx(On,{size:20})})]}),u.jsx("div",{className:"flex-1 flex items-center justify-center text-dark-muted text-sm",children:"No pinned messages"})]}):u.jsxs("div",{className:"w-80 bg-dark-sidebar border-l border-dark-hover h-full flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-hover",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Yl,{className:"text-blue-400",size:20}),u.jsx("h3",{className:"font-semibold text-dark-text",children:"Pinned Messages"}),u.jsxs("span",{className:"text-xs text-dark-muted",children:["(",a.length,")"]})]}),u.jsx("button",{onClick:n,className:"text-dark-muted hover:text-dark-text transition-colors",children:u.jsx(On,{size:20})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:a.map(c=>{const h=l(c.userId);return u.jsx("div",{onClick:()=>r(c.id),className:"bg-dark-bg p-3 rounded-lg cursor-pointer hover:bg-dark-hover transition-colors border border-transparent hover:border-brand-primary",children:u.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[h.photoUrl?u.jsx("img",{src:h.photoUrl,alt:h.displayName,className:"w-8 h-8 rounded-full object-cover",onError:m=>{m.target.style.display="none",m.target.nextSibling.style.display="flex"}}):null,u.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold text-sm",style:{display:h.photoUrl?"none":"flex"},children:h.displayName?.[0]?.toUpperCase()||"U"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"font-semibold text-dark-text text-sm",children:h.displayName}),u.jsx("span",{className:"text-xs text-dark-muted",children:sp(c.timestamp)})]}),u.jsx("div",{className:"text-dark-text text-sm mt-1 line-clamp-3",children:u.jsx(q3,{children:c.text})}),c.pinnedBy&&u.jsxs("div",{className:"text-xs text-blue-400 mt-2 flex items-center gap-1",children:[u.jsx(Yl,{size:12}),u.jsxs("span",{children:["Pinned by ",l(c.pinnedBy).displayName]})]})]})]})},c.id)})})]})},Lz=({currentStatus:t,onStatusChange:e,onClose:n})=>{const[r,a]=N.useState(!1),[l,c]=N.useState(""),[h,m]=N.useState(""),g=_=>{e(_),n()},y=()=>{h.trim()&&(e({emoji:l,text:h.trim(),type:"custom"}),n())},b=()=>{e(null),n()};return u.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-dark-sidebar rounded-lg p-6 w-96 max-w-full mx-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-dark-text",children:"Set Status"}),u.jsx("button",{onClick:n,className:"text-dark-muted hover:text-dark-text transition-colors",children:u.jsx(On,{size:24})})]}),r?u.jsx(u.Fragment,{children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-dark-muted mb-2 block",children:"Emoji"}),u.jsx("input",{type:"text",value:l,onChange:_=>c(_.target.value.slice(0,2)),className:"w-full bg-dark-input text-dark-text px-4 py-2 rounded-lg text-2xl text-center",placeholder:"",maxLength:2})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-dark-muted mb-2 block",children:"Status Text"}),u.jsx("input",{type:"text",value:h,onChange:_=>m(_.target.value),className:"w-full bg-dark-input text-dark-text px-4 py-2 rounded-lg",placeholder:"What's on your mind?",maxLength:50,autoFocus:!0}),u.jsxs("div",{className:"text-xs text-dark-muted mt-1 text-right",children:[h.length,"/50"]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>a(!1),className:"flex-1 px-4 py-2 rounded-lg bg-dark-bg hover:bg-dark-hover transition-colors text-dark-text",children:"Back"}),u.jsx("button",{onClick:y,disabled:!h.trim(),className:"flex-1 px-4 py-2 rounded-lg bg-brand-primary hover:bg-brand-primary/80 transition-colors text-white font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Set Status"})]})]})}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"space-y-2 mb-4",children:HP.map(_=>u.jsxs("button",{onClick:()=>g(_),className:"w-full px-4 py-3 rounded-lg bg-dark-bg hover:bg-dark-hover transition-colors text-left flex items-center gap-3",children:[u.jsx("span",{className:"text-2xl",children:_.emoji}),u.jsx("span",{className:"text-dark-text",children:_.text})]},_.type))}),u.jsx("button",{onClick:()=>a(!0),className:"w-full px-4 py-3 rounded-lg bg-brand-primary hover:bg-brand-primary/80 transition-colors text-white font-medium",children:" Custom Status"}),t&&u.jsx("button",{onClick:b,className:"w-full mt-2 px-4 py-2 rounded-lg bg-dark-bg hover:bg-dark-hover transition-colors text-admin text-sm",children:"Clear Status"})]})]})})},Vz=()=>{const t=[{name:"Screen Sharing",free:"",premium:"1080p 60fps"},{name:"Profile Badge",free:"",premium:""},{name:"Custom Backgrounds",free:"",premium:""},{name:"Upload Limit",free:"10MB",premium:"200MB"},{name:"GIF Avatar",free:"",premium:""},{name:"Animated Banner",free:"",premium:""},{name:"Profile Themes",free:"",premium:""},{name:"Exclusive Stickers",free:"",premium:""},{name:"Soundboard",free:"",premium:""}];return u.jsxs("div",{className:"bg-dark-sidebar/50 rounded-xl overflow-hidden border border-dark-hover",children:[u.jsxs("div",{className:"grid grid-cols-3 bg-dark-hover/50 p-4 text-sm font-bold text-dark-text uppercase tracking-wider",children:[u.jsx("div",{children:"Feature"}),u.jsx("div",{className:"text-center text-dark-muted",children:"Free"}),u.jsx("div",{className:"text-center text-brand-primary",children:"Premium"})]}),u.jsx("div",{className:"divide-y divide-dark-hover",children:t.map((e,n)=>u.jsxs("div",{className:"grid grid-cols-3 p-4 text-sm hover:bg-white/5 transition-colors",children:[u.jsx("div",{className:"font-medium text-dark-text",children:e.name}),u.jsx("div",{className:"text-center text-dark-muted",children:e.free}),u.jsx("div",{className:"text-center font-bold text-white",children:e.premium})]},n))})]})},Uz=({question:t,answer:e})=>{const[n,r]=N.useState(!1);return u.jsxs("div",{className:"",children:[u.jsxs("button",{className:"w-full flex items-center justify-between p-5 text-left font-medium text-dark-text hover:text-white transition-colors",onClick:()=>r(!n),children:[u.jsx("span",{children:t}),u.jsx(V7,{className:`transform transition-transform duration-300 ${n?"rotate-180":""}`,size:20})]}),u.jsx("div",{className:`overflow-hidden transition-all duration-300 ${n?"max-h-40 opacity-100":"max-h-0 opacity-0"}`,children:u.jsx("p",{className:"text-sm text-dark-muted leading-relaxed px-5 pb-5 pt-0",children:e})})]})},zz=()=>{const{info:t}=Gr(),e=[{icon:vm,title:"HD Screen Sharing",description:"Share your screen in 1080p 60fps quality with friends.",color:"text-blue-400",bg:"bg-blue-400/10"},{icon:q7,title:"Exclusive Profile Badge",description:"Stand out with the shiny Premium badge on your profile.",color:"text-purple-400",bg:"bg-purple-400/10"},{icon:nM,title:"Custom Profile Backgrounds",description:"Personalize your profile with custom banner images.",color:"text-yellow-400",bg:"bg-yellow-400/10"},{icon:RT,title:"Exclusive Stickers",description:"Access a library of premium stickers and custom emojis.",color:"text-orange-400",bg:"bg-orange-400/10"},{icon:ym,title:"Soundboard",description:"Play fun sound effects in voice channels.",color:"text-pink-400",bg:"bg-pink-400/10"},{icon:X7,title:"Priority Support",description:"Get faster responses for all your support tickets.",color:"text-green-400",bg:"bg-green-400/10"}],n=[{q:"Can I cancel anytime?",a:"Yes, you can cancel your subscription at any time from your account settings. Your benefits will continue until the end of the billing period."},{q:"Is payment secure?",a:"Absolutely. We use Stripe for payment processing, which is the industry standard for security. We never store your card details."},{q:"Do benefits apply to all servers?",a:"Yes! Your Premium benefits travel with you to any server you join on Lumo Chat."}];return u.jsxs("div",{className:"animate-fade-in pb-10",children:[u.jsx("style",{children:`
        @keyframes shine {
          0% { transform: translateX(-100%); }
          100% { transform: translateX(100%); }
        }
        @keyframes float {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-10px); }
        }
        .shine-effect::after {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          width: 50%;
          height: 100%;
          background: linear-gradient(to right, transparent, rgba(255,255,255,0.3), transparent);
          transform: skewX(-20deg) translateX(-150%);
          animation: shine 3s infinite;
        }
        .float-animation {
          animation: float 6s ease-in-out infinite;
        }
      `}),u.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-600 p-8 text-white shadow-2xl transform transition-all hover:scale-[1.005] mb-8",children:[u.jsx("div",{className:"absolute top-0 right-0 -mr-16 -mt-16 w-80 h-80 rounded-full bg-white/10 blur-3xl animate-pulse"}),u.jsx("div",{className:"absolute bottom-0 left-0 -ml-16 -mb-16 w-64 h-64 rounded-full bg-black/20 blur-3xl animate-pulse",style:{animationDelay:"1s"}}),u.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center gap-6",children:[u.jsx("div",{className:"float-animation p-5 bg-white/10 backdrop-blur-md rounded-full shadow-inner ring-4 ring-white/20 shrink-0",children:u.jsx(Io,{size:56,className:"text-white drop-shadow-[0_0_15px_rgba(255,255,255,0.5)]"})}),u.jsxs("div",{className:"text-center md:text-left",children:[u.jsxs("h1",{className:"text-4xl font-extrabold tracking-tight mb-2 drop-shadow-md",children:["Release the ",u.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 to-orange-300",children:"Boost!"})]}),u.jsx("p",{className:"text-indigo-100 font-medium text-lg leading-relaxed max-w-2xl",children:"Unlock the full potential of Lumo Chat. Get special perks, enhanced quality, and support the development."})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-xl font-bold text-dark-text mb-6 flex items-center gap-2",children:[u.jsx("span",{className:"w-1 h-6 bg-brand-primary rounded-full box-shadow-glow"}),"Premium Perks"]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:e.map((r,a)=>u.jsxs("div",{className:"group relative overflow-hidden p-5 rounded-xl bg-dark-sidebar border border-dark-hover hover:border-brand-primary/50 transition-all duration-300 hover:shadow-xl hover:shadow-brand-primary/10 hover:-translate-y-1",style:{animationDelay:`${a*100}ms`},children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700 ease-in-out pointer-events-none"}),u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:`p-3 rounded-lg ${r.bg} group-hover:scale-110 transition-transform duration-300`,children:u.jsx(r.icon,{size:28,className:`${r.color} drop-shadow-sm`})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-dark-text mb-1 group-hover:text-white transition-colors text-lg",children:r.title}),u.jsx("p",{className:"text-sm text-dark-muted leading-relaxed group-hover:text-gray-300",children:r.description})]})]})]},a))})]}),u.jsxs("div",{className:"bg-dark-bg rounded-2xl p-1 border-2 border-brand-primary/30 group hover:border-brand-primary/60 transition-colors relative overflow-hidden shadow-2xl",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 opacity-20 group-hover:opacity-40 transition-opacity"}),u.jsxs("div",{className:"bg-dark-sidebar/90 backdrop-blur-xl rounded-xl p-8 flex flex-col sm:flex-row items-center justify-between gap-6 relative z-10",children:[u.jsxs("div",{children:[u.jsx("div",{className:"inline-block px-3 py-1 rounded-full bg-gradient-to-r from-indigo-500 to-pink-500 text-[10px] font-bold text-white uppercase tracking-widest mb-3 shadow-lg",children:"BEST VALUE"}),u.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:"Monthly"}),u.jsxs("p",{className:"text-dark-muted text-sm flex items-center gap-2",children:[u.jsx(Do,{size:16,className:"text-green-500"})," Secure payment"]})]}),u.jsxs("div",{className:"flex flex-col items-center gap-4",children:[u.jsxs("div",{className:"text-4xl font-extrabold text-white",children:["$4.99",u.jsx("span",{className:"text-sm text-dark-muted font-normal ml-1",children:"/mo"})]}),u.jsx("button",{className:"relative overflow-hidden px-10 py-4 bg-gradient-to-r from-indigo-600 to-pink-600 hover:from-indigo-500 hover:to-pink-500 rounded-xl text-white font-bold shadow-lg transform transition-all hover:scale-105 active:scale-95 shine-effect whitespace-nowrap",onClick:()=>t("deme sistemi u anda bakmda."),children:u.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["Subscribe Now ",u.jsx(Io,{})]})})]})]})]})]}),u.jsx("div",{className:"space-y-8",children:u.jsxs("div",{children:[u.jsxs("h2",{className:"text-xl font-bold text-dark-text mb-6 flex items-center gap-2",children:[u.jsx("span",{className:"w-1 h-6 bg-purple-500 rounded-full box-shadow-glow"}),"Why Go Premium?"]}),u.jsx(Vz,{})]})})]}),u.jsxs("div",{className:"mt-12",children:[u.jsxs("h2",{className:"text-xl font-bold text-dark-text mb-6 flex items-center gap-2",children:[u.jsx("span",{className:"w-1 h-6 bg-gray-500 rounded-full"}),"Common Questions"]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map((r,a)=>u.jsx("div",{className:"bg-dark-sidebar rounded-xl border border-dark-hover overflow-hidden",children:u.jsx(Uz,{question:r.q,answer:r.a})},a))})]})]})},Bz=[{id:"premium",label:"Premium",icon:Io,category:"User Settings"},{id:"account",label:"My Account",icon:tM,category:"User Settings"},{id:"security",label:"Privacy & Security",icon:U7,category:"User Settings"},{id:"about",label:"About",icon:d1,category:"App Settings"}],Fz=({isOpen:t,onClose:e})=>{const{currentUser:n,userProfile:r}=Cn(),{success:a,error:l,info:c}=Gr(),[h,m]=N.useState("account"),[g,y]=N.useState(r?.photoUrl||""),[b,_]=N.useState(r?.bannerUrl||""),[k,R]=N.useState(r?.themeColor||"#6366f1"),[j,T]=N.useState(r?.bio||""),[H,q]=N.useState(!1),[I,z]=N.useState(!1),[B,$]=N.useState({progress:0,speed:""}),[w,E]=N.useState(!1),[A,D]=N.useState({progress:0,speed:""}),O=N.useRef(null),L=N.useRef(null),[P,pe]=N.useState(!1),[ce,Y]=N.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[Z,J]=N.useState(!1),Te=r?.role==="admin"||r?.role==="premium";N.useEffect(()=>{y(r?.photoUrl||""),_(r?.bannerUrl||""),R(r?.themeColor||"#6366f1"),T(r?.bio||"")},[r]),N.useEffect(()=>{const he=Ce=>{Ce.key==="Escape"&&t&&e()};return t&&(document.addEventListener("keydown",he),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",he),document.body.style.overflow="unset"}},[t,e]);const Ae=async he=>{if(!(!he||!n)){if(!he.type.startsWith("image/")){l("Please select an image file");return}if(he.type==="image/gif"&&!Te){l("Animated GIF avatars are for Premium members only!");return}if(he.size>10*1024*1024){l("Image size must be less than 10MB");return}z(!0);try{const Ce=await ad(he,(Ve,oe)=>{$({progress:Ve,speed:oe})});await it(Me(ye,"users",n.uid),{photoUrl:Ce}),y(Ce),a("Profile photo updated successfully!")}catch(Ce){console.error("Error uploading photo:",Ce),l("Failed to upload photo")}finally{z(!1),$({progress:0,speed:""}),O.current&&(O.current.value="")}}},F=async he=>{if(!(!he||!n)){if(!Te){c("Custom banners are a Premium feature. Upgrade to unlock!");return}if(!he.type.startsWith("image/")){l("Please select an image file");return}if(he.size>10*1024*1024){l("Image size must be less than 10MB");return}E(!0);try{const Ce=await ad(he,(Ve,oe)=>{D({progress:Ve,speed:oe})});await it(Me(ye,"users",n.uid),{bannerUrl:Ce}),_(Ce),a("Banner updated successfully!")}catch(Ce){console.error("Error uploading banner:",Ce),l("Failed to upload banner")}finally{E(!1),D({progress:0,speed:""}),L.current&&(L.current.value="")}}},W=async he=>{const Ce=he.target.value;R(Ce)},ae=async()=>{if(n){if(!Te){c("Custom themes are a Premium feature!"),R(r?.themeColor||"#6366f1");return}q(!0);try{await it(Me(ye,"users",n.uid),{themeColor:k}),a("Appearance updated!")}catch(he){console.error("Error updating appearance:",he),l("Failed to update appearance")}finally{q(!1)}}},ge=async()=>{if(n){q(!0);try{await it(Me(ye,"users",n.uid),{bio:j.trim()}),a("Bio updated successfully")}catch(he){console.error("Error updating bio:",he),l("Failed to update bio")}finally{q(!1)}}},Re=async()=>{if(!(!n||!n.email)){if(!ce.currentPassword||!ce.newPassword||!ce.confirmPassword){l("Please fill in all password fields");return}if(ce.newPassword.length<6){l("New password must be at least 6 characters");return}if(ce.newPassword!==ce.confirmPassword){l("New passwords do not match");return}J(!0);try{const he=Oo.credential(n.email,ce.currentPassword);await t8(n,he),await s8(n,ce.newPassword),a("Password changed successfully"),Y({currentPassword:"",newPassword:"",confirmPassword:""})}catch(he){console.error("Error changing password:",he),he.code==="auth/wrong-password"?l("Current password is incorrect"):he.code==="auth/weak-password"?l("New password is too weak"):l("Failed to change password")}finally{J(!1)}}},_e=async he=>{if(n)try{await it(Me(ye,"users",n.uid),{status:he}),a(he?"Status updated":"Status cleared")}catch(Ce){console.error("Error updating status:",Ce),l("Failed to update status")}},Ne=async he=>{if(n)try{await it(Me(ye,"users",n.uid),{presence:he}),a(`Status set to ${he}`)}catch{l("Failed to update status")}};if(!t)return null;const Ke=Bz.reduce((he,Ce)=>(he[Ce.category]||(he[Ce.category]=[]),he[Ce.category].push(Ce),he),{}),Ge=()=>{switch(h){case"premium":return u.jsx(zz,{});case"account":return u.jsxs("div",{className:"space-y-8",children:[u.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"My Account"}),u.jsxs("div",{className:"rounded-lg overflow-hidden border border-dark-hover relative min-h-[300px]",style:{borderColor:k},children:[u.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-colors",style:{backgroundColor:k,backgroundImage:b?`url(${b})`:`linear-gradient(to bottom right, ${k}, #000)`}}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent"}),b?.endsWith(".gif")&&u.jsx("div",{className:"absolute top-2 right-2 px-2 py-1 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm font-bold z-10",children:"GIF"}),u.jsxs("div",{className:"relative z-10 p-6 flex flex-col items-center justify-end h-full min-h-[300px] text-center mt-auto",children:[u.jsxs("div",{className:"relative group mb-4",children:[g?u.jsx("img",{src:g,alt:"Profile",className:"w-28 h-28 rounded-full object-cover border-4",style:{borderColor:k},onError:he=>{he.target.style.display="none",he.target.nextSibling.style.display="flex"}},g):null,u.jsx("div",{className:"w-28 h-28 rounded-full flex items-center justify-center text-white font-bold text-4xl border-4",style:{display:g?"none":"flex",backgroundColor:k,borderColor:k},children:r?.displayName?.[0]?.toUpperCase()||"U"}),u.jsx("div",{className:"absolute inset-0 rounded-full bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer border-4 border-transparent",onClick:()=>O.current?.click(),children:u.jsx(bm,{className:"text-white",size:32})})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center justify-center gap-2 shadow-black drop-shadow-md",children:[r?.displayName,Te&&u.jsx(Io,{className:"text-brand-primary",title:"Premium Member"})]}),u.jsx("p",{className:"text-gray-200 text-sm font-medium shadow-black drop-shadow-md",children:n?.email}),u.jsx("div",{className:"flex justify-center gap-2 mt-3",children:u.jsx("span",{className:"text-xs px-3 py-1 rounded-full bg-black/40 backdrop-blur-md border border-white/20 text-white capitalize font-medium",children:r?.role||"member"})})]})]})]}),u.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[u.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Profile Photo"}),u.jsx("input",{type:"file",ref:O,onChange:he=>Ae(he.target.files?.[0]),accept:"image/*",className:"hidden"}),u.jsx("div",{className:"flex gap-3 mb-4",children:u.jsx("button",{onClick:()=>O.current?.click(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-dark-sidebar hover:bg-dark-hover border border-dark-hover text-dark-text rounded-lg transition-colors disabled:opacity-50",disabled:I,children:I?u.jsxs("span",{className:"text-sm",children:["Uploading ",Math.round(B.progress),"%..."]}):u.jsxs(u.Fragment,{children:[u.jsx(Ov,{size:20}),"Upload New Photo"]})})})]}),u.jsxs("div",{className:`rounded-lg p-4 relative ${Te?"bg-dark-bg":"bg-dark-bg/50"}`,children:[!Te&&u.jsxs("div",{className:"absolute inset-0 z-10 bg-black/60 backdrop-blur-[1px] rounded-lg flex flex-col items-center justify-center text-center p-4",children:[u.jsx(Io,{size:32,className:"text-brand-primary mb-2 animate-bounce"}),u.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:"Unlock Profile Appearance"}),u.jsx("p",{className:"text-sm text-dark-muted mb-4 max-w-xs",children:"Customize your banner, theme colors, and use animated GIFs with Premium."}),u.jsx(Ze,{variant:"primary",onClick:()=>m("premium"),children:"View Premium Plans"})]}),u.jsxs("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-6 flex items-center gap-2",children:[u.jsx(H7,{})," Profile Appearance ",u.jsx("span",{className:"text-xs normal-case px-2 py-0.5 bg-brand-primary/20 text-brand-primary rounded",children:"Premium"})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("label",{className:"block text-sm font-medium text-dark-text mb-2",children:"Profile Banner"}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("input",{type:"file",ref:L,onChange:he=>F(he.target.files?.[0]),accept:"image/*",className:"hidden"}),u.jsx("button",{onClick:()=>L.current?.click(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-8 border-2 border-dashed border-dark-hover hover:border-brand-primary rounded-lg text-dark-muted hover:text-brand-primary transition-colors disabled:opacity-50",disabled:w,children:w?u.jsxs("span",{children:["Uploading ",Math.round(A.progress),"%..."]}):u.jsxs("div",{className:"text-center",children:[u.jsx(bm,{size:24,className:"mx-auto mb-1"}),u.jsx("div",{children:"Upload Banner Image"}),u.jsx("div",{className:"text-xs opacity-70",children:"JPG, PNG, GIF"})]})}),b&&u.jsxs("div",{className:"w-32 h-24 rounded-lg overflow-hidden relative group shrink-0",children:[u.jsx("img",{src:b,className:"w-full h-full object-cover"}),u.jsx("button",{onClick:()=>{_(""),it(Me(ye,"users",n.uid),{bannerUrl:""})},className:"absolute inset-0 bg-black/60 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity text-red-500 font-bold",children:"Remove"})]})]})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("label",{className:"block text-sm font-medium text-dark-text mb-2",children:"Theme Color"}),u.jsxs("div",{className:"flex gap-4 items-center",children:[u.jsx("input",{type:"color",value:k,onChange:W,className:"w-16 h-16 rounded-lg cursor-pointer bg-transparent border-0 p-0"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-dark-text font-mono bg-dark-input px-3 py-1 rounded border border-dark-hover",children:k}),u.jsx("div",{className:"text-xs text-dark-muted mt-1",children:"Select a color to accent your profile."})]}),u.jsx("div",{className:"flex-1 text-right",children:u.jsx(Ze,{onClick:ae,disabled:k===r?.themeColor,children:"Save Color"})})]})]})]}),u.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[u.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Online Status"}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[{key:"online",label:"Online",color:"bg-green-500",desc:"Visible"},{key:"idle",label:"Idle",color:"bg-yellow-500",desc:"Away"},{key:"dnd",label:"Do Not Disturb",color:"bg-red-500",desc:"No notifications"},{key:"invisible",label:"Invisible",color:"bg-gray-500",desc:"Hidden"}].map(he=>u.jsxs("button",{onClick:()=>Ne(he.key),className:`p-3 rounded-lg border transition-all text-left flex items-center gap-3 ${r?.presence===he.key||!r?.presence&&he.key==="online"?"border-brand-primary bg-brand-primary/10":"border-dark-hover hover:border-dark-muted bg-dark-sidebar"}`,children:[u.jsx("span",{className:`w-3 h-3 rounded-full ${he.color}`}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-medium text-dark-text",children:he.label}),u.jsx("div",{className:"text-[10px] text-dark-muted",children:he.desc})]})]},he.key))})]}),u.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[u.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Custom Status"}),r?.status?u.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-sidebar rounded-lg",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"text-2xl",children:r.status.emoji}),u.jsx("span",{className:"text-dark-text",children:r.status.text})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Ze,{variant:"secondary",onClick:()=>pe(!0),children:"Edit"}),u.jsx(Ze,{variant:"danger",onClick:()=>_e(null),children:"Clear"})]})]}):u.jsxs("div",{className:"text-center py-4 border border-dashed border-dark-hover rounded-lg",children:[u.jsx("p",{className:"text-dark-muted text-sm mb-3",children:"No custom status set"}),u.jsx(Ze,{variant:"primary",size:"sm",onClick:()=>pe(!0),children:"Set a Status"})]})]}),u.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[u.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"About Me"}),u.jsx("textarea",{placeholder:"Tell others about yourself...",value:j,onChange:he=>T(he.target.value),maxLength:190,rows:4,className:`w-full bg-dark-input text-dark-text px-4 py-3 rounded-lg
                           border border-transparent focus:border-brand-primary
                           outline-none transition-colors duration-200
                           placeholder:text-dark-muted resize-none`}),u.jsxs("div",{className:"flex justify-between items-center mt-2",children:[u.jsxs("span",{className:"text-xs text-dark-muted",children:[j.length,"/190"]}),u.jsx(Ze,{variant:"primary",onClick:ge,disabled:H||j===r?.bio,children:H?"Updating...":"Save"})]})]}),u.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[u.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Account Info"}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"flex justify-between items-center py-2 border-b border-dark-hover",children:u.jsxs("div",{children:[u.jsx("div",{className:"text-xs text-dark-muted uppercase",children:"Display Name"}),u.jsx("div",{className:"text-dark-text font-medium",children:r?.displayName})]})}),u.jsx("div",{className:"flex justify-between items-center py-2 border-b border-dark-hover",children:u.jsxs("div",{children:[u.jsx("div",{className:"text-xs text-dark-muted uppercase",children:"Email"}),u.jsx("div",{className:"text-dark-text font-medium",children:n?.email})]})}),u.jsx("div",{className:"flex justify-between items-center py-2",children:u.jsxs("div",{children:[u.jsx("div",{className:"text-xs text-dark-muted uppercase",children:"Role"}),u.jsx("div",{className:"text-dark-text font-medium capitalize",children:r?.role||"member"})]})})]})]})]});case"security":return u.jsxs("div",{className:"space-y-8",children:[u.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Privacy & Security"}),u.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[u.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Change Password"}),u.jsxs("div",{className:"space-y-4 max-w-md",children:[u.jsx(un,{label:"Current Password",type:"password",placeholder:"Enter current password",value:ce.currentPassword,onChange:he=>Y({...ce,currentPassword:he.target.value})}),u.jsx(un,{label:"New Password",type:"password",placeholder:"Enter new password (min 6 characters)",value:ce.newPassword,onChange:he=>Y({...ce,newPassword:he.target.value})}),u.jsx(un,{label:"Confirm New Password",type:"password",placeholder:"Confirm new password",value:ce.confirmPassword,onChange:he=>Y({...ce,confirmPassword:he.target.value})}),u.jsx(Ze,{variant:"primary",onClick:Re,disabled:Z||!ce.currentPassword||!ce.newPassword||!ce.confirmPassword,children:Z?"Changing Password...":"Change Password"})]})]})]});case"about":return u.jsxs("div",{className:"space-y-8",children:[u.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"About"}),u.jsxs("div",{className:"bg-dark-bg rounded-lg p-6",children:[u.jsx("h2",{className:"text-xl font-bold text-dark-text mb-2",children:"Lumo Chat"}),u.jsxs("div",{className:"space-y-4 text-dark-muted text-sm",children:[u.jsx("p",{children:"A modern real-time chat application built for seamless communication."}),u.jsxs("div",{children:[u.jsx("div",{className:"font-semibold text-dark-text",children:"Version"}),u.jsx("div",{children:"1.9.5"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"font-semibold text-dark-text",children:"Developer"}),u.jsx("div",{children:"Dazlakss"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"font-semibold text-dark-text",children:"Tech Stack"}),u.jsx("div",{children:"React, Firebase, TailwindCSS, Electron"})]})]})]}),u.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[u.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Acknowledgments"}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"flex items-center gap-4 p-3 bg-dark-sidebar rounded-lg border border-dark-hover",children:u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"text-dark-text font-medium",children:"GIPHY"}),u.jsx("div",{className:"text-xs text-dark-muted",children:"We use GIPHY for finding and sharing GIFs."}),u.jsx("a",{href:"https://giphy.com",target:"_blank",rel:"noopener noreferrer",className:"mt-2 text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500 block w-fit hover:opacity-80 transition-opacity",children:"Powered by GIPHY"})]})}),u.jsx("div",{className:"flex items-center gap-4 p-3 bg-dark-sidebar rounded-lg border border-dark-hover",children:u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"text-dark-text font-medium",children:"Cloudinary"}),u.jsx("div",{className:"text-xs text-dark-muted",children:"Robust cloud storage and delivery for images and files."}),u.jsx("a",{href:"https://cloudinary.com",target:"_blank",rel:"noopener noreferrer",className:"mt-2 text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-sky-400 block w-fit hover:opacity-80 transition-opacity",children:"Powered by Cloudinary"})]})}),u.jsx("div",{className:"flex items-center gap-4 p-3 bg-dark-sidebar rounded-lg border border-dark-hover",children:u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"text-dark-text font-medium",children:"ImgBB"}),u.jsx("div",{className:"text-xs text-dark-muted",children:"Simple and fast image hosting service."}),u.jsx("a",{href:"https://imgbb.com",target:"_blank",rel:"noopener noreferrer",className:"mt-2 text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-gray-200 to-gray-400 block w-fit hover:opacity-80 transition-opacity",children:"Powered by ImgBB"})]})})]})]})]});default:return null}};return u.jsxs("div",{className:"fixed inset-0 bg-black/80 z-50 flex flex-col md:flex-row pt-safe-top md:pt-0",role:"dialog","aria-modal":"true",children:[u.jsx("div",{className:"w-full md:w-56 bg-dark-sidebar flex flex-col shrink-0 border-b md:border-b-0 md:border-r border-dark-hover",children:u.jsx("div",{className:"flex md:flex-col overflow-x-auto md:overflow-y-auto py-2 md:py-4 px-2 gap-2 md:gap-0 no-scrollbar",children:Object.entries(Ke).map(([he,Ce])=>u.jsxs("div",{className:"mb-0 md:mb-4 flex md:block gap-2 md:gap-0 shrink-0",children:[u.jsx("div",{className:"hidden md:block px-3 py-2 text-xs font-semibold text-dark-muted uppercase tracking-wide",children:he}),Ce.map(Ve=>{const oe=Ve.icon;return u.jsxs("button",{onClick:()=>m(Ve.id),className:`whitespace-nowrap flex items-center gap-2 md:gap-3 px-3 py-2 rounded-md text-left transition-colors ${h===Ve.id?"bg-dark-hover text-dark-text":"text-dark-muted hover:text-dark-text hover:bg-dark-hover/50"}`,children:[u.jsx(oe,{size:18}),u.jsx("span",{className:"text-sm",children:Ve.label})]},Ve.id)})]},he))})}),u.jsxs("div",{className:"flex-1 flex flex-col bg-dark-bg overflow-hidden min-w-0",children:[u.jsx("div",{className:"flex justify-end p-4 shrink-0",children:u.jsx("button",{onClick:e,className:"p-2 hover:bg-dark-hover rounded-full transition-colors group",title:"Close",children:u.jsx(On,{size:24,className:"text-dark-muted group-hover:text-dark-text"})})}),u.jsx("div",{className:"flex-1 overflow-y-auto px-4 md:px-10 pb-10",children:u.jsx("div",{className:h==="premium"?"w-full":"max-w-2xl mx-auto md:mx-0",children:Ge()})})]}),P&&u.jsx(Lz,{currentStatus:r?.status,onStatusChange:_e,onClose:()=>pe(!1)})]})},Hz=()=>{const[t,e]=N.useState([]),{channels:n}=La();N.useEffect(()=>{const a=is(dt(ye,"adminLogs"),Rv("timestamp","desc"),jv(100));return nr(a,c=>{const h=[];c.forEach(m=>{h.push({id:m.id,...m.data()})}),e(h)})},[]);const r=a=>{const l=n.find(c=>c.id===a);return l?`#${l.name}`:"Unknown Channel"};return u.jsxs("div",{children:[u.jsx("h3",{className:"text-2xl font-bold text-dark-text mb-6",children:"Admin Logs"}),u.jsx("div",{className:"space-y-3 max-h-[520px] overflow-y-auto pr-2",children:t.length===0?u.jsx("div",{className:"text-center text-dark-muted py-8",children:"No logs yet"}):t.map(a=>u.jsxs("div",{className:"bg-dark-bg p-5 rounded-xl hover:bg-dark-hover transition-colors",children:[u.jsxs("div",{className:"flex items-start justify-between mb-2",children:[u.jsx("div",{className:"flex items-center gap-2",children:a.type==="message_delete"?u.jsxs(u.Fragment,{children:[u.jsx(Ei,{className:"text-admin",size:20}),u.jsx("span",{className:"font-semibold text-dark-text",children:"Message Deleted"})]}):a.type==="message_edit"?u.jsxs(u.Fragment,{children:[u.jsx(Kl,{className:"text-blue-400",size:20}),u.jsx("span",{className:"font-semibold text-dark-text",children:"Message Edited"})]}):u.jsx("span",{className:"font-semibold text-dark-text",children:a.type})}),u.jsx("span",{className:"text-xs text-dark-muted",children:a.timestamp&&sp(a.timestamp)})]}),u.jsxs("div",{className:"space-y-1 text-sm",children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsx("span",{className:"text-dark-muted",children:"Channel:"}),u.jsx("span",{className:"text-dark-text font-medium",children:r(a.channelId)})]}),a.type==="message_delete"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsx("span",{className:"text-dark-muted",children:"Original Author:"}),u.jsx("span",{className:"text-dark-text",children:a.originalAuthorName||a.originalUserName||"Unknown"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("span",{className:"text-dark-muted",children:"Message:"}),u.jsxs("span",{className:"text-dark-text italic",children:['"',a.messageText||a.deletedText||"(empty message)",'"']})]})]}),a.type==="message_edit"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsx("span",{className:"text-dark-muted",children:"Before:"}),u.jsxs("span",{className:"text-dark-text italic",children:['"',a.originalText,'"']})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("span",{className:"text-dark-muted",children:"After:"}),u.jsxs("span",{className:"text-blue-400 italic",children:['"',a.newText,'"']})]})]})]})]},a.id))})]})},$z=[{id:"users",label:"Users",icon:m1,category:"Moderation"},{id:"roles",label:"Roles",icon:AT,category:"Moderation"},{id:"channels",label:"Channels",icon:ip,category:"Server Settings"},{id:"server",label:"Overview",icon:d1,category:"Server Settings"},{id:"logs",label:"Audit Log",icon:_7,category:"Server Settings"},{id:"notifications",label:"Notifications",icon:Z7,category:"Maintenance"},{id:"cleanup",label:"Cleanup",icon:$7,category:"Maintenance"}],qz=({isOpen:t,onClose:e})=>{const{userProfile:n}=Cn(),{users:r,channels:a,server:l,currentServer:c}=La(),[h,m]=N.useState("users"),[g,y]=N.useState(null),[b,_]=N.useState(""),[k,R]=N.useState(""),[j,T]=N.useState("text"),[H,q]=N.useState(null),[I,z]=N.useState([]),[B,$]=N.useState(null),[w,E]=N.useState({name:"",color:"#5865f2"}),[A,D]=N.useState(null),[O,L]=N.useState(null),{success:P,error:pe}=Gr(),[ce,Y]=N.useState(0),[Z,J]=N.useState(!1),[Te,Ae]=N.useState(null);N.useEffect(()=>{const U=K=>{K.key==="Escape"&&t&&e()};return t&&(document.addEventListener("keydown",U),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",U),document.body.style.overflow="unset"}},[t,e]),N.useEffect(()=>{if(!c||c==="home")return;const U=is(dt(ye,"servers",c,"roles"));return nr(U,ee=>{const ke=[];ee.forEach(Oe=>{ke.push({id:Oe.id,...Oe.data()})}),z(ke)})},[c]),N.useEffect(()=>{if(h!=="cleanup")return;(async()=>{try{const K=await Ro(dt(ye,"inviteCodes")),ee=new Date;let ke=0;K.forEach(Oe=>{const Fe=Oe.data(),Le=Fe.expiresAt?.toDate()<ee,Et=!Fe.isActive||Fe.uses>=Fe.maxUses;(Le||Et)&&ke++}),Y(ke)}catch(K){console.error("Error fetching cleanup stats:",K)}})()},[h]);const F=async()=>{J(!0);try{const U=await Ro(dt(ye,"inviteCodes")),K=new Date,ee=Z4(ye);let ke=0;U.forEach(Oe=>{const Fe=Oe.data(),Le=Fe.expiresAt?.toDate()<K,Et=!Fe.isActive||Fe.uses>=Fe.maxUses;(Le||Et)&&(ee.delete(Me(ye,"inviteCodes",Oe.id)),ke++)}),ke>0?(await ee.commit(),P(`${ke} expired invite code(s) deleted`),Y(0)):P("No expired invite codes to delete")}catch(U){console.error("Error cleaning invite codes:",U),pe("Failed to clean invite codes")}finally{J(!1),Ae(null)}};if(!t||n?.role!=="admin")return null;const W=async(U,K)=>{try{await it(Me(ye,"users",U),{role:K}),c&&await it(Me(ye,"servers",c,"members",U),{role:K}),P(`Role updated to ${K}`),y(null)}catch(ee){console.error("Error updating user role:",ee),pe(`Failed to update role: ${ee.message}`)}},ae=async(U,K)=>{try{await it(Me(ye,"users",U),{isMuted:!K})}catch(ee){console.error("Error toggling mute:",ee)}},ge=async(U,K)=>{try{await it(Me(ye,"users",U),{isBanned:!K})}catch(ee){console.error("Error toggling ban:",ee)}},Re=async()=>{if(!(!b.trim()||!c))try{await An(dt(ye,"servers",c,"channels"),{name:b.trim(),type:j,description:j==="text"?k.trim():"",position:a.length,createdAt:bt()}),_(""),R(""),T("text"),P(`${j==="voice"?"Sesli":"Yaz"} kanal oluturuldu!`)}catch(U){console.error("Error creating channel:",U),pe("Kanal oluturulamad")}},_e=async(U,K)=>{try{await it(Me(ye,"servers",c,"channels",U),K),q(null)}catch(ee){console.error("Error updating channel:",ee)}},Ne=async()=>{if(!(!O?.data||!c))try{await jo(Me(ye,"servers",c,"channels",O.data))}catch(U){console.error("Error deleting channel:",U)}},Ke=async(U,K)=>{if(c)try{await it(Me(ye,"servers",c,"channels",U),{locked:!K})}catch(ee){console.error("Error toggling channel lock:",ee)}},Ge=async()=>{if(w.name.trim())try{const U=I.reduce((K,ee)=>Math.max(K,ee.position||0),0);c&&await An(dt(ye,"servers",c,"roles"),{name:w.name.trim(),color:w.color,position:U+1,createdAt:bt()}),E({name:"",color:"#5865f2"})}catch(U){console.error("Error creating role:",U)}},he=async(U,K)=>{if(c)try{await it(Me(ye,"servers",c,"roles",U),K),$(null)}catch(ee){console.error("Error updating role:",ee)}},Ce=async()=>{if(!O?.data)return;const U=O.data;try{const K=I.find(Fe=>Fe.id===U);if(!K)return;const ee=K.name,ke=Z4(ye),Oe=r.filter(Fe=>(Fe.serverRole||Fe.role)===ee);if(Oe.forEach(Fe=>{if(Fe.role===ee){const Le=Me(ye,"users",Fe.id);ke.update(Le,{role:"member"})}if(c){const Le=Me(ye,"servers",c,"members",Fe.id);ke.update(Le,{role:"member"})}}),c){const Fe=Me(ye,"servers",c,"roles",U);ke.delete(Fe),await ke.commit(),P(`Role '${ee}' deleted and ${Oe.length} users reassigned to Member`)}}catch(K){console.error("Error deleting role:",K),pe(`Failed to delete role: ${K.message}`)}},Ve=[{id:"admin",name:"admin",color:"#f23f42",isDefault:!0,position:-3},{id:"moderator",name:"moderator",color:"#faa81a",isDefault:!0,position:-2},{id:"member",name:"member",color:"#80848e",isDefault:!0,position:-1},...I].sort((U,K)=>(U.position??999)-(K.position??999)),oe=(U,K)=>{D(K),U.dataTransfer.effectAllowed="move"},xe=U=>{U.preventDefault(),U.dataTransfer.dropEffect="move"},ze=async(U,K)=>{if(U.preventDefault(),!A||A===K){D(null);return}const ee=Ve.find(Oe=>Oe.id===A),ke=Ve.find(Oe=>Oe.id===K);if(ee?.isDefault||ke?.isDefault){D(null);return}try{const Oe=ee.position??0,Fe=ke.position??0;c&&(await it(Me(ye,"servers",c,"roles",A),{position:Fe}),await it(Me(ye,"servers",c,"roles",K),{position:Oe}))}catch(Oe){console.error("Error reordering roles:",Oe)}D(null)},Se=$z.reduce((U,K)=>(U[K.category]||(U[K.category]=[]),U[K.category].push(K),U),{}),ue=()=>{switch(h){case"users":return u.jsxs("div",{className:"space-y-6",children:[u.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"User Management"}),u.jsx("p",{className:"text-dark-muted",children:"Manage server members, assign roles, and moderate users."}),u.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[u.jsxs("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:["Members  ",r.length]}),u.jsx("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:r.map(U=>u.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-dark-hover transition-colors",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold",children:U.displayName?.[0]?.toUpperCase()||"U"}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"font-medium text-dark-text",children:U.displayName}),u.jsx("span",{className:"text-xs px-2 py-0.5 rounded",style:{backgroundColor:`${Ve.find(K=>K.name===(U.serverRole||U.role))?.color}20`,color:Ve.find(K=>K.name===(U.serverRole||U.role))?.color},children:U.serverRole||U.role}),U.isMuted&&u.jsx("span",{className:"text-xs text-yellow-500",children:"MUTED"}),U.isBanned&&u.jsx("span",{className:"text-xs text-red-500",children:"BANNED"})]}),u.jsx("div",{className:"text-sm text-dark-muted",children:U.email})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Ze,{size:"sm",variant:U.isMuted?"warning":"secondary",onClick:()=>ae(U.id,U.isMuted),children:U.isMuted?"Unmute":"Mute"}),u.jsx(Ze,{size:"sm",variant:U.isBanned?"danger":"secondary",onClick:()=>ge(U.id,U.isBanned),children:U.isBanned?"Unban":"Ban"}),u.jsx(Ze,{size:"sm",variant:"ghost",onClick:()=>y(U),children:u.jsx(Kl,{size:16})})]})]},U.id))})]})]});case"roles":return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Roles"}),u.jsx("p",{className:"text-dark-muted mt-1",children:"Use roles to organize your members and customize permissions."})]}),u.jsxs("div",{className:"bg-dark-bg rounded-xl p-6 border border-dark-hover",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-primary/20 flex items-center justify-center",children:u.jsx(wo,{className:"text-brand-primary",size:24})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-dark-text",children:"Create New Role"}),u.jsx("p",{className:"text-sm text-dark-muted",children:"Add a custom role with a unique color"})]})]}),u.jsxs("div",{className:"flex gap-4 items-end",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("label",{className:"block text-xs font-medium text-dark-muted uppercase tracking-wide mb-2",children:"Role Name"}),u.jsx(un,{placeholder:"e.g. VIP, Helper, Supporter...",value:w.name,onChange:U=>E({...w,name:U.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-dark-muted uppercase tracking-wide mb-2",children:"Color"}),u.jsx("div",{className:"relative",children:u.jsx("input",{type:"color",value:w.color,onChange:U=>E({...w,color:U.target.value}),className:"w-14 h-10 rounded-lg cursor-pointer border-2 border-dark-hover hover:border-brand-primary transition-colors",style:{backgroundColor:w.color}})})]}),u.jsxs(Ze,{onClick:Ge,disabled:!w.name.trim(),className:"px-6",children:[u.jsx(wo,{size:18,className:"mr-1"}),"Create Role"]})]})]}),u.jsxs("div",{className:"bg-dark-bg rounded-xl border border-dark-hover overflow-hidden",children:[u.jsxs("div",{className:"px-6 py-4 border-b border-dark-hover flex items-center justify-between",children:[u.jsxs("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide",children:["Roles  ",Ve.length]}),u.jsx("span",{className:"text-xs text-dark-muted",children:"Drag custom roles to reorder hierarchy"})]}),u.jsxs("div",{className:"divide-y divide-dark-hover",children:[Ve.map((U,K)=>u.jsxs("div",{draggable:!U.isDefault,onDragStart:ee=>oe(ee,U.id),onDragOver:xe,onDrop:ee=>ze(ee,U.id),className:At("group flex items-center justify-between px-6 py-4 transition-colors",!U.isDefault&&"cursor-grab active:cursor-grabbing hover:bg-dark-sidebar/50",U.isDefault&&"opacity-70",A===U.id&&"opacity-50 bg-brand-primary/10"),children:[u.jsxs("div",{className:"flex items-center gap-4",children:[!U.isDefault&&u.jsx("div",{className:"text-dark-muted opacity-0 group-hover:opacity-100 transition-opacity",children:u.jsx(P7,{size:20})}),u.jsx("div",{className:"w-5 h-5 rounded-full ring-2 ring-offset-2 ring-offset-dark-bg",style:{backgroundColor:U.color,ringColor:U.color}}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"font-semibold text-dark-text",style:{color:U.color},children:U.name}),U.isDefault&&u.jsx("span",{className:"text-[10px] px-2 py-0.5 bg-dark-hover text-dark-muted rounded-full uppercase font-medium",children:"System"})]}),u.jsx("p",{className:"text-xs text-dark-muted mt-0.5",children:U.isDefault?"Default system role":`Position: ${U.position??0}`})]})]}),!U.isDefault&&u.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[u.jsx("button",{onClick:()=>$(U),className:"p-2 rounded-lg hover:bg-dark-hover text-dark-muted hover:text-brand-primary transition-colors",title:"Edit Role",children:u.jsx(Kl,{size:18})}),u.jsx("button",{onClick:()=>L({type:"role",data:U.id,name:U.name}),className:"p-2 rounded-lg hover:bg-red-500/20 text-dark-muted hover:text-red-500 transition-colors",title:"Delete Role",children:u.jsx(Ei,{size:18})})]})]},U.id)),Ve.length===0&&u.jsxs("div",{className:"px-6 py-12 text-center",children:[u.jsx(AT,{className:"mx-auto text-dark-muted mb-3",size:40}),u.jsx("p",{className:"text-dark-muted",children:"No roles created yet"}),u.jsx("p",{className:"text-xs text-dark-muted mt-1",children:"Create your first role above!"})]})]})]})]});case"channels":return u.jsxs("div",{className:"space-y-6",children:[u.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Channels"}),u.jsx("p",{className:"text-dark-muted",children:"Create and manage server channels."}),u.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[u.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Create New Channel"}),u.jsxs("div",{className:"flex gap-3",children:[u.jsxs("div",{className:"flex-1 space-y-2",children:[u.jsxs("div",{className:"flex gap-2 mb-2",children:[u.jsx("button",{onClick:()=>T("text"),className:`flex-1 py-2 px-4 rounded-lg border transition-colors ${j==="text"?"border-brand-primary bg-brand-primary/20 text-brand-primary":"border-dark-hover text-dark-muted hover:border-dark-muted"}`,children:"# Yaz Kanal"}),u.jsx("button",{onClick:()=>T("voice"),className:`flex-1 py-2 px-4 rounded-lg border transition-colors ${j==="voice"?"border-green-500 bg-green-500/20 text-green-500":"border-dark-hover text-dark-muted hover:border-dark-muted"}`,children:" Sesli Kanal"})]}),u.jsx(un,{placeholder:"Channel name",value:b,onChange:U=>_(U.target.value)}),j==="text"&&u.jsx(un,{placeholder:"Channel topic/description (Optional)",value:k,onChange:U=>R(U.target.value)})]}),u.jsxs(Ze,{onClick:Re,className:"h-fit mt-auto",children:[u.jsx(wo,{size:20}),"Create"]})]})]}),u.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[u.jsxs("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:["Text Channels  ",a.length]}),u.jsx("div",{className:"space-y-2",children:a.map(U=>u.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-dark-hover transition-colors",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(ip,{className:"text-dark-muted"}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"font-medium text-dark-text",children:U.name}),U.description&&u.jsx("span",{className:"text-xs text-dark-muted ml-2 truncate max-w-[200px]",children:U.description}),U.locked&&u.jsxs("span",{className:"text-xs px-2 py-0.5 rounded bg-yellow-500/20 text-yellow-500 flex items-center gap-1",children:[u.jsx(rp,{size:12}),"LOCKED"]})]}),u.jsx("div",{className:"text-xs text-dark-muted",children:U.locked?"Only admins can send messages":"Everyone can send messages"})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Ze,{size:"sm",variant:"ghost",onClick:()=>q(U),children:u.jsx(Kl,{size:16})}),u.jsx(Ze,{size:"sm",variant:U.locked?"warning":"secondary",onClick:()=>Ke(U.id,U.locked),children:U.locked?"Unlock":"Lock"}),u.jsx(Ze,{size:"sm",variant:"danger",onClick:()=>L({type:"channel",data:U.id,name:U.name}),children:u.jsx(Ei,{size:16})})]})]},U.id))})]})]});case"server":return u.jsxs("div",{className:"space-y-6",children:[u.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Server Overview"}),u.jsx("p",{className:"text-dark-muted",children:"View server statistics and information."}),u.jsxs("div",{className:"bg-dark-bg rounded-lg p-6",children:[u.jsxs("div",{className:"mb-6",children:[u.jsx("div",{className:"text-xs text-dark-muted uppercase tracking-wide mb-1",children:"Server Name"}),u.jsx("div",{className:"text-2xl font-bold text-dark-text",children:l?.name||"Unknown"})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[u.jsxs("div",{className:"bg-dark-sidebar p-4 rounded-lg text-center",children:[u.jsx("div",{className:"text-3xl font-bold text-brand-primary mb-1",children:r.length}),u.jsx("div",{className:"text-sm text-dark-muted",children:"Members"})]}),u.jsxs("div",{className:"bg-dark-sidebar p-4 rounded-lg text-center",children:[u.jsx("div",{className:"text-3xl font-bold text-green-500 mb-1",children:a.length}),u.jsx("div",{className:"text-sm text-dark-muted",children:"Channels"})]}),u.jsxs("div",{className:"bg-dark-sidebar p-4 rounded-lg text-center",children:[u.jsx("div",{className:"text-3xl font-bold text-purple-500 mb-1",children:Ve.length}),u.jsx("div",{className:"text-sm text-dark-muted",children:"Roles"})]})]})]})]});case"logs":return u.jsxs("div",{className:"space-y-6",children:[u.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Audit Log"}),u.jsx("p",{className:"text-dark-muted",children:"View server activity and moderation history."}),u.jsx(Hz,{})]});case"notifications":return u.jsxs("div",{className:"space-y-6",children:[u.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Push Notifications"}),u.jsx("p",{className:"text-dark-muted",children:"View and copy user FCM tokens for manual testing."}),u.jsxs("div",{className:"bg-dark-bg rounded-lg border border-dark-hover overflow-hidden",children:[u.jsx("div",{className:"px-6 py-4 border-b border-dark-hover",children:u.jsxs("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide",children:["Registered Devices  ",r.filter(U=>U.fcmTokens).length," / ",r.length]})}),u.jsx("div",{className:"divide-y divide-dark-hover max-h-[600px] overflow-y-auto",children:r.map(U=>u.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-dark-sidebar/50 transition-colors",children:[u.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-primary flex items-center justify-center text-white shrink-0",children:U.displayName?.[0]?.toUpperCase()||"U"}),u.jsxs("div",{className:"overflow-hidden",children:[u.jsx("div",{className:"font-medium text-dark-text truncate",children:U.displayName}),u.jsx("div",{className:"text-xs font-mono text-dark-muted truncate max-w-[400px]",children:U.fcmTokens||"No token registered"})]})]}),u.jsx("div",{className:"flex items-center gap-2",children:U.fcmTokens?u.jsxs(Ze,{size:"sm",variant:"secondary",onClick:()=>{navigator.clipboard.writeText(U.fcmTokens),P("Token copied to clipboard!")},children:[u.jsx(NT,{size:16,className:"mr-1"}),"Copy"]}):u.jsx("span",{className:"text-xs text-dark-muted italic px-2",children:"Offline/No Device"})})]},U.id))})]})]});case"cleanup":return u.jsxs("div",{className:"space-y-6",children:[u.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Database Cleanup"}),u.jsx("p",{className:"text-dark-muted",children:"Remove unused data to keep your database clean and reduce storage costs."}),u.jsx("div",{className:"grid gap-4",children:u.jsxs("div",{className:"bg-dark-bg rounded-lg p-6 border border-dark-hover",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-dark-text",children:"Expired Invite Codes"}),u.jsx("p",{className:"text-sm text-dark-muted mt-1",children:"Expired, used, or deactivated invite codes that are no longer valid."})]}),u.jsx("div",{className:"text-3xl font-bold text-yellow-500",children:ce})]}),u.jsxs(Ze,{variant:"warning",onClick:()=>Ae("invites"),disabled:ce===0||Z,className:"w-full",children:[u.jsx(Ei,{size:20}),Z?"Cleaning...":"Clean Invite Codes"]})]})}),u.jsxs("div",{className:"text-xs text-dark-muted bg-dark-sidebar p-4 rounded-lg",children:[u.jsx("strong",{children:"Note:"})," These actions are irreversible. Deleted data cannot be recovered. Running cleanup periodically helps keep your Firestore quota usage low."]})]});default:return null}};return u.jsxs("div",{className:"fixed inset-0 bg-black/80 z-[100] flex flex-col md:flex-row pt-safe-top md:pt-0",children:[u.jsx("div",{className:"w-full md:w-56 bg-dark-sidebar flex flex-col shrink-0 border-b md:border-b-0 md:border-r border-dark-hover",children:u.jsx("div",{className:"flex md:flex-col overflow-x-auto md:overflow-y-auto py-2 md:py-4 px-2 gap-2 md:gap-0 no-scrollbar",children:Object.entries(Se).map(([U,K])=>u.jsxs("div",{className:"mb-0 md:mb-4 flex md:block gap-2 md:gap-0 shrink-0",children:[u.jsx("div",{className:"hidden md:block px-3 py-2 text-xs font-semibold text-dark-muted uppercase tracking-wide",children:U}),K.map(ee=>{const ke=ee.icon;return u.jsxs("button",{onClick:()=>m(ee.id),className:At("whitespace-nowrap flex items-center gap-2 md:gap-3 px-3 py-2 rounded-md text-left transition-colors",h===ee.id?"bg-dark-hover text-dark-text":"text-dark-muted hover:text-dark-text hover:bg-dark-hover/50"),children:[u.jsx(ke,{size:18}),u.jsx("span",{className:"text-sm",children:ee.label})]},ee.id)})]},U))})}),u.jsxs("div",{className:"flex-1 flex flex-col bg-dark-bg overflow-hidden min-w-0",children:[u.jsx("div",{className:"flex justify-end p-4 shrink-0",children:u.jsx("button",{onClick:e,className:"p-2 hover:bg-dark-hover rounded-full transition-colors group",title:"Close (ESC)",children:u.jsx(On,{size:24,className:"text-dark-muted group-hover:text-dark-text"})})}),u.jsx("div",{className:"flex-1 overflow-y-auto px-4 md:px-10 pb-10",children:u.jsx("div",{className:"max-w-3xl mx-auto md:mx-0",children:ue()})})]}),g&&(()=>{const U=r.find(K=>K.id===g.id)||g;return u.jsx(Hs,{isOpen:!!g,onClose:()=>y(null),title:"Edit User Role",size:"sm",children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-sm text-dark-muted mb-1",children:"User"}),u.jsx("div",{className:"font-medium text-dark-text",children:U.displayName})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm text-dark-muted mb-2",children:"Select Role"}),u.jsx("div",{className:"space-y-2",children:Ve.map(K=>u.jsxs("button",{onClick:()=>W(g.id,K.name),className:At("w-full px-3 py-2 rounded-lg border text-left transition-all flex items-center gap-3",(U.serverRole||U.role)===K.name?"border-brand-primary bg-brand-primary/20":"border-dark-hover hover:bg-dark-hover"),children:[u.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:K.color}}),u.jsx("span",{className:"text-dark-text",children:K.name})]},K.id))})]})]})})})(),B&&u.jsx(Hs,{isOpen:!!B,onClose:()=>$(null),title:"Edit Role",size:"sm",children:u.jsxs("div",{className:"space-y-4",children:[u.jsx(un,{label:"Role Name",value:B.name,onChange:U=>$({...B,name:U.target.value})}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-dark-text mb-2 block",children:"Role Color"}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("input",{type:"color",value:B.color,onChange:U=>$({...B,color:U.target.value}),className:"w-14 h-10 rounded cursor-pointer"}),u.jsx(un,{value:B.color,onChange:U=>$({...B,color:U.target.value}),className:"flex-1"})]})]}),u.jsx(Ze,{variant:"primary",className:"w-full",onClick:()=>he(B.id,{name:B.name,color:B.color}),children:"Save Changes"})]})}),H&&u.jsx(Hs,{isOpen:!!H,onClose:()=>q(null),title:"Edit Channel",size:"sm",children:u.jsxs("div",{className:"space-y-4",children:[u.jsx(un,{label:"Channel Name",value:H.name,onChange:U=>q({...H,name:U.target.value})}),u.jsx(un,{label:"Channel Topic / Description",value:H.description||"",onChange:U=>q({...H,description:U.target.value})}),u.jsx(Ze,{variant:"primary",className:"w-full",onClick:()=>_e(H.id,{name:H.name,description:H.description}),children:"Save Changes"})]})}),u.jsx(ac,{isOpen:!!O,onClose:()=>L(null),onConfirm:O?.type==="channel"?Ne:Ce,title:`Delete ${O?.type==="channel"?"Channel":"Role"}`,message:`Are you sure you want to delete "${O?.name}"? This cannot be undone.`,confirmText:"Delete",variant:"danger"}),u.jsx(ac,{isOpen:!!Te,onClose:()=>Ae(null),onConfirm:F,title:"Clean Invite Codes",message:`Are you sure you want to delete ${ce} expired/used invite code(s)? This action cannot be undone.`,confirmText:"Clean",variant:"danger"})]})},Gz=({isOpen:t,onClose:e,userId:n,onSuccess:r})=>{const[a,l]=N.useState(""),[c,h]=N.useState(null),[m,g]=N.useState(null),[y,b]=N.useState(!1),[_,k]=N.useState({progress:0,speed:""}),R=N.useRef(null),{success:j,error:T}=Gr(),H=I=>{const z=I.target.files?.[0];if(z){if(!z.type.startsWith("image/")){T("Please select an image file");return}if(z.size>10*1024*1024){T("Image size must be less than 10MB");return}h(z),g(URL.createObjectURL(z))}},q=async()=>{if(!a.trim()){T("Server name is required");return}b(!0);try{let I=null;c&&(I=await ad(c,(B,$)=>{k({progress:B,speed:$})}));const z=await An(dt(ye,"servers"),{name:a.trim(),icon:I,ownerId:n,createdAt:bt(),isDefault:!1,memberCount:1});await Ar(Me(ye,"servers",z.id,"members",n),{userId:n,joinedAt:bt(),role:"admin"}),await An(dt(ye,"servers",z.id,"channels"),{name:"general",type:"text",description:"General discussion",position:0,createdAt:bt()}),await it(Me(ye,"users",n),{servers:np(z.id),currentServer:z.id}),j("Server created successfully!"),l(""),h(null),m&&URL.revokeObjectURL(m),g(null),r&&r(z.id),e()}catch(I){console.error("Error creating server:",I),T("Failed to create server")}finally{b(!1),k({progress:0,speed:""})}};return u.jsx(Hs,{isOpen:t,onClose:e,title:"Create Server",size:"sm",children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx("input",{type:"file",ref:R,onChange:H,accept:"image/*",className:"hidden"}),u.jsx("button",{onClick:()=>R.current?.click(),className:"w-20 h-20 rounded-full bg-dark-hover border-2 border-dashed border-dark-muted hover:border-brand-primary flex items-center justify-center transition-colors overflow-hidden",children:m?u.jsx("img",{src:m,alt:"Preview",className:"w-full h-full object-cover"}):u.jsx(z7,{size:32,className:"text-dark-muted"})}),u.jsx("span",{className:"text-xs text-dark-muted mt-2",children:"Server Icon (Optional)"})]}),y&&c&&_.progress>0&&u.jsxs("div",{className:"text-xs text-dark-muted text-center",children:["Uploading icon: ",Math.round(_.progress),"% (",_.speed,")"]}),u.jsx(un,{label:"Server Name",placeholder:"My Awesome Server",value:a,onChange:I=>l(I.target.value),maxLength:50,autoFocus:!0}),u.jsxs("div",{className:"text-xs text-dark-muted",children:[a.length,"/50 characters"]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Ze,{variant:"secondary",onClick:e,className:"flex-1",children:"Cancel"}),u.jsx(Ze,{variant:"primary",onClick:q,disabled:!a.trim()||y,className:"flex-1",children:y?"Creating...":"Create Server"})]})]})})},Yz=({isOpen:t,onClose:e,userId:n,onSuccess:r})=>{const[a,l]=N.useState(""),[c,h]=N.useState(!1),{success:m,error:g}=Gr(),y=async()=>{if(!a.trim()){g("Invite code is required");return}h(!0);try{const b=a.trim().toUpperCase(),_=Me(ye,"inviteCodes",b),k=await tp(_);if(!k.exists()){g("Invalid invite code");return}const R=k.data();if(!R.isActive){g("This invite code has already been used");return}const j=R.isUnlimited===!0||R.maxUses===-1;if(!j&&R.uses>=R.maxUses){g("This invite code has reached its usage limit");return}if(R.expiresAt.toDate()<new Date){g("This invite code has expired");return}await Ar(Me(ye,"servers",R.serverId,"members",n),{userId:n,joinedAt:bt(),role:"member"}),await it(Me(ye,"users",n),{servers:np(R.serverId),currentServer:R.serverId});const T={uses:hm(1)};j||(T.isActive=!1),await it(_,T),await it(Me(ye,"servers",R.serverId),{memberCount:hm(1)}),m("Successfully joined server!"),l(""),r&&r(R.serverId),e()}catch(b){console.error("Error joining server:",b),console.error("Error code:",b.code),console.error("Error message:",b.message),b.code!=="permission-denied"?b.code==="not-found"?g("Server not found"):g(`Failed to join server: ${b.message}`):e()}finally{h(!1)}};return u.jsx(Hs,{isOpen:t,onClose:e,title:"Join Server",size:"sm",children:u.jsxs("div",{className:"space-y-4",children:[u.jsx(un,{label:"Invite Code",placeholder:"ABC12XYZ",value:a,onChange:b=>l(b.target.value.toUpperCase()),maxLength:8,autoFocus:!0}),u.jsx("div",{className:"text-xs text-dark-muted",children:"Enter the 8-character invite code"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Ze,{variant:"secondary",onClick:e,className:"flex-1",children:"Cancel"}),u.jsx(Ze,{variant:"primary",onClick:y,disabled:a.length!==8||c,className:"flex-1",children:c?"Joining...":"Join Server"})]})]})})},Kz=({isOpen:t,onClose:e})=>{const{availableDevices:n,selectedMicId:r,setSelectedMicId:a,selectedCameraId:l,setSelectedCameraId:c}=kd();return t?u.jsx("div",{className:"fixed inset-0 bg-black/80 z-[100] flex items-center justify-center animate-fade-in",children:u.jsxs("div",{className:"bg-dark-elem w-full max-w-md rounded-2xl shadow-2xl border border-dark-hover overflow-hidden p-6 relative",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[u.jsx(rp,{size:28,className:"text-brand-primary"}),"Device Settings"]}),u.jsx("button",{onClick:e,className:"p-1 hover:bg-dark-hover rounded-full transition-colors text-dark-muted hover:text-white",children:u.jsx(On,{size:24})})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-xs font-bold text-dark-muted uppercase tracking-wider mb-2 flex items-center gap-2",children:[u.jsx(Mv,{size:16})," Microphone"]}),u.jsxs("select",{className:"w-full bg-dark-input border border-dark-hover rounded-lg p-3 text-white focus:ring-2 focus:ring-brand-primary outline-none transition-all",value:r,onChange:h=>a(h.target.value),children:[n.audioInputs.map(h=>u.jsx("option",{value:h.deviceId,children:h.label||`Microphone ${h.deviceId.slice(0,5)}...`},h.deviceId)),n.audioInputs.length===0&&u.jsx("option",{value:"",children:"No microphone found"})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-xs font-bold text-dark-muted uppercase tracking-wider mb-2 flex items-center gap-2",children:[u.jsx(nd,{size:16})," Camera"]}),u.jsxs("select",{className:"w-full bg-dark-input border border-dark-hover rounded-lg p-3 text-white focus:ring-2 focus:ring-brand-primary outline-none transition-all",value:l,onChange:h=>c(h.target.value),children:[n.videoInputs.map(h=>u.jsx("option",{value:h.deviceId,children:h.label||`Camera ${h.deviceId.slice(0,5)}...`},h.deviceId)),n.videoInputs.length===0&&u.jsx("option",{value:"",children:"No camera found"})]})]}),u.jsx("div",{className:"pt-4 border-t border-dark-hover flex justify-end",children:u.jsx(Ze,{variant:"primary",onClick:e,children:"Done"})})]})]})}):null};var Ru={exports:{}},Z0={},ev={exports:{}},tv,jS;function Qz(){if(jS)return tv;jS=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return tv=t,tv}var nv,IS;function Xz(){if(IS)return nv;IS=1;var t=Qz();function e(){}function n(){}return n.resetWarningCache=e,nv=function(){function r(c,h,m,g,y,b){if(b!==t){var _=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw _.name="Invariant Violation",_}}r.isRequired=r;function a(){return r}var l={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:a,element:r,elementType:r,instanceOf:a,node:r,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:n,resetWarningCache:e};return l.PropTypes=l,l},nv}var DS;function Nk(){return DS||(DS=1,ev.exports=Xz()()),ev.exports}var xf={exports:{}},MS;function Wz(){if(MS)return xf.exports;MS=1;function t(n){var r,a,l="";if(typeof n=="string"||typeof n=="number")l+=n;else if(typeof n=="object")if(Array.isArray(n)){var c=n.length;for(r=0;r<c;r++)n[r]&&(a=t(n[r]))&&(l&&(l+=" "),l+=a)}else for(a in n)n[a]&&(l&&(l+=" "),l+=a);return l}function e(){for(var n,r,a=0,l="",c=arguments.length;a<c;a++)(n=arguments[a])&&(r=t(n))&&(l&&(l+=" "),l+=r);return l}return xf.exports=e,xf.exports.clsx=e,xf.exports}var ln={},da={},PS;function yp(){if(PS)return da;PS=1,Object.defineProperty(da,"__esModule",{value:!0}),da.dontSetMe=a,da.findInArray=t,da.int=r,da.isFunction=e,da.isNum=n;function t(l,c){for(let h=0,m=l.length;h<m;h++)if(c.apply(c,[l[h],h,l]))return l[h]}function e(l){return typeof l=="function"||Object.prototype.toString.call(l)==="[object Function]"}function n(l){return typeof l=="number"&&!isNaN(l)}function r(l){return parseInt(l,10)}function a(l,c,h){if(l[c])return new Error(`Invalid prop ${c} passed to ${h} - do not set this, set it on the child.`)}return da}var ha={},OS;function Jz(){if(OS)return ha;OS=1,Object.defineProperty(ha,"__esModule",{value:!0}),ha.browserPrefixToKey=n,ha.browserPrefixToStyle=r,ha.default=void 0,ha.getPrefix=e;const t=["Moz","Webkit","O","ms"];function e(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const c=window.document?.documentElement?.style;if(!c||l in c)return"";for(let h=0;h<t.length;h++)if(n(l,t[h])in c)return t[h];return""}function n(l,c){return c?`${c}${a(l)}`:l}function r(l,c){return c?`-${c.toLowerCase()}-${l}`:l}function a(l){let c="",h=!0;for(let m=0;m<l.length;m++)h?(c+=l[m].toUpperCase(),h=!1):l[m]==="-"?h=!0:c+=l[m];return c}return ha.default=e(),ha}var LS;function q1(){if(LS)return ln;LS=1,Object.defineProperty(ln,"__esModule",{value:!0}),ln.addClassName=B,ln.addEvent=c,ln.addUserSelectStyles=q,ln.createCSSTransform=k,ln.createSVGTransform=R,ln.getTouch=T,ln.getTouchIdentifier=H,ln.getTranslation=j,ln.innerHeight=y,ln.innerWidth=b,ln.matchesSelector=a,ln.matchesSelectorAndParentsTo=l,ln.offsetXYFromParent=_,ln.outerHeight=m,ln.outerWidth=g,ln.removeClassName=$,ln.removeEvent=h,ln.scheduleRemoveUserSelectStyles=I;var t=yp(),e=n(Jz());function n(w,E){if(typeof WeakMap=="function")var A=new WeakMap,D=new WeakMap;return(n=function(O,L){if(!L&&O&&O.__esModule)return O;var P,pe,ce={__proto__:null,default:O};if(O===null||typeof O!="object"&&typeof O!="function")return ce;if(P=L?D:A){if(P.has(O))return P.get(O);P.set(O,ce)}for(const Y in O)Y!=="default"&&{}.hasOwnProperty.call(O,Y)&&((pe=(P=Object.defineProperty)&&Object.getOwnPropertyDescriptor(O,Y))&&(pe.get||pe.set)?P(ce,Y,pe):ce[Y]=O[Y]);return ce})(w,E)}let r="";function a(w,E){return r||(r=(0,t.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(A){return(0,t.isFunction)(w[A])})),(0,t.isFunction)(w[r])?w[r](E):!1}function l(w,E,A){let D=w;do{if(a(D,E))return!0;if(D===A)return!1;D=D.parentNode}while(D);return!1}function c(w,E,A,D){if(!w)return;const O={capture:!0,...D};w.addEventListener?w.addEventListener(E,A,O):w.attachEvent?w.attachEvent("on"+E,A):w["on"+E]=A}function h(w,E,A,D){if(!w)return;const O={capture:!0,...D};w.removeEventListener?w.removeEventListener(E,A,O):w.detachEvent?w.detachEvent("on"+E,A):w["on"+E]=null}function m(w){let E=w.clientHeight;const A=w.ownerDocument.defaultView.getComputedStyle(w);return E+=(0,t.int)(A.borderTopWidth),E+=(0,t.int)(A.borderBottomWidth),E}function g(w){let E=w.clientWidth;const A=w.ownerDocument.defaultView.getComputedStyle(w);return E+=(0,t.int)(A.borderLeftWidth),E+=(0,t.int)(A.borderRightWidth),E}function y(w){let E=w.clientHeight;const A=w.ownerDocument.defaultView.getComputedStyle(w);return E-=(0,t.int)(A.paddingTop),E-=(0,t.int)(A.paddingBottom),E}function b(w){let E=w.clientWidth;const A=w.ownerDocument.defaultView.getComputedStyle(w);return E-=(0,t.int)(A.paddingLeft),E-=(0,t.int)(A.paddingRight),E}function _(w,E,A){const O=E===E.ownerDocument.body?{left:0,top:0}:E.getBoundingClientRect(),L=(w.clientX+E.scrollLeft-O.left)/A,P=(w.clientY+E.scrollTop-O.top)/A;return{x:L,y:P}}function k(w,E){const A=j(w,E,"px");return{[(0,e.browserPrefixToKey)("transform",e.default)]:A}}function R(w,E){return j(w,E,"")}function j(w,E,A){let{x:D,y:O}=w,L=`translate(${D}${A},${O}${A})`;if(E){const P=`${typeof E.x=="string"?E.x:E.x+A}`,pe=`${typeof E.y=="string"?E.y:E.y+A}`;L=`translate(${P}, ${pe})`+L}return L}function T(w,E){return w.targetTouches&&(0,t.findInArray)(w.targetTouches,A=>E===A.identifier)||w.changedTouches&&(0,t.findInArray)(w.changedTouches,A=>E===A.identifier)}function H(w){if(w.targetTouches&&w.targetTouches[0])return w.targetTouches[0].identifier;if(w.changedTouches&&w.changedTouches[0])return w.changedTouches[0].identifier}function q(w){if(!w)return;let E=w.getElementById("react-draggable-style-el");E||(E=w.createElement("style"),E.type="text/css",E.id="react-draggable-style-el",E.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,E.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,w.getElementsByTagName("head")[0].appendChild(E)),w.body&&B(w.body,"react-draggable-transparent-selection")}function I(w){window.requestAnimationFrame?window.requestAnimationFrame(()=>{z(w)}):z(w)}function z(w){if(w)try{if(w.body&&$(w.body,"react-draggable-transparent-selection"),w.selection)w.selection.empty();else{const E=(w.defaultView||window).getSelection();E&&E.type!=="Caret"&&E.removeAllRanges()}}catch{}}function B(w,E){w.classList?w.classList.add(E):w.className.match(new RegExp(`(?:^|\\s)${E}(?!\\S)`))||(w.className+=` ${E}`)}function $(w,E){w.classList?w.classList.remove(E):w.className=w.className.replace(new RegExp(`(?:^|\\s)${E}(?!\\S)`,"g"),"")}return ln}var Is={},VS;function Ak(){if(VS)return Is;VS=1,Object.defineProperty(Is,"__esModule",{value:!0}),Is.canDragX=a,Is.canDragY=l,Is.createCoreData=h,Is.createDraggableData=m,Is.getBoundPosition=n,Is.getControlPosition=c,Is.snapToGrid=r;var t=yp(),e=q1();function n(b,_,k){if(!b.props.bounds)return[_,k];let{bounds:R}=b.props;R=typeof R=="string"?R:g(R);const j=y(b);if(typeof R=="string"){const{ownerDocument:T}=j,H=T.defaultView;let q;if(R==="parent"?q=j.parentNode:q=j.getRootNode().querySelector(R),!(q instanceof H.HTMLElement))throw new Error('Bounds selector "'+R+'" could not find an element.');const I=q,z=H.getComputedStyle(j),B=H.getComputedStyle(I);R={left:-j.offsetLeft+(0,t.int)(B.paddingLeft)+(0,t.int)(z.marginLeft),top:-j.offsetTop+(0,t.int)(B.paddingTop)+(0,t.int)(z.marginTop),right:(0,e.innerWidth)(I)-(0,e.outerWidth)(j)-j.offsetLeft+(0,t.int)(B.paddingRight)-(0,t.int)(z.marginRight),bottom:(0,e.innerHeight)(I)-(0,e.outerHeight)(j)-j.offsetTop+(0,t.int)(B.paddingBottom)-(0,t.int)(z.marginBottom)}}return(0,t.isNum)(R.right)&&(_=Math.min(_,R.right)),(0,t.isNum)(R.bottom)&&(k=Math.min(k,R.bottom)),(0,t.isNum)(R.left)&&(_=Math.max(_,R.left)),(0,t.isNum)(R.top)&&(k=Math.max(k,R.top)),[_,k]}function r(b,_,k){const R=Math.round(_/b[0])*b[0],j=Math.round(k/b[1])*b[1];return[R,j]}function a(b){return b.props.axis==="both"||b.props.axis==="x"}function l(b){return b.props.axis==="both"||b.props.axis==="y"}function c(b,_,k){const R=typeof _=="number"?(0,e.getTouch)(b,_):null;if(typeof _=="number"&&!R)return null;const j=y(k),T=k.props.offsetParent||j.offsetParent||j.ownerDocument.body;return(0,e.offsetXYFromParent)(R||b,T,k.props.scale)}function h(b,_,k){const R=!(0,t.isNum)(b.lastX),j=y(b);return R?{node:j,deltaX:0,deltaY:0,lastX:_,lastY:k,x:_,y:k}:{node:j,deltaX:_-b.lastX,deltaY:k-b.lastY,lastX:b.lastX,lastY:b.lastY,x:_,y:k}}function m(b,_){const k=b.props.scale;return{node:_.node,x:b.state.x+_.deltaX/k,y:b.state.y+_.deltaY/k,deltaX:_.deltaX/k,deltaY:_.deltaY/k,lastX:b.state.x,lastY:b.state.y}}function g(b){return{left:b.left,top:b.top,right:b.right,bottom:b.bottom}}function y(b){const _=b.findDOMNode();if(!_)throw new Error("<DraggableCore>: Unmounted during event!");return _}return Is}var ju={},_f={},US;function Rk(){if(US)return _f;US=1,Object.defineProperty(_f,"__esModule",{value:!0}),_f.default=t;function t(){}return _f}var zS;function Zz(){if(zS)return ju;zS=1,Object.defineProperty(ju,"__esModule",{value:!0}),ju.default=void 0;var t=m(Da()),e=h(Nk()),n=h(oy()),r=q1(),a=Ak(),l=yp(),c=h(Rk());function h(j){return j&&j.__esModule?j:{default:j}}function m(j,T){if(typeof WeakMap=="function")var H=new WeakMap,q=new WeakMap;return(m=function(I,z){if(!z&&I&&I.__esModule)return I;var B,$,w={__proto__:null,default:I};if(I===null||typeof I!="object"&&typeof I!="function")return w;if(B=z?q:H){if(B.has(I))return B.get(I);B.set(I,w)}for(const E in I)E!=="default"&&{}.hasOwnProperty.call(I,E)&&(($=(B=Object.defineProperty)&&Object.getOwnPropertyDescriptor(I,E))&&($.get||$.set)?B(w,E,$):w[E]=I[E]);return w})(j,T)}function g(j,T,H){return(T=y(T))in j?Object.defineProperty(j,T,{value:H,enumerable:!0,configurable:!0,writable:!0}):j[T]=H,j}function y(j){var T=b(j,"string");return typeof T=="symbol"?T:T+""}function b(j,T){if(typeof j!="object"||!j)return j;var H=j[Symbol.toPrimitive];if(H!==void 0){var q=H.call(j,T);if(typeof q!="object")return q;throw new TypeError("@@toPrimitive must return a primitive value.")}return(T==="string"?String:Number)(j)}const _={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let k=_.mouse,R=class extends t.Component{constructor(){super(...arguments),g(this,"dragging",!1),g(this,"lastX",NaN),g(this,"lastY",NaN),g(this,"touchIdentifier",null),g(this,"mounted",!1),g(this,"handleDragStart",T=>{if(this.props.onMouseDown(T),!this.props.allowAnyClick&&typeof T.button=="number"&&T.button!==0)return!1;const H=this.findDOMNode();if(!H||!H.ownerDocument||!H.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:q}=H;if(this.props.disabled||!(T.target instanceof q.defaultView.Node)||this.props.handle&&!(0,r.matchesSelectorAndParentsTo)(T.target,this.props.handle,H)||this.props.cancel&&(0,r.matchesSelectorAndParentsTo)(T.target,this.props.cancel,H))return;T.type==="touchstart"&&!this.props.allowMobileScroll&&T.preventDefault();const I=(0,r.getTouchIdentifier)(T);this.touchIdentifier=I;const z=(0,a.getControlPosition)(T,I,this);if(z==null)return;const{x:B,y:$}=z,w=(0,a.createCoreData)(this,B,$);(0,c.default)("DraggableCore: handleDragStart: %j",w),(0,c.default)("calling",this.props.onStart),!(this.props.onStart(T,w)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,r.addUserSelectStyles)(q),this.dragging=!0,this.lastX=B,this.lastY=$,(0,r.addEvent)(q,k.move,this.handleDrag),(0,r.addEvent)(q,k.stop,this.handleDragStop))}),g(this,"handleDrag",T=>{const H=(0,a.getControlPosition)(T,this.touchIdentifier,this);if(H==null)return;let{x:q,y:I}=H;if(Array.isArray(this.props.grid)){let $=q-this.lastX,w=I-this.lastY;if([$,w]=(0,a.snapToGrid)(this.props.grid,$,w),!$&&!w)return;q=this.lastX+$,I=this.lastY+w}const z=(0,a.createCoreData)(this,q,I);if((0,c.default)("DraggableCore: handleDrag: %j",z),this.props.onDrag(T,z)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const w=document.createEvent("MouseEvents");w.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(w)}return}this.lastX=q,this.lastY=I}),g(this,"handleDragStop",T=>{if(!this.dragging)return;const H=(0,a.getControlPosition)(T,this.touchIdentifier,this);if(H==null)return;let{x:q,y:I}=H;if(Array.isArray(this.props.grid)){let w=q-this.lastX||0,E=I-this.lastY||0;[w,E]=(0,a.snapToGrid)(this.props.grid,w,E),q=this.lastX+w,I=this.lastY+E}const z=(0,a.createCoreData)(this,q,I);if(this.props.onStop(T,z)===!1||this.mounted===!1)return!1;const $=this.findDOMNode();$&&this.props.enableUserSelectHack&&(0,r.scheduleRemoveUserSelectStyles)($.ownerDocument),(0,c.default)("DraggableCore: handleDragStop: %j",z),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,$&&((0,c.default)("DraggableCore: Removing handlers"),(0,r.removeEvent)($.ownerDocument,k.move,this.handleDrag),(0,r.removeEvent)($.ownerDocument,k.stop,this.handleDragStop))}),g(this,"onMouseDown",T=>(k=_.mouse,this.handleDragStart(T))),g(this,"onMouseUp",T=>(k=_.mouse,this.handleDragStop(T))),g(this,"onTouchStart",T=>(k=_.touch,this.handleDragStart(T))),g(this,"onTouchEnd",T=>(k=_.touch,this.handleDragStop(T)))}componentDidMount(){this.mounted=!0;const T=this.findDOMNode();T&&(0,r.addEvent)(T,_.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const T=this.findDOMNode();if(T){const{ownerDocument:H}=T;(0,r.removeEvent)(H,_.mouse.move,this.handleDrag),(0,r.removeEvent)(H,_.touch.move,this.handleDrag),(0,r.removeEvent)(H,_.mouse.stop,this.handleDragStop),(0,r.removeEvent)(H,_.touch.stop,this.handleDragStop),(0,r.removeEvent)(T,_.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,r.scheduleRemoveUserSelectStyles)(H)}}findDOMNode(){return this.props?.nodeRef?this.props?.nodeRef?.current:n.default.findDOMNode(this)}render(){return t.cloneElement(t.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};return ju.default=R,g(R,"displayName","DraggableCore"),g(R,"propTypes",{allowAnyClick:e.default.bool,allowMobileScroll:e.default.bool,children:e.default.node.isRequired,disabled:e.default.bool,enableUserSelectHack:e.default.bool,offsetParent:function(j,T){if(j[T]&&j[T].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:e.default.arrayOf(e.default.number),handle:e.default.string,cancel:e.default.string,nodeRef:e.default.object,onStart:e.default.func,onDrag:e.default.func,onStop:e.default.func,onMouseDown:e.default.func,scale:e.default.number,className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),g(R,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),ju}var BS;function eB(){return BS||(BS=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return m.default}}),t.default=void 0;var e=b(Da()),n=y(Nk()),r=y(oy()),a=Wz(),l=q1(),c=Ak(),h=yp(),m=y(Zz()),g=y(Rk());function y(H){return H&&H.__esModule?H:{default:H}}function b(H,q){if(typeof WeakMap=="function")var I=new WeakMap,z=new WeakMap;return(b=function(B,$){if(!$&&B&&B.__esModule)return B;var w,E,A={__proto__:null,default:B};if(B===null||typeof B!="object"&&typeof B!="function")return A;if(w=$?z:I){if(w.has(B))return w.get(B);w.set(B,A)}for(const D in B)D!=="default"&&{}.hasOwnProperty.call(B,D)&&((E=(w=Object.defineProperty)&&Object.getOwnPropertyDescriptor(B,D))&&(E.get||E.set)?w(A,D,E):A[D]=B[D]);return A})(H,q)}function _(){return _=Object.assign?Object.assign.bind():function(H){for(var q=1;q<arguments.length;q++){var I=arguments[q];for(var z in I)({}).hasOwnProperty.call(I,z)&&(H[z]=I[z])}return H},_.apply(null,arguments)}function k(H,q,I){return(q=R(q))in H?Object.defineProperty(H,q,{value:I,enumerable:!0,configurable:!0,writable:!0}):H[q]=I,H}function R(H){var q=j(H,"string");return typeof q=="symbol"?q:q+""}function j(H,q){if(typeof H!="object"||!H)return H;var I=H[Symbol.toPrimitive];if(I!==void 0){var z=I.call(H,q);if(typeof z!="object")return z;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(H)}class T extends e.Component{static getDerivedStateFromProps(q,I){let{position:z}=q,{prevPropsPosition:B}=I;return z&&(!B||z.x!==B.x||z.y!==B.y)?((0,g.default)("Draggable: getDerivedStateFromProps %j",{position:z,prevPropsPosition:B}),{x:z.x,y:z.y,prevPropsPosition:{...z}}):null}constructor(q){super(q),k(this,"onDragStart",(I,z)=>{if((0,g.default)("Draggable: onDragStart: %j",z),this.props.onStart(I,(0,c.createDraggableData)(this,z))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),k(this,"onDrag",(I,z)=>{if(!this.state.dragging)return!1;(0,g.default)("Draggable: onDrag: %j",z);const B=(0,c.createDraggableData)(this,z),$={x:B.x,y:B.y,slackX:0,slackY:0};if(this.props.bounds){const{x:E,y:A}=$;$.x+=this.state.slackX,$.y+=this.state.slackY;const[D,O]=(0,c.getBoundPosition)(this,$.x,$.y);$.x=D,$.y=O,$.slackX=this.state.slackX+(E-$.x),$.slackY=this.state.slackY+(A-$.y),B.x=$.x,B.y=$.y,B.deltaX=$.x-this.state.x,B.deltaY=$.y-this.state.y}if(this.props.onDrag(I,B)===!1)return!1;this.setState($)}),k(this,"onDragStop",(I,z)=>{if(!this.state.dragging||this.props.onStop(I,(0,c.createDraggableData)(this,z))===!1)return!1;(0,g.default)("Draggable: onDragStop: %j",z);const $={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:E,y:A}=this.props.position;$.x=E,$.y=A}this.setState($)}),this.state={dragging:!1,dragged:!1,x:q.position?q.position.x:q.defaultPosition.x,y:q.position?q.position.y:q.defaultPosition.y,prevPropsPosition:{...q.position},slackX:0,slackY:0,isElementSVG:!1},q.position&&!(q.onDrag||q.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){return this.props?.nodeRef?.current??r.default.findDOMNode(this)}render(){const{axis:q,bounds:I,children:z,defaultPosition:B,defaultClassName:$,defaultClassNameDragging:w,defaultClassNameDragged:E,position:A,positionOffset:D,scale:O,...L}=this.props;let P={},pe=null;const Y=!!!A||this.state.dragging,Z=A||B,J={x:(0,c.canDragX)(this)&&Y?this.state.x:Z.x,y:(0,c.canDragY)(this)&&Y?this.state.y:Z.y};this.state.isElementSVG?pe=(0,l.createSVGTransform)(J,D):P=(0,l.createCSSTransform)(J,D);const Te=(0,a.clsx)(z.props.className||"",$,{[w]:this.state.dragging,[E]:this.state.dragged});return e.createElement(m.default,_({},L,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(z),{className:Te,style:{...z.props.style,...P},transform:pe}))}}t.default=T,k(T,"displayName","Draggable"),k(T,"propTypes",{...m.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:h.dontSetMe,style:h.dontSetMe,transform:h.dontSetMe}),k(T,"defaultProps",{...m.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(Z0)),Z0}var FS;function tB(){if(FS)return Ru.exports;FS=1;const{default:t,DraggableCore:e}=eB();return Ru.exports=t,Ru.exports.default=t,Ru.exports.DraggableCore=e,Ru.exports}var nB=tB();const jk=dd(nB);var mc;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(mc||(mc={}));class rv extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const rB=t=>{var e,n;return t?.androidBridge?"android":!((n=(e=t?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},sB=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},a=()=>e!==null?e.name:rB(t),l=()=>a()!=="web",c=b=>{const _=g.get(b);return!!(_?.platforms.has(a())||h(b))},h=b=>{var _;return(_=n.PluginHeaders)===null||_===void 0?void 0:_.find(k=>k.name===b)},m=b=>t.console.error(b),g=new Map,y=(b,_={})=>{const k=g.get(b);if(k)return console.warn(`Capacitor plugin "${b}" already registered. Cannot register plugins twice.`),k.proxy;const R=a(),j=h(b);let T;const H=async()=>(!T&&R in _?T=typeof _[R]=="function"?T=await _[R]():T=_[R]:e!==null&&!T&&"web"in _&&(T=typeof _.web=="function"?T=await _.web():T=_.web),T),q=(E,A)=>{var D,O;if(j){const L=j?.methods.find(P=>A===P.name);if(L)return L.rtype==="promise"?P=>n.nativePromise(b,A.toString(),P):(P,pe)=>n.nativeCallback(b,A.toString(),P,pe);if(E)return(D=E[A])===null||D===void 0?void 0:D.bind(E)}else{if(E)return(O=E[A])===null||O===void 0?void 0:O.bind(E);throw new rv(`"${b}" plugin is not implemented on ${R}`,mc.Unimplemented)}},I=E=>{let A;const D=(...O)=>{const L=H().then(P=>{const pe=q(P,E);if(pe){const ce=pe(...O);return A=ce?.remove,ce}else throw new rv(`"${b}.${E}()" is not implemented on ${R}`,mc.Unimplemented)});return E==="addListener"&&(L.remove=async()=>A()),L};return D.toString=()=>`${E.toString()}() { [capacitor code] }`,Object.defineProperty(D,"name",{value:E,writable:!1,configurable:!1}),D},z=I("addListener"),B=I("removeListener"),$=(E,A)=>{const D=z({eventName:E},A),O=async()=>{const P=await D;B({eventName:E,callbackId:P},A)},L=new Promise(P=>D.then(()=>P({remove:O})));return L.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await O()},L},w=new Proxy({},{get(E,A){switch(A){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return j?$:z;case"removeListener":return B;default:return I(A)}}});return r[b]=w,g.set(b,{name:b,proxy:w,platforms:new Set([...Object.keys(_),...j?[R]:[]])}),w};return n.convertFileSrc||(n.convertFileSrc=b=>b),n.getPlatform=a,n.handleError=m,n.isNativePlatform=l,n.isPluginAvailable=c,n.registerPlugin=y,n.Exception=rv,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},iB=t=>t.Capacitor=sB(t),pc=iB(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),bp=pc.registerPlugin;class G1{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const l=this.windowListeners[e];l&&!l.registered&&this.addWindowListener(l),r&&this.sendRetainedArgumentsForEvent(e);const c=async()=>this.removeListener(e,n);return Promise.resolve({remove:c})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const a=this.listeners[e];if(!a){if(r){let l=this.retainedEventArguments[e];l||(l=[]),l.push(n),this.retainedEventArguments[e]=l}return}a.forEach(l=>l(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new pc.Exception(e,mc.Unimplemented)}unavailable(e="not available"){return new pc.Exception(e,mc.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const a=r.indexOf(n);this.listeners[e].splice(a,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const HS=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),$S=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class aB extends G1{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[a,l]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=$S(a).trim(),l=$S(l).trim(),n[a]=l}),n}async setCookie(e){try{const n=HS(e.key),r=HS(e.value),a=`; expires=${(e.expires||"").replace("expires=","")}`,l=(e.path||"/").replace("path=",""),c=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${a}; path=${l}; ${c};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}bp("CapacitorCookies",{web:()=>new aB});const oB=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const a=r.result;e(a.indexOf(",")>=0?a.split(",")[1]:a)},r.onerror=a=>n(a),r.readAsDataURL(t)}),lB=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(a=>a.toLocaleLowerCase()).reduce((a,l,c)=>(a[l]=t[e[c]],a),{})},cB=(t,e=!0)=>t?Object.entries(t).reduce((r,a)=>{const[l,c]=a;let h,m;return Array.isArray(c)?(m="",c.forEach(g=>{h=e?encodeURIComponent(g):g,m+=`${l}=${h}&`}),m.slice(0,-1)):(h=e?encodeURIComponent(c):c,m=`${l}=${h}`),`${r}&${m}`},"").substr(1):null,uB=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),a=lB(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(a.includes("application/x-www-form-urlencoded")){const l=new URLSearchParams;for(const[c,h]of Object.entries(t.data||{}))l.set(c,h);n.body=l.toString()}else if(a.includes("multipart/form-data")||t.data instanceof FormData){const l=new FormData;if(t.data instanceof FormData)t.data.forEach((h,m)=>{l.append(m,h)});else for(const h of Object.keys(t.data))l.append(h,t.data[h]);n.body=l;const c=new Headers(n.headers);c.delete("content-type"),n.headers=c}else(a.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class dB extends G1{async request(e){const n=uB(e,e.webFetchExtra),r=cB(e.params,e.shouldEncodeUrlParams),a=r?`${e.url}?${r}`:e.url,l=await fetch(a,n),c=l.headers.get("content-type")||"";let{responseType:h="text"}=l.ok?e:{};c.includes("application/json")&&(h="json");let m,g;switch(h){case"arraybuffer":case"blob":g=await l.blob(),m=await oB(g);break;case"json":m=await l.json();break;case"document":case"text":default:m=await l.text()}const y={};return l.headers.forEach((b,_)=>{y[_]=b}),{data:m,headers:y,status:l.status,url:l.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}bp("CapacitorHttp",{web:()=>new dB});var qS;(function(t){t.Dark="DARK",t.Light="LIGHT",t.Default="DEFAULT"})(qS||(qS={}));var GS;(function(t){t.StatusBar="StatusBar",t.NavigationBar="NavigationBar"})(GS||(GS={}));class hB extends G1{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}bp("SystemBars",{web:()=>new hB});const fB=()=>{const{callStatus:t,incomingCall:e,outgoingCallUser:n,answerCall:r,endCall:a,localStream:l,remoteStream:c,toggleAudio:h,toggleVideo:m,isMuted:g,isVideoOff:y,activeCall:b,isScreenSharing:_,toggleScreenShare:k,availableDevices:R,selectedMicId:j,selectedCameraId:T,setSelectedMicId:H,setSelectedCameraId:q,playSound:I,customSounds:z,addSound:B,removeSound:$}=kd(),w=N.useRef(null),E=N.useRef(null),A=N.useRef(null),[D,O]=N.useState(!1),[L,P]=N.useState(!1),[pe,ce]=N.useState(100),[Y,Z]=N.useState(!1),[J,Te]=N.useState(!1),[Ae,F]=N.useState(!1),[W,ae]=N.useState(!1),[ge,Re]=N.useState(!1),{userProfile:_e}=Cn(),{role:Ne}=Cn(),Ke=_e?.roles?.includes("premium")||_e?.roles?.includes("admin")||_e?.plan==="premium"||_e?.badges?.includes("premium"),Ge=V3(_e,_i.SCREEN_SHARE),he=N.useRef(null),Ce=async xe=>{const ze=xe.target.files[0];if(!ze)return;const Se=ze.name.split(".")[0].slice(0,10);await B(Se,ze),he.current&&(he.current.value="")},[Ve,oe]=N.useState(!1);return N.useEffect(()=>{w.current&&l&&(w.current.srcObject=l)},[l,t]),N.useEffect(()=>{E.current&&c&&(E.current.srcObject=c)},[c,t]),N.useEffect(()=>{if(c){const xe=c.getVideoTracks()[0];if(xe){const ze=!xe.muted&&xe.readyState==="live";oe(ze);const Se=()=>oe(!1),ue=()=>oe(!0),U=()=>oe(!1);return xe.addEventListener("mute",Se),xe.addEventListener("unmute",ue),xe.addEventListener("ended",U),()=>{xe.removeEventListener("mute",Se),xe.removeEventListener("unmute",ue),xe.removeEventListener("ended",U)}}else oe(!1)}else oe(!1)},[c]),N.useEffect(()=>{E.current&&(E.current.volume=pe/100)},[pe,c]),N.useEffect(()=>{t==="idle"&&(O(!1),Re(!1),Te(!1),ae(!1),Z(!1),F(!1))},[t]),t==="idle"?null:t==="incoming"?u.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in",role:"dialog","aria-modal":"true",children:u.jsxs("div",{className:"bg-dark-sidebar p-6 rounded-2xl shadow-2xl w-80 text-center border border-dark-hover",children:[u.jsxs("div",{className:"w-24 h-24 mx-auto mb-4 relative",children:[e?.callerPhotoUrl?u.jsx("img",{src:e.callerPhotoUrl,alt:"Caller",className:"w-full h-full rounded-full object-cover border-4 border-dark-bg"}):u.jsx("div",{className:"w-full h-full rounded-full bg-brand-primary flex items-center justify-center text-3xl font-bold text-white border-4 border-dark-bg",children:e?.callerName?.[0]?.toUpperCase()}),u.jsx("div",{className:"absolute -bottom-1 -right-1 bg-green-500 rounded-full p-2 animate-bounce",children:u.jsx(bw,{size:16,className:"text-white"})})]}),u.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:e?.callerName}),u.jsxs("p",{className:"text-dark-muted mb-6",children:["Incoming ",e?.type," call..."]}),u.jsxs("div",{className:"flex gap-4 justify-center",children:[u.jsx("button",{onClick:()=>a(!0),className:"w-12 h-12 rounded-full bg-red-500 flex items-center justify-center text-white hover:bg-red-600 transition-colors",children:u.jsx(L0,{size:24})}),u.jsx("button",{onClick:r,className:"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center text-white hover:bg-green-600 transition-colors",children:u.jsx(bw,{size:20})})]})]})}):u.jsx(jk,{nodeRef:A,disabled:!D,bounds:"body",onStart:()=>P(!0),onStop:()=>P(!1),children:u.jsxs("div",{role:"dialog","aria-modal":"true",ref:A,style:D?void 0:{transform:"none !important"},className:At("fixed z-[100] bg-gray-900 shadow-2xl overflow-hidden border border-gray-700 group",!L&&"transition-all duration-300",D?"bottom-4 right-4 w-64 h-48 rounded-lg cursor-move":"inset-0 flex flex-col !transform-none"),children:[u.jsxs("div",{className:At("absolute top-0 left-0 right-0 p-4 z-50 flex justify-between items-start bg-gradient-to-b from-black/80 to-transparent transition-opacity duration-200 opacity-100"),children:[u.jsx("div",{className:"flex gap-2",children:u.jsxs("div",{className:"bg-black/40 backdrop-blur px-3 py-1 rounded-full flex items-center gap-2",children:[u.jsx("span",{className:At("w-2 h-2 rounded-full",b?"bg-green-500":"bg-yellow-500 animate-pulse")}),u.jsx("span",{className:"text-xs text-white font-medium",children:b?"Connected":"Calling..."})]})}),u.jsx("button",{onClick:()=>O(!D),className:"p-2 rounded-full bg-black/40 hover:bg-white/10 text-white backdrop-blur transition-colors",title:D?"Maximize":"Minimize",children:D?u.jsx(Y7,{size:20}):u.jsx(G7,{size:20})})]}),u.jsxs("div",{className:"relative flex-1 bg-black flex items-center justify-center w-full h-full",children:[u.jsx("video",{ref:E,autoPlay:!0,playsInline:!0,className:At("w-full h-full object-contain",(!c||!Ve)&&"hidden")}),(!c||!Ve)&&u.jsxs("div",{className:"text-center absolute inset-0 flex flex-col items-center justify-center z-10",children:[u.jsx("div",{className:"w-32 h-32 mx-auto mb-4 rounded-full bg-gray-800 flex items-center justify-center text-6xl font-bold text-gray-500 animate-pulse",children:n?.displayName?.[0]||b?.metadata?.name?.[0]||"?"}),u.jsx("p",{className:"text-xl text-white font-medium",children:t==="outgoing"?"Calling...":t==="connected"?"No Video / Audio Only":"Connecting..."}),u.jsx("p",{className:"text-gray-400 text-sm mt-1",children:n?.displayName})]}),!D&&l&&u.jsx(mB,{})]}),u.jsxs("div",{className:At("absolute bottom-4 md:bottom-8 left-1/2 -translate-x-1/2 z-50 flex flex-wrap justify-center items-center gap-2 md:gap-4 p-2 md:p-3 bg-gray-900/80 backdrop-blur-md rounded-xl md:rounded-2xl border border-gray-700 shadow-xl transition-opacity duration-300 hover:opacity-100 w-[95%] md:w-auto max-w-screen-sm",D&&"hidden"),children:[u.jsx("button",{onClick:h,className:At("p-3 rounded-xl transition-all hover:scale-110 active:scale-95",g?"bg-red-500/20 text-red-500":"bg-gray-700/50 text-white hover:bg-gray-600"),title:g?"Unmute":"Mute",children:g?u.jsx(Dv,{size:22}):u.jsx(Mv,{size:22})}),u.jsx("button",{onClick:m,className:At("p-3 rounded-xl transition-all hover:scale-110 active:scale-95",y?"bg-red-500/20 text-red-500":"bg-gray-700/50 text-white hover:bg-gray-600"),title:y?"Turn Video On":"Turn Video Off",children:y?u.jsx(Pv,{size:22}):u.jsx(nd,{size:22})}),!pc.isNativePlatform()&&u.jsxs("div",{className:"relative",onMouseEnter:()=>F(!0),onMouseLeave:()=>F(!1),children:[u.jsx("button",{onClick:()=>{_?k():ae(!0)},disabled:!b||!Ge,className:At("p-3 rounded-xl transition-all hover:scale-110 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",_?"bg-green-500 text-white":Ge?"bg-gray-700/50 text-white hover:bg-gray-600":"bg-gray-800 text-gray-500 cursor-not-allowed"),title:Ge?_?"Stop Sharing":"Share Screen":void 0,children:_?u.jsx(D7,{size:22}):u.jsx(vm,{size:22})}),!Ge&&u.jsxs("div",{className:At("absolute bottom-full mb-2 left-1/2 -translate-x-1/2 px-2 py-1 bg-black text-rose-500 text-xs font-bold rounded shadow-lg whitespace-nowrap transition-opacity pointer-events-none z-50",Ae?"opacity-100":"opacity-0"),children:["Requires Premium ",u.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-black"})]})]}),u.jsx("div",{className:"w-px h-8 bg-gray-700 mx-2"}),u.jsxs("div",{className:"relative",children:[u.jsx("button",{onClick:()=>Z(!Y),onDoubleClick:()=>ce(pe>0?0:100),className:At("p-3 rounded-xl transition-all hover:scale-110 active:scale-95",pe===0?"bg-red-500/20 text-red-500":"bg-gray-700/50 text-white hover:bg-gray-600"),title:`Volume: ${pe}% (click to show slider, double-click to mute)`,children:pe===0?u.jsx(ow,{size:22}):pe<50?u.jsx(A7,{size:22}):u.jsx(lw,{size:22})}),Y&&u.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-3 p-3 bg-gray-900/95 backdrop-blur-md rounded-xl border border-gray-700 shadow-xl",children:u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsxs("span",{className:"text-xs text-gray-400 font-medium",children:[pe,"%"]}),u.jsx("input",{type:"range",min:"0",max:"100",value:pe,onChange:xe=>ce(Number(xe.target.value)),className:`w-24 h-2 appearance-none bg-gray-700 rounded-full cursor-pointer accent-brand-primary
                     [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 
                     [&::-webkit-slider-thumb]:bg-brand-primary [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer
                     [&::-webkit-slider-thumb]:shadow-lg [&::-webkit-slider-thumb]:hover:scale-110 [&::-webkit-slider-thumb]:transition-transform`,style:{background:`linear-gradient(to right, rgb(88, 101, 242) ${pe}%, rgb(55, 65, 81) ${pe}%)`}}),u.jsx("span",{className:"text-[10px] text-gray-500",children:"Remote Volume"})]})})]}),u.jsxs("div",{className:"relative",children:[u.jsx("button",{onClick:()=>Re(!ge),className:At("p-3 rounded-xl transition-all hover:scale-110 active:scale-95",ge?"bg-brand-primary/20 text-brand-primary":"bg-gray-700/50 text-white hover:bg-gray-600"),title:"Soundboard",children:u.jsx(ym,{size:22})}),ge&&u.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-3 w-64 bg-gray-900/95 backdrop-blur-md border border-gray-700 rounded-xl shadow-2xl p-4 animate-fade-in-up z-50",children:[u.jsxs("h4",{className:"text-white text-sm font-semibold mb-3 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(ym,{className:"text-brand-primary"}),"Soundboard"]}),u.jsxs("span",{className:"text-[10px] text-gray-400",children:[z.length,"/10"]})]}),u.jsxs("div",{className:"flex flex-col gap-1 mb-3 max-h-48 overflow-y-auto custom-scrollbar",children:[z.length===0&&u.jsx("div",{className:"text-center text-gray-500 text-xs py-4 italic",children:"No sounds added yet."}),z.map(xe=>u.jsxs("div",{className:"relative group flex items-center gap-2",children:[u.jsxs("button",{onClick:()=>{Ke&&I(xe.id)},className:"flex-1 bg-gray-800 hover:bg-gray-700 text-white text-xs py-2 px-3 rounded-lg transition-colors border border-gray-700 hover:border-brand-primary flex items-center gap-3 active:scale-95",children:[u.jsx("span",{className:"text-sm",children:""}),u.jsx("span",{className:"text-xs font-medium truncate flex-1 text-left",children:xe.name})]}),u.jsx("button",{onClick:ze=>{ze.stopPropagation(),$(xe.id)},className:"bg-red-500/10 hover:bg-red-500 text-red-500 hover:text-white rounded-lg p-2 transition-colors opacity-0 group-hover:opacity-100",title:"Remove sound",children:u.jsx(Ei,{size:14})})]},xe.id))]}),z.length<10&&u.jsxs("button",{onClick:()=>he.current?.click(),className:"w-full py-2 border border-dashed border-gray-600 text-gray-400 rounded-lg hover:border-brand-primary hover:text-brand-primary transition-colors flex items-center justify-center gap-2 text-xs",children:[u.jsx(wo,{size:14})," Add Sound (MP3/WAV)"]}),u.jsx("input",{type:"file",ref:he,className:"hidden",accept:"audio/mp3,audio/wav,audio/mpeg",onChange:Ce}),!Ke&&u.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center rounded-xl p-4 text-center",children:u.jsxs("div",{children:[u.jsx("p",{className:"text-brand-primary font-bold mb-1",children:"Premium Only"}),u.jsx("p",{className:"text-white text-xs",children:"Unlock Soundboard with Premium!"})]})})]})]}),u.jsxs("div",{className:"relative",children:[u.jsx("button",{onClick:()=>Te(!J),className:At("p-3 rounded-xl transition-all hover:scale-110 active:scale-95",J?"bg-brand-primary/20 text-brand-primary":"bg-gray-700/50 text-white hover:bg-gray-600"),title:"Audio/Video Settings",children:u.jsx(rp,{size:22})}),J&&u.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-3 p-4 bg-gray-900/95 backdrop-blur-md rounded-xl border border-gray-700 shadow-xl w-64",children:u.jsxs("div",{className:"space-y-4",children:[u.jsx("h4",{className:"text-sm font-semibold text-white mb-3",children:"Device Settings"}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Microphone"}),u.jsx("select",{value:j,onChange:xe=>H(xe.target.value),className:"w-full bg-gray-800 text-white text-sm rounded-lg px-3 py-2 border border-gray-700 focus:border-brand-primary outline-none cursor-pointer",children:R.audioInputs.map(xe=>u.jsx("option",{value:xe.deviceId,children:xe.label||`Microphone ${xe.deviceId.slice(0,8)}...`},xe.deviceId))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Camera"}),u.jsx("select",{value:T,onChange:xe=>q(xe.target.value),className:"w-full bg-gray-800 text-white text-sm rounded-lg px-3 py-2 border border-gray-700 focus:border-brand-primary outline-none cursor-pointer",children:R.videoInputs.map(xe=>u.jsx("option",{value:xe.deviceId,children:xe.label||`Camera ${xe.deviceId.slice(0,8)}...`},xe.deviceId))})]}),u.jsx("p",{className:"text-[10px] text-gray-500 mt-2",children:"Changes apply on next call"})]})})]}),u.jsx("div",{className:"w-px h-8 bg-gray-700 mx-2"}),u.jsx("button",{onClick:()=>a(!0),className:"p-3 rounded-xl bg-red-600 text-white hover:bg-red-700 transition-all hover:scale-110 active:scale-95 shadow-lg shadow-red-900/20",title:"End Call",children:u.jsx(L0,{size:24})})]}),D&&u.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 flex justify-center gap-2 bg-gradient-to-t from-black/90 to-transparent opacity-0 group-hover:opacity-100 transition-opacity z-50",children:[u.jsx("button",{onMouseDown:xe=>xe.stopPropagation(),onClick:h,className:At("p-1.5 rounded-full text-white hover:bg-white/20",g&&"bg-red-500/50 text-red-100"),title:"Mute",children:g?u.jsx(Dv,{size:16}):u.jsx(Mv,{size:16})}),u.jsx("button",{onMouseDown:xe=>xe.stopPropagation(),onClick:m,className:At("p-1.5 rounded-full text-white hover:bg-white/20",y&&"bg-red-500/50 text-red-100"),title:"Camera",children:y?u.jsx(Pv,{size:16}):u.jsx(nd,{size:16})}),u.jsx("button",{onMouseDown:xe=>xe.stopPropagation(),onClick:()=>ce(pe===0?100:0),className:At("p-1.5 rounded-full text-white hover:bg-white/20",pe===0&&"bg-red-500/50 text-red-100"),title:"Volume Toggle",children:pe===0?u.jsx(ow,{size:16}):u.jsx(lw,{size:16})}),u.jsx("button",{onMouseDown:xe=>xe.stopPropagation(),onClick:()=>a(!0),className:"p-1.5 rounded-full bg-red-600/80 text-white hover:bg-red-600",title:"End Call",children:u.jsx(L0,{size:16})})]}),J&&u.jsx(Kz,{isOpen:J,onClose:()=>Te(!1)}),u.jsx($3,{isOpen:W,onClose:()=>ae(!1),onConfirm:xe=>k(xe)})]})})},mB=()=>{const t=N.useRef(null),{localStream:e,isMuted:n,isVideoOff:r}=kd(),a=N.useRef(null);return N.useEffect(()=>{a.current&&e&&(a.current.srcObject=e)},[e]),u.jsx(jk,{bounds:"parent",nodeRef:t,children:u.jsxs("div",{ref:t,className:"absolute bottom-24 right-4 w-48 h-36 bg-gray-800 rounded-lg overflow-hidden shadow-lg border border-gray-700 cursor-move hover:scale-105 transition-transform z-50",children:[u.jsx("video",{ref:a,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),u.jsxs("div",{className:"absolute bottom-2 left-2 flex gap-1",children:[n&&u.jsx("div",{className:"bg-red-500/80 p-1 rounded",children:u.jsx(Dv,{size:12,className:"text-white"})}),r&&u.jsx("div",{className:"bg-red-500/80 p-1 rounded",children:u.jsx(Pv,{size:12,className:"text-white"})})]})]})})},pB=()=>{const{currentUser:t,logout:e,resendVerification:n}=Cn(),[r,a]=N.useState(!1),[l,c]=N.useState(""),h=async()=>{a(!0);try{await n(),c("Verification email sent! Check your inbox.")}catch(g){c("Error sending email: "+g.message)}finally{a(!1)}},m=async()=>{a(!0);try{await t.reload(),t.emailVerified?window.location.reload():c("Email is not verified yet. Please check your inbox.")}catch(g){console.error(g)}finally{a(!1)}};return u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-bg p-4",children:u.jsxs("div",{className:"w-full max-w-md bg-dark-sidebar rounded-lg shadow-2xl p-8 text-center space-y-6",children:[u.jsx("div",{className:"bg-brand-primary/10 w-16 h-16 rounded-full flex items-center justify-center mx-auto text-3xl",children:""}),u.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Verify Your Email"}),u.jsxs("p",{className:"text-dark-muted",children:["We've sent a verification email to ",u.jsx("br",{}),u.jsx("span",{className:"font-semibold text-white",children:t?.email})]}),u.jsxs("div",{className:"bg-yellow-500/10 text-yellow-500 p-3 rounded-md text-sm",children:[" Please check your ",u.jsx("b",{children:"Spam/Junk"})," folder if you don't see the email in your inbox."]}),u.jsx("p",{className:"text-sm text-dark-muted",children:"You must verify your email address to access Lumo. To prevent spam, unverified accounts are restricted."}),l&&u.jsx("div",{className:"p-3 bg-brand-primary/20 text-brand-primary rounded-md text-sm",children:l}),u.jsxs("div",{className:"space-y-3 pt-4",children:[u.jsx(Ze,{onClick:m,className:"w-full",disabled:r,children:"I've Verified My Email"}),u.jsx(Ze,{onClick:h,variant:"secondary",className:"w-full",disabled:r,children:"Resend Verification Email"}),u.jsx("button",{onClick:e,className:"text-sm text-dark-muted hover:text-dark-text underline mt-4",children:"Logout"})]})]})})},gB=({dmId:t,dms:e})=>{const{currentUser:n,userProfile:r}=Cn(),{users:a}=La(),{startCall:l}=kd(),[c,h]=N.useState(null),[m,g]=N.useState(null),[y,b]=N.useState([]),_=e.find(j=>j.id===t),k=_?.participants.find(j=>j!==n?.uid);N.useEffect(()=>{(async()=>{if(k)try{const T=await tp(Me(ye,"users",k));T.exists()&&h({id:T.id,...T.data()})}catch(T){console.error("Error fetching DM user:",T)}})()},[k]);const R=N.useMemo(()=>[{id:n.uid,displayName:n.displayName||r?.displayName||"User",photoUrl:n.photoURL||r?.photoUrl,role:r?.role},c].filter(Boolean),[n,r,c]);return _?u.jsxs("div",{className:"flex-1 flex flex-col h-full bg-dark-bg",children:[u.jsxs("div",{className:"h-12 px-4 flex items-center justify-between border-b border-dark-hover shadow-sm bg-dark-bg",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"relative",children:c?.photoUrl?u.jsx("img",{src:c.photoUrl,alt:c.displayName,className:"w-8 h-8 rounded-full object-cover"}):u.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white text-sm font-bold",children:c?.displayName?.[0]?.toUpperCase()||"?"})}),u.jsx("span",{className:"font-semibold text-dark-text",children:c?.displayName||"Loading..."})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:()=>l(c,"voice"),className:"text-dark-muted hover:text-dark-text transition-colors p-1 rounded hover:bg-dark-hover",title:"Start Voice Call",disabled:!c,children:u.jsx(R7,{size:22})}),u.jsx("button",{onClick:()=>l(c,"video"),className:"text-dark-muted hover:text-dark-text transition-colors p-1 rounded hover:bg-dark-hover",title:"Start Video Call",disabled:!c,children:u.jsx(nd,{size:22})}),u.jsx("div",{className:"w-px h-6 bg-dark-hover mx-1"}),u.jsx(kk,{messages:y,users:R,onResultClick:j=>document.getElementById(`message-${j.id}`)?.scrollIntoView({behavior:"smooth",block:"center"})})]})]}),u.jsx(W3,{serverId:null,channelId:t,users:R,currentUserId:n?.uid,userRole:r?.role,onReply:g,onMessagesChange:b}),u.jsx(Tk,{serverId:null,channelId:t,channel:{id:t,name:c?.displayName},userId:n?.uid,userProfile:r,userRole:r?.role,users:R,replyingTo:m,onCancelReply:()=>g(null)})]}):u.jsx("div",{className:"flex-1 flex items-center justify-center text-dark-muted",children:"Select a conversation"})},vB="lumo",yB="1.9.5",bB="module",xB="electron/main.cjs",_B={dev:"vite",build:"vite build",lint:"eslint .",preview:"vite preview",predeploy:"npm run build",deploy:"gh-pages -d dist","electron:dev":'concurrently -k "npm run dev" "wait-on tcp:3000 && electron ."',"electron:build":"vite build && electron-builder","build:electron":"npm run electron:build"},wB={"@capacitor-community/safe-area":"^7.0.0-beta.8","@capacitor/android":"^8.0.0","@capacitor/cli":"^8.0.0","@capacitor/core":"^8.0.0","@capacitor/push-notifications":"^8.0.0","@capacitor/status-bar":"^8.0.0","@giphy/js-fetch-api":"^5.7.0","@giphy/react-components":"^10.1.0",clsx:"^2.1.1","date-fns":"^4.1.0","electron-log":"^5.4.3","electron-updater":"^6.6.2","emoji-picker-react":"^4.16.1",firebase:"^12.6.0",peerjs:"^1.5.5",react:"^19.2.3","react-color":"^2.19.3","react-dom":"^19.2.3","react-draggable":"^4.5.0","react-icons":"^5.5.0","react-router-dom":"^7.10.0","simple-peer":"^9.11.1","tailwind-merge":"^3.4.0"},SB="Lumo - Modern Chat Application",EB="Hasan",CB={appId:"com.hasan.lumoapp",productName:"Lumo",files:["dist/**/*","electron/**/*","public/**/*"],directories:{output:"dist"},win:{target:"nsis",icon:"public/lumo-logo.png",artifactName:"LumoSetup_win-${version}.${ext}"},mac:{target:"dmg",icon:"public/lumo-logo.png",category:"public.app-category.social-networking",extendInfo:{NSCameraUsageDescription:"Lumo needs access to your camera for video calls.",NSMicrophoneUsageDescription:"Lumo needs access to your microphone for voice and video calls.",NSScreenCaptureUsageDescription:"Lumo needs access to share your screen."},artifactName:"LumoSetup_mac-${version}.${ext}"},linux:{target:"AppImage",icon:"public/lumo-logo.png",category:"Network",artifactName:"LumoSetup_linux-${version}.${ext}"},publish:[{provider:"github",owner:"opsdazlakss",repo:"lumobuild"}]},TB={type:"git",url:"https://github.com/opsdazlakss/lumobuild.git"},kB={"@capacitor/assets":"^3.0.5","@eslint/js":"^9.39.1","@types/react":"^19.2.5","@types/react-dom":"^19.2.3","@vitejs/plugin-react":"^5.1.1",autoprefixer:"^10.4.22",concurrently:"^9.2.1",electron:"^39.2.6","electron-builder":"^26.0.12",eslint:"^9.39.1","eslint-plugin-react-hooks":"^7.0.1","eslint-plugin-react-refresh":"^0.4.24","gh-pages":"^6.3.0",globals:"^16.5.0",postcss:"^8.5.6",tailwindcss:"^3.4.18",vite:"^7.2.4","wait-on":"^9.0.3"},sv={name:vB,private:!0,version:yB,type:bB,main:xB,scripts:_B,dependencies:wB,description:SB,author:EB,build:CB,repository:TB,devDependencies:kB},NB=({isOpen:t,onClose:e,version:n,downloadUrl:r,forceUpdate:a})=>u.jsx(Hs,{isOpen:t,onClose:a?()=>{}:e,title:"Update Available",size:"sm",children:u.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[u.jsx("div",{className:"w-16 h-16 bg-brand-primary/20 rounded-full flex items-center justify-center animate-bounce",children:u.jsx(W7,{size:32,className:"text-brand-primary"})}),u.jsxs("div",{children:[u.jsxs("h3",{className:"text-lg font-semibold text-white",children:["New Version ",n," Available!"]}),u.jsx("p",{className:"text-dark-muted text-sm mt-2",children:"A new version of Lumo is available. Please update to get the latest features and fixes."})]}),u.jsxs("div",{className:"w-full space-y-2 pt-2",children:[u.jsxs(Ze,{variant:"primary",className:"w-full flex items-center justify-center gap-2",onClick:()=>{window.open(r,"_system")},children:[u.jsx(kT,{size:20}),"Download Update"]}),!a&&u.jsx(Ze,{variant:"secondary",className:"w-full",onClick:e,children:"Update Later"})]})]})}),AB=()=>{const{currentUser:t,userProfile:e,logout:n}=Cn(),{users:r,channels:a,server:l,servers:c,currentServer:h,setCurrentServer:m,unreadMentions:g,dms:y}=La();aO(t?.uid);const[b,_]=N.useState(null),[k,R]=N.useState(null),[j,T]=N.useState(!1),[H,q]=N.useState(!1),[I,z]=N.useState(!1),[B,$]=N.useState(!1),[w,E]=N.useState(!1),A=ZM({onSwipeLeft:()=>{if(B){$(!1);return}h!=="home"&&E(!0)},onSwipeRight:()=>{if(w){E(!1);return}$(!0)}}),[D,O]=N.useState(!1),[L,P]=N.useState(!1),[pe,ce]=N.useState(null),[Y,Z]=N.useState([]),[J,Te]=N.useState(!1),[Ae,F]=N.useState(null),[W,ae]=N.useState("idle");N.useEffect(()=>{if(!pc.isNativePlatform())return;(async()=>{ae("checking");const Ne=Date.now();try{const Ke=Me(ye,"system","app_version"),Ge=await tp(Ke);let he=!1,Ce=null;if(Ge.exists()){const oe=Ge.data(),xe=sv.version,ze=oe.android;if(ze&&ze!==xe){const Se=xe.split(".").map(Number),ue=ze.split(".").map(Number);for(let U=0;U<Math.max(Se.length,ue.length);U++){const K=Se[U]||0,ee=ue[U]||0;if(ee>K){he=!0;break}else if(ee<K)break}he&&(Ce={version:ze,downloadUrl:oe.downloadUrl,forceUpdate:oe.forceUpdate||!1})}}const Ve=Date.now()-Ne;Ve<1500&&await new Promise(oe=>setTimeout(oe,1500-Ve)),he?(F(Ce),ae("available"),Te(!0)):(ae("uptodate"),setTimeout(()=>{ae("idle")},1500))}catch(Ke){console.error("Failed to check for updates:",Ke),ae("idle")}})()},[]),N.useEffect(()=>{!t||!h||!g||g[h]?.count>0&&it(Me(ye,"users",t.uid),{[`unreadMentions.${h}`]:RD()}).catch(_e=>{console.error("Error clearing unread mentions:",_e)})},[h,t,g]),N.useEffect(()=>{const _e=()=>{window.innerWidth<768&&!b&&!k&&$(!0)};return window.innerWidth<768&&$(!0),window.addEventListener("resize",_e),()=>window.removeEventListener("resize",_e)},[b,k]),N.useEffect(()=>{a.length>0?_(a[0]):_(null)},[h,a]);const ge=async _e=>{if(m(_e),t)try{await it(Me(ye,"users",t.uid),{currentServer:_e})}catch(Ne){console.error("Failed to persist server selection:",Ne)}},Re=async _e=>{if(!t||!_e)return;const Ne=y.find(Ke=>Ke.participants.includes(_e.id)&&Ke.participants.includes(t.uid));if(Ne)R(Ne),ge("home");else try{await An(dt(ye,"dms"),{participants:[t.uid,_e.id],createdAt:bt(),updatedAt:bt(),lastMessage:null}),ge("home")}catch(Ke){console.error("Error creating DM:",Ke)}};return t&&!t.emailVerified?u.jsx(pB,{}):u.jsx(UP,{children:u.jsx(YP,{children:u.jsx(zP,{children:u.jsxs("div",{className:"flex h-screen bg-dark-bg overflow-hidden",...A,children:[u.jsxs("div",{className:"hidden md:flex h-full",children:[u.jsx(Lw,{servers:c,currentServerId:h,onServerChange:ge,onCreateServer:()=>O(!0),onJoinServer:()=>P(!0),userRole:e?.role,userId:t?.uid,unreadMentions:g}),u.jsx(Ow,{server:l,channels:a,selectedChannel:b,onSelectChannel:_,onOpenSettings:()=>T(!0),onOpenAdmin:()=>q(!0),onLogout:n,userProfile:e,serverId:h,userRole:e?.role,userId:t?.uid,dms:y,selectedDm:k,onSelectDm:R})]}),B&&u.jsxs("div",{className:"fixed inset-0 z-50 flex md:hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>$(!1)}),u.jsxs("div",{className:"relative flex h-full animate-slide-in-left bg-dark-bg",children:[u.jsx(Lw,{servers:c,currentServerId:h,onServerChange:_e=>ge(_e),onCreateServer:()=>O(!0),onJoinServer:()=>P(!0),userRole:e?.role,userId:t?.uid,unreadMentions:g}),u.jsx(Ow,{server:l,channels:a,selectedChannel:b,onSelectChannel:_e=>{_(_e),$(!1)},onOpenSettings:()=>{T(!0),$(!1)},onOpenAdmin:()=>{q(!0),$(!1)},onLogout:n,userProfile:e,serverId:h,userRole:e?.role,userId:t?.uid,dms:y,selectedDm:k,onSelectDm:_e=>{R(_e),$(!1)}}),u.jsx("button",{onClick:()=>$(!1),className:"absolute top-2 right-2 p-2 bg-dark-bg/50 rounded-full text-white md:hidden",style:{right:"-3rem"},children:u.jsx(On,{size:24})})]})]}),u.jsx("div",{className:"flex-1 flex flex-col",children:h==="home"?k?u.jsx(gB,{dmId:k.id,dms:y}):u.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-dark-muted relative",children:[u.jsx("button",{onClick:()=>$(!0),className:"absolute top-4 left-4 md:hidden p-2 text-dark-muted hover:text-dark-text",children:u.jsx(dw,{size:32})}),u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"mb-2 text-lg",children:" Welcome!"}),u.jsx("p",{children:"Select a conversation to start chatting"})]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"h-12 md:h-12 pt-safe-top md:pt-0 px-4 flex items-center justify-between border-b border-dark-hover shadow-sm bg-dark-bg box-content",children:[u.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[u.jsx("button",{onClick:()=>$(!0),className:"md:hidden p-1 mr-1 text-dark-muted hover:text-dark-text",children:u.jsx(dw,{size:24})}),u.jsx(ip,{className:"text-dark-muted flex-shrink-0"}),u.jsxs("h2",{className:"font-semibold text-dark-text flex items-center min-w-0",children:[u.jsx("span",{className:"truncate",children:b?.name||"Select a channel"}),b?.description&&u.jsx("span",{className:"hidden md:block ml-4 text-sm text-dark-muted font-normal border-l border-dark-muted/30 pl-4 truncate max-w-md",children:b.description})]})]}),u.jsx("div",{className:"flex items-center gap-3",children:b&&u.jsxs(u.Fragment,{children:[Y.filter(_e=>_e.pinned).length>0&&u.jsxs("button",{onClick:()=>z(!I),className:`hidden sm:flex items-center gap-2 px-3 py-1.5 rounded transition-colors ${I?"bg-brand-primary text-white":"bg-dark-hover text-dark-text hover:bg-dark-input"}`,children:[u.jsx(Yl,{size:16}),u.jsxs("span",{className:"text-sm font-medium",children:[Y.filter(_e=>_e.pinned).length," Pinned"]})]}),u.jsx("div",{className:"hidden sm:block",children:u.jsx(kk,{messages:Y,users:r,onResultClick:_e=>console.log("Scroll to:",_e)})}),h!=="home"&&u.jsx("button",{onClick:()=>E(!0),className:"lg:hidden p-2 text-dark-muted hover:text-dark-text",children:u.jsx(m1,{size:24})})]})})]}),b?u.jsxs(u.Fragment,{children:[u.jsx(W3,{serverId:h,channelId:b.id,users:r,currentUserId:t?.uid,userRole:e?.role,onReply:ce,onMessagesChange:Z}),u.jsx(Tk,{serverId:h,channelId:b.id,channel:b,userId:t?.uid,userProfile:e,userRole:e?.role,users:r,replyingTo:pe,onCancelReply:()=>ce(null)})]}):u.jsx("div",{className:"flex-1 flex items-center justify-center text-dark-muted",children:"Select a channel to start chatting"})]})}),u.jsx("div",{className:"hidden lg:block h-full",children:h!=="home"&&u.jsx(Vw,{users:r,currentUserId:t?.uid,onStartDm:Re})}),w&&h!=="home"&&u.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end lg:hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>E(!1)}),u.jsxs("div",{className:"relative h-full bg-dark-sidebar shadow-xl w-64 animate-slide-in-right pt-safe-top",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-hover",children:[u.jsx("h3",{className:"font-semibold text-dark-text",children:"Members"}),u.jsx("button",{onClick:()=>E(!1),children:u.jsx(On,{size:24,className:"text-dark-muted"})})]}),u.jsx("div",{className:"h-[calc(100%-60px)]",children:u.jsx(Vw,{users:r,currentUserId:t?.uid,onStartDm:_e=>{Re(_e),E(!1)}})})]})]}),I&&b&&u.jsx(Oz,{messages:Y,users:r,onClose:()=>z(!1),onJumpToMessage:_e=>{const Ne=document.getElementById(`message-${_e}`);Ne&&(Ne.scrollIntoView({behavior:"smooth",block:"center"}),Ne.classList.add("bg-brand-primary/10"),setTimeout(()=>{Ne.classList.remove("bg-brand-primary/10")},2e3)),z(!1)}}),u.jsx(fB,{}),u.jsx(Fz,{isOpen:j,onClose:()=>T(!1),onOpenAdmin:()=>q(!0)}),u.jsx(qz,{isOpen:H,onClose:()=>q(!1)}),u.jsx(Gz,{isOpen:D,onClose:()=>O(!1),userId:t?.uid,onSuccess:_e=>m(_e)}),u.jsx(Yz,{isOpen:L,onClose:()=>P(!1),userId:t?.uid,onSuccess:_e=>m(_e)}),J&&u.jsx(NB,{isOpen:J,onClose:()=>!Ae?.forceUpdate&&Te(!1),version:Ae?.version,downloadUrl:Ae?.downloadUrl,forceUpdate:Ae?.forceUpdate}),["checking","uptodate"].includes(W)&&u.jsxs("div",{className:"fixed inset-0 z-[60] bg-dark-bg flex flex-col items-center justify-center text-white transition-opacity duration-300",children:[W==="checking"&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-brand-primary mb-6"}),u.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Checking for updates..."}),u.jsxs("p",{className:"text-dark-muted font-mono text-sm",children:["v",sv.version]})]}),W==="uptodate"&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"rounded-full bg-green-500/20 p-4 mb-6",children:u.jsx(kT,{size:48,className:"text-green-500"})}),u.jsx("h2",{className:"text-xl font-semibold mb-2 text-green-400",children:"You are up to date!"}),u.jsxs("p",{className:"text-dark-muted font-mono text-sm",children:["v",sv.version]})]})]})]})})})})};class RB extends me.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n),this.setState({errorInfo:n})}render(){return this.state.hasError?u.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-8 flex flex-col items-center justify-center text-center",children:[u.jsx("h1",{className:"text-2xl font-bold text-red-500 mb-4",children:"Something went wrong"}),u.jsxs("div",{className:"bg-gray-800 p-4 rounded overflow-auto max-w-full text-left font-mono text-xs",children:[u.jsx("p",{className:"font-bold text-yellow-400 mb-2",children:this.state.error&&this.state.error.toString()}),u.jsx("pre",{className:"text-gray-400 whitespace-pre-wrap",children:this.state.errorInfo&&this.state.errorInfo.componentStack})]}),u.jsx("button",{className:"mt-6 px-4 py-2 bg-blue-600 rounded hover:bg-blue-700",onClick:()=>window.location.reload(),children:"Reload App"})]}):this.props.children}}const po=bp("PushNotifications",{}),jB=()=>{const{currentUser:t}=Cn();N.useEffect(()=>{let e,n,r,a;return pc.getPlatform()!=="web"&&t&&(async()=>{console.log("PushNotifications hook: Initializing for user",t.uid);let c=await po.checkPermissions();if(c.receive==="prompt"&&(c=await po.requestPermissions()),c.receive!=="granted"){console.warn("PushNotifications hook: User denied permissions!");return}e=await po.addListener("registration",async h=>{console.log("Push registration success, token: "+h.value);try{const m=Me(ye,"users",t.uid);await Ar(m,{fcmTokens:h.value},{merge:!0}),console.log("FCM Token saved to Firestore for user:",t.uid)}catch(m){console.error("Error saving FCM token to Firestore:",m)}}),n=await po.addListener("registrationError",h=>{console.error("Error on registration: "+JSON.stringify(h))}),r=await po.addListener("pushNotificationReceived",h=>{console.log("Push received: "+JSON.stringify(h))}),a=await po.addListener("pushNotificationActionPerformed",h=>{console.log("Push action performed: "+JSON.stringify(h))}),console.log("PushNotifications hook: Requesting registration..."),await po.register()})(),()=>{e&&e.remove(),n&&n.remove(),r&&r.remove(),a&&a.remove()}},[t])};function IB(){const{currentUser:t,userProfile:e,loading:n}=Cn();jB();const[r,a]=N.useState("login");return n?u.jsx("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center",children:u.jsx("div",{className:"text-dark-text text-xl",children:"Loading..."})}):t&&e?.isBanned?u.jsx("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-dark-sidebar p-8 rounded-xl max-w-md w-full text-center border border-admin",children:[u.jsx("div",{className:"text-6xl mb-4",children:""}),u.jsx("h1",{className:"text-2xl font-bold text-dark-text mb-2",children:"Account Banned"}),u.jsx("p",{className:"text-dark-muted mb-6",children:"Your account has been banned from this server. Please contact an administrator if you believe this is a mistake."}),u.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-hover transition-colors",children:"Refresh"})]})}):t?u.jsx(u7,{children:u.jsx(AB,{})}):u.jsxs(u.Fragment,{children:[r==="login"&&u.jsx(XM,{onSwitchToRegister:()=>a("register"),onSwitchToReset:()=>a("reset")}),r==="register"&&u.jsx(WM,{onSwitchToLogin:()=>a("login")}),r==="reset"&&u.jsx(JM,{onSwitchToLogin:()=>a("login")})]})}function DB(){return u.jsx(rM,{children:u.jsx(RB,{children:u.jsx(o7,{children:u.jsx(IB,{})})})})}yN.createRoot(document.getElementById("root")).render(u.jsx(N.StrictMode,{children:u.jsx(DB,{})}));
