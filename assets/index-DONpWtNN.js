function gN(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const l=Object.getOwnPropertyDescriptor(r,a);l&&Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function bd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function vN(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){var a=!1;try{a=this instanceof r}catch{}return a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),n}var b0={exports:{}},ju={};var y_;function yN(){if(y_)return ju;y_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:t,type:r,key:u,ref:a!==void 0?a:null,props:l}}return ju.Fragment=e,ju.jsx=n,ju.jsxs=n,ju}var b_;function bN(){return b_||(b_=1,b0.exports=yN()),b0.exports}var c=bN(),x0={exports:{}},ft={};var x_;function xN(){if(x_)return ft;x_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),x=Symbol.iterator;function k(H){return H===null||typeof H!="object"?null:(H=x&&H[x]||H["@@iterator"],typeof H=="function"?H:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,N={};function U(H,W,ie){this.props=H,this.context=W,this.refs=N,this.updater=ie||R}U.prototype.isReactComponent={},U.prototype.setState=function(H,W){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,W,"setState")},U.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function $(){}$.prototype=U.prototype;function I(H,W,ie){this.props=H,this.context=W,this.refs=N,this.updater=ie||R}var O=I.prototype=new $;O.constructor=I,j(O,U.prototype),O.isPureReactComponent=!0;var B=Array.isArray;function q(){}var w={H:null,A:null,T:null,S:null},E=Object.prototype.hasOwnProperty;function A(H,W,ie){var ve=ie.ref;return{$$typeof:t,type:H,key:W,ref:ve!==void 0?ve:null,props:ie}}function P(H,W){return A(H.type,W,H.props)}function L(H){return typeof H=="object"&&H!==null&&H.$$typeof===t}function z(H){var W={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(ie){return W[ie]})}var M=/\/+/g;function se(H,W){return typeof H=="object"&&H!==null&&H.key!=null?z(""+H.key):W.toString(36)}function le(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(q,q):(H.status="pending",H.then(function(W){H.status==="pending"&&(H.status="fulfilled",H.value=W)},function(W){H.status==="pending"&&(H.status="rejected",H.reason=W)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function Y(H,W,ie,ve,Te){var De=typeof H;(De==="undefined"||De==="boolean")&&(H=null);var ae=!1;if(H===null)ae=!0;else switch(De){case"bigint":case"string":case"number":ae=!0;break;case"object":switch(H.$$typeof){case t:case e:ae=!0;break;case y:return ae=H._init,Y(ae(H._payload),W,ie,ve,Te)}}if(ae)return Te=Te(H),ae=ve===""?"."+se(H,0):ve,B(Te)?(ie="",ae!=null&&(ie=ae.replace(M,"$&/")+"/"),Y(Te,W,ie,"",function(de){return de})):Te!=null&&(L(Te)&&(Te=P(Te,ie+(Te.key==null||H&&H.key===Te.key?"":(""+Te.key).replace(M,"$&/")+"/")+ae)),W.push(Te)),1;ae=0;var Le=ve===""?".":ve+":";if(B(H))for(var Ie=0;Ie<H.length;Ie++)ve=H[Ie],De=Le+se(ve,Ie),ae+=Y(ve,W,ie,De,Te);else if(Ie=k(H),typeof Ie=="function")for(H=Ie.call(H),Ie=0;!(ve=H.next()).done;)ve=ve.value,De=Le+se(ve,Ie++),ae+=Y(ve,W,ie,De,Te);else if(De==="object"){if(typeof H.then=="function")return Y(le(H),W,ie,ve,Te);throw W=String(H),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return ae}function ee(H,W,ie){if(H==null)return H;var ve=[],Te=0;return Y(H,ve,"","",function(De){return W.call(ie,De,Te++)}),ve}function Z(H){if(H._status===-1){var W=H._result;W=W(),W.then(function(ie){(H._status===0||H._status===-1)&&(H._status=1,H._result=ie)},function(ie){(H._status===0||H._status===-1)&&(H._status=2,H._result=ie)}),H._status===-1&&(H._status=0,H._result=W)}if(H._status===1)return H._result.default;throw H._result}var Ee=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},Re={map:ee,forEach:function(H,W,ie){ee(H,function(){W.apply(this,arguments)},ie)},count:function(H){var W=0;return ee(H,function(){W++}),W},toArray:function(H){return ee(H,function(W){return W})||[]},only:function(H){if(!L(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return ft.Activity=b,ft.Children=Re,ft.Component=U,ft.Fragment=n,ft.Profiler=a,ft.PureComponent=I,ft.StrictMode=r,ft.Suspense=m,ft.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,ft.__COMPILER_RUNTIME={__proto__:null,c:function(H){return w.H.useMemoCache(H)}},ft.cache=function(H){return function(){return H.apply(null,arguments)}},ft.cacheSignal=function(){return null},ft.cloneElement=function(H,W,ie){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var ve=j({},H.props),Te=H.key;if(W!=null)for(De in W.key!==void 0&&(Te=""+W.key),W)!E.call(W,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&W.ref===void 0||(ve[De]=W[De]);var De=arguments.length-2;if(De===1)ve.children=ie;else if(1<De){for(var ae=Array(De),Le=0;Le<De;Le++)ae[Le]=arguments[Le+2];ve.children=ae}return A(H.type,Te,ve)},ft.createContext=function(H){return H={$$typeof:u,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:l,_context:H},H},ft.createElement=function(H,W,ie){var ve,Te={},De=null;if(W!=null)for(ve in W.key!==void 0&&(De=""+W.key),W)E.call(W,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(Te[ve]=W[ve]);var ae=arguments.length-2;if(ae===1)Te.children=ie;else if(1<ae){for(var Le=Array(ae),Ie=0;Ie<ae;Ie++)Le[Ie]=arguments[Ie+2];Te.children=Le}if(H&&H.defaultProps)for(ve in ae=H.defaultProps,ae)Te[ve]===void 0&&(Te[ve]=ae[ve]);return A(H,De,Te)},ft.createRef=function(){return{current:null}},ft.forwardRef=function(H){return{$$typeof:h,render:H}},ft.isValidElement=L,ft.lazy=function(H){return{$$typeof:y,_payload:{_status:-1,_result:H},_init:Z}},ft.memo=function(H,W){return{$$typeof:p,type:H,compare:W===void 0?null:W}},ft.startTransition=function(H){var W=w.T,ie={};w.T=ie;try{var ve=H(),Te=w.S;Te!==null&&Te(ie,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(q,Ee)}catch(De){Ee(De)}finally{W!==null&&ie.types!==null&&(W.types=ie.types),w.T=W}},ft.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},ft.use=function(H){return w.H.use(H)},ft.useActionState=function(H,W,ie){return w.H.useActionState(H,W,ie)},ft.useCallback=function(H,W){return w.H.useCallback(H,W)},ft.useContext=function(H){return w.H.useContext(H)},ft.useDebugValue=function(){},ft.useDeferredValue=function(H,W){return w.H.useDeferredValue(H,W)},ft.useEffect=function(H,W){return w.H.useEffect(H,W)},ft.useEffectEvent=function(H){return w.H.useEffectEvent(H)},ft.useId=function(){return w.H.useId()},ft.useImperativeHandle=function(H,W,ie){return w.H.useImperativeHandle(H,W,ie)},ft.useInsertionEffect=function(H,W){return w.H.useInsertionEffect(H,W)},ft.useLayoutEffect=function(H,W){return w.H.useLayoutEffect(H,W)},ft.useMemo=function(H,W){return w.H.useMemo(H,W)},ft.useOptimistic=function(H,W){return w.H.useOptimistic(H,W)},ft.useReducer=function(H,W,ie){return w.H.useReducer(H,W,ie)},ft.useRef=function(H){return w.H.useRef(H)},ft.useState=function(H){return w.H.useState(H)},ft.useSyncExternalStore=function(H,W,ie){return w.H.useSyncExternalStore(H,W,ie)},ft.useTransition=function(){return w.H.useTransition()},ft.version="19.2.3",ft}var __;function Ya(){return __||(__=1,x0.exports=xN()),x0.exports}var T=Ya();const ye=bd(T);var _0={exports:{}},Iu={},w0={exports:{}},S0={};var w_;function _N(){return w_||(w_=1,(function(t){function e(Y,ee){var Z=Y.length;Y.push(ee);e:for(;0<Z;){var Ee=Z-1>>>1,Re=Y[Ee];if(0<a(Re,ee))Y[Ee]=ee,Y[Z]=Re,Z=Ee;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var ee=Y[0],Z=Y.pop();if(Z!==ee){Y[0]=Z;e:for(var Ee=0,Re=Y.length,H=Re>>>1;Ee<H;){var W=2*(Ee+1)-1,ie=Y[W],ve=W+1,Te=Y[ve];if(0>a(ie,Z))ve<Re&&0>a(Te,ie)?(Y[Ee]=Te,Y[ve]=Z,Ee=ve):(Y[Ee]=ie,Y[W]=Z,Ee=W);else if(ve<Re&&0>a(Te,Z))Y[Ee]=Te,Y[ve]=Z,Ee=ve;else break e}}return ee}function a(Y,ee){var Z=Y.sortIndex-ee.sortIndex;return Z!==0?Z:Y.id-ee.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var m=[],p=[],y=1,b=null,x=3,k=!1,R=!1,j=!1,N=!1,U=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function O(Y){for(var ee=n(p);ee!==null;){if(ee.callback===null)r(p);else if(ee.startTime<=Y)r(p),ee.sortIndex=ee.expirationTime,e(m,ee);else break;ee=n(p)}}function B(Y){if(j=!1,O(Y),!R)if(n(m)!==null)R=!0,q||(q=!0,z());else{var ee=n(p);ee!==null&&le(B,ee.startTime-Y)}}var q=!1,w=-1,E=5,A=-1;function P(){return N?!0:!(t.unstable_now()-A<E)}function L(){if(N=!1,q){var Y=t.unstable_now();A=Y;var ee=!0;try{e:{R=!1,j&&(j=!1,$(w),w=-1),k=!0;var Z=x;try{t:{for(O(Y),b=n(m);b!==null&&!(b.expirationTime>Y&&P());){var Ee=b.callback;if(typeof Ee=="function"){b.callback=null,x=b.priorityLevel;var Re=Ee(b.expirationTime<=Y);if(Y=t.unstable_now(),typeof Re=="function"){b.callback=Re,O(Y),ee=!0;break t}b===n(m)&&r(m),O(Y)}else r(m);b=n(m)}if(b!==null)ee=!0;else{var H=n(p);H!==null&&le(B,H.startTime-Y),ee=!1}}break e}finally{b=null,x=Z,k=!1}ee=void 0}}finally{ee?z():q=!1}}}var z;if(typeof I=="function")z=function(){I(L)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,se=M.port2;M.port1.onmessage=L,z=function(){se.postMessage(null)}}else z=function(){U(L,0)};function le(Y,ee){w=U(function(){Y(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(Y){switch(x){case 1:case 2:case 3:var ee=3;break;default:ee=x}var Z=x;x=ee;try{return Y()}finally{x=Z}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function(Y,ee){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var Z=x;x=Y;try{return ee()}finally{x=Z}},t.unstable_scheduleCallback=function(Y,ee,Z){var Ee=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?Ee+Z:Ee):Z=Ee,Y){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=Z+Re,Y={id:y++,callback:ee,priorityLevel:Y,startTime:Z,expirationTime:Re,sortIndex:-1},Z>Ee?(Y.sortIndex=Z,e(p,Y),n(m)===null&&Y===n(p)&&(j?($(w),w=-1):j=!0,le(B,Z-Ee))):(Y.sortIndex=Re,e(m,Y),R||k||(R=!0,q||(q=!0,z()))),Y},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(Y){var ee=x;return function(){var Z=x;x=ee;try{return Y.apply(this,arguments)}finally{x=Z}}}})(S0)),S0}var S_;function wN(){return S_||(S_=1,w0.exports=_N()),w0.exports}var E0={exports:{}},or={};var E_;function SN(){if(E_)return or;E_=1;var t=Ya();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,p,y){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:m,containerInfo:p,implementation:y}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return or.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,or.createPortal=function(m,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(m,p,null,y)},or.flushSync=function(m){var p=u.T,y=r.p;try{if(u.T=null,r.p=2,m)return m()}finally{u.T=p,r.p=y,r.d.f()}},or.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(m,p))},or.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},or.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var y=p.as,b=h(y,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,k=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?r.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:x,fetchPriority:k}):y==="script"&&r.d.X(m,{crossOrigin:b,integrity:x,fetchPriority:k,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},or.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=h(p.as,p.crossOrigin);r.d.M(m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(m)},or.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,b=h(y,p.crossOrigin);r.d.L(m,y,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},or.preloadModule=function(m,p){if(typeof m=="string")if(p){var y=h(p.as,p.crossOrigin);r.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(m)},or.requestFormReset=function(m){r.d.r(m)},or.unstable_batchedUpdates=function(m,p){return m(p)},or.useFormState=function(m,p,y){return u.H.useFormState(m,p,y)},or.useFormStatus=function(){return u.H.useHostTransitionStatus()},or.version="19.2.3",or}var C_;function uy(){if(C_)return E0.exports;C_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),E0.exports=SN(),E0.exports}var T_;function EN(){if(T_)return Iu;T_=1;var t=wN(),e=Ya(),n=uy();function r(s){var i="https://react.dev/errors/"+s;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var i=s,o=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(o=i.return),s=i.return;while(s)}return i.tag===3?o:null}function u(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function h(s){if(s.tag===31){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function m(s){if(l(s)!==s)throw Error(r(188))}function p(s){var i=s.alternate;if(!i){if(i=l(s),i===null)throw Error(r(188));return i!==s?null:s}for(var o=s,d=i;;){var g=o.return;if(g===null)break;var v=g.alternate;if(v===null){if(d=g.return,d!==null){o=d;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===o)return m(g),s;if(v===d)return m(g),i;v=v.sibling}throw Error(r(188))}if(o.return!==d.return)o=g,d=v;else{for(var S=!1,D=g.child;D;){if(D===o){S=!0,o=g,d=v;break}if(D===d){S=!0,d=g,o=v;break}D=D.sibling}if(!S){for(D=v.child;D;){if(D===o){S=!0,o=v,d=g;break}if(D===d){S=!0,d=v,o=g;break}D=D.sibling}if(!S)throw Error(r(189))}}if(o.alternate!==d)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?s:i}function y(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s;for(s=s.child;s!==null;){if(i=y(s),i!==null)return i;s=s.sibling}return null}var b=Object.assign,x=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),I=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function z(s){return s===null||typeof s!="object"?null:(s=L&&s[L]||s["@@iterator"],typeof s=="function"?s:null)}var M=Symbol.for("react.client.reference");function se(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===M?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case j:return"Fragment";case U:return"Profiler";case N:return"StrictMode";case B:return"Suspense";case q:return"SuspenseList";case A:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case R:return"Portal";case I:return s.displayName||"Context";case $:return(s._context.displayName||"Context")+".Consumer";case O:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case w:return i=s.displayName||null,i!==null?i:se(s.type)||"Memo";case E:i=s._payload,s=s._init;try{return se(s(i))}catch{}}return null}var le=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},Ee=[],Re=-1;function H(s){return{current:s}}function W(s){0>Re||(s.current=Ee[Re],Ee[Re]=null,Re--)}function ie(s,i){Re++,Ee[Re]=s.current,s.current=i}var ve=H(null),Te=H(null),De=H(null),ae=H(null);function Le(s,i){switch(ie(De,i),ie(Te,s),ie(ve,null),i.nodeType){case 9:case 11:s=(s=i.documentElement)&&(s=s.namespaceURI)?B2(s):0;break;default:if(s=i.tagName,i=i.namespaceURI)i=B2(i),s=F2(i,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}W(ve),ie(ve,s)}function Ie(){W(ve),W(Te),W(De)}function de(s){s.memoizedState!==null&&ie(ae,s);var i=ve.current,o=F2(i,s.type);i!==o&&(ie(Te,s),ie(ve,o))}function pe(s){Te.current===s&&(W(ve),W(Te)),ae.current===s&&(W(ae),ku._currentValue=Z)}var ge,Se;function it(s){if(ge===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);ge=i&&i[1]||"",Se=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ge+s+Se}var _e=!1;function Ue(s,i){if(!s||_e)return"";_e=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(i){var xe=function(){throw Error()};if(Object.defineProperty(xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xe,[])}catch(ue){var oe=ue}Reflect.construct(s,[],xe)}else{try{xe.call()}catch(ue){oe=ue}s.call(xe.prototype)}}else{try{throw Error()}catch(ue){oe=ue}(xe=s())&&typeof xe.catch=="function"&&xe.catch(function(){})}}catch(ue){if(ue&&oe&&typeof ue.stack=="string")return[ue.stack,oe.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=d.DetermineComponentFrameRoot(),S=v[0],D=v[1];if(S&&D){var G=S.split(`
`),re=D.split(`
`);for(g=d=0;d<G.length&&!G[d].includes("DetermineComponentFrameRoot");)d++;for(;g<re.length&&!re[g].includes("DetermineComponentFrameRoot");)g++;if(d===G.length||g===re.length)for(d=G.length-1,g=re.length-1;1<=d&&0<=g&&G[d]!==re[g];)g--;for(;1<=d&&0<=g;d--,g--)if(G[d]!==re[g]){if(d!==1||g!==1)do if(d--,g--,0>g||G[d]!==re[g]){var me=`
`+G[d].replace(" at new "," at ");return s.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",s.displayName)),me}while(1<=d&&0<=g);break}}}finally{_e=!1,Error.prepareStackTrace=o}return(o=s?s.displayName||s.name:"")?it(o):""}function Me(s,i){switch(s.tag){case 26:case 27:case 5:return it(s.type);case 16:return it("Lazy");case 13:return s.child!==i&&i!==null?it("Suspense Fallback"):it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return Ue(s.type,!1);case 11:return Ue(s.type.render,!1);case 1:return Ue(s.type,!0);case 31:return it("Activity");default:return""}}function F(s){try{var i="",o=null;do i+=Me(s,o),o=s,s=s.return;while(s);return i}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var Q=Object.prototype.hasOwnProperty,J=t.unstable_scheduleCallback,Ce=t.unstable_cancelCallback,$e=t.unstable_shouldYield,Qe=t.unstable_requestPaint,ct=t.unstable_now,$t=t.unstable_getCurrentPriorityLevel,fn=t.unstable_ImmediatePriority,ar=t.unstable_UserBlockingPriority,ke=t.unstable_NormalPriority,ze=t.unstable_LowPriority,nt=t.unstable_IdlePriority,tt=t.log,Qt=t.unstable_setDisableYieldValue,Dt=null,ht=null;function vn(s){if(typeof tt=="function"&&Qt(s),ht&&typeof ht.setStrictMode=="function")try{ht.setStrictMode(Dt,s)}catch{}}var nn=Math.clz32?Math.clz32:Je,Ve=Math.log,Ne=Math.LN2;function Je(s){return s>>>=0,s===0?32:31-(Ve(s)/Ne|0)|0}var Xe=256,pt=262144,ut=4194304;function Ct(s){var i=s&42;if(i!==0)return i;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function zt(s,i,o){var d=s.pendingLanes;if(d===0)return 0;var g=0,v=s.suspendedLanes,S=s.pingedLanes;s=s.warmLanes;var D=d&134217727;return D!==0?(d=D&~v,d!==0?g=Ct(d):(S&=D,S!==0?g=Ct(S):o||(o=D&~s,o!==0&&(g=Ct(o))))):(D=d&~v,D!==0?g=Ct(D):S!==0?g=Ct(S):o||(o=d&~s,o!==0&&(g=Ct(o)))),g===0?0:i!==0&&i!==g&&(i&v)===0&&(v=g&-g,o=i&-i,v>=o||v===32&&(o&4194048)!==0)?i:g}function xt(s,i){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&i)===0}function sn(s,i){switch(s){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vn(){var s=ut;return ut<<=1,(ut&62914560)===0&&(ut=4194304),s}function Be(s){for(var i=[],o=0;31>o;o++)i.push(s);return i}function gt(s,i){s.pendingLanes|=i,i!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Ut(s,i,o,d,g,v){var S=s.pendingLanes;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=o,s.entangledLanes&=o,s.errorRecoveryDisabledLanes&=o,s.shellSuspendCounter=0;var D=s.entanglements,G=s.expirationTimes,re=s.hiddenUpdates;for(o=S&~o;0<o;){var me=31-nn(o),xe=1<<me;D[me]=0,G[me]=-1;var oe=re[me];if(oe!==null)for(re[me]=null,me=0;me<oe.length;me++){var ue=oe[me];ue!==null&&(ue.lane&=-536870913)}o&=~xe}d!==0&&Qn(s,d,0),v!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=v&~(S&~i))}function Qn(s,i,o){s.pendingLanes|=i,s.suspendedLanes&=~i;var d=31-nn(i);s.entangledLanes|=i,s.entanglements[d]=s.entanglements[d]|1073741824|o&261930}function $i(s,i){var o=s.entangledLanes|=i;for(s=s.entanglements;o;){var d=31-nn(o),g=1<<d;g&i|s[d]&i&&(s[d]|=i),o&=~g}}function Dc(s,i){var o=i&-i;return o=(o&42)!==0?1:Ja(o),(o&(s.suspendedLanes|i))!==0?0:o}function Ja(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function oi(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ud(){var s=ee.p;return s!==0?s:(s=window.event,s===void 0?32:d_(s.type))}function cs(s,i){var o=ee.p;try{return ee.p=s,i()}finally{ee.p=o}}var us=Math.random().toString(36).slice(2),En="__reactFiber$"+us,Hn="__reactProps$"+us,Ts="__reactContainer$"+us,el="__reactEvents$"+us,Cp="__reactListeners$"+us,Bd="__reactHandles$"+us,Fd="__reactResources$"+us,ks="__reactMarker$"+us;function tl(s){delete s[En],delete s[Hn],delete s[el],delete s[Cp],delete s[Bd]}function Ns(s){var i=s[En];if(i)return i;for(var o=s.parentNode;o;){if(i=o[Ts]||o[En]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(s=Q2(s);s!==null;){if(o=s[En])return o;s=Q2(s)}return i}s=o,o=s.parentNode}return null}function Qr(s){if(s=s[En]||s[Ts]){var i=s.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return s}return null}function Dr(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s.stateNode;throw Error(r(33))}function As(s){var i=s[Fd];return i||(i=s[Fd]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Cn(s){s[ks]=!0}var Mc=new Set,Pc={};function Rs(s,i){js(s,i),js(s+"Capture",i)}function js(s,i){for(Pc[s]=i,s=0;s<i.length;s++)Mc.add(i[s])}var Oc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lc={},Vc={};function $d(s){return Q.call(Vc,s)?!0:Q.call(Lc,s)?!1:Oc.test(s)?Vc[s]=!0:(Lc[s]=!0,!1)}function nl(s,i,o){if($d(i))if(o===null)s.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":s.removeAttribute(i);return;case"boolean":var d=i.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){s.removeAttribute(i);return}}s.setAttribute(i,""+o)}}function Mr(s,i,o){if(o===null)s.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(i);return}s.setAttribute(i,""+o)}}function Tn(s,i,o,d){if(d===null)s.removeAttribute(o);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttributeNS(i,o,""+d)}}function qn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Hi(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function zc(s,i,o){var d=Object.getOwnPropertyDescriptor(s.constructor.prototype,i);if(!s.hasOwnProperty(i)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var g=d.get,v=d.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return g.call(this)},set:function(S){o=""+S,v.call(this,S)}}),Object.defineProperty(s,i,{enumerable:d.enumerable}),{getValue:function(){return o},setValue:function(S){o=""+S},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function Gt(s){if(!s._valueTracker){var i=Hi(s)?"checked":"value";s._valueTracker=zc(s,i,""+s[i])}}function Za(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var o=i.getValue(),d="";return s&&(d=Hi(s)?s.checked?"true":"false":s.value),s=d,s!==o?(i.setValue(s),!0):!1}function Is(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var eo=/[\n"\\]/g;function xr(s){return s.replace(eo,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function rl(s,i,o,d,g,v,S,D){s.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?s.type=S:s.removeAttribute("type"),i!=null?S==="number"?(i===0&&s.value===""||s.value!=i)&&(s.value=""+qn(i)):s.value!==""+qn(i)&&(s.value=""+qn(i)):S!=="submit"&&S!=="reset"||s.removeAttribute("value"),i!=null?Uc(s,S,qn(i)):o!=null?Uc(s,S,qn(o)):d!=null&&s.removeAttribute("value"),g==null&&v!=null&&(s.defaultChecked=!!v),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?s.name=""+qn(D):s.removeAttribute("name")}function Hd(s,i,o,d,g,v,S,D){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.type=v),i!=null||o!=null){if(!(v!=="submit"&&v!=="reset"||i!=null)){Gt(s);return}o=o!=null?""+qn(o):"",i=i!=null?""+qn(i):o,D||i===s.value||(s.value=i),s.defaultValue=i}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,s.checked=D?s.checked:!!d,s.defaultChecked=!!d,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(s.name=S),Gt(s)}function Uc(s,i,o){i==="number"&&Is(s.ownerDocument)===s||s.defaultValue===""+o||(s.defaultValue=""+o)}function qi(s,i,o,d){if(s=s.options,i){i={};for(var g=0;g<o.length;g++)i["$"+o[g]]=!0;for(o=0;o<s.length;o++)g=i.hasOwnProperty("$"+s[o].value),s[o].selected!==g&&(s[o].selected=g),g&&d&&(s[o].defaultSelected=!0)}else{for(o=""+qn(o),i=null,g=0;g<s.length;g++){if(s[g].value===o){s[g].selected=!0,d&&(s[g].defaultSelected=!0);return}i!==null||s[g].disabled||(i=s[g])}i!==null&&(i.selected=!0)}}function qd(s,i,o){if(i!=null&&(i=""+qn(i),i!==s.value&&(s.value=i),o==null)){s.defaultValue!==i&&(s.defaultValue=i);return}s.defaultValue=o!=null?""+qn(o):""}function Gi(s,i,o,d){if(i==null){if(d!=null){if(o!=null)throw Error(r(92));if(le(d)){if(1<d.length)throw Error(r(93));d=d[0]}o=d}o==null&&(o=""),i=o}o=qn(i),s.defaultValue=o,d=s.textContent,d===o&&d!==""&&d!==null&&(s.value=d),Gt(s)}function _r(s,i){if(i){var o=s.firstChild;if(o&&o===s.lastChild&&o.nodeType===3){o.nodeValue=i;return}}s.textContent=i}var Gd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Bc(s,i,o){var d=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?d?s.setProperty(i,""):i==="float"?s.cssFloat="":s[i]="":d?s.setProperty(i,o):typeof o!="number"||o===0||Gd.has(i)?i==="float"?s.cssFloat=o:s[i]=(""+o).trim():s[i]=o+"px"}function Fc(s,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(s=s.style,o!=null){for(var d in o)!o.hasOwnProperty(d)||i!=null&&i.hasOwnProperty(d)||(d.indexOf("--")===0?s.setProperty(d,""):d==="float"?s.cssFloat="":s[d]="");for(var g in i)d=i[g],i.hasOwnProperty(g)&&o[g]!==d&&Bc(s,g,d)}else for(var v in i)i.hasOwnProperty(v)&&Bc(s,v,i[v])}function sl(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function il(s){return Yi.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function ds(){}var $c=null;function Xr(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ki=null,Ds=null;function to(s){var i=Qr(s);if(i&&(s=i.stateNode)){var o=s[Hn]||null;e:switch(s=i.stateNode,i.type){case"input":if(rl(s,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=s;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+xr(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var d=o[i];if(d!==s&&d.form===s.form){var g=d[Hn]||null;if(!g)throw Error(r(90));rl(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(i=0;i<o.length;i++)d=o[i],d.form===s.form&&Za(d)}break e;case"textarea":qd(s,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&qi(s,!!o.multiple,i,!1)}}}var al=!1;function Qi(s,i,o){if(al)return s(i,o);al=!0;try{var d=s(i);return d}finally{if(al=!1,(Ki!==null||Ds!==null)&&(Uh(),Ki&&(i=Ki,s=Ds,Ds=Ki=null,to(i),s)))for(i=0;i<s.length;i++)to(s[i])}}function hs(s,i){var o=s.stateNode;if(o===null)return null;var d=o[Hn]||null;if(d===null)return null;o=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break e;default:s=!1}if(s)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var Wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),no=!1;if(Wr)try{var Xt={};Object.defineProperty(Xt,"passive",{get:function(){no=!0}}),window.addEventListener("test",Xt,Xt),window.removeEventListener("test",Xt,Xt)}catch{no=!1}var Ms=null,Hc=null,ro=null;function qc(){if(ro)return ro;var s,i=Hc,o=i.length,d,g="value"in Ms?Ms.value:Ms.textContent,v=g.length;for(s=0;s<o&&i[s]===g[s];s++);var S=o-s;for(d=1;d<=S&&i[o-d]===g[v-d];d++);return ro=g.slice(s,1<d?1-d:void 0)}function so(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function li(){return!0}function fs(){return!1}function Xn(s){function i(o,d,g,v,S){this._reactName=o,this._targetInst=g,this.type=d,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var D in s)s.hasOwnProperty(D)&&(o=s[D],this[D]=o?o(v):v[D]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?li:fs,this.isPropagationStopped=fs,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=li)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=li)},persist:function(){},isPersistent:li}),i}var ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ps=Xn(ci),Xi=b({},ci,{view:0,detail:0}),Gc=Xn(Xi),Wi,ol,Os,ll=b({},Xi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ji,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Os&&(Os&&s.type==="mousemove"?(Wi=s.screenX-Os.screenX,ol=s.screenY-Os.screenY):ol=Wi=0,Os=s),Wi)},movementY:function(s){return"movementY"in s?s.movementY:ol}}),Yc=Xn(ll),io=b({},ll,{dataTransfer:0}),Kd=Xn(io),Qd=b({},Xi,{relatedTarget:0}),ao=Xn(Qd),Kc=b({},ci,{animationName:0,elapsedTime:0,pseudoElement:0}),Xd=Xn(Kc),cl=b({},ci,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Wd=Xn(cl),Jd=b({},ci,{data:0}),Ls=Xn(Jd),Zd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},th={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nh(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=th[s])?!!i[s]:!1}function Ji(){return nh}var mr=b({},Xi,{key:function(s){if(s.key){var i=Zd[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=so(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?eh[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ji,charCode:function(s){return s.type==="keypress"?so(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?so(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),rh=Xn(mr),sh=b({},ll,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ui=Xn(sh),f=b({},Xi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ji}),_=Xn(f),C=b({},ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),V=Xn(C),te=b({},ll,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ce=Xn(te),Pe=b({},ci,{newState:0,oldState:0}),vt=Xn(Pe),yn=[9,13,27,32],Bt=Wr&&"CompositionEvent"in window,un=null;Wr&&"documentMode"in document&&(un=document.documentMode);var Jr=Wr&&"TextEvent"in window&&!un,Vs=Wr&&(!Bt||un&&8<un&&11>=un),ms=" ",ps=!1;function oo(s,i){switch(s){case"keyup":return yn.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ul(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var dl=!1;function U6(s,i){switch(s){case"compositionend":return ul(i);case"keypress":return i.which!==32?null:(ps=!0,ms);case"textInput":return s=i.data,s===ms&&ps?null:s;default:return null}}function B6(s,i){if(dl)return s==="compositionend"||!Bt&&oo(s,i)?(s=qc(),ro=Hc=Ms=null,dl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Vs&&i.locale!=="ko"?null:i.data;default:return null}}var F6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function J1(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!F6[s.type]:i==="textarea"}function Z1(s,i,o,d){Ki?Ds?Ds.push(d):Ds=[d]:Ki=d,i=Yh(i,"onChange"),0<i.length&&(o=new Ps("onChange","change",null,o,d),s.push({event:o,listeners:i}))}var Qc=null,Xc=null;function $6(s){P2(s,0)}function ih(s){var i=Dr(s);if(Za(i))return s}function eb(s,i){if(s==="change")return i}var tb=!1;if(Wr){var Tp;if(Wr){var kp="oninput"in document;if(!kp){var nb=document.createElement("div");nb.setAttribute("oninput","return;"),kp=typeof nb.oninput=="function"}Tp=kp}else Tp=!1;tb=Tp&&(!document.documentMode||9<document.documentMode)}function rb(){Qc&&(Qc.detachEvent("onpropertychange",sb),Xc=Qc=null)}function sb(s){if(s.propertyName==="value"&&ih(Xc)){var i=[];Z1(i,Xc,s,Xr(s)),Qi($6,i)}}function H6(s,i,o){s==="focusin"?(rb(),Qc=i,Xc=o,Qc.attachEvent("onpropertychange",sb)):s==="focusout"&&rb()}function q6(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ih(Xc)}function G6(s,i){if(s==="click")return ih(i)}function Y6(s,i){if(s==="input"||s==="change")return ih(i)}function K6(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var Pr=typeof Object.is=="function"?Object.is:K6;function Wc(s,i){if(Pr(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var o=Object.keys(s),d=Object.keys(i);if(o.length!==d.length)return!1;for(d=0;d<o.length;d++){var g=o[d];if(!Q.call(i,g)||!Pr(s[g],i[g]))return!1}return!0}function ib(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function ab(s,i){var o=ib(s);s=0;for(var d;o;){if(o.nodeType===3){if(d=s+o.textContent.length,s<=i&&d>=i)return{node:o,offset:i-s};s=d}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=ib(o)}}function ob(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?ob(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function lb(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var i=Is(s.document);i instanceof s.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)s=i.contentWindow;else break;i=Is(s.document)}return i}function Np(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}var Q6=Wr&&"documentMode"in document&&11>=document.documentMode,hl=null,Ap=null,Jc=null,Rp=!1;function cb(s,i,o){var d=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Rp||hl==null||hl!==Is(d)||(d=hl,"selectionStart"in d&&Np(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Jc&&Wc(Jc,d)||(Jc=d,d=Yh(Ap,"onSelect"),0<d.length&&(i=new Ps("onSelect","select",null,i,o),s.push({event:i,listeners:d}),i.target=hl)))}function lo(s,i){var o={};return o[s.toLowerCase()]=i.toLowerCase(),o["Webkit"+s]="webkit"+i,o["Moz"+s]="moz"+i,o}var fl={animationend:lo("Animation","AnimationEnd"),animationiteration:lo("Animation","AnimationIteration"),animationstart:lo("Animation","AnimationStart"),transitionrun:lo("Transition","TransitionRun"),transitionstart:lo("Transition","TransitionStart"),transitioncancel:lo("Transition","TransitionCancel"),transitionend:lo("Transition","TransitionEnd")},jp={},ub={};Wr&&(ub=document.createElement("div").style,"AnimationEvent"in window||(delete fl.animationend.animation,delete fl.animationiteration.animation,delete fl.animationstart.animation),"TransitionEvent"in window||delete fl.transitionend.transition);function co(s){if(jp[s])return jp[s];if(!fl[s])return s;var i=fl[s],o;for(o in i)if(i.hasOwnProperty(o)&&o in ub)return jp[s]=i[o];return s}var db=co("animationend"),hb=co("animationiteration"),fb=co("animationstart"),X6=co("transitionrun"),W6=co("transitionstart"),J6=co("transitioncancel"),mb=co("transitionend"),pb=new Map,Ip="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ip.push("scrollEnd");function gs(s,i){pb.set(s,i),Rs(i,[s])}var ah=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Zr=[],ml=0,Dp=0;function oh(){for(var s=ml,i=Dp=ml=0;i<s;){var o=Zr[i];Zr[i++]=null;var d=Zr[i];Zr[i++]=null;var g=Zr[i];Zr[i++]=null;var v=Zr[i];if(Zr[i++]=null,d!==null&&g!==null){var S=d.pending;S===null?g.next=g:(g.next=S.next,S.next=g),d.pending=g}v!==0&&gb(o,g,v)}}function lh(s,i,o,d){Zr[ml++]=s,Zr[ml++]=i,Zr[ml++]=o,Zr[ml++]=d,Dp|=d,s.lanes|=d,s=s.alternate,s!==null&&(s.lanes|=d)}function Mp(s,i,o,d){return lh(s,i,o,d),ch(s)}function uo(s,i){return lh(s,null,null,i),ch(s)}function gb(s,i,o){s.lanes|=o;var d=s.alternate;d!==null&&(d.lanes|=o);for(var g=!1,v=s.return;v!==null;)v.childLanes|=o,d=v.alternate,d!==null&&(d.childLanes|=o),v.tag===22&&(s=v.stateNode,s===null||s._visibility&1||(g=!0)),s=v,v=v.return;return s.tag===3?(v=s.stateNode,g&&i!==null&&(g=31-nn(o),s=v.hiddenUpdates,d=s[g],d===null?s[g]=[i]:d.push(i),i.lane=o|536870912),v):null}function ch(s){if(50<xu)throw xu=0,$g=null,Error(r(185));for(var i=s.return;i!==null;)s=i,i=s.return;return s.tag===3?s.stateNode:null}var pl={};function Z6(s,i,o,d){this.tag=s,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Or(s,i,o,d){return new Z6(s,i,o,d)}function Pp(s){return s=s.prototype,!(!s||!s.isReactComponent)}function di(s,i){var o=s.alternate;return o===null?(o=Or(s.tag,i,s.key,s.mode),o.elementType=s.elementType,o.type=s.type,o.stateNode=s.stateNode,o.alternate=s,s.alternate=o):(o.pendingProps=i,o.type=s.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=s.flags&65011712,o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,i=s.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=s.sibling,o.index=s.index,o.ref=s.ref,o.refCleanup=s.refCleanup,o}function vb(s,i){s.flags&=65011714;var o=s.alternate;return o===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,i=o.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s}function uh(s,i,o,d,g,v){var S=0;if(d=s,typeof s=="function")Pp(s)&&(S=1);else if(typeof s=="string")S=sN(s,o,ve.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case A:return s=Or(31,o,i,g),s.elementType=A,s.lanes=v,s;case j:return ho(o.children,g,v,i);case N:S=8,g|=24;break;case U:return s=Or(12,o,i,g|2),s.elementType=U,s.lanes=v,s;case B:return s=Or(13,o,i,g),s.elementType=B,s.lanes=v,s;case q:return s=Or(19,o,i,g),s.elementType=q,s.lanes=v,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case I:S=10;break e;case $:S=9;break e;case O:S=11;break e;case w:S=14;break e;case E:S=16,d=null;break e}S=29,o=Error(r(130,s===null?"null":typeof s,"")),d=null}return i=Or(S,o,i,g),i.elementType=s,i.type=d,i.lanes=v,i}function ho(s,i,o,d){return s=Or(7,s,d,i),s.lanes=o,s}function Op(s,i,o){return s=Or(6,s,null,i),s.lanes=o,s}function yb(s){var i=Or(18,null,null,0);return i.stateNode=s,i}function Lp(s,i,o){return i=Or(4,s.children!==null?s.children:[],s.key,i),i.lanes=o,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}var bb=new WeakMap;function es(s,i){if(typeof s=="object"&&s!==null){var o=bb.get(s);return o!==void 0?o:(i={value:s,source:i,stack:F(i)},bb.set(s,i),i)}return{value:s,source:i,stack:F(i)}}var gl=[],vl=0,dh=null,Zc=0,ts=[],ns=0,Zi=null,zs=1,Us="";function hi(s,i){gl[vl++]=Zc,gl[vl++]=dh,dh=s,Zc=i}function xb(s,i,o){ts[ns++]=zs,ts[ns++]=Us,ts[ns++]=Zi,Zi=s;var d=zs;s=Us;var g=32-nn(d)-1;d&=~(1<<g),o+=1;var v=32-nn(i)+g;if(30<v){var S=g-g%5;v=(d&(1<<S)-1).toString(32),d>>=S,g-=S,zs=1<<32-nn(i)+g|o<<g|d,Us=v+s}else zs=1<<v|o<<g|d,Us=s}function Vp(s){s.return!==null&&(hi(s,1),xb(s,1,0))}function zp(s){for(;s===dh;)dh=gl[--vl],gl[vl]=null,Zc=gl[--vl],gl[vl]=null;for(;s===Zi;)Zi=ts[--ns],ts[ns]=null,Us=ts[--ns],ts[ns]=null,zs=ts[--ns],ts[ns]=null}function _b(s,i){ts[ns++]=zs,ts[ns++]=Us,ts[ns++]=Zi,zs=i.id,Us=i.overflow,Zi=s}var Wn=null,an=null,Mt=!1,ea=null,rs=!1,Up=Error(r(519));function ta(s){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw eu(es(i,s)),Up}function wb(s){var i=s.stateNode,o=s.type,d=s.memoizedProps;switch(i[En]=s,i[Hn]=d,o){case"dialog":kt("cancel",i),kt("close",i);break;case"iframe":case"object":case"embed":kt("load",i);break;case"video":case"audio":for(o=0;o<wu.length;o++)kt(wu[o],i);break;case"source":kt("error",i);break;case"img":case"image":case"link":kt("error",i),kt("load",i);break;case"details":kt("toggle",i);break;case"input":kt("invalid",i),Hd(i,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":kt("invalid",i);break;case"textarea":kt("invalid",i),Gi(i,d.value,d.defaultValue,d.children)}o=d.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||d.suppressHydrationWarning===!0||z2(i.textContent,o)?(d.popover!=null&&(kt("beforetoggle",i),kt("toggle",i)),d.onScroll!=null&&kt("scroll",i),d.onScrollEnd!=null&&kt("scrollend",i),d.onClick!=null&&(i.onclick=ds),i=!0):i=!1,i||ta(s,!0)}function Sb(s){for(Wn=s.return;Wn;)switch(Wn.tag){case 5:case 31:case 13:rs=!1;return;case 27:case 3:rs=!0;return;default:Wn=Wn.return}}function yl(s){if(s!==Wn)return!1;if(!Mt)return Sb(s),Mt=!0,!1;var i=s.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=s.type,o=!(o!=="form"&&o!=="button")||s0(s.type,s.memoizedProps)),o=!o),o&&an&&ta(s),Sb(s),i===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));an=K2(s)}else if(i===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));an=K2(s)}else i===27?(i=an,pa(s.type)?(s=c0,c0=null,an=s):an=i):an=Wn?is(s.stateNode.nextSibling):null;return!0}function fo(){an=Wn=null,Mt=!1}function Bp(){var s=ea;return s!==null&&(Cr===null?Cr=s:Cr.push.apply(Cr,s),ea=null),s}function eu(s){ea===null?ea=[s]:ea.push(s)}var Fp=H(null),mo=null,fi=null;function na(s,i,o){ie(Fp,i._currentValue),i._currentValue=o}function mi(s){s._currentValue=Fp.current,W(Fp)}function $p(s,i,o){for(;s!==null;){var d=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),s===o)break;s=s.return}}function Hp(s,i,o,d){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var v=g.dependencies;if(v!==null){var S=g.child;v=v.firstContext;e:for(;v!==null;){var D=v;v=g;for(var G=0;G<i.length;G++)if(D.context===i[G]){v.lanes|=o,D=v.alternate,D!==null&&(D.lanes|=o),$p(v.return,o,s),d||(S=null);break e}v=D.next}}else if(g.tag===18){if(S=g.return,S===null)throw Error(r(341));S.lanes|=o,v=S.alternate,v!==null&&(v.lanes|=o),$p(S,o,s),S=null}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===s){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}}function bl(s,i,o,d){s=null;for(var g=i,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var S=g.alternate;if(S===null)throw Error(r(387));if(S=S.memoizedProps,S!==null){var D=g.type;Pr(g.pendingProps.value,S.value)||(s!==null?s.push(D):s=[D])}}else if(g===ae.current){if(S=g.alternate,S===null)throw Error(r(387));S.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(ku):s=[ku])}g=g.return}s!==null&&Hp(i,s,o,d),i.flags|=262144}function hh(s){for(s=s.firstContext;s!==null;){if(!Pr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function po(s){mo=s,fi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Jn(s){return Eb(mo,s)}function fh(s,i){return mo===null&&po(s),Eb(s,i)}function Eb(s,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},fi===null){if(s===null)throw Error(r(308));fi=i,s.dependencies={lanes:0,firstContext:i},s.flags|=524288}else fi=fi.next=i;return o}var e5=typeof AbortController<"u"?AbortController:function(){var s=[],i=this.signal={aborted:!1,addEventListener:function(o,d){s.push(d)}};this.abort=function(){i.aborted=!0,s.forEach(function(o){return o()})}},t5=t.unstable_scheduleCallback,n5=t.unstable_NormalPriority,kn={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qp(){return{controller:new e5,data:new Map,refCount:0}}function tu(s){s.refCount--,s.refCount===0&&t5(n5,function(){s.controller.abort()})}var nu=null,Gp=0,xl=0,_l=null;function r5(s,i){if(nu===null){var o=nu=[];Gp=0,xl=Qg(),_l={status:"pending",value:void 0,then:function(d){o.push(d)}}}return Gp++,i.then(Cb,Cb),i}function Cb(){if(--Gp===0&&nu!==null){_l!==null&&(_l.status="fulfilled");var s=nu;nu=null,xl=0,_l=null;for(var i=0;i<s.length;i++)(0,s[i])()}}function s5(s,i){var o=[],d={status:"pending",value:null,reason:null,then:function(g){o.push(g)}};return s.then(function(){d.status="fulfilled",d.value=i;for(var g=0;g<o.length;g++)(0,o[g])(i)},function(g){for(d.status="rejected",d.reason=g,g=0;g<o.length;g++)(0,o[g])(void 0)}),d}var Tb=Y.S;Y.S=function(s,i){c2=ct(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&r5(s,i),Tb!==null&&Tb(s,i)};var go=H(null);function Yp(){var s=go.current;return s!==null?s:en.pooledCache}function mh(s,i){i===null?ie(go,go.current):ie(go,i.pool)}function kb(){var s=Yp();return s===null?null:{parent:kn._currentValue,pool:s}}var wl=Error(r(460)),Kp=Error(r(474)),ph=Error(r(542)),gh={then:function(){}};function Nb(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Ab(s,i,o){switch(o=s[o],o===void 0?s.push(i):o!==i&&(i.then(ds,ds),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,jb(s),s;default:if(typeof i.status=="string")i.then(ds,ds);else{if(s=en,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=i,s.status="pending",s.then(function(d){if(i.status==="pending"){var g=i;g.status="fulfilled",g.value=d}},function(d){if(i.status==="pending"){var g=i;g.status="rejected",g.reason=d}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,jb(s),s}throw yo=i,wl}}function vo(s){try{var i=s._init;return i(s._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(yo=o,wl):o}}var yo=null;function Rb(){if(yo===null)throw Error(r(459));var s=yo;return yo=null,s}function jb(s){if(s===wl||s===ph)throw Error(r(483))}var Sl=null,ru=0;function vh(s){var i=ru;return ru+=1,Sl===null&&(Sl=[]),Ab(Sl,s,i)}function su(s,i){i=i.props.ref,s.ref=i!==void 0?i:null}function yh(s,i){throw i.$$typeof===x?Error(r(525)):(s=Object.prototype.toString.call(i),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s)))}function Ib(s){function i(X,K){if(s){var ne=X.deletions;ne===null?(X.deletions=[K],X.flags|=16):ne.push(K)}}function o(X,K){if(!s)return null;for(;K!==null;)i(X,K),K=K.sibling;return null}function d(X){for(var K=new Map;X!==null;)X.key!==null?K.set(X.key,X):K.set(X.index,X),X=X.sibling;return K}function g(X,K){return X=di(X,K),X.index=0,X.sibling=null,X}function v(X,K,ne){return X.index=ne,s?(ne=X.alternate,ne!==null?(ne=ne.index,ne<K?(X.flags|=67108866,K):ne):(X.flags|=67108866,K)):(X.flags|=1048576,K)}function S(X){return s&&X.alternate===null&&(X.flags|=67108866),X}function D(X,K,ne,be){return K===null||K.tag!==6?(K=Op(ne,X.mode,be),K.return=X,K):(K=g(K,ne),K.return=X,K)}function G(X,K,ne,be){var Ze=ne.type;return Ze===j?me(X,K,ne.props.children,be,ne.key):K!==null&&(K.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===E&&vo(Ze)===K.type)?(K=g(K,ne.props),su(K,ne),K.return=X,K):(K=uh(ne.type,ne.key,ne.props,null,X.mode,be),su(K,ne),K.return=X,K)}function re(X,K,ne,be){return K===null||K.tag!==4||K.stateNode.containerInfo!==ne.containerInfo||K.stateNode.implementation!==ne.implementation?(K=Lp(ne,X.mode,be),K.return=X,K):(K=g(K,ne.children||[]),K.return=X,K)}function me(X,K,ne,be,Ze){return K===null||K.tag!==7?(K=ho(ne,X.mode,be,Ze),K.return=X,K):(K=g(K,ne),K.return=X,K)}function xe(X,K,ne){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=Op(""+K,X.mode,ne),K.return=X,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case k:return ne=uh(K.type,K.key,K.props,null,X.mode,ne),su(ne,K),ne.return=X,ne;case R:return K=Lp(K,X.mode,ne),K.return=X,K;case E:return K=vo(K),xe(X,K,ne)}if(le(K)||z(K))return K=ho(K,X.mode,ne,null),K.return=X,K;if(typeof K.then=="function")return xe(X,vh(K),ne);if(K.$$typeof===I)return xe(X,fh(X,K),ne);yh(X,K)}return null}function oe(X,K,ne,be){var Ze=K!==null?K.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return Ze!==null?null:D(X,K,""+ne,be);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case k:return ne.key===Ze?G(X,K,ne,be):null;case R:return ne.key===Ze?re(X,K,ne,be):null;case E:return ne=vo(ne),oe(X,K,ne,be)}if(le(ne)||z(ne))return Ze!==null?null:me(X,K,ne,be,null);if(typeof ne.then=="function")return oe(X,K,vh(ne),be);if(ne.$$typeof===I)return oe(X,K,fh(X,ne),be);yh(X,ne)}return null}function ue(X,K,ne,be,Ze){if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return X=X.get(ne)||null,D(K,X,""+be,Ze);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case k:return X=X.get(be.key===null?ne:be.key)||null,G(K,X,be,Ze);case R:return X=X.get(be.key===null?ne:be.key)||null,re(K,X,be,Ze);case E:return be=vo(be),ue(X,K,ne,be,Ze)}if(le(be)||z(be))return X=X.get(ne)||null,me(K,X,be,Ze,null);if(typeof be.then=="function")return ue(X,K,ne,vh(be),Ze);if(be.$$typeof===I)return ue(X,K,ne,fh(K,be),Ze);yh(K,be)}return null}function He(X,K,ne,be){for(var Ze=null,Ot=null,Ke=K,_t=K=0,At=null;Ke!==null&&_t<ne.length;_t++){Ke.index>_t?(At=Ke,Ke=null):At=Ke.sibling;var Lt=oe(X,Ke,ne[_t],be);if(Lt===null){Ke===null&&(Ke=At);break}s&&Ke&&Lt.alternate===null&&i(X,Ke),K=v(Lt,K,_t),Ot===null?Ze=Lt:Ot.sibling=Lt,Ot=Lt,Ke=At}if(_t===ne.length)return o(X,Ke),Mt&&hi(X,_t),Ze;if(Ke===null){for(;_t<ne.length;_t++)Ke=xe(X,ne[_t],be),Ke!==null&&(K=v(Ke,K,_t),Ot===null?Ze=Ke:Ot.sibling=Ke,Ot=Ke);return Mt&&hi(X,_t),Ze}for(Ke=d(Ke);_t<ne.length;_t++)At=ue(Ke,X,_t,ne[_t],be),At!==null&&(s&&At.alternate!==null&&Ke.delete(At.key===null?_t:At.key),K=v(At,K,_t),Ot===null?Ze=At:Ot.sibling=At,Ot=At);return s&&Ke.forEach(function(xa){return i(X,xa)}),Mt&&hi(X,_t),Ze}function st(X,K,ne,be){if(ne==null)throw Error(r(151));for(var Ze=null,Ot=null,Ke=K,_t=K=0,At=null,Lt=ne.next();Ke!==null&&!Lt.done;_t++,Lt=ne.next()){Ke.index>_t?(At=Ke,Ke=null):At=Ke.sibling;var xa=oe(X,Ke,Lt.value,be);if(xa===null){Ke===null&&(Ke=At);break}s&&Ke&&xa.alternate===null&&i(X,Ke),K=v(xa,K,_t),Ot===null?Ze=xa:Ot.sibling=xa,Ot=xa,Ke=At}if(Lt.done)return o(X,Ke),Mt&&hi(X,_t),Ze;if(Ke===null){for(;!Lt.done;_t++,Lt=ne.next())Lt=xe(X,Lt.value,be),Lt!==null&&(K=v(Lt,K,_t),Ot===null?Ze=Lt:Ot.sibling=Lt,Ot=Lt);return Mt&&hi(X,_t),Ze}for(Ke=d(Ke);!Lt.done;_t++,Lt=ne.next())Lt=ue(Ke,X,_t,Lt.value,be),Lt!==null&&(s&&Lt.alternate!==null&&Ke.delete(Lt.key===null?_t:Lt.key),K=v(Lt,K,_t),Ot===null?Ze=Lt:Ot.sibling=Lt,Ot=Lt);return s&&Ke.forEach(function(pN){return i(X,pN)}),Mt&&hi(X,_t),Ze}function Zt(X,K,ne,be){if(typeof ne=="object"&&ne!==null&&ne.type===j&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case k:e:{for(var Ze=ne.key;K!==null;){if(K.key===Ze){if(Ze=ne.type,Ze===j){if(K.tag===7){o(X,K.sibling),be=g(K,ne.props.children),be.return=X,X=be;break e}}else if(K.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===E&&vo(Ze)===K.type){o(X,K.sibling),be=g(K,ne.props),su(be,ne),be.return=X,X=be;break e}o(X,K);break}else i(X,K);K=K.sibling}ne.type===j?(be=ho(ne.props.children,X.mode,be,ne.key),be.return=X,X=be):(be=uh(ne.type,ne.key,ne.props,null,X.mode,be),su(be,ne),be.return=X,X=be)}return S(X);case R:e:{for(Ze=ne.key;K!==null;){if(K.key===Ze)if(K.tag===4&&K.stateNode.containerInfo===ne.containerInfo&&K.stateNode.implementation===ne.implementation){o(X,K.sibling),be=g(K,ne.children||[]),be.return=X,X=be;break e}else{o(X,K);break}else i(X,K);K=K.sibling}be=Lp(ne,X.mode,be),be.return=X,X=be}return S(X);case E:return ne=vo(ne),Zt(X,K,ne,be)}if(le(ne))return He(X,K,ne,be);if(z(ne)){if(Ze=z(ne),typeof Ze!="function")throw Error(r(150));return ne=Ze.call(ne),st(X,K,ne,be)}if(typeof ne.then=="function")return Zt(X,K,vh(ne),be);if(ne.$$typeof===I)return Zt(X,K,fh(X,ne),be);yh(X,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,K!==null&&K.tag===6?(o(X,K.sibling),be=g(K,ne),be.return=X,X=be):(o(X,K),be=Op(ne,X.mode,be),be.return=X,X=be),S(X)):o(X,K)}return function(X,K,ne,be){try{ru=0;var Ze=Zt(X,K,ne,be);return Sl=null,Ze}catch(Ke){if(Ke===wl||Ke===ph)throw Ke;var Ot=Or(29,Ke,null,X.mode);return Ot.lanes=be,Ot.return=X,Ot}finally{}}}var bo=Ib(!0),Db=Ib(!1),ra=!1;function Qp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xp(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function sa(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function ia(s,i,o){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(Ft&2)!==0){var g=d.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),d.pending=i,i=ch(s),gb(s,null,o),i}return lh(s,d,i,o),ch(s)}function iu(s,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var d=i.lanes;d&=s.pendingLanes,o|=d,i.lanes=o,$i(s,o)}}function Wp(s,i){var o=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,o===d)){var g=null,v=null;if(o=o.firstBaseUpdate,o!==null){do{var S={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};v===null?g=v=S:v=v.next=S,o=o.next}while(o!==null);v===null?g=v=i:v=v.next=i}else g=v=i;o={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:d.shared,callbacks:d.callbacks},s.updateQueue=o;return}s=o.lastBaseUpdate,s===null?o.firstBaseUpdate=i:s.next=i,o.lastBaseUpdate=i}var Jp=!1;function au(){if(Jp){var s=_l;if(s!==null)throw s}}function ou(s,i,o,d){Jp=!1;var g=s.updateQueue;ra=!1;var v=g.firstBaseUpdate,S=g.lastBaseUpdate,D=g.shared.pending;if(D!==null){g.shared.pending=null;var G=D,re=G.next;G.next=null,S===null?v=re:S.next=re,S=G;var me=s.alternate;me!==null&&(me=me.updateQueue,D=me.lastBaseUpdate,D!==S&&(D===null?me.firstBaseUpdate=re:D.next=re,me.lastBaseUpdate=G))}if(v!==null){var xe=g.baseState;S=0,me=re=G=null,D=v;do{var oe=D.lane&-536870913,ue=oe!==D.lane;if(ue?(Nt&oe)===oe:(d&oe)===oe){oe!==0&&oe===xl&&(Jp=!0),me!==null&&(me=me.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var He=s,st=D;oe=i;var Zt=o;switch(st.tag){case 1:if(He=st.payload,typeof He=="function"){xe=He.call(Zt,xe,oe);break e}xe=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=st.payload,oe=typeof He=="function"?He.call(Zt,xe,oe):He,oe==null)break e;xe=b({},xe,oe);break e;case 2:ra=!0}}oe=D.callback,oe!==null&&(s.flags|=64,ue&&(s.flags|=8192),ue=g.callbacks,ue===null?g.callbacks=[oe]:ue.push(oe))}else ue={lane:oe,tag:D.tag,payload:D.payload,callback:D.callback,next:null},me===null?(re=me=ue,G=xe):me=me.next=ue,S|=oe;if(D=D.next,D===null){if(D=g.shared.pending,D===null)break;ue=D,D=ue.next,ue.next=null,g.lastBaseUpdate=ue,g.shared.pending=null}}while(!0);me===null&&(G=xe),g.baseState=G,g.firstBaseUpdate=re,g.lastBaseUpdate=me,v===null&&(g.shared.lanes=0),ua|=S,s.lanes=S,s.memoizedState=xe}}function Mb(s,i){if(typeof s!="function")throw Error(r(191,s));s.call(i)}function Pb(s,i){var o=s.callbacks;if(o!==null)for(s.callbacks=null,s=0;s<o.length;s++)Mb(o[s],i)}var El=H(null),bh=H(0);function Ob(s,i){s=Si,ie(bh,s),ie(El,i),Si=s|i.baseLanes}function Zp(){ie(bh,Si),ie(El,El.current)}function eg(){Si=bh.current,W(El),W(bh)}var Lr=H(null),ss=null;function aa(s){var i=s.alternate;ie(bn,bn.current&1),ie(Lr,s),ss===null&&(i===null||El.current!==null||i.memoizedState!==null)&&(ss=s)}function tg(s){ie(bn,bn.current),ie(Lr,s),ss===null&&(ss=s)}function Lb(s){s.tag===22?(ie(bn,bn.current),ie(Lr,s),ss===null&&(ss=s)):oa()}function oa(){ie(bn,bn.current),ie(Lr,Lr.current)}function Vr(s){W(Lr),ss===s&&(ss=null),W(bn)}var bn=H(0);function xh(s){for(var i=s;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o0(o)||l0(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var pi=0,yt=null,Wt=null,Nn=null,_h=!1,Cl=!1,xo=!1,wh=0,lu=0,Tl=null,i5=0;function mn(){throw Error(r(321))}function ng(s,i){if(i===null)return!1;for(var o=0;o<i.length&&o<s.length;o++)if(!Pr(s[o],i[o]))return!1;return!0}function rg(s,i,o,d,g,v){return pi=v,yt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Y.H=s===null||s.memoizedState===null?xx:yg,xo=!1,v=o(d,g),xo=!1,Cl&&(v=zb(i,o,d,g)),Vb(s),v}function Vb(s){Y.H=du;var i=Wt!==null&&Wt.next!==null;if(pi=0,Nn=Wt=yt=null,_h=!1,lu=0,Tl=null,i)throw Error(r(300));s===null||An||(s=s.dependencies,s!==null&&hh(s)&&(An=!0))}function zb(s,i,o,d){yt=s;var g=0;do{if(Cl&&(Tl=null),lu=0,Cl=!1,25<=g)throw Error(r(301));if(g+=1,Nn=Wt=null,s.updateQueue!=null){var v=s.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}Y.H=_x,v=i(o,d)}while(Cl);return v}function a5(){var s=Y.H,i=s.useState()[0];return i=typeof i.then=="function"?cu(i):i,s=s.useState()[0],(Wt!==null?Wt.memoizedState:null)!==s&&(yt.flags|=1024),i}function sg(){var s=wh!==0;return wh=0,s}function ig(s,i,o){i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~o}function ag(s){if(_h){for(s=s.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}_h=!1}pi=0,Nn=Wt=yt=null,Cl=!1,lu=wh=0,Tl=null}function pr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nn===null?yt.memoizedState=Nn=s:Nn=Nn.next=s,Nn}function xn(){if(Wt===null){var s=yt.alternate;s=s!==null?s.memoizedState:null}else s=Wt.next;var i=Nn===null?yt.memoizedState:Nn.next;if(i!==null)Nn=i,Wt=s;else{if(s===null)throw yt.alternate===null?Error(r(467)):Error(r(310));Wt=s,s={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},Nn===null?yt.memoizedState=Nn=s:Nn=Nn.next=s}return Nn}function Sh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cu(s){var i=lu;return lu+=1,Tl===null&&(Tl=[]),s=Ab(Tl,s,i),i=yt,(Nn===null?i.memoizedState:Nn.next)===null&&(i=i.alternate,Y.H=i===null||i.memoizedState===null?xx:yg),s}function Eh(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return cu(s);if(s.$$typeof===I)return Jn(s)}throw Error(r(438,String(s)))}function og(s){var i=null,o=yt.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var d=yt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(i={data:d.data.map(function(g){return g.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=Sh(),yt.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(s),d=0;d<s;d++)o[d]=P;return i.index++,o}function gi(s,i){return typeof i=="function"?i(s):i}function Ch(s){var i=xn();return lg(i,Wt,s)}function lg(s,i,o){var d=s.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=o;var g=s.baseQueue,v=d.pending;if(v!==null){if(g!==null){var S=g.next;g.next=v.next,v.next=S}i.baseQueue=g=v,d.pending=null}if(v=s.baseState,g===null)s.memoizedState=v;else{i=g.next;var D=S=null,G=null,re=i,me=!1;do{var xe=re.lane&-536870913;if(xe!==re.lane?(Nt&xe)===xe:(pi&xe)===xe){var oe=re.revertLane;if(oe===0)G!==null&&(G=G.next={lane:0,revertLane:0,gesture:null,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),xe===xl&&(me=!0);else if((pi&oe)===oe){re=re.next,oe===xl&&(me=!0);continue}else xe={lane:0,revertLane:re.revertLane,gesture:null,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},G===null?(D=G=xe,S=v):G=G.next=xe,yt.lanes|=oe,ua|=oe;xe=re.action,xo&&o(v,xe),v=re.hasEagerState?re.eagerState:o(v,xe)}else oe={lane:xe,revertLane:re.revertLane,gesture:re.gesture,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},G===null?(D=G=oe,S=v):G=G.next=oe,yt.lanes|=xe,ua|=xe;re=re.next}while(re!==null&&re!==i);if(G===null?S=v:G.next=D,!Pr(v,s.memoizedState)&&(An=!0,me&&(o=_l,o!==null)))throw o;s.memoizedState=v,s.baseState=S,s.baseQueue=G,d.lastRenderedState=v}return g===null&&(d.lanes=0),[s.memoizedState,d.dispatch]}function cg(s){var i=xn(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=s;var d=o.dispatch,g=o.pending,v=i.memoizedState;if(g!==null){o.pending=null;var S=g=g.next;do v=s(v,S.action),S=S.next;while(S!==g);Pr(v,i.memoizedState)||(An=!0),i.memoizedState=v,i.baseQueue===null&&(i.baseState=v),o.lastRenderedState=v}return[v,d]}function Ub(s,i,o){var d=yt,g=xn(),v=Mt;if(v){if(o===void 0)throw Error(r(407));o=o()}else o=i();var S=!Pr((Wt||g).memoizedState,o);if(S&&(g.memoizedState=o,An=!0),g=g.queue,hg($b.bind(null,d,g,s),[s]),g.getSnapshot!==i||S||Nn!==null&&Nn.memoizedState.tag&1){if(d.flags|=2048,kl(9,{destroy:void 0},Fb.bind(null,d,g,o,i),null),en===null)throw Error(r(349));v||(pi&127)!==0||Bb(d,i,o)}return o}function Bb(s,i,o){s.flags|=16384,s={getSnapshot:i,value:o},i=yt.updateQueue,i===null?(i=Sh(),yt.updateQueue=i,i.stores=[s]):(o=i.stores,o===null?i.stores=[s]:o.push(s))}function Fb(s,i,o,d){i.value=o,i.getSnapshot=d,Hb(i)&&qb(s)}function $b(s,i,o){return o(function(){Hb(i)&&qb(s)})}function Hb(s){var i=s.getSnapshot;s=s.value;try{var o=i();return!Pr(s,o)}catch{return!0}}function qb(s){var i=uo(s,2);i!==null&&Tr(i,s,2)}function ug(s){var i=pr();if(typeof s=="function"){var o=s;if(s=o(),xo){vn(!0);try{o()}finally{vn(!1)}}}return i.memoizedState=i.baseState=s,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:s},i}function Gb(s,i,o,d){return s.baseState=o,lg(s,Wt,typeof d=="function"?d:gi)}function o5(s,i,o,d,g){if(Nh(s))throw Error(r(485));if(s=i.action,s!==null){var v={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){v.listeners.push(S)}};Y.T!==null?o(!0):v.isTransition=!1,d(v),o=i.pending,o===null?(v.next=i.pending=v,Yb(i,v)):(v.next=o.next,i.pending=o.next=v)}}function Yb(s,i){var o=i.action,d=i.payload,g=s.state;if(i.isTransition){var v=Y.T,S={};Y.T=S;try{var D=o(g,d),G=Y.S;G!==null&&G(S,D),Kb(s,i,D)}catch(re){dg(s,i,re)}finally{v!==null&&S.types!==null&&(v.types=S.types),Y.T=v}}else try{v=o(g,d),Kb(s,i,v)}catch(re){dg(s,i,re)}}function Kb(s,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(d){Qb(s,i,d)},function(d){return dg(s,i,d)}):Qb(s,i,o)}function Qb(s,i,o){i.status="fulfilled",i.value=o,Xb(i),s.state=o,i=s.pending,i!==null&&(o=i.next,o===i?s.pending=null:(o=o.next,i.next=o,Yb(s,o)))}function dg(s,i,o){var d=s.pending;if(s.pending=null,d!==null){d=d.next;do i.status="rejected",i.reason=o,Xb(i),i=i.next;while(i!==d)}s.action=null}function Xb(s){s=s.listeners;for(var i=0;i<s.length;i++)(0,s[i])()}function Wb(s,i){return i}function Jb(s,i){if(Mt){var o=en.formState;if(o!==null){e:{var d=yt;if(Mt){if(an){t:{for(var g=an,v=rs;g.nodeType!==8;){if(!v){g=null;break t}if(g=is(g.nextSibling),g===null){g=null;break t}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){an=is(g.nextSibling),d=g.data==="F!";break e}}ta(d)}d=!1}d&&(i=o[0])}}return o=pr(),o.memoizedState=o.baseState=i,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wb,lastRenderedState:i},o.queue=d,o=vx.bind(null,yt,d),d.dispatch=o,d=ug(!1),v=vg.bind(null,yt,!1,d.queue),d=pr(),g={state:i,dispatch:null,action:s,pending:null},d.queue=g,o=o5.bind(null,yt,g,v,o),g.dispatch=o,d.memoizedState=s,[i,o,!1]}function Zb(s){var i=xn();return ex(i,Wt,s)}function ex(s,i,o){if(i=lg(s,i,Wb)[0],s=Ch(gi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var d=cu(i)}catch(S){throw S===wl?ph:S}else d=i;i=xn();var g=i.queue,v=g.dispatch;return o!==i.memoizedState&&(yt.flags|=2048,kl(9,{destroy:void 0},l5.bind(null,g,o),null)),[d,v,s]}function l5(s,i){s.action=i}function tx(s){var i=xn(),o=Wt;if(o!==null)return ex(i,o,s);xn(),i=i.memoizedState,o=xn();var d=o.queue.dispatch;return o.memoizedState=s,[i,d,!1]}function kl(s,i,o,d){return s={tag:s,create:o,deps:d,inst:i,next:null},i=yt.updateQueue,i===null&&(i=Sh(),yt.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=s.next=s:(d=o.next,o.next=s,s.next=d,i.lastEffect=s),s}function nx(){return xn().memoizedState}function Th(s,i,o,d){var g=pr();yt.flags|=s,g.memoizedState=kl(1|i,{destroy:void 0},o,d===void 0?null:d)}function kh(s,i,o,d){var g=xn();d=d===void 0?null:d;var v=g.memoizedState.inst;Wt!==null&&d!==null&&ng(d,Wt.memoizedState.deps)?g.memoizedState=kl(i,v,o,d):(yt.flags|=s,g.memoizedState=kl(1|i,v,o,d))}function rx(s,i){Th(8390656,8,s,i)}function hg(s,i){kh(2048,8,s,i)}function c5(s){yt.flags|=4;var i=yt.updateQueue;if(i===null)i=Sh(),yt.updateQueue=i,i.events=[s];else{var o=i.events;o===null?i.events=[s]:o.push(s)}}function sx(s){var i=xn().memoizedState;return c5({ref:i,nextImpl:s}),function(){if((Ft&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function ix(s,i){return kh(4,2,s,i)}function ax(s,i){return kh(4,4,s,i)}function ox(s,i){if(typeof i=="function"){s=s();var o=i(s);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function lx(s,i,o){o=o!=null?o.concat([s]):null,kh(4,4,ox.bind(null,i,s),o)}function fg(){}function cx(s,i){var o=xn();i=i===void 0?null:i;var d=o.memoizedState;return i!==null&&ng(i,d[1])?d[0]:(o.memoizedState=[s,i],s)}function ux(s,i){var o=xn();i=i===void 0?null:i;var d=o.memoizedState;if(i!==null&&ng(i,d[1]))return d[0];if(d=s(),xo){vn(!0);try{s()}finally{vn(!1)}}return o.memoizedState=[d,i],d}function mg(s,i,o){return o===void 0||(pi&1073741824)!==0&&(Nt&261930)===0?s.memoizedState=i:(s.memoizedState=o,s=d2(),yt.lanes|=s,ua|=s,o)}function dx(s,i,o,d){return Pr(o,i)?o:El.current!==null?(s=mg(s,o,d),Pr(s,i)||(An=!0),s):(pi&42)===0||(pi&1073741824)!==0&&(Nt&261930)===0?(An=!0,s.memoizedState=o):(s=d2(),yt.lanes|=s,ua|=s,i)}function hx(s,i,o,d,g){var v=ee.p;ee.p=v!==0&&8>v?v:8;var S=Y.T,D={};Y.T=D,vg(s,!1,i,o);try{var G=g(),re=Y.S;if(re!==null&&re(D,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var me=s5(G,d);uu(s,i,me,Br(s))}else uu(s,i,d,Br(s))}catch(xe){uu(s,i,{then:function(){},status:"rejected",reason:xe},Br())}finally{ee.p=v,S!==null&&D.types!==null&&(S.types=D.types),Y.T=S}}function u5(){}function pg(s,i,o,d){if(s.tag!==5)throw Error(r(476));var g=fx(s).queue;hx(s,g,i,Z,o===null?u5:function(){return mx(s),o(d)})}function fx(s){var i=s.memoizedState;if(i!==null)return i;i={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:Z},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:o},next:null},s.memoizedState=i,s=s.alternate,s!==null&&(s.memoizedState=i),i}function mx(s){var i=fx(s);i.next===null&&(i=s.alternate.memoizedState),uu(s,i.next.queue,{},Br())}function gg(){return Jn(ku)}function px(){return xn().memoizedState}function gx(){return xn().memoizedState}function d5(s){for(var i=s.return;i!==null;){switch(i.tag){case 24:case 3:var o=Br();s=sa(o);var d=ia(i,s,o);d!==null&&(Tr(d,i,o),iu(d,i,o)),i={cache:qp()},s.payload=i;return}i=i.return}}function h5(s,i,o){var d=Br();o={lane:d,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Nh(s)?yx(i,o):(o=Mp(s,i,o,d),o!==null&&(Tr(o,s,d),bx(o,i,d)))}function vx(s,i,o){var d=Br();uu(s,i,o,d)}function uu(s,i,o,d){var g={lane:d,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Nh(s))yx(i,g);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=i.lastRenderedReducer,v!==null))try{var S=i.lastRenderedState,D=v(S,o);if(g.hasEagerState=!0,g.eagerState=D,Pr(D,S))return lh(s,i,g,0),en===null&&oh(),!1}catch{}finally{}if(o=Mp(s,i,g,d),o!==null)return Tr(o,s,d),bx(o,i,d),!0}return!1}function vg(s,i,o,d){if(d={lane:2,revertLane:Qg(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Nh(s)){if(i)throw Error(r(479))}else i=Mp(s,o,d,2),i!==null&&Tr(i,s,2)}function Nh(s){var i=s.alternate;return s===yt||i!==null&&i===yt}function yx(s,i){Cl=_h=!0;var o=s.pending;o===null?i.next=i:(i.next=o.next,o.next=i),s.pending=i}function bx(s,i,o){if((o&4194048)!==0){var d=i.lanes;d&=s.pendingLanes,o|=d,i.lanes=o,$i(s,o)}}var du={readContext:Jn,use:Eh,useCallback:mn,useContext:mn,useEffect:mn,useImperativeHandle:mn,useLayoutEffect:mn,useInsertionEffect:mn,useMemo:mn,useReducer:mn,useRef:mn,useState:mn,useDebugValue:mn,useDeferredValue:mn,useTransition:mn,useSyncExternalStore:mn,useId:mn,useHostTransitionStatus:mn,useFormState:mn,useActionState:mn,useOptimistic:mn,useMemoCache:mn,useCacheRefresh:mn};du.useEffectEvent=mn;var xx={readContext:Jn,use:Eh,useCallback:function(s,i){return pr().memoizedState=[s,i===void 0?null:i],s},useContext:Jn,useEffect:rx,useImperativeHandle:function(s,i,o){o=o!=null?o.concat([s]):null,Th(4194308,4,ox.bind(null,i,s),o)},useLayoutEffect:function(s,i){return Th(4194308,4,s,i)},useInsertionEffect:function(s,i){Th(4,2,s,i)},useMemo:function(s,i){var o=pr();i=i===void 0?null:i;var d=s();if(xo){vn(!0);try{s()}finally{vn(!1)}}return o.memoizedState=[d,i],d},useReducer:function(s,i,o){var d=pr();if(o!==void 0){var g=o(i);if(xo){vn(!0);try{o(i)}finally{vn(!1)}}}else g=i;return d.memoizedState=d.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},d.queue=s,s=s.dispatch=h5.bind(null,yt,s),[d.memoizedState,s]},useRef:function(s){var i=pr();return s={current:s},i.memoizedState=s},useState:function(s){s=ug(s);var i=s.queue,o=vx.bind(null,yt,i);return i.dispatch=o,[s.memoizedState,o]},useDebugValue:fg,useDeferredValue:function(s,i){var o=pr();return mg(o,s,i)},useTransition:function(){var s=ug(!1);return s=hx.bind(null,yt,s.queue,!0,!1),pr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,i,o){var d=yt,g=pr();if(Mt){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),en===null)throw Error(r(349));(Nt&127)!==0||Bb(d,i,o)}g.memoizedState=o;var v={value:o,getSnapshot:i};return g.queue=v,rx($b.bind(null,d,v,s),[s]),d.flags|=2048,kl(9,{destroy:void 0},Fb.bind(null,d,v,o,i),null),o},useId:function(){var s=pr(),i=en.identifierPrefix;if(Mt){var o=Us,d=zs;o=(d&~(1<<32-nn(d)-1)).toString(32)+o,i="_"+i+"R_"+o,o=wh++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=i5++,i="_"+i+"r_"+o.toString(32)+"_";return s.memoizedState=i},useHostTransitionStatus:gg,useFormState:Jb,useActionState:Jb,useOptimistic:function(s){var i=pr();i.memoizedState=i.baseState=s;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=vg.bind(null,yt,!0,o),o.dispatch=i,[s,i]},useMemoCache:og,useCacheRefresh:function(){return pr().memoizedState=d5.bind(null,yt)},useEffectEvent:function(s){var i=pr(),o={impl:s};return i.memoizedState=o,function(){if((Ft&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},yg={readContext:Jn,use:Eh,useCallback:cx,useContext:Jn,useEffect:hg,useImperativeHandle:lx,useInsertionEffect:ix,useLayoutEffect:ax,useMemo:ux,useReducer:Ch,useRef:nx,useState:function(){return Ch(gi)},useDebugValue:fg,useDeferredValue:function(s,i){var o=xn();return dx(o,Wt.memoizedState,s,i)},useTransition:function(){var s=Ch(gi)[0],i=xn().memoizedState;return[typeof s=="boolean"?s:cu(s),i]},useSyncExternalStore:Ub,useId:px,useHostTransitionStatus:gg,useFormState:Zb,useActionState:Zb,useOptimistic:function(s,i){var o=xn();return Gb(o,Wt,s,i)},useMemoCache:og,useCacheRefresh:gx};yg.useEffectEvent=sx;var _x={readContext:Jn,use:Eh,useCallback:cx,useContext:Jn,useEffect:hg,useImperativeHandle:lx,useInsertionEffect:ix,useLayoutEffect:ax,useMemo:ux,useReducer:cg,useRef:nx,useState:function(){return cg(gi)},useDebugValue:fg,useDeferredValue:function(s,i){var o=xn();return Wt===null?mg(o,s,i):dx(o,Wt.memoizedState,s,i)},useTransition:function(){var s=cg(gi)[0],i=xn().memoizedState;return[typeof s=="boolean"?s:cu(s),i]},useSyncExternalStore:Ub,useId:px,useHostTransitionStatus:gg,useFormState:tx,useActionState:tx,useOptimistic:function(s,i){var o=xn();return Wt!==null?Gb(o,Wt,s,i):(o.baseState=s,[s,o.queue.dispatch])},useMemoCache:og,useCacheRefresh:gx};_x.useEffectEvent=sx;function bg(s,i,o,d){i=s.memoizedState,o=o(d,i),o=o==null?i:b({},i,o),s.memoizedState=o,s.lanes===0&&(s.updateQueue.baseState=o)}var xg={enqueueSetState:function(s,i,o){s=s._reactInternals;var d=Br(),g=sa(d);g.payload=i,o!=null&&(g.callback=o),i=ia(s,g,d),i!==null&&(Tr(i,s,d),iu(i,s,d))},enqueueReplaceState:function(s,i,o){s=s._reactInternals;var d=Br(),g=sa(d);g.tag=1,g.payload=i,o!=null&&(g.callback=o),i=ia(s,g,d),i!==null&&(Tr(i,s,d),iu(i,s,d))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var o=Br(),d=sa(o);d.tag=2,i!=null&&(d.callback=i),i=ia(s,d,o),i!==null&&(Tr(i,s,o),iu(i,s,o))}};function wx(s,i,o,d,g,v,S){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,v,S):i.prototype&&i.prototype.isPureReactComponent?!Wc(o,d)||!Wc(g,v):!0}function Sx(s,i,o,d){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,d),i.state!==s&&xg.enqueueReplaceState(i,i.state,null)}function _o(s,i){var o=i;if("ref"in i){o={};for(var d in i)d!=="ref"&&(o[d]=i[d])}if(s=s.defaultProps){o===i&&(o=b({},o));for(var g in s)o[g]===void 0&&(o[g]=s[g])}return o}function Ex(s){ah(s)}function Cx(s){console.error(s)}function Tx(s){ah(s)}function Ah(s,i){try{var o=s.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(d){setTimeout(function(){throw d})}}function kx(s,i,o){try{var d=s.onCaughtError;d(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function _g(s,i,o){return o=sa(o),o.tag=3,o.payload={element:null},o.callback=function(){Ah(s,i)},o}function Nx(s){return s=sa(s),s.tag=3,s}function Ax(s,i,o,d){var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var v=d.value;s.payload=function(){return g(v)},s.callback=function(){kx(i,o,d)}}var S=o.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(s.callback=function(){kx(i,o,d),typeof g!="function"&&(da===null?da=new Set([this]):da.add(this));var D=d.stack;this.componentDidCatch(d.value,{componentStack:D!==null?D:""})})}function f5(s,i,o,d,g){if(o.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(i=o.alternate,i!==null&&bl(i,o,g,!0),o=Lr.current,o!==null){switch(o.tag){case 31:case 13:return ss===null?Bh():o.alternate===null&&pn===0&&(pn=3),o.flags&=-257,o.flags|=65536,o.lanes=g,d===gh?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([d]):i.add(d),Gg(s,d,g)),!1;case 22:return o.flags|=65536,d===gh?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([d])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([d]):o.add(d)),Gg(s,d,g)),!1}throw Error(r(435,o.tag))}return Gg(s,d,g),Bh(),!1}if(Mt)return i=Lr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=g,d!==Up&&(s=Error(r(422),{cause:d}),eu(es(s,o)))):(d!==Up&&(i=Error(r(423),{cause:d}),eu(es(i,o))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,d=es(d,o),g=_g(s.stateNode,d,g),Wp(s,g),pn!==4&&(pn=2)),!1;var v=Error(r(520),{cause:d});if(v=es(v,o),bu===null?bu=[v]:bu.push(v),pn!==4&&(pn=2),i===null)return!0;d=es(d,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,s=g&-g,o.lanes|=s,s=_g(o.stateNode,d,s),Wp(o,s),!1;case 1:if(i=o.type,v=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(da===null||!da.has(v))))return o.flags|=65536,g&=-g,o.lanes|=g,g=Nx(g),Ax(g,s,o,d),Wp(o,g),!1}o=o.return}while(o!==null);return!1}var wg=Error(r(461)),An=!1;function Zn(s,i,o,d){i.child=s===null?Db(i,null,o,d):bo(i,s.child,o,d)}function Rx(s,i,o,d,g){o=o.render;var v=i.ref;if("ref"in d){var S={};for(var D in d)D!=="ref"&&(S[D]=d[D])}else S=d;return po(i),d=rg(s,i,o,S,v,g),D=sg(),s!==null&&!An?(ig(s,i,g),vi(s,i,g)):(Mt&&D&&Vp(i),i.flags|=1,Zn(s,i,d,g),i.child)}function jx(s,i,o,d,g){if(s===null){var v=o.type;return typeof v=="function"&&!Pp(v)&&v.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=v,Ix(s,i,v,d,g)):(s=uh(o.type,null,d,i,i.mode,g),s.ref=i.ref,s.return=i,i.child=s)}if(v=s.child,!Rg(s,g)){var S=v.memoizedProps;if(o=o.compare,o=o!==null?o:Wc,o(S,d)&&s.ref===i.ref)return vi(s,i,g)}return i.flags|=1,s=di(v,d),s.ref=i.ref,s.return=i,i.child=s}function Ix(s,i,o,d,g){if(s!==null){var v=s.memoizedProps;if(Wc(v,d)&&s.ref===i.ref)if(An=!1,i.pendingProps=d=v,Rg(s,g))(s.flags&131072)!==0&&(An=!0);else return i.lanes=s.lanes,vi(s,i,g)}return Sg(s,i,o,d,g)}function Dx(s,i,o,d){var g=d.children,v=s!==null?s.memoizedState:null;if(s===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((i.flags&128)!==0){if(v=v!==null?v.baseLanes|o:o,s!==null){for(d=i.child=s.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;d=g&~v}else d=0,i.child=null;return Mx(s,i,v,o,d)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},s!==null&&mh(i,v!==null?v.cachePool:null),v!==null?Ob(i,v):Zp(),Lb(i);else return d=i.lanes=536870912,Mx(s,i,v!==null?v.baseLanes|o:o,o,d)}else v!==null?(mh(i,v.cachePool),Ob(i,v),oa(),i.memoizedState=null):(s!==null&&mh(i,null),Zp(),oa());return Zn(s,i,g,o),i.child}function hu(s,i){return s!==null&&s.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Mx(s,i,o,d,g){var v=Yp();return v=v===null?null:{parent:kn._currentValue,pool:v},i.memoizedState={baseLanes:o,cachePool:v},s!==null&&mh(i,null),Zp(),Lb(i),s!==null&&bl(s,i,d,!0),i.childLanes=g,null}function Rh(s,i){return i=Ih({mode:i.mode,children:i.children},s.mode),i.ref=s.ref,s.child=i,i.return=s,i}function Px(s,i,o){return bo(i,s.child,null,o),s=Rh(i,i.pendingProps),s.flags|=2,Vr(i),i.memoizedState=null,s}function m5(s,i,o){var d=i.pendingProps,g=(i.flags&128)!==0;if(i.flags&=-129,s===null){if(Mt){if(d.mode==="hidden")return s=Rh(i,d),i.lanes=536870912,hu(null,s);if(tg(i),(s=an)?(s=Y2(s,rs),s=s!==null&&s.data==="&"?s:null,s!==null&&(i.memoizedState={dehydrated:s,treeContext:Zi!==null?{id:zs,overflow:Us}:null,retryLane:536870912,hydrationErrors:null},o=yb(s),o.return=i,i.child=o,Wn=i,an=null)):s=null,s===null)throw ta(i);return i.lanes=536870912,null}return Rh(i,d)}var v=s.memoizedState;if(v!==null){var S=v.dehydrated;if(tg(i),g)if(i.flags&256)i.flags&=-257,i=Px(s,i,o);else if(i.memoizedState!==null)i.child=s.child,i.flags|=128,i=null;else throw Error(r(558));else if(An||bl(s,i,o,!1),g=(o&s.childLanes)!==0,An||g){if(d=en,d!==null&&(S=Dc(d,o),S!==0&&S!==v.retryLane))throw v.retryLane=S,uo(s,S),Tr(d,s,S),wg;Bh(),i=Px(s,i,o)}else s=v.treeContext,an=is(S.nextSibling),Wn=i,Mt=!0,ea=null,rs=!1,s!==null&&_b(i,s),i=Rh(i,d),i.flags|=4096;return i}return s=di(s.child,{mode:d.mode,children:d.children}),s.ref=i.ref,i.child=s,s.return=i,s}function jh(s,i){var o=i.ref;if(o===null)s!==null&&s.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(s===null||s.ref!==o)&&(i.flags|=4194816)}}function Sg(s,i,o,d,g){return po(i),o=rg(s,i,o,d,void 0,g),d=sg(),s!==null&&!An?(ig(s,i,g),vi(s,i,g)):(Mt&&d&&Vp(i),i.flags|=1,Zn(s,i,o,g),i.child)}function Ox(s,i,o,d,g,v){return po(i),i.updateQueue=null,o=zb(i,d,o,g),Vb(s),d=sg(),s!==null&&!An?(ig(s,i,v),vi(s,i,v)):(Mt&&d&&Vp(i),i.flags|=1,Zn(s,i,o,v),i.child)}function Lx(s,i,o,d,g){if(po(i),i.stateNode===null){var v=pl,S=o.contextType;typeof S=="object"&&S!==null&&(v=Jn(S)),v=new o(d,v),i.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=xg,i.stateNode=v,v._reactInternals=i,v=i.stateNode,v.props=d,v.state=i.memoizedState,v.refs={},Qp(i),S=o.contextType,v.context=typeof S=="object"&&S!==null?Jn(S):pl,v.state=i.memoizedState,S=o.getDerivedStateFromProps,typeof S=="function"&&(bg(i,o,S,d),v.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(S=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),S!==v.state&&xg.enqueueReplaceState(v,v.state,null),ou(i,d,v,g),au(),v.state=i.memoizedState),typeof v.componentDidMount=="function"&&(i.flags|=4194308),d=!0}else if(s===null){v=i.stateNode;var D=i.memoizedProps,G=_o(o,D);v.props=G;var re=v.context,me=o.contextType;S=pl,typeof me=="object"&&me!==null&&(S=Jn(me));var xe=o.getDerivedStateFromProps;me=typeof xe=="function"||typeof v.getSnapshotBeforeUpdate=="function",D=i.pendingProps!==D,me||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(D||re!==S)&&Sx(i,v,d,S),ra=!1;var oe=i.memoizedState;v.state=oe,ou(i,d,v,g),au(),re=i.memoizedState,D||oe!==re||ra?(typeof xe=="function"&&(bg(i,o,xe,d),re=i.memoizedState),(G=ra||wx(i,o,G,d,oe,re,S))?(me||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(i.flags|=4194308)):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=re),v.props=d,v.state=re,v.context=S,d=G):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{v=i.stateNode,Xp(s,i),S=i.memoizedProps,me=_o(o,S),v.props=me,xe=i.pendingProps,oe=v.context,re=o.contextType,G=pl,typeof re=="object"&&re!==null&&(G=Jn(re)),D=o.getDerivedStateFromProps,(re=typeof D=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==xe||oe!==G)&&Sx(i,v,d,G),ra=!1,oe=i.memoizedState,v.state=oe,ou(i,d,v,g),au();var ue=i.memoizedState;S!==xe||oe!==ue||ra||s!==null&&s.dependencies!==null&&hh(s.dependencies)?(typeof D=="function"&&(bg(i,o,D,d),ue=i.memoizedState),(me=ra||wx(i,o,me,d,oe,ue,G)||s!==null&&s.dependencies!==null&&hh(s.dependencies))?(re||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(d,ue,G),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(d,ue,G)),typeof v.componentDidUpdate=="function"&&(i.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===s.memoizedProps&&oe===s.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&oe===s.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=ue),v.props=d,v.state=ue,v.context=G,d=me):(typeof v.componentDidUpdate!="function"||S===s.memoizedProps&&oe===s.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&oe===s.memoizedState||(i.flags|=1024),d=!1)}return v=d,jh(s,i),d=(i.flags&128)!==0,v||d?(v=i.stateNode,o=d&&typeof o.getDerivedStateFromError!="function"?null:v.render(),i.flags|=1,s!==null&&d?(i.child=bo(i,s.child,null,g),i.child=bo(i,null,o,g)):Zn(s,i,o,g),i.memoizedState=v.state,s=i.child):s=vi(s,i,g),s}function Vx(s,i,o,d){return fo(),i.flags|=256,Zn(s,i,o,d),i.child}var Eg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cg(s){return{baseLanes:s,cachePool:kb()}}function Tg(s,i,o){return s=s!==null?s.childLanes&~o:0,i&&(s|=Ur),s}function zx(s,i,o){var d=i.pendingProps,g=!1,v=(i.flags&128)!==0,S;if((S=v)||(S=s!==null&&s.memoizedState===null?!1:(bn.current&2)!==0),S&&(g=!0,i.flags&=-129),S=(i.flags&32)!==0,i.flags&=-33,s===null){if(Mt){if(g?aa(i):oa(),(s=an)?(s=Y2(s,rs),s=s!==null&&s.data!=="&"?s:null,s!==null&&(i.memoizedState={dehydrated:s,treeContext:Zi!==null?{id:zs,overflow:Us}:null,retryLane:536870912,hydrationErrors:null},o=yb(s),o.return=i,i.child=o,Wn=i,an=null)):s=null,s===null)throw ta(i);return l0(s)?i.lanes=32:i.lanes=536870912,null}var D=d.children;return d=d.fallback,g?(oa(),g=i.mode,D=Ih({mode:"hidden",children:D},g),d=ho(d,g,o,null),D.return=i,d.return=i,D.sibling=d,i.child=D,d=i.child,d.memoizedState=Cg(o),d.childLanes=Tg(s,S,o),i.memoizedState=Eg,hu(null,d)):(aa(i),kg(i,D))}var G=s.memoizedState;if(G!==null&&(D=G.dehydrated,D!==null)){if(v)i.flags&256?(aa(i),i.flags&=-257,i=Ng(s,i,o)):i.memoizedState!==null?(oa(),i.child=s.child,i.flags|=128,i=null):(oa(),D=d.fallback,g=i.mode,d=Ih({mode:"visible",children:d.children},g),D=ho(D,g,o,null),D.flags|=2,d.return=i,D.return=i,d.sibling=D,i.child=d,bo(i,s.child,null,o),d=i.child,d.memoizedState=Cg(o),d.childLanes=Tg(s,S,o),i.memoizedState=Eg,i=hu(null,d));else if(aa(i),l0(D)){if(S=D.nextSibling&&D.nextSibling.dataset,S)var re=S.dgst;S=re,d=Error(r(419)),d.stack="",d.digest=S,eu({value:d,source:null,stack:null}),i=Ng(s,i,o)}else if(An||bl(s,i,o,!1),S=(o&s.childLanes)!==0,An||S){if(S=en,S!==null&&(d=Dc(S,o),d!==0&&d!==G.retryLane))throw G.retryLane=d,uo(s,d),Tr(S,s,d),wg;o0(D)||Bh(),i=Ng(s,i,o)}else o0(D)?(i.flags|=192,i.child=s.child,i=null):(s=G.treeContext,an=is(D.nextSibling),Wn=i,Mt=!0,ea=null,rs=!1,s!==null&&_b(i,s),i=kg(i,d.children),i.flags|=4096);return i}return g?(oa(),D=d.fallback,g=i.mode,G=s.child,re=G.sibling,d=di(G,{mode:"hidden",children:d.children}),d.subtreeFlags=G.subtreeFlags&65011712,re!==null?D=di(re,D):(D=ho(D,g,o,null),D.flags|=2),D.return=i,d.return=i,d.sibling=D,i.child=d,hu(null,d),d=i.child,D=s.child.memoizedState,D===null?D=Cg(o):(g=D.cachePool,g!==null?(G=kn._currentValue,g=g.parent!==G?{parent:G,pool:G}:g):g=kb(),D={baseLanes:D.baseLanes|o,cachePool:g}),d.memoizedState=D,d.childLanes=Tg(s,S,o),i.memoizedState=Eg,hu(s.child,d)):(aa(i),o=s.child,s=o.sibling,o=di(o,{mode:"visible",children:d.children}),o.return=i,o.sibling=null,s!==null&&(S=i.deletions,S===null?(i.deletions=[s],i.flags|=16):S.push(s)),i.child=o,i.memoizedState=null,o)}function kg(s,i){return i=Ih({mode:"visible",children:i},s.mode),i.return=s,s.child=i}function Ih(s,i){return s=Or(22,s,null,i),s.lanes=0,s}function Ng(s,i,o){return bo(i,s.child,null,o),s=kg(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function Ux(s,i,o){s.lanes|=i;var d=s.alternate;d!==null&&(d.lanes|=i),$p(s.return,i,o)}function Ag(s,i,o,d,g,v){var S=s.memoizedState;S===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:o,tailMode:g,treeForkCount:v}:(S.isBackwards=i,S.rendering=null,S.renderingStartTime=0,S.last=d,S.tail=o,S.tailMode=g,S.treeForkCount=v)}function Bx(s,i,o){var d=i.pendingProps,g=d.revealOrder,v=d.tail;d=d.children;var S=bn.current,D=(S&2)!==0;if(D?(S=S&1|2,i.flags|=128):S&=1,ie(bn,S),Zn(s,i,d,o),d=Mt?Zc:0,!D&&s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Ux(s,o,i);else if(s.tag===19)Ux(s,o,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(g){case"forwards":for(o=i.child,g=null;o!==null;)s=o.alternate,s!==null&&xh(s)===null&&(g=o),o=o.sibling;o=g,o===null?(g=i.child,i.child=null):(g=o.sibling,o.sibling=null),Ag(i,!1,g,o,v,d);break;case"backwards":case"unstable_legacy-backwards":for(o=null,g=i.child,i.child=null;g!==null;){if(s=g.alternate,s!==null&&xh(s)===null){i.child=g;break}s=g.sibling,g.sibling=o,o=g,g=s}Ag(i,!0,o,null,v,d);break;case"together":Ag(i,!1,null,null,void 0,d);break;default:i.memoizedState=null}return i.child}function vi(s,i,o){if(s!==null&&(i.dependencies=s.dependencies),ua|=i.lanes,(o&i.childLanes)===0)if(s!==null){if(bl(s,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(s!==null&&i.child!==s.child)throw Error(r(153));if(i.child!==null){for(s=i.child,o=di(s,s.pendingProps),i.child=o,o.return=i;s.sibling!==null;)s=s.sibling,o=o.sibling=di(s,s.pendingProps),o.return=i;o.sibling=null}return i.child}function Rg(s,i){return(s.lanes&i)!==0?!0:(s=s.dependencies,!!(s!==null&&hh(s)))}function p5(s,i,o){switch(i.tag){case 3:Le(i,i.stateNode.containerInfo),na(i,kn,s.memoizedState.cache),fo();break;case 27:case 5:de(i);break;case 4:Le(i,i.stateNode.containerInfo);break;case 10:na(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,tg(i),null;break;case 13:var d=i.memoizedState;if(d!==null)return d.dehydrated!==null?(aa(i),i.flags|=128,null):(o&i.child.childLanes)!==0?zx(s,i,o):(aa(i),s=vi(s,i,o),s!==null?s.sibling:null);aa(i);break;case 19:var g=(s.flags&128)!==0;if(d=(o&i.childLanes)!==0,d||(bl(s,i,o,!1),d=(o&i.childLanes)!==0),g){if(d)return Bx(s,i,o);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ie(bn,bn.current),d)break;return null;case 22:return i.lanes=0,Dx(s,i,o,i.pendingProps);case 24:na(i,kn,s.memoizedState.cache)}return vi(s,i,o)}function Fx(s,i,o){if(s!==null)if(s.memoizedProps!==i.pendingProps)An=!0;else{if(!Rg(s,o)&&(i.flags&128)===0)return An=!1,p5(s,i,o);An=(s.flags&131072)!==0}else An=!1,Mt&&(i.flags&1048576)!==0&&xb(i,Zc,i.index);switch(i.lanes=0,i.tag){case 16:e:{var d=i.pendingProps;if(s=vo(i.elementType),i.type=s,typeof s=="function")Pp(s)?(d=_o(s,d),i.tag=1,i=Lx(null,i,s,d,o)):(i.tag=0,i=Sg(null,i,s,d,o));else{if(s!=null){var g=s.$$typeof;if(g===O){i.tag=11,i=Rx(null,i,s,d,o);break e}else if(g===w){i.tag=14,i=jx(null,i,s,d,o);break e}}throw i=se(s)||s,Error(r(306,i,""))}}return i;case 0:return Sg(s,i,i.type,i.pendingProps,o);case 1:return d=i.type,g=_o(d,i.pendingProps),Lx(s,i,d,g,o);case 3:e:{if(Le(i,i.stateNode.containerInfo),s===null)throw Error(r(387));d=i.pendingProps;var v=i.memoizedState;g=v.element,Xp(s,i),ou(i,d,null,o);var S=i.memoizedState;if(d=S.cache,na(i,kn,d),d!==v.cache&&Hp(i,[kn],o,!0),au(),d=S.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:S.cache},i.updateQueue.baseState=v,i.memoizedState=v,i.flags&256){i=Vx(s,i,d,o);break e}else if(d!==g){g=es(Error(r(424)),i),eu(g),i=Vx(s,i,d,o);break e}else{switch(s=i.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(an=is(s.firstChild),Wn=i,Mt=!0,ea=null,rs=!0,o=Db(i,null,d,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(fo(),d===g){i=vi(s,i,o);break e}Zn(s,i,d,o)}i=i.child}return i;case 26:return jh(s,i),s===null?(o=Z2(i.type,null,i.pendingProps,null))?i.memoizedState=o:Mt||(o=i.type,s=i.pendingProps,d=Kh(De.current).createElement(o),d[En]=i,d[Hn]=s,er(d,o,s),Cn(d),i.stateNode=d):i.memoizedState=Z2(i.type,s.memoizedProps,i.pendingProps,s.memoizedState),null;case 27:return de(i),s===null&&Mt&&(d=i.stateNode=X2(i.type,i.pendingProps,De.current),Wn=i,rs=!0,g=an,pa(i.type)?(c0=g,an=is(d.firstChild)):an=g),Zn(s,i,i.pendingProps.children,o),jh(s,i),s===null&&(i.flags|=4194304),i.child;case 5:return s===null&&Mt&&((g=d=an)&&(d=q5(d,i.type,i.pendingProps,rs),d!==null?(i.stateNode=d,Wn=i,an=is(d.firstChild),rs=!1,g=!0):g=!1),g||ta(i)),de(i),g=i.type,v=i.pendingProps,S=s!==null?s.memoizedProps:null,d=v.children,s0(g,v)?d=null:S!==null&&s0(g,S)&&(i.flags|=32),i.memoizedState!==null&&(g=rg(s,i,a5,null,null,o),ku._currentValue=g),jh(s,i),Zn(s,i,d,o),i.child;case 6:return s===null&&Mt&&((s=o=an)&&(o=G5(o,i.pendingProps,rs),o!==null?(i.stateNode=o,Wn=i,an=null,s=!0):s=!1),s||ta(i)),null;case 13:return zx(s,i,o);case 4:return Le(i,i.stateNode.containerInfo),d=i.pendingProps,s===null?i.child=bo(i,null,d,o):Zn(s,i,d,o),i.child;case 11:return Rx(s,i,i.type,i.pendingProps,o);case 7:return Zn(s,i,i.pendingProps,o),i.child;case 8:return Zn(s,i,i.pendingProps.children,o),i.child;case 12:return Zn(s,i,i.pendingProps.children,o),i.child;case 10:return d=i.pendingProps,na(i,i.type,d.value),Zn(s,i,d.children,o),i.child;case 9:return g=i.type._context,d=i.pendingProps.children,po(i),g=Jn(g),d=d(g),i.flags|=1,Zn(s,i,d,o),i.child;case 14:return jx(s,i,i.type,i.pendingProps,o);case 15:return Ix(s,i,i.type,i.pendingProps,o);case 19:return Bx(s,i,o);case 31:return m5(s,i,o);case 22:return Dx(s,i,o,i.pendingProps);case 24:return po(i),d=Jn(kn),s===null?(g=Yp(),g===null&&(g=en,v=qp(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=o),g=v),i.memoizedState={parent:d,cache:g},Qp(i),na(i,kn,g)):((s.lanes&o)!==0&&(Xp(s,i),ou(i,null,null,o),au()),g=s.memoizedState,v=i.memoizedState,g.parent!==d?(g={parent:d,cache:d},i.memoizedState=g,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=g),na(i,kn,d)):(d=v.cache,na(i,kn,d),d!==g.cache&&Hp(i,[kn],o,!0))),Zn(s,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function yi(s){s.flags|=4}function jg(s,i,o,d,g){if((i=(s.mode&32)!==0)&&(i=!1),i){if(s.flags|=16777216,(g&335544128)===g)if(s.stateNode.complete)s.flags|=8192;else if(p2())s.flags|=8192;else throw yo=gh,Kp}else s.flags&=-16777217}function $x(s,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!s_(i))if(p2())s.flags|=8192;else throw yo=gh,Kp}function Dh(s,i){i!==null&&(s.flags|=4),s.flags&16384&&(i=s.tag!==22?Vn():536870912,s.lanes|=i,jl|=i)}function fu(s,i){if(!Mt)switch(s.tailMode){case"hidden":i=s.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?s.tail=null:o.sibling=null;break;case"collapsed":o=s.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function on(s){var i=s.alternate!==null&&s.alternate.child===s.child,o=0,d=0;if(i)for(var g=s.child;g!==null;)o|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)o|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=d,s.childLanes=o,i}function g5(s,i,o){var d=i.pendingProps;switch(zp(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return on(i),null;case 1:return on(i),null;case 3:return o=i.stateNode,d=null,s!==null&&(d=s.memoizedState.cache),i.memoizedState.cache!==d&&(i.flags|=2048),mi(kn),Ie(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(s===null||s.child===null)&&(yl(i)?yi(i):s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Bp())),on(i),null;case 26:var g=i.type,v=i.memoizedState;return s===null?(yi(i),v!==null?(on(i),$x(i,v)):(on(i),jg(i,g,null,d,o))):v?v!==s.memoizedState?(yi(i),on(i),$x(i,v)):(on(i),i.flags&=-16777217):(s=s.memoizedProps,s!==d&&yi(i),on(i),jg(i,g,s,d,o)),null;case 27:if(pe(i),o=De.current,g=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==d&&yi(i);else{if(!d){if(i.stateNode===null)throw Error(r(166));return on(i),null}s=ve.current,yl(i)?wb(i):(s=X2(g,d,o),i.stateNode=s,yi(i))}return on(i),null;case 5:if(pe(i),g=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==d&&yi(i);else{if(!d){if(i.stateNode===null)throw Error(r(166));return on(i),null}if(v=ve.current,yl(i))wb(i);else{var S=Kh(De.current);switch(v){case 1:v=S.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:v=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":v=S.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":v=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":v=S.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof d.is=="string"?S.createElement("select",{is:d.is}):S.createElement("select"),d.multiple?v.multiple=!0:d.size&&(v.size=d.size);break;default:v=typeof d.is=="string"?S.createElement(g,{is:d.is}):S.createElement(g)}}v[En]=i,v[Hn]=d;e:for(S=i.child;S!==null;){if(S.tag===5||S.tag===6)v.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===i)break e;for(;S.sibling===null;){if(S.return===null||S.return===i)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}i.stateNode=v;e:switch(er(v,g,d),g){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&yi(i)}}return on(i),jg(i,i.type,s===null?null:s.memoizedProps,i.pendingProps,o),null;case 6:if(s&&i.stateNode!=null)s.memoizedProps!==d&&yi(i);else{if(typeof d!="string"&&i.stateNode===null)throw Error(r(166));if(s=De.current,yl(i)){if(s=i.stateNode,o=i.memoizedProps,d=null,g=Wn,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}s[En]=i,s=!!(s.nodeValue===o||d!==null&&d.suppressHydrationWarning===!0||z2(s.nodeValue,o)),s||ta(i,!0)}else s=Kh(s).createTextNode(d),s[En]=i,i.stateNode=s}return on(i),null;case 31:if(o=i.memoizedState,s===null||s.memoizedState!==null){if(d=yl(i),o!==null){if(s===null){if(!d)throw Error(r(318));if(s=i.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[En]=i}else fo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;on(i),s=!1}else o=Bp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=o),s=!0;if(!s)return i.flags&256?(Vr(i),i):(Vr(i),null);if((i.flags&128)!==0)throw Error(r(558))}return on(i),null;case 13:if(d=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=yl(i),d!==null&&d.dehydrated!==null){if(s===null){if(!g)throw Error(r(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[En]=i}else fo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;on(i),g=!1}else g=Bp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return i.flags&256?(Vr(i),i):(Vr(i),null)}return Vr(i),(i.flags&128)!==0?(i.lanes=o,i):(o=d!==null,s=s!==null&&s.memoizedState!==null,o&&(d=i.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool),v=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(v=d.memoizedState.cachePool.pool),v!==g&&(d.flags|=2048)),o!==s&&o&&(i.child.flags|=8192),Dh(i,i.updateQueue),on(i),null);case 4:return Ie(),s===null&&Zg(i.stateNode.containerInfo),on(i),null;case 10:return mi(i.type),on(i),null;case 19:if(W(bn),d=i.memoizedState,d===null)return on(i),null;if(g=(i.flags&128)!==0,v=d.rendering,v===null)if(g)fu(d,!1);else{if(pn!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(v=xh(s),v!==null){for(i.flags|=128,fu(d,!1),s=v.updateQueue,i.updateQueue=s,Dh(i,s),i.subtreeFlags=0,s=o,o=i.child;o!==null;)vb(o,s),o=o.sibling;return ie(bn,bn.current&1|2),Mt&&hi(i,d.treeForkCount),i.child}s=s.sibling}d.tail!==null&&ct()>Vh&&(i.flags|=128,g=!0,fu(d,!1),i.lanes=4194304)}else{if(!g)if(s=xh(v),s!==null){if(i.flags|=128,g=!0,s=s.updateQueue,i.updateQueue=s,Dh(i,s),fu(d,!0),d.tail===null&&d.tailMode==="hidden"&&!v.alternate&&!Mt)return on(i),null}else 2*ct()-d.renderingStartTime>Vh&&o!==536870912&&(i.flags|=128,g=!0,fu(d,!1),i.lanes=4194304);d.isBackwards?(v.sibling=i.child,i.child=v):(s=d.last,s!==null?s.sibling=v:i.child=v,d.last=v)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=ct(),s.sibling=null,o=bn.current,ie(bn,g?o&1|2:o&1),Mt&&hi(i,d.treeForkCount),s):(on(i),null);case 22:case 23:return Vr(i),eg(),d=i.memoizedState!==null,s!==null?s.memoizedState!==null!==d&&(i.flags|=8192):d&&(i.flags|=8192),d?(o&536870912)!==0&&(i.flags&128)===0&&(on(i),i.subtreeFlags&6&&(i.flags|=8192)):on(i),o=i.updateQueue,o!==null&&Dh(i,o.retryQueue),o=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),d=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),d!==o&&(i.flags|=2048),s!==null&&W(go),null;case 24:return o=null,s!==null&&(o=s.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),mi(kn),on(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function v5(s,i){switch(zp(i),i.tag){case 1:return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return mi(kn),Ie(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 26:case 27:case 5:return pe(i),null;case 31:if(i.memoizedState!==null){if(Vr(i),i.alternate===null)throw Error(r(340));fo()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 13:if(Vr(i),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(r(340));fo()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return W(bn),null;case 4:return Ie(),null;case 10:return mi(i.type),null;case 22:case 23:return Vr(i),eg(),s!==null&&W(go),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 24:return mi(kn),null;case 25:return null;default:return null}}function Hx(s,i){switch(zp(i),i.tag){case 3:mi(kn),Ie();break;case 26:case 27:case 5:pe(i);break;case 4:Ie();break;case 31:i.memoizedState!==null&&Vr(i);break;case 13:Vr(i);break;case 19:W(bn);break;case 10:mi(i.type);break;case 22:case 23:Vr(i),eg(),s!==null&&W(go);break;case 24:mi(kn)}}function mu(s,i){try{var o=i.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var g=d.next;o=g;do{if((o.tag&s)===s){d=void 0;var v=o.create,S=o.inst;d=v(),S.destroy=d}o=o.next}while(o!==g)}}catch(D){Kt(i,i.return,D)}}function la(s,i,o){try{var d=i.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var v=g.next;d=v;do{if((d.tag&s)===s){var S=d.inst,D=S.destroy;if(D!==void 0){S.destroy=void 0,g=i;var G=o,re=D;try{re()}catch(me){Kt(g,G,me)}}}d=d.next}while(d!==v)}}catch(me){Kt(i,i.return,me)}}function qx(s){var i=s.updateQueue;if(i!==null){var o=s.stateNode;try{Pb(i,o)}catch(d){Kt(s,s.return,d)}}}function Gx(s,i,o){o.props=_o(s.type,s.memoizedProps),o.state=s.memoizedState;try{o.componentWillUnmount()}catch(d){Kt(s,i,d)}}function pu(s,i){try{var o=s.ref;if(o!==null){switch(s.tag){case 26:case 27:case 5:var d=s.stateNode;break;case 30:d=s.stateNode;break;default:d=s.stateNode}typeof o=="function"?s.refCleanup=o(d):o.current=d}}catch(g){Kt(s,i,g)}}function Bs(s,i){var o=s.ref,d=s.refCleanup;if(o!==null)if(typeof d=="function")try{d()}catch(g){Kt(s,i,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(g){Kt(s,i,g)}else o.current=null}function Yx(s){var i=s.type,o=s.memoizedProps,d=s.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&d.focus();break e;case"img":o.src?d.src=o.src:o.srcSet&&(d.srcset=o.srcSet)}}catch(g){Kt(s,s.return,g)}}function Ig(s,i,o){try{var d=s.stateNode;z5(d,s.type,o,i),d[Hn]=i}catch(g){Kt(s,s.return,g)}}function Kx(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&pa(s.type)||s.tag===4}function Dg(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Kx(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&pa(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Mg(s,i,o){var d=s.tag;if(d===5||d===6)s=s.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(s,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(s),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=ds));else if(d!==4&&(d===27&&pa(s.type)&&(o=s.stateNode,i=null),s=s.child,s!==null))for(Mg(s,i,o),s=s.sibling;s!==null;)Mg(s,i,o),s=s.sibling}function Mh(s,i,o){var d=s.tag;if(d===5||d===6)s=s.stateNode,i?o.insertBefore(s,i):o.appendChild(s);else if(d!==4&&(d===27&&pa(s.type)&&(o=s.stateNode),s=s.child,s!==null))for(Mh(s,i,o),s=s.sibling;s!==null;)Mh(s,i,o),s=s.sibling}function Qx(s){var i=s.stateNode,o=s.memoizedProps;try{for(var d=s.type,g=i.attributes;g.length;)i.removeAttributeNode(g[0]);er(i,d,o),i[En]=s,i[Hn]=o}catch(v){Kt(s,s.return,v)}}var bi=!1,Rn=!1,Pg=!1,Xx=typeof WeakSet=="function"?WeakSet:Set,Gn=null;function y5(s,i){if(s=s.containerInfo,n0=tf,s=lb(s),Np(s)){if("selectionStart"in s)var o={start:s.selectionStart,end:s.selectionEnd};else e:{o=(o=s.ownerDocument)&&o.defaultView||window;var d=o.getSelection&&o.getSelection();if(d&&d.rangeCount!==0){o=d.anchorNode;var g=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{o.nodeType,v.nodeType}catch{o=null;break e}var S=0,D=-1,G=-1,re=0,me=0,xe=s,oe=null;t:for(;;){for(var ue;xe!==o||g!==0&&xe.nodeType!==3||(D=S+g),xe!==v||d!==0&&xe.nodeType!==3||(G=S+d),xe.nodeType===3&&(S+=xe.nodeValue.length),(ue=xe.firstChild)!==null;)oe=xe,xe=ue;for(;;){if(xe===s)break t;if(oe===o&&++re===g&&(D=S),oe===v&&++me===d&&(G=S),(ue=xe.nextSibling)!==null)break;xe=oe,oe=xe.parentNode}xe=ue}o=D===-1||G===-1?null:{start:D,end:G}}else o=null}o=o||{start:0,end:0}}else o=null;for(r0={focusedElem:s,selectionRange:o},tf=!1,Gn=i;Gn!==null;)if(i=Gn,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,Gn=s;else for(;Gn!==null;){switch(i=Gn,v=i.alternate,s=i.flags,i.tag){case 0:if((s&4)!==0&&(s=i.updateQueue,s=s!==null?s.events:null,s!==null))for(o=0;o<s.length;o++)g=s[o],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&v!==null){s=void 0,o=i,g=v.memoizedProps,v=v.memoizedState,d=o.stateNode;try{var He=_o(o.type,g);s=d.getSnapshotBeforeUpdate(He,v),d.__reactInternalSnapshotBeforeUpdate=s}catch(st){Kt(o,o.return,st)}}break;case 3:if((s&1024)!==0){if(s=i.stateNode.containerInfo,o=s.nodeType,o===9)a0(s);else if(o===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":a0(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=i.sibling,s!==null){s.return=i.return,Gn=s;break}Gn=i.return}}function Wx(s,i,o){var d=o.flags;switch(o.tag){case 0:case 11:case 15:_i(s,o),d&4&&mu(5,o);break;case 1:if(_i(s,o),d&4)if(s=o.stateNode,i===null)try{s.componentDidMount()}catch(S){Kt(o,o.return,S)}else{var g=_o(o.type,i.memoizedProps);i=i.memoizedState;try{s.componentDidUpdate(g,i,s.__reactInternalSnapshotBeforeUpdate)}catch(S){Kt(o,o.return,S)}}d&64&&qx(o),d&512&&pu(o,o.return);break;case 3:if(_i(s,o),d&64&&(s=o.updateQueue,s!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{Pb(s,i)}catch(S){Kt(o,o.return,S)}}break;case 27:i===null&&d&4&&Qx(o);case 26:case 5:_i(s,o),i===null&&d&4&&Yx(o),d&512&&pu(o,o.return);break;case 12:_i(s,o);break;case 31:_i(s,o),d&4&&e2(s,o);break;case 13:_i(s,o),d&4&&t2(s,o),d&64&&(s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(o=k5.bind(null,o),Y5(s,o))));break;case 22:if(d=o.memoizedState!==null||bi,!d){i=i!==null&&i.memoizedState!==null||Rn,g=bi;var v=Rn;bi=d,(Rn=i)&&!v?wi(s,o,(o.subtreeFlags&8772)!==0):_i(s,o),bi=g,Rn=v}break;case 30:break;default:_i(s,o)}}function Jx(s){var i=s.alternate;i!==null&&(s.alternate=null,Jx(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&tl(i)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var dn=null,wr=!1;function xi(s,i,o){for(o=o.child;o!==null;)Zx(s,i,o),o=o.sibling}function Zx(s,i,o){if(ht&&typeof ht.onCommitFiberUnmount=="function")try{ht.onCommitFiberUnmount(Dt,o)}catch{}switch(o.tag){case 26:Rn||Bs(o,i),xi(s,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Rn||Bs(o,i);var d=dn,g=wr;pa(o.type)&&(dn=o.stateNode,wr=!1),xi(s,i,o),Eu(o.stateNode),dn=d,wr=g;break;case 5:Rn||Bs(o,i);case 6:if(d=dn,g=wr,dn=null,xi(s,i,o),dn=d,wr=g,dn!==null)if(wr)try{(dn.nodeType===9?dn.body:dn.nodeName==="HTML"?dn.ownerDocument.body:dn).removeChild(o.stateNode)}catch(v){Kt(o,i,v)}else try{dn.removeChild(o.stateNode)}catch(v){Kt(o,i,v)}break;case 18:dn!==null&&(wr?(s=dn,q2(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,o.stateNode),zl(s)):q2(dn,o.stateNode));break;case 4:d=dn,g=wr,dn=o.stateNode.containerInfo,wr=!0,xi(s,i,o),dn=d,wr=g;break;case 0:case 11:case 14:case 15:la(2,o,i),Rn||la(4,o,i),xi(s,i,o);break;case 1:Rn||(Bs(o,i),d=o.stateNode,typeof d.componentWillUnmount=="function"&&Gx(o,i,d)),xi(s,i,o);break;case 21:xi(s,i,o);break;case 22:Rn=(d=Rn)||o.memoizedState!==null,xi(s,i,o),Rn=d;break;default:xi(s,i,o)}}function e2(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{zl(s)}catch(o){Kt(i,i.return,o)}}}function t2(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{zl(s)}catch(o){Kt(i,i.return,o)}}function b5(s){switch(s.tag){case 31:case 13:case 19:var i=s.stateNode;return i===null&&(i=s.stateNode=new Xx),i;case 22:return s=s.stateNode,i=s._retryCache,i===null&&(i=s._retryCache=new Xx),i;default:throw Error(r(435,s.tag))}}function Ph(s,i){var o=b5(s);i.forEach(function(d){if(!o.has(d)){o.add(d);var g=N5.bind(null,s,d);d.then(g,g)}})}function Sr(s,i){var o=i.deletions;if(o!==null)for(var d=0;d<o.length;d++){var g=o[d],v=s,S=i,D=S;e:for(;D!==null;){switch(D.tag){case 27:if(pa(D.type)){dn=D.stateNode,wr=!1;break e}break;case 5:dn=D.stateNode,wr=!1;break e;case 3:case 4:dn=D.stateNode.containerInfo,wr=!0;break e}D=D.return}if(dn===null)throw Error(r(160));Zx(v,S,g),dn=null,wr=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)n2(i,s),i=i.sibling}var vs=null;function n2(s,i){var o=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Sr(i,s),Er(s),d&4&&(la(3,s,s.return),mu(3,s),la(5,s,s.return));break;case 1:Sr(i,s),Er(s),d&512&&(Rn||o===null||Bs(o,o.return)),d&64&&bi&&(s=s.updateQueue,s!==null&&(d=s.callbacks,d!==null&&(o=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=o===null?d:o.concat(d))));break;case 26:var g=vs;if(Sr(i,s),Er(s),d&512&&(Rn||o===null||Bs(o,o.return)),d&4){var v=o!==null?o.memoizedState:null;if(d=s.memoizedState,o===null)if(d===null)if(s.stateNode===null){e:{d=s.type,o=s.memoizedProps,g=g.ownerDocument||g;t:switch(d){case"title":v=g.getElementsByTagName("title")[0],(!v||v[ks]||v[En]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(d),g.head.insertBefore(v,g.querySelector("head > title"))),er(v,d,o),v[En]=s,Cn(v),d=v;break e;case"link":var S=n_("link","href",g).get(d+(o.href||""));if(S){for(var D=0;D<S.length;D++)if(v=S[D],v.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&v.getAttribute("rel")===(o.rel==null?null:o.rel)&&v.getAttribute("title")===(o.title==null?null:o.title)&&v.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){S.splice(D,1);break t}}v=g.createElement(d),er(v,d,o),g.head.appendChild(v);break;case"meta":if(S=n_("meta","content",g).get(d+(o.content||""))){for(D=0;D<S.length;D++)if(v=S[D],v.getAttribute("content")===(o.content==null?null:""+o.content)&&v.getAttribute("name")===(o.name==null?null:o.name)&&v.getAttribute("property")===(o.property==null?null:o.property)&&v.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&v.getAttribute("charset")===(o.charSet==null?null:o.charSet)){S.splice(D,1);break t}}v=g.createElement(d),er(v,d,o),g.head.appendChild(v);break;default:throw Error(r(468,d))}v[En]=s,Cn(v),d=v}s.stateNode=d}else r_(g,s.type,s.stateNode);else s.stateNode=t_(g,d,s.memoizedProps);else v!==d?(v===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):v.count--,d===null?r_(g,s.type,s.stateNode):t_(g,d,s.memoizedProps)):d===null&&s.stateNode!==null&&Ig(s,s.memoizedProps,o.memoizedProps)}break;case 27:Sr(i,s),Er(s),d&512&&(Rn||o===null||Bs(o,o.return)),o!==null&&d&4&&Ig(s,s.memoizedProps,o.memoizedProps);break;case 5:if(Sr(i,s),Er(s),d&512&&(Rn||o===null||Bs(o,o.return)),s.flags&32){g=s.stateNode;try{_r(g,"")}catch(He){Kt(s,s.return,He)}}d&4&&s.stateNode!=null&&(g=s.memoizedProps,Ig(s,g,o!==null?o.memoizedProps:g)),d&1024&&(Pg=!0);break;case 6:if(Sr(i,s),Er(s),d&4){if(s.stateNode===null)throw Error(r(162));d=s.memoizedProps,o=s.stateNode;try{o.nodeValue=d}catch(He){Kt(s,s.return,He)}}break;case 3:if(Wh=null,g=vs,vs=Qh(i.containerInfo),Sr(i,s),vs=g,Er(s),d&4&&o!==null&&o.memoizedState.isDehydrated)try{zl(i.containerInfo)}catch(He){Kt(s,s.return,He)}Pg&&(Pg=!1,r2(s));break;case 4:d=vs,vs=Qh(s.stateNode.containerInfo),Sr(i,s),Er(s),vs=d;break;case 12:Sr(i,s),Er(s);break;case 31:Sr(i,s),Er(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Ph(s,d)));break;case 13:Sr(i,s),Er(s),s.child.flags&8192&&s.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Lh=ct()),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Ph(s,d)));break;case 22:g=s.memoizedState!==null;var G=o!==null&&o.memoizedState!==null,re=bi,me=Rn;if(bi=re||g,Rn=me||G,Sr(i,s),Rn=me,bi=re,Er(s),d&8192)e:for(i=s.stateNode,i._visibility=g?i._visibility&-2:i._visibility|1,g&&(o===null||G||bi||Rn||wo(s)),o=null,i=s;;){if(i.tag===5||i.tag===26){if(o===null){G=o=i;try{if(v=G.stateNode,g)S=v.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{D=G.stateNode;var xe=G.memoizedProps.style,oe=xe!=null&&xe.hasOwnProperty("display")?xe.display:null;D.style.display=oe==null||typeof oe=="boolean"?"":(""+oe).trim()}}catch(He){Kt(G,G.return,He)}}}else if(i.tag===6){if(o===null){G=i;try{G.stateNode.nodeValue=g?"":G.memoizedProps}catch(He){Kt(G,G.return,He)}}}else if(i.tag===18){if(o===null){G=i;try{var ue=G.stateNode;g?G2(ue,!0):G2(G.stateNode,!1)}catch(He){Kt(G,G.return,He)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===s)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}d&4&&(d=s.updateQueue,d!==null&&(o=d.retryQueue,o!==null&&(d.retryQueue=null,Ph(s,o))));break;case 19:Sr(i,s),Er(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Ph(s,d)));break;case 30:break;case 21:break;default:Sr(i,s),Er(s)}}function Er(s){var i=s.flags;if(i&2){try{for(var o,d=s.return;d!==null;){if(Kx(d)){o=d;break}d=d.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var g=o.stateNode,v=Dg(s);Mh(s,v,g);break;case 5:var S=o.stateNode;o.flags&32&&(_r(S,""),o.flags&=-33);var D=Dg(s);Mh(s,D,S);break;case 3:case 4:var G=o.stateNode.containerInfo,re=Dg(s);Mg(s,re,G);break;default:throw Error(r(161))}}catch(me){Kt(s,s.return,me)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function r2(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var i=s;r2(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),s=s.sibling}}function _i(s,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Wx(s,i.alternate,i),i=i.sibling}function wo(s){for(s=s.child;s!==null;){var i=s;switch(i.tag){case 0:case 11:case 14:case 15:la(4,i,i.return),wo(i);break;case 1:Bs(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&Gx(i,i.return,o),wo(i);break;case 27:Eu(i.stateNode);case 26:case 5:Bs(i,i.return),wo(i);break;case 22:i.memoizedState===null&&wo(i);break;case 30:wo(i);break;default:wo(i)}s=s.sibling}}function wi(s,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var d=i.alternate,g=s,v=i,S=v.flags;switch(v.tag){case 0:case 11:case 15:wi(g,v,o),mu(4,v);break;case 1:if(wi(g,v,o),d=v,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(re){Kt(d,d.return,re)}if(d=v,g=d.updateQueue,g!==null){var D=d.stateNode;try{var G=g.shared.hiddenCallbacks;if(G!==null)for(g.shared.hiddenCallbacks=null,g=0;g<G.length;g++)Mb(G[g],D)}catch(re){Kt(d,d.return,re)}}o&&S&64&&qx(v),pu(v,v.return);break;case 27:Qx(v);case 26:case 5:wi(g,v,o),o&&d===null&&S&4&&Yx(v),pu(v,v.return);break;case 12:wi(g,v,o);break;case 31:wi(g,v,o),o&&S&4&&e2(g,v);break;case 13:wi(g,v,o),o&&S&4&&t2(g,v);break;case 22:v.memoizedState===null&&wi(g,v,o),pu(v,v.return);break;case 30:break;default:wi(g,v,o)}i=i.sibling}}function Og(s,i){var o=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==o&&(s!=null&&s.refCount++,o!=null&&tu(o))}function Lg(s,i){s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&tu(s))}function ys(s,i,o,d){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)s2(s,i,o,d),i=i.sibling}function s2(s,i,o,d){var g=i.flags;switch(i.tag){case 0:case 11:case 15:ys(s,i,o,d),g&2048&&mu(9,i);break;case 1:ys(s,i,o,d);break;case 3:ys(s,i,o,d),g&2048&&(s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&tu(s)));break;case 12:if(g&2048){ys(s,i,o,d),s=i.stateNode;try{var v=i.memoizedProps,S=v.id,D=v.onPostCommit;typeof D=="function"&&D(S,i.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(G){Kt(i,i.return,G)}}else ys(s,i,o,d);break;case 31:ys(s,i,o,d);break;case 13:ys(s,i,o,d);break;case 23:break;case 22:v=i.stateNode,S=i.alternate,i.memoizedState!==null?v._visibility&2?ys(s,i,o,d):gu(s,i):v._visibility&2?ys(s,i,o,d):(v._visibility|=2,Nl(s,i,o,d,(i.subtreeFlags&10256)!==0||!1)),g&2048&&Og(S,i);break;case 24:ys(s,i,o,d),g&2048&&Lg(i.alternate,i);break;default:ys(s,i,o,d)}}function Nl(s,i,o,d,g){for(g=g&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var v=s,S=i,D=o,G=d,re=S.flags;switch(S.tag){case 0:case 11:case 15:Nl(v,S,D,G,g),mu(8,S);break;case 23:break;case 22:var me=S.stateNode;S.memoizedState!==null?me._visibility&2?Nl(v,S,D,G,g):gu(v,S):(me._visibility|=2,Nl(v,S,D,G,g)),g&&re&2048&&Og(S.alternate,S);break;case 24:Nl(v,S,D,G,g),g&&re&2048&&Lg(S.alternate,S);break;default:Nl(v,S,D,G,g)}i=i.sibling}}function gu(s,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=s,d=i,g=d.flags;switch(d.tag){case 22:gu(o,d),g&2048&&Og(d.alternate,d);break;case 24:gu(o,d),g&2048&&Lg(d.alternate,d);break;default:gu(o,d)}i=i.sibling}}var vu=8192;function Al(s,i,o){if(s.subtreeFlags&vu)for(s=s.child;s!==null;)i2(s,i,o),s=s.sibling}function i2(s,i,o){switch(s.tag){case 26:Al(s,i,o),s.flags&vu&&s.memoizedState!==null&&iN(o,vs,s.memoizedState,s.memoizedProps);break;case 5:Al(s,i,o);break;case 3:case 4:var d=vs;vs=Qh(s.stateNode.containerInfo),Al(s,i,o),vs=d;break;case 22:s.memoizedState===null&&(d=s.alternate,d!==null&&d.memoizedState!==null?(d=vu,vu=16777216,Al(s,i,o),vu=d):Al(s,i,o));break;default:Al(s,i,o)}}function a2(s){var i=s.alternate;if(i!==null&&(s=i.child,s!==null)){i.child=null;do i=s.sibling,s.sibling=null,s=i;while(s!==null)}}function yu(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var d=i[o];Gn=d,l2(d,s)}a2(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)o2(s),s=s.sibling}function o2(s){switch(s.tag){case 0:case 11:case 15:yu(s),s.flags&2048&&la(9,s,s.return);break;case 3:yu(s);break;case 12:yu(s);break;case 22:var i=s.stateNode;s.memoizedState!==null&&i._visibility&2&&(s.return===null||s.return.tag!==13)?(i._visibility&=-3,Oh(s)):yu(s);break;default:yu(s)}}function Oh(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var d=i[o];Gn=d,l2(d,s)}a2(s)}for(s=s.child;s!==null;){switch(i=s,i.tag){case 0:case 11:case 15:la(8,i,i.return),Oh(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Oh(i));break;default:Oh(i)}s=s.sibling}}function l2(s,i){for(;Gn!==null;){var o=Gn;switch(o.tag){case 0:case 11:case 15:la(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var d=o.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:tu(o.memoizedState.cache)}if(d=o.child,d!==null)d.return=o,Gn=d;else e:for(o=s;Gn!==null;){d=Gn;var g=d.sibling,v=d.return;if(Jx(d),d===o){Gn=null;break e}if(g!==null){g.return=v,Gn=g;break e}Gn=v}}}var x5={getCacheForType:function(s){var i=Jn(kn),o=i.data.get(s);return o===void 0&&(o=s(),i.data.set(s,o)),o},cacheSignal:function(){return Jn(kn).controller.signal}},_5=typeof WeakMap=="function"?WeakMap:Map,Ft=0,en=null,Tt=null,Nt=0,Yt=0,zr=null,ca=!1,Rl=!1,Vg=!1,Si=0,pn=0,ua=0,So=0,zg=0,Ur=0,jl=0,bu=null,Cr=null,Ug=!1,Lh=0,c2=0,Vh=1/0,zh=null,da=null,zn=0,ha=null,Il=null,Ei=0,Bg=0,Fg=null,u2=null,xu=0,$g=null;function Br(){return(Ft&2)!==0&&Nt!==0?Nt&-Nt:Y.T!==null?Qg():Ud()}function d2(){if(Ur===0)if((Nt&536870912)===0||Mt){var s=pt;pt<<=1,(pt&3932160)===0&&(pt=262144),Ur=s}else Ur=536870912;return s=Lr.current,s!==null&&(s.flags|=32),Ur}function Tr(s,i,o){(s===en&&(Yt===2||Yt===9)||s.cancelPendingCommit!==null)&&(Dl(s,0),fa(s,Nt,Ur,!1)),gt(s,o),((Ft&2)===0||s!==en)&&(s===en&&((Ft&2)===0&&(So|=o),pn===4&&fa(s,Nt,Ur,!1)),Fs(s))}function h2(s,i,o){if((Ft&6)!==0)throw Error(r(327));var d=!o&&(i&127)===0&&(i&s.expiredLanes)===0||xt(s,i),g=d?E5(s,i):qg(s,i,!0),v=d;do{if(g===0){Rl&&!d&&fa(s,i,0,!1);break}else{if(o=s.current.alternate,v&&!w5(o)){g=qg(s,i,!1),v=!1;continue}if(g===2){if(v=i,s.errorRecoveryDisabledLanes&v)var S=0;else S=s.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){i=S;e:{var D=s;g=bu;var G=D.current.memoizedState.isDehydrated;if(G&&(Dl(D,S).flags|=256),S=qg(D,S,!1),S!==2){if(Vg&&!G){D.errorRecoveryDisabledLanes|=v,So|=v,g=4;break e}v=Cr,Cr=g,v!==null&&(Cr===null?Cr=v:Cr.push.apply(Cr,v))}g=S}if(v=!1,g!==2)continue}}if(g===1){Dl(s,0),fa(s,i,0,!0);break}e:{switch(d=s,v=g,v){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:fa(d,i,Ur,!ca);break e;case 2:Cr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(g=Lh+300-ct(),10<g)){if(fa(d,i,Ur,!ca),zt(d,0,!0)!==0)break e;Ei=i,d.timeoutHandle=$2(f2.bind(null,d,o,Cr,zh,Ug,i,Ur,So,jl,ca,v,"Throttled",-0,0),g);break e}f2(d,o,Cr,zh,Ug,i,Ur,So,jl,ca,v,null,-0,0)}}break}while(!0);Fs(s)}function f2(s,i,o,d,g,v,S,D,G,re,me,xe,oe,ue){if(s.timeoutHandle=-1,xe=i.subtreeFlags,xe&8192||(xe&16785408)===16785408){xe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ds},i2(i,v,xe);var He=(v&62914560)===v?Lh-ct():(v&4194048)===v?c2-ct():0;if(He=aN(xe,He),He!==null){Ei=v,s.cancelPendingCommit=He(_2.bind(null,s,i,v,o,d,g,S,D,G,me,xe,null,oe,ue)),fa(s,v,S,!re);return}}_2(s,i,v,o,d,g,S,D,G)}function w5(s){for(var i=s;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var d=0;d<o.length;d++){var g=o[d],v=g.getSnapshot;g=g.value;try{if(!Pr(v(),g))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function fa(s,i,o,d){i&=~zg,i&=~So,s.suspendedLanes|=i,s.pingedLanes&=~i,d&&(s.warmLanes|=i),d=s.expirationTimes;for(var g=i;0<g;){var v=31-nn(g),S=1<<v;d[v]=-1,g&=~S}o!==0&&Qn(s,o,i)}function Uh(){return(Ft&6)===0?(_u(0),!1):!0}function Hg(){if(Tt!==null){if(Yt===0)var s=Tt.return;else s=Tt,fi=mo=null,ag(s),Sl=null,ru=0,s=Tt;for(;s!==null;)Hx(s.alternate,s),s=s.return;Tt=null}}function Dl(s,i){var o=s.timeoutHandle;o!==-1&&(s.timeoutHandle=-1,F5(o)),o=s.cancelPendingCommit,o!==null&&(s.cancelPendingCommit=null,o()),Ei=0,Hg(),en=s,Tt=o=di(s.current,null),Nt=i,Yt=0,zr=null,ca=!1,Rl=xt(s,i),Vg=!1,jl=Ur=zg=So=ua=pn=0,Cr=bu=null,Ug=!1,(i&8)!==0&&(i|=i&32);var d=s.entangledLanes;if(d!==0)for(s=s.entanglements,d&=i;0<d;){var g=31-nn(d),v=1<<g;i|=s[g],d&=~v}return Si=i,oh(),o}function m2(s,i){yt=null,Y.H=du,i===wl||i===ph?(i=Rb(),Yt=3):i===Kp?(i=Rb(),Yt=4):Yt=i===wg?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,zr=i,Tt===null&&(pn=1,Ah(s,es(i,s.current)))}function p2(){var s=Lr.current;return s===null?!0:(Nt&4194048)===Nt?ss===null:(Nt&62914560)===Nt||(Nt&536870912)!==0?s===ss:!1}function g2(){var s=Y.H;return Y.H=du,s===null?du:s}function v2(){var s=Y.A;return Y.A=x5,s}function Bh(){pn=4,ca||(Nt&4194048)!==Nt&&Lr.current!==null||(Rl=!0),(ua&134217727)===0&&(So&134217727)===0||en===null||fa(en,Nt,Ur,!1)}function qg(s,i,o){var d=Ft;Ft|=2;var g=g2(),v=v2();(en!==s||Nt!==i)&&(zh=null,Dl(s,i)),i=!1;var S=pn;e:do try{if(Yt!==0&&Tt!==null){var D=Tt,G=zr;switch(Yt){case 8:Hg(),S=6;break e;case 3:case 2:case 9:case 6:Lr.current===null&&(i=!0);var re=Yt;if(Yt=0,zr=null,Ml(s,D,G,re),o&&Rl){S=0;break e}break;default:re=Yt,Yt=0,zr=null,Ml(s,D,G,re)}}S5(),S=pn;break}catch(me){m2(s,me)}while(!0);return i&&s.shellSuspendCounter++,fi=mo=null,Ft=d,Y.H=g,Y.A=v,Tt===null&&(en=null,Nt=0,oh()),S}function S5(){for(;Tt!==null;)y2(Tt)}function E5(s,i){var o=Ft;Ft|=2;var d=g2(),g=v2();en!==s||Nt!==i?(zh=null,Vh=ct()+500,Dl(s,i)):Rl=xt(s,i);e:do try{if(Yt!==0&&Tt!==null){i=Tt;var v=zr;t:switch(Yt){case 1:Yt=0,zr=null,Ml(s,i,v,1);break;case 2:case 9:if(Nb(v)){Yt=0,zr=null,b2(i);break}i=function(){Yt!==2&&Yt!==9||en!==s||(Yt=7),Fs(s)},v.then(i,i);break e;case 3:Yt=7;break e;case 4:Yt=5;break e;case 7:Nb(v)?(Yt=0,zr=null,b2(i)):(Yt=0,zr=null,Ml(s,i,v,7));break;case 5:var S=null;switch(Tt.tag){case 26:S=Tt.memoizedState;case 5:case 27:var D=Tt;if(S?s_(S):D.stateNode.complete){Yt=0,zr=null;var G=D.sibling;if(G!==null)Tt=G;else{var re=D.return;re!==null?(Tt=re,Fh(re)):Tt=null}break t}}Yt=0,zr=null,Ml(s,i,v,5);break;case 6:Yt=0,zr=null,Ml(s,i,v,6);break;case 8:Hg(),pn=6;break e;default:throw Error(r(462))}}C5();break}catch(me){m2(s,me)}while(!0);return fi=mo=null,Y.H=d,Y.A=g,Ft=o,Tt!==null?0:(en=null,Nt=0,oh(),pn)}function C5(){for(;Tt!==null&&!$e();)y2(Tt)}function y2(s){var i=Fx(s.alternate,s,Si);s.memoizedProps=s.pendingProps,i===null?Fh(s):Tt=i}function b2(s){var i=s,o=i.alternate;switch(i.tag){case 15:case 0:i=Ox(o,i,i.pendingProps,i.type,void 0,Nt);break;case 11:i=Ox(o,i,i.pendingProps,i.type.render,i.ref,Nt);break;case 5:ag(i);default:Hx(o,i),i=Tt=vb(i,Si),i=Fx(o,i,Si)}s.memoizedProps=s.pendingProps,i===null?Fh(s):Tt=i}function Ml(s,i,o,d){fi=mo=null,ag(i),Sl=null,ru=0;var g=i.return;try{if(f5(s,g,i,o,Nt)){pn=1,Ah(s,es(o,s.current)),Tt=null;return}}catch(v){if(g!==null)throw Tt=g,v;pn=1,Ah(s,es(o,s.current)),Tt=null;return}i.flags&32768?(Mt||d===1?s=!0:Rl||(Nt&536870912)!==0?s=!1:(ca=s=!0,(d===2||d===9||d===3||d===6)&&(d=Lr.current,d!==null&&d.tag===13&&(d.flags|=16384))),x2(i,s)):Fh(i)}function Fh(s){var i=s;do{if((i.flags&32768)!==0){x2(i,ca);return}s=i.return;var o=g5(i.alternate,i,Si);if(o!==null){Tt=o;return}if(i=i.sibling,i!==null){Tt=i;return}Tt=i=s}while(i!==null);pn===0&&(pn=5)}function x2(s,i){do{var o=v5(s.alternate,s);if(o!==null){o.flags&=32767,Tt=o;return}if(o=s.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(s=s.sibling,s!==null)){Tt=s;return}Tt=s=o}while(s!==null);pn=6,Tt=null}function _2(s,i,o,d,g,v,S,D,G){s.cancelPendingCommit=null;do $h();while(zn!==0);if((Ft&6)!==0)throw Error(r(327));if(i!==null){if(i===s.current)throw Error(r(177));if(v=i.lanes|i.childLanes,v|=Dp,Ut(s,o,v,S,D,G),s===en&&(Tt=en=null,Nt=0),Il=i,ha=s,Ei=o,Bg=v,Fg=g,u2=d,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,A5(ke,function(){return T2(),null})):(s.callbackNode=null,s.callbackPriority=0),d=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||d){d=Y.T,Y.T=null,g=ee.p,ee.p=2,S=Ft,Ft|=4;try{y5(s,i,o)}finally{Ft=S,ee.p=g,Y.T=d}}zn=1,w2(),S2(),E2()}}function w2(){if(zn===1){zn=0;var s=ha,i=Il,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=Y.T,Y.T=null;var d=ee.p;ee.p=2;var g=Ft;Ft|=4;try{n2(i,s);var v=r0,S=lb(s.containerInfo),D=v.focusedElem,G=v.selectionRange;if(S!==D&&D&&D.ownerDocument&&ob(D.ownerDocument.documentElement,D)){if(G!==null&&Np(D)){var re=G.start,me=G.end;if(me===void 0&&(me=re),"selectionStart"in D)D.selectionStart=re,D.selectionEnd=Math.min(me,D.value.length);else{var xe=D.ownerDocument||document,oe=xe&&xe.defaultView||window;if(oe.getSelection){var ue=oe.getSelection(),He=D.textContent.length,st=Math.min(G.start,He),Zt=G.end===void 0?st:Math.min(G.end,He);!ue.extend&&st>Zt&&(S=Zt,Zt=st,st=S);var X=ab(D,st),K=ab(D,Zt);if(X&&K&&(ue.rangeCount!==1||ue.anchorNode!==X.node||ue.anchorOffset!==X.offset||ue.focusNode!==K.node||ue.focusOffset!==K.offset)){var ne=xe.createRange();ne.setStart(X.node,X.offset),ue.removeAllRanges(),st>Zt?(ue.addRange(ne),ue.extend(K.node,K.offset)):(ne.setEnd(K.node,K.offset),ue.addRange(ne))}}}}for(xe=[],ue=D;ue=ue.parentNode;)ue.nodeType===1&&xe.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<xe.length;D++){var be=xe[D];be.element.scrollLeft=be.left,be.element.scrollTop=be.top}}tf=!!n0,r0=n0=null}finally{Ft=g,ee.p=d,Y.T=o}}s.current=i,zn=2}}function S2(){if(zn===2){zn=0;var s=ha,i=Il,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=Y.T,Y.T=null;var d=ee.p;ee.p=2;var g=Ft;Ft|=4;try{Wx(s,i.alternate,i)}finally{Ft=g,ee.p=d,Y.T=o}}zn=3}}function E2(){if(zn===4||zn===3){zn=0,Qe();var s=ha,i=Il,o=Ei,d=u2;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?zn=5:(zn=0,Il=ha=null,C2(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(da=null),oi(o),i=i.stateNode,ht&&typeof ht.onCommitFiberRoot=="function")try{ht.onCommitFiberRoot(Dt,i,void 0,(i.current.flags&128)===128)}catch{}if(d!==null){i=Y.T,g=ee.p,ee.p=2,Y.T=null;try{for(var v=s.onRecoverableError,S=0;S<d.length;S++){var D=d[S];v(D.value,{componentStack:D.stack})}}finally{Y.T=i,ee.p=g}}(Ei&3)!==0&&$h(),Fs(s),g=s.pendingLanes,(o&261930)!==0&&(g&42)!==0?s===$g?xu++:(xu=0,$g=s):xu=0,_u(0)}}function C2(s,i){(s.pooledCacheLanes&=i)===0&&(i=s.pooledCache,i!=null&&(s.pooledCache=null,tu(i)))}function $h(){return w2(),S2(),E2(),T2()}function T2(){if(zn!==5)return!1;var s=ha,i=Bg;Bg=0;var o=oi(Ei),d=Y.T,g=ee.p;try{ee.p=32>o?32:o,Y.T=null,o=Fg,Fg=null;var v=ha,S=Ei;if(zn=0,Il=ha=null,Ei=0,(Ft&6)!==0)throw Error(r(331));var D=Ft;if(Ft|=4,o2(v.current),s2(v,v.current,S,o),Ft=D,_u(0,!1),ht&&typeof ht.onPostCommitFiberRoot=="function")try{ht.onPostCommitFiberRoot(Dt,v)}catch{}return!0}finally{ee.p=g,Y.T=d,C2(s,i)}}function k2(s,i,o){i=es(o,i),i=_g(s.stateNode,i,2),s=ia(s,i,2),s!==null&&(gt(s,2),Fs(s))}function Kt(s,i,o){if(s.tag===3)k2(s,s,o);else for(;i!==null;){if(i.tag===3){k2(i,s,o);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(da===null||!da.has(d))){s=es(o,s),o=Nx(2),d=ia(i,o,2),d!==null&&(Ax(o,d,i,s),gt(d,2),Fs(d));break}}i=i.return}}function Gg(s,i,o){var d=s.pingCache;if(d===null){d=s.pingCache=new _5;var g=new Set;d.set(i,g)}else g=d.get(i),g===void 0&&(g=new Set,d.set(i,g));g.has(o)||(Vg=!0,g.add(o),s=T5.bind(null,s,i,o),i.then(s,s))}function T5(s,i,o){var d=s.pingCache;d!==null&&d.delete(i),s.pingedLanes|=s.suspendedLanes&o,s.warmLanes&=~o,en===s&&(Nt&o)===o&&(pn===4||pn===3&&(Nt&62914560)===Nt&&300>ct()-Lh?(Ft&2)===0&&Dl(s,0):zg|=o,jl===Nt&&(jl=0)),Fs(s)}function N2(s,i){i===0&&(i=Vn()),s=uo(s,i),s!==null&&(gt(s,i),Fs(s))}function k5(s){var i=s.memoizedState,o=0;i!==null&&(o=i.retryLane),N2(s,o)}function N5(s,i){var o=0;switch(s.tag){case 31:case 13:var d=s.stateNode,g=s.memoizedState;g!==null&&(o=g.retryLane);break;case 19:d=s.stateNode;break;case 22:d=s.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(i),N2(s,o)}function A5(s,i){return J(s,i)}var Hh=null,Pl=null,Yg=!1,qh=!1,Kg=!1,ma=0;function Fs(s){s!==Pl&&s.next===null&&(Pl===null?Hh=Pl=s:Pl=Pl.next=s),qh=!0,Yg||(Yg=!0,j5())}function _u(s,i){if(!Kg&&qh){Kg=!0;do for(var o=!1,d=Hh;d!==null;){if(s!==0){var g=d.pendingLanes;if(g===0)var v=0;else{var S=d.suspendedLanes,D=d.pingedLanes;v=(1<<31-nn(42|s)+1)-1,v&=g&~(S&~D),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(o=!0,I2(d,v))}else v=Nt,v=zt(d,d===en?v:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(v&3)===0||xt(d,v)||(o=!0,I2(d,v));d=d.next}while(o);Kg=!1}}function R5(){A2()}function A2(){qh=Yg=!1;var s=0;ma!==0&&B5()&&(s=ma);for(var i=ct(),o=null,d=Hh;d!==null;){var g=d.next,v=R2(d,i);v===0?(d.next=null,o===null?Hh=g:o.next=g,g===null&&(Pl=o)):(o=d,(s!==0||(v&3)!==0)&&(qh=!0)),d=g}zn!==0&&zn!==5||_u(s),ma!==0&&(ma=0)}function R2(s,i){for(var o=s.suspendedLanes,d=s.pingedLanes,g=s.expirationTimes,v=s.pendingLanes&-62914561;0<v;){var S=31-nn(v),D=1<<S,G=g[S];G===-1?((D&o)===0||(D&d)!==0)&&(g[S]=sn(D,i)):G<=i&&(s.expiredLanes|=D),v&=~D}if(i=en,o=Nt,o=zt(s,s===i?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d=s.callbackNode,o===0||s===i&&(Yt===2||Yt===9)||s.cancelPendingCommit!==null)return d!==null&&d!==null&&Ce(d),s.callbackNode=null,s.callbackPriority=0;if((o&3)===0||xt(s,o)){if(i=o&-o,i===s.callbackPriority)return i;switch(d!==null&&Ce(d),oi(o)){case 2:case 8:o=ar;break;case 32:o=ke;break;case 268435456:o=nt;break;default:o=ke}return d=j2.bind(null,s),o=J(o,d),s.callbackPriority=i,s.callbackNode=o,i}return d!==null&&d!==null&&Ce(d),s.callbackPriority=2,s.callbackNode=null,2}function j2(s,i){if(zn!==0&&zn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var o=s.callbackNode;if($h()&&s.callbackNode!==o)return null;var d=Nt;return d=zt(s,s===en?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d===0?null:(h2(s,d,i),R2(s,ct()),s.callbackNode!=null&&s.callbackNode===o?j2.bind(null,s):null)}function I2(s,i){if($h())return null;h2(s,i,!0)}function j5(){$5(function(){(Ft&6)!==0?J(fn,R5):A2()})}function Qg(){if(ma===0){var s=xl;s===0&&(s=Xe,Xe<<=1,(Xe&261888)===0&&(Xe=256)),ma=s}return ma}function D2(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:il(""+s)}function M2(s,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,s.id&&o.setAttribute("form",s.id),i.parentNode.insertBefore(o,i),s=new FormData(s),o.parentNode.removeChild(o),s}function I5(s,i,o,d,g){if(i==="submit"&&o&&o.stateNode===g){var v=D2((g[Hn]||null).action),S=d.submitter;S&&(i=(i=S[Hn]||null)?D2(i.formAction):S.getAttribute("formAction"),i!==null&&(v=i,S=null));var D=new Ps("action","action",null,d,g);s.push({event:D,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(ma!==0){var G=S?M2(g,S):new FormData(g);pg(o,{pending:!0,data:G,method:g.method,action:v},null,G)}}else typeof v=="function"&&(D.preventDefault(),G=S?M2(g,S):new FormData(g),pg(o,{pending:!0,data:G,method:g.method,action:v},v,G))},currentTarget:g}]})}}for(var Xg=0;Xg<Ip.length;Xg++){var Wg=Ip[Xg],D5=Wg.toLowerCase(),M5=Wg[0].toUpperCase()+Wg.slice(1);gs(D5,"on"+M5)}gs(db,"onAnimationEnd"),gs(hb,"onAnimationIteration"),gs(fb,"onAnimationStart"),gs("dblclick","onDoubleClick"),gs("focusin","onFocus"),gs("focusout","onBlur"),gs(X6,"onTransitionRun"),gs(W6,"onTransitionStart"),gs(J6,"onTransitionCancel"),gs(mb,"onTransitionEnd"),js("onMouseEnter",["mouseout","mouseover"]),js("onMouseLeave",["mouseout","mouseover"]),js("onPointerEnter",["pointerout","pointerover"]),js("onPointerLeave",["pointerout","pointerover"]),Rs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Rs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Rs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Rs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Rs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Rs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),P5=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wu));function P2(s,i){i=(i&4)!==0;for(var o=0;o<s.length;o++){var d=s[o],g=d.event;d=d.listeners;e:{var v=void 0;if(i)for(var S=d.length-1;0<=S;S--){var D=d[S],G=D.instance,re=D.currentTarget;if(D=D.listener,G!==v&&g.isPropagationStopped())break e;v=D,g.currentTarget=re;try{v(g)}catch(me){ah(me)}g.currentTarget=null,v=G}else for(S=0;S<d.length;S++){if(D=d[S],G=D.instance,re=D.currentTarget,D=D.listener,G!==v&&g.isPropagationStopped())break e;v=D,g.currentTarget=re;try{v(g)}catch(me){ah(me)}g.currentTarget=null,v=G}}}}function kt(s,i){var o=i[el];o===void 0&&(o=i[el]=new Set);var d=s+"__bubble";o.has(d)||(O2(i,s,2,!1),o.add(d))}function Jg(s,i,o){var d=0;i&&(d|=4),O2(o,s,d,i)}var Gh="_reactListening"+Math.random().toString(36).slice(2);function Zg(s){if(!s[Gh]){s[Gh]=!0,Mc.forEach(function(o){o!=="selectionchange"&&(P5.has(o)||Jg(o,!1,s),Jg(o,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[Gh]||(i[Gh]=!0,Jg("selectionchange",!1,i))}}function O2(s,i,o,d){switch(d_(i)){case 2:var g=cN;break;case 8:g=uN;break;default:g=m0}o=g.bind(null,i,o,s),g=void 0,!no||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),d?g!==void 0?s.addEventListener(i,o,{capture:!0,passive:g}):s.addEventListener(i,o,!0):g!==void 0?s.addEventListener(i,o,{passive:g}):s.addEventListener(i,o,!1)}function e0(s,i,o,d,g){var v=d;if((i&1)===0&&(i&2)===0&&d!==null)e:for(;;){if(d===null)return;var S=d.tag;if(S===3||S===4){var D=d.stateNode.containerInfo;if(D===g)break;if(S===4)for(S=d.return;S!==null;){var G=S.tag;if((G===3||G===4)&&S.stateNode.containerInfo===g)return;S=S.return}for(;D!==null;){if(S=Ns(D),S===null)return;if(G=S.tag,G===5||G===6||G===26||G===27){d=v=S;continue e}D=D.parentNode}}d=d.return}Qi(function(){var re=v,me=Xr(o),xe=[];e:{var oe=pb.get(s);if(oe!==void 0){var ue=Ps,He=s;switch(s){case"keypress":if(so(o)===0)break e;case"keydown":case"keyup":ue=rh;break;case"focusin":He="focus",ue=ao;break;case"focusout":He="blur",ue=ao;break;case"beforeblur":case"afterblur":ue=ao;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Yc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=Kd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=_;break;case db:case hb:case fb:ue=Xd;break;case mb:ue=V;break;case"scroll":case"scrollend":ue=Gc;break;case"wheel":ue=ce;break;case"copy":case"cut":case"paste":ue=Wd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=ui;break;case"toggle":case"beforetoggle":ue=vt}var st=(i&4)!==0,Zt=!st&&(s==="scroll"||s==="scrollend"),X=st?oe!==null?oe+"Capture":null:oe;st=[];for(var K=re,ne;K!==null;){var be=K;if(ne=be.stateNode,be=be.tag,be!==5&&be!==26&&be!==27||ne===null||X===null||(be=hs(K,X),be!=null&&st.push(Su(K,be,ne))),Zt)break;K=K.return}0<st.length&&(oe=new ue(oe,He,null,o,me),xe.push({event:oe,listeners:st}))}}if((i&7)===0){e:{if(oe=s==="mouseover"||s==="pointerover",ue=s==="mouseout"||s==="pointerout",oe&&o!==$c&&(He=o.relatedTarget||o.fromElement)&&(Ns(He)||He[Ts]))break e;if((ue||oe)&&(oe=me.window===me?me:(oe=me.ownerDocument)?oe.defaultView||oe.parentWindow:window,ue?(He=o.relatedTarget||o.toElement,ue=re,He=He?Ns(He):null,He!==null&&(Zt=l(He),st=He.tag,He!==Zt||st!==5&&st!==27&&st!==6)&&(He=null)):(ue=null,He=re),ue!==He)){if(st=Yc,be="onMouseLeave",X="onMouseEnter",K="mouse",(s==="pointerout"||s==="pointerover")&&(st=ui,be="onPointerLeave",X="onPointerEnter",K="pointer"),Zt=ue==null?oe:Dr(ue),ne=He==null?oe:Dr(He),oe=new st(be,K+"leave",ue,o,me),oe.target=Zt,oe.relatedTarget=ne,be=null,Ns(me)===re&&(st=new st(X,K+"enter",He,o,me),st.target=ne,st.relatedTarget=Zt,be=st),Zt=be,ue&&He)t:{for(st=O5,X=ue,K=He,ne=0,be=X;be;be=st(be))ne++;be=0;for(var Ze=K;Ze;Ze=st(Ze))be++;for(;0<ne-be;)X=st(X),ne--;for(;0<be-ne;)K=st(K),be--;for(;ne--;){if(X===K||K!==null&&X===K.alternate){st=X;break t}X=st(X),K=st(K)}st=null}else st=null;ue!==null&&L2(xe,oe,ue,st,!1),He!==null&&Zt!==null&&L2(xe,Zt,He,st,!0)}}e:{if(oe=re?Dr(re):window,ue=oe.nodeName&&oe.nodeName.toLowerCase(),ue==="select"||ue==="input"&&oe.type==="file")var Ot=eb;else if(J1(oe))if(tb)Ot=Y6;else{Ot=q6;var Ke=H6}else ue=oe.nodeName,!ue||ue.toLowerCase()!=="input"||oe.type!=="checkbox"&&oe.type!=="radio"?re&&sl(re.elementType)&&(Ot=eb):Ot=G6;if(Ot&&(Ot=Ot(s,re))){Z1(xe,Ot,o,me);break e}Ke&&Ke(s,oe,re),s==="focusout"&&re&&oe.type==="number"&&re.memoizedProps.value!=null&&Uc(oe,"number",oe.value)}switch(Ke=re?Dr(re):window,s){case"focusin":(J1(Ke)||Ke.contentEditable==="true")&&(hl=Ke,Ap=re,Jc=null);break;case"focusout":Jc=Ap=hl=null;break;case"mousedown":Rp=!0;break;case"contextmenu":case"mouseup":case"dragend":Rp=!1,cb(xe,o,me);break;case"selectionchange":if(Q6)break;case"keydown":case"keyup":cb(xe,o,me)}var _t;if(Bt)e:{switch(s){case"compositionstart":var At="onCompositionStart";break e;case"compositionend":At="onCompositionEnd";break e;case"compositionupdate":At="onCompositionUpdate";break e}At=void 0}else dl?oo(s,o)&&(At="onCompositionEnd"):s==="keydown"&&o.keyCode===229&&(At="onCompositionStart");At&&(Vs&&o.locale!=="ko"&&(dl||At!=="onCompositionStart"?At==="onCompositionEnd"&&dl&&(_t=qc()):(Ms=me,Hc="value"in Ms?Ms.value:Ms.textContent,dl=!0)),Ke=Yh(re,At),0<Ke.length&&(At=new Ls(At,s,null,o,me),xe.push({event:At,listeners:Ke}),_t?At.data=_t:(_t=ul(o),_t!==null&&(At.data=_t)))),(_t=Jr?U6(s,o):B6(s,o))&&(At=Yh(re,"onBeforeInput"),0<At.length&&(Ke=new Ls("onBeforeInput","beforeinput",null,o,me),xe.push({event:Ke,listeners:At}),Ke.data=_t)),I5(xe,s,re,o,me)}P2(xe,i)})}function Su(s,i,o){return{instance:s,listener:i,currentTarget:o}}function Yh(s,i){for(var o=i+"Capture",d=[];s!==null;){var g=s,v=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=hs(s,o),g!=null&&d.unshift(Su(s,g,v)),g=hs(s,i),g!=null&&d.push(Su(s,g,v))),s.tag===3)return d;s=s.return}return[]}function O5(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function L2(s,i,o,d,g){for(var v=i._reactName,S=[];o!==null&&o!==d;){var D=o,G=D.alternate,re=D.stateNode;if(D=D.tag,G!==null&&G===d)break;D!==5&&D!==26&&D!==27||re===null||(G=re,g?(re=hs(o,v),re!=null&&S.unshift(Su(o,re,G))):g||(re=hs(o,v),re!=null&&S.push(Su(o,re,G)))),o=o.return}S.length!==0&&s.push({event:i,listeners:S})}var L5=/\r\n?/g,V5=/\u0000|\uFFFD/g;function V2(s){return(typeof s=="string"?s:""+s).replace(L5,`
`).replace(V5,"")}function z2(s,i){return i=V2(i),V2(s)===i}function Jt(s,i,o,d,g,v){switch(o){case"children":typeof d=="string"?i==="body"||i==="textarea"&&d===""||_r(s,d):(typeof d=="number"||typeof d=="bigint")&&i!=="body"&&_r(s,""+d);break;case"className":Mr(s,"class",d);break;case"tabIndex":Mr(s,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Mr(s,o,d);break;case"style":Fc(s,d,v);break;case"data":if(i!=="object"){Mr(s,"data",d);break}case"src":case"href":if(d===""&&(i!=="a"||o!=="href")){s.removeAttribute(o);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(o);break}d=il(""+d),s.setAttribute(o,d);break;case"action":case"formAction":if(typeof d=="function"){s.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(o==="formAction"?(i!=="input"&&Jt(s,i,"name",g.name,g,null),Jt(s,i,"formEncType",g.formEncType,g,null),Jt(s,i,"formMethod",g.formMethod,g,null),Jt(s,i,"formTarget",g.formTarget,g,null)):(Jt(s,i,"encType",g.encType,g,null),Jt(s,i,"method",g.method,g,null),Jt(s,i,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(o);break}d=il(""+d),s.setAttribute(o,d);break;case"onClick":d!=null&&(s.onclick=ds);break;case"onScroll":d!=null&&kt("scroll",s);break;case"onScrollEnd":d!=null&&kt("scrollend",s);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(o=d.__html,o!=null){if(g.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"multiple":s.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":s.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){s.removeAttribute("xlink:href");break}o=il(""+d),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(o,""+d):s.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(o,""):s.removeAttribute(o);break;case"capture":case"download":d===!0?s.setAttribute(o,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(o,d):s.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?s.setAttribute(o,d):s.removeAttribute(o);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?s.removeAttribute(o):s.setAttribute(o,d);break;case"popover":kt("beforetoggle",s),kt("toggle",s),nl(s,"popover",d);break;case"xlinkActuate":Tn(s,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Tn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Tn(s,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Tn(s,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Tn(s,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Tn(s,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Tn(s,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Tn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Tn(s,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":nl(s,"is",d);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Yd.get(o)||o,nl(s,o,d))}}function t0(s,i,o,d,g,v){switch(o){case"style":Fc(s,d,v);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(o=d.__html,o!=null){if(g.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"children":typeof d=="string"?_r(s,d):(typeof d=="number"||typeof d=="bigint")&&_r(s,""+d);break;case"onScroll":d!=null&&kt("scroll",s);break;case"onScrollEnd":d!=null&&kt("scrollend",s);break;case"onClick":d!=null&&(s.onclick=ds);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pc.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(g=o.endsWith("Capture"),i=o.slice(2,g?o.length-7:void 0),v=s[Hn]||null,v=v!=null?v[o]:null,typeof v=="function"&&s.removeEventListener(i,v,g),typeof d=="function")){typeof v!="function"&&v!==null&&(o in s?s[o]=null:s.hasAttribute(o)&&s.removeAttribute(o)),s.addEventListener(i,d,g);break e}o in s?s[o]=d:d===!0?s.setAttribute(o,""):nl(s,o,d)}}}function er(s,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":kt("error",s),kt("load",s);var d=!1,g=!1,v;for(v in o)if(o.hasOwnProperty(v)){var S=o[v];if(S!=null)switch(v){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Jt(s,i,v,S,o,null)}}g&&Jt(s,i,"srcSet",o.srcSet,o,null),d&&Jt(s,i,"src",o.src,o,null);return;case"input":kt("invalid",s);var D=v=S=g=null,G=null,re=null;for(d in o)if(o.hasOwnProperty(d)){var me=o[d];if(me!=null)switch(d){case"name":g=me;break;case"type":S=me;break;case"checked":G=me;break;case"defaultChecked":re=me;break;case"value":v=me;break;case"defaultValue":D=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(r(137,i));break;default:Jt(s,i,d,me,o,null)}}Hd(s,v,D,G,re,S,g,!1);return;case"select":kt("invalid",s),d=S=v=null;for(g in o)if(o.hasOwnProperty(g)&&(D=o[g],D!=null))switch(g){case"value":v=D;break;case"defaultValue":S=D;break;case"multiple":d=D;default:Jt(s,i,g,D,o,null)}i=v,o=S,s.multiple=!!d,i!=null?qi(s,!!d,i,!1):o!=null&&qi(s,!!d,o,!0);return;case"textarea":kt("invalid",s),v=g=d=null;for(S in o)if(o.hasOwnProperty(S)&&(D=o[S],D!=null))switch(S){case"value":d=D;break;case"defaultValue":g=D;break;case"children":v=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(r(91));break;default:Jt(s,i,S,D,o,null)}Gi(s,d,g,v);return;case"option":for(G in o)if(o.hasOwnProperty(G)&&(d=o[G],d!=null))switch(G){case"selected":s.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Jt(s,i,G,d,o,null)}return;case"dialog":kt("beforetoggle",s),kt("toggle",s),kt("cancel",s),kt("close",s);break;case"iframe":case"object":kt("load",s);break;case"video":case"audio":for(d=0;d<wu.length;d++)kt(wu[d],s);break;case"image":kt("error",s),kt("load",s);break;case"details":kt("toggle",s);break;case"embed":case"source":case"link":kt("error",s),kt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(re in o)if(o.hasOwnProperty(re)&&(d=o[re],d!=null))switch(re){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Jt(s,i,re,d,o,null)}return;default:if(sl(i)){for(me in o)o.hasOwnProperty(me)&&(d=o[me],d!==void 0&&t0(s,i,me,d,o,void 0));return}}for(D in o)o.hasOwnProperty(D)&&(d=o[D],d!=null&&Jt(s,i,D,d,o,null))}function z5(s,i,o,d){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,S=null,D=null,G=null,re=null,me=null;for(ue in o){var xe=o[ue];if(o.hasOwnProperty(ue)&&xe!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":G=xe;default:d.hasOwnProperty(ue)||Jt(s,i,ue,null,d,xe)}}for(var oe in d){var ue=d[oe];if(xe=o[oe],d.hasOwnProperty(oe)&&(ue!=null||xe!=null))switch(oe){case"type":v=ue;break;case"name":g=ue;break;case"checked":re=ue;break;case"defaultChecked":me=ue;break;case"value":S=ue;break;case"defaultValue":D=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,i));break;default:ue!==xe&&Jt(s,i,oe,ue,d,xe)}}rl(s,S,D,G,re,me,v,g);return;case"select":ue=S=D=oe=null;for(v in o)if(G=o[v],o.hasOwnProperty(v)&&G!=null)switch(v){case"value":break;case"multiple":ue=G;default:d.hasOwnProperty(v)||Jt(s,i,v,null,d,G)}for(g in d)if(v=d[g],G=o[g],d.hasOwnProperty(g)&&(v!=null||G!=null))switch(g){case"value":oe=v;break;case"defaultValue":D=v;break;case"multiple":S=v;default:v!==G&&Jt(s,i,g,v,d,G)}i=D,o=S,d=ue,oe!=null?qi(s,!!o,oe,!1):!!d!=!!o&&(i!=null?qi(s,!!o,i,!0):qi(s,!!o,o?[]:"",!1));return;case"textarea":ue=oe=null;for(D in o)if(g=o[D],o.hasOwnProperty(D)&&g!=null&&!d.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:Jt(s,i,D,null,d,g)}for(S in d)if(g=d[S],v=o[S],d.hasOwnProperty(S)&&(g!=null||v!=null))switch(S){case"value":oe=g;break;case"defaultValue":ue=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==v&&Jt(s,i,S,g,d,v)}qd(s,oe,ue);return;case"option":for(var He in o)if(oe=o[He],o.hasOwnProperty(He)&&oe!=null&&!d.hasOwnProperty(He))switch(He){case"selected":s.selected=!1;break;default:Jt(s,i,He,null,d,oe)}for(G in d)if(oe=d[G],ue=o[G],d.hasOwnProperty(G)&&oe!==ue&&(oe!=null||ue!=null))switch(G){case"selected":s.selected=oe&&typeof oe!="function"&&typeof oe!="symbol";break;default:Jt(s,i,G,oe,d,ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var st in o)oe=o[st],o.hasOwnProperty(st)&&oe!=null&&!d.hasOwnProperty(st)&&Jt(s,i,st,null,d,oe);for(re in d)if(oe=d[re],ue=o[re],d.hasOwnProperty(re)&&oe!==ue&&(oe!=null||ue!=null))switch(re){case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,i));break;default:Jt(s,i,re,oe,d,ue)}return;default:if(sl(i)){for(var Zt in o)oe=o[Zt],o.hasOwnProperty(Zt)&&oe!==void 0&&!d.hasOwnProperty(Zt)&&t0(s,i,Zt,void 0,d,oe);for(me in d)oe=d[me],ue=o[me],!d.hasOwnProperty(me)||oe===ue||oe===void 0&&ue===void 0||t0(s,i,me,oe,d,ue);return}}for(var X in o)oe=o[X],o.hasOwnProperty(X)&&oe!=null&&!d.hasOwnProperty(X)&&Jt(s,i,X,null,d,oe);for(xe in d)oe=d[xe],ue=o[xe],!d.hasOwnProperty(xe)||oe===ue||oe==null&&ue==null||Jt(s,i,xe,oe,d,ue)}function U2(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function U5(){if(typeof performance.getEntriesByType=="function"){for(var s=0,i=0,o=performance.getEntriesByType("resource"),d=0;d<o.length;d++){var g=o[d],v=g.transferSize,S=g.initiatorType,D=g.duration;if(v&&D&&U2(S)){for(S=0,D=g.responseEnd,d+=1;d<o.length;d++){var G=o[d],re=G.startTime;if(re>D)break;var me=G.transferSize,xe=G.initiatorType;me&&U2(xe)&&(G=G.responseEnd,S+=me*(G<D?1:(D-re)/(G-re)))}if(--d,i+=8*(v+S)/(g.duration/1e3),s++,10<s)break}}if(0<s)return i/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var n0=null,r0=null;function Kh(s){return s.nodeType===9?s:s.ownerDocument}function B2(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function F2(s,i){if(s===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&i==="foreignObject"?0:s}function s0(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var i0=null;function B5(){var s=window.event;return s&&s.type==="popstate"?s===i0?!1:(i0=s,!0):(i0=null,!1)}var $2=typeof setTimeout=="function"?setTimeout:void 0,F5=typeof clearTimeout=="function"?clearTimeout:void 0,H2=typeof Promise=="function"?Promise:void 0,$5=typeof queueMicrotask=="function"?queueMicrotask:typeof H2<"u"?function(s){return H2.resolve(null).then(s).catch(H5)}:$2;function H5(s){setTimeout(function(){throw s})}function pa(s){return s==="head"}function q2(s,i){var o=i,d=0;do{var g=o.nextSibling;if(s.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"||o==="/&"){if(d===0){s.removeChild(g),zl(i);return}d--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")d++;else if(o==="html")Eu(s.ownerDocument.documentElement);else if(o==="head"){o=s.ownerDocument.head,Eu(o);for(var v=o.firstChild;v;){var S=v.nextSibling,D=v.nodeName;v[ks]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&v.rel.toLowerCase()==="stylesheet"||o.removeChild(v),v=S}}else o==="body"&&Eu(s.ownerDocument.body);o=g}while(o);zl(i)}function G2(s,i){var o=s;s=0;do{var d=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),d&&d.nodeType===8)if(o=d.data,o==="/$"){if(s===0)break;s--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||s++;o=d}while(o)}function a0(s){var i=s.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":a0(o),tl(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}s.removeChild(o)}}function q5(s,i,o,d){for(;s.nodeType===1;){var g=o;if(s.nodeName.toLowerCase()!==i.toLowerCase()){if(!d&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(d){if(!s[ks])switch(i){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(v=s.getAttribute("rel"),v==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(v!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(v=s.getAttribute("src"),(v!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(i==="input"&&s.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===v)return s}else return s;if(s=is(s.nextSibling),s===null)break}return null}function G5(s,i,o){if(i==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=is(s.nextSibling),s===null))return null;return s}function Y2(s,i){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!i||(s=is(s.nextSibling),s===null))return null;return s}function o0(s){return s.data==="$?"||s.data==="$~"}function l0(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function Y5(s,i){var o=s.ownerDocument;if(s.data==="$~")s._reactRetry=i;else if(s.data!=="$?"||o.readyState!=="loading")i();else{var d=function(){i(),o.removeEventListener("DOMContentLoaded",d)};o.addEventListener("DOMContentLoaded",d),s._reactRetry=d}}function is(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return s}var c0=null;function K2(s){s=s.nextSibling;for(var i=0;s;){if(s.nodeType===8){var o=s.data;if(o==="/$"||o==="/&"){if(i===0)return is(s.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}s=s.nextSibling}return null}function Q2(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var o=s.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return s;i--}else o!=="/$"&&o!=="/&"||i++}s=s.previousSibling}return null}function X2(s,i,o){switch(i=Kh(o),s){case"html":if(s=i.documentElement,!s)throw Error(r(452));return s;case"head":if(s=i.head,!s)throw Error(r(453));return s;case"body":if(s=i.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Eu(s){for(var i=s.attributes;i.length;)s.removeAttributeNode(i[0]);tl(s)}var as=new Map,W2=new Set;function Qh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Ci=ee.d;ee.d={f:K5,r:Q5,D:X5,C:W5,L:J5,m:Z5,X:tN,S:eN,M:nN};function K5(){var s=Ci.f(),i=Uh();return s||i}function Q5(s){var i=Qr(s);i!==null&&i.tag===5&&i.type==="form"?mx(i):Ci.r(s)}var Ol=typeof document>"u"?null:document;function J2(s,i,o){var d=Ol;if(d&&typeof i=="string"&&i){var g=xr(i);g='link[rel="'+s+'"][href="'+g+'"]',typeof o=="string"&&(g+='[crossorigin="'+o+'"]'),W2.has(g)||(W2.add(g),s={rel:s,crossOrigin:o,href:i},d.querySelector(g)===null&&(i=d.createElement("link"),er(i,"link",s),Cn(i),d.head.appendChild(i)))}}function X5(s){Ci.D(s),J2("dns-prefetch",s,null)}function W5(s,i){Ci.C(s,i),J2("preconnect",s,i)}function J5(s,i,o){Ci.L(s,i,o);var d=Ol;if(d&&s&&i){var g='link[rel="preload"][as="'+xr(i)+'"]';i==="image"&&o&&o.imageSrcSet?(g+='[imagesrcset="'+xr(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(g+='[imagesizes="'+xr(o.imageSizes)+'"]')):g+='[href="'+xr(s)+'"]';var v=g;switch(i){case"style":v=Ll(s);break;case"script":v=Vl(s)}as.has(v)||(s=b({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:s,as:i},o),as.set(v,s),d.querySelector(g)!==null||i==="style"&&d.querySelector(Cu(v))||i==="script"&&d.querySelector(Tu(v))||(i=d.createElement("link"),er(i,"link",s),Cn(i),d.head.appendChild(i)))}}function Z5(s,i){Ci.m(s,i);var o=Ol;if(o&&s){var d=i&&typeof i.as=="string"?i.as:"script",g='link[rel="modulepreload"][as="'+xr(d)+'"][href="'+xr(s)+'"]',v=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Vl(s)}if(!as.has(v)&&(s=b({rel:"modulepreload",href:s},i),as.set(v,s),o.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Tu(v)))return}d=o.createElement("link"),er(d,"link",s),Cn(d),o.head.appendChild(d)}}}function eN(s,i,o){Ci.S(s,i,o);var d=Ol;if(d&&s){var g=As(d).hoistableStyles,v=Ll(s);i=i||"default";var S=g.get(v);if(!S){var D={loading:0,preload:null};if(S=d.querySelector(Cu(v)))D.loading=5;else{s=b({rel:"stylesheet",href:s,"data-precedence":i},o),(o=as.get(v))&&u0(s,o);var G=S=d.createElement("link");Cn(G),er(G,"link",s),G._p=new Promise(function(re,me){G.onload=re,G.onerror=me}),G.addEventListener("load",function(){D.loading|=1}),G.addEventListener("error",function(){D.loading|=2}),D.loading|=4,Xh(S,i,d)}S={type:"stylesheet",instance:S,count:1,state:D},g.set(v,S)}}}function tN(s,i){Ci.X(s,i);var o=Ol;if(o&&s){var d=As(o).hoistableScripts,g=Vl(s),v=d.get(g);v||(v=o.querySelector(Tu(g)),v||(s=b({src:s,async:!0},i),(i=as.get(g))&&d0(s,i),v=o.createElement("script"),Cn(v),er(v,"link",s),o.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(g,v))}}function nN(s,i){Ci.M(s,i);var o=Ol;if(o&&s){var d=As(o).hoistableScripts,g=Vl(s),v=d.get(g);v||(v=o.querySelector(Tu(g)),v||(s=b({src:s,async:!0,type:"module"},i),(i=as.get(g))&&d0(s,i),v=o.createElement("script"),Cn(v),er(v,"link",s),o.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(g,v))}}function Z2(s,i,o,d){var g=(g=De.current)?Qh(g):null;if(!g)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Ll(o.href),o=As(g).hoistableStyles,d=o.get(i),d||(d={type:"style",instance:null,count:0,state:null},o.set(i,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){s=Ll(o.href);var v=As(g).hoistableStyles,S=v.get(s);if(S||(g=g.ownerDocument||g,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(s,S),(v=g.querySelector(Cu(s)))&&!v._p&&(S.instance=v,S.state.loading=5),as.has(s)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},as.set(s,o),v||rN(g,s,o,S.state))),i&&d===null)throw Error(r(528,""));return S}if(i&&d!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Vl(o),o=As(g).hoistableScripts,d=o.get(i),d||(d={type:"script",instance:null,count:0,state:null},o.set(i,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Ll(s){return'href="'+xr(s)+'"'}function Cu(s){return'link[rel="stylesheet"]['+s+"]"}function e_(s){return b({},s,{"data-precedence":s.precedence,precedence:null})}function rN(s,i,o,d){s.querySelector('link[rel="preload"][as="style"]['+i+"]")?d.loading=1:(i=s.createElement("link"),d.preload=i,i.addEventListener("load",function(){return d.loading|=1}),i.addEventListener("error",function(){return d.loading|=2}),er(i,"link",o),Cn(i),s.head.appendChild(i))}function Vl(s){return'[src="'+xr(s)+'"]'}function Tu(s){return"script[async]"+s}function t_(s,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var d=s.querySelector('style[data-href~="'+xr(o.href)+'"]');if(d)return i.instance=d,Cn(d),d;var g=b({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return d=(s.ownerDocument||s).createElement("style"),Cn(d),er(d,"style",g),Xh(d,o.precedence,s),i.instance=d;case"stylesheet":g=Ll(o.href);var v=s.querySelector(Cu(g));if(v)return i.state.loading|=4,i.instance=v,Cn(v),v;d=e_(o),(g=as.get(g))&&u0(d,g),v=(s.ownerDocument||s).createElement("link"),Cn(v);var S=v;return S._p=new Promise(function(D,G){S.onload=D,S.onerror=G}),er(v,"link",d),i.state.loading|=4,Xh(v,o.precedence,s),i.instance=v;case"script":return v=Vl(o.src),(g=s.querySelector(Tu(v)))?(i.instance=g,Cn(g),g):(d=o,(g=as.get(v))&&(d=b({},o),d0(d,g)),s=s.ownerDocument||s,g=s.createElement("script"),Cn(g),er(g,"link",d),s.head.appendChild(g),i.instance=g);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(d=i.instance,i.state.loading|=4,Xh(d,o.precedence,s));return i.instance}function Xh(s,i,o){for(var d=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,v=g,S=0;S<d.length;S++){var D=d[S];if(D.dataset.precedence===i)v=D;else if(v!==g)break}v?v.parentNode.insertBefore(s,v.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(s,i.firstChild))}function u0(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.title==null&&(s.title=i.title)}function d0(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.integrity==null&&(s.integrity=i.integrity)}var Wh=null;function n_(s,i,o){if(Wh===null){var d=new Map,g=Wh=new Map;g.set(o,d)}else g=Wh,d=g.get(o),d||(d=new Map,g.set(o,d));if(d.has(s))return d;for(d.set(s,null),o=o.getElementsByTagName(s),g=0;g<o.length;g++){var v=o[g];if(!(v[ks]||v[En]||s==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var S=v.getAttribute(i)||"";S=s+S;var D=d.get(S);D?D.push(v):d.set(S,[v])}}return d}function r_(s,i,o){s=s.ownerDocument||s,s.head.insertBefore(o,i==="title"?s.querySelector("head > title"):null)}function sN(s,i,o){if(o===1||i.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return s=i.disabled,typeof i.precedence=="string"&&s==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function s_(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function iN(s,i,o,d){if(o.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var g=Ll(d.href),v=i.querySelector(Cu(g));if(v){i=v._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(s.count++,s=Jh.bind(s),i.then(s,s)),o.state.loading|=4,o.instance=v,Cn(v);return}v=i.ownerDocument||i,d=e_(d),(g=as.get(g))&&u0(d,g),v=v.createElement("link"),Cn(v);var S=v;S._p=new Promise(function(D,G){S.onload=D,S.onerror=G}),er(v,"link",d),o.instance=v}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(s.count++,o=Jh.bind(s),i.addEventListener("load",o),i.addEventListener("error",o))}}var h0=0;function aN(s,i){return s.stylesheets&&s.count===0&&ef(s,s.stylesheets),0<s.count||0<s.imgCount?function(o){var d=setTimeout(function(){if(s.stylesheets&&ef(s,s.stylesheets),s.unsuspend){var v=s.unsuspend;s.unsuspend=null,v()}},6e4+i);0<s.imgBytes&&h0===0&&(h0=62500*U5());var g=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&ef(s,s.stylesheets),s.unsuspend)){var v=s.unsuspend;s.unsuspend=null,v()}},(s.imgBytes>h0?50:800)+i);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(d),clearTimeout(g)}}:null}function Jh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ef(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Zh=null;function ef(s,i){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Zh=new Map,i.forEach(oN,s),Zh=null,Jh.call(s))}function oN(s,i){if(!(i.state.loading&4)){var o=Zh.get(s);if(o)var d=o.get(null);else{o=new Map,Zh.set(s,o);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var S=g[v];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(o.set(S.dataset.precedence,S),d=S)}d&&o.set(null,d)}g=i.instance,S=g.getAttribute("data-precedence"),v=o.get(S)||d,v===d&&o.set(null,g),o.set(S,g),this.count++,d=Jh.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),v?v.parentNode.insertBefore(g,v.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),i.state.loading|=4}}var ku={$$typeof:I,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function lN(s,i,o,d,g,v,S,D,G){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Be(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Be(0),this.hiddenUpdates=Be(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=G,this.incompleteTransitions=new Map}function i_(s,i,o,d,g,v,S,D,G,re,me,xe){return s=new lN(s,i,o,S,G,re,me,xe,D),i=1,v===!0&&(i|=24),v=Or(3,null,null,i),s.current=v,v.stateNode=s,i=qp(),i.refCount++,s.pooledCache=i,i.refCount++,v.memoizedState={element:d,isDehydrated:o,cache:i},Qp(v),s}function a_(s){return s?(s=pl,s):pl}function o_(s,i,o,d,g,v){g=a_(g),d.context===null?d.context=g:d.pendingContext=g,d=sa(i),d.payload={element:o},v=v===void 0?null:v,v!==null&&(d.callback=v),o=ia(s,d,i),o!==null&&(Tr(o,s,i),iu(o,s,i))}function l_(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var o=s.retryLane;s.retryLane=o!==0&&o<i?o:i}}function f0(s,i){l_(s,i),(s=s.alternate)&&l_(s,i)}function c_(s){if(s.tag===13||s.tag===31){var i=uo(s,67108864);i!==null&&Tr(i,s,67108864),f0(s,67108864)}}function u_(s){if(s.tag===13||s.tag===31){var i=Br();i=Ja(i);var o=uo(s,i);o!==null&&Tr(o,s,i),f0(s,i)}}var tf=!0;function cN(s,i,o,d){var g=Y.T;Y.T=null;var v=ee.p;try{ee.p=2,m0(s,i,o,d)}finally{ee.p=v,Y.T=g}}function uN(s,i,o,d){var g=Y.T;Y.T=null;var v=ee.p;try{ee.p=8,m0(s,i,o,d)}finally{ee.p=v,Y.T=g}}function m0(s,i,o,d){if(tf){var g=p0(d);if(g===null)e0(s,i,d,nf,o),h_(s,d);else if(hN(g,s,i,o,d))d.stopPropagation();else if(h_(s,d),i&4&&-1<dN.indexOf(s)){for(;g!==null;){var v=Qr(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var S=Ct(v.pendingLanes);if(S!==0){var D=v;for(D.pendingLanes|=2,D.entangledLanes|=2;S;){var G=1<<31-nn(S);D.entanglements[1]|=G,S&=~G}Fs(v),(Ft&6)===0&&(Vh=ct()+500,_u(0))}}break;case 31:case 13:D=uo(v,2),D!==null&&Tr(D,v,2),Uh(),f0(v,2)}if(v=p0(d),v===null&&e0(s,i,d,nf,o),v===g)break;g=v}g!==null&&d.stopPropagation()}else e0(s,i,d,null,o)}}function p0(s){return s=Xr(s),g0(s)}var nf=null;function g0(s){if(nf=null,s=Ns(s),s!==null){var i=l(s);if(i===null)s=null;else{var o=i.tag;if(o===13){if(s=u(i),s!==null)return s;s=null}else if(o===31){if(s=h(i),s!==null)return s;s=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null)}}return nf=s,null}function d_(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($t()){case fn:return 2;case ar:return 8;case ke:case ze:return 32;case nt:return 268435456;default:return 32}default:return 32}}var v0=!1,ga=null,va=null,ya=null,Nu=new Map,Au=new Map,ba=[],dN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function h_(s,i){switch(s){case"focusin":case"focusout":ga=null;break;case"dragenter":case"dragleave":va=null;break;case"mouseover":case"mouseout":ya=null;break;case"pointerover":case"pointerout":Nu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Au.delete(i.pointerId)}}function Ru(s,i,o,d,g,v){return s===null||s.nativeEvent!==v?(s={blockedOn:i,domEventName:o,eventSystemFlags:d,nativeEvent:v,targetContainers:[g]},i!==null&&(i=Qr(i),i!==null&&c_(i)),s):(s.eventSystemFlags|=d,i=s.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),s)}function hN(s,i,o,d,g){switch(i){case"focusin":return ga=Ru(ga,s,i,o,d,g),!0;case"dragenter":return va=Ru(va,s,i,o,d,g),!0;case"mouseover":return ya=Ru(ya,s,i,o,d,g),!0;case"pointerover":var v=g.pointerId;return Nu.set(v,Ru(Nu.get(v)||null,s,i,o,d,g)),!0;case"gotpointercapture":return v=g.pointerId,Au.set(v,Ru(Au.get(v)||null,s,i,o,d,g)),!0}return!1}function f_(s){var i=Ns(s.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=u(o),i!==null){s.blockedOn=i,cs(s.priority,function(){u_(o)});return}}else if(i===31){if(i=h(o),i!==null){s.blockedOn=i,cs(s.priority,function(){u_(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){s.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}s.blockedOn=null}function rf(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var o=p0(s.nativeEvent);if(o===null){o=s.nativeEvent;var d=new o.constructor(o.type,o);$c=d,o.target.dispatchEvent(d),$c=null}else return i=Qr(o),i!==null&&c_(i),s.blockedOn=o,!1;i.shift()}return!0}function m_(s,i,o){rf(s)&&o.delete(i)}function fN(){v0=!1,ga!==null&&rf(ga)&&(ga=null),va!==null&&rf(va)&&(va=null),ya!==null&&rf(ya)&&(ya=null),Nu.forEach(m_),Au.forEach(m_)}function sf(s,i){s.blockedOn===i&&(s.blockedOn=null,v0||(v0=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,fN)))}var af=null;function p_(s){af!==s&&(af=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){af===s&&(af=null);for(var i=0;i<s.length;i+=3){var o=s[i],d=s[i+1],g=s[i+2];if(typeof d!="function"){if(g0(d||o)===null)continue;break}var v=Qr(o);v!==null&&(s.splice(i,3),i-=3,pg(v,{pending:!0,data:g,method:o.method,action:d},d,g))}}))}function zl(s){function i(G){return sf(G,s)}ga!==null&&sf(ga,s),va!==null&&sf(va,s),ya!==null&&sf(ya,s),Nu.forEach(i),Au.forEach(i);for(var o=0;o<ba.length;o++){var d=ba[o];d.blockedOn===s&&(d.blockedOn=null)}for(;0<ba.length&&(o=ba[0],o.blockedOn===null);)f_(o),o.blockedOn===null&&ba.shift();if(o=(s.ownerDocument||s).$$reactFormReplay,o!=null)for(d=0;d<o.length;d+=3){var g=o[d],v=o[d+1],S=g[Hn]||null;if(typeof v=="function")S||p_(o);else if(S){var D=null;if(v&&v.hasAttribute("formAction")){if(g=v,S=v[Hn]||null)D=S.formAction;else if(g0(g)!==null)continue}else D=S.action;typeof D=="function"?o[d+1]=D:(o.splice(d,3),d-=3),p_(o)}}}function g_(){function s(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(S){return g=S})},focusReset:"manual",scroll:"manual"})}function i(){g!==null&&(g(),g=null),d||setTimeout(o,20)}function o(){if(!d&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,g=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){d=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),g!==null&&(g(),g=null)}}}function y0(s){this._internalRoot=s}of.prototype.render=y0.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,d=Br();o_(o,d,s,i,null,null)},of.prototype.unmount=y0.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;o_(s.current,2,null,s,null,null),Uh(),i[Ts]=null}};function of(s){this._internalRoot=s}of.prototype.unstable_scheduleHydration=function(s){if(s){var i=Ud();s={blockedOn:null,target:s,priority:i};for(var o=0;o<ba.length&&i!==0&&i<ba[o].priority;o++);ba.splice(o,0,s),o===0&&f_(s)}};var v_=e.version;if(v_!=="19.2.3")throw Error(r(527,v_,"19.2.3"));ee.findDOMNode=function(s){var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=p(i),s=s!==null?y(s):null,s=s===null?null:s.stateNode,s};var mN={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lf.isDisabled&&lf.supportsFiber)try{Dt=lf.inject(mN),ht=lf}catch{}}return Iu.createRoot=function(s,i){if(!a(s))throw Error(r(299));var o=!1,d="",g=Ex,v=Cx,S=Tx;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onUncaughtError!==void 0&&(g=i.onUncaughtError),i.onCaughtError!==void 0&&(v=i.onCaughtError),i.onRecoverableError!==void 0&&(S=i.onRecoverableError)),i=i_(s,1,!1,null,null,o,d,null,g,v,S,g_),s[Ts]=i.current,Zg(s),new y0(i)},Iu.hydrateRoot=function(s,i,o){if(!a(s))throw Error(r(299));var d=!1,g="",v=Ex,S=Cx,D=Tx,G=null;return o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(S=o.onCaughtError),o.onRecoverableError!==void 0&&(D=o.onRecoverableError),o.formState!==void 0&&(G=o.formState)),i=i_(s,1,!0,i,o??null,d,g,G,v,S,D,g_),i.context=a_(null),o=i.current,d=Br(),d=Ja(d),g=sa(d),g.callback=null,ia(o,g,d),o=d,i.current.lanes=o,gt(i,o),Fs(i),s[Ts]=i.current,Zg(s),new of(i)},Iu.version="19.2.3",Iu}var k_;function CN(){if(k_)return _0.exports;k_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),_0.exports=EN(),_0.exports}var TN=CN();const kN=()=>{};var N_={};const ZS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let a=t.charCodeAt(r);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},NN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const a=t[n++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=t[n++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=t[n++],u=t[n++],h=t[n++],m=((a&7)<<18|(l&63)<<12|(u&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const l=t[n++],u=t[n++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},eE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<t.length;a+=3){const l=t[a],u=a+1<t.length,h=u?t[a+1]:0,m=a+2<t.length,p=m?t[a+2]:0,y=l>>2,b=(l&3)<<4|h>>4;let x=(h&15)<<2|p>>6,k=p&63;m||(k=64,u||(x=64)),r.push(n[y],n[b],n[x],n[k])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ZS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):NN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<t.length;){const l=n[t.charAt(a++)],h=a<t.length?n[t.charAt(a)]:0;++a;const p=a<t.length?n[t.charAt(a)]:64;++a;const b=a<t.length?n[t.charAt(a)]:64;if(++a,l==null||h==null||p==null||b==null)throw new AN;const x=l<<2|h>>4;if(r.push(x),p!==64){const k=h<<4&240|p>>2;if(r.push(k),b!==64){const R=p<<6&192|b;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class AN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RN=function(t){const e=ZS(t);return eE.encodeByteArray(e,!0)},Wf=function(t){return RN(t).replace(/\./g,"")},tE=function(t){try{return eE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function jN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const IN=()=>jN().__FIREBASE_DEFAULTS__,DN=()=>{if(typeof process>"u"||typeof N_>"u")return;const t=N_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},MN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&tE(t[1]);return e&&JSON.parse(e)},Mm=()=>{try{return kN()||IN()||DN()||MN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},nE=t=>Mm()?.emulatorHosts?.[t],rE=t=>{const e=nE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},sE=()=>Mm()?.config,iE=t=>Mm()?.[`_${t}`];class PN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function $o(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function dy(t){return(await fetch(t,{credentials:"include"})).ok}function aE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",a=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Wf(JSON.stringify(n)),Wf(JSON.stringify(u)),""].join(".")}const Ku={};function ON(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ku))Ku[e]?t.emulator.push(e):t.prod.push(e);return t}function LN(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let A_=!1;function hy(t,e){if(typeof window>"u"||typeof document>"u"||!$o(window.location.host)||Ku[t]===e||Ku[t]||A_)return;Ku[t]=e;function n(x){return`__firebase__banner__${x}`}const r="__firebase__banner",l=ON().prod.length>0;function u(){const x=document.getElementById(r);x&&x.remove()}function h(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function m(x,k){x.setAttribute("width","24"),x.setAttribute("id",k),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function p(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{A_=!0,u()},x}function y(x,k){x.setAttribute("id",k),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function b(){const x=LN(r),k=n("text"),R=document.getElementById(k)||document.createElement("span"),j=n("learnmore"),N=document.getElementById(j)||document.createElement("a"),U=n("preprendIcon"),$=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const I=x.element;h(I),y(N,j);const O=p();m($,U),I.append($,R,N,O),document.body.appendChild(I)}l?(R.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function hr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hr())}function zN(){const t=Mm()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function UN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function BN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function FN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $N(){const t=hr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function HN(){return!zN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qN(){try{return typeof indexedDB=="object"}catch{return!1}}function GN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(n){e(n)}})}const YN="FirebaseError";class ri extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=YN,Object.setPrototypeOf(this,ri.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xd.prototype.create)}}class xd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?KN(l,r):"Error",h=`${this.serviceName}: ${u} (${a}).`;return new ri(a,h,r)}}function KN(t,e){return t.replace(QN,(n,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const QN=/\{\$([^}]+)}/g;function XN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Oi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const a of n){if(!r.includes(a))return!1;const l=t[a],u=e[a];if(R_(l)&&R_(u)){if(!Oi(l,u))return!1}else if(l!==u)return!1}for(const a of r)if(!n.includes(a))return!1;return!0}function R_(t){return t!==null&&typeof t=="object"}function _d(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function zu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Uu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function WN(t,e){const n=new JN(t,e);return n.subscribe.bind(n)}class JN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let a;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ZN(e,["next","error","complete"])?a=e:a={next:e,error:n,complete:r},a.next===void 0&&(a.next=C0),a.error===void 0&&(a.error=C0),a.complete===void 0&&(a.complete=C0);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ZN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function C0(){}function rn(t){return t&&t._delegate?t._delegate:t}class za{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ko="[DEFAULT]";class eA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new PN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nA(e))try{this.getOrInitializeService({instanceIdentifier:ko})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=ko){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ko){return this.instances.has(e)}getOptions(e=ko){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[l,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);r===h&&u.resolve(a)}return a}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const a of r)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:tA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ko){return this.component?this.component.multipleInstances?e:ko:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tA(t){return t===ko?void 0:t}function nA(t){return t.instantiationMode==="EAGER"}class rA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new eA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Rt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Rt||(Rt={}));const sA={debug:Rt.DEBUG,verbose:Rt.VERBOSE,info:Rt.INFO,warn:Rt.WARN,error:Rt.ERROR,silent:Rt.SILENT},iA=Rt.INFO,aA={[Rt.DEBUG]:"log",[Rt.VERBOSE]:"log",[Rt.INFO]:"info",[Rt.WARN]:"warn",[Rt.ERROR]:"error"},oA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),a=aA[e];if(a)console[a](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let fy=class{constructor(e){this.name=e,this._logLevel=iA,this._logHandler=oA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Rt.DEBUG,...e),this._logHandler(this,Rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Rt.VERBOSE,...e),this._logHandler(this,Rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Rt.INFO,...e),this._logHandler(this,Rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Rt.WARN,...e),this._logHandler(this,Rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Rt.ERROR,...e),this._logHandler(this,Rt.ERROR,...e)}};const lA=(t,e)=>e.some(n=>t instanceof n);let j_,I_;function cA(){return j_||(j_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uA(){return I_||(I_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const oE=new WeakMap,cv=new WeakMap,lE=new WeakMap,T0=new WeakMap,my=new WeakMap;function dA(t){const e=new Promise((n,r)=>{const a=()=>{t.removeEventListener("success",l),t.removeEventListener("error",u)},l=()=>{n(Ma(t.result)),a()},u=()=>{r(t.error),a()};t.addEventListener("success",l),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&oE.set(n,t)}).catch(()=>{}),my.set(e,t),e}function hA(t){if(cv.has(t))return;const e=new Promise((n,r)=>{const a=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",u),t.removeEventListener("abort",u)},l=()=>{n(),a()},u=()=>{r(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",l),t.addEventListener("error",u),t.addEventListener("abort",u)});cv.set(t,e)}let uv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return cv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||lE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ma(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function fA(t){uv=t(uv)}function mA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(k0(this),e,...n);return lE.set(r,e.sort?e.sort():[e]),Ma(r)}:uA().includes(t)?function(...e){return t.apply(k0(this),e),Ma(oE.get(this))}:function(...e){return Ma(t.apply(k0(this),e))}}function pA(t){return typeof t=="function"?mA(t):(t instanceof IDBTransaction&&hA(t),lA(t,cA())?new Proxy(t,uv):t)}function Ma(t){if(t instanceof IDBRequest)return dA(t);if(T0.has(t))return T0.get(t);const e=pA(t);return e!==t&&(T0.set(t,e),my.set(e,t)),e}const k0=t=>my.get(t);function gA(t,e,{blocked:n,upgrade:r,blocking:a,terminated:l}={}){const u=indexedDB.open(t,e),h=Ma(u);return r&&u.addEventListener("upgradeneeded",m=>{r(Ma(u.result),m.oldVersion,m.newVersion,Ma(u.transaction),m)}),n&&u.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),h.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const vA=["get","getKey","getAll","getAllKeys","count"],yA=["put","add","delete","clear"],N0=new Map;function D_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(N0.get(e))return N0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,a=yA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(a||vA.includes(n)))return;const l=async function(u,...h){const m=this.transaction(u,a?"readwrite":"readonly");let p=m.store;return r&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),a&&m.done]))[0]};return N0.set(e,l),l}fA(t=>({...t,get:(e,n,r)=>D_(e,n)||t.get(e,n,r),has:(e,n)=>!!D_(e,n)||t.has(e,n)}));class bA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function xA(t){return t.getComponent()?.type==="VERSION"}const dv="@firebase/app",M_="0.14.6";const Li=new fy("@firebase/app"),_A="@firebase/app-compat",wA="@firebase/analytics-compat",SA="@firebase/analytics",EA="@firebase/app-check-compat",CA="@firebase/app-check",TA="@firebase/auth",kA="@firebase/auth-compat",NA="@firebase/database",AA="@firebase/data-connect",RA="@firebase/database-compat",jA="@firebase/functions",IA="@firebase/functions-compat",DA="@firebase/installations",MA="@firebase/installations-compat",PA="@firebase/messaging",OA="@firebase/messaging-compat",LA="@firebase/performance",VA="@firebase/performance-compat",zA="@firebase/remote-config",UA="@firebase/remote-config-compat",BA="@firebase/storage",FA="@firebase/storage-compat",$A="@firebase/firestore",HA="@firebase/ai",qA="@firebase/firestore-compat",GA="firebase",YA="12.6.0";const hv="[DEFAULT]",KA={[dv]:"fire-core",[_A]:"fire-core-compat",[SA]:"fire-analytics",[wA]:"fire-analytics-compat",[CA]:"fire-app-check",[EA]:"fire-app-check-compat",[TA]:"fire-auth",[kA]:"fire-auth-compat",[NA]:"fire-rtdb",[AA]:"fire-data-connect",[RA]:"fire-rtdb-compat",[jA]:"fire-fn",[IA]:"fire-fn-compat",[DA]:"fire-iid",[MA]:"fire-iid-compat",[PA]:"fire-fcm",[OA]:"fire-fcm-compat",[LA]:"fire-perf",[VA]:"fire-perf-compat",[zA]:"fire-rc",[UA]:"fire-rc-compat",[BA]:"fire-gcs",[FA]:"fire-gcs-compat",[$A]:"fire-fst",[qA]:"fire-fst-compat",[HA]:"fire-vertex","fire-js":"fire-js",[GA]:"fire-js-all"};const Jf=new Map,QA=new Map,fv=new Map;function P_(t,e){try{t.container.addComponent(e)}catch(n){Li.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Po(t){const e=t.name;if(fv.has(e))return Li.debug(`There were multiple attempts to register component ${e}.`),!1;fv.set(e,t);for(const n of Jf.values())P_(n,t);for(const n of QA.values())P_(n,t);return!0}function Pm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Hr(t){return t==null?!1:t.settings!==void 0}const XA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pa=new xd("app","Firebase",XA);class WA{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new za("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pa.create("app-deleted",{appName:this._name})}}const Ho=YA;function cE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:hv,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw Pa.create("bad-app-name",{appName:String(a)});if(n||(n=sE()),!n)throw Pa.create("no-options");const l=Jf.get(a);if(l){if(Oi(n,l.options)&&Oi(r,l.config))return l;throw Pa.create("duplicate-app",{appName:a})}const u=new rA(a);for(const m of fv.values())u.addComponent(m);const h=new WA(n,r,u);return Jf.set(a,h),h}function py(t=hv){const e=Jf.get(t);if(!e&&t===hv&&sE())return cE();if(!e)throw Pa.create("no-app",{appName:t});return e}function Ys(t,e,n){let r=KA[t]??t;n&&(r+=`-${n}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${r}" with version "${e}":`];a&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Li.warn(u.join(" "));return}Po(new za(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const JA="firebase-heartbeat-database",ZA=1,ed="firebase-heartbeat-store";let A0=null;function uE(){return A0||(A0=gA(JA,ZA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ed)}catch(n){console.warn(n)}}}}).catch(t=>{throw Pa.create("idb-open",{originalErrorMessage:t.message})})),A0}async function eR(t){try{const n=(await uE()).transaction(ed),r=await n.objectStore(ed).get(dE(t));return await n.done,r}catch(e){if(e instanceof ri)Li.warn(e.message);else{const n=Pa.create("idb-get",{originalErrorMessage:e?.message});Li.warn(n.message)}}}async function O_(t,e){try{const r=(await uE()).transaction(ed,"readwrite");await r.objectStore(ed).put(e,dE(t)),await r.done}catch(n){if(n instanceof ri)Li.warn(n.message);else{const r=Pa.create("idb-set",{originalErrorMessage:n?.message});Li.warn(r.message)}}}function dE(t){return`${t.name}!${t.options.appId}`}const tR=1024,nR=30;class rR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new iR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=L_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>nR){const a=aR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Li.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=L_(),{heartbeatsToSend:n,unsentEntries:r}=sR(this._heartbeatsCache.heartbeats),a=Wf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Li.warn(e),""}}}function L_(){return new Date().toISOString().substring(0,10)}function sR(t,e=tR){const n=[];let r=t.slice();for(const a of t){const l=n.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),V_(n)>e){l.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),V_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class iR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qN()?GN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await eR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return O_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return O_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function V_(t){return Wf(JSON.stringify({version:2,heartbeats:t})).length}function aR(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function oR(t){Po(new za("platform-logger",e=>new bA(e),"PRIVATE")),Po(new za("heartbeat",e=>new rR(e),"PRIVATE")),Ys(dv,M_,t),Ys(dv,M_,"esm2020"),Ys("fire-js","")}oR("");var lR="firebase",cR="12.6.0";Ys(lR,cR,"app");function hE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uR=hE,fE=new xd("auth","Firebase",hE());const Zf=new fy("@firebase/auth");function dR(t,...e){Zf.logLevel<=Rt.WARN&&Zf.warn(`Auth (${Ho}): ${t}`,...e)}function Nf(t,...e){Zf.logLevel<=Rt.ERROR&&Zf.error(`Auth (${Ho}): ${t}`,...e)}function Es(t,...e){throw gy(t,...e)}function Ks(t,...e){return gy(t,...e)}function mE(t,e,n){const r={...uR(),[e]:n};return new xd("auth","Firebase",r).create(e,{appName:t.name})}function Di(t){return mE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return fE.create(t,...e)}function ot(t,e,...n){if(!t)throw gy(e,...n)}function Ri(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Nf(e),new Error(e)}function Vi(t,e){t||Ri(e)}function mv(){return typeof self<"u"&&self.location?.href||""}function hR(){return z_()==="http:"||z_()==="https:"}function z_(){return typeof self<"u"&&self.location?.protocol||null}function fR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hR()||BN()||"connection"in navigator)?navigator.onLine:!0}function mR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class wd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Vi(n>e,"Short delay should be less than long delay!"),this.isMobile=VN()||FN()}get(){return fR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function vy(t,e){Vi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class pE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ri("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ri("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ri("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const pR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const gR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],vR=new wd(3e4,6e4);function Fi(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function si(t,e,n,r,a={}){return gE(t,a,async()=>{let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});const h=_d({key:t.config.apiKey,...u}).slice(1),m=await t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);const p={method:e,headers:m,...l};return UN()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&$o(t.emulatorConfig.host)&&(p.credentials="include"),pE.fetch()(await vE(t,t.config.apiHost,n,h),p)})}async function gE(t,e,n){t._canInitEmulator=!1;const r={...pR,...e};try{const a=new bR(t),l=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw cf(t,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const h=l.ok?u.errorMessage:u.error.message,[m,p]=h.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw cf(t,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw cf(t,"email-already-in-use",u);if(m==="USER_DISABLED")throw cf(t,"user-disabled",u);const y=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw mE(t,y,p);Es(t,y)}}catch(a){if(a instanceof ri)throw a;Es(t,"network-request-failed",{message:String(a)})}}async function Sd(t,e,n,r,a={}){const l=await si(t,e,n,r,a);return"mfaPendingCredential"in l&&Es(t,"multi-factor-auth-required",{_serverResponse:l}),l}async function vE(t,e,n,r){const a=`${e}${n}?${r}`,l=t,u=l.config.emulator?vy(t.config,a):`${t.config.apiScheme}://${a}`;return gR.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function yR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class bR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ks(this.auth,"network-request-failed")),vR.get())})}}function cf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const a=Ks(t,e,r);return a.customData._tokenResponse=n,a}function U_(t){return t!==void 0&&t.enterprise!==void 0}class xR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return yR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function _R(t,e){return si(t,"GET","/v2/recaptchaConfig",Fi(t,e))}async function wR(t,e){return si(t,"POST","/v1/accounts:delete",e)}async function em(t,e){return si(t,"POST","/v1/accounts:lookup",e)}function Qu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function SR(t,e=!1){const n=rn(t),r=await n.getIdToken(e),a=yy(r);ot(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l?.sign_in_provider;return{claims:a,token:r,authTime:Qu(R0(a.auth_time)),issuedAtTime:Qu(R0(a.iat)),expirationTime:Qu(R0(a.exp)),signInProvider:u||null,signInSecondFactor:l?.sign_in_second_factor||null}}function R0(t){return Number(t)*1e3}function yy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Nf("JWT malformed, contained fewer than 3 sections"),null;try{const a=tE(n);return a?JSON.parse(a):(Nf("Failed to decode base64 JWT payload"),null)}catch(a){return Nf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function B_(t){const e=yy(t);return ot(e,"internal-error"),ot(typeof e.exp<"u","internal-error"),ot(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ic(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ri&&ER(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function ER({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class CR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class pv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qu(this.lastLoginAt),this.creationTime=Qu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function tm(t){const e=t.auth,n=await t.getIdToken(),r=await ic(t,em(e,{idToken:n}));ot(r?.users.length,e,"internal-error");const a=r.users[0];t._notifyReloadListener(a);const l=a.providerUserInfo?.length?yE(a.providerUserInfo):[],u=kR(t.providerData,l),h=t.isAnonymous,m=!(t.email&&a.passwordHash)&&!u?.length,p=h?m:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new pv(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(t,y)}async function TR(t){const e=rn(t);await tm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function kR(t,e){return[...t.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function yE(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function NR(t,e){const n=await gE(t,{},async()=>{const r=_d({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=t.config,u=await vE(t,a,"/v1/token",`key=${l}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:h,body:r};return t.emulatorConfig&&$o(t.emulatorConfig.host)&&(m.credentials="include"),pE.fetch()(u,m)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function AR(t,e){return si(t,"POST","/v2/accounts:revokeToken",Fi(t,e))}class Xl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ot(e.idToken,"internal-error"),ot(typeof e.idToken<"u","internal-error"),ot(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):B_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ot(e.length!==0,"internal-error");const n=B_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ot(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:a,expiresIn:l}=await NR(e,n);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:a,expirationTime:l}=n,u=new Xl;return r&&(ot(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),a&&(ot(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(ot(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xl,this.toJSON())}_performRefresh(){return Ri("not implemented")}}function _a(t,e){ot(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class xs{constructor({uid:e,auth:n,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new CR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new pv(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await ic(this,this.stsTokenManager.getToken(this.auth,e));return ot(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return SR(this,e)}reload(){return TR(this)}_assign(e){this!==e&&(ot(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new xs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ot(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await tm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hr(this.auth.app))return Promise.reject(Di(this.auth));const e=await this.getIdToken();return await ic(this,wR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,a=n.email??void 0,l=n.phoneNumber??void 0,u=n.photoURL??void 0,h=n.tenantId??void 0,m=n._redirectEventId??void 0,p=n.createdAt??void 0,y=n.lastLoginAt??void 0,{uid:b,emailVerified:x,isAnonymous:k,providerData:R,stsTokenManager:j}=n;ot(b&&j,e,"internal-error");const N=Xl.fromJSON(this.name,j);ot(typeof b=="string",e,"internal-error"),_a(r,e.name),_a(a,e.name),ot(typeof x=="boolean",e,"internal-error"),ot(typeof k=="boolean",e,"internal-error"),_a(l,e.name),_a(u,e.name),_a(h,e.name),_a(m,e.name),_a(p,e.name),_a(y,e.name);const U=new xs({uid:b,auth:e,email:a,emailVerified:x,displayName:r,isAnonymous:k,photoURL:u,phoneNumber:l,tenantId:h,stsTokenManager:N,createdAt:p,lastLoginAt:y});return R&&Array.isArray(R)&&(U.providerData=R.map($=>({...$}))),m&&(U._redirectEventId=m),U}static async _fromIdTokenResponse(e,n,r=!1){const a=new Xl;a.updateFromServerResponse(n);const l=new xs({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await tm(l),l}static async _fromGetAccountInfoResponse(e,n,r){const a=n.users[0];ot(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?yE(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!l?.length,h=new Xl;h.updateFromIdToken(r);const m=new xs({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:u}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new pv(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(m,p),m}}const F_=new Map;function ji(t){Vi(t instanceof Function,"Expected a class definition");let e=F_.get(t);return e?(Vi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,F_.set(t,e),e)}class bE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}bE.type="NONE";const $_=bE;function Af(t,e,n){return`firebase:${t}:${e}:${n}`}class Wl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=Af(this.userKey,a.apiKey,l),this.fullPersistenceKey=Af("persistence",a.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await em(this.auth,{idToken:e}).catch(()=>{});return n?xs._fromGetAccountInfoResponse(this.auth,n,e):null}return xs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Wl(ji($_),e,r);const a=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||ji($_);const u=Af(r,e.config.apiKey,e.name);let h=null;for(const p of n)try{const y=await p._get(u);if(y){let b;if(typeof y=="string"){const x=await em(e,{idToken:y}).catch(()=>{});if(!x)break;b=await xs._fromGetAccountInfoResponse(e,x,y)}else b=xs._fromJSON(e,y);p!==l&&(h=b),l=p;break}}catch{}const m=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Wl(l,e,r):(l=m[0],h&&await l._set(u,h.toJSON()),await Promise.all(n.map(async p=>{if(p!==l)try{await p._remove(u)}catch{}})),new Wl(l,e,r))}}function H_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(SE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CE(e))return"Blackberry";if(TE(e))return"Webos";if(_E(e))return"Safari";if((e.includes("chrome/")||wE(e))&&!e.includes("edge/"))return"Chrome";if(EE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function xE(t=hr()){return/firefox\//i.test(t)}function _E(t=hr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wE(t=hr()){return/crios\//i.test(t)}function SE(t=hr()){return/iemobile/i.test(t)}function EE(t=hr()){return/android/i.test(t)}function CE(t=hr()){return/blackberry/i.test(t)}function TE(t=hr()){return/webos/i.test(t)}function by(t=hr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function RR(t=hr()){return by(t)&&!!window.navigator?.standalone}function jR(){return $N()&&document.documentMode===10}function kE(t=hr()){return by(t)||EE(t)||TE(t)||CE(t)||/windows phone/i.test(t)||SE(t)}function NE(t,e=[]){let n;switch(t){case"Browser":n=H_(hr());break;case"Worker":n=`${H_(hr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ho}/${r}`}class IR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=l=>new Promise((u,h)=>{try{const m=e(l);u(m)}catch(m){h(m)}});r.onAbort=n,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function DR(t,e={}){return si(t,"GET","/v2/passwordPolicy",Fi(t,e))}const MR=6;class PR{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??MR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),a&&(n.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class OR{constructor(e,n,r,a){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new q_(this),this.idTokenSubscription=new q_(this),this.beforeStateQueue=new IR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ji(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Wl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await em(this,{idToken:e}),r=await xs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Hr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,u=r?._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===u)&&h?.user&&(r=h.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ot(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await tm(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=mR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hr(this.app))return Promise.reject(Di(this));const n=e?rn(e):null;return n&&ot(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ot(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hr(this.app)?Promise.reject(Di(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hr(this.app)?Promise.reject(Di(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ji(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await DR(this),n=new PR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await AR(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ji(e)||this._popupRedirectResolver;ot(n,this,"argument-error"),this.redirectPersistenceManager=await Wl.create(this,[ji(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,a){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(ot(h,this,"internal-error"),h.then(()=>{u||l(this.currentUser)}),typeof n=="function"){const m=e.addObserver(n,r,a);return()=>{u=!0,m()}}else{const m=e.addObserver(n);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ot(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=NE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Hr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&dR(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ka(t){return rn(t)}class q_{constructor(e){this.auth=e,this.observer=null,this.addObserver=WN(n=>this.observer=n)}get next(){return ot(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Om={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function LR(t){Om=t}function AE(t){return Om.loadJS(t)}function VR(){return Om.recaptchaEnterpriseScript}function zR(){return Om.gapiScript}function UR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class BR{constructor(){this.enterprise=new FR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class FR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const $R="recaptcha-enterprise",RE="NO_RECAPTCHA";class HR{constructor(e){this.type=$R,this.auth=Ka(e)}async verify(e="verify",n=!1){async function r(l){if(!n){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,h)=>{_R(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new xR(m);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,u(p.siteKey)}}).catch(m=>{h(m)})})}function a(l,u,h){const m=window.grecaptcha;U_(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(p=>{u(p)}).catch(()=>{u(RE)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new BR().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{r(this.auth).then(h=>{if(!n&&U_(window.grecaptcha))a(h,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let m=VR();m.length!==0&&(m+=h),AE(m).then(()=>{a(h,l,u)}).catch(p=>{u(p)})}}).catch(h=>{u(h)})})}}async function G_(t,e,n,r=!1,a=!1){const l=new HR(t);let u;if(a)u=RE;else try{u=await l.verify(n)}catch{u=await l.verify(n,!0)}const h={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const m=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const m=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function nm(t,e,n,r,a){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await G_(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await G_(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(l)})}function qR(t,e){const n=Pm(t,"auth");if(n.isInitialized()){const a=n.getImmediate(),l=n.getOptions();if(Oi(l,e??{}))return a;Es(a,"already-initialized")}return n.initialize({options:e})}function GR(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ji);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function YR(t,e,n){const r=Ka(t);ot(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=jE(e),{host:u,port:h}=KR(e),m=h===null?"":`:${h}`,p={url:`${l}//${u}${m}/`},y=Object.freeze({host:u,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){ot(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ot(Oi(p,r.config.emulator)&&Oi(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,$o(u)?(dy(`${l}//${u}${m}`),hy("Auth",!0)):QR()}function jE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function KR(t){const e=jE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:Y_(r.substr(l.length+1))}}else{const[l,u]=r.split(":");return{host:l,port:Y_(u)}}}function Y_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function QR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class xy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ri("not implemented")}_getIdTokenResponse(e){return Ri("not implemented")}_linkToIdToken(e,n){return Ri("not implemented")}_getReauthenticationResolver(e){return Ri("not implemented")}}async function XR(t,e){return si(t,"POST","/v1/accounts:update",e)}async function WR(t,e){return si(t,"POST","/v1/accounts:signUp",e)}async function JR(t,e){return Sd(t,"POST","/v1/accounts:signInWithPassword",Fi(t,e))}async function IE(t,e){return si(t,"POST","/v1/accounts:sendOobCode",Fi(t,e))}async function ZR(t,e){return IE(t,e)}async function ej(t,e){return IE(t,e)}async function tj(t,e){return Sd(t,"POST","/v1/accounts:signInWithEmailLink",Fi(t,e))}async function nj(t,e){return Sd(t,"POST","/v1/accounts:signInWithEmailLink",Fi(t,e))}class td extends xy{constructor(e,n,r,a=null){super("password",r),this._email=e,this._password=n,this._tenantId=a}static _fromEmailAndPassword(e,n){return new td(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new td(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nm(e,n,"signInWithPassword",JR);case"emailLink":return tj(e,{email:this._email,oobCode:this._password});default:Es(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nm(e,r,"signUpPassword",WR);case"emailLink":return nj(e,{idToken:n,email:this._email,oobCode:this._password});default:Es(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Jl(t,e){return Sd(t,"POST","/v1/accounts:signInWithIdp",Fi(t,e))}const rj="http://localhost";class Oo extends xy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Oo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Es("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=n;if(!r||!a)return null;const u=new Oo(r,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return Jl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Jl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Jl(e,n)}buildRequest(){const e={requestUri:rj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=_d(n)}return e}}function sj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ij(t){const e=zu(Uu(t)).link,n=e?zu(Uu(e)).deep_link_id:null,r=zu(Uu(t)).deep_link_id;return(r?zu(Uu(r)).link:null)||r||n||e||t}class _y{constructor(e){const n=zu(Uu(e)),r=n.apiKey??null,a=n.oobCode??null,l=sj(n.mode??null);ot(r&&a&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=a,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=ij(e);try{return new _y(n)}catch{return null}}}class qo{constructor(){this.providerId=qo.PROVIDER_ID}static credential(e,n){return td._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=_y.parseLink(n);return ot(r,"argument-error"),td._fromEmailAndCode(e,r.code,r.tenantId)}}qo.PROVIDER_ID="password";qo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class DE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ed extends DE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ka extends Ed{constructor(){super("facebook.com")}static credential(e){return Oo._fromParams({providerId:ka.PROVIDER_ID,signInMethod:ka.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ka.credentialFromTaggedObject(e)}static credentialFromError(e){return ka.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ka.credential(e.oauthAccessToken)}catch{return null}}}ka.FACEBOOK_SIGN_IN_METHOD="facebook.com";ka.PROVIDER_ID="facebook.com";class Na extends Ed{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Oo._fromParams({providerId:Na.PROVIDER_ID,signInMethod:Na.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Na.credentialFromTaggedObject(e)}static credentialFromError(e){return Na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Na.credential(n,r)}catch{return null}}}Na.GOOGLE_SIGN_IN_METHOD="google.com";Na.PROVIDER_ID="google.com";class Aa extends Ed{constructor(){super("github.com")}static credential(e){return Oo._fromParams({providerId:Aa.PROVIDER_ID,signInMethod:Aa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Aa.credentialFromTaggedObject(e)}static credentialFromError(e){return Aa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Aa.credential(e.oauthAccessToken)}catch{return null}}}Aa.GITHUB_SIGN_IN_METHOD="github.com";Aa.PROVIDER_ID="github.com";class Ra extends Ed{constructor(){super("twitter.com")}static credential(e,n){return Oo._fromParams({providerId:Ra.PROVIDER_ID,signInMethod:Ra.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ra.credentialFromTaggedObject(e)}static credentialFromError(e){return Ra.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ra.credential(n,r)}catch{return null}}}Ra.TWITTER_SIGN_IN_METHOD="twitter.com";Ra.PROVIDER_ID="twitter.com";async function aj(t,e){return Sd(t,"POST","/v1/accounts:signUp",Fi(t,e))}class Lo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,a=!1){const l=await xs._fromIdTokenResponse(e,r,a),u=K_(r);return new Lo({user:l,providerId:u,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const a=K_(r);return new Lo({user:e,providerId:a,_tokenResponse:r,operationType:n})}}function K_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class rm extends ri{constructor(e,n,r,a){super(n.code,n.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,rm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,a){return new rm(e,n,r,a)}}function ME(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?rm._fromErrorAndOperation(t,l,e,r):l})}async function oj(t,e,n=!1){const r=await ic(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Lo._forOperation(t,"link",r)}async function PE(t,e,n=!1){const{auth:r}=t;if(Hr(r.app))return Promise.reject(Di(r));const a="reauthenticate";try{const l=await ic(t,ME(r,a,e,t),n);ot(l.idToken,r,"internal-error");const u=yy(l.idToken);ot(u,r,"internal-error");const{sub:h}=u;return ot(t.uid===h,r,"user-mismatch"),Lo._forOperation(t,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Es(r,"user-mismatch"),l}}async function OE(t,e,n=!1){if(Hr(t.app))return Promise.reject(Di(t));const r="signIn",a=await ME(t,r,e),l=await Lo._fromIdTokenResponse(t,r,a);return n||await t._updateCurrentUser(l.user),l}async function lj(t,e){return OE(Ka(t),e)}async function cj(t,e){return PE(rn(t),e)}async function LE(t){const e=Ka(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function VE(t,e,n){const r=Ka(t);await nm(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",ej)}async function uj(t,e,n){if(Hr(t.app))return Promise.reject(Di(t));const r=Ka(t),u=await nm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",aj).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&LE(t),m}),h=await Lo._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(h.user),h}function dj(t,e,n){return Hr(t.app)?Promise.reject(Di(t)):lj(rn(t),qo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&LE(t),r})}async function Q_(t,e){const n=rn(t),a={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:l}=await ZR(n.auth,a);l!==t.email&&await t.reload()}function hj(t,e){return fj(rn(t),null,e)}async function fj(t,e,n){const{auth:r}=t,l={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(l.password=n);const u=await ic(t,XR(r,l));await t._updateTokensIfNecessary(u,!0)}function mj(t,e,n,r){return rn(t).onIdTokenChanged(e,n,r)}function pj(t,e,n){return rn(t).beforeAuthStateChanged(e,n)}function gj(t,e,n,r){return rn(t).onAuthStateChanged(e,n,r)}function vj(t){return rn(t).signOut()}const sm="__sak";class zE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(sm,"1"),this.storage.removeItem(sm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const yj=1e3,bj=10;class UE extends zE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),a=this.localCache[n];r!==a&&e(n,a,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,h,m)=>{this.notifyListeners(u,m)});return}const r=e.key;n?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(r);!n&&this.localCache[r]===u||this.notifyListeners(r,u)},l=this.storage.getItem(r);jR()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,bj):a()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},yj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}UE.type="LOCAL";const xj=UE;class BE extends zE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}BE.type="SESSION";const FE=BE;function _j(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Lm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(a=>a.isListeningto(e));if(n)return n;const r=new Lm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:a,data:l}=n.data,u=this.handlersMap[a];if(!u?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const h=Array.from(u).map(async p=>p(n.origin,l)),m=await _j(h);n.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:m})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lm.receivers=[];function wy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class wj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((h,m)=>{const p=wy("",20);a.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},r);u={messageChannel:a,onMessage(b){const x=b;if(x.data.eventId===p)switch(x.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(x.data.response);break;default:clearTimeout(y),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function Qs(){return window}function Sj(t){Qs().location.href=t}function $E(){return typeof Qs().WorkerGlobalScope<"u"&&typeof Qs().importScripts=="function"}async function Ej(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Cj(){return navigator?.serviceWorker?.controller||null}function Tj(){return $E()?self:null}const HE="firebaseLocalStorageDb",kj=1,im="firebaseLocalStorage",qE="fbase_key";class Cd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Vm(t,e){return t.transaction([im],e?"readwrite":"readonly").objectStore(im)}function Nj(){const t=indexedDB.deleteDatabase(HE);return new Cd(t).toPromise()}function gv(){const t=indexedDB.open(HE,kj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(im,{keyPath:qE})}catch(a){n(a)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(im)?e(r):(r.close(),await Nj(),e(await gv()))})})}async function X_(t,e,n){const r=Vm(t,!0).put({[qE]:e,value:n});return new Cd(r).toPromise()}async function Aj(t,e){const n=Vm(t,!1).get(e),r=await new Cd(n).toPromise();return r===void 0?null:r.value}function W_(t,e){const n=Vm(t,!0).delete(e);return new Cd(n).toPromise()}const Rj=800,jj=3;class GE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>jj)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $E()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lm._getInstance(Tj()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Ej(),!this.activeServiceWorker)return;this.sender=new wj(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Cj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gv();return await X_(e,sm,"1"),await W_(e,sm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>X_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Aj(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>W_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Vm(a,!1).getAll();return new Cd(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Rj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GE.type="LOCAL";const Ij=GE;new wd(3e4,6e4);function Dj(t,e){return e?ji(e):(ot(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Sy extends xy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Jl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Jl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Mj(t){return OE(t.auth,new Sy(t),t.bypassAuthState)}function Pj(t){const{auth:e,user:n}=t;return ot(n,e,"internal-error"),PE(n,new Sy(t),t.bypassAuthState)}async function Oj(t){const{auth:e,user:n}=t;return ot(n,e,"internal-error"),oj(n,new Sy(t),t.bypassAuthState)}class YE{constructor(e,n,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:a,tenantId:l,error:u,type:h}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:n,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Mj;case"linkViaPopup":case"linkViaRedirect":return Oj;case"reauthViaPopup":case"reauthViaRedirect":return Pj;default:Es(this.auth,"internal-error")}}resolve(e){Vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Lj=new wd(2e3,1e4);class Kl extends YE{constructor(e,n,r,a,l){super(e,n,a,l),this.provider=r,this.authWindow=null,this.pollId=null,Kl.currentPopupAction&&Kl.currentPopupAction.cancel(),Kl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ot(e,this.auth,"internal-error"),e}async onExecution(){Vi(this.filter.length===1,"Popup operations only handle one event");const e=wy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ks(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ks(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Kl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ks(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Lj.get())};e()}}Kl.currentPopupAction=null;const Vj="pendingRedirect",Rf=new Map;class zj extends YE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Rf.get(this.auth._key());if(!e){try{const r=await Uj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Rf.set(this.auth._key(),e)}return this.bypassAuthState||Rf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Uj(t,e){const n=$j(e),r=Fj(t);if(!await r._isAvailable())return!1;const a=await r._get(n)==="true";return await r._remove(n),a}function Bj(t,e){Rf.set(t._key(),e)}function Fj(t){return ji(t._redirectPersistence)}function $j(t){return Af(Vj,t.config.apiKey,t.name)}async function Hj(t,e,n=!1){if(Hr(t.app))return Promise.reject(Di(t));const r=Ka(t),a=Dj(r,e),u=await new zj(r,a,n).execute();return u&&!n&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}const qj=600*1e3;class Gj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Yj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!KE(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Ks(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qj&&this.cachedEventUids.clear(),this.cachedEventUids.has(J_(e))}saveEventToCache(e){this.cachedEventUids.add(J_(e)),this.lastProcessedEventTime=Date.now()}}function J_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function KE({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function Yj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return KE(t);default:return!1}}async function Kj(t,e={}){return si(t,"GET","/v1/projects",e)}const Qj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xj=/^https?/;async function Wj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Kj(t);for(const n of e)try{if(Jj(n))return}catch{}Es(t,"unauthorized-domain")}function Jj(t){const e=mv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===r}if(!Xj.test(n))return!1;if(Qj.test(t))return r===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const Zj=new wd(3e4,6e4);function Z_(){const t=Qs().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function e9(t){return new Promise((e,n)=>{function r(){Z_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Z_(),n(Ks(t,"network-request-failed"))},timeout:Zj.get()})}if(Qs().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Qs().gapi?.load)r();else{const a=UR("iframefcb");return Qs()[a]=()=>{gapi.load?r():n(Ks(t,"network-request-failed"))},AE(`${zR()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw jf=null,e})}let jf=null;function t9(t){return jf=jf||e9(t),jf}const n9=new wd(5e3,15e3),r9="__/auth/iframe",s9="emulator/auth/iframe",i9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},a9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function o9(t){const e=t.config;ot(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?vy(e,s9):`https://${t.config.authDomain}/${r9}`,r={apiKey:e.apiKey,appName:t.name,v:Ho},a=a9.get(t.config.apiHost);a&&(r.eid=a);const l=t._getFrameworks();return l.length&&(r.fw=l.join(",")),`${n}?${_d(r).slice(1)}`}async function l9(t){const e=await t9(t),n=Qs().gapi;return ot(n,t,"internal-error"),e.open({where:document.body,url:o9(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:i9,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const u=Ks(t,"network-request-failed"),h=Qs().setTimeout(()=>{l(u)},n9.get());function m(){Qs().clearTimeout(h),a(r)}r.ping(m).then(m,()=>{l(u)})}))}const c9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},u9=500,d9=600,h9="_blank",f9="http://localhost";class e4{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function m9(t,e,n,r=u9,a=d9){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const m={...c9,width:r.toString(),height:a.toString(),top:l,left:u},p=hr().toLowerCase();n&&(h=wE(p)?h9:n),xE(p)&&(e=e||f9,m.scrollbars="yes");const y=Object.entries(m).reduce((x,[k,R])=>`${x}${k}=${R},`,"");if(RR(p)&&h!=="_self")return p9(e||"",h),new e4(null);const b=window.open(e||"",h,y);ot(b,t,"popup-blocked");try{b.focus()}catch{}return new e4(b)}function p9(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const g9="__/auth/handler",v9="emulator/auth/handler",y9=encodeURIComponent("fac");async function t4(t,e,n,r,a,l){ot(t.config.authDomain,t,"auth-domain-config-required"),ot(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ho,eventId:a};if(e instanceof DE){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",XN(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,b]of Object.entries({}))u[y]=b}if(e instanceof Ed){const y=e.getScopes().filter(b=>b!=="");y.length>0&&(u.scopes=y.join(","))}t.tenantId&&(u.tid=t.tenantId);const h=u;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const m=await t._getAppCheckToken(),p=m?`#${y9}=${encodeURIComponent(m)}`:"";return`${b9(t)}?${_d(h).slice(1)}${p}`}function b9({config:t}){return t.emulator?vy(t,v9):`https://${t.authDomain}/${g9}`}const j0="webStorageSupport";class x9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=FE,this._completeRedirectFn=Hj,this._overrideRedirectResult=Bj}async _openPopup(e,n,r,a){Vi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await t4(e,n,r,mv(),a);return m9(e,l,wy())}async _openRedirect(e,n,r,a){await this._originValidation(e);const l=await t4(e,n,r,mv(),a);return Sj(l),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:a,promise:l}=this.eventManagers[n];return a?Promise.resolve(a):(Vi(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await l9(e),r=new Gj(e);return n.register("authEvent",a=>(ot(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(j0,{type:j0},a=>{const l=a?.[0]?.[j0];l!==void 0&&n(!!l),Es(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Wj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return kE()||_E()||by()}}const _9=x9;var n4="@firebase/auth",r4="1.11.1";class w9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ot(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function S9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function E9(t){Po(new za("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=r.options;ot(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:u,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:NE(t)},p=new OR(r,a,l,m);return GR(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Po(new za("auth-internal",e=>{const n=Ka(e.getProvider("auth").getImmediate());return(r=>new w9(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ys(n4,r4,S9(t)),Ys(n4,r4,"esm2020")}const C9=300,T9=iE("authIdTokenMaxAge")||C9;let s4=null;const k9=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>T9)return;const a=n?.token;s4!==a&&(s4=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function N9(t=py()){const e=Pm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=qR(t,{popupRedirectResolver:_9,persistence:[Ij,xj,FE]}),r=iE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const u=k9(l.toString());pj(n,u,()=>u(n.currentUser)),mj(n,h=>u(h))}}const a=nE("auth");return a&&YR(n,`http://${a}`),n}function A9(){return document.getElementsByTagName("head")?.[0]??document}LR({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=a=>{const l=Ks("internal-error");l.customData=a,n(l)},r.type="text/javascript",r.charset="UTF-8",A9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});E9("Browser");var i4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Oa,QE;(function(){var t;function e(w,E){function A(){}A.prototype=E.prototype,w.F=E.prototype,w.prototype=new A,w.prototype.constructor=w,w.D=function(P,L,z){for(var M=Array(arguments.length-2),se=2;se<arguments.length;se++)M[se-2]=arguments[se];return E.prototype[L].apply(P,M)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(w,E,A){A||(A=0);const P=Array(16);if(typeof E=="string")for(var L=0;L<16;++L)P[L]=E.charCodeAt(A++)|E.charCodeAt(A++)<<8|E.charCodeAt(A++)<<16|E.charCodeAt(A++)<<24;else for(L=0;L<16;++L)P[L]=E[A++]|E[A++]<<8|E[A++]<<16|E[A++]<<24;E=w.g[0],A=w.g[1],L=w.g[2];let z=w.g[3],M;M=E+(z^A&(L^z))+P[0]+3614090360&4294967295,E=A+(M<<7&4294967295|M>>>25),M=z+(L^E&(A^L))+P[1]+3905402710&4294967295,z=E+(M<<12&4294967295|M>>>20),M=L+(A^z&(E^A))+P[2]+606105819&4294967295,L=z+(M<<17&4294967295|M>>>15),M=A+(E^L&(z^E))+P[3]+3250441966&4294967295,A=L+(M<<22&4294967295|M>>>10),M=E+(z^A&(L^z))+P[4]+4118548399&4294967295,E=A+(M<<7&4294967295|M>>>25),M=z+(L^E&(A^L))+P[5]+1200080426&4294967295,z=E+(M<<12&4294967295|M>>>20),M=L+(A^z&(E^A))+P[6]+2821735955&4294967295,L=z+(M<<17&4294967295|M>>>15),M=A+(E^L&(z^E))+P[7]+4249261313&4294967295,A=L+(M<<22&4294967295|M>>>10),M=E+(z^A&(L^z))+P[8]+1770035416&4294967295,E=A+(M<<7&4294967295|M>>>25),M=z+(L^E&(A^L))+P[9]+2336552879&4294967295,z=E+(M<<12&4294967295|M>>>20),M=L+(A^z&(E^A))+P[10]+4294925233&4294967295,L=z+(M<<17&4294967295|M>>>15),M=A+(E^L&(z^E))+P[11]+2304563134&4294967295,A=L+(M<<22&4294967295|M>>>10),M=E+(z^A&(L^z))+P[12]+1804603682&4294967295,E=A+(M<<7&4294967295|M>>>25),M=z+(L^E&(A^L))+P[13]+4254626195&4294967295,z=E+(M<<12&4294967295|M>>>20),M=L+(A^z&(E^A))+P[14]+2792965006&4294967295,L=z+(M<<17&4294967295|M>>>15),M=A+(E^L&(z^E))+P[15]+1236535329&4294967295,A=L+(M<<22&4294967295|M>>>10),M=E+(L^z&(A^L))+P[1]+4129170786&4294967295,E=A+(M<<5&4294967295|M>>>27),M=z+(A^L&(E^A))+P[6]+3225465664&4294967295,z=E+(M<<9&4294967295|M>>>23),M=L+(E^A&(z^E))+P[11]+643717713&4294967295,L=z+(M<<14&4294967295|M>>>18),M=A+(z^E&(L^z))+P[0]+3921069994&4294967295,A=L+(M<<20&4294967295|M>>>12),M=E+(L^z&(A^L))+P[5]+3593408605&4294967295,E=A+(M<<5&4294967295|M>>>27),M=z+(A^L&(E^A))+P[10]+38016083&4294967295,z=E+(M<<9&4294967295|M>>>23),M=L+(E^A&(z^E))+P[15]+3634488961&4294967295,L=z+(M<<14&4294967295|M>>>18),M=A+(z^E&(L^z))+P[4]+3889429448&4294967295,A=L+(M<<20&4294967295|M>>>12),M=E+(L^z&(A^L))+P[9]+568446438&4294967295,E=A+(M<<5&4294967295|M>>>27),M=z+(A^L&(E^A))+P[14]+3275163606&4294967295,z=E+(M<<9&4294967295|M>>>23),M=L+(E^A&(z^E))+P[3]+4107603335&4294967295,L=z+(M<<14&4294967295|M>>>18),M=A+(z^E&(L^z))+P[8]+1163531501&4294967295,A=L+(M<<20&4294967295|M>>>12),M=E+(L^z&(A^L))+P[13]+2850285829&4294967295,E=A+(M<<5&4294967295|M>>>27),M=z+(A^L&(E^A))+P[2]+4243563512&4294967295,z=E+(M<<9&4294967295|M>>>23),M=L+(E^A&(z^E))+P[7]+1735328473&4294967295,L=z+(M<<14&4294967295|M>>>18),M=A+(z^E&(L^z))+P[12]+2368359562&4294967295,A=L+(M<<20&4294967295|M>>>12),M=E+(A^L^z)+P[5]+4294588738&4294967295,E=A+(M<<4&4294967295|M>>>28),M=z+(E^A^L)+P[8]+2272392833&4294967295,z=E+(M<<11&4294967295|M>>>21),M=L+(z^E^A)+P[11]+1839030562&4294967295,L=z+(M<<16&4294967295|M>>>16),M=A+(L^z^E)+P[14]+4259657740&4294967295,A=L+(M<<23&4294967295|M>>>9),M=E+(A^L^z)+P[1]+2763975236&4294967295,E=A+(M<<4&4294967295|M>>>28),M=z+(E^A^L)+P[4]+1272893353&4294967295,z=E+(M<<11&4294967295|M>>>21),M=L+(z^E^A)+P[7]+4139469664&4294967295,L=z+(M<<16&4294967295|M>>>16),M=A+(L^z^E)+P[10]+3200236656&4294967295,A=L+(M<<23&4294967295|M>>>9),M=E+(A^L^z)+P[13]+681279174&4294967295,E=A+(M<<4&4294967295|M>>>28),M=z+(E^A^L)+P[0]+3936430074&4294967295,z=E+(M<<11&4294967295|M>>>21),M=L+(z^E^A)+P[3]+3572445317&4294967295,L=z+(M<<16&4294967295|M>>>16),M=A+(L^z^E)+P[6]+76029189&4294967295,A=L+(M<<23&4294967295|M>>>9),M=E+(A^L^z)+P[9]+3654602809&4294967295,E=A+(M<<4&4294967295|M>>>28),M=z+(E^A^L)+P[12]+3873151461&4294967295,z=E+(M<<11&4294967295|M>>>21),M=L+(z^E^A)+P[15]+530742520&4294967295,L=z+(M<<16&4294967295|M>>>16),M=A+(L^z^E)+P[2]+3299628645&4294967295,A=L+(M<<23&4294967295|M>>>9),M=E+(L^(A|~z))+P[0]+4096336452&4294967295,E=A+(M<<6&4294967295|M>>>26),M=z+(A^(E|~L))+P[7]+1126891415&4294967295,z=E+(M<<10&4294967295|M>>>22),M=L+(E^(z|~A))+P[14]+2878612391&4294967295,L=z+(M<<15&4294967295|M>>>17),M=A+(z^(L|~E))+P[5]+4237533241&4294967295,A=L+(M<<21&4294967295|M>>>11),M=E+(L^(A|~z))+P[12]+1700485571&4294967295,E=A+(M<<6&4294967295|M>>>26),M=z+(A^(E|~L))+P[3]+2399980690&4294967295,z=E+(M<<10&4294967295|M>>>22),M=L+(E^(z|~A))+P[10]+4293915773&4294967295,L=z+(M<<15&4294967295|M>>>17),M=A+(z^(L|~E))+P[1]+2240044497&4294967295,A=L+(M<<21&4294967295|M>>>11),M=E+(L^(A|~z))+P[8]+1873313359&4294967295,E=A+(M<<6&4294967295|M>>>26),M=z+(A^(E|~L))+P[15]+4264355552&4294967295,z=E+(M<<10&4294967295|M>>>22),M=L+(E^(z|~A))+P[6]+2734768916&4294967295,L=z+(M<<15&4294967295|M>>>17),M=A+(z^(L|~E))+P[13]+1309151649&4294967295,A=L+(M<<21&4294967295|M>>>11),M=E+(L^(A|~z))+P[4]+4149444226&4294967295,E=A+(M<<6&4294967295|M>>>26),M=z+(A^(E|~L))+P[11]+3174756917&4294967295,z=E+(M<<10&4294967295|M>>>22),M=L+(E^(z|~A))+P[2]+718787259&4294967295,L=z+(M<<15&4294967295|M>>>17),M=A+(z^(L|~E))+P[9]+3951481745&4294967295,w.g[0]=w.g[0]+E&4294967295,w.g[1]=w.g[1]+(L+(M<<21&4294967295|M>>>11))&4294967295,w.g[2]=w.g[2]+L&4294967295,w.g[3]=w.g[3]+z&4294967295}r.prototype.v=function(w,E){E===void 0&&(E=w.length);const A=E-this.blockSize,P=this.C;let L=this.h,z=0;for(;z<E;){if(L==0)for(;z<=A;)a(this,w,z),z+=this.blockSize;if(typeof w=="string"){for(;z<E;)if(P[L++]=w.charCodeAt(z++),L==this.blockSize){a(this,P),L=0;break}}else for(;z<E;)if(P[L++]=w[z++],L==this.blockSize){a(this,P),L=0;break}}this.h=L,this.o+=E},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var E=1;E<w.length-8;++E)w[E]=0;E=this.o*8;for(var A=w.length-8;A<w.length;++A)w[A]=E&255,E/=256;for(this.v(w),w=Array(16),E=0,A=0;A<4;++A)for(let P=0;P<32;P+=8)w[E++]=this.g[A]>>>P&255;return w};function l(w,E){var A=h;return Object.prototype.hasOwnProperty.call(A,w)?A[w]:A[w]=E(w)}function u(w,E){this.h=E;const A=[];let P=!0;for(let L=w.length-1;L>=0;L--){const z=w[L]|0;P&&z==E||(A[L]=z,P=!1)}this.g=A}var h={};function m(w){return-128<=w&&w<128?l(w,function(E){return new u([E|0],E<0?-1:0)}):new u([w|0],w<0?-1:0)}function p(w){if(isNaN(w)||!isFinite(w))return b;if(w<0)return N(p(-w));const E=[];let A=1;for(let P=0;w>=A;P++)E[P]=w/A|0,A*=4294967296;return new u(E,0)}function y(w,E){if(w.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(w.charAt(0)=="-")return N(y(w.substring(1),E));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=p(Math.pow(E,8));let P=b;for(let z=0;z<w.length;z+=8){var L=Math.min(8,w.length-z);const M=parseInt(w.substring(z,z+L),E);L<8?(L=p(Math.pow(E,L)),P=P.j(L).add(p(M))):(P=P.j(A),P=P.add(p(M)))}return P}var b=m(0),x=m(1),k=m(16777216);t=u.prototype,t.m=function(){if(j(this))return-N(this).m();let w=0,E=1;for(let A=0;A<this.g.length;A++){const P=this.i(A);w+=(P>=0?P:4294967296+P)*E,E*=4294967296}return w},t.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(R(this))return"0";if(j(this))return"-"+N(this).toString(w);const E=p(Math.pow(w,6));var A=this;let P="";for(;;){const L=O(A,E).g;A=U(A,L.j(E));let z=((A.g.length>0?A.g[0]:A.h)>>>0).toString(w);if(A=L,R(A))return z+P;for(;z.length<6;)z="0"+z;P=z+P}},t.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function R(w){if(w.h!=0)return!1;for(let E=0;E<w.g.length;E++)if(w.g[E]!=0)return!1;return!0}function j(w){return w.h==-1}t.l=function(w){return w=U(this,w),j(w)?-1:R(w)?0:1};function N(w){const E=w.g.length,A=[];for(let P=0;P<E;P++)A[P]=~w.g[P];return new u(A,~w.h).add(x)}t.abs=function(){return j(this)?N(this):this},t.add=function(w){const E=Math.max(this.g.length,w.g.length),A=[];let P=0;for(let L=0;L<=E;L++){let z=P+(this.i(L)&65535)+(w.i(L)&65535),M=(z>>>16)+(this.i(L)>>>16)+(w.i(L)>>>16);P=M>>>16,z&=65535,M&=65535,A[L]=M<<16|z}return new u(A,A[A.length-1]&-2147483648?-1:0)};function U(w,E){return w.add(N(E))}t.j=function(w){if(R(this)||R(w))return b;if(j(this))return j(w)?N(this).j(N(w)):N(N(this).j(w));if(j(w))return N(this.j(N(w)));if(this.l(k)<0&&w.l(k)<0)return p(this.m()*w.m());const E=this.g.length+w.g.length,A=[];for(var P=0;P<2*E;P++)A[P]=0;for(P=0;P<this.g.length;P++)for(let L=0;L<w.g.length;L++){const z=this.i(P)>>>16,M=this.i(P)&65535,se=w.i(L)>>>16,le=w.i(L)&65535;A[2*P+2*L]+=M*le,$(A,2*P+2*L),A[2*P+2*L+1]+=z*le,$(A,2*P+2*L+1),A[2*P+2*L+1]+=M*se,$(A,2*P+2*L+1),A[2*P+2*L+2]+=z*se,$(A,2*P+2*L+2)}for(w=0;w<E;w++)A[w]=A[2*w+1]<<16|A[2*w];for(w=E;w<2*E;w++)A[w]=0;return new u(A,0)};function $(w,E){for(;(w[E]&65535)!=w[E];)w[E+1]+=w[E]>>>16,w[E]&=65535,E++}function I(w,E){this.g=w,this.h=E}function O(w,E){if(R(E))throw Error("division by zero");if(R(w))return new I(b,b);if(j(w))return E=O(N(w),E),new I(N(E.g),N(E.h));if(j(E))return E=O(w,N(E)),new I(N(E.g),E.h);if(w.g.length>30){if(j(w)||j(E))throw Error("slowDivide_ only works with positive integers.");for(var A=x,P=E;P.l(w)<=0;)A=B(A),P=B(P);var L=q(A,1),z=q(P,1);for(P=q(P,2),A=q(A,2);!R(P);){var M=z.add(P);M.l(w)<=0&&(L=L.add(A),z=M),P=q(P,1),A=q(A,1)}return E=U(w,L.j(E)),new I(L,E)}for(L=b;w.l(E)>=0;){for(A=Math.max(1,Math.floor(w.m()/E.m())),P=Math.ceil(Math.log(A)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),z=p(A),M=z.j(E);j(M)||M.l(w)>0;)A-=P,z=p(A),M=z.j(E);R(z)&&(z=x),L=L.add(z),w=U(w,M)}return new I(L,w)}t.B=function(w){return O(this,w).h},t.and=function(w){const E=Math.max(this.g.length,w.g.length),A=[];for(let P=0;P<E;P++)A[P]=this.i(P)&w.i(P);return new u(A,this.h&w.h)},t.or=function(w){const E=Math.max(this.g.length,w.g.length),A=[];for(let P=0;P<E;P++)A[P]=this.i(P)|w.i(P);return new u(A,this.h|w.h)},t.xor=function(w){const E=Math.max(this.g.length,w.g.length),A=[];for(let P=0;P<E;P++)A[P]=this.i(P)^w.i(P);return new u(A,this.h^w.h)};function B(w){const E=w.g.length+1,A=[];for(let P=0;P<E;P++)A[P]=w.i(P)<<1|w.i(P-1)>>>31;return new u(A,w.h)}function q(w,E){const A=E>>5;E%=32;const P=w.g.length-A,L=[];for(let z=0;z<P;z++)L[z]=E>0?w.i(z+A)>>>E|w.i(z+A+1)<<32-E:w.i(z+A);return new u(L,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,QE=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=y,Oa=u}).apply(typeof i4<"u"?i4:typeof self<"u"?self:typeof window<"u"?window:{});var uf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var XE,Bu,WE,If,vv,JE,ZE,eC;(function(){var t,e=Object.defineProperty;function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof uf=="object"&&uf];for(var _=0;_<f.length;++_){var C=f[_];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var r=n(this);function a(f,_){if(_)e:{var C=r;f=f.split(".");for(var V=0;V<f.length-1;V++){var te=f[V];if(!(te in C))break e;C=C[te]}f=f[f.length-1],V=C[f],_=_(V),_!=V&&_!=null&&e(C,f,{configurable:!0,writable:!0,value:_})}}a("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(f){return f||function(_){var C=[],V;for(V in _)Object.prototype.hasOwnProperty.call(_,V)&&C.push([V,_[V]]);return C}});var l=l||{},u=this||self;function h(f){var _=typeof f;return _=="object"&&f!=null||_=="function"}function m(f,_,C){return f.call.apply(f.bind,arguments)}function p(f,_,C){return p=m,p.apply(null,arguments)}function y(f,_){var C=Array.prototype.slice.call(arguments,1);return function(){var V=C.slice();return V.push.apply(V,arguments),f.apply(this,V)}}function b(f,_){function C(){}C.prototype=_.prototype,f.Z=_.prototype,f.prototype=new C,f.prototype.constructor=f,f.Ob=function(V,te,ce){for(var Pe=Array(arguments.length-2),vt=2;vt<arguments.length;vt++)Pe[vt-2]=arguments[vt];return _.prototype[te].apply(V,Pe)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function k(f){const _=f.length;if(_>0){const C=Array(_);for(let V=0;V<_;V++)C[V]=f[V];return C}return[]}function R(f,_){for(let V=1;V<arguments.length;V++){const te=arguments[V];var C=typeof te;if(C=C!="object"?C:te?Array.isArray(te)?"array":C:"null",C=="array"||C=="object"&&typeof te.length=="number"){C=f.length||0;const ce=te.length||0;f.length=C+ce;for(let Pe=0;Pe<ce;Pe++)f[C+Pe]=te[Pe]}else f.push(te)}}class j{constructor(_,C){this.i=_,this.j=C,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function N(f){u.setTimeout(()=>{throw f},0)}function U(){var f=w;let _=null;return f.g&&(_=f.g,f.g=f.g.next,f.g||(f.h=null),_.next=null),_}class ${constructor(){this.h=this.g=null}add(_,C){const V=I.get();V.set(_,C),this.h?this.h.next=V:this.g=V,this.h=V}}var I=new j(()=>new O,f=>f.reset());class O{constructor(){this.next=this.g=this.h=null}set(_,C){this.h=_,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let B,q=!1,w=new $,E=()=>{const f=Promise.resolve(void 0);B=()=>{f.then(A)}};function A(){for(var f;f=U();){try{f.h.call(f.g)}catch(C){N(C)}var _=I;_.j(f),_.h<100&&(_.h++,f.next=_.g,_.g=f)}q=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(f,_){this.type=f,this.g=this.target=_,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var f=!1,_=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const C=()=>{};u.addEventListener("test",C,_),u.removeEventListener("test",C,_)}catch{}return f})();function M(f){return/^[\s\xa0]*$/.test(f)}function se(f,_){L.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,_)}b(se,L),se.prototype.init=function(f,_){const C=this.type=f.type,V=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=_,_=f.relatedTarget,_||(C=="mouseover"?_=f.fromElement:C=="mouseout"&&(_=f.toElement)),this.relatedTarget=_,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&se.Z.h.call(this)},se.prototype.h=function(){se.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var le="closure_listenable_"+(Math.random()*1e6|0),Y=0;function ee(f,_,C,V,te){this.listener=f,this.proxy=null,this.src=_,this.type=C,this.capture=!!V,this.ha=te,this.key=++Y,this.da=this.fa=!1}function Z(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Ee(f,_,C){for(const V in f)_.call(C,f[V],V,f)}function Re(f,_){for(const C in f)_.call(void 0,f[C],C,f)}function H(f){const _={};for(const C in f)_[C]=f[C];return _}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ie(f,_){let C,V;for(let te=1;te<arguments.length;te++){V=arguments[te];for(C in V)f[C]=V[C];for(let ce=0;ce<W.length;ce++)C=W[ce],Object.prototype.hasOwnProperty.call(V,C)&&(f[C]=V[C])}}function ve(f){this.src=f,this.g={},this.h=0}ve.prototype.add=function(f,_,C,V,te){const ce=f.toString();f=this.g[ce],f||(f=this.g[ce]=[],this.h++);const Pe=De(f,_,V,te);return Pe>-1?(_=f[Pe],C||(_.fa=!1)):(_=new ee(_,this.src,ce,!!V,te),_.fa=C,f.push(_)),_};function Te(f,_){const C=_.type;if(C in f.g){var V=f.g[C],te=Array.prototype.indexOf.call(V,_,void 0),ce;(ce=te>=0)&&Array.prototype.splice.call(V,te,1),ce&&(Z(_),f.g[C].length==0&&(delete f.g[C],f.h--))}}function De(f,_,C,V){for(let te=0;te<f.length;++te){const ce=f[te];if(!ce.da&&ce.listener==_&&ce.capture==!!C&&ce.ha==V)return te}return-1}var ae="closure_lm_"+(Math.random()*1e6|0),Le={};function Ie(f,_,C,V,te){if(Array.isArray(_)){for(let ce=0;ce<_.length;ce++)Ie(f,_[ce],C,V,te);return null}return C=F(C),f&&f[le]?f.J(_,C,h(V)?!!V.capture:!1,te):de(f,_,C,!1,V,te)}function de(f,_,C,V,te,ce){if(!_)throw Error("Invalid event type");const Pe=h(te)?!!te.capture:!!te;let vt=Ue(f);if(vt||(f[ae]=vt=new ve(f)),C=vt.add(_,C,V,Pe,ce),C.proxy)return C;if(V=pe(),C.proxy=V,V.src=f,V.listener=C,f.addEventListener)z||(te=Pe),te===void 0&&(te=!1),f.addEventListener(_.toString(),V,te);else if(f.attachEvent)f.attachEvent(it(_.toString()),V);else if(f.addListener&&f.removeListener)f.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return C}function pe(){function f(C){return _.call(f.src,f.listener,C)}const _=_e;return f}function ge(f,_,C,V,te){if(Array.isArray(_))for(var ce=0;ce<_.length;ce++)ge(f,_[ce],C,V,te);else V=h(V)?!!V.capture:!!V,C=F(C),f&&f[le]?(f=f.i,ce=String(_).toString(),ce in f.g&&(_=f.g[ce],C=De(_,C,V,te),C>-1&&(Z(_[C]),Array.prototype.splice.call(_,C,1),_.length==0&&(delete f.g[ce],f.h--)))):f&&(f=Ue(f))&&(_=f.g[_.toString()],f=-1,_&&(f=De(_,C,V,te)),(C=f>-1?_[f]:null)&&Se(C))}function Se(f){if(typeof f!="number"&&f&&!f.da){var _=f.src;if(_&&_[le])Te(_.i,f);else{var C=f.type,V=f.proxy;_.removeEventListener?_.removeEventListener(C,V,f.capture):_.detachEvent?_.detachEvent(it(C),V):_.addListener&&_.removeListener&&_.removeListener(V),(C=Ue(_))?(Te(C,f),C.h==0&&(C.src=null,_[ae]=null)):Z(f)}}}function it(f){return f in Le?Le[f]:Le[f]="on"+f}function _e(f,_){if(f.da)f=!0;else{_=new se(_,this);const C=f.listener,V=f.ha||f.src;f.fa&&Se(f),f=C.call(V,_)}return f}function Ue(f){return f=f[ae],f instanceof ve?f:null}var Me="__closure_events_fn_"+(Math.random()*1e9>>>0);function F(f){return typeof f=="function"?f:(f[Me]||(f[Me]=function(_){return f.handleEvent(_)}),f[Me])}function Q(){P.call(this),this.i=new ve(this),this.M=this,this.G=null}b(Q,P),Q.prototype[le]=!0,Q.prototype.removeEventListener=function(f,_,C,V){ge(this,f,_,C,V)};function J(f,_){var C,V=f.G;if(V)for(C=[];V;V=V.G)C.push(V);if(f=f.M,V=_.type||_,typeof _=="string")_=new L(_,f);else if(_ instanceof L)_.target=_.target||f;else{var te=_;_=new L(V,f),ie(_,te)}te=!0;let ce,Pe;if(C)for(Pe=C.length-1;Pe>=0;Pe--)ce=_.g=C[Pe],te=Ce(ce,V,!0,_)&&te;if(ce=_.g=f,te=Ce(ce,V,!0,_)&&te,te=Ce(ce,V,!1,_)&&te,C)for(Pe=0;Pe<C.length;Pe++)ce=_.g=C[Pe],te=Ce(ce,V,!1,_)&&te}Q.prototype.N=function(){if(Q.Z.N.call(this),this.i){var f=this.i;for(const _ in f.g){const C=f.g[_];for(let V=0;V<C.length;V++)Z(C[V]);delete f.g[_],f.h--}}this.G=null},Q.prototype.J=function(f,_,C,V){return this.i.add(String(f),_,!1,C,V)},Q.prototype.K=function(f,_,C,V){return this.i.add(String(f),_,!0,C,V)};function Ce(f,_,C,V){if(_=f.i.g[String(_)],!_)return!0;_=_.concat();let te=!0;for(let ce=0;ce<_.length;++ce){const Pe=_[ce];if(Pe&&!Pe.da&&Pe.capture==C){const vt=Pe.listener,yn=Pe.ha||Pe.src;Pe.fa&&Te(f.i,Pe),te=vt.call(yn,V)!==!1&&te}}return te&&!V.defaultPrevented}function $e(f,_){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=p(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:u.setTimeout(f,_||0)}function Qe(f){f.g=$e(()=>{f.g=null,f.i&&(f.i=!1,Qe(f))},f.l);const _=f.h;f.h=null,f.m.apply(null,_)}class ct extends P{constructor(_,C){super(),this.m=_,this.l=C,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Qe(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $t(f){P.call(this),this.h=f,this.g={}}b($t,P);var fn=[];function ar(f){Ee(f.g,function(_,C){this.g.hasOwnProperty(C)&&Se(_)},f),f.g={}}$t.prototype.N=function(){$t.Z.N.call(this),ar(this)},$t.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ke=u.JSON.stringify,ze=u.JSON.parse,nt=class{stringify(f){return u.JSON.stringify(f,void 0)}parse(f){return u.JSON.parse(f,void 0)}};function tt(){}function Qt(){}var Dt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ht(){L.call(this,"d")}b(ht,L);function vn(){L.call(this,"c")}b(vn,L);var nn={},Ve=null;function Ne(){return Ve=Ve||new Q}nn.Ia="serverreachability";function Je(f){L.call(this,nn.Ia,f)}b(Je,L);function Xe(f){const _=Ne();J(_,new Je(_))}nn.STAT_EVENT="statevent";function pt(f,_){L.call(this,nn.STAT_EVENT,f),this.stat=_}b(pt,L);function ut(f){const _=Ne();J(_,new pt(_,f))}nn.Ja="timingevent";function Ct(f,_){L.call(this,nn.Ja,f),this.size=_}b(Ct,L);function zt(f,_){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){f()},_)}function xt(){this.g=!0}xt.prototype.ua=function(){this.g=!1};function sn(f,_,C,V,te,ce){f.info(function(){if(f.g)if(ce){var Pe="",vt=ce.split("&");for(let Bt=0;Bt<vt.length;Bt++){var yn=vt[Bt].split("=");if(yn.length>1){const un=yn[0];yn=yn[1];const Jr=un.split("_");Pe=Jr.length>=2&&Jr[1]=="type"?Pe+(un+"="+yn+"&"):Pe+(un+"=redacted&")}}}else Pe=null;else Pe=ce;return"XMLHTTP REQ ("+V+") [attempt "+te+"]: "+_+`
`+C+`
`+Pe})}function Vn(f,_,C,V,te,ce,Pe){f.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+te+"]: "+_+`
`+C+`
`+ce+" "+Pe})}function Be(f,_,C,V){f.info(function(){return"XMLHTTP TEXT ("+_+"): "+Ut(f,C)+(V?" "+V:"")})}function gt(f,_){f.info(function(){return"TIMEOUT: "+_})}xt.prototype.info=function(){};function Ut(f,_){if(!f.g)return _;if(!_)return null;try{const ce=JSON.parse(_);if(ce){for(f=0;f<ce.length;f++)if(Array.isArray(ce[f])){var C=ce[f];if(!(C.length<2)){var V=C[1];if(Array.isArray(V)&&!(V.length<1)){var te=V[0];if(te!="noop"&&te!="stop"&&te!="close")for(let Pe=1;Pe<V.length;Pe++)V[Pe]=""}}}}return ke(ce)}catch{return _}}var Qn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},$i={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Dc;function Ja(){}b(Ja,tt),Ja.prototype.g=function(){return new XMLHttpRequest},Dc=new Ja;function oi(f){return encodeURIComponent(String(f))}function Ud(f){var _=1;f=f.split(":");const C=[];for(;_>0&&f.length;)C.push(f.shift()),_--;return f.length&&C.push(f.join(":")),C}function cs(f,_,C,V){this.j=f,this.i=_,this.l=C,this.S=V||1,this.V=new $t(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new us}function us(){this.i=null,this.g="",this.h=!1}var En={},Hn={};function Ts(f,_,C){f.M=1,f.A=Za(Tn(_)),f.u=C,f.R=!0,el(f,null)}function el(f,_){f.F=Date.now(),ks(f),f.B=Tn(f.A);var C=f.B,V=f.S;Array.isArray(V)||(V=[String(V)]),sl(C.i,"t",V),f.C=0,C=f.j.L,f.h=new us,f.g=th(f.j,C?_:null,!f.u),f.P>0&&(f.O=new ct(p(f.Y,f,f.g),f.P)),_=f.V,C=f.g,V=f.ba;var te="readystatechange";Array.isArray(te)||(te&&(fn[0]=te.toString()),te=fn);for(let ce=0;ce<te.length;ce++){const Pe=Ie(C,te[ce],V||_.handleEvent,!1,_.h||_);if(!Pe)break;_.g[Pe.key]=Pe}_=f.J?H(f.J):{},f.u?(f.v||(f.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,_)):(f.v="GET",f.g.ea(f.B,f.v,null,_)),Xe(),sn(f.i,f.v,f.B,f.l,f.S,f.u)}cs.prototype.ba=function(f){f=f.target;const _=this.O;_&&fs(f)==3?_.j():this.Y(f)},cs.prototype.Y=function(f){try{if(f==this.g)e:{const vt=fs(this.g),yn=this.g.ya(),Bt=this.g.ca();if(!(vt<3)&&(vt!=3||this.g&&(this.h.h||this.g.la()||Xn(this.g)))){this.K||vt!=4||yn==7||(yn==8||Bt<=0?Xe(3):Xe(2)),Ns(this);var _=this.g.ca();this.X=_;var C=Cp(this);if(this.o=_==200,Vn(this.i,this.v,this.B,this.l,this.S,vt,_),this.o){if(this.U&&!this.L){t:{if(this.g){var V,te=this.g;if((V=te.g?te.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(V)){var ce=V;break t}}ce=null}if(f=ce)Be(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,As(this,f);else{this.o=!1,this.m=3,ut(12),Dr(this),Qr(this);break e}}if(this.R){f=!0;let un;for(;!this.K&&this.C<C.length;)if(un=Fd(this,C),un==Hn){vt==4&&(this.m=4,ut(14),f=!1),Be(this.i,this.l,null,"[Incomplete Response]");break}else if(un==En){this.m=4,ut(15),Be(this.i,this.l,C,"[Invalid Chunk]"),f=!1;break}else Be(this.i,this.l,un,null),As(this,un);if(Bd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vt!=4||C.length!=0||this.h.h||(this.m=1,ut(16),f=!1),this.o=this.o&&f,!f)Be(this.i,this.l,C,"[Invalid Chunked Response]"),Dr(this),Qr(this);else if(C.length>0&&!this.W){this.W=!0;var Pe=this.j;Pe.g==this&&Pe.aa&&!Pe.P&&(Pe.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),Kc(Pe),Pe.P=!0,ut(11))}}else Be(this.i,this.l,C,null),As(this,C);vt==4&&Dr(this),this.o&&!this.K&&(vt==4?Wd(this.j,this):(this.o=!1,ks(this)))}else ci(this.g),_==400&&C.indexOf("Unknown SID")>0?(this.m=3,ut(12)):(this.m=0,ut(13)),Dr(this),Qr(this)}}}catch{}finally{}};function Cp(f){if(!Bd(f))return f.g.la();const _=Xn(f.g);if(_==="")return"";let C="";const V=_.length,te=fs(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return Dr(f),Qr(f),"";f.h.i=new u.TextDecoder}for(let ce=0;ce<V;ce++)f.h.h=!0,C+=f.h.i.decode(_[ce],{stream:!(te&&ce==V-1)});return _.length=0,f.h.g+=C,f.C=0,f.h.g}function Bd(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function Fd(f,_){var C=f.C,V=_.indexOf(`
`,C);return V==-1?Hn:(C=Number(_.substring(C,V)),isNaN(C)?En:(V+=1,V+C>_.length?Hn:(_=_.slice(V,V+C),f.C=V+C,_)))}cs.prototype.cancel=function(){this.K=!0,Dr(this)};function ks(f){f.T=Date.now()+f.H,tl(f,f.H)}function tl(f,_){if(f.D!=null)throw Error("WatchDog timer not null");f.D=zt(p(f.aa,f),_)}function Ns(f){f.D&&(u.clearTimeout(f.D),f.D=null)}cs.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(gt(this.i,this.B),this.M!=2&&(Xe(),ut(17)),Dr(this),this.m=2,Qr(this)):tl(this,this.T-f)};function Qr(f){f.j.I==0||f.K||Wd(f.j,f)}function Dr(f){Ns(f);var _=f.O;_&&typeof _.dispose=="function"&&_.dispose(),f.O=null,ar(f.V),f.g&&(_=f.g,f.g=null,_.abort(),_.dispose())}function As(f,_){try{var C=f.j;if(C.I!=0&&(C.g==f||js(C.h,f))){if(!f.L&&js(C.h,f)&&C.I==3){try{var V=C.Ba.g.parse(_)}catch{V=null}if(Array.isArray(V)&&V.length==3){var te=V;if(te[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<f.F)cl(C),Wi(C);else break e;ao(C),ut(18)}}else C.xa=te[1],0<C.xa-C.K&&te[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=zt(p(C.Va,C),6e3));Rs(C.h)<=1&&C.ta&&(C.ta=void 0)}else Ls(C,11)}else if((f.L||C.g==f)&&cl(C),!M(_))for(te=C.Ba.g.parse(_),_=0;_<te.length;_++){let Bt=te[_];const un=Bt[0];if(!(un<=C.K))if(C.K=un,Bt=Bt[1],C.I==2)if(Bt[0]=="c"){C.M=Bt[1],C.ba=Bt[2];const Jr=Bt[3];Jr!=null&&(C.ka=Jr,C.j.info("VER="+C.ka));const Vs=Bt[4];Vs!=null&&(C.za=Vs,C.j.info("SVER="+C.za));const ms=Bt[5];ms!=null&&typeof ms=="number"&&ms>0&&(V=1.5*ms,C.O=V,C.j.info("backChannelRequestTimeoutMs_="+V)),V=C;const ps=f.g;if(ps){const oo=ps.g?ps.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oo){var ce=V.h;ce.g||oo.indexOf("spdy")==-1&&oo.indexOf("quic")==-1&&oo.indexOf("h2")==-1||(ce.j=ce.l,ce.g=new Set,ce.h&&(Oc(ce,ce.h),ce.h=null))}if(V.G){const ul=ps.g?ps.g.getResponseHeader("X-HTTP-Session-Id"):null;ul&&(V.wa=ul,Gt(V.J,V.G,ul))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-f.F,C.j.info("Handshake RTT: "+C.T+"ms")),V=C;var Pe=f;if(V.na=eh(V,V.L?V.ba:null,V.W),Pe.L){Lc(V.h,Pe);var vt=Pe,yn=V.O;yn&&(vt.H=yn),vt.D&&(Ns(vt),ks(vt)),V.g=Pe}else Qd(V);C.i.length>0&&Os(C)}else Bt[0]!="stop"&&Bt[0]!="close"||Ls(C,7);else C.I==3&&(Bt[0]=="stop"||Bt[0]=="close"?Bt[0]=="stop"?Ls(C,7):Gc(C):Bt[0]!="noop"&&C.l&&C.l.qa(Bt),C.A=0)}}Xe(4)}catch{}}var Cn=class{constructor(f,_){this.g=f,this.map=_}};function Mc(f){this.l=f||10,u.PerformanceNavigationTiming?(f=u.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Pc(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Rs(f){return f.h?1:f.g?f.g.size:0}function js(f,_){return f.h?f.h==_:f.g?f.g.has(_):!1}function Oc(f,_){f.g?f.g.add(_):f.h=_}function Lc(f,_){f.h&&f.h==_?f.h=null:f.g&&f.g.has(_)&&f.g.delete(_)}Mc.prototype.cancel=function(){if(this.i=Vc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Vc(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let _=f.i;for(const C of f.g.values())_=_.concat(C.G);return _}return k(f.i)}var $d=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nl(f,_){if(f){f=f.split("&");for(let C=0;C<f.length;C++){const V=f[C].indexOf("=");let te,ce=null;V>=0?(te=f[C].substring(0,V),ce=f[C].substring(V+1)):te=f[C],_(te,ce?decodeURIComponent(ce.replace(/\+/g," ")):"")}}}function Mr(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;f instanceof Mr?(this.l=f.l,qn(this,f.j),this.o=f.o,this.g=f.g,Hi(this,f.u),this.h=f.h,zc(this,Yd(f.i)),this.m=f.m):f&&(_=String(f).match($d))?(this.l=!1,qn(this,_[1]||"",!0),this.o=Is(_[2]||""),this.g=Is(_[3]||"",!0),Hi(this,_[4]),this.h=Is(_[5]||"",!0),zc(this,_[6]||"",!0),this.m=Is(_[7]||"")):(this.l=!1,this.i=new Gi(null,this.l))}Mr.prototype.toString=function(){const f=[];var _=this.j;_&&f.push(eo(_,rl,!0),":");var C=this.g;return(C||_=="file")&&(f.push("//"),(_=this.o)&&f.push(eo(_,rl,!0),"@"),f.push(oi(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&f.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&f.push("/"),f.push(eo(C,C.charAt(0)=="/"?Uc:Hd,!0))),(C=this.i.toString())&&f.push("?",C),(C=this.m)&&f.push("#",eo(C,qd)),f.join("")},Mr.prototype.resolve=function(f){const _=Tn(this);let C=!!f.j;C?qn(_,f.j):C=!!f.o,C?_.o=f.o:C=!!f.g,C?_.g=f.g:C=f.u!=null;var V=f.h;if(C)Hi(_,f.u);else if(C=!!f.h){if(V.charAt(0)!="/")if(this.g&&!this.h)V="/"+V;else{var te=_.h.lastIndexOf("/");te!=-1&&(V=_.h.slice(0,te+1)+V)}if(te=V,te==".."||te==".")V="";else if(te.indexOf("./")!=-1||te.indexOf("/.")!=-1){V=te.lastIndexOf("/",0)==0,te=te.split("/");const ce=[];for(let Pe=0;Pe<te.length;){const vt=te[Pe++];vt=="."?V&&Pe==te.length&&ce.push(""):vt==".."?((ce.length>1||ce.length==1&&ce[0]!="")&&ce.pop(),V&&Pe==te.length&&ce.push("")):(ce.push(vt),V=!0)}V=ce.join("/")}else V=te}return C?_.h=V:C=f.i.toString()!=="",C?zc(_,Yd(f.i)):C=!!f.m,C&&(_.m=f.m),_};function Tn(f){return new Mr(f)}function qn(f,_,C){f.j=C?Is(_,!0):_,f.j&&(f.j=f.j.replace(/:$/,""))}function Hi(f,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);f.u=_}else f.u=null}function zc(f,_,C){_ instanceof Gi?(f.i=_,il(f.i,f.l)):(C||(_=eo(_,qi)),f.i=new Gi(_,f.l))}function Gt(f,_,C){f.i.set(_,C)}function Za(f){return Gt(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function Is(f,_){return f?_?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function eo(f,_,C){return typeof f=="string"?(f=encodeURI(f).replace(_,xr),C&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function xr(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var rl=/[#\/\?@]/g,Hd=/[#\?:]/g,Uc=/[#\?]/g,qi=/[#\?@]/g,qd=/#/g;function Gi(f,_){this.h=this.g=null,this.i=f||null,this.j=!!_}function _r(f){f.g||(f.g=new Map,f.h=0,f.i&&nl(f.i,function(_,C){f.add(decodeURIComponent(_.replace(/\+/g," ")),C)}))}t=Gi.prototype,t.add=function(f,_){_r(this),this.i=null,f=Yi(this,f);let C=this.g.get(f);return C||this.g.set(f,C=[]),C.push(_),this.h+=1,this};function Gd(f,_){_r(f),_=Yi(f,_),f.g.has(_)&&(f.i=null,f.h-=f.g.get(_).length,f.g.delete(_))}function Bc(f,_){return _r(f),_=Yi(f,_),f.g.has(_)}t.forEach=function(f,_){_r(this),this.g.forEach(function(C,V){C.forEach(function(te){f.call(_,te,V,this)},this)},this)};function Fc(f,_){_r(f);let C=[];if(typeof _=="string")Bc(f,_)&&(C=C.concat(f.g.get(Yi(f,_))));else for(f=Array.from(f.g.values()),_=0;_<f.length;_++)C=C.concat(f[_]);return C}t.set=function(f,_){return _r(this),this.i=null,f=Yi(this,f),Bc(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[_]),this.h+=1,this},t.get=function(f,_){return f?(f=Fc(this,f),f.length>0?String(f[0]):_):_};function sl(f,_,C){Gd(f,_),C.length>0&&(f.i=null,f.g.set(Yi(f,_),k(C)),f.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],_=Array.from(this.g.keys());for(let V=0;V<_.length;V++){var C=_[V];const te=oi(C);C=Fc(this,C);for(let ce=0;ce<C.length;ce++){let Pe=te;C[ce]!==""&&(Pe+="="+oi(C[ce])),f.push(Pe)}}return this.i=f.join("&")};function Yd(f){const _=new Gi;return _.i=f.i,f.g&&(_.g=new Map(f.g),_.h=f.h),_}function Yi(f,_){return _=String(_),f.j&&(_=_.toLowerCase()),_}function il(f,_){_&&!f.j&&(_r(f),f.i=null,f.g.forEach(function(C,V){const te=V.toLowerCase();V!=te&&(Gd(this,V),sl(this,te,C))},f)),f.j=_}function ds(f,_){const C=new xt;if(u.Image){const V=new Image;V.onload=y(Xr,C,"TestLoadImage: loaded",!0,_,V),V.onerror=y(Xr,C,"TestLoadImage: error",!1,_,V),V.onabort=y(Xr,C,"TestLoadImage: abort",!1,_,V),V.ontimeout=y(Xr,C,"TestLoadImage: timeout",!1,_,V),u.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=f}else _(!1)}function $c(f,_){const C=new xt,V=new AbortController,te=setTimeout(()=>{V.abort(),Xr(C,"TestPingServer: timeout",!1,_)},1e4);fetch(f,{signal:V.signal}).then(ce=>{clearTimeout(te),ce.ok?Xr(C,"TestPingServer: ok",!0,_):Xr(C,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(te),Xr(C,"TestPingServer: error",!1,_)})}function Xr(f,_,C,V,te){try{te&&(te.onload=null,te.onerror=null,te.onabort=null,te.ontimeout=null),V(C)}catch{}}function Ki(){this.g=new nt}function Ds(f){this.i=f.Sb||null,this.h=f.ab||!1}b(Ds,tt),Ds.prototype.g=function(){return new to(this.i,this.h)};function to(f,_){Q.call(this),this.H=f,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(to,Q),t=to.prototype,t.open=function(f,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=_,this.readyState=1,hs(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(_.body=f),(this.H||u).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Qi(this)),this.readyState=0},t.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,hs(this)),this.g&&(this.readyState=3,hs(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;al(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function al(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}t.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var _=f.value?f.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!f.done}))&&(this.response=this.responseText+=_)}f.done?Qi(this):hs(this),this.readyState==3&&al(this)}},t.Oa=function(f){this.g&&(this.response=this.responseText=f,Qi(this))},t.Na=function(f){this.g&&(this.response=f,Qi(this))},t.ga=function(){this.g&&Qi(this)};function Qi(f){f.readyState=4,f.l=null,f.j=null,f.B=null,hs(f)}t.setRequestHeader=function(f,_){this.A.append(f,_)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],_=this.h.entries();for(var C=_.next();!C.done;)C=C.value,f.push(C[0]+": "+C[1]),C=_.next();return f.join(`\r
`)};function hs(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(to.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Wr(f){let _="";return Ee(f,function(C,V){_+=V,_+=":",_+=C,_+=`\r
`}),_}function no(f,_,C){e:{for(V in C){var V=!1;break e}V=!0}V||(C=Wr(C),typeof f=="string"?C!=null&&oi(C):Gt(f,_,C))}function Xt(f){Q.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(Xt,Q);var Ms=/^https?$/i,Hc=["POST","PUT"];t=Xt.prototype,t.Fa=function(f){this.H=f},t.ea=function(f,_,C,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);_=_?_.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Dc.g(),this.g.onreadystatechange=x(p(this.Ca,this));try{this.B=!0,this.g.open(_,String(f),!0),this.B=!1}catch(ce){ro(this,ce);return}if(f=C||"",C=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var te in V)C.set(te,V[te]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const ce of V.keys())C.set(ce,V.get(ce));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(C.keys()).find(ce=>ce.toLowerCase()=="content-type"),te=u.FormData&&f instanceof u.FormData,!(Array.prototype.indexOf.call(Hc,_,void 0)>=0)||V||te||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ce,Pe]of C)this.g.setRequestHeader(ce,Pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(ce){ro(this,ce)}};function ro(f,_){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=_,f.o=5,qc(f),li(f)}function qc(f){f.A||(f.A=!0,J(f,"complete"),J(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,J(this,"complete"),J(this,"abort"),li(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),li(this,!0)),Xt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?so(this):this.Xa())},t.Xa=function(){so(this)};function so(f){if(f.h&&typeof l<"u"){if(f.v&&fs(f)==4)setTimeout(f.Ca.bind(f),0);else if(J(f,"readystatechange"),fs(f)==4){f.h=!1;try{const ce=f.ca();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var C;if(!(C=_)){var V;if(V=ce===0){let Pe=String(f.D).match($d)[1]||null;!Pe&&u.self&&u.self.location&&(Pe=u.self.location.protocol.slice(0,-1)),V=!Ms.test(Pe?Pe.toLowerCase():"")}C=V}if(C)J(f,"complete"),J(f,"success");else{f.o=6;try{var te=fs(f)>2?f.g.statusText:""}catch{te=""}f.l=te+" ["+f.ca()+"]",qc(f)}}finally{li(f)}}}}function li(f,_){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const C=f.g;f.g=null,_||J(f,"ready");try{C.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function fs(f){return f.g?f.g.readyState:0}t.ca=function(){try{return fs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(f){if(this.g){var _=this.g.responseText;return f&&_.indexOf(f)==0&&(_=_.substring(f.length)),ze(_)}};function Xn(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function ci(f){const _={};f=(f.g&&fs(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<f.length;V++){if(M(f[V]))continue;var C=Ud(f[V]);const te=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const ce=_[te]||[];_[te]=ce,ce.push(C)}Re(_,function(V){return V.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ps(f,_,C){return C&&C.internalChannelParams&&C.internalChannelParams[f]||_}function Xi(f){this.za=0,this.i=[],this.j=new xt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ps("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ps("baseRetryDelayMs",5e3,f),this.Za=Ps("retryDelaySeedMs",1e4,f),this.Ta=Ps("forwardChannelMaxRetries",2,f),this.va=Ps("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new Mc(f&&f.concurrentRequestLimit),this.Ba=new Ki,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Xi.prototype,t.ka=8,t.I=1,t.connect=function(f,_,C,V){ut(0),this.W=f,this.H=_||{},C&&V!==void 0&&(this.H.OSID=C,this.H.OAID=V),this.F=this.X,this.J=eh(this,null,this.W),Os(this)};function Gc(f){if(ol(f),f.I==3){var _=f.V++,C=Tn(f.J);if(Gt(C,"SID",f.M),Gt(C,"RID",_),Gt(C,"TYPE","terminate"),io(f,C),_=new cs(f,f.j,_),_.M=2,_.A=Za(Tn(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(_.A.toString(),"")}catch{}!C&&u.Image&&(new Image().src=_.A,C=!0),C||(_.g=th(_.j,null),_.g.ea(_.A)),_.F=Date.now(),ks(_)}Zd(f)}function Wi(f){f.g&&(Kc(f),f.g.cancel(),f.g=null)}function ol(f){Wi(f),f.v&&(u.clearTimeout(f.v),f.v=null),cl(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&u.clearTimeout(f.m),f.m=null)}function Os(f){if(!Pc(f.h)&&!f.m){f.m=!0;var _=f.Ea;B||E(),q||(B(),q=!0),w.add(_,f),f.D=0}}function ll(f,_){return Rs(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=_.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=zt(p(f.Ea,f,_),Jd(f,f.D)),f.D++,!0)}t.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const te=new cs(this,this.j,f);let ce=this.o;if(this.U&&(ce?(ce=H(ce),ie(ce,this.U)):ce=this.U),this.u!==null||this.R||(te.J=ce,ce=null),this.S)e:{for(var _=0,C=0;C<this.i.length;C++){t:{var V=this.i[C];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(_+=V,_>4096){_=C;break e}if(_===4096||C===this.i.length-1){_=C+1;break e}}_=1e3}else _=1e3;_=Kd(this,te,_),C=Tn(this.J),Gt(C,"RID",f),Gt(C,"CVER",22),this.G&&Gt(C,"X-HTTP-Session-Id",this.G),io(this,C),ce&&(this.R?_="headers="+oi(Wr(ce))+"&"+_:this.u&&no(C,this.u,ce)),Oc(this.h,te),this.Ra&&Gt(C,"TYPE","init"),this.S?(Gt(C,"$req",_),Gt(C,"SID","null"),te.U=!0,Ts(te,C,null)):Ts(te,C,_),this.I=2}}else this.I==3&&(f?Yc(this,f):this.i.length==0||Pc(this.h)||Yc(this))};function Yc(f,_){var C;_?C=_.l:C=f.V++;const V=Tn(f.J);Gt(V,"SID",f.M),Gt(V,"RID",C),Gt(V,"AID",f.K),io(f,V),f.u&&f.o&&no(V,f.u,f.o),C=new cs(f,f.j,C,f.D+1),f.u===null&&(C.J=f.o),_&&(f.i=_.G.concat(f.i)),_=Kd(f,C,1e3),C.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),Oc(f.h,C),Ts(C,V,_)}function io(f,_){f.H&&Ee(f.H,function(C,V){Gt(_,V,C)}),f.l&&Ee({},function(C,V){Gt(_,V,C)})}function Kd(f,_,C){C=Math.min(f.i.length,C);const V=f.l?p(f.l.Ka,f.l,f):null;e:{var te=f.i;let vt=-1;for(;;){const yn=["count="+C];vt==-1?C>0?(vt=te[0].g,yn.push("ofs="+vt)):vt=0:yn.push("ofs="+vt);let Bt=!0;for(let un=0;un<C;un++){var ce=te[un].g;const Jr=te[un].map;if(ce-=vt,ce<0)vt=Math.max(0,te[un].g-100),Bt=!1;else try{ce="req"+ce+"_"||"";try{var Pe=Jr instanceof Map?Jr:Object.entries(Jr);for(const[Vs,ms]of Pe){let ps=ms;h(ms)&&(ps=ke(ms)),yn.push(ce+Vs+"="+encodeURIComponent(ps))}}catch(Vs){throw yn.push(ce+"type="+encodeURIComponent("_badmap")),Vs}}catch{V&&V(Jr)}}if(Bt){Pe=yn.join("&");break e}}Pe=void 0}return f=f.i.splice(0,C),_.G=f,Pe}function Qd(f){if(!f.g&&!f.v){f.Y=1;var _=f.Da;B||E(),q||(B(),q=!0),w.add(_,f),f.A=0}}function ao(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=zt(p(f.Da,f),Jd(f,f.A)),f.A++,!0)}t.Da=function(){if(this.v=null,Xd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=zt(p(this.Wa,this),f)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ut(10),Wi(this),Xd(this))};function Kc(f){f.B!=null&&(u.clearTimeout(f.B),f.B=null)}function Xd(f){f.g=new cs(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var _=Tn(f.na);Gt(_,"RID","rpc"),Gt(_,"SID",f.M),Gt(_,"AID",f.K),Gt(_,"CI",f.F?"0":"1"),!f.F&&f.ia&&Gt(_,"TO",f.ia),Gt(_,"TYPE","xmlhttp"),io(f,_),f.u&&f.o&&no(_,f.u,f.o),f.O&&(f.g.H=f.O);var C=f.g;f=f.ba,C.M=1,C.A=Za(Tn(_)),C.u=null,C.R=!0,el(C,f)}t.Va=function(){this.C!=null&&(this.C=null,Wi(this),ao(this),ut(19))};function cl(f){f.C!=null&&(u.clearTimeout(f.C),f.C=null)}function Wd(f,_){var C=null;if(f.g==_){cl(f),Kc(f),f.g=null;var V=2}else if(js(f.h,_))C=_.G,Lc(f.h,_),V=1;else return;if(f.I!=0){if(_.o)if(V==1){C=_.u?_.u.length:0,_=Date.now()-_.F;var te=f.D;V=Ne(),J(V,new Ct(V,C)),Os(f)}else Qd(f);else if(te=_.m,te==3||te==0&&_.X>0||!(V==1&&ll(f,_)||V==2&&ao(f)))switch(C&&C.length>0&&(_=f.h,_.i=_.i.concat(C)),te){case 1:Ls(f,5);break;case 4:Ls(f,10);break;case 3:Ls(f,6);break;default:Ls(f,2)}}}function Jd(f,_){let C=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(C*=2),C*_}function Ls(f,_){if(f.j.info("Error code "+_),_==2){var C=p(f.bb,f),V=f.Ua;const te=!V;V=new Mr(V||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||qn(V,"https"),Za(V),te?ds(V.toString(),C):$c(V.toString(),C)}else ut(2);f.I=0,f.l&&f.l.pa(_),Zd(f),ol(f)}t.bb=function(f){f?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function Zd(f){if(f.I=0,f.ja=[],f.l){const _=Vc(f.h);(_.length!=0||f.i.length!=0)&&(R(f.ja,_),R(f.ja,f.i),f.h.i.length=0,k(f.i),f.i.length=0),f.l.oa()}}function eh(f,_,C){var V=C instanceof Mr?Tn(C):new Mr(C);if(V.g!="")_&&(V.g=_+"."+V.g),Hi(V,V.u);else{var te=u.location;V=te.protocol,_=_?_+"."+te.hostname:te.hostname,te=+te.port;const ce=new Mr(null);V&&qn(ce,V),_&&(ce.g=_),te&&Hi(ce,te),C&&(ce.h=C),V=ce}return C=f.G,_=f.wa,C&&_&&Gt(V,C,_),Gt(V,"VER",f.ka),io(f,V),V}function th(f,_,C){if(_&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=f.Aa&&!f.ma?new Xt(new Ds({ab:C})):new Xt(f.ma),_.Fa(f.L),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function nh(){}t=nh.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ji(){}Ji.prototype.g=function(f,_){return new mr(f,_)};function mr(f,_){Q.call(this),this.g=new Xi(_),this.l=f,this.h=_&&_.messageUrlParams||null,f=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(f?f["X-WebChannel-Content-Type"]=_.messageContentType:f={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(f?f["X-WebChannel-Client-Profile"]=_.sa:f={"X-WebChannel-Client-Profile":_.sa}),this.g.U=f,(f=_&&_.Qb)&&!M(f)&&(this.g.u=f),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!M(_)&&(this.g.G=_,f=this.h,f!==null&&_ in f&&(f=this.h,_ in f&&delete f[_])),this.j=new ui(this)}b(mr,Q),mr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},mr.prototype.close=function(){Gc(this.g)},mr.prototype.o=function(f){var _=this.g;if(typeof f=="string"){var C={};C.__data__=f,f=C}else this.v&&(C={},C.__data__=ke(f),f=C);_.i.push(new Cn(_.Ya++,f)),_.I==3&&Os(_)},mr.prototype.N=function(){this.g.l=null,delete this.j,Gc(this.g),delete this.g,mr.Z.N.call(this)};function rh(f){ht.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var _=f.__sm__;if(_){e:{for(const C in _){f=C;break e}f=void 0}(this.i=f)&&(f=this.i,_=_!==null&&f in _?_[f]:void 0),this.data=_}else this.data=f}b(rh,ht);function sh(){vn.call(this),this.status=1}b(sh,vn);function ui(f){this.g=f}b(ui,nh),ui.prototype.ra=function(){J(this.g,"a")},ui.prototype.qa=function(f){J(this.g,new rh(f))},ui.prototype.pa=function(f){J(this.g,new sh)},ui.prototype.oa=function(){J(this.g,"b")},Ji.prototype.createWebChannel=Ji.prototype.g,mr.prototype.send=mr.prototype.o,mr.prototype.open=mr.prototype.m,mr.prototype.close=mr.prototype.close,eC=function(){return new Ji},ZE=function(){return Ne()},JE=nn,vv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Qn.NO_ERROR=0,Qn.TIMEOUT=8,Qn.HTTP_ERROR=6,If=Qn,$i.COMPLETE="complete",WE=$i,Qt.EventType=Dt,Dt.OPEN="a",Dt.CLOSE="b",Dt.ERROR="c",Dt.MESSAGE="d",Q.prototype.listen=Q.prototype.J,Bu=Qt,Xt.prototype.listenOnce=Xt.prototype.K,Xt.prototype.getLastError=Xt.prototype.Ha,Xt.prototype.getLastErrorCode=Xt.prototype.ya,Xt.prototype.getStatus=Xt.prototype.ca,Xt.prototype.getResponseJson=Xt.prototype.La,Xt.prototype.getResponseText=Xt.prototype.la,Xt.prototype.send=Xt.prototype.ea,Xt.prototype.setWithCredentials=Xt.prototype.Fa,XE=Xt}).apply(typeof uf<"u"?uf:typeof self<"u"?self:typeof window<"u"?window:{});const a4="@firebase/firestore",o4="4.9.2";let cr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};cr.UNAUTHENTICATED=new cr(null),cr.GOOGLE_CREDENTIALS=new cr("google-credentials-uid"),cr.FIRST_PARTY=new cr("first-party-uid"),cr.MOCK_USER=new cr("mock-user");let Ec="12.3.0";const Vo=new fy("@firebase/firestore");function $l(){return Vo.logLevel}function Fe(t,...e){if(Vo.logLevel<=Rt.DEBUG){const n=e.map(Ey);Vo.debug(`Firestore (${Ec}): ${t}`,...n)}}function zi(t,...e){if(Vo.logLevel<=Rt.ERROR){const n=e.map(Ey);Vo.error(`Firestore (${Ec}): ${t}`,...n)}}function ac(t,...e){if(Vo.logLevel<=Rt.WARN){const n=e.map(Ey);Vo.warn(`Firestore (${Ec}): ${t}`,...n)}}function Ey(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function lt(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,tC(t,r,n)}function tC(t,e,n){let r=`FIRESTORE (${Ec}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw zi(r),new Error(r)}function qt(t,e,n,r){let a="Unexpected state";typeof n=="string"?a=n:r=n,t||tC(e,a,r)}function mt(t,e){return t}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oe extends ri{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Mi{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class nC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class R9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(cr.UNAUTHENTICATED)))}shutdown(){}}class j9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class I9{constructor(e){this.t=e,this.currentUser=cr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){qt(this.o===void 0,42304);let r=this.i;const a=m=>this.i!==r?(r=this.i,n(m)):Promise.resolve();let l=new Mi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Mi,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},h=m=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((m=>h(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?h(m):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Mi)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(qt(typeof r.accessToken=="string",31837,{l:r}),new nC(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qt(e===null||typeof e=="string",2055,{h:e}),new cr(e)}}class D9{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=cr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class M9{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new D9(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(cr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class l4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class P9{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Hr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){qt(this.o===void 0,3512);const r=l=>{l.error!=null&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,Fe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new l4(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(qt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new l4(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function O9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class Cy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=O9(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<n&&(r+=e.charAt(a[l]%62))}return r}}function jt(t,e){return t<e?-1:t>e?1:0}function yv(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const a=t.charAt(r),l=e.charAt(r);if(a!==l)return I0(a)===I0(l)?jt(a,l):I0(a)?1:-1}return jt(t.length,e.length)}const L9=55296,V9=57343;function I0(t){const e=t.charCodeAt(0);return e>=L9&&e<=V9}function oc(t,e,n){return t.length===e.length&&t.every(((r,a)=>n(r,e[a])))}const c4="__name__";class qs{constructor(e,n,r){n===void 0?n=0:n>e.length&&lt(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&lt(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return qs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof qs?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let a=0;a<r;a++){const l=qs.compareSegments(e.get(a),n.get(a));if(l!==0)return l}return jt(e.length,n.length)}static compareSegments(e,n){const r=qs.isNumericId(e),a=qs.isNumericId(n);return r&&!a?-1:!r&&a?1:r&&a?qs.extractNumericId(e).compare(qs.extractNumericId(n)):yv(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Oa.fromString(e.substring(4,e.length-2))}}class tn extends qs{construct(e,n,r){return new tn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Oe(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((a=>a.length>0)))}return new tn(n)}static emptyPath(){return new tn([])}}const z9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sr extends qs{construct(e,n,r){return new sr(e,n,r)}static isValidIdentifier(e){return z9.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===c4}static keyField(){return new sr([c4])}static fromServerFormat(e){const n=[];let r="",a=0;const l=()=>{if(r.length===0)throw new Oe(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let u=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new Oe(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Oe(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,a+=2}else h==="`"?(u=!u,a++):h!=="."||u?(r+=h,a++):(l(),a++)}if(l(),u)throw new Oe(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new sr(n)}static emptyPath(){return new sr([])}}class We{constructor(e){this.path=e}static fromPath(e){return new We(tn.fromString(e))}static fromName(e){return new We(tn.fromString(e).popFirst(5))}static empty(){return new We(tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return tn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new We(new tn(e.slice()))}}function rC(t,e,n){if(!n)throw new Oe(fe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function U9(t,e,n,r){if(e===!0&&r===!0)throw new Oe(fe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function u4(t){if(!We.isDocumentKey(t))throw new Oe(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function d4(t){if(We.isDocumentKey(t))throw new Oe(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function sC(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function zm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":lt(12329,{type:typeof t})}function vr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Oe(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=zm(t);throw new Oe(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function B9(t,e){if(e<=0)throw new Oe(fe.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function On(t,e){const n={typeString:t};return e&&(n.value=e),n}function Td(t,e){if(!sC(t))throw new Oe(fe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const u=t[r];if(a&&typeof u!==a){n=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){n=`Expected '${r}' field to equal '${l.value}'`;break}}if(n)throw new Oe(fe.INVALID_ARGUMENT,n);return!0}const h4=-62135596800,f4=1e6;class cn{static now(){return cn.fromMillis(Date.now())}static fromDate(e){return cn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*f4);return new cn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Oe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Oe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<h4)throw new Oe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Oe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/f4}_compareTo(e){return this.seconds===e.seconds?jt(this.nanoseconds,e.nanoseconds):jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:cn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Td(e,cn._jsonSchema))return new cn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-h4;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}cn._jsonSchemaVersion="firestore/timestamp/1.0",cn._jsonSchema={type:On("string",cn._jsonSchemaVersion),seconds:On("number"),nanoseconds:On("number")};class dt{static fromTimestamp(e){return new dt(e)}static min(){return new dt(new cn(0,0))}static max(){return new dt(new cn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const nd=-1;function F9(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,a=dt.fromTimestamp(r===1e9?new cn(n+1,0):new cn(n,r));return new Ua(a,We.empty(),e)}function $9(t){return new Ua(t.readTime,t.key,nd)}class Ua{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ua(dt.min(),We.empty(),nd)}static max(){return new Ua(dt.max(),We.empty(),nd)}}function H9(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=We.comparator(t.documentKey,e.documentKey),n!==0?n:jt(t.largestBatchId,e.largestBatchId))}const q9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class G9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Cc(t){if(t.code!==fe.FAILED_PRECONDITION||t.message!==q9)throw t;Fe("LocalStore","Unexpectedly lost primary lease")}class we{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&lt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new we(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(n,l).next(r,a)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof we?n:we.resolve(n)}catch(n){return we.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):we.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):we.reject(n)}static resolve(e){return new we(((n,r)=>{n(e)}))}static reject(e){return new we(((n,r)=>{r(e)}))}static waitFor(e){return new we(((n,r)=>{let a=0,l=0,u=!1;e.forEach((h=>{++a,h.next((()=>{++l,u&&l===a&&n()}),(m=>r(m)))})),u=!0,l===a&&n()}))}static or(e){let n=we.resolve(!1);for(const r of e)n=n.next((a=>a?we.resolve(a):r()));return n}static forEach(e,n){const r=[];return e.forEach(((a,l)=>{r.push(n.call(this,a,l))})),this.waitFor(r)}static mapArray(e,n){return new we(((r,a)=>{const l=e.length,u=new Array(l);let h=0;for(let m=0;m<l;m++){const p=m;n(e[p]).next((y=>{u[p]=y,++h,h===l&&r(u)}),(y=>a(y)))}}))}static doWhile(e,n){return new we(((r,a)=>{const l=()=>{e()===!0?n().next((()=>{l()}),a):r()};l()}))}}function Y9(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Tc(t){return t.name==="IndexedDbTransactionError"}class Um{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Um.ce=-1;const Ty=-1;function Bm(t){return t==null}function am(t){return t===0&&1/t==-1/0}function K9(t){return typeof t=="number"&&Number.isInteger(t)&&!am(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const iC="";function Q9(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=m4(e)),e=X9(t.get(n),e);return m4(e)}function X9(t,e){let n=e;const r=t.length;for(let a=0;a<r;a++){const l=t.charAt(a);switch(l){case"\0":n+="";break;case iC:n+="";break;default:n+=l}}return n}function m4(t){return t+iC+""}function p4(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Qa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function aC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class hn{constructor(e,n){this.comparator=e,this.root=n||rr.EMPTY}insert(e,n){return new hn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rr.BLACK,null,null))}remove(e){return new hn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return n+r.left.size;a<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new df(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new df(this.root,e,this.comparator,!1)}getReverseIterator(){return new df(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new df(this.root,e,this.comparator,!0)}}class df{constructor(e,n,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?r(e.key,n):1,n&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rr{constructor(e,n,r,a,l){this.key=e,this.value=n,this.color=r??rr.RED,this.left=a??rr.EMPTY,this.right=l??rr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,a,l){return new rr(e??this.key,n??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,n,r),null):l===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return rr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return rr.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw lt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw lt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw lt(27949);return e+(this.isRed()?0:1)}}rr.EMPTY=null,rr.RED=!0,rr.BLACK=!1;rr.EMPTY=new class{constructor(){this.size=0}get key(){throw lt(57766)}get value(){throw lt(16141)}get color(){throw lt(16727)}get left(){throw lt(29726)}get right(){throw lt(36894)}copy(e,n,r,a,l){return this}insert(e,n,r){return new rr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Fn{constructor(e){this.comparator=e,this.data=new hn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new g4(this.data.getIterator())}getIteratorFrom(e){return new g4(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Fn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Fn(this.comparator);return n.data=e,n}}class g4{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Gr{constructor(e){this.fields=e,e.sort(sr.comparator)}static empty(){return new Gr([])}unionWith(e){let n=new Fn(sr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Gr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return oc(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class oC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ir{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new oC("Invalid base64 string: "+l):l}})(e);return new ir(n)}static fromUint8Array(e){const n=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new ir(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ir.EMPTY_BYTE_STRING=new ir("");const W9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ba(t){if(qt(!!t,39018),typeof t=="string"){let e=0;const n=W9.exec(t);if(qt(!!n,46558,{timestamp:t}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wn(t.seconds),nanos:wn(t.nanos)}}function wn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Fa(t){return typeof t=="string"?ir.fromBase64String(t):ir.fromUint8Array(t)}const lC="server_timestamp",cC="__type__",uC="__previous_value__",dC="__local_write_time__";function Fm(t){return(t?.mapValue?.fields||{})[cC]?.stringValue===lC}function $m(t){const e=t.mapValue.fields[uC];return Fm(e)?$m(e):e}function rd(t){const e=Ba(t.mapValue.fields[dC].timestampValue);return new cn(e.seconds,e.nanos)}class J9{constructor(e,n,r,a,l,u,h,m,p,y){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=y}}const om="(default)";class sd{constructor(e,n){this.projectId=e,this.database=n||om}static empty(){return new sd("","")}get isDefaultDatabase(){return this.database===om}isEqual(e){return e instanceof sd&&e.projectId===this.projectId&&e.database===this.database}}const hC="__type__",Z9="__max__",hf={mapValue:{}},fC="__vector__",lm="value";function $a(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Fm(t)?4:t8(t)?9007199254740991:e8(t)?10:11:lt(28295,{value:t})}function ei(t,e){if(t===e)return!0;const n=$a(t);if(n!==$a(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return rd(t).isEqual(rd(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=Ba(a.timestampValue),h=Ba(l.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(a,l){return Fa(a.bytesValue).isEqual(Fa(l.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(a,l){return wn(a.geoPointValue.latitude)===wn(l.geoPointValue.latitude)&&wn(a.geoPointValue.longitude)===wn(l.geoPointValue.longitude)})(t,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return wn(a.integerValue)===wn(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=wn(a.doubleValue),h=wn(l.doubleValue);return u===h?am(u)===am(h):isNaN(u)&&isNaN(h)}return!1})(t,e);case 9:return oc(t.arrayValue.values||[],e.arrayValue.values||[],ei);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},h=l.mapValue.fields||{};if(p4(u)!==p4(h))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(h[m]===void 0||!ei(u[m],h[m])))return!1;return!0})(t,e);default:return lt(52216,{left:t})}}function id(t,e){return(t.values||[]).find((n=>ei(n,e)))!==void 0}function lc(t,e){if(t===e)return 0;const n=$a(t),r=$a(e);if(n!==r)return jt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return jt(t.booleanValue,e.booleanValue);case 2:return(function(l,u){const h=wn(l.integerValue||l.doubleValue),m=wn(u.integerValue||u.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1})(t,e);case 3:return v4(t.timestampValue,e.timestampValue);case 4:return v4(rd(t),rd(e));case 5:return yv(t.stringValue,e.stringValue);case 6:return(function(l,u){const h=Fa(l),m=Fa(u);return h.compareTo(m)})(t.bytesValue,e.bytesValue);case 7:return(function(l,u){const h=l.split("/"),m=u.split("/");for(let p=0;p<h.length&&p<m.length;p++){const y=jt(h[p],m[p]);if(y!==0)return y}return jt(h.length,m.length)})(t.referenceValue,e.referenceValue);case 8:return(function(l,u){const h=jt(wn(l.latitude),wn(u.latitude));return h!==0?h:jt(wn(l.longitude),wn(u.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return y4(t.arrayValue,e.arrayValue);case 10:return(function(l,u){const h=l.fields||{},m=u.fields||{},p=h[lm]?.arrayValue,y=m[lm]?.arrayValue,b=jt(p?.values?.length||0,y?.values?.length||0);return b!==0?b:y4(p,y)})(t.mapValue,e.mapValue);case 11:return(function(l,u){if(l===hf.mapValue&&u===hf.mapValue)return 0;if(l===hf.mapValue)return 1;if(u===hf.mapValue)return-1;const h=l.fields||{},m=Object.keys(h),p=u.fields||{},y=Object.keys(p);m.sort(),y.sort();for(let b=0;b<m.length&&b<y.length;++b){const x=yv(m[b],y[b]);if(x!==0)return x;const k=lc(h[m[b]],p[y[b]]);if(k!==0)return k}return jt(m.length,y.length)})(t.mapValue,e.mapValue);default:throw lt(23264,{he:n})}}function v4(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return jt(t,e);const n=Ba(t),r=Ba(e),a=jt(n.seconds,r.seconds);return a!==0?a:jt(n.nanos,r.nanos)}function y4(t,e){const n=t.values||[],r=e.values||[];for(let a=0;a<n.length&&a<r.length;++a){const l=lc(n[a],r[a]);if(l)return l}return jt(n.length,r.length)}function cc(t){return bv(t)}function bv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Ba(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Fa(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return We.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",a=!0;for(const l of n.values||[])a?a=!1:r+=",",r+=bv(l);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let a="{",l=!0;for(const u of r)l?l=!1:a+=",",a+=`${u}:${bv(n.fields[u])}`;return a+"}"})(t.mapValue):lt(61005,{value:t})}function Df(t){switch($a(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$m(t);return e?16+Df(e):16;case 5:return 2*t.stringValue.length;case 6:return Fa(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+Df(l)),0)})(t.arrayValue);case 10:case 11:return(function(r){let a=0;return Qa(r.fields,((l,u)=>{a+=l.length+Df(u)})),a})(t.mapValue);default:throw lt(13486,{value:t})}}function cm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function xv(t){return!!t&&"integerValue"in t}function ky(t){return!!t&&"arrayValue"in t}function b4(t){return!!t&&"nullValue"in t}function x4(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Mf(t){return!!t&&"mapValue"in t}function e8(t){return(t?.mapValue?.fields||{})[hC]?.stringValue===fC}function Xu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Qa(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Xu(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Xu(t.arrayValue.values[n]);return e}return{...t}}function t8(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Z9}class jr{constructor(e){this.value=e}static empty(){return new jr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Mf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xu(n)}setAll(e){let n=sr.emptyPath(),r={},a=[];e.forEach(((u,h)=>{if(!n.isImmediateParentOf(h)){const m=this.getFieldsMap(n);this.applyChanges(m,r,a),r={},a=[],n=h.popLast()}u?r[h.lastSegment()]=Xu(u):a.push(h.lastSegment())}));const l=this.getFieldsMap(n);this.applyChanges(l,r,a)}delete(e){const n=this.field(e.popLast());Mf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ei(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=n.mapValue.fields[e.get(r)];Mf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,r){Qa(n,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new jr(Xu(this.value))}}function mC(t){const e=[];return Qa(t.fields,((n,r)=>{const a=new sr([n]);if(Mf(r)){const l=mC(r.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new Gr(e)}class dr{constructor(e,n,r,a,l,u,h){this.key=e,this.documentType=n,this.version=r,this.readTime=a,this.createTime=l,this.data=u,this.documentState=h}static newInvalidDocument(e){return new dr(e,0,dt.min(),dt.min(),dt.min(),jr.empty(),0)}static newFoundDocument(e,n,r,a){return new dr(e,1,n,dt.min(),r,a,0)}static newNoDocument(e,n){return new dr(e,2,n,dt.min(),dt.min(),jr.empty(),0)}static newUnknownDocument(e,n){return new dr(e,3,n,dt.min(),dt.min(),jr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(dt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class uc{constructor(e,n){this.position=e,this.inclusive=n}}function _4(t,e,n){let r=0;for(let a=0;a<t.position.length;a++){const l=e[a],u=t.position[a];if(l.field.isKeyField()?r=We.comparator(We.fromName(u.referenceValue),n.key):r=lc(u,n.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function w4(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ei(t.position[n],e.position[n]))return!1;return!0}class ad{constructor(e,n="asc"){this.field=e,this.dir=n}}function n8(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class pC{}class Pn extends pC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new s8(e,n,r):n==="array-contains"?new o8(e,r):n==="in"?new l8(e,r):n==="not-in"?new c8(e,r):n==="array-contains-any"?new u8(e,r):new Pn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new i8(e,r):new a8(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(lc(n,this.value)):n!==null&&$a(this.value)===$a(n)&&this.matchesComparison(lc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return lt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cs extends pC{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Cs(e,n)}matches(e){return gC(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function gC(t){return t.op==="and"}function vC(t){return r8(t)&&gC(t)}function r8(t){for(const e of t.filters)if(e instanceof Cs)return!1;return!0}function _v(t){if(t instanceof Pn)return t.field.canonicalString()+t.op.toString()+cc(t.value);if(vC(t))return t.filters.map((e=>_v(e))).join(",");{const e=t.filters.map((n=>_v(n))).join(",");return`${t.op}(${e})`}}function yC(t,e){return t instanceof Pn?(function(r,a){return a instanceof Pn&&r.op===a.op&&r.field.isEqual(a.field)&&ei(r.value,a.value)})(t,e):t instanceof Cs?(function(r,a){return a instanceof Cs&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,u,h)=>l&&yC(u,a.filters[h])),!0):!1})(t,e):void lt(19439)}function bC(t){return t instanceof Pn?(function(n){return`${n.field.canonicalString()} ${n.op} ${cc(n.value)}`})(t):t instanceof Cs?(function(n){return n.op.toString()+" {"+n.getFilters().map(bC).join(" ,")+"}"})(t):"Filter"}class s8 extends Pn{constructor(e,n,r){super(e,n,r),this.key=We.fromName(r.referenceValue)}matches(e){const n=We.comparator(e.key,this.key);return this.matchesComparison(n)}}class i8 extends Pn{constructor(e,n){super(e,"in",n),this.keys=xC("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class a8 extends Pn{constructor(e,n){super(e,"not-in",n),this.keys=xC("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function xC(t,e){return(e.arrayValue?.values||[]).map((n=>We.fromName(n.referenceValue)))}class o8 extends Pn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ky(n)&&id(n.arrayValue,this.value)}}class l8 extends Pn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&id(this.value.arrayValue,n)}}class c8 extends Pn{constructor(e,n){super(e,"not-in",n)}matches(e){if(id(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!id(this.value.arrayValue,n)}}class u8 extends Pn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ky(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>id(this.value.arrayValue,r)))}}class d8{constructor(e,n=null,r=[],a=[],l=null,u=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=u,this.endAt=h,this.Te=null}}function S4(t,e=null,n=[],r=[],a=null,l=null,u=null){return new d8(t,e,n,r,a,l,u)}function Ny(t){const e=mt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>_v(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),Bm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>cc(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>cc(r))).join(",")),e.Te=n}return e.Te}function Ay(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!n8(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!yC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!w4(t.startAt,e.startAt)&&w4(t.endAt,e.endAt)}function wv(t){return We.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Go{constructor(e,n=null,r=[],a=[],l=null,u="F",h=null,m=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=u,this.startAt=h,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function h8(t,e,n,r,a,l,u,h){return new Go(t,e,n,r,a,l,u,h)}function Hm(t){return new Go(t)}function E4(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ry(t){return t.collectionGroup!==null}function Zl(t){const e=mt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),n.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new Fn(sr.comparator);return u.filters.forEach((m=>{m.getFlattenedFilters().forEach((p=>{p.isInequality()&&(h=h.add(p.field))}))})),h})(e).forEach((l=>{n.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new ad(l,r))})),n.has(sr.keyField().canonicalString())||e.Ie.push(new ad(sr.keyField(),r))}return e.Ie}function Xs(t){const e=mt(t);return e.Ee||(e.Ee=f8(e,Zl(t))),e.Ee}function f8(t,e){if(t.limitType==="F")return S4(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new ad(a.field,l)}));const n=t.endAt?new uc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new uc(t.startAt.position,t.startAt.inclusive):null;return S4(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Sv(t,e){const n=t.filters.concat([e]);return new Go(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function um(t,e,n){return new Go(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function qm(t,e){return Ay(Xs(t),Xs(e))&&t.limitType===e.limitType}function _C(t){return`${Ny(Xs(t))}|lt:${t.limitType}`}function Hl(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((a=>bC(a))).join(", ")}]`),Bm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((a=>cc(a))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((a=>cc(a))).join(",")),`Target(${r})`})(Xs(t))}; limitType=${t.limitType})`}function Gm(t,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):We.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(t,e)&&(function(r,a){for(const l of Zl(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(t,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(t,e)&&(function(r,a){return!(r.startAt&&!(function(u,h,m){const p=_4(u,h,m);return u.inclusive?p<=0:p<0})(r.startAt,Zl(r),a)||r.endAt&&!(function(u,h,m){const p=_4(u,h,m);return u.inclusive?p>=0:p>0})(r.endAt,Zl(r),a))})(t,e)}function m8(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function wC(t){return(e,n)=>{let r=!1;for(const a of Zl(t)){const l=p8(a,e,n);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function p8(t,e,n){const r=t.field.isKeyField()?We.comparator(e.key,n.key):(function(l,u,h){const m=u.data.field(l),p=h.data.field(l);return m!==null&&p!==null?lc(m,p):lt(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return lt(19790,{direction:t.dir})}}class Yo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[n]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Qa(this.inner,((n,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return aC(this.inner)}size(){return this.innerSize}}const g8=new hn(We.comparator);function Ui(){return g8}const SC=new hn(We.comparator);function Fu(...t){let e=SC;for(const n of t)e=e.insert(n.key,n);return e}function EC(t){let e=SC;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function No(){return Wu()}function CC(){return Wu()}function Wu(){return new Yo((t=>t.toString()),((t,e)=>t.isEqual(e)))}const v8=new hn(We.comparator),y8=new Fn(We.comparator);function It(...t){let e=y8;for(const n of t)e=e.add(n);return e}const b8=new Fn(jt);function x8(){return b8}function jy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:am(e)?"-0":e}}function TC(t){return{integerValue:""+t}}function kC(t,e){return K9(e)?TC(e):jy(t,e)}class Ym{constructor(){this._=void 0}}function _8(t,e,n){return t instanceof od?(function(a,l){const u={fields:{[cC]:{stringValue:lC},[dC]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Fm(l)&&(l=$m(l)),l&&(u.fields[uC]=l),{mapValue:u}})(n,e):t instanceof dc?AC(t,e):t instanceof hc?RC(t,e):(function(a,l){const u=NC(a,l),h=C4(u)+C4(a.Ae);return xv(u)&&xv(a.Ae)?TC(h):jy(a.serializer,h)})(t,e)}function w8(t,e,n){return t instanceof dc?AC(t,e):t instanceof hc?RC(t,e):n}function NC(t,e){return t instanceof ld?(function(r){return xv(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class od extends Ym{}class dc extends Ym{constructor(e){super(),this.elements=e}}function AC(t,e){const n=jC(e);for(const r of t.elements)n.some((a=>ei(a,r)))||n.push(r);return{arrayValue:{values:n}}}class hc extends Ym{constructor(e){super(),this.elements=e}}function RC(t,e){let n=jC(e);for(const r of t.elements)n=n.filter((a=>!ei(a,r)));return{arrayValue:{values:n}}}class ld extends Ym{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function C4(t){return wn(t.integerValue||t.doubleValue)}function jC(t){return ky(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Km{constructor(e,n){this.field=e,this.transform=n}}function S8(t,e){return t.field.isEqual(e.field)&&(function(r,a){return r instanceof dc&&a instanceof dc||r instanceof hc&&a instanceof hc?oc(r.elements,a.elements,ei):r instanceof ld&&a instanceof ld?ei(r.Ae,a.Ae):r instanceof od&&a instanceof od})(t.transform,e.transform)}class E8{constructor(e,n){this.version=e,this.transformResults=n}}class yr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new yr}static exists(e){return new yr(void 0,e)}static updateTime(e){return new yr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Qm{}function IC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Xm(t.key,yr.none()):new kd(t.key,t.data,yr.none());{const n=t.data,r=jr.empty();let a=new Fn(sr.comparator);for(let l of e.fields)if(!a.has(l)){let u=n.field(l);u===null&&l.length>1&&(l=l.popLast(),u=n.field(l)),u===null?r.delete(l):r.set(l,u),a=a.add(l)}return new Xa(t.key,r,new Gr(a.toArray()),yr.none())}}function C8(t,e,n){t instanceof kd?(function(a,l,u){const h=a.value.clone(),m=k4(a.fieldTransforms,l,u.transformResults);h.setAll(m),l.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(t,e,n):t instanceof Xa?(function(a,l,u){if(!Pf(a.precondition,l))return void l.convertToUnknownDocument(u.version);const h=k4(a.fieldTransforms,l,u.transformResults),m=l.data;m.setAll(DC(a)),m.setAll(h),l.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(t,e,n):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function Ju(t,e,n,r){return t instanceof kd?(function(l,u,h,m){if(!Pf(l.precondition,u))return h;const p=l.value.clone(),y=N4(l.fieldTransforms,m,u);return p.setAll(y),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null})(t,e,n,r):t instanceof Xa?(function(l,u,h,m){if(!Pf(l.precondition,u))return h;const p=N4(l.fieldTransforms,m,u),y=u.data;return y.setAll(DC(l)),y.setAll(p),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((b=>b.field)))})(t,e,n,r):(function(l,u,h){return Pf(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(t,e,n)}function T8(t,e){let n=null;for(const r of t.fieldTransforms){const a=e.data.field(r.field),l=NC(r.transform,a||null);l!=null&&(n===null&&(n=jr.empty()),n.set(r.field,l))}return n||null}function T4(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&oc(r,a,((l,u)=>S8(l,u)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class kd extends Qm{constructor(e,n,r,a=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Xa extends Qm{constructor(e,n,r,a,l=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function DC(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function k4(t,e,n){const r=new Map;qt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let a=0;a<n.length;a++){const l=t[a],u=l.transform,h=e.data.field(l.field);r.set(l.field,w8(u,h,n[a]))}return r}function N4(t,e,n){const r=new Map;for(const a of t){const l=a.transform,u=n.data.field(a.field);r.set(a.field,_8(l,u,e))}return r}class Xm extends Qm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class k8 extends Qm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class N8{constructor(e,n,r,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&C8(l,e,r[a])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ju(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ju(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=CC();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let h=this.applyToLocalView(u,l.mutatedFields);h=n.has(a.key)?null:h;const m=IC(u,h);m!==null&&r.set(a.key,m),u.isValidDocument()||u.convertToNoDocument(dt.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),It())}isEqual(e){return this.batchId===e.batchId&&oc(this.mutations,e.mutations,((n,r)=>T4(n,r)))&&oc(this.baseMutations,e.baseMutations,((n,r)=>T4(n,r)))}}class Iy{constructor(e,n,r,a){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=a}static from(e,n,r){qt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return v8})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,r[u].version);return new Iy(e,n,r,a)}}class A8{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class R8{constructor(e,n){this.count=e,this.unchangedNames=n}}var jn,Pt;function j8(t){switch(t){case fe.OK:return lt(64938);case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0;default:return lt(15467,{code:t})}}function MC(t){if(t===void 0)return zi("GRPC error has no .code"),fe.UNKNOWN;switch(t){case jn.OK:return fe.OK;case jn.CANCELLED:return fe.CANCELLED;case jn.UNKNOWN:return fe.UNKNOWN;case jn.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case jn.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case jn.INTERNAL:return fe.INTERNAL;case jn.UNAVAILABLE:return fe.UNAVAILABLE;case jn.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case jn.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case jn.NOT_FOUND:return fe.NOT_FOUND;case jn.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case jn.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case jn.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case jn.ABORTED:return fe.ABORTED;case jn.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case jn.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case jn.DATA_LOSS:return fe.DATA_LOSS;default:return lt(39323,{code:t})}}(Pt=jn||(jn={}))[Pt.OK=0]="OK",Pt[Pt.CANCELLED=1]="CANCELLED",Pt[Pt.UNKNOWN=2]="UNKNOWN",Pt[Pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pt[Pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pt[Pt.NOT_FOUND=5]="NOT_FOUND",Pt[Pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pt[Pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pt[Pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pt[Pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pt[Pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pt[Pt.ABORTED=10]="ABORTED",Pt[Pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pt[Pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pt[Pt.INTERNAL=13]="INTERNAL",Pt[Pt.UNAVAILABLE=14]="UNAVAILABLE",Pt[Pt.DATA_LOSS=15]="DATA_LOSS";function I8(){return new TextEncoder}const D8=new Oa([4294967295,4294967295],0);function A4(t){const e=I8().encode(t),n=new QE;return n.update(e),new Uint8Array(n.digest())}function R4(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Oa([n,r],0),new Oa([a,l],0)]}class Dy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new $u(`Invalid padding: ${n}`);if(r<0)throw new $u(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $u(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new $u(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Oa.fromNumber(this.ge)}ye(e,n,r){let a=e.add(n.multiply(Oa.fromNumber(r)));return a.compare(D8)===1&&(a=new Oa([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=A4(e),[r,a]=R4(n);for(let l=0;l<this.hashCount;l++){const u=this.ye(r,a,l);if(!this.we(u))return!1}return!0}static create(e,n,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new Dy(l,a,n);return r.forEach((h=>u.insert(h))),u}insert(e){if(this.ge===0)return;const n=A4(e),[r,a]=R4(n);for(let l=0;l<this.hashCount;l++){const u=this.ye(r,a,l);this.Se(u)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class $u extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Wm{constructor(e,n,r,a,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const a=new Map;return a.set(e,Nd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Wm(dt.min(),a,new hn(jt),Ui(),It())}}class Nd{constructor(e,n,r,a,l){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Nd(r,n,It(),It(),It())}}class Of{constructor(e,n,r,a){this.be=e,this.removedTargetIds=n,this.key=r,this.De=a}}class PC{constructor(e,n){this.targetId=e,this.Ce=n}}class OC{constructor(e,n,r=ir.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=a}}class j4{constructor(){this.ve=0,this.Fe=I4(),this.Me=ir.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=It(),n=It(),r=It();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:r=r.add(a);break;default:lt(38017,{changeType:l})}})),new Nd(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=I4()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,qt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class M8{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ui(),this.Je=ff(),this.He=ff(),this.Ye=new hn(jt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:lt(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,a)=>{this.rt(a)&&n(a)}))}st(e){const n=e.targetId,r=e.Ce.count,a=this.ot(n);if(a){const l=a.target;if(wv(l))if(r===0){const u=new We(l.path);this.et(n,u,dr.newNoDocument(u,dt.min()))}else qt(r===1,20013,{expectedCount:r});else{const u=this._t(n);if(u!==r){const h=this.ut(e),m=h?this.ct(h,e,u):1;if(m!==0){this.it(n);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=n;let u,h;try{u=Fa(r).toUint8Array()}catch(m){if(m instanceof oC)return ac("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{h=new Dy(u,a,l)}catch(m){return ac(m instanceof $u?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return h.ge===0?null:h}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let a=0;return r.forEach((l=>{const u=this.Ge.ht(),h=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(n,l,null),a++)})),a}Tt(e){const n=new Map;this.ze.forEach(((l,u)=>{const h=this.ot(u);if(h){if(l.current&&wv(h.target)){const m=new We(h.target.path);this.It(m).has(u)||this.Et(u,m)||this.et(u,m,dr.newNoDocument(m,e))}l.Be&&(n.set(u,l.ke()),l.qe())}}));let r=It();this.He.forEach(((l,u)=>{let h=!0;u.forEachWhile((m=>{const p=this.ot(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const a=new Wm(e,n,this.Ye,this.je,r);return this.je=Ui(),this.Je=ff(),this.He=ff(),this.Ye=new hn(jt),a}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,n)?a.Qe(n,1):a.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new j4,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Fn(jt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Fn(jt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Fe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new j4),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ff(){return new hn(We.comparator)}function I4(){return new hn(We.comparator)}const P8={asc:"ASCENDING",desc:"DESCENDING"},O8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},L8={and:"AND",or:"OR"};class V8{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ev(t,e){return t.useProto3Json||Bm(e)?e:{value:e}}function dm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function LC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function z8(t,e){return dm(t,e.toTimestamp())}function Ws(t){return qt(!!t,49232),dt.fromTimestamp((function(n){const r=Ba(n);return new cn(r.seconds,r.nanos)})(t))}function My(t,e){return Cv(t,e).canonicalString()}function Cv(t,e){const n=(function(a){return new tn(["projects",a.projectId,"databases",a.database])})(t).child("documents");return e===void 0?n:n.child(e)}function VC(t){const e=tn.fromString(t);return qt($C(e),10190,{key:e.toString()}),e}function Tv(t,e){return My(t.databaseId,e.path)}function D0(t,e){const n=VC(e);if(n.get(1)!==t.databaseId.projectId)throw new Oe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Oe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new We(UC(n))}function zC(t,e){return My(t.databaseId,e)}function U8(t){const e=VC(t);return e.length===4?tn.emptyPath():UC(e)}function kv(t){return new tn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function UC(t){return qt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function D4(t,e,n){return{name:Tv(t,e),fields:n.value.mapValue.fields}}function B8(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:lt(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(p,y){return p.useProto3Json?(qt(y===void 0||typeof y=="string",58123),ir.fromBase64String(y||"")):(qt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),ir.fromUint8Array(y||new Uint8Array))})(t,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&(function(p){const y=p.code===void 0?fe.UNKNOWN:MC(p.code);return new Oe(y,p.message||"")})(u);n=new OC(r,a,l,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=D0(t,r.document.name),l=Ws(r.document.updateTime),u=r.document.createTime?Ws(r.document.createTime):dt.min(),h=new jr({mapValue:{fields:r.document.fields}}),m=dr.newFoundDocument(a,l,u,h),p=r.targetIds||[],y=r.removedTargetIds||[];n=new Of(p,y,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=D0(t,r.document),l=r.readTime?Ws(r.readTime):dt.min(),u=dr.newNoDocument(a,l),h=r.removedTargetIds||[];n=new Of([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=D0(t,r.document),l=r.removedTargetIds||[];n=new Of([],l,a,null)}else{if(!("filter"in e))return lt(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,u=new R8(a,l),h=r.targetId;n=new PC(h,u)}}return n}function F8(t,e){let n;if(e instanceof kd)n={update:D4(t,e.key,e.value)};else if(e instanceof Xm)n={delete:Tv(t,e.key)};else if(e instanceof Xa)n={update:D4(t,e.key,e.data),updateMask:W8(e.fieldMask)};else{if(!(e instanceof k8))return lt(16599,{Vt:e.type});n={verify:Tv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(l,u){const h=u.transform;if(h instanceof od)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof dc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof hc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof ld)return{fieldPath:u.field.canonicalString(),increment:h.Ae};throw lt(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:z8(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:lt(27497)})(t,e.precondition)),n}function $8(t,e){return t&&t.length>0?(qt(e!==void 0,14353),t.map((n=>(function(a,l){let u=a.updateTime?Ws(a.updateTime):Ws(l);return u.isEqual(dt.min())&&(u=Ws(l)),new E8(u,a.transformResults||[])})(n,e)))):[]}function H8(t,e){return{documents:[zC(t,e.path)]}}function q8(t,e){const n={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=zC(t,a);const l=(function(p){if(p.length!==0)return FC(Cs.create(p,"and"))})(e.filters);l&&(n.structuredQuery.where=l);const u=(function(p){if(p.length!==0)return p.map((y=>(function(x){return{field:ql(x.field),direction:K8(x.dir)}})(y)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const h=Ev(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:n,parent:a}}function G8(t){let e=U8(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let a=null;if(r>0){qt(r===1,65062);const y=n.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];n.where&&(l=(function(b){const x=BC(b);return x instanceof Cs&&vC(x)?x.getFilters():[x]})(n.where));let u=[];n.orderBy&&(u=(function(b){return b.map((x=>(function(R){return new ad(Gl(R.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(x)))})(n.orderBy));let h=null;n.limit&&(h=(function(b){let x;return x=typeof b=="object"?b.value:b,Bm(x)?null:x})(n.limit));let m=null;n.startAt&&(m=(function(b){const x=!!b.before,k=b.values||[];return new uc(k,x)})(n.startAt));let p=null;return n.endAt&&(p=(function(b){const x=!b.before,k=b.values||[];return new uc(k,x)})(n.endAt)),h8(e,a,u,l,h,"F",m,p)}function Y8(t,e){const n=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lt(28987,{purpose:a})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function BC(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Gl(n.unaryFilter.field);return Pn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Gl(n.unaryFilter.field);return Pn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Gl(n.unaryFilter.field);return Pn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Gl(n.unaryFilter.field);return Pn.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return lt(61313);default:return lt(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Pn.create(Gl(n.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return lt(58110);default:return lt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Cs.create(n.compositeFilter.filters.map((r=>BC(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return lt(1026)}})(n.compositeFilter.op))})(t):lt(30097,{filter:t})}function K8(t){return P8[t]}function Q8(t){return O8[t]}function X8(t){return L8[t]}function ql(t){return{fieldPath:t.canonicalString()}}function Gl(t){return sr.fromServerFormat(t.fieldPath)}function FC(t){return t instanceof Pn?(function(n){if(n.op==="=="){if(x4(n.value))return{unaryFilter:{field:ql(n.field),op:"IS_NAN"}};if(b4(n.value))return{unaryFilter:{field:ql(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(x4(n.value))return{unaryFilter:{field:ql(n.field),op:"IS_NOT_NAN"}};if(b4(n.value))return{unaryFilter:{field:ql(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ql(n.field),op:Q8(n.op),value:n.value}}})(t):t instanceof Cs?(function(n){const r=n.getFilters().map((a=>FC(a)));return r.length===1?r[0]:{compositeFilter:{op:X8(n.op),filters:r}}})(t):lt(54877,{filter:t})}function W8(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function $C(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class ja{constructor(e,n,r,a,l=dt.min(),u=dt.min(),h=ir.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new ja(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ja(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ja(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ja(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class J8{constructor(e){this.yt=e}}function Z8(t){const e=G8({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?um(e,e.limit,"L"):e}class eI{constructor(){this.Cn=new tI}addToCollectionParentIndex(e,n){return this.Cn.add(n),we.resolve()}getCollectionParents(e,n){return we.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return we.resolve()}deleteFieldIndex(e,n){return we.resolve()}deleteAllFieldIndexes(e){return we.resolve()}createTargetIndexes(e,n){return we.resolve()}getDocumentsMatchingTarget(e,n){return we.resolve(null)}getIndexType(e,n){return we.resolve(0)}getFieldIndexes(e,n){return we.resolve([])}getNextCollectionGroupToUpdate(e){return we.resolve(null)}getMinOffset(e,n){return we.resolve(Ua.min())}getMinOffsetFromCollectionGroup(e,n){return we.resolve(Ua.min())}updateCollectionGroup(e,n,r){return we.resolve()}updateIndexEntries(e,n){return we.resolve()}}class tI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),a=this.index[n]||new Fn(tn.comparator),l=!a.has(r);return this.index[n]=a.add(r),l}has(e){const n=e.lastSegment(),r=e.popLast(),a=this.index[n];return a&&a.has(r)}getEntries(e){return(this.index[e]||new Fn(tn.comparator)).toArray()}}const M4={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},HC=41943040;class Ar{static withCacheSize(e){return new Ar(e,Ar.DEFAULT_COLLECTION_PERCENTILE,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}Ar.DEFAULT_COLLECTION_PERCENTILE=10,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ar.DEFAULT=new Ar(HC,Ar.DEFAULT_COLLECTION_PERCENTILE,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ar.DISABLED=new Ar(-1,0,0);class fc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new fc(0)}static cr(){return new fc(-1)}}const P4="LruGarbageCollector",nI=1048576;function O4([t,e],[n,r]){const a=jt(t,n);return a===0?jt(e,r):a}class rI{constructor(e){this.Ir=e,this.buffer=new Fn(O4),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();O4(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class sI{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Fe(P4,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Tc(n)?Fe(P4,"Ignoring IndexedDB error during garbage collection: ",n):await Cc(n)}await this.Vr(3e5)}))}}class iI{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return we.resolve(Um.ce);const r=new rI(n);return this.mr.forEachTarget(e,(a=>r.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>r.Ar(a))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),we.resolve(M4)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),M4):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,a,l,u,h,m,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),a=this.params.maximumSequenceNumbersToCollect):a=b,u=Date.now(),this.nthSequenceNumber(e,a)))).next((b=>(r=b,h=Date.now(),this.removeTargets(e,r,n)))).next((b=>(l=b,m=Date.now(),this.removeOrphanedDocuments(e,r)))).next((b=>(p=Date.now(),$l()<=Rt.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-y}ms
	Determined least recently used ${a} in `+(h-u)+`ms
	Removed ${l} targets in `+(m-h)+`ms
	Removed ${b} documents in `+(p-m)+`ms
Total Duration: ${p-y}ms`),we.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:b}))))}}function aI(t,e){return new iI(t,e)}class oI{constructor(){this.changes=new Yo((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?we.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class lI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class cI{constructor(e,n,r,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,n)))).next((a=>(r!==null&&Ju(r.mutation,a,Gr.empty(),cn.now()),a)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,It()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=It()){const a=No();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,r).next((l=>{let u=Fu();return l.forEach(((h,m)=>{u=u.insert(h,m.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const r=No();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,It())))}populateOverlays(e,n,r){const a=[];return r.forEach((l=>{n.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,h)=>{n.set(u,h)}))}))}computeViews(e,n,r,a){let l=Ui();const u=Wu(),h=(function(){return Wu()})();return n.forEach(((m,p)=>{const y=r.get(p.key);a.has(p.key)&&(y===void 0||y.mutation instanceof Xa)?l=l.insert(p.key,p):y!==void 0?(u.set(p.key,y.mutation.getFieldMask()),Ju(y.mutation,p,y.mutation.getFieldMask(),cn.now())):u.set(p.key,Gr.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((p,y)=>u.set(p,y))),n.forEach(((p,y)=>h.set(p,new lI(y,u.get(p)??null)))),h)))}recalculateAndSaveOverlays(e,n){const r=Wu();let a=new hn(((u,h)=>u-h)),l=It();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const h of u)h.keys().forEach((m=>{const p=n.get(m);if(p===null)return;let y=r.get(m)||Gr.empty();y=h.applyToLocalView(p,y),r.set(m,y);const b=(a.get(h.batchId)||It()).add(m);a=a.insert(h.batchId,b)}))})).next((()=>{const u=[],h=a.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),p=m.key,y=m.value,b=CC();y.forEach((x=>{if(!l.has(x)){const k=IC(n.get(x),r.get(x));k!==null&&b.set(x,k),l=l.add(x)}})),u.push(this.documentOverlayCache.saveOverlays(e,p,b))}return we.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,a){return(function(u){return We.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ry(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,a):this.getDocumentsMatchingCollectionQuery(e,n,r,a)}getNextDocuments(e,n,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,a-l.size):we.resolve(No());let h=nd,m=l;return u.next((p=>we.forEach(p,((y,b)=>(h<b.largestBatchId&&(h=b.largestBatchId),l.get(y)?we.resolve():this.remoteDocumentCache.getEntry(e,y).next((x=>{m=m.insert(y,x)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,m,p,It()))).next((y=>({batchId:h,changes:EC(y)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new We(n)).next((r=>{let a=Fu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,a){const l=n.collectionGroup;let u=Fu();return this.indexManager.getCollectionParents(e,l).next((h=>we.forEach(h,(m=>{const p=(function(b,x){return new Go(x,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(n,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,r,a).next((y=>{y.forEach(((b,x)=>{u=u.insert(b,x)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,l,a)))).next((u=>{l.forEach(((m,p)=>{const y=p.getKey();u.get(y)===null&&(u=u.insert(y,dr.newInvalidDocument(y)))}));let h=Fu();return u.forEach(((m,p)=>{const y=l.get(m);y!==void 0&&Ju(y.mutation,p,Gr.empty(),cn.now()),Gm(n,p)&&(h=h.insert(m,p))})),h}))}}class uI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return we.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(a){return{id:a.id,version:a.version,createTime:Ws(a.createTime)}})(n)),we.resolve()}getNamedQuery(e,n){return we.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(a){return{name:a.name,query:Z8(a.bundledQuery),readTime:Ws(a.readTime)}})(n)),we.resolve()}}class dI{constructor(){this.overlays=new hn(We.comparator),this.qr=new Map}getOverlay(e,n){return we.resolve(this.overlays.get(n))}getOverlays(e,n){const r=No();return we.forEach(n,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((a,l)=>{this.St(e,n,l)})),we.resolve()}removeOverlaysForBatchId(e,n,r){const a=this.qr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(r)),we.resolve()}getOverlaysForCollection(e,n,r){const a=No(),l=n.length+1,u=new We(n.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const m=h.getNext().value,p=m.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>r&&a.set(m.getKey(),m)}return we.resolve(a)}getOverlaysForCollectionGroup(e,n,r,a){let l=new hn(((p,y)=>p-y));const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>r){let y=l.get(p.largestBatchId);y===null&&(y=No(),l=l.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const h=No(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((p,y)=>h.set(p,y))),!(h.size()>=a)););return we.resolve(h)}St(e,n,r){const a=this.overlays.get(r.key);if(a!==null){const u=this.qr.get(a.largestBatchId).delete(r.key);this.qr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new A8(n,r));let l=this.qr.get(n);l===void 0&&(l=It(),this.qr.set(n,l)),this.qr.set(n,l.add(r.key))}}class hI{constructor(){this.sessionToken=ir.EMPTY_BYTE_STRING}getSessionToken(e){return we.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,we.resolve()}}class Py{constructor(){this.Qr=new Fn(Yn.$r),this.Ur=new Fn(Yn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Yn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Yn(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new We(new tn([])),r=new Yn(n,e),a=new Yn(n,e+1),l=[];return this.Ur.forEachInRange([r,a],(u=>{this.Gr(u),l.push(u.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new We(new tn([])),r=new Yn(n,e),a=new Yn(n,e+1);let l=It();return this.Ur.forEachInRange([r,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const n=new Yn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Yn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return We.comparator(e.key,n.key)||jt(e.Yr,n.Yr)}static Kr(e,n){return jt(e.Yr,n.Yr)||We.comparator(e.key,n.key)}}class fI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Fn(Yn.$r)}checkEmpty(e){return we.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new N8(l,n,r,a);this.mutationQueue.push(u);for(const h of a)this.Zr=this.Zr.add(new Yn(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return we.resolve(u)}lookupMutationBatch(e,n){return we.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,a=this.ei(r),l=a<0?0:a;return we.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return we.resolve(this.mutationQueue.length===0?Ty:this.tr-1)}getAllMutationBatches(e){return we.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Yn(n,0),a=new Yn(n,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([r,a],(u=>{const h=this.Xr(u.Yr);l.push(h)})),we.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Fn(jt);return n.forEach((a=>{const l=new Yn(a,0),u=new Yn(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],(h=>{r=r.add(h.Yr)}))})),we.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,a=r.length+1;let l=r;We.isDocumentKey(l)||(l=l.child(""));const u=new Yn(new We(l),0);let h=new Fn(jt);return this.Zr.forEachWhile((m=>{const p=m.key.path;return!!r.isPrefixOf(p)&&(p.length===a&&(h=h.add(m.Yr)),!0)}),u),we.resolve(this.ti(h))}ti(e){const n=[];return e.forEach((r=>{const a=this.Xr(r);a!==null&&n.push(a)})),n}removeMutationBatch(e,n){qt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return we.forEach(n.mutations,(a=>{const l=new Yn(a.key,n.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Yn(n,0),a=this.Zr.firstAfterOrEqual(r);return we.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,we.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class mI{constructor(e){this.ri=e,this.docs=(function(){return new hn(We.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,a=this.docs.get(r),l=a?a.size:0,u=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return we.resolve(r?r.document.mutableCopy():dr.newInvalidDocument(n))}getEntries(e,n){let r=Ui();return n.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():dr.newInvalidDocument(a))})),we.resolve(r)}getDocumentsMatchingQuery(e,n,r,a){let l=Ui();const u=n.path,h=new We(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:p,value:{document:y}}=m.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||H9($9(y),r)<=0||(a.has(y.key)||Gm(n,y))&&(l=l.insert(y.key,y.mutableCopy()))}return we.resolve(l)}getAllFromCollectionGroup(e,n,r,a){lt(9500)}ii(e,n){return we.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new pI(this)}getSize(e){return we.resolve(this.size)}}class pI extends oI{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?n.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(r)})),we.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class gI{constructor(e){this.persistence=e,this.si=new Yo((n=>Ny(n)),Ay),this.lastRemoteSnapshotVersion=dt.min(),this.highestTargetId=0,this.oi=0,this._i=new Py,this.targetCount=0,this.ai=fc.ur()}forEachTarget(e,n){return this.si.forEach(((r,a)=>n(a))),we.resolve()}getLastRemoteSnapshotVersion(e){return we.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return we.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),we.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),we.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new fc(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,we.resolve()}updateTargetData(e,n){return this.Pr(n),we.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,we.resolve()}removeTargets(e,n,r){let a=0;const l=[];return this.si.forEach(((u,h)=>{h.sequenceNumber<=n&&r.get(h.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)})),we.waitFor(l).next((()=>a))}getTargetCount(e){return we.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return we.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),we.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const a=this.persistence.referenceDelegate,l=[];return a&&n.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),we.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),we.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return we.resolve(r)}containsKey(e,n){return we.resolve(this._i.containsKey(n))}}class qC{constructor(e,n){this.ui={},this.overlays={},this.ci=new Um(0),this.li=!1,this.li=!0,this.hi=new hI,this.referenceDelegate=e(this),this.Pi=new gI(this),this.indexManager=new eI,this.remoteDocumentCache=(function(a){return new mI(a)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new J8(n),this.Ii=new uI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new dI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new fI(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Fe("MemoryPersistence","Starting transaction:",e);const a=new vI(this.ci.next());return this.referenceDelegate.Ei(),r(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,n){return we.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class vI extends G9{constructor(e){super(),this.currentSequenceNumber=e}}class Oy{constructor(e){this.persistence=e,this.Ri=new Py,this.Vi=null}static mi(e){return new Oy(e)}get fi(){if(this.Vi)return this.Vi;throw lt(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),we.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),we.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),we.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((a=>this.fi.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return we.forEach(this.fi,(r=>{const a=We.fromPath(r);return this.gi(e,a).next((l=>{l||n.removeEntry(a,dt.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return we.or([()=>we.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class hm{constructor(e,n){this.persistence=e,this.pi=new Yo((r=>Q9(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=aI(this,n)}static mi(e,n){return new hm(e,n)}Ei(){}di(e){return we.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((a=>r+a))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return we.forEach(this.pi,((r,a)=>this.br(e,r,a).next((l=>l?we.resolve():n(a)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(u=>this.br(e,u,n).next((h=>{h||(r++,l.removeEntry(u,dt.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),we.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),we.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),we.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),we.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Df(e.data.value)),n}br(e,n,r){return we.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.pi.get(n);return we.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ly{constructor(e,n,r,a){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=a}static As(e,n){let r=It(),a=It();for(const l of n.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Ly(e,n.fromCache,r,a)}}class yI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class bI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return HN()?8:Y9(hr())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,a){const l={result:null};return this.ys(e,n).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ws(e,n,a,r).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new yI;return this.Ss(e,n,u).next((h=>{if(l.result=h,this.Vs)return this.bs(e,n,u,h.size)}))})).next((()=>l.result))}bs(e,n,r,a){return r.documentReadCount<this.fs?($l()<=Rt.DEBUG&&Fe("QueryEngine","SDK will not create cache indexes for query:",Hl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),we.resolve()):($l()<=Rt.DEBUG&&Fe("QueryEngine","Query:",Hl(n),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.gs*a?($l()<=Rt.DEBUG&&Fe("QueryEngine","The SDK decides to create cache indexes for query:",Hl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xs(n))):we.resolve())}ys(e,n){if(E4(n))return we.resolve(null);let r=Xs(n);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(n.limit!==null&&a===1&&(n=um(n,null,"F"),r=Xs(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const u=It(...l);return this.ps.getDocuments(e,u).next((h=>this.indexManager.getMinOffset(e,r).next((m=>{const p=this.Ds(n,h);return this.Cs(n,p,u,m.readTime)?this.ys(e,um(n,null,"F")):this.vs(e,p,n,m)}))))})))))}ws(e,n,r,a){return E4(n)||a.isEqual(dt.min())?we.resolve(null):this.ps.getDocuments(e,r).next((l=>{const u=this.Ds(n,l);return this.Cs(n,u,r,a)?we.resolve(null):($l()<=Rt.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Hl(n)),this.vs(e,u,n,F9(a,nd)).next((h=>h)))}))}Ds(e,n){let r=new Fn(wC(e));return n.forEach(((a,l)=>{Gm(e,l)&&(r=r.add(l))})),r}Cs(e,n,r,a){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,n,r){return $l()<=Rt.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",Hl(n)),this.ps.getDocumentsMatchingQuery(e,n,Ua.min(),r)}vs(e,n,r,a){return this.ps.getDocumentsMatchingQuery(e,r,a).next((l=>(n.forEach((u=>{l=l.insert(u.key,u)})),l)))}}const Vy="LocalStore",xI=3e8;class _I{constructor(e,n,r,a){this.persistence=e,this.Fs=n,this.serializer=a,this.Ms=new hn(jt),this.xs=new Yo((l=>Ny(l)),Ay),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function wI(t,e,n,r){return new _I(t,e,n,r)}async function GC(t,e){const n=mt(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return n.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((l=>{const u=[],h=[];let m=It();for(const p of a){u.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}for(const p of l){h.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}return n.localDocuments.getDocuments(r,m).next((p=>({Ls:p,removedBatchIds:u,addedBatchIds:h})))}))}))}function SI(t,e){const n=mt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,m,p,y){const b=p.batch,x=b.keys();let k=we.resolve();return x.forEach((R=>{k=k.next((()=>y.getEntry(m,R))).next((j=>{const N=p.docVersions.get(R);qt(N!==null,48541),j.version.compareTo(N)<0&&(b.applyToRemoteDocument(j,p),j.isValidDocument()&&(j.setReadTime(p.commitVersion),y.addEntry(j)))}))})),k.next((()=>h.mutationQueue.removeMutationBatch(m,b)))})(n,r,e,l).next((()=>l.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let m=It();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(m=m.add(h.batch.mutations[p].key));return m})(e)))).next((()=>n.localDocuments.getDocuments(r,a)))}))}function YC(t){const e=mt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function EI(t,e){const n=mt(t),r=e.snapshotVersion;let a=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=n.Ns.newChangeBuffer({trackRemovals:!0});a=n.Ms;const h=[];e.targetChanges.forEach(((y,b)=>{const x=a.get(b);if(!x)return;h.push(n.Pi.removeMatchingKeys(l,y.removedDocuments,b).next((()=>n.Pi.addMatchingKeys(l,y.addedDocuments,b))));let k=x.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(b)!==null?k=k.withResumeToken(ir.EMPTY_BYTE_STRING,dt.min()).withLastLimboFreeSnapshotVersion(dt.min()):y.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(y.resumeToken,r)),a=a.insert(b,k),(function(j,N,U){return j.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=xI?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(x,k,y)&&h.push(n.Pi.updateTargetData(l,k))}));let m=Ui(),p=It();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(l,y))})),h.push(CI(l,u,e.documentUpdates).next((y=>{m=y.ks,p=y.qs}))),!r.isEqual(dt.min())){const y=n.Pi.getLastRemoteSnapshotVersion(l).next((b=>n.Pi.setTargetsMetadata(l,l.currentSequenceNumber,r)));h.push(y)}return we.waitFor(h).next((()=>u.apply(l))).next((()=>n.localDocuments.getLocalViewOfDocuments(l,m,p))).next((()=>m))})).then((l=>(n.Ms=a,l)))}function CI(t,e,n){let r=It(),a=It();return n.forEach((l=>r=r.add(l))),e.getEntries(t,r).next((l=>{let u=Ui();return n.forEach(((h,m)=>{const p=l.get(h);m.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(h)),m.isNoDocument()&&m.version.isEqual(dt.min())?(e.removeEntry(h,m.readTime),u=u.insert(h,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),u=u.insert(h,m)):Fe(Vy,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",m.version)})),{ks:u,qs:a}}))}function TI(t,e){const n=mt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Ty),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function kI(t,e){const n=mt(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return n.Pi.getTargetData(r,e).next((l=>l?(a=l,we.resolve(a)):n.Pi.allocateTargetId(r).next((u=>(a=new ja(e,u,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=n.Ms.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Nv(t,e,n){const r=mt(t),a=r.Ms.get(e),l=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",l,(u=>r.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!Tc(u))throw u;Fe(Vy,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ms=r.Ms.remove(e),r.xs.delete(a.target)}function L4(t,e,n){const r=mt(t);let a=dt.min(),l=It();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(m,p,y){const b=mt(m),x=b.xs.get(y);return x!==void 0?we.resolve(b.Ms.get(x)):b.Pi.getTargetData(p,y)})(r,u,Xs(e)).next((h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(u,h.targetId).next((m=>{l=m}))})).next((()=>r.Fs.getDocumentsMatchingQuery(u,e,n?a:dt.min(),n?l:It()))).next((h=>(NI(r,m8(e),h),{documents:h,Qs:l})))))}function NI(t,e,n){let r=t.Os.get(e)||dt.min();n.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),t.Os.set(e,r)}class V4{constructor(){this.activeTargetIds=x8()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class AI{constructor(){this.Mo=new V4,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new V4,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class RI{Oo(e){}shutdown(){}}const z4="ConnectivityMonitor";class U4{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Fe(z4,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Fe(z4,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let mf=null;function Av(){return mf===null?mf=(function(){return 268435456+Math.round(2147483648*Math.random())})():mf++,"0x"+mf.toString(16)}const M0="RestConnection",jI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class II{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${a}`,this.Wo=this.databaseId.database===om?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Go(e,n,r,a,l){const u=Av(),h=this.zo(e,n.toUriEncodedString());Fe(M0,`Sending RPC '${e}' ${u}:`,h,r);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,l);const{host:p}=new URL(h),y=$o(p);return this.Jo(e,h,m,r,y).then((b=>(Fe(M0,`Received RPC '${e}' ${u}: `,b),b)),(b=>{throw ac(M0,`RPC '${e}' ${u} failed with error: `,b,"url: ",h,"request:",r),b}))}Ho(e,n,r,a,l,u){return this.Go(e,n,r,a,l)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ec})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}zo(e,n){const r=jI[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class DI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const lr="WebChannelConnection";class MI extends II{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,a,l){const u=Av();return new Promise(((h,m)=>{const p=new XE;p.setWithCredentials(!0),p.listenOnce(WE.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case If.NO_ERROR:const b=p.getResponseJson();Fe(lr,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(b)),h(b);break;case If.TIMEOUT:Fe(lr,`RPC '${e}' ${u} timed out`),m(new Oe(fe.DEADLINE_EXCEEDED,"Request time out"));break;case If.HTTP_ERROR:const x=p.getStatus();if(Fe(lr,`RPC '${e}' ${u} failed with status:`,x,"response text:",p.getResponseText()),x>0){let k=p.getResponseJson();Array.isArray(k)&&(k=k[0]);const R=k?.error;if(R&&R.status&&R.message){const j=(function(U){const $=U.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf($)>=0?$:fe.UNKNOWN})(R.status);m(new Oe(j,R.message))}else m(new Oe(fe.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new Oe(fe.UNAVAILABLE,"Connection failed."));break;default:lt(9055,{l_:e,streamId:u,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{Fe(lr,`RPC '${e}' ${u} completed.`)}}));const y=JSON.stringify(a);Fe(lr,`RPC '${e}' ${u} sending request:`,a),p.send(n,"POST",y,r,15)}))}T_(e,n,r){const a=Av(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=eC(),h=ZE(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,n,r),m.encodeInitMessageHeaders=!0;const y=l.join("");Fe(lr,`Creating RPC '${e}' stream ${a}: ${y}`,m);const b=u.createWebChannel(y,m);this.I_(b);let x=!1,k=!1;const R=new DI({Yo:N=>{k?Fe(lr,`Not sending because RPC '${e}' stream ${a} is closed:`,N):(x||(Fe(lr,`Opening RPC '${e}' stream ${a} transport.`),b.open(),x=!0),Fe(lr,`RPC '${e}' stream ${a} sending:`,N),b.send(N))},Zo:()=>b.close()}),j=(N,U,$)=>{N.listen(U,(I=>{try{$(I)}catch(O){setTimeout((()=>{throw O}),0)}}))};return j(b,Bu.EventType.OPEN,(()=>{k||(Fe(lr,`RPC '${e}' stream ${a} transport opened.`),R.o_())})),j(b,Bu.EventType.CLOSE,(()=>{k||(k=!0,Fe(lr,`RPC '${e}' stream ${a} transport closed`),R.a_(),this.E_(b))})),j(b,Bu.EventType.ERROR,(N=>{k||(k=!0,ac(lr,`RPC '${e}' stream ${a} transport errored. Name:`,N.name,"Message:",N.message),R.a_(new Oe(fe.UNAVAILABLE,"The operation could not be completed")))})),j(b,Bu.EventType.MESSAGE,(N=>{if(!k){const U=N.data[0];qt(!!U,16349);const $=U,I=$?.error||$[0]?.error;if(I){Fe(lr,`RPC '${e}' stream ${a} received error:`,I);const O=I.status;let B=(function(E){const A=jn[E];if(A!==void 0)return MC(A)})(O),q=I.message;B===void 0&&(B=fe.INTERNAL,q="Unknown error status: "+O+" with message "+I.message),k=!0,R.a_(new Oe(B,q)),b.close()}else Fe(lr,`RPC '${e}' stream ${a} received:`,U),R.u_(U)}})),j(h,JE.STAT_EVENT,(N=>{N.stat===vv.PROXY?Fe(lr,`RPC '${e}' stream ${a} detected buffering proxy`):N.stat===vv.NOPROXY&&Fe(lr,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{R.__()}),0),R}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function P0(){return typeof document<"u"?document:null}function Jm(t){return new V8(t,!0)}class KC{constructor(e,n,r=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,n-r);a>0&&Fe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const B4="PersistentStream";class QC{constructor(e,n,r,a,l,u,h,m){this.Mi=e,this.S_=r,this.b_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new KC(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===fe.RESOURCE_EXHAUSTED?(zi(n.toString()),zi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===fe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===n&&this.G_(r,a)}),(r=>{e((()=>{const a=new Oe(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Fe(B4,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Fe(B4,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class PI extends QC{constructor(e,n,r,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,a,u),this.serializer=l}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=B8(this.serializer,e),r=(function(l){if(!("targetChange"in l))return dt.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?dt.min():u.readTime?Ws(u.readTime):dt.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=kv(this.serializer),n.addTarget=(function(l,u){let h;const m=u.target;if(h=wv(m)?{documents:H8(l,m)}:{query:q8(l,m).ft},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=LC(l,u.resumeToken);const p=Ev(l,u.expectedCount);p!==null&&(h.expectedCount=p)}else if(u.snapshotVersion.compareTo(dt.min())>0){h.readTime=dm(l,u.snapshotVersion.toTimestamp());const p=Ev(l,u.expectedCount);p!==null&&(h.expectedCount=p)}return h})(this.serializer,e);const r=Y8(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=kv(this.serializer),n.removeTarget=e,this.q_(n)}}class OI extends QC{constructor(e,n,r,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,a,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return qt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,qt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){qt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=$8(e.writeResults,e.commitTime),r=Ws(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=kv(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>F8(this.serializer,r)))};this.q_(n)}}class LI{}class VI extends LI{constructor(e,n,r,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Oe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Go(e,Cv(n,r),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Oe(fe.UNKNOWN,l.toString())}))}Ho(e,n,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Ho(e,Cv(n,r),a,u,h,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Oe(fe.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class zI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(zi(n),this.aa=!1):Fe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const zo="RemoteStore";class UI{constructor(e,n,r,a,l){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((u=>{r.enqueueAndForget((async()=>{Ko(this)&&(Fe(zo,"Restarting streams for network reachability change."),await(async function(m){const p=mt(m);p.Ea.add(4),await Ad(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Zm(p)})(this))}))})),this.Ra=new zI(r,a)}}async function Zm(t){if(Ko(t))for(const e of t.da)await e(!0)}async function Ad(t){for(const e of t.da)await e(!1)}function XC(t,e){const n=mt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Fy(n)?By(n):kc(n).O_()&&Uy(n,e))}function zy(t,e){const n=mt(t),r=kc(n);n.Ia.delete(e),r.O_()&&WC(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ko(n)&&n.Ra.set("Unknown"))}function Uy(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(dt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}kc(t).Y_(e)}function WC(t,e){t.Va.Ue(e),kc(t).Z_(e)}function By(t){t.Va=new M8({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),kc(t).start(),t.Ra.ua()}function Fy(t){return Ko(t)&&!kc(t).x_()&&t.Ia.size>0}function Ko(t){return mt(t).Ea.size===0}function JC(t){t.Va=void 0}async function BI(t){t.Ra.set("Online")}async function FI(t){t.Ia.forEach(((e,n)=>{Uy(t,e)}))}async function $I(t,e){JC(t),Fy(t)?(t.Ra.ha(e),By(t)):t.Ra.set("Unknown")}async function HI(t,e,n){if(t.Ra.set("Online"),e instanceof OC&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const h of l.targetIds)a.Ia.has(h)&&(await a.remoteSyncer.rejectListen(h,u),a.Ia.delete(h),a.Va.removeTarget(h))})(t,e)}catch(r){Fe(zo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await fm(t,r)}else if(e instanceof Of?t.Va.Ze(e):e instanceof PC?t.Va.st(e):t.Va.tt(e),!n.isEqual(dt.min()))try{const r=await YC(t.localStore);n.compareTo(r)>=0&&await(function(l,u){const h=l.Va.Tt(u);return h.targetChanges.forEach(((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const y=l.Ia.get(p);y&&l.Ia.set(p,y.withResumeToken(m.resumeToken,u))}})),h.targetMismatches.forEach(((m,p)=>{const y=l.Ia.get(m);if(!y)return;l.Ia.set(m,y.withResumeToken(ir.EMPTY_BYTE_STRING,y.snapshotVersion)),WC(l,m);const b=new ja(y.target,m,p,y.sequenceNumber);Uy(l,b)})),l.remoteSyncer.applyRemoteEvent(h)})(t,n)}catch(r){Fe(zo,"Failed to raise snapshot:",r),await fm(t,r)}}async function fm(t,e,n){if(!Tc(e))throw e;t.Ea.add(1),await Ad(t),t.Ra.set("Offline"),n||(n=()=>YC(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Fe(zo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Zm(t)}))}function ZC(t,e){return e().catch((n=>fm(t,n,e)))}async function ep(t){const e=mt(t),n=Ha(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ty;for(;qI(e);)try{const a=await TI(e.localStore,r);if(a===null){e.Ta.length===0&&n.L_();break}r=a.batchId,GI(e,a)}catch(a){await fm(e,a)}eT(e)&&tT(e)}function qI(t){return Ko(t)&&t.Ta.length<10}function GI(t,e){t.Ta.push(e);const n=Ha(t);n.O_()&&n.X_&&n.ea(e.mutations)}function eT(t){return Ko(t)&&!Ha(t).x_()&&t.Ta.length>0}function tT(t){Ha(t).start()}async function YI(t){Ha(t).ra()}async function KI(t){const e=Ha(t);for(const n of t.Ta)e.ea(n.mutations)}async function QI(t,e,n){const r=t.Ta.shift(),a=Iy.from(r,e,n);await ZC(t,(()=>t.remoteSyncer.applySuccessfulWrite(a))),await ep(t)}async function XI(t,e){e&&Ha(t).X_&&await(async function(r,a){if((function(u){return j8(u)&&u!==fe.ABORTED})(a.code)){const l=r.Ta.shift();Ha(r).B_(),await ZC(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await ep(r)}})(t,e),eT(t)&&tT(t)}async function F4(t,e){const n=mt(t);n.asyncQueue.verifyOperationInProgress(),Fe(zo,"RemoteStore received new credentials");const r=Ko(n);n.Ea.add(3),await Ad(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Zm(n)}async function WI(t,e){const n=mt(t);e?(n.Ea.delete(2),await Zm(n)):e||(n.Ea.add(2),await Ad(n),n.Ra.set("Unknown"))}function kc(t){return t.ma||(t.ma=(function(n,r,a){const l=mt(n);return l.sa(),new PI(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(t.datastore,t.asyncQueue,{Xo:BI.bind(null,t),t_:FI.bind(null,t),r_:$I.bind(null,t),H_:HI.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),Fy(t)?By(t):t.Ra.set("Unknown")):(await t.ma.stop(),JC(t))}))),t.ma}function Ha(t){return t.fa||(t.fa=(function(n,r,a){const l=mt(n);return l.sa(),new OI(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:YI.bind(null,t),r_:XI.bind(null,t),ta:KI.bind(null,t),na:QI.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await ep(t)):(await t.fa.stop(),t.Ta.length>0&&(Fe(zo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class $y{constructor(e,n,r,a,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,a,l){const u=Date.now()+r,h=new $y(e,n,u,a,l);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Oe(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hy(t,e){if(zi("AsyncQueue",`${e}: ${t}`),Tc(t))return new Oe(fe.UNAVAILABLE,`${e}: ${t}`);throw t}class ec{static emptySet(e){return new ec(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||We.comparator(n.key,r.key):(n,r)=>We.comparator(n.key,r.key),this.keyedMap=Fu(),this.sortedSet=new hn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ec)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ec;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class $4{constructor(){this.ga=new hn(We.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):lt(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class mc{constructor(e,n,r,a,l,u,h,m,p){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,n,r,a,l){const u=[];return n.forEach((h=>{u.push({type:0,doc:h})})),new mc(e,n,ec.emptySet(n),u,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==r[a].type||!n[a].doc.isEqual(r[a].doc))return!1;return!0}}class JI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class ZI{constructor(){this.queries=H4(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const a=mt(n),l=a.queries;a.queries=H4(),l.forEach(((u,h)=>{for(const m of h.Sa)m.onError(r)}))})(this,new Oe(fe.ABORTED,"Firestore shutting down"))}}function H4(){return new Yo((t=>_C(t)),qm)}async function qy(t,e){const n=mt(t);let r=3;const a=e.query;let l=n.queries.get(a);l?!l.ba()&&e.Da()&&(r=2):(l=new JI,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await n.onListen(a,!0);break;case 1:l.wa=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(u){const h=Hy(u,`Initialization of query '${Hl(e.query)}' failed`);return void e.onError(h)}n.queries.set(a,l),l.Sa.push(e),e.va(n.onlineState),l.wa&&e.Fa(l.wa)&&Yy(n)}async function Gy(t,e){const n=mt(t),r=e.query;let a=3;const l=n.queries.get(r);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function eD(t,e){const n=mt(t);let r=!1;for(const a of e){const l=a.query,u=n.queries.get(l);if(u){for(const h of u.Sa)h.Fa(a)&&(r=!0);u.wa=a}}r&&Yy(n)}function tD(t,e,n){const r=mt(t),a=r.queries.get(e);if(a)for(const l of a.Sa)l.onError(n);r.queries.delete(e)}function Yy(t){t.Ca.forEach((e=>{e.next()}))}var Rv,q4;(q4=Rv||(Rv={})).Ma="default",q4.Cache="cache";class Ky{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new mc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=mc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Rv.Cache}}class nT{constructor(e){this.key=e}}class rT{constructor(e){this.key=e}}class nD{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=It(),this.mutatedKeys=It(),this.eu=wC(e),this.tu=new ec(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new $4,a=n?n.tu:this.tu;let l=n?n.mutatedKeys:this.mutatedKeys,u=a,h=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((y,b)=>{const x=a.get(y),k=Gm(this.query,b)?b:null,R=!!x&&this.mutatedKeys.has(x.key),j=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let N=!1;x&&k?x.data.isEqual(k.data)?R!==j&&(r.track({type:3,doc:k}),N=!0):this.su(x,k)||(r.track({type:2,doc:k}),N=!0,(m&&this.eu(k,m)>0||p&&this.eu(k,p)<0)&&(h=!0)):!x&&k?(r.track({type:0,doc:k}),N=!0):x&&!k&&(r.track({type:1,doc:x}),N=!0,(m||p)&&(h=!0)),N&&(k?(u=u.add(k),l=j?l.add(y):l.delete(y)):(u=u.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),l=l.delete(y.key),r.track({type:1,doc:y})}return{tu:u,iu:r,Cs:h,mutatedKeys:l}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((y,b)=>(function(k,R){const j=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt(20277,{Rt:N})}};return j(k)-j(R)})(y.type,b.type)||this.eu(y.doc,b.doc))),this.ou(r),a=a??!1;const h=n&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,p=m!==this.Za;return this.Za=m,u.length!==0||p?{snapshot:new mc(this.query,e.tu,l,u,e.mutatedKeys,m===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new $4,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=It(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new rT(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new nT(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=It();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return mc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Qy="SyncEngine";class rD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class sD{constructor(e){this.key=e,this.hu=!1}}class iD{constructor(e,n,r,a,l,u){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Yo((h=>_C(h)),qm),this.Iu=new Map,this.Eu=new Set,this.du=new hn(We.comparator),this.Au=new Map,this.Ru=new Py,this.Vu={},this.mu=new Map,this.fu=fc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function aD(t,e,n=!0){const r=cT(t);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await sT(r,e,n,!0),a}async function oD(t,e){const n=cT(t);await sT(n,e,!0,!1)}async function sT(t,e,n,r){const a=await kI(t.localStore,Xs(e)),l=a.targetId,u=t.sharedClientState.addLocalQueryTarget(l,n);let h;return r&&(h=await lD(t,e,l,u==="current",a.resumeToken)),t.isPrimaryClient&&n&&XC(t.remoteStore,a),h}async function lD(t,e,n,r,a){t.pu=(b,x,k)=>(async function(j,N,U,$){let I=N.view.ru(U);I.Cs&&(I=await L4(j.localStore,N.query,!1).then((({documents:w})=>N.view.ru(w,I))));const O=$&&$.targetChanges.get(N.targetId),B=$&&$.targetMismatches.get(N.targetId)!=null,q=N.view.applyChanges(I,j.isPrimaryClient,O,B);return Y4(j,N.targetId,q.au),q.snapshot})(t,b,x,k);const l=await L4(t.localStore,e,!0),u=new nD(e,l.Qs),h=u.ru(l.documents),m=Nd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",a),p=u.applyChanges(h,t.isPrimaryClient,m);Y4(t,n,p.au);const y=new rD(e,n,u);return t.Tu.set(e,y),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),p.snapshot}async function cD(t,e,n){const r=mt(t),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter((u=>!qm(u,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await Nv(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),n&&zy(r.remoteStore,a.targetId),jv(r,a.targetId)})).catch(Cc)):(jv(r,a.targetId),await Nv(r.localStore,a.targetId,!0))}async function uD(t,e){const n=mt(t),r=n.Tu.get(e),a=n.Iu.get(r.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),zy(n.remoteStore,r.targetId))}async function dD(t,e,n){const r=yD(t);try{const a=await(function(u,h){const m=mt(u),p=cn.now(),y=h.reduce(((k,R)=>k.add(R.key)),It());let b,x;return m.persistence.runTransaction("Locally write mutations","readwrite",(k=>{let R=Ui(),j=It();return m.Ns.getEntries(k,y).next((N=>{R=N,R.forEach(((U,$)=>{$.isValidDocument()||(j=j.add(U))}))})).next((()=>m.localDocuments.getOverlayedDocuments(k,R))).next((N=>{b=N;const U=[];for(const $ of h){const I=T8($,b.get($.key).overlayedDocument);I!=null&&U.push(new Xa($.key,I,mC(I.value.mapValue),yr.exists(!0)))}return m.mutationQueue.addMutationBatch(k,p,U,h)})).next((N=>{x=N;const U=N.applyToLocalDocumentSet(b,j);return m.documentOverlayCache.saveOverlays(k,N.batchId,U)}))})).then((()=>({batchId:x.batchId,changes:EC(b)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(u,h,m){let p=u.Vu[u.currentUser.toKey()];p||(p=new hn(jt)),p=p.insert(h,m),u.Vu[u.currentUser.toKey()]=p})(r,a.batchId,n),await Rd(r,a.changes),await ep(r.remoteStore)}catch(a){const l=Hy(a,"Failed to persist write");n.reject(l)}}async function iT(t,e){const n=mt(t);try{const r=await EI(n.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=n.Au.get(l);u&&(qt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?qt(u.hu,14607):a.removedDocuments.size>0&&(qt(u.hu,42227),u.hu=!1))})),await Rd(n,r,e)}catch(r){await Cc(r)}}function G4(t,e,n){const r=mt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const a=[];r.Tu.forEach(((l,u)=>{const h=u.view.va(e);h.snapshot&&a.push(h.snapshot)})),(function(u,h){const m=mt(u);m.onlineState=h;let p=!1;m.queries.forEach(((y,b)=>{for(const x of b.Sa)x.va(h)&&(p=!0)})),p&&Yy(m)})(r.eventManager,e),a.length&&r.Pu.H_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function hD(t,e,n){const r=mt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const a=r.Au.get(e),l=a&&a.key;if(l){let u=new hn(We.comparator);u=u.insert(l,dr.newNoDocument(l,dt.min()));const h=It().add(l),m=new Wm(dt.min(),new Map,new hn(jt),u,h);await iT(r,m),r.du=r.du.remove(l),r.Au.delete(e),Xy(r)}else await Nv(r.localStore,e,!1).then((()=>jv(r,e,n))).catch(Cc)}async function fD(t,e){const n=mt(t),r=e.batch.batchId;try{const a=await SI(n.localStore,e);oT(n,r,null),aT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Rd(n,a)}catch(a){await Cc(a)}}async function mD(t,e,n){const r=mt(t);try{const a=await(function(u,h){const m=mt(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let y;return m.mutationQueue.lookupMutationBatch(p,h).next((b=>(qt(b!==null,37113),y=b.keys(),m.mutationQueue.removeMutationBatch(p,b)))).next((()=>m.mutationQueue.performConsistencyCheck(p))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(p,y,h))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y))).next((()=>m.localDocuments.getDocuments(p,y)))}))})(r.localStore,e);oT(r,e,n),aT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Rd(r,a)}catch(a){await Cc(a)}}function aT(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function oT(t,e,n){const r=mt(t);let a=r.Vu[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(n?l.reject(n):l.resolve(),a=a.remove(e)),r.Vu[r.currentUser.toKey()]=a}}function jv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||lT(t,r)}))}function lT(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(zy(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Xy(t))}function Y4(t,e,n){for(const r of n)r instanceof nT?(t.Ru.addReference(r.key,e),pD(t,r)):r instanceof rT?(Fe(Qy,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||lT(t,r.key)):lt(19791,{wu:r})}function pD(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Fe(Qy,"New document in limbo: "+n),t.Eu.add(r),Xy(t))}function Xy(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new We(tn.fromString(e)),r=t.fu.next();t.Au.set(r,new sD(n)),t.du=t.du.insert(n,r),XC(t.remoteStore,new ja(Xs(Hm(n.path)),r,"TargetPurposeLimboResolution",Um.ce))}}async function Rd(t,e,n){const r=mt(t),a=[],l=[],u=[];r.Tu.isEmpty()||(r.Tu.forEach(((h,m)=>{u.push(r.pu(m,e,n).then((p=>{if((p||n)&&r.isPrimaryClient){const y=p?!p.fromCache:n?.targetChanges.get(m.targetId)?.current;r.sharedClientState.updateQueryState(m.targetId,y?"current":"not-current")}if(p){a.push(p);const y=Ly.As(m.targetId,p);l.push(y)}})))})),await Promise.all(u),r.Pu.H_(a),await(async function(m,p){const y=mt(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>we.forEach(p,(x=>we.forEach(x.Es,(k=>y.persistence.referenceDelegate.addReference(b,x.targetId,k))).next((()=>we.forEach(x.ds,(k=>y.persistence.referenceDelegate.removeReference(b,x.targetId,k)))))))))}catch(b){if(!Tc(b))throw b;Fe(Vy,"Failed to update sequence numbers: "+b)}for(const b of p){const x=b.targetId;if(!b.fromCache){const k=y.Ms.get(x),R=k.snapshotVersion,j=k.withLastLimboFreeSnapshotVersion(R);y.Ms=y.Ms.insert(x,j)}}})(r.localStore,l))}async function gD(t,e){const n=mt(t);if(!n.currentUser.isEqual(e)){Fe(Qy,"User change. New user:",e.toKey());const r=await GC(n.localStore,e);n.currentUser=e,(function(l,u){l.mu.forEach((h=>{h.forEach((m=>{m.reject(new Oe(fe.CANCELLED,u))}))})),l.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Rd(n,r.Ls)}}function vD(t,e){const n=mt(t),r=n.Au.get(e);if(r&&r.hu)return It().add(r.key);{let a=It();const l=n.Iu.get(e);if(!l)return a;for(const u of l){const h=n.Tu.get(u);a=a.unionWith(h.view.nu)}return a}}function cT(t){const e=mt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=iT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hD.bind(null,e),e.Pu.H_=eD.bind(null,e.eventManager),e.Pu.yu=tD.bind(null,e.eventManager),e}function yD(t){const e=mt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mD.bind(null,e),e}class mm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Jm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return wI(this.persistence,new bI,e.initialUser,this.serializer)}Cu(e){return new qC(Oy.mi,this.serializer)}Du(e){return new AI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mm.provider={build:()=>new mm};class bD extends mm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){qt(this.persistence.referenceDelegate instanceof hm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new sI(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ar.withCacheSize(this.cacheSizeBytes):Ar.DEFAULT;return new qC((r=>hm.mi(r,n)),this.serializer)}}class Iv{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>G4(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=gD.bind(null,this.syncEngine),await WI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ZI})()}createDatastore(e){const n=Jm(e.databaseInfo.databaseId),r=(function(l){return new MI(l)})(e.databaseInfo);return(function(l,u,h,m){return new VI(l,u,h,m)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,a,l,u,h){return new UI(r,a,l,u,h)})(this.localStore,this.datastore,e.asyncQueue,(n=>G4(this.syncEngine,n,0)),(function(){return U4.v()?new U4:new RI})())}createSyncEngine(e,n){return(function(a,l,u,h,m,p,y){const b=new iD(a,l,u,h,m,p);return y&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=mt(n);Fe(zo,"RemoteStore shutting down."),r.Ea.add(5),await Ad(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Iv.provider={build:()=>new Iv};class Wy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):zi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const qa="FirestoreClient";class xD{constructor(e,n,r,a,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=a,this.user=cr.UNAUTHENTICATED,this.clientId=Cy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async u=>{Fe(qa,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(Fe(qa,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Hy(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function O0(t,e){t.asyncQueue.verifyOperationInProgress(),Fe(qa,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async a=>{r.isEqual(a)||(await GC(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function K4(t,e){t.asyncQueue.verifyOperationInProgress();const n=await _D(t);Fe(qa,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>F4(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,a)=>F4(e.remoteStore,a))),t._onlineComponents=e}async function _D(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Fe(qa,"Using user provided OfflineComponentProvider");try{await O0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(a){return a.name==="FirebaseError"?a.code===fe.FAILED_PRECONDITION||a.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(n))throw n;ac("Error using user provided cache. Falling back to memory cache: "+n),await O0(t,new mm)}}else Fe(qa,"Using default OfflineComponentProvider"),await O0(t,new bD(void 0));return t._offlineComponents}async function uT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Fe(qa,"Using user provided OnlineComponentProvider"),await K4(t,t._uninitializedComponentsProvider._online)):(Fe(qa,"Using default OnlineComponentProvider"),await K4(t,new Iv))),t._onlineComponents}function wD(t){return uT(t).then((e=>e.syncEngine))}async function pm(t){const e=await uT(t),n=e.eventManager;return n.onListen=aD.bind(null,e.syncEngine),n.onUnlisten=cD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=oD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=uD.bind(null,e.syncEngine),n}function SD(t,e,n={}){const r=new Mi;return t.asyncQueue.enqueueAndForget((async()=>(function(l,u,h,m,p){const y=new Wy({next:x=>{y.Nu(),u.enqueueAndForget((()=>Gy(l,b)));const k=x.docs.has(h);!k&&x.fromCache?p.reject(new Oe(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&x.fromCache&&m&&m.source==="server"?p.reject(new Oe(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(x)},error:x=>p.reject(x)}),b=new Ky(Hm(h.path),y,{includeMetadataChanges:!0,qa:!0});return qy(l,b)})(await pm(t),t.asyncQueue,e,n,r))),r.promise}function ED(t,e,n={}){const r=new Mi;return t.asyncQueue.enqueueAndForget((async()=>(function(l,u,h,m,p){const y=new Wy({next:x=>{y.Nu(),u.enqueueAndForget((()=>Gy(l,b))),x.fromCache&&m.source==="server"?p.reject(new Oe(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(x)},error:x=>p.reject(x)}),b=new Ky(h,y,{includeMetadataChanges:!0,qa:!0});return qy(l,b)})(await pm(t),t.asyncQueue,e,n,r))),r.promise}function dT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const Q4=new Map;const hT="firestore.googleapis.com",X4=!0;class W4{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Oe(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hT,this.ssl=X4}else this.host=e.host,this.ssl=e.ssl??X4;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=HC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nI)throw new Oe(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}U9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Oe(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Oe(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Oe(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tp{constructor(e,n,r,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new W4({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Oe(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Oe(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new W4(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new R9;switch(r.type){case"firstParty":return new M9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Oe(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Q4.get(n);r&&(Fe("ComponentProvider","Removing Datastore"),Q4.delete(n),r.terminate())})(this),Promise.resolve()}}function CD(t,e,n,r={}){t=vr(t,tp);const a=$o(e),l=t._getSettings(),u={...l,emulatorOptions:t._getEmulatorOptions()},h=`${e}:${n}`;a&&(dy(`https://${h}`),hy("Firestore",!0)),l.host!==hT&&l.host!==h&&ac("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:h,ssl:a,emulatorOptions:r};if(!Oi(m,u)&&(t._setSettings(m),r.mockUserToken)){let p,y;if(typeof r.mockUserToken=="string")p=r.mockUserToken,y=cr.MOCK_USER;else{p=aE(r.mockUserToken,t._app?.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new Oe(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new cr(b)}t._authCredentials=new j9(new nC(p,y))}}class ii{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ii(this.firestore,e,this._query)}}class gn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new La(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gn(this.firestore,e,this._key)}toJSON(){return{type:gn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Td(n,gn._jsonSchema))return new gn(e,r||null,new We(tn.fromString(n.referencePath)))}}gn._jsonSchemaVersion="firestore/documentReference/1.0",gn._jsonSchema={type:On("string",gn._jsonSchemaVersion),referencePath:On("string")};class La extends ii{constructor(e,n,r){super(e,n,Hm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gn(this.firestore,null,new We(e))}withConverter(e){return new La(this.firestore,e,this._path)}}function wt(t,e,...n){if(t=rn(t),rC("collection","path",e),t instanceof tp){const r=tn.fromString(e,...n);return d4(r),new La(t,null,r)}{if(!(t instanceof gn||t instanceof La))throw new Oe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(tn.fromString(e,...n));return d4(r),new La(t.firestore,null,r)}}function Ae(t,e,...n){if(t=rn(t),arguments.length===1&&(e=Cy.newId()),rC("doc","path",e),t instanceof tp){const r=tn.fromString(e,...n);return u4(r),new gn(t,null,new We(r))}{if(!(t instanceof gn||t instanceof La))throw new Oe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(tn.fromString(e,...n));return u4(r),new gn(t.firestore,t instanceof La?t.converter:null,new We(r))}}const J4="AsyncQueue";class Z4{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new KC(this,"async_queue_retry"),this._c=()=>{const r=P0();r&&Fe(J4,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=P0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=P0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Mi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Tc(e))throw e;Fe(J4,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,zi("INTERNAL UNHANDLED ERROR: ",ew(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const a=$y.createAndSchedule(this,e,n,r,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&lt(47125,{Pc:ew(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function ew(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function tw(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const a=n;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1})(t,["next","error","complete"])}class ti extends tp{constructor(e,n,r,a){super(e,n,r,a),this.type="firestore",this._queue=new Z4,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Z4(e),this._firestoreClient=void 0,await e}}}function TD(t,e){const n=typeof t=="object"?t:py(),r=typeof t=="string"?t:om,a=Pm(n,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=rE("firestore");l&&CD(a,...l)}return a}function jd(t){if(t._terminated)throw new Oe(fe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||kD(t),t._firestoreClient}function kD(t){const e=t._freezeSettings(),n=(function(a,l,u,h){return new J9(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,dT(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new xD(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(t._componentsProvider))}class os{constructor(e){this._byteString=e}static fromBase64String(e){try{return new os(ir.fromBase64String(e))}catch(n){throw new Oe(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new os(ir.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:os._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Td(e,os._jsonSchema))return os.fromBase64String(e.bytes)}}os._jsonSchemaVersion="firestore/bytes/1.0",os._jsonSchema={type:On("string",os._jsonSchemaVersion),bytes:On("string")};class Id{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Oe(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Qo{constructor(e){this._methodName=e}}class Js{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Oe(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Oe(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return jt(this._lat,e._lat)||jt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Js._jsonSchemaVersion}}static fromJSON(e){if(Td(e,Js._jsonSchema))return new Js(e.latitude,e.longitude)}}Js._jsonSchemaVersion="firestore/geoPoint/1.0",Js._jsonSchema={type:On("string",Js._jsonSchemaVersion),latitude:On("number"),longitude:On("number")};class Zs{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Zs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Td(e,Zs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Zs(e.vectorValues);throw new Oe(fe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zs._jsonSchemaVersion="firestore/vectorValue/1.0",Zs._jsonSchema={type:On("string",Zs._jsonSchemaVersion),vectorValues:On("object")};const ND=/^__.*__$/;class AD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Xa(e,this.data,this.fieldMask,n,this.fieldTransforms):new kd(e,this.data,n,this.fieldTransforms)}}class fT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Xa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function mT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt(40011,{Ac:t})}}class np{constructor(e,n,r,a,l,u){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new np({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return gm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(mT(this.Ac)&&ND.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class RD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Jm(e)}Cc(e,n,r,a=!1){return new np({Ac:e,methodName:n,Dc:r,path:sr.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nc(t){const e=t._freezeSettings(),n=Jm(t._databaseId);return new RD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Jy(t,e,n,r,a,l={}){const u=t.Cc(l.merge||l.mergeFields?2:0,e,n,a);r1("Data must be an object, but it was:",u,r);const h=bT(r,u);let m,p;if(l.merge)m=new Gr(u.fieldMask),p=u.fieldTransforms;else if(l.mergeFields){const y=[];for(const b of l.mergeFields){const x=Dv(e,b,n);if(!u.contains(x))throw new Oe(fe.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);_T(y,x)||y.push(x)}m=new Gr(y),p=u.fieldTransforms.filter((b=>m.covers(b.field)))}else m=null,p=u.fieldTransforms;return new AD(new jr(h),m,p)}class Dd extends Qo{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Dd}}function pT(t,e,n){return new np({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Zy extends Qo{_toFieldTransform(e){return new Km(e.path,new od)}isEqual(e){return e instanceof Zy}}class e1 extends Qo{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=pT(this,e,!0),r=this.vc.map((l=>Xo(l,n))),a=new dc(r);return new Km(e.path,a)}isEqual(e){return e instanceof e1&&Oi(this.vc,e.vc)}}class t1 extends Qo{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=pT(this,e,!0),r=this.vc.map((l=>Xo(l,n))),a=new hc(r);return new Km(e.path,a)}isEqual(e){return e instanceof t1&&Oi(this.vc,e.vc)}}class n1 extends Qo{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new ld(e.serializer,kC(e.serializer,this.Fc));return new Km(e.path,n)}isEqual(e){return e instanceof n1&&this.Fc===e.Fc}}function gT(t,e,n,r){const a=t.Cc(1,e,n);r1("Data must be an object, but it was:",a,r);const l=[],u=jr.empty();Qa(r,((m,p)=>{const y=s1(e,m,n);p=rn(p);const b=a.yc(y);if(p instanceof Dd)l.push(y);else{const x=Xo(p,b);x!=null&&(l.push(y),u.set(y,x))}}));const h=new Gr(l);return new fT(u,h,a.fieldTransforms)}function vT(t,e,n,r,a,l){const u=t.Cc(1,e,n),h=[Dv(e,r,n)],m=[a];if(l.length%2!=0)throw new Oe(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<l.length;x+=2)h.push(Dv(e,l[x])),m.push(l[x+1]);const p=[],y=jr.empty();for(let x=h.length-1;x>=0;--x)if(!_T(p,h[x])){const k=h[x];let R=m[x];R=rn(R);const j=u.yc(k);if(R instanceof Dd)p.push(k);else{const N=Xo(R,j);N!=null&&(p.push(k),y.set(k,N))}}const b=new Gr(p);return new fT(y,b,u.fieldTransforms)}function yT(t,e,n,r=!1){return Xo(n,t.Cc(r?4:3,e))}function Xo(t,e){if(xT(t=rn(t)))return r1("Unsupported field value:",e,t),bT(t,e);if(t instanceof Qo)return(function(r,a){if(!mT(a.Ac))throw a.Sc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,a){const l=[];let u=0;for(const h of r){let m=Xo(h,a.wc(u));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),u++}return{arrayValue:{values:l}}})(t,e)}return(function(r,a){if((r=rn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return kC(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=cn.fromDate(r);return{timestampValue:dm(a.serializer,l)}}if(r instanceof cn){const l=new cn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:dm(a.serializer,l)}}if(r instanceof Js)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof os)return{bytesValue:LC(a.serializer,r._byteString)};if(r instanceof gn){const l=a.databaseId,u=r.firestore._databaseId;if(!u.isEqual(l))throw a.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:My(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Zs)return(function(u,h){return{mapValue:{fields:{[hC]:{stringValue:fC},[lm]:{arrayValue:{values:u.toArray().map((p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return jy(h.serializer,p)}))}}}}}})(r,a);throw a.Sc(`Unsupported field value: ${zm(r)}`)})(t,e)}function bT(t,e){const n={};return aC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qa(t,((r,a)=>{const l=Xo(a,e.mc(r));l!=null&&(n[r]=l)})),{mapValue:{fields:n}}}function xT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof cn||t instanceof Js||t instanceof os||t instanceof gn||t instanceof Qo||t instanceof Zs)}function r1(t,e,n){if(!xT(n)||!sC(n)){const r=zm(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Dv(t,e,n){if((e=rn(e))instanceof Id)return e._internalPath;if(typeof e=="string")return s1(t,e);throw gm("Field path arguments must be of type string or ",t,!1,void 0,n)}const jD=new RegExp("[~\\*/\\[\\]]");function s1(t,e,n){if(e.search(jD)>=0)throw gm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Id(...e.split("."))._internalPath}catch{throw gm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function gm(t,e,n,r,a){const l=r&&!r.isEmpty(),u=a!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(l||u)&&(m+=" (found",l&&(m+=` in field ${r}`),u&&(m+=` in document ${a}`),m+=")"),new Oe(fe.INVALID_ARGUMENT,h+t+m)}function _T(t,e){return t.some((n=>n.isEqual(e)))}class i1{constructor(e,n,r,a,l){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ID(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(rp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ID extends i1{data(){return super.data()}}function rp(t,e){return typeof e=="string"?s1(t,e):e instanceof Id?e._internalPath:e._delegate._internalPath}function wT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Oe(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class a1{}class sp extends a1{}function qr(t,e,...n){let r=[];e instanceof a1&&r.push(e),r=r.concat(n),(function(l){const u=l.filter((m=>m instanceof o1)).length,h=l.filter((m=>m instanceof ip)).length;if(u>1||u>0&&h>0)throw new Oe(fe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)t=a._apply(t);return t}class ip extends sp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ip(e,n,r)}_apply(e){const n=this._parse(e);return ST(e._query,n),new ii(e.firestore,e.converter,Sv(e._query,n))}_parse(e){const n=Nc(e.firestore);return(function(l,u,h,m,p,y,b){let x;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Oe(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){rw(b,y);const R=[];for(const j of b)R.push(nw(m,l,j));x={arrayValue:{values:R}}}else x=nw(m,l,b)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||rw(b,y),x=yT(h,u,b,y==="in"||y==="not-in");return Pn.create(p,y,x)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ta(t,e,n){const r=e,a=rp("where",t);return ip._create(a,r,n)}class o1 extends a1{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new o1(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Cs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(a,l){let u=a;const h=l.getFlattenedFilters();for(const m of h)ST(u,m),u=Sv(u,m)})(e._query,n),new ii(e.firestore,e.converter,Sv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class l1 extends sp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new l1(e,n)}_apply(e){const n=(function(a,l,u){if(a.startAt!==null)throw new Oe(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Oe(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ad(l,u)})(e._query,this._field,this._direction);return new ii(e.firestore,e.converter,(function(a,l){const u=a.explicitOrderBy.concat([l]);return new Go(a.path,a.collectionGroup,u,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,n))}}function vm(t,e="asc"){const n=e,r=rp("orderBy",t);return l1._create(r,n)}class c1 extends sp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new c1(e,n,r)}_apply(e){return new ii(e.firestore,e.converter,um(e._query,this._limit,this._limitType))}}function Mv(t){return B9("limit",t),c1._create("limit",t,"F")}class u1 extends sp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new u1(e,n,r)}_apply(e){const n=MD(e,this.type,this._docOrFields,this._inclusive);return new ii(e.firestore,e.converter,(function(a,l){return new Go(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)})(e._query,n))}}function DD(...t){return u1._create("startAfter",t,!1)}function MD(t,e,n,r){if(n[0]=rn(n[0]),n[0]instanceof i1)return(function(l,u,h,m,p){if(!m)throw new Oe(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const y=[];for(const b of Zl(l))if(b.field.isKeyField())y.push(cm(u,m.key));else{const x=m.data.field(b.field);if(Fm(x))throw new Oe(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(x===null){const k=b.field.canonicalString();throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${k}' (used as the orderBy) does not exist.`)}y.push(x)}return new uc(y,p)})(t._query,t.firestore._databaseId,e,n[0]._document,r);{const a=Nc(t.firestore);return(function(u,h,m,p,y,b){const x=u.explicitOrderBy;if(y.length>x.length)throw new Oe(fe.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const k=[];for(let R=0;R<y.length;R++){const j=y[R];if(x[R].field.isKeyField()){if(typeof j!="string")throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof j}`);if(!Ry(u)&&j.indexOf("/")!==-1)throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${j}' contains a slash.`);const N=u.path.child(tn.fromString(j));if(!We.isDocumentKey(N))throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);const U=new We(N);k.push(cm(h,U))}else{const N=yT(m,p,j);k.push(N)}}return new uc(k,b)})(t._query,t.firestore._databaseId,a,e,n,r)}}function nw(t,e,n){if(typeof(n=rn(n))=="string"){if(n==="")throw new Oe(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ry(e)&&n.indexOf("/")!==-1)throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(tn.fromString(n));if(!We.isDocumentKey(r))throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return cm(t,new We(r))}if(n instanceof gn)return cm(t,n._key);throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zm(n)}.`)}function rw(t,e){if(!Array.isArray(t)||t.length===0)throw new Oe(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ST(t,e){const n=(function(a,l){for(const u of a)for(const h of u.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null})(t.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Oe(fe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Oe(fe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class PD{convertValue(e,n="none"){switch($a(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Fa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw lt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Qa(e,((a,l)=>{r[a]=this.convertValue(l,n)})),r}convertVectorValue(e){const n=e.fields?.[lm].arrayValue?.values?.map((r=>wn(r.doubleValue)));return new Zs(n)}convertGeoPoint(e){return new Js(wn(e.latitude),wn(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=$m(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(rd(e));default:return null}}convertTimestamp(e){const n=Ba(e);return new cn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=tn.fromString(e);qt($C(r),9688,{name:e});const a=new sd(r.get(1),r.get(3)),l=new We(r.popFirst(5));return a.isEqual(n)||zi(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}function d1(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Hu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ro extends i1{constructor(e,n,r,a,l,u){super(e,n,r,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Lf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(rp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Oe(fe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ro._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ro._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ro._jsonSchema={type:On("string",Ro._jsonSchemaVersion),bundleSource:On("string","DocumentSnapshot"),bundleName:On("string"),bundle:On("string")};class Lf extends Ro{data(e={}){return super.data(e)}}class jo{constructor(e,n,r,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new Hu(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Lf(this._firestore,this._userDataWriter,r.key,r,new Hu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Oe(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((h=>{const m=new Lf(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Hu(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const m=new Lf(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Hu(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,y=-1;return h.type!==0&&(p=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),y=u.indexOf(h.doc.key)),{type:OD(h.type),doc:m,oldIndex:p,newIndex:y}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Oe(fe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=jo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Cy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(n.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function OD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt(61501,{type:t})}}function ap(t){t=vr(t,gn);const e=vr(t.firestore,ti);return SD(jd(e),t._key).then((n=>ET(e,t,n)))}jo._jsonSchemaVersion="firestore/querySnapshot/1.0",jo._jsonSchema={type:On("string",jo._jsonSchemaVersion),bundleSource:On("string","QuerySnapshot"),bundleName:On("string"),bundle:On("string")};class h1 extends PD{constructor(e){super(),this.firestore=e}convertBytes(e){return new os(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new gn(this.firestore,null,n)}}function Ga(t){t=vr(t,ii);const e=vr(t.firestore,ti),n=jd(e),r=new h1(e);return wT(t._query),ED(n,t._query).then((a=>new jo(e,r,t,a)))}function Rr(t,e,n){t=vr(t,gn);const r=vr(t.firestore,ti),a=d1(t.converter,e,n);return Md(r,[Jy(Nc(r),"setDoc",t._key,a,t.converter!==null,n).toMutation(t._key,yr.none())])}function rt(t,e,n,...r){t=vr(t,gn);const a=vr(t.firestore,ti),l=Nc(a);let u;return u=typeof(e=rn(e))=="string"||e instanceof Id?vT(l,"updateDoc",t._key,e,n,r):gT(l,"updateDoc",t._key,e),Md(a,[u.toMutation(t._key,yr.exists(!0))])}function Yr(t){return Md(vr(t.firestore,ti),[new Xm(t._key,yr.none())])}function Bn(t,e){const n=vr(t.firestore,ti),r=Ae(t),a=d1(t.converter,e);return Md(n,[Jy(Nc(t.firestore),"addDoc",r._key,a,t.converter!==null,{}).toMutation(r._key,yr.exists(!1))]).then((()=>r))}function gr(t,...e){t=rn(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||tw(e[r])||(n=e[r++]);const a={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(tw(e[r])){const m=e[r];e[r]=m.next?.bind(m),e[r+1]=m.error?.bind(m),e[r+2]=m.complete?.bind(m)}let l,u,h;if(t instanceof gn)u=vr(t.firestore,ti),h=Hm(t._key.path),l={next:m=>{e[r]&&e[r](ET(u,t,m))},error:e[r+1],complete:e[r+2]};else{const m=vr(t,ii);u=vr(m.firestore,ti),h=m._query;const p=new h1(u);l={next:y=>{e[r]&&e[r](new jo(u,p,m,y))},error:e[r+1],complete:e[r+2]},wT(t._query)}return(function(p,y,b,x){const k=new Wy(x),R=new Ky(y,k,b);return p.asyncQueue.enqueueAndForget((async()=>qy(await pm(p),R))),()=>{k.Nu(),p.asyncQueue.enqueueAndForget((async()=>Gy(await pm(p),R)))}})(jd(u),h,a,l)}function Md(t,e){return(function(r,a){const l=new Mi;return r.asyncQueue.enqueueAndForget((async()=>dD(await wD(r),a,l))),l.promise})(jd(t),e)}function ET(t,e,n){const r=n.docs.get(e._key),a=new h1(t);return new Ro(t,a,e._key,r,new Hu(n.hasPendingWrites,n.fromCache),e.converter)}class LD{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Nc(e)}set(e,n,r){this._verifyNotCommitted();const a=L0(e,this._firestore),l=d1(a.converter,n,r),u=Jy(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,r);return this._mutations.push(u.toMutation(a._key,yr.none())),this}update(e,n,r,...a){this._verifyNotCommitted();const l=L0(e,this._firestore);let u;return u=typeof(n=rn(n))=="string"||n instanceof Id?vT(this._dataReader,"WriteBatch.update",l._key,n,r,a):gT(this._dataReader,"WriteBatch.update",l._key,n),this._mutations.push(u.toMutation(l._key,yr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=L0(e,this._firestore);return this._mutations=this._mutations.concat(new Xm(n._key,yr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Oe(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function L0(t,e){if((t=rn(t)).firestore!==e)throw new Oe(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function sw(){return new Dd("deleteField")}function bt(){return new Zy("serverTimestamp")}function Pd(...t){return new e1("arrayUnion",t)}function cd(...t){return new t1("arrayRemove",t)}function Ai(t){return new n1("increment",t)}function iw(t){return jd(t=vr(t,ti)),new LD(t,(e=>Md(t,e)))}(function(e,n=!0){(function(a){Ec=a})(Ho),Po(new za("firestore",((r,{instanceIdentifier:a,options:l})=>{const u=r.getProvider("app").getImmediate(),h=new ti(new I9(r.getProvider("auth-internal")),new P9(u,r.getProvider("app-check-internal")),(function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Oe(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sd(p.options.projectId,y)})(u,a),u);return l={useFetchStreams:n,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),Ys(a4,o4,e),Ys(a4,o4,"esm2020")})();const CT="firebasestorage.googleapis.com",VD="storageBucket",zD=120*1e3,UD=600*1e3;class ai extends ri{constructor(e,n,r=0){super(V0(e),`Firebase Storage: ${n} (${V0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ai.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return V0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ni;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ni||(ni={}));function V0(t){return"storage/"+t}function BD(){const t="An unknown error occurred, please check the error payload for server response.";return new ai(ni.UNKNOWN,t)}function FD(){return new ai(ni.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function $D(){return new ai(ni.CANCELED,"User canceled the upload/download.")}function HD(t){return new ai(ni.INVALID_URL,"Invalid URL '"+t+"'.")}function qD(t){return new ai(ni.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function aw(t){return new ai(ni.INVALID_ARGUMENT,t)}function TT(){return new ai(ni.APP_DELETED,"The Firebase app was deleted.")}function GD(t){return new ai(ni.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class _s{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=_s.makeFromUrl(e,n)}catch{return new _s(e,"")}if(r.path==="")return r;throw qD(e)}static makeFromUrl(e,n){let r=null;const a="([A-Za-z0-9.\\-_]+)";function l(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const u="(/(.*))?$",h=new RegExp("^gs://"+a+u,"i"),m={bucket:1,path:3};function p(O){O.path_=decodeURIComponent(O.path)}const y="v[A-Za-z0-9_]+",b=n.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",k=new RegExp(`^https?://${b}/${y}/b/${a}/o${x}`,"i"),R={bucket:1,path:3},j=n===CT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,N="([^?#]*)",U=new RegExp(`^https?://${j}/${a}/${N}`,"i"),I=[{regex:h,indices:m,postModify:l},{regex:k,indices:R,postModify:p},{regex:U,indices:{bucket:1,path:2},postModify:p}];for(let O=0;O<I.length;O++){const B=I[O],q=B.regex.exec(e);if(q){const w=q[B.indices.bucket];let E=q[B.indices.path];E||(E=""),r=new _s(w,E),B.postModify(r);break}}if(r==null)throw HD(e);return r}}class YD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function KD(t,e,n){let r=1,a=null,l=null,u=!1,h=0;function m(){return h===2}let p=!1;function y(...N){p||(p=!0,e.apply(null,N))}function b(N){a=setTimeout(()=>{a=null,t(k,m())},N)}function x(){l&&clearTimeout(l)}function k(N,...U){if(p){x();return}if(N){x(),y.call(null,N,...U);return}if(m()||u){x(),y.call(null,N,...U);return}r<64&&(r*=2);let I;h===1?(h=2,I=0):I=(r+Math.random())*1e3,b(I)}let R=!1;function j(N){R||(R=!0,x(),!p&&(a!==null?(N||(h=2),clearTimeout(a),b(0)):N||(h=1)))}return b(0),l=setTimeout(()=>{u=!0,j(!0)},n),j}function QD(t){t(!1)}function XD(t){return t!==void 0}function ow(t,e,n,r){if(r<e)throw aw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw aw(`Invalid value for '${t}'. Expected ${n} or less.`)}function WD(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const a=e(r)+"="+e(t[r]);n=n+a+"&"}return n=n.slice(0,-1),n}var ym;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ym||(ym={}));function JD(t,e){const n=t>=500&&t<600,a=[408,429].indexOf(t)!==-1,l=e.indexOf(t)!==-1;return n||a||l}class ZD{constructor(e,n,r,a,l,u,h,m,p,y,b,x=!0,k=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=m,this.timeout_=p,this.progressCallback_=y,this.connectionFactory_=b,this.retry=x,this.isUsingEmulator=k,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,j)=>{this.resolve_=R,this.reject_=j,this.start_()})}start_(){const e=(r,a)=>{if(a){r(!1,new pf(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const u=h=>{const m=h.loaded,p=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,p)};this.progressCallback_!==null&&l.addUploadProgressListener(u),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(u),this.pendingConnection_=null;const h=l.getErrorCode()===ym.NO_ERROR,m=l.getStatus();if(!h||JD(m,this.additionalRetryCodes_)&&this.retry){const y=l.getErrorCode()===ym.ABORT;r(!1,new pf(!1,null,y));return}const p=this.successCodes_.indexOf(m)!==-1;r(!0,new pf(p,l))})},n=(r,a)=>{const l=this.resolve_,u=this.reject_,h=a.connection;if(a.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());XD(m)?l(m):l()}catch(m){u(m)}else if(h!==null){const m=BD();m.serverResponse=h.getErrorText(),this.errorCallback_?u(this.errorCallback_(h,m)):u(m)}else if(a.canceled){const m=this.appDelete_?TT():$D();u(m)}else{const m=FD();u(m)}};this.canceled_?n(!1,new pf(!1,null,!0)):this.backoffId_=KD(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&QD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class pf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function eM(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function tM(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function nM(t,e){e&&(t["X-Firebase-GMPID"]=e)}function rM(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function sM(t,e,n,r,a,l,u=!0,h=!1){const m=WD(t.urlParams),p=t.url+m,y=Object.assign({},t.headers);return nM(y,e),eM(y,n),tM(y,l),rM(y,r),new ZD(p,t.method,y,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,a,u,h)}function iM(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function aM(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}class bm{constructor(e,n){this._service=e,n instanceof _s?this._location=n:this._location=_s.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new bm(e,n)}get root(){const e=new _s(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return aM(this._location.path)}get storage(){return this._service}get parent(){const e=iM(this._location.path);if(e===null)return null;const n=new _s(this._location.bucket,e);return new bm(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw GD(e)}}function lw(t,e){const n=e?.[VD];return n==null?null:_s.makeFromBucketSpec(n,t)}function oM(t,e,n,r={}){t.host=`${e}:${n}`;const a=$o(e);a&&(dy(`https://${t.host}/b`),hy("Storage",!0)),t._isUsingEmulator=!0,t._protocol=a?"https":"http";const{mockUserToken:l}=r;l&&(t._overrideAuthToken=typeof l=="string"?l:aE(l,t.app.options.projectId))}class lM{constructor(e,n,r,a,l,u=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=u,this._bucket=null,this._host=CT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=zD,this._maxUploadRetryTime=UD,this._requests=new Set,a!=null?this._bucket=_s.makeFromBucketSpec(a,this._host):this._bucket=lw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=_s.makeFromBucketSpec(this._url,e):this._bucket=lw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ow("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ow("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Hr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new bm(this,e)}_makeRequest(e,n,r,a,l=!0){if(this._deleted)return new YD(TT());{const u=sM(e,this._appId,r,a,n,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,n){const[r,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,a).getPromise()}}const cw="@firebase/storage",uw="0.14.0";const kT="storage";function cM(t=py(),e){t=rn(t);const r=Pm(t,kT).getImmediate({identifier:e}),a=rE("storage");return a&&uM(r,...a),r}function uM(t,e,n,r={}){oM(t,e,n,r)}function dM(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new lM(n,r,a,e,Ho)}function hM(){Po(new za(kT,dM,"PUBLIC").setMultipleInstances(!0)),Ys(cw,uw,""),Ys(cw,uw,"esm2020")}hM();const fM={apiKey:"AIzaSyAaaBO8Nw49Xsyo4QG1ropL0UYWeY2zrlU",authDomain:"meydan-academy.firebaseapp.com",projectId:"meydan-academy",storageBucket:"meydan-academy.firebasestorage.app",messagingSenderId:"267697346186",appId:"1:267697346186:web:d53b7d91fe0fabf8d37f73"},f1=cE(fM),Yl=N9(f1),he=TD(f1);cM(f1);const NT=T.createContext({}),Ln=()=>{const t=T.useContext(NT);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},mM=({children:t})=>{const[e,n]=T.useState(null),[r,a]=T.useState(null),[l,u]=T.useState(!0),h=async(R,j=!0)=>{if(R)try{await Rr(Ae(he,"users",R),{isOnline:j,lastSeen:bt()},{merge:!0})}catch(N){console.error("Presence update failed:",N)}};T.useEffect(()=>{let R=null;const j=gj(Yl,async N=>{R&&(R(),R=null),n(N),N?(R=gr(Ae(he,"users",N.uid),U=>{U.exists()&&a({id:U.id,...U.data()})},U=>console.error("[AuthContext] Profile listener error:",U)),h(N.uid).catch(()=>{}),u(!1)):(a(null),u(!1))});return()=>{j(),R&&R()}},[]);const k={currentUser:e,userProfile:r,register:async(R,j,N)=>{const U=await uj(Yl,R,j);try{await Q_(U.user)}catch($){console.error("Error sending verification email:",$)}return await Rr(Ae(he,"users",U.user.uid),{displayName:N,email:R,role:"member",createdAt:bt(),isOnline:!0,lastSeen:bt()}),U},login:async(R,j)=>{const N=await dj(Yl,R,j);return await h(N.user.uid,!0),N},logout:async()=>{if(e)try{await h(e.uid,!1)}catch{console.log("[AuthContext] Final presence update skipped or failed during logout")}return vj(Yl)},resetPassword:R=>VE(Yl,R),resendVerification:()=>{if(e)return Q_(e)}};return c.jsx(NT.Provider,{value:k,children:!l&&t})};let z0=null;const pM=()=>(z0||(z0=new(window.AudioContext||window.webkitAudioContext)),z0),Pv=()=>{try{const t=pM(),e=t.currentTime,n=t.createOscillator(),r=t.createGain();n.connect(r),r.connect(t.destination),n.frequency.value=880,n.type="sine",r.gain.setValueAtTime(0,e),r.gain.linearRampToValueAtTime(.2,e+.01),r.gain.linearRampToValueAtTime(0,e+.1),n.start(e),n.stop(e+.1);const a=t.createOscillator(),l=t.createGain();a.connect(l),l.connect(t.destination),a.frequency.value=660,a.type="sine",l.gain.setValueAtTime(0,e+.08),l.gain.linearRampToValueAtTime(.2,e+.09),l.gain.linearRampToValueAtTime(0,e+.25),a.start(e+.08),a.stop(e+.25)}catch(t){console.error("Error playing notification sound:",t)}},gM=(t,e)=>!t||!e?!1:/@everyone\b/i.test(t)?!0:new RegExp(`@${e}\\b`,"i").test(t),AT=T.createContext(),Wa=()=>{const t=T.useContext(AT);if(!t)throw new Error("useData must be used within DataProvider");return t},vM=({children:t})=>{const{currentUser:e}=Ln(),[n,r]=T.useState([]),[a,l]=T.useState([]),[u,h]=T.useState(null),[m,p]=T.useState([]),[y,b]=T.useState(null),[x,k]=T.useState({}),[R,j]=T.useState({}),[N,U]=T.useState([]),$=T.useRef({}),I=T.useRef(!0);T.useEffect(()=>{if(r([]),!u)return;const w=gr(wt(he,"servers",u,"members"),async P=>{const L=[],z=[],M=new Map;if(P.docChanges().forEach(se=>{const le=se.doc.data();se.type==="added"&&(L.push(le.userId),M.set(le.userId,le.role)),se.type==="removed"&&z.push(le.userId),se.type==="modified"&&M.set(le.userId,le.role)}),n.length===0&&L.length>0){const se=new Map;P.docs.forEach(ee=>{se.set(ee.data().userId,ee.data().role||"member")});const le=Array.from(se.keys()),Y=[];for(let ee=0;ee<le.length;ee+=10){const Z=le.slice(ee,ee+10),Ee=qr(wt(he,"users"),Ta("__name__","in",Z));(await Ga(Ee)).forEach(H=>{Y.push({id:H.id,...H.data(),serverRole:se.get(H.id)})})}r(Y);return}if(L.length>0&&n.length>0){const se=[];for(let le=0;le<L.length;le+=10){const Y=L.slice(le,le+10),ee=qr(wt(he,"users"),Ta("__name__","in",Y));(await Ga(ee)).forEach(Ee=>{se.push({id:Ee.id,...Ee.data(),serverRole:M.get(Ee.id)})})}r(le=>[...le,...se])}z.length>0&&r(se=>se.filter(le=>!z.includes(le.id))),P.docChanges().some(se=>se.type==="modified")&&r(se=>se.map(le=>M.has(le.id)?{...le,serverRole:M.get(le.id)}:le))}),E=qr(wt(he,"users"),Ta("servers","array-contains",u),Ta("isOnline","==",!0)),A=gr(E,P=>{r(L=>{const z=new Map;return P.forEach(M=>{const se=M.data();z.set(M.id,{presence:se.presence,isOnline:se.isOnline,status:se.status,lastSeen:se.lastSeen,displayName:se.displayName,photoUrl:se.photoUrl||se.photoURL,bio:se.bio,role:se.role})}),L.map(M=>{const se=z.get(M.id);return se?{...M,...se}:{...M,isOnline:!1,presence:"offline",status:null}})})});return()=>{w(),A()}},[u]);const[O,B]=T.useState([]);T.useEffect(()=>{if(!e){l([]),h(null),B([]);return}return gr(Ae(he,"users",e.uid),E=>{if(!E.exists())return;const A=E.data(),P=A?.servers||[],L=A?.unreadMentions||{};Object.keys(L).forEach(z=>{const M=$.current[z]||0;(L[z]?.count||0)>M&&z!==u&&Pv()}),$.current=Object.fromEntries(Object.entries(L).map(([z,M])=>[z,M.count])),k(L),j(A?.unreadDms||{}),B(z=>JSON.stringify(z)!==JSON.stringify(P)?P:z),h(z=>{const M=A?.currentServer;return z?z==="home"||P.includes(z)?z:P.length>0?P[0]:"home":M&&(M==="home"||P.includes(M))?M:P.length>0?P[0]:"home"})})},[e]),T.useEffect(()=>{if(l(E=>E.filter(A=>O.includes(A.id))),O.length===0){l([]);return}const w=[];for(let E=0;E<O.length;E+=10){const A=O.slice(E,E+10),P=qr(wt(he,"servers"),Ta("__name__","in",A)),L=gr(P,z=>{const M=[];z.forEach(se=>{M.push({id:se.id,...se.data()})}),l(se=>[...se.filter(ee=>!A.includes(ee.id)),...M].sort((ee,Z)=>O.indexOf(ee.id)-O.indexOf(Z.id)))});w.push(L)}return()=>{w.forEach(E=>E())}},[O]),T.useEffect(()=>{if(!e){U([]);return}I.current=!0;const w=qr(wt(he,"dms"),Ta("participants","array-contains",e.uid)),E=gr(w,A=>{const P=[];A.forEach(z=>{P.push({id:z.id,...z.data()})}),P.sort((z,M)=>{const se=z.updatedAt?.toMillis()||0;return(M.updatedAt?.toMillis()||0)-se});const L=P.filter(z=>!z.hiddenFor||!z.hiddenFor.includes(e.uid));U(L),I.current||A.docChanges().forEach(z=>{if(z.type==="modified"||z.type==="added"){const M=z.doc.data();if(M.lastMessage&&M.lastMessage.userId!==e.uid){const se=Date.now(),le=M.lastMessage.timestamp?.toMillis()||0;se-le<3e4&&Pv()}}}),I.current=!1});return()=>E()},[e]),T.useEffect(()=>{if(!u){p([]),b(null);return}const w=a.find(A=>A.id===u);b(w||null);const E=gr(wt(he,"servers",u,"channels"),A=>{const P=[];A.forEach(L=>{P.push({id:L.id,...L.data()})}),p(P.sort((L,z)=>L.position-z.position))});return()=>{E()}},[u,a]);const q={users:n,servers:a,currentServer:u,setCurrentServer:h,channels:m,server:y,dms:N,unreadMentions:x,unreadDms:R};return c.jsx(AT.Provider,{value:q,children:t})};var RT={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},dw=ye.createContext&&ye.createContext(RT),yM=["attr","size","title"];function bM(t,e){if(t==null)return{};var n=xM(t,e),r,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(a=0;a<l.length;a++)r=l[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function xM(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function xm(){return xm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xm.apply(this,arguments)}function hw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function _m(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hw(Object(n),!0).forEach(function(r){_M(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hw(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _M(t,e,n){return e=wM(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wM(t){var e=SM(t,"string");return typeof e=="symbol"?e:e+""}function SM(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jT(t){return t&&t.map((e,n)=>ye.createElement(e.tag,_m({key:n},e.attr),jT(e.child)))}function je(t){return e=>ye.createElement(EM,xm({attr:_m({},t.attr)},e),jT(t.child))}function EM(t){var e=n=>{var{attr:r,size:a,title:l}=t,u=bM(t,yM),h=a||n.size||"1em",m;return n.className&&(m=n.className),t.className&&(m=(m?m+" ":"")+t.className),ye.createElement("svg",xm({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,u,{className:m,style:_m(_m({color:t.color||n.color},n.style),t.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),l&&ye.createElement("title",null,l),t.children)};return dw!==void 0?ye.createElement(dw.Consumer,null,n=>e(n)):e(RT)}function IT(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6z"},child:[]},{tag:"path",attr:{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12zm0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17z"},child:[]}]})(t)}function DT(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m17.6 9.48 1.84-3.18c.16-.31.04-.69-.26-.85a.637.637 0 0 0-.83.22l-1.88 3.24a11.463 11.463 0 0 0-8.94 0L5.65 5.67a.643.643 0 0 0-.87-.2c-.28.18-.37.54-.22.83L6.4 9.48A10.78 10.78 0 0 0 1 18h22a10.78 10.78 0 0 0-5.4-8.52zM7 15.25a1.25 1.25 0 1 1 0-2.5 1.25 1.25 0 0 1 0 2.5zm10 0a1.25 1.25 0 1 1 0-2.5 1.25 1.25 0 0 1 0 2.5z"},child:[]}]})(t)}function CM(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"},child:[]}]})(t)}function TM(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"},child:[]}]})(t)}function Pi(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(t)}function kM(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10.09 15.59 11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5a2 2 0 0 0-2 2v4h2V5h14v14H5v-4H3v4a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"},child:[]}]})(t)}function NM(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 3a9 9 0 0 0-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42A8.954 8.954 0 0 0 13 21a9 9 0 0 0 0-18zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"},child:[]}]})(t)}function m1(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"},child:[]}]})(t)}function AM(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"},child:[]}]})(t)}function RM(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"},child:[]}]})(t)}function op(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 19H5V5h7V3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"},child:[]}]})(t)}function Uo(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9.19 6.35c-2.04 2.29-3.44 5.58-3.57 5.89L2 10.69l4.05-4.05c.47-.47 1.15-.68 1.81-.55l1.33.26zM11.17 17s3.74-1.55 5.89-3.7c5.4-5.4 4.5-9.62 4.21-10.57-.95-.3-5.17-1.19-10.57 4.21C8.55 9.09 7 12.83 7 12.83L11.17 17zm6.48-2.19c-2.29 2.04-5.58 3.44-5.89 3.57L13.31 22l4.05-4.05c.47-.47.68-1.15.55-1.81l-.26-1.33zM9 18c0 .83-.34 1.58-.88 2.12C6.94 21.3 2 22 2 22s.7-4.94 1.88-6.12A2.996 2.996 0 0 1 9 18zm4-9c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2z"},child:[]}]})(t)}function p1(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"},child:[]}]})(t)}function lp(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(t)}function jM(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m23 12-2.44-2.79.34-3.69-3.61-.82-1.89-3.2L12 2.96 8.6 1.5 6.71 4.69 3.1 5.5l.34 3.7L1 12l2.44 2.79-.34 3.7 3.61.82L8.6 22.5l3.4-1.47 3.4 1.46 1.89-3.19 3.61-.82-.34-3.69L23 12zm-12.91 4.72-3.8-3.81 1.48-1.48 2.32 2.33 5.85-5.87 1.48 1.48-7.33 7.35z"},child:[]}]})(t)}function IM(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"},child:[]}]})(t)}function DM(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"},child:[]}]})(t)}function Ov(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28zm-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18l5.98 5.99zM4.27 3 3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73 4.27 3z"},child:[]}]})(t)}function Lv(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"},child:[]}]})(t)}function MT(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM9.5 16.5v-9l7 4.5-7 4.5z"},child:[]}]})(t)}function MM(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 6h12v12H6z"},child:[]}]})(t)}function Vv(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m21 6.5-4 4V7c0-.55-.45-1-1-1H9.82L21 17.18V6.5zM3.27 2 2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.54-.18L19.73 21 21 19.73 3.27 2z"},child:[]}]})(t)}function ud(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"},child:[]}]})(t)}function PM(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 9v6h4l5 5V4l-5 5H7z"},child:[]}]})(t)}function fw(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16.5 12A4.5 4.5 0 0 0 14 7.97v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51A8.796 8.796 0 0 0 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06a8.99 8.99 0 0 0 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4 9.91 6.09 12 8.18V4z"},child:[]}]})(t)}function mw(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3A4.5 4.5 0 0 0 14 7.97v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"},child:[]}]})(t)}function U0(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.7.28-.28 0-.53-.11-.71-.29L.29 13.08a.956.956 0 0 1-.29-.7c0-.28.11-.53.29-.71C3.34 8.78 7.46 7 12 7s8.66 1.78 11.71 4.67c.18.18.29.43.29.71 0 .28-.11.53-.29.71l-2.48 2.48c-.18.18-.43.29-.71.29-.27 0-.52-.11-.7-.28a11.27 11.27 0 0 0-2.67-1.85.996.996 0 0 1-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z"},child:[]}]})(t)}function OM(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20.01 15.38c-1.23 0-2.42-.2-3.53-.56a.977.977 0 0 0-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"},child:[]}]})(t)}function LM(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"},child:[]}]})(t)}function VM(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"},child:[]}]})(t)}function wm(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M20 18c1.1 0 1.99-.9 1.99-2L22 6a2 2 0 0 0-2-2H4c-1.11 0-2 .89-2 2v10a2 2 0 0 0 2 2H0v2h24v-2h-4zm-7-3.53v-2.19c-2.78 0-4.61.85-6 2.72.56-2.67 2.11-5.33 6-5.87V7l4 3.73-4 3.74z"},child:[]}]})(t)}function zM(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m21.22 18.02 2 2H24v-2h-2.78zm.77-2 .01-10a2 2 0 0 0-2-2H7.22l5.23 5.23c.18-.04.36-.07.55-.1V7.02l4 3.73-1.58 1.47 5.54 5.54c.61-.33 1.03-.99 1.03-1.74zM2.39 1.73 1.11 3l1.54 1.54c-.4.36-.65.89-.65 1.48v10a2 2 0 0 0 2 2H0v2h18.13l2.71 2.71 1.27-1.27L2.39 1.73zM7 15.02c.31-1.48.92-2.95 2.07-4.06l1.59 1.59c-1.54.38-2.7 1.18-3.66 2.47z"},child:[]}]})(t)}function pw(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"},child:[]}]})(t)}function Io(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(t)}function PT(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(t)}function tc(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M16 9V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3z"},child:[]}]})(t)}function UM(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"},child:[]}]})(t)}function gw(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"},child:[]}]})(t)}function OT(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 10V8h-4V4h-2v4h-4V4H8v4H4v2h4v4H4v2h4v4h2v-4h4v4h2v-4h4v-2h-4v-4h4zm-6 4h-4v-4h4v4z"},child:[]}]})(t)}function Sm(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 18h2V6H7v12zm4 4h2V2h-2v20zm-8-8h2v-4H3v4zm12 4h2V6h-2v12zm4-8v4h2v-4h-2z"},child:[]}]})(t)}function BM(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 9H4v2h16V9zM4 15h16v-2H4v2z"},child:[]}]})(t)}function LT(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"},child:[]}]})(t)}function zv(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zm0-10h4v6h6v-6h4l-7-7-7 7z"},child:[]}]})(t)}function FM(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 3H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h6v2H8v2h8v-2h-2v-2h6c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"},child:[]}]})(t)}function $M(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M12 4c3.87 0 7 3.13 7 7v2h-2.92L21 17.92V11a9 9 0 0 0-9-9c-1.95 0-3.76.62-5.23 1.68l1.44 1.44A6.914 6.914 0 0 1 12 4zM2.27 1.72 1 3l3.33 3.32A8.899 8.899 0 0 0 3 11v7c0 1.66 1.34 3 3 3h3v-8H5v-2c0-1.17.29-2.26.79-3.22L15 17v4h3c.3 0 .59-.06.86-.14L21 23l1.27-1.27-20-20.01z"},child:[]}]})(t)}function HM(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"},child:[]}]})(t)}function qM(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"},child:[]}]})(t)}function GM(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 7v2.99s-1.99.01-2 0V7h-3s.01-1.99 0-2h3V2h2v3h3v2h-3zm-3 4V8h-3V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8h-3zM5 19l3-4 2 3 3-4 4 5H5z"},child:[]}]})(t)}function YM(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m19 9 1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25L19 9zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12l-5.5-2.5zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25L19 15z"},child:[]}]})(t)}function nc(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},child:[]}]})(t)}function Em(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"},child:[]}]})(t)}function KM(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"},child:[]}]})(t)}function QM(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10a2.5 2.5 0 0 0 2.5-2.5c0-.61-.23-1.2-.64-1.67a.528.528 0 0 1-.13-.33c0-.28.22-.5.5-.5H16c3.31 0 6-2.69 6-6 0-4.96-4.49-9-10-9zm5.5 11c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm-3-4c-.83 0-1.5-.67-1.5-1.5S13.67 6 14.5 6s1.5.67 1.5 1.5S15.33 9 14.5 9zM5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S7.33 13 6.5 13 5 12.33 5 11.5zm6-4c0 .83-.67 1.5-1.5 1.5S8 8.33 8 7.5 8.67 6 9.5 6s1.5.67 1.5 1.5z"},child:[]}]})(t)}function XM(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 11h-1V3c0-1.1-.9-2-2-2h-2c-1.1 0-2 .9-2 2v8H8c-2.76 0-5 2.24-5 5v7h18v-7c0-2.76-2.24-5-5-5zm3 10h-2v-3c0-.55-.45-1-1-1s-1 .45-1 1v3h-2v-3c0-.55-.45-1-1-1s-1 .45-1 1v3H9v-3c0-.55-.45-1-1-1s-1 .45-1 1v3H5v-5c0-1.65 1.35-3 3-3h8c1.65 0 3 1.35 3 3v5z"},child:[]}]})(t)}function WM(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.16 3h-.32L9.21 8.25h5.58zM16.46 8.25h5.16L19 3h-5.16zM21.38 9.75h-8.63V20.1zM11.25 20.1V9.75H2.62zM7.54 8.25 10.16 3H5L2.38 8.25z"},child:[]}]})(t)}function Bo(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"},child:[]}]})(t)}function $n(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(t)}function JM(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"},child:[]}]})(t)}function ZM(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"},child:[]}]})(t)}function vw(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"},child:[]}]})(t)}function e7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(t)}function t7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"},child:[]}]})(t)}function n7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 12.22C21 6.73 16.74 3 12 3c-4.69 0-9 3.65-9 9.28-.6.34-1 .98-1 1.72v2c0 1.1.9 2 2 2h1v-6.1c0-3.87 3.13-7 7-7s7 3.13 7 7V19h-8v2h8c1.1 0 2-.9 2-2v-1.22c.59-.31 1-.92 1-1.64v-2.3c0-.7-.41-1.31-1-1.62z"},child:[]},{tag:"circle",attr:{cx:"9",cy:"13",r:"1"},child:[]},{tag:"circle",attr:{cx:"15",cy:"13",r:"1"},child:[]},{tag:"path",attr:{d:"M18 11.03A6.04 6.04 0 0 0 12.05 6c-3.03 0-6.29 2.51-6.03 6.45a8.075 8.075 0 0 0 4.86-5.89c1.31 2.63 4 4.44 7.12 4.47z"},child:[]}]})(t)}function r7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 1.01 7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14zm-1-6h-3V8h-2v5H8l4 4 4-4z"},child:[]}]})(t)}function s7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 11V3H5c-1.1 0-2 .9-2 2v6h8zm2 0h8V5c0-1.1-.9-2-2-2h-6v8zm-2 2H3v6c0 1.1.9 2 2 2h6v-8zm2 0v8h6c1.1 0 2-.9 2-2v-6h-8z"},child:[]}]})(t)}function yw(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 9V7h-2V2.84A9.929 9.929 0 0 0 11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12c0-1.05-.17-2.05-.47-3H18zm-2.5-1c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5.67-1.5 1.5-1.5zm-7 0c.83 0 1.5.67 1.5 1.5S9.33 11 8.5 11 7 10.33 7 9.5 7.67 8 8.5 8zm3.5 9.5c-2.33 0-4.31-1.46-5.11-3.5h10.22c-.8 2.04-2.78 3.5-5.11 3.5zM22 3h2v2h-2v2h-2V5h-2V3h2V1h2v2z"},child:[]}]})(t)}function VT(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM8.5 8c.83 0 1.5.67 1.5 1.5S9.33 11 8.5 11 7 10.33 7 9.5 7.67 8 8.5 8zM12 18c-2.28 0-4.22-1.66-5-4h10c-.78 2.34-2.72 4-5 4zm3.5-7c-.83 0-1.5-.67-1.5-1.5S14.67 8 15.5 8s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"},child:[]}]})(t)}function i7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 22c1.1 0 2-.9 2-2h-4a2 2 0 0 0 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"},child:[]}]})(t)}function g1(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"},child:[]}]})(t)}function a7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"},child:[]}]})(t)}function o7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"},child:[]}]})(t)}function v1(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"},child:[]}]})(t)}function l7(t){return je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"},child:[]}]})(t)}const zT=T.createContext(),Kr=()=>{const t=T.useContext(zT);if(!t)throw new Error("useToast must be used within ToastProvider");return t},c7=({children:t})=>{const[e,n]=T.useState([]),r=T.useCallback((p,y="info")=>{const b=Date.now();n(x=>[...x,{id:b,message:p,type:y}]),setTimeout(()=>{n(x=>x.filter(k=>k.id!==b))},4e3)},[]),a=T.useCallback(p=>{n(y=>y.filter(b=>b.id!==p))},[]),l=T.useCallback(p=>r(p,"success"),[r]),u=T.useCallback(p=>r(p,"error"),[r]),h=T.useCallback(p=>r(p,"info"),[r]),m=T.useCallback(p=>r(p,"warning"),[r]);return c.jsxs(zT.Provider,{value:{success:l,error:u,info:h,warning:m},children:[t,c.jsx(u7,{toasts:e,removeToast:a})]})},u7=({toasts:t,removeToast:e})=>c.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(n=>c.jsx(d7,{toast:n,onClose:()=>e(n.id)},n.id))}),d7=({toast:t,onClose:e})=>{const n={success:c.jsx(CM,{size:20}),error:c.jsx(IM,{size:20}),warning:c.jsx(DM,{size:20}),info:c.jsx(m1,{size:20})},r={success:"bg-green-600 border-green-500",error:"bg-red-600 border-red-500",warning:"bg-yellow-600 border-yellow-500",info:"bg-blue-600 border-blue-500"};return c.jsxs("div",{className:`${r[t.type]} border-l-4 text-white px-4 py-3 rounded-lg shadow-lg 
                  flex items-center gap-3 min-w-[300px] max-w-md animate-slide-in`,children:[c.jsx("div",{className:"flex-shrink-0",children:n[t.type]}),c.jsx("div",{className:"flex-1 text-sm font-medium",children:t.message}),c.jsx("button",{onClick:e,className:"flex-shrink-0 hover:bg-white/20 rounded p-1 transition-colors",children:c.jsx($n,{size:18})})]})};function UT(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(n=UT(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function h7(){for(var t,e,n=0,r="",a=arguments.length;n<a;n++)(t=arguments[n])&&(e=UT(t))&&(r&&(r+=" "),r+=e);return r}const f7=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},m7=(t,e)=>({classGroupId:t,validator:e}),BT=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),Cm="-",bw=[],p7="arbitrary..",g7=t=>{const e=y7(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:u=>{if(u.startsWith("[")&&u.endsWith("]"))return v7(u);const h=u.split(Cm),m=h[0]===""&&h.length>1?1:0;return FT(h,m,e)},getConflictingClassGroupIds:(u,h)=>{if(h){const m=r[u],p=n[u];return m?p?f7(p,m):m:p||bw}return n[u]||bw}}},FT=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const a=t[e],l=n.nextPart.get(a);if(l){const p=FT(t,e+1,l);if(p)return p}const u=n.validators;if(u===null)return;const h=e===0?t.join(Cm):t.slice(e).join(Cm),m=u.length;for(let p=0;p<m;p++){const y=u[p];if(y.validator(h))return y.classGroupId}},v7=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?p7+r:void 0})(),y7=t=>{const{theme:e,classGroups:n}=t;return b7(n,e)},b7=(t,e)=>{const n=BT();for(const r in t){const a=t[r];y1(a,n,r,e)}return n},y1=(t,e,n,r)=>{const a=t.length;for(let l=0;l<a;l++){const u=t[l];x7(u,e,n,r)}},x7=(t,e,n,r)=>{if(typeof t=="string"){_7(t,e,n);return}if(typeof t=="function"){w7(t,e,n,r);return}S7(t,e,n,r)},_7=(t,e,n)=>{const r=t===""?e:$T(e,t);r.classGroupId=n},w7=(t,e,n,r)=>{if(E7(t)){y1(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(m7(n,t))},S7=(t,e,n,r)=>{const a=Object.entries(t),l=a.length;for(let u=0;u<l;u++){const[h,m]=a[u];y1(m,$T(e,h),n,r)}},$T=(t,e)=>{let n=t;const r=e.split(Cm),a=r.length;for(let l=0;l<a;l++){const u=r[l];let h=n.nextPart.get(u);h||(h=BT(),n.nextPart.set(u,h)),n=h}return n},E7=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,C7=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const a=(l,u)=>{n[l]=u,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(l){let u=n[l];if(u!==void 0)return u;if((u=r[l])!==void 0)return a(l,u),u},set(l,u){l in n?n[l]=u:a(l,u)}}},Uv="!",xw=":",T7=[],_w=(t,e,n,r,a)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:a}),k7=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=a=>{const l=[];let u=0,h=0,m=0,p;const y=a.length;for(let j=0;j<y;j++){const N=a[j];if(u===0&&h===0){if(N===xw){l.push(a.slice(m,j)),m=j+1;continue}if(N==="/"){p=j;continue}}N==="["?u++:N==="]"?u--:N==="("?h++:N===")"&&h--}const b=l.length===0?a:a.slice(m);let x=b,k=!1;b.endsWith(Uv)?(x=b.slice(0,-1),k=!0):b.startsWith(Uv)&&(x=b.slice(1),k=!0);const R=p&&p>m?p-m:void 0;return _w(l,k,x,R)};if(e){const a=e+xw,l=r;r=u=>u.startsWith(a)?l(u.slice(a.length)):_w(T7,!1,u,void 0,!0)}if(n){const a=r;r=l=>n({className:l,parseClassName:a})}return r},N7=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let a=[];for(let l=0;l<n.length;l++){const u=n[l],h=u[0]==="[",m=e.has(u);h||m?(a.length>0&&(a.sort(),r.push(...a),a=[]),r.push(u)):a.push(u)}return a.length>0&&(a.sort(),r.push(...a)),r}},A7=t=>({cache:C7(t.cacheSize),parseClassName:k7(t),sortModifiers:N7(t),...g7(t)}),R7=/\s+/,j7=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:l}=e,u=[],h=t.trim().split(R7);let m="";for(let p=h.length-1;p>=0;p-=1){const y=h[p],{isExternal:b,modifiers:x,hasImportantModifier:k,baseClassName:R,maybePostfixModifierPosition:j}=n(y);if(b){m=y+(m.length>0?" "+m:m);continue}let N=!!j,U=r(N?R.substring(0,j):R);if(!U){if(!N){m=y+(m.length>0?" "+m:m);continue}if(U=r(R),!U){m=y+(m.length>0?" "+m:m);continue}N=!1}const $=x.length===0?"":x.length===1?x[0]:l(x).join(":"),I=k?$+Uv:$,O=I+U;if(u.indexOf(O)>-1)continue;u.push(O);const B=a(U,N);for(let q=0;q<B.length;++q){const w=B[q];u.push(I+w)}m=y+(m.length>0?" "+m:m)}return m},I7=(...t)=>{let e=0,n,r,a="";for(;e<t.length;)(n=t[e++])&&(r=HT(n))&&(a&&(a+=" "),a+=r);return a},HT=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=HT(t[r]))&&(n&&(n+=" "),n+=e);return n},D7=(t,...e)=>{let n,r,a,l;const u=m=>{const p=e.reduce((y,b)=>b(y),t());return n=A7(p),r=n.cache.get,a=n.cache.set,l=h,h(m)},h=m=>{const p=r(m);if(p)return p;const y=j7(m,n);return a(m,y),y};return l=u,(...m)=>l(I7(...m))},M7=[],Un=t=>{const e=n=>n[t]||M7;return e.isThemeGetter=!0,e},qT=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,GT=/^\((?:(\w[\w-]*):)?(.+)\)$/i,P7=/^\d+\/\d+$/,O7=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,L7=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,V7=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,z7=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,U7=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ul=t=>P7.test(t),Et=t=>!!t&&!Number.isNaN(Number(t)),wa=t=>!!t&&Number.isInteger(Number(t)),B0=t=>t.endsWith("%")&&Et(t.slice(0,-1)),Ti=t=>O7.test(t),B7=()=>!0,F7=t=>L7.test(t)&&!V7.test(t),YT=()=>!1,$7=t=>z7.test(t),H7=t=>U7.test(t),q7=t=>!qe(t)&&!Ge(t),G7=t=>Ac(t,XT,YT),qe=t=>qT.test(t),Eo=t=>Ac(t,WT,F7),F0=t=>Ac(t,W7,Et),ww=t=>Ac(t,KT,YT),Y7=t=>Ac(t,QT,H7),gf=t=>Ac(t,JT,$7),Ge=t=>GT.test(t),Du=t=>Rc(t,WT),K7=t=>Rc(t,J7),Sw=t=>Rc(t,KT),Q7=t=>Rc(t,XT),X7=t=>Rc(t,QT),vf=t=>Rc(t,JT,!0),Ac=(t,e,n)=>{const r=qT.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Rc=(t,e,n=!1)=>{const r=GT.exec(t);return r?r[1]?e(r[1]):n:!1},KT=t=>t==="position"||t==="percentage",QT=t=>t==="image"||t==="url",XT=t=>t==="length"||t==="size"||t==="bg-size",WT=t=>t==="length",W7=t=>t==="number",J7=t=>t==="family-name",JT=t=>t==="shadow",Z7=()=>{const t=Un("color"),e=Un("font"),n=Un("text"),r=Un("font-weight"),a=Un("tracking"),l=Un("leading"),u=Un("breakpoint"),h=Un("container"),m=Un("spacing"),p=Un("radius"),y=Un("shadow"),b=Un("inset-shadow"),x=Un("text-shadow"),k=Un("drop-shadow"),R=Un("blur"),j=Un("perspective"),N=Un("aspect"),U=Un("ease"),$=Un("animate"),I=()=>["auto","avoid","all","avoid-page","page","left","right","column"],O=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],B=()=>[...O(),Ge,qe],q=()=>["auto","hidden","clip","visible","scroll"],w=()=>["auto","contain","none"],E=()=>[Ge,qe,m],A=()=>[Ul,"full","auto",...E()],P=()=>[wa,"none","subgrid",Ge,qe],L=()=>["auto",{span:["full",wa,Ge,qe]},wa,Ge,qe],z=()=>[wa,"auto",Ge,qe],M=()=>["auto","min","max","fr",Ge,qe],se=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],le=()=>["start","end","center","stretch","center-safe","end-safe"],Y=()=>["auto",...E()],ee=()=>[Ul,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...E()],Z=()=>[t,Ge,qe],Ee=()=>[...O(),Sw,ww,{position:[Ge,qe]}],Re=()=>["no-repeat",{repeat:["","x","y","space","round"]}],H=()=>["auto","cover","contain",Q7,G7,{size:[Ge,qe]}],W=()=>[B0,Du,Eo],ie=()=>["","none","full",p,Ge,qe],ve=()=>["",Et,Du,Eo],Te=()=>["solid","dashed","dotted","double"],De=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ae=()=>[Et,B0,Sw,ww],Le=()=>["","none",R,Ge,qe],Ie=()=>["none",Et,Ge,qe],de=()=>["none",Et,Ge,qe],pe=()=>[Et,Ge,qe],ge=()=>[Ul,"full",...E()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ti],breakpoint:[Ti],color:[B7],container:[Ti],"drop-shadow":[Ti],ease:["in","out","in-out"],font:[q7],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ti],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ti],shadow:[Ti],spacing:["px",Et],text:[Ti],"text-shadow":[Ti],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ul,qe,Ge,N]}],container:["container"],columns:[{columns:[Et,qe,Ge,h]}],"break-after":[{"break-after":I()}],"break-before":[{"break-before":I()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:B()}],overflow:[{overflow:q()}],"overflow-x":[{"overflow-x":q()}],"overflow-y":[{"overflow-y":q()}],overscroll:[{overscroll:w()}],"overscroll-x":[{"overscroll-x":w()}],"overscroll-y":[{"overscroll-y":w()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:A()}],"inset-x":[{"inset-x":A()}],"inset-y":[{"inset-y":A()}],start:[{start:A()}],end:[{end:A()}],top:[{top:A()}],right:[{right:A()}],bottom:[{bottom:A()}],left:[{left:A()}],visibility:["visible","invisible","collapse"],z:[{z:[wa,"auto",Ge,qe]}],basis:[{basis:[Ul,"full","auto",h,...E()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Et,Ul,"auto","initial","none",qe]}],grow:[{grow:["",Et,Ge,qe]}],shrink:[{shrink:["",Et,Ge,qe]}],order:[{order:[wa,"first","last","none",Ge,qe]}],"grid-cols":[{"grid-cols":P()}],"col-start-end":[{col:L()}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":P()}],"row-start-end":[{row:L()}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":M()}],"auto-rows":[{"auto-rows":M()}],gap:[{gap:E()}],"gap-x":[{"gap-x":E()}],"gap-y":[{"gap-y":E()}],"justify-content":[{justify:[...se(),"normal"]}],"justify-items":[{"justify-items":[...le(),"normal"]}],"justify-self":[{"justify-self":["auto",...le()]}],"align-content":[{content:["normal",...se()]}],"align-items":[{items:[...le(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...le(),{baseline:["","last"]}]}],"place-content":[{"place-content":se()}],"place-items":[{"place-items":[...le(),"baseline"]}],"place-self":[{"place-self":["auto",...le()]}],p:[{p:E()}],px:[{px:E()}],py:[{py:E()}],ps:[{ps:E()}],pe:[{pe:E()}],pt:[{pt:E()}],pr:[{pr:E()}],pb:[{pb:E()}],pl:[{pl:E()}],m:[{m:Y()}],mx:[{mx:Y()}],my:[{my:Y()}],ms:[{ms:Y()}],me:[{me:Y()}],mt:[{mt:Y()}],mr:[{mr:Y()}],mb:[{mb:Y()}],ml:[{ml:Y()}],"space-x":[{"space-x":E()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":E()}],"space-y-reverse":["space-y-reverse"],size:[{size:ee()}],w:[{w:[h,"screen",...ee()]}],"min-w":[{"min-w":[h,"screen","none",...ee()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[u]},...ee()]}],h:[{h:["screen","lh",...ee()]}],"min-h":[{"min-h":["screen","lh","none",...ee()]}],"max-h":[{"max-h":["screen","lh",...ee()]}],"font-size":[{text:["base",n,Du,Eo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Ge,F0]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",B0,qe]}],"font-family":[{font:[K7,qe,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,Ge,qe]}],"line-clamp":[{"line-clamp":[Et,"none",Ge,F0]}],leading:[{leading:[l,...E()]}],"list-image":[{"list-image":["none",Ge,qe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ge,qe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Z()}],"text-color":[{text:Z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Te(),"wavy"]}],"text-decoration-thickness":[{decoration:[Et,"from-font","auto",Ge,Eo]}],"text-decoration-color":[{decoration:Z()}],"underline-offset":[{"underline-offset":[Et,"auto",Ge,qe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ge,qe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ge,qe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Ee()}],"bg-repeat":[{bg:Re()}],"bg-size":[{bg:H()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},wa,Ge,qe],radial:["",Ge,qe],conic:[wa,Ge,qe]},X7,Y7]}],"bg-color":[{bg:Z()}],"gradient-from-pos":[{from:W()}],"gradient-via-pos":[{via:W()}],"gradient-to-pos":[{to:W()}],"gradient-from":[{from:Z()}],"gradient-via":[{via:Z()}],"gradient-to":[{to:Z()}],rounded:[{rounded:ie()}],"rounded-s":[{"rounded-s":ie()}],"rounded-e":[{"rounded-e":ie()}],"rounded-t":[{"rounded-t":ie()}],"rounded-r":[{"rounded-r":ie()}],"rounded-b":[{"rounded-b":ie()}],"rounded-l":[{"rounded-l":ie()}],"rounded-ss":[{"rounded-ss":ie()}],"rounded-se":[{"rounded-se":ie()}],"rounded-ee":[{"rounded-ee":ie()}],"rounded-es":[{"rounded-es":ie()}],"rounded-tl":[{"rounded-tl":ie()}],"rounded-tr":[{"rounded-tr":ie()}],"rounded-br":[{"rounded-br":ie()}],"rounded-bl":[{"rounded-bl":ie()}],"border-w":[{border:ve()}],"border-w-x":[{"border-x":ve()}],"border-w-y":[{"border-y":ve()}],"border-w-s":[{"border-s":ve()}],"border-w-e":[{"border-e":ve()}],"border-w-t":[{"border-t":ve()}],"border-w-r":[{"border-r":ve()}],"border-w-b":[{"border-b":ve()}],"border-w-l":[{"border-l":ve()}],"divide-x":[{"divide-x":ve()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ve()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Te(),"hidden","none"]}],"divide-style":[{divide:[...Te(),"hidden","none"]}],"border-color":[{border:Z()}],"border-color-x":[{"border-x":Z()}],"border-color-y":[{"border-y":Z()}],"border-color-s":[{"border-s":Z()}],"border-color-e":[{"border-e":Z()}],"border-color-t":[{"border-t":Z()}],"border-color-r":[{"border-r":Z()}],"border-color-b":[{"border-b":Z()}],"border-color-l":[{"border-l":Z()}],"divide-color":[{divide:Z()}],"outline-style":[{outline:[...Te(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Et,Ge,qe]}],"outline-w":[{outline:["",Et,Du,Eo]}],"outline-color":[{outline:Z()}],shadow:[{shadow:["","none",y,vf,gf]}],"shadow-color":[{shadow:Z()}],"inset-shadow":[{"inset-shadow":["none",b,vf,gf]}],"inset-shadow-color":[{"inset-shadow":Z()}],"ring-w":[{ring:ve()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Z()}],"ring-offset-w":[{"ring-offset":[Et,Eo]}],"ring-offset-color":[{"ring-offset":Z()}],"inset-ring-w":[{"inset-ring":ve()}],"inset-ring-color":[{"inset-ring":Z()}],"text-shadow":[{"text-shadow":["none",x,vf,gf]}],"text-shadow-color":[{"text-shadow":Z()}],opacity:[{opacity:[Et,Ge,qe]}],"mix-blend":[{"mix-blend":[...De(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":De()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Et]}],"mask-image-linear-from-pos":[{"mask-linear-from":ae()}],"mask-image-linear-to-pos":[{"mask-linear-to":ae()}],"mask-image-linear-from-color":[{"mask-linear-from":Z()}],"mask-image-linear-to-color":[{"mask-linear-to":Z()}],"mask-image-t-from-pos":[{"mask-t-from":ae()}],"mask-image-t-to-pos":[{"mask-t-to":ae()}],"mask-image-t-from-color":[{"mask-t-from":Z()}],"mask-image-t-to-color":[{"mask-t-to":Z()}],"mask-image-r-from-pos":[{"mask-r-from":ae()}],"mask-image-r-to-pos":[{"mask-r-to":ae()}],"mask-image-r-from-color":[{"mask-r-from":Z()}],"mask-image-r-to-color":[{"mask-r-to":Z()}],"mask-image-b-from-pos":[{"mask-b-from":ae()}],"mask-image-b-to-pos":[{"mask-b-to":ae()}],"mask-image-b-from-color":[{"mask-b-from":Z()}],"mask-image-b-to-color":[{"mask-b-to":Z()}],"mask-image-l-from-pos":[{"mask-l-from":ae()}],"mask-image-l-to-pos":[{"mask-l-to":ae()}],"mask-image-l-from-color":[{"mask-l-from":Z()}],"mask-image-l-to-color":[{"mask-l-to":Z()}],"mask-image-x-from-pos":[{"mask-x-from":ae()}],"mask-image-x-to-pos":[{"mask-x-to":ae()}],"mask-image-x-from-color":[{"mask-x-from":Z()}],"mask-image-x-to-color":[{"mask-x-to":Z()}],"mask-image-y-from-pos":[{"mask-y-from":ae()}],"mask-image-y-to-pos":[{"mask-y-to":ae()}],"mask-image-y-from-color":[{"mask-y-from":Z()}],"mask-image-y-to-color":[{"mask-y-to":Z()}],"mask-image-radial":[{"mask-radial":[Ge,qe]}],"mask-image-radial-from-pos":[{"mask-radial-from":ae()}],"mask-image-radial-to-pos":[{"mask-radial-to":ae()}],"mask-image-radial-from-color":[{"mask-radial-from":Z()}],"mask-image-radial-to-color":[{"mask-radial-to":Z()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":O()}],"mask-image-conic-pos":[{"mask-conic":[Et]}],"mask-image-conic-from-pos":[{"mask-conic-from":ae()}],"mask-image-conic-to-pos":[{"mask-conic-to":ae()}],"mask-image-conic-from-color":[{"mask-conic-from":Z()}],"mask-image-conic-to-color":[{"mask-conic-to":Z()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Ee()}],"mask-repeat":[{mask:Re()}],"mask-size":[{mask:H()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ge,qe]}],filter:[{filter:["","none",Ge,qe]}],blur:[{blur:Le()}],brightness:[{brightness:[Et,Ge,qe]}],contrast:[{contrast:[Et,Ge,qe]}],"drop-shadow":[{"drop-shadow":["","none",k,vf,gf]}],"drop-shadow-color":[{"drop-shadow":Z()}],grayscale:[{grayscale:["",Et,Ge,qe]}],"hue-rotate":[{"hue-rotate":[Et,Ge,qe]}],invert:[{invert:["",Et,Ge,qe]}],saturate:[{saturate:[Et,Ge,qe]}],sepia:[{sepia:["",Et,Ge,qe]}],"backdrop-filter":[{"backdrop-filter":["","none",Ge,qe]}],"backdrop-blur":[{"backdrop-blur":Le()}],"backdrop-brightness":[{"backdrop-brightness":[Et,Ge,qe]}],"backdrop-contrast":[{"backdrop-contrast":[Et,Ge,qe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Et,Ge,qe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Et,Ge,qe]}],"backdrop-invert":[{"backdrop-invert":["",Et,Ge,qe]}],"backdrop-opacity":[{"backdrop-opacity":[Et,Ge,qe]}],"backdrop-saturate":[{"backdrop-saturate":[Et,Ge,qe]}],"backdrop-sepia":[{"backdrop-sepia":["",Et,Ge,qe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":E()}],"border-spacing-x":[{"border-spacing-x":E()}],"border-spacing-y":[{"border-spacing-y":E()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ge,qe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Et,"initial",Ge,qe]}],ease:[{ease:["linear","initial",U,Ge,qe]}],delay:[{delay:[Et,Ge,qe]}],animate:[{animate:["none",$,Ge,qe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[j,Ge,qe]}],"perspective-origin":[{"perspective-origin":B()}],rotate:[{rotate:Ie()}],"rotate-x":[{"rotate-x":Ie()}],"rotate-y":[{"rotate-y":Ie()}],"rotate-z":[{"rotate-z":Ie()}],scale:[{scale:de()}],"scale-x":[{"scale-x":de()}],"scale-y":[{"scale-y":de()}],"scale-z":[{"scale-z":de()}],"scale-3d":["scale-3d"],skew:[{skew:pe()}],"skew-x":[{"skew-x":pe()}],"skew-y":[{"skew-y":pe()}],transform:[{transform:[Ge,qe,"","none","gpu","cpu"]}],"transform-origin":[{origin:B()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ge()}],"translate-x":[{"translate-x":ge()}],"translate-y":[{"translate-y":ge()}],"translate-z":[{"translate-z":ge()}],"translate-none":["translate-none"],accent:[{accent:Z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ge,qe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ge,qe]}],fill:[{fill:["none",...Z()]}],"stroke-w":[{stroke:[Et,Du,Eo,F0]}],stroke:[{stroke:["none",...Z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},eP=D7(Z7);function Vt(...t){return eP(h7(t))}function cp(t){if(!t)return"";const e=t.toDate?t.toDate():new Date(t),r=new Date-e;return r<6e4?"Just now":r<36e5?`${Math.floor(r/6e4)}m ago`:r<864e5?`${Math.floor(r/36e5)}h ago`:r<6048e5?`${Math.floor(r/864e5)}d ago`:e.toLocaleDateString()}function tP(t){switch(t){case"admin":return"bg-admin/20 text-admin border-admin/30";case"moderator":return"bg-moderator/20 text-moderator border-moderator/30";default:return"bg-member/20 text-member border-member/30"}}const Sn=({label:t,error:e,className:n,containerClassName:r,...a})=>c.jsxs("div",{className:Vt("flex flex-col gap-1.5",r),children:[t&&c.jsx("label",{className:"text-sm font-medium text-dark-text",children:t}),c.jsx("input",{className:Vt("bg-dark-input text-dark-text px-4 py-2.5 rounded-md","border border-transparent focus:border-brand-primary","outline-none transition-colors duration-200","placeholder:text-dark-muted",e&&"border-admin",n),...a}),e&&c.jsx("span",{className:"text-sm text-admin",children:e})]}),at=({children:t,variant:e="primary",size:n="md",className:r,disabled:a,...l})=>{const u="font-medium rounded-md transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",h={primary:"bg-brand-primary hover:bg-brand-hover text-white",secondary:"bg-dark-input hover:bg-dark-hover text-dark-text",danger:"bg-admin hover:bg-admin/80 text-white",ghost:"hover:bg-dark-hover text-dark-text"},m={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};return c.jsx("button",{className:Vt(u,h[e],m[n],r),disabled:a,...l,children:t})},nP=({isOpen:t,onClose:e})=>{const[n,r]=T.useState(""),[a,l]=T.useState(!1),[u,h]=T.useState(!1),{success:m,error:p}=Kr(),y=async b=>{b.preventDefault(),l(!0);try{await VE(Yl,n),h(!0),m("Password reset email sent! Check your inbox."),setTimeout(()=>{e(),h(!1),r("")},3e3)}catch(x){console.error("Password reset error:",x),x.code==="auth/user-not-found"?p("No account found with this email address."):x.code==="auth/invalid-email"?p("Invalid email address."):p("Failed to send reset email. Please try again.")}finally{l(!1)}};return t?c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-dark-sidebar rounded-lg shadow-2xl w-full max-w-md p-6 relative",children:[c.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-dark-muted hover:text-dark-text transition-colors",children:c.jsx($n,{size:24})}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-dark-text mb-2",children:"Reset Password"}),c.jsx("p",{className:"text-dark-muted text-sm",children:"Enter your email address and we'll send you a link to reset your password."})]}),u?c.jsx("div",{className:"bg-green-500/10 border border-green-500/30 text-green-400 px-4 py-3 rounded-md text-sm text-center",children:" Reset email sent successfully! Check your inbox."}):c.jsxs("form",{onSubmit:y,className:"space-y-4",children:[c.jsx(Sn,{label:"Email Address",type:"email",placeholder:"your@email.com",value:n,onChange:b=>r(b.target.value),required:!0,autoFocus:!0}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx(at,{type:"button",variant:"secondary",onClick:e,className:"flex-1",children:"Cancel"}),c.jsx(at,{type:"submit",variant:"primary",className:"flex-1",disabled:a||!n,children:a?"Sending...":"Send Reset Link"})]})]})]})}):null},rP=({onSwitchToRegister:t,onSwitchToReset:e})=>{const{login:n}=Ln(),[r,a]=T.useState({email:"",password:""}),[l,u]=T.useState(""),[h,m]=T.useState(!1),[p,y]=T.useState(!1),b=async x=>{x.preventDefault(),u(""),m(!0);try{await n(r.email,r.password)}catch(k){u(k.message||"Failed to login")}finally{m(!1)}};return c.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-dark-bg p-4",children:[c.jsxs("div",{className:"w-full max-w-md bg-dark-sidebar rounded-lg shadow-2xl p-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-dark-text mb-2",children:"Welcome Back!"}),c.jsx("p",{className:"text-dark-muted",children:"Login to Lumo"})]}),c.jsxs("form",{onSubmit:b,className:"space-y-4",children:[c.jsx(Sn,{label:"Email",type:"email",placeholder:"Enter your email",value:r.email,onChange:x=>a({...r,email:x.target.value}),required:!0}),c.jsxs("div",{children:[c.jsx(Sn,{label:"Password",type:"password",placeholder:"Enter your password",value:r.password,onChange:x=>a({...r,password:x.target.value}),required:!0}),c.jsx("div",{className:"mt-2 text-right",children:c.jsx("button",{type:"button",onClick:()=>y(!0),className:"text-sm text-brand-primary hover:underline",children:"Forgot Password?"})})]}),l&&c.jsx("div",{className:"bg-admin/10 border border-admin/30 text-admin px-4 py-3 rounded-md text-sm",children:l}),c.jsx(at,{type:"submit",variant:"primary",className:"w-full",disabled:h,children:h?"Logging in...":"Login"})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsxs("div",{className:"text-dark-muted text-sm",children:["Don't have an account?"," ",c.jsx("button",{onClick:t,className:"text-brand-primary hover:underline",children:"Register"})]})})]}),c.jsx(nP,{isOpen:p,onClose:()=>y(!1)})]})},sP=({onSwitchToLogin:t})=>{const{register:e}=Ln(),[n,r]=T.useState({displayName:"",email:"",password:"",confirmPassword:""}),[a,l]=T.useState(""),[u,h]=T.useState(""),[m,p]=T.useState(!1),[y,b]=T.useState([]);T.useEffect(()=>{(async()=>{try{const R=wt(he,"users"),j=await Ga(R),N=[];j.forEach(U=>{const $=U.data().displayName;$&&N.push($.toLowerCase())}),b(N)}catch(R){console.error("Error loading usernames:",R)}})()},[]),T.useEffect(()=>{const k=n.displayName;if(k){if(k.length<3){h("Username must be at least 3 characters");return}if(!/^[a-zA-Z0-9-_]+$/.test(k)){h("Only letters, numbers, hyphens (-) and underscores (_) allowed");return}const R=k.toLowerCase();y.includes(R)?h("This username is already taken"):h("")}else h("")},[n.displayName,y]);const x=async k=>{if(k.preventDefault(),l(""),u){l(u);return}if(n.password!==n.confirmPassword){l("Passwords do not match");return}if(n.password.length<6){l("Password must be at least 6 characters");return}p(!0);try{await e(n.email,n.password,n.displayName)}catch(R){l(R.message||"Failed to register")}finally{p(!1)}};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-bg p-4",children:c.jsxs("div",{className:"w-full max-w-md bg-dark-sidebar rounded-lg shadow-2xl p-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-dark-text mb-2",children:"Create Account"}),c.jsx("p",{className:"text-dark-muted",children:"Join Lumo"})]}),c.jsxs("form",{onSubmit:x,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx(Sn,{label:"Display Name",type:"text",placeholder:"Enter your display name",value:n.displayName,onChange:k=>r({...n,displayName:k.target.value}),required:!0}),u&&c.jsx("p",{className:"text-xs text-admin mt-1",children:u}),n.displayName&&!u&&c.jsx("p",{className:"text-xs text-green-500 mt-1",children:" Username available"})]}),c.jsx(Sn,{label:"Email",type:"email",placeholder:"Enter your email",value:n.email,onChange:k=>r({...n,email:k.target.value}),required:!0}),c.jsx(Sn,{label:"Password",type:"password",placeholder:"Enter your password",value:n.password,onChange:k=>r({...n,password:k.target.value}),required:!0}),c.jsx(Sn,{label:"Confirm Password",type:"password",placeholder:"Confirm your password",value:n.confirmPassword,onChange:k=>r({...n,confirmPassword:k.target.value}),required:!0}),a&&c.jsx("div",{className:"bg-admin/10 border border-admin/30 text-admin px-4 py-3 rounded-md text-sm",children:a}),c.jsx(at,{type:"submit",variant:"primary",className:"w-full",disabled:m||!!u,children:m?"Creating account...":"Register"})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsxs("div",{className:"text-dark-muted text-sm",children:["Already have an account?"," ",c.jsx("button",{onClick:t,className:"text-brand-primary hover:underline",children:"Login"})]})})]})})},iP=({onSwitchToLogin:t})=>{const{resetPassword:e}=Ln(),[n,r]=T.useState(""),[a,l]=T.useState(""),[u,h]=T.useState(!1),[m,p]=T.useState(!1),y=async b=>{b.preventDefault(),l(""),h(!1),p(!0);try{await e(n),h(!0)}catch(x){l(x.message||"Failed to send reset email")}finally{p(!1)}};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-bg p-4",children:c.jsxs("div",{className:"w-full max-w-md bg-dark-sidebar rounded-lg shadow-2xl p-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-dark-text mb-2",children:"Reset Password"}),c.jsx("p",{className:"text-dark-muted",children:"Enter your email to receive a reset link"})]}),c.jsxs("form",{onSubmit:y,className:"space-y-4",children:[c.jsx(Sn,{label:"Email",type:"email",placeholder:"Enter your email",value:n,onChange:b=>r(b.target.value),required:!0}),a&&c.jsx("div",{className:"bg-admin/10 border border-admin/30 text-admin px-4 py-3 rounded-md text-sm",children:a}),u&&c.jsx("div",{className:"bg-green-500/10 border border-green-500/30 text-green-500 px-4 py-3 rounded-md text-sm",children:"Password reset email sent! Check your inbox."}),c.jsx(at,{type:"submit",variant:"primary",className:"w-full",disabled:m,children:m?"Sending...":"Send Reset Link"})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsx("button",{onClick:t,className:"text-brand-primary hover:underline text-sm",children:"Back to Login"})})]})})},aP=({onSwipeLeft:t,onSwipeRight:e,minSwipeDistance:n=50})=>{const r=T.useRef(null),a=T.useRef(null);return{onTouchStart:m=>{a.current=null,r.current=m.targetTouches[0].clientX},onTouchMove:m=>{a.current=m.targetTouches[0].clientX},onTouchEnd:()=>{if(!r.current||!a.current)return;const m=r.current-a.current,p=m>n,y=m<-n;p&&t&&t(),y&&e&&e()}}};var pc;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(pc||(pc={}));class $0 extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const oP=t=>{var e,n;return t?.androidBridge?"android":!((n=(e=t?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},lP=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},a=()=>e!==null?e.name:oP(t),l=()=>a()!=="web",u=b=>{const x=p.get(b);return!!(x?.platforms.has(a())||h(b))},h=b=>{var x;return(x=n.PluginHeaders)===null||x===void 0?void 0:x.find(k=>k.name===b)},m=b=>t.console.error(b),p=new Map,y=(b,x={})=>{const k=p.get(b);if(k)return console.warn(`Capacitor plugin "${b}" already registered. Cannot register plugins twice.`),k.proxy;const R=a(),j=h(b);let N;const U=async()=>(!N&&R in x?N=typeof x[R]=="function"?N=await x[R]():N=x[R]:e!==null&&!N&&"web"in x&&(N=typeof x.web=="function"?N=await x.web():N=x.web),N),$=(E,A)=>{var P,L;if(j){const z=j?.methods.find(M=>A===M.name);if(z)return z.rtype==="promise"?M=>n.nativePromise(b,A.toString(),M):(M,se)=>n.nativeCallback(b,A.toString(),M,se);if(E)return(P=E[A])===null||P===void 0?void 0:P.bind(E)}else{if(E)return(L=E[A])===null||L===void 0?void 0:L.bind(E);throw new $0(`"${b}" plugin is not implemented on ${R}`,pc.Unimplemented)}},I=E=>{let A;const P=(...L)=>{const z=U().then(M=>{const se=$(M,E);if(se){const le=se(...L);return A=le?.remove,le}else throw new $0(`"${b}.${E}()" is not implemented on ${R}`,pc.Unimplemented)});return E==="addListener"&&(z.remove=async()=>A()),z};return P.toString=()=>`${E.toString()}() { [capacitor code] }`,Object.defineProperty(P,"name",{value:E,writable:!1,configurable:!1}),P},O=I("addListener"),B=I("removeListener"),q=(E,A)=>{const P=O({eventName:E},A),L=async()=>{const M=await P;B({eventName:E,callbackId:M},A)},z=new Promise(M=>P.then(()=>M({remove:L})));return z.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await L()},z},w=new Proxy({},{get(E,A){switch(A){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return j?q:O;case"removeListener":return B;default:return I(A)}}});return r[b]=w,p.set(b,{name:b,proxy:w,platforms:new Set([...Object.keys(x),...j?[R]:[]])}),w};return n.convertFileSrc||(n.convertFileSrc=b=>b),n.getPlatform=a,n.handleError=m,n.isNativePlatform=l,n.isPluginAvailable=u,n.registerPlugin=y,n.Exception=$0,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},cP=t=>t.Capacitor=lP(t),Fo=cP(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),up=Fo.registerPlugin;class b1{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const l=this.windowListeners[e];l&&!l.registered&&this.addWindowListener(l),r&&this.sendRetainedArgumentsForEvent(e);const u=async()=>this.removeListener(e,n);return Promise.resolve({remove:u})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const a=this.listeners[e];if(!a){if(r){let l=this.retainedEventArguments[e];l||(l=[]),l.push(n),this.retainedEventArguments[e]=l}return}a.forEach(l=>l(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new Fo.Exception(e,pc.Unimplemented)}unavailable(e="not available"){return new Fo.Exception(e,pc.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const a=r.indexOf(n);this.listeners[e].splice(a,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const Ew=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Cw=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class uP extends b1{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[a,l]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=Cw(a).trim(),l=Cw(l).trim(),n[a]=l}),n}async setCookie(e){try{const n=Ew(e.key),r=Ew(e.value),a=`; expires=${(e.expires||"").replace("expires=","")}`,l=(e.path||"/").replace("path=",""),u=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${a}; path=${l}; ${u};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}up("CapacitorCookies",{web:()=>new uP});const dP=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const a=r.result;e(a.indexOf(",")>=0?a.split(",")[1]:a)},r.onerror=a=>n(a),r.readAsDataURL(t)}),hP=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(a=>a.toLocaleLowerCase()).reduce((a,l,u)=>(a[l]=t[e[u]],a),{})},fP=(t,e=!0)=>t?Object.entries(t).reduce((r,a)=>{const[l,u]=a;let h,m;return Array.isArray(u)?(m="",u.forEach(p=>{h=e?encodeURIComponent(p):p,m+=`${l}=${h}&`}),m.slice(0,-1)):(h=e?encodeURIComponent(u):u,m=`${l}=${h}`),`${r}&${m}`},"").substr(1):null,mP=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),a=hP(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(a.includes("application/x-www-form-urlencoded")){const l=new URLSearchParams;for(const[u,h]of Object.entries(t.data||{}))l.set(u,h);n.body=l.toString()}else if(a.includes("multipart/form-data")||t.data instanceof FormData){const l=new FormData;if(t.data instanceof FormData)t.data.forEach((h,m)=>{l.append(m,h)});else for(const h of Object.keys(t.data))l.append(h,t.data[h]);n.body=l;const u=new Headers(n.headers);u.delete("content-type"),n.headers=u}else(a.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class pP extends b1{async request(e){const n=mP(e,e.webFetchExtra),r=fP(e.params,e.shouldEncodeUrlParams),a=r?`${e.url}?${r}`:e.url,l=await fetch(a,n),u=l.headers.get("content-type")||"";let{responseType:h="text"}=l.ok?e:{};u.includes("application/json")&&(h="json");let m,p;switch(h){case"arraybuffer":case"blob":p=await l.blob(),m=await dP(p);break;case"json":m=await l.json();break;case"document":case"text":default:m=await l.text()}const y={};return l.headers.forEach((b,x)=>{y[x]=b}),{data:m,headers:y,status:l.status,url:l.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}up("CapacitorHttp",{web:()=>new pP});var Tw;(function(t){t.Dark="DARK",t.Light="LIGHT",t.Default="DEFAULT"})(Tw||(Tw={}));var kw;(function(t){t.StatusBar="StatusBar",t.NavigationBar="NavigationBar"})(kw||(kw={}));class gP extends b1{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}up("SystemBars",{web:()=>new gP});const vP=()=>{const[t,e]=T.useState({camera:"unknown",microphone:"unknown",notifications:"unknown"});return T.useEffect(()=>{if(Fo.getPlatform()!=="android")return;const r=setTimeout(async()=>{console.log("[AndroidPermissions] Requesting permissions on Android startup...");try{(await navigator.mediaDevices.getUserMedia({video:!0,audio:!0})).getTracks().forEach(l=>l.stop()),e(l=>({...l,camera:"granted",microphone:"granted"})),console.log("[AndroidPermissions] Camera and microphone permissions granted")}catch(a){console.log("[AndroidPermissions] Camera/microphone permission result:",a.name),a.name==="NotAllowedError"&&e(l=>({...l,camera:"denied",microphone:"denied"}))}if("Notification"in window&&Notification.permission==="default")try{const a=await Notification.requestPermission();e(l=>({...l,notifications:a})),console.log("[AndroidPermissions] Notification permission:",a)}catch(a){console.log("[AndroidPermissions] Notification permission error:",a)}},1e3);return()=>clearTimeout(r)},[]),t};function yP(t){return je({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111.1 8 0 119.1 0 256s111.1 248 248 248 248-111.1 248-248S384.9 8 248 8zm100.7 364.9c-4.2 0-6.8-1.3-10.7-3.6-62.4-37.6-135-39.2-206.7-24.5-3.9 1-9 2.6-11.9 2.6-9.7 0-15.8-7.7-15.8-15.8 0-10.3 6.1-15.2 13.6-16.8 81.9-18.1 165.6-16.5 237 26.2 6.1 3.9 9.7 7.4 9.7 16.5s-7.1 15.4-15.2 15.4zm26.9-65.6c-5.2 0-8.7-2.3-12.3-4.2-62.5-37-155.7-51.9-238.6-29.4-4.8 1.3-7.4 2.6-11.9 2.6-10.7 0-19.4-8.7-19.4-19.4s5.2-17.8 15.5-20.7c27.8-7.8 56.2-13.6 97.8-13.6 64.9 0 127.6 16.1 177 45.5 8.1 4.8 11.3 11 11.3 19.7-.1 10.8-8.5 19.5-19.4 19.5zm31-76.2c-5.2 0-8.4-1.3-12.9-3.9-71.2-42.5-198.5-52.7-280.9-29.7-3.6 1-8.1 2.6-12.9 2.6-13.2 0-23.3-10.3-23.3-23.6 0-13.6 8.4-21.3 17.4-23.9 35.2-10.3 74.6-15.2 117.5-15.2 73 0 149.5 15.2 205.4 47.8 7.8 4.5 12.9 10.7 12.9 22.6 0 13.6-11 23.3-23.2 23.3z"},child:[]}]})(t)}function Nw(t){return je({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(t)}function bP(t){return je({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(t)}function Aw(t){return je({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(t)}function xP(t){return je({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function x1(t){return je({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"},child:[]}]})(t)}function ZT(t){return je({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function dp(t){return je({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M440.667 182.109l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l14.623-81.891C377.123 38.754 371.468 32 363.997 32h-40.632a12 12 0 0 0-11.813 9.891L296.175 128H197.54l14.623-81.891C213.477 38.754 207.822 32 200.35 32h-40.632a12 12 0 0 0-11.813 9.891L132.528 128H53.432a12 12 0 0 0-11.813 9.891l-7.143 40C33.163 185.246 38.818 192 46.289 192h74.81L98.242 320H19.146a12 12 0 0 0-11.813 9.891l-7.143 40C-1.123 377.246 4.532 384 12.003 384h74.81L72.19 465.891C70.877 473.246 76.532 480 84.003 480h40.632a12 12 0 0 0 11.813-9.891L151.826 384h98.634l-14.623 81.891C234.523 473.246 240.178 480 247.65 480h40.632a12 12 0 0 0 11.813-9.891L315.472 384h79.096a12 12 0 0 0 11.813-9.891l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l22.857-128h79.096a12 12 0 0 0 11.813-9.891zM261.889 320h-98.634l22.857-128h98.634l-22.857 128z"},child:[]}]})(t)}function _P(t){return je({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.52 32 0 146.496 0 288v48a32 32 0 0 0 17.689 28.622l14.383 7.191C34.083 431.903 83.421 480 144 480h24c13.255 0 24-10.745 24-24V280c0-13.255-10.745-24-24-24h-24c-31.342 0-59.671 12.879-80 33.627V288c0-105.869 86.131-192 192-192s192 86.131 192 192v1.627C427.671 268.879 399.342 256 368 256h-24c-13.255 0-24 10.745-24 24v176c0 13.255 10.745 24 24 24h24c60.579 0 109.917-48.098 111.928-108.187l14.382-7.191A32 32 0 0 0 512 336v-48c0-141.479-114.496-256-256-256z"},child:[]}]})(t)}function _1(t){return je({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M633.82 458.1l-157.8-121.96C488.61 312.13 496 285.01 496 256v-48c0-8.84-7.16-16-16-16h-16c-8.84 0-16 7.16-16 16v48c0 17.92-3.96 34.8-10.72 50.2l-26.55-20.52c3.1-9.4 5.28-19.22 5.28-29.67V96c0-53.02-42.98-96-96-96s-96 42.98-96 96v45.36L45.47 3.37C38.49-2.05 28.43-.8 23.01 6.18L3.37 31.45C-2.05 38.42-.8 48.47 6.18 53.9l588.36 454.73c6.98 5.43 17.03 4.17 22.46-2.81l19.64-25.27c5.41-6.97 4.16-17.02-2.82-22.45zM400 464h-56v-33.77c11.66-1.6 22.85-4.54 33.67-8.31l-50.11-38.73c-6.71.4-13.41.87-20.35.2-55.85-5.45-98.74-48.63-111.18-101.85L144 241.31v6.85c0 89.64 63.97 169.55 152 181.69V464h-56c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function wP(t){return je({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M176 352c53.02 0 96-42.98 96-96V96c0-53.02-42.98-96-96-96S80 42.98 80 96v160c0 53.02 42.98 96 96 96zm160-160h-16c-8.84 0-16 7.16-16 16v48c0 74.8-64.49 134.82-140.79 127.38C96.71 376.89 48 317.11 48 250.3V208c0-8.84-7.16-16-16-16H16c-8.84 0-16 7.16-16 16v40.16c0 89.64 63.97 169.55 152 181.69V464H96c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16h-56v-33.77C285.71 418.47 352 344.9 352 256v-48c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function SP(t){return je({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M268.2 381.4l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48c-10.7 4.6-16.5 16.1-13.9 27.5l24 104c2.5 10.8 12.1 18.6 23.4 18.6 100.7 0 193.7-32.4 269.7-86.9l-80-61.8c-10.9 6.5-22.1 12.7-33.6 18.1zm365.6 76.7L475.1 335.5C537.9 256.4 576 156.9 576 48c0-11.2-7.7-20.9-18.6-23.4l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-12.2 26.1-27.9 50.3-46 72.8L45.5 3.4C38.5-2 28.5-.8 23 6.2L3.4 31.4c-5.4 7-4.2 17 2.8 22.4l588.4 454.7c7 5.4 17 4.2 22.5-2.8l19.6-25.3c5.4-6.8 4.1-16.9-2.9-22.3z"},child:[]}]})(t)}function Rw(t){return je({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(t)}function EP(t){return je({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function CP(t){return je({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M633.8 458.1L362.3 248.3C412.1 230.7 448 183.8 448 128 448 57.3 390.7 0 320 0c-67.1 0-121.5 51.8-126.9 117.4L45.5 3.4C38.5-2 28.5-.8 23 6.2L3.4 31.4c-5.4 7-4.2 17 2.8 22.4l588.4 454.7c7 5.4 17 4.2 22.5-2.8l19.6-25.3c5.4-6.8 4.1-16.9-2.9-22.3zM96 422.4V464c0 26.5 21.5 48 48 48h350.2L207.4 290.3C144.2 301.3 96 356 96 422.4z"},child:[]}]})(t)}function TP(t){return je({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M633.8 458.1l-55-42.5c15.4-1.4 29.2-13.7 29.2-31.1v-257c0-25.5-29.1-40.4-50.4-25.8L448 177.3v137.2l-32-24.7v-178c0-26.4-21.4-47.8-47.8-47.8H123.9L45.5 3.4C38.5-2 28.5-.8 23 6.2L3.4 31.4c-5.4 7-4.2 17 2.8 22.4L42.7 82 416 370.6l178.5 138c7 5.4 17 4.2 22.5-2.8l19.6-25.3c5.5-6.9 4.2-17-2.8-22.4zM32 400.2c0 26.4 21.4 47.8 47.8 47.8h288.4c11.2 0 21.4-4 29.6-10.5L32 154.7v245.5z"},child:[]}]})(t)}function e3(t){return je({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M336.2 64H47.8C21.4 64 0 85.4 0 111.8v288.4C0 426.6 21.4 448 47.8 448h288.4c26.4 0 47.8-21.4 47.8-47.8V111.8c0-26.4-21.4-47.8-47.8-47.8zm189.4 37.7L416 177.3v157.4l109.6 75.5c21.2 14.6 50.4-.3 50.4-25.8V127.5c0-25.4-29.1-40.4-50.4-25.8z"},child:[]}]})(t)}function t3(t){return je({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zm233.32-51.08c-11.17-7.33-26.18-4.24-33.51 6.95-7.34 11.17-4.22 26.18 6.95 33.51 66.27 43.49 105.82 116.6 105.82 195.58 0 78.98-39.55 152.09-105.82 195.58-11.17 7.32-14.29 22.34-6.95 33.5 7.04 10.71 21.93 14.56 33.51 6.95C528.27 439.58 576 351.33 576 256S528.27 72.43 448.35 19.97zM480 256c0-63.53-32.06-121.94-85.77-156.24-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36 6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.54 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z"},child:[]}]})(t)}const ws=({isOpen:t,onClose:e,title:n,children:r,size:a="md",showCloseButton:l=!0})=>{if(T.useEffect(()=>{const h=m=>{m.key==="Escape"&&t&&e()};return t?(document.body.style.overflow="hidden",document.addEventListener("keydown",h)):document.body.style.overflow="unset",()=>{document.body.style.overflow="unset",document.removeEventListener("keydown",h)}},[t,e]),!t)return null;const u={sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl"};return c.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center",children:[c.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:e}),c.jsxs("div",{className:Vt("relative bg-dark-sidebar rounded-lg shadow-2xl","w-full mx-4 max-h-[90vh] overflow-y-auto",u[a]),children:[(n||l)&&c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-dark-hover",children:[c.jsx("h2",{className:"text-xl font-semibold text-dark-text",children:n}),l&&c.jsx("button",{onClick:e,className:"text-dark-muted hover:text-dark-text transition-colors",children:c.jsx($n,{size:24})})]}),c.jsx("div",{className:"p-6",children:r})]})]})},w1={premium:{id:"premium",label:"Premium Member",description:"Premium Member",icon:Uo,color:"#F47FFF"},admin:{id:"admin",label:"Admin",description:"Server Administrator",icon:IT,color:"#f23f42"},verified:{id:"verified",label:"Verified",description:"Verified Member",icon:jM,color:"#3ba55c"},developer:{id:"developer",label:"Developer",description:"App Developer",icon:TM,color:"#5865F2"}},kP=t=>w1[t];class NP{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const n of this._parts)e.push(n);return AP(e).buffer}}function AP(t){let e=0;for(const a of t)e+=a.byteLength;const n=new Uint8Array(e);let r=0;for(const a of t){const l=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);n.set(l,r),r+=a.byteLength}return n}function n3(t){return new RP(t).unpack()}function r3(t){const e=new jP,n=e.pack(t);return n instanceof Promise?n.then(()=>e.getBuffer()):e.getBuffer()}class RP{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let n;if((n=e^160)<=15)return this.unpack_raw(n);if((n=e^176)<=15)return this.unpack_string(n);if((n=e^144)<=15)return this.unpack_array(n);if((n=e^128)<=15)return this.unpack_map(n);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),n=(e[0]&255)*256+(e[1]&255);return this.index+=2,n}unpack_uint32(){const e=this.read(4),n=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,n}unpack_uint64(){const e=this.read(8),n=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,n}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,n}unpack_string(e){const n=this.read(e);let r=0,a="",l,u;for(;r<e;)l=n[r],l<160?(u=l,r++):(l^192)<32?(u=(l&31)<<6|n[r+1]&63,r+=2):(l^224)<16?(u=(l&15)<<12|(n[r+1]&63)<<6|n[r+2]&63,r+=3):(u=(l&7)<<18|(n[r+1]&63)<<12|(n[r+2]&63)<<6|n[r+3]&63,r+=4),a+=String.fromCodePoint(u);return this.index+=e,a}unpack_array(e){const n=new Array(e);for(let r=0;r<e;r++)n[r]=this.unpack();return n}unpack_map(e){const n={};for(let r=0;r<e;r++){const a=this.unpack();n[a]=this.unpack()}return n}unpack_float(){const e=this.unpack_uint32(),n=e>>31,r=(e>>23&255)-127,a=e&8388607|8388608;return(n===0?1:-1)*a*2**(r-23)}unpack_double(){const e=this.unpack_uint32(),n=this.unpack_uint32(),r=e>>31,a=(e>>20&2047)-1023,u=(e&1048575|1048576)*2**(a-20)+n*2**(a-52);return(r===0?1:-1)*u}read(e){const n=this.index;if(n+e<=this.length)return this.dataView.subarray(n,n+e);throw new Error("BinaryPackFailure: read index out of range")}}class jP{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const n=e.constructor;if(e instanceof Array){const r=this.pack_array(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const r=e;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const r=this.pack_object(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const n=e.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const n=this._textEncoder.encode(e),r=n.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(e){const n=e.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const r=a=>{if(a<n){const l=this.pack(e[a]);return l instanceof Promise?l.then(()=>r(a+1)):r(a+1)}};return r(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let n=0;e<0&&(n=1,e=-e);const r=Math.floor(Math.log(e)/Math.LN2),a=e/2**r-1,l=Math.floor(a*2**52),u=2**32,h=n<<31|r+1023<<20|l/u&1048575,m=l%u;this._bufferBuilder.append(203),this.pack_int32(h),this.pack_int32(m)}pack_object(e){const n=Object.keys(e),r=n.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const a=l=>{if(l<n.length){const u=n[l];if(e.hasOwnProperty(u)){this.pack(u);const h=this.pack(e[u]);if(h instanceof Promise)return h.then(()=>a(l+1))}return a(l+1)}};return a(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const n=e&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(e){const n=e/4294967296,r=e%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const n=Math.floor(e/4294967296),r=e%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new NP,this._textEncoder=new TextEncoder}}let s3=!0,i3=!0;function qu(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseFloat(r[n],10)}function Wo(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,a=r.addEventListener;r.addEventListener=function(u,h){if(u!==e)return a.apply(this,arguments);const m=p=>{const y=n(p);y&&(h.handleEvent?h.handleEvent(y):h(y))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(h,m),a.apply(this,[u,m])};const l=r.removeEventListener;r.removeEventListener=function(u,h){if(u!==e||!this._eventMap||!this._eventMap[e])return l.apply(this,arguments);if(!this._eventMap[e].has(h))return l.apply(this,arguments);const m=this._eventMap[e].get(h);return this._eventMap[e].delete(h),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,l.apply(this,[u,m])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(u){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),u&&this.addEventListener(e,this["_on"+e]=u)},enumerable:!0,configurable:!0})}function IP(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(s3=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function DP(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(i3=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function a3(){if(typeof window=="object"){if(s3)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function S1(t,e){i3&&console.warn(t+" is deprecated, please use "+e+" instead.")}function MP(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(a=>a.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=parseInt(qu(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(qu(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(qu(n.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=qu(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function jw(t){return Object.prototype.toString.call(t)==="[object Object]"}function o3(t){return jw(t)?Object.keys(t).reduce(function(e,n){const r=jw(t[n]),a=r?o3(t[n]):t[n],l=r&&!Object.keys(a).length;return a===void 0||l?e:Object.assign(e,{[n]:a})},{}):t}function Bv(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?Bv(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(a=>{Bv(t,t.get(a),n)})}))}function Iw(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",a=new Map;if(e===null)return a;const l=[];return t.forEach(u=>{u.type==="track"&&u.trackIdentifier===e.id&&l.push(u)}),l.forEach(u=>{t.forEach(h=>{h.type===r&&h.trackId===u.id&&Bv(t,h,a)})}),a}const Dw=a3;function l3(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(h){if(typeof h!="object"||h.mandatory||h.optional)return h;const m={};return Object.keys(h).forEach(p=>{if(p==="require"||p==="advanced"||p==="mediaSource")return;const y=typeof h[p]=="object"?h[p]:{ideal:h[p]};y.exact!==void 0&&typeof y.exact=="number"&&(y.min=y.max=y.exact);const b=function(x,k){return x?x+k.charAt(0).toUpperCase()+k.slice(1):k==="deviceId"?"sourceId":k};if(y.ideal!==void 0){m.optional=m.optional||[];let x={};typeof y.ideal=="number"?(x[b("min",p)]=y.ideal,m.optional.push(x),x={},x[b("max",p)]=y.ideal,m.optional.push(x)):(x[b("",p)]=y.ideal,m.optional.push(x))}y.exact!==void 0&&typeof y.exact!="number"?(m.mandatory=m.mandatory||{},m.mandatory[b("",p)]=y.exact):["min","max"].forEach(x=>{y[x]!==void 0&&(m.mandatory=m.mandatory||{},m.mandatory[b(x,p)]=y[x])})}),h.advanced&&(m.optional=(m.optional||[]).concat(h.advanced)),m},a=function(h,m){if(e.version>=61)return m(h);if(h=JSON.parse(JSON.stringify(h)),h&&typeof h.audio=="object"){const p=function(y,b,x){b in y&&!(x in y)&&(y[x]=y[b],delete y[b])};h=JSON.parse(JSON.stringify(h)),p(h.audio,"autoGainControl","googAutoGainControl"),p(h.audio,"noiseSuppression","googNoiseSuppression"),h.audio=r(h.audio)}if(h&&typeof h.video=="object"){let p=h.video.facingMode;p=p&&(typeof p=="object"?p:{ideal:p});const y=e.version<66;if(p&&(p.exact==="user"||p.exact==="environment"||p.ideal==="user"||p.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!y)){delete h.video.facingMode;let b;if(p.exact==="environment"||p.ideal==="environment"?b=["back","rear"]:(p.exact==="user"||p.ideal==="user")&&(b=["front"]),b)return n.mediaDevices.enumerateDevices().then(x=>{x=x.filter(R=>R.kind==="videoinput");let k=x.find(R=>b.some(j=>R.label.toLowerCase().includes(j)));return!k&&x.length&&b.includes("back")&&(k=x[x.length-1]),k&&(h.video.deviceId=p.exact?{exact:k.deviceId}:{ideal:k.deviceId}),h.video=r(h.video),Dw("chrome: "+JSON.stringify(h)),m(h)})}h.video=r(h.video)}return Dw("chrome: "+JSON.stringify(h)),m(h)},l=function(h){return e.version>=64?h:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[h.name]||h.name,message:h.message,constraint:h.constraint||h.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},u=function(h,m,p){a(h,y=>{n.webkitGetUserMedia(y,m,b=>{p&&p(l(b))})})};if(n.getUserMedia=u.bind(n),n.mediaDevices.getUserMedia){const h=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(m){return a(m,p=>h(p).then(y=>{if(p.audio&&!y.getAudioTracks().length||p.video&&!y.getVideoTracks().length)throw y.getTracks().forEach(b=>{b.stop()}),new DOMException("","NotFoundError");return y},y=>Promise.reject(l(y))))}}}function c3(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function u3(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",a=>{let l;t.RTCPeerConnection.prototype.getReceivers?l=this.getReceivers().find(h=>h.track&&h.track.id===a.track.id):l={track:a.track};const u=new Event("track");u.track=a.track,u.receiver=l,u.transceiver={receiver:l},u.streams=[r.stream],this.dispatchEvent(u)}),r.stream.getTracks().forEach(a=>{let l;t.RTCPeerConnection.prototype.getReceivers?l=this.getReceivers().find(h=>h.track&&h.track.id===a.id):l={track:a};const u=new Event("track");u.track=a,u.receiver=l,u.transceiver={receiver:l},u.streams=[r.stream],this.dispatchEvent(u)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Wo(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function d3(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(a,l){return{track:l,get dtmf(){return this._dtmf===void 0&&(l.kind==="audio"?this._dtmf=a.createDTMFSender(l):this._dtmf=null),this._dtmf},_pc:a}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const a=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(h,m){let p=a.apply(this,arguments);return p||(p=e(this,h),this._senders.push(p)),p};const l=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(h){l.apply(this,arguments);const m=this._senders.indexOf(h);m!==-1&&this._senders.splice(m,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(l){this._senders=this._senders||[],n.apply(this,[l]),l.getTracks().forEach(u=>{this._senders.push(e(this,u))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(l){this._senders=this._senders||[],r.apply(this,[l]),l.getTracks().forEach(u=>{const h=this._senders.find(m=>m.track===u);h&&this._senders.splice(this._senders.indexOf(h),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(a=>a._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function h3(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const l=n.apply(this,[]);return l.forEach(u=>u._pc=this),l});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const l=r.apply(this,arguments);return l._pc=this,l}),t.RTCRtpSender.prototype.getStats=function(){const l=this;return this._pc.getStats().then(u=>Iw(u,l.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const a=n.apply(this,[]);return a.forEach(l=>l._pc=this),a}),Wo(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const a=this;return this._pc.getStats().then(l=>Iw(l,a.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let a,l,u;return this.getSenders().forEach(h=>{h.track===r&&(a?u=!0:a=h)}),this.getReceivers().forEach(h=>(h.track===r&&(l?u=!0:l=h),h.track===r)),u||a&&l?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):a?a.getStats():l?l.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function f3(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(u=>this._shimmedLocalStreams[u][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(u,h){if(!h)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const m=e.apply(this,arguments);return this._shimmedLocalStreams[h.id]?this._shimmedLocalStreams[h.id].indexOf(m)===-1&&this._shimmedLocalStreams[h.id].push(m):this._shimmedLocalStreams[h.id]=[h,m],m};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(u){this._shimmedLocalStreams=this._shimmedLocalStreams||{},u.getTracks().forEach(p=>{if(this.getSenders().find(b=>b.track===p))throw new DOMException("Track already exists.","InvalidAccessError")});const h=this.getSenders();n.apply(this,arguments);const m=this.getSenders().filter(p=>h.indexOf(p)===-1);this._shimmedLocalStreams[u.id]=[u].concat(m)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[u.id],r.apply(this,arguments)};const a=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},u&&Object.keys(this._shimmedLocalStreams).forEach(h=>{const m=this._shimmedLocalStreams[h].indexOf(u);m!==-1&&this._shimmedLocalStreams[h].splice(m,1),this._shimmedLocalStreams[h].length===1&&delete this._shimmedLocalStreams[h]}),a.apply(this,arguments)}}function m3(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return f3(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const y=n.apply(this);return this._reverseStreams=this._reverseStreams||{},y.map(b=>this._reverseStreams[b.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(y){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},y.getTracks().forEach(b=>{if(this.getSenders().find(k=>k.track===b))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[y.id]){const b=new t.MediaStream(y.getTracks());this._streams[y.id]=b,this._reverseStreams[b.id]=y,y=b}r.apply(this,[y])};const a=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(y){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},a.apply(this,[this._streams[y.id]||y]),delete this._reverseStreams[this._streams[y.id]?this._streams[y.id].id:y.id],delete this._streams[y.id]},t.RTCPeerConnection.prototype.addTrack=function(y,b){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const x=[].slice.call(arguments,1);if(x.length!==1||!x[0].getTracks().find(j=>j===y))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(j=>j.track===y))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const R=this._streams[b.id];if(R)R.addTrack(y),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const j=new t.MediaStream([y]);this._streams[b.id]=j,this._reverseStreams[j.id]=b,this.addStream(j)}return this.getSenders().find(j=>j.track===y)};function l(p,y){let b=y.sdp;return Object.keys(p._reverseStreams||[]).forEach(x=>{const k=p._reverseStreams[x],R=p._streams[k.id];b=b.replace(new RegExp(R.id,"g"),k.id)}),new RTCSessionDescription({type:y.type,sdp:b})}function u(p,y){let b=y.sdp;return Object.keys(p._reverseStreams||[]).forEach(x=>{const k=p._reverseStreams[x],R=p._streams[k.id];b=b.replace(new RegExp(k.id,"g"),R.id)}),new RTCSessionDescription({type:y.type,sdp:b})}["createOffer","createAnswer"].forEach(function(p){const y=t.RTCPeerConnection.prototype[p],b={[p](){const x=arguments;return arguments.length&&typeof arguments[0]=="function"?y.apply(this,[R=>{const j=l(this,R);x[0].apply(null,[j])},R=>{x[1]&&x[1].apply(null,R)},arguments[2]]):y.apply(this,arguments).then(R=>l(this,R))}};t.RTCPeerConnection.prototype[p]=b[p]});const h=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?h.apply(this,arguments):(arguments[0]=u(this,arguments[0]),h.apply(this,arguments))};const m=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const p=m.get.apply(this);return p.type===""?p:l(this,p)}}),t.RTCPeerConnection.prototype.removeTrack=function(y){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!y._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(y._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let x;Object.keys(this._streams).forEach(k=>{this._streams[k].getTracks().find(j=>y.track===j)&&(x=this._streams[k])}),x&&(x.getTracks().length===1?this.removeStream(this._reverseStreams[x.id]):x.removeTrack(y.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Fv(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],a={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=a[n]})}function p3(t,e){Wo(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const Mw=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:p3,shimAddTrackRemoveTrack:m3,shimAddTrackRemoveTrackWithNative:f3,shimGetSendersWithDtmf:d3,shimGetUserMedia:l3,shimMediaStream:c3,shimOnTrack:u3,shimPeerConnection:Fv,shimSenderReceiverGetStats:h3},Symbol.toStringTag,{value:"Module"}));function g3(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(a,l,u){S1("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(a).then(l,u)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const a=function(u,h,m){h in u&&!(m in u)&&(u[m]=u[h],delete u[h])},l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(u){return typeof u=="object"&&typeof u.audio=="object"&&(u=JSON.parse(JSON.stringify(u)),a(u.audio,"autoGainControl","mozAutoGainControl"),a(u.audio,"noiseSuppression","mozNoiseSuppression")),l(u)},r&&r.prototype.getSettings){const u=r.prototype.getSettings;r.prototype.getSettings=function(){const h=u.apply(this,arguments);return a(h,"mozAutoGainControl","autoGainControl"),a(h,"mozNoiseSuppression","noiseSuppression"),h}}if(r&&r.prototype.applyConstraints){const u=r.prototype.applyConstraints;r.prototype.applyConstraints=function(h){return this.kind==="audio"&&typeof h=="object"&&(h=JSON.parse(JSON.stringify(h)),a(h,"autoGainControl","mozAutoGainControl"),a(h,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[h])}}}}function PP(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const a=new DOMException("getDisplayMedia without video constraints is undefined");return a.name="NotFoundError",a.code=8,Promise.reject(a)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function v3(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function $v(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(a){const l=t.RTCPeerConnection.prototype[a],u={[a](){return arguments[0]=new(a==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),l.apply(this,arguments)}};t.RTCPeerConnection.prototype[a]=u[a]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[l,u,h]=arguments;return r.apply(this,[l||null]).then(m=>{if(e.version<53&&!u)try{m.forEach(p=>{p.type=n[p.type]||p.type})}catch(p){if(p.name!=="TypeError")throw p;m.forEach((y,b)=>{m.set(b,Object.assign({},y,{type:n[y.type]||y.type}))})}return m}).then(u,h)}}function y3(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const a=e.apply(this,[]);return a.forEach(l=>l._pc=this),a});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const a=n.apply(this,arguments);return a._pc=this,a}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function b3(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(a=>a._pc=this),r}),Wo(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function x3(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){S1("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function _3(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function w3(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const a=r.length>0;a&&r.forEach(u=>{if("rid"in u&&!/^[a-z0-9]{0,16}$/i.test(u.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in u&&!(parseFloat(u.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in u&&!(parseFloat(u.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const l=e.apply(this,arguments);if(a){const{sender:u}=l,h=u.getParameters();(!("encodings"in h)||h.encodings.length===1&&Object.keys(h.encodings[0]).length===0)&&(h.encodings=r,u.sendEncodings=r,this.setParametersPromises.push(u.setParameters(h).then(()=>{delete u.sendEncodings}).catch(()=>{delete u.sendEncodings})))}return l})}function S3(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function E3(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function C3(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const Pw=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:w3,shimCreateAnswer:C3,shimCreateOffer:E3,shimGetDisplayMedia:PP,shimGetParameters:S3,shimGetUserMedia:g3,shimOnTrack:v3,shimPeerConnection:$v,shimRTCDataChannel:_3,shimReceiverGetStats:b3,shimRemoveStream:x3,shimSenderGetStats:y3},Symbol.toStringTag,{value:"Module"}));function T3(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(a=>e.call(this,a,r)),r.getVideoTracks().forEach(a=>e.call(this,a,r))},t.RTCPeerConnection.prototype.addTrack=function(r,...a){return a&&a.forEach(l=>{this._localStreams?this._localStreams.includes(l)||this._localStreams.push(l):this._localStreams=[l]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const a=n.getTracks();this.getSenders().forEach(l=>{a.includes(l.track)&&this.removeTrack(l)})})}}function k3(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(a=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(a))return;this._remoteStreams.push(a);const l=new Event("addstream");l.stream=a,this.dispatchEvent(l)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(a){a.streams.forEach(l=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(l)>=0)return;r._remoteStreams.push(l);const u=new Event("addstream");u.stream=l,r.dispatchEvent(u)})}),e.apply(r,arguments)}}}function N3(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,a=e.setLocalDescription,l=e.setRemoteDescription,u=e.addIceCandidate;e.createOffer=function(p,y){const b=arguments.length>=2?arguments[2]:arguments[0],x=n.apply(this,[b]);return y?(x.then(p,y),Promise.resolve()):x},e.createAnswer=function(p,y){const b=arguments.length>=2?arguments[2]:arguments[0],x=r.apply(this,[b]);return y?(x.then(p,y),Promise.resolve()):x};let h=function(m,p,y){const b=a.apply(this,[m]);return y?(b.then(p,y),Promise.resolve()):b};e.setLocalDescription=h,h=function(m,p,y){const b=l.apply(this,[m]);return y?(b.then(p,y),Promise.resolve()):b},e.setRemoteDescription=h,h=function(m,p,y){const b=u.apply(this,[m]);return y?(b.then(p,y),Promise.resolve()):b},e.addIceCandidate=h}function A3(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=a=>r(R3(a))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,a,l){e.mediaDevices.getUserMedia(r).then(a,l)}).bind(e))}function R3(t){return t&&t.video!==void 0?Object.assign({},t,{video:o3(t.video)}):t}function j3(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,a){if(r&&r.iceServers){const l=[];for(let u=0;u<r.iceServers.length;u++){let h=r.iceServers[u];h.urls===void 0&&h.url?(S1("RTCIceServer.url","RTCIceServer.urls"),h=JSON.parse(JSON.stringify(h)),h.urls=h.url,delete h.url,l.push(h)):l.push(r.iceServers[u])}r.iceServers=l}return new e(r,a)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function I3(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function D3(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const a=this.getTransceivers().find(u=>u.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):r.offerToReceiveAudio===!0&&!a&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const l=this.getTransceivers().find(u=>u.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&l?l.direction==="sendrecv"?l.setDirection?l.setDirection("sendonly"):l.direction="sendonly":l.direction==="recvonly"&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive"):r.offerToReceiveVideo===!0&&!l&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function M3(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const Ow=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:M3,shimCallbacksAPI:N3,shimConstraints:R3,shimCreateOfferLegacy:D3,shimGetUserMedia:A3,shimLocalStreamsAPI:T3,shimRTCIceServerUrls:j3,shimRemoteStreamsAPI:k3,shimTrackEventTransceiver:I3},Symbol.toStringTag,{value:"Module"}));var H0={exports:{}},Lw;function OP(){return Lw||(Lw=1,(function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(n){return n.split(`
m=`).map((a,l)=>(l>0?"m="+a:a).trim()+`\r
`)},e.getDescription=function(n){const r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){const r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(a=>a.indexOf(r)===0)},e.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const a={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let l=8;l<r.length;l+=2)switch(r[l]){case"raddr":a.relatedAddress=r[l+1];break;case"rport":a.relatedPort=parseInt(r[l+1],10);break;case"tcptype":a.tcpType=r[l+1];break;case"ufrag":a.ufrag=r[l+1],a.usernameFragment=r[l+1];break;default:a[r[l]]===void 0&&(a[r[l]]=r[l+1]);break}return a},e.writeCandidate=function(n){const r=[];r.push(n.foundation);const a=n.component;a==="rtp"?r.push(1):a==="rtcp"?r.push(2):r.push(a),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const l=n.type;return r.push("typ"),r.push(l),l!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let r=n.substring(9).split(" ");const a={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),a.name=r[0],a.clockRate=parseInt(r[1],10),a.channels=r.length===3?parseInt(r[2],10):1,a.numChannels=a.channels,a},e.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const a=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(a!==1?"/"+a:"")+`\r
`},e.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const r={};let a;const l=n.substring(n.indexOf(" ")+1).split(";");for(let u=0;u<l.length;u++)a=l[u].trim().split("="),r[a[0].trim()]=a[1];return r},e.writeFmtp=function(n){let r="",a=n.payloadType;if(n.preferredPayloadType!==void 0&&(a=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const l=[];Object.keys(n.parameters).forEach(u=>{n.parameters[u]!==void 0?l.push(u+"="+n.parameters[u]):l.push(u)}),r+="a=fmtp:"+a+" "+l.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){let r="",a=n.payloadType;return n.preferredPayloadType!==void 0&&(a=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(l=>{r+="a=rtcp-fb:"+a+" "+l.type+(l.parameter&&l.parameter.length?" "+l.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){const r=n.indexOf(" "),a={ssrc:parseInt(n.substring(7,r),10)},l=n.indexOf(":",r);return l>-1?(a.attribute=n.substring(r+1,l),a.value=n.substring(l+1)):a.attribute=n.substring(r+1),a},e.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(a=>parseInt(a,10))}},e.getMid=function(n){const r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:e.matchPrefix(n+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){let a="a=setup:"+r+`\r
`;return n.fingerprints.forEach(l=>{a+="a=fingerprint:"+l.algorithm+" "+l.value+`\r
`}),a},e.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){return e.matchPrefix(n+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,r){const a=e.matchPrefix(n+r,"a=ice-ufrag:")[0],l=e.matchPrefix(n+r,"a=ice-pwd:")[0];return a&&l?{usernameFragment:a.substring(12),password:l.substring(10)}:null},e.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},l=e.splitLines(n)[0].split(" ");r.profile=l[2];for(let h=3;h<l.length;h++){const m=l[h],p=e.matchPrefix(n,"a=rtpmap:"+m+" ")[0];if(p){const y=e.parseRtpMap(p),b=e.matchPrefix(n,"a=fmtp:"+m+" ");switch(y.parameters=b.length?e.parseFmtp(b[0]):{},y.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+m+" ").map(e.parseRtcpFb),r.codecs.push(y),y.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(y.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(h=>{r.headerExtensions.push(e.parseExtmap(h))});const u=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(h=>{u.forEach(m=>{h.rtcpFeedback.find(y=>y.type===m.type&&y.parameter===m.parameter)||h.rtcpFeedback.push(m)})}),r},e.writeRtpDescription=function(n,r){let a="";a+="m="+n+" ",a+=r.codecs.length>0?"9":"0",a+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",a+=r.codecs.map(u=>u.preferredPayloadType!==void 0?u.preferredPayloadType:u.payloadType).join(" ")+`\r
`,a+=`c=IN IP4 0.0.0.0\r
`,a+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(u=>{a+=e.writeRtpMap(u),a+=e.writeFmtp(u),a+=e.writeRtcpFb(u)});let l=0;return r.codecs.forEach(u=>{u.maxptime>l&&(l=u.maxptime)}),l>0&&(a+="a=maxptime:"+l+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(u=>{a+=e.writeExtmap(u)}),a},e.parseRtpEncodingParameters=function(n){const r=[],a=e.parseRtpParameters(n),l=a.fecMechanisms.indexOf("RED")!==-1,u=a.fecMechanisms.indexOf("ULPFEC")!==-1,h=e.matchPrefix(n,"a=ssrc:").map(x=>e.parseSsrcMedia(x)).filter(x=>x.attribute==="cname"),m=h.length>0&&h[0].ssrc;let p;const y=e.matchPrefix(n,"a=ssrc-group:FID").map(x=>x.substring(17).split(" ").map(R=>parseInt(R,10)));y.length>0&&y[0].length>1&&y[0][0]===m&&(p=y[0][1]),a.codecs.forEach(x=>{if(x.name.toUpperCase()==="RTX"&&x.parameters.apt){let k={ssrc:m,codecPayloadType:parseInt(x.parameters.apt,10)};m&&p&&(k.rtx={ssrc:p}),r.push(k),l&&(k=JSON.parse(JSON.stringify(k)),k.fec={ssrc:m,mechanism:u?"red+ulpfec":"red"},r.push(k))}}),r.length===0&&m&&r.push({ssrc:m});let b=e.matchPrefix(n,"b=");return b.length&&(b[0].indexOf("b=TIAS:")===0?b=parseInt(b[0].substring(7),10):b[0].indexOf("b=AS:")===0?b=parseInt(b[0].substring(5),10)*1e3*.95-2e3*8:b=void 0,r.forEach(x=>{x.maxBitrate=b})),r},e.parseRtcpParameters=function(n){const r={},a=e.matchPrefix(n,"a=ssrc:").map(h=>e.parseSsrcMedia(h)).filter(h=>h.attribute==="cname")[0];a&&(r.cname=a.value,r.ssrc=a.ssrc);const l=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=l.length>0,r.compound=l.length===0;const u=e.matchPrefix(n,"a=rtcp-mux");return r.mux=u.length>0,r},e.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},e.parseMsid=function(n){let r;const a=e.matchPrefix(n,"a=msid:");if(a.length===1)return r=a[0].substring(7).split(" "),{stream:r[0],track:r[1]};const l=e.matchPrefix(n,"a=ssrc:").map(u=>e.parseSsrcMedia(u)).filter(u=>u.attribute==="msid");if(l.length>0)return r=l[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){const r=e.parseMLine(n),a=e.matchPrefix(n,"a=max-message-size:");let l;a.length>0&&(l=parseInt(a[0].substring(19),10)),isNaN(l)&&(l=65536);const u=e.matchPrefix(n,"a=sctp-port:");if(u.length>0)return{port:parseInt(u[0].substring(12),10),protocol:r.fmt,maxMessageSize:l};const h=e.matchPrefix(n,"a=sctpmap:");if(h.length>0){const m=h[0].substring(10).split(" ");return{port:parseInt(m[0],10),protocol:m[1],maxMessageSize:l}}},e.writeSctpDescription=function(n,r){let a=[];return n.protocol!=="DTLS/SCTP"?a=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:a=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&a.push("a=max-message-size:"+r.maxMessageSize+`\r
`),a.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,r,a){let l;const u=r!==void 0?r:2;return n?l=n:l=e.generateSessionId(),`v=0\r
o=`+(a||"thisisadapterortc")+" "+l+" "+u+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,r){const a=e.splitLines(n);for(let l=0;l<a.length;l++)switch(a[l]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return a[l].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const a=e.splitLines(n)[0].substring(2).split(" ");return{kind:a[0],port:parseInt(a[1],10),protocol:a[2],fmt:a.slice(3).join(" ")}},e.parseOLine=function(n){const a=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:a[0],sessionId:a[1],sessionVersion:parseInt(a[2],10),netType:a[3],addressType:a[4],address:a[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=e.splitLines(n);for(let a=0;a<r.length;a++)if(r[a].length<2||r[a].charAt(1)!=="=")return!1;return!0},t.exports=e})(H0)),H0.exports}var P3=OP();const rc=bd(P3),LP=gN({__proto__:null,default:rc},[P3]);function Vf(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const a=new e(r),l=rc.parseCandidate(r.candidate);for(const u in l)u in a||Object.defineProperty(a,u,{value:l[u]});return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,Wo(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Hv(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||Wo(t,"icecandidate",e=>{if(e.candidate){const n=rc.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function zf(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(h){if(!h||!h.sdp)return!1;const m=rc.splitSections(h.sdp);return m.shift(),m.some(p=>{const y=rc.parseMLine(p);return y&&y.kind==="application"&&y.protocol.indexOf("SCTP")!==-1})},r=function(h){const m=h.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(m===null||m.length<2)return-1;const p=parseInt(m[1],10);return p!==p?-1:p},a=function(h){let m=65536;return e.browser==="firefox"&&(e.version<57?h===-1?m=16384:m=2147483637:e.version<60?m=e.version===57?65535:65536:m=2147483637),m},l=function(h,m){let p=65536;e.browser==="firefox"&&e.version===57&&(p=65535);const y=rc.matchPrefix(h.sdp,"a=max-message-size:");return y.length>0?p=parseInt(y[0].substring(19),10):e.browser==="firefox"&&m!==-1&&(p=2147483637),p},u=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:m}=this.getConfiguration();m==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const m=r(arguments[0]),p=a(m),y=l(arguments[0],m);let b;p===0&&y===0?b=Number.POSITIVE_INFINITY:p===0||y===0?b=Math.max(p,y):b=Math.min(p,y);const x={};Object.defineProperty(x,"maxMessageSize",{get(){return b}}),this._sctp=x}return u.apply(this,arguments)}}function Uf(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,a){const l=r.send;r.send=function(){const h=arguments[0],m=h.length||h.size||h.byteLength;if(r.readyState==="open"&&a.sctp&&m>a.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+a.sctp.maxMessageSize+" bytes)");return l.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const a=n.apply(this,arguments);return e(a,this),a},Wo(t,"datachannel",r=>(e(r.channel,r.target),r))}function qv(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=a=>{const l=a.target;if(l._lastConnectionState!==l.connectionState){l._lastConnectionState=l.connectionState;const u=new Event("connectionstatechange",a);l.dispatchEvent(u)}return a},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Gv(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(a){if(a&&a.sdp&&a.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const l=a.sdp.split(`
`).filter(u=>u.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&a instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:a.type,sdp:l}):a.sdp=l}return n.apply(this,arguments)}}function Bf(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Ff(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let a=arguments[0]||{};if(typeof a!="object"||a.type&&a.sdp)return n.apply(this,arguments);if(a={type:a.type,sdp:a.sdp},!a.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":a.type="offer";break;default:a.type="answer";break}return a.sdp||a.type!=="offer"&&a.type!=="answer"?n.apply(this,[a]):(a.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(u=>n.apply(this,[u]))})}const VP=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Gv,shimAddIceCandidateNullOrEmpty:Bf,shimConnectionState:qv,shimMaxMessageSize:zf,shimParameterlessSetLocalDescription:Ff,shimRTCIceCandidate:Vf,shimRTCIceCandidateRelayProtocol:Hv,shimSendThrowTypeError:Uf},Symbol.toStringTag,{value:"Module"}));function zP({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=a3,r=MP(t),a={browserDetails:r,commonShim:VP,extractVersion:qu,disableLog:IP,disableWarnings:DP,sdp:LP};switch(r.browser){case"chrome":if(!Mw||!Fv||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),a;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),a;n("adapter.js shimming chrome."),a.browserShim=Mw,Bf(t,r),Ff(t),l3(t,r),c3(t),Fv(t,r),u3(t),m3(t,r),d3(t),h3(t),p3(t,r),Vf(t),Hv(t),qv(t),zf(t,r),Uf(t),Gv(t,r);break;case"firefox":if(!Pw||!$v||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),a;n("adapter.js shimming firefox."),a.browserShim=Pw,Bf(t,r),Ff(t),g3(t,r),$v(t,r),v3(t),x3(t),y3(t),b3(t),_3(t),w3(t),S3(t),E3(t),C3(t),Vf(t),qv(t),zf(t,r),Uf(t);break;case"safari":if(!Ow||!e.shimSafari)return n("Safari shim is not included in this adapter release."),a;n("adapter.js shimming safari."),a.browserShim=Ow,Bf(t,r),Ff(t),j3(t),D3(t),N3(t),T3(t),k3(t),I3(t),A3(t),M3(t),Vf(t),Hv(t),zf(t,r),Uf(t),Gv(t,r);break;default:n("Unsupported browser!");break}return a}const Vw=zP({window:typeof window>"u"?void 0:window});function Jo(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}class O3{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const n=[],r=e.byteLength,a=Math.ceil(r/this.chunkedMTU);let l=0,u=0;for(;u<r;){const h=Math.min(r,u+this.chunkedMTU),m=e.slice(u,h),p={__peerData:this._dataCount,n:l,data:m,total:a};n.push(p),u=h,l++}return this._dataCount++,n}}}function UP(t){let e=0;for(const a of t)e+=a.byteLength;const n=new Uint8Array(e);let r=0;for(const a of t)n.set(a,r),r+=a.byteLength;return n}const q0=Vw.default||Vw,Mu=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const t=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(t)?t==="chrome"?e>=this.minChromeVersion:t==="firefox"?e>=this.minFirefoxVersion:t==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return q0.browserDetails.browser}getVersion(){return q0.browserDetails.version||0}isUnifiedPlanSupported(){const t=this.getBrowser(),e=q0.browserDetails.version||0;if(t==="chrome"&&e<this.minChromeVersion)return!1;if(t==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch{}finally{n&&n.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},BP=t=>!t||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(t),L3=()=>Math.random().toString(36).slice(2),zw={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class FP extends O3{noop(){}blobToArrayBuffer(e,n){const r=new FileReader;return r.onload=function(a){a.target&&n(a.target.result)},r.readAsArrayBuffer(e),r}binaryStringToArrayBuffer(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=zw,this.browser=Mu.getBrowser(),this.browserVersion=Mu.getVersion(),this.pack=r3,this.unpack=n3,this.supports=(function(){const n={browser:Mu.isBrowserSupported(),webRTC:Mu.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let r;try{r=new RTCPeerConnection(zw),n.audioVideo=!0;let a;try{a=r.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!a.ordered;try{a.binaryType="blob",n.binaryBlob=!Mu.isIOS}catch{}}catch{}finally{a&&a.close()}}catch{}finally{r&&r.close()}return n})(),this.validateId=BP,this.randomToken=L3}}const Nr=new FP,$P="PeerJS: ";class HP{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...n){const r=[$P,...n];for(const a in r)r[a]instanceof Error&&(r[a]="("+r[a].name+") "+r[a].message);e>=3?console.log(...r):e>=2?console.warn("WARNING",...r):e>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var Ye=new HP,E1={},qP=Object.prototype.hasOwnProperty,br="~";function dd(){}Object.create&&(dd.prototype=Object.create(null),new dd().__proto__||(br=!1));function GP(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function V3(t,e,n,r,a){if(typeof n!="function")throw new TypeError("The listener must be a function");var l=new GP(n,r||t,a),u=br?br+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],l]:t._events[u].push(l):(t._events[u]=l,t._eventsCount++),t}function $f(t,e){--t._eventsCount===0?t._events=new dd:delete t._events[e]}function fr(){this._events=new dd,this._eventsCount=0}fr.prototype.eventNames=function(){var e=[],n,r;if(this._eventsCount===0)return e;for(r in n=this._events)qP.call(n,r)&&e.push(br?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(n)):e};fr.prototype.listeners=function(e){var n=br?br+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var a=0,l=r.length,u=new Array(l);a<l;a++)u[a]=r[a].fn;return u};fr.prototype.listenerCount=function(e){var n=br?br+e:e,r=this._events[n];return r?r.fn?1:r.length:0};fr.prototype.emit=function(e,n,r,a,l,u){var h=br?br+e:e;if(!this._events[h])return!1;var m=this._events[h],p=arguments.length,y,b;if(m.fn){switch(m.once&&this.removeListener(e,m.fn,void 0,!0),p){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,n),!0;case 3:return m.fn.call(m.context,n,r),!0;case 4:return m.fn.call(m.context,n,r,a),!0;case 5:return m.fn.call(m.context,n,r,a,l),!0;case 6:return m.fn.call(m.context,n,r,a,l,u),!0}for(b=1,y=new Array(p-1);b<p;b++)y[b-1]=arguments[b];m.fn.apply(m.context,y)}else{var x=m.length,k;for(b=0;b<x;b++)switch(m[b].once&&this.removeListener(e,m[b].fn,void 0,!0),p){case 1:m[b].fn.call(m[b].context);break;case 2:m[b].fn.call(m[b].context,n);break;case 3:m[b].fn.call(m[b].context,n,r);break;case 4:m[b].fn.call(m[b].context,n,r,a);break;default:if(!y)for(k=1,y=new Array(p-1);k<p;k++)y[k-1]=arguments[k];m[b].fn.apply(m[b].context,y)}}return!0};fr.prototype.on=function(e,n,r){return V3(this,e,n,r,!1)};fr.prototype.once=function(e,n,r){return V3(this,e,n,r,!0)};fr.prototype.removeListener=function(e,n,r,a){var l=br?br+e:e;if(!this._events[l])return this;if(!n)return $f(this,l),this;var u=this._events[l];if(u.fn)u.fn===n&&(!a||u.once)&&(!r||u.context===r)&&$f(this,l);else{for(var h=0,m=[],p=u.length;h<p;h++)(u[h].fn!==n||a&&!u[h].once||r&&u[h].context!==r)&&m.push(u[h]);m.length?this._events[l]=m.length===1?m[0]:m:$f(this,l)}return this};fr.prototype.removeAllListeners=function(e){var n;return e?(n=br?br+e:e,this._events[n]&&$f(this,n)):(this._events=new dd,this._eventsCount=0),this};fr.prototype.off=fr.prototype.removeListener;fr.prototype.addListener=fr.prototype.on;fr.prefixed=br;fr.EventEmitter=fr;E1=fr;var Zo={};Jo(Zo,"ConnectionType",()=>Va);Jo(Zo,"PeerErrorType",()=>In);Jo(Zo,"BaseConnectionErrorType",()=>Yv);Jo(Zo,"DataConnectionErrorType",()=>C1);Jo(Zo,"SerializationType",()=>hp);Jo(Zo,"SocketEventType",()=>Ia);Jo(Zo,"ServerMessageType",()=>ur);var Va=(function(t){return t.Data="data",t.Media="media",t})({}),In=(function(t){return t.BrowserIncompatible="browser-incompatible",t.Disconnected="disconnected",t.InvalidID="invalid-id",t.InvalidKey="invalid-key",t.Network="network",t.PeerUnavailable="peer-unavailable",t.SslUnavailable="ssl-unavailable",t.ServerError="server-error",t.SocketError="socket-error",t.SocketClosed="socket-closed",t.UnavailableID="unavailable-id",t.WebRTC="webrtc",t})({}),Yv=(function(t){return t.NegotiationFailed="negotiation-failed",t.ConnectionClosed="connection-closed",t})({}),C1=(function(t){return t.NotOpenYet="not-open-yet",t.MessageToBig="message-too-big",t})({}),hp=(function(t){return t.Binary="binary",t.BinaryUTF8="binary-utf8",t.JSON="json",t.None="raw",t})({}),Ia=(function(t){return t.Message="message",t.Disconnected="disconnected",t.Error="error",t.Close="close",t})({}),ur=(function(t){return t.Heartbeat="HEARTBEAT",t.Candidate="CANDIDATE",t.Offer="OFFER",t.Answer="ANSWER",t.Open="OPEN",t.Error="ERROR",t.IdTaken="ID-TAKEN",t.InvalidKey="INVALID-KEY",t.Leave="LEAVE",t.Expire="EXPIRE",t})({});const z3="1.5.5";class YP extends E1.EventEmitter{constructor(e,n,r,a,l,u=5e3){super(),this.pingInterval=u,this._disconnected=!0,this._messagesQueue=[];const h=e?"wss://":"ws://";this._baseUrl=h+n+":"+r+a+"peerjs?key="+l}start(e,n){this._id=e;const r=`${this._baseUrl}&id=${e}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+z3),this._disconnected=!1,this._socket.onmessage=a=>{let l;try{l=JSON.parse(a.data),Ye.log("Server message received:",l)}catch{Ye.log("Invalid server message",a.data);return}this.emit(Ia.Message,l)},this._socket.onclose=a=>{this._disconnected||(Ye.log("Socket closed.",a),this._cleanup(),this._disconnected=!0,this.emit(Ia.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),Ye.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){Ye.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:ur.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const n of e)this.send(n)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(Ia.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(e);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class U3{constructor(e){this.connection=e}startConnection(e){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===Va.Media&&e._stream&&this._addTracksToConnection(e._stream,n),e.originator){const r=this.connection,a={ordered:!!e.reliable},l=n.createDataChannel(r.label,a);r._initializeDataChannel(l),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){Ye.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const n=this.connection.peer,r=this.connection.connectionId,a=this.connection.type,l=this.connection.provider;Ye.log("Listening for ICE candidates."),e.onicecandidate=u=>{!u.candidate||!u.candidate.candidate||(Ye.log(`Received ICE candidates for ${n}:`,u.candidate),l.socket.send({type:ur.Candidate,payload:{candidate:u.candidate,type:a,connectionId:r},dst:n}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":Ye.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(Yv.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":Ye.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(Yv.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":Ye.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},Ye.log("Listening for data channel"),e.ondatachannel=u=>{Ye.log("Received data channel");const h=u.channel;l.getConnection(n,r)._initializeDataChannel(h)},Ye.log("Listening for remote stream"),e.ontrack=u=>{Ye.log("Received remote stream");const h=u.streams[0],m=l.getConnection(n,r);if(m.type===Va.Media){const p=m;this._addStreamToMediaConnection(h,p)}}}cleanup(){Ye.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const n=e.signalingState!=="closed";let r=!1;const a=this.connection.dataChannel;a&&(r=!!a.readyState&&a.readyState!=="closed"),(n||r)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,n=this.connection.provider;try{const r=await e.createOffer(this.connection.options.constraints);Ye.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),Ye.log("Set localDescription:",r,`for:${this.connection.peer}`);let a={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Va.Data){const l=this.connection;a={...a,label:l.label,reliable:l.reliable,serialization:l.serialization}}n.socket.send({type:ur.Offer,payload:a,dst:this.connection.peer})}catch(a){a!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(In.WebRTC,a),Ye.log("Failed to setLocalDescription, ",a))}}catch(r){n.emitError(In.WebRTC,r),Ye.log("Failed to createOffer, ",r)}}async _makeAnswer(){const e=this.connection.peerConnection,n=this.connection.provider;try{const r=await e.createAnswer();Ye.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),Ye.log("Set localDescription:",r,`for:${this.connection.peer}`),n.socket.send({type:ur.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(a){n.emitError(In.WebRTC,a),Ye.log("Failed to setLocalDescription, ",a)}}catch(r){n.emitError(In.WebRTC,r),Ye.log("Failed to create answer, ",r)}}async handleSDP(e,n){n=new RTCSessionDescription(n);const r=this.connection.peerConnection,a=this.connection.provider;Ye.log("Setting remote description",n);const l=this;try{await r.setRemoteDescription(n),Ye.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await l._makeAnswer()}catch(u){a.emitError(In.WebRTC,u),Ye.log("Failed to setRemoteDescription, ",u)}}async handleCandidate(e){Ye.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),Ye.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(In.WebRTC,n),Ye.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(e,n){if(Ye.log(`add tracks from stream ${e.id} to peer connection`),!n.addTrack)return Ye.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(r=>{n.addTrack(r,e)})}_addStreamToMediaConnection(e,n){Ye.log(`add stream ${e.id} to media connection ${n.connectionId}`),n.addStream(e)}}class B3 extends E1.EventEmitter{emitError(e,n){Ye.error("Error:",n),this.emit("error",new KP(`${e}`,n))}}class KP extends Error{constructor(e,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=e}}class F3 extends B3{get open(){return this._open}constructor(e,n,r){super(),this.peer=e,this.provider=n,this.options=r,this._open=!1,this.metadata=r.metadata}}class Tm extends F3{static#e=this.ID_PREFIX="mc_";get type(){return Va.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,n,r){super(e,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Tm.ID_PREFIX+Nr.randomToken(),this._negotiator=new U3(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{Ye.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{Ye.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){Ye.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const n=e.type,r=e.payload;switch(e.type){case ur.Answer:this._negotiator.handleSDP(n,r.sdp),this._open=!0;break;case ur.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:Ye.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(e,n={}){if(this._localStream){Ye.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const r=this.provider._getMessages(this.connectionId);for(const a of r)this.handleMessage(a);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class QP{constructor(e){this._options=e}_buildRequest(e){const n=this._options.secure?"https":"http",{host:r,port:a,path:l,key:u}=this._options,h=new URL(`${n}://${r}:${a}${l}${u}/${e}`);return h.searchParams.set("ts",`${Date.now()}${Math.random()}`),h.searchParams.set("version",z3),fetch(h.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){Ye.error("Error retrieving ID",e);let n="";throw this._options.path==="/"&&this._options.host!==Nr.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let n="";throw this._options.host===Nr.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw Ye.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}class km extends F3{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return Va.Data}constructor(e,n,r){super(e,n,r),this.connectionId=this.options.connectionId||km.ID_PREFIX+L3(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new U3(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{Ye.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{Ye.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{Ye.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,n=!1){if(!this.open){this.emitError(C1.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,n)}async handleMessage(e){const n=e.payload;switch(e.type){case ur.Answer:await this._negotiator.handleSDP(e.type,n.sdp);break;case ur.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:Ye.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}}class T1 extends km{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>km.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(n){return Ye.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class G0 extends T1{close(e){super.close(e),this._chunkedData={}}constructor(e,n,r){super(e,n,r),this.chunker=new O3,this.serialization=hp.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const n=n3(e),r=n.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(e){const n=e.__peerData,r=this._chunkedData[n]||{data:[],count:0,total:e.total};if(r.data[e.n]=new Uint8Array(e.data),r.count++,this._chunkedData[n]=r,r.total===r.count){delete this._chunkedData[n];const a=UP(r.data);this._handleDataMessage({data:a})}}_send(e,n){const r=r3(e);if(r instanceof Promise)return this._send_blob(r);if(!n&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(e){const n=await e;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(e){const n=this.chunker.chunk(e);Ye.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const r of n)this.send(r,!0)}}class XP extends T1{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,n){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=hp.None}}class WP extends T1{_handleDataMessage({data:e}){const n=this.parse(this.decoder.decode(e)),r=n.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",n)}_send(e,n){const r=this.encoder.encode(this.stringify(e));if(r.byteLength>=Nr.chunkedMTU){this.emitError(C1.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...e){super(...e),this.serialization=hp.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class k1 extends B3{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[n,r]of this._connections)e[n]=r;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,n){super(),this._serializers={raw:XP,json:WP,binary:G0,"binary-utf8":G0,default:G0},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(e&&e.constructor==Object?n=e:e&&(r=e.toString()),n={debug:0,host:Nr.CLOUD_HOST,port:Nr.CLOUD_PORT,path:"/",key:k1.DEFAULT_KEY,token:Nr.randomToken(),config:Nr.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Nr.CLOUD_HOST?this._options.secure=Nr.isSecure():this._options.host==Nr.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&Ye.setLogFunction(this._options.logFunction),Ye.logLevel=this._options.debug||0,this._api=new QP(n),this._socket=this._createServerConnection(),!Nr.supports.audioVideo&&!Nr.supports.data){this._delayedAbort(In.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!Nr.validateId(r)){this._delayedAbort(In.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(a=>this._initialize(a)).catch(a=>this._abort(In.ServerError,a))}_createServerConnection(){const e=new YP(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(Ia.Message,n=>{this._handleMessage(n)}),e.on(Ia.Error,n=>{this._abort(In.SocketError,n)}),e.on(Ia.Disconnected,()=>{this.disconnected||(this.emitError(In.Network,"Lost connection to server."),this.disconnect())}),e.on(Ia.Close,()=>{this.disconnected||this._abort(In.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const n=e.type,r=e.payload,a=e.src;switch(n){case ur.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case ur.Error:this._abort(In.ServerError,r.msg);break;case ur.IdTaken:this._abort(In.UnavailableID,`ID "${this.id}" is taken`);break;case ur.InvalidKey:this._abort(In.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case ur.Leave:Ye.log(`Received leave message from ${a}`),this._cleanupPeer(a),this._connections.delete(a);break;case ur.Expire:this.emitError(In.PeerUnavailable,`Could not connect to peer ${a}`);break;case ur.Offer:{const l=r.connectionId;let u=this.getConnection(a,l);if(u&&(u.close(),Ye.warn(`Offer received for existing Connection ID:${l}`)),r.type===Va.Media){const m=new Tm(a,this,{connectionId:l,_payload:r,metadata:r.metadata});u=m,this._addConnection(a,u),this.emit("call",m)}else if(r.type===Va.Data){const m=new this._serializers[r.serialization](a,this,{connectionId:l,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});u=m,this._addConnection(a,u),this.emit("connection",m)}else{Ye.warn(`Received malformed connection type:${r.type}`);return}const h=this._getMessages(l);for(const m of h)u.handleMessage(m);break}default:{if(!r){Ye.warn(`You received a malformed message from ${a} of type ${n}`);return}const l=r.connectionId,u=this.getConnection(a,l);u&&u.peerConnection?u.handleMessage(e):l?this._storeMessage(l,e):Ye.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,n){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(n)}_getMessages(e){const n=this._lostMessages.get(e);return n?(this._lostMessages.delete(e),n):[]}connect(e,n={}){if(n={serialization:"default",...n},this.disconnected){Ye.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(In.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[n.serialization](e,this,n);return this._addConnection(e,r),r}call(e,n,r={}){if(this.disconnected){Ye.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(In.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){Ye.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const a=new Tm(e,this,{...r,_stream:n});return this._addConnection(e,a),a}_addConnection(e,n){Ye.log(`add connection ${n.type}:${n.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(n)}_removeConnection(e){const n=this._connections.get(e.peer);if(n){const r=n.indexOf(e);r!==-1&&n.splice(r,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,n){const r=this._connections.get(e);if(!r)return null;for(const a of r)if(a.connectionId===n)return a;return null}_delayedAbort(e,n){setTimeout(()=>{this._abort(e,n)},0)}_abort(e,n){Ye.error("Aborting!"),this.emitError(e,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(Ye.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const n=this._connections.get(e);if(n)for(const r of n)r.close()}disconnect(){if(this.disconnected)return;const e=this.id;Ye.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)Ye.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)Ye.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=n=>{}){this._api.listAllPeers().then(n=>e(n)).catch(n=>this._abort(In.ServerError,n))}}var $3=k1;let Y0=null,hd=[],Nm=[];const H3=()=>(Y0||(Y0=new(window.AudioContext||window.webkitAudioContext)),Y0),fd=()=>{hd.forEach(t=>{try{t.stop(),t.disconnect()}catch{}}),hd=[],Nm.forEach(t=>{try{t.disconnect()}catch{}}),Nm=[]},JP=()=>{try{const t=H3();t.state==="suspended"&&t.resume(),fd();const e=t.createOscillator(),n=t.createGain();e.type="sine",e.frequency.value=440,e.connect(n),n.connect(t.destination);const r=t.currentTime;let a=!0;const l=()=>{if(!a)return;const h=t.createOscillator(),m=t.createGain();h.connect(m),m.connect(t.destination),h.frequency.value=425,h.type="sine";const p=t.currentTime,y=t.createOscillator();y.type="sine",y.frequency.value=20;const b=t.createGain();b.gain.value=500,y.connect(b),b.connect(h.frequency),y.start(p),y.stop(p+2),m.gain.setValueAtTime(0,p),m.gain.linearRampToValueAtTime(.1,p+.1),m.gain.setValueAtTime(.1,p+1.8),m.gain.linearRampToValueAtTime(0,p+2),h.start(p),h.stop(p+2),hd.push(h),hd.push(y),Nm.push(m)};l();const u=setInterval(l,4e3);return()=>{a=!1,clearInterval(u),fd()}}catch(t){return console.error("Error playing outgoing ring:",t),()=>{}}},ZP=()=>{try{const t=H3();t.state==="suspended"&&t.resume(),fd();let e=!0;const n=()=>{if(!e)return;const a=t.currentTime,l=(u,h)=>{const m=t.createOscillator(),p=t.createGain();m.connect(p),p.connect(t.destination),m.frequency.value=h,m.type="square",p.gain.setValueAtTime(0,u),p.gain.linearRampToValueAtTime(.1,u+.05),p.gain.setValueAtTime(.1,u+.2),p.gain.linearRampToValueAtTime(0,u+.25),m.start(u),m.stop(u+.3),hd.push(m),Nm.push(p)};l(a,880),l(a+.4,880),l(a+.8,880)};n();const r=setInterval(n,3e3);return()=>{e=!1,clearInterval(r),fd()}}catch(t){return console.error("Error playing incoming ring:",t),()=>{}}},Uw=()=>{fd()},Ii={SCREEN_SHARE:"screen_share",HIGH_QUALITY:"high_quality"},eO={admin:[Ii.SCREEN_SHARE,Ii.HIGH_QUALITY],moderator:[Ii.SCREEN_SHARE],member:[]},tO={premium:[Ii.SCREEN_SHARE,Ii.HIGH_QUALITY],developer:[Ii.SCREEN_SHARE,Ii.HIGH_QUALITY],verified:[]},q3=(t,e)=>{if(!t)return!1;const n=t.role||"member";if((eO[n]||[]).includes(e))return!0;const a=t.badges||[];for(const l of a)if((tO[l]||[]).includes(e))return!0;return!1},sc=t=>t?!!(t.role==="admin"||t.role==="premium"||t.badges?.includes("premium")||t.badges?.includes("developer")||t.plan==="premium"||t.roles?.includes("premium")||t.roles?.includes("admin")):!1,G3=T.createContext(),K0=10,Bw=300,N1=()=>{const t=T.useContext(G3);if(!t)throw new Error("useSoundboard must be used within SoundboardProvider");return t},nO=({children:t})=>{const{error:e}=Kr(),[n,r]=T.useState(()=>{try{const h=localStorage.getItem("dss_custom_sounds");return h?JSON.parse(h):[]}catch{return[]}});T.useEffect(()=>{localStorage.setItem("dss_custom_sounds",JSON.stringify(n))},[n]);const u={customSounds:n,addSound:async(h,m)=>n.length>=K0?(e(`Maximum ${K0} sounds allowed.`),!1):m.size>Bw*1024?(e(`File too large. Max ${Bw}KB.`),!1):new Promise(p=>{const y=new FileReader;y.onload=b=>{const x={id:Date.now().toString(),name:h.trim()||"Sound",src:b.target.result};r(k=>[...k,x]),p(!0)},y.readAsDataURL(m)}),removeSound:h=>{r(m=>m.filter(p=>p.id!==h))},MAX_SOUNDS:K0};return c.jsx(G3.Provider,{value:u,children:t})},Y3=T.createContext(),Od=()=>{const t=T.useContext(Y3);if(!t)throw new Error("useCall must be used within CallProvider");return t},rO=({children:t})=>{const{currentUser:e,userProfile:n}=Ln(),{error:r}=Kr(),[a,l]=T.useState(null),[u,h]=T.useState(null),[m,p]=T.useState("idle"),[y,b]=T.useState(null),[x,k]=T.useState(null),[R,j]=T.useState(null),[N,U]=T.useState(null),[$,I]=T.useState(null),[O,B]=T.useState(null),{customSounds:q,addSound:w,removeSound:E}=N1(),[A,P]=T.useState(!1),[L,z]=T.useState(!1),[M,se]=T.useState({audioInputs:[],videoInputs:[],audioOutputs:[]}),[le,Y]=T.useState(""),[ee,Z]=T.useState(""),Ee=F=>{const Q=q.find(Ce=>Ce.id===F);if(!Q)return;const J=new Audio(Q.src);J.volume=.5,ie.current.push(J),J.onended=()=>{ie.current=ie.current.filter(Ce=>Ce!==J)},J.play().catch(Ce=>console.error("Error playing sound:",Ce)),O&&O.open?(console.log("Sending sound effect:",Q.name),O.send({type:"SOUND_EFFECT",payload:{src:Q.src,name:Q.name}})):console.warn("Cannot send sound effect. Data connection missing or closed.")};T.useRef(null),T.useRef(null);const Re=T.useRef(null),H=T.useRef(null),W=T.useRef(null),ie=T.useRef([]),ve=()=>{ie.current.forEach(F=>{F.pause(),F.currentTime=0}),ie.current=[]},Te=T.useRef(null);T.useEffect(()=>{H.current=N},[N]),T.useEffect(()=>{W.current=R},[R]),T.useEffect(()=>(Te.current&&(Te.current(),Te.current=null),Uw(),m==="incoming"?Te.current=ZP():m==="outgoing"&&(Te.current=JP()),()=>{Te.current&&Te.current(),Uw()}),[m]),T.useEffect(()=>{if(!e)return;const F=new $3;return F.on("open",Q=>{console.log("My Peer ID is:",Q),h(Q),l(F)}),F.on("call",Q=>{console.log("Receiving PeerJS call connection..."),W.current&&W.current.peer===Q.peer&&(console.log("Replacing existing call (upgrade/renegotiation detected)"),W.current.removeAllListeners&&W.current.removeAllListeners("close"),W.current.close());const J=H.current||it.current;J?(console.log("Answering call with local stream"),Q.answer(J)):(console.warn("No local stream found when answering! Answering audio-only or empty."),Q.answer()),Q.on("stream",Ce=>{console.log("Received remote stream"),I(Ce)}),Q.on("close",()=>{de()}),j(Q),p("connected")}),F.on("error",Q=>{console.error("PeerJS Error:",Q),Q.type}),F.on("connection",Q=>{console.log("Data connection received from peer:",Q.peer),Q.on("open",()=>{console.log("Data connection open event fired."),B(Q)}),Q.on("data",J=>{if(J&&J.type==="SOUND_EFFECT"&&J.payload?.src){console.log("Received sound effect:",J.payload.name);const Ce=new Audio(J.payload.src);Ce.volume=.5,ie.current.push(Ce),Ce.onended=()=>{ie.current=ie.current.filter($e=>$e!==Ce)},Ce.play().catch($e=>console.error("Error playing remote sound:",$e))}}),Q.on("close",()=>{console.log("Data connection closed."),B(null)}),Q.on("error",J=>console.error("Data connection error:",J)),Q.open&&(console.log("Data connection already open."),B(Q))}),()=>{F.destroy()}},[e]),T.useEffect(()=>{if(!e)return;const F=qr(wt(he,"users",e.uid,"incomingCalls"),Ta("status","==","pending")),Q=gr(F,J=>{J.docChanges().forEach(Ce=>{if(Ce.type==="added"){const $e=Ce.doc.data();b({id:Ce.doc.id,...$e}),p("incoming")}Ce.type==="removed"&&b($e=>$e&&$e.id===Ce.doc.id?(p(Qe=>(Qe!=="connected"&&de(!1),Qe)),null):$e)})});return()=>Q()},[e]);const De=async()=>{if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return console.warn("mediaDevices API not available"),{audioInputs:[],videoInputs:[],audioOutputs:[]};try{const F=await navigator.mediaDevices.enumerateDevices(),Q=F.filter($e=>$e.kind==="audioinput"),J=F.filter($e=>$e.kind==="videoinput"),Ce=F.filter($e=>$e.kind==="audiooutput");return se({audioInputs:Q,videoInputs:J,audioOutputs:Ce}),!le&&Q.length>0&&Y(Q[0].deviceId),!ee&&J.length>0&&Z(J[0].deviceId),console.log("Devices enumerated:",{audioInputs:Q.length,videoInputs:J.length}),{audioInputs:Q,videoInputs:J,audioOutputs:Ce}}catch(F){return console.error("Failed to enumerate devices:",F),{audioInputs:[],videoInputs:[],audioOutputs:[]}}};T.useEffect(()=>{if(!navigator.mediaDevices){console.warn("mediaDevices API not available - skipping device enumeration");return}return De(),navigator.mediaDevices.addEventListener("devicechange",De),()=>navigator.mediaDevices.removeEventListener("devicechange",De)},[]);const ae=async(F=!0)=>{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return console.error("mediaDevices API not available - requires HTTPS or localhost"),r("Kamera/mikrofon iin HTTPS veya localhost gerekli"),null;try{M.audioInputs.length===0&&await De();const Q={echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,channelCount:1,sampleRate:48e3,sampleSize:16,...le&&{deviceId:{exact:le}}},J=F?{width:1280,height:720,...ee&&{deviceId:{exact:ee}}}:!1,Ce=await navigator.mediaDevices.getUserMedia({video:J,audio:Q});return console.log("Media stream acquired with selected devices"),U(Ce),Ce}catch(Q){return console.error("Failed to get local stream",Q),r("Could not access camera/microphone"),null}},Le=async(F,Q="video")=>{if(!a||!u){r("Connection not ready. Please wait a moment.");return}if(k(F),p("outgoing"),!await ae(Q==="video")){p("idle");return}z(Q==="voice");try{const Ce=e.displayName||n?.displayName||"Unknown",$e=e.photoURL||n?.photoURL||n?.photoUrl||null,Qe=await Bn(wt(he,"users",F.id,"incomingCalls"),{callerId:e.uid,callerName:Ce,callerPhotoUrl:$e,peerId:u,type:Q,status:"pending",timestamp:bt()});Re.current=Qe.id;const ct=gr(Ae(he,"users",F.id,"incomingCalls",Qe.id),$t=>{const fn=Re.current===Qe.id;if(!$t.exists())fn&&m==="outgoing"&&(r("Call ended or declined"),de(!1)),ct();else{const ar=$t.data();ar.status==="accepted"?fn&&p("connected"):ar.status==="rejected"&&fn&&(r("Call declined"),de(!0))}},$t=>{console.warn("Call snapshot error:",$t),Re.current===Qe.id&&(r("Call declined"),de(!1))})}catch(Ce){console.error("Signaling failed:",Ce),r("Failed to direct call"),de()}};T.useEffect(()=>{if(!R||!R.peerConnection)return;const F=()=>{const Q=R.peerConnection.connectionState,J=R.peerConnection.iceConnectionState;console.log(`Connection State: ${Q}, ICE State: ${J}`),(J==="disconnected"||J==="failed"||J==="closed")&&(console.warn("Peer connection lost/failed. Ending call..."),J==="failed"||J==="closed"?de():J==="disconnected"&&W.current===R&&setTimeout(()=>{W.current&&W.current.peerConnection.iceConnectionState==="disconnected"&&(console.log("Connection still disconnected after timeout. Ending."),de())},3e3))};return R.peerConnection.addEventListener("iceconnectionstatechange",F),R.peerConnection.addEventListener("connectionstatechange",F),()=>{R&&R.peerConnection&&(R.peerConnection.removeEventListener("iceconnectionstatechange",F),R.peerConnection.removeEventListener("connectionstatechange",F))}},[R]);const Ie=async()=>{if(!y||!a)return;p("connected");const F=y.type==="video",Q=await ae(F);if(!Q){console.error("Stream failed, rejecting call signal.");try{await rt(Ae(he,"users",e.uid,"incomingCalls",y.id),{status:"rejected"})}catch{}de(!1);return}if(F||z(!0),console.log("Connecting to peer:",y.peerId),(!a||a.disconnected)&&(r("Peer connection lost. Reconnecting..."),a?.reconnect(),await new Promise(J=>setTimeout(J,1e3)),!a||a.disconnected)){r("Could not establish P2P connection."),de();return}try{const J=a.call(y.peerId,Q);if(!J){r("Call failed to initialize."),de();return}J.on("stream",Ce=>{I(Ce)}),J.on("close",()=>{de()}),J.on("error",Ce=>{console.error("Call error:",Ce),de()}),j(J);try{await rt(Ae(he,"users",e.uid,"incomingCalls",y.id),{status:"accepted"})}catch(Ce){console.error("Error updating signal doc",Ce)}}catch(J){console.error("Error calling peer:",J),r("Failed to connect to peer."),de()}try{console.log("Establishing data connection to caller:",y.peerId);const J=a.connect(y.peerId);J.on("open",()=>{console.log("Data connection opened (Callee side)!"),B(J)}),J.on("data",Ce=>{if(Ce&&Ce.type==="SOUND_EFFECT"&&Ce.payload?.src){const $e=new Audio(Ce.payload.src);$e.volume=.5,ie.current.push($e),$e.onended=()=>{ie.current=ie.current.filter(Qe=>Qe!==$e)},$e.play().catch(Qe=>console.error(Qe))}}),J.on("close",()=>B(null)),J.on("error",Ce=>console.error("Data connection error (Callee):",Ce))}catch(J){console.error("Failed to establish data connection",J)}},de=async(F=!0)=>{console.log("[CallContext] Ending call - starting cleanup..."),Se.current&&(Se.current.getTracks().forEach(J=>{J.stop(),console.log("[CallContext] Stopped screen track:",J.kind)}),Se.current=null),it.current=null;const Q=H.current;if(Q&&Q.getTracks().forEach(J=>{J.stop(),console.log("[CallContext] Stopped local track:",J.kind)}),N&&N.getTracks().forEach(J=>{J.stop(),console.log("[CallContext] Stopped local stream track (backup):",J.kind)}),U(null),H.current=null,R&&(R.close(),j(null)),$&&$.getTracks().forEach(J=>{J.stop(),console.log("[CallContext] Stopped remote track:",J.kind)}),I(null),p("idle"),b(null),k(null),P(!1),z(!1),O&&(O.close(),B(null)),ve(),console.log("[CallContext] Call cleanup complete"),Re.current&&F&&x)try{await Yr(Ae(he,"users",x.id,"incomingCalls",Re.current))}catch{}if(y&&F)try{m==="incoming"?await rt(Ae(he,"users",e.uid,"incomingCalls",y.id),{status:"rejected"}):await Yr(Ae(he,"users",e.uid,"incomingCalls",y.id))}catch{}Re.current=null},pe=()=>{if(N){const F=N.getAudioTracks()[0];F&&(F.enabled=!F.enabled,P(!F.enabled))}},ge=()=>{if(N){const F=N.getVideoTracks()[0];F&&(F.enabled=!F.enabled,z(!F.enabled))}},Se=T.useRef(null),it=T.useRef(null),_e=async(F=null)=>{if(Se.current){await Ue();return}try{console.log("Requesting display media...",F);let Q={},J=F?.width||1280,Ce=F?.height||720,$e=F?.frameRate||30;F||q3(n,Ii.HIGH_QUALITY)&&(J=1920,Ce=1080,$e=60);let Qe;if(F?.sourceId&&window.require){console.log("Using Electron getUserMedia with sourceId:",F.sourceId);try{Qe=await navigator.mediaDevices.getUserMedia({audio:{mandatory:{chromeMediaSource:"desktop"}},video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:F.sourceId,maxWidth:J,maxHeight:Ce,maxFrameRate:$e}}})}catch(ze){throw console.error("Electron getUserMedia failed:",ze),ze}}else{const ze={video:{width:{ideal:J},height:{ideal:Ce},frameRate:{ideal:$e},displaySurface:F?.displaySurface},audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!1}};console.log("Using Web getDisplayMedia with constraints:",ze),Qe=await navigator.mediaDevices.getDisplayMedia(ze)}const ct=Qe.getVideoTracks()[0];z(!1),console.log("Display media obtained:",ct.label);const $t=Qe.getAudioTracks()[0];let fn=null;if($t){console.log("System audio captured! Mixing with microphone...");let ze=N;if(!ze&&M.audioInputs.length>0)try{ze=await navigator.mediaDevices.getUserMedia({audio:!0})}catch{console.warn("Failed to get mic for mixing")}if(ze&&ze.getAudioTracks().length>0){const nt=ze.getAudioTracks()[0],tt=new(window.AudioContext||window.webkitAudioContext),Qt=tt.createMediaStreamDestination(),Dt=tt.createMediaStreamSource(new MediaStream([nt])),ht=tt.createMediaStreamSource(new MediaStream([$t])),vn=tt.createGain(),nn=tt.createGain();vn.gain.value=1,nn.gain.value=1,Dt.connect(vn).connect(Qt),ht.connect(nn).connect(Qt),fn=Qt.stream.getAudioTracks()[0],Se.currentAudioContext=tt}else fn=$t}N&&!it.current&&(it.current=N),ct.onended=()=>{console.log("Screen track ended by user/browser UI"),Ue()},Se.current=Qe;const ar=fn?[fn]:N?N.getAudioTracks():[],ke=new MediaStream([ct,...ar]);if(U(ke),R&&R.peerConnection){const ze=R.peerConnection.getSenders(),nt=ze.find(tt=>tt.track&&tt.track.kind==="video");if(nt&&await nt.replaceTrack(ct),fn){const tt=ze.find(Qt=>Qt.track&&Qt.track.kind==="audio");tt&&(console.log("Replacing audio sender with mixed track..."),await tt.replaceTrack(fn))}if(!nt){console.log("Audio-only -> Screen Share upgrade. Renegotiating...");const tt=R.peer;if(a&&tt){R.removeAllListeners("close");const Qt=a.call(tt,ke);Qt.on("stream",Dt=>I(Dt)),Qt.on("close",()=>de()),Qt.on("error",()=>de()),j(Qt)}}}}catch(Q){console.error("Error starting screen share:",Q),r("Failed to start screen share")}},Ue=async()=>{if(Se.current)if(console.log("Stopping screen share..."),Se.currentAudioContext&&(Se.currentAudioContext.close(),Se.currentAudioContext=null),Se.current.getTracks().forEach(F=>F.stop()),Se.current=null,it.current){console.log("Reverting to previous stream state...");const F=it.current.getVideoTracks()[0],Q=it.current.getAudioTracks();if(R&&R.peerConnection){const J=R.peerConnection.getSenders(),Ce=J.find(Qe=>Qe.track&&Qe.track.kind==="video");if(F&&Ce)try{await Ce.replaceTrack(F)}catch{}const $e=J.find(Qe=>Qe.track&&Qe.track.kind==="audio");$e&&Q.length>0&&(console.log("Reverting audio sender to original mic..."),await $e.replaceTrack(Q[0]))}U(it.current),it.current=null}else{console.log("No stored camera stream, requesting new user media...");try{const F=await ae(!0);if(F&&R&&R.peerConnection){const Q=F.getVideoTracks()[0],J=R.peerConnection.getSenders().find(Ce=>Ce.track&&Ce.track.kind==="video");J&&await J.replaceTrack(Q)}}catch(F){console.error("Failed to restore camera:",F)}}},Me={startCall:Le,answerCall:Ie,endCall:de,toggleAudio:pe,toggleVideo:ge,callStatus:m,incomingCall:y,outgoingCallUser:x,localStream:N,remoteStream:$,isMuted:A,isVideoOff:L,activeCall:R,isScreenSharing:!!Se.current,toggleScreenShare:_e,availableDevices:M,selectedMicId:le,selectedCameraId:ee,setSelectedMicId:Y,setSelectedCameraId:Z,playSound:Ee,customSounds:q,addSound:w,removeSound:E};return c.jsx(Y3.Provider,{value:Me,children:t})},sO=240*1e3,iO=t=>{const e=T.useRef(null);T.useEffect(()=>{if(!t)return;const n=async()=>{try{await Rr(Ae(he,"users",t),{lastSeen:bt(),isOnline:!0},{merge:!0})}catch(a){console.error("Error updating presence:",a)}};n(),e.current=setInterval(n,sO);const r=()=>{navigator.sendBeacon&&n()};return window.addEventListener("beforeunload",r),()=>{e.current&&clearInterval(e.current),window.removeEventListener("beforeunload",r)}},[t])},K3=(t,e=10)=>{if(!t)return!1;const n=t.toMillis?t.toMillis():new Date(t).getTime(),r=Date.now(),a=e*60*1e3;return r-n<a},A1=({user:t,isOpen:e,onClose:n,onMessage:r})=>{if(!t)return null;const a=t.presence!=="invisible"&&K3(t.lastSeen),l=h=>({admin:"#f23f42",moderator:"#faa81a",member:"#80848e"})[h]||"#80848e",{startCall:u}=Od();return c.jsx(ws,{isOpen:e,onClose:n,title:"",size:"sm",showCloseButton:!1,children:c.jsxs("div",{className:"relative overflow-hidden rounded-lg -m-6 min-h-[400px] flex flex-col",children:[c.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-colors",style:{backgroundColor:t.themeColor||"#6366f1",backgroundImage:t.bannerUrl?`url(${t.bannerUrl})`:`linear-gradient(to bottom right, ${t.themeColor||"#6366f1"}, #000)`}}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/95 via-black/50 to-transparent"}),c.jsx("button",{onClick:n,className:"absolute top-4 right-4 p-2 bg-black/40 hover:bg-black/60 rounded-full text-white/80 hover:text-white transition-colors z-20 backdrop-blur-sm",children:c.jsxs("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{fill:"none",d:"M0 0h24v24H0z"}),c.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})]})}),c.jsxs("div",{className:"relative z-10 p-6 mt-auto flex flex-col items-center text-center",children:[c.jsxs("div",{className:"relative group mb-4",children:[t.photoUrl?c.jsx("img",{src:t.photoUrl,alt:t.displayName,className:"w-32 h-32 rounded-full border-4 object-cover shadow-2xl",style:{borderColor:t.themeColor||"#1e1f22"},onError:h=>{h.target.style.display="none",h.target.nextSibling.style.display="flex"}},t.photoUrl):null,c.jsx("div",{className:"w-32 h-32 rounded-full border-4 flex items-center justify-center text-white font-bold text-5xl shadow-2xl",style:{display:t.photoUrl?"none":"flex",borderColor:t.themeColor||"#1e1f22",backgroundColor:t.themeColor||"#6366f1"},children:t.displayName?.[0]?.toUpperCase()||"U"})]}),c.jsxs("div",{className:"space-y-1 w-full",children:[c.jsxs("h2",{className:"text-3xl font-bold text-white flex items-center justify-center gap-2 drop-shadow-md",children:[t.displayName||"Unknown",(t.role==="admin"||t.role==="premium")&&c.jsx("div",{className:"text-brand-primary drop-shadow-none",title:"Premium Member",children:c.jsx(Uo,{size:24,color:t.themeColor||"#6366f1"})})]}),c.jsx("div",{className:"flex justify-center mt-2",children:c.jsx("span",{className:"px-4 py-1.5 rounded-full text-sm font-semibold border backdrop-blur-md shadow-lg",style:{backgroundColor:`${l(t.role)}30`,color:"#fff",borderColor:`${l(t.role)}80`},children:t.role?.charAt(0).toUpperCase()+t.role?.slice(1)})})]}),c.jsx("div",{className:"flex justify-center gap-2 mt-4 flex-wrap",children:(()=>{const h=new Set(t.badges||[]);t.role==="admin"&&h.add("admin");const m=Array.from(h).map(p=>w1[p]).filter(Boolean);return m.length===0?null:c.jsx("div",{className:"p-1.5 rounded-xl bg-black/40 backdrop-blur-md border border-white/10 flex gap-2",children:m.map(p=>{const y=p.icon;return c.jsxs("div",{className:"relative group cursor-help p-1 hover:bg-white/10 rounded transition-colors",children:[c.jsx(y,{size:20,color:p.color}),c.jsxs("div",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 px-2 py-1 bg-black text-white text-xs rounded shadow-lg whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-50",children:[c.jsx("div",{className:"font-bold",children:p.label}),p.description&&c.jsx("div",{className:"text-gray-300 font-normal text-[10px]",children:p.description}),c.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-black"})]})]},p.id)})})})()}),c.jsxs("div",{className:"flex items-center gap-3 mt-4 bg-black/30 px-4 py-2 rounded-full backdrop-blur-sm border border-white/5",children:[c.jsx("div",{className:Vt("w-3 h-3 rounded-full shadow-lg shadow-white/20",a&&(t.presence==="online"||!t.presence)?"bg-green-500":a&&t.presence==="idle"?"bg-yellow-500":a&&t.presence==="dnd"?"bg-red-500":"bg-gray-500")}),t.status?c.jsxs("span",{className:"text-sm text-gray-200 flex gap-2",children:[c.jsx("span",{children:t.status.emoji}),c.jsx("span",{children:t.status.text})]}):c.jsx("span",{className:"text-sm text-gray-300",children:a?t.presence==="idle"?"Idle":t.presence==="dnd"?"Do Not Disturb":"Online":"Offline"})]}),t.id!==Ln().currentUser?.uid&&c.jsxs("div",{className:"flex gap-4 justify-center mt-6 w-full max-w-xs",children:[c.jsxs("button",{onClick:()=>r&&r(t),className:"flex-1 py-3 bg-white text-black font-bold rounded-xl hover:bg-gray-200 transition-colors shadow-lg flex items-center justify-center gap-2",children:[c.jsx(LM,{size:20})," Message"]}),c.jsx("button",{onClick:()=>u(t,"voice"),className:"p-3 bg-black/50 text-white rounded-xl hover:bg-black/70 border border-white/10 transition-colors backdrop-blur-sm",title:"Voice Call",children:c.jsx(VM,{size:22})}),c.jsx("button",{onClick:()=>u(t,"video"),className:"p-3 bg-black/50 text-white rounded-xl hover:bg-black/70 border border-white/10 transition-colors backdrop-blur-sm",title:"Video Call",children:c.jsx(ud,{size:22})})]}),t.bio&&c.jsxs("div",{className:"mt-6 w-full text-left bg-black/20 p-4 rounded-xl backdrop-blur-sm border border-white/5",children:[c.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase mb-2 tracking-wider",children:"About Me"}),c.jsx("p",{className:"text-gray-200 text-sm leading-relaxed whitespace-pre-wrap",children:t.bio})]}),c.jsxs("div",{className:"mt-4 text-xs text-gray-500 font-medium uppercase tracking-widest",children:["Member since ",t.createdAt?new Date(t.createdAt.seconds*1e3).toLocaleDateString("en-US",{month:"short",year:"numeric"}):"Unknown"]})]})]})})},gc=({isOpen:t,onClose:e,onConfirm:n,title:r="Confirm Action",message:a="Are you sure you want to proceed?",confirmText:l="Confirm",cancelText:u="Cancel",variant:h="danger"})=>{const m=()=>{n(),e()};return c.jsx(ws,{isOpen:t,onClose:e,title:r,size:"sm",children:c.jsxs("div",{className:"space-y-6",children:[c.jsx("p",{className:"text-dark-text",children:a}),c.jsxs("div",{className:"flex gap-3 justify-end",children:[c.jsx(at,{variant:"secondary",onClick:e,children:u}),c.jsx(at,{variant:h,onClick:m,children:l})]})]})})},aO=()=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let n=0;n<8;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},oO=({isOpen:t,onClose:e,serverId:n})=>{const[r,a]=T.useState(""),[l,u]=T.useState(!1),[h,m]=T.useState(!1),[p,y]=T.useState(!1),{success:b,error:x}=Kr(),k=async()=>{u(!0);try{const j=aO();await Rr(Ae(he,"inviteCodes",j),{serverId:n,createdAt:bt(),expiresAt:new Date(Date.now()+(p?365*24*60*60*1e3:1440*60*1e3)),maxUses:p?-1:1,uses:0,isActive:!0,isUnlimited:p}),a(j),b("Invite code generated!")}catch(j){console.error("Error generating invite:",j),x("Failed to generate invite code")}finally{u(!1)}},R=()=>{navigator.clipboard.writeText(r),m(!0),b("Copied to clipboard!"),setTimeout(()=>m(!1),2e3)};return c.jsx(ws,{isOpen:t,onClose:e,title:"Invite Code",size:"sm",children:c.jsx("div",{className:"space-y-4",children:r?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-dark-bg p-4 rounded-lg text-center",children:[c.jsx("div",{className:"text-3xl font-mono font-bold text-brand-primary mb-2",children:r}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(at,{variant:"secondary",onClick:R,className:"flex-1 flex items-center justify-center gap-2",children:h?c.jsxs(c.Fragment,{children:[c.jsx(Bo,{size:20}),"Copied!"]}):c.jsxs(c.Fragment,{children:[c.jsx(PT,{size:20}),"Copy Code"]})}),c.jsx(at,{variant:"secondary",onClick:()=>{a(""),m(!1),y(!1)},className:"flex items-center justify-center gap-2 px-4",title:"Generate new code",children:c.jsx(t7,{size:20})})]})]}),c.jsxs("div",{className:"text-xs text-dark-muted space-y-1",children:[c.jsxs("div",{children:[" ",p?"Expires in 1 year":"Expires in 24 hours"]}),c.jsxs("div",{children:[" ",p?"Unlimited uses":"One-time use only"]}),c.jsx("div",{children:" Share with trusted users"})]}),c.jsx(at,{variant:"secondary",onClick:e,className:"w-full",children:"Close"})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"text-dark-text text-sm",children:"Generate an invite code for this server."}),c.jsxs("label",{className:"flex items-center gap-2 p-3 rounded bg-dark-bg cursor-pointer hover:bg-opacity-80 transition-colors",children:[c.jsx("input",{type:"checkbox",checked:p,onChange:j=>y(j.target.checked),className:"w-4 h-4 rounded border-gray-600 bg-dark-bg text-brand-primary focus:ring-brand-primary"}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-white text-sm font-medium",children:"Unlimited Uses"}),c.jsx("span",{className:"text-dark-muted text-xs",children:"Code will not expire after one use"})]})]})]}),c.jsx(at,{variant:"primary",onClick:k,disabled:l,className:"w-full",children:l?"Generating...":"Generate Invite Code"})]})})})},lO=[{emoji:"",text:"Gaming",type:"gaming"},{emoji:"",text:"Working",type:"working"},{emoji:"",text:"Listening to music",type:"music"},{emoji:"",text:"Watching",type:"watching"},{emoji:"",text:"Eating",type:"eating"},{emoji:"",text:"AFK",type:"afk"},{emoji:"",text:"Focusing",type:"focusing"},{emoji:"",text:"Studying",type:"studying"}],Fw={online:{color:"bg-green-500",label:"Online",icon:""},idle:{color:"bg-yellow-500",label:"Idle",icon:""},dnd:{color:"bg-red-500",label:"Do Not Disturb",icon:""},invisible:{color:"bg-gray-500",label:"Invisible",icon:""},offline:{color:"bg-gray-500",label:"Offline",icon:""}},cO=t=>Fw[t]||Fw.offline,Q3=({status:t,size:e="md",className:n})=>{const r=cO(t),a={sm:"w-2.5 h-2.5",md:"w-3 h-3",lg:"w-4 h-4"};return t==="invisible"?null:c.jsx("div",{className:Vt("rounded-full border-2 border-dark-bg",r.color,a[e]||a.md,n),title:r.label})},uO=({dm:t,currentUserId:e,isSelected:n,unreadCount:r,onClick:a,onContextMenu:l})=>{const u=t.participants.find(p=>p!==e),[h,m]=T.useState(null);return T.useEffect(()=>{(async()=>{if(u)try{const y=await ap(Ae(he,"users",u));y.exists()&&m({id:y.id,...y.data()})}catch(y){console.error("Error fetching DM user:",y)}})()},[u]),h?c.jsxs("button",{onClick:a,onContextMenu:l,className:Vt("w-full flex items-center gap-3 px-2 py-2 rounded mb-1 group relative","text-dark-muted hover:bg-dark-hover hover:text-dark-text","transition-colors duration-150",n&&"bg-dark-hover text-dark-text"),children:[c.jsxs("div",{className:"relative",children:[h.photoUrl?c.jsx("img",{src:h.photoUrl,alt:h.displayName,className:"w-8 h-8 rounded-full object-cover"}):c.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white text-sm font-bold",children:h.displayName?.[0]?.toUpperCase()}),r>0&&c.jsx("div",{className:"absolute -top-1 -right-1 min-w-4 h-4 bg-red-500 rounded-full flex items-center justify-center border-2 border-dark-sidebar pointer-events-none z-10",children:c.jsx("span",{className:"text-white text-[9px] font-bold px-0.5",children:r>9?"9+":r})})]}),c.jsxs("div",{className:"flex-1 text-left overflow-hidden",children:[c.jsxs("div",{className:"text-sm font-medium truncate flex justify-between items-center",children:[c.jsx("span",{children:h.displayName}),t.updatedAt&&c.jsx("span",{className:"text-[10px] text-gray-500 hidden group-hover:block",children:cp(t.updatedAt)})]}),c.jsx("div",{className:"text-xs truncate opacity-70",children:t.lastMessage?.text||"Start a conversation"})]})]}):null},dO=({dms:t,unreadDms:e={},selectedDmId:n,onSelectDm:r})=>{const{currentUser:a}=Ln(),[l,u]=T.useState(null),[h,m]=T.useState([]),p=(x,k)=>{x.preventDefault(),u({x:x.pageX,y:x.pageY,dmId:k.id})},y=async x=>{if(m(k=>[...k,x]),u(null),!!a)try{const k=Ae(he,"dms",x);await rt(k,{hiddenFor:Pd(a.uid)}),n===x&&r(null)}catch(k){console.error("Error deleting DM:",k),m(R=>R.filter(j=>j!==x))}};T.useEffect(()=>{const x=()=>u(null);return window.addEventListener("click",x),()=>window.removeEventListener("click",x)},[]);const b=t?.filter(x=>!h.includes(x.id))||[];return b.length===0?c.jsxs("div",{className:"px-4 py-8 text-center text-dark-muted text-sm",children:[c.jsx("p",{children:"No conversations yet."}),c.jsx("p",{className:"mt-2",children:"Start a DM from the friends list!"})]}):c.jsxs("div",{className:"flex-1 overflow-y-auto py-3",children:[c.jsxs("div",{className:"px-2",children:[c.jsx("div",{className:"text-xs font-semibold text-dark-muted uppercase px-2 mb-2 flex justify-between items-center",children:c.jsx("span",{children:"Direct Messages"})}),c.jsx("div",{className:"space-y-0.5",children:b.map(x=>c.jsx(uO,{dm:x,currentUserId:a.uid,isSelected:n===x.id,unreadCount:e[x.id]?.count||0,onClick:()=>r(x),onContextMenu:k=>p(k,x)},x.id))})]}),l&&c.jsx("div",{className:"fixed bg-dark-sidebar border border-dark-hover shadow-xl rounded-md z-50 py-1 min-w-[160px]",style:{top:l.y,left:l.x},children:c.jsxs("button",{onClick:()=>y(l.dmId),className:"w-full text-left px-4 py-2 hover:bg-red-500/10 text-red-400 hover:text-red-500 text-sm flex items-center gap-2 transition-colors",children:[c.jsx(Pi,{size:16}),"Delete Conversation"]})})]})};let Q0=null;const fp=()=>(Q0||(Q0=new(window.AudioContext||window.webkitAudioContext)),Q0),vc=async(t,e,n="sine",r=.3)=>{try{const a=fp();a.state==="suspended"&&await a.resume();const l=a.createOscillator(),u=a.createGain();l.connect(u),u.connect(a.destination),l.frequency.value=t,l.type=n,u.gain.setValueAtTime(r,a.currentTime),u.gain.exponentialRampToValueAtTime(.01,a.currentTime+e),l.start(a.currentTime),l.stop(a.currentTime+e)}catch(a){console.warn("[VoiceSound] Failed to play tone:",a)}},$w=()=>{fp(),setTimeout(()=>vc(440,.1,"sine",.2),0),setTimeout(()=>vc(554,.15,"sine",.25),80)},Hw=()=>{fp(),setTimeout(()=>vc(554,.1,"sine",.2),0),setTimeout(()=>vc(440,.15,"sine",.15),80)},X0=()=>{fp(),setTimeout(()=>vc(880,.08,"sine",.2),0),setTimeout(()=>vc(1100,.12,"sine",.25),60)},R1=(t,e={})=>{const[n,r]=T.useState(!1),a=T.useRef(null),l=T.useRef(null),u=T.useRef(null),h=e.threshold??30,m=e.interval??100;return T.useEffect(()=>{const p=()=>{if(u.current&&(clearInterval(u.current),u.current=null),a.current){const x=a.current;x.state!=="closed"&&x.close().catch(k=>console.warn("Error closing AudioContext:",k)),a.current=null}l.current=null,r(!1)};if(!t){p();return}const y=t.getAudioTracks();if(y.length===0){p();return}const b=y[0];if(!b.enabled||b.muted){p();return}try{const x=window.AudioContext||window.webkitAudioContext,k=new x,R=k.createAnalyser();R.fftSize=256,R.smoothingTimeConstant=.5,k.createMediaStreamSource(t).connect(R),a.current=k,l.current=R,k.state==="suspended"&&k.resume().then(()=>{console.log("[useSpeakingIndicator] AudioContext resumed")}).catch(U=>console.error("[useSpeakingIndicator] Failed to resume AudioContext:",U));const N=new Uint8Array(R.frequencyBinCount);u.current=setInterval(()=>{if(!l.current)return;l.current.getByteFrequencyData(N);let U=0;for(let O=0;O<N.length;O++)U+=N[O];const I=U/N.length>h;r(I)},m)}catch(x){console.error("[useSpeakingIndicator] Error initializing audio analysis:",x),p()}return p},[t,h,m]),n},X3=T.createContext(),Ld=()=>{const t=T.useContext(X3);if(!t)throw new Error("useVoiceChannel must be used within VoiceChannelProvider");return t},hO=({children:t})=>{const{currentUser:e,userProfile:n}=Ln(),{currentServer:r,channels:a}=Wa(),[l,u]=T.useState(null),[h,m]=T.useState(null),[p,y]=T.useState([]),[b,x]=T.useState(null),[k,R]=T.useState(null),[j,N]=T.useState(new Map),[U,$]=T.useState(new Map),[I,O]=T.useState([]),[B,q]=T.useState(null),[w,E]=T.useState([]),[A,P]=T.useState(null),[L,z]=T.useState(new Map),[M,se]=T.useState(null),[le,Y]=T.useState(!1),[ee,Z]=T.useState(!1),[Ee,Re]=T.useState(!1),[H,W]=T.useState(!1),[ie,ve]=T.useState(!1),Te=T.useRef(null),De=T.useRef(null),ae=T.useRef(null),Le=T.useRef(null),Ie=T.useRef(new Map),de=T.useRef(new Map),pe=T.useRef([]),ge=T.useRef(null),Se=T.useRef(null),it=T.useRef(null),_e=T.useRef(null),Ue=T.useRef(null),Me=T.useRef([]);T.useEffect(()=>{_e.current=l},[l]),T.useEffect(()=>{Ue.current=h},[h]);const F=T.useCallback(Ve=>{if(Ve&&Ve.type==="SOUND_EFFECT"&&Ve.payload?.src){console.log("[VoiceChannel] Received sound effect:",Ve.payload.name);const Ne=new Audio(Ve.payload.src);Ne.volume=.5,pe.current.push(Ne),Ne.onended=()=>{pe.current=pe.current.filter(Je=>Je!==Ne)},Ne.play().catch(Je=>console.error("[VoiceChannel] Error playing sound:",Je))}},[]);T.useEffect(()=>{if(!e)return;const Ve=new $3;return Ve.on("open",Ne=>{console.log("[VoiceChannel] My Peer ID:",Ne),De.current=Ne,Te.current=Ve}),Ve.on("connection",Ne=>{console.log("[VoiceChannel] Incoming data connection from:",Ne.peer),Ne.on("open",()=>{de.current.set(Ne.peer,Ne)}),Ne.on("data",F),Ne.on("close",()=>{de.current.delete(Ne.peer)})}),Ve.on("call",Ne=>{console.log("[VoiceChannel] Incoming call from:",Ne.peer);const Je=ae.current;Je?Ne.answer(Je):Ne.answer(),Ne.on("stream",Xe=>{console.log("[VoiceChannel] Received remote stream from:",Ne.peer),$(pt=>new Map(pt).set(Ne.peer,Xe))}),Ne.on("close",()=>{$(Xe=>{const pt=new Map(Xe);return pt.delete(Ne.peer),pt})}),Ie.current.set(Ne.peer,Ne)}),Ve.on("error",Ne=>{if(console.error("[VoiceChannel] Peer error details:",{type:Ne.type,message:Ne.message,targetPeer:Ne.peer}),Ne.type==="peer-unavailable"||Ne.message?.includes("Could not connect to peer")){let Je=Ne.peer;if(!Je){const Xe=Ne.message.match(/peer\s+([a-zA-Z0-9-]+)/);Xe&&(Je=Xe[1])}Je&&_e.current&&Ue.current&&(console.log("[VoiceChannel] Proactively removing ghost peer:",Je),y(Xe=>{const pt=Xe.find(ut=>ut.peerId===Je);if(pt&&pt.odaId){console.log("[VoiceChannel] Cleaning up Firestore for ghost:",pt.displayName);const ut=Ae(he,"servers",Ue.current,"channels",_e.current,"voiceParticipants",pt.odaId);Yr(ut).catch(()=>{})}return Xe.filter(ut=>ut.peerId!==Je)}))}}),()=>{pe.current.forEach(Ne=>{try{Ne.pause(),Ne.currentTime=0}catch{}}),pe.current=[],Ve.destroy(),Te.current=null,De.current=null}},[e]);const Q=T.useCallback(async()=>{try{const Ve=await navigator.mediaDevices.enumerateDevices(),Ne=Ve.filter(Xe=>Xe.kind==="audioinput"),Je=Ve.filter(Xe=>Xe.kind==="videoinput");O(Ne),E(Je),!B&&Ne.length>0&&q(Ne[0].deviceId),!A&&Je.length>0&&P(Je[0].deviceId)}catch(Ve){console.error("[VoiceChannel] Failed to refresh devices:",Ve)}},[B,A]);T.useEffect(()=>(Q(),navigator.mediaDevices.ondevicechange=Q,()=>{navigator.mediaDevices.ondevicechange=null}),[Q]);const Ce=R1(!le&&ie&&b?b:null,{threshold:15,interval:50});T.useEffect(()=>{if(!ae.current||!ie||le)return;const Ve=ae.current.getAudioTracks()[0];Ve&&(Ce?Ve.enabled||(Ve.enabled=!0,console.log("[VAD] Audio enabled - speaking detected")):Ve.enabled&&(Ve.enabled=!1,console.log("[VAD] Audio disabled - silence detected")))},[Ce,ie,le]);const $e=T.useCallback(async Ve=>{if(q(Ve),!(!l||!ae.current))try{const Ne=await navigator.mediaDevices.getUserMedia({audio:{deviceId:{exact:Ve}},video:Ee});ae.current&&ae.current.getTracks().forEach(Xe=>Xe.stop()),ae.current=Ne,x(Ne);const Je=Ne.getAudioTracks()[0];Je&&(Je.enabled=!le),Ie.current.forEach((Xe,pt)=>{const ut=Te.current.call(pt,Ne);ut&&(ut.on("stream",Ct=>{$(zt=>new Map(zt).set(pt,Ct))}),Ie.current.set(pt,ut))}),console.log("[VoiceChannel] Switched to audio device:",Ve)}catch(Ne){console.error("[VoiceChannel] Failed to switch audio device:",Ne)}},[l,Ee,le]),Qe=T.useCallback(async Ve=>{if(P(Ve),!(!l||!ae.current||!Ee))try{const Je=(await navigator.mediaDevices.getUserMedia({audio:B?{deviceId:{exact:B}}:!0,video:{deviceId:{exact:Ve}}})).getVideoTracks()[0];if(Je){const Xe=ae.current.getVideoTracks()[0];Xe&&Xe.stop(),Xe&&ae.current.removeTrack(Xe),ae.current.addTrack(Je),x(new MediaStream(ae.current.getTracks())),Ie.current.forEach((pt,ut)=>{const Ct=Te.current.call(ut,ae.current);Ct&&(Ct.on("stream",zt=>{$(xt=>new Map(xt).set(ut,zt))}),Ie.current.set(ut,Ct))})}console.log("[VoiceChannel] Switched to video device:",Ve)}catch(Ne){console.error("[VoiceChannel] Failed to switch video device:",Ne)}},[l,Ee,B]),ct=T.useRef([]),$t=T.useRef(new Set);T.useEffect(()=>{if(!l||!h){y([]),ct.current=[],$t.current=new Set;return}const Ve=wt(he,"servers",h,"channels",l,"voiceParticipants"),Ne=qr(Ve,vm("joinedAt","asc")),Je=gr(Ne,Xe=>{const pt=[];Xe.forEach(Be=>{pt.push({odaId:Be.id,...Be.data()})});const ut=new Set(ct.current.map(Be=>Be.odaId)),Ct=new Set(pt.map(Be=>Be.odaId));pt.forEach(Be=>{!ut.has(Be.odaId)&&Be.odaId!==e?.uid&&$w()}),ct.current.forEach(Be=>{!Ct.has(Be.odaId)&&Be.odaId!==e?.uid&&Hw()});const zt=new Set(pt.filter(Be=>Be.isScreenSharing).map(Be=>Be.odaId));zt.forEach(Be=>{!$t.current.has(Be)&&Be!==e?.uid&&X0()}),ct.current=pt,$t.current=zt;const xt=Date.now(),sn=pt.filter(Be=>{if(Be.odaId===e?.uid)return!0;const gt=Be.lastHeartbeat?.toMillis?Be.lastHeartbeat.toMillis():Be.lastHeartbeat||(Be.joinedAt?.toMillis?Be.joinedAt.toMillis():Date.now());if(xt-gt>3e4){console.log("[VoiceChannel] Filtering ghost participant locally (no activity):",Be.displayName);const Qn=Ae(he,"servers",h,"channels",l,"voiceParticipants",Be.odaId);return Yr(Qn).catch(()=>{}),!1}return!0});$(Be=>{const gt=new Map(Be);for(const[Ut]of Be)sn.some($i=>$i.peerId===Ut||$i.odaId===Ut)||gt.delete(Ut);return gt}),sn.forEach(Be=>{if(Be.odaId!==e?.uid&&Be.peerId&&!Ie.current.has(Be.peerId)&&Te.current&&ae.current){console.log("[VoiceChannel] Calling peer:",Be.peerId);const gt=Te.current.call(Be.peerId,ae.current);if(gt&&(gt.on("stream",Ut=>{$(Qn=>new Map(Qn).set(Be.peerId,Ut))}),gt.on("close",()=>{$(Ut=>{const Qn=new Map(Ut);return Qn.delete(Be.peerId),Qn})}),Ie.current.set(Be.peerId,gt)),!de.current.has(Be.peerId)){const Ut=Te.current.connect(Be.peerId);Ut&&(Ut.on("open",()=>{de.current.set(Be.peerId,Ut)}),Ut.on("data",F),Ut.on("close",()=>{de.current.delete(Be.peerId)}))}}});const Vn=new Set(sn.map(Be=>Be.peerId));Ie.current.forEach((Be,gt)=>{if(!Vn.has(gt)){Be.close(),Ie.current.delete(gt);const Ut=de.current.get(gt);Ut&&(Ut.close(),de.current.delete(gt))}}),y(sn),ct.current=sn,Me.current=pt});return()=>Je()},[l,h,e,F]);const fn=T.useCallback(async Ve=>{if(!e||!r||!Te.current||!De.current){console.error("[VoiceChannel] Cannot join: missing requirements");return}try{const Ne=await navigator.mediaDevices.getUserMedia({audio:B?{deviceId:{exact:B}}:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0},video:!1});x(Ne),ae.current=Ne;const Je=Ae(he,"servers",r,"channels",Ve,"voiceParticipants",e.uid);await Rr(Je,{odaId:e.uid,peerId:De.current,displayName:n?.displayName||e.displayName||"User",photoUrl:n?.photoUrl||n?.photoURL||null,joinedAt:bt(),isMuted:!1,isVideoOn:!1,isScreenSharing:!1});const Xe=async()=>{if(l&&e&&h)try{const Ct=Ae(he,"servers",h,"channels",l,"voiceParticipants",e.uid);await Rr(Ct,{lastHeartbeat:bt()},{merge:!0})}catch(Ct){console.error("[VoiceChannel] Heartbeat failed:",Ct)}};await Xe(),ge.current=setInterval(Xe,5e3),console.log("[VoiceChannel] Heartbeat started");const pt=async()=>{if(!_e.current||!Ue.current)return;const Ct=Date.now(),zt=Me.current;zt.length>0&&console.log(`[VoiceChannel] Ghost Monitor: checking ${zt.length} total entries...`),Me.current.forEach(xt=>{if(xt.odaId===e?.uid)return;const sn=xt.lastHeartbeat||xt.joinedAt,Vn=sn?.toMillis?sn.toMillis():sn||0;if(Vn===0)return;const Be=Ct-Vn;if(Be>2e4){console.log("[VoiceChannel] Interval cleanup removing ghost:",xt.displayName,`(${Math.round(Be/1e3)}s idle)`);const gt=Ae(he,"servers",Ue.current,"channels",_e.current,"voiceParticipants",xt.odaId);Yr(gt).catch(Ut=>console.error("[VoiceChannel] Failed to delete ghost:",Ut)),y(Ut=>Ut.filter(Qn=>Qn.odaId!==xt.odaId))}})};it.current=setInterval(pt,1e4),console.log("[VoiceChannel] Global cleanup interval started");const ut=async()=>{if(!Ie.current.size){se(null);return}let Ct=0,zt=0;const xt=Array.from(Ie.current.values()).map(async sn=>{if(sn.peerConnection)try{const Vn=await sn.peerConnection.getStats();let Be=!1;Vn.forEach(gt=>{gt.type==="candidate-pair"&&gt.state==="succeeded"&&(Be=!0,gt.currentRoundTripTime!==void 0?(Ct+=Math.round(gt.currentRoundTripTime*1e3),zt++):gt.roundTripTime!==void 0&&(Ct+=Math.round(gt.roundTripTime*1e3),zt++))}),Be||Vn.forEach(gt=>{if(gt.type==="candidate-pair"&&(gt.currentRoundTripTime||gt.roundTripTime)){const Ut=gt.currentRoundTripTime||gt.roundTripTime;Ct+=Math.round(Ut*1e3),zt++}})}catch(Vn){console.warn("[VoiceChannel] Stats error:",Vn)}});if(await Promise.all(xt),zt>0){const sn=Math.round(Ct/zt);se(sn)}};Se.current=setInterval(ut,2e3),u(Ve),m(r),Y(!1),Re(!1),W(!1),$w(),console.log("[VoiceChannel] Joined channel:",Ve)}catch(Ne){console.error("[VoiceChannel] Failed to join:",Ne)}},[e,r,n,B]),ar=T.useRef(!1),ke=T.useCallback(async()=>{if(!(ar.current||!l||!e||!h))try{ar.current=!0,ge.current&&(clearInterval(ge.current),ge.current=null,console.log("[VoiceChannel] Heartbeat stopped")),it.current&&(clearInterval(it.current),it.current=null),Se.current&&(clearInterval(Se.current),Se.current=null);const Ve=Ae(he,"servers",h,"channels",l,"voiceParticipants",e.uid);await Yr(Ve),ae.current&&(ae.current.getTracks().forEach(Ne=>{Ne.stop(),console.log("[VoiceChannel] Stopped track:",Ne.kind)}),ae.current=null,x(null)),Le.current&&(Le.current.getTracks().forEach(Ne=>{Ne.stop(),console.log("[VoiceChannel] Stopped screen track:",Ne.kind)}),Le.current=null,R(null)),Ie.current.forEach(Ne=>Ne.close()),Ie.current.clear(),de.current.forEach(Ne=>Ne.close()),de.current.clear(),$(new Map),u(null),m(null),y([]),Re(!1),W(!1),Y(!1),Z(!1),pe.current.length>0&&(console.log("[VoiceChannel] Stopping",pe.current.length,"active sounds"),pe.current.forEach(Ne=>{try{Ne.pause(),Ne.currentTime=0}catch(Je){console.error("[VoiceChannel] Error stopping sound:",Je)}}),pe.current=[]),Hw(),console.log("[VoiceChannel] Left channel - all media stopped")}catch(Ve){console.error("[VoiceChannel] Failed to leave:",Ve)}finally{setTimeout(()=>{ar.current=!1},500)}},[l,e,h]);T.useEffect(()=>{const Ve=()=>{l&&ke()};return window.addEventListener("beforeunload",Ve),()=>window.removeEventListener("beforeunload",Ve)},[l,ke]);const ze=T.useCallback(()=>{if(ae.current){const Ve=ae.current.getAudioTracks()[0];if(Ve){const Ne=!le;if(Y(Ne),Ne?Ve.enabled=!1:ie||(Ve.enabled=!0),l&&e&&h){const Je=Ae(he,"servers",h,"channels",l,"voiceParticipants",e.uid);Rr(Je,{isMuted:Ne},{merge:!0})}}}},[l,e,h,le,ie]),nt=T.useCallback(()=>{Z(Ve=>{const Ne=!Ve;return U.forEach(Je=>{Je.getAudioTracks().forEach(Xe=>{Xe.enabled=!Ne})}),Ne})},[U]),tt=T.useCallback(async()=>{if(!(!ae.current||!l))try{if(Ee){const Ve=ae.current.getVideoTracks()[0];Ve&&(Ve.stop(),ae.current.removeTrack(Ve)),Re(!1)}else{const Ne=(await navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0];ae.current.addTrack(Ne),x(new MediaStream(ae.current.getTracks())),Re(!0),Ie.current.forEach((Je,Xe)=>{const pt=Te.current.call(Xe,ae.current);pt&&(pt.on("stream",ut=>{$(Ct=>new Map(Ct).set(Xe,ut))}),Ie.current.set(Xe,pt))})}if(e&&h){const Ve=Ae(he,"servers",h,"channels",l,"voiceParticipants",e.uid);Rr(Ve,{isVideoOn:!Ee},{merge:!0})}}catch(Ve){console.error("[VoiceChannel] Failed to toggle video:",Ve)}},[Ee,l,e,h]),Qt=T.useCallback(async(Ve=null)=>{if(l)try{if(H||Ve===null&&Le.current){if(Le.current&&(Le.current.getTracks().forEach(xt=>xt.stop()),Le.current=null),W(!1),R(null),e&&h){const xt=Ae(he,"servers",h,"channels",l,"voiceParticipants",e.uid);Rr(xt,{isScreenSharing:!1},{merge:!0})}return}let Ne;const Je={width:Ve?.width||960,height:Ve?.height||540,frameRate:Ve?.frameRate||15};console.log("[VoiceChannel] Screen share starting with constraints:",Je),Ve?.sourceId?Ne=await navigator.mediaDevices.getUserMedia({audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:Ve.sourceId,maxWidth:Je.width,maxHeight:Je.height,maxFrameRate:Je.frameRate}}}):Ne=await navigator.mediaDevices.getDisplayMedia({video:{width:{ideal:Je.width},height:{ideal:Je.height},frameRate:{ideal:Je.frameRate},cursor:"always"},audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!1}});const Xe=Ne.getVideoTracks()[0],pt=Ne.getAudioTracks()[0],ut=ae.current?.getAudioTracks()[0];let Ct=null;if(ut&&pt){console.log("[VoiceChannel] Mixing microphone and system audio");try{const xt=new(window.AudioContext||window.webkitAudioContext),sn=xt.createMediaStreamDestination(),Vn=xt.createMediaStreamSource(new MediaStream([ut])),Be=xt.createMediaStreamSource(new MediaStream([pt])),gt=xt.createGain(),Ut=xt.createGain();gt.gain.value=1,Ut.gain.value=.5,Vn.connect(gt),Be.connect(Ut),gt.connect(sn),Ut.connect(sn),Ct=sn.stream.getAudioTracks()[0]}catch(xt){console.error("[VoiceChannel] Audio mixing failed, using mic only:",xt),Ct=ut}}else ut?(console.log("[VoiceChannel] Using microphone audio only"),Ct=ut):pt&&(console.log("[VoiceChannel] Using system audio only"),Ct=pt);const zt=new MediaStream([Xe]);if(Ct&&zt.addTrack(Ct),Le.current=zt,Xe.onended=()=>{if(W(!1),R(null),Le.current=null,e&&h&&l){const xt=Ae(he,"servers",h,"channels",l,"voiceParticipants",e.uid);Rr(xt,{isScreenSharing:!1},{merge:!0})}},Ie.current.forEach((xt,sn)=>{const Vn=Te.current.call(sn,zt);Vn&&Vn.on("stream",Be=>{$(gt=>new Map(gt).set(sn,Be))})}),W(!0),R(zt),X0(),e&&h){const xt=Ae(he,"servers",h,"channels",l,"voiceParticipants",e.uid);Rr(xt,{isScreenSharing:!0},{merge:!0})}}catch(Ne){console.error("[VoiceChannel] Failed to toggle screen share:",Ne)}},[H,l,e,h,ae,Le,Ie,de,U,$,W,R,X0]),Dt=a?.filter(Ve=>Ve.type==="voice")||[];T.useEffect(()=>()=>{l&&ke()},[l,h]);const{customSounds:ht}=N1(),vn=T.useCallback(Ve=>{const Ne=ht.find(Xe=>Xe.id===Ve);if(!Ne)return;const Je=new Audio(Ne.src);Je.volume=.5,pe.current.push(Je),Je.onended=()=>{pe.current=pe.current.filter(Xe=>Xe!==Je)},Je.play().catch(Xe=>console.error("[VoiceChannel] Error playing sound locally:",Xe)),de.current.forEach((Xe,pt)=>{Xe.open&&(console.log("[VoiceChannel] Broadcasting sound to:",pt),Xe.send({type:"SOUND_EFFECT",payload:{src:Ne.src,name:Ne.name}}))})},[ht]),nn={currentVoiceChannel:l,connectedServerId:h,participants:p,localStream:b,screenStream:k,remoteStreams:U,voiceChannels:Dt,currentPing:M,isMuted:le,isDeafened:ee,isVideoOn:Ee,isScreenSharing:H,audioDevices:I,selectedAudioDeviceId:B,vadEnabled:ie,joinVoiceChannel:fn,leaveVoiceChannel:ke,toggleMute:ze,toggleDeafen:nt,toggleVideo:tt,toggleScreenShare:Qt,changeAudioDevice:$e,videoDevices:w,selectedVideoDeviceId:A,changeVideoDevice:Qe,refreshDevices:Q,userVolumes:L,setUserVolume:(Ve,Ne)=>{z(Je=>{const Xe=new Map(Je);return Xe.set(Ve,Ne),Xe})},playSound:vn,toggleVAD:()=>ve(Ve=>!Ve)};return c.jsxs(X3.Provider,{value:nn,children:[t,c.jsx(fO,{remoteStreams:U,isDeafened:ee,participants:p,userVolumes:L})]})},fO=({remoteStreams:t,isDeafened:e,participants:n,userVolumes:r})=>c.jsx("div",{style:{display:"none"},children:Array.from(t.entries()).map(([a,l])=>{const h=n.find(p=>p.peerId===a)?.odaId,m=h?r.get(h)??1:1;return c.jsx(mO,{stream:l,muted:e,volume:m},a)})}),mO=({stream:t,muted:e,volume:n})=>{const r=T.useRef(null);return T.useEffect(()=>{r.current&&t&&(r.current.srcObject=t,r.current.play().catch(a=>{console.log("[VoiceChannel] Audio autoplay blocked:",a)}))},[t]),T.useEffect(()=>{r.current&&(r.current.muted=e)},[e]),T.useEffect(()=>{r.current&&(r.current.volume=n)},[n]),c.jsx("audio",{ref:r,autoPlay:!0,playsInline:!0})},W3=({participant:t,position:e,onClose:n,channelId:r,serverId:a})=>{const{userVolumes:l,setUserVolume:u}=Ld(),{userProfile:h}=Ln(),m=h?.role==="admin",p=Math.round((l.get(t.odaId)??1)*100),y=x=>{const k=parseInt(x.target.value)/100;u(t.odaId,k)},b=async()=>{if(console.log("[Admin] Kick attempt:",{isAdmin:m,channelId:r,serverId:a,participantId:t.odaId,participantName:t.displayName}),!m){console.error("[Admin] Not an admin, cannot kick");return}if(!r||!a){console.error("[Admin] Missing channel or server ID");return}try{const x=Ae(he,"servers",a,"channels",r,"voiceParticipants",t.odaId);console.log("[Admin] Deleting participant:",x.path),await Yr(x),console.log("[Admin] Successfully kicked user from voice:",t.displayName),n()}catch(x){console.error("[Admin] Failed to kick user:",x)}};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40",onClick:n,onContextMenu:x=>{x.preventDefault(),n()}}),c.jsxs("div",{className:"fixed bg-[#111214] border border-[#1e1f22] rounded-lg shadow-xl py-3 z-50 w-64 px-3",style:{top:e.y,left:e.x},onClick:x=>x.stopPropagation(),children:[c.jsxs("div",{className:"text-xs font-bold text-[#949ba4] uppercase mb-3 px-1",children:[t.displayName," SETTINGS"]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between text-sm text-[#dbdee1] font-medium mb-1 px-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(t3,{size:14,className:"text-[#949ba4]"}),c.jsx("span",{children:"User Volume"})]}),c.jsxs("span",{className:"text-xs font-bold text-brand-primary",children:[p,"%"]})]}),c.jsx("input",{type:"range",min:"0",max:"100",value:p,onChange:y,className:"volume-slider",style:{background:`linear-gradient(to right, #ef9f64 0%, #ef9f64 ${p}%, #1e1f22 ${p}%, #1e1f22 100%)`}})]}),c.jsx("div",{className:"mt-4 border-t border-[#1e1f22] pt-2",children:c.jsx("div",{className:"text-[11px] text-[#949ba4] px-1 italic",children:"This setting only affects the audio heard by you."})}),m&&c.jsx("div",{className:"mt-3 border-t border-[#1e1f22] pt-3",children:c.jsxs("button",{onClick:b,className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-red-400 hover:bg-red-500/10 rounded transition-colors",children:[c.jsx(CP,{size:14}),c.jsx("span",{children:"Kick from Voice Channel"})]})})]})]})},pO=({channel:t})=>{const{currentVoiceChannel:e,joinVoiceChannel:n,participants:r,remoteStreams:a,localStream:l}=Ld(),{currentServer:u}=Wa(),{currentUser:h}=Ln(),[m,p]=T.useState([]),[y,b]=T.useState(null),x=e===t.id;T.useEffect(()=>{if(!u||!t.id)return;const R=wt(he,"servers",u,"channels",t.id,"voiceParticipants"),j=gr(R,U=>{const $=Date.now(),I=[];U.forEach(B=>{I.push({odaId:B.id,...B.data()})});const O=I.filter(B=>{if(B.odaId===h?.uid)return!0;const q=B.lastHeartbeat||B.joinedAt,w=q?.toMillis?q.toMillis():q||0;if(w===0)return!0;if($-w>3e4){console.log("[VoiceChannel] Passive sidebar cleanup purging ghost:",B.displayName);const A=Ae(he,"servers",u,"channels",t.id,"voiceParticipants",B.odaId);return Yr(A).catch(()=>{}),!1}return!0});p(O)}),N=setInterval(()=>{const U=Date.now();p($=>$.filter(I=>{if(I.odaId===h?.uid)return!0;const O=I.lastHeartbeat||I.joinedAt,B=O?.toMillis?O.toMillis():O||0;if(B===0)return!0;if(U-B>3e4){console.log("[VoiceChannel] Periodic sidebar cleanup purging ghost:",I.displayName);const q=Ae(he,"servers",u,"channels",t.id,"voiceParticipants",I.odaId);return Yr(q).catch(()=>{}),!1}return!0}))},15e3);return()=>{j(),clearInterval(N)}},[u,t.id,h]);const k=()=>{x||n(t.id)};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:`w-full flex items-center gap-2 px-2 py-1.5 rounded cursor-pointer transition-colors duration-150 ${x?"bg-dark-hover text-dark-text":"text-dark-muted hover:bg-dark-hover hover:text-dark-text"}`,onClick:k,children:[c.jsx(t3,{className:"flex-shrink-0"}),c.jsx("span",{className:"truncate text-sm flex-1 text-left",children:t.name})]}),m.length>0&&c.jsx("div",{className:"voice-participants",children:m.map(R=>c.jsx(gO,{participant:R,isLocal:R.odaId===h?.uid,remoteStreams:a,localStream:l,onContextMenu:j=>{R.odaId!==h?.uid&&(j.preventDefault(),b({participant:R,x:j.clientX,y:j.clientY}))}},R.odaId))}),y&&c.jsx(W3,{participant:y.participant,position:{x:y.x,y:y.y},onClose:()=>b(null),channelId:t.id,serverId:u})]})},gO=({participant:t,isLocal:e,remoteStreams:n,localStream:r,onContextMenu:a})=>{const l=e?r:n.get(t.peerId),u=R1(t.isMuted||!l?null:l,{threshold:15});return c.jsxs("div",{className:`voice-participant ${u?"speaking":""}`,onContextMenu:a,children:[c.jsx("div",{className:"participant-avatar",children:t.photoUrl?c.jsx("img",{src:t.photoUrl,alt:""}):c.jsx("div",{className:"avatar-placeholder",children:t.displayName?.charAt(0)?.toUpperCase()||"?"})}),c.jsx("span",{className:"participant-name",children:t.displayName}),c.jsxs("div",{className:"participant-status",children:[t.isMuted&&c.jsx(_1,{className:"status-icon muted"}),t.isVideoOn&&c.jsx(e3,{className:"status-icon video"}),t.isScreenSharing&&c.jsx(x1,{className:"status-icon screen"})]})]})},vO=()=>{const{voiceChannels:t}=Ld();return!t||t.length===0?null:c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-xs font-semibold text-dark-muted uppercase px-2 mb-1 mt-4",children:"VOICE CHANNELS"}),c.jsx("div",{className:"voice-channel-list",children:t.map(e=>c.jsx(pO,{channel:e},e.id))})]})},yO=({onClose:t})=>{const{participants:e,localStream:n,screenStream:r,remoteStreams:a,isMuted:l,isScreenSharing:u}=Ld(),{currentUser:h}=Ln(),[m,p]=T.useState(null),[y,b]=T.useState(null),x=e.length,k=x<=1?"grid-1":x<=2?"grid-2":x<=4?"grid-4":x<=6?"grid-6":x<=9?"grid-9":"grid-many",R=()=>u&&r?r:n,j=N=>N.odaId===h?.uid?R():a.get(N.peerId);return c.jsxs("div",{className:"voice-grid-overlay",children:[c.jsxs("div",{className:"voice-grid-modal",children:[c.jsxs("div",{className:"voice-grid-header",children:[c.jsx("h3",{children:"Voice Channel"}),c.jsx("button",{className:"close-btn",onClick:t,children:c.jsx(EP,{})})]}),c.jsx("div",{className:`voice-grid ${k}`,children:e.map(N=>c.jsx(xO,{participant:N,stream:j(N),isLocal:N.odaId===h?.uid,isMuted:N.odaId===h?.uid?l:N.isMuted,onExpand:()=>p(N),isFocused:!1,onContextMenu:U=>{N.odaId!==h?.uid&&(U.preventDefault(),b({participant:N,x:U.clientX,y:U.clientY}))}},N.odaId))})]}),y&&c.jsx(W3,{participant:y.participant,position:{x:y.x,y:y.y},onClose:()=>b(null)}),m&&c.jsx("div",{className:"voice-fullscreen-overlay",onClick:()=>p(null),children:c.jsx("div",{className:"voice-fullscreen-container",onClick:N=>N.stopPropagation(),children:c.jsx(bO,{stream:j(m),participant:m,isLocal:m.odaId===h?.uid,onClose:()=>p(null)})})})]})},bO=({stream:t,participant:e,isLocal:n,onClose:r})=>{const a=T.useRef(null);return T.useEffect(()=>{a.current&&t&&(a.current.srcObject=t)},[t]),c.jsxs("div",{className:"fullscreen-video-wrapper",children:[c.jsx("video",{ref:a,autoPlay:!0,playsInline:!0,muted:n,className:"fullscreen-video"}),c.jsxs("div",{className:"fullscreen-overlay",children:[c.jsxs("span",{className:"fullscreen-label",children:[e.displayName,n&&" (You)"]}),c.jsx("button",{className:"fullscreen-close-btn",onClick:r,children:c.jsx(xP,{})})]})]})},xO=({participant:t,stream:e,isLocal:n,isMuted:r,onExpand:a,isFocused:l,onContextMenu:u})=>{const h=T.useRef(null),m=R1(r?null:e,{threshold:5});T.useEffect(()=>{h.current&&e&&(h.current.srcObject=e)},[e]);const p=e?.getVideoTracks()?.length>0&&e.getVideoTracks()[0].enabled;return c.jsxs("div",{className:`video-tile ${n?"local":""} ${l?"focused":""} ${m?"speaking":""}`,onClick:()=>p&&a&&a(),onContextMenu:u,children:[p?c.jsx("video",{ref:h,autoPlay:!0,playsInline:!0,muted:n,className:"video-feed"}):c.jsx("div",{className:"video-placeholder",children:t.photoUrl?c.jsx("img",{src:t.photoUrl,alt:"",className:"avatar-large"}):c.jsx("div",{className:"avatar-placeholder-large",children:t.displayName?.charAt(0)?.toUpperCase()||"?"})}),c.jsxs("div",{className:"tile-overlay",children:[c.jsxs("span",{className:"participant-label",children:[t.displayName,n&&" (You)"]}),c.jsxs("div",{className:"tile-status",children:[r&&c.jsx(_1,{className:"status-muted"}),t.isScreenSharing&&c.jsx(x1,{className:"status-screen"}),p&&c.jsx(ZT,{className:"status-expand",onClick:y=>{y.stopPropagation(),a&&a()},title:"Full Screen"})]})]})]})},qw=()=>{if(window.electron&&window.electron.desktopCapturer)return window.electron.desktopCapturer;if(window.require)try{return window.require("electron").desktopCapturer}catch{return null}return null},J3=({isOpen:t,onClose:e,onConfirm:n})=>{const[r,a]=T.useState(720),[l,u]=T.useState(30),[h,m]=T.useState("screens"),[p,y]=T.useState({screens:[],windows:[]}),[b,x]=T.useState(null),[k,R]=T.useState(!1),j=!!qw();T.useEffect(()=>{if(t&&j){N();const $=setInterval(N,3e3);return()=>clearInterval($)}},[t,j]);const N=async()=>{const $=qw();if($)try{const I=await $.getSources({types:["window","screen"],thumbnailSize:{width:300,height:200}}),O=I.filter(q=>q.id.startsWith("screen:")),B=I.filter(q=>!q.id.startsWith("screen:"));y({screens:O,windows:B}),!b&&O.length>0&&x(O[0].id)}catch(I){console.error("Error loading sources:",I)}};if(!t)return null;const U=()=>{let $,I;r===1080?($=1920,I=1080):($=1280,I=720),n({width:$,height:I,frameRate:l,sourceId:b,displaySurface:h==="screens"?"monitor":"window"}),e()};return c.jsx("div",{className:"fixed inset-0 bg-black/80 z-[100] flex items-center justify-center animate-fade-in",children:c.jsxs("div",{className:"bg-dark-elem w-full max-w-2xl rounded-2xl shadow-2xl border border-dark-hover overflow-hidden transform transition-all scale-100 p-6 relative flex flex-col max-h-[90vh]",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6 shrink-0",children:[c.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[c.jsx(wm,{className:"text-brand-primary"}),"Screen Share"]}),c.jsx("button",{onClick:e,className:"p-1 hover:bg-dark-hover rounded-full transition-colors text-dark-muted hover:text-white",children:c.jsx($n,{size:24})})]}),c.jsxs("div",{className:"flex gap-6 overflow-hidden flex-1",children:[c.jsxs("div",{className:"w-64 flex flex-col gap-6 shrink-0 border-r border-dark-hover pr-6",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-xs font-bold text-dark-muted uppercase tracking-wider mb-3",children:"Resolution"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsx("button",{onClick:()=>a(720),className:`p-2 rounded-lg border text-xs font-bold ${r===720?"border-brand-primary bg-brand-primary/10 text-white":"border-dark-hover bg-dark-input text-gray-400"}`,children:"720p"}),c.jsx("button",{onClick:()=>a(1080),className:`p-2 rounded-lg border text-xs font-bold ${r===1080?"border-brand-primary bg-brand-primary/10 text-white":"border-dark-hover bg-dark-input text-gray-400"}`,children:"1080p"})]})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs font-bold text-dark-muted uppercase tracking-wider mb-3",children:"Frame Rate"}),c.jsx("div",{className:"grid grid-cols-3 gap-2",children:[15,30,60].map($=>c.jsx("button",{onClick:()=>u($),className:`p-2 rounded-lg border text-xs font-bold ${l===$?"border-brand-primary bg-brand-primary/10 text-white":"border-dark-hover bg-dark-input text-gray-400"}`,children:$},$))})]})]}),c.jsx("div",{className:"flex-1 flex flex-col min-h-0",children:j?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex gap-4 border-b border-dark-hover mb-4 shrink-0",children:[c.jsxs("button",{onClick:()=>m("screens"),className:`pb-2 text-sm font-bold flex items-center gap-2 transition-colors ${h==="screens"?"text-brand-primary border-b-2 border-brand-primary":"text-gray-400 hover:text-white"}`,children:[c.jsx(FM,{size:18})," Screens"]}),c.jsxs("button",{onClick:()=>m("windows"),className:`pb-2 text-sm font-bold flex items-center gap-2 transition-colors ${h==="windows"?"text-brand-primary border-b-2 border-brand-primary":"text-gray-400 hover:text-white"}`,children:[c.jsx(s7,{size:18})," Windows"]})]}),c.jsx("div",{className:"grid grid-cols-2 gap-3 overflow-y-auto pr-2 custom-scrollbar content-start",children:(h==="screens"?p.screens:p.windows).map($=>c.jsxs("button",{onClick:()=>x($.id),className:`group relative rounded-lg overflow-hidden border-2 transition-all text-left ${b===$.id?"border-brand-primary ring-2 ring-brand-primary/20":"border-transparent hover:border-gray-600 bg-black/40"}`,children:[c.jsxs("div",{className:"aspect-video bg-black relative",children:[c.jsx("img",{src:$.thumbnail.toDataURL(),alt:$.name,className:"w-full h-full object-contain"}),b===$.id&&c.jsx("div",{className:"absolute inset-0 bg-brand-primary/10 flex items-center justify-center",children:c.jsx(Bo,{className:"text-brand-primary drop-shadow-lg",size:48})})]}),c.jsx("div",{className:"p-2 bg-dark-input truncate text-xs font-medium text-gray-300 group-hover:text-white",children:$.name})]},$.id))})]}):c.jsx("div",{className:"flex items-center justify-center h-full text-center text-gray-500",children:c.jsxs("div",{className:"max-w-xs",children:[c.jsx(wm,{size:48,className:"mx-auto mb-4 opacity-50"}),c.jsxs("p",{className:"text-sm",children:["Browser limits source selection here.",c.jsx("br",{}),'Click "Go Live" to pick a screen or window.']})]})})})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-dark-hover mt-4 shrink-0",children:[c.jsx(at,{variant:"ghost",onClick:e,className:"text-dark-text hover:text-white",children:"Cancel"}),c.jsx(at,{variant:"primary",onClick:U,className:"px-8 shadow-lg shadow-brand-primary/20",disabled:j&&!b,children:"Go Live"})]})]})})},_O=()=>{const{currentVoiceChannel:t,participants:e,isMuted:n,isDeafened:r,isVideoOn:a,isScreenSharing:l,toggleMute:u,toggleDeafen:h,toggleVideo:m,toggleScreenShare:p,leaveVoiceChannel:y,audioDevices:b,selectedAudioDeviceId:x,changeAudioDevice:k,videoDevices:R,selectedVideoDeviceId:j,changeVideoDevice:N,refreshDevices:U,playSound:$,currentPing:I}=Ld(),{customSounds:O,addSound:B,removeSound:q}=N1(),{userProfile:w}=Ln(),{info:E}=Kr(),A=sc(w),{channels:P}=Wa(),[L,z]=T.useState(!1),[M,se]=T.useState(!1),[le,Y]=T.useState(!1),[ee,Z]=T.useState(!1),[Ee,Re]=T.useState(!1),H=T.useRef(null),W=T.useRef(null),ie=T.useRef(null),ve=T.useRef(null);T.useEffect(()=>{const ge=Se=>{H.current&&!H.current.contains(Se.target)&&Y(!1),W.current&&!W.current.contains(Se.target)&&Z(!1)};return(le||ee)&&document.addEventListener("mousedown",ge),()=>{document.removeEventListener("mousedown",ge)}},[le,ee]),T.useEffect(()=>{const ge=Se=>{ie.current&&!ie.current.contains(Se.target)&&Re(!1)};return Ee&&document.addEventListener("mousedown",ge),()=>{document.removeEventListener("mousedown",ge)}},[Ee]);const[Te,De]=T.useState(!1),ae=ge=>!ge&&ge!==0?"unknown":ge<100?"good":ge<250?"fair":"poor",Le=()=>{if(l)p(null);else{if(!A){E("Screen sharing is a Premium feature!");return}se(!0)}},Ie=ge=>{se(!1),p(ge)};if(!t)return null;const de=P?.find(ge=>ge.id===t),pe=async ge=>{const Se=ge.target.files[0];if(!Se)return;const it=Se.name.split(".")[0].slice(0,15);await B(it,Se),ve.current&&(ve.current.value="")};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"voice-channel-bar",children:[c.jsx("div",{className:"voice-bar-header",children:c.jsx("div",{className:"voice-bar-info",children:c.jsxs("div",{className:"voice-bar-status relative",children:[c.jsxs("div",{className:`voice-connection-status ${ae(I)}`,onMouseEnter:()=>De(!0),onMouseLeave:()=>De(!1),children:[c.jsx("div",{className:"signal-bar bar-1"}),c.jsx("div",{className:"signal-bar bar-2"}),c.jsx("div",{className:"signal-bar bar-3"})]}),Te&&c.jsxs("div",{className:"ping-stats-panel",children:[c.jsxs("div",{className:"ping-value",children:[I||"--"," ms"]}),c.jsx("div",{className:"ping-label",children:"Latency"})]}),c.jsx("span",{className:"voice-bar-channel",children:de?.name||"Voice Channel"})]})})}),c.jsxs("div",{className:"voice-bar-controls",children:[c.jsxs("div",{className:"control-group",children:[c.jsx("button",{className:`voice-control-btn ${n?"active":""}`,onClick:u,title:n?"Unmute":"Mute",children:n?c.jsx(_1,{}):c.jsx(wP,{})}),c.jsxs("div",{className:"voice-settings-wrapper",ref:H,children:[c.jsx("button",{className:`voice-control-btn arrow-btn ${le?"active":""}`,onClick:ge=>{ge.stopPropagation(),le||U(),Y(!le)},title:"Input Devices",children:c.jsx(Aw,{size:10})}),le&&c.jsxs("div",{className:"voice-device-menu",children:[c.jsx("div",{className:"menu-header",children:"Input Device"}),c.jsx("div",{className:"menu-list",children:b.length>0?b.map(ge=>c.jsxs("div",{className:`menu-item ${x===ge.deviceId?"active":""}`,onClick:()=>{k(ge.deviceId),Y(!1)},children:[c.jsx("span",{className:"truncate",children:ge.label||`Microphone ${ge.deviceId.slice(0,5)}`}),x===ge.deviceId&&c.jsx("div",{className:"active-dot"})]},ge.deviceId)):c.jsx("div",{className:"menu-item disabled",children:"No microphone found"})})]})]}),c.jsx("button",{className:`voice-control-btn ${r?"active":""}`,onClick:h,title:r?"Undeafen":"Deafen",children:r?c.jsx($M,{}):c.jsx(_P,{})})]}),c.jsxs("div",{className:"control-group",children:[c.jsx("button",{className:`voice-control-btn ${a?"active":""}`,onClick:m,title:a?"Turn Off Camera":"Turn On Camera",children:a?c.jsx(e3,{}):c.jsx(TP,{})}),c.jsxs("div",{className:"voice-settings-wrapper",ref:W,children:[c.jsx("button",{className:`voice-control-btn arrow-btn ${ee?"active":""}`,onClick:ge=>{ge.stopPropagation(),ee||U(),Z(!ee)},title:"Video Settings",children:c.jsx(Aw,{size:10})}),ee&&c.jsxs("div",{className:"voice-device-menu",children:[c.jsx("div",{className:"menu-header",children:"Camera Device"}),c.jsx("div",{className:"menu-list",children:R.length>0?R.map(ge=>c.jsxs("div",{className:`menu-item ${j===ge.deviceId?"active":""}`,onClick:()=>{N(ge.deviceId),Z(!1)},children:[c.jsx("span",{className:"truncate",children:ge.label||`Camera ${ge.deviceId.slice(0,5)}`}),j===ge.deviceId&&c.jsx("div",{className:"active-dot"})]},ge.deviceId)):c.jsx("div",{className:"menu-item disabled",children:"No camera found"})})]})]}),c.jsx("button",{className:`voice-control-btn ${l?"active":""}`,onClick:Le,title:l?"Stop Sharing":"Share Screen",children:c.jsx(x1,{})})]}),c.jsxs("div",{className:"control-group",children:[c.jsxs("div",{className:"voice-settings-wrapper",ref:ie,children:[c.jsx("button",{className:`voice-control-btn ${Ee?"active":""}`,onClick:ge=>{ge.stopPropagation(),Re(!Ee)},title:"Soundboard",children:c.jsx(Sm,{})}),Ee&&c.jsxs("div",{className:"voice-device-menu soundboard-menu",children:[c.jsxs("div",{className:"menu-header",children:[c.jsx("span",{children:"Soundboard"}),c.jsxs("span",{className:"text-[10px] opacity-50",children:[O.length,"/10"]})]}),c.jsx("div",{className:"menu-list soundboard-list",children:O.length===0?c.jsx("div",{className:"menu-item disabled",children:"No sounds added yet"}):O.map(ge=>c.jsxs("div",{className:"soundboard-item-wrapper group",children:[c.jsxs("div",{className:"menu-item soundboard-item",onClick:()=>{A&&$(ge.id)},children:[c.jsx("span",{className:"truncate flex-1",children:ge.name}),c.jsx("span",{className:"text-xs opacity-50",children:""})]}),c.jsx("button",{className:"sound-delete-btn",onClick:Se=>{Se.stopPropagation(),q(ge.id)},children:c.jsx(Pi,{size:14})})]},ge.id))}),O.length<10&&c.jsxs("div",{className:"menu-footer",children:[c.jsxs("button",{className:"add-sound-btn",onClick:()=>ve.current?.click(),children:[c.jsx(Io,{size:14}),c.jsx("span",{children:"Add Sound"})]}),c.jsx("input",{type:"file",ref:ve,className:"hidden",accept:"audio/mp3,audio/wav",onChange:pe})]}),!A&&c.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center rounded-lg p-4 text-center z-[60]",children:c.jsx("div",{children:c.jsx("p",{className:"text-orange-400 font-bold mb-1",children:"Premium Only"})})})]})]}),e.length>0&&c.jsx("button",{className:"voice-control-btn",onClick:()=>z(!0),title:"Expand Grid",children:c.jsx(ZT,{})})]}),c.jsx("div",{className:"control-group no-bg",children:c.jsx("button",{className:"voice-control-btn disconnect",onClick:y,title:"Disconnect",children:c.jsx(SP,{})})})]})]}),L&&c.jsx(yO,{onClose:()=>z(!1)}),c.jsx(J3,{isOpen:M,onClose:()=>se(!1),onConfirm:Ie})]})},Gw=({server:t,channels:e,selectedChannel:n,onSelectChannel:r,onOpenSettings:a,onOpenAdmin:l,onLogout:u,userProfile:h,serverId:m,userRole:p,userId:y,dms:b,unreadDms:x,selectedDm:k,onSelectDm:R})=>{const[j,N]=T.useState(!1),[U,$]=T.useState(!1),[I,O]=T.useState(!1),B=()=>{$(!1),u()};return c.jsxs("div",{className:"w-60 bg-dark-sidebar flex flex-col h-full",children:[c.jsxs("div",{className:"h-12 md:h-12 pt-safe-top md:pt-0 px-4 flex items-center justify-between border-b border-dark-hover shadow-md box-content",children:[c.jsx("h2",{className:"font-semibold text-dark-text truncate",children:t?.name||"Lumo"}),c.jsxs("div",{className:"flex items-center gap-1",children:[m&&p==="admin"&&c.jsx("button",{onClick:()=>O(!0),className:"p-1.5 hover:bg-dark-hover rounded transition-colors",title:"Generate Invite",children:c.jsx(a7,{className:"text-green-500",size:20})}),h?.role==="admin"&&c.jsx("button",{onClick:l,className:"p-1.5 hover:bg-dark-hover rounded transition-colors",title:"Admin Panel",children:c.jsx(IT,{className:"text-admin",size:20})})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto py-3",children:m==="home"?c.jsx(dO,{dms:b,unreadDms:x,selectedDmId:k?.id,onSelectDm:R}):c.jsxs("div",{className:"px-2",children:[c.jsx("div",{className:"text-xs font-semibold text-dark-muted uppercase px-2 mb-1",children:"Text Channels"}),e.filter(q=>q.type!=="voice").map(q=>c.jsxs("button",{onClick:()=>r(q),className:Vt("w-full flex items-center gap-2 px-2 py-1.5 rounded","text-dark-muted hover:bg-dark-hover hover:text-dark-text","transition-colors duration-150",n?.id===q.id&&"bg-dark-hover text-dark-text"),children:[c.jsx(dp,{className:"flex-shrink-0"}),c.jsx("span",{className:"truncate text-sm flex-1 text-left",children:q.name}),q.locked&&c.jsx(AM,{className:"flex-shrink-0 text-yellow-500",size:14,title:"Locked channel"})]},q.id)),c.jsx(vO,{})]})}),c.jsx(_O,{}),c.jsxs("div",{className:"h-20 bg-dark-bg px-2 flex items-center justify-between gap-2 border-t border-dark-hover -ml-[72px] w-[calc(100%+72px)] relative z-10",children:[c.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1 cursor-pointer hover:bg-dark-hover rounded p-2 transition-colors",onClick:()=>N(!0),children:[c.jsxs("div",{className:"relative flex-shrink-0",children:[h?.photoUrl?c.jsx("img",{src:h.photoUrl,alt:h.displayName,className:"w-12 h-12 rounded-full object-cover",onError:q=>{q.target.style.display="none",q.target.nextSibling.style.display="flex"}},h.photoUrl):null,c.jsx("div",{className:"w-12 h-12 rounded-full bg-brand-primary flex items-center justify-center text-white font-bold text-lg",style:{display:h?.photoUrl?"none":"flex"},children:h?.displayName?.[0]?.toUpperCase()||"U"},`fallback-${h?.photoUrl}`),c.jsx("div",{className:"absolute bottom-0 right-0",children:c.jsx(Q3,{status:h?.presence||"online",size:"md"})})]}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsx("div",{className:"text-base font-semibold text-dark-text truncate",children:h?.displayName||"User"}),c.jsx("div",{className:"text-sm text-dark-muted truncate",children:h?.role||"member"})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:a,className:"p-2.5 hover:bg-dark-hover rounded-lg transition-colors",title:"Settings",children:c.jsx(lp,{className:"text-dark-muted hover:text-dark-text",size:24})}),c.jsx("button",{onClick:()=>$(!0),className:"p-2.5 hover:bg-dark-hover rounded-lg transition-colors",title:"Logout",children:c.jsx(RM,{className:"text-dark-muted hover:text-admin",size:24})})]})]}),c.jsx(A1,{user:h,isOpen:j,onClose:()=>N(!1)}),c.jsx(gc,{isOpen:U,onClose:()=>$(!1),onConfirm:B,title:"Logout",message:"Are you sure you want to logout?",confirmText:"Logout",variant:"danger"}),c.jsx(oO,{isOpen:I,onClose:()=>O(!1),serverId:m})]})},wO=(t,e)=>{if(e===0)return"0 KB/s";const n=t/e;return n>1024*1024?`${(n/(1024*1024)).toFixed(1)} MB/s`:`${(n/1024).toFixed(0)} KB/s`},md=(t,e)=>new Promise((n,r)=>{const a="5c1c5b7cae2edd508a2f35f98c4eec96",l=new FormData;l.append("image",t);const u=new XMLHttpRequest;u.open("POST",`https://api.imgbb.com/1/upload?key=${a}`);const h=Date.now();u.upload.onprogress=m=>{if(m.lengthComputable){const p=m.loaded/m.total*100,y=(Date.now()-h)/1e3,b=wO(m.loaded,y);e&&e(p,b)}},u.onload=()=>{if(u.status===200)try{const m=JSON.parse(u.responseText);m.success?n(m.data.url):r(new Error(m.error?.message||"Failed to upload image"))}catch{r(new Error("Invalid response from ImgBB"))}else r(new Error(`Upload failed with status ${u.status}`))},u.onerror=()=>r(new Error("Network error during upload")),u.send(l)}),SO=({server:t,onClose:e,onDelete:n,position:r,userRole:a,userId:l})=>{const[u,h]=T.useState(!1),[m,p]=T.useState(t.name),[y,b]=T.useState(!1),[x,k]=T.useState(!1),[R,j]=T.useState(t.icon||null),[N,U]=T.useState(null),[$,I]=T.useState({progress:0,speed:""}),[O,B]=T.useState(!1),[q,w]=T.useState(!1),E=T.useRef(null),{success:A,error:P}=Kr(),L=async()=>{if(!m.trim()){P("Server name is required");return}b(!0);try{await rt(Ae(he,"servers",t.id),{name:m.trim()}),A("Server updated!"),h(!1),e()}catch(Y){console.error("Error updating server:",Y),P("Failed to update server")}finally{b(!1)}},z=async()=>{try{const Y=wt(he,"servers",t.id,"members"),ee=await Ga(Y),Z=[];ee.forEach(Ee=>{const Re=Ee.data().userId;Z.push(rt(Ae(he,"users",Re),{servers:cd(t.id),...Ee.data().currentServer===t.id?{currentServer:null}:{}}))}),await Promise.all(Z),await Yr(Ae(he,"servers",t.id)),A("Server deleted"),B(!1),n(),e()}catch(Y){console.error("Error deleting server:",Y),P("Failed to delete server"),B(!1)}},M=async()=>{try{await rt(Ae(he,"users",l),{servers:cd(t.id),currentServer:null}),await Yr(Ae(he,"servers",t.id,"members",l)),await rt(Ae(he,"servers",t.id),{memberCount:Ai(-1)}),A("Left server"),w(!1),e()}catch(Y){console.error("Error leaving server:",Y),w(!1),e()}},se=Y=>{const ee=Y.target.files?.[0];if(ee){if(!ee.type.startsWith("image/")){P("Please select an image file");return}if(ee.size>10*1024*1024){P("Image size must be less than 10MB");return}U(ee),j(URL.createObjectURL(ee))}},le=async()=>{if(!N){P("Please select an image first");return}b(!0);try{const Y=await md(N,(ee,Z)=>{I({progress:ee,speed:Z})});await rt(Ae(he,"servers",t.id),{icon:Y}),A("Server icon updated!"),k(!1),e()}catch(Y){console.error("Error updating icon:",Y),P("Failed to update icon")}finally{b(!1),I({progress:0,speed:""})}};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40",onClick:e}),c.jsx("div",{className:"fixed bg-dark-sidebar border border-dark-hover rounded-lg shadow-xl py-2 z-50 w-64",style:{top:r.y,left:r.x},children:u?c.jsxs("div",{className:"px-3 py-2 space-y-2",children:[c.jsx(Sn,{value:m,onChange:Y=>p(Y.target.value),placeholder:"Server name",autoFocus:!0}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(at,{variant:"secondary",onClick:()=>h(!1),className:"flex-1 text-xs py-1",children:"Cancel"}),c.jsx(at,{variant:"primary",onClick:L,disabled:y,className:"flex-1 text-xs py-1",children:y?"Saving...":"Save"})]})]}):x?c.jsxs("div",{className:"px-3 py-2 space-y-3",children:[c.jsx("input",{type:"file",ref:E,onChange:se,accept:"image/*",className:"hidden"}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("button",{onClick:()=>E.current?.click(),className:"w-16 h-16 rounded-full bg-dark-hover border-2 border-dashed border-dark-muted hover:border-brand-primary flex items-center justify-center transition-colors overflow-hidden",children:R?c.jsx("img",{src:R,alt:"Preview",className:"w-full h-full object-cover"}):c.jsx(zv,{size:24,className:"text-dark-muted"})}),c.jsx("span",{className:"text-xs text-dark-muted mt-2",children:"Click to select image"})]}),y&&$.progress>0&&c.jsxs("div",{className:"text-xs text-center text-dark-muted",children:[Math.round($.progress),"% (",$.speed,")"]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(at,{variant:"secondary",onClick:()=>{k(!1),U(null),j(t.icon||null)},className:"flex-1 text-xs py-1",children:"Cancel"}),c.jsx(at,{variant:"primary",onClick:le,disabled:y||!N,className:"flex-1 text-xs py-1",children:y?"Uploading...":"Save"})]})]}):c.jsx(c.Fragment,{children:a==="admin"?c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>h(!0),className:"w-full px-4 py-2 text-left text-sm text-dark-text hover:bg-dark-hover transition-colors flex items-center gap-2",children:[c.jsx(nc,{size:16}),"Edit Server Name"]}),c.jsxs("button",{onClick:()=>k(!0),className:"w-full px-4 py-2 text-left text-sm text-dark-text hover:bg-dark-hover transition-colors flex items-center gap-2",children:[c.jsx(zv,{size:16}),"Change Icon"]}),c.jsxs("button",{onClick:()=>B(!0),className:"w-full px-4 py-2 text-left text-sm text-admin hover:bg-dark-hover transition-colors flex items-center gap-2",children:[c.jsx(Pi,{size:16}),"Delete Server"]})]}):c.jsxs("button",{onClick:()=>w(!0),className:"w-full px-4 py-2 text-left text-sm text-orange-500 hover:bg-dark-hover transition-colors flex items-center gap-2",children:[c.jsx(kM,{size:16}),"Leave Server"]})})}),c.jsx(gc,{isOpen:O,onClose:()=>B(!1),onConfirm:z,title:"Delete Server",message:`Are you sure you want to delete "${t.name}"? This action cannot be undone!`,confirmText:"Delete",confirmVariant:"danger"}),c.jsx(gc,{isOpen:q,onClose:()=>w(!1),onConfirm:M,title:"Leave Server",message:`Are you sure you want to leave "${t.name}"?`,confirmText:"Leave",confirmVariant:"warning"})]})},EO=""+new URL("lumo-logo-DYOsjf-q.png",import.meta.url).href,Yw=({servers:t,currentServerId:e,onServerChange:n,onCreateServer:r,onJoinServer:a,userRole:l,userId:u,unreadMentions:h={},unreadDms:m={}})=>{const[p,y]=T.useState(!1),[b,x]=T.useState(null),k=Object.values(m).reduce((j,N)=>j+(N.count||0),0),R=(j,N)=>{j.preventDefault(),x({server:N,position:{x:j.clientX,y:j.clientY}})};return c.jsxs("div",{className:"w-20 bg-dark-bg h-full flex flex-col items-center pt-safe-top md:pt-0 box-content",children:[c.jsx("div",{className:"flex flex-col items-center",children:c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>n("home"),className:Vt("transition-all duration-200 rounded-2xl overflow-hidden",e==="home"||!e?"rounded-xl ring-2 ring-brand-primary ring-offset-2 ring-offset-dark-bg":"hover:rounded-xl"),children:c.jsx("img",{src:EO,alt:"Home",className:"w-16 h-16 object-contain cursor-pointer bg-dark-bg p-1"})}),k>0&&c.jsx("div",{className:"absolute top-0 right-0 min-w-5 h-5 bg-red-500 rounded-full flex items-center justify-center border-2 border-dark-bg pointer-events-none",children:c.jsx("span",{className:"text-white text-xs font-bold px-1",children:k>99?"99+":k})})]})}),c.jsx("div",{className:"w-8 h-0.5 bg-dark-hover my-2"}),c.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1 overflow-y-auto",children:[t.map(j=>c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>n(j.id),onContextMenu:N=>R(N,j),className:Vt("w-12 h-12 rounded-2xl flex items-center justify-center transition-all duration-200","hover:rounded-xl",e===j.id?"bg-brand-primary text-white rounded-xl":"bg-dark-sidebar text-dark-text hover:bg-brand-primary hover:text-white"),title:j.name,children:j.icon?c.jsx("img",{src:j.icon,alt:j.name,className:"w-full h-full rounded-2xl object-cover"}):c.jsx("span",{className:"text-xl font-bold",children:j.name.charAt(0).toUpperCase()})}),h[j.id]?.count>0&&c.jsx("div",{className:"absolute -top-1 -right-1 min-w-5 h-5 bg-red-500 rounded-full flex items-center justify-center border-2 border-dark-bg pointer-events-none",children:c.jsx("span",{className:"text-white text-xs font-bold px-1",children:h[j.id].count>99?"99+":h[j.id].count})})]},j.id)),c.jsx("div",{className:"w-8 h-0.5 bg-dark-hover my-1"}),c.jsxs("div",{className:"relative pb-2",children:[c.jsx("button",{id:"add-server-btn",onClick:j=>{const N=j.currentTarget.getBoundingClientRect();document.documentElement.style.setProperty("--btn-top",`${N.top}px`),y(!p)},className:"w-12 h-12 rounded-2xl bg-dark-sidebar text-green-500 flex items-center justify-center hover:bg-green-500 hover:text-white hover:rounded-xl transition-all duration-200",title:"Add Server",children:c.jsx(Io,{size:28})}),p&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-50",onClick:()=>y(!1)}),c.jsxs("div",{className:"fixed left-[80px] bg-dark-sidebar border border-dark-hover rounded-lg shadow-lg py-2 z-50 w-48",style:{top:"var(--btn-top)"},children:[l==="admin"&&c.jsx("button",{onClick:()=>{r(),y(!1)},className:"w-full px-4 py-2 text-left text-sm text-dark-text hover:bg-dark-hover transition-colors",children:"Create Server"}),c.jsx("button",{onClick:()=>{a(),y(!1)},className:"w-full px-4 py-2 text-left text-sm text-dark-text hover:bg-dark-hover transition-colors",children:"Join Server"})]})]})]})]}),b&&c.jsx(SO,{server:b.server,position:b.position,userRole:l,userId:u,onClose:()=>x(null),onDelete:()=>{x(null)}})]})},Kw=({users:t,currentUserId:e,onStartDm:n})=>{const{currentServer:r}=Wa(),[a,l]=T.useState(null),[u,h]=T.useState([]);T.useEffect(()=>{if(!r||r==="home"){h([]);return}const N=qr(wt(he,"servers",r,"roles"));return gr(N,$=>{const I=[];$.forEach(O=>{I.push({id:O.id,...O.data()})}),h(I)})},[r]);const m=N=>N.presence==="invisible"?!1:K3(N.lastSeen),p=t.filter(N=>m(N)),y=t.filter(N=>!m(N)),b=p.reduce((N,U)=>{const $=U.serverRole||U.role||"member";return N[$]||(N[$]=[]),N[$].push(U),N},{}),R=[...[{name:"admin",position:-3},{name:"moderator",position:-2},{name:"member",position:-1}],...u.map(N=>({name:N.name,position:N.position??999}))].sort((N,U)=>N.position-U.position).map(N=>N.name).filter(N=>b[N]?.length>0),j=N=>{const U=m(N);return c.jsxs("div",{onClick:()=>l(N),className:Vt("flex items-center gap-2 px-2 py-1.5 rounded cursor-pointer","hover:bg-dark-hover transition-colors",N.id===e&&"bg-dark-hover/50",!U&&"opacity-50"),children:[c.jsxs("div",{className:"relative flex-shrink-0",children:[N.photoUrl?c.jsx("img",{src:N.photoUrl,alt:N.displayName,className:"w-8 h-8 rounded-full object-cover",onError:$=>{$.target.style.display="none",$.target.nextSibling.style.display="flex"}}):null,c.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold text-sm",style:{display:N.photoUrl?"none":"flex"},children:N.displayName?.[0]?.toUpperCase()||"U"}),c.jsx("div",{className:"absolute bottom-0 right-0",children:c.jsx(Q3,{status:U?N.presence||"online":"offline",size:"sm"})})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-sm text-dark-text truncate",children:N.displayName||"Unknown"}),N.badges&&N.badges.length>0&&c.jsx("div",{className:"flex items-center gap-0.5",children:N.badges.slice(0,3).map($=>{const I=kP($);if(!I)return null;const O=I.icon;return c.jsx(O,{size:14,style:{color:I.color},title:I.label,className:"flex-shrink-0"},$)})})]}),N.status&&c.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[c.jsx("span",{className:"text-xs",children:N.status.emoji}),c.jsx("span",{className:"text-xs text-dark-muted truncate",children:N.status.text})]})]})]},N.id)};return c.jsxs("div",{className:"w-60 bg-dark-sidebar h-full overflow-y-auto py-3",children:[c.jsxs("div",{className:"px-2",children:[R.map(N=>{const U=b[N]||[];return U.length===0?null:c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"text-xs font-semibold text-dark-muted uppercase px-2 mb-2",children:[N.charAt(0).toUpperCase()+N.slice(1),"s  ",U.length]}),U.map(j)]},N)}),y.length>0&&c.jsxs("div",{className:"mt-4",children:[c.jsxs("div",{className:"text-xs font-semibold text-gray-500 uppercase px-2 mb-2",children:["Offline  ",y.length]}),y.map(j)]})]}),c.jsx(A1,{user:a,isOpen:!!a,onClose:()=>l(null),onMessage:N=>{n&&n(N),l(null)}})]})},CO=({isOpen:t,onClose:e,onConfirm:n,url:r})=>{const[a,l]=T.useState(!1),u=()=>{a&&localStorage.setItem("dontAskExternalLinks","true"),n(),e()};return c.jsx(ws,{isOpen:t,onClose:e,title:"External Link Warning",size:"sm",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:c.jsxs("p",{className:"text-dark-text text-sm",children:[c.jsx("span",{className:"font-semibold text-yellow-500",children:" Security Warning"}),c.jsx("br",{}),c.jsx("br",{}),"You are about to open an external link. External links may lead to harmful or malicious websites. Please ensure you trust the source before proceeding."]})}),c.jsxs("div",{className:"bg-dark-bg p-3 rounded-lg",children:[c.jsx("p",{className:"text-xs text-dark-muted mb-1",children:"Link:"}),c.jsx("p",{className:"text-dark-text text-sm break-all font-mono",children:r})]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:a,onChange:h=>l(h.target.checked),className:`w-4 h-4 rounded border-dark-hover bg-dark-input text-brand-primary 
                       focus:ring-2 focus:ring-brand-primary cursor-pointer`}),c.jsx("span",{className:"text-sm text-dark-text",children:"Don't ask me again"})]}),c.jsxs("div",{className:"flex gap-3 justify-end pt-2",children:[c.jsx(at,{variant:"secondary",onClick:e,children:"Cancel"}),c.jsx(at,{variant:"primary",onClick:u,children:"Open Link"})]})]})})},TO=t=>{if(!t)return t;let e=t;return e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=e.replace(/```([^`]+)```/g,'<pre class="bg-dark-input text-dark-text p-2 rounded my-1 overflow-x-auto"><code>$1</code></pre>'),e=e.replace(/`([^`]+)`/g,'<code class="bg-dark-input text-dark-text px-1 py-0.5 rounded text-sm">$1</code>'),e=e.replace(/\*\*([^*]+)\*\*/g,'<strong class="font-bold">$1</strong>'),e=e.replace(/\*([^*]+)\*/g,'<em class="italic">$1</em>'),e=e.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer" class="text-brand-primary hover:underline">$1</a>'),e=e.replace(/@(everyone|[a-zA-Z0-9_]+)\b/g,'<span class="text-brand-primary font-medium cursor-pointer hover:underline" data-mention="$1">$1</span>'),e=e.replace(/\n/g,"<br>"),e},Z3=({children:t,onMentionClick:e})=>{const n=TO(t),r=a=>{const l=a.target.getAttribute("data-mention");l&&e&&e(l)};return c.jsx("div",{dangerouslySetInnerHTML:{__html:n},className:"markdown-content",onClick:r})},kO=["","","","","","","","","",""],Qw=({onSelect:t,onClose:e})=>c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40",onClick:e}),c.jsx("div",{className:"absolute left-0 bottom-full mb-2 bg-dark-sidebar border border-dark-hover rounded-lg shadow-lg p-2 z-50",children:c.jsx("div",{className:"flex gap-1",children:kO.map(n=>c.jsx("button",{onClick:()=>t(n),className:"w-8 h-8 flex items-center justify-center text-lg hover:bg-dark-hover rounded transition-colors",title:n,children:n},n))})})]}),NO=({message:t,currentUserId:e,serverId:n,channelId:r,users:a})=>{const[l,u]=T.useState(!1),h=t.poll;if(!h)return null;const m=t.userId===e,p=h.ended===!0,y=h.options.reduce((j,N,U)=>j+(h.votes?.[`option_${U}`]?.length||0),0),b=h.options.map((j,N)=>h.votes?.[`option_${N}`]?.includes(e)?N:-1).filter(j=>j!==-1);b.length>0;const x=async j=>{if(!(l||p)){u(!0);try{const N=`poll.votes.option_${j}`,U=Ae(he,"servers",n,"channels",r,"messages",t.id);if(h.votes?.[`option_${j}`]?.includes(e))await rt(U,{[N]:cd(e)});else{if(!h.multipleChoice&&b.length>0)for(const I of b)await rt(U,{[`poll.votes.option_${I}`]:cd(e)});await rt(U,{[N]:Pd(e)})}}catch(N){console.error("Error voting:",N)}finally{u(!1)}}},k=async()=>{if(!(!m||p))try{const j=Ae(he,"servers",n,"channels",r,"messages",t.id);await rt(j,{"poll.ended":!0})}catch(j){console.error("Error ending poll:",j)}},R=j=>h.anonymous?null:(h.votes?.[`option_${j}`]||[]).map(U=>a?.find($=>$.id===U)?.displayName||"Unknown").join(", ");return c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4 mt-2 border border-dark-hover max-w-md",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx(v1,{className:"text-brand-primary",size:20}),c.jsx("span",{className:"text-xs text-dark-muted uppercase tracking-wide font-semibold",children:"Poll"}),h.multipleChoice&&c.jsx("span",{className:"text-xs text-dark-muted bg-dark-hover px-2 py-0.5 rounded",children:"Multiple Choice"}),p&&c.jsx("span",{className:"text-xs text-red-400 bg-red-400/10 px-2 py-0.5 rounded",children:"Ended"})]}),c.jsx("h3",{className:"text-dark-text font-semibold mb-4",children:h.question}),c.jsx("div",{className:"space-y-2",children:h.options.map((j,N)=>{const U=h.votes?.[`option_${N}`]?.length||0,$=y>0?Math.round(U/y*100):0,I=b.includes(N),O=R(N);return c.jsxs("button",{onClick:()=>x(N),disabled:l||p,className:`w-full text-left p-3 rounded-lg relative overflow-hidden transition-all group ${I?"bg-brand-primary/20 border-2 border-brand-primary":"bg-dark-sidebar border border-dark-hover hover:border-dark-muted"} ${p?"cursor-not-allowed opacity-80":""}`,children:[y>0&&c.jsx("div",{className:`absolute inset-0 transition-all duration-500 ${I?"bg-brand-primary/30":"bg-dark-hover/50"}`,style:{width:`${$}%`}}),c.jsxs("div",{className:"relative flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[I&&c.jsx("div",{className:"w-5 h-5 bg-brand-primary rounded-full flex items-center justify-center",children:c.jsx(Bo,{className:"text-white",size:14})}),c.jsx("span",{className:`text-sm ${I?"text-dark-text font-medium":"text-dark-muted"}`,children:j})]}),y>0&&c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("span",{className:"text-xs text-dark-muted",children:[U," vote",U!==1?"s":""]}),c.jsxs("span",{className:"text-sm font-semibold text-dark-text",children:[$,"%"]})]})]}),O&&U>0&&c.jsx("div",{className:"text-xs text-dark-muted mt-1 truncate opacity-0 group-hover:opacity-100 transition-opacity",children:O})]},N)})}),c.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-dark-hover",children:[c.jsxs("div",{className:"flex items-center gap-1 text-xs text-dark-muted",children:[c.jsx(g1,{size:14}),c.jsxs("span",{children:[y," total vote",y!==1?"s":""]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[h.anonymous&&c.jsx("span",{className:"text-xs text-dark-muted",children:"Anonymous"}),m&&!p&&c.jsxs("button",{onClick:k,className:"flex items-center gap-1.5 text-xs font-medium text-red-400 bg-red-400/10 hover:bg-red-400/20 px-3 py-1.5 rounded transition-all border border-red-400/20 hover:border-red-400/30",children:[c.jsx(MM,{size:14}),"End Poll"]})]})]})]})},j1=({isOpen:t,onClose:e,mediaUrl:n,mediaType:r="image"})=>{if(!n)return null;const a=()=>{const u=document.createElement("a");u.href=n,u.download=n.split("/").pop()||"download",document.body.appendChild(u),u.click(),document.body.removeChild(u)},l=()=>{window.electron&&window.electron.shell?window.electron.shell.openExternal(n):window.open(n,"_blank","noopener,noreferrer")};return c.jsx(ws,{isOpen:t,onClose:e,title:"",size:"full",showCloseButton:!1,children:c.jsxs("div",{className:"fixed inset-0 bg-black/95 flex flex-col z-50",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 bg-black/50 backdrop-blur-sm",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:a,className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-white",title:"Download",children:c.jsx(LT,{size:24})}),c.jsx("button",{onClick:l,className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-white",title:"Open in new window",children:c.jsx(op,{size:24})})]}),c.jsx("button",{onClick:e,className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-white",title:"Close (Esc)",children:c.jsx($n,{size:24})})]}),c.jsx("div",{className:"flex-1 flex items-center justify-center p-4 overflow-auto",onClick:e,children:r==="image"?c.jsx("img",{src:n,alt:"Full size",className:"max-w-full max-h-full object-contain cursor-zoom-out",onClick:u=>u.stopPropagation()}):r==="video"?c.jsx("video",{src:n,controls:!0,autoPlay:!0,className:"max-w-full max-h-full",onClick:u=>u.stopPropagation()}):null})]})})},ek=/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:watch\?v=|embed\/|shorts\/)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,tk=/(?:https?:\/\/)?(?:open\.)?spotify\.com\/(track|album|playlist|artist|episode|show)\/([a-zA-Z0-9]+)/,nk=/(?:https?:\/\/)?(?:www\.)?(?:twitter\.com|x\.com)\/(\w+)\/status\/(\d+)/,AO=/\.(jpg|jpeg|png|gif|webp|bmp|svg)(\?.*)?$/i,RO=/\.(mp4|webm|ogg|mov)(\?.*)?$/i,jO=/\.(mp3|wav|ogg|m4a)(\?.*)?$/i,IO=t=>{const e=t.match(ek);return e?e[1]:null},DO=t=>{const e=t.match(tk);return e?{type:e[1],id:e[2]}:null},MO=t=>{const e=t.match(nk);return e?{user:e[1],id:e[2]}:null},rk=t=>ek.test(t)?"youtube":tk.test(t)?"spotify":nk.test(t)?"twitter":AO.test(t)?"image":RO.test(t)?"video":jO.test(t)?"audio":t.includes("/raw/upload/")||/\.(zip|rar|7z|exe|pdf|docx|xlsx|txt|iso|yml|json|xml|csv)$/i.test(t)?"file":"generic",sk=t=>{const e=/(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/g;return t.match(e)||[]},PO=({url:t})=>{const e=IO(t),[n,r]=T.useState(!1);if(!e)return null;const a=`https://img.youtube.com/vi/${e}/mqdefault.jpg`;return c.jsxs("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar",children:[c.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border-b border-dark-hover",children:[c.jsx(bP,{className:"text-red-500",size:18}),c.jsx("span",{className:"text-xs text-dark-muted font-medium",children:"YouTube"})]}),n?c.jsx("div",{className:"relative pt-[56.25%]",children:c.jsx("iframe",{className:"absolute inset-0 w-full h-full",src:`https://www.youtube.com/embed/${e}?autoplay=1&origin=${window.location.origin}`,title:"YouTube video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):c.jsxs("div",{className:"relative cursor-pointer group",onClick:()=>r(!0),children:[c.jsx("img",{src:a,alt:"YouTube thumbnail",className:"w-full h-auto",onError:l=>{l.target.src=`https://img.youtube.com/vi/${e}/default.jpg`}}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 group-hover:bg-black/50 transition-colors",children:c.jsx(MT,{className:"text-white/90 group-hover:text-white group-hover:scale-110 transition-all",size:64})})]}),c.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[c.jsx("span",{className:"text-xs text-dark-muted truncate",children:t}),c.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-dark-muted hover:text-brand-primary transition-colors",onClick:l=>l.stopPropagation(),children:c.jsx(op,{size:16})})]})]})},OO=({url:t})=>{const e=DO(t);if(!e)return null;const r={track:152,album:352,playlist:352,artist:352,episode:232,show:232}[e.type]||152;return c.jsxs("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar",children:[c.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border-b border-dark-hover",children:[c.jsx(yP,{className:"text-green-500",size:18}),c.jsxs("span",{className:"text-xs text-dark-muted font-medium",children:["Spotify ",e.type]})]}),c.jsx("iframe",{src:`https://open.spotify.com/embed/${e.type}/${e.id}?utm_source=generator&theme=0`,width:"100%",height:r,frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",className:"bg-transparent"}),c.jsxs("div",{className:"px-3 py-2 flex items-center justify-between border-t border-dark-hover",children:[c.jsx("span",{className:"text-xs text-dark-muted truncate",children:t}),c.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-dark-muted hover:text-green-500 transition-colors",children:c.jsx(op,{size:16})})]})]})},LO=({url:t})=>{const[e,n]=T.useState(!1);return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar",children:c.jsx("div",{className:"block cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>n(!0),children:c.jsx("img",{src:t,alt:"Attachment",className:"w-full h-auto max-h-[400px] object-contain bg-black/50",loading:"lazy",onError:r=>{r.target.style.display="none"}})})}),c.jsx(j1,{isOpen:e,onClose:()=>n(!1),mediaUrl:t,mediaType:"image"})]})},VO=({url:t})=>{const e=T.useRef(null),[n,r]=T.useState(!1),[a,l]=T.useState(!1);T.useEffect(()=>{if(window.twttr)u();else{const h=document.createElement("script");h.src="https://platform.twitter.com/widgets.js",h.async=!0,h.onload=()=>{window.twttr&&e.current&&u()},h.onerror=()=>l(!0),document.body.appendChild(h)}},[t]);const u=()=>{window.twttr&&e.current&&(e.current.innerHTML="",window.twttr.widgets.createTweet(MO(t)?.id,e.current,{theme:"dark",conversation:"none"}).then(h=>{r(!!h),h||l(!0)}).catch(()=>l(!0)))};return a?c.jsx("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar p-3",children:c.jsxs("div",{className:"flex items-center gap-2 text-dark-muted",children:[c.jsx(Nw,{className:"text-sky-400",size:18}),c.jsx("span",{className:"text-sm",children:"Tweet could not be loaded"}),c.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"ml-auto text-brand-primary hover:underline text-sm",children:"View on X"})]})}):c.jsxs("div",{className:"mt-2 max-w-md",children:[!n&&c.jsx("div",{className:"rounded-lg border border-dark-hover bg-dark-sidebar p-4 animate-pulse",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Nw,{className:"text-sky-400",size:18}),c.jsx("span",{className:"text-sm text-dark-muted",children:"Loading tweet..."})]})}),c.jsx("div",{ref:e,className:n?"":"hidden"})]})},zO=({url:t})=>{const[e,n]=T.useState(!1);return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar",children:c.jsxs("div",{className:"cursor-pointer",onClick:()=>n(!0),children:[c.jsx("video",{src:t,className:"w-full max-h-[400px] bg-black pointer-events-none"}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 hover:bg-black/50 transition-colors",children:c.jsx(MT,{className:"text-white/90 hover:text-white",size:64})})]})}),c.jsx(j1,{isOpen:e,onClose:()=>n(!1),mediaUrl:t,mediaType:"video"})]})},UO=({url:t})=>c.jsxs("div",{className:"mt-2 max-w-md rounded-lg border border-dark-hover bg-dark-sidebar p-3 flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-primary/20 flex items-center justify-center flex-shrink-0",children:c.jsx(KM,{className:"text-brand-primary",size:24})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-xs text-dark-muted mb-1 truncate",children:t.split("/").pop()}),c.jsx("audio",{src:t,controls:!0,className:"w-full h-8"})]})]}),BO=({url:t})=>{const e=t.split("/").pop().split("?")[0]||"file",n=e.split(".").pop();return c.jsxs("div",{className:"mt-2 max-w-md rounded-lg border border-dark-hover bg-dark-sidebar p-3 flex items-center gap-3 hover:bg-dark-hover transition-colors",children:[c.jsx("div",{className:"w-12 h-12 rounded bg-dark-input flex items-center justify-center flex-shrink-0",children:c.jsx("span",{className:"text-xs font-bold text-dark-text uppercase",children:n.length<5?n:"FILE"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium text-dark-text truncate",children:e}),c.jsx("div",{className:"text-xs text-dark-muted",children:"Attachment"})]}),c.jsx("a",{href:t,download:!0,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-full hover:bg-white/10 text-dark-muted hover:text-white transition-colors",title:"Download",children:c.jsx(LT,{size:20})})]})},FO=({url:t})=>{let e="";try{e=new URL(t).hostname.replace("www.","")}catch{e=t}return c.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"mt-2 flex items-center gap-3 max-w-md rounded-lg border border-dark-hover bg-dark-sidebar p-3 hover:bg-dark-hover transition-colors group",children:[c.jsx("div",{className:"w-10 h-10 rounded-lg bg-brand-primary/20 flex items-center justify-center",children:c.jsx(op,{className:"text-brand-primary",size:20})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium text-dark-text truncate group-hover:text-brand-primary transition-colors",children:e}),c.jsx("div",{className:"text-xs text-dark-muted truncate",children:t})]})]})},$O=({url:t})=>{switch(rk(t)){case"youtube":return c.jsx(PO,{url:t});case"spotify":return c.jsx(OO,{url:t});case"twitter":return c.jsx(VO,{url:t});case"image":return c.jsx(LO,{url:t});case"video":return c.jsx(zO,{url:t});case"audio":return c.jsx(UO,{url:t});case"file":return c.jsx(BO,{url:t});default:return c.jsx(FO,{url:t})}},HO=({text:t})=>{const n=sk(t).slice(0,3);return n.length===0?null:c.jsx("div",{className:"space-y-2",children:n.map((r,a)=>c.jsx($O,{url:r},`${r}-${a}`))})},ik=({serverId:t,channelId:e,users:n,currentUserId:r,userRole:a,onReply:l,onMessagesChange:u})=>{const[h,m]=T.useState([]),[p,y]=T.useState(null),[b,x]=T.useState(null),[k,R]=T.useState(null),[j,N]=T.useState(null),[U,$]=T.useState(""),[I,O]=T.useState(null),[B,q]=T.useState("bottom"),[w,E]=T.useState(null),[A,P]=T.useState(!0),[L,z]=T.useState(!1),[M,se]=T.useState(null),[le,Y]=T.useState(null),ee=T.useRef(null),Z=T.useRef(null),Ee=T.useRef(0),Re=T.useRef(!0),H=T.useRef(n);T.useEffect(()=>{H.current=n},[n]);const{success:W,error:ie}=Kr(),ve=()=>{ee.current?.scrollIntoView({behavior:"smooth"})};T.useEffect(()=>{if(!e||!e)return;const Ue=qr(t?wt(he,"servers",t,"channels",e,"messages"):wt(he,"dms",e,"messages"),vm("timestamp","desc"),Mv(20)),Me=gr(Ue,F=>{const Q=[];if(F.forEach(J=>{Q.push({id:J.id,...J.data()})}),Q.reverse(),!Re.current&&Q.length>Ee.current&&r){const J=H.current?.find(Ce=>Ce.id===r);if(J?.displayName){const Ce=Q.slice(Ee.current),$e=Ce.some(ct=>ct.userId!==r&&gM(ct.text,J.displayName)),Qe=Ce.some(ct=>{const $t=ct.userId!==r&&ct.replyTo?.userId===r;return $t&&console.log("Reply notification:",ct),$t});($e||Qe)&&(console.log("Playing notification sound",{hasMention:$e,hasReply:Qe}),Pv())}}Ee.current=Q.length,m(Q),Re.current&&(Re.current=!1),Q.length>0&&se(Q[0]),P(Q.length===20),u&&u(Q),setTimeout(ve,100)});return()=>{Me(),Re.current=!0}},[e,t,r,u]);const Te=async()=>{if(!e||!M||L||!A)return;z(!0);const _e=Z.current,Ue=_e?.scrollHeight||0;try{const Me=qr(t?wt(he,"servers",t,"channels",e,"messages"):wt(he,"dms",e,"messages"),vm("timestamp","desc"),DD(M.timestamp),Mv(20)),F=await Ga(Me),Q=[];F.forEach(J=>{Q.push({id:J.id,...J.data()})}),Q.length>0?(Q.reverse(),m(J=>[...Q,...J]),se(Q[0]),P(Q.length===20),setTimeout(()=>{_e&&(_e.scrollTop=_e.scrollHeight-Ue)},0)):P(!1)}catch(Me){console.error("Error loading more messages:",Me),ie("Failed to load more messages")}finally{z(!1)}},De=_e=>n.find(Ue=>Ue.id===_e)||{displayName:"Unknown",role:"member"},ae=_e=>r===_e||a==="admin",Le=_e=>{if(_e.userId!==r)return!1;if(!_e.timestamp)return!0;const Ue=_e.timestamp.toDate();return(new Date-Ue)/1e3/60<15},Ie=async()=>{if(p)try{const _e=n.find(Me=>Me.id===p.userId),Ue=t?Ae(he,"servers",t,"channels",e,"messages",p.id):Ae(he,"dms",e,"messages",p.id);await Yr(Ue),await Bn(wt(he,"adminLogs"),{type:"message_delete",channelId:e,messageId:p.id,userId:r,deletedText:p.text||"(empty)",originalUserId:p.userId,originalUserName:_e?.displayName||"Unknown User",timestamp:bt()}),W("Message deleted successfully")}catch(_e){console.error("Error deleting message:",_e),ie("Failed to delete message")}finally{y(null)}},de=_e=>{N(_e.id),$(_e.text)},pe=()=>{N(null),$("")},ge=async()=>{if(!j)return;if(!U.trim()){ie("Message cannot be empty");return}const _e=j,Ue=U.trim(),F=h.find(Q=>Q.id===_e)?.text||"";N(null),$("");try{const Q=t?Ae(he,"servers",t,"channels",e,"messages",_e):Ae(he,"dms",e,"messages",_e);await rt(Q,{text:Ue,edited:!0,editedAt:bt()}),await Bn(wt(he,"adminLogs"),{type:"message_edit",channelId:e,messageId:_e,userId:r,originalText:F,newText:Ue,timestamp:bt()}),W("Message updated successfully")}catch(Q){console.error("Error editing message:",Q),Q.code==="resource-exhausted"?ie("Quota exceeded. Please try again tomorrow."):ie("Failed to edit message")}},Se=async(_e,Ue)=>{try{const Me=h.find(Ce=>Ce.id===_e);if(!Me)return;const F={...Me.reactions},Q=F[Ue]||[];if(Q.includes(r)){const Ce=Q.filter($e=>$e!==r);Ce.length===0?delete F[Ue]:F[Ue]=Ce}else F[Ue]=[...Q,r];const J=t?Ae(he,"servers",t,"channels",e,"messages",_e):Ae(he,"dms",e,"messages",_e);await rt(J,{reactions:F})}catch(Me){console.error("Error toggling reaction:",Me),ie("Failed to update reaction")}},it=async _e=>{if(a!=="admin"&&a!=="moderator"){ie("Only admins and moderators can pin messages");return}try{const Ue=!_e.pinned,Me=t?Ae(he,"servers",t,"channels",e,"messages",_e.id):Ae(he,"dms",e,"messages",_e.id);await rt(Me,{pinned:Ue,pinnedBy:Ue?r:null,pinnedAt:Ue?bt():null}),await Bn(wt(he,"adminLogs"),{type:Ue?"message_pin":"message_unpin",channelId:e,messageId:_e.id,userId:r,messageText:_e.text,timestamp:bt()}),W(Ue?"Message pinned":"Message unpinned")}catch(Ue){console.error("Error toggling pin:",Ue),ie("Failed to pin message")}};return c.jsxs("div",{ref:Z,className:"flex-1 overflow-y-auto px-4 py-4 space-y-4",children:[A&&h.length>0&&c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx("button",{onClick:Te,disabled:L,className:"px-4 py-2 bg-brand-primary hover:bg-brand-primary/80 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:L?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Loading..."]}):"Load More Messages"})}),h.length===0?c.jsx("div",{className:"text-center text-dark-muted py-8",children:"No messages yet. Start the conversation!"}):h.map(_e=>{const Ue=De(_e.userId);return c.jsxs("div",{id:`message-${_e.id}`,className:"flex gap-3 hover:bg-dark-hover/30 px-2 py-1 rounded group transition-colors",children:[c.jsxs("div",{className:"relative flex-shrink-0",children:[Ue.photoUrl?c.jsx("img",{src:Ue.photoUrl,alt:Ue.displayName,onClick:()=>R(Ue),className:"w-10 h-10 rounded-full object-cover cursor-pointer hover:opacity-80 transition-opacity",onError:Me=>{Me.target.style.display="none",Me.target.nextSibling.style.display="flex"}}):null,c.jsx("div",{onClick:()=>R(Ue),className:"w-10 h-10 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold cursor-pointer hover:opacity-80 transition-opacity",style:{display:Ue.photoUrl?"none":"flex"},children:Ue.displayName?.[0]?.toUpperCase()||"U"})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("span",{className:"font-semibold text-dark-text hover:underline cursor-pointer",onClick:()=>R(Ue),children:Ue.displayName||"Unknown"}),c.jsx("span",{className:Vt("text-xs px-1.5 py-0.5 rounded border",tP(Ue.role)),children:Ue.role?.charAt(0).toUpperCase()+Ue.role?.slice(1)}),c.jsx("span",{className:"text-xs text-dark-muted",children:cp(_e.timestamp)}),_e.edited&&c.jsx("span",{className:"text-xs text-dark-muted italic",children:"(edited)"}),j!==_e.id&&c.jsxs("div",{className:"ml-auto relative z-50",children:[c.jsx("button",{onClick:Me=>{const F=Me.clientY,Q=window.innerHeight,J=F<Q/2;q(J?"bottom":"top"),O(I===_e.id?null:_e.id)},className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-dark-hover rounded transition-all",title:"More options",children:c.jsx(e7,{size:18,className:"text-dark-muted"})}),I===_e.id&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>O(null)}),c.jsxs("div",{className:`absolute right-0 ${B==="top"?"bottom-full mb-1":"top-full mt-1"} bg-dark-sidebar border border-dark-hover rounded-lg shadow-lg py-1 z-50 min-w-[120px]`,children:[c.jsxs("button",{onClick:()=>{l&&l(_e),O(null)},className:"w-full px-3 py-2 text-left text-sm text-dark-text hover:bg-dark-hover flex items-center gap-2",children:[c.jsx(UM,{size:16,className:"text-green-400"}),"Reply"]}),Le(_e)&&c.jsxs("button",{onClick:()=>{de(_e),O(null)},className:"w-full px-3 py-2 text-left text-sm text-dark-text hover:bg-dark-hover flex items-center gap-2",children:[c.jsx(nc,{size:16,className:"text-blue-400"}),"Edit"]}),(a==="admin"||a==="moderator")&&c.jsxs("button",{onClick:()=>{it(_e),O(null)},className:"w-full px-3 py-2 text-left text-sm text-dark-text hover:bg-dark-hover flex items-center gap-2",children:[c.jsx(tc,{size:16,className:"text-blue-400"}),_e.pinned?"Unpin":"Pin"]}),ae(_e.userId)&&c.jsxs("button",{onClick:()=>{y({id:_e.id,text:_e.text,userId:_e.userId}),O(null)},className:"w-full px-3 py-2 text-left text-sm text-admin hover:bg-dark-hover flex items-center gap-2",children:[c.jsx(Pi,{size:16}),"Delete"]})]})]})]})]}),j===_e.id?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"text",value:U,onChange:Me=>$(Me.target.value),onKeyDown:Me=>{Me.key==="Enter"&&ge(),Me.key==="Escape"&&pe()},className:`flex-1 bg-dark-input text-dark-text px-3 py-1.5 rounded
                                 border border-brand-primary outline-none`,autoFocus:!0}),c.jsx("button",{onClick:ge,className:"text-green-500 hover:text-green-400 transition-colors",title:"Save (Enter)",children:c.jsx(Bo,{size:20})}),c.jsx("button",{onClick:pe,className:"text-admin hover:text-admin/80 transition-colors",title:"Cancel (Esc)",children:c.jsx($n,{size:20})})]}):c.jsxs(c.Fragment,{children:[_e.replyTo&&c.jsxs("div",{className:"mb-2 ml-2 pl-3 border-l-2 border-green-400 text-sm bg-dark-sidebar/30 rounded py-1",children:[c.jsxs("div",{className:"text-xs text-green-400 font-semibold",children:["Replying to ",De(_e.replyTo.userId).displayName]}),c.jsx("div",{className:"text-dark-muted italic truncate",children:_e.replyTo.text})]}),_e.pinned&&c.jsxs("div",{className:"flex items-center gap-1 text-xs text-blue-400 mb-1",children:[c.jsx(tc,{size:14}),c.jsx("span",{children:"Pinned"})]}),_e.type!=="sticker"&&(()=>{const Me=sk(_e.text);let F=_e.text;return Me.filter(J=>{const Ce=rk(J);return["youtube","spotify","twitter","image","video","audio","file"].includes(Ce)}).forEach(J=>{F=F.replace(J,"")}),F=F.trim(),F.length>0&&c.jsx("div",{className:"text-dark-text whitespace-pre-wrap break-words select-text",children:c.jsx(Z3,{onMentionClick:J=>{const Ce=n.find($e=>$e.displayName?.toLowerCase()===J.toLowerCase());Ce&&R(Ce)},children:F})})})(),_e.type==="sticker"&&c.jsx("div",{className:"mt-1 mb-1",children:c.jsx("img",{src:_e.text,alt:"Sticker",className:"w-40 h-40 object-contain drop-shadow-md hover:scale-110 transition-transform origin-bottom-left select-none cursor-pointer",onClick:()=>Y({url:_e.text,type:"image"})})}),_e.type!=="sticker"&&c.jsx(HO,{text:_e.text}),_e.type==="poll"&&c.jsx(NO,{message:_e,currentUserId:r,serverId:t,channelId:e,users:n}),_e.reactions&&Object.keys(_e.reactions).length>0&&c.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[Object.entries(_e.reactions).map(([Me,F])=>c.jsxs("button",{onClick:()=>Se(_e.id,Me),className:Vt("px-2 py-1 rounded-full text-sm flex items-center gap-1 transition-colors",F.includes(r)?"bg-brand-primary/20 border border-brand-primary text-brand-primary":"bg-dark-hover border border-dark-hover text-dark-text hover:border-dark-muted"),title:`${F.map(Q=>De(Q).displayName).join(", ")}`,children:[c.jsx("span",{children:Me}),c.jsx("span",{className:"text-xs",children:F.length})]},Me)),c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>E(w===_e.id?null:_e.id),className:"px-2 py-1 rounded-full text-sm bg-dark-hover border border-dark-hover hover:border-dark-muted transition-colors",title:"Add reaction",children:c.jsx(yw,{size:16,className:"text-dark-muted"})}),w===_e.id&&c.jsx(Qw,{onSelect:Me=>{Se(_e.id,Me),E(null)},onClose:()=>E(null)})]})]}),(!_e.reactions||Object.keys(_e.reactions).length===0)&&c.jsxs("div",{className:"relative mt-2",children:[c.jsxs("button",{onClick:()=>E(w===_e.id?null:_e.id),className:"opacity-0 group-hover:opacity-100 px-2 py-1 rounded text-xs bg-dark-hover hover:bg-dark-input transition-all flex items-center gap-1",title:"Add reaction",children:[c.jsx(yw,{size:14}),c.jsx("span",{className:"text-dark-muted",children:"Add reaction"})]}),w===_e.id&&c.jsx(Qw,{onSelect:Me=>{Se(_e.id,Me),E(null)},onClose:()=>E(null)})]})]})]})]},_e.id)}),c.jsx("div",{ref:ee}),c.jsx(gc,{isOpen:!!p,onClose:()=>y(null),onConfirm:Ie,title:"Delete Message",message:"Are you sure you want to delete this message? This action cannot be undone.",confirmText:"Delete",variant:"danger"}),c.jsx(CO,{isOpen:!!b,onClose:()=>x(null),onConfirm:()=>window.open(b?.url,"_blank","noopener,noreferrer"),url:b?.url}),c.jsx(A1,{user:k,isOpen:!!k,onClose:()=>R(null)}),c.jsx(j1,{isOpen:!!le,onClose:()=>Y(null),mediaUrl:le?.url,mediaType:le?.type})]})},Xw={smileys:{name:"Smileys & People",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},animals:{name:"Animals & Nature",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},food:{name:"Food & Drink",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},activities:{name:"Activities",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},travel:{name:"Travel & Places",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},objects:{name:"Objects",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},symbols:{name:"Symbols",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","0","1","2","3","4","5","6","7","8","9","","","#","*","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},flags:{name:"Flags",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]}},qO=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],GO=({onSelect:t,onClose:e})=>{const[n,r]=T.useState("smileys");return c.jsxs("div",{className:"absolute bottom-full right-0 mb-2 bg-dark-sidebar border border-dark-hover rounded-lg shadow-xl w-80 z-50",children:[c.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-dark-hover",children:[c.jsx("span",{className:"text-sm font-semibold text-dark-text",children:"Emoji Picker"}),c.jsx("button",{onClick:e,className:"text-dark-muted hover:text-dark-text transition-colors",children:c.jsx($n,{size:18})})]}),c.jsxs("div",{className:"p-3 border-b border-dark-hover",children:[c.jsx("div",{className:"text-xs text-dark-muted mb-2 font-semibold",children:"POPULAR"}),c.jsx("div",{className:"grid grid-cols-10 gap-1",children:qO.map((a,l)=>c.jsx("button",{onClick:()=>t(a),className:"text-2xl hover:bg-dark-hover rounded p-1 transition-colors",title:a,children:a},l))})]}),c.jsx("div",{className:"flex gap-1 p-2 border-b border-dark-hover overflow-x-auto",children:Object.entries(Xw).map(([a,l])=>c.jsx("button",{onClick:()=>r(a),className:`text-xl p-2 rounded transition-colors ${n===a?"bg-brand-primary/20 text-brand-primary":"hover:bg-dark-hover text-dark-muted"}`,title:l.name,children:l.icon},a))}),c.jsx("div",{className:"p-3 h-64 overflow-y-auto",children:c.jsx("div",{className:"grid grid-cols-8 gap-1",children:Xw[n].emojis.map((a,l)=>c.jsx("button",{onClick:()=>t(a),className:"text-2xl hover:bg-dark-hover rounded p-1 transition-colors",title:a,children:a},l))})})]})};let yf;const YO=new Uint8Array(16);function KO(){if(!yf&&(yf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!yf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return yf(YO)}const tr=[];for(let t=0;t<256;++t)tr.push((t+256).toString(16).slice(1));function QO(t,e=0){return tr[t[e+0]]+tr[t[e+1]]+tr[t[e+2]]+tr[t[e+3]]+"-"+tr[t[e+4]]+tr[t[e+5]]+"-"+tr[t[e+6]]+tr[t[e+7]]+"-"+tr[t[e+8]]+tr[t[e+9]]+"-"+tr[t[e+10]]+tr[t[e+11]]+tr[t[e+12]]+tr[t[e+13]]+tr[t[e+14]]+tr[t[e+15]]}const XO=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ww={randomUUID:XO};function WO(t,e,n){if(Ww.randomUUID&&!t)return Ww.randomUUID();t=t||{};const r=t.random||(t.rng||KO)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,QO(r)}var JO=Object.defineProperty,ZO=Object.defineProperties,eL=Object.getOwnPropertyDescriptors,Jw=Object.getOwnPropertySymbols,tL=Object.prototype.hasOwnProperty,nL=Object.prototype.propertyIsEnumerable,Zw=(t,e,n)=>e in t?JO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,I1=(t,e)=>{for(var n in e||(e={}))tL.call(e,n)&&Zw(t,n,e[n]);if(Jw)for(var n of Jw(e))nL.call(e,n)&&Zw(t,n,e[n]);return t},rL=(t,e)=>ZO(t,eL(e)),nr={ENABLED:typeof window<"u"&&typeof location<"u"&&location.search.indexOf("giphy-debug")!==-1,LEVEL:0,PREFIX:"GiphyJS",debug:(...t)=>{nr.ENABLED&&nr.LEVEL<=0&&console.debug(nr.PREFIX,...t)},info:(...t)=>{nr.ENABLED&&nr.LEVEL<=1&&console.info(nr.PREFIX,...t)},warn:(...t)=>{nr.ENABLED&&nr.LEVEL<=2&&console.warn(nr.PREFIX,...t)},error:(...t)=>{nr.ENABLED&&nr.LEVEL<=3&&console.error(nr.PREFIX,...t)}},sL=(t,e,n)=>{let r=1/0,a;return n.forEach(l=>{const u=l.width/t,h=l.height/e,m=u*h,p=Math.abs(1-m);p<r&&(r=p,a=l)}),a},iL=50;function aL(t,e,n,r=iL){let[a]=t;const l=t.filter(u=>(u.width*u.height>a.width*a.height&&(a=u),e-u.width<=r&&n-u.height<=r));return l.length===0?a:sL(e,n,l)}var ak=aL;function oL(t,e=0){return t.slice(0,e)}function lL(t,e){return t.filter(n=>e.indexOf(n)===-1)}function Kv(t,e){const n={};return e.forEach(r=>{t[r]!==void 0&&(n[r]=t[r])}),n}var cL=t=>{let e=0,n=0;const r=t.offsetWidth,a=t.offsetHeight;do e+=t.offsetLeft,n+=t.offsetTop,t=t.offsetParent;while(t);const l={left:e,top:n,width:r,height:a,right:e+r,bottom:n+a,x:e,y:n};return rL(I1({},l),{toJSON:()=>JSON.stringify(l)})},uL=cL,Co="",ok=16,lk=()=>{let t="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=e.length;for(let r=0;r<ok;r++)t+=e.charAt(Math.floor(Math.random()*n));return t},dL=()=>{if(!Co){try{Co=sessionStorage.getItem("giphyPingbackId")}catch{}if(!Co){const t=new Date().getTime().toString(16);try{Co=`${t}${WO().replace(/-/g,"")}`.substring(0,ok)}catch{Co=lk()}try{sessionStorage.setItem("giphyPingbackId",Co)}catch{}}}return Co},D1=dL,bf=null;new Promise(t=>{typeof Image>"u"&&t(!1);const e=new Image;e.onload=()=>{bf=!0,t(bf)},e.onerror=()=>{bf=!1,t(bf)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"});var eS=(t,e,n)=>{let r=t?.assets;if(r){r=I1({},r),delete r.source;const a=Object.values(r).sort((l,u)=>l.width-u.width);return ak(a,e,n)}},hL=(t,e,n,r)=>{const a=Kv(t,["original","fixed_width","fixed_height","fixed_width_small","fixed_height_small"]),l=Object.entries(a).map(([u,h])=>I1({renditionName:u},h));return ak(l,e,n,r)},mp=({images:t},e)=>{const{fixed_width:n}=t;if(n){const{width:r,height:a}=n,l=r/a;return Math.round(e/l)}return 0},fL=({images:t},e)=>{const{fixed_width:n}=t;if(n){const{width:r,height:a}=n,l=r/a;return Math.round(e*l)}return 0},mL=({alt_text:t,user:e,tags:n=[],is_sticker:r=!1,title:a=""})=>{if(t)return t;if(a)return a;const l=e&&e.username||"",u=oL(lL(n,["transparent"]),l?4:5);return`${l?`${l} `:""}${u.join(" ")} ${r?"Sticker":"GIF"}`},Gu=(typeof window<"u"?window:global)||{};Gu._GIPHY_SDK_HEADERS_=Gu._GIPHY_SDK_HEADERS_||(Gu.Headers?new Gu.Headers({"X-GIPHY-SDK-PLATFORM":"web"}):void 0);var M1=()=>Gu._GIPHY_SDK_HEADERS_,Qv=(t,e)=>{var n;return(n=M1())==null?void 0:n.set(t,e)},pL=Object.defineProperty,gL=Object.defineProperties,vL=Object.getOwnPropertyDescriptors,yL=Object.getOwnPropertyNames,tS=Object.getOwnPropertySymbols,bL=Object.prototype.hasOwnProperty,xL=Object.prototype.propertyIsEnumerable,nS=(t,e,n)=>e in t?pL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Hs=(t,e)=>{for(var n in e||(e={}))bL.call(e,n)&&nS(t,n,e[n]);if(tS)for(var n of tS(e))xL.call(e,n)&&nS(t,n,e[n]);return t},W0=(t,e)=>gL(t,vL(e)),_L=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,n)=>(typeof require<"u"?require:e)[n]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')}),wL=(t,e)=>function(){return e||(0,t[yL(t)[0]])((e={exports:{}}).exports,e),e.exports},ck=(t,e,n)=>new Promise((r,a)=>{var l=m=>{try{h(n.next(m))}catch(p){a(p)}},u=m=>{try{h(n.throw(m))}catch(p){a(p)}},h=m=>m.done?r(m.value):Promise.resolve(m.value).then(l,u);h((n=n.apply(t,e)).next())}),SL=wL({"package.json"(t,e){e.exports={scripts:{lint:"run -T eslint . --ext .ts,.tsx",clean:"rm -rf ./dist",dev:"parcel public/test.html",docs:"typedoc src/index.ts",build:"run -T tsup src/index.ts --format cjs,esm --dts && run -T publint",prepublish:"npm run clean && npm run build",test:"run -T jest --config ./jestconfig.js","test:watch":"run -T jest --config ./jestconfig.js --watchAll"},name:"@giphy/js-fetch-api",version:"5.7.0",description:"Javascript API to fetch gifs and stickers from the GIPHY API.",homepage:"https://github.com/Giphy/giphy-js/tree/master/packages/fetch-api",main:"dist/index.cjs",types:"dist/index.d.ts",module:"dist/index.js",type:"module",sideEffects:!1,exports:{".":{types:"./dist/index.d.ts",import:"./dist/index.js",require:"./dist/index.cjs"},"./package.json":"./package.json"},files:["dist/","src/**/*"],license:"MIT",publishConfig:{access:"public"},dependencies:{"@giphy/js-types":"*","@giphy/js-util":"*"},devDependencies:{"jest-fetch-mock":"^3.0.3","parcel-bundler":"latest",typedoc:"^0.20.37","typedoc-thunder-theme":"^0.0.3",typescript:"^5.0.4"}}}}),EL=["is_anonymous","is_community","is_featured","is_hidden","is_indexable","is_preserve_size","is_realtime","is_removed","is_sticker","is_dynamic"],CL=["suppress_chrome","is_public","is_verified"],rS=t=>e=>t[e]=!!t[e],TL=t=>typeof t=="string"?t:t.text,uk=(t,e="")=>{const n=Hs({},t);n.id=String(n.id),n.tags=(n.tags||[]).map(TL),n.bottle_data||(n.bottle_data={}),n.response_id=e,EL.forEach(rS(n)),Object.keys(n.images||{}).forEach(a=>{const l=n.images[a];l.width=parseInt(l.width),l.height=parseInt(l.height)});const{user:r}=n;if(r){const a=Hs({},r);CL.forEach(rS(a)),n.user=a}return n},sS=t=>{const{response_id:e}=t.meta;return t.data=uk(t.data,e),t},ki=t=>{const{response_id:e}=t.meta;return t.data=t.data.map(n=>uk(n,e)),t},kL=(typeof window<"u"?window:global)||{},NL=kL.GIPHY_API_URL||"https://api.giphy.com/v1/",dk=class extends Error{constructor(e,n,r=0,a=""){super(e),this.url=n,this.status=r,this.statusText=a}},AL=class extends dk{},iS=dk,RL="@giphy/js-fetch-api: ",jL="Error fetching",IL=t=>t,bs={},DL=6e4,ML=6e3,PL=()=>{const t=Date.now();Object.keys(bs).forEach(e=>{const n=bs[e].isError?ML:DL;t-bs[e].ts>=n&&delete bs[e]})};function OL(t,e={}){const{apiVersion:n=1,noCache:r=!1,normalizer:a=IL}=e,l=NL.replace(/\/v\d+\/$/,`/v${n}/`);if(PL(),!bs[t]||r){const u=`${l}${t}`,h=()=>ck(this,null,function*(){var m,p;let y;try{const b=yield fetch(u,{method:"get"});if(b.ok){const x=yield b.json();if((m=x.meta)!=null&&m.response_id)return a(x);throw{message:"synthetic response"}}else{let x=jL;try{const R=yield b.json();R.message&&(x=R.message),(p=R.meta)!=null&&p.msg&&(x=R.meta.msg)}catch{}bs[t]&&(bs[t].isError=!0);let k=iS;x==="This content is not available in your location"&&(k=AL),y=new k(`${RL}${x}`,u,b.status,b.statusText)}}catch(b){y=new iS(b.message,u),bs[t]&&(bs[t].isError=!0)}throw y});bs[t]={request:h(),ts:Date.now()}}return bs[t].request}var kr=OL,J0=t=>t&&t.type?t.type:"gifs",LL=class{constructor(t,e={}){this.getQS=(n={})=>new URLSearchParams(Hs(W0(Hs({},n),{api_key:this.apiKey,pingback_id:D1()}),this.qsParams)).toString(),this.apiKey=t,this.qsParams=e}categories(t){return kr(`gifs/categories?${this.getQS(t)}`)}gif(t,e){const n=e?.internal?"internal/":"";return kr(`${n}gifs/${t}?${this.getQS()}`,{normalizer:sS})}gifs(t,e){return Array.isArray(t)?kr(`gifs?${this.getQS({ids:t.join(",")})}`,{normalizer:ki}):kr(`gifs/categories/${t}/${e}?${this.getQS()}`,{normalizer:ki})}emoji(t){return kr(`emoji?${this.getQS(t)}`,{normalizer:ki})}emojiDefaultVariations(t){return kr(`emoji?${this.getQS(t)}`,{apiVersion:2,normalizer:ki})}emojiVariations(t){return kr(`emoji/${t}/variations?${this.getQS()}`,{apiVersion:2,normalizer:ki})}animate(t,e={}){const n=this.getQS(W0(Hs({},e),{m:t}));return kr(`text/animate?${n}`,{normalizer:ki})}search(t,e={}){const n=e.channel?`@${e.channel} ${t}`:t;let r;e.type==="text"&&(r=!0);const a=this.getQS(W0(Hs({rating:"pg-13"},e),{q:n,excludeDynamicResults:r}));return kr(`${J0(e)}/search?${a}`,{normalizer:ki})}subcategories(t,e){return kr(`gifs/categories/${t}?${this.getQS(e)}`)}trending(t={}){return kr(`${J0(t)}/trending?${this.getQS(Hs({rating:"pg-13"},t))}`,{normalizer:ki})}random(t){return kr(`${J0(t)}/random?${this.getQS(Hs({rating:"pg-13"},t))}`,{noCache:!0,normalizer:sS})}related(t,e={}){const{type:n="gifs"}=e;return kr(`${n}/related?${this.getQS(Hs({gif_id:t,rating:"pg-13"},e))}`,{normalizer:ki})}channels(t,e={}){return kr(`channels/search?${this.getQS(Hs({q:t,rating:"pg-13"},e))}`)}},hk=LL,VL=Symbol("has inivisible gifs"),fk=(t,e=[])=>{let n=[...e],r=e.map(u=>u.id),a=e.length,l=!1;return u=>ck(void 0,null,function*(){if(u&&(n=u,r=u.map(b=>b.id)),l)return n;const h=yield t(a),{pagination:m,data:p}=h;a=m.count+m.offset,l=a===m.total_count,p.forEach(b=>{const{id:x}=b;r.includes(x)||(n.push(b),r.push(x))});const y=[...n];return m.hasMoreGifs&&(y.skipCountCheck=VL),y})},aS;if(typeof _L<"u"){const{version:t}=SL();(aS=M1())!=null&&aS.get("X-GIPHY-SDK-NAME")||(Qv("X-GIPHY-SDK-NAME","FetchAPI"),Qv("X-GIPHY-SDK-VERSION",t))}var Ir=function(){return Ir=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},Ir.apply(this,arguments)};function pd(t,e,n){if(n||arguments.length===2)for(var r=0,a=e.length,l;r<a;r++)(l||!(r in e))&&(l||(l=Array.prototype.slice.call(e,0,r)),l[r]=e[r]);return t.concat(l||Array.prototype.slice.call(e))}var ln="-ms-",Zu="-moz-",Ht="-webkit-",mk="comm",pp="rule",P1="decl",zL="@import",pk="@keyframes",UL="@layer",gk=Math.abs,O1=String.fromCharCode,Xv=Object.assign;function BL(t,e){return Kn(t,0)^45?(((e<<2^Kn(t,0))<<2^Kn(t,1))<<2^Kn(t,2))<<2^Kn(t,3):0}function vk(t){return t.trim()}function Ni(t,e){return(t=e.exec(t))?t[0]:t}function St(t,e,n){return t.replace(e,n)}function Hf(t,e,n){return t.indexOf(e,n)}function Kn(t,e){return t.charCodeAt(e)|0}function yc(t,e,n){return t.slice(e,n)}function Gs(t){return t.length}function yk(t){return t.length}function Yu(t,e){return e.push(t),t}function FL(t,e){return t.map(e).join("")}function oS(t,e){return t.filter(function(n){return!Ni(n,e)})}var gp=1,bc=1,bk=0,ls=0,Mn=0,jc="";function vp(t,e,n,r,a,l,u,h){return{value:t,root:e,parent:n,type:r,props:a,children:l,line:gp,column:bc,length:u,return:"",siblings:h}}function Ca(t,e){return Xv(vp("",null,null,"",null,null,0,t.siblings),t,{length:-t.length},e)}function Bl(t){for(;t.root;)t=Ca(t.root,{children:[t]});Yu(t,t.siblings)}function $L(){return Mn}function HL(){return Mn=ls>0?Kn(jc,--ls):0,bc--,Mn===10&&(bc=1,gp--),Mn}function Ss(){return Mn=ls<bk?Kn(jc,ls++):0,bc++,Mn===10&&(bc=1,gp++),Mn}function Do(){return Kn(jc,ls)}function qf(){return ls}function yp(t,e){return yc(jc,t,e)}function Wv(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function qL(t){return gp=bc=1,bk=Gs(jc=t),ls=0,[]}function GL(t){return jc="",t}function Z0(t){return vk(yp(ls-1,Jv(t===91?t+2:t===40?t+1:t)))}function YL(t){for(;(Mn=Do())&&Mn<33;)Ss();return Wv(t)>2||Wv(Mn)>3?"":" "}function KL(t,e){for(;--e&&Ss()&&!(Mn<48||Mn>102||Mn>57&&Mn<65||Mn>70&&Mn<97););return yp(t,qf()+(e<6&&Do()==32&&Ss()==32))}function Jv(t){for(;Ss();)switch(Mn){case t:return ls;case 34:case 39:t!==34&&t!==39&&Jv(Mn);break;case 40:t===41&&Jv(t);break;case 92:Ss();break}return ls}function QL(t,e){for(;Ss()&&t+Mn!==57;)if(t+Mn===84&&Do()===47)break;return"/*"+yp(e,ls-1)+"*"+O1(t===47?t:Ss())}function XL(t){for(;!Wv(Do());)Ss();return yp(t,ls)}function WL(t){return GL(Gf("",null,null,null,[""],t=qL(t),0,[0],t))}function Gf(t,e,n,r,a,l,u,h,m){for(var p=0,y=0,b=u,x=0,k=0,R=0,j=1,N=1,U=1,$=0,I="",O=a,B=l,q=r,w=I;N;)switch(R=$,$=Ss()){case 40:if(R!=108&&Kn(w,b-1)==58){Hf(w+=St(Z0($),"&","&\f"),"&\f",gk(p?h[p-1]:0))!=-1&&(U=-1);break}case 34:case 39:case 91:w+=Z0($);break;case 9:case 10:case 13:case 32:w+=YL(R);break;case 92:w+=KL(qf()-1,7);continue;case 47:switch(Do()){case 42:case 47:Yu(JL(QL(Ss(),qf()),e,n,m),m);break;default:w+="/"}break;case 123*j:h[p++]=Gs(w)*U;case 125*j:case 59:case 0:switch($){case 0:case 125:N=0;case 59+y:U==-1&&(w=St(w,/\f/g,"")),k>0&&Gs(w)-b&&Yu(k>32?cS(w+";",r,n,b-1,m):cS(St(w," ","")+";",r,n,b-2,m),m);break;case 59:w+=";";default:if(Yu(q=lS(w,e,n,p,y,a,h,I,O=[],B=[],b,l),l),$===123)if(y===0)Gf(w,e,q,q,O,l,b,h,B);else switch(x===99&&Kn(w,3)===110?100:x){case 100:case 108:case 109:case 115:Gf(t,q,q,r&&Yu(lS(t,q,q,0,0,a,h,I,a,O=[],b,B),B),a,B,b,h,r?O:B);break;default:Gf(w,q,q,q,[""],B,0,h,B)}}p=y=k=0,j=U=1,I=w="",b=u;break;case 58:b=1+Gs(w),k=R;default:if(j<1){if($==123)--j;else if($==125&&j++==0&&HL()==125)continue}switch(w+=O1($),$*j){case 38:U=y>0?1:(w+="\f",-1);break;case 44:h[p++]=(Gs(w)-1)*U,U=1;break;case 64:Do()===45&&(w+=Z0(Ss())),x=Do(),y=b=Gs(I=w+=XL(qf())),$++;break;case 45:R===45&&Gs(w)==2&&(j=0)}}return l}function lS(t,e,n,r,a,l,u,h,m,p,y,b){for(var x=a-1,k=a===0?l:[""],R=yk(k),j=0,N=0,U=0;j<r;++j)for(var $=0,I=yc(t,x+1,x=gk(N=u[j])),O=t;$<R;++$)(O=vk(N>0?k[$]+" "+I:St(I,/&\f/g,k[$])))&&(m[U++]=O);return vp(t,e,n,a===0?pp:h,m,p,y,b)}function JL(t,e,n,r){return vp(t,e,n,mk,O1($L()),yc(t,2,-2),0,r)}function cS(t,e,n,r,a){return vp(t,e,n,P1,yc(t,0,r),yc(t,r+1,-1),r,a)}function xk(t,e,n){switch(BL(t,e)){case 5103:return Ht+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ht+t+t;case 4789:return Zu+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Ht+t+Zu+t+ln+t+t;case 5936:switch(Kn(t,e+11)){case 114:return Ht+t+ln+St(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Ht+t+ln+St(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Ht+t+ln+St(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return Ht+t+ln+t+t;case 6165:return Ht+t+ln+"flex-"+t+t;case 5187:return Ht+t+St(t,/(\w+).+(:[^]+)/,Ht+"box-$1$2"+ln+"flex-$1$2")+t;case 5443:return Ht+t+ln+"flex-item-"+St(t,/flex-|-self/g,"")+(Ni(t,/flex-|baseline/)?"":ln+"grid-row-"+St(t,/flex-|-self/g,""))+t;case 4675:return Ht+t+ln+"flex-line-pack"+St(t,/align-content|flex-|-self/g,"")+t;case 5548:return Ht+t+ln+St(t,"shrink","negative")+t;case 5292:return Ht+t+ln+St(t,"basis","preferred-size")+t;case 6060:return Ht+"box-"+St(t,"-grow","")+Ht+t+ln+St(t,"grow","positive")+t;case 4554:return Ht+St(t,/([^-])(transform)/g,"$1"+Ht+"$2")+t;case 6187:return St(St(St(t,/(zoom-|grab)/,Ht+"$1"),/(image-set)/,Ht+"$1"),t,"")+t;case 5495:case 3959:return St(t,/(image-set\([^]*)/,Ht+"$1$`$1");case 4968:return St(St(t,/(.+:)(flex-)?(.*)/,Ht+"box-pack:$3"+ln+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ht+t+t;case 4200:if(!Ni(t,/flex-|baseline/))return ln+"grid-column-align"+yc(t,e)+t;break;case 2592:case 3360:return ln+St(t,"template-","")+t;case 4384:case 3616:return n&&n.some(function(r,a){return e=a,Ni(r.props,/grid-\w+-end/)})?~Hf(t+(n=n[e].value),"span",0)?t:ln+St(t,"-start","")+t+ln+"grid-row-span:"+(~Hf(n,"span",0)?Ni(n,/\d+/):+Ni(n,/\d+/)-+Ni(t,/\d+/))+";":ln+St(t,"-start","")+t;case 4896:case 4128:return n&&n.some(function(r){return Ni(r.props,/grid-\w+-start/)})?t:ln+St(St(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return St(t,/(.+)-inline(.+)/,Ht+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Gs(t)-1-e>6)switch(Kn(t,e+1)){case 109:if(Kn(t,e+4)!==45)break;case 102:return St(t,/(.+:)(.+)-([^]+)/,"$1"+Ht+"$2-$3$1"+Zu+(Kn(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~Hf(t,"stretch",0)?xk(St(t,"stretch","fill-available"),e,n)+t:t}break;case 5152:case 5920:return St(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,a,l,u,h,m,p){return ln+a+":"+l+p+(u?ln+a+"-span:"+(h?m:+m-+l)+p:"")+t});case 4949:if(Kn(t,e+6)===121)return St(t,":",":"+Ht)+t;break;case 6444:switch(Kn(t,Kn(t,14)===45?18:11)){case 120:return St(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Ht+(Kn(t,14)===45?"inline-":"")+"box$3$1"+Ht+"$2$3$1"+ln+"$2box$3")+t;case 100:return St(t,":",":"+ln)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return St(t,"scroll-","scroll-snap-")+t}return t}function Am(t,e){for(var n="",r=0;r<t.length;r++)n+=e(t[r],r,t,e)||"";return n}function ZL(t,e,n,r){switch(t.type){case UL:if(t.children.length)break;case zL:case P1:return t.return=t.return||t.value;case mk:return"";case pk:return t.return=t.value+"{"+Am(t.children,r)+"}";case pp:if(!Gs(t.value=t.props.join(",")))return""}return Gs(n=Am(t.children,r))?t.return=t.value+"{"+n+"}":""}function eV(t){var e=yk(t);return function(n,r,a,l){for(var u="",h=0;h<e;h++)u+=t[h](n,r,a,l)||"";return u}}function tV(t){return function(e){e.root||(e=e.return)&&t(e)}}function nV(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case P1:t.return=xk(t.value,t.length,n);return;case pk:return Am([Ca(t,{value:St(t.value,"@","@"+Ht)})],r);case pp:if(t.length)return FL(n=t.props,function(a){switch(Ni(a,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Bl(Ca(t,{props:[St(a,/:(read-\w+)/,":"+Zu+"$1")]})),Bl(Ca(t,{props:[a]})),Xv(t,{props:oS(n,r)});break;case"::placeholder":Bl(Ca(t,{props:[St(a,/:(plac\w+)/,":"+Ht+"input-$1")]})),Bl(Ca(t,{props:[St(a,/:(plac\w+)/,":"+Zu+"$1")]})),Bl(Ca(t,{props:[St(a,/:(plac\w+)/,ln+"input-$1")]})),Bl(Ca(t,{props:[a]})),Xv(t,{props:oS(n,r)});break}return""})}}var rV={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},$r={},xc=typeof process<"u"&&$r!==void 0&&($r.REACT_APP_SC_ATTR||$r.SC_ATTR)||"data-styled",_k="active",wk="data-styled-version",bp="6.1.19",L1=`/*!sc*/
`,Rm=typeof window<"u"&&typeof document<"u",sV=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&$r!==void 0&&$r.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&$r.REACT_APP_SC_DISABLE_SPEEDY!==""?$r.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&$r.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&$r!==void 0&&$r.SC_DISABLE_SPEEDY!==void 0&&$r.SC_DISABLE_SPEEDY!==""&&$r.SC_DISABLE_SPEEDY!=="false"&&$r.SC_DISABLE_SPEEDY),xp=Object.freeze([]),_c=Object.freeze({});function iV(t,e,n){return n===void 0&&(n=_c),t.theme!==n.theme&&t.theme||e||n.theme}var Sk=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),aV=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,oV=/(^-|-$)/g;function uS(t){return t.replace(aV,"-").replace(oV,"")}var lV=/(a)(d)/gi,xf=52,dS=function(t){return String.fromCharCode(t+(t>25?39:97))};function Zv(t){var e,n="";for(e=Math.abs(t);e>xf;e=e/xf|0)n=dS(e%xf)+n;return(dS(e%xf)+n).replace(lV,"$1-$2")}var ev,Ek=5381,Ql=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},Ck=function(t){return Ql(Ek,t)};function Tk(t){return Zv(Ck(t)>>>0)}function cV(t){return t.displayName||t.name||"Component"}function tv(t){return typeof t=="string"&&!0}var kk=typeof Symbol=="function"&&Symbol.for,Nk=kk?Symbol.for("react.memo"):60115,uV=kk?Symbol.for("react.forward_ref"):60112,dV={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},hV={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Ak={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},fV=((ev={})[uV]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ev[Nk]=Ak,ev);function hS(t){return("type"in(e=t)&&e.type.$$typeof)===Nk?Ak:"$$typeof"in t?fV[t.$$typeof]:dV;var e}var mV=Object.defineProperty,pV=Object.getOwnPropertyNames,fS=Object.getOwnPropertySymbols,gV=Object.getOwnPropertyDescriptor,vV=Object.getPrototypeOf,mS=Object.prototype;function Rk(t,e,n){if(typeof e!="string"){if(mS){var r=vV(e);r&&r!==mS&&Rk(t,r,n)}var a=pV(e);fS&&(a=a.concat(fS(e)));for(var l=hS(t),u=hS(e),h=0;h<a.length;++h){var m=a[h];if(!(m in hV||n&&n[m]||u&&m in u||l&&m in l)){var p=gV(e,m);try{mV(t,m,p)}catch{}}}}return t}function wc(t){return typeof t=="function"}function V1(t){return typeof t=="object"&&"styledComponentId"in t}function Ao(t,e){return t&&e?"".concat(t," ").concat(e):t||e||""}function ey(t,e){if(t.length===0)return"";for(var n=t[0],r=1;r<t.length;r++)n+=t[r];return n}function gd(t){return t!==null&&typeof t=="object"&&t.constructor.name===Object.name&&!("props"in t&&t.$$typeof)}function ty(t,e,n){if(n===void 0&&(n=!1),!n&&!gd(t)&&!Array.isArray(t))return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)t[r]=ty(t[r],e[r]);else if(gd(e))for(var r in e)t[r]=ty(t[r],e[r]);return t}function z1(t,e){Object.defineProperty(t,"toString",{value:e})}function Vd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(t," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var yV=(function(){function t(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return t.prototype.indexOfGroup=function(e){for(var n=0,r=0;r<e;r++)n+=this.groupSizes[r];return n},t.prototype.insertRules=function(e,n){if(e>=this.groupSizes.length){for(var r=this.groupSizes,a=r.length,l=a;e>=l;)if((l<<=1)<0)throw Vd(16,"".concat(e));this.groupSizes=new Uint32Array(l),this.groupSizes.set(r),this.length=l;for(var u=a;u<l;u++)this.groupSizes[u]=0}for(var h=this.indexOfGroup(e+1),m=(u=0,n.length);u<m;u++)this.tag.insertRule(h,n[u])&&(this.groupSizes[e]++,h++)},t.prototype.clearGroup=function(e){if(e<this.length){var n=this.groupSizes[e],r=this.indexOfGroup(e),a=r+n;this.groupSizes[e]=0;for(var l=r;l<a;l++)this.tag.deleteRule(r)}},t.prototype.getGroup=function(e){var n="";if(e>=this.length||this.groupSizes[e]===0)return n;for(var r=this.groupSizes[e],a=this.indexOfGroup(e),l=a+r,u=a;u<l;u++)n+="".concat(this.tag.getRule(u)).concat(L1);return n},t})(),Yf=new Map,jm=new Map,Kf=1,_f=function(t){if(Yf.has(t))return Yf.get(t);for(;jm.has(Kf);)Kf++;var e=Kf++;return Yf.set(t,e),jm.set(e,t),e},bV=function(t,e){Kf=e+1,Yf.set(t,e),jm.set(e,t)},xV="style[".concat(xc,"][").concat(wk,'="').concat(bp,'"]'),_V=new RegExp("^".concat(xc,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),wV=function(t,e,n){for(var r,a=n.split(","),l=0,u=a.length;l<u;l++)(r=a[l])&&t.registerName(e,r)},SV=function(t,e){for(var n,r=((n=e.textContent)!==null&&n!==void 0?n:"").split(L1),a=[],l=0,u=r.length;l<u;l++){var h=r[l].trim();if(h){var m=h.match(_V);if(m){var p=0|parseInt(m[1],10),y=m[2];p!==0&&(bV(y,p),wV(t,y,m[3]),t.getTag().insertRules(p,a)),a.length=0}else a.push(h)}}},pS=function(t){for(var e=document.querySelectorAll(xV),n=0,r=e.length;n<r;n++){var a=e[n];a&&a.getAttribute(xc)!==_k&&(SV(t,a),a.parentNode&&a.parentNode.removeChild(a))}};function EV(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var jk=function(t){var e=document.head,n=t||e,r=document.createElement("style"),a=(function(h){var m=Array.from(h.querySelectorAll("style[".concat(xc,"]")));return m[m.length-1]})(n),l=a!==void 0?a.nextSibling:null;r.setAttribute(xc,_k),r.setAttribute(wk,bp);var u=EV();return u&&r.setAttribute("nonce",u),n.insertBefore(r,l),r},CV=(function(){function t(e){this.element=jk(e),this.element.appendChild(document.createTextNode("")),this.sheet=(function(n){if(n.sheet)return n.sheet;for(var r=document.styleSheets,a=0,l=r.length;a<l;a++){var u=r[a];if(u.ownerNode===n)return u}throw Vd(17)})(this.element),this.length=0}return t.prototype.insertRule=function(e,n){try{return this.sheet.insertRule(n,e),this.length++,!0}catch{return!1}},t.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.prototype.getRule=function(e){var n=this.sheet.cssRules[e];return n&&n.cssText?n.cssText:""},t})(),TV=(function(){function t(e){this.element=jk(e),this.nodes=this.element.childNodes,this.length=0}return t.prototype.insertRule=function(e,n){if(e<=this.length&&e>=0){var r=document.createTextNode(n);return this.element.insertBefore(r,this.nodes[e]||null),this.length++,!0}return!1},t.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},t})(),kV=(function(){function t(e){this.rules=[],this.length=0}return t.prototype.insertRule=function(e,n){return e<=this.length&&(this.rules.splice(e,0,n),this.length++,!0)},t.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},t})(),gS=Rm,NV={isServer:!Rm,useCSSOMInjection:!sV},Ik=(function(){function t(e,n,r){e===void 0&&(e=_c),n===void 0&&(n={});var a=this;this.options=Ir(Ir({},NV),e),this.gs=n,this.names=new Map(r),this.server=!!e.isServer,!this.server&&Rm&&gS&&(gS=!1,pS(this)),z1(this,function(){return(function(l){for(var u=l.getTag(),h=u.length,m="",p=function(b){var x=(function(U){return jm.get(U)})(b);if(x===void 0)return"continue";var k=l.names.get(x),R=u.getGroup(b);if(k===void 0||!k.size||R.length===0)return"continue";var j="".concat(xc,".g").concat(b,'[id="').concat(x,'"]'),N="";k!==void 0&&k.forEach(function(U){U.length>0&&(N+="".concat(U,","))}),m+="".concat(R).concat(j,'{content:"').concat(N,'"}').concat(L1)},y=0;y<h;y++)p(y);return m})(a)})}return t.registerId=function(e){return _f(e)},t.prototype.rehydrate=function(){!this.server&&Rm&&pS(this)},t.prototype.reconstructWithOptions=function(e,n){return n===void 0&&(n=!0),new t(Ir(Ir({},this.options),e),this.gs,n&&this.names||void 0)},t.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.prototype.getTag=function(){return this.tag||(this.tag=(e=(function(n){var r=n.useCSSOMInjection,a=n.target;return n.isServer?new kV(a):r?new CV(a):new TV(a)})(this.options),new yV(e)));var e},t.prototype.hasNameForId=function(e,n){return this.names.has(e)&&this.names.get(e).has(n)},t.prototype.registerName=function(e,n){if(_f(e),this.names.has(e))this.names.get(e).add(n);else{var r=new Set;r.add(n),this.names.set(e,r)}},t.prototype.insertRules=function(e,n,r){this.registerName(e,n),this.getTag().insertRules(_f(e),r)},t.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.prototype.clearRules=function(e){this.getTag().clearGroup(_f(e)),this.clearNames(e)},t.prototype.clearTag=function(){this.tag=void 0},t})(),AV=/&/g,RV=/^\s*\/\/.*$/gm;function Dk(t,e){return t.map(function(n){return n.type==="rule"&&(n.value="".concat(e," ").concat(n.value),n.value=n.value.replaceAll(",",",".concat(e," ")),n.props=n.props.map(function(r){return"".concat(e," ").concat(r)})),Array.isArray(n.children)&&n.type!=="@keyframes"&&(n.children=Dk(n.children,e)),n})}function jV(t){var e,n,r,a=_c,l=a.options,u=l===void 0?_c:l,h=a.plugins,m=h===void 0?xp:h,p=function(x,k,R){return R.startsWith(n)&&R.endsWith(n)&&R.replaceAll(n,"").length>0?".".concat(e):x},y=m.slice();y.push(function(x){x.type===pp&&x.value.includes("&")&&(x.props[0]=x.props[0].replace(AV,n).replace(r,p))}),u.prefix&&y.push(nV),y.push(ZL);var b=function(x,k,R,j){k===void 0&&(k=""),R===void 0&&(R=""),j===void 0&&(j="&"),e=j,n=k,r=new RegExp("\\".concat(n,"\\b"),"g");var N=x.replace(RV,""),U=WL(R||k?"".concat(R," ").concat(k," { ").concat(N," }"):N);u.namespace&&(U=Dk(U,u.namespace));var $=[];return Am(U,eV(y.concat(tV(function(I){return $.push(I)})))),$};return b.hash=m.length?m.reduce(function(x,k){return k.name||Vd(15),Ql(x,k.name)},Ek).toString():"",b}var IV=new Ik,ny=jV(),Mk=ye.createContext({shouldForwardProp:void 0,styleSheet:IV,stylis:ny});Mk.Consumer;ye.createContext(void 0);function vS(){return T.useContext(Mk)}var Pk=(function(){function t(e,n){var r=this;this.inject=function(a,l){l===void 0&&(l=ny);var u=r.name+l.hash;a.hasNameForId(r.id,u)||a.insertRules(r.id,u,l(r.rules,u,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=n,z1(this,function(){throw Vd(12,String(r.name))})}return t.prototype.getName=function(e){return e===void 0&&(e=ny),this.name+e.hash},t})(),DV=function(t){return t>="A"&&t<="Z"};function yS(t){for(var e="",n=0;n<t.length;n++){var r=t[n];if(n===1&&r==="-"&&t[0]==="-")return t;DV(r)?e+="-"+r.toLowerCase():e+=r}return e.startsWith("ms-")?"-"+e:e}var Ok=function(t){return t==null||t===!1||t===""},Lk=function(t){var e,n,r=[];for(var a in t){var l=t[a];t.hasOwnProperty(a)&&!Ok(l)&&(Array.isArray(l)&&l.isCss||wc(l)?r.push("".concat(yS(a),":"),l,";"):gd(l)?r.push.apply(r,pd(pd(["".concat(a," {")],Lk(l),!1),["}"],!1)):r.push("".concat(yS(a),": ").concat((e=a,(n=l)==null||typeof n=="boolean"||n===""?"":typeof n!="number"||n===0||e in rV||e.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function Mo(t,e,n,r){if(Ok(t))return[];if(V1(t))return[".".concat(t.styledComponentId)];if(wc(t)){if(!wc(l=t)||l.prototype&&l.prototype.isReactComponent||!e)return[t];var a=t(e);return Mo(a,e,n,r)}var l;return t instanceof Pk?n?(t.inject(n,r),[t.getName(r)]):[t]:gd(t)?Lk(t):Array.isArray(t)?Array.prototype.concat.apply(xp,t.map(function(u){return Mo(u,e,n,r)})):[t.toString()]}function MV(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(wc(n)&&!V1(n))return!1}return!0}var PV=Ck(bp),OV=(function(){function t(e,n,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&MV(e),this.componentId=n,this.baseHash=Ql(PV,n),this.baseStyle=r,Ik.registerId(n)}return t.prototype.generateAndInjectStyles=function(e,n,r){var a=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,n,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(this.componentId,this.staticRulesId))a=Ao(a,this.staticRulesId);else{var l=ey(Mo(this.rules,e,n,r)),u=Zv(Ql(this.baseHash,l)>>>0);if(!n.hasNameForId(this.componentId,u)){var h=r(l,".".concat(u),void 0,this.componentId);n.insertRules(this.componentId,u,h)}a=Ao(a,u),this.staticRulesId=u}else{for(var m=Ql(this.baseHash,r.hash),p="",y=0;y<this.rules.length;y++){var b=this.rules[y];if(typeof b=="string")p+=b;else if(b){var x=ey(Mo(b,e,n,r));m=Ql(m,x+y),p+=x}}if(p){var k=Zv(m>>>0);n.hasNameForId(this.componentId,k)||n.insertRules(this.componentId,k,r(p,".".concat(k),void 0,this.componentId)),a=Ao(a,k)}}return a},t})(),Vk=ye.createContext(void 0);Vk.Consumer;var nv={};function LV(t,e,n){var r=V1(t),a=t,l=!tv(t),u=e.attrs,h=u===void 0?xp:u,m=e.componentId,p=m===void 0?(function(O,B){var q=typeof O!="string"?"sc":uS(O);nv[q]=(nv[q]||0)+1;var w="".concat(q,"-").concat(Tk(bp+q+nv[q]));return B?"".concat(B,"-").concat(w):w})(e.displayName,e.parentComponentId):m,y=e.displayName,b=y===void 0?(function(O){return tv(O)?"styled.".concat(O):"Styled(".concat(cV(O),")")})(t):y,x=e.displayName&&e.componentId?"".concat(uS(e.displayName),"-").concat(e.componentId):e.componentId||p,k=r&&a.attrs?a.attrs.concat(h).filter(Boolean):h,R=e.shouldForwardProp;if(r&&a.shouldForwardProp){var j=a.shouldForwardProp;if(e.shouldForwardProp){var N=e.shouldForwardProp;R=function(O,B){return j(O,B)&&N(O,B)}}else R=j}var U=new OV(n,x,r?a.componentStyle:void 0);function $(O,B){return(function(q,w,E){var A=q.attrs,P=q.componentStyle,L=q.defaultProps,z=q.foldedComponentIds,M=q.styledComponentId,se=q.target,le=ye.useContext(Vk),Y=vS(),ee=q.shouldForwardProp||Y.shouldForwardProp,Z=iV(w,le,L)||_c,Ee=(function(Te,De,ae){for(var Le,Ie=Ir(Ir({},De),{className:void 0,theme:ae}),de=0;de<Te.length;de+=1){var pe=wc(Le=Te[de])?Le(Ie):Le;for(var ge in pe)Ie[ge]=ge==="className"?Ao(Ie[ge],pe[ge]):ge==="style"?Ir(Ir({},Ie[ge]),pe[ge]):pe[ge]}return De.className&&(Ie.className=Ao(Ie.className,De.className)),Ie})(A,w,Z),Re=Ee.as||se,H={};for(var W in Ee)Ee[W]===void 0||W[0]==="$"||W==="as"||W==="theme"&&Ee.theme===Z||(W==="forwardedAs"?H.as=Ee.forwardedAs:ee&&!ee(W,Re)||(H[W]=Ee[W]));var ie=(function(Te,De){var ae=vS(),Le=Te.generateAndInjectStyles(De,ae.styleSheet,ae.stylis);return Le})(P,Ee),ve=Ao(z,M);return ie&&(ve+=" "+ie),Ee.className&&(ve+=" "+Ee.className),H[tv(Re)&&!Sk.has(Re)?"class":"className"]=ve,E&&(H.ref=E),T.createElement(Re,H)})(I,O,B)}$.displayName=b;var I=ye.forwardRef($);return I.attrs=k,I.componentStyle=U,I.displayName=b,I.shouldForwardProp=R,I.foldedComponentIds=r?Ao(a.foldedComponentIds,a.styledComponentId):"",I.styledComponentId=x,I.target=r?a.target:t,Object.defineProperty(I,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(O){this._foldedDefaultProps=r?(function(B){for(var q=[],w=1;w<arguments.length;w++)q[w-1]=arguments[w];for(var E=0,A=q;E<A.length;E++)ty(B,A[E],!0);return B})({},a.defaultProps,O):O}}),z1(I,function(){return".".concat(I.styledComponentId)}),l&&Rk(I,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),I}function bS(t,e){for(var n=[t[0]],r=0,a=e.length;r<a;r+=1)n.push(e[r],t[r+1]);return n}var xS=function(t){return Object.assign(t,{isCss:!0})};function _p(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(wc(t)||gd(t))return xS(Mo(bS(xp,pd([t],e,!0))));var r=t;return e.length===0&&r.length===1&&typeof r[0]=="string"?Mo(r):xS(Mo(bS(r,e)))}function ry(t,e,n){if(n===void 0&&(n=_c),!e)throw Vd(1,e);var r=function(a){for(var l=[],u=1;u<arguments.length;u++)l[u-1]=arguments[u];return t(e,n,_p.apply(void 0,pd([a],l,!1)))};return r.attrs=function(a){return ry(t,e,Ir(Ir({},n),{attrs:Array.prototype.concat(n.attrs,a).filter(Boolean)}))},r.withConfig=function(a){return ry(t,e,Ir(Ir({},n),a))},r}var zk=function(t){return ry(LV,t)},et=zk;Sk.forEach(function(t){et[t]=zk(t)});function zd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=ey(_p.apply(void 0,pd([t],e,!1))),a=Tk(r);return new Pk(a,r)}var sy="#121212",Uk="#212121",VV="#3e3e3e",zV="#4a4a4a",Bk="#a6a6a6",UV="#ececec",Qf="#ffffff",U1="#00ccff",Fk="#00ff99",$k="#9933ff",Hk="#ff6666",qk="#fff35c",BV="#6157ff";function _S(t,e,n,r){var a,l=!1,u=0;function h(){a&&clearTimeout(a)}function m(){h(),l=!0}typeof e!="boolean"&&(r=n,n=e,e=void 0);function p(){for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];var k=this,R=Date.now()-u;if(l)return;function j(){u=Date.now(),n.apply(k,b)}function N(){a=void 0}r&&!a&&j(),h(),r===void 0&&R>t?j():e!==!0&&(a=setTimeout(r?N:j,r===void 0?t-R:t))}return p.cancel=m,p}function B1(t,e,n){return n===void 0?_S(t,e,!1):_S(t,n,e!==!1)}var wS={},SS;function FV(){return SS||(SS=1,(function(){if(typeof window!="object")return;if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});return}function t(I){try{return I.defaultView&&I.defaultView.frameElement||null}catch{return null}}var e=(function(I){for(var O=I,B=t(O);B;)O=B.ownerDocument,B=t(O);return O})(window.document),n=[],r=null,a=null;function l(I){this.time=I.time,this.target=I.target,this.rootBounds=R(I.rootBounds),this.boundingClientRect=R(I.boundingClientRect),this.intersectionRect=R(I.intersectionRect||k()),this.isIntersecting=!!I.intersectionRect;var O=this.boundingClientRect,B=O.width*O.height,q=this.intersectionRect,w=q.width*q.height;B?this.intersectionRatio=Number((w/B).toFixed(4)):this.intersectionRatio=this.isIntersecting?1:0}function u(I,O){var B=O||{};if(typeof I!="function")throw new Error("callback must be a function");if(B.root&&B.root.nodeType!=1&&B.root.nodeType!=9)throw new Error("root must be a Document or Element");this._checkForIntersections=m(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=I,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(B.rootMargin),this.thresholds=this._initThresholds(B.threshold),this.root=B.root||null,this.rootMargin=this._rootMarginValues.map(function(q){return q.value+q.unit}).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}u.prototype.THROTTLE_TIMEOUT=100,u.prototype.POLL_INTERVAL=null,u.prototype.USE_MUTATION_OBSERVER=!0,u._setupCrossOriginUpdater=function(){return r||(r=function(I,O){!I||!O?a=k():a=j(I,O),n.forEach(function(B){B._checkForIntersections()})}),r},u._resetCrossOriginUpdater=function(){r=null,a=null},u.prototype.observe=function(I){var O=this._observationTargets.some(function(B){return B.element==I});if(!O){if(!(I&&I.nodeType==1))throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:I,entry:null}),this._monitorIntersections(I.ownerDocument),this._checkForIntersections()}},u.prototype.unobserve=function(I){this._observationTargets=this._observationTargets.filter(function(O){return O.element!=I}),this._unmonitorIntersections(I.ownerDocument),this._observationTargets.length==0&&this._unregisterInstance()},u.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},u.prototype.takeRecords=function(){var I=this._queuedEntries.slice();return this._queuedEntries=[],I},u.prototype._initThresholds=function(I){var O=I||[0];return Array.isArray(O)||(O=[O]),O.sort().filter(function(B,q,w){if(typeof B!="number"||isNaN(B)||B<0||B>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return B!==w[q-1]})},u.prototype._parseRootMargin=function(I){var O=I||"0px",B=O.split(/\s+/).map(function(q){var w=/^(-?\d*\.?\d+)(px|%)$/.exec(q);if(!w)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(w[1]),unit:w[2]}});return B[1]=B[1]||B[0],B[2]=B[2]||B[0],B[3]=B[3]||B[1],B},u.prototype._monitorIntersections=function(I){var O=I.defaultView;if(O&&this._monitoringDocuments.indexOf(I)==-1){var B=this._checkForIntersections,q=null,w=null;this.POLL_INTERVAL?q=O.setInterval(B,this.POLL_INTERVAL):(p(O,"resize",B,!0),p(I,"scroll",B,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in O&&(w=new O.MutationObserver(B),w.observe(I,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))),this._monitoringDocuments.push(I),this._monitoringUnsubscribes.push(function(){var P=I.defaultView;P&&(q&&P.clearInterval(q),y(P,"resize",B,!0)),y(I,"scroll",B,!0),w&&w.disconnect()});var E=this.root&&(this.root.ownerDocument||this.root)||e;if(I!=E){var A=t(I);A&&this._monitorIntersections(A.ownerDocument)}}},u.prototype._unmonitorIntersections=function(I){var O=this._monitoringDocuments.indexOf(I);if(O!=-1){var B=this.root&&(this.root.ownerDocument||this.root)||e,q=this._observationTargets.some(function(A){var P=A.element.ownerDocument;if(P==I)return!0;for(;P&&P!=B;){var L=t(P);if(P=L&&L.ownerDocument,P==I)return!0}return!1});if(!q){var w=this._monitoringUnsubscribes[O];if(this._monitoringDocuments.splice(O,1),this._monitoringUnsubscribes.splice(O,1),w(),I!=B){var E=t(I);E&&this._unmonitorIntersections(E.ownerDocument)}}}},u.prototype._unmonitorAllIntersections=function(){var I=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var O=0;O<I.length;O++)I[O]()},u.prototype._checkForIntersections=function(){if(!(!this.root&&r&&!a)){var I=this._rootIsInDom(),O=I?this._getRootRect():k();this._observationTargets.forEach(function(B){var q=B.element,w=x(q),E=this._rootContainsTarget(q),A=B.entry,P=I&&E&&this._computeTargetAndRootIntersection(q,w,O),L=null;this._rootContainsTarget(q)?(!r||this.root)&&(L=O):L=k();var z=B.entry=new l({time:h(),target:q,boundingClientRect:w,rootBounds:L,intersectionRect:P});A?I&&E?this._hasCrossedThreshold(A,z)&&this._queuedEntries.push(z):A&&A.isIntersecting&&this._queuedEntries.push(z):this._queuedEntries.push(z)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},u.prototype._computeTargetAndRootIntersection=function(I,O,B){if(window.getComputedStyle(I).display!="none"){for(var q=O,w=U(I),E=!1;!E&&w;){var A=null,P=w.nodeType==1?window.getComputedStyle(w):{};if(P.display=="none")return null;if(w==this.root||w.nodeType==9)if(E=!0,w==this.root||w==e)r&&!this.root?!a||a.width==0&&a.height==0?(w=null,A=null,q=null):A=a:A=B;else{var L=U(w),z=L&&x(L),M=L&&this._computeTargetAndRootIntersection(L,z,B);z&&M?(w=L,A=j(z,M)):(w=null,q=null)}else{var se=w.ownerDocument;w!=se.body&&w!=se.documentElement&&P.overflow!="visible"&&(A=x(w))}if(A&&(q=b(A,q)),!q)break;w=w&&U(w)}return q}},u.prototype._getRootRect=function(){var I;if(this.root&&!$(this.root))I=x(this.root);else{var O=$(this.root)?this.root:e,B=O.documentElement,q=O.body;I={top:0,left:0,right:B.clientWidth||q.clientWidth,width:B.clientWidth||q.clientWidth,bottom:B.clientHeight||q.clientHeight,height:B.clientHeight||q.clientHeight}}return this._expandRectByRootMargin(I)},u.prototype._expandRectByRootMargin=function(I){var O=this._rootMarginValues.map(function(q,w){return q.unit=="px"?q.value:q.value*(w%2?I.width:I.height)/100}),B={top:I.top-O[0],right:I.right+O[1],bottom:I.bottom+O[2],left:I.left-O[3]};return B.width=B.right-B.left,B.height=B.bottom-B.top,B},u.prototype._hasCrossedThreshold=function(I,O){var B=I&&I.isIntersecting?I.intersectionRatio||0:-1,q=O.isIntersecting?O.intersectionRatio||0:-1;if(B!==q)for(var w=0;w<this.thresholds.length;w++){var E=this.thresholds[w];if(E==B||E==q||E<B!=E<q)return!0}},u.prototype._rootIsInDom=function(){return!this.root||N(e,this.root)},u.prototype._rootContainsTarget=function(I){var O=this.root&&(this.root.ownerDocument||this.root)||e;return N(O,I)&&(!this.root||O==I.ownerDocument)},u.prototype._registerInstance=function(){n.indexOf(this)<0&&n.push(this)},u.prototype._unregisterInstance=function(){var I=n.indexOf(this);I!=-1&&n.splice(I,1)};function h(){return window.performance&&performance.now&&performance.now()}function m(I,O){var B=null;return function(){B||(B=setTimeout(function(){I(),B=null},O))}}function p(I,O,B,q){typeof I.addEventListener=="function"?I.addEventListener(O,B,q):typeof I.attachEvent=="function"&&I.attachEvent("on"+O,B)}function y(I,O,B,q){typeof I.removeEventListener=="function"?I.removeEventListener(O,B,q):typeof I.detachEvent=="function"&&I.detachEvent("on"+O,B)}function b(I,O){var B=Math.max(I.top,O.top),q=Math.min(I.bottom,O.bottom),w=Math.max(I.left,O.left),E=Math.min(I.right,O.right),A=E-w,P=q-B;return A>=0&&P>=0&&{top:B,bottom:q,left:w,right:E,width:A,height:P}||null}function x(I){var O;try{O=I.getBoundingClientRect()}catch{}return O?(O.width&&O.height||(O={top:O.top,right:O.right,bottom:O.bottom,left:O.left,width:O.right-O.left,height:O.bottom-O.top}),O):k()}function k(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function R(I){return!I||"x"in I?I:{top:I.top,y:I.top,bottom:I.bottom,left:I.left,x:I.left,right:I.right,width:I.width,height:I.height}}function j(I,O){var B=O.top-I.top,q=O.left-I.left;return{top:B,left:q,height:O.height,width:O.width,bottom:B+O.height,right:q+O.width}}function N(I,O){for(var B=O;B;){if(B==I)return!0;B=U(B)}return!1}function U(I){var O=I.parentNode;return I.nodeType==9&&I!=e?t(I):(O&&O.assignedSlot&&(O=O.assignedSlot.parentNode),O&&O.nodeType==11&&O.host?O.host:O)}function $(I){return I&&I.nodeType===9}window.IntersectionObserver=u,window.IntersectionObserverEntry=l})()),wS}FV();var $V=Object.defineProperty,ES=Object.getOwnPropertySymbols,HV=Object.prototype.hasOwnProperty,qV=Object.prototype.propertyIsEnumerable,CS=(t,e,n)=>e in t?$V(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pu=(t,e)=>{for(var n in e||(e={}))HV.call(e,n)&&CS(t,n,e[n]);if(ES)for(var n of ES(e))qV.call(e,n)&&CS(t,n,e[n]);return t},GV=(t,e,n)=>{const r=Kv(t,[n]),a=Kv(e,[n]);return r[n]&&a[n]?Pu(Pu(Pu({},t),e),{[n]:r[n]+", "+a[n]}):Pu(Pu({},t),e)},YV=GV,F1=(typeof window<"u"?window:global)||{},TS,KV=((TS=F1)==null?void 0:TS.GIPHY_PINGBACK_URL)||"https://pingback.giphy.com",QV=`${KV}/v2/pingback?apikey=l0HlIwPWyBBUDAUgM`,XV=t=>{const e=M1();return e?.set("Content-Type","application/json"),nr.debug("Pingback session",t),t.length?fetch(QV,{method:"POST",body:JSON.stringify({events:t}),headers:e}).catch(n=>{nr.warn(`pingbacks failing to post ${n}`)}):new Promise(n=>n())},iy=[];F1.giphyRandomId=D1();var wf="";function $1(){const t=[...iy];iy=[],XV(t)}var WV=B1(1e3,$1),kS,NS;(NS=(kS=F1).addEventListener)==null||NS.call(kS,"beforeunload",$1);var JV=({userId:t,eventType:e,actionType:n,attributes:r,queueEvents:a=!0,analyticsResponsePayload:l})=>{wf=t?String(t):wf;const u={ts:Date.now(),attributes:r,action_type:n,user_id:D1(),analytics_response_payload:l};wf&&(u.logged_in_user_id=wf),u.analytics_response_payload&&(u.analytics_response_payload=`${u.analytics_response_payload}${nr.ENABLED?"&mode=verification":""}`),e&&(u.event_type=e),iy.push(u),a?WV():$1()},H1=JV,ay=function(t,e){return ay=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},ay(t,e)};function Gk(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ay(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Im=function(){return Im=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},Im.apply(this,arguments)};function Yk(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function Kk(t,e,n,r){var a=arguments.length,l=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(t,e,n,r);else for(var h=t.length-1;h>=0;h--)(u=t[h])&&(l=(a<3?u(l):a>3?u(e,n,l):u(e,n))||l);return a>3&&l&&Object.defineProperty(e,n,l),l}function Qk(t,e){return function(n,r){e(n,r,t)}}function Xk(t,e,n,r,a,l){function u(U){if(U!==void 0&&typeof U!="function")throw new TypeError("Function expected");return U}for(var h=r.kind,m=h==="getter"?"get":h==="setter"?"set":"value",p=!e&&t?r.static?t:t.prototype:null,y=e||(p?Object.getOwnPropertyDescriptor(p,r.name):{}),b,x=!1,k=n.length-1;k>=0;k--){var R={};for(var j in r)R[j]=j==="access"?{}:r[j];for(var j in r.access)R.access[j]=r.access[j];R.addInitializer=function(U){if(x)throw new TypeError("Cannot add initializers after decoration has completed");l.push(u(U||null))};var N=(0,n[k])(h==="accessor"?{get:y.get,set:y.set}:y[m],R);if(h==="accessor"){if(N===void 0)continue;if(N===null||typeof N!="object")throw new TypeError("Object expected");(b=u(N.get))&&(y.get=b),(b=u(N.set))&&(y.set=b),(b=u(N.init))&&a.unshift(b)}else(b=u(N))&&(h==="field"?a.unshift(b):y[m]=b)}p&&Object.defineProperty(p,r.name,y),x=!0}function Wk(t,e,n){for(var r=arguments.length>2,a=0;a<e.length;a++)n=r?e[a].call(t,n):e[a].call(t);return r?n:void 0}function Jk(t){return typeof t=="symbol"?t:"".concat(t)}function Zk(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function e6(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function t6(t,e,n,r){function a(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function h(y){try{p(r.next(y))}catch(b){u(b)}}function m(y){try{p(r.throw(y))}catch(b){u(b)}}function p(y){y.done?l(y.value):a(y.value).then(h,m)}p((r=r.apply(t,e||[])).next())})}function n6(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,a,l,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=h(0),u.throw=h(1),u.return=h(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(p){return function(y){return m([p,y])}}function m(p){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,p[0]&&(n=0)),n;)try{if(r=1,a&&(l=p[0]&2?a.return:p[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,p[1])).done)return l;switch(a=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,a=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){n.label=p[1];break}if(p[0]===6&&n.label<l[1]){n.label=l[1],l=p;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(p);break}l[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(y){p=[6,y],a=0}finally{r=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var wp=Object.create?(function(t,e,n,r){r===void 0&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]});function r6(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&wp(e,t,n)}function Dm(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function q1(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),a,l=[],u;try{for(;(e===void 0||e-- >0)&&!(a=r.next()).done;)l.push(a.value)}catch(h){u={error:h}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return l}function s6(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(q1(arguments[e]));return t}function i6(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var l=arguments[e],u=0,h=l.length;u<h;u++,a++)r[a]=l[u];return r}function a6(t,e,n){if(n||arguments.length===2)for(var r=0,a=e.length,l;r<a;r++)(l||!(r in e))&&(l||(l=Array.prototype.slice.call(e,0,r)),l[r]=e[r]);return t.concat(l||Array.prototype.slice.call(e))}function Sc(t){return this instanceof Sc?(this.v=t,this):new Sc(t)}function o6(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",u),a[Symbol.asyncIterator]=function(){return this},a;function u(k){return function(R){return Promise.resolve(R).then(k,b)}}function h(k,R){r[k]&&(a[k]=function(j){return new Promise(function(N,U){l.push([k,j,N,U])>1||m(k,j)})},R&&(a[k]=R(a[k])))}function m(k,R){try{p(r[k](R))}catch(j){x(l[0][3],j)}}function p(k){k.value instanceof Sc?Promise.resolve(k.value.v).then(y,b):x(l[0][2],k)}function y(k){m("next",k)}function b(k){m("throw",k)}function x(k,R){k(R),l.shift(),l.length&&m(l[0][0],l[0][1])}}function l6(t){var e,n;return e={},r("next"),r("throw",function(a){throw a}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(a,l){e[a]=t[a]?function(u){return(n=!n)?{value:Sc(t[a](u)),done:!1}:l?l(u):u}:l}}function c6(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Dm=="function"?Dm(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(l){n[l]=t[l]&&function(u){return new Promise(function(h,m){u=t[l](u),a(h,m,u.done,u.value)})}}function a(l,u,h,m){Promise.resolve(m).then(function(p){l({value:p,done:h})},u)}}function u6(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var ZV=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},oy=function(t){return oy=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},oy(t)};function d6(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=oy(t),r=0;r<n.length;r++)n[r]!=="default"&&wp(e,t,n[r]);return ZV(e,t),e}function h6(t){return t&&t.__esModule?t:{default:t}}function f6(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function m6(t,e,n,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(t,n):a?a.value=n:e.set(t,n),n}function p6(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function g6(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(l){return Promise.reject(l)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var ez=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function v6(t){function e(l){t.error=t.hasError?new ez(l,t.error,"An error was suppressed during disposal."):l,t.hasError=!0}var n,r=0;function a(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(a);if(n.dispose){var l=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(l).then(a,function(u){return e(u),a()})}else r|=1}catch(u){e(u)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return a()}function y6(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,a,l,u){return r?e?".jsx":".js":a&&(!l||!u)?n:a+l+"."+u.toLowerCase()+"js"}):t}const tz={__extends:Gk,__assign:Im,__rest:Yk,__decorate:Kk,__param:Qk,__esDecorate:Xk,__runInitializers:Wk,__propKey:Jk,__setFunctionName:Zk,__metadata:e6,__awaiter:t6,__generator:n6,__createBinding:wp,__exportStar:r6,__values:Dm,__read:q1,__spread:s6,__spreadArrays:i6,__spreadArray:a6,__await:Sc,__asyncGenerator:o6,__asyncDelegator:l6,__asyncValues:c6,__makeTemplateObject:u6,__importStar:d6,__importDefault:h6,__classPrivateFieldGet:f6,__classPrivateFieldSet:m6,__classPrivateFieldIn:p6,__addDisposableResource:g6,__disposeResources:v6,__rewriteRelativeImportExtension:y6},nz=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:g6,get __assign(){return Im},__asyncDelegator:l6,__asyncGenerator:o6,__asyncValues:c6,__await:Sc,__awaiter:t6,__classPrivateFieldGet:f6,__classPrivateFieldIn:p6,__classPrivateFieldSet:m6,__createBinding:wp,__decorate:Kk,__disposeResources:v6,__esDecorate:Xk,__exportStar:r6,__extends:Gk,__generator:n6,__importDefault:h6,__importStar:d6,__makeTemplateObject:u6,__metadata:e6,__param:Qk,__propKey:Jk,__read:q1,__rest:Yk,__rewriteRelativeImportExtension:y6,__runInitializers:Wk,__setFunctionName:Zk,__spread:s6,__spreadArray:a6,__spreadArrays:i6,__values:Dm,default:tz},Symbol.toStringTag,{value:"Module"})),rz=vN(nz);var Sf={},AS;function sz(){if(AS)return Sf;AS=1,Object.defineProperty(Sf,"__esModule",{value:!0});var t=Ya();function e(n,r){r===void 0&&(r=0);var a=t.useRef(!1),l=t.useRef(),u=t.useRef(n),h=t.useCallback(function(){return a.current},[]),m=t.useCallback(function(){a.current=!1,l.current&&clearTimeout(l.current),l.current=setTimeout(function(){a.current=!0,u.current()},r)},[r]),p=t.useCallback(function(){a.current=null,l.current&&clearTimeout(l.current)},[]);return t.useEffect(function(){u.current=n},[n]),t.useEffect(function(){return m(),p},[r]),[h,p,m]}return Sf.default=e,Sf}var iz=sz();const az=bd(iz);var Ef={},Cf={},Fr={},RS;function oz(){if(RS)return Fr;RS=1,Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.isNavigator=Fr.isBrowser=Fr.off=Fr.on=Fr.noop=void 0;var t=function(){};Fr.noop=t;function e(r){for(var a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];r&&r.addEventListener&&r.addEventListener.apply(r,a)}Fr.on=e;function n(r){for(var a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];r&&r.removeEventListener&&r.removeEventListener.apply(r,a)}return Fr.off=n,Fr.isBrowser=typeof window<"u",Fr.isNavigator=typeof navigator<"u",Fr}var jS;function lz(){if(jS)return Cf;jS=1,Object.defineProperty(Cf,"__esModule",{value:!0});var t=Ya(),e=oz(),n=e.isBrowser?t.useLayoutEffect:t.useEffect;return Cf.default=n,Cf}var IS;function cz(){if(IS)return Ef;IS=1,Object.defineProperty(Ef,"__esModule",{value:!0});var t=rz,e=Ya(),n=t.__importDefault(lz()),r=function(a,l){a===void 0&&(a=1e12),l===void 0&&(l=0);var u=e.useState(0),h=u[0],m=u[1];return n.default(function(){var p,y,b,x=function(){var N=Math.min(1,(Date.now()-b)/a);m(N),k()},k=function(){p=requestAnimationFrame(x)},R=function(){y=setTimeout(function(){cancelAnimationFrame(p),m(1)},a),b=Date.now(),k()},j=setTimeout(R,l);return function(){clearTimeout(y),clearTimeout(j),cancelAnimationFrame(p)}},[a,l]),h};return Ef.default=r,Ef}var uz=cz();const dz=bd(uz);var hz=Object.defineProperty,fz=Object.defineProperties,mz=Object.getOwnPropertyDescriptors,DS=Object.getOwnPropertySymbols,pz=Object.prototype.hasOwnProperty,gz=Object.prototype.propertyIsEnumerable,MS=(t,e,n)=>e in t?hz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bi=(t,e)=>{for(var n in e||(e={}))pz.call(e,n)&&MS(t,n,e[n]);if(DS)for(var n of DS(e))gz.call(e,n)&&MS(t,n,e[n]);return t},G1=(t,e)=>fz(t,mz(e)),Y1=(t,e,n)=>new Promise((r,a)=>{var l=m=>{try{h(n.next(m))}catch(p){a(p)}},u=m=>{try{h(n.throw(m))}catch(p){a(p)}},h=m=>m.done?r(m.value):Promise.resolve(m.value).then(l,u);h((n=n.apply(t,e)).next())}),vz=t=>{var e,n;if(!t)return"";const r=(n=(e=t?.split("."))==null?void 0:e.pop())==null?void 0:n.toLowerCase();return t.replace(`.${r}`,`/80h.${r}`)},yz=et.img`
    object-fit: cover;
    width: 32px;
    height: 32px;
    margin-right: 8px;
`,bz=({user:t,className:e=""})=>{const n=T.useRef(Math.floor(Math.random()*5)+1),r=t.avatar_url?vz(t.avatar_url):`https://media.giphy.com/avatars/default${n.current}.gif`;return ye.createElement(yz,{src:r,className:e})},Sp=bz,vd=({className:t="",size:e=17,fill:n="#15CDFF"})=>ye.createElement("svg",{className:[vd.className,t].join(" "),height:e,width:"19px",viewBox:"0 0 19 17"},ye.createElement("path",{className:vd.checkMarkClassName,d:"M9.32727273,9.44126709 L9.32727273,3.03016561 L6.55027155,3.03016561 L6.55027155,10.8150746 L6.55027155,12.188882 L12.1042739,12.188882 L12.1042739,9.44126709 L9.32727273,9.44126709 Z",fill:sy,transform:"translate(9.327273, 7.609524) scale(-1, 1) rotate(-45.000000) translate(-9.327273, -7.609524) "}),ye.createElement("g",{transform:"translate(-532.000000, -466.000000)",fill:n},ye.createElement("g",{transform:"translate(141.000000, 235.000000)"},ye.createElement("g",{transform:"translate(264.000000, 0.000000)"},ye.createElement("g",{transform:"translate(10.000000, 224.000000)"},ye.createElement("g",{transform:"translate(114.000000, 2.500000)"},ye.createElement("path",{d:"M15.112432,4.80769231 L16.8814194,6.87556817 L19.4157673,7.90116318 L19.6184416,10.6028916 L21.0594951,12.9065042 L19.6184416,15.2101168 L19.4157673,17.9118452 L16.8814194,18.9374402 L15.112432,21.0053161 L12.4528245,20.3611511 L9.79321699,21.0053161 L8.02422954,18.9374402 L5.48988167,17.9118452 L5.28720734,15.2101168 L3.84615385,12.9065042 L5.28720734,10.6028916 L5.48988167,7.90116318 L8.02422954,6.87556817 L9.79321699,4.80769231 L12.4528245,5.4518573 L15.112432,4.80769231 Z M17.8163503,10.8991009 L15.9282384,9.01098901 L11.5681538,13.3696923 L9.68115218,11.4818515 L7.81302031,13.3499833 L9.7011322,15.2380952 L11.5892441,17.1262071 L17.8163503,10.8991009 Z"})))))));vd.className="giphy-verified-badge";vd.checkMarkClassName="giphy-verified-checkmark";var ly=vd,xz=et.div`
    color: white;
    font-size: 16px;
    font-weight: 700;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    -webkit-font-smoothing: antialiased;
`,_z=et(ly)`
    margin-left: 4px;
    flex-shrink: 0;
`,wz=et.div`
    display: flex;
    align-items: center;
    min-width: 0;
`,Sz=({user:t})=>{const{display_name:e,username:n}=t;return ye.createElement(wz,null,ye.createElement(xz,null,e||`@${n}`),t.is_verified?ye.createElement(_z,{size:14}):null)},b6=Sz,Ez=et.div`
    display: flex;
    align-items: center;
    font-family: interface, helvetica, arial;
`,Cz=et(Sp)`
    flex-shrink: 0;
`,K1=({gif:t,className:e,onClick:n})=>{const{user:r}=t;return!r?.username&&!r?.display_name?null:ye.createElement(Ez,{className:[K1.className,e].join(" "),onClick:a=>{if(a.preventDefault(),a.stopPropagation(),n)n(t);else{const l=r.profile_url;l&&window.open(l,"_blank")}}},ye.createElement(Cz,{user:r}),ye.createElement(b6,{user:t.user}))};K1.className="giphy-attribution";var Tz=K1,kz=et.div`
    background: linear-gradient(rgba(0, 0, 0, 0), rgba(18, 18, 18, 0.6));
    cursor: default;
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 75px;
    pointer-events: none;
`,Nz=et(Tz)`
    position: absolute;
    bottom: 10px;
    left: 10px;
    right: 10px;
`,Az=et.div`
    transition: opacity 150ms ease-in;
`,Rz=({gif:t,isHovered:e,onClick:n})=>{const r=T.useRef(e);return e&&(r.current=!0),t.user&&r.current?ye.createElement(Az,{style:{opacity:e?1:0}},ye.createElement(kz,null),ye.createElement(Nz,{gif:t,onClick:n})):null},jz=Rz,Iz=({children:t,className:e,onVisibleChange:n,config:r})=>{const a=T.useRef(null);return T.useEffect(()=>{let l;return a.current&&(l=new IntersectionObserver(([u])=>{n&&n(u.isIntersecting)},r),l.observe(a.current)),()=>l?.disconnect()},[n,a,r]),ye.createElement("div",{ref:a,className:e},t)},x6=Iz,_6=t=>(e,n,r,a={})=>{e.analytics_response_payload&&H1({analyticsResponsePayload:e.analytics_response_payload,userId:n,actionType:t,attributes:Bi({position:JSON.stringify(uL(r))},a)})},Dz=(t,e,n,r={})=>{t.analytics_response_payload&&H1({analyticsResponsePayload:t.analytics_response_payload,userId:e,actionType:"SEEN",attributes:Bi({position:JSON.stringify(n)},r)})},Mz=_6("CLICK"),Pz=_6("HOVER");function Oz(t){return t=t.replace("%%CACHEBUSTER%%",lk()),t=t.replace("%%TIMESTAMP%%",`${Date.now()}`),t=t.replace("%%APPBUNDLE%%","web"),typeof window<"u"&&(t=t.replace("%%APP_WINDOW_SIZE%%",`${window.innerWidth},${window.innerHeight}`),t=t.replace("%%DEVICE_LANGUAGE%%",`${navigator.language}`)),t}function Lz({src:t}){const e=T.useRef(Oz(t)),[n,r]=T.useState(!1);return T.useEffect(()=>{r(!0)},[]),n?ye.createElement("img",{src:e.current,width:0,height:0}):null}var Vz=Lz,cy=T.createContext({}),zz=({attributes:t,children:e})=>{const{attributes:n={}}=T.useContext(cy);return ye.createElement(cy.Provider,{value:{attributes:YV(n,t,"layout_type")}},e)},w6=zz,Uz=et.div`
    position: relative;
    display: block;
    picture {
        display: block;
        width: 100%;
        height: 100%;
    }
    img {
        display: block;
    }
    .${ly.className} {
        g {
            fill: white;
        }
    }
    .${ly.checkMarkClassName} {
        opacity: 0;
    }
`,PS=[U1,Fk,$k,Hk,qk],Bz=()=>PS[Math.round(Math.random()*(PS.length-1))],Fz=200,OS="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",$z=!!(typeof window<"u"&&window.document&&window.document.createElement),Fl=()=>{},Hz=({children:t})=>{const[e,n]=T.useState(!1);return T.useEffect(()=>{n(!0)},[]),e?ye.createElement(ye.Fragment,null,t):null},Da=({gif:t,gif:{bottle_data:e={}},width:n,percentWidth:r,percentHeight:a,height:l,onGifRightClick:u=Fl,className:h="",onGifClick:m=Fl,onGifKeyPress:p=Fl,onGifSeen:y=Fl,onGifVisible:b=Fl,user:x={},backgroundColor:k,overlay:R,hideAttribution:j=!1,noLink:N=!1,borderRadius:U=4,style:$,tabIndex:I,lazyLoad:O=!0})=>{var B;const[q,w]=T.useState(!1),[E,A]=T.useState(!1),[P,L]=T.useState(!$z||!O),[z,M]=T.useState(""),se=T.useRef(Bz()),le=T.useRef(null),Y=T.useRef(null),ee=T.useRef(),Z=T.useRef(),Ee=T.useRef(),Re=T.useRef(Fl),H=Object.keys(e).length>0,{attributes:W}=T.useContext(cy);let ie=R;!ie&&!j&&(ie=jz);const ve=Me=>{clearTimeout(Ee.current),Me.persist(),A(!0),Ee.current=window.setTimeout(()=>{Pz(t,x?.id,Me.target,W)},Fz)},Te=()=>{clearTimeout(Ee.current),A(!1)},De=Me=>{Mz(t,x?.id,Me.target,W),m(t,Me)},ae=Me=>{p(t,Me)};Re.current=Me=>{w(!0),nr.debug(`GIF ${t.id} seen. ${t.title}`),Dz(t,x?.id,Me.boundingClientRect,W),y?.(t,Me.boundingClientRect),Z.current&&Z.current.disconnect()};const Le=()=>{Z.current||(Z.current=new IntersectionObserver(([Me])=>{Me.isIntersecting&&Re.current(Me)},{threshold:[.99]})),!q&&le.current&&Z.current&&Z.current.observe(le.current)},Ie=Me=>{Le(),b(t,Me),M(Da.imgLoadedClassName)};T.useEffect(()=>{var Me,F;(Me=Y.current)!=null&&Me.complete&&(Le(),b(t)),(F=Z.current)==null||F.disconnect(),w(!1)},[t.id]),T.useEffect(()=>(ee.current=new IntersectionObserver(([Me])=>{const{isIntersecting:F}=Me;L(F),!F&&Z.current&&Z.current.disconnect()}),ee.current.observe(le.current),()=>{ee.current&&ee.current.disconnect(),Z.current&&Z.current.disconnect(),Ee.current&&clearTimeout(Ee.current)}),[]);const de=mp(t,n);let pe=l;!$?.aspectRatio&&!l&&(pe=de);const ge=hL(t.images,n,l||de);if(!ge)return t.images?console.error(`no rendition for ${t.id}, rendition names: ${Object.keys(t.images).join(", ")}`):console.error(`no rendition for ${t.id} - no images`),null;const Se=t.images[ge.renditionName],_e=z===Da.imgLoadedClassName&&!t.is_sticker?"unset":k||(t.is_sticker?"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4AQMAAACSSKldAAAABlBMVEUhIiIWFhYoSqvJAAAAGElEQVQY02MAAv7///8PWxqIPwDZw5UGABtgwz2xhFKxAAAAAElFTkSuQmCC') 0 0":se.current),Ue=U?"hidden":"unset";return ye.createElement(Uz,{as:N?"div":"a",href:N?void 0:t.url,"data-giphy-id":t.id,"data-giphy-is-sticker":t.is_sticker,style:Bi({width:r||n,height:a||pe,overflow:Ue,borderRadius:U},$),className:[Da.className,h].join(" "),onMouseOver:ve,onMouseLeave:Te,onClick:De,onContextMenu:Me=>u(t,Me),onKeyPress:ae,tabIndex:I,ref:le},ye.createElement("picture",null,ye.createElement("source",{type:"image/webp",srcSet:P?Se.webp:OS,suppressHydrationWarning:!0}),ye.createElement("img",{ref:Y,suppressHydrationWarning:!0,className:[Da.imgClassName,z].join(" "),src:P?Se.url:OS,style:{background:_e},width:"100%",height:"100%",alt:mL(t),onLoad:P?Ie:()=>{}})),H&&((B=e?.tags)==null?void 0:B.map((Me,F)=>ye.createElement(Vz,{src:Me,key:F}))),ie&&ye.createElement(Hz,null,P&&ye.createElement(ie,{gif:t,isHovered:E,width:n,height:pe})))};Da.className="giphy-gif";Da.imgClassName="giphy-gif-img";Da.imgLoadedClassName="giphy-img-loaded";var yd=Da,qz=et.div`
    -webkit-overflow-scrolling: touch;
    overflow-x: auto;
    overflow-y: hidden;
    white-space: nowrap;
    position: relative;
`,Gz=et(yd)`
    position: relative;
    display: inline-block;
    list-style: none;
    margin-left: ${t=>t.$ml}px;
    /* make sure gifs are fully visible with a scrollbar */
    margin-bottom: 1px;

    &:first-of-type {
        margin-left: 0;
    }
    .${yd.imgClassName} {
        position: absolute;
        top: 0;
        left: 0;
    }
`,Yz=et(x6)`
    display: inline-block;
`,Kz=et.div`
    width: 30px;
    display: inline-block;
    opacity: ${t=>t.$isFirstLoad?0:1};
    height: ${t=>t.$height}px;
`,Qz=Object.freeze({gutter:6,user:{},initialGifs:[]}),Xz=Object.freeze({isFetching:!1,gifs:[],isLoaderVisible:!1,isDoneFetching:!1}),S6=class E6 extends T.PureComponent{constructor(){super(...arguments),this.state=G1(Bi({},Xz),{gifs:this.props.initialGifs||[]}),this.unmounted=!1,this.paginator=fk(this.props.fetchGifs,this.state.gifs),this.onLoaderVisible=e=>{this.unmounted||this.setState({isLoaderVisible:e},this.onFetch)},this.onFetch=B1(100,()=>Y1(this,null,function*(){if(this.unmounted)return;const{isFetching:e,isLoaderVisible:n,gifs:r}=this.state;if(!e&&n){this.setState({isFetching:!0});let a;try{a=yield this.paginator()}catch{this.setState({isFetching:!1})}if(a)if(!!!a?.skipCountCheck&&r.length===a.length)this.setState({isDoneFetching:!0});else{this.setState({gifs:a,isFetching:!1});const{onGifsFetched:u}=this.props;u&&u(a),this.onFetch()}}}))}componentDidMount(){this.unmounted=!1,this.onFetch()}componentWillUnmount(){this.unmounted=!0}render(){const{onGifVisible:e,onGifRightClick:n,gifHeight:r,gifWidth:a,gutter:l,className:u=E6.className,onGifSeen:h,onGifClick:m,onGifKeyPress:p,user:y,overlay:b,hideAttribution:x,noLink:k,noResultsMessage:R,backgroundColor:j,borderRadius:N,tabIndex:U=0,loaderConfig:$}=this.props,{gifs:I,isDoneFetching:O}=this.state,B=!O,q=I.length===0;return ye.createElement(w6,{attributes:{layout_type:"CAROUSEL"}},ye.createElement(qz,{className:u},I.map(w=>ye.createElement(Gz,{gif:w,key:w.id,tabIndex:U,width:a||fL(w,r),height:r,onGifClick:m,onGifKeyPress:p,onGifSeen:h,onGifVisible:e,onGifRightClick:n,user:y,$ml:l,overlay:b,hideAttribution:x,noLink:k,borderRadius:N,backgroundColor:j})),!B&&I.length===0&&R,B&&ye.createElement(Yz,{onVisibleChange:this.onLoaderVisible,config:$},ye.createElement(Kz,{$isFirstLoad:q,$height:r}))))}};S6.className="giphy-carousel";S6.defaultProps=Qz;var Wz=et.div`
    color: ${Bk};
    display: flex;
    justify-content: center;
    margin: 30px 0;
    font-family: interface, Helvetica Neue, helvetica, sans-serif;
    font-size: 16px;
    font-weight: 600;
    a {
        color: ${U1};
        cursor: pointer;
        &:hover {
            color: white;
        }
    }
`,Jz=({onClick:t})=>ye.createElement(Wz,null,"Error loading GIFs.",ye.createElement("a",{onClick:t},"Try again?")),Zz=Jz,eU=.75;et.div`
    align-items: center;
    background-color: ${({$backgroundColor:t})=>t};
    border-radius: 16px;
    display: flex;
    max-width: fit-content;
    overflow: hidden;
    padding: 4px 5px 5px 6px;
`;et.div`
    overflow-x: auto;
    overflow-y: hidden;
    position: relative;
    -webkit-overflow-scrolling: touch;
`;et.div`
    display: inline-flex;
    justify-content: space-between;
    overflow: hidden;
    white-space: nowrap;
    width: ${({$width:t})=>`${t}px`};
`;et.div`
    background-color: ${({$color:t})=>t};
    box-sizing: border-box;
    height: ${({$gifHeight:t})=>`${Math.round(t*eU)}px`};
    margin: ${({$gutter:t})=>`0 ${t}px`};
    width: 2px;
`;et(yd)`
    display: inline-block;
    flex-shrink: 0;
    list-style: none;
    /* make sure gifs are fully visible with a scrollbar */
    margin-bottom: 1px;
    position: relative;

    .${yd.imgClassName} {
        position: absolute;
        top: 0;
        left: 0;
    }
`;var tU=zd`
     to {
    transform: scale(1.75) translateY(-20px);
  }
`,C6=52,nU=et.div`
    display: flex;
    align-items: center;
    height: ${C6}px;
    margin: 0 auto;
    text-align: center;
    justify-content: center;
    animation: pulse 0.8s ease-in-out 0s infinite alternate backwards;
`,Ou=et.div`
    display: inline-block;
    height: 10px;
    width: 10px;
    margin: ${C6}px 10px 10px 10px;
    position: relative;
    box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.3);
    animation: ${tU} cubic-bezier(0.455, 0.03, 0.515, 0.955) 0.75s infinite alternate;
    background: ${t=>t.$color};
    animation-delay: ${t=>t.$delay};
`,rU=({className:t=""})=>ye.createElement(nU,{className:t},ye.createElement(Ou,{$color:Fk,$delay:"0"}),ye.createElement(Ou,{$color:U1,$delay:".1s"}),ye.createElement(Ou,{$color:$k,$delay:".2s"}),ye.createElement(Ou,{$color:Hk,$delay:".3s"}),ye.createElement(Ou,{$color:qk,$delay:".4s"})),sU=rU,iU=et.div`
    opacity: ${t=>t.$isFirstLoad?0:1};
`;function LS(t,e,n=[]){return Array.apply(null,Array(t)).map((r,a)=>n[a]||e)}function aU(t,e,n,r){const a=LS(t,[]),l=LS(t,0,e);return n.forEach(u=>{const h=l.indexOf(Math.min(...l));a[h]=[...a[h],u],l[h]+=mp(u,r)}),a}var oU=Object.freeze({gutter:6,user:{},initialGifs:[]}),lU=Object.freeze({isFetching:!1,isError:!1,gifs:[],isLoaderVisible:!1,isDoneFetching:!1}),Ic=class Xf extends T.PureComponent{constructor(){super(...arguments),this.state=G1(Bi({},lU),{gifs:this.props.initialGifs||[]}),this.unmounted=!1,this.paginator=fk(this.props.fetchGifs,this.state.gifs),this.onLoaderVisible=e=>{this.unmounted||this.setState({isLoaderVisible:e},this.onFetch)},this.onFetch=B1(Xf.fetchDebounce,()=>Y1(this,null,function*(){if(this.unmounted)return;const{isFetching:e,isLoaderVisible:n}=this.state,{externalGifs:r}=this.props,a=(r||this.state.gifs).length;if(!e&&n){this.setState({isFetching:!0,isError:!1});let l;try{if(l=yield this.paginator(r),this.unmounted)return}catch(u){if(this.unmounted)return;this.setState({isFetching:!1,isError:!0});const{onGifsFetchError:h}=this.props;h&&h(u)}if(l)if(!!!l?.skipCountCheck&&a===l.length)this.setState({isDoneFetching:!0});else{this.setState({gifs:l,isFetching:!1});const{onGifsFetched:h}=this.props;h&&h(l),this.onFetch()}}}))}componentDidMount(){this.unmounted=!1,this.onFetch()}componentWillUnmount(){this.unmounted=!0}render(){const{onGifVisible:e,onGifRightClick:n,className:r=Xf.className,onGifSeen:a,onGifClick:l,onGifKeyPress:u,user:h,overlay:m,hideAttribution:p,noLink:y,borderRadius:b,noResultsMessage:x,columns:k,width:R,gutter:j,percentWidth:N,columnOffsets:U,backgroundColor:$,loaderConfig:I,tabIndex:O=0,layoutType:B="GRID",loader:q=sU,eagerIds:w}=this.props,{gifs:E,isError:A,isDoneFetching:P}=this.state,L=!P,z=E.length===0,M=j*(k-1),se=(R-M)/k,le=aU(k,U,E,se);return ye.createElement(w6,{attributes:{layout_type:B}},ye.createElement("div",{className:r},ye.createElement("div",{style:{width:N||R,display:"flex",gap:j}},le.map((Y=[],ee)=>ye.createElement("div",{key:ee,style:{display:"flex",flexDirection:"column",gap:j,width:N?"100%":se,marginTop:U?.[ee]}},Y.map(Z=>ye.createElement(yd,{style:{aspectRatio:Z.images.original.width/Z.images.original.height},gif:Z,tabIndex:O,key:Z.id,width:se,percentWidth:N?"100%":void 0,onGifClick:l,onGifKeyPress:u,onGifSeen:a,onGifVisible:e,onGifRightClick:n,user:h,overlay:m,backgroundColor:$,hideAttribution:p,noLink:y,borderRadius:b,lazyLoad:!w?.includes(Z.id)}))))),!L&&E.length===0&&x,A?ye.createElement(Zz,{onClick:this.onFetch}):L&&ye.createElement(x6,{onVisibleChange:this.onLoaderVisible,config:I},ye.createElement(iU,{$isFirstLoad:z},ye.createElement(q,{className:Xf.loaderClassName})))))}};Ic.className="giphy-grid";Ic.loaderClassName="loader";Ic.fetchDebounce=250;Ic.defaultProps=oU;Ic.getDerivedStateFromProps=({externalGifs:t},e)=>t&&t!==e.gifs?{gifs:t}:null;var cU=Ic,T6=cU,Dn={searchbarHeight:"--searchbar-height",bgColor:"--searchbar-bg-color",bgColor2:"--searchbar-bg-color-2",fgColor:"--searchbar-fg-color",cancelButtonDisplay:"--searchbar-cancel-button-display"};et.div`
    ${Dn.searchbarHeight}: ${t=>t.$searchbarHeight||42}px;
    @media (${t=>t.$mobileMediaQuery}) {
        ${Dn.searchbarHeight}: ${t=>t.$mobileSearchbarHeight||35}px;
    }
    ${Dn.bgColor}: ${Qf};
    ${Dn.bgColor2}: ${Qf};
    ${Dn.fgColor}: ${sy};
    ${t=>t.$darkMode&&_p`
            ${Dn.fgColor}: ${Qf};
            ${Dn.bgColor}: ${sy};
            ${Dn.bgColor2}: ${zV};
        `}
    ${Dn.cancelButtonDisplay}: ${t=>t.$hideCancelButton?"none":"block"};
`;T.createContext({});T.createContext({});et.svg`
    position: relative;
    right: 10px;
    margin-left: 5px;
    cursor: pointer;
    display: var(${Dn.cancelButtonDisplay});
`;var k6=6,Q1=`calc(var(${Dn.searchbarHeight}) - ${k6*2}px)`,uU=zd`
to {
    width: ${Q1};
}
`;et(Sp)`
    height: ${Q1};
    margin: 0;
    width: 0;
    animation: ${uU} 100ms ease-in-out forwards;
`;et.div`
    background: var(${Dn.bgColor2});
    display: flex;
    align-items: center;
    padding-left: ${k6}px;
`;et.div`
    background: ${UV};
    display: flex;
    padding: 0 4px;
    color: ${VV};
    font-family: interface, Helvetica Neue, helvetica, sans-serif;
    font-weight: 600;
    font-size: 12px;
    align-items: center;
    height: ${Q1};
    @media (max-width: 480px) {
        display: none;
    }
`;var dU=({className:t=""})=>ye.createElement("svg",{viewBox:"0 0 30 30",version:"1.1",className:t},ye.createElement("defs",null,ye.createElement("path",{d:"M11.5482521,20.4090671 L4.24727698,28.2009189 C3.68084207,28.8054377 2.73159653,28.8363108 2.12707771,28.2698759 C1.5225589,27.703441 1.4916858,26.7541954 2.0581207,26.1496766 L9.40599838,18.3077689 C7.95982241,16.4371424 7.0978836,14.0789715 7.0978836,11.5181818 C7.0978836,5.44914339 11.9392549,0.518181818 17.9252787,0.518181818 C23.9113026,0.518181818 28.7526738,5.44914339 28.7526738,11.5181818 C28.7526738,17.5872202 23.9113026,22.5181818 17.9252787,22.5181818 C15.539851,22.5181818 13.3361963,21.7351359 11.5482521,20.4090671 Z M17.9252787,19.5181818 C22.242011,19.5181818 25.7526738,15.9425536 25.7526738,11.5181818 C25.7526738,7.09381 22.242011,3.51818182 17.9252787,3.51818182 C13.6085464,3.51818182 10.0978836,7.09381 10.0978836,11.5181818 C10.0978836,15.9425536 13.6085464,19.5181818 17.9252787,19.5181818 Z",id:"giphy-search-icon-path-1"})),ye.createElement("g",{id:"search",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},ye.createElement("g",{id:"icons/search"},ye.createElement("mask",{id:"giphy-search-icon-mask-2",fill:"white"},ye.createElement("use",{xlinkHref:"#giphy-search-icon-path-1"})),ye.createElement("use",{id:"Mask",fill:"#FFFFFF",fillRule:"nonzero",xlinkHref:"#giphy-search-icon-path-1"}),ye.createElement("g",{mask:"url(#giphy-search-icon-mask-2)"},ye.createElement("g",{transform:"translate(0.250000, 0.250000)"},ye.createElement("g",null)))))),hU=dU,fU="2s",rv="#E646B6",VS="#FF6666",N6="cubic-bezier(0.920, 0.240, 0.185, 0.730)",mU=zd`
    0% {
      transform: rotate(34deg) translate(-10px, 80px);
    };
    
    100% {
      transform: rotate(34deg) translate(-10px, -20px);
    }
`,pU=zd`
    0% { 
      transform: translate(0px, 0px);
      opacity: 0;
    }
    50% {
      opacity: 1;
    }
    100% {
      transform: translate(10px, -17px);
      opacity: 0;
    }
`,gU=zd`
    0% {
      opacity: 0;
      transform: translateX(-400%);
    }
    50% {
      opacity: 1;
    }
    100% {
      opacity: 0;
      transform: translateX(0);
    }
`;et.div`
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    cursor: pointer;
    @media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {
        display: none;
    }
    height: var(${Dn.searchbarHeight});
    width: var(${Dn.searchbarHeight});
`;et.div`
    position: absolute;
    height: 100%;
    width: 100%;
    background: linear-gradient(45deg, ${rv} 0%, ${VS} 100%);
    border-radius: 0 4px 4px 0;
    overflow: hidden;
    &:before {
        animation: ${gU} ${fU} linear 0s infinite;
        background-image: linear-gradient(45deg, ${rv} 0%, ${VS} 50%, ${rv} 100%);
        background-size: 400%;
        background-position: 0% 100%;
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        width: 400%;
    }
`;et.div`
    width: 100%;
    height: 100%;
    position: absolute;
    overflow: hidden;
    &::after {
        content: '+';
        color: white;
        font-family: 'SS Standard';
        font-size: 8px;
        position: absolute;
        top: 65%;
        left: 66%;
        animation: ${pU} 1s ${N6} 0s 1 forwards;
    }
`;et.div`
    position: absolute;
    width: 200%;
    height: 20px;
    background: rgba(255, 255, 255, 0.5);
    transform: rotate(34deg) translate(-10px, -20px);
    animation: ${mU} 1s ${N6} 0s 1;
    filter: blur(1px);
`;et(hU)`
    z-index: 1;
    display: flex;
    width: 50%;
    height: 50%;
`;et.div`
    display: flex;
    background: white;
    align-items: center;
    border-radius: 4px;
    height: var(${Dn.searchbarHeight});
    background: var(${Dn.bgColor2});
`;et.input`
    background: inherit;
    box-sizing: border-box;
    border: 0;
    appearance: none;
    font-weight: normal;
    font-family: interface, Helvetica Neue, helvetica, sans-serif;
    outline: 0;
    font-size: 15px;
    padding: 0 10px;
    border-radius: 0;
    text-overflow: ellipsis;
    color: var(${Dn.fgColor});
    &::placeholder {
        color: ${Bk};
    }
    min-width: 150px;
    flex: 1;
    ${t=>t.$isUsernameSearch&&_p`
            color: ${BV};
        `}
`;var vU=({size:t=18,className:e})=>ye.createElement("svg",{width:t,height:t,viewBox:"0 0 18 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:e},ye.createElement("g",{id:"trending",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},ye.createElement("g",null,ye.createElement("rect",{id:"Rectangle",stroke:"#979797",fill:"#D8D8D8",opacity:"0",x:"0.5",y:"0.5",width:"17",height:"17"}),ye.createElement("path",{d:"M12.6093329,3.12057664 L15.156896,3.12057664 L9.64199318,9.04253019 L6.88133868,6.8175119 C6.7544587,6.67603813 6.56616874,6.60087259 6.38404017,6.61897279 C6.2490402,6.63288422 6.11891631,6.69661171 6.02063992,6.79697337 C2.21226835,10.5943119 0.308082561,12.4929812 0.308082561,12.4929812 C0.308082561,12.4929812 0.527106106,12.8074292 0.710953088,13.0215425 C0.833517743,13.1642848 0.975497751,13.3098497 1.13689311,13.4582373 L6.47329888,8.13191205 L9.16381134,10.2953038 C9.40800276,10.5710787 9.68933701,10.7021044 10.019278,10.4570223 L16.0239805,4.04474473 C16.0239805,5.87956383 16.0239805,6.79697337 16.0239805,6.79697337 C16.0239805,6.79697337 16.4320205,6.79697337 17.2481004,6.79697337 L17.2481004,1.80604505 C14.1555887,1.80604505 12.6093329,1.80604505 12.6093329,1.80604505 C12.6093329,1.80604505 12.6093329,2.24422225 12.6093329,3.12057664 Z",id:"Shape",stroke:"#00CCFF",strokeWidth:"0.4",fill:"#00CCFF",fillRule:"nonzero",transform:"translate(8.778091, 7.632141) rotate(-2.000000) translate(-8.778091, -7.632141) "})))),yU=vU,A6=9;et.div`
    background: ${Uk};
    display: flex;
    padding-right: 4px;
    align-items: center;
    margin-right: ${A6}px;
    cursor: pointer;
`;et.div`
    background: ${Uk};
    display: flex;
    padding: 14px;
    align-items: center;
    margin-right: ${A6}px;
    white-space: nowrap;
    cursor: pointer;
    font-style: italic;
    border-radius: 20px;
`;et(Sp)`
    height: var(${Dn.searchbarHeight});
    width: var(${Dn.searchbarHeight});
`;et(yU)`
    margin-right: 2px;
`;et.div`
    display: flex;
    color: white;
    flex-direction: row;
    font-family: 'interface';
    font-weight: 600;
    font-size: 14px;
    -webkit-overflow-scrolling: touch;
    overflow-x: auto;
    overflow-y: hidden;
    padding-bottom: 10px;
    height: var(${Dn.searchbarHeight});
`;var bU=({onClick:t})=>ye.createElement("svg",{width:"66px",height:"13px",viewBox:"0 0 66 13",onClick:t},ye.createElement("g",{stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},ye.createElement("g",{transform:"translate(-1060.000000, -462.000000)",fill:"#FFFFFF",fillRule:"nonzero"},ye.createElement("g",{transform:"translate(931.000000, 286.375671)"},ye.createElement("g",{transform:"translate(86.000000, 136.124329)"},ye.createElement("path",{d:"M47.968,49.1962322 C49.588,49.1962322 51.052,48.6202322 51.58,47.5522322 L51.58,43.8202322 L47.476,43.8202322 L47.476,45.6802322 L49.6,45.6802322 L49.6,46.7602322 C49.12,47.1082322 48.424,47.1922322 47.98,47.1922322 C46.288,47.1922322 45.724,45.8602322 45.724,44.7802322 C45.724,43.1362322 46.612,42.3202322 47.98,42.3202322 C48.544,42.3202322 49.288,42.4762322 49.9,43.0522322 L51.28,41.6842322 C50.176,40.5682322 49.144,40.3282322 47.98,40.3282322 C44.824,40.3282322 43.384,42.5842322 43.384,44.7802322 C43.384,46.9762322 44.644,49.1962322 47.968,49.1962322 Z M54.928,48.9682322 L54.928,40.5682322 L52.564,40.5682322 L52.564,48.9682322 L54.928,48.9682322 Z M58.648,48.9682322 L58.648,46.7002322 L60.352,46.7002322 C62.596,46.6762322 63.724,45.3442322 63.724,43.6282322 C63.724,41.9842322 62.608,40.5682322 60.352,40.5682322 L56.272,40.5682322 L56.272,48.9682322 L58.648,48.9682322 Z M60.352,44.6962322 L58.648,44.6962322 L58.648,42.6082322 L60.352,42.6082322 C61,42.6082322 61.348,43.1122322 61.348,43.6642322 C61.348,44.2162322 61.012,44.6962322 60.352,44.6962322 Z M66.796,48.9802322 L66.796,45.8002322 L69.82,45.8002322 L69.82,48.9802322 L72.172,48.9802322 L72.172,40.5802322 L69.82,40.5802322 L69.82,43.7722322 L66.796,43.7722322 L66.796,40.5802322 L64.42,40.5802322 L64.42,48.9802322 L66.796,48.9802322 Z M78.16,48.9682322 L78.16,45.6202322 L81.496,40.6762322 L81.496,40.5682322 L78.82,40.5682322 L77.008,43.4482322 L75.268,40.5682322 L72.592,40.5682322 L72.592,40.6642322 L75.784,45.6202322 L75.784,48.9682322 L78.16,48.9682322 Z M87.796,49.1362322 C88.972,49.1362322 90.088,48.7402322 90.952,47.8882322 L90.028,46.9642322 C89.44,47.5522322 88.576,47.8762322 87.796,47.8762322 C85.624,47.8762322 84.712,46.3522322 84.7,44.8162322 C84.688,43.2682322 85.66,41.6962322 87.796,41.6962322 C88.576,41.6962322 89.368,41.9722322 89.968,42.5602322 L90.868,41.6962322 C90.016,40.8442322 88.924,40.4242322 87.796,40.4242322 C84.796,40.4242322 83.356,42.6202322 83.3679256,44.8282322 C83.38,47.0362322 84.748,49.1362322 87.796,49.1362322 Z M93.028,48.9682322 L93.028,40.5802322 L91.792,40.5802322 L91.792,48.9682322 L93.028,48.9682322 Z M94.252,41.3122322 C94.252,42.3322322 95.788,42.3322322 95.788,41.3122322 C95.788,40.3042322 94.252,40.3042322 94.252,41.3122322 Z M95.632,48.9682322 L95.632,43.0282322 L94.396,43.0282322 L94.396,48.9682322 L95.632,48.9682322 Z M98.188,51.7162322 L98.188,48.1042322 C98.632,48.8362322 99.556,49.1002322 100.276,49.1002322 C102.112,49.1002322 103.264,47.8042322 103.264,46.0162322 C103.264,44.2282322 102.04,42.9442322 100.276,42.9322322 C99.484,42.9322322 98.644,43.2922322 98.188,44.0122322 L98.116,43.0522322 L96.952,43.0522322 L96.952,51.7162322 L98.188,51.7162322 Z M100.156,47.9002322 C99.076,47.9002322 98.296,47.0722322 98.296,46.0162322 C98.296,44.9602322 99.016,44.1322322 100.156,44.1322322 C101.284,44.1322322 102.028,44.9002322 102.028,46.0162322 C102.028,47.1202322 101.236,47.9002322 100.156,47.9002322 Z M106.456,49.1482322 C107.992,49.1482322 108.964,48.3802322 108.976,47.2762322 C108.988,45.7522322 107.56,45.5122322 106.468,45.4162322 C105.712,45.3442322 105.196,45.1522322 105.184,44.6602322 C105.184,44.1922322 105.688,43.9402322 106.444,43.9522322 C107.032,43.9522322 107.536,44.0722322 108.004,44.5042322 L108.7,43.6882322 C108.04,43.1002322 107.332,42.8962322 106.42,42.8962322 C105.316,42.8962322 103.96,43.3882322 103.96,44.6962322 C103.972,46.0042322 105.256,46.3642322 106.372,46.4722322 C107.248,46.5562322 107.752,46.7602322 107.74,47.2882322 C107.728,47.8402322 107.068,48.0562322 106.48,48.0562322 C105.784,48.0442322 104.956,47.7922322 104.404,47.1802322 L103.756,48.0562322 C104.536,48.9322322 105.496,49.1482322 106.456,49.1482322 Z",id:"GIPHYClips"})))))),xU=bU,_U=et.div`
    display: flex;
    align-items: center;
    font-family: interface, helvetica, arial;
    cursor: pointer;
`,wU=et(Sp)`
    flex-shrink: 0;
`,SU=et.div`
    display: flex;
    flex-direction: column;
`,X1=({gif:t,className:e,onClick:n})=>{const{user:r}=t;return!r?.username&&!r?.display_name?null:ye.createElement(_U,{className:[X1.className,e].join(" "),onClick:a=>{if(a.preventDefault(),a.stopPropagation(),n)n(t);else{const l=r.profile_url;l&&window.open(l,"_blank")}}},ye.createElement(wU,{user:r}),ye.createElement(SU,null,ye.createElement(xU,{onClick:a=>{a.preventDefault(),a.stopPropagation(),n?n(t):t.url&&window.open(t.url,"_blank")}}),ye.createElement(b6,{user:r})))};X1.className="giphy-attribution";var EU=X1,R6=25,CU=({size:t=R6,onClick:e=()=>{}})=>ye.createElement("svg",{width:t,height:t,viewBox:"0 0 26 23",onClick:e},ye.createElement("g",{stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},ye.createElement("g",{transform:"translate(1.000000, 0.000000)",fill:"#FFF",fillRule:"nonzero"},ye.createElement("path",{d:"M11.9625091,0.572584405 L11.9625091,22.2272644 C11.9625091,22.4856644 11.8466091,22.6635044 11.6151891,22.7611644 C11.3480491,22.8413444 11.1390491,22.7968844 10.9878091,22.6277844 L4.8732291,15.9143244 L0.573909096,15.9143244 C0.413549096,15.9143244 0.277509096,15.8588444 0.166549096,15.7475044 C0.0573082348,15.6406091 -0.00292164572,15.4933347 -1.77635684e-15,15.3405244 L-1.77635684e-15,7.45058441 C-1.77635684e-15,7.29022441 0.0555890961,7.15456441 0.167309096,7.04322441 C0.278269096,6.93226441 0.414309096,6.87640441 0.573909096,6.87640441 L4.8732291,6.87640441 L10.9874291,0.172064405 C11.1390491,0.00296440549 11.3484291,-0.0414955945 11.6151891,0.0386844055 C11.8466091,0.136344405 11.9621291,0.314564405 11.9621291,0.572584405 L11.9625091,0.572584405 Z"}),ye.createElement("path",{d:"M15.7579491,16.0914044 L14.6798891,13.6594044 C15.5739159,13.2635547 16.1503537,12.3776671 16.1501091,11.3999244 C16.150386,10.4242626 15.5763999,9.53983269 14.6852091,9.14272441 L15.7697291,6.71376441 C17.6193585,7.53872062 18.810518,9.37466359 18.8101092,11.3999244 C18.8105521,13.4298903 17.6139475,15.2691931 15.7579491,16.0914044 L15.7579491,16.0914044 Z"}),ye.createElement("path",{d:"M18.3647491,20.2619044 L17.2863091,17.8299044 C19.8302925,16.7031661 21.4705725,14.1822599 21.4701091,11.3999244 C21.4701091,8.59818441 19.8167291,6.09892441 17.3022691,4.97678441 L18.3864091,2.54782441 C21.8804724,4.10607079 24.1307363,7.57414217 24.1301093,11.3999244 C24.1308375,15.2343934 21.8705556,18.7086904 18.3647491,20.2619044 Z"})))),TU=({size:t=R6,onClick:e=()=>{}})=>ye.createElement("svg",{onClick:e,height:t,width:t,viewBox:"0 0 26 23",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},ye.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},ye.createElement("g",{id:"Group",transform:"translate(1.000000, 0.000000)",fill:"#FFFFFF",fillRule:"nonzero"},ye.createElement("path",{d:"M11.9625091,0.572584405 L11.9625091,22.2272644 C11.9625091,22.4856644 11.8466091,22.6635044 11.6151891,22.7611644 C11.3480491,22.8413444 11.1390491,22.7968844 10.9878091,22.6277844 L4.8732291,15.9143244 L0.573909096,15.9143244 C0.413549096,15.9143244 0.277509096,15.8588444 0.166549096,15.7475044 C0.0573082348,15.6406091 -0.00292164572,15.4933347 0,15.3405244 L0,7.45058441 C0,7.29022441 0.0555890961,7.15456441 0.167309096,7.04322441 C0.278269096,6.93226441 0.414309096,6.87640441 0.573909096,6.87640441 L4.8732291,6.87640441 L10.9874291,0.172064405 C11.1390491,0.00296440549 11.3484291,-0.0414955945 11.6151891,0.0386844055 C11.8466091,0.136344405 11.9621291,0.314564405 11.9621291,0.572584405 L11.9625091,0.572584405 Z",id:"Path"})),ye.createElement("g",{id:"Group",transform:"translate(14.887009, 6.947630)",fill:"#FFFFFF",fillRule:"nonzero"},ye.createElement("path",{d:"M7.88199149,6.27905236 C7.94693088,6.35707599 7.94693088,6.47033309 7.88199149,6.54835671 L6.54835671,7.88199149 C6.47033309,7.94693088 6.35707599,7.94693088 6.27905236,7.88199149 L3.96534802,5.56828715 L1.65164367,7.88199149 C1.57362004,7.94693088 1.46036294,7.94693088 1.38233932,7.88199149 L0.0487045381,6.54835671 C-0.016234846,6.47033309 -0.016234846,6.35707599 0.0487045381,6.27905236 L2.36240889,3.96534802 L0.0487045381,1.65164367 C-0.016234846,1.57362004 -0.016234846,1.46036294 0.0487045381,1.38233932 L1.38233932,0.0487045381 C1.46036294,-0.016234846 1.57362004,-0.016234846 1.65164367,0.0487045381 L3.96534802,2.36240889 L6.27905236,0.0487045381 C6.35707599,-0.016234846 6.47033309,-0.016234846 6.54835671,0.0487045381 L7.88199149,1.38233932 C7.94693088,1.46036294 7.94693088,1.57362004 7.88199149,1.65164367 L5.56828715,3.96534802 L7.88199149,6.27905236 Z",id:"Shape"})))),kU=et.div`
    background: ${Qf};
    height: ${t=>t.$barHeight}px;
    position: absolute;
    width: 5px;
    bottom: 0;
    left: 0;
    opacity: 0.95;
`,NU=({videoEl:t})=>{dz(2147483647,100);const e=t?.currentTime||0,n=t?.duration||0,r=e/n;let a=Math.round(r*100),l=5;return t?.height<200?l=3:t?.height<300&&(l=4),a=n<10&&a>98?100:a,ye.createElement(kU,{style:{width:`${a}%`},$barHeight:l,className:"hide-in-percy"})},AU=NU,RU=(t,e="")=>{switch(t){case 1:return"Aborted. The fetching process for the media resource was aborted by the user agent at the user's request.";case 2:return"Network Error. A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.";case 3:return"Decode Error. An error of some description occurred while decoding the media resource, after the resource was established to be usable.";case 4:return`Can not play a video of type "${e.split(".").pop()}" on this platform.`;default:return""}},jU=(t,e,n,r,a)=>{const l=a+t;return!r.has(l)&&n>0&&e>n*t?(r.add(l),!0):!1},IU=[.25,.5,.75],j6="giphy-video",DU={IDLE:1},I6=({muted:t,ccEnabled:e=!1,ccLanguage:n="en",loop:r=!0,onStateChange:a,onTimeUpdate:l,onCanPlay:u,onFirstPlay:h,onWaiting:m,onMuted:p,onError:y,onEnded:b,onLoop:x,onQuartile:k,onEndFullscreen:R,setVideoEl:j,gif:N,width:U,percentWidth:$,height:I,volume:O=.7,className:B=j6,isInPlayer:q})=>{var w,E,A;const P=I||mp(N,U);let L;$&&(L=`${Math.round(P/U*100)}%`);const[z,M]=T.useState(eS(N.video,U,P)),se=T.useRef(0);z||console.warn(`GiphyJS No video content for id: ${N.id}`);const le=T.useRef(Date.now()),Y=T.useRef(!1),ee=T.useRef(0),Z=T.useRef(0),Ee=T.useRef(new Set);T.useEffect(()=>{le.current=Date.now(),Y.current=!1,ee.current=1,Z.current=0,Ee.current=new Set},[N.id]);const Re=T.useRef(null);T.useEffect(()=>{const pe=eS(N.video,U,P);Re.current&&z?.url&&pe.url!==z.url&&(z.url.indexOf(String(N.id))!==-1&&(se.current=Re.current.currentTime),M(pe))},[U,I,N.video,P,z?.url,N.id]),T.useEffect(()=>{Re.current&&z?.url&&se.current&&(Re.current.currentTime=se.current,se.current=0)},[z?.url,se]);const H=T.useCallback(()=>{var pe;const ge=Re.current,Se=(pe=ge?.error)==null?void 0:pe.code;if(Se&&ge?.src){const it=RU(Se,ge?.src);console.error(it),y?.(Se)}},[y]),W=T.useCallback(()=>{a?.("playing"),Y.current||(Y.current=!0,N.analytics_response_payload&&H1({actionType:"START",analyticsResponsePayload:N.analytics_response_payload}),h?.(Date.now()-le.current))},[h,a,N]),ie=T.useCallback(()=>a?.("paused"),[a]),ve=T.useCallback(()=>{const pe=Re.current;if(pe){const ge=pe.currentTime;IU.some(Se=>jU(Se,ge,pe.duration,Ee.current,ee.current)?(k?.(Se),!0):!1),l?.(ge||0)}},[k,l]),Te=T.useCallback(()=>u?.(),[u]),De=T.useCallback(()=>{const pe=Re.current;pe?.currentTime!==0&&pe?.networkState!==DU.IDLE&&m?.(++Z.current)},[m]),ae=T.useCallback(()=>{r&&Re.current&&Re.current.play(),x?.(ee.current),ee.current=ee.current+1,Y.current&&b?.()},[b,r,x]),Le=T.useCallback(()=>R?.(),[R]),Ie=T.useCallback(pe=>Y1(void 0,null,function*(){if(pe){const ge=pe.play();if(ge!==void 0)try{yield ge,p?.(!1)}catch{pe.muted=!0,p?.(!0),pe.play()}}}),[p]);T.useEffect(()=>{const pe=Re.current;pe&&(Ie(pe),j?.(pe),isNaN(O)||(pe.volume=O))},[]),T.useEffect(()=>{const pe=Re.current;return pe&&(pe.addEventListener("play",W),pe.addEventListener("pause",ie),pe.addEventListener("error",H),pe.addEventListener("timeupdate",ve),pe.addEventListener("canplay",Te),pe.addEventListener("ended",ae),pe.addEventListener("waiting",De),pe.addEventListener("webkitendfullscreen",Le)),()=>{pe&&(pe.removeEventListener("play",W),pe.removeEventListener("pause",ie),pe.removeEventListener("error",H),pe.removeEventListener("timeupdate",ve),pe.removeEventListener("canplay",Te),pe.removeEventListener("ended",ae),pe.removeEventListener("waiting",De),pe.removeEventListener("webkitendfullscreen",Le))}},[W,ie,H,ve,Te,ae,De,Le]);const de=(A=(E=(w=N.video)==null?void 0:w.captions)==null?void 0:E[n])==null?void 0:A.vtt;return z?.url?ye.createElement("video",{crossOrigin:"anonymous",draggable:!0,className:B,width:q?"100%":$||U,height:q?"100%":L||P,muted:t,autoPlay:!0,playsInline:!0,ref:Re,src:z?.url,"data-giphy-id":N.id},e&&de&&ye.createElement("track",{label:"English",kind:"subtitles",srcLang:n,src:de,default:!0})):null};I6.className=j6;var D6=I6,MU=et.div`
    position: relative;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: black;
    font-family: interface, helvetica, arial;
    -webkit-font-smoothing: antialiased;
`,PU=et.div`
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    cursor: pointer;
`,OU=et.div`
    position: absolute;
    top: 10px;
    right: 10px;
    left: 10px;
    bottom: 0;
    display: flex;
    justify-content: space-between;
    opacity: ${t=>t.$isHovered?1:0};
    transition: opacity ease-out 250ms;
    align-items: flex-start;
`,LU=et.div`
    font-size: 22px;
    color: white;
    margin-bottom: 5px;
    font-weight: bold;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    user-select: none;
    cursor: pointer;
`,VU=et.div`
    position: relative;
    min-width: 0;
`,zU=et.div`
    &:before {
        background: linear-gradient(rgba(18, 18, 18, 0.6), rgba(0, 0, 0, 0));
        content: '';
        height: ${t=>t.$isLargePlayer?125:75}px;
        left: 0;
        pointer-events: none;
        position: absolute;
        top: 0;
        width: 100%;
    }
    &:after {
        background: linear-gradient(rgba(0, 0, 0, 0), rgba(18, 18, 18, 0.6));
        content: '';
        height: ${t=>t.$isLargePlayer?125:75}px;
        left: 0;
        pointer-events: none;
        position: absolute;
        bottom: 0;
        width: 100%;
    }
`,UU=300,BU=4e3,FU=t=>{const{style:e,width:n,percentWidth:r,hideMute:a,hideAttribution:l,hideProgressBar:u,hideTitle:h,className:m,persistentControls:p,gif:y,overlay:b}=t,[x,k]=T.useState(!1),[R,j]=T.useState(null),[N,U]=T.useState(t.muted),[$,I]=T.useState(!1),{setVideoEl:O,onMuted:B,onUserMuted:q}=t,w=t.height||mp(y,n);let E;r&&(E=`${Math.round(w/n*100)}%`);const[,A,P]=az(()=>{k(!1)},BU),L=T.useCallback(Y=>{B?.(Y),I(Y)},[I,B]),z=T.useCallback(Y=>{O?.(Y),j(Y)},[O,j]),M=()=>{$?(I(!1),U(!1)):U(!N)};T.useEffect(()=>{U(t.muted)},[t.muted]);const se=p||x,le=w>=UU;return T.useEffect(()=>(se?P():A(),()=>A()),[se,A,P]),ye.createElement(MU,{className:m,style:Bi({width:r||n,height:E||w},e),onMouseOver:()=>k(!0),onMouseLeave:()=>k(!1),onMouseMove:()=>{k(!0),P()},onClick:Y=>{q?.(!(N||$)),R?.play(),Y.preventDefault(),M()}},ye.createElement(D6,G1(Bi({},t),{isInPlayer:!0,onMuted:L,setVideoEl:z,muted:N})),se&&ye.createElement(zU,{$isLargePlayer:le}),ye.createElement(OU,{$isHovered:se},ye.createElement(VU,null,!h&&le&&ye.createElement(LU,{onClick:Y=>{Y.preventDefault(),Y.stopPropagation(),window.open(y.url,"_blank")}},y.title),R&&!l?ye.createElement(EU,{gif:y}):null),!a&&ye.createElement(PU,null,N||$?ye.createElement(TU,null):ye.createElement(CU,null))),se&&!u&&R?ye.createElement(AU,{videoEl:R}):null,b&&ye.createElement(b,{gif:y,isHovered:x,width:n,height:w}))},$U=t=>(t.overlay&&!t.controls&&console.warn(`${nr.PREFIX}: Overlays only work when controls are enabled`),t.controls?ye.createElement(FU,Bi({},t)):ye.createElement(D6,Bi({},t))),HU=$U;et.div`
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    height: 100%;
    width: 100%;
`;et(HU)`
    height: 100%;
    display: inline-block;
    object-fit: fill;
    pointer-events: none;
    background: rgb(0, 0, 0, 0);
`;et.div`
    position: absolute;
    top: 6px;
    right: 6px;
    cursor: pointer;
    opacity: ${t=>t.$isHovered?1:.8};
    transition: opacity ease-out 800ms;
`;Qv("X-GIPHY-SDK-NAME","ReactSDK");const qU="9S3bPWJJTZZdynuLXHFSBstNA5B6tes9",zS=new hk(qU),GU=({onSelect:t})=>{const[e,n]=T.useState(""),[r,a]=T.useState(400),l=T.useRef(null);T.useEffect(()=>{l.current&&a(l.current.offsetWidth)},[]);const u=h=>e?zS.search(e,{offset:h,limit:10}):zS.trending({offset:h,limit:10});return c.jsxs("div",{className:"w-full h-full flex flex-col bg-dark-sidebar rounded-lg overflow-hidden border border-dark-hover",children:[c.jsx("div",{className:"p-3 border-b border-dark-hover",children:c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",placeholder:"Search GIFs...",value:e,onChange:h=>n(h.target.value),className:"w-full bg-dark-input text-dark-text px-4 py-2 pl-10 rounded outline-none border border-transparent focus:border-brand-primary transition-all",autoFocus:!0}),c.jsx(p1,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-dark-muted",size:20})]})}),c.jsx("div",{ref:l,className:"flex-1 overflow-y-auto overflow-x-hidden p-2 custom-scrollbar",children:r>0&&c.jsx(T6,{width:r-20,columns:3,fetchGifs:u,onGifClick:(h,m)=>{m.preventDefault(),t(h.images.original.url)},noLink:!0,hideAttribution:!0,gutter:6},e)})]})},YU="9S3bPWJJTZZdynuLXHFSBstNA5B6tes9",US=new hk(YU),KU=({onSelect:t})=>{const[e,n]=T.useState(""),[r,a]=T.useState(400),l=T.useRef(null);T.useEffect(()=>{l.current&&a(l.current.offsetWidth)},[]);const u=h=>e?US.search(e,{offset:h,limit:10,type:"stickers"}):US.trending({offset:h,limit:10,type:"stickers"});return c.jsxs("div",{className:"w-full h-full flex flex-col bg-dark-sidebar rounded-lg overflow-hidden border border-dark-hover",children:[c.jsx("div",{className:"p-3 border-b border-dark-hover bg-brand-primary/10",children:c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",placeholder:"Search Premium Stickers...",value:e,onChange:h=>n(h.target.value),className:"w-full bg-dark-input text-dark-text px-4 py-2 pl-10 rounded outline-none border border-transparent focus:border-brand-primary transition-all placeholder:text-dark-muted",autoFocus:!0}),c.jsx(p1,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-dark-muted",size:20})]})}),c.jsx("div",{className:"px-3 py-1 bg-brand-primary/5 text-[10px] text-brand-primary text-center font-bold tracking-wider uppercase",children:"Premium Stickers"}),c.jsx("div",{ref:l,className:"flex-1 overflow-y-auto overflow-x-hidden p-2 custom-scrollbar",children:r>0&&c.jsx(T6,{width:r-20,columns:3,fetchGifs:u,onGifClick:(h,m)=>{m.preventDefault(),t(h.images.original.url)},noLink:!0,hideAttribution:!0,gutter:6},e)})]})},QU=({onSubmit:t,onClose:e})=>{const[n,r]=T.useState(""),[a,l]=T.useState(["",""]),[u,h]=T.useState(!1),[m,p]=T.useState(!1),y=()=>{a.length<10&&l([...a,""])},b=j=>{a.length>2&&l(a.filter((N,U)=>U!==j))},x=(j,N)=>{const U=[...a];U[j]=N,l(U)},k=()=>{const j=a.filter(N=>N.trim()!=="");n.trim()&&j.length>=2&&(t({question:n.trim(),options:j,multipleChoice:u,anonymous:m}),e())},R=n.trim()&&a.filter(j=>j.trim()).length>=2;return c.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-dark-sidebar rounded-lg w-full max-w-md mx-4 shadow-2xl animate-fadeIn",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-hover",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(v1,{className:"text-brand-primary",size:24}),c.jsx("h2",{className:"text-lg font-semibold text-dark-text",children:"Create Poll"})]}),c.jsx("button",{onClick:e,className:"p-1 hover:bg-dark-hover rounded transition-colors",children:c.jsx($n,{className:"text-dark-muted",size:20})})]}),c.jsxs("div",{className:"p-4 space-y-4 max-h-[60vh] overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-dark-muted mb-2",children:"Question"}),c.jsx("input",{type:"text",value:n,onChange:j=>r(j.target.value),placeholder:"Ask a question...",maxLength:300,className:`w-full bg-dark-input text-dark-text px-4 py-3 rounded-lg
                         border border-transparent focus:border-brand-primary
                         outline-none transition-colors`,autoFocus:!0}),c.jsxs("div",{className:"text-xs text-dark-muted mt-1 text-right",children:[n.length,"/300"]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-dark-muted mb-2",children:"Options"}),c.jsx("div",{className:"space-y-2",children:a.map((j,N)=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("span",{className:"text-dark-muted text-sm w-6",children:[N+1,"."]}),c.jsx("input",{type:"text",value:j,onChange:U=>x(N,U.target.value),placeholder:`Option ${N+1}`,maxLength:100,className:`flex-1 bg-dark-input text-dark-text px-3 py-2 rounded
                               border border-transparent focus:border-brand-primary
                               outline-none transition-colors text-sm`}),a.length>2&&c.jsx("button",{onClick:()=>b(N),className:"p-1 hover:bg-red-500/20 text-red-400 rounded transition-colors",children:c.jsx($n,{size:18})})]},N))}),a.length<10&&c.jsxs("button",{onClick:y,className:"mt-2 flex items-center gap-1 text-sm text-brand-primary hover:text-brand-primary/80 transition-colors",children:[c.jsx(Io,{size:18}),"Add Option"]})]}),c.jsxs("div",{className:"space-y-3 pt-2 border-t border-dark-hover",children:[c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[c.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${u?"bg-brand-primary border-brand-primary":"border-dark-muted group-hover:border-dark-text"}`,children:u&&c.jsx(Bo,{size:14,className:"text-white"})}),c.jsx("span",{className:"text-dark-text text-sm",children:"Allow multiple selections"}),c.jsx("input",{type:"checkbox",checked:u,onChange:j=>h(j.target.checked),className:"sr-only"})]}),c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[c.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${m?"bg-brand-primary border-brand-primary":"border-dark-muted group-hover:border-dark-text"}`,children:m&&c.jsx(Bo,{size:14,className:"text-white"})}),c.jsx("span",{className:"text-dark-text text-sm",children:"Anonymous voting"}),c.jsx("input",{type:"checkbox",checked:m,onChange:j=>p(j.target.checked),className:"sr-only"})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t border-dark-hover",children:[c.jsx(at,{variant:"secondary",onClick:e,children:"Cancel"}),c.jsx(at,{variant:"primary",onClick:k,disabled:!R,children:"Create Poll"})]})]})})},XU=(t,e)=>{if(e===0)return"0 KB/s";const n=t/e;return n>1024*1024?`${(n/(1024*1024)).toFixed(1)} MB/s`:`${(n/1024).toFixed(0)} KB/s`},WU=t=>t.type.startsWith("image/")?"image":t.type.startsWith("video/")||t.type.startsWith("audio/")?"video":"auto",JU=(t,e)=>new Promise((n,r)=>{const a="dcqipv1hn",l="lumo_upload",u=WU(t),h=`https://api.cloudinary.com/v1_1/${a}/${u}/upload`,m=new FormData;m.append("file",t),m.append("upload_preset",l);const p=t.name.replace(/\.[^/.]+$/,"").replace(/[^a-zA-Z0-9_-]/g,"_");m.append("public_id",p);const y=new XMLHttpRequest;y.open("POST",h);const b=Date.now();y.upload.onprogress=x=>{if(x.lengthComputable){const k=x.loaded/x.total*100,R=(Date.now()-b)/1e3,j=XU(x.loaded,R);e&&e(k,j)}},y.onload=()=>{if(y.status===200)try{const x=JSON.parse(y.responseText);n({url:x.secure_url,name:x.original_filename||t.name,type:x.resource_type,format:x.format,bytes:x.bytes})}catch{r(new Error("Invalid response from Cloudinary"))}else try{const x=JSON.parse(y.responseText);r(new Error(x.error?.message||`Upload failed with status ${y.status}`))}catch{r(new Error(`Upload failed with status ${y.status}`))}},y.onerror=()=>r(new Error("Network error during upload")),y.send(m)}),M6=({serverId:t,channelId:e,channel:n,userId:r,userProfile:a,userRole:l,users:u,replyingTo:h,onCancelReply:m})=>{const[p,y]=T.useState(""),[b,x]=T.useState(!1),[k,R]=T.useState(!1),[j,N]=T.useState(""),[U,$]=T.useState(0),[I,O]=T.useState(!1),[B,q]=T.useState(!1),[w,E]=T.useState(!1),[A,P]=T.useState(!1),[L,z]=T.useState(!1),[M,se]=T.useState({uploading:!1,progress:0,speed:""}),[le,Y]=T.useState(null),[ee,Z]=T.useState(null),[Ee,Re]=T.useState(""),[H,W]=T.useState(!1),ie=T.useRef(0),ve=T.useRef(null),Te=T.useRef(null),{warning:De,error:ae,info:Le}=Kr(),Ie=["owner","admin","moderator"].includes(l),de=!n?.locked||Ie,pe="This channel is locked. Only staff can send messages.",ge=ke=>{const ze=Te.current?.selectionStart||p.length,nt=p.slice(0,ze)+ke+p.slice(ze);y(nt),O(!1),Te.current?.focus()},Se=async ke=>{if(q(!1),!(!p.trim()&&!de))try{x(!0);const ze={text:ke,userId:r,timestamp:bt(),mentions:[],replyTo:null};if(t)await Bn(wt(he,"servers",t,"channels",e,"messages"),ze);else{await Bn(wt(he,"dms",e,"messages"),ze),await rt(Ae(he,"dms",e),{lastMessage:{text:"GIF",userId:r,timestamp:bt()},updatedAt:bt(),hiddenFor:[]});const nt=u.find(tt=>tt.id!==r);nt&&await rt(Ae(he,"users",nt.id),{[`unreadDms.${e}.count`]:Ai(1),[`unreadDms.${e}.lastMessageAt`]:bt(),[`unreadDms.${e}.text`]:"GIF"}).catch(tt=>console.error("Error updating unread DM count:",tt))}}catch(ze){console.error("Error sending GIF:",ze),ae("Failed to send GIF")}finally{x(!1)}},it=async ke=>{if(E(!1),!sc(a)){ae("Stickers are for Premium members only!");return}try{x(!0);const ze={type:"sticker",text:ke,userId:r,timestamp:bt(),mentions:[],replyTo:null};if(t)await Bn(wt(he,"servers",t,"channels",e,"messages"),ze);else{await Bn(wt(he,"dms",e,"messages"),ze),await rt(Ae(he,"dms",e),{lastMessage:{text:" Sticker",userId:r,timestamp:bt()},updatedAt:bt(),hiddenFor:[]});const nt=u.find(tt=>tt.id!==r);nt&&await rt(Ae(he,"users",nt.id),{[`unreadDms.${e}.count`]:Ai(1),[`unreadDms.${e}.lastMessageAt`]:bt(),[`unreadDms.${e}.text`]:" Sticker"}).catch(tt=>console.error("Error updating unread DM count:",tt))}}catch(ze){console.error("Error sending Sticker:",ze),ae("Failed to send Sticker")}finally{x(!1)}},_e=async ke=>{if(de)try{x(!0);const ze={type:"poll",text:ke.question,poll:{question:ke.question,options:ke.options,votes:{},multipleChoice:ke.multipleChoice,anonymous:ke.anonymous},userId:r,timestamp:bt(),mentions:[]};if(t)await Bn(wt(he,"servers",t,"channels",e,"messages"),ze);else{await Bn(wt(he,"dms",e,"messages"),ze),await rt(Ae(he,"dms",e),{lastMessage:{text:` Poll: ${ke.question}`,userId:r,timestamp:bt()},updatedAt:bt(),hiddenFor:[]});const nt=u.find(tt=>tt.id!==r);nt&&await rt(Ae(he,"users",nt.id),{[`unreadDms.${e}.count`]:Ai(1),[`unreadDms.${e}.lastMessageAt`]:bt(),[`unreadDms.${e}.text`]:` Poll: ${ke.question}`}).catch(tt=>console.error("Error updating unread DM count:",tt))}}catch(ze){console.error("Error creating poll:",ze),ae("Failed to create poll")}finally{x(!1)}},Ue=ke=>{if(!ke)return;const ze=sc(a),nt=ze?200*1024*1024:10*1024*1024;if(ke.size>nt){ae(`File too large! The limit is ${ze?"200MB":"10MB"}. ${ze?"":"Upgrade to Premium for larger uploads."}`);return}let tt=null;(ke.type.startsWith("image/")||ke.type.startsWith("video/"))&&(tt=URL.createObjectURL(ke)),Y(ke),Z(tt),Re(""),P(!1),ve.current&&(ve.current.value="")},Me=ke=>{Ue(ke.target.files?.[0])},F=()=>document.querySelector('[role="dialog"]')!==null||document.querySelector(".modal-overlay")!==null||document.body.style.overflow==="hidden",Q=ke=>{if(ke.preventDefault(),ke.stopPropagation(),F())return;ie.current++,ke.dataTransfer.types&&Array.from(ke.dataTransfer.types).includes("Files")&&W(!0)},J=ke=>{ke.preventDefault(),ke.stopPropagation(),ie.current--,ie.current===0&&W(!1)},Ce=ke=>{ke.preventDefault(),ke.stopPropagation()},$e=ke=>{if(ke.preventDefault(),ke.stopPropagation(),W(!1),ie.current=0,F())return;const ze=ke.dataTransfer.files;ze&&ze.length>0&&Ue(ze[0])};T.useEffect(()=>(window.addEventListener("dragenter",Q),window.addEventListener("dragleave",J),window.addEventListener("dragover",Ce),window.addEventListener("drop",$e),()=>{window.removeEventListener("dragenter",Q),window.removeEventListener("dragleave",J),window.removeEventListener("dragover",Ce),window.removeEventListener("drop",$e)}),[]);const Qe=()=>{ee&&URL.revokeObjectURL(ee),Y(null),Z(null),Re("")},ct=async()=>{if(le)try{se({uploading:!0,progress:0,speed:"0 KB/s"});let ke,ze;if(le.type.startsWith("image/"))ke=await md(le,(Dt,ht)=>{se({uploading:!0,progress:Dt,speed:ht})});else{const Qt=await JU(le,(Dt,ht)=>{se({uploading:!0,progress:Dt,speed:ht})});ke=Qt.url,ze=Qt}const tt={text:Ee.trim()?`${ke}
${Ee}`:ke,userId:r,timestamp:bt(),mentions:[],replyTo:null};if(t)await Bn(wt(he,"servers",t,"channels",e,"messages"),tt);else{await Bn(wt(he,"dms",e,"messages"),tt),await rt(Ae(he,"dms",e),{lastMessage:{text:le.type.startsWith("image/")?" Image":" Attachment",userId:r,timestamp:bt()},updatedAt:bt(),hiddenFor:[]});const Qt=u.find(Dt=>Dt.id!==r);Qt&&await rt(Ae(he,"users",Qt.id),{[`unreadDms.${e}.count`]:Ai(1),[`unreadDms.${e}.lastMessageAt`]:bt(),[`unreadDms.${e}.text`]:le.type.startsWith("image/")?" Image":" Attachment"}).catch(Dt=>console.error("Error updating unread DM count:",Dt))}Qe()}catch(ke){console.error("Error uploading file:",ke),ae("Failed to upload file")}finally{se({uploading:!1,progress:0,speed:""})}};T.useEffect(()=>{const ke=p.length,ze=p.slice(0,ke),nt=ze.lastIndexOf("@");if(nt!==-1){const tt=ze.slice(nt+1);if(!tt.includes(" ")){N(tt.toLowerCase()),$(nt),R(!0);return}}R(!1)},[p]);const $t=()=>{const ke=[];return t&&("everyone".startsWith(j.toLowerCase())&&ke.push({id:"everyone",displayName:"everyone",type:"special"}),["admin","moderator","member"].forEach(nt=>{nt.startsWith(j.toLowerCase())&&ke.push({id:`role-${nt}`,displayName:nt,type:"role"})})),u&&u.filter(nt=>nt.id!==r&&nt.displayName.toLowerCase().startsWith(j.toLowerCase())).forEach(nt=>{ke.push({...nt,type:"user"})}),ke.slice(0,8)},fn=ke=>{const ze=p.slice(0,U),nt=p.slice(U+j.length+1),tt=`${ze}@${ke.displayName} ${nt}`;y(tt),R(!1)};T.useEffect(()=>{const ke=ze=>{document.activeElement!==Te.current&&(document.activeElement?.tagName==="INPUT"||document.activeElement?.tagName==="TEXTAREA"||ze.ctrlKey||ze.metaKey||ze.altKey||["Escape","Tab","Enter","Backspace","Delete"].includes(ze.key)||document.querySelector('[role="dialog"]')||ze.key.length===1&&Te.current?.focus())};return window.addEventListener("keydown",ke),()=>window.removeEventListener("keydown",ke)},[]);const ar=async ke=>{if(ke.preventDefault(),!!p.trim()&&!(!e||!r)){a?.isMuted&&De("You are muted and cannot send messages"),x(!0);try{const ze=/@(\w+)/g,nt=[];let tt;for(;(tt=ze.exec(p))!==null;){const Dt=tt[1].toLowerCase();if(Dt==="everyone")u.forEach(ht=>{ht.id!==r&&nt.push(ht.id)});else if(["admin","moderator","member"].includes(Dt))u.forEach(ht=>{ht.role===Dt&&ht.id!==r&&nt.push(ht.id)});else{const ht=u.find(vn=>vn.displayName.toLowerCase()===Dt);ht&&ht.id!==r&&nt.push(ht.id)}}const Qt={text:p.trim(),userId:r,timestamp:bt(),mentions:[...new Set(nt)],replyTo:h?{messageId:h.id,userId:h.userId,text:h.text.substring(0,100)}:null};if(t){if(await Bn(wt(he,"servers",t,"channels",e,"messages"),Qt),nt.length>0){const Dt=nt.map(ht=>rt(Ae(he,"users",ht),{[`unreadMentions.${t}.count`]:Ai(1),[`unreadMentions.${t}.lastMentionAt`]:bt(),[`unreadMentions.${t}.lastMentionText`]:p.trim().substring(0,50)}).catch(vn=>{console.error("Error updating mention for user:",ht,vn)}));await Promise.all(Dt)}}else{await Bn(wt(he,"dms",e,"messages"),Qt),await rt(Ae(he,"dms",e),{lastMessage:{text:p.trim().substring(0,100),userId:r,timestamp:bt()},updatedAt:bt(),hiddenFor:[]});const Dt=u.find(ht=>ht.id!==r);Dt&&await rt(Ae(he,"users",Dt.id),{[`unreadDms.${e}.count`]:Ai(1),[`unreadDms.${e}.lastMessageAt`]:bt(),[`unreadDms.${e}.text`]:p.trim().substring(0,50)}).catch(ht=>console.error("Error updating unread DM count:",ht))}y(""),m&&m()}catch(ze){console.error("Error sending message:",ze),ae("Failed to send message")}finally{x(!1)}}};return c.jsxs("div",{className:"px-4 pb-6 relative",children:[h&&c.jsxs("div",{className:"mb-2 bg-dark-sidebar border-l-4 border-green-400 p-3 rounded flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"text-xs text-green-400 font-semibold mb-1",children:["Replying to ",u.find(ke=>ke.id===h.userId)?.displayName||"Unknown"]}),c.jsx("div",{className:"text-sm text-dark-muted truncate",children:h.text})]}),c.jsx("button",{onClick:m,className:"ml-2 text-dark-muted hover:text-dark-text transition-colors",title:"Cancel reply",children:c.jsx($n,{size:18})})]}),k&&c.jsx("div",{className:"absolute bottom-full left-4 right-4 mb-2 bg-dark-sidebar rounded-lg shadow-lg border border-dark-hover max-h-48 overflow-y-auto",children:$t().map(ke=>c.jsx("button",{onClick:()=>fn(ke),className:"w-full px-4 py-2 text-left hover:bg-dark-hover transition-colors flex items-center gap-2",children:ke.type==="special"||ke.type==="role"?c.jsxs("span",{className:"text-dark-text font-medium",children:["@",ke.displayName,ke.type==="role"&&c.jsx("span",{className:"ml-2 text-xs text-dark-muted",children:"(role)"})]}):c.jsxs(c.Fragment,{children:[ke.photoUrl?c.jsx("img",{src:ke.photoUrl,alt:ke.displayName,className:"w-8 h-8 rounded-full object-cover",onError:ze=>{ze.target.style.display="none",ze.target.nextSibling.style.display="flex"}}):null,c.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold text-sm",style:{display:ke.photoUrl?"none":"flex"},children:ke.displayName[0].toUpperCase()}),c.jsxs("span",{className:"text-dark-text",children:["@",ke.displayName]})]})},ke.id))}),c.jsxs("form",{onSubmit:ar,className:"relative",children:[I&&c.jsx(GO,{onSelect:ge,onClose:()=>O(!1)}),M.uploading&&c.jsxs("div",{className:"absolute -top-12 left-0 right-0 bg-dark-sidebar border border-dark-hover rounded-lg p-2 shadow-lg animate-fade-in-up z-50",children:[c.jsxs("div",{className:"flex items-center justify-between text-xs text-dark-text mb-1",children:[c.jsx("span",{className:"font-semibold",children:"Uploading Image..."}),c.jsxs("span",{className:"text-dark-muted",children:[Math.round(M.progress),"%  ",M.speed]})]}),c.jsx("div",{className:"h-1.5 bg-dark-hover rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-brand-primary transition-all duration-200 ease-out",style:{width:`${M.progress}%`}})})]}),le&&c.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-dark-bg border border-dark-hover rounded-lg shadow-2xl max-w-lg w-full overflow-hidden flex flex-col p-4",children:[c.jsxs("h3",{className:"text-dark-text font-semibold mb-4 flex items-center gap-2",children:[c.jsx(Em,{className:"text-brand-primary"}),"Upload Attachment"]}),c.jsx("div",{className:"flex-1 w-full bg-black/50 rounded-lg overflow-hidden flex items-center justify-center mb-4 border border-dark-hover min-h-[200px] max-h-[400px]",children:ee?c.jsx("img",{src:ee,alt:"Preview",className:"max-w-full max-h-full object-contain"}):c.jsxs("div",{className:"flex flex-col items-center gap-2 text-dark-muted",children:[c.jsx("div",{className:"text-6xl",children:""}),c.jsx("div",{className:"text-sm font-medium text-dark-text max-w-xs truncate px-4",children:le.name}),c.jsxs("div",{className:"text-xs",children:[(le.size/1024/1024).toFixed(2)," MB"]})]})}),c.jsx("input",{type:"text",value:Ee,onChange:ke=>Re(ke.target.value),placeholder:"Add a caption... (optional)",className:"w-full bg-dark-input text-dark-text px-4 py-2 rounded-lg border border-dark-hover focus:border-brand-primary outline-none mb-4",onKeyDown:ke=>{ke.key==="Enter"&&!M.uploading&&ct()}}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("button",{onClick:Qe,className:"px-4 py-2 text-dark-text hover:text-dark-muted transition-colors font-medium",disabled:M.uploading,children:"Cancel"}),c.jsx("button",{onClick:ct,className:"px-6 py-2 bg-brand-primary hover:bg-brand-secondary text-white rounded-md transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",disabled:M.uploading,children:M.uploading?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Uploading..."]}):c.jsxs(c.Fragment,{children:[c.jsx(gw,{size:18}),"Send"]})})]}),M.uploading&&c.jsxs("div",{className:"mt-4",children:[c.jsxs("div",{className:"flex justify-between text-xs text-dark-muted mb-1",children:[c.jsx("span",{children:M.speed}),c.jsxs("span",{children:[Math.round(M.progress),"%"]})]}),c.jsx("div",{className:"h-1 bg-dark-hover rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-brand-primary transition-all duration-200",style:{width:`${M.progress}%`}})})]})]})}),w&&c.jsxs("div",{className:"absolute bottom-full right-0 mb-4 w-[85vw] max-w-[400px] h-[450px] shadow-2xl rounded-lg z-50 animate-fade-in-up",children:[c.jsx("div",{className:"fixed inset-0 z-[-1]",onClick:()=>E(!1)}),c.jsx(KU,{onSelect:it})]}),B&&c.jsxs("div",{className:"absolute bottom-full right-0 mb-4 w-[85vw] max-w-[400px] h-[450px] shadow-2xl rounded-lg z-50",children:[c.jsx("div",{className:"fixed inset-0 z-[-1]",onClick:()=>q(!1)}),c.jsx(GU,{onSelect:Se})]}),c.jsx("input",{ref:Te,type:"text",value:p,onChange:ke=>y(ke.target.value),onKeyDown:ke=>{if(ke.key==="Tab"&&k){ke.preventDefault();const ze=$t();ze.length>0&&fn(ze[0])}},onPaste:async ke=>{const ze=ke.clipboardData.items;for(let nt=0;nt<ze.length;nt++)for(let tt=0;tt<ze.length;tt++)if(ze[tt].kind==="file"){ke.preventDefault(),Ue(ze[tt].getAsFile());break}},placeholder:de?a?.isMuted?"You are muted":"Type a message...":pe,disabled:b||a?.isMuted||!de||le!==null,className:`w-full bg-dark-input text-dark-text px-12 py-3 pr-48 rounded-lg
                     border border-transparent focus:border-brand-primary
                     outline-none transition-colors duration-200
                     placeholder:text-dark-muted
                     disabled:opacity-50 disabled:cursor-not-allowed select-text`}),H&&c.jsxs("div",{className:"fixed inset-0 z-[200] bg-brand-primary/90 flex flex-col items-center justify-center animate-fade-in pointer-events-none",children:[c.jsx("div",{className:"bg-white/10 p-8 rounded-full mb-6",children:c.jsx(pw,{size:64,className:"text-white animate-bounce"})}),c.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Drop your file here"}),c.jsx("p",{className:"text-white/80",children:"to upload instantly"})]}),c.jsxs("div",{className:"absolute left-3 top-0 bottom-0 flex items-center plus-menu-container",children:[" ",c.jsx("button",{type:"button",onClick:()=>P(!A),className:`text-dark-muted hover:text-brand-primary transition-colors flex items-center justify-center ${A?"text-brand-primary":""}`,title:"Add attachment",disabled:!de,children:c.jsx(pw,{size:26})}),A&&c.jsxs("div",{className:"absolute bottom-full left-0 mb-2 w-48 bg-dark-sidebar border border-dark-hover rounded-lg shadow-xl overflow-hidden z-50 animate-fade-in-up",children:[c.jsxs("button",{type:"button",onClick:()=>{ve.current?.click(),P(!1)},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-dark-hover text-left transition-colors",children:[c.jsx(Em,{className:"text-green-400",size:20}),c.jsx("span",{className:"text-sm text-dark-text font-medium",children:"Upload File"})]}),c.jsxs("button",{type:"button",onClick:()=>{z(!0),P(!1)},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-dark-hover text-left transition-colors",disabled:!t,children:[c.jsx(v1,{className:"text-brand-primary",size:20}),c.jsx("span",{className:"text-sm text-dark-text font-medium",children:"Create Poll"})]})]})]}),c.jsx("input",{type:"file",ref:ve,onChange:Me,className:"hidden"}),c.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[c.jsx("button",{type:"button",onClick:()=>q(!B),className:`text-dark-muted hover:text-brand-primary
                        transition-colors border-2 border-current rounded px-1 text-[10px] font-bold h-6 flex items-center justify-center mr-1`,title:"Add GIF",children:"GIF"}),sc(a)&&c.jsx("button",{type:"button",onClick:()=>E(!w),className:`transition-colors ${w?"text-brand-primary":"text-dark-muted hover:text-brand-primary"}`,title:"Premium Stickers",children:c.jsx(YM,{size:24})}),c.jsx("button",{type:"button",onClick:()=>O(!I),className:`text-dark-muted hover:text-brand-primary
                       transition-colors`,title:"Add emoji",children:c.jsx(VT,{size:24})}),c.jsx("button",{type:"submit",disabled:!p.trim()||b||a?.isMuted||!de,className:`text-dark-muted hover:text-brand-primary
                       transition-colors disabled:opacity-50 disabled:cursor-not-allowed ml-1`,children:c.jsx(gw,{size:24})})]})]}),L&&c.jsx(QU,{onSubmit:_e,onClose:()=>z(!1)})]})},P6=({messages:t,users:e,onResultClick:n})=>{const[r,a]=T.useState(""),[l,u]=T.useState([]),[h,m]=T.useState(!1),p=b=>{if(a(b),!b.trim()){u([]);return}const x=t.filter(k=>k.text.toLowerCase().includes(b.toLowerCase())).slice(0,20);u(x)},y=b=>e.find(x=>x.id===b)||{displayName:"Unknown"};return h?c.jsxs("div",{className:"relative flex-1 max-w-md",children:[c.jsx("input",{type:"text",value:r,onChange:b=>p(b.target.value),placeholder:"Search messages...",autoFocus:!0,className:`w-full bg-dark-input text-dark-text px-4 py-2 pr-10 rounded-lg
                   border border-transparent focus:border-brand-primary
                   outline-none transition-colors placeholder:text-dark-muted`}),c.jsx("button",{onClick:()=>{m(!1),a(""),u([])},className:"absolute right-2 top-1/2 -translate-y-1/2 text-dark-muted hover:text-dark-text",children:c.jsx($n,{size:20})}),l.length>0&&c.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-dark-sidebar border border-dark-hover rounded-lg shadow-xl max-h-96 overflow-y-auto z-50",children:l.map(b=>c.jsxs("button",{onClick:()=>{n&&n(b),m(!1),a(""),u([])},className:"w-full px-4 py-3 text-left hover:bg-dark-hover transition-colors border-b border-dark-hover last:border-b-0",children:[c.jsx("div",{className:"text-xs text-brand-primary font-semibold mb-1",children:y(b.userId).displayName}),c.jsx("div",{className:"text-sm text-dark-text line-clamp-2",children:b.text})]},b.id))})]}):c.jsx("button",{onClick:()=>m(!0),className:"p-2 hover:bg-dark-hover rounded transition-colors",title:"Search messages",children:c.jsx(p1,{size:20,className:"text-dark-muted"})})},ZU=({messages:t,users:e,onClose:n,onJumpToMessage:r})=>{const a=t.filter(u=>u.pinned),l=u=>e.find(h=>h.id===u)||{displayName:"Unknown"};return a.length===0?c.jsxs("div",{className:"w-80 bg-dark-sidebar border-l border-dark-hover h-full flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-hover",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(tc,{className:"text-blue-400",size:20}),c.jsx("h3",{className:"font-semibold text-dark-text",children:"Pinned Messages"})]}),c.jsx("button",{onClick:n,className:"text-dark-muted hover:text-dark-text transition-colors",children:c.jsx($n,{size:20})})]}),c.jsx("div",{className:"flex-1 flex items-center justify-center text-dark-muted text-sm",children:"No pinned messages"})]}):c.jsxs("div",{className:"w-80 bg-dark-sidebar border-l border-dark-hover h-full flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-hover",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(tc,{className:"text-blue-400",size:20}),c.jsx("h3",{className:"font-semibold text-dark-text",children:"Pinned Messages"}),c.jsxs("span",{className:"text-xs text-dark-muted",children:["(",a.length,")"]})]}),c.jsx("button",{onClick:n,className:"text-dark-muted hover:text-dark-text transition-colors",children:c.jsx($n,{size:20})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:a.map(u=>{const h=l(u.userId);return c.jsx("div",{onClick:()=>r(u.id),className:"bg-dark-bg p-3 rounded-lg cursor-pointer hover:bg-dark-hover transition-colors border border-transparent hover:border-brand-primary",children:c.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[h.photoUrl?c.jsx("img",{src:h.photoUrl,alt:h.displayName,className:"w-8 h-8 rounded-full object-cover",onError:m=>{m.target.style.display="none",m.target.nextSibling.style.display="flex"}}):null,c.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold text-sm",style:{display:h.photoUrl?"none":"flex"},children:h.displayName?.[0]?.toUpperCase()||"U"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-semibold text-dark-text text-sm",children:h.displayName}),c.jsx("span",{className:"text-xs text-dark-muted",children:cp(u.timestamp)})]}),c.jsx("div",{className:"text-dark-text text-sm mt-1 line-clamp-3",children:c.jsx(Z3,{children:u.text})}),u.pinnedBy&&c.jsxs("div",{className:"text-xs text-blue-400 mt-2 flex items-center gap-1",children:[c.jsx(tc,{size:12}),c.jsxs("span",{children:["Pinned by ",l(u.pinnedBy).displayName]})]})]})]})},u.id)})})]})},eB=({currentStatus:t,onStatusChange:e,onClose:n})=>{const[r,a]=T.useState(!1),[l,u]=T.useState(""),[h,m]=T.useState(""),p=x=>{e(x),n()},y=()=>{h.trim()&&(e({emoji:l,text:h.trim(),type:"custom"}),n())},b=()=>{e(null),n()};return c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-dark-sidebar rounded-lg p-6 w-96 max-w-full mx-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-dark-text",children:"Set Status"}),c.jsx("button",{onClick:n,className:"text-dark-muted hover:text-dark-text transition-colors",children:c.jsx($n,{size:24})})]}),r?c.jsx(c.Fragment,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm text-dark-muted mb-2 block",children:"Emoji"}),c.jsx("input",{type:"text",value:l,onChange:x=>u(x.target.value.slice(0,2)),className:"w-full bg-dark-input text-dark-text px-4 py-2 rounded-lg text-2xl text-center",placeholder:"",maxLength:2})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm text-dark-muted mb-2 block",children:"Status Text"}),c.jsx("input",{type:"text",value:h,onChange:x=>m(x.target.value),className:"w-full bg-dark-input text-dark-text px-4 py-2 rounded-lg",placeholder:"What's on your mind?",maxLength:50,autoFocus:!0}),c.jsxs("div",{className:"text-xs text-dark-muted mt-1 text-right",children:[h.length,"/50"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>a(!1),className:"flex-1 px-4 py-2 rounded-lg bg-dark-bg hover:bg-dark-hover transition-colors text-dark-text",children:"Back"}),c.jsx("button",{onClick:y,disabled:!h.trim(),className:"flex-1 px-4 py-2 rounded-lg bg-brand-primary hover:bg-brand-primary/80 transition-colors text-white font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Set Status"})]})]})}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"space-y-2 mb-4",children:lO.map(x=>c.jsxs("button",{onClick:()=>p(x),className:"w-full px-4 py-3 rounded-lg bg-dark-bg hover:bg-dark-hover transition-colors text-left flex items-center gap-3",children:[c.jsx("span",{className:"text-2xl",children:x.emoji}),c.jsx("span",{className:"text-dark-text",children:x.text})]},x.type))}),c.jsx("button",{onClick:()=>a(!0),className:"w-full px-4 py-3 rounded-lg bg-brand-primary hover:bg-brand-primary/80 transition-colors text-white font-medium",children:" Custom Status"}),t&&c.jsx("button",{onClick:b,className:"w-full mt-2 px-4 py-2 rounded-lg bg-dark-bg hover:bg-dark-hover transition-colors text-admin text-sm",children:"Clear Status"})]})]})})},tB=()=>{const t=[{name:"Screen Sharing",free:"",premium:"1080p 60fps"},{name:"Profile Badge",free:"",premium:""},{name:"Custom Backgrounds",free:"",premium:""},{name:"Upload Limit",free:"10MB",premium:"200MB"},{name:"GIF Avatar",free:"",premium:""},{name:"Animated Banner",free:"",premium:""},{name:"Profile Themes",free:"",premium:""},{name:"Exclusive Stickers",free:"",premium:""},{name:"Soundboard",free:"",premium:""}];return c.jsxs("div",{className:"bg-dark-sidebar/50 rounded-xl overflow-hidden border border-dark-hover",children:[c.jsxs("div",{className:"grid grid-cols-3 bg-dark-hover/50 p-4 text-sm font-bold text-dark-text uppercase tracking-wider",children:[c.jsx("div",{children:"Feature"}),c.jsx("div",{className:"text-center text-dark-muted",children:"Free"}),c.jsx("div",{className:"text-center text-brand-primary",children:"Premium"})]}),c.jsx("div",{className:"divide-y divide-dark-hover",children:t.map((e,n)=>c.jsxs("div",{className:"grid grid-cols-3 p-4 text-sm hover:bg-white/5 transition-colors",children:[c.jsx("div",{className:"font-medium text-dark-text",children:e.name}),c.jsx("div",{className:"text-center text-dark-muted",children:e.free}),c.jsx("div",{className:"text-center font-bold text-white",children:e.premium})]},n))})]})},nB=({question:t,answer:e})=>{const[n,r]=T.useState(!1);return c.jsxs("div",{className:"",children:[c.jsxs("button",{className:"w-full flex items-center justify-between p-5 text-left font-medium text-dark-text hover:text-white transition-colors",onClick:()=>r(!n),children:[c.jsx("span",{children:t}),c.jsx(HM,{className:`transform transition-transform duration-300 ${n?"rotate-180":""}`,size:20})]}),c.jsx("div",{className:`overflow-hidden transition-all duration-300 ${n?"max-h-40 opacity-100":"max-h-0 opacity-0"}`,children:c.jsx("p",{className:"text-sm text-dark-muted leading-relaxed px-5 pb-5 pt-0",children:e})})]})},rB=()=>{const{info:t}=Kr(),e=[{icon:wm,title:"HD Screen Sharing",description:"Share your screen in 1080p 60fps quality with friends.",color:"text-blue-400",bg:"bg-blue-400/10"},{icon:WM,title:"Exclusive Profile Badge",description:"Stand out with the shiny Premium badge on your profile.",color:"text-purple-400",bg:"bg-purple-400/10"},{icon:l7,title:"Custom Profile Backgrounds",description:"Personalize your profile with custom banner images.",color:"text-yellow-400",bg:"bg-yellow-400/10"},{icon:VT,title:"Exclusive Stickers",description:"Access a library of premium stickers and custom emojis.",color:"text-orange-400",bg:"bg-orange-400/10"},{icon:Sm,title:"Soundboard",description:"Play fun sound effects in voice channels.",color:"text-pink-400",bg:"bg-pink-400/10"},{icon:n7,title:"Priority Support",description:"Get faster responses for all your support tickets.",color:"text-green-400",bg:"bg-green-400/10"}],n=[{q:"Can I cancel anytime?",a:"Yes, you can cancel your subscription at any time from your account settings. Your benefits will continue until the end of the billing period."},{q:"Is payment secure?",a:"Absolutely. We use Stripe for payment processing, which is the industry standard for security. We never store your card details."},{q:"Do benefits apply to all servers?",a:"Yes! Your Premium benefits travel with you to any server you join on Lumo Chat."}];return c.jsxs("div",{className:"animate-fade-in pb-10",children:[c.jsx("style",{children:`
        @keyframes shine {
          0% { transform: translateX(-100%); }
          100% { transform: translateX(100%); }
        }
        @keyframes float {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-10px); }
        }
        .shine-effect::after {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          width: 50%;
          height: 100%;
          background: linear-gradient(to right, transparent, rgba(255,255,255,0.3), transparent);
          transform: skewX(-20deg) translateX(-150%);
          animation: shine 3s infinite;
        }
        .float-animation {
          animation: float 6s ease-in-out infinite;
        }
      `}),c.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-600 p-8 text-white shadow-2xl transform transition-all hover:scale-[1.005] mb-8",children:[c.jsx("div",{className:"absolute top-0 right-0 -mr-16 -mt-16 w-80 h-80 rounded-full bg-white/10 blur-3xl animate-pulse"}),c.jsx("div",{className:"absolute bottom-0 left-0 -ml-16 -mb-16 w-64 h-64 rounded-full bg-black/20 blur-3xl animate-pulse",style:{animationDelay:"1s"}}),c.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center gap-6",children:[c.jsx("div",{className:"float-animation p-5 bg-white/10 backdrop-blur-md rounded-full shadow-inner ring-4 ring-white/20 shrink-0",children:c.jsx(Uo,{size:56,className:"text-white drop-shadow-[0_0_15px_rgba(255,255,255,0.5)]"})}),c.jsxs("div",{className:"text-center md:text-left",children:[c.jsxs("h1",{className:"text-4xl font-extrabold tracking-tight mb-2 drop-shadow-md",children:["Release the ",c.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 to-orange-300",children:"Boost!"})]}),c.jsx("p",{className:"text-indigo-100 font-medium text-lg leading-relaxed max-w-2xl",children:"Unlock the full potential of Lumo Chat. Get special perks, enhanced quality, and support the development."})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-xl font-bold text-dark-text mb-6 flex items-center gap-2",children:[c.jsx("span",{className:"w-1 h-6 bg-brand-primary rounded-full box-shadow-glow"}),"Premium Perks"]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:e.map((r,a)=>c.jsxs("div",{className:"group relative overflow-hidden p-5 rounded-xl bg-dark-sidebar border border-dark-hover hover:border-brand-primary/50 transition-all duration-300 hover:shadow-xl hover:shadow-brand-primary/10 hover:-translate-y-1",style:{animationDelay:`${a*100}ms`},children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700 ease-in-out pointer-events-none"}),c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:`p-3 rounded-lg ${r.bg} group-hover:scale-110 transition-transform duration-300`,children:c.jsx(r.icon,{size:28,className:`${r.color} drop-shadow-sm`})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-dark-text mb-1 group-hover:text-white transition-colors text-lg",children:r.title}),c.jsx("p",{className:"text-sm text-dark-muted leading-relaxed group-hover:text-gray-300",children:r.description})]})]})]},a))})]}),c.jsxs("div",{className:"bg-dark-bg rounded-2xl p-1 border-2 border-brand-primary/30 group hover:border-brand-primary/60 transition-colors relative overflow-hidden shadow-2xl",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 opacity-20 group-hover:opacity-40 transition-opacity"}),c.jsxs("div",{className:"bg-dark-sidebar/90 backdrop-blur-xl rounded-xl p-8 flex flex-col sm:flex-row items-center justify-between gap-6 relative z-10",children:[c.jsxs("div",{children:[c.jsx("div",{className:"inline-block px-3 py-1 rounded-full bg-gradient-to-r from-indigo-500 to-pink-500 text-[10px] font-bold text-white uppercase tracking-widest mb-3 shadow-lg",children:"BEST VALUE"}),c.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:"Monthly"}),c.jsxs("p",{className:"text-dark-muted text-sm flex items-center gap-2",children:[c.jsx(Bo,{size:16,className:"text-green-500"})," Secure payment"]})]}),c.jsxs("div",{className:"flex flex-col items-center gap-4",children:[c.jsxs("div",{className:"text-4xl font-extrabold text-white",children:["$4.99",c.jsx("span",{className:"text-sm text-dark-muted font-normal ml-1",children:"/mo"})]}),c.jsx("button",{className:"relative overflow-hidden px-10 py-4 bg-gradient-to-r from-indigo-600 to-pink-600 hover:from-indigo-500 hover:to-pink-500 rounded-xl text-white font-bold shadow-lg transform transition-all hover:scale-105 active:scale-95 shine-effect whitespace-nowrap",onClick:()=>t("deme sistemi u anda bakmda."),children:c.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["Subscribe Now ",c.jsx(Uo,{})]})})]})]})]})]}),c.jsx("div",{className:"space-y-8",children:c.jsxs("div",{children:[c.jsxs("h2",{className:"text-xl font-bold text-dark-text mb-6 flex items-center gap-2",children:[c.jsx("span",{className:"w-1 h-6 bg-purple-500 rounded-full box-shadow-glow"}),"Why Go Premium?"]}),c.jsx(tB,{})]})})]}),c.jsxs("div",{className:"mt-12",children:[c.jsxs("h2",{className:"text-xl font-bold text-dark-text mb-6 flex items-center gap-2",children:[c.jsx("span",{className:"w-1 h-6 bg-gray-500 rounded-full"}),"Common Questions"]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map((r,a)=>c.jsx("div",{className:"bg-dark-sidebar rounded-xl border border-dark-hover overflow-hidden",children:c.jsx(nB,{question:r.q,answer:r.a})},a))})]})]})},sB=[{id:"premium",label:"Premium",icon:Uo,category:"User Settings"},{id:"account",label:"My Account",icon:o7,category:"User Settings"},{id:"security",label:"Privacy & Security",icon:qM,category:"User Settings"},{id:"about",label:"About",icon:m1,category:"App Settings"}],iB=({isOpen:t,onClose:e})=>{const{currentUser:n,userProfile:r}=Ln(),{success:a,error:l,info:u}=Kr(),[h,m]=T.useState("account"),[p,y]=T.useState(r?.photoUrl||""),[b,x]=T.useState(r?.bannerUrl||""),[k,R]=T.useState(r?.themeColor||"#6366f1"),[j,N]=T.useState(r?.bio||""),[U,$]=T.useState(!1),[I,O]=T.useState(!1),[B,q]=T.useState({progress:0,speed:""}),[w,E]=T.useState(!1),[A,P]=T.useState({progress:0,speed:""}),L=T.useRef(null),z=T.useRef(null),[M,se]=T.useState(!1),[le,Y]=T.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[ee,Z]=T.useState(!1),Ee=sc(r);T.useEffect(()=>{y(r?.photoUrl||""),x(r?.bannerUrl||""),R(r?.themeColor||"#6366f1"),N(r?.bio||"")},[r]),T.useEffect(()=>{const de=pe=>{pe.key==="Escape"&&t&&e()};return t&&(document.addEventListener("keydown",de),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",de),document.body.style.overflow="unset"}},[t,e]);const Re=async de=>{if(!(!de||!n)){if(!de.type.startsWith("image/")){l("Please select an image file");return}if(de.type==="image/gif"&&!Ee){l("Animated GIF avatars are for Premium members only!");return}if(de.size>10*1024*1024){l("Image size must be less than 10MB");return}O(!0);try{const pe=await md(de,(ge,Se)=>{q({progress:ge,speed:Se})});await rt(Ae(he,"users",n.uid),{photoUrl:pe}),y(pe),a("Profile photo updated successfully!")}catch(pe){console.error("Error uploading photo:",pe),l("Failed to upload photo")}finally{O(!1),q({progress:0,speed:""}),L.current&&(L.current.value="")}}},H=async de=>{if(!(!de||!n)){if(!Ee){u("Custom banners are a Premium feature. Upgrade to unlock!");return}if(!de.type.startsWith("image/")){l("Please select an image file");return}if(de.size>10*1024*1024){l("Image size must be less than 10MB");return}E(!0);try{const pe=await md(de,(ge,Se)=>{P({progress:ge,speed:Se})});await rt(Ae(he,"users",n.uid),{bannerUrl:pe}),x(pe),a("Banner updated successfully!")}catch(pe){console.error("Error uploading banner:",pe),l("Failed to upload banner")}finally{E(!1),P({progress:0,speed:""}),z.current&&(z.current.value="")}}},W=async de=>{const pe=de.target.value;R(pe)},ie=async()=>{if(n){if(!Ee){u("Custom themes are a Premium feature!"),R(r?.themeColor||"#6366f1");return}$(!0);try{await rt(Ae(he,"users",n.uid),{themeColor:k}),a("Appearance updated!")}catch(de){console.error("Error updating appearance:",de),l("Failed to update appearance")}finally{$(!1)}}},ve=async()=>{if(n){$(!0);try{await rt(Ae(he,"users",n.uid),{bio:j.trim()}),a("Bio updated successfully")}catch(de){console.error("Error updating bio:",de),l("Failed to update bio")}finally{$(!1)}}},Te=async()=>{if(!(!n||!n.email)){if(!le.currentPassword||!le.newPassword||!le.confirmPassword){l("Please fill in all password fields");return}if(le.newPassword.length<6){l("New password must be at least 6 characters");return}if(le.newPassword!==le.confirmPassword){l("New passwords do not match");return}Z(!0);try{const de=qo.credential(n.email,le.currentPassword);await cj(n,de),await hj(n,le.newPassword),a("Password changed successfully"),Y({currentPassword:"",newPassword:"",confirmPassword:""})}catch(de){console.error("Error changing password:",de),de.code==="auth/wrong-password"?l("Current password is incorrect"):de.code==="auth/weak-password"?l("New password is too weak"):l("Failed to change password")}finally{Z(!1)}}},De=async de=>{if(n)try{await rt(Ae(he,"users",n.uid),{status:de}),a(de?"Status updated":"Status cleared")}catch(pe){console.error("Error updating status:",pe),l("Failed to update status")}},ae=async de=>{if(n)try{await rt(Ae(he,"users",n.uid),{presence:de}),a(`Status set to ${de}`)}catch{l("Failed to update status")}};if(!t)return null;const Le=sB.reduce((de,pe)=>(de[pe.category]||(de[pe.category]=[]),de[pe.category].push(pe),de),{}),Ie=()=>{switch(h){case"premium":return c.jsx(rB,{});case"account":return c.jsxs("div",{className:"space-y-8",children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"My Account"}),c.jsxs("div",{className:"rounded-lg overflow-hidden border border-dark-hover relative min-h-[300px]",style:{borderColor:k},children:[c.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-colors",style:{backgroundColor:k,backgroundImage:b?`url(${b})`:`linear-gradient(to bottom right, ${k}, #000)`}}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent"}),b?.endsWith(".gif")&&c.jsx("div",{className:"absolute top-2 right-2 px-2 py-1 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm font-bold z-10",children:"GIF"}),c.jsxs("div",{className:"relative z-10 p-6 flex flex-col items-center justify-end h-full min-h-[300px] text-center mt-auto",children:[c.jsxs("div",{className:"relative group mb-4",children:[p?c.jsx("img",{src:p,alt:"Profile",className:"w-28 h-28 rounded-full object-cover border-4",style:{borderColor:k},onError:de=>{de.target.style.display="none",de.target.nextSibling.style.display="flex"}},p):null,c.jsx("div",{className:"w-28 h-28 rounded-full flex items-center justify-center text-white font-bold text-4xl border-4",style:{display:p?"none":"flex",backgroundColor:k,borderColor:k},children:r?.displayName?.[0]?.toUpperCase()||"U"}),c.jsx("div",{className:"absolute inset-0 rounded-full bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer border-4 border-transparent",onClick:()=>L.current?.click(),children:c.jsx(Em,{className:"text-white",size:32})})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center justify-center gap-2 shadow-black drop-shadow-md",children:[r?.displayName,Ee&&c.jsx(Uo,{className:"text-brand-primary",title:"Premium Member"})]}),c.jsx("p",{className:"text-gray-200 text-sm font-medium shadow-black drop-shadow-md",children:n?.email}),c.jsx("div",{className:"flex justify-center gap-2 mt-3",children:c.jsx("span",{className:"text-xs px-3 py-1 rounded-full bg-black/40 backdrop-blur-md border border-white/20 text-white capitalize font-medium",children:r?.role||"member"})})]})]})]}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Profile Photo"}),c.jsx("input",{type:"file",ref:L,onChange:de=>Re(de.target.files?.[0]),accept:"image/*",className:"hidden"}),c.jsx("div",{className:"flex gap-3 mb-4",children:c.jsx("button",{onClick:()=>L.current?.click(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-dark-sidebar hover:bg-dark-hover border border-dark-hover text-dark-text rounded-lg transition-colors disabled:opacity-50",disabled:I,children:I?c.jsxs("span",{className:"text-sm",children:["Uploading ",Math.round(B.progress),"%..."]}):c.jsxs(c.Fragment,{children:[c.jsx(zv,{size:20}),"Upload New Photo"]})})})]}),c.jsxs("div",{className:`rounded-lg p-4 relative ${Ee?"bg-dark-bg":"bg-dark-bg/50"}`,children:[!Ee&&c.jsxs("div",{className:"absolute inset-0 z-10 bg-black/60 backdrop-blur-[1px] rounded-lg flex flex-col items-center justify-center text-center p-4",children:[c.jsx(Uo,{size:32,className:"text-brand-primary mb-2 animate-bounce"}),c.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:"Unlock Profile Appearance"}),c.jsx("p",{className:"text-sm text-dark-muted mb-4 max-w-xs",children:"Customize your banner, theme colors, and use animated GIFs with Premium."}),c.jsx(at,{variant:"primary",onClick:()=>m("premium"),children:"View Premium Plans"})]}),c.jsxs("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-6 flex items-center gap-2",children:[c.jsx(QM,{})," Profile Appearance ",c.jsx("span",{className:"text-xs normal-case px-2 py-0.5 bg-brand-primary/20 text-brand-primary rounded",children:"Premium"})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-sm font-medium text-dark-text mb-2",children:"Profile Banner"}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("input",{type:"file",ref:z,onChange:de=>H(de.target.files?.[0]),accept:"image/*",className:"hidden"}),c.jsx("button",{onClick:()=>z.current?.click(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-8 border-2 border-dashed border-dark-hover hover:border-brand-primary rounded-lg text-dark-muted hover:text-brand-primary transition-colors disabled:opacity-50",disabled:w,children:w?c.jsxs("span",{children:["Uploading ",Math.round(A.progress),"%..."]}):c.jsxs("div",{className:"text-center",children:[c.jsx(Em,{size:24,className:"mx-auto mb-1"}),c.jsx("div",{children:"Upload Banner Image"}),c.jsx("div",{className:"text-xs opacity-70",children:"JPG, PNG, GIF"})]})}),b&&c.jsxs("div",{className:"w-32 h-24 rounded-lg overflow-hidden relative group shrink-0",children:[c.jsx("img",{src:b,className:"w-full h-full object-cover"}),c.jsx("button",{onClick:()=>{x(""),rt(Ae(he,"users",n.uid),{bannerUrl:""})},className:"absolute inset-0 bg-black/60 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity text-red-500 font-bold",children:"Remove"})]})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-sm font-medium text-dark-text mb-2",children:"Theme Color"}),c.jsxs("div",{className:"flex gap-4 items-center",children:[c.jsx("input",{type:"color",value:k,onChange:W,className:"w-16 h-16 rounded-lg cursor-pointer bg-transparent border-0 p-0"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-dark-text font-mono bg-dark-input px-3 py-1 rounded border border-dark-hover",children:k}),c.jsx("div",{className:"text-xs text-dark-muted mt-1",children:"Select a color to accent your profile."})]}),c.jsx("div",{className:"flex-1 text-right",children:c.jsx(at,{onClick:ie,disabled:k===r?.themeColor,children:"Save Color"})})]})]})]}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Online Status"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[{key:"online",label:"Online",color:"bg-green-500",desc:"Visible"},{key:"idle",label:"Idle",color:"bg-yellow-500",desc:"Away"},{key:"dnd",label:"Do Not Disturb",color:"bg-red-500",desc:"No notifications"},{key:"invisible",label:"Invisible",color:"bg-gray-500",desc:"Hidden"}].map(de=>c.jsxs("button",{onClick:()=>ae(de.key),className:`p-3 rounded-lg border transition-all text-left flex items-center gap-3 ${r?.presence===de.key||!r?.presence&&de.key==="online"?"border-brand-primary bg-brand-primary/10":"border-dark-hover hover:border-dark-muted bg-dark-sidebar"}`,children:[c.jsx("span",{className:`w-3 h-3 rounded-full ${de.color}`}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-medium text-dark-text",children:de.label}),c.jsx("div",{className:"text-[10px] text-dark-muted",children:de.desc})]})]},de.key))})]}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Custom Status"}),r?.status?c.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-sidebar rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-2xl",children:r.status.emoji}),c.jsx("span",{className:"text-dark-text",children:r.status.text})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(at,{variant:"secondary",onClick:()=>se(!0),children:"Edit"}),c.jsx(at,{variant:"danger",onClick:()=>De(null),children:"Clear"})]})]}):c.jsxs("div",{className:"text-center py-4 border border-dashed border-dark-hover rounded-lg",children:[c.jsx("p",{className:"text-dark-muted text-sm mb-3",children:"No custom status set"}),c.jsx(at,{variant:"primary",size:"sm",onClick:()=>se(!0),children:"Set a Status"})]})]}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"About Me"}),c.jsx("textarea",{placeholder:"Tell others about yourself...",value:j,onChange:de=>N(de.target.value),maxLength:190,rows:4,className:`w-full bg-dark-input text-dark-text px-4 py-3 rounded-lg
                           border border-transparent focus:border-brand-primary
                           outline-none transition-colors duration-200
                           placeholder:text-dark-muted resize-none`}),c.jsxs("div",{className:"flex justify-between items-center mt-2",children:[c.jsxs("span",{className:"text-xs text-dark-muted",children:[j.length,"/190"]}),c.jsx(at,{variant:"primary",onClick:ve,disabled:U||j===r?.bio,children:U?"Updating...":"Save"})]})]}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Account Info"}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"flex justify-between items-center py-2 border-b border-dark-hover",children:c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-dark-muted uppercase",children:"Display Name"}),c.jsx("div",{className:"text-dark-text font-medium",children:r?.displayName})]})}),c.jsx("div",{className:"flex justify-between items-center py-2 border-b border-dark-hover",children:c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-dark-muted uppercase",children:"Email"}),c.jsx("div",{className:"text-dark-text font-medium",children:n?.email})]})}),c.jsx("div",{className:"flex justify-between items-center py-2",children:c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-dark-muted uppercase",children:"Role"}),c.jsx("div",{className:"text-dark-text font-medium capitalize",children:r?.role||"member"})]})})]})]})]});case"security":return c.jsxs("div",{className:"space-y-8",children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Privacy & Security"}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Change Password"}),c.jsxs("div",{className:"space-y-4 max-w-md",children:[c.jsx(Sn,{label:"Current Password",type:"password",placeholder:"Enter current password",value:le.currentPassword,onChange:de=>Y({...le,currentPassword:de.target.value})}),c.jsx(Sn,{label:"New Password",type:"password",placeholder:"Enter new password (min 6 characters)",value:le.newPassword,onChange:de=>Y({...le,newPassword:de.target.value})}),c.jsx(Sn,{label:"Confirm New Password",type:"password",placeholder:"Confirm new password",value:le.confirmPassword,onChange:de=>Y({...le,confirmPassword:de.target.value})}),c.jsx(at,{variant:"primary",onClick:Te,disabled:ee||!le.currentPassword||!le.newPassword||!le.confirmPassword,children:ee?"Changing Password...":"Change Password"})]})]})]});case"about":return c.jsxs("div",{className:"space-y-8",children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"About"}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-6",children:[c.jsx("h2",{className:"text-xl font-bold text-dark-text mb-2",children:"Lumo Chat"}),c.jsxs("div",{className:"space-y-4 text-dark-muted text-sm",children:[c.jsx("p",{children:"A modern real-time chat application built for seamless communication."}),c.jsxs("div",{children:[c.jsx("div",{className:"font-semibold text-dark-text",children:"Version"}),c.jsx("div",{children:"1.9.7"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"font-semibold text-dark-text",children:"Developer"}),c.jsx("div",{children:"Dazlakss"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"font-semibold text-dark-text",children:"Tech Stack"}),c.jsx("div",{children:"React, Firebase, TailwindCSS, Electron"})]})]})]}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Acknowledgments"}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"flex items-center gap-4 p-3 bg-dark-sidebar rounded-lg border border-dark-hover",children:c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"text-dark-text font-medium",children:"GIPHY"}),c.jsx("div",{className:"text-xs text-dark-muted",children:"We use GIPHY for finding and sharing GIFs."}),c.jsx("a",{href:"https://giphy.com",target:"_blank",rel:"noopener noreferrer",className:"mt-2 text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500 block w-fit hover:opacity-80 transition-opacity",children:"Powered by GIPHY"})]})}),c.jsx("div",{className:"flex items-center gap-4 p-3 bg-dark-sidebar rounded-lg border border-dark-hover",children:c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"text-dark-text font-medium",children:"Cloudinary"}),c.jsx("div",{className:"text-xs text-dark-muted",children:"Robust cloud storage and delivery for images and files."}),c.jsx("a",{href:"https://cloudinary.com",target:"_blank",rel:"noopener noreferrer",className:"mt-2 text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-sky-400 block w-fit hover:opacity-80 transition-opacity",children:"Powered by Cloudinary"})]})}),c.jsx("div",{className:"flex items-center gap-4 p-3 bg-dark-sidebar rounded-lg border border-dark-hover",children:c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"text-dark-text font-medium",children:"ImgBB"}),c.jsx("div",{className:"text-xs text-dark-muted",children:"Simple and fast image hosting service."}),c.jsx("a",{href:"https://imgbb.com",target:"_blank",rel:"noopener noreferrer",className:"mt-2 text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-gray-200 to-gray-400 block w-fit hover:opacity-80 transition-opacity",children:"Powered by ImgBB"})]})})]})]})]});default:return null}};return c.jsxs("div",{className:"fixed inset-0 bg-black/80 z-50 flex flex-col md:flex-row pt-safe-top md:pt-0",role:"dialog","aria-modal":"true",children:[c.jsx("div",{className:"w-full md:w-56 bg-dark-sidebar flex flex-col shrink-0 border-b md:border-b-0 md:border-r border-dark-hover",children:c.jsx("div",{className:"flex md:flex-col overflow-x-auto md:overflow-y-auto py-2 md:py-4 px-2 gap-2 md:gap-0 no-scrollbar",children:Object.entries(Le).map(([de,pe])=>c.jsxs("div",{className:"mb-0 md:mb-4 flex md:block gap-2 md:gap-0 shrink-0",children:[c.jsx("div",{className:"hidden md:block px-3 py-2 text-xs font-semibold text-dark-muted uppercase tracking-wide",children:de}),pe.map(ge=>{const Se=ge.icon;return c.jsxs("button",{onClick:()=>m(ge.id),className:`whitespace-nowrap flex items-center gap-2 md:gap-3 px-3 py-2 rounded-md text-left transition-colors ${h===ge.id?"bg-dark-hover text-dark-text":"text-dark-muted hover:text-dark-text hover:bg-dark-hover/50"}`,children:[c.jsx(Se,{size:18}),c.jsx("span",{className:"text-sm",children:ge.label})]},ge.id)})]},de))})}),c.jsxs("div",{className:"flex-1 flex flex-col bg-dark-bg overflow-hidden min-w-0",children:[c.jsx("div",{className:"flex justify-end p-4 shrink-0",children:c.jsx("button",{onClick:e,className:"p-2 hover:bg-dark-hover rounded-full transition-colors group",title:"Close",children:c.jsx($n,{size:24,className:"text-dark-muted group-hover:text-dark-text"})})}),c.jsx("div",{className:"flex-1 overflow-y-auto px-4 md:px-10 pb-10",children:c.jsx("div",{className:h==="premium"?"w-full":"max-w-2xl mx-auto md:mx-0",children:Ie()})})]}),M&&c.jsx(eB,{currentStatus:r?.status,onStatusChange:De,onClose:()=>se(!1)})]})},aB=()=>{const[t,e]=T.useState([]),{channels:n}=Wa();T.useEffect(()=>{const a=qr(wt(he,"adminLogs"),vm("timestamp","desc"),Mv(100));return gr(a,u=>{const h=[];u.forEach(m=>{h.push({id:m.id,...m.data()})}),e(h)})},[]);const r=a=>{const l=n.find(u=>u.id===a);return l?`#${l.name}`:"Unknown Channel"};return c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold text-dark-text mb-6",children:"Admin Logs"}),c.jsx("div",{className:"space-y-3 max-h-[520px] overflow-y-auto pr-2",children:t.length===0?c.jsx("div",{className:"text-center text-dark-muted py-8",children:"No logs yet"}):t.map(a=>c.jsxs("div",{className:"bg-dark-bg p-5 rounded-xl hover:bg-dark-hover transition-colors",children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsx("div",{className:"flex items-center gap-2",children:a.type==="message_delete"?c.jsxs(c.Fragment,{children:[c.jsx(Pi,{className:"text-admin",size:20}),c.jsx("span",{className:"font-semibold text-dark-text",children:"Message Deleted"})]}):a.type==="message_edit"?c.jsxs(c.Fragment,{children:[c.jsx(nc,{className:"text-blue-400",size:20}),c.jsx("span",{className:"font-semibold text-dark-text",children:"Message Edited"})]}):c.jsx("span",{className:"font-semibold text-dark-text",children:a.type})}),c.jsx("span",{className:"text-xs text-dark-muted",children:a.timestamp&&cp(a.timestamp)})]}),c.jsxs("div",{className:"space-y-1 text-sm",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx("span",{className:"text-dark-muted",children:"Channel:"}),c.jsx("span",{className:"text-dark-text font-medium",children:r(a.channelId)})]}),a.type==="message_delete"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx("span",{className:"text-dark-muted",children:"Original Author:"}),c.jsx("span",{className:"text-dark-text",children:a.originalAuthorName||a.originalUserName||"Unknown"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("span",{className:"text-dark-muted",children:"Message:"}),c.jsxs("span",{className:"text-dark-text italic",children:['"',a.messageText||a.deletedText||"(empty message)",'"']})]})]}),a.type==="message_edit"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx("span",{className:"text-dark-muted",children:"Before:"}),c.jsxs("span",{className:"text-dark-text italic",children:['"',a.originalText,'"']})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("span",{className:"text-dark-muted",children:"After:"}),c.jsxs("span",{className:"text-blue-400 italic",children:['"',a.newText,'"']})]})]})]})]},a.id))})]})},oB=[{id:"users",label:"Users",icon:g1,category:"Moderation"},{id:"roles",label:"Roles",icon:OT,category:"Moderation"},{id:"channels",label:"Channels",icon:dp,category:"Server Settings"},{id:"server",label:"Overview",icon:m1,category:"Server Settings"},{id:"logs",label:"Audit Log",icon:NM,category:"Server Settings"},{id:"notifications",label:"Notifications",icon:i7,category:"Maintenance"},{id:"cleanup",label:"Cleanup",icon:XM,category:"Maintenance"}],lB=({isOpen:t,onClose:e})=>{const{userProfile:n}=Ln(),{users:r,channels:a,server:l,currentServer:u}=Wa(),[h,m]=T.useState("users"),[p,y]=T.useState(null),[b,x]=T.useState(""),[k,R]=T.useState(""),[j,N]=T.useState("text"),[U,$]=T.useState(null),[I,O]=T.useState([]),[B,q]=T.useState(null),[w,E]=T.useState({name:"",color:"#5865f2"}),[A,P]=T.useState(null),[L,z]=T.useState(null),{success:M,error:se}=Kr(),[le,Y]=T.useState(0),[ee,Z]=T.useState(!1),[Ee,Re]=T.useState(null);T.useEffect(()=>{const F=Q=>{Q.key==="Escape"&&t&&e()};return t&&(document.addEventListener("keydown",F),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",F),document.body.style.overflow="unset"}},[t,e]),T.useEffect(()=>{if(!u||u==="home")return;const F=qr(wt(he,"servers",u,"roles"));return gr(F,J=>{const Ce=[];J.forEach($e=>{Ce.push({id:$e.id,...$e.data()})}),O(Ce)})},[u]),T.useEffect(()=>{if(h!=="cleanup")return;(async()=>{try{const Q=await Ga(wt(he,"inviteCodes")),J=new Date;let Ce=0;Q.forEach($e=>{const Qe=$e.data(),ct=Qe.expiresAt?.toDate()<J,$t=!Qe.isActive||Qe.uses>=Qe.maxUses;(ct||$t)&&Ce++}),Y(Ce)}catch(Q){console.error("Error fetching cleanup stats:",Q)}})()},[h]);const H=async()=>{Z(!0);try{const F=await Ga(wt(he,"inviteCodes")),Q=new Date,J=iw(he);let Ce=0;F.forEach($e=>{const Qe=$e.data(),ct=Qe.expiresAt?.toDate()<Q,$t=!Qe.isActive||Qe.uses>=Qe.maxUses;(ct||$t)&&(J.delete(Ae(he,"inviteCodes",$e.id)),Ce++)}),Ce>0?(await J.commit(),M(`${Ce} expired invite code(s) deleted`),Y(0)):M("No expired invite codes to delete")}catch(F){console.error("Error cleaning invite codes:",F),se("Failed to clean invite codes")}finally{Z(!1),Re(null)}};if(!t||n?.role!=="admin")return null;const W=async(F,Q)=>{try{await rt(Ae(he,"users",F),{role:Q}),u&&await rt(Ae(he,"servers",u,"members",F),{role:Q}),M(`Role updated to ${Q}`),y(null)}catch(J){console.error("Error updating user role:",J),se(`Failed to update role: ${J.message}`)}},ie=async(F,Q)=>{try{await rt(Ae(he,"users",F),{isMuted:!Q})}catch(J){console.error("Error toggling mute:",J)}},ve=async(F,Q)=>{try{await rt(Ae(he,"users",F),{isBanned:!Q})}catch(J){console.error("Error toggling ban:",J)}},Te=async()=>{if(!(!b.trim()||!u))try{await Bn(wt(he,"servers",u,"channels"),{name:b.trim(),type:j,description:j==="text"?k.trim():"",position:a.length,createdAt:bt()}),x(""),R(""),N("text"),M(`${j==="voice"?"Sesli":"Yaz"} kanal oluturuldu!`)}catch(F){console.error("Error creating channel:",F),se("Kanal oluturulamad")}},De=async(F,Q)=>{try{await rt(Ae(he,"servers",u,"channels",F),Q),$(null)}catch(J){console.error("Error updating channel:",J)}},ae=async()=>{if(!(!L?.data||!u))try{await Yr(Ae(he,"servers",u,"channels",L.data))}catch(F){console.error("Error deleting channel:",F)}},Le=async(F,Q)=>{if(u)try{await rt(Ae(he,"servers",u,"channels",F),{locked:!Q})}catch(J){console.error("Error toggling channel lock:",J)}},Ie=async()=>{if(w.name.trim())try{const F=I.reduce((Q,J)=>Math.max(Q,J.position||0),0);u&&await Bn(wt(he,"servers",u,"roles"),{name:w.name.trim(),color:w.color,position:F+1,createdAt:bt()}),E({name:"",color:"#5865f2"})}catch(F){console.error("Error creating role:",F)}},de=async(F,Q)=>{if(u)try{await rt(Ae(he,"servers",u,"roles",F),Q),q(null)}catch(J){console.error("Error updating role:",J)}},pe=async()=>{if(!L?.data)return;const F=L.data;try{const Q=I.find(Qe=>Qe.id===F);if(!Q)return;const J=Q.name,Ce=iw(he),$e=r.filter(Qe=>(Qe.serverRole||Qe.role)===J);if($e.forEach(Qe=>{if(Qe.role===J){const ct=Ae(he,"users",Qe.id);Ce.update(ct,{role:"member"})}if(u){const ct=Ae(he,"servers",u,"members",Qe.id);Ce.update(ct,{role:"member"})}}),u){const Qe=Ae(he,"servers",u,"roles",F);Ce.delete(Qe),await Ce.commit(),M(`Role '${J}' deleted and ${$e.length} users reassigned to Member`)}}catch(Q){console.error("Error deleting role:",Q),se(`Failed to delete role: ${Q.message}`)}},ge=[{id:"admin",name:"admin",color:"#f23f42",isDefault:!0,position:-3},{id:"moderator",name:"moderator",color:"#faa81a",isDefault:!0,position:-2},{id:"member",name:"member",color:"#80848e",isDefault:!0,position:-1},...I].sort((F,Q)=>(F.position??999)-(Q.position??999)),Se=(F,Q)=>{P(Q),F.dataTransfer.effectAllowed="move"},it=F=>{F.preventDefault(),F.dataTransfer.dropEffect="move"},_e=async(F,Q)=>{if(F.preventDefault(),!A||A===Q){P(null);return}const J=ge.find($e=>$e.id===A),Ce=ge.find($e=>$e.id===Q);if(J?.isDefault||Ce?.isDefault){P(null);return}try{const $e=J.position??0,Qe=Ce.position??0;u&&(await rt(Ae(he,"servers",u,"roles",A),{position:Qe}),await rt(Ae(he,"servers",u,"roles",Q),{position:$e}))}catch($e){console.error("Error reordering roles:",$e)}P(null)},Ue=oB.reduce((F,Q)=>(F[Q.category]||(F[Q.category]=[]),F[Q.category].push(Q),F),{}),Me=()=>{switch(h){case"users":return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"User Management"}),c.jsx("p",{className:"text-dark-muted",children:"Manage server members, assign roles, and moderate users."}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[c.jsxs("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:["Members  ",r.length]}),c.jsx("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:r.map(F=>c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-dark-hover transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold",children:F.displayName?.[0]?.toUpperCase()||"U"}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-medium text-dark-text",children:F.displayName}),c.jsx("span",{className:"text-xs px-2 py-0.5 rounded",style:{backgroundColor:`${ge.find(Q=>Q.name===(F.serverRole||F.role))?.color}20`,color:ge.find(Q=>Q.name===(F.serverRole||F.role))?.color},children:F.serverRole||F.role}),F.isMuted&&c.jsx("span",{className:"text-xs text-yellow-500",children:"MUTED"}),F.isBanned&&c.jsx("span",{className:"text-xs text-red-500",children:"BANNED"})]}),c.jsx("div",{className:"text-sm text-dark-muted",children:F.email})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(at,{size:"sm",variant:F.isMuted?"warning":"secondary",onClick:()=>ie(F.id,F.isMuted),children:F.isMuted?"Unmute":"Mute"}),c.jsx(at,{size:"sm",variant:F.isBanned?"danger":"secondary",onClick:()=>ve(F.id,F.isBanned),children:F.isBanned?"Unban":"Ban"}),c.jsx(at,{size:"sm",variant:"ghost",onClick:()=>y(F),children:c.jsx(nc,{size:16})})]})]},F.id))})]})]});case"roles":return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Roles"}),c.jsx("p",{className:"text-dark-muted mt-1",children:"Use roles to organize your members and customize permissions."})]}),c.jsxs("div",{className:"bg-dark-bg rounded-xl p-6 border border-dark-hover",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-primary/20 flex items-center justify-center",children:c.jsx(Io,{className:"text-brand-primary",size:24})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-dark-text",children:"Create New Role"}),c.jsx("p",{className:"text-sm text-dark-muted",children:"Add a custom role with a unique color"})]})]}),c.jsxs("div",{className:"flex gap-4 items-end",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-xs font-medium text-dark-muted uppercase tracking-wide mb-2",children:"Role Name"}),c.jsx(Sn,{placeholder:"e.g. VIP, Helper, Supporter...",value:w.name,onChange:F=>E({...w,name:F.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-dark-muted uppercase tracking-wide mb-2",children:"Color"}),c.jsx("div",{className:"relative",children:c.jsx("input",{type:"color",value:w.color,onChange:F=>E({...w,color:F.target.value}),className:"w-14 h-10 rounded-lg cursor-pointer border-2 border-dark-hover hover:border-brand-primary transition-colors",style:{backgroundColor:w.color}})})]}),c.jsxs(at,{onClick:Ie,disabled:!w.name.trim(),className:"px-6",children:[c.jsx(Io,{size:18,className:"mr-1"}),"Create Role"]})]})]}),c.jsxs("div",{className:"bg-dark-bg rounded-xl border border-dark-hover overflow-hidden",children:[c.jsxs("div",{className:"px-6 py-4 border-b border-dark-hover flex items-center justify-between",children:[c.jsxs("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide",children:["Roles  ",ge.length]}),c.jsx("span",{className:"text-xs text-dark-muted",children:"Drag custom roles to reorder hierarchy"})]}),c.jsxs("div",{className:"divide-y divide-dark-hover",children:[ge.map((F,Q)=>c.jsxs("div",{draggable:!F.isDefault,onDragStart:J=>Se(J,F.id),onDragOver:it,onDrop:J=>_e(J,F.id),className:Vt("group flex items-center justify-between px-6 py-4 transition-colors",!F.isDefault&&"cursor-grab active:cursor-grabbing hover:bg-dark-sidebar/50",F.isDefault&&"opacity-70",A===F.id&&"opacity-50 bg-brand-primary/10"),children:[c.jsxs("div",{className:"flex items-center gap-4",children:[!F.isDefault&&c.jsx("div",{className:"text-dark-muted opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(BM,{size:20})}),c.jsx("div",{className:"w-5 h-5 rounded-full ring-2 ring-offset-2 ring-offset-dark-bg",style:{backgroundColor:F.color,ringColor:F.color}}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-semibold text-dark-text",style:{color:F.color},children:F.name}),F.isDefault&&c.jsx("span",{className:"text-[10px] px-2 py-0.5 bg-dark-hover text-dark-muted rounded-full uppercase font-medium",children:"System"})]}),c.jsx("p",{className:"text-xs text-dark-muted mt-0.5",children:F.isDefault?"Default system role":`Position: ${F.position??0}`})]})]}),!F.isDefault&&c.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>q(F),className:"p-2 rounded-lg hover:bg-dark-hover text-dark-muted hover:text-brand-primary transition-colors",title:"Edit Role",children:c.jsx(nc,{size:18})}),c.jsx("button",{onClick:()=>z({type:"role",data:F.id,name:F.name}),className:"p-2 rounded-lg hover:bg-red-500/20 text-dark-muted hover:text-red-500 transition-colors",title:"Delete Role",children:c.jsx(Pi,{size:18})})]})]},F.id)),ge.length===0&&c.jsxs("div",{className:"px-6 py-12 text-center",children:[c.jsx(OT,{className:"mx-auto text-dark-muted mb-3",size:40}),c.jsx("p",{className:"text-dark-muted",children:"No roles created yet"}),c.jsx("p",{className:"text-xs text-dark-muted mt-1",children:"Create your first role above!"})]})]})]})]});case"channels":return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Channels"}),c.jsx("p",{className:"text-dark-muted",children:"Create and manage server channels."}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Create New Channel"}),c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsxs("div",{className:"flex gap-2 mb-2",children:[c.jsx("button",{onClick:()=>N("text"),className:`flex-1 py-2 px-4 rounded-lg border transition-colors ${j==="text"?"border-brand-primary bg-brand-primary/20 text-brand-primary":"border-dark-hover text-dark-muted hover:border-dark-muted"}`,children:"# Yaz Kanal"}),c.jsx("button",{onClick:()=>N("voice"),className:`flex-1 py-2 px-4 rounded-lg border transition-colors ${j==="voice"?"border-green-500 bg-green-500/20 text-green-500":"border-dark-hover text-dark-muted hover:border-dark-muted"}`,children:" Sesli Kanal"})]}),c.jsx(Sn,{placeholder:"Channel name",value:b,onChange:F=>x(F.target.value)}),j==="text"&&c.jsx(Sn,{placeholder:"Channel topic/description (Optional)",value:k,onChange:F=>R(F.target.value)})]}),c.jsxs(at,{onClick:Te,className:"h-fit mt-auto",children:[c.jsx(Io,{size:20}),"Create"]})]})]}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[c.jsxs("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:["Text Channels  ",a.length]}),c.jsx("div",{className:"space-y-2",children:a.map(F=>c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-dark-hover transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(dp,{className:"text-dark-muted"}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-medium text-dark-text",children:F.name}),F.description&&c.jsx("span",{className:"text-xs text-dark-muted ml-2 truncate max-w-[200px]",children:F.description}),F.locked&&c.jsxs("span",{className:"text-xs px-2 py-0.5 rounded bg-yellow-500/20 text-yellow-500 flex items-center gap-1",children:[c.jsx(lp,{size:12}),"LOCKED"]})]}),c.jsx("div",{className:"text-xs text-dark-muted",children:F.locked?"Only admins can send messages":"Everyone can send messages"})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(at,{size:"sm",variant:"ghost",onClick:()=>$(F),children:c.jsx(nc,{size:16})}),c.jsx(at,{size:"sm",variant:F.locked?"warning":"secondary",onClick:()=>Le(F.id,F.locked),children:F.locked?"Unlock":"Lock"}),c.jsx(at,{size:"sm",variant:"danger",onClick:()=>z({type:"channel",data:F.id,name:F.name}),children:c.jsx(Pi,{size:16})})]})]},F.id))})]})]});case"server":return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Server Overview"}),c.jsx("p",{className:"text-dark-muted",children:"View server statistics and information."}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-6",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("div",{className:"text-xs text-dark-muted uppercase tracking-wide mb-1",children:"Server Name"}),c.jsx("div",{className:"text-2xl font-bold text-dark-text",children:l?.name||"Unknown"})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{className:"bg-dark-sidebar p-4 rounded-lg text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-brand-primary mb-1",children:r.length}),c.jsx("div",{className:"text-sm text-dark-muted",children:"Members"})]}),c.jsxs("div",{className:"bg-dark-sidebar p-4 rounded-lg text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-green-500 mb-1",children:a.length}),c.jsx("div",{className:"text-sm text-dark-muted",children:"Channels"})]}),c.jsxs("div",{className:"bg-dark-sidebar p-4 rounded-lg text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-purple-500 mb-1",children:ge.length}),c.jsx("div",{className:"text-sm text-dark-muted",children:"Roles"})]})]})]})]});case"logs":return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Audit Log"}),c.jsx("p",{className:"text-dark-muted",children:"View server activity and moderation history."}),c.jsx(aB,{})]});case"notifications":return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Push Notifications"}),c.jsx("p",{className:"text-dark-muted",children:"View and copy user FCM tokens for manual testing."}),c.jsxs("div",{className:"bg-dark-bg rounded-lg border border-dark-hover overflow-hidden",children:[c.jsx("div",{className:"px-6 py-4 border-b border-dark-hover",children:c.jsxs("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide",children:["Registered Devices  ",r.filter(F=>F.fcmTokens).length," / ",r.length]})}),c.jsx("div",{className:"divide-y divide-dark-hover max-h-[600px] overflow-y-auto",children:r.map(F=>c.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-dark-sidebar/50 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-primary flex items-center justify-center text-white shrink-0",children:F.displayName?.[0]?.toUpperCase()||"U"}),c.jsxs("div",{className:"overflow-hidden",children:[c.jsx("div",{className:"font-medium text-dark-text truncate",children:F.displayName}),c.jsx("div",{className:"text-xs font-mono text-dark-muted truncate max-w-[400px]",children:F.fcmTokens||"No token registered"})]})]}),c.jsx("div",{className:"flex items-center gap-2",children:F.fcmTokens?c.jsxs(at,{size:"sm",variant:"secondary",onClick:()=>{navigator.clipboard.writeText(F.fcmTokens),M("Token copied to clipboard!")},children:[c.jsx(PT,{size:16,className:"mr-1"}),"Copy"]}):c.jsx("span",{className:"text-xs text-dark-muted italic px-2",children:"Offline/No Device"})})]},F.id))})]})]});case"cleanup":return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Database Cleanup"}),c.jsx("p",{className:"text-dark-muted",children:"Remove unused data to keep your database clean and reduce storage costs."}),c.jsx("div",{className:"grid gap-4",children:c.jsxs("div",{className:"bg-dark-bg rounded-lg p-6 border border-dark-hover",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-dark-text",children:"Expired Invite Codes"}),c.jsx("p",{className:"text-sm text-dark-muted mt-1",children:"Expired, used, or deactivated invite codes that are no longer valid."})]}),c.jsx("div",{className:"text-3xl font-bold text-yellow-500",children:le})]}),c.jsxs(at,{variant:"warning",onClick:()=>Re("invites"),disabled:le===0||ee,className:"w-full",children:[c.jsx(Pi,{size:20}),ee?"Cleaning...":"Clean Invite Codes"]})]})}),c.jsxs("div",{className:"text-xs text-dark-muted bg-dark-sidebar p-4 rounded-lg",children:[c.jsx("strong",{children:"Note:"})," These actions are irreversible. Deleted data cannot be recovered. Running cleanup periodically helps keep your Firestore quota usage low."]})]});default:return null}};return c.jsxs("div",{className:"fixed inset-0 bg-black/80 z-[100] flex flex-col md:flex-row pt-safe-top md:pt-0",children:[c.jsx("div",{className:"w-full md:w-56 bg-dark-sidebar flex flex-col shrink-0 border-b md:border-b-0 md:border-r border-dark-hover",children:c.jsx("div",{className:"flex md:flex-col overflow-x-auto md:overflow-y-auto py-2 md:py-4 px-2 gap-2 md:gap-0 no-scrollbar",children:Object.entries(Ue).map(([F,Q])=>c.jsxs("div",{className:"mb-0 md:mb-4 flex md:block gap-2 md:gap-0 shrink-0",children:[c.jsx("div",{className:"hidden md:block px-3 py-2 text-xs font-semibold text-dark-muted uppercase tracking-wide",children:F}),Q.map(J=>{const Ce=J.icon;return c.jsxs("button",{onClick:()=>m(J.id),className:Vt("whitespace-nowrap flex items-center gap-2 md:gap-3 px-3 py-2 rounded-md text-left transition-colors",h===J.id?"bg-dark-hover text-dark-text":"text-dark-muted hover:text-dark-text hover:bg-dark-hover/50"),children:[c.jsx(Ce,{size:18}),c.jsx("span",{className:"text-sm",children:J.label})]},J.id)})]},F))})}),c.jsxs("div",{className:"flex-1 flex flex-col bg-dark-bg overflow-hidden min-w-0",children:[c.jsx("div",{className:"flex justify-end p-4 shrink-0",children:c.jsx("button",{onClick:e,className:"p-2 hover:bg-dark-hover rounded-full transition-colors group",title:"Close (ESC)",children:c.jsx($n,{size:24,className:"text-dark-muted group-hover:text-dark-text"})})}),c.jsx("div",{className:"flex-1 overflow-y-auto px-4 md:px-10 pb-10",children:c.jsx("div",{className:"max-w-3xl mx-auto md:mx-0",children:Me()})})]}),p&&(()=>{const F=r.find(Q=>Q.id===p.id)||p;return c.jsx(ws,{isOpen:!!p,onClose:()=>y(null),title:"Edit User Role",size:"sm",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-dark-muted mb-1",children:"User"}),c.jsx("div",{className:"font-medium text-dark-text",children:F.displayName})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-dark-muted mb-2",children:"Select Role"}),c.jsx("div",{className:"space-y-2",children:ge.map(Q=>c.jsxs("button",{onClick:()=>W(p.id,Q.name),className:Vt("w-full px-3 py-2 rounded-lg border text-left transition-all flex items-center gap-3",(F.serverRole||F.role)===Q.name?"border-brand-primary bg-brand-primary/20":"border-dark-hover hover:bg-dark-hover"),children:[c.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Q.color}}),c.jsx("span",{className:"text-dark-text",children:Q.name})]},Q.id))})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-dark-muted mb-2",children:"Badges"}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.values(w1).map(Q=>{const J=F.badges?.includes(Q.id),Ce=Q.icon;return c.jsxs("button",{onClick:async()=>{try{await rt(Ae(he,"users",p.id),{badges:J?cd(Q.id):Pd(Q.id)}),M(J?`${Q.label} badge removed`:`${Q.label} badge granted`)}catch{se("Failed to update badge")}},className:Vt("flex items-center gap-2 px-3 py-2 rounded-lg border text-left transition-all",J?"border-brand-primary bg-brand-primary/20":"border-dark-hover hover:bg-dark-hover"),children:[c.jsx(Ce,{size:16,style:{color:Q.color}}),c.jsx("span",{className:"text-dark-text text-sm",children:Q.label})]},Q.id)})})]})]})})})(),B&&c.jsx(ws,{isOpen:!!B,onClose:()=>q(null),title:"Edit Role",size:"sm",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx(Sn,{label:"Role Name",value:B.name,onChange:F=>q({...B,name:F.target.value})}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-dark-text mb-2 block",children:"Role Color"}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("input",{type:"color",value:B.color,onChange:F=>q({...B,color:F.target.value}),className:"w-14 h-10 rounded cursor-pointer"}),c.jsx(Sn,{value:B.color,onChange:F=>q({...B,color:F.target.value}),className:"flex-1"})]})]}),c.jsx(at,{variant:"primary",className:"w-full",onClick:()=>de(B.id,{name:B.name,color:B.color}),children:"Save Changes"})]})}),U&&c.jsx(ws,{isOpen:!!U,onClose:()=>$(null),title:"Edit Channel",size:"sm",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx(Sn,{label:"Channel Name",value:U.name,onChange:F=>$({...U,name:F.target.value})}),c.jsx(Sn,{label:"Channel Topic / Description",value:U.description||"",onChange:F=>$({...U,description:F.target.value})}),c.jsx(at,{variant:"primary",className:"w-full",onClick:()=>De(U.id,{name:U.name,description:U.description}),children:"Save Changes"})]})}),c.jsx(gc,{isOpen:!!L,onClose:()=>z(null),onConfirm:L?.type==="channel"?ae:pe,title:`Delete ${L?.type==="channel"?"Channel":"Role"}`,message:`Are you sure you want to delete "${L?.name}"? This cannot be undone.`,confirmText:"Delete",variant:"danger"}),c.jsx(gc,{isOpen:!!Ee,onClose:()=>Re(null),onConfirm:H,title:"Clean Invite Codes",message:`Are you sure you want to delete ${le} expired/used invite code(s)? This action cannot be undone.`,confirmText:"Clean",variant:"danger"})]})},cB=({isOpen:t,onClose:e,userId:n,onSuccess:r})=>{const[a,l]=T.useState(""),[u,h]=T.useState(null),[m,p]=T.useState(null),[y,b]=T.useState(!1),[x,k]=T.useState({progress:0,speed:""}),R=T.useRef(null),{success:j,error:N}=Kr(),U=I=>{const O=I.target.files?.[0];if(O){if(!O.type.startsWith("image/")){N("Please select an image file");return}if(O.size>10*1024*1024){N("Image size must be less than 10MB");return}h(O),p(URL.createObjectURL(O))}},$=async()=>{if(!a.trim()){N("Server name is required");return}b(!0);try{let I=null;u&&(I=await md(u,(B,q)=>{k({progress:B,speed:q})}));const O=await Bn(wt(he,"servers"),{name:a.trim(),icon:I,ownerId:n,createdAt:bt(),isDefault:!1,memberCount:1});await Rr(Ae(he,"servers",O.id,"members",n),{userId:n,joinedAt:bt(),role:"admin"}),await Bn(wt(he,"servers",O.id,"channels"),{name:"general",type:"text",description:"General discussion",position:0,createdAt:bt()}),await rt(Ae(he,"users",n),{servers:Pd(O.id),currentServer:O.id}),j("Server created successfully!"),l(""),h(null),m&&URL.revokeObjectURL(m),p(null),r&&r(O.id),e()}catch(I){console.error("Error creating server:",I),N("Failed to create server")}finally{b(!1),k({progress:0,speed:""})}};return c.jsx(ws,{isOpen:t,onClose:e,title:"Create Server",size:"sm",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("input",{type:"file",ref:R,onChange:U,accept:"image/*",className:"hidden"}),c.jsx("button",{onClick:()=>R.current?.click(),className:"w-20 h-20 rounded-full bg-dark-hover border-2 border-dashed border-dark-muted hover:border-brand-primary flex items-center justify-center transition-colors overflow-hidden",children:m?c.jsx("img",{src:m,alt:"Preview",className:"w-full h-full object-cover"}):c.jsx(GM,{size:32,className:"text-dark-muted"})}),c.jsx("span",{className:"text-xs text-dark-muted mt-2",children:"Server Icon (Optional)"})]}),y&&u&&x.progress>0&&c.jsxs("div",{className:"text-xs text-dark-muted text-center",children:["Uploading icon: ",Math.round(x.progress),"% (",x.speed,")"]}),c.jsx(Sn,{label:"Server Name",placeholder:"My Awesome Server",value:a,onChange:I=>l(I.target.value),maxLength:50,autoFocus:!0}),c.jsxs("div",{className:"text-xs text-dark-muted",children:[a.length,"/50 characters"]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(at,{variant:"secondary",onClick:e,className:"flex-1",children:"Cancel"}),c.jsx(at,{variant:"primary",onClick:$,disabled:!a.trim()||y,className:"flex-1",children:y?"Creating...":"Create Server"})]})]})})},uB=({isOpen:t,onClose:e,userId:n,onSuccess:r})=>{const[a,l]=T.useState(""),[u,h]=T.useState(!1),{success:m,error:p}=Kr(),y=async()=>{if(!a.trim()){p("Invite code is required");return}h(!0);try{const b=a.trim().toUpperCase(),x=Ae(he,"inviteCodes",b),k=await ap(x);if(!k.exists()){p("Invalid invite code");return}const R=k.data();if(!R.isActive){p("This invite code has already been used");return}const j=R.isUnlimited===!0||R.maxUses===-1;if(!j&&R.uses>=R.maxUses){p("This invite code has reached its usage limit");return}if(R.expiresAt.toDate()<new Date){p("This invite code has expired");return}await Rr(Ae(he,"servers",R.serverId,"members",n),{userId:n,joinedAt:bt(),role:"member"}),await rt(Ae(he,"users",n),{servers:Pd(R.serverId),currentServer:R.serverId});const N={uses:Ai(1)};j||(N.isActive=!1),await rt(x,N),await rt(Ae(he,"servers",R.serverId),{memberCount:Ai(1)}),m("Successfully joined server!"),l(""),r&&r(R.serverId),e()}catch(b){console.error("Error joining server:",b),console.error("Error code:",b.code),console.error("Error message:",b.message),b.code!=="permission-denied"?b.code==="not-found"?p("Server not found"):p(`Failed to join server: ${b.message}`):e()}finally{h(!1)}};return c.jsx(ws,{isOpen:t,onClose:e,title:"Join Server",size:"sm",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx(Sn,{label:"Invite Code",placeholder:"ABC12XYZ",value:a,onChange:b=>l(b.target.value.toUpperCase()),maxLength:8,autoFocus:!0}),c.jsx("div",{className:"text-xs text-dark-muted",children:"Enter the 8-character invite code"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(at,{variant:"secondary",onClick:e,className:"flex-1",children:"Cancel"}),c.jsx(at,{variant:"primary",onClick:y,disabled:a.length!==8||u,className:"flex-1",children:u?"Joining...":"Join Server"})]})]})})},dB=({isOpen:t,onClose:e})=>{const{availableDevices:n,selectedMicId:r,setSelectedMicId:a,selectedCameraId:l,setSelectedCameraId:u}=Od();return t?c.jsx("div",{className:"fixed inset-0 bg-black/80 z-[100] flex items-center justify-center animate-fade-in",children:c.jsxs("div",{className:"bg-dark-elem w-full max-w-md rounded-2xl shadow-2xl border border-dark-hover overflow-hidden p-6 relative",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[c.jsx(lp,{size:28,className:"text-brand-primary"}),"Device Settings"]}),c.jsx("button",{onClick:e,className:"p-1 hover:bg-dark-hover rounded-full transition-colors text-dark-muted hover:text-white",children:c.jsx($n,{size:24})})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-xs font-bold text-dark-muted uppercase tracking-wider mb-2 flex items-center gap-2",children:[c.jsx(Lv,{size:16})," Microphone"]}),c.jsxs("select",{className:"w-full bg-dark-input border border-dark-hover rounded-lg p-3 text-white focus:ring-2 focus:ring-brand-primary outline-none transition-all",value:r,onChange:h=>a(h.target.value),children:[n.audioInputs.map(h=>c.jsx("option",{value:h.deviceId,children:h.label||`Microphone ${h.deviceId.slice(0,5)}...`},h.deviceId)),n.audioInputs.length===0&&c.jsx("option",{value:"",children:"No microphone found"})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-xs font-bold text-dark-muted uppercase tracking-wider mb-2 flex items-center gap-2",children:[c.jsx(ud,{size:16})," Camera"]}),c.jsxs("select",{className:"w-full bg-dark-input border border-dark-hover rounded-lg p-3 text-white focus:ring-2 focus:ring-brand-primary outline-none transition-all",value:l,onChange:h=>u(h.target.value),children:[n.videoInputs.map(h=>c.jsx("option",{value:h.deviceId,children:h.label||`Camera ${h.deviceId.slice(0,5)}...`},h.deviceId)),n.videoInputs.length===0&&c.jsx("option",{value:"",children:"No camera found"})]})]}),c.jsx("div",{className:"pt-4 border-t border-dark-hover flex justify-end",children:c.jsx(at,{variant:"primary",onClick:e,children:"Done"})})]})]})}):null};var Lu={exports:{}},sv={},iv={exports:{}},av,BS;function hB(){if(BS)return av;BS=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return av=t,av}var ov,FS;function fB(){if(FS)return ov;FS=1;var t=hB();function e(){}function n(){}return n.resetWarningCache=e,ov=function(){function r(u,h,m,p,y,b){if(b!==t){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}r.isRequired=r;function a(){return r}var l={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:a,element:r,elementType:r,instanceOf:a,node:r,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:n,resetWarningCache:e};return l.PropTypes=l,l},ov}var $S;function O6(){return $S||($S=1,iv.exports=fB()()),iv.exports}var Tf={exports:{}},HS;function mB(){if(HS)return Tf.exports;HS=1;function t(n){var r,a,l="";if(typeof n=="string"||typeof n=="number")l+=n;else if(typeof n=="object")if(Array.isArray(n)){var u=n.length;for(r=0;r<u;r++)n[r]&&(a=t(n[r]))&&(l&&(l+=" "),l+=a)}else for(a in n)n[a]&&(l&&(l+=" "),l+=a);return l}function e(){for(var n,r,a=0,l="",u=arguments.length;a<u;a++)(n=arguments[a])&&(r=t(n))&&(l&&(l+=" "),l+=r);return l}return Tf.exports=e,Tf.exports.clsx=e,Tf.exports}var _n={},Sa={},qS;function Ep(){if(qS)return Sa;qS=1,Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.dontSetMe=a,Sa.findInArray=t,Sa.int=r,Sa.isFunction=e,Sa.isNum=n;function t(l,u){for(let h=0,m=l.length;h<m;h++)if(u.apply(u,[l[h],h,l]))return l[h]}function e(l){return typeof l=="function"||Object.prototype.toString.call(l)==="[object Function]"}function n(l){return typeof l=="number"&&!isNaN(l)}function r(l){return parseInt(l,10)}function a(l,u,h){if(l[u])return new Error(`Invalid prop ${u} passed to ${h} - do not set this, set it on the child.`)}return Sa}var Ea={},GS;function pB(){if(GS)return Ea;GS=1,Object.defineProperty(Ea,"__esModule",{value:!0}),Ea.browserPrefixToKey=n,Ea.browserPrefixToStyle=r,Ea.default=void 0,Ea.getPrefix=e;const t=["Moz","Webkit","O","ms"];function e(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const u=window.document?.documentElement?.style;if(!u||l in u)return"";for(let h=0;h<t.length;h++)if(n(l,t[h])in u)return t[h];return""}function n(l,u){return u?`${u}${a(l)}`:l}function r(l,u){return u?`-${u.toLowerCase()}-${l}`:l}function a(l){let u="",h=!0;for(let m=0;m<l.length;m++)h?(u+=l[m].toUpperCase(),h=!1):l[m]==="-"?h=!0:u+=l[m];return u}return Ea.default=e(),Ea}var YS;function W1(){if(YS)return _n;YS=1,Object.defineProperty(_n,"__esModule",{value:!0}),_n.addClassName=B,_n.addEvent=u,_n.addUserSelectStyles=$,_n.createCSSTransform=k,_n.createSVGTransform=R,_n.getTouch=N,_n.getTouchIdentifier=U,_n.getTranslation=j,_n.innerHeight=y,_n.innerWidth=b,_n.matchesSelector=a,_n.matchesSelectorAndParentsTo=l,_n.offsetXYFromParent=x,_n.outerHeight=m,_n.outerWidth=p,_n.removeClassName=q,_n.removeEvent=h,_n.scheduleRemoveUserSelectStyles=I;var t=Ep(),e=n(pB());function n(w,E){if(typeof WeakMap=="function")var A=new WeakMap,P=new WeakMap;return(n=function(L,z){if(!z&&L&&L.__esModule)return L;var M,se,le={__proto__:null,default:L};if(L===null||typeof L!="object"&&typeof L!="function")return le;if(M=z?P:A){if(M.has(L))return M.get(L);M.set(L,le)}for(const Y in L)Y!=="default"&&{}.hasOwnProperty.call(L,Y)&&((se=(M=Object.defineProperty)&&Object.getOwnPropertyDescriptor(L,Y))&&(se.get||se.set)?M(le,Y,se):le[Y]=L[Y]);return le})(w,E)}let r="";function a(w,E){return r||(r=(0,t.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(A){return(0,t.isFunction)(w[A])})),(0,t.isFunction)(w[r])?w[r](E):!1}function l(w,E,A){let P=w;do{if(a(P,E))return!0;if(P===A)return!1;P=P.parentNode}while(P);return!1}function u(w,E,A,P){if(!w)return;const L={capture:!0,...P};w.addEventListener?w.addEventListener(E,A,L):w.attachEvent?w.attachEvent("on"+E,A):w["on"+E]=A}function h(w,E,A,P){if(!w)return;const L={capture:!0,...P};w.removeEventListener?w.removeEventListener(E,A,L):w.detachEvent?w.detachEvent("on"+E,A):w["on"+E]=null}function m(w){let E=w.clientHeight;const A=w.ownerDocument.defaultView.getComputedStyle(w);return E+=(0,t.int)(A.borderTopWidth),E+=(0,t.int)(A.borderBottomWidth),E}function p(w){let E=w.clientWidth;const A=w.ownerDocument.defaultView.getComputedStyle(w);return E+=(0,t.int)(A.borderLeftWidth),E+=(0,t.int)(A.borderRightWidth),E}function y(w){let E=w.clientHeight;const A=w.ownerDocument.defaultView.getComputedStyle(w);return E-=(0,t.int)(A.paddingTop),E-=(0,t.int)(A.paddingBottom),E}function b(w){let E=w.clientWidth;const A=w.ownerDocument.defaultView.getComputedStyle(w);return E-=(0,t.int)(A.paddingLeft),E-=(0,t.int)(A.paddingRight),E}function x(w,E,A){const L=E===E.ownerDocument.body?{left:0,top:0}:E.getBoundingClientRect(),z=(w.clientX+E.scrollLeft-L.left)/A,M=(w.clientY+E.scrollTop-L.top)/A;return{x:z,y:M}}function k(w,E){const A=j(w,E,"px");return{[(0,e.browserPrefixToKey)("transform",e.default)]:A}}function R(w,E){return j(w,E,"")}function j(w,E,A){let{x:P,y:L}=w,z=`translate(${P}${A},${L}${A})`;if(E){const M=`${typeof E.x=="string"?E.x:E.x+A}`,se=`${typeof E.y=="string"?E.y:E.y+A}`;z=`translate(${M}, ${se})`+z}return z}function N(w,E){return w.targetTouches&&(0,t.findInArray)(w.targetTouches,A=>E===A.identifier)||w.changedTouches&&(0,t.findInArray)(w.changedTouches,A=>E===A.identifier)}function U(w){if(w.targetTouches&&w.targetTouches[0])return w.targetTouches[0].identifier;if(w.changedTouches&&w.changedTouches[0])return w.changedTouches[0].identifier}function $(w){if(!w)return;let E=w.getElementById("react-draggable-style-el");E||(E=w.createElement("style"),E.type="text/css",E.id="react-draggable-style-el",E.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,E.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,w.getElementsByTagName("head")[0].appendChild(E)),w.body&&B(w.body,"react-draggable-transparent-selection")}function I(w){window.requestAnimationFrame?window.requestAnimationFrame(()=>{O(w)}):O(w)}function O(w){if(w)try{if(w.body&&q(w.body,"react-draggable-transparent-selection"),w.selection)w.selection.empty();else{const E=(w.defaultView||window).getSelection();E&&E.type!=="Caret"&&E.removeAllRanges()}}catch{}}function B(w,E){w.classList?w.classList.add(E):w.className.match(new RegExp(`(?:^|\\s)${E}(?!\\S)`))||(w.className+=` ${E}`)}function q(w,E){w.classList?w.classList.remove(E):w.className=w.className.replace(new RegExp(`(?:^|\\s)${E}(?!\\S)`,"g"),"")}return _n}var $s={},KS;function L6(){if(KS)return $s;KS=1,Object.defineProperty($s,"__esModule",{value:!0}),$s.canDragX=a,$s.canDragY=l,$s.createCoreData=h,$s.createDraggableData=m,$s.getBoundPosition=n,$s.getControlPosition=u,$s.snapToGrid=r;var t=Ep(),e=W1();function n(b,x,k){if(!b.props.bounds)return[x,k];let{bounds:R}=b.props;R=typeof R=="string"?R:p(R);const j=y(b);if(typeof R=="string"){const{ownerDocument:N}=j,U=N.defaultView;let $;if(R==="parent"?$=j.parentNode:$=j.getRootNode().querySelector(R),!($ instanceof U.HTMLElement))throw new Error('Bounds selector "'+R+'" could not find an element.');const I=$,O=U.getComputedStyle(j),B=U.getComputedStyle(I);R={left:-j.offsetLeft+(0,t.int)(B.paddingLeft)+(0,t.int)(O.marginLeft),top:-j.offsetTop+(0,t.int)(B.paddingTop)+(0,t.int)(O.marginTop),right:(0,e.innerWidth)(I)-(0,e.outerWidth)(j)-j.offsetLeft+(0,t.int)(B.paddingRight)-(0,t.int)(O.marginRight),bottom:(0,e.innerHeight)(I)-(0,e.outerHeight)(j)-j.offsetTop+(0,t.int)(B.paddingBottom)-(0,t.int)(O.marginBottom)}}return(0,t.isNum)(R.right)&&(x=Math.min(x,R.right)),(0,t.isNum)(R.bottom)&&(k=Math.min(k,R.bottom)),(0,t.isNum)(R.left)&&(x=Math.max(x,R.left)),(0,t.isNum)(R.top)&&(k=Math.max(k,R.top)),[x,k]}function r(b,x,k){const R=Math.round(x/b[0])*b[0],j=Math.round(k/b[1])*b[1];return[R,j]}function a(b){return b.props.axis==="both"||b.props.axis==="x"}function l(b){return b.props.axis==="both"||b.props.axis==="y"}function u(b,x,k){const R=typeof x=="number"?(0,e.getTouch)(b,x):null;if(typeof x=="number"&&!R)return null;const j=y(k),N=k.props.offsetParent||j.offsetParent||j.ownerDocument.body;return(0,e.offsetXYFromParent)(R||b,N,k.props.scale)}function h(b,x,k){const R=!(0,t.isNum)(b.lastX),j=y(b);return R?{node:j,deltaX:0,deltaY:0,lastX:x,lastY:k,x,y:k}:{node:j,deltaX:x-b.lastX,deltaY:k-b.lastY,lastX:b.lastX,lastY:b.lastY,x,y:k}}function m(b,x){const k=b.props.scale;return{node:x.node,x:b.state.x+x.deltaX/k,y:b.state.y+x.deltaY/k,deltaX:x.deltaX/k,deltaY:x.deltaY/k,lastX:b.state.x,lastY:b.state.y}}function p(b){return{left:b.left,top:b.top,right:b.right,bottom:b.bottom}}function y(b){const x=b.findDOMNode();if(!x)throw new Error("<DraggableCore>: Unmounted during event!");return x}return $s}var Vu={},kf={},QS;function V6(){if(QS)return kf;QS=1,Object.defineProperty(kf,"__esModule",{value:!0}),kf.default=t;function t(){}return kf}var XS;function gB(){if(XS)return Vu;XS=1,Object.defineProperty(Vu,"__esModule",{value:!0}),Vu.default=void 0;var t=m(Ya()),e=h(O6()),n=h(uy()),r=W1(),a=L6(),l=Ep(),u=h(V6());function h(j){return j&&j.__esModule?j:{default:j}}function m(j,N){if(typeof WeakMap=="function")var U=new WeakMap,$=new WeakMap;return(m=function(I,O){if(!O&&I&&I.__esModule)return I;var B,q,w={__proto__:null,default:I};if(I===null||typeof I!="object"&&typeof I!="function")return w;if(B=O?$:U){if(B.has(I))return B.get(I);B.set(I,w)}for(const E in I)E!=="default"&&{}.hasOwnProperty.call(I,E)&&((q=(B=Object.defineProperty)&&Object.getOwnPropertyDescriptor(I,E))&&(q.get||q.set)?B(w,E,q):w[E]=I[E]);return w})(j,N)}function p(j,N,U){return(N=y(N))in j?Object.defineProperty(j,N,{value:U,enumerable:!0,configurable:!0,writable:!0}):j[N]=U,j}function y(j){var N=b(j,"string");return typeof N=="symbol"?N:N+""}function b(j,N){if(typeof j!="object"||!j)return j;var U=j[Symbol.toPrimitive];if(U!==void 0){var $=U.call(j,N);if(typeof $!="object")return $;throw new TypeError("@@toPrimitive must return a primitive value.")}return(N==="string"?String:Number)(j)}const x={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let k=x.mouse,R=class extends t.Component{constructor(){super(...arguments),p(this,"dragging",!1),p(this,"lastX",NaN),p(this,"lastY",NaN),p(this,"touchIdentifier",null),p(this,"mounted",!1),p(this,"handleDragStart",N=>{if(this.props.onMouseDown(N),!this.props.allowAnyClick&&typeof N.button=="number"&&N.button!==0)return!1;const U=this.findDOMNode();if(!U||!U.ownerDocument||!U.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:$}=U;if(this.props.disabled||!(N.target instanceof $.defaultView.Node)||this.props.handle&&!(0,r.matchesSelectorAndParentsTo)(N.target,this.props.handle,U)||this.props.cancel&&(0,r.matchesSelectorAndParentsTo)(N.target,this.props.cancel,U))return;N.type==="touchstart"&&!this.props.allowMobileScroll&&N.preventDefault();const I=(0,r.getTouchIdentifier)(N);this.touchIdentifier=I;const O=(0,a.getControlPosition)(N,I,this);if(O==null)return;const{x:B,y:q}=O,w=(0,a.createCoreData)(this,B,q);(0,u.default)("DraggableCore: handleDragStart: %j",w),(0,u.default)("calling",this.props.onStart),!(this.props.onStart(N,w)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,r.addUserSelectStyles)($),this.dragging=!0,this.lastX=B,this.lastY=q,(0,r.addEvent)($,k.move,this.handleDrag),(0,r.addEvent)($,k.stop,this.handleDragStop))}),p(this,"handleDrag",N=>{const U=(0,a.getControlPosition)(N,this.touchIdentifier,this);if(U==null)return;let{x:$,y:I}=U;if(Array.isArray(this.props.grid)){let q=$-this.lastX,w=I-this.lastY;if([q,w]=(0,a.snapToGrid)(this.props.grid,q,w),!q&&!w)return;$=this.lastX+q,I=this.lastY+w}const O=(0,a.createCoreData)(this,$,I);if((0,u.default)("DraggableCore: handleDrag: %j",O),this.props.onDrag(N,O)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const w=document.createEvent("MouseEvents");w.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(w)}return}this.lastX=$,this.lastY=I}),p(this,"handleDragStop",N=>{if(!this.dragging)return;const U=(0,a.getControlPosition)(N,this.touchIdentifier,this);if(U==null)return;let{x:$,y:I}=U;if(Array.isArray(this.props.grid)){let w=$-this.lastX||0,E=I-this.lastY||0;[w,E]=(0,a.snapToGrid)(this.props.grid,w,E),$=this.lastX+w,I=this.lastY+E}const O=(0,a.createCoreData)(this,$,I);if(this.props.onStop(N,O)===!1||this.mounted===!1)return!1;const q=this.findDOMNode();q&&this.props.enableUserSelectHack&&(0,r.scheduleRemoveUserSelectStyles)(q.ownerDocument),(0,u.default)("DraggableCore: handleDragStop: %j",O),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,q&&((0,u.default)("DraggableCore: Removing handlers"),(0,r.removeEvent)(q.ownerDocument,k.move,this.handleDrag),(0,r.removeEvent)(q.ownerDocument,k.stop,this.handleDragStop))}),p(this,"onMouseDown",N=>(k=x.mouse,this.handleDragStart(N))),p(this,"onMouseUp",N=>(k=x.mouse,this.handleDragStop(N))),p(this,"onTouchStart",N=>(k=x.touch,this.handleDragStart(N))),p(this,"onTouchEnd",N=>(k=x.touch,this.handleDragStop(N)))}componentDidMount(){this.mounted=!0;const N=this.findDOMNode();N&&(0,r.addEvent)(N,x.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const N=this.findDOMNode();if(N){const{ownerDocument:U}=N;(0,r.removeEvent)(U,x.mouse.move,this.handleDrag),(0,r.removeEvent)(U,x.touch.move,this.handleDrag),(0,r.removeEvent)(U,x.mouse.stop,this.handleDragStop),(0,r.removeEvent)(U,x.touch.stop,this.handleDragStop),(0,r.removeEvent)(N,x.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,r.scheduleRemoveUserSelectStyles)(U)}}findDOMNode(){return this.props?.nodeRef?this.props?.nodeRef?.current:n.default.findDOMNode(this)}render(){return t.cloneElement(t.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};return Vu.default=R,p(R,"displayName","DraggableCore"),p(R,"propTypes",{allowAnyClick:e.default.bool,allowMobileScroll:e.default.bool,children:e.default.node.isRequired,disabled:e.default.bool,enableUserSelectHack:e.default.bool,offsetParent:function(j,N){if(j[N]&&j[N].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:e.default.arrayOf(e.default.number),handle:e.default.string,cancel:e.default.string,nodeRef:e.default.object,onStart:e.default.func,onDrag:e.default.func,onStop:e.default.func,onMouseDown:e.default.func,scale:e.default.number,className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),p(R,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),Vu}var WS;function vB(){return WS||(WS=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return m.default}}),t.default=void 0;var e=b(Ya()),n=y(O6()),r=y(uy()),a=mB(),l=W1(),u=L6(),h=Ep(),m=y(gB()),p=y(V6());function y(U){return U&&U.__esModule?U:{default:U}}function b(U,$){if(typeof WeakMap=="function")var I=new WeakMap,O=new WeakMap;return(b=function(B,q){if(!q&&B&&B.__esModule)return B;var w,E,A={__proto__:null,default:B};if(B===null||typeof B!="object"&&typeof B!="function")return A;if(w=q?O:I){if(w.has(B))return w.get(B);w.set(B,A)}for(const P in B)P!=="default"&&{}.hasOwnProperty.call(B,P)&&((E=(w=Object.defineProperty)&&Object.getOwnPropertyDescriptor(B,P))&&(E.get||E.set)?w(A,P,E):A[P]=B[P]);return A})(U,$)}function x(){return x=Object.assign?Object.assign.bind():function(U){for(var $=1;$<arguments.length;$++){var I=arguments[$];for(var O in I)({}).hasOwnProperty.call(I,O)&&(U[O]=I[O])}return U},x.apply(null,arguments)}function k(U,$,I){return($=R($))in U?Object.defineProperty(U,$,{value:I,enumerable:!0,configurable:!0,writable:!0}):U[$]=I,U}function R(U){var $=j(U,"string");return typeof $=="symbol"?$:$+""}function j(U,$){if(typeof U!="object"||!U)return U;var I=U[Symbol.toPrimitive];if(I!==void 0){var O=I.call(U,$);if(typeof O!="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(U)}class N extends e.Component{static getDerivedStateFromProps($,I){let{position:O}=$,{prevPropsPosition:B}=I;return O&&(!B||O.x!==B.x||O.y!==B.y)?((0,p.default)("Draggable: getDerivedStateFromProps %j",{position:O,prevPropsPosition:B}),{x:O.x,y:O.y,prevPropsPosition:{...O}}):null}constructor($){super($),k(this,"onDragStart",(I,O)=>{if((0,p.default)("Draggable: onDragStart: %j",O),this.props.onStart(I,(0,u.createDraggableData)(this,O))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),k(this,"onDrag",(I,O)=>{if(!this.state.dragging)return!1;(0,p.default)("Draggable: onDrag: %j",O);const B=(0,u.createDraggableData)(this,O),q={x:B.x,y:B.y,slackX:0,slackY:0};if(this.props.bounds){const{x:E,y:A}=q;q.x+=this.state.slackX,q.y+=this.state.slackY;const[P,L]=(0,u.getBoundPosition)(this,q.x,q.y);q.x=P,q.y=L,q.slackX=this.state.slackX+(E-q.x),q.slackY=this.state.slackY+(A-q.y),B.x=q.x,B.y=q.y,B.deltaX=q.x-this.state.x,B.deltaY=q.y-this.state.y}if(this.props.onDrag(I,B)===!1)return!1;this.setState(q)}),k(this,"onDragStop",(I,O)=>{if(!this.state.dragging||this.props.onStop(I,(0,u.createDraggableData)(this,O))===!1)return!1;(0,p.default)("Draggable: onDragStop: %j",O);const q={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:E,y:A}=this.props.position;q.x=E,q.y=A}this.setState(q)}),this.state={dragging:!1,dragged:!1,x:$.position?$.position.x:$.defaultPosition.x,y:$.position?$.position.y:$.defaultPosition.y,prevPropsPosition:{...$.position},slackX:0,slackY:0,isElementSVG:!1},$.position&&!($.onDrag||$.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){return this.props?.nodeRef?.current??r.default.findDOMNode(this)}render(){const{axis:$,bounds:I,children:O,defaultPosition:B,defaultClassName:q,defaultClassNameDragging:w,defaultClassNameDragged:E,position:A,positionOffset:P,scale:L,...z}=this.props;let M={},se=null;const Y=!!!A||this.state.dragging,ee=A||B,Z={x:(0,u.canDragX)(this)&&Y?this.state.x:ee.x,y:(0,u.canDragY)(this)&&Y?this.state.y:ee.y};this.state.isElementSVG?se=(0,l.createSVGTransform)(Z,P):M=(0,l.createCSSTransform)(Z,P);const Ee=(0,a.clsx)(O.props.className||"",q,{[w]:this.state.dragging,[E]:this.state.dragged});return e.createElement(m.default,x({},z,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(O),{className:Ee,style:{...O.props.style,...M},transform:se}))}}t.default=N,k(N,"displayName","Draggable"),k(N,"propTypes",{...m.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:h.dontSetMe,style:h.dontSetMe,transform:h.dontSetMe}),k(N,"defaultProps",{...m.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(sv)),sv}var JS;function yB(){if(JS)return Lu.exports;JS=1;const{default:t,DraggableCore:e}=vB();return Lu.exports=t,Lu.exports.default=t,Lu.exports.DraggableCore=e,Lu.exports}var bB=yB();const z6=bd(bB),xB=()=>{const{callStatus:t,incomingCall:e,outgoingCallUser:n,answerCall:r,endCall:a,localStream:l,remoteStream:u,toggleAudio:h,toggleVideo:m,isMuted:p,isVideoOff:y,activeCall:b,isScreenSharing:x,toggleScreenShare:k,availableDevices:R,selectedMicId:j,selectedCameraId:N,setSelectedMicId:U,setSelectedCameraId:$,playSound:I,customSounds:O,addSound:B,removeSound:q}=Od(),w=T.useRef(null),E=T.useRef(null),A=T.useRef(null),[P,L]=T.useState(!1),[z,M]=T.useState(!1),[se,le]=T.useState(100),[Y,ee]=T.useState(!1),[Z,Ee]=T.useState(!1),[Re,H]=T.useState(!1),[W,ie]=T.useState(!1),[ve,Te]=T.useState(!1),{userProfile:De}=Ln(),ae=sc(De),Le=q3(De,Ii.SCREEN_SHARE),Ie=T.useRef(null),de=async Se=>{const it=Se.target.files[0];if(!it)return;const _e=it.name.split(".")[0].slice(0,10);await B(_e,it),Ie.current&&(Ie.current.value="")},[pe,ge]=T.useState(!1);return T.useEffect(()=>{w.current&&l&&(w.current.srcObject=l)},[l,t]),T.useEffect(()=>{E.current&&u&&(E.current.srcObject=u)},[u,t]),T.useEffect(()=>{if(u){const Se=u.getVideoTracks()[0];if(Se){const it=!Se.muted&&Se.readyState==="live";ge(it);const _e=()=>ge(!1),Ue=()=>ge(!0),Me=()=>ge(!1);return Se.addEventListener("mute",_e),Se.addEventListener("unmute",Ue),Se.addEventListener("ended",Me),()=>{Se.removeEventListener("mute",_e),Se.removeEventListener("unmute",Ue),Se.removeEventListener("ended",Me)}}else ge(!1)}else ge(!1)},[u]),T.useEffect(()=>{E.current&&(E.current.volume=se/100)},[se,u]),T.useEffect(()=>{t==="idle"&&(L(!1),Te(!1),Ee(!1),ie(!1),ee(!1),H(!1))},[t]),t==="idle"?null:t==="incoming"?c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in",role:"dialog","aria-modal":"true",children:c.jsxs("div",{className:"bg-dark-sidebar p-6 rounded-2xl shadow-2xl w-80 text-center border border-dark-hover",children:[c.jsxs("div",{className:"w-24 h-24 mx-auto mb-4 relative",children:[e?.callerPhotoUrl?c.jsx("img",{src:e.callerPhotoUrl,alt:"Caller",className:"w-full h-full rounded-full object-cover border-4 border-dark-bg"}):c.jsx("div",{className:"w-full h-full rounded-full bg-brand-primary flex items-center justify-center text-3xl font-bold text-white border-4 border-dark-bg",children:e?.callerName?.[0]?.toUpperCase()}),c.jsx("div",{className:"absolute -bottom-1 -right-1 bg-green-500 rounded-full p-2 animate-bounce",children:c.jsx(Rw,{size:16,className:"text-white"})})]}),c.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:e?.callerName}),c.jsxs("p",{className:"text-dark-muted mb-6",children:["Incoming ",e?.type," call..."]}),c.jsxs("div",{className:"flex gap-4 justify-center",children:[c.jsx("button",{onClick:()=>a(!0),className:"w-12 h-12 rounded-full bg-red-500 flex items-center justify-center text-white hover:bg-red-600 transition-colors",children:c.jsx(U0,{size:24})}),c.jsx("button",{onClick:r,className:"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center text-white hover:bg-green-600 transition-colors",children:c.jsx(Rw,{size:20})})]})]})}):c.jsx(z6,{nodeRef:A,disabled:!P,bounds:"body",onStart:()=>M(!0),onStop:()=>M(!1),children:c.jsxs("div",{role:"dialog","aria-modal":"true",ref:A,style:P?void 0:{transform:"none !important"},className:Vt("fixed z-[100] bg-gray-900 shadow-2xl overflow-hidden border border-gray-700 group",!z&&"transition-all duration-300",P?"bottom-4 right-4 w-64 h-48 rounded-lg cursor-move":"inset-0 flex flex-col !transform-none"),children:[c.jsxs("div",{className:Vt("absolute top-0 left-0 right-0 p-4 z-50 flex justify-between items-start bg-gradient-to-b from-black/80 to-transparent transition-opacity duration-200 opacity-100"),children:[c.jsx("div",{className:"flex gap-2",children:c.jsxs("div",{className:"bg-black/40 backdrop-blur px-3 py-1 rounded-full flex items-center gap-2",children:[c.jsx("span",{className:Vt("w-2 h-2 rounded-full",b?"bg-green-500":"bg-yellow-500 animate-pulse")}),c.jsx("span",{className:"text-xs text-white font-medium",children:b?"Connected":"Calling..."})]})}),c.jsx("button",{onClick:()=>L(!P),className:"p-2 rounded-full bg-black/40 hover:bg-white/10 text-white backdrop-blur transition-colors",title:P?"Maximize":"Minimize",children:P?c.jsx(ZM,{size:20}):c.jsx(JM,{size:20})})]}),c.jsxs("div",{className:"relative flex-1 bg-black flex items-center justify-center w-full h-full",children:[c.jsx("video",{ref:E,autoPlay:!0,playsInline:!0,className:Vt("w-full h-full object-contain",(!u||!pe)&&"hidden")}),(!u||!pe)&&c.jsxs("div",{className:"text-center absolute inset-0 flex flex-col items-center justify-center z-10",children:[c.jsx("div",{className:"w-32 h-32 mx-auto mb-4 rounded-full bg-gray-800 flex items-center justify-center text-6xl font-bold text-gray-500 animate-pulse",children:n?.displayName?.[0]||b?.metadata?.name?.[0]||"?"}),c.jsx("p",{className:"text-xl text-white font-medium",children:t==="outgoing"?"Calling...":t==="connected"?"No Video / Audio Only":"Connecting..."}),c.jsx("p",{className:"text-gray-400 text-sm mt-1",children:n?.displayName})]}),!P&&l&&c.jsx(_B,{})]}),c.jsxs("div",{className:Vt("absolute bottom-4 md:bottom-8 left-1/2 -translate-x-1/2 z-50 flex flex-wrap justify-center items-center gap-2 md:gap-4 p-2 md:p-3 bg-gray-900/80 backdrop-blur-md rounded-xl md:rounded-2xl border border-gray-700 shadow-xl transition-opacity duration-300 hover:opacity-100 w-[95%] md:w-auto max-w-screen-sm",P&&"hidden"),children:[c.jsx("button",{onClick:h,className:Vt("p-3 rounded-xl transition-all hover:scale-110 active:scale-95",p?"bg-red-500/20 text-red-500":"bg-gray-700/50 text-white hover:bg-gray-600"),title:p?"Unmute":"Mute",children:p?c.jsx(Ov,{size:22}):c.jsx(Lv,{size:22})}),c.jsx("button",{onClick:m,className:Vt("p-3 rounded-xl transition-all hover:scale-110 active:scale-95",y?"bg-red-500/20 text-red-500":"bg-gray-700/50 text-white hover:bg-gray-600"),title:y?"Turn Video On":"Turn Video Off",children:y?c.jsx(Vv,{size:22}):c.jsx(ud,{size:22})}),!Fo.isNativePlatform()&&c.jsxs("div",{className:"relative",onMouseEnter:()=>H(!0),onMouseLeave:()=>H(!1),children:[c.jsx("button",{onClick:()=>{x?k():ie(!0)},disabled:!b||!Le,className:Vt("p-3 rounded-xl transition-all hover:scale-110 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",x?"bg-green-500 text-white":Le?"bg-gray-700/50 text-white hover:bg-gray-600":"bg-gray-800 text-gray-500 cursor-not-allowed"),title:Le?x?"Stop Sharing":"Share Screen":void 0,children:x?c.jsx(zM,{size:22}):c.jsx(wm,{size:22})}),!Le&&c.jsxs("div",{className:Vt("absolute bottom-full mb-2 left-1/2 -translate-x-1/2 px-2 py-1 bg-black text-rose-500 text-xs font-bold rounded shadow-lg whitespace-nowrap transition-opacity pointer-events-none z-50",Re?"opacity-100":"opacity-0"),children:["Requires Premium ",c.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-black"})]})]}),c.jsx("div",{className:"w-px h-8 bg-gray-700 mx-2"}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>ee(!Y),onDoubleClick:()=>le(se>0?0:100),className:Vt("p-3 rounded-xl transition-all hover:scale-110 active:scale-95",se===0?"bg-red-500/20 text-red-500":"bg-gray-700/50 text-white hover:bg-gray-600"),title:`Volume: ${se}% (click to show slider, double-click to mute)`,children:se===0?c.jsx(fw,{size:22}):se<50?c.jsx(PM,{size:22}):c.jsx(mw,{size:22})}),Y&&c.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-3 p-3 bg-gray-900/95 backdrop-blur-md rounded-xl border border-gray-700 shadow-xl",children:c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsxs("span",{className:"text-xs text-gray-400 font-medium",children:[se,"%"]}),c.jsx("input",{type:"range",min:"0",max:"100",value:se,onChange:Se=>le(Number(Se.target.value)),className:`w-24 h-2 appearance-none bg-gray-700 rounded-full cursor-pointer accent-brand-primary
                     [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 
                     [&::-webkit-slider-thumb]:bg-brand-primary [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer
                     [&::-webkit-slider-thumb]:shadow-lg [&::-webkit-slider-thumb]:hover:scale-110 [&::-webkit-slider-thumb]:transition-transform`,style:{background:`linear-gradient(to right, rgb(88, 101, 242) ${se}%, rgb(55, 65, 81) ${se}%)`}}),c.jsx("span",{className:"text-[10px] text-gray-500",children:"Remote Volume"})]})})]}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>Te(!ve),className:Vt("p-3 rounded-xl transition-all hover:scale-110 active:scale-95",ve?"bg-brand-primary/20 text-brand-primary":"bg-gray-700/50 text-white hover:bg-gray-600"),title:"Soundboard",children:c.jsx(Sm,{size:22})}),ve&&c.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-3 w-64 bg-gray-900/95 backdrop-blur-md border border-gray-700 rounded-xl shadow-2xl p-4 animate-fade-in-up z-50",children:[c.jsxs("h4",{className:"text-white text-sm font-semibold mb-3 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Sm,{className:"text-brand-primary"}),"Soundboard"]}),c.jsxs("span",{className:"text-[10px] text-gray-400",children:[O.length,"/10"]})]}),c.jsxs("div",{className:"flex flex-col gap-1 mb-3 max-h-48 overflow-y-auto custom-scrollbar",children:[O.length===0&&c.jsx("div",{className:"text-center text-gray-500 text-xs py-4 italic",children:"No sounds added yet."}),O.map(Se=>c.jsxs("div",{className:"relative group flex items-center gap-2",children:[c.jsxs("button",{onClick:()=>{ae&&I(Se.id)},className:"flex-1 bg-gray-800 hover:bg-gray-700 text-white text-xs py-2 px-3 rounded-lg transition-colors border border-gray-700 hover:border-brand-primary flex items-center gap-3 active:scale-95",children:[c.jsx("span",{className:"text-sm",children:""}),c.jsx("span",{className:"text-xs font-medium truncate flex-1 text-left",children:Se.name})]}),c.jsx("button",{onClick:it=>{it.stopPropagation(),q(Se.id)},className:"bg-red-500/10 hover:bg-red-500 text-red-500 hover:text-white rounded-lg p-2 transition-colors opacity-0 group-hover:opacity-100",title:"Remove sound",children:c.jsx(Pi,{size:14})})]},Se.id))]}),O.length<10&&c.jsxs("button",{onClick:()=>Ie.current?.click(),className:"w-full py-2 border border-dashed border-gray-600 text-gray-400 rounded-lg hover:border-brand-primary hover:text-brand-primary transition-colors flex items-center justify-center gap-2 text-xs",children:[c.jsx(Io,{size:14})," Add Sound (MP3/WAV)"]}),c.jsx("input",{type:"file",ref:Ie,className:"hidden",accept:"audio/mp3,audio/wav,audio/mpeg",onChange:de}),!ae&&c.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center rounded-xl p-4 text-center",children:c.jsxs("div",{children:[c.jsx("p",{className:"text-brand-primary font-bold mb-1",children:"Premium Only"}),c.jsx("p",{className:"text-white text-xs",children:"Unlock Soundboard with Premium!"})]})})]})]}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>Ee(!Z),className:Vt("p-3 rounded-xl transition-all hover:scale-110 active:scale-95",Z?"bg-brand-primary/20 text-brand-primary":"bg-gray-700/50 text-white hover:bg-gray-600"),title:"Audio/Video Settings",children:c.jsx(lp,{size:22})}),Z&&c.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-3 p-4 bg-gray-900/95 backdrop-blur-md rounded-xl border border-gray-700 shadow-xl w-64",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"text-sm font-semibold text-white mb-3",children:"Device Settings"}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Microphone"}),c.jsx("select",{value:j,onChange:Se=>U(Se.target.value),className:"w-full bg-gray-800 text-white text-sm rounded-lg px-3 py-2 border border-gray-700 focus:border-brand-primary outline-none cursor-pointer",children:R.audioInputs.map(Se=>c.jsx("option",{value:Se.deviceId,children:Se.label||`Microphone ${Se.deviceId.slice(0,8)}...`},Se.deviceId))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Camera"}),c.jsx("select",{value:N,onChange:Se=>$(Se.target.value),className:"w-full bg-gray-800 text-white text-sm rounded-lg px-3 py-2 border border-gray-700 focus:border-brand-primary outline-none cursor-pointer",children:R.videoInputs.map(Se=>c.jsx("option",{value:Se.deviceId,children:Se.label||`Camera ${Se.deviceId.slice(0,8)}...`},Se.deviceId))})]}),c.jsx("p",{className:"text-[10px] text-gray-500 mt-2",children:"Changes apply on next call"})]})})]}),c.jsx("div",{className:"w-px h-8 bg-gray-700 mx-2"}),c.jsx("button",{onClick:()=>a(!0),className:"p-3 rounded-xl bg-red-600 text-white hover:bg-red-700 transition-all hover:scale-110 active:scale-95 shadow-lg shadow-red-900/20",title:"End Call",children:c.jsx(U0,{size:24})})]}),P&&c.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 flex justify-center gap-2 bg-gradient-to-t from-black/90 to-transparent opacity-0 group-hover:opacity-100 transition-opacity z-50",children:[c.jsx("button",{onMouseDown:Se=>Se.stopPropagation(),onClick:h,className:Vt("p-1.5 rounded-full text-white hover:bg-white/20",p&&"bg-red-500/50 text-red-100"),title:"Mute",children:p?c.jsx(Ov,{size:16}):c.jsx(Lv,{size:16})}),c.jsx("button",{onMouseDown:Se=>Se.stopPropagation(),onClick:m,className:Vt("p-1.5 rounded-full text-white hover:bg-white/20",y&&"bg-red-500/50 text-red-100"),title:"Camera",children:y?c.jsx(Vv,{size:16}):c.jsx(ud,{size:16})}),c.jsx("button",{onMouseDown:Se=>Se.stopPropagation(),onClick:()=>le(se===0?100:0),className:Vt("p-1.5 rounded-full text-white hover:bg-white/20",se===0&&"bg-red-500/50 text-red-100"),title:"Volume Toggle",children:se===0?c.jsx(fw,{size:16}):c.jsx(mw,{size:16})}),c.jsx("button",{onMouseDown:Se=>Se.stopPropagation(),onClick:()=>a(!0),className:"p-1.5 rounded-full bg-red-600/80 text-white hover:bg-red-600",title:"End Call",children:c.jsx(U0,{size:16})})]}),Z&&c.jsx(dB,{isOpen:Z,onClose:()=>Ee(!1)}),c.jsx(J3,{isOpen:W,onClose:()=>ie(!1),onConfirm:Se=>k(Se)})]})})},_B=()=>{const t=T.useRef(null),{localStream:e,isMuted:n,isVideoOff:r}=Od(),a=T.useRef(null);return T.useEffect(()=>{a.current&&e&&(a.current.srcObject=e)},[e]),c.jsx(z6,{bounds:"parent",nodeRef:t,children:c.jsxs("div",{ref:t,className:"absolute bottom-24 right-4 w-48 h-36 bg-gray-800 rounded-lg overflow-hidden shadow-lg border border-gray-700 cursor-move hover:scale-105 transition-transform z-50",children:[c.jsx("video",{ref:a,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),c.jsxs("div",{className:"absolute bottom-2 left-2 flex gap-1",children:[n&&c.jsx("div",{className:"bg-red-500/80 p-1 rounded",children:c.jsx(Ov,{size:12,className:"text-white"})}),r&&c.jsx("div",{className:"bg-red-500/80 p-1 rounded",children:c.jsx(Vv,{size:12,className:"text-white"})})]})]})})},wB=()=>{const{currentUser:t,logout:e,resendVerification:n}=Ln(),[r,a]=T.useState(!1),[l,u]=T.useState(""),h=async()=>{a(!0);try{await n(),u("Verification email sent! Check your inbox.")}catch(p){u("Error sending email: "+p.message)}finally{a(!1)}},m=async()=>{a(!0);try{await t.reload(),t.emailVerified?window.location.reload():u("Email is not verified yet. Please check your inbox.")}catch(p){console.error(p)}finally{a(!1)}};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-bg p-4",children:c.jsxs("div",{className:"w-full max-w-md bg-dark-sidebar rounded-lg shadow-2xl p-8 text-center space-y-6",children:[c.jsx("div",{className:"bg-brand-primary/10 w-16 h-16 rounded-full flex items-center justify-center mx-auto text-3xl",children:""}),c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Verify Your Email"}),c.jsxs("p",{className:"text-dark-muted",children:["We've sent a verification email to ",c.jsx("br",{}),c.jsx("span",{className:"font-semibold text-white",children:t?.email})]}),c.jsxs("div",{className:"bg-yellow-500/10 text-yellow-500 p-3 rounded-md text-sm",children:[" Please check your ",c.jsx("b",{children:"Spam/Junk"})," folder if you don't see the email in your inbox."]}),c.jsx("p",{className:"text-sm text-dark-muted",children:"You must verify your email address to access Lumo. To prevent spam, unverified accounts are restricted."}),l&&c.jsx("div",{className:"p-3 bg-brand-primary/20 text-brand-primary rounded-md text-sm",children:l}),c.jsxs("div",{className:"space-y-3 pt-4",children:[c.jsx(at,{onClick:m,className:"w-full",disabled:r,children:"I've Verified My Email"}),c.jsx(at,{onClick:h,variant:"secondary",className:"w-full",disabled:r,children:"Resend Verification Email"}),c.jsx("button",{onClick:e,className:"text-sm text-dark-muted hover:text-dark-text underline mt-4",children:"Logout"})]})]})})},SB=({dmId:t,dms:e})=>{const{currentUser:n,userProfile:r}=Ln(),{users:a}=Wa(),{startCall:l}=Od(),[u,h]=T.useState(null),[m,p]=T.useState(null),[y,b]=T.useState([]),x=e.find(j=>j.id===t),k=x?.participants.find(j=>j!==n?.uid);T.useEffect(()=>{(async()=>{if(k)try{const N=await ap(Ae(he,"users",k));N.exists()&&h({id:N.id,...N.data()})}catch(N){console.error("Error fetching DM user:",N)}})()},[k]);const R=T.useMemo(()=>[{id:n.uid,displayName:n.displayName||r?.displayName||"User",photoUrl:n.photoURL||r?.photoUrl,role:r?.role},u].filter(Boolean),[n,r,u]);return x?c.jsxs("div",{className:"flex-1 flex flex-col h-full bg-dark-bg",children:[c.jsxs("div",{className:"h-12 px-4 flex items-center justify-between border-b border-dark-hover shadow-sm bg-dark-bg",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"relative",children:u?.photoUrl?c.jsx("img",{src:u.photoUrl,alt:u.displayName,className:"w-8 h-8 rounded-full object-cover"}):c.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white text-sm font-bold",children:u?.displayName?.[0]?.toUpperCase()||"?"})}),c.jsx("span",{className:"font-semibold text-dark-text",children:u?.displayName||"Loading..."})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>l(u,"voice"),className:"text-dark-muted hover:text-dark-text transition-colors p-1 rounded hover:bg-dark-hover",title:"Start Voice Call",disabled:!u,children:c.jsx(OM,{size:22})}),c.jsx("button",{onClick:()=>l(u,"video"),className:"text-dark-muted hover:text-dark-text transition-colors p-1 rounded hover:bg-dark-hover",title:"Start Video Call",disabled:!u,children:c.jsx(ud,{size:22})}),c.jsx("div",{className:"w-px h-6 bg-dark-hover mx-1"}),c.jsx(P6,{messages:y,users:R,onResultClick:j=>document.getElementById(`message-${j.id}`)?.scrollIntoView({behavior:"smooth",block:"center"})})]})]}),c.jsx(ik,{serverId:null,channelId:t,users:R,currentUserId:n?.uid,userRole:r?.role,onReply:p,onMessagesChange:b}),c.jsx(M6,{serverId:null,channelId:t,channel:{id:t,name:u?.displayName},userId:n?.uid,userProfile:r,userRole:r?.role,users:R,replyingTo:m,onCancelReply:()=>p(null)})]}):c.jsx("div",{className:"flex-1 flex items-center justify-center text-dark-muted",children:"Select a conversation"})},EB="lumo",CB="1.9.7",TB="module",kB="electron/main.cjs",NB={dev:"vite",build:"vite build",lint:"eslint .",preview:"vite preview",predeploy:"npm run build",deploy:"gh-pages -d dist","electron:dev":'concurrently -k "npm run dev" "wait-on tcp:3000 && electron ."',"electron:build":"vite build && electron-builder","build:electron":"npm run electron:build"},AB={"@capacitor-community/safe-area":"^7.0.0-beta.8","@capacitor/android":"^8.0.0","@capacitor/cli":"^8.0.0","@capacitor/core":"^8.0.0","@capacitor/push-notifications":"^8.0.0","@capacitor/status-bar":"^8.0.0","@giphy/js-fetch-api":"^5.7.0","@giphy/react-components":"^10.1.0",clsx:"^2.1.1","date-fns":"^4.1.0","electron-log":"^5.4.3","electron-updater":"^6.6.2","emoji-picker-react":"^4.16.1",firebase:"^12.6.0",peerjs:"^1.5.5",react:"^19.2.3","react-color":"^2.19.3","react-dom":"^19.2.3","react-draggable":"^4.5.0","react-icons":"^5.5.0","react-router-dom":"^7.10.0","simple-peer":"^9.11.1","string-similarity":"^4.0.4","tailwind-merge":"^3.4.0","vosk-browser":"^0.0.8"},RB="Lumo - Modern Chat Application",jB="Hasan",IB={appId:"com.hasan.lumoapp",productName:"Lumo",files:["dist/**/*","electron/**/*","public/**/*"],directories:{output:"dist"},win:{target:"nsis",icon:"public/lumo-logo.png",artifactName:"LumoSetup_win-${version}.${ext}"},mac:{target:"dmg",icon:"public/lumo-logo.png",category:"public.app-category.social-networking",extendInfo:{NSCameraUsageDescription:"Lumo needs access to your camera for video calls.",NSMicrophoneUsageDescription:"Lumo needs access to your microphone for voice and video calls.",NSScreenCaptureUsageDescription:"Lumo needs access to share your screen."},artifactName:"LumoSetup_mac-${version}.${ext}"},linux:{target:"AppImage",icon:"public/lumo-logo.png",category:"Network",artifactName:"LumoSetup_linux-${version}.${ext}"},publish:[{provider:"github",owner:"opsdazlakss",repo:"lumobuild"}]},DB={type:"git",url:"https://github.com/opsdazlakss/lumobuild.git"},MB={"@capacitor/assets":"^3.0.5","@eslint/js":"^9.39.1","@types/react":"^19.2.5","@types/react-dom":"^19.2.3","@vitejs/plugin-react":"^5.1.1",autoprefixer:"^10.4.22",concurrently:"^9.2.1",electron:"^39.2.6","electron-builder":"^26.0.12",eslint:"^9.39.1","eslint-plugin-react-hooks":"^7.0.1","eslint-plugin-react-refresh":"^0.4.24","gh-pages":"^6.3.0",globals:"^16.5.0",postcss:"^8.5.6",tailwindcss:"^3.4.18",vite:"^7.2.4","wait-on":"^9.0.3"},lv={name:EB,private:!0,version:CB,type:TB,main:kB,scripts:NB,dependencies:AB,description:RB,author:jB,build:IB,repository:DB,devDependencies:MB},PB=({isOpen:t,onClose:e,version:n,downloadUrl:r,forceUpdate:a})=>c.jsx(ws,{isOpen:t,onClose:a?()=>{}:e,title:"Update Available",size:"sm",children:c.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[c.jsx("div",{className:"w-16 h-16 bg-brand-primary/20 rounded-full flex items-center justify-center animate-bounce",children:c.jsx(r7,{size:32,className:"text-brand-primary"})}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-white",children:["New Version ",n," Available!"]}),c.jsx("p",{className:"text-dark-muted text-sm mt-2",children:"A new version of Lumo is available. Please update to get the latest features and fixes."})]}),c.jsxs("div",{className:"w-full space-y-2 pt-2",children:[c.jsxs(at,{variant:"primary",className:"w-full flex items-center justify-center gap-2",onClick:()=>{window.open(r,"_system")},children:[c.jsx(DT,{size:20}),"Download Update"]}),!a&&c.jsx(at,{variant:"secondary",className:"w-full",onClick:e,children:"Update Later"})]})]})}),OB=()=>{const{currentUser:t,userProfile:e,logout:n}=Ln(),{users:r,channels:a,server:l,servers:u,currentServer:h,setCurrentServer:m,unreadMentions:p,unreadDms:y,dms:b}=Wa();vP(),iO(t?.uid);const[x,k]=T.useState(null),[R,j]=T.useState(null),[N,U]=T.useState(!1),[$,I]=T.useState(!1),[O,B]=T.useState(!1),[q,w]=T.useState(!1),[E,A]=T.useState(!1),P=aP({onSwipeLeft:()=>{if(q){w(!1);return}h!=="home"&&A(!0)},onSwipeRight:()=>{if(E){A(!1);return}w(!0)}}),[L,z]=T.useState(!1),[M,se]=T.useState(!1),[le,Y]=T.useState(null),[ee,Z]=T.useState([]),[Ee,Re]=T.useState(!1),[H,W]=T.useState(null),[ie,ve]=T.useState("idle");T.useEffect(()=>{if(!Fo.isNativePlatform())return;(async()=>{ve("checking");const Le=Date.now();try{const Ie=Ae(he,"system","app_version"),de=await ap(Ie);let pe=!1,ge=null;if(de.exists()){const it=de.data(),_e=lv.version,Ue=it.android;if(Ue&&Ue!==_e){const Me=_e.split(".").map(Number),F=Ue.split(".").map(Number);for(let Q=0;Q<Math.max(Me.length,F.length);Q++){const J=Me[Q]||0,Ce=F[Q]||0;if(Ce>J){pe=!0;break}else if(Ce<J)break}pe&&(ge={version:Ue,downloadUrl:it.downloadUrl,forceUpdate:it.forceUpdate||!1})}}const Se=Date.now()-Le;Se<1500&&await new Promise(it=>setTimeout(it,1500-Se)),pe?(W(ge),ve("available"),Re(!0)):(ve("uptodate"),setTimeout(()=>{ve("idle")},1500))}catch(Ie){console.error("Failed to check for updates:",Ie),ve("idle")}})()},[]),T.useEffect(()=>{!t||!h||!p||p[h]?.count>0&&rt(Ae(he,"users",t.uid),{[`unreadMentions.${h}`]:sw()}).catch(ae=>{console.error("Error clearing unread mentions:",ae)})},[h,t,p]),T.useEffect(()=>{!t||!R||!y||y[R.id]?.count>0&&rt(Ae(he,"users",t.uid),{[`unreadDms.${R.id}`]:sw()}).catch(ae=>{console.error("Error clearing unread DM count:",ae)})},[R,t,y]),T.useEffect(()=>{const ae=()=>{window.innerWidth<768&&!x&&!R&&w(!0)};return window.innerWidth<768&&w(!0),window.addEventListener("resize",ae),()=>window.removeEventListener("resize",ae)},[x,R]),T.useEffect(()=>{a.length>0?k(a[0]):k(null)},[h,a]);const Te=async ae=>{if(m(ae),t)try{await rt(Ae(he,"users",t.uid),{currentServer:ae})}catch(Le){console.error("Failed to persist server selection:",Le)}},De=async ae=>{if(!(!t||!ae))try{let Le=b.find(Ie=>Ie.participants.includes(ae.id)&&Ie.participants.includes(t.uid));if(!Le){const Ie=qr(wt(he,"dms"),Ta("participants","array-contains",t.uid)),pe=(await Ga(Ie)).docs.find(ge=>ge.data().participants.includes(ae.id));pe&&(Le={id:pe.id,...pe.data()})}if(Le)Le.hiddenFor?.includes(t.uid)&&await rt(Ae(he,"dms",Le.id),{hiddenFor:Le.hiddenFor.filter(Ie=>Ie!==t.uid)}),j(Le);else{const Ie={participants:[t.uid,ae.id],createdAt:bt(),updatedAt:bt(),lastMessage:null,hiddenFor:[]},de=await Bn(wt(he,"dms"),Ie);j({id:de.id,...Ie})}Te("home")}catch(Le){console.error("Error starting DM:",Le)}};return t&&!t.emailVerified?c.jsx(wB,{}):c.jsx(nO,{children:c.jsx(hO,{children:c.jsx(rO,{children:c.jsxs("div",{className:"flex h-screen bg-dark-bg overflow-hidden",...P,children:[c.jsxs("div",{className:"hidden md:flex h-full",children:[c.jsx(Yw,{servers:u,currentServerId:h,onServerChange:Te,onCreateServer:()=>z(!0),onJoinServer:()=>se(!0),userRole:e?.role,userId:t?.uid,unreadMentions:p,unreadDms:y}),c.jsx(Gw,{server:l,channels:a,selectedChannel:x,onSelectChannel:k,onOpenSettings:()=>U(!0),onOpenAdmin:()=>I(!0),onLogout:n,userProfile:e,serverId:h,userRole:e?.role,userId:t?.uid,dms:b,unreadDms:y,selectedDm:R,onSelectDm:j})]}),q&&c.jsxs("div",{className:"fixed inset-0 z-50 flex md:hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>w(!1)}),c.jsxs("div",{className:"relative flex h-full animate-slide-in-left bg-dark-bg",children:[c.jsx(Yw,{servers:u,currentServerId:h,onServerChange:ae=>Te(ae),onCreateServer:()=>z(!0),onJoinServer:()=>se(!0),userRole:e?.role,userId:t?.uid,unreadMentions:p,unreadDms:y}),c.jsx(Gw,{server:l,channels:a,selectedChannel:x,onSelectChannel:ae=>{k(ae),w(!1)},onOpenSettings:()=>{U(!0),w(!1)},onOpenAdmin:()=>{I(!0),w(!1)},onLogout:n,userProfile:e,serverId:h,userRole:e?.role,userId:t?.uid,dms:b,unreadDms:y,selectedDm:R,onSelectDm:ae=>{j(ae),w(!1)}}),c.jsx("button",{onClick:()=>w(!1),className:"absolute top-2 right-2 p-2 bg-dark-bg/50 rounded-full text-white md:hidden",style:{right:"-3rem"},children:c.jsx($n,{size:24})})]})]}),c.jsx("div",{className:"flex-1 flex flex-col",children:h==="home"?R?c.jsx(SB,{dmId:R.id,dms:b}):c.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-dark-muted relative",children:[c.jsx("button",{onClick:()=>w(!0),className:"absolute top-4 left-4 md:hidden p-2 text-dark-muted hover:text-dark-text",children:c.jsx(vw,{size:32})}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"mb-2 text-lg",children:" Welcome!"}),c.jsx("p",{children:"Select a conversation to start chatting"})]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"h-12 md:h-12 pt-safe-top md:pt-0 px-4 flex items-center justify-between border-b border-dark-hover shadow-sm bg-dark-bg box-content",children:[c.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[c.jsx("button",{onClick:()=>w(!0),className:"md:hidden p-1 mr-1 text-dark-muted hover:text-dark-text",children:c.jsx(vw,{size:24})}),c.jsx(dp,{className:"text-dark-muted flex-shrink-0"}),c.jsxs("h2",{className:"font-semibold text-dark-text flex items-center min-w-0",children:[c.jsx("span",{className:"truncate",children:x?.name||"Select a channel"}),x?.description&&c.jsx("span",{className:"hidden md:block ml-4 text-sm text-dark-muted font-normal border-l border-dark-muted/30 pl-4 truncate max-w-md",children:x.description})]})]}),c.jsx("div",{className:"flex items-center gap-3",children:x&&c.jsxs(c.Fragment,{children:[ee.filter(ae=>ae.pinned).length>0&&c.jsxs("button",{onClick:()=>B(!O),className:`hidden sm:flex items-center gap-2 px-3 py-1.5 rounded transition-colors ${O?"bg-brand-primary text-white":"bg-dark-hover text-dark-text hover:bg-dark-input"}`,children:[c.jsx(tc,{size:16}),c.jsxs("span",{className:"text-sm font-medium",children:[ee.filter(ae=>ae.pinned).length," Pinned"]})]}),c.jsx("div",{className:"hidden sm:block",children:c.jsx(P6,{messages:ee,users:r,onResultClick:ae=>console.log("Scroll to:",ae)})}),h!=="home"&&c.jsx("button",{onClick:()=>A(!0),className:"lg:hidden p-2 text-dark-muted hover:text-dark-text",children:c.jsx(g1,{size:24})})]})})]}),x?c.jsxs(c.Fragment,{children:[c.jsx(ik,{serverId:h,channelId:x.id,users:r,currentUserId:t?.uid,userRole:e?.role,onReply:Y,onMessagesChange:Z}),c.jsx(M6,{serverId:h,channelId:x.id,channel:x,userId:t?.uid,userProfile:e,userRole:e?.role,users:r,replyingTo:le,onCancelReply:()=>Y(null)})]}):c.jsx("div",{className:"flex-1 flex items-center justify-center text-dark-muted",children:"Select a channel to start chatting"})]})}),c.jsx("div",{className:"hidden lg:block h-full",children:h!=="home"&&c.jsx(Kw,{users:r,currentUserId:t?.uid,onStartDm:De})}),E&&h!=="home"&&c.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end lg:hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>A(!1)}),c.jsxs("div",{className:"relative h-full bg-dark-sidebar shadow-xl w-64 animate-slide-in-right pt-safe-top",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-hover",children:[c.jsx("h3",{className:"font-semibold text-dark-text",children:"Members"}),c.jsx("button",{onClick:()=>A(!1),children:c.jsx($n,{size:24,className:"text-dark-muted"})})]}),c.jsx("div",{className:"h-[calc(100%-60px)]",children:c.jsx(Kw,{users:r,currentUserId:t?.uid,onStartDm:ae=>{De(ae),A(!1)}})})]})]}),O&&x&&c.jsx(ZU,{messages:ee,users:r,onClose:()=>B(!1),onJumpToMessage:ae=>{const Le=document.getElementById(`message-${ae}`);Le&&(Le.scrollIntoView({behavior:"smooth",block:"center"}),Le.classList.add("bg-brand-primary/10"),setTimeout(()=>{Le.classList.remove("bg-brand-primary/10")},2e3)),B(!1)}}),c.jsx(xB,{}),c.jsx(iB,{isOpen:N,onClose:()=>U(!1),onOpenAdmin:()=>I(!0)}),c.jsx(lB,{isOpen:$,onClose:()=>I(!1)}),c.jsx(cB,{isOpen:L,onClose:()=>z(!1),userId:t?.uid,onSuccess:ae=>m(ae)}),c.jsx(uB,{isOpen:M,onClose:()=>se(!1),userId:t?.uid,onSuccess:ae=>m(ae)}),Ee&&c.jsx(PB,{isOpen:Ee,onClose:()=>!H?.forceUpdate&&Re(!1),version:H?.version,downloadUrl:H?.downloadUrl,forceUpdate:H?.forceUpdate}),["checking","uptodate"].includes(ie)&&c.jsxs("div",{className:"fixed inset-0 z-[60] bg-dark-bg flex flex-col items-center justify-center text-white transition-opacity duration-300",children:[ie==="checking"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-brand-primary mb-6"}),c.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Checking for updates..."}),c.jsxs("p",{className:"text-dark-muted font-mono text-sm",children:["v",lv.version]})]}),ie==="uptodate"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"rounded-full bg-green-500/20 p-4 mb-6",children:c.jsx(DT,{size:48,className:"text-green-500"})}),c.jsx("h2",{className:"text-xl font-semibold mb-2 text-green-400",children:"You are up to date!"}),c.jsxs("p",{className:"text-dark-muted font-mono text-sm",children:["v",lv.version]})]})]})]})})})})};class LB extends ye.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n),this.setState({errorInfo:n})}render(){return this.state.hasError?c.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-8 flex flex-col items-center justify-center text-center",children:[c.jsx("h1",{className:"text-2xl font-bold text-red-500 mb-4",children:"Something went wrong"}),c.jsxs("div",{className:"bg-gray-800 p-4 rounded overflow-auto max-w-full text-left font-mono text-xs",children:[c.jsx("p",{className:"font-bold text-yellow-400 mb-2",children:this.state.error&&this.state.error.toString()}),c.jsx("pre",{className:"text-gray-400 whitespace-pre-wrap",children:this.state.errorInfo&&this.state.errorInfo.componentStack})]}),c.jsx("button",{className:"mt-6 px-4 py-2 bg-blue-600 rounded hover:bg-blue-700",onClick:()=>window.location.reload(),children:"Reload App"})]}):this.props.children}}const To=up("PushNotifications",{}),VB=()=>{const{currentUser:t}=Ln();T.useEffect(()=>{let e,n,r,a;return Fo.getPlatform()!=="web"&&t&&(async()=>{console.log("PushNotifications hook: Initializing for user",t.uid);let u=await To.checkPermissions();if(u.receive==="prompt"&&(u=await To.requestPermissions()),u.receive!=="granted"){console.warn("PushNotifications hook: User denied permissions!");return}e=await To.addListener("registration",async h=>{console.log("Push registration success, token: "+h.value);try{const m=Ae(he,"users",t.uid);await Rr(m,{fcmTokens:h.value},{merge:!0}),console.log("FCM Token saved to Firestore for user:",t.uid)}catch(m){console.error("Error saving FCM token to Firestore:",m)}}),n=await To.addListener("registrationError",h=>{console.error("Error on registration: "+JSON.stringify(h))}),r=await To.addListener("pushNotificationReceived",h=>{console.log("Push received: "+JSON.stringify(h))}),a=await To.addListener("pushNotificationActionPerformed",h=>{console.log("Push action performed: "+JSON.stringify(h))}),console.log("PushNotifications hook: Requesting registration..."),await To.register()})(),()=>{e&&e.remove(),n&&n.remove(),r&&r.remove(),a&&a.remove()}},[t])};function zB(){const{currentUser:t,userProfile:e,loading:n}=Ln();VB();const[r,a]=T.useState("login");return n?c.jsx("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center",children:c.jsx("div",{className:"text-dark-text text-xl",children:"Loading..."})}):t&&e?.isBanned?c.jsx("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-dark-sidebar p-8 rounded-xl max-w-md w-full text-center border border-admin",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("h1",{className:"text-2xl font-bold text-dark-text mb-2",children:"Account Banned"}),c.jsx("p",{className:"text-dark-muted mb-6",children:"Your account has been banned from this server. Please contact an administrator if you believe this is a mistake."}),c.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-hover transition-colors",children:"Refresh"})]})}):t?c.jsx(vM,{children:c.jsx(OB,{})}):c.jsxs(c.Fragment,{children:[r==="login"&&c.jsx(rP,{onSwitchToRegister:()=>a("register"),onSwitchToReset:()=>a("reset")}),r==="register"&&c.jsx(sP,{onSwitchToLogin:()=>a("login")}),r==="reset"&&c.jsx(iP,{onSwitchToLogin:()=>a("login")})]})}function UB(){return c.jsx(c7,{children:c.jsx(LB,{children:c.jsx(mM,{children:c.jsx(zB,{})})})})}TN.createRoot(document.getElementById("root")).render(c.jsx(T.StrictMode,{children:c.jsx(UB,{})}));
