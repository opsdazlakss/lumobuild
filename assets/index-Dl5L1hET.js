function H5(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function rh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function $5(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var hy={exports:{}},id={};var Uw;function q5(){if(Uw)return id;Uw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,o){var u=null;if(o!==void 0&&(u=""+o),i.key!==void 0&&(u=""+i.key),"key"in i){o={};for(var h in i)h!=="key"&&(o[h]=i[h])}else o=i;return i=o.ref,{$$typeof:t,type:r,key:u,ref:i!==void 0?i:null,props:o}}return id.Fragment=e,id.jsx=n,id.jsxs=n,id}var zw;function G5(){return zw||(zw=1,hy.exports=q5()),hy.exports}var c=G5(),fy={exports:{}},gt={};var Bw;function Y5(){if(Bw)return gt;Bw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),x=Symbol.iterator;function C($){return $===null||typeof $!="object"?null:($=x&&$[x]||$["@@iterator"],typeof $=="function"?$:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,k={};function L($,Q,re){this.props=$,this.context=Q,this.refs=k,this.updater=re||R}L.prototype.isReactComponent={},L.prototype.setState=function($,Q){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,Q,"setState")},L.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function U(){}U.prototype=L.prototype;function I($,Q,re){this.props=$,this.context=Q,this.refs=k,this.updater=re||R}var M=I.prototype=new U;M.constructor=I,A(M,L.prototype),M.isPureReactComponent=!0;var z=Array.isArray;function H(){}var E={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function j($,Q,re){var he=re.ref;return{$$typeof:t,type:$,key:Q,ref:he!==void 0?he:null,props:re}}function D($,Q){return j($.type,Q,$.props)}function V($){return typeof $=="object"&&$!==null&&$.$$typeof===t}function B($){var Q={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(re){return Q[re]})}var P=/\/+/g;function ne($,Q){return typeof $=="object"&&$!==null&&$.key!=null?B(""+$.key):Q.toString(36)}function oe($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(H,H):($.status="pending",$.then(function(Q){$.status==="pending"&&($.status="fulfilled",$.value=Q)},function(Q){$.status==="pending"&&($.status="rejected",$.reason=Q)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function G($,Q,re,he,Te){var Ue=typeof $;(Ue==="undefined"||Ue==="boolean")&&($=null);var te=!1;if($===null)te=!0;else switch(Ue){case"bigint":case"string":case"number":te=!0;break;case"object":switch($.$$typeof){case t:case e:te=!0;break;case v:return te=$._init,G(te($._payload),Q,re,he,Te)}}if(te)return Te=Te($),te=he===""?"."+ne($,0):he,z(Te)?(re="",te!=null&&(re=te.replace(P,"$&/")+"/"),G(Te,Q,re,"",function(Xe){return Xe})):Te!=null&&(V(Te)&&(Te=D(Te,re+(Te.key==null||$&&$.key===Te.key?"":(""+Te.key).replace(P,"$&/")+"/")+te)),Q.push(Te)),1;te=0;var Oe=he===""?".":he+":";if(z($))for(var Ie=0;Ie<$.length;Ie++)he=$[Ie],Ue=Oe+ne(he,Ie),te+=G(he,Q,re,Ue,Te);else if(Ie=C($),typeof Ie=="function")for($=Ie.call($),Ie=0;!(he=$.next()).done;)he=he.value,Ue=Oe+ne(he,Ie++),te+=G(he,Q,re,Ue,Te);else if(Ue==="object"){if(typeof $.then=="function")return G(oe($),Q,re,he,Te);throw Q=String($),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return te}function Z($,Q,re){if($==null)return $;var he=[],Te=0;return G($,he,"","",function(Ue){return Q.call(re,Ue,Te++)}),he}function J($){if($._status===-1){var Q=$._result;Q=Q(),Q.then(function(re){($._status===0||$._status===-1)&&($._status=1,$._result=re)},function(re){($._status===0||$._status===-1)&&($._status=2,$._result=re)}),$._status===-1&&($._status=0,$._result=Q)}if($._status===1)return $._result.default;throw $._result}var Se=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)},Le={map:Z,forEach:function($,Q,re){Z($,function(){Q.apply(this,arguments)},re)},count:function($){var Q=0;return Z($,function(){Q++}),Q},toArray:function($){return Z($,function(Q){return Q})||[]},only:function($){if(!V($))throw Error("React.Children.only expected to receive a single React element child.");return $}};return gt.Activity=b,gt.Children=Le,gt.Component=L,gt.Fragment=n,gt.Profiler=i,gt.PureComponent=I,gt.StrictMode=r,gt.Suspense=f,gt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,gt.__COMPILER_RUNTIME={__proto__:null,c:function($){return E.H.useMemoCache($)}},gt.cache=function($){return function(){return $.apply(null,arguments)}},gt.cacheSignal=function(){return null},gt.cloneElement=function($,Q,re){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var he=A({},$.props),Te=$.key;if(Q!=null)for(Ue in Q.key!==void 0&&(Te=""+Q.key),Q)!S.call(Q,Ue)||Ue==="key"||Ue==="__self"||Ue==="__source"||Ue==="ref"&&Q.ref===void 0||(he[Ue]=Q[Ue]);var Ue=arguments.length-2;if(Ue===1)he.children=re;else if(1<Ue){for(var te=Array(Ue),Oe=0;Oe<Ue;Oe++)te[Oe]=arguments[Oe+2];he.children=te}return j($.type,Te,he)},gt.createContext=function($){return $={$$typeof:u,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:o,_context:$},$},gt.createElement=function($,Q,re){var he,Te={},Ue=null;if(Q!=null)for(he in Q.key!==void 0&&(Ue=""+Q.key),Q)S.call(Q,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(Te[he]=Q[he]);var te=arguments.length-2;if(te===1)Te.children=re;else if(1<te){for(var Oe=Array(te),Ie=0;Ie<te;Ie++)Oe[Ie]=arguments[Ie+2];Te.children=Oe}if($&&$.defaultProps)for(he in te=$.defaultProps,te)Te[he]===void 0&&(Te[he]=te[he]);return j($,Ue,Te)},gt.createRef=function(){return{current:null}},gt.forwardRef=function($){return{$$typeof:h,render:$}},gt.isValidElement=V,gt.lazy=function($){return{$$typeof:v,_payload:{_status:-1,_result:$},_init:J}},gt.memo=function($,Q){return{$$typeof:m,type:$,compare:Q===void 0?null:Q}},gt.startTransition=function($){var Q=E.T,re={};E.T=re;try{var he=$(),Te=E.S;Te!==null&&Te(re,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(H,Se)}catch(Ue){Se(Ue)}finally{Q!==null&&re.types!==null&&(Q.types=re.types),E.T=Q}},gt.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},gt.use=function($){return E.H.use($)},gt.useActionState=function($,Q,re){return E.H.useActionState($,Q,re)},gt.useCallback=function($,Q){return E.H.useCallback($,Q)},gt.useContext=function($){return E.H.useContext($)},gt.useDebugValue=function(){},gt.useDeferredValue=function($,Q){return E.H.useDeferredValue($,Q)},gt.useEffect=function($,Q){return E.H.useEffect($,Q)},gt.useEffectEvent=function($){return E.H.useEffectEvent($)},gt.useId=function(){return E.H.useId()},gt.useImperativeHandle=function($,Q,re){return E.H.useImperativeHandle($,Q,re)},gt.useInsertionEffect=function($,Q){return E.H.useInsertionEffect($,Q)},gt.useLayoutEffect=function($,Q){return E.H.useLayoutEffect($,Q)},gt.useMemo=function($,Q){return E.H.useMemo($,Q)},gt.useOptimistic=function($,Q){return E.H.useOptimistic($,Q)},gt.useReducer=function($,Q,re){return E.H.useReducer($,Q,re)},gt.useRef=function($){return E.H.useRef($)},gt.useState=function($){return E.H.useState($)},gt.useSyncExternalStore=function($,Q,re){return E.H.useSyncExternalStore($,Q,re)},gt.useTransition=function(){return E.H.useTransition()},gt.version="19.2.3",gt}var Fw;function po(){return Fw||(Fw=1,fy.exports=Y5()),fy.exports}var w=po();const ve=rh(w);var my={exports:{}},ad={},py={exports:{}},gy={};var Hw;function K5(){return Hw||(Hw=1,(function(t){function e(G,Z){var J=G.length;G.push(Z);e:for(;0<J;){var Se=J-1>>>1,Le=G[Se];if(0<i(Le,Z))G[Se]=Z,G[J]=Le,J=Se;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var Z=G[0],J=G.pop();if(J!==Z){G[0]=J;e:for(var Se=0,Le=G.length,$=Le>>>1;Se<$;){var Q=2*(Se+1)-1,re=G[Q],he=Q+1,Te=G[he];if(0>i(re,J))he<Le&&0>i(Te,re)?(G[Se]=Te,G[he]=J,Se=he):(G[Se]=re,G[Q]=J,Se=Q);else if(he<Le&&0>i(Te,J))G[Se]=Te,G[he]=J,Se=he;else break e}}return Z}function i(G,Z){var J=G.sortIndex-Z.sortIndex;return J!==0?J:G.id-Z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var f=[],m=[],v=1,b=null,x=3,C=!1,R=!1,A=!1,k=!1,L=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function M(G){for(var Z=n(m);Z!==null;){if(Z.callback===null)r(m);else if(Z.startTime<=G)r(m),Z.sortIndex=Z.expirationTime,e(f,Z);else break;Z=n(m)}}function z(G){if(A=!1,M(G),!R)if(n(f)!==null)R=!0,H||(H=!0,B());else{var Z=n(m);Z!==null&&oe(z,Z.startTime-G)}}var H=!1,E=-1,S=5,j=-1;function D(){return k?!0:!(t.unstable_now()-j<S)}function V(){if(k=!1,H){var G=t.unstable_now();j=G;var Z=!0;try{e:{R=!1,A&&(A=!1,U(E),E=-1),C=!0;var J=x;try{t:{for(M(G),b=n(f);b!==null&&!(b.expirationTime>G&&D());){var Se=b.callback;if(typeof Se=="function"){b.callback=null,x=b.priorityLevel;var Le=Se(b.expirationTime<=G);if(G=t.unstable_now(),typeof Le=="function"){b.callback=Le,M(G),Z=!0;break t}b===n(f)&&r(f),M(G)}else r(f);b=n(f)}if(b!==null)Z=!0;else{var $=n(m);$!==null&&oe(z,$.startTime-G),Z=!1}}break e}finally{b=null,x=J,C=!1}Z=void 0}}finally{Z?B():H=!1}}}var B;if(typeof I=="function")B=function(){I(V)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,ne=P.port2;P.port1.onmessage=V,B=function(){ne.postMessage(null)}}else B=function(){L(V,0)};function oe(G,Z){E=L(function(){G(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(G){switch(x){case 1:case 2:case 3:var Z=3;break;default:Z=x}var J=x;x=Z;try{return G()}finally{x=J}},t.unstable_requestPaint=function(){k=!0},t.unstable_runWithPriority=function(G,Z){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var J=x;x=G;try{return Z()}finally{x=J}},t.unstable_scheduleCallback=function(G,Z,J){var Se=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?Se+J:Se):J=Se,G){case 1:var Le=-1;break;case 2:Le=250;break;case 5:Le=1073741823;break;case 4:Le=1e4;break;default:Le=5e3}return Le=J+Le,G={id:v++,callback:Z,priorityLevel:G,startTime:J,expirationTime:Le,sortIndex:-1},J>Se?(G.sortIndex=J,e(m,G),n(f)===null&&G===n(m)&&(A?(U(E),E=-1):A=!0,oe(z,J-Se))):(G.sortIndex=Le,e(f,G),R||C||(R=!0,H||(H=!0,B()))),G},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(G){var Z=x;return function(){var J=x;x=Z;try{return G.apply(this,arguments)}finally{x=J}}}})(gy)),gy}var $w;function W5(){return $w||($w=1,py.exports=K5()),py.exports}var vy={exports:{}},pr={};var qw;function Q5(){if(qw)return pr;qw=1;var t=po();function e(f){var m="https://react.dev/errors/"+f;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(f,m,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:b==null?null:""+b,children:f,containerInfo:m,implementation:v}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,m){if(f==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return pr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,pr.createPortal=function(f,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return o(f,m,null,v)},pr.flushSync=function(f){var m=u.T,v=r.p;try{if(u.T=null,r.p=2,f)return f()}finally{u.T=m,r.p=v,r.d.f()}},pr.preconnect=function(f,m){typeof f=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,r.d.C(f,m))},pr.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},pr.preinit=function(f,m){if(typeof f=="string"&&m&&typeof m.as=="string"){var v=m.as,b=h(v,m.crossOrigin),x=typeof m.integrity=="string"?m.integrity:void 0,C=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?r.d.S(f,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:b,integrity:x,fetchPriority:C}):v==="script"&&r.d.X(f,{crossOrigin:b,integrity:x,fetchPriority:C,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},pr.preinitModule=function(f,m){if(typeof f=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=h(m.as,m.crossOrigin);r.d.M(f,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&r.d.M(f)},pr.preload=function(f,m){if(typeof f=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,b=h(v,m.crossOrigin);r.d.L(f,v,{crossOrigin:b,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},pr.preloadModule=function(f,m){if(typeof f=="string")if(m){var v=h(m.as,m.crossOrigin);r.d.m(f,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else r.d.m(f)},pr.requestFormReset=function(f){r.d.r(f)},pr.unstable_batchedUpdates=function(f,m){return f(m)},pr.useFormState=function(f,m,v){return u.H.useFormState(f,m,v)},pr.useFormStatus=function(){return u.H.useHostTransitionStatus()},pr.version="19.2.3",pr}var Gw;function fb(){if(Gw)return vy.exports;Gw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),vy.exports=Q5(),vy.exports}var Yw;function X5(){if(Yw)return ad;Yw=1;var t=W5(),e=po(),n=fb();function r(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,l=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(l=a.return),s=a.return;while(s)}return a.tag===3?l:null}function u(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function h(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function f(s){if(o(s)!==s)throw Error(r(188))}function m(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(r(188));return a!==s?null:s}for(var l=s,d=a;;){var g=l.return;if(g===null)break;var y=g.alternate;if(y===null){if(d=g.return,d!==null){l=d;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===l)return f(g),s;if(y===d)return f(g),a;y=y.sibling}throw Error(r(188))}if(l.return!==d.return)l=g,d=y;else{for(var T=!1,O=g.child;O;){if(O===l){T=!0,l=g,d=y;break}if(O===d){T=!0,d=g,l=y;break}O=O.sibling}if(!T){for(O=y.child;O;){if(O===l){T=!0,l=y,d=g;break}if(O===d){T=!0,d=y,l=g;break}O=O.sibling}if(!T)throw Error(r(189))}}if(l.alternate!==d)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?s:a}function v(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=v(s),a!==null)return a;s=s.sibling}return null}var b=Object.assign,x=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),I=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function B(s){return s===null||typeof s!="object"?null:(s=V&&s[V]||s["@@iterator"],typeof s=="function"?s:null)}var P=Symbol.for("react.client.reference");function ne(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===P?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case A:return"Fragment";case L:return"Profiler";case k:return"StrictMode";case z:return"Suspense";case H:return"SuspenseList";case j:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case R:return"Portal";case I:return s.displayName||"Context";case U:return(s._context.displayName||"Context")+".Consumer";case M:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case E:return a=s.displayName||null,a!==null?a:ne(s.type)||"Memo";case S:a=s._payload,s=s._init;try{return ne(s(a))}catch{}}return null}var oe=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},Se=[],Le=-1;function $(s){return{current:s}}function Q(s){0>Le||(s.current=Se[Le],Se[Le]=null,Le--)}function re(s,a){Le++,Se[Le]=s.current,s.current=a}var he=$(null),Te=$(null),Ue=$(null),te=$(null);function Oe(s,a){switch(re(Ue,a),re(Te,s),re(he,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?lw(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=lw(a),s=cw(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Q(he),re(he,s)}function Ie(){Q(he),Q(Te),Q(Ue)}function Xe(s){s.memoizedState!==null&&re(te,s);var a=he.current,l=cw(a,s.type);a!==l&&(re(Te,s),re(he,l))}function ke(s){Te.current===s&&(Q(he),Q(Te)),te.current===s&&(Q(te),td._currentValue=J)}var fe,Ae;function dt(s){if(fe===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);fe=a&&a[1]||"",Ae=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fe+s+Ae}var ye=!1;function Ve(s,a){if(!s||ye)return"";ye=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(a){var _e=function(){throw Error()};if(Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(de){var ae=de}Reflect.construct(s,[],_e)}else{try{_e.call()}catch(de){ae=de}s.call(_e.prototype)}}else{try{throw Error()}catch(de){ae=de}(_e=s())&&typeof _e.catch=="function"&&_e.catch(function(){})}}catch(de){if(de&&ae&&typeof de.stack=="string")return[de.stack,ae.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=d.DetermineComponentFrameRoot(),T=y[0],O=y[1];if(T&&O){var q=T.split(`
`),ie=O.split(`
`);for(g=d=0;d<q.length&&!q[d].includes("DetermineComponentFrameRoot");)d++;for(;g<ie.length&&!ie[g].includes("DetermineComponentFrameRoot");)g++;if(d===q.length||g===ie.length)for(d=q.length-1,g=ie.length-1;1<=d&&0<=g&&q[d]!==ie[g];)g--;for(;1<=d&&0<=g;d--,g--)if(q[d]!==ie[g]){if(d!==1||g!==1)do if(d--,g--,0>g||q[d]!==ie[g]){var ge=`
`+q[d].replace(" at new "," at ");return s.displayName&&ge.includes("<anonymous>")&&(ge=ge.replace("<anonymous>",s.displayName)),ge}while(1<=d&&0<=g);break}}}finally{ye=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?dt(l):""}function De(s,a){switch(s.tag){case 26:case 27:case 5:return dt(s.type);case 16:return dt("Lazy");case 13:return s.child!==a&&a!==null?dt("Suspense Fallback"):dt("Suspense");case 19:return dt("SuspenseList");case 0:case 15:return Ve(s.type,!1);case 11:return Ve(s.type.render,!1);case 1:return Ve(s.type,!0);case 31:return dt("Activity");default:return""}}function K(s){try{var a="",l=null;do a+=De(s,l),l=s,s=s.return;while(s);return a}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var ue=Object.prototype.hasOwnProperty,je=t.unstable_scheduleCallback,me=t.unstable_cancelCallback,Ne=t.unstable_shouldYield,xe=t.unstable_requestPaint,X=t.unstable_now,He=t.unstable_getCurrentPriorityLevel,ct=t.unstable_ImmediatePriority,on=t.unstable_UserBlockingPriority,Ee=t.unstable_NormalPriority,$e=t.unstable_LowPriority,lt=t.unstable_IdlePriority,yt=t.log,Vt=t.unstable_setDisableYieldValue,kt=null,nt=null;function Rt(s){if(typeof yt=="function"&&Vt(s),nt&&typeof nt.setStrictMode=="function")try{nt.setStrictMode(kt,s)}catch{}}var Qt=Math.clz32?Math.clz32:Ze,Fe=Math.log,Ce=Math.LN2;function Ze(s){return s>>>=0,s===0?32:31-(Fe(s)/Ce|0)|0}var et=256,bt=262144,mt=4194304;function At(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function $t(s,a,l){var d=s.pendingLanes;if(d===0)return 0;var g=0,y=s.suspendedLanes,T=s.pingedLanes;s=s.warmLanes;var O=d&134217727;return O!==0?(d=O&~y,d!==0?g=At(d):(T&=O,T!==0?g=At(T):l||(l=O&~s,l!==0&&(g=At(l))))):(O=d&~y,O!==0?g=At(O):T!==0?g=At(T):l||(l=d&~s,l!==0&&(g=At(l)))),g===0?0:a!==0&&a!==g&&(a&y)===0&&(y=g&-g,l=a&-a,y>=l||y===32&&(l&4194048)!==0)?a:g}function St(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function ln(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qn(){var s=mt;return mt<<=1,(mt&62914560)===0&&(mt=4194304),s}function qe(s){for(var a=[],l=0;31>l;l++)a.push(s);return a}function xt(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function qt(s,a,l,d,g,y){var T=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var O=s.entanglements,q=s.expirationTimes,ie=s.hiddenUpdates;for(l=T&~l;0<l;){var ge=31-Qt(l),_e=1<<ge;O[ge]=0,q[ge]=-1;var ae=ie[ge];if(ae!==null)for(ie[ge]=null,ge=0;ge<ae.length;ge++){var de=ae[ge];de!==null&&(de.lane&=-536870913)}l&=~_e}d!==0&&nr(s,d,0),y!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=y&~(T&~a))}function nr(s,a,l){s.pendingLanes|=a,s.suspendedLanes&=~a;var d=31-Qt(a);s.entangledLanes|=a,s.entanglements[d]=s.entanglements[d]|1073741824|l&261930}function ha(s,a){var l=s.entangledLanes|=a;for(s=s.entanglements;l;){var d=31-Qt(l),g=1<<d;g&a|s[d]&a&&(s[d]|=a),l&=~g}}function ou(s,a){var l=a&-a;return l=(l&42)!==0?1:yo(l),(l&(s.suspendedLanes|a))!==0?0:l}function yo(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function yi(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Sh(){var s=Z.p;return s!==0?s:(s=window.event,s===void 0?32:jw(s.type))}function ys(s,a){var l=Z.p;try{return Z.p=s,a()}finally{Z.p=l}}var bs=Math.random().toString(36).slice(2),Rn="__reactFiber$"+bs,Xn="__reactProps$"+bs,Vs="__reactContainer$"+bs,xl="__reactEvents$"+bs,yg="__reactListeners$"+bs,Th="__reactHandles$"+bs,Ch="__reactResources$"+bs,Us="__reactMarker$"+bs;function _l(s){delete s[Rn],delete s[Xn],delete s[xl],delete s[yg],delete s[Th]}function zs(s){var a=s[Rn];if(a)return a;for(var l=s.parentNode;l;){if(a=l[Vs]||l[Rn]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(s=gw(s);s!==null;){if(l=s[Rn])return l;s=gw(s)}return a}s=l,l=s.parentNode}return null}function rs(s){if(s=s[Rn]||s[Vs]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function $r(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(r(33))}function Bs(s){var a=s[Ch];return a||(a=s[Ch]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function In(s){s[Us]=!0}var lu=new Set,cu={};function Fs(s,a){Hs(s,a),Hs(s+"Capture",a)}function Hs(s,a){for(cu[s]=a,s=0;s<a.length;s++)lu.add(a[s])}var uu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),du={},hu={};function kh(s){return ue.call(hu,s)?!0:ue.call(du,s)?!1:uu.test(s)?hu[s]=!0:(du[s]=!0,!1)}function wl(s,a,l){if(kh(a))if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var d=a.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+l)}}function qr(s,a,l){if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+l)}}function jn(s,a,l,d){if(d===null)s.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(a,l,""+d)}}function Jn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function fa(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function fu(s,a,l){var d=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var g=d.get,y=d.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return g.call(this)},set:function(T){l=""+T,y.call(this,T)}}),Object.defineProperty(s,a,{enumerable:d.enumerable}),{getValue:function(){return l},setValue:function(T){l=""+T},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Xt(s){if(!s._valueTracker){var a=fa(s)?"checked":"value";s._valueTracker=fu(s,a,""+s[a])}}function bo(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var l=a.getValue(),d="";return s&&(d=fa(s)?s.checked?"true":"false":s.value),s=d,s!==l?(a.setValue(s),!0):!1}function $s(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var xo=/[\n"\\]/g;function Rr(s){return s.replace(xo,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function El(s,a,l,d,g,y,T,O){s.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?s.type=T:s.removeAttribute("type"),a!=null?T==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+Jn(a)):s.value!==""+Jn(a)&&(s.value=""+Jn(a)):T!=="submit"&&T!=="reset"||s.removeAttribute("value"),a!=null?mu(s,T,Jn(a)):l!=null?mu(s,T,Jn(l)):d!=null&&s.removeAttribute("value"),g==null&&y!=null&&(s.defaultChecked=!!y),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?s.name=""+Jn(O):s.removeAttribute("name")}function Nh(s,a,l,d,g,y,T,O){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(s.type=y),a!=null||l!=null){if(!(y!=="submit"&&y!=="reset"||a!=null)){Xt(s);return}l=l!=null?""+Jn(l):"",a=a!=null?""+Jn(a):l,O||a===s.value||(s.value=a),s.defaultValue=a}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,s.checked=O?s.checked:!!d,s.defaultChecked=!!d,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.name=T),Xt(s)}function mu(s,a,l){a==="number"&&$s(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function ma(s,a,l,d){if(s=s.options,a){a={};for(var g=0;g<l.length;g++)a["$"+l[g]]=!0;for(l=0;l<s.length;l++)g=a.hasOwnProperty("$"+s[l].value),s[l].selected!==g&&(s[l].selected=g),g&&d&&(s[l].defaultSelected=!0)}else{for(l=""+Jn(l),a=null,g=0;g<s.length;g++){if(s[g].value===l){s[g].selected=!0,d&&(s[g].defaultSelected=!0);return}a!==null||s[g].disabled||(a=s[g])}a!==null&&(a.selected=!0)}}function Ah(s,a,l){if(a!=null&&(a=""+Jn(a),a!==s.value&&(s.value=a),l==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=l!=null?""+Jn(l):""}function pa(s,a,l,d){if(a==null){if(d!=null){if(l!=null)throw Error(r(92));if(oe(d)){if(1<d.length)throw Error(r(93));d=d[0]}l=d}l==null&&(l=""),a=l}l=Jn(a),s.defaultValue=l,d=s.textContent,d===l&&d!==""&&d!==null&&(s.value=d),Xt(s)}function Ir(s,a){if(a){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=a;return}}s.textContent=a}var Rh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pu(s,a,l){var d=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":d?s.setProperty(a,l):typeof l!="number"||l===0||Rh.has(a)?a==="float"?s.cssFloat=l:s[a]=(""+l).trim():s[a]=l+"px"}function gu(s,a,l){if(a!=null&&typeof a!="object")throw Error(r(62));if(s=s.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||a!=null&&a.hasOwnProperty(d)||(d.indexOf("--")===0?s.setProperty(d,""):d==="float"?s.cssFloat="":s[d]="");for(var g in a)d=a[g],a.hasOwnProperty(g)&&l[g]!==d&&pu(s,g,d)}else for(var y in a)a.hasOwnProperty(y)&&pu(s,y,a[y])}function Sl(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ih=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ga=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Tl(s){return ga.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function xs(){}var vu=null;function ss(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var va=null,qs=null;function _o(s){var a=rs(s);if(a&&(s=a.stateNode)){var l=s[Xn]||null;e:switch(s=a.stateNode,a.type){case"input":if(El(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Rr(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var d=l[a];if(d!==s&&d.form===s.form){var g=d[Xn]||null;if(!g)throw Error(r(90));El(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<l.length;a++)d=l[a],d.form===s.form&&bo(d)}break e;case"textarea":Ah(s,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&ma(s,!!l.multiple,a,!1)}}}var Cl=!1;function ya(s,a,l){if(Cl)return s(a,l);Cl=!0;try{var d=s(a);return d}finally{if(Cl=!1,(va!==null||qs!==null)&&(Tf(),va&&(a=va,s=qs,qs=va=null,_o(a),s)))for(a=0;a<s.length;a++)_o(s[a])}}function _s(s,a){var l=s.stateNode;if(l===null)return null;var d=l[Xn]||null;if(d===null)return null;l=d[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(r(231,a,typeof l));return l}var is=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wo=!1;if(is)try{var en={};Object.defineProperty(en,"passive",{get:function(){wo=!0}}),window.addEventListener("test",en,en),window.removeEventListener("test",en,en)}catch{wo=!1}var Gs=null,yu=null,Eo=null;function bu(){if(Eo)return Eo;var s,a=yu,l=a.length,d,g="value"in Gs?Gs.value:Gs.textContent,y=g.length;for(s=0;s<l&&a[s]===g[s];s++);var T=l-s;for(d=1;d<=T&&a[l-d]===g[y-d];d++);return Eo=g.slice(s,1<d?1-d:void 0)}function So(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function bi(){return!0}function ws(){return!1}function rr(s){function a(l,d,g,y,T){this._reactName=l,this._targetInst=g,this.type=d,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var O in s)s.hasOwnProperty(O)&&(l=s[O],this[O]=l?l(y):y[O]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?bi:ws,this.isPropagationStopped=ws,this}return b(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=bi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=bi)},persist:function(){},isPersistent:bi}),a}var xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ys=rr(xi),ba=b({},xi,{view:0,detail:0}),xu=rr(ba),xa,kl,Ks,Nl=b({},ba,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_a,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ks&&(Ks&&s.type==="mousemove"?(xa=s.screenX-Ks.screenX,kl=s.screenY-Ks.screenY):kl=xa=0,Ks=s),xa)},movementY:function(s){return"movementY"in s?s.movementY:kl}}),_u=rr(Nl),To=b({},Nl,{dataTransfer:0}),jh=rr(To),Dh=b({},ba,{relatedTarget:0}),Co=rr(Dh),wu=b({},xi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ph=rr(wu),Al=b({},xi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Mh=rr(Al),Oh=b({},xi,{data:0}),Ws=rr(Oh),Lh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zh(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=Uh[s])?!!a[s]:!1}function _a(){return zh}var Er=b({},ba,{key:function(s){if(s.key){var a=Lh[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=So(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Vh[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_a,charCode:function(s){return s.type==="keypress"?So(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?So(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Bh=rr(Er),Fh=b({},Nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_i=rr(Fh),p=b({},ba,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_a}),_=rr(p),N=b({},xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),F=rr(N),ee=b({},Nl,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),le=rr(ee),ze=b({},xi,{newState:0,oldState:0}),wt=rr(ze),Tn=[9,13,27,32],Gt=is&&"CompositionEvent"in window,pn=null;is&&"documentMode"in document&&(pn=document.documentMode);var as=is&&"TextEvent"in window&&!pn,Qs=is&&(!Gt||pn&&8<pn&&11>=pn),Es=" ",Ss=!1;function ko(s,a){switch(s){case"keyup":return Tn.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rl(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Il=!1;function f6(s,a){switch(s){case"compositionend":return Rl(a);case"keypress":return a.which!==32?null:(Ss=!0,Es);case"textInput":return s=a.data,s===Es&&Ss?null:s;default:return null}}function m6(s,a){if(Il)return s==="compositionend"||!Gt&&ko(s,a)?(s=bu(),Eo=yu=Gs=null,Il=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Qs&&a.locale!=="ko"?null:a.data;default:return null}}var p6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bx(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!p6[s.type]:a==="textarea"}function xx(s,a,l,d){va?qs?qs.push(d):qs=[d]:va=d,a=jf(a,"onChange"),0<a.length&&(l=new Ys("onChange","change",null,l,d),s.push({event:l,listeners:a}))}var Eu=null,Su=null;function g6(s){nw(s,0)}function Hh(s){var a=$r(s);if(bo(a))return s}function _x(s,a){if(s==="change")return a}var wx=!1;if(is){var bg;if(is){var xg="oninput"in document;if(!xg){var Ex=document.createElement("div");Ex.setAttribute("oninput","return;"),xg=typeof Ex.oninput=="function"}bg=xg}else bg=!1;wx=bg&&(!document.documentMode||9<document.documentMode)}function Sx(){Eu&&(Eu.detachEvent("onpropertychange",Tx),Su=Eu=null)}function Tx(s){if(s.propertyName==="value"&&Hh(Su)){var a=[];xx(a,Su,s,ss(s)),ya(g6,a)}}function v6(s,a,l){s==="focusin"?(Sx(),Eu=a,Su=l,Eu.attachEvent("onpropertychange",Tx)):s==="focusout"&&Sx()}function y6(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Hh(Su)}function b6(s,a){if(s==="click")return Hh(a)}function x6(s,a){if(s==="input"||s==="change")return Hh(a)}function _6(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Gr=typeof Object.is=="function"?Object.is:_6;function Tu(s,a){if(Gr(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var l=Object.keys(s),d=Object.keys(a);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var g=l[d];if(!ue.call(a,g)||!Gr(s[g],a[g]))return!1}return!0}function Cx(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function kx(s,a){var l=Cx(s);s=0;for(var d;l;){if(l.nodeType===3){if(d=s+l.textContent.length,s<=a&&d>=a)return{node:l,offset:a-s};s=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Cx(l)}}function Nx(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?Nx(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function Ax(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=$s(s.document);a instanceof s.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)s=a.contentWindow;else break;a=$s(s.document)}return a}function _g(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var w6=is&&"documentMode"in document&&11>=document.documentMode,jl=null,wg=null,Cu=null,Eg=!1;function Rx(s,a,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Eg||jl==null||jl!==$s(d)||(d=jl,"selectionStart"in d&&_g(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Cu&&Tu(Cu,d)||(Cu=d,d=jf(wg,"onSelect"),0<d.length&&(a=new Ys("onSelect","select",null,a,l),s.push({event:a,listeners:d}),a.target=jl)))}function No(s,a){var l={};return l[s.toLowerCase()]=a.toLowerCase(),l["Webkit"+s]="webkit"+a,l["Moz"+s]="moz"+a,l}var Dl={animationend:No("Animation","AnimationEnd"),animationiteration:No("Animation","AnimationIteration"),animationstart:No("Animation","AnimationStart"),transitionrun:No("Transition","TransitionRun"),transitionstart:No("Transition","TransitionStart"),transitioncancel:No("Transition","TransitionCancel"),transitionend:No("Transition","TransitionEnd")},Sg={},Ix={};is&&(Ix=document.createElement("div").style,"AnimationEvent"in window||(delete Dl.animationend.animation,delete Dl.animationiteration.animation,delete Dl.animationstart.animation),"TransitionEvent"in window||delete Dl.transitionend.transition);function Ao(s){if(Sg[s])return Sg[s];if(!Dl[s])return s;var a=Dl[s],l;for(l in a)if(a.hasOwnProperty(l)&&l in Ix)return Sg[s]=a[l];return s}var jx=Ao("animationend"),Dx=Ao("animationiteration"),Px=Ao("animationstart"),E6=Ao("transitionrun"),S6=Ao("transitionstart"),T6=Ao("transitioncancel"),Mx=Ao("transitionend"),Ox=new Map,Tg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Tg.push("scrollEnd");function Ts(s,a){Ox.set(s,a),Fs(a,[s])}var $h=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},os=[],Pl=0,Cg=0;function qh(){for(var s=Pl,a=Cg=Pl=0;a<s;){var l=os[a];os[a++]=null;var d=os[a];os[a++]=null;var g=os[a];os[a++]=null;var y=os[a];if(os[a++]=null,d!==null&&g!==null){var T=d.pending;T===null?g.next=g:(g.next=T.next,T.next=g),d.pending=g}y!==0&&Lx(l,g,y)}}function Gh(s,a,l,d){os[Pl++]=s,os[Pl++]=a,os[Pl++]=l,os[Pl++]=d,Cg|=d,s.lanes|=d,s=s.alternate,s!==null&&(s.lanes|=d)}function kg(s,a,l,d){return Gh(s,a,l,d),Yh(s)}function Ro(s,a){return Gh(s,null,null,a),Yh(s)}function Lx(s,a,l){s.lanes|=l;var d=s.alternate;d!==null&&(d.lanes|=l);for(var g=!1,y=s.return;y!==null;)y.childLanes|=l,d=y.alternate,d!==null&&(d.childLanes|=l),y.tag===22&&(s=y.stateNode,s===null||s._visibility&1||(g=!0)),s=y,y=y.return;return s.tag===3?(y=s.stateNode,g&&a!==null&&(g=31-Qt(l),s=y.hiddenUpdates,d=s[g],d===null?s[g]=[a]:d.push(a),a.lane=l|536870912),y):null}function Yh(s){if(50<Ku)throw Ku=0,Ov=null,Error(r(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var Ml={};function C6(s,a,l,d){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yr(s,a,l,d){return new C6(s,a,l,d)}function Ng(s){return s=s.prototype,!(!s||!s.isReactComponent)}function wi(s,a){var l=s.alternate;return l===null?(l=Yr(s.tag,a,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=a,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,a=s.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function Vx(s,a){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,a=l.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function Kh(s,a,l,d,g,y){var T=0;if(d=s,typeof s=="function")Ng(s)&&(T=1);else if(typeof s=="string")T=I5(s,l,he.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case j:return s=Yr(31,l,a,g),s.elementType=j,s.lanes=y,s;case A:return Io(l.children,g,y,a);case k:T=8,g|=24;break;case L:return s=Yr(12,l,a,g|2),s.elementType=L,s.lanes=y,s;case z:return s=Yr(13,l,a,g),s.elementType=z,s.lanes=y,s;case H:return s=Yr(19,l,a,g),s.elementType=H,s.lanes=y,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case I:T=10;break e;case U:T=9;break e;case M:T=11;break e;case E:T=14;break e;case S:T=16,d=null;break e}T=29,l=Error(r(130,s===null?"null":typeof s,"")),d=null}return a=Yr(T,l,a,g),a.elementType=s,a.type=d,a.lanes=y,a}function Io(s,a,l,d){return s=Yr(7,s,d,a),s.lanes=l,s}function Ag(s,a,l){return s=Yr(6,s,null,a),s.lanes=l,s}function Ux(s){var a=Yr(18,null,null,0);return a.stateNode=s,a}function Rg(s,a,l){return a=Yr(4,s.children!==null?s.children:[],s.key,a),a.lanes=l,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var zx=new WeakMap;function ls(s,a){if(typeof s=="object"&&s!==null){var l=zx.get(s);return l!==void 0?l:(a={value:s,source:a,stack:K(a)},zx.set(s,a),a)}return{value:s,source:a,stack:K(a)}}var Ol=[],Ll=0,Wh=null,ku=0,cs=[],us=0,wa=null,Xs=1,Js="";function Ei(s,a){Ol[Ll++]=ku,Ol[Ll++]=Wh,Wh=s,ku=a}function Bx(s,a,l){cs[us++]=Xs,cs[us++]=Js,cs[us++]=wa,wa=s;var d=Xs;s=Js;var g=32-Qt(d)-1;d&=~(1<<g),l+=1;var y=32-Qt(a)+g;if(30<y){var T=g-g%5;y=(d&(1<<T)-1).toString(32),d>>=T,g-=T,Xs=1<<32-Qt(a)+g|l<<g|d,Js=y+s}else Xs=1<<y|l<<g|d,Js=s}function Ig(s){s.return!==null&&(Ei(s,1),Bx(s,1,0))}function jg(s){for(;s===Wh;)Wh=Ol[--Ll],Ol[Ll]=null,ku=Ol[--Ll],Ol[Ll]=null;for(;s===wa;)wa=cs[--us],cs[us]=null,Js=cs[--us],cs[us]=null,Xs=cs[--us],cs[us]=null}function Fx(s,a){cs[us++]=Xs,cs[us++]=Js,cs[us++]=wa,Xs=a.id,Js=a.overflow,wa=s}var sr=null,cn=null,Ut=!1,Ea=null,ds=!1,Dg=Error(r(519));function Sa(s){var a=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Nu(ls(a,s)),Dg}function Hx(s){var a=s.stateNode,l=s.type,d=s.memoizedProps;switch(a[Rn]=s,a[Xn]=d,l){case"dialog":jt("cancel",a),jt("close",a);break;case"iframe":case"object":case"embed":jt("load",a);break;case"video":case"audio":for(l=0;l<Qu.length;l++)jt(Qu[l],a);break;case"source":jt("error",a);break;case"img":case"image":case"link":jt("error",a),jt("load",a);break;case"details":jt("toggle",a);break;case"input":jt("invalid",a),Nh(a,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":jt("invalid",a);break;case"textarea":jt("invalid",a),pa(a,d.value,d.defaultValue,d.children)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||d.suppressHydrationWarning===!0||aw(a.textContent,l)?(d.popover!=null&&(jt("beforetoggle",a),jt("toggle",a)),d.onScroll!=null&&jt("scroll",a),d.onScrollEnd!=null&&jt("scrollend",a),d.onClick!=null&&(a.onclick=xs),a=!0):a=!1,a||Sa(s,!0)}function $x(s){for(sr=s.return;sr;)switch(sr.tag){case 5:case 31:case 13:ds=!1;return;case 27:case 3:ds=!0;return;default:sr=sr.return}}function Vl(s){if(s!==sr)return!1;if(!Ut)return $x(s),Ut=!0,!1;var a=s.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||Xv(s.type,s.memoizedProps)),l=!l),l&&cn&&Sa(s),$x(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));cn=pw(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));cn=pw(s)}else a===27?(a=cn,Va(s.type)?(s=ny,ny=null,cn=s):cn=a):cn=sr?fs(s.stateNode.nextSibling):null;return!0}function jo(){cn=sr=null,Ut=!1}function Pg(){var s=Ea;return s!==null&&(Mr===null?Mr=s:Mr.push.apply(Mr,s),Ea=null),s}function Nu(s){Ea===null?Ea=[s]:Ea.push(s)}var Mg=$(null),Do=null,Si=null;function Ta(s,a,l){re(Mg,a._currentValue),a._currentValue=l}function Ti(s){s._currentValue=Mg.current,Q(Mg)}function Og(s,a,l){for(;s!==null;){var d=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),s===l)break;s=s.return}}function Lg(s,a,l,d){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var y=g.dependencies;if(y!==null){var T=g.child;y=y.firstContext;e:for(;y!==null;){var O=y;y=g;for(var q=0;q<a.length;q++)if(O.context===a[q]){y.lanes|=l,O=y.alternate,O!==null&&(O.lanes|=l),Og(y.return,l,s),d||(T=null);break e}y=O.next}}else if(g.tag===18){if(T=g.return,T===null)throw Error(r(341));T.lanes|=l,y=T.alternate,y!==null&&(y.lanes|=l),Og(T,l,s),T=null}else T=g.child;if(T!==null)T.return=g;else for(T=g;T!==null;){if(T===s){T=null;break}if(g=T.sibling,g!==null){g.return=T.return,T=g;break}T=T.return}g=T}}function Ul(s,a,l,d){s=null;for(var g=a,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var T=g.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var O=g.type;Gr(g.pendingProps.value,T.value)||(s!==null?s.push(O):s=[O])}}else if(g===te.current){if(T=g.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(td):s=[td])}g=g.return}s!==null&&Lg(a,s,l,d),a.flags|=262144}function Qh(s){for(s=s.firstContext;s!==null;){if(!Gr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Po(s){Do=s,Si=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function ir(s){return qx(Do,s)}function Xh(s,a){return Do===null&&Po(s),qx(s,a)}function qx(s,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Si===null){if(s===null)throw Error(r(308));Si=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else Si=Si.next=a;return l}var k6=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(l,d){s.push(d)}};this.abort=function(){a.aborted=!0,s.forEach(function(l){return l()})}},N6=t.unstable_scheduleCallback,A6=t.unstable_NormalPriority,Dn={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vg(){return{controller:new k6,data:new Map,refCount:0}}function Au(s){s.refCount--,s.refCount===0&&N6(A6,function(){s.controller.abort()})}var Ru=null,Ug=0,zl=0,Bl=null;function R6(s,a){if(Ru===null){var l=Ru=[];Ug=0,zl=Fv(),Bl={status:"pending",value:void 0,then:function(d){l.push(d)}}}return Ug++,a.then(Gx,Gx),a}function Gx(){if(--Ug===0&&Ru!==null){Bl!==null&&(Bl.status="fulfilled");var s=Ru;Ru=null,zl=0,Bl=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function I6(s,a){var l=[],d={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return s.then(function(){d.status="fulfilled",d.value=a;for(var g=0;g<l.length;g++)(0,l[g])(a)},function(g){for(d.status="rejected",d.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),d}var Yx=G.S;G.S=function(s,a){R_=X(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&R6(s,a),Yx!==null&&Yx(s,a)};var Mo=$(null);function zg(){var s=Mo.current;return s!==null?s:sn.pooledCache}function Jh(s,a){a===null?re(Mo,Mo.current):re(Mo,a.pool)}function Kx(){var s=zg();return s===null?null:{parent:Dn._currentValue,pool:s}}var Fl=Error(r(460)),Bg=Error(r(474)),Zh=Error(r(542)),ef={then:function(){}};function Wx(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Qx(s,a,l){switch(l=s[l],l===void 0?s.push(a):l!==a&&(a.then(xs,xs),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,Jx(s),s;default:if(typeof a.status=="string")a.then(xs,xs);else{if(s=sn,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=a,s.status="pending",s.then(function(d){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=d}},function(d){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=d}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,Jx(s),s}throw Lo=a,Fl}}function Oo(s){try{var a=s._init;return a(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Lo=l,Fl):l}}var Lo=null;function Xx(){if(Lo===null)throw Error(r(459));var s=Lo;return Lo=null,s}function Jx(s){if(s===Fl||s===Zh)throw Error(r(483))}var Hl=null,Iu=0;function tf(s){var a=Iu;return Iu+=1,Hl===null&&(Hl=[]),Qx(Hl,s,a)}function ju(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function nf(s,a){throw a.$$typeof===x?Error(r(525)):(s=Object.prototype.toString.call(a),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function Zx(s){function a(W,Y){if(s){var se=W.deletions;se===null?(W.deletions=[Y],W.flags|=16):se.push(Y)}}function l(W,Y){if(!s)return null;for(;Y!==null;)a(W,Y),Y=Y.sibling;return null}function d(W){for(var Y=new Map;W!==null;)W.key!==null?Y.set(W.key,W):Y.set(W.index,W),W=W.sibling;return Y}function g(W,Y){return W=wi(W,Y),W.index=0,W.sibling=null,W}function y(W,Y,se){return W.index=se,s?(se=W.alternate,se!==null?(se=se.index,se<Y?(W.flags|=67108866,Y):se):(W.flags|=67108866,Y)):(W.flags|=1048576,Y)}function T(W){return s&&W.alternate===null&&(W.flags|=67108866),W}function O(W,Y,se,be){return Y===null||Y.tag!==6?(Y=Ag(se,W.mode,be),Y.return=W,Y):(Y=g(Y,se),Y.return=W,Y)}function q(W,Y,se,be){var rt=se.type;return rt===A?ge(W,Y,se.props.children,be,se.key):Y!==null&&(Y.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===S&&Oo(rt)===Y.type)?(Y=g(Y,se.props),ju(Y,se),Y.return=W,Y):(Y=Kh(se.type,se.key,se.props,null,W.mode,be),ju(Y,se),Y.return=W,Y)}function ie(W,Y,se,be){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==se.containerInfo||Y.stateNode.implementation!==se.implementation?(Y=Rg(se,W.mode,be),Y.return=W,Y):(Y=g(Y,se.children||[]),Y.return=W,Y)}function ge(W,Y,se,be,rt){return Y===null||Y.tag!==7?(Y=Io(se,W.mode,be,rt),Y.return=W,Y):(Y=g(Y,se),Y.return=W,Y)}function _e(W,Y,se){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=Ag(""+Y,W.mode,se),Y.return=W,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case C:return se=Kh(Y.type,Y.key,Y.props,null,W.mode,se),ju(se,Y),se.return=W,se;case R:return Y=Rg(Y,W.mode,se),Y.return=W,Y;case S:return Y=Oo(Y),_e(W,Y,se)}if(oe(Y)||B(Y))return Y=Io(Y,W.mode,se,null),Y.return=W,Y;if(typeof Y.then=="function")return _e(W,tf(Y),se);if(Y.$$typeof===I)return _e(W,Xh(W,Y),se);nf(W,Y)}return null}function ae(W,Y,se,be){var rt=Y!==null?Y.key:null;if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return rt!==null?null:O(W,Y,""+se,be);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case C:return se.key===rt?q(W,Y,se,be):null;case R:return se.key===rt?ie(W,Y,se,be):null;case S:return se=Oo(se),ae(W,Y,se,be)}if(oe(se)||B(se))return rt!==null?null:ge(W,Y,se,be,null);if(typeof se.then=="function")return ae(W,Y,tf(se),be);if(se.$$typeof===I)return ae(W,Y,Xh(W,se),be);nf(W,se)}return null}function de(W,Y,se,be,rt){if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return W=W.get(se)||null,O(Y,W,""+be,rt);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case C:return W=W.get(be.key===null?se:be.key)||null,q(Y,W,be,rt);case R:return W=W.get(be.key===null?se:be.key)||null,ie(Y,W,be,rt);case S:return be=Oo(be),de(W,Y,se,be,rt)}if(oe(be)||B(be))return W=W.get(se)||null,ge(Y,W,be,rt,null);if(typeof be.then=="function")return de(W,Y,se,tf(be),rt);if(be.$$typeof===I)return de(W,Y,se,Xh(Y,be),rt);nf(Y,be)}return null}function Ye(W,Y,se,be){for(var rt=null,Bt=null,Je=Y,Tt=Y=0,Pt=null;Je!==null&&Tt<se.length;Tt++){Je.index>Tt?(Pt=Je,Je=null):Pt=Je.sibling;var Ft=ae(W,Je,se[Tt],be);if(Ft===null){Je===null&&(Je=Pt);break}s&&Je&&Ft.alternate===null&&a(W,Je),Y=y(Ft,Y,Tt),Bt===null?rt=Ft:Bt.sibling=Ft,Bt=Ft,Je=Pt}if(Tt===se.length)return l(W,Je),Ut&&Ei(W,Tt),rt;if(Je===null){for(;Tt<se.length;Tt++)Je=_e(W,se[Tt],be),Je!==null&&(Y=y(Je,Y,Tt),Bt===null?rt=Je:Bt.sibling=Je,Bt=Je);return Ut&&Ei(W,Tt),rt}for(Je=d(Je);Tt<se.length;Tt++)Pt=de(Je,W,Tt,se[Tt],be),Pt!==null&&(s&&Pt.alternate!==null&&Je.delete(Pt.key===null?Tt:Pt.key),Y=y(Pt,Y,Tt),Bt===null?rt=Pt:Bt.sibling=Pt,Bt=Pt);return s&&Je.forEach(function(Ha){return a(W,Ha)}),Ut&&Ei(W,Tt),rt}function ut(W,Y,se,be){if(se==null)throw Error(r(151));for(var rt=null,Bt=null,Je=Y,Tt=Y=0,Pt=null,Ft=se.next();Je!==null&&!Ft.done;Tt++,Ft=se.next()){Je.index>Tt?(Pt=Je,Je=null):Pt=Je.sibling;var Ha=ae(W,Je,Ft.value,be);if(Ha===null){Je===null&&(Je=Pt);break}s&&Je&&Ha.alternate===null&&a(W,Je),Y=y(Ha,Y,Tt),Bt===null?rt=Ha:Bt.sibling=Ha,Bt=Ha,Je=Pt}if(Ft.done)return l(W,Je),Ut&&Ei(W,Tt),rt;if(Je===null){for(;!Ft.done;Tt++,Ft=se.next())Ft=_e(W,Ft.value,be),Ft!==null&&(Y=y(Ft,Y,Tt),Bt===null?rt=Ft:Bt.sibling=Ft,Bt=Ft);return Ut&&Ei(W,Tt),rt}for(Je=d(Je);!Ft.done;Tt++,Ft=se.next())Ft=de(Je,W,Tt,Ft.value,be),Ft!==null&&(s&&Ft.alternate!==null&&Je.delete(Ft.key===null?Tt:Ft.key),Y=y(Ft,Y,Tt),Bt===null?rt=Ft:Bt.sibling=Ft,Bt=Ft);return s&&Je.forEach(function(F5){return a(W,F5)}),Ut&&Ei(W,Tt),rt}function rn(W,Y,se,be){if(typeof se=="object"&&se!==null&&se.type===A&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case C:e:{for(var rt=se.key;Y!==null;){if(Y.key===rt){if(rt=se.type,rt===A){if(Y.tag===7){l(W,Y.sibling),be=g(Y,se.props.children),be.return=W,W=be;break e}}else if(Y.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===S&&Oo(rt)===Y.type){l(W,Y.sibling),be=g(Y,se.props),ju(be,se),be.return=W,W=be;break e}l(W,Y);break}else a(W,Y);Y=Y.sibling}se.type===A?(be=Io(se.props.children,W.mode,be,se.key),be.return=W,W=be):(be=Kh(se.type,se.key,se.props,null,W.mode,be),ju(be,se),be.return=W,W=be)}return T(W);case R:e:{for(rt=se.key;Y!==null;){if(Y.key===rt)if(Y.tag===4&&Y.stateNode.containerInfo===se.containerInfo&&Y.stateNode.implementation===se.implementation){l(W,Y.sibling),be=g(Y,se.children||[]),be.return=W,W=be;break e}else{l(W,Y);break}else a(W,Y);Y=Y.sibling}be=Rg(se,W.mode,be),be.return=W,W=be}return T(W);case S:return se=Oo(se),rn(W,Y,se,be)}if(oe(se))return Ye(W,Y,se,be);if(B(se)){if(rt=B(se),typeof rt!="function")throw Error(r(150));return se=rt.call(se),ut(W,Y,se,be)}if(typeof se.then=="function")return rn(W,Y,tf(se),be);if(se.$$typeof===I)return rn(W,Y,Xh(W,se),be);nf(W,se)}return typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint"?(se=""+se,Y!==null&&Y.tag===6?(l(W,Y.sibling),be=g(Y,se),be.return=W,W=be):(l(W,Y),be=Ag(se,W.mode,be),be.return=W,W=be),T(W)):l(W,Y)}return function(W,Y,se,be){try{Iu=0;var rt=rn(W,Y,se,be);return Hl=null,rt}catch(Je){if(Je===Fl||Je===Zh)throw Je;var Bt=Yr(29,Je,null,W.mode);return Bt.lanes=be,Bt.return=W,Bt}finally{}}}var Vo=Zx(!0),e2=Zx(!1),Ca=!1;function Fg(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hg(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ka(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Na(s,a,l){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(Yt&2)!==0){var g=d.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),d.pending=a,a=Yh(s),Lx(s,null,l),a}return Gh(s,d,a,l),Yh(s)}function Du(s,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var d=a.lanes;d&=s.pendingLanes,l|=d,a.lanes=l,ha(s,l)}}function $g(s,a){var l=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var g=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};y===null?g=y=T:y=y.next=T,l=l.next}while(l!==null);y===null?g=y=a:y=y.next=a}else g=y=a;l={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:d.shared,callbacks:d.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=a:s.next=a,l.lastBaseUpdate=a}var qg=!1;function Pu(){if(qg){var s=Bl;if(s!==null)throw s}}function Mu(s,a,l,d){qg=!1;var g=s.updateQueue;Ca=!1;var y=g.firstBaseUpdate,T=g.lastBaseUpdate,O=g.shared.pending;if(O!==null){g.shared.pending=null;var q=O,ie=q.next;q.next=null,T===null?y=ie:T.next=ie,T=q;var ge=s.alternate;ge!==null&&(ge=ge.updateQueue,O=ge.lastBaseUpdate,O!==T&&(O===null?ge.firstBaseUpdate=ie:O.next=ie,ge.lastBaseUpdate=q))}if(y!==null){var _e=g.baseState;T=0,ge=ie=q=null,O=y;do{var ae=O.lane&-536870913,de=ae!==O.lane;if(de?(Dt&ae)===ae:(d&ae)===ae){ae!==0&&ae===zl&&(qg=!0),ge!==null&&(ge=ge.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var Ye=s,ut=O;ae=a;var rn=l;switch(ut.tag){case 1:if(Ye=ut.payload,typeof Ye=="function"){_e=Ye.call(rn,_e,ae);break e}_e=Ye;break e;case 3:Ye.flags=Ye.flags&-65537|128;case 0:if(Ye=ut.payload,ae=typeof Ye=="function"?Ye.call(rn,_e,ae):Ye,ae==null)break e;_e=b({},_e,ae);break e;case 2:Ca=!0}}ae=O.callback,ae!==null&&(s.flags|=64,de&&(s.flags|=8192),de=g.callbacks,de===null?g.callbacks=[ae]:de.push(ae))}else de={lane:ae,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ge===null?(ie=ge=de,q=_e):ge=ge.next=de,T|=ae;if(O=O.next,O===null){if(O=g.shared.pending,O===null)break;de=O,O=de.next,de.next=null,g.lastBaseUpdate=de,g.shared.pending=null}}while(!0);ge===null&&(q=_e),g.baseState=q,g.firstBaseUpdate=ie,g.lastBaseUpdate=ge,y===null&&(g.shared.lanes=0),Da|=T,s.lanes=T,s.memoizedState=_e}}function t2(s,a){if(typeof s!="function")throw Error(r(191,s));s.call(a)}function n2(s,a){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)t2(l[s],a)}var $l=$(null),rf=$(0);function r2(s,a){s=Pi,re(rf,s),re($l,a),Pi=s|a.baseLanes}function Gg(){re(rf,Pi),re($l,$l.current)}function Yg(){Pi=rf.current,Q($l),Q(rf)}var Kr=$(null),hs=null;function Aa(s){var a=s.alternate;re(Cn,Cn.current&1),re(Kr,s),hs===null&&(a===null||$l.current!==null||a.memoizedState!==null)&&(hs=s)}function Kg(s){re(Cn,Cn.current),re(Kr,s),hs===null&&(hs=s)}function s2(s){s.tag===22?(re(Cn,Cn.current),re(Kr,s),hs===null&&(hs=s)):Ra()}function Ra(){re(Cn,Cn.current),re(Kr,Kr.current)}function Wr(s){Q(Kr),hs===s&&(hs=null),Q(Cn)}var Cn=$(0);function sf(s){for(var a=s;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||ey(l)||ty(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ci=0,Et=null,tn=null,Pn=null,af=!1,ql=!1,Uo=!1,of=0,Ou=0,Gl=null,j6=0;function _n(){throw Error(r(321))}function Wg(s,a){if(a===null)return!1;for(var l=0;l<a.length&&l<s.length;l++)if(!Gr(s[l],a[l]))return!1;return!0}function Qg(s,a,l,d,g,y){return Ci=y,Et=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,G.H=s===null||s.memoizedState===null?B2:dv,Uo=!1,y=l(d,g),Uo=!1,ql&&(y=a2(a,l,d,g)),i2(s),y}function i2(s){G.H=Uu;var a=tn!==null&&tn.next!==null;if(Ci=0,Pn=tn=Et=null,af=!1,Ou=0,Gl=null,a)throw Error(r(300));s===null||Mn||(s=s.dependencies,s!==null&&Qh(s)&&(Mn=!0))}function a2(s,a,l,d){Et=s;var g=0;do{if(ql&&(Gl=null),Ou=0,ql=!1,25<=g)throw Error(r(301));if(g+=1,Pn=tn=null,s.updateQueue!=null){var y=s.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}G.H=F2,y=a(l,d)}while(ql);return y}function D6(){var s=G.H,a=s.useState()[0];return a=typeof a.then=="function"?Lu(a):a,s=s.useState()[0],(tn!==null?tn.memoizedState:null)!==s&&(Et.flags|=1024),a}function Xg(){var s=of!==0;return of=0,s}function Jg(s,a,l){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~l}function Zg(s){if(af){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}af=!1}Ci=0,Pn=tn=Et=null,ql=!1,Ou=of=0,Gl=null}function Sr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?Et.memoizedState=Pn=s:Pn=Pn.next=s,Pn}function kn(){if(tn===null){var s=Et.alternate;s=s!==null?s.memoizedState:null}else s=tn.next;var a=Pn===null?Et.memoizedState:Pn.next;if(a!==null)Pn=a,tn=s;else{if(s===null)throw Et.alternate===null?Error(r(467)):Error(r(310));tn=s,s={memoizedState:tn.memoizedState,baseState:tn.baseState,baseQueue:tn.baseQueue,queue:tn.queue,next:null},Pn===null?Et.memoizedState=Pn=s:Pn=Pn.next=s}return Pn}function lf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Lu(s){var a=Ou;return Ou+=1,Gl===null&&(Gl=[]),s=Qx(Gl,s,a),a=Et,(Pn===null?a.memoizedState:Pn.next)===null&&(a=a.alternate,G.H=a===null||a.memoizedState===null?B2:dv),s}function cf(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Lu(s);if(s.$$typeof===I)return ir(s)}throw Error(r(438,String(s)))}function ev(s){var a=null,l=Et.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var d=Et.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(a={data:d.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=lf(),Et.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(s),d=0;d<s;d++)l[d]=D;return a.index++,l}function ki(s,a){return typeof a=="function"?a(s):a}function uf(s){var a=kn();return tv(a,tn,s)}function tv(s,a,l){var d=s.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=l;var g=s.baseQueue,y=d.pending;if(y!==null){if(g!==null){var T=g.next;g.next=y.next,y.next=T}a.baseQueue=g=y,d.pending=null}if(y=s.baseState,g===null)s.memoizedState=y;else{a=g.next;var O=T=null,q=null,ie=a,ge=!1;do{var _e=ie.lane&-536870913;if(_e!==ie.lane?(Dt&_e)===_e:(Ci&_e)===_e){var ae=ie.revertLane;if(ae===0)q!==null&&(q=q.next={lane:0,revertLane:0,gesture:null,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),_e===zl&&(ge=!0);else if((Ci&ae)===ae){ie=ie.next,ae===zl&&(ge=!0);continue}else _e={lane:0,revertLane:ie.revertLane,gesture:null,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},q===null?(O=q=_e,T=y):q=q.next=_e,Et.lanes|=ae,Da|=ae;_e=ie.action,Uo&&l(y,_e),y=ie.hasEagerState?ie.eagerState:l(y,_e)}else ae={lane:_e,revertLane:ie.revertLane,gesture:ie.gesture,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},q===null?(O=q=ae,T=y):q=q.next=ae,Et.lanes|=_e,Da|=_e;ie=ie.next}while(ie!==null&&ie!==a);if(q===null?T=y:q.next=O,!Gr(y,s.memoizedState)&&(Mn=!0,ge&&(l=Bl,l!==null)))throw l;s.memoizedState=y,s.baseState=T,s.baseQueue=q,d.lastRenderedState=y}return g===null&&(d.lanes=0),[s.memoizedState,d.dispatch]}function nv(s){var a=kn(),l=a.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=s;var d=l.dispatch,g=l.pending,y=a.memoizedState;if(g!==null){l.pending=null;var T=g=g.next;do y=s(y,T.action),T=T.next;while(T!==g);Gr(y,a.memoizedState)||(Mn=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),l.lastRenderedState=y}return[y,d]}function o2(s,a,l){var d=Et,g=kn(),y=Ut;if(y){if(l===void 0)throw Error(r(407));l=l()}else l=a();var T=!Gr((tn||g).memoizedState,l);if(T&&(g.memoizedState=l,Mn=!0),g=g.queue,iv(u2.bind(null,d,g,s),[s]),g.getSnapshot!==a||T||Pn!==null&&Pn.memoizedState.tag&1){if(d.flags|=2048,Yl(9,{destroy:void 0},c2.bind(null,d,g,l,a),null),sn===null)throw Error(r(349));y||(Ci&127)!==0||l2(d,a,l)}return l}function l2(s,a,l){s.flags|=16384,s={getSnapshot:a,value:l},a=Et.updateQueue,a===null?(a=lf(),Et.updateQueue=a,a.stores=[s]):(l=a.stores,l===null?a.stores=[s]:l.push(s))}function c2(s,a,l,d){a.value=l,a.getSnapshot=d,d2(a)&&h2(s)}function u2(s,a,l){return l(function(){d2(a)&&h2(s)})}function d2(s){var a=s.getSnapshot;s=s.value;try{var l=a();return!Gr(s,l)}catch{return!0}}function h2(s){var a=Ro(s,2);a!==null&&Or(a,s,2)}function rv(s){var a=Sr();if(typeof s=="function"){var l=s;if(s=l(),Uo){Rt(!0);try{l()}finally{Rt(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:s},a}function f2(s,a,l,d){return s.baseState=l,tv(s,tn,typeof d=="function"?d:ki)}function P6(s,a,l,d,g){if(ff(s))throw Error(r(485));if(s=a.action,s!==null){var y={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};G.T!==null?l(!0):y.isTransition=!1,d(y),l=a.pending,l===null?(y.next=a.pending=y,m2(a,y)):(y.next=l.next,a.pending=l.next=y)}}function m2(s,a){var l=a.action,d=a.payload,g=s.state;if(a.isTransition){var y=G.T,T={};G.T=T;try{var O=l(g,d),q=G.S;q!==null&&q(T,O),p2(s,a,O)}catch(ie){sv(s,a,ie)}finally{y!==null&&T.types!==null&&(y.types=T.types),G.T=y}}else try{y=l(g,d),p2(s,a,y)}catch(ie){sv(s,a,ie)}}function p2(s,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){g2(s,a,d)},function(d){return sv(s,a,d)}):g2(s,a,l)}function g2(s,a,l){a.status="fulfilled",a.value=l,v2(a),s.state=l,a=s.pending,a!==null&&(l=a.next,l===a?s.pending=null:(l=l.next,a.next=l,m2(s,l)))}function sv(s,a,l){var d=s.pending;if(s.pending=null,d!==null){d=d.next;do a.status="rejected",a.reason=l,v2(a),a=a.next;while(a!==d)}s.action=null}function v2(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function y2(s,a){return a}function b2(s,a){if(Ut){var l=sn.formState;if(l!==null){e:{var d=Et;if(Ut){if(cn){t:{for(var g=cn,y=ds;g.nodeType!==8;){if(!y){g=null;break t}if(g=fs(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){cn=fs(g.nextSibling),d=g.data==="F!";break e}}Sa(d)}d=!1}d&&(a=l[0])}}return l=Sr(),l.memoizedState=l.baseState=a,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:y2,lastRenderedState:a},l.queue=d,l=V2.bind(null,Et,d),d.dispatch=l,d=rv(!1),y=uv.bind(null,Et,!1,d.queue),d=Sr(),g={state:a,dispatch:null,action:s,pending:null},d.queue=g,l=P6.bind(null,Et,g,y,l),g.dispatch=l,d.memoizedState=s,[a,l,!1]}function x2(s){var a=kn();return _2(a,tn,s)}function _2(s,a,l){if(a=tv(s,a,y2)[0],s=uf(ki)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var d=Lu(a)}catch(T){throw T===Fl?Zh:T}else d=a;a=kn();var g=a.queue,y=g.dispatch;return l!==a.memoizedState&&(Et.flags|=2048,Yl(9,{destroy:void 0},M6.bind(null,g,l),null)),[d,y,s]}function M6(s,a){s.action=a}function w2(s){var a=kn(),l=tn;if(l!==null)return _2(a,l,s);kn(),a=a.memoizedState,l=kn();var d=l.queue.dispatch;return l.memoizedState=s,[a,d,!1]}function Yl(s,a,l,d){return s={tag:s,create:l,deps:d,inst:a,next:null},a=Et.updateQueue,a===null&&(a=lf(),Et.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=s.next=s:(d=l.next,l.next=s,s.next=d,a.lastEffect=s),s}function E2(){return kn().memoizedState}function df(s,a,l,d){var g=Sr();Et.flags|=s,g.memoizedState=Yl(1|a,{destroy:void 0},l,d===void 0?null:d)}function hf(s,a,l,d){var g=kn();d=d===void 0?null:d;var y=g.memoizedState.inst;tn!==null&&d!==null&&Wg(d,tn.memoizedState.deps)?g.memoizedState=Yl(a,y,l,d):(Et.flags|=s,g.memoizedState=Yl(1|a,y,l,d))}function S2(s,a){df(8390656,8,s,a)}function iv(s,a){hf(2048,8,s,a)}function O6(s){Et.flags|=4;var a=Et.updateQueue;if(a===null)a=lf(),Et.updateQueue=a,a.events=[s];else{var l=a.events;l===null?a.events=[s]:l.push(s)}}function T2(s){var a=kn().memoizedState;return O6({ref:a,nextImpl:s}),function(){if((Yt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}function C2(s,a){return hf(4,2,s,a)}function k2(s,a){return hf(4,4,s,a)}function N2(s,a){if(typeof a=="function"){s=s();var l=a(s);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function A2(s,a,l){l=l!=null?l.concat([s]):null,hf(4,4,N2.bind(null,a,s),l)}function av(){}function R2(s,a){var l=kn();a=a===void 0?null:a;var d=l.memoizedState;return a!==null&&Wg(a,d[1])?d[0]:(l.memoizedState=[s,a],s)}function I2(s,a){var l=kn();a=a===void 0?null:a;var d=l.memoizedState;if(a!==null&&Wg(a,d[1]))return d[0];if(d=s(),Uo){Rt(!0);try{s()}finally{Rt(!1)}}return l.memoizedState=[d,a],d}function ov(s,a,l){return l===void 0||(Ci&1073741824)!==0&&(Dt&261930)===0?s.memoizedState=a:(s.memoizedState=l,s=j_(),Et.lanes|=s,Da|=s,l)}function j2(s,a,l,d){return Gr(l,a)?l:$l.current!==null?(s=ov(s,l,d),Gr(s,a)||(Mn=!0),s):(Ci&42)===0||(Ci&1073741824)!==0&&(Dt&261930)===0?(Mn=!0,s.memoizedState=l):(s=j_(),Et.lanes|=s,Da|=s,a)}function D2(s,a,l,d,g){var y=Z.p;Z.p=y!==0&&8>y?y:8;var T=G.T,O={};G.T=O,uv(s,!1,a,l);try{var q=g(),ie=G.S;if(ie!==null&&ie(O,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var ge=I6(q,d);Vu(s,a,ge,Jr(s))}else Vu(s,a,d,Jr(s))}catch(_e){Vu(s,a,{then:function(){},status:"rejected",reason:_e},Jr())}finally{Z.p=y,T!==null&&O.types!==null&&(T.types=O.types),G.T=T}}function L6(){}function lv(s,a,l,d){if(s.tag!==5)throw Error(r(476));var g=P2(s).queue;D2(s,g,a,J,l===null?L6:function(){return M2(s),l(d)})}function P2(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:J},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:l},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function M2(s){var a=P2(s);a.next===null&&(a=s.alternate.memoizedState),Vu(s,a.next.queue,{},Jr())}function cv(){return ir(td)}function O2(){return kn().memoizedState}function L2(){return kn().memoizedState}function V6(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var l=Jr();s=ka(l);var d=Na(a,s,l);d!==null&&(Or(d,a,l),Du(d,a,l)),a={cache:Vg()},s.payload=a;return}a=a.return}}function U6(s,a,l){var d=Jr();l={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ff(s)?U2(a,l):(l=kg(s,a,l,d),l!==null&&(Or(l,s,d),z2(l,a,d)))}function V2(s,a,l){var d=Jr();Vu(s,a,l,d)}function Vu(s,a,l,d){var g={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(ff(s))U2(a,g);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var T=a.lastRenderedState,O=y(T,l);if(g.hasEagerState=!0,g.eagerState=O,Gr(O,T))return Gh(s,a,g,0),sn===null&&qh(),!1}catch{}finally{}if(l=kg(s,a,g,d),l!==null)return Or(l,s,d),z2(l,a,d),!0}return!1}function uv(s,a,l,d){if(d={lane:2,revertLane:Fv(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},ff(s)){if(a)throw Error(r(479))}else a=kg(s,l,d,2),a!==null&&Or(a,s,2)}function ff(s){var a=s.alternate;return s===Et||a!==null&&a===Et}function U2(s,a){ql=af=!0;var l=s.pending;l===null?a.next=a:(a.next=l.next,l.next=a),s.pending=a}function z2(s,a,l){if((l&4194048)!==0){var d=a.lanes;d&=s.pendingLanes,l|=d,a.lanes=l,ha(s,l)}}var Uu={readContext:ir,use:cf,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useLayoutEffect:_n,useInsertionEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useSyncExternalStore:_n,useId:_n,useHostTransitionStatus:_n,useFormState:_n,useActionState:_n,useOptimistic:_n,useMemoCache:_n,useCacheRefresh:_n};Uu.useEffectEvent=_n;var B2={readContext:ir,use:cf,useCallback:function(s,a){return Sr().memoizedState=[s,a===void 0?null:a],s},useContext:ir,useEffect:S2,useImperativeHandle:function(s,a,l){l=l!=null?l.concat([s]):null,df(4194308,4,N2.bind(null,a,s),l)},useLayoutEffect:function(s,a){return df(4194308,4,s,a)},useInsertionEffect:function(s,a){df(4,2,s,a)},useMemo:function(s,a){var l=Sr();a=a===void 0?null:a;var d=s();if(Uo){Rt(!0);try{s()}finally{Rt(!1)}}return l.memoizedState=[d,a],d},useReducer:function(s,a,l){var d=Sr();if(l!==void 0){var g=l(a);if(Uo){Rt(!0);try{l(a)}finally{Rt(!1)}}}else g=a;return d.memoizedState=d.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},d.queue=s,s=s.dispatch=U6.bind(null,Et,s),[d.memoizedState,s]},useRef:function(s){var a=Sr();return s={current:s},a.memoizedState=s},useState:function(s){s=rv(s);var a=s.queue,l=V2.bind(null,Et,a);return a.dispatch=l,[s.memoizedState,l]},useDebugValue:av,useDeferredValue:function(s,a){var l=Sr();return ov(l,s,a)},useTransition:function(){var s=rv(!1);return s=D2.bind(null,Et,s.queue,!0,!1),Sr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,l){var d=Et,g=Sr();if(Ut){if(l===void 0)throw Error(r(407));l=l()}else{if(l=a(),sn===null)throw Error(r(349));(Dt&127)!==0||l2(d,a,l)}g.memoizedState=l;var y={value:l,getSnapshot:a};return g.queue=y,S2(u2.bind(null,d,y,s),[s]),d.flags|=2048,Yl(9,{destroy:void 0},c2.bind(null,d,y,l,a),null),l},useId:function(){var s=Sr(),a=sn.identifierPrefix;if(Ut){var l=Js,d=Xs;l=(d&~(1<<32-Qt(d)-1)).toString(32)+l,a="_"+a+"R_"+l,l=of++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=j6++,a="_"+a+"r_"+l.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:cv,useFormState:b2,useActionState:b2,useOptimistic:function(s){var a=Sr();a.memoizedState=a.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=uv.bind(null,Et,!0,l),l.dispatch=a,[s,a]},useMemoCache:ev,useCacheRefresh:function(){return Sr().memoizedState=V6.bind(null,Et)},useEffectEvent:function(s){var a=Sr(),l={impl:s};return a.memoizedState=l,function(){if((Yt&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}},dv={readContext:ir,use:cf,useCallback:R2,useContext:ir,useEffect:iv,useImperativeHandle:A2,useInsertionEffect:C2,useLayoutEffect:k2,useMemo:I2,useReducer:uf,useRef:E2,useState:function(){return uf(ki)},useDebugValue:av,useDeferredValue:function(s,a){var l=kn();return j2(l,tn.memoizedState,s,a)},useTransition:function(){var s=uf(ki)[0],a=kn().memoizedState;return[typeof s=="boolean"?s:Lu(s),a]},useSyncExternalStore:o2,useId:O2,useHostTransitionStatus:cv,useFormState:x2,useActionState:x2,useOptimistic:function(s,a){var l=kn();return f2(l,tn,s,a)},useMemoCache:ev,useCacheRefresh:L2};dv.useEffectEvent=T2;var F2={readContext:ir,use:cf,useCallback:R2,useContext:ir,useEffect:iv,useImperativeHandle:A2,useInsertionEffect:C2,useLayoutEffect:k2,useMemo:I2,useReducer:nv,useRef:E2,useState:function(){return nv(ki)},useDebugValue:av,useDeferredValue:function(s,a){var l=kn();return tn===null?ov(l,s,a):j2(l,tn.memoizedState,s,a)},useTransition:function(){var s=nv(ki)[0],a=kn().memoizedState;return[typeof s=="boolean"?s:Lu(s),a]},useSyncExternalStore:o2,useId:O2,useHostTransitionStatus:cv,useFormState:w2,useActionState:w2,useOptimistic:function(s,a){var l=kn();return tn!==null?f2(l,tn,s,a):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:ev,useCacheRefresh:L2};F2.useEffectEvent=T2;function hv(s,a,l,d){a=s.memoizedState,l=l(d,a),l=l==null?a:b({},a,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var fv={enqueueSetState:function(s,a,l){s=s._reactInternals;var d=Jr(),g=ka(d);g.payload=a,l!=null&&(g.callback=l),a=Na(s,g,d),a!==null&&(Or(a,s,d),Du(a,s,d))},enqueueReplaceState:function(s,a,l){s=s._reactInternals;var d=Jr(),g=ka(d);g.tag=1,g.payload=a,l!=null&&(g.callback=l),a=Na(s,g,d),a!==null&&(Or(a,s,d),Du(a,s,d))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var l=Jr(),d=ka(l);d.tag=2,a!=null&&(d.callback=a),a=Na(s,d,l),a!==null&&(Or(a,s,l),Du(a,s,l))}};function H2(s,a,l,d,g,y,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,y,T):a.prototype&&a.prototype.isPureReactComponent?!Tu(l,d)||!Tu(g,y):!0}function $2(s,a,l,d){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,d),a.state!==s&&fv.enqueueReplaceState(a,a.state,null)}function zo(s,a){var l=a;if("ref"in a){l={};for(var d in a)d!=="ref"&&(l[d]=a[d])}if(s=s.defaultProps){l===a&&(l=b({},l));for(var g in s)l[g]===void 0&&(l[g]=s[g])}return l}function q2(s){$h(s)}function G2(s){console.error(s)}function Y2(s){$h(s)}function mf(s,a){try{var l=s.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(d){setTimeout(function(){throw d})}}function K2(s,a,l){try{var d=s.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function mv(s,a,l){return l=ka(l),l.tag=3,l.payload={element:null},l.callback=function(){mf(s,a)},l}function W2(s){return s=ka(s),s.tag=3,s}function Q2(s,a,l,d){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var y=d.value;s.payload=function(){return g(y)},s.callback=function(){K2(a,l,d)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(s.callback=function(){K2(a,l,d),typeof g!="function"&&(Pa===null?Pa=new Set([this]):Pa.add(this));var O=d.stack;this.componentDidCatch(d.value,{componentStack:O!==null?O:""})})}function z6(s,a,l,d,g){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(a=l.alternate,a!==null&&Ul(a,l,g,!0),l=Kr.current,l!==null){switch(l.tag){case 31:case 13:return hs===null?Cf():l.alternate===null&&wn===0&&(wn=3),l.flags&=-257,l.flags|=65536,l.lanes=g,d===ef?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([d]):a.add(d),Uv(s,d,g)),!1;case 22:return l.flags|=65536,d===ef?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([d]):l.add(d)),Uv(s,d,g)),!1}throw Error(r(435,l.tag))}return Uv(s,d,g),Cf(),!1}if(Ut)return a=Kr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,d!==Dg&&(s=Error(r(422),{cause:d}),Nu(ls(s,l)))):(d!==Dg&&(a=Error(r(423),{cause:d}),Nu(ls(a,l))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,d=ls(d,l),g=mv(s.stateNode,d,g),$g(s,g),wn!==4&&(wn=2)),!1;var y=Error(r(520),{cause:d});if(y=ls(y,l),Yu===null?Yu=[y]:Yu.push(y),wn!==4&&(wn=2),a===null)return!0;d=ls(d,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,s=g&-g,l.lanes|=s,s=mv(l.stateNode,d,s),$g(l,s),!1;case 1:if(a=l.type,y=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Pa===null||!Pa.has(y))))return l.flags|=65536,g&=-g,l.lanes|=g,g=W2(g),Q2(g,s,l,d),$g(l,g),!1}l=l.return}while(l!==null);return!1}var pv=Error(r(461)),Mn=!1;function ar(s,a,l,d){a.child=s===null?e2(a,null,l,d):Vo(a,s.child,l,d)}function X2(s,a,l,d,g){l=l.render;var y=a.ref;if("ref"in d){var T={};for(var O in d)O!=="ref"&&(T[O]=d[O])}else T=d;return Po(a),d=Qg(s,a,l,T,y,g),O=Xg(),s!==null&&!Mn?(Jg(s,a,g),Ni(s,a,g)):(Ut&&O&&Ig(a),a.flags|=1,ar(s,a,d,g),a.child)}function J2(s,a,l,d,g){if(s===null){var y=l.type;return typeof y=="function"&&!Ng(y)&&y.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=y,Z2(s,a,y,d,g)):(s=Kh(l.type,null,d,a,a.mode,g),s.ref=a.ref,s.return=a,a.child=s)}if(y=s.child,!Ev(s,g)){var T=y.memoizedProps;if(l=l.compare,l=l!==null?l:Tu,l(T,d)&&s.ref===a.ref)return Ni(s,a,g)}return a.flags|=1,s=wi(y,d),s.ref=a.ref,s.return=a,a.child=s}function Z2(s,a,l,d,g){if(s!==null){var y=s.memoizedProps;if(Tu(y,d)&&s.ref===a.ref)if(Mn=!1,a.pendingProps=d=y,Ev(s,g))(s.flags&131072)!==0&&(Mn=!0);else return a.lanes=s.lanes,Ni(s,a,g)}return gv(s,a,l,d,g)}function e_(s,a,l,d){var g=d.children,y=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((a.flags&128)!==0){if(y=y!==null?y.baseLanes|l:l,s!==null){for(d=a.child=s.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;d=g&~y}else d=0,a.child=null;return t_(s,a,y,l,d)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&Jh(a,y!==null?y.cachePool:null),y!==null?r2(a,y):Gg(),s2(a);else return d=a.lanes=536870912,t_(s,a,y!==null?y.baseLanes|l:l,l,d)}else y!==null?(Jh(a,y.cachePool),r2(a,y),Ra(),a.memoizedState=null):(s!==null&&Jh(a,null),Gg(),Ra());return ar(s,a,g,l),a.child}function zu(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function t_(s,a,l,d,g){var y=zg();return y=y===null?null:{parent:Dn._currentValue,pool:y},a.memoizedState={baseLanes:l,cachePool:y},s!==null&&Jh(a,null),Gg(),s2(a),s!==null&&Ul(s,a,d,!0),a.childLanes=g,null}function pf(s,a){return a=vf({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function n_(s,a,l){return Vo(a,s.child,null,l),s=pf(a,a.pendingProps),s.flags|=2,Wr(a),a.memoizedState=null,s}function B6(s,a,l){var d=a.pendingProps,g=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(Ut){if(d.mode==="hidden")return s=pf(a,d),a.lanes=536870912,zu(null,s);if(Kg(a),(s=cn)?(s=mw(s,ds),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:wa!==null?{id:Xs,overflow:Js}:null,retryLane:536870912,hydrationErrors:null},l=Ux(s),l.return=a,a.child=l,sr=a,cn=null)):s=null,s===null)throw Sa(a);return a.lanes=536870912,null}return pf(a,d)}var y=s.memoizedState;if(y!==null){var T=y.dehydrated;if(Kg(a),g)if(a.flags&256)a.flags&=-257,a=n_(s,a,l);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(r(558));else if(Mn||Ul(s,a,l,!1),g=(l&s.childLanes)!==0,Mn||g){if(d=sn,d!==null&&(T=ou(d,l),T!==0&&T!==y.retryLane))throw y.retryLane=T,Ro(s,T),Or(d,s,T),pv;Cf(),a=n_(s,a,l)}else s=y.treeContext,cn=fs(T.nextSibling),sr=a,Ut=!0,Ea=null,ds=!1,s!==null&&Fx(a,s),a=pf(a,d),a.flags|=4096;return a}return s=wi(s.child,{mode:d.mode,children:d.children}),s.ref=a.ref,a.child=s,s.return=a,s}function gf(s,a){var l=a.ref;if(l===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(s===null||s.ref!==l)&&(a.flags|=4194816)}}function gv(s,a,l,d,g){return Po(a),l=Qg(s,a,l,d,void 0,g),d=Xg(),s!==null&&!Mn?(Jg(s,a,g),Ni(s,a,g)):(Ut&&d&&Ig(a),a.flags|=1,ar(s,a,l,g),a.child)}function r_(s,a,l,d,g,y){return Po(a),a.updateQueue=null,l=a2(a,d,l,g),i2(s),d=Xg(),s!==null&&!Mn?(Jg(s,a,y),Ni(s,a,y)):(Ut&&d&&Ig(a),a.flags|=1,ar(s,a,l,y),a.child)}function s_(s,a,l,d,g){if(Po(a),a.stateNode===null){var y=Ml,T=l.contextType;typeof T=="object"&&T!==null&&(y=ir(T)),y=new l(d,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=fv,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=d,y.state=a.memoizedState,y.refs={},Fg(a),T=l.contextType,y.context=typeof T=="object"&&T!==null?ir(T):Ml,y.state=a.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(hv(a,l,T,d),y.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&fv.enqueueReplaceState(y,y.state,null),Mu(a,d,y,g),Pu(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),d=!0}else if(s===null){y=a.stateNode;var O=a.memoizedProps,q=zo(l,O);y.props=q;var ie=y.context,ge=l.contextType;T=Ml,typeof ge=="object"&&ge!==null&&(T=ir(ge));var _e=l.getDerivedStateFromProps;ge=typeof _e=="function"||typeof y.getSnapshotBeforeUpdate=="function",O=a.pendingProps!==O,ge||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(O||ie!==T)&&$2(a,y,d,T),Ca=!1;var ae=a.memoizedState;y.state=ae,Mu(a,d,y,g),Pu(),ie=a.memoizedState,O||ae!==ie||Ca?(typeof _e=="function"&&(hv(a,l,_e,d),ie=a.memoizedState),(q=Ca||H2(a,l,q,d,ae,ie,T))?(ge||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=ie),y.props=d,y.state=ie,y.context=T,d=q):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{y=a.stateNode,Hg(s,a),T=a.memoizedProps,ge=zo(l,T),y.props=ge,_e=a.pendingProps,ae=y.context,ie=l.contextType,q=Ml,typeof ie=="object"&&ie!==null&&(q=ir(ie)),O=l.getDerivedStateFromProps,(ie=typeof O=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==_e||ae!==q)&&$2(a,y,d,q),Ca=!1,ae=a.memoizedState,y.state=ae,Mu(a,d,y,g),Pu();var de=a.memoizedState;T!==_e||ae!==de||Ca||s!==null&&s.dependencies!==null&&Qh(s.dependencies)?(typeof O=="function"&&(hv(a,l,O,d),de=a.memoizedState),(ge=Ca||H2(a,l,ge,d,ae,de,q)||s!==null&&s.dependencies!==null&&Qh(s.dependencies))?(ie||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(d,de,q),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(d,de,q)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===s.memoizedProps&&ae===s.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&ae===s.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=de),y.props=d,y.state=de,y.context=q,d=ge):(typeof y.componentDidUpdate!="function"||T===s.memoizedProps&&ae===s.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&ae===s.memoizedState||(a.flags|=1024),d=!1)}return y=d,gf(s,a),d=(a.flags&128)!==0,y||d?(y=a.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,s!==null&&d?(a.child=Vo(a,s.child,null,g),a.child=Vo(a,null,l,g)):ar(s,a,l,g),a.memoizedState=y.state,s=a.child):s=Ni(s,a,g),s}function i_(s,a,l,d){return jo(),a.flags|=256,ar(s,a,l,d),a.child}var vv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yv(s){return{baseLanes:s,cachePool:Kx()}}function bv(s,a,l){return s=s!==null?s.childLanes&~l:0,a&&(s|=Xr),s}function a_(s,a,l){var d=a.pendingProps,g=!1,y=(a.flags&128)!==0,T;if((T=y)||(T=s!==null&&s.memoizedState===null?!1:(Cn.current&2)!==0),T&&(g=!0,a.flags&=-129),T=(a.flags&32)!==0,a.flags&=-33,s===null){if(Ut){if(g?Aa(a):Ra(),(s=cn)?(s=mw(s,ds),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:wa!==null?{id:Xs,overflow:Js}:null,retryLane:536870912,hydrationErrors:null},l=Ux(s),l.return=a,a.child=l,sr=a,cn=null)):s=null,s===null)throw Sa(a);return ty(s)?a.lanes=32:a.lanes=536870912,null}var O=d.children;return d=d.fallback,g?(Ra(),g=a.mode,O=vf({mode:"hidden",children:O},g),d=Io(d,g,l,null),O.return=a,d.return=a,O.sibling=d,a.child=O,d=a.child,d.memoizedState=yv(l),d.childLanes=bv(s,T,l),a.memoizedState=vv,zu(null,d)):(Aa(a),xv(a,O))}var q=s.memoizedState;if(q!==null&&(O=q.dehydrated,O!==null)){if(y)a.flags&256?(Aa(a),a.flags&=-257,a=_v(s,a,l)):a.memoizedState!==null?(Ra(),a.child=s.child,a.flags|=128,a=null):(Ra(),O=d.fallback,g=a.mode,d=vf({mode:"visible",children:d.children},g),O=Io(O,g,l,null),O.flags|=2,d.return=a,O.return=a,d.sibling=O,a.child=d,Vo(a,s.child,null,l),d=a.child,d.memoizedState=yv(l),d.childLanes=bv(s,T,l),a.memoizedState=vv,a=zu(null,d));else if(Aa(a),ty(O)){if(T=O.nextSibling&&O.nextSibling.dataset,T)var ie=T.dgst;T=ie,d=Error(r(419)),d.stack="",d.digest=T,Nu({value:d,source:null,stack:null}),a=_v(s,a,l)}else if(Mn||Ul(s,a,l,!1),T=(l&s.childLanes)!==0,Mn||T){if(T=sn,T!==null&&(d=ou(T,l),d!==0&&d!==q.retryLane))throw q.retryLane=d,Ro(s,d),Or(T,s,d),pv;ey(O)||Cf(),a=_v(s,a,l)}else ey(O)?(a.flags|=192,a.child=s.child,a=null):(s=q.treeContext,cn=fs(O.nextSibling),sr=a,Ut=!0,Ea=null,ds=!1,s!==null&&Fx(a,s),a=xv(a,d.children),a.flags|=4096);return a}return g?(Ra(),O=d.fallback,g=a.mode,q=s.child,ie=q.sibling,d=wi(q,{mode:"hidden",children:d.children}),d.subtreeFlags=q.subtreeFlags&65011712,ie!==null?O=wi(ie,O):(O=Io(O,g,l,null),O.flags|=2),O.return=a,d.return=a,d.sibling=O,a.child=d,zu(null,d),d=a.child,O=s.child.memoizedState,O===null?O=yv(l):(g=O.cachePool,g!==null?(q=Dn._currentValue,g=g.parent!==q?{parent:q,pool:q}:g):g=Kx(),O={baseLanes:O.baseLanes|l,cachePool:g}),d.memoizedState=O,d.childLanes=bv(s,T,l),a.memoizedState=vv,zu(s.child,d)):(Aa(a),l=s.child,s=l.sibling,l=wi(l,{mode:"visible",children:d.children}),l.return=a,l.sibling=null,s!==null&&(T=a.deletions,T===null?(a.deletions=[s],a.flags|=16):T.push(s)),a.child=l,a.memoizedState=null,l)}function xv(s,a){return a=vf({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function vf(s,a){return s=Yr(22,s,null,a),s.lanes=0,s}function _v(s,a,l){return Vo(a,s.child,null,l),s=xv(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function o_(s,a,l){s.lanes|=a;var d=s.alternate;d!==null&&(d.lanes|=a),Og(s.return,a,l)}function wv(s,a,l,d,g,y){var T=s.memoizedState;T===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:g,treeForkCount:y}:(T.isBackwards=a,T.rendering=null,T.renderingStartTime=0,T.last=d,T.tail=l,T.tailMode=g,T.treeForkCount=y)}function l_(s,a,l){var d=a.pendingProps,g=d.revealOrder,y=d.tail;d=d.children;var T=Cn.current,O=(T&2)!==0;if(O?(T=T&1|2,a.flags|=128):T&=1,re(Cn,T),ar(s,a,d,l),d=Ut?ku:0,!O&&s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&o_(s,l,a);else if(s.tag===19)o_(s,l,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(g){case"forwards":for(l=a.child,g=null;l!==null;)s=l.alternate,s!==null&&sf(s)===null&&(g=l),l=l.sibling;l=g,l===null?(g=a.child,a.child=null):(g=l.sibling,l.sibling=null),wv(a,!1,g,l,y,d);break;case"backwards":case"unstable_legacy-backwards":for(l=null,g=a.child,a.child=null;g!==null;){if(s=g.alternate,s!==null&&sf(s)===null){a.child=g;break}s=g.sibling,g.sibling=l,l=g,g=s}wv(a,!0,l,null,y,d);break;case"together":wv(a,!1,null,null,void 0,d);break;default:a.memoizedState=null}return a.child}function Ni(s,a,l){if(s!==null&&(a.dependencies=s.dependencies),Da|=a.lanes,(l&a.childLanes)===0)if(s!==null){if(Ul(s,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(r(153));if(a.child!==null){for(s=a.child,l=wi(s,s.pendingProps),a.child=l,l.return=a;s.sibling!==null;)s=s.sibling,l=l.sibling=wi(s,s.pendingProps),l.return=a;l.sibling=null}return a.child}function Ev(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&Qh(s)))}function F6(s,a,l){switch(a.tag){case 3:Oe(a,a.stateNode.containerInfo),Ta(a,Dn,s.memoizedState.cache),jo();break;case 27:case 5:Xe(a);break;case 4:Oe(a,a.stateNode.containerInfo);break;case 10:Ta(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Kg(a),null;break;case 13:var d=a.memoizedState;if(d!==null)return d.dehydrated!==null?(Aa(a),a.flags|=128,null):(l&a.child.childLanes)!==0?a_(s,a,l):(Aa(a),s=Ni(s,a,l),s!==null?s.sibling:null);Aa(a);break;case 19:var g=(s.flags&128)!==0;if(d=(l&a.childLanes)!==0,d||(Ul(s,a,l,!1),d=(l&a.childLanes)!==0),g){if(d)return l_(s,a,l);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),re(Cn,Cn.current),d)break;return null;case 22:return a.lanes=0,e_(s,a,l,a.pendingProps);case 24:Ta(a,Dn,s.memoizedState.cache)}return Ni(s,a,l)}function c_(s,a,l){if(s!==null)if(s.memoizedProps!==a.pendingProps)Mn=!0;else{if(!Ev(s,l)&&(a.flags&128)===0)return Mn=!1,F6(s,a,l);Mn=(s.flags&131072)!==0}else Mn=!1,Ut&&(a.flags&1048576)!==0&&Bx(a,ku,a.index);switch(a.lanes=0,a.tag){case 16:e:{var d=a.pendingProps;if(s=Oo(a.elementType),a.type=s,typeof s=="function")Ng(s)?(d=zo(s,d),a.tag=1,a=s_(null,a,s,d,l)):(a.tag=0,a=gv(null,a,s,d,l));else{if(s!=null){var g=s.$$typeof;if(g===M){a.tag=11,a=X2(null,a,s,d,l);break e}else if(g===E){a.tag=14,a=J2(null,a,s,d,l);break e}}throw a=ne(s)||s,Error(r(306,a,""))}}return a;case 0:return gv(s,a,a.type,a.pendingProps,l);case 1:return d=a.type,g=zo(d,a.pendingProps),s_(s,a,d,g,l);case 3:e:{if(Oe(a,a.stateNode.containerInfo),s===null)throw Error(r(387));d=a.pendingProps;var y=a.memoizedState;g=y.element,Hg(s,a),Mu(a,d,null,l);var T=a.memoizedState;if(d=T.cache,Ta(a,Dn,d),d!==y.cache&&Lg(a,[Dn],l,!0),Pu(),d=T.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:T.cache},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){a=i_(s,a,d,l);break e}else if(d!==g){g=ls(Error(r(424)),a),Nu(g),a=i_(s,a,d,l);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(cn=fs(s.firstChild),sr=a,Ut=!0,Ea=null,ds=!0,l=e2(a,null,d,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(jo(),d===g){a=Ni(s,a,l);break e}ar(s,a,d,l)}a=a.child}return a;case 26:return gf(s,a),s===null?(l=xw(a.type,null,a.pendingProps,null))?a.memoizedState=l:Ut||(l=a.type,s=a.pendingProps,d=Df(Ue.current).createElement(l),d[Rn]=a,d[Xn]=s,or(d,l,s),In(d),a.stateNode=d):a.memoizedState=xw(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return Xe(a),s===null&&Ut&&(d=a.stateNode=vw(a.type,a.pendingProps,Ue.current),sr=a,ds=!0,g=cn,Va(a.type)?(ny=g,cn=fs(d.firstChild)):cn=g),ar(s,a,a.pendingProps.children,l),gf(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&Ut&&((g=d=cn)&&(d=y5(d,a.type,a.pendingProps,ds),d!==null?(a.stateNode=d,sr=a,cn=fs(d.firstChild),ds=!1,g=!0):g=!1),g||Sa(a)),Xe(a),g=a.type,y=a.pendingProps,T=s!==null?s.memoizedProps:null,d=y.children,Xv(g,y)?d=null:T!==null&&Xv(g,T)&&(a.flags|=32),a.memoizedState!==null&&(g=Qg(s,a,D6,null,null,l),td._currentValue=g),gf(s,a),ar(s,a,d,l),a.child;case 6:return s===null&&Ut&&((s=l=cn)&&(l=b5(l,a.pendingProps,ds),l!==null?(a.stateNode=l,sr=a,cn=null,s=!0):s=!1),s||Sa(a)),null;case 13:return a_(s,a,l);case 4:return Oe(a,a.stateNode.containerInfo),d=a.pendingProps,s===null?a.child=Vo(a,null,d,l):ar(s,a,d,l),a.child;case 11:return X2(s,a,a.type,a.pendingProps,l);case 7:return ar(s,a,a.pendingProps,l),a.child;case 8:return ar(s,a,a.pendingProps.children,l),a.child;case 12:return ar(s,a,a.pendingProps.children,l),a.child;case 10:return d=a.pendingProps,Ta(a,a.type,d.value),ar(s,a,d.children,l),a.child;case 9:return g=a.type._context,d=a.pendingProps.children,Po(a),g=ir(g),d=d(g),a.flags|=1,ar(s,a,d,l),a.child;case 14:return J2(s,a,a.type,a.pendingProps,l);case 15:return Z2(s,a,a.type,a.pendingProps,l);case 19:return l_(s,a,l);case 31:return B6(s,a,l);case 22:return e_(s,a,l,a.pendingProps);case 24:return Po(a),d=ir(Dn),s===null?(g=zg(),g===null&&(g=sn,y=Vg(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=l),g=y),a.memoizedState={parent:d,cache:g},Fg(a),Ta(a,Dn,g)):((s.lanes&l)!==0&&(Hg(s,a),Mu(a,null,null,l),Pu()),g=s.memoizedState,y=a.memoizedState,g.parent!==d?(g={parent:d,cache:d},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),Ta(a,Dn,d)):(d=y.cache,Ta(a,Dn,d),d!==g.cache&&Lg(a,[Dn],l,!0))),ar(s,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function Ai(s){s.flags|=4}function Sv(s,a,l,d,g){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(g&335544128)===g)if(s.stateNode.complete)s.flags|=8192;else if(O_())s.flags|=8192;else throw Lo=ef,Bg}else s.flags&=-16777217}function u_(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Tw(a))if(O_())s.flags|=8192;else throw Lo=ef,Bg}function yf(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?qn():536870912,s.lanes|=a,Xl|=a)}function Bu(s,a){if(!Ut)switch(s.tailMode){case"hidden":a=s.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function un(s){var a=s.alternate!==null&&s.alternate.child===s.child,l=0,d=0;if(a)for(var g=s.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=d,s.childLanes=l,a}function H6(s,a,l){var d=a.pendingProps;switch(jg(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(a),null;case 1:return un(a),null;case 3:return l=a.stateNode,d=null,s!==null&&(d=s.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),Ti(Dn),Ie(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(Vl(a)?Ai(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Pg())),un(a),null;case 26:var g=a.type,y=a.memoizedState;return s===null?(Ai(a),y!==null?(un(a),u_(a,y)):(un(a),Sv(a,g,null,d,l))):y?y!==s.memoizedState?(Ai(a),un(a),u_(a,y)):(un(a),a.flags&=-16777217):(s=s.memoizedProps,s!==d&&Ai(a),un(a),Sv(a,g,s,d,l)),null;case 27:if(ke(a),l=Ue.current,g=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==d&&Ai(a);else{if(!d){if(a.stateNode===null)throw Error(r(166));return un(a),null}s=he.current,Vl(a)?Hx(a):(s=vw(g,d,l),a.stateNode=s,Ai(a))}return un(a),null;case 5:if(ke(a),g=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==d&&Ai(a);else{if(!d){if(a.stateNode===null)throw Error(r(166));return un(a),null}if(y=he.current,Vl(a))Hx(a);else{var T=Df(Ue.current);switch(y){case 1:y=T.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:y=T.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":y=T.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":y=T.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":y=T.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof d.is=="string"?T.createElement("select",{is:d.is}):T.createElement("select"),d.multiple?y.multiple=!0:d.size&&(y.size=d.size);break;default:y=typeof d.is=="string"?T.createElement(g,{is:d.is}):T.createElement(g)}}y[Rn]=a,y[Xn]=d;e:for(T=a.child;T!==null;){if(T.tag===5||T.tag===6)y.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===a)break e;for(;T.sibling===null;){if(T.return===null||T.return===a)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}a.stateNode=y;e:switch(or(y,g,d),g){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Ai(a)}}return un(a),Sv(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,l),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==d&&Ai(a);else{if(typeof d!="string"&&a.stateNode===null)throw Error(r(166));if(s=Ue.current,Vl(a)){if(s=a.stateNode,l=a.memoizedProps,d=null,g=sr,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}s[Rn]=a,s=!!(s.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||aw(s.nodeValue,l)),s||Sa(a,!0)}else s=Df(s).createTextNode(d),s[Rn]=a,a.stateNode=s}return un(a),null;case 31:if(l=a.memoizedState,s===null||s.memoizedState!==null){if(d=Vl(a),l!==null){if(s===null){if(!d)throw Error(r(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[Rn]=a}else jo(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;un(a),s=!1}else l=Pg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return a.flags&256?(Wr(a),a):(Wr(a),null);if((a.flags&128)!==0)throw Error(r(558))}return un(a),null;case 13:if(d=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=Vl(a),d!==null&&d.dehydrated!==null){if(s===null){if(!g)throw Error(r(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[Rn]=a}else jo(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;un(a),g=!1}else g=Pg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(Wr(a),a):(Wr(a),null)}return Wr(a),(a.flags&128)!==0?(a.lanes=l,a):(l=d!==null,s=s!==null&&s.memoizedState!==null,l&&(d=a.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool),y=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),y!==g&&(d.flags|=2048)),l!==s&&l&&(a.child.flags|=8192),yf(a,a.updateQueue),un(a),null);case 4:return Ie(),s===null&&Gv(a.stateNode.containerInfo),un(a),null;case 10:return Ti(a.type),un(a),null;case 19:if(Q(Cn),d=a.memoizedState,d===null)return un(a),null;if(g=(a.flags&128)!==0,y=d.rendering,y===null)if(g)Bu(d,!1);else{if(wn!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(y=sf(s),y!==null){for(a.flags|=128,Bu(d,!1),s=y.updateQueue,a.updateQueue=s,yf(a,s),a.subtreeFlags=0,s=l,l=a.child;l!==null;)Vx(l,s),l=l.sibling;return re(Cn,Cn.current&1|2),Ut&&Ei(a,d.treeForkCount),a.child}s=s.sibling}d.tail!==null&&X()>Ef&&(a.flags|=128,g=!0,Bu(d,!1),a.lanes=4194304)}else{if(!g)if(s=sf(y),s!==null){if(a.flags|=128,g=!0,s=s.updateQueue,a.updateQueue=s,yf(a,s),Bu(d,!0),d.tail===null&&d.tailMode==="hidden"&&!y.alternate&&!Ut)return un(a),null}else 2*X()-d.renderingStartTime>Ef&&l!==536870912&&(a.flags|=128,g=!0,Bu(d,!1),a.lanes=4194304);d.isBackwards?(y.sibling=a.child,a.child=y):(s=d.last,s!==null?s.sibling=y:a.child=y,d.last=y)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=X(),s.sibling=null,l=Cn.current,re(Cn,g?l&1|2:l&1),Ut&&Ei(a,d.treeForkCount),s):(un(a),null);case 22:case 23:return Wr(a),Yg(),d=a.memoizedState!==null,s!==null?s.memoizedState!==null!==d&&(a.flags|=8192):d&&(a.flags|=8192),d?(l&536870912)!==0&&(a.flags&128)===0&&(un(a),a.subtreeFlags&6&&(a.flags|=8192)):un(a),l=a.updateQueue,l!==null&&yf(a,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==l&&(a.flags|=2048),s!==null&&Q(Mo),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Ti(Dn),un(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function $6(s,a){switch(jg(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Ti(Dn),Ie(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return ke(a),null;case 31:if(a.memoizedState!==null){if(Wr(a),a.alternate===null)throw Error(r(340));jo()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(Wr(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(r(340));jo()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return Q(Cn),null;case 4:return Ie(),null;case 10:return Ti(a.type),null;case 22:case 23:return Wr(a),Yg(),s!==null&&Q(Mo),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return Ti(Dn),null;case 25:return null;default:return null}}function d_(s,a){switch(jg(a),a.tag){case 3:Ti(Dn),Ie();break;case 26:case 27:case 5:ke(a);break;case 4:Ie();break;case 31:a.memoizedState!==null&&Wr(a);break;case 13:Wr(a);break;case 19:Q(Cn);break;case 10:Ti(a.type);break;case 22:case 23:Wr(a),Yg(),s!==null&&Q(Mo);break;case 24:Ti(Dn)}}function Fu(s,a){try{var l=a.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var g=d.next;l=g;do{if((l.tag&s)===s){d=void 0;var y=l.create,T=l.inst;d=y(),T.destroy=d}l=l.next}while(l!==g)}}catch(O){Zt(a,a.return,O)}}function Ia(s,a,l){try{var d=a.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var y=g.next;d=y;do{if((d.tag&s)===s){var T=d.inst,O=T.destroy;if(O!==void 0){T.destroy=void 0,g=a;var q=l,ie=O;try{ie()}catch(ge){Zt(g,q,ge)}}}d=d.next}while(d!==y)}}catch(ge){Zt(a,a.return,ge)}}function h_(s){var a=s.updateQueue;if(a!==null){var l=s.stateNode;try{n2(a,l)}catch(d){Zt(s,s.return,d)}}}function f_(s,a,l){l.props=zo(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(d){Zt(s,a,d)}}function Hu(s,a){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var d=s.stateNode;break;case 30:d=s.stateNode;break;default:d=s.stateNode}typeof l=="function"?s.refCleanup=l(d):l.current=d}}catch(g){Zt(s,a,g)}}function Zs(s,a){var l=s.ref,d=s.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(g){Zt(s,a,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){Zt(s,a,g)}else l.current=null}function m_(s){var a=s.type,l=s.memoizedProps,d=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(g){Zt(s,s.return,g)}}function Tv(s,a,l){try{var d=s.stateNode;h5(d,s.type,l,a),d[Xn]=a}catch(g){Zt(s,s.return,g)}}function p_(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Va(s.type)||s.tag===4}function Cv(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||p_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Va(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function kv(s,a,l){var d=s.tag;if(d===5||d===6)s=s.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(s),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=xs));else if(d!==4&&(d===27&&Va(s.type)&&(l=s.stateNode,a=null),s=s.child,s!==null))for(kv(s,a,l),s=s.sibling;s!==null;)kv(s,a,l),s=s.sibling}function bf(s,a,l){var d=s.tag;if(d===5||d===6)s=s.stateNode,a?l.insertBefore(s,a):l.appendChild(s);else if(d!==4&&(d===27&&Va(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(bf(s,a,l),s=s.sibling;s!==null;)bf(s,a,l),s=s.sibling}function g_(s){var a=s.stateNode,l=s.memoizedProps;try{for(var d=s.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);or(a,d,l),a[Rn]=s,a[Xn]=l}catch(y){Zt(s,s.return,y)}}var Ri=!1,On=!1,Nv=!1,v_=typeof WeakSet=="function"?WeakSet:Set,Zn=null;function q6(s,a){if(s=s.containerInfo,Wv=zf,s=Ax(s),_g(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var g=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var T=0,O=-1,q=-1,ie=0,ge=0,_e=s,ae=null;t:for(;;){for(var de;_e!==l||g!==0&&_e.nodeType!==3||(O=T+g),_e!==y||d!==0&&_e.nodeType!==3||(q=T+d),_e.nodeType===3&&(T+=_e.nodeValue.length),(de=_e.firstChild)!==null;)ae=_e,_e=de;for(;;){if(_e===s)break t;if(ae===l&&++ie===g&&(O=T),ae===y&&++ge===d&&(q=T),(de=_e.nextSibling)!==null)break;_e=ae,ae=_e.parentNode}_e=de}l=O===-1||q===-1?null:{start:O,end:q}}else l=null}l=l||{start:0,end:0}}else l=null;for(Qv={focusedElem:s,selectionRange:l},zf=!1,Zn=a;Zn!==null;)if(a=Zn,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Zn=s;else for(;Zn!==null;){switch(a=Zn,y=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)g=s[l],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&y!==null){s=void 0,l=a,g=y.memoizedProps,y=y.memoizedState,d=l.stateNode;try{var Ye=zo(l.type,g);s=d.getSnapshotBeforeUpdate(Ye,y),d.__reactInternalSnapshotBeforeUpdate=s}catch(ut){Zt(l,l.return,ut)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,l=s.nodeType,l===9)Zv(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Zv(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=a.sibling,s!==null){s.return=a.return,Zn=s;break}Zn=a.return}}function y_(s,a,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:ji(s,l),d&4&&Fu(5,l);break;case 1:if(ji(s,l),d&4)if(s=l.stateNode,a===null)try{s.componentDidMount()}catch(T){Zt(l,l.return,T)}else{var g=zo(l.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(g,a,s.__reactInternalSnapshotBeforeUpdate)}catch(T){Zt(l,l.return,T)}}d&64&&h_(l),d&512&&Hu(l,l.return);break;case 3:if(ji(s,l),d&64&&(s=l.updateQueue,s!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{n2(s,a)}catch(T){Zt(l,l.return,T)}}break;case 27:a===null&&d&4&&g_(l);case 26:case 5:ji(s,l),a===null&&d&4&&m_(l),d&512&&Hu(l,l.return);break;case 12:ji(s,l);break;case 31:ji(s,l),d&4&&__(s,l);break;case 13:ji(s,l),d&4&&w_(s,l),d&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=e5.bind(null,l),x5(s,l))));break;case 22:if(d=l.memoizedState!==null||Ri,!d){a=a!==null&&a.memoizedState!==null||On,g=Ri;var y=On;Ri=d,(On=a)&&!y?Di(s,l,(l.subtreeFlags&8772)!==0):ji(s,l),Ri=g,On=y}break;case 30:break;default:ji(s,l)}}function b_(s){var a=s.alternate;a!==null&&(s.alternate=null,b_(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&_l(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var gn=null,jr=!1;function Ii(s,a,l){for(l=l.child;l!==null;)x_(s,a,l),l=l.sibling}function x_(s,a,l){if(nt&&typeof nt.onCommitFiberUnmount=="function")try{nt.onCommitFiberUnmount(kt,l)}catch{}switch(l.tag){case 26:On||Zs(l,a),Ii(s,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:On||Zs(l,a);var d=gn,g=jr;Va(l.type)&&(gn=l.stateNode,jr=!1),Ii(s,a,l),Ju(l.stateNode),gn=d,jr=g;break;case 5:On||Zs(l,a);case 6:if(d=gn,g=jr,gn=null,Ii(s,a,l),gn=d,jr=g,gn!==null)if(jr)try{(gn.nodeType===9?gn.body:gn.nodeName==="HTML"?gn.ownerDocument.body:gn).removeChild(l.stateNode)}catch(y){Zt(l,a,y)}else try{gn.removeChild(l.stateNode)}catch(y){Zt(l,a,y)}break;case 18:gn!==null&&(jr?(s=gn,hw(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),ic(s)):hw(gn,l.stateNode));break;case 4:d=gn,g=jr,gn=l.stateNode.containerInfo,jr=!0,Ii(s,a,l),gn=d,jr=g;break;case 0:case 11:case 14:case 15:Ia(2,l,a),On||Ia(4,l,a),Ii(s,a,l);break;case 1:On||(Zs(l,a),d=l.stateNode,typeof d.componentWillUnmount=="function"&&f_(l,a,d)),Ii(s,a,l);break;case 21:Ii(s,a,l);break;case 22:On=(d=On)||l.memoizedState!==null,Ii(s,a,l),On=d;break;default:Ii(s,a,l)}}function __(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{ic(s)}catch(l){Zt(a,a.return,l)}}}function w_(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ic(s)}catch(l){Zt(a,a.return,l)}}function G6(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new v_),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new v_),a;default:throw Error(r(435,s.tag))}}function xf(s,a){var l=G6(s);a.forEach(function(d){if(!l.has(d)){l.add(d);var g=t5.bind(null,s,d);d.then(g,g)}})}function Dr(s,a){var l=a.deletions;if(l!==null)for(var d=0;d<l.length;d++){var g=l[d],y=s,T=a,O=T;e:for(;O!==null;){switch(O.tag){case 27:if(Va(O.type)){gn=O.stateNode,jr=!1;break e}break;case 5:gn=O.stateNode,jr=!1;break e;case 3:case 4:gn=O.stateNode.containerInfo,jr=!0;break e}O=O.return}if(gn===null)throw Error(r(160));x_(y,T,g),gn=null,jr=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)E_(a,s),a=a.sibling}var Cs=null;function E_(s,a){var l=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Dr(a,s),Pr(s),d&4&&(Ia(3,s,s.return),Fu(3,s),Ia(5,s,s.return));break;case 1:Dr(a,s),Pr(s),d&512&&(On||l===null||Zs(l,l.return)),d&64&&Ri&&(s=s.updateQueue,s!==null&&(d=s.callbacks,d!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var g=Cs;if(Dr(a,s),Pr(s),d&512&&(On||l===null||Zs(l,l.return)),d&4){var y=l!==null?l.memoizedState:null;if(d=s.memoizedState,l===null)if(d===null)if(s.stateNode===null){e:{d=s.type,l=s.memoizedProps,g=g.ownerDocument||g;t:switch(d){case"title":y=g.getElementsByTagName("title")[0],(!y||y[Us]||y[Rn]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(d),g.head.insertBefore(y,g.querySelector("head > title"))),or(y,d,l),y[Rn]=s,In(y),d=y;break e;case"link":var T=Ew("link","href",g).get(d+(l.href||""));if(T){for(var O=0;O<T.length;O++)if(y=T[O],y.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&y.getAttribute("rel")===(l.rel==null?null:l.rel)&&y.getAttribute("title")===(l.title==null?null:l.title)&&y.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(O,1);break t}}y=g.createElement(d),or(y,d,l),g.head.appendChild(y);break;case"meta":if(T=Ew("meta","content",g).get(d+(l.content||""))){for(O=0;O<T.length;O++)if(y=T[O],y.getAttribute("content")===(l.content==null?null:""+l.content)&&y.getAttribute("name")===(l.name==null?null:l.name)&&y.getAttribute("property")===(l.property==null?null:l.property)&&y.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&y.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(O,1);break t}}y=g.createElement(d),or(y,d,l),g.head.appendChild(y);break;default:throw Error(r(468,d))}y[Rn]=s,In(y),d=y}s.stateNode=d}else Sw(g,s.type,s.stateNode);else s.stateNode=ww(g,d,s.memoizedProps);else y!==d?(y===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):y.count--,d===null?Sw(g,s.type,s.stateNode):ww(g,d,s.memoizedProps)):d===null&&s.stateNode!==null&&Tv(s,s.memoizedProps,l.memoizedProps)}break;case 27:Dr(a,s),Pr(s),d&512&&(On||l===null||Zs(l,l.return)),l!==null&&d&4&&Tv(s,s.memoizedProps,l.memoizedProps);break;case 5:if(Dr(a,s),Pr(s),d&512&&(On||l===null||Zs(l,l.return)),s.flags&32){g=s.stateNode;try{Ir(g,"")}catch(Ye){Zt(s,s.return,Ye)}}d&4&&s.stateNode!=null&&(g=s.memoizedProps,Tv(s,g,l!==null?l.memoizedProps:g)),d&1024&&(Nv=!0);break;case 6:if(Dr(a,s),Pr(s),d&4){if(s.stateNode===null)throw Error(r(162));d=s.memoizedProps,l=s.stateNode;try{l.nodeValue=d}catch(Ye){Zt(s,s.return,Ye)}}break;case 3:if(Of=null,g=Cs,Cs=Pf(a.containerInfo),Dr(a,s),Cs=g,Pr(s),d&4&&l!==null&&l.memoizedState.isDehydrated)try{ic(a.containerInfo)}catch(Ye){Zt(s,s.return,Ye)}Nv&&(Nv=!1,S_(s));break;case 4:d=Cs,Cs=Pf(s.stateNode.containerInfo),Dr(a,s),Pr(s),Cs=d;break;case 12:Dr(a,s),Pr(s);break;case 31:Dr(a,s),Pr(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,xf(s,d)));break;case 13:Dr(a,s),Pr(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(wf=X()),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,xf(s,d)));break;case 22:g=s.memoizedState!==null;var q=l!==null&&l.memoizedState!==null,ie=Ri,ge=On;if(Ri=ie||g,On=ge||q,Dr(a,s),On=ge,Ri=ie,Pr(s),d&8192)e:for(a=s.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(l===null||q||Ri||On||Bo(s)),l=null,a=s;;){if(a.tag===5||a.tag===26){if(l===null){q=l=a;try{if(y=q.stateNode,g)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{O=q.stateNode;var _e=q.memoizedProps.style,ae=_e!=null&&_e.hasOwnProperty("display")?_e.display:null;O.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(Ye){Zt(q,q.return,Ye)}}}else if(a.tag===6){if(l===null){q=a;try{q.stateNode.nodeValue=g?"":q.memoizedProps}catch(Ye){Zt(q,q.return,Ye)}}}else if(a.tag===18){if(l===null){q=a;try{var de=q.stateNode;g?fw(de,!0):fw(q.stateNode,!1)}catch(Ye){Zt(q,q.return,Ye)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}d&4&&(d=s.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,xf(s,l))));break;case 19:Dr(a,s),Pr(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,xf(s,d)));break;case 30:break;case 21:break;default:Dr(a,s),Pr(s)}}function Pr(s){var a=s.flags;if(a&2){try{for(var l,d=s.return;d!==null;){if(p_(d)){l=d;break}d=d.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var g=l.stateNode,y=Cv(s);bf(s,y,g);break;case 5:var T=l.stateNode;l.flags&32&&(Ir(T,""),l.flags&=-33);var O=Cv(s);bf(s,O,T);break;case 3:case 4:var q=l.stateNode.containerInfo,ie=Cv(s);kv(s,ie,q);break;default:throw Error(r(161))}}catch(ge){Zt(s,s.return,ge)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function S_(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;S_(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function ji(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)y_(s,a.alternate,a),a=a.sibling}function Bo(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:Ia(4,a,a.return),Bo(a);break;case 1:Zs(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&f_(a,a.return,l),Bo(a);break;case 27:Ju(a.stateNode);case 26:case 5:Zs(a,a.return),Bo(a);break;case 22:a.memoizedState===null&&Bo(a);break;case 30:Bo(a);break;default:Bo(a)}s=s.sibling}}function Di(s,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var d=a.alternate,g=s,y=a,T=y.flags;switch(y.tag){case 0:case 11:case 15:Di(g,y,l),Fu(4,y);break;case 1:if(Di(g,y,l),d=y,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(ie){Zt(d,d.return,ie)}if(d=y,g=d.updateQueue,g!==null){var O=d.stateNode;try{var q=g.shared.hiddenCallbacks;if(q!==null)for(g.shared.hiddenCallbacks=null,g=0;g<q.length;g++)t2(q[g],O)}catch(ie){Zt(d,d.return,ie)}}l&&T&64&&h_(y),Hu(y,y.return);break;case 27:g_(y);case 26:case 5:Di(g,y,l),l&&d===null&&T&4&&m_(y),Hu(y,y.return);break;case 12:Di(g,y,l);break;case 31:Di(g,y,l),l&&T&4&&__(g,y);break;case 13:Di(g,y,l),l&&T&4&&w_(g,y);break;case 22:y.memoizedState===null&&Di(g,y,l),Hu(y,y.return);break;case 30:break;default:Di(g,y,l)}a=a.sibling}}function Av(s,a){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&Au(l))}function Rv(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Au(s))}function ks(s,a,l,d){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)T_(s,a,l,d),a=a.sibling}function T_(s,a,l,d){var g=a.flags;switch(a.tag){case 0:case 11:case 15:ks(s,a,l,d),g&2048&&Fu(9,a);break;case 1:ks(s,a,l,d);break;case 3:ks(s,a,l,d),g&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Au(s)));break;case 12:if(g&2048){ks(s,a,l,d),s=a.stateNode;try{var y=a.memoizedProps,T=y.id,O=y.onPostCommit;typeof O=="function"&&O(T,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(q){Zt(a,a.return,q)}}else ks(s,a,l,d);break;case 31:ks(s,a,l,d);break;case 13:ks(s,a,l,d);break;case 23:break;case 22:y=a.stateNode,T=a.alternate,a.memoizedState!==null?y._visibility&2?ks(s,a,l,d):$u(s,a):y._visibility&2?ks(s,a,l,d):(y._visibility|=2,Kl(s,a,l,d,(a.subtreeFlags&10256)!==0||!1)),g&2048&&Av(T,a);break;case 24:ks(s,a,l,d),g&2048&&Rv(a.alternate,a);break;default:ks(s,a,l,d)}}function Kl(s,a,l,d,g){for(g=g&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var y=s,T=a,O=l,q=d,ie=T.flags;switch(T.tag){case 0:case 11:case 15:Kl(y,T,O,q,g),Fu(8,T);break;case 23:break;case 22:var ge=T.stateNode;T.memoizedState!==null?ge._visibility&2?Kl(y,T,O,q,g):$u(y,T):(ge._visibility|=2,Kl(y,T,O,q,g)),g&&ie&2048&&Av(T.alternate,T);break;case 24:Kl(y,T,O,q,g),g&&ie&2048&&Rv(T.alternate,T);break;default:Kl(y,T,O,q,g)}a=a.sibling}}function $u(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=s,d=a,g=d.flags;switch(d.tag){case 22:$u(l,d),g&2048&&Av(d.alternate,d);break;case 24:$u(l,d),g&2048&&Rv(d.alternate,d);break;default:$u(l,d)}a=a.sibling}}var qu=8192;function Wl(s,a,l){if(s.subtreeFlags&qu)for(s=s.child;s!==null;)C_(s,a,l),s=s.sibling}function C_(s,a,l){switch(s.tag){case 26:Wl(s,a,l),s.flags&qu&&s.memoizedState!==null&&j5(l,Cs,s.memoizedState,s.memoizedProps);break;case 5:Wl(s,a,l);break;case 3:case 4:var d=Cs;Cs=Pf(s.stateNode.containerInfo),Wl(s,a,l),Cs=d;break;case 22:s.memoizedState===null&&(d=s.alternate,d!==null&&d.memoizedState!==null?(d=qu,qu=16777216,Wl(s,a,l),qu=d):Wl(s,a,l));break;default:Wl(s,a,l)}}function k_(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function Gu(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var d=a[l];Zn=d,A_(d,s)}k_(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)N_(s),s=s.sibling}function N_(s){switch(s.tag){case 0:case 11:case 15:Gu(s),s.flags&2048&&Ia(9,s,s.return);break;case 3:Gu(s);break;case 12:Gu(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,_f(s)):Gu(s);break;default:Gu(s)}}function _f(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var d=a[l];Zn=d,A_(d,s)}k_(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:Ia(8,a,a.return),_f(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,_f(a));break;default:_f(a)}s=s.sibling}}function A_(s,a){for(;Zn!==null;){var l=Zn;switch(l.tag){case 0:case 11:case 15:Ia(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Au(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,Zn=d;else e:for(l=s;Zn!==null;){d=Zn;var g=d.sibling,y=d.return;if(b_(d),d===l){Zn=null;break e}if(g!==null){g.return=y,Zn=g;break e}Zn=y}}}var Y6={getCacheForType:function(s){var a=ir(Dn),l=a.data.get(s);return l===void 0&&(l=s(),a.data.set(s,l)),l},cacheSignal:function(){return ir(Dn).controller.signal}},K6=typeof WeakMap=="function"?WeakMap:Map,Yt=0,sn=null,It=null,Dt=0,Jt=0,Qr=null,ja=!1,Ql=!1,Iv=!1,Pi=0,wn=0,Da=0,Fo=0,jv=0,Xr=0,Xl=0,Yu=null,Mr=null,Dv=!1,wf=0,R_=0,Ef=1/0,Sf=null,Pa=null,Gn=0,Ma=null,Jl=null,Mi=0,Pv=0,Mv=null,I_=null,Ku=0,Ov=null;function Jr(){return(Yt&2)!==0&&Dt!==0?Dt&-Dt:G.T!==null?Fv():Sh()}function j_(){if(Xr===0)if((Dt&536870912)===0||Ut){var s=bt;bt<<=1,(bt&3932160)===0&&(bt=262144),Xr=s}else Xr=536870912;return s=Kr.current,s!==null&&(s.flags|=32),Xr}function Or(s,a,l){(s===sn&&(Jt===2||Jt===9)||s.cancelPendingCommit!==null)&&(Zl(s,0),Oa(s,Dt,Xr,!1)),xt(s,l),((Yt&2)===0||s!==sn)&&(s===sn&&((Yt&2)===0&&(Fo|=l),wn===4&&Oa(s,Dt,Xr,!1)),ei(s))}function D_(s,a,l){if((Yt&6)!==0)throw Error(r(327));var d=!l&&(a&127)===0&&(a&s.expiredLanes)===0||St(s,a),g=d?X6(s,a):Vv(s,a,!0),y=d;do{if(g===0){Ql&&!d&&Oa(s,a,0,!1);break}else{if(l=s.current.alternate,y&&!W6(l)){g=Vv(s,a,!1),y=!1;continue}if(g===2){if(y=a,s.errorRecoveryDisabledLanes&y)var T=0;else T=s.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){a=T;e:{var O=s;g=Yu;var q=O.current.memoizedState.isDehydrated;if(q&&(Zl(O,T).flags|=256),T=Vv(O,T,!1),T!==2){if(Iv&&!q){O.errorRecoveryDisabledLanes|=y,Fo|=y,g=4;break e}y=Mr,Mr=g,y!==null&&(Mr===null?Mr=y:Mr.push.apply(Mr,y))}g=T}if(y=!1,g!==2)continue}}if(g===1){Zl(s,0),Oa(s,a,0,!0);break}e:{switch(d=s,y=g,y){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:Oa(d,a,Xr,!ja);break e;case 2:Mr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(g=wf+300-X(),10<g)){if(Oa(d,a,Xr,!ja),$t(d,0,!0)!==0)break e;Mi=a,d.timeoutHandle=uw(P_.bind(null,d,l,Mr,Sf,Dv,a,Xr,Fo,Xl,ja,y,"Throttled",-0,0),g);break e}P_(d,l,Mr,Sf,Dv,a,Xr,Fo,Xl,ja,y,null,-0,0)}}break}while(!0);ei(s)}function P_(s,a,l,d,g,y,T,O,q,ie,ge,_e,ae,de){if(s.timeoutHandle=-1,_e=a.subtreeFlags,_e&8192||(_e&16785408)===16785408){_e={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:xs},C_(a,y,_e);var Ye=(y&62914560)===y?wf-X():(y&4194048)===y?R_-X():0;if(Ye=D5(_e,Ye),Ye!==null){Mi=y,s.cancelPendingCommit=Ye(F_.bind(null,s,a,y,l,d,g,T,O,q,ge,_e,null,ae,de)),Oa(s,y,T,!ie);return}}F_(s,a,y,l,d,g,T,O,q)}function W6(s){for(var a=s;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var g=l[d],y=g.getSnapshot;g=g.value;try{if(!Gr(y(),g))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Oa(s,a,l,d){a&=~jv,a&=~Fo,s.suspendedLanes|=a,s.pingedLanes&=~a,d&&(s.warmLanes|=a),d=s.expirationTimes;for(var g=a;0<g;){var y=31-Qt(g),T=1<<y;d[y]=-1,g&=~T}l!==0&&nr(s,l,a)}function Tf(){return(Yt&6)===0?(Wu(0),!1):!0}function Lv(){if(It!==null){if(Jt===0)var s=It.return;else s=It,Si=Do=null,Zg(s),Hl=null,Iu=0,s=It;for(;s!==null;)d_(s.alternate,s),s=s.return;It=null}}function Zl(s,a){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,p5(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),Mi=0,Lv(),sn=s,It=l=wi(s.current,null),Dt=a,Jt=0,Qr=null,ja=!1,Ql=St(s,a),Iv=!1,Xl=Xr=jv=Fo=Da=wn=0,Mr=Yu=null,Dv=!1,(a&8)!==0&&(a|=a&32);var d=s.entangledLanes;if(d!==0)for(s=s.entanglements,d&=a;0<d;){var g=31-Qt(d),y=1<<g;a|=s[g],d&=~y}return Pi=a,qh(),l}function M_(s,a){Et=null,G.H=Uu,a===Fl||a===Zh?(a=Xx(),Jt=3):a===Bg?(a=Xx(),Jt=4):Jt=a===pv?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Qr=a,It===null&&(wn=1,mf(s,ls(a,s.current)))}function O_(){var s=Kr.current;return s===null?!0:(Dt&4194048)===Dt?hs===null:(Dt&62914560)===Dt||(Dt&536870912)!==0?s===hs:!1}function L_(){var s=G.H;return G.H=Uu,s===null?Uu:s}function V_(){var s=G.A;return G.A=Y6,s}function Cf(){wn=4,ja||(Dt&4194048)!==Dt&&Kr.current!==null||(Ql=!0),(Da&134217727)===0&&(Fo&134217727)===0||sn===null||Oa(sn,Dt,Xr,!1)}function Vv(s,a,l){var d=Yt;Yt|=2;var g=L_(),y=V_();(sn!==s||Dt!==a)&&(Sf=null,Zl(s,a)),a=!1;var T=wn;e:do try{if(Jt!==0&&It!==null){var O=It,q=Qr;switch(Jt){case 8:Lv(),T=6;break e;case 3:case 2:case 9:case 6:Kr.current===null&&(a=!0);var ie=Jt;if(Jt=0,Qr=null,ec(s,O,q,ie),l&&Ql){T=0;break e}break;default:ie=Jt,Jt=0,Qr=null,ec(s,O,q,ie)}}Q6(),T=wn;break}catch(ge){M_(s,ge)}while(!0);return a&&s.shellSuspendCounter++,Si=Do=null,Yt=d,G.H=g,G.A=y,It===null&&(sn=null,Dt=0,qh()),T}function Q6(){for(;It!==null;)U_(It)}function X6(s,a){var l=Yt;Yt|=2;var d=L_(),g=V_();sn!==s||Dt!==a?(Sf=null,Ef=X()+500,Zl(s,a)):Ql=St(s,a);e:do try{if(Jt!==0&&It!==null){a=It;var y=Qr;t:switch(Jt){case 1:Jt=0,Qr=null,ec(s,a,y,1);break;case 2:case 9:if(Wx(y)){Jt=0,Qr=null,z_(a);break}a=function(){Jt!==2&&Jt!==9||sn!==s||(Jt=7),ei(s)},y.then(a,a);break e;case 3:Jt=7;break e;case 4:Jt=5;break e;case 7:Wx(y)?(Jt=0,Qr=null,z_(a)):(Jt=0,Qr=null,ec(s,a,y,7));break;case 5:var T=null;switch(It.tag){case 26:T=It.memoizedState;case 5:case 27:var O=It;if(T?Tw(T):O.stateNode.complete){Jt=0,Qr=null;var q=O.sibling;if(q!==null)It=q;else{var ie=O.return;ie!==null?(It=ie,kf(ie)):It=null}break t}}Jt=0,Qr=null,ec(s,a,y,5);break;case 6:Jt=0,Qr=null,ec(s,a,y,6);break;case 8:Lv(),wn=6;break e;default:throw Error(r(462))}}J6();break}catch(ge){M_(s,ge)}while(!0);return Si=Do=null,G.H=d,G.A=g,Yt=l,It!==null?0:(sn=null,Dt=0,qh(),wn)}function J6(){for(;It!==null&&!Ne();)U_(It)}function U_(s){var a=c_(s.alternate,s,Pi);s.memoizedProps=s.pendingProps,a===null?kf(s):It=a}function z_(s){var a=s,l=a.alternate;switch(a.tag){case 15:case 0:a=r_(l,a,a.pendingProps,a.type,void 0,Dt);break;case 11:a=r_(l,a,a.pendingProps,a.type.render,a.ref,Dt);break;case 5:Zg(a);default:d_(l,a),a=It=Vx(a,Pi),a=c_(l,a,Pi)}s.memoizedProps=s.pendingProps,a===null?kf(s):It=a}function ec(s,a,l,d){Si=Do=null,Zg(a),Hl=null,Iu=0;var g=a.return;try{if(z6(s,g,a,l,Dt)){wn=1,mf(s,ls(l,s.current)),It=null;return}}catch(y){if(g!==null)throw It=g,y;wn=1,mf(s,ls(l,s.current)),It=null;return}a.flags&32768?(Ut||d===1?s=!0:Ql||(Dt&536870912)!==0?s=!1:(ja=s=!0,(d===2||d===9||d===3||d===6)&&(d=Kr.current,d!==null&&d.tag===13&&(d.flags|=16384))),B_(a,s)):kf(a)}function kf(s){var a=s;do{if((a.flags&32768)!==0){B_(a,ja);return}s=a.return;var l=H6(a.alternate,a,Pi);if(l!==null){It=l;return}if(a=a.sibling,a!==null){It=a;return}It=a=s}while(a!==null);wn===0&&(wn=5)}function B_(s,a){do{var l=$6(s.alternate,s);if(l!==null){l.flags&=32767,It=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(s=s.sibling,s!==null)){It=s;return}It=s=l}while(s!==null);wn=6,It=null}function F_(s,a,l,d,g,y,T,O,q){s.cancelPendingCommit=null;do Nf();while(Gn!==0);if((Yt&6)!==0)throw Error(r(327));if(a!==null){if(a===s.current)throw Error(r(177));if(y=a.lanes|a.childLanes,y|=Cg,qt(s,l,y,T,O,q),s===sn&&(It=sn=null,Dt=0),Jl=a,Ma=s,Mi=l,Pv=y,Mv=g,I_=d,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,n5(Ee,function(){return Y_(),null})):(s.callbackNode=null,s.callbackPriority=0),d=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||d){d=G.T,G.T=null,g=Z.p,Z.p=2,T=Yt,Yt|=4;try{q6(s,a,l)}finally{Yt=T,Z.p=g,G.T=d}}Gn=1,H_(),$_(),q_()}}function H_(){if(Gn===1){Gn=0;var s=Ma,a=Jl,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=G.T,G.T=null;var d=Z.p;Z.p=2;var g=Yt;Yt|=4;try{E_(a,s);var y=Qv,T=Ax(s.containerInfo),O=y.focusedElem,q=y.selectionRange;if(T!==O&&O&&O.ownerDocument&&Nx(O.ownerDocument.documentElement,O)){if(q!==null&&_g(O)){var ie=q.start,ge=q.end;if(ge===void 0&&(ge=ie),"selectionStart"in O)O.selectionStart=ie,O.selectionEnd=Math.min(ge,O.value.length);else{var _e=O.ownerDocument||document,ae=_e&&_e.defaultView||window;if(ae.getSelection){var de=ae.getSelection(),Ye=O.textContent.length,ut=Math.min(q.start,Ye),rn=q.end===void 0?ut:Math.min(q.end,Ye);!de.extend&&ut>rn&&(T=rn,rn=ut,ut=T);var W=kx(O,ut),Y=kx(O,rn);if(W&&Y&&(de.rangeCount!==1||de.anchorNode!==W.node||de.anchorOffset!==W.offset||de.focusNode!==Y.node||de.focusOffset!==Y.offset)){var se=_e.createRange();se.setStart(W.node,W.offset),de.removeAllRanges(),ut>rn?(de.addRange(se),de.extend(Y.node,Y.offset)):(se.setEnd(Y.node,Y.offset),de.addRange(se))}}}}for(_e=[],de=O;de=de.parentNode;)de.nodeType===1&&_e.push({element:de,left:de.scrollLeft,top:de.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<_e.length;O++){var be=_e[O];be.element.scrollLeft=be.left,be.element.scrollTop=be.top}}zf=!!Wv,Qv=Wv=null}finally{Yt=g,Z.p=d,G.T=l}}s.current=a,Gn=2}}function $_(){if(Gn===2){Gn=0;var s=Ma,a=Jl,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=G.T,G.T=null;var d=Z.p;Z.p=2;var g=Yt;Yt|=4;try{y_(s,a.alternate,a)}finally{Yt=g,Z.p=d,G.T=l}}Gn=3}}function q_(){if(Gn===4||Gn===3){Gn=0,xe();var s=Ma,a=Jl,l=Mi,d=I_;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Gn=5:(Gn=0,Jl=Ma=null,G_(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(Pa=null),yi(l),a=a.stateNode,nt&&typeof nt.onCommitFiberRoot=="function")try{nt.onCommitFiberRoot(kt,a,void 0,(a.current.flags&128)===128)}catch{}if(d!==null){a=G.T,g=Z.p,Z.p=2,G.T=null;try{for(var y=s.onRecoverableError,T=0;T<d.length;T++){var O=d[T];y(O.value,{componentStack:O.stack})}}finally{G.T=a,Z.p=g}}(Mi&3)!==0&&Nf(),ei(s),g=s.pendingLanes,(l&261930)!==0&&(g&42)!==0?s===Ov?Ku++:(Ku=0,Ov=s):Ku=0,Wu(0)}}function G_(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,Au(a)))}function Nf(){return H_(),$_(),q_(),Y_()}function Y_(){if(Gn!==5)return!1;var s=Ma,a=Pv;Pv=0;var l=yi(Mi),d=G.T,g=Z.p;try{Z.p=32>l?32:l,G.T=null,l=Mv,Mv=null;var y=Ma,T=Mi;if(Gn=0,Jl=Ma=null,Mi=0,(Yt&6)!==0)throw Error(r(331));var O=Yt;if(Yt|=4,N_(y.current),T_(y,y.current,T,l),Yt=O,Wu(0,!1),nt&&typeof nt.onPostCommitFiberRoot=="function")try{nt.onPostCommitFiberRoot(kt,y)}catch{}return!0}finally{Z.p=g,G.T=d,G_(s,a)}}function K_(s,a,l){a=ls(l,a),a=mv(s.stateNode,a,2),s=Na(s,a,2),s!==null&&(xt(s,2),ei(s))}function Zt(s,a,l){if(s.tag===3)K_(s,s,l);else for(;a!==null;){if(a.tag===3){K_(a,s,l);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Pa===null||!Pa.has(d))){s=ls(l,s),l=W2(2),d=Na(a,l,2),d!==null&&(Q2(l,d,a,s),xt(d,2),ei(d));break}}a=a.return}}function Uv(s,a,l){var d=s.pingCache;if(d===null){d=s.pingCache=new K6;var g=new Set;d.set(a,g)}else g=d.get(a),g===void 0&&(g=new Set,d.set(a,g));g.has(l)||(Iv=!0,g.add(l),s=Z6.bind(null,s,a,l),a.then(s,s))}function Z6(s,a,l){var d=s.pingCache;d!==null&&d.delete(a),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,sn===s&&(Dt&l)===l&&(wn===4||wn===3&&(Dt&62914560)===Dt&&300>X()-wf?(Yt&2)===0&&Zl(s,0):jv|=l,Xl===Dt&&(Xl=0)),ei(s)}function W_(s,a){a===0&&(a=qn()),s=Ro(s,a),s!==null&&(xt(s,a),ei(s))}function e5(s){var a=s.memoizedState,l=0;a!==null&&(l=a.retryLane),W_(s,l)}function t5(s,a){var l=0;switch(s.tag){case 31:case 13:var d=s.stateNode,g=s.memoizedState;g!==null&&(l=g.retryLane);break;case 19:d=s.stateNode;break;case 22:d=s.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(a),W_(s,l)}function n5(s,a){return je(s,a)}var Af=null,tc=null,zv=!1,Rf=!1,Bv=!1,La=0;function ei(s){s!==tc&&s.next===null&&(tc===null?Af=tc=s:tc=tc.next=s),Rf=!0,zv||(zv=!0,s5())}function Wu(s,a){if(!Bv&&Rf){Bv=!0;do for(var l=!1,d=Af;d!==null;){if(s!==0){var g=d.pendingLanes;if(g===0)var y=0;else{var T=d.suspendedLanes,O=d.pingedLanes;y=(1<<31-Qt(42|s)+1)-1,y&=g&~(T&~O),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(l=!0,Z_(d,y))}else y=Dt,y=$t(d,d===sn?y:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(y&3)===0||St(d,y)||(l=!0,Z_(d,y));d=d.next}while(l);Bv=!1}}function r5(){Q_()}function Q_(){Rf=zv=!1;var s=0;La!==0&&m5()&&(s=La);for(var a=X(),l=null,d=Af;d!==null;){var g=d.next,y=X_(d,a);y===0?(d.next=null,l===null?Af=g:l.next=g,g===null&&(tc=l)):(l=d,(s!==0||(y&3)!==0)&&(Rf=!0)),d=g}Gn!==0&&Gn!==5||Wu(s),La!==0&&(La=0)}function X_(s,a){for(var l=s.suspendedLanes,d=s.pingedLanes,g=s.expirationTimes,y=s.pendingLanes&-62914561;0<y;){var T=31-Qt(y),O=1<<T,q=g[T];q===-1?((O&l)===0||(O&d)!==0)&&(g[T]=ln(O,a)):q<=a&&(s.expiredLanes|=O),y&=~O}if(a=sn,l=Dt,l=$t(s,s===a?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d=s.callbackNode,l===0||s===a&&(Jt===2||Jt===9)||s.cancelPendingCommit!==null)return d!==null&&d!==null&&me(d),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||St(s,l)){if(a=l&-l,a===s.callbackPriority)return a;switch(d!==null&&me(d),yi(l)){case 2:case 8:l=on;break;case 32:l=Ee;break;case 268435456:l=lt;break;default:l=Ee}return d=J_.bind(null,s),l=je(l,d),s.callbackPriority=a,s.callbackNode=l,a}return d!==null&&d!==null&&me(d),s.callbackPriority=2,s.callbackNode=null,2}function J_(s,a){if(Gn!==0&&Gn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Nf()&&s.callbackNode!==l)return null;var d=Dt;return d=$t(s,s===sn?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d===0?null:(D_(s,d,a),X_(s,X()),s.callbackNode!=null&&s.callbackNode===l?J_.bind(null,s):null)}function Z_(s,a){if(Nf())return null;D_(s,a,!0)}function s5(){g5(function(){(Yt&6)!==0?je(ct,r5):Q_()})}function Fv(){if(La===0){var s=zl;s===0&&(s=et,et<<=1,(et&261888)===0&&(et=256)),La=s}return La}function ew(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Tl(""+s)}function tw(s,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,s.id&&l.setAttribute("form",s.id),a.parentNode.insertBefore(l,a),s=new FormData(s),l.parentNode.removeChild(l),s}function i5(s,a,l,d,g){if(a==="submit"&&l&&l.stateNode===g){var y=ew((g[Xn]||null).action),T=d.submitter;T&&(a=(a=T[Xn]||null)?ew(a.formAction):T.getAttribute("formAction"),a!==null&&(y=a,T=null));var O=new Ys("action","action",null,d,g);s.push({event:O,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(La!==0){var q=T?tw(g,T):new FormData(g);lv(l,{pending:!0,data:q,method:g.method,action:y},null,q)}}else typeof y=="function"&&(O.preventDefault(),q=T?tw(g,T):new FormData(g),lv(l,{pending:!0,data:q,method:g.method,action:y},y,q))},currentTarget:g}]})}}for(var Hv=0;Hv<Tg.length;Hv++){var $v=Tg[Hv],a5=$v.toLowerCase(),o5=$v[0].toUpperCase()+$v.slice(1);Ts(a5,"on"+o5)}Ts(jx,"onAnimationEnd"),Ts(Dx,"onAnimationIteration"),Ts(Px,"onAnimationStart"),Ts("dblclick","onDoubleClick"),Ts("focusin","onFocus"),Ts("focusout","onBlur"),Ts(E6,"onTransitionRun"),Ts(S6,"onTransitionStart"),Ts(T6,"onTransitionCancel"),Ts(Mx,"onTransitionEnd"),Hs("onMouseEnter",["mouseout","mouseover"]),Hs("onMouseLeave",["mouseout","mouseover"]),Hs("onPointerEnter",["pointerout","pointerover"]),Hs("onPointerLeave",["pointerout","pointerover"]),Fs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),l5=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qu));function nw(s,a){a=(a&4)!==0;for(var l=0;l<s.length;l++){var d=s[l],g=d.event;d=d.listeners;e:{var y=void 0;if(a)for(var T=d.length-1;0<=T;T--){var O=d[T],q=O.instance,ie=O.currentTarget;if(O=O.listener,q!==y&&g.isPropagationStopped())break e;y=O,g.currentTarget=ie;try{y(g)}catch(ge){$h(ge)}g.currentTarget=null,y=q}else for(T=0;T<d.length;T++){if(O=d[T],q=O.instance,ie=O.currentTarget,O=O.listener,q!==y&&g.isPropagationStopped())break e;y=O,g.currentTarget=ie;try{y(g)}catch(ge){$h(ge)}g.currentTarget=null,y=q}}}}function jt(s,a){var l=a[xl];l===void 0&&(l=a[xl]=new Set);var d=s+"__bubble";l.has(d)||(rw(a,s,2,!1),l.add(d))}function qv(s,a,l){var d=0;a&&(d|=4),rw(l,s,d,a)}var If="_reactListening"+Math.random().toString(36).slice(2);function Gv(s){if(!s[If]){s[If]=!0,lu.forEach(function(l){l!=="selectionchange"&&(l5.has(l)||qv(l,!1,s),qv(l,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[If]||(a[If]=!0,qv("selectionchange",!1,a))}}function rw(s,a,l,d){switch(jw(a)){case 2:var g=O5;break;case 8:g=L5;break;default:g=oy}l=g.bind(null,a,l,s),g=void 0,!wo||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),d?g!==void 0?s.addEventListener(a,l,{capture:!0,passive:g}):s.addEventListener(a,l,!0):g!==void 0?s.addEventListener(a,l,{passive:g}):s.addEventListener(a,l,!1)}function Yv(s,a,l,d,g){var y=d;if((a&1)===0&&(a&2)===0&&d!==null)e:for(;;){if(d===null)return;var T=d.tag;if(T===3||T===4){var O=d.stateNode.containerInfo;if(O===g)break;if(T===4)for(T=d.return;T!==null;){var q=T.tag;if((q===3||q===4)&&T.stateNode.containerInfo===g)return;T=T.return}for(;O!==null;){if(T=zs(O),T===null)return;if(q=T.tag,q===5||q===6||q===26||q===27){d=y=T;continue e}O=O.parentNode}}d=d.return}ya(function(){var ie=y,ge=ss(l),_e=[];e:{var ae=Ox.get(s);if(ae!==void 0){var de=Ys,Ye=s;switch(s){case"keypress":if(So(l)===0)break e;case"keydown":case"keyup":de=Bh;break;case"focusin":Ye="focus",de=Co;break;case"focusout":Ye="blur",de=Co;break;case"beforeblur":case"afterblur":de=Co;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=_u;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=jh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=_;break;case jx:case Dx:case Px:de=Ph;break;case Mx:de=F;break;case"scroll":case"scrollend":de=xu;break;case"wheel":de=le;break;case"copy":case"cut":case"paste":de=Mh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=_i;break;case"toggle":case"beforetoggle":de=wt}var ut=(a&4)!==0,rn=!ut&&(s==="scroll"||s==="scrollend"),W=ut?ae!==null?ae+"Capture":null:ae;ut=[];for(var Y=ie,se;Y!==null;){var be=Y;if(se=be.stateNode,be=be.tag,be!==5&&be!==26&&be!==27||se===null||W===null||(be=_s(Y,W),be!=null&&ut.push(Xu(Y,be,se))),rn)break;Y=Y.return}0<ut.length&&(ae=new de(ae,Ye,null,l,ge),_e.push({event:ae,listeners:ut}))}}if((a&7)===0){e:{if(ae=s==="mouseover"||s==="pointerover",de=s==="mouseout"||s==="pointerout",ae&&l!==vu&&(Ye=l.relatedTarget||l.fromElement)&&(zs(Ye)||Ye[Vs]))break e;if((de||ae)&&(ae=ge.window===ge?ge:(ae=ge.ownerDocument)?ae.defaultView||ae.parentWindow:window,de?(Ye=l.relatedTarget||l.toElement,de=ie,Ye=Ye?zs(Ye):null,Ye!==null&&(rn=o(Ye),ut=Ye.tag,Ye!==rn||ut!==5&&ut!==27&&ut!==6)&&(Ye=null)):(de=null,Ye=ie),de!==Ye)){if(ut=_u,be="onMouseLeave",W="onMouseEnter",Y="mouse",(s==="pointerout"||s==="pointerover")&&(ut=_i,be="onPointerLeave",W="onPointerEnter",Y="pointer"),rn=de==null?ae:$r(de),se=Ye==null?ae:$r(Ye),ae=new ut(be,Y+"leave",de,l,ge),ae.target=rn,ae.relatedTarget=se,be=null,zs(ge)===ie&&(ut=new ut(W,Y+"enter",Ye,l,ge),ut.target=se,ut.relatedTarget=rn,be=ut),rn=be,de&&Ye)t:{for(ut=c5,W=de,Y=Ye,se=0,be=W;be;be=ut(be))se++;be=0;for(var rt=Y;rt;rt=ut(rt))be++;for(;0<se-be;)W=ut(W),se--;for(;0<be-se;)Y=ut(Y),be--;for(;se--;){if(W===Y||Y!==null&&W===Y.alternate){ut=W;break t}W=ut(W),Y=ut(Y)}ut=null}else ut=null;de!==null&&sw(_e,ae,de,ut,!1),Ye!==null&&rn!==null&&sw(_e,rn,Ye,ut,!0)}}e:{if(ae=ie?$r(ie):window,de=ae.nodeName&&ae.nodeName.toLowerCase(),de==="select"||de==="input"&&ae.type==="file")var Bt=_x;else if(bx(ae))if(wx)Bt=x6;else{Bt=y6;var Je=v6}else de=ae.nodeName,!de||de.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?ie&&Sl(ie.elementType)&&(Bt=_x):Bt=b6;if(Bt&&(Bt=Bt(s,ie))){xx(_e,Bt,l,ge);break e}Je&&Je(s,ae,ie),s==="focusout"&&ie&&ae.type==="number"&&ie.memoizedProps.value!=null&&mu(ae,"number",ae.value)}switch(Je=ie?$r(ie):window,s){case"focusin":(bx(Je)||Je.contentEditable==="true")&&(jl=Je,wg=ie,Cu=null);break;case"focusout":Cu=wg=jl=null;break;case"mousedown":Eg=!0;break;case"contextmenu":case"mouseup":case"dragend":Eg=!1,Rx(_e,l,ge);break;case"selectionchange":if(w6)break;case"keydown":case"keyup":Rx(_e,l,ge)}var Tt;if(Gt)e:{switch(s){case"compositionstart":var Pt="onCompositionStart";break e;case"compositionend":Pt="onCompositionEnd";break e;case"compositionupdate":Pt="onCompositionUpdate";break e}Pt=void 0}else Il?ko(s,l)&&(Pt="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Pt="onCompositionStart");Pt&&(Qs&&l.locale!=="ko"&&(Il||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&Il&&(Tt=bu()):(Gs=ge,yu="value"in Gs?Gs.value:Gs.textContent,Il=!0)),Je=jf(ie,Pt),0<Je.length&&(Pt=new Ws(Pt,s,null,l,ge),_e.push({event:Pt,listeners:Je}),Tt?Pt.data=Tt:(Tt=Rl(l),Tt!==null&&(Pt.data=Tt)))),(Tt=as?f6(s,l):m6(s,l))&&(Pt=jf(ie,"onBeforeInput"),0<Pt.length&&(Je=new Ws("onBeforeInput","beforeinput",null,l,ge),_e.push({event:Je,listeners:Pt}),Je.data=Tt)),i5(_e,s,ie,l,ge)}nw(_e,a)})}function Xu(s,a,l){return{instance:s,listener:a,currentTarget:l}}function jf(s,a){for(var l=a+"Capture",d=[];s!==null;){var g=s,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=_s(s,l),g!=null&&d.unshift(Xu(s,g,y)),g=_s(s,a),g!=null&&d.push(Xu(s,g,y))),s.tag===3)return d;s=s.return}return[]}function c5(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function sw(s,a,l,d,g){for(var y=a._reactName,T=[];l!==null&&l!==d;){var O=l,q=O.alternate,ie=O.stateNode;if(O=O.tag,q!==null&&q===d)break;O!==5&&O!==26&&O!==27||ie===null||(q=ie,g?(ie=_s(l,y),ie!=null&&T.unshift(Xu(l,ie,q))):g||(ie=_s(l,y),ie!=null&&T.push(Xu(l,ie,q)))),l=l.return}T.length!==0&&s.push({event:a,listeners:T})}var u5=/\r\n?/g,d5=/\u0000|\uFFFD/g;function iw(s){return(typeof s=="string"?s:""+s).replace(u5,`
`).replace(d5,"")}function aw(s,a){return a=iw(a),iw(s)===a}function nn(s,a,l,d,g,y){switch(l){case"children":typeof d=="string"?a==="body"||a==="textarea"&&d===""||Ir(s,d):(typeof d=="number"||typeof d=="bigint")&&a!=="body"&&Ir(s,""+d);break;case"className":qr(s,"class",d);break;case"tabIndex":qr(s,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":qr(s,l,d);break;case"style":gu(s,d,y);break;case"data":if(a!=="object"){qr(s,"data",d);break}case"src":case"href":if(d===""&&(a!=="a"||l!=="href")){s.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(l);break}d=Tl(""+d),s.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(l==="formAction"?(a!=="input"&&nn(s,a,"name",g.name,g,null),nn(s,a,"formEncType",g.formEncType,g,null),nn(s,a,"formMethod",g.formMethod,g,null),nn(s,a,"formTarget",g.formTarget,g,null)):(nn(s,a,"encType",g.encType,g,null),nn(s,a,"method",g.method,g,null),nn(s,a,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(l);break}d=Tl(""+d),s.setAttribute(l,d);break;case"onClick":d!=null&&(s.onclick=xs);break;case"onScroll":d!=null&&jt("scroll",s);break;case"onScrollEnd":d!=null&&jt("scrollend",s);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(l=d.__html,l!=null){if(g.children!=null)throw Error(r(60));s.innerHTML=l}}break;case"multiple":s.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":s.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){s.removeAttribute("xlink:href");break}l=Tl(""+d),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(l,""+d):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":d===!0?s.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(l,d):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?s.setAttribute(l,d):s.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?s.removeAttribute(l):s.setAttribute(l,d);break;case"popover":jt("beforetoggle",s),jt("toggle",s),wl(s,"popover",d);break;case"xlinkActuate":jn(s,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":jn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":jn(s,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":jn(s,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":jn(s,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":jn(s,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":jn(s,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":jn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":jn(s,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":wl(s,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Ih.get(l)||l,wl(s,l,d))}}function Kv(s,a,l,d,g,y){switch(l){case"style":gu(s,d,y);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(l=d.__html,l!=null){if(g.children!=null)throw Error(r(60));s.innerHTML=l}}break;case"children":typeof d=="string"?Ir(s,d):(typeof d=="number"||typeof d=="bigint")&&Ir(s,""+d);break;case"onScroll":d!=null&&jt("scroll",s);break;case"onScrollEnd":d!=null&&jt("scrollend",s);break;case"onClick":d!=null&&(s.onclick=xs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!cu.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),a=l.slice(2,g?l.length-7:void 0),y=s[Xn]||null,y=y!=null?y[l]:null,typeof y=="function"&&s.removeEventListener(a,y,g),typeof d=="function")){typeof y!="function"&&y!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(a,d,g);break e}l in s?s[l]=d:d===!0?s.setAttribute(l,""):wl(s,l,d)}}}function or(s,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":jt("error",s),jt("load",s);var d=!1,g=!1,y;for(y in l)if(l.hasOwnProperty(y)){var T=l[y];if(T!=null)switch(y){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:nn(s,a,y,T,l,null)}}g&&nn(s,a,"srcSet",l.srcSet,l,null),d&&nn(s,a,"src",l.src,l,null);return;case"input":jt("invalid",s);var O=y=T=g=null,q=null,ie=null;for(d in l)if(l.hasOwnProperty(d)){var ge=l[d];if(ge!=null)switch(d){case"name":g=ge;break;case"type":T=ge;break;case"checked":q=ge;break;case"defaultChecked":ie=ge;break;case"value":y=ge;break;case"defaultValue":O=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(r(137,a));break;default:nn(s,a,d,ge,l,null)}}Nh(s,y,O,q,ie,T,g,!1);return;case"select":jt("invalid",s),d=T=y=null;for(g in l)if(l.hasOwnProperty(g)&&(O=l[g],O!=null))switch(g){case"value":y=O;break;case"defaultValue":T=O;break;case"multiple":d=O;default:nn(s,a,g,O,l,null)}a=y,l=T,s.multiple=!!d,a!=null?ma(s,!!d,a,!1):l!=null&&ma(s,!!d,l,!0);return;case"textarea":jt("invalid",s),y=g=d=null;for(T in l)if(l.hasOwnProperty(T)&&(O=l[T],O!=null))switch(T){case"value":d=O;break;case"defaultValue":g=O;break;case"children":y=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(r(91));break;default:nn(s,a,T,O,l,null)}pa(s,d,g,y);return;case"option":for(q in l)if(l.hasOwnProperty(q)&&(d=l[q],d!=null))switch(q){case"selected":s.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:nn(s,a,q,d,l,null)}return;case"dialog":jt("beforetoggle",s),jt("toggle",s),jt("cancel",s),jt("close",s);break;case"iframe":case"object":jt("load",s);break;case"video":case"audio":for(d=0;d<Qu.length;d++)jt(Qu[d],s);break;case"image":jt("error",s),jt("load",s);break;case"details":jt("toggle",s);break;case"embed":case"source":case"link":jt("error",s),jt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ie in l)if(l.hasOwnProperty(ie)&&(d=l[ie],d!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:nn(s,a,ie,d,l,null)}return;default:if(Sl(a)){for(ge in l)l.hasOwnProperty(ge)&&(d=l[ge],d!==void 0&&Kv(s,a,ge,d,l,void 0));return}}for(O in l)l.hasOwnProperty(O)&&(d=l[O],d!=null&&nn(s,a,O,d,l,null))}function h5(s,a,l,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,T=null,O=null,q=null,ie=null,ge=null;for(de in l){var _e=l[de];if(l.hasOwnProperty(de)&&_e!=null)switch(de){case"checked":break;case"value":break;case"defaultValue":q=_e;default:d.hasOwnProperty(de)||nn(s,a,de,null,d,_e)}}for(var ae in d){var de=d[ae];if(_e=l[ae],d.hasOwnProperty(ae)&&(de!=null||_e!=null))switch(ae){case"type":y=de;break;case"name":g=de;break;case"checked":ie=de;break;case"defaultChecked":ge=de;break;case"value":T=de;break;case"defaultValue":O=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,a));break;default:de!==_e&&nn(s,a,ae,de,d,_e)}}El(s,T,O,q,ie,ge,y,g);return;case"select":de=T=O=ae=null;for(y in l)if(q=l[y],l.hasOwnProperty(y)&&q!=null)switch(y){case"value":break;case"multiple":de=q;default:d.hasOwnProperty(y)||nn(s,a,y,null,d,q)}for(g in d)if(y=d[g],q=l[g],d.hasOwnProperty(g)&&(y!=null||q!=null))switch(g){case"value":ae=y;break;case"defaultValue":O=y;break;case"multiple":T=y;default:y!==q&&nn(s,a,g,y,d,q)}a=O,l=T,d=de,ae!=null?ma(s,!!l,ae,!1):!!d!=!!l&&(a!=null?ma(s,!!l,a,!0):ma(s,!!l,l?[]:"",!1));return;case"textarea":de=ae=null;for(O in l)if(g=l[O],l.hasOwnProperty(O)&&g!=null&&!d.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:nn(s,a,O,null,d,g)}for(T in d)if(g=d[T],y=l[T],d.hasOwnProperty(T)&&(g!=null||y!=null))switch(T){case"value":ae=g;break;case"defaultValue":de=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==y&&nn(s,a,T,g,d,y)}Ah(s,ae,de);return;case"option":for(var Ye in l)if(ae=l[Ye],l.hasOwnProperty(Ye)&&ae!=null&&!d.hasOwnProperty(Ye))switch(Ye){case"selected":s.selected=!1;break;default:nn(s,a,Ye,null,d,ae)}for(q in d)if(ae=d[q],de=l[q],d.hasOwnProperty(q)&&ae!==de&&(ae!=null||de!=null))switch(q){case"selected":s.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:nn(s,a,q,ae,d,de)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ut in l)ae=l[ut],l.hasOwnProperty(ut)&&ae!=null&&!d.hasOwnProperty(ut)&&nn(s,a,ut,null,d,ae);for(ie in d)if(ae=d[ie],de=l[ie],d.hasOwnProperty(ie)&&ae!==de&&(ae!=null||de!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,a));break;default:nn(s,a,ie,ae,d,de)}return;default:if(Sl(a)){for(var rn in l)ae=l[rn],l.hasOwnProperty(rn)&&ae!==void 0&&!d.hasOwnProperty(rn)&&Kv(s,a,rn,void 0,d,ae);for(ge in d)ae=d[ge],de=l[ge],!d.hasOwnProperty(ge)||ae===de||ae===void 0&&de===void 0||Kv(s,a,ge,ae,d,de);return}}for(var W in l)ae=l[W],l.hasOwnProperty(W)&&ae!=null&&!d.hasOwnProperty(W)&&nn(s,a,W,null,d,ae);for(_e in d)ae=d[_e],de=l[_e],!d.hasOwnProperty(_e)||ae===de||ae==null&&de==null||nn(s,a,_e,ae,d,de)}function ow(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function f5(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,l=performance.getEntriesByType("resource"),d=0;d<l.length;d++){var g=l[d],y=g.transferSize,T=g.initiatorType,O=g.duration;if(y&&O&&ow(T)){for(T=0,O=g.responseEnd,d+=1;d<l.length;d++){var q=l[d],ie=q.startTime;if(ie>O)break;var ge=q.transferSize,_e=q.initiatorType;ge&&ow(_e)&&(q=q.responseEnd,T+=ge*(q<O?1:(O-ie)/(q-ie)))}if(--d,a+=8*(y+T)/(g.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Wv=null,Qv=null;function Df(s){return s.nodeType===9?s:s.ownerDocument}function lw(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cw(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function Xv(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Jv=null;function m5(){var s=window.event;return s&&s.type==="popstate"?s===Jv?!1:(Jv=s,!0):(Jv=null,!1)}var uw=typeof setTimeout=="function"?setTimeout:void 0,p5=typeof clearTimeout=="function"?clearTimeout:void 0,dw=typeof Promise=="function"?Promise:void 0,g5=typeof queueMicrotask=="function"?queueMicrotask:typeof dw<"u"?function(s){return dw.resolve(null).then(s).catch(v5)}:uw;function v5(s){setTimeout(function(){throw s})}function Va(s){return s==="head"}function hw(s,a){var l=a,d=0;do{var g=l.nextSibling;if(s.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"||l==="/&"){if(d===0){s.removeChild(g),ic(a);return}d--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")d++;else if(l==="html")Ju(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,Ju(l);for(var y=l.firstChild;y;){var T=y.nextSibling,O=y.nodeName;y[Us]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&y.rel.toLowerCase()==="stylesheet"||l.removeChild(y),y=T}}else l==="body"&&Ju(s.ownerDocument.body);l=g}while(l);ic(a)}function fw(s,a){var l=s;s=0;do{var d=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=d}while(l)}function Zv(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Zv(l),_l(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function y5(s,a,l,d){for(;s.nodeType===1;){var g=l;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!d&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(d){if(!s[Us])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(y=s.getAttribute("rel"),y==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(y!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(y=s.getAttribute("src"),(y!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===y)return s}else return s;if(s=fs(s.nextSibling),s===null)break}return null}function b5(s,a,l){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=fs(s.nextSibling),s===null))return null;return s}function mw(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=fs(s.nextSibling),s===null))return null;return s}function ey(s){return s.data==="$?"||s.data==="$~"}function ty(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function x5(s,a){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||l.readyState!=="loading")a();else{var d=function(){a(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),s._reactRetry=d}}function fs(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var ny=null;function pw(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(a===0)return fs(s.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}s=s.nextSibling}return null}function gw(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return s;a--}else l!=="/$"&&l!=="/&"||a++}s=s.previousSibling}return null}function vw(s,a,l){switch(a=Df(l),s){case"html":if(s=a.documentElement,!s)throw Error(r(452));return s;case"head":if(s=a.head,!s)throw Error(r(453));return s;case"body":if(s=a.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Ju(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);_l(s)}var ms=new Map,yw=new Set;function Pf(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Oi=Z.d;Z.d={f:_5,r:w5,D:E5,C:S5,L:T5,m:C5,X:N5,S:k5,M:A5};function _5(){var s=Oi.f(),a=Tf();return s||a}function w5(s){var a=rs(s);a!==null&&a.tag===5&&a.type==="form"?M2(a):Oi.r(s)}var nc=typeof document>"u"?null:document;function bw(s,a,l){var d=nc;if(d&&typeof a=="string"&&a){var g=Rr(a);g='link[rel="'+s+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),yw.has(g)||(yw.add(g),s={rel:s,crossOrigin:l,href:a},d.querySelector(g)===null&&(a=d.createElement("link"),or(a,"link",s),In(a),d.head.appendChild(a)))}}function E5(s){Oi.D(s),bw("dns-prefetch",s,null)}function S5(s,a){Oi.C(s,a),bw("preconnect",s,a)}function T5(s,a,l){Oi.L(s,a,l);var d=nc;if(d&&s&&a){var g='link[rel="preload"][as="'+Rr(a)+'"]';a==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+Rr(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+Rr(l.imageSizes)+'"]')):g+='[href="'+Rr(s)+'"]';var y=g;switch(a){case"style":y=rc(s);break;case"script":y=sc(s)}ms.has(y)||(s=b({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:s,as:a},l),ms.set(y,s),d.querySelector(g)!==null||a==="style"&&d.querySelector(Zu(y))||a==="script"&&d.querySelector(ed(y))||(a=d.createElement("link"),or(a,"link",s),In(a),d.head.appendChild(a)))}}function C5(s,a){Oi.m(s,a);var l=nc;if(l&&s){var d=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+Rr(d)+'"][href="'+Rr(s)+'"]',y=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=sc(s)}if(!ms.has(y)&&(s=b({rel:"modulepreload",href:s},a),ms.set(y,s),l.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(ed(y)))return}d=l.createElement("link"),or(d,"link",s),In(d),l.head.appendChild(d)}}}function k5(s,a,l){Oi.S(s,a,l);var d=nc;if(d&&s){var g=Bs(d).hoistableStyles,y=rc(s);a=a||"default";var T=g.get(y);if(!T){var O={loading:0,preload:null};if(T=d.querySelector(Zu(y)))O.loading=5;else{s=b({rel:"stylesheet",href:s,"data-precedence":a},l),(l=ms.get(y))&&ry(s,l);var q=T=d.createElement("link");In(q),or(q,"link",s),q._p=new Promise(function(ie,ge){q.onload=ie,q.onerror=ge}),q.addEventListener("load",function(){O.loading|=1}),q.addEventListener("error",function(){O.loading|=2}),O.loading|=4,Mf(T,a,d)}T={type:"stylesheet",instance:T,count:1,state:O},g.set(y,T)}}}function N5(s,a){Oi.X(s,a);var l=nc;if(l&&s){var d=Bs(l).hoistableScripts,g=sc(s),y=d.get(g);y||(y=l.querySelector(ed(g)),y||(s=b({src:s,async:!0},a),(a=ms.get(g))&&sy(s,a),y=l.createElement("script"),In(y),or(y,"link",s),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(g,y))}}function A5(s,a){Oi.M(s,a);var l=nc;if(l&&s){var d=Bs(l).hoistableScripts,g=sc(s),y=d.get(g);y||(y=l.querySelector(ed(g)),y||(s=b({src:s,async:!0,type:"module"},a),(a=ms.get(g))&&sy(s,a),y=l.createElement("script"),In(y),or(y,"link",s),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(g,y))}}function xw(s,a,l,d){var g=(g=Ue.current)?Pf(g):null;if(!g)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=rc(l.href),l=Bs(g).hoistableStyles,d=l.get(a),d||(d={type:"style",instance:null,count:0,state:null},l.set(a,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=rc(l.href);var y=Bs(g).hoistableStyles,T=y.get(s);if(T||(g=g.ownerDocument||g,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(s,T),(y=g.querySelector(Zu(s)))&&!y._p&&(T.instance=y,T.state.loading=5),ms.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},ms.set(s,l),y||R5(g,s,l,T.state))),a&&d===null)throw Error(r(528,""));return T}if(a&&d!==null)throw Error(r(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=sc(l),l=Bs(g).hoistableScripts,d=l.get(a),d||(d={type:"script",instance:null,count:0,state:null},l.set(a,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function rc(s){return'href="'+Rr(s)+'"'}function Zu(s){return'link[rel="stylesheet"]['+s+"]"}function _w(s){return b({},s,{"data-precedence":s.precedence,precedence:null})}function R5(s,a,l,d){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?d.loading=1:(a=s.createElement("link"),d.preload=a,a.addEventListener("load",function(){return d.loading|=1}),a.addEventListener("error",function(){return d.loading|=2}),or(a,"link",l),In(a),s.head.appendChild(a))}function sc(s){return'[src="'+Rr(s)+'"]'}function ed(s){return"script[async]"+s}function ww(s,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var d=s.querySelector('style[data-href~="'+Rr(l.href)+'"]');if(d)return a.instance=d,In(d),d;var g=b({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(s.ownerDocument||s).createElement("style"),In(d),or(d,"style",g),Mf(d,l.precedence,s),a.instance=d;case"stylesheet":g=rc(l.href);var y=s.querySelector(Zu(g));if(y)return a.state.loading|=4,a.instance=y,In(y),y;d=_w(l),(g=ms.get(g))&&ry(d,g),y=(s.ownerDocument||s).createElement("link"),In(y);var T=y;return T._p=new Promise(function(O,q){T.onload=O,T.onerror=q}),or(y,"link",d),a.state.loading|=4,Mf(y,l.precedence,s),a.instance=y;case"script":return y=sc(l.src),(g=s.querySelector(ed(y)))?(a.instance=g,In(g),g):(d=l,(g=ms.get(y))&&(d=b({},l),sy(d,g)),s=s.ownerDocument||s,g=s.createElement("script"),In(g),or(g,"link",d),s.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(d=a.instance,a.state.loading|=4,Mf(d,l.precedence,s));return a.instance}function Mf(s,a,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,y=g,T=0;T<d.length;T++){var O=d[T];if(O.dataset.precedence===a)y=O;else if(y!==g)break}y?y.parentNode.insertBefore(s,y.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(s,a.firstChild))}function ry(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function sy(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var Of=null;function Ew(s,a,l){if(Of===null){var d=new Map,g=Of=new Map;g.set(l,d)}else g=Of,d=g.get(l),d||(d=new Map,g.set(l,d));if(d.has(s))return d;for(d.set(s,null),l=l.getElementsByTagName(s),g=0;g<l.length;g++){var y=l[g];if(!(y[Us]||y[Rn]||s==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(a)||"";T=s+T;var O=d.get(T);O?O.push(y):d.set(T,[y])}}return d}function Sw(s,a,l){s=s.ownerDocument||s,s.head.insertBefore(l,a==="title"?s.querySelector("head > title"):null)}function I5(s,a,l){if(l===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Tw(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function j5(s,a,l,d){if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var g=rc(d.href),y=a.querySelector(Zu(g));if(y){a=y._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=Lf.bind(s),a.then(s,s)),l.state.loading|=4,l.instance=y,In(y);return}y=a.ownerDocument||a,d=_w(d),(g=ms.get(g))&&ry(d,g),y=y.createElement("link"),In(y);var T=y;T._p=new Promise(function(O,q){T.onload=O,T.onerror=q}),or(y,"link",d),l.instance=y}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=Lf.bind(s),a.addEventListener("load",l),a.addEventListener("error",l))}}var iy=0;function D5(s,a){return s.stylesheets&&s.count===0&&Uf(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var d=setTimeout(function(){if(s.stylesheets&&Uf(s,s.stylesheets),s.unsuspend){var y=s.unsuspend;s.unsuspend=null,y()}},6e4+a);0<s.imgBytes&&iy===0&&(iy=62500*f5());var g=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Uf(s,s.stylesheets),s.unsuspend)){var y=s.unsuspend;s.unsuspend=null,y()}},(s.imgBytes>iy?50:800)+a);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(d),clearTimeout(g)}}:null}function Lf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Uf(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Vf=null;function Uf(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Vf=new Map,a.forEach(P5,s),Vf=null,Lf.call(s))}function P5(s,a){if(!(a.state.loading&4)){var l=Vf.get(s);if(l)var d=l.get(null);else{l=new Map,Vf.set(s,l);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var T=g[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),d=T)}d&&l.set(null,d)}g=a.instance,T=g.getAttribute("data-precedence"),y=l.get(T)||d,y===d&&l.set(null,g),l.set(T,g),this.count++,d=Lf.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),y?y.parentNode.insertBefore(g,y.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),a.state.loading|=4}}var td={$$typeof:I,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function M5(s,a,l,d,g,y,T,O,q){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qe(0),this.hiddenUpdates=qe(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function Cw(s,a,l,d,g,y,T,O,q,ie,ge,_e){return s=new M5(s,a,l,T,q,ie,ge,_e,O),a=1,y===!0&&(a|=24),y=Yr(3,null,null,a),s.current=y,y.stateNode=s,a=Vg(),a.refCount++,s.pooledCache=a,a.refCount++,y.memoizedState={element:d,isDehydrated:l,cache:a},Fg(y),s}function kw(s){return s?(s=Ml,s):Ml}function Nw(s,a,l,d,g,y){g=kw(g),d.context===null?d.context=g:d.pendingContext=g,d=ka(a),d.payload={element:l},y=y===void 0?null:y,y!==null&&(d.callback=y),l=Na(s,d,a),l!==null&&(Or(l,s,a),Du(l,s,a))}function Aw(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<a?l:a}}function ay(s,a){Aw(s,a),(s=s.alternate)&&Aw(s,a)}function Rw(s){if(s.tag===13||s.tag===31){var a=Ro(s,67108864);a!==null&&Or(a,s,67108864),ay(s,67108864)}}function Iw(s){if(s.tag===13||s.tag===31){var a=Jr();a=yo(a);var l=Ro(s,a);l!==null&&Or(l,s,a),ay(s,a)}}var zf=!0;function O5(s,a,l,d){var g=G.T;G.T=null;var y=Z.p;try{Z.p=2,oy(s,a,l,d)}finally{Z.p=y,G.T=g}}function L5(s,a,l,d){var g=G.T;G.T=null;var y=Z.p;try{Z.p=8,oy(s,a,l,d)}finally{Z.p=y,G.T=g}}function oy(s,a,l,d){if(zf){var g=ly(d);if(g===null)Yv(s,a,d,Bf,l),Dw(s,d);else if(U5(g,s,a,l,d))d.stopPropagation();else if(Dw(s,d),a&4&&-1<V5.indexOf(s)){for(;g!==null;){var y=rs(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=At(y.pendingLanes);if(T!==0){var O=y;for(O.pendingLanes|=2,O.entangledLanes|=2;T;){var q=1<<31-Qt(T);O.entanglements[1]|=q,T&=~q}ei(y),(Yt&6)===0&&(Ef=X()+500,Wu(0))}}break;case 31:case 13:O=Ro(y,2),O!==null&&Or(O,y,2),Tf(),ay(y,2)}if(y=ly(d),y===null&&Yv(s,a,d,Bf,l),y===g)break;g=y}g!==null&&d.stopPropagation()}else Yv(s,a,d,null,l)}}function ly(s){return s=ss(s),cy(s)}var Bf=null;function cy(s){if(Bf=null,s=zs(s),s!==null){var a=o(s);if(a===null)s=null;else{var l=a.tag;if(l===13){if(s=u(a),s!==null)return s;s=null}else if(l===31){if(s=h(a),s!==null)return s;s=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return Bf=s,null}function jw(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(He()){case ct:return 2;case on:return 8;case Ee:case $e:return 32;case lt:return 268435456;default:return 32}default:return 32}}var uy=!1,Ua=null,za=null,Ba=null,nd=new Map,rd=new Map,Fa=[],V5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Dw(s,a){switch(s){case"focusin":case"focusout":Ua=null;break;case"dragenter":case"dragleave":za=null;break;case"mouseover":case"mouseout":Ba=null;break;case"pointerover":case"pointerout":nd.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":rd.delete(a.pointerId)}}function sd(s,a,l,d,g,y){return s===null||s.nativeEvent!==y?(s={blockedOn:a,domEventName:l,eventSystemFlags:d,nativeEvent:y,targetContainers:[g]},a!==null&&(a=rs(a),a!==null&&Rw(a)),s):(s.eventSystemFlags|=d,a=s.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),s)}function U5(s,a,l,d,g){switch(a){case"focusin":return Ua=sd(Ua,s,a,l,d,g),!0;case"dragenter":return za=sd(za,s,a,l,d,g),!0;case"mouseover":return Ba=sd(Ba,s,a,l,d,g),!0;case"pointerover":var y=g.pointerId;return nd.set(y,sd(nd.get(y)||null,s,a,l,d,g)),!0;case"gotpointercapture":return y=g.pointerId,rd.set(y,sd(rd.get(y)||null,s,a,l,d,g)),!0}return!1}function Pw(s){var a=zs(s.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=u(l),a!==null){s.blockedOn=a,ys(s.priority,function(){Iw(l)});return}}else if(a===31){if(a=h(l),a!==null){s.blockedOn=a,ys(s.priority,function(){Iw(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Ff(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var l=ly(s.nativeEvent);if(l===null){l=s.nativeEvent;var d=new l.constructor(l.type,l);vu=d,l.target.dispatchEvent(d),vu=null}else return a=rs(l),a!==null&&Rw(a),s.blockedOn=l,!1;a.shift()}return!0}function Mw(s,a,l){Ff(s)&&l.delete(a)}function z5(){uy=!1,Ua!==null&&Ff(Ua)&&(Ua=null),za!==null&&Ff(za)&&(za=null),Ba!==null&&Ff(Ba)&&(Ba=null),nd.forEach(Mw),rd.forEach(Mw)}function Hf(s,a){s.blockedOn===a&&(s.blockedOn=null,uy||(uy=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,z5)))}var $f=null;function Ow(s){$f!==s&&($f=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){$f===s&&($f=null);for(var a=0;a<s.length;a+=3){var l=s[a],d=s[a+1],g=s[a+2];if(typeof d!="function"){if(cy(d||l)===null)continue;break}var y=rs(l);y!==null&&(s.splice(a,3),a-=3,lv(y,{pending:!0,data:g,method:l.method,action:d},d,g))}}))}function ic(s){function a(q){return Hf(q,s)}Ua!==null&&Hf(Ua,s),za!==null&&Hf(za,s),Ba!==null&&Hf(Ba,s),nd.forEach(a),rd.forEach(a);for(var l=0;l<Fa.length;l++){var d=Fa[l];d.blockedOn===s&&(d.blockedOn=null)}for(;0<Fa.length&&(l=Fa[0],l.blockedOn===null);)Pw(l),l.blockedOn===null&&Fa.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var g=l[d],y=l[d+1],T=g[Xn]||null;if(typeof y=="function")T||Ow(l);else if(T){var O=null;if(y&&y.hasAttribute("formAction")){if(g=y,T=y[Xn]||null)O=T.formAction;else if(cy(g)!==null)continue}else O=T.action;typeof O=="function"?l[d+1]=O:(l.splice(d,3),d-=3),Ow(l)}}}function Lw(){function s(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(T){return g=T})},focusReset:"manual",scroll:"manual"})}function a(){g!==null&&(g(),g=null),d||setTimeout(l,20)}function l(){if(!d&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,g=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){d=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),g!==null&&(g(),g=null)}}}function dy(s){this._internalRoot=s}qf.prototype.render=dy.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(r(409));var l=a.current,d=Jr();Nw(l,d,s,a,null,null)},qf.prototype.unmount=dy.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;Nw(s.current,2,null,s,null,null),Tf(),a[Vs]=null}};function qf(s){this._internalRoot=s}qf.prototype.unstable_scheduleHydration=function(s){if(s){var a=Sh();s={blockedOn:null,target:s,priority:a};for(var l=0;l<Fa.length&&a!==0&&a<Fa[l].priority;l++);Fa.splice(l,0,s),l===0&&Pw(s)}};var Vw=e.version;if(Vw!=="19.2.3")throw Error(r(527,Vw,"19.2.3"));Z.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=m(a),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var B5={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gf.isDisabled&&Gf.supportsFiber)try{kt=Gf.inject(B5),nt=Gf}catch{}}return ad.createRoot=function(s,a){if(!i(s))throw Error(r(299));var l=!1,d="",g=q2,y=G2,T=Y2;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError)),a=Cw(s,1,!1,null,null,l,d,null,g,y,T,Lw),s[Vs]=a.current,Gv(s),new dy(a)},ad.hydrateRoot=function(s,a,l){if(!i(s))throw Error(r(299));var d=!1,g="",y=q2,T=G2,O=Y2,q=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(O=l.onRecoverableError),l.formState!==void 0&&(q=l.formState)),a=Cw(s,1,!0,a,l??null,d,g,q,y,T,O,Lw),a.context=kw(null),l=a.current,d=Jr(),d=yo(d),g=ka(d),g.callback=null,Na(l,g,d),l=d,a.current.lanes=l,xt(a,l),ei(a),s[Vs]=a.current,Gv(s),new qf(a)},ad.version="19.2.3",ad}var Kw;function J5(){if(Kw)return my.exports;Kw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),my.exports=X5(),my.exports}var Z5=J5();const eI=()=>{};var Ww={};const NT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},tI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],u=t[n++],h=t[n++],f=((i&7)<<18|(o&63)<<12|(u&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const o=t[n++],u=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|u&63)}}return e.join("")},AT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],u=i+1<t.length,h=u?t[i+1]:0,f=i+2<t.length,m=f?t[i+2]:0,v=o>>2,b=(o&3)<<4|h>>4;let x=(h&15)<<2|m>>6,C=m&63;f||(C=64,u||(x=64)),r.push(n[v],n[b],n[x],n[C])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(NT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):tI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],h=i<t.length?n[t.charAt(i)]:0;++i;const m=i<t.length?n[t.charAt(i)]:64;++i;const b=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||h==null||m==null||b==null)throw new nI;const x=o<<2|h>>4;if(r.push(x),m!==64){const C=h<<4&240|m>>2;if(r.push(C),b!==64){const R=m<<6&192|b;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class nI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rI=function(t){const e=NT(t);return AT.encodeByteArray(e,!0)},Lm=function(t){return rI(t).replace(/\./g,"")},RT=function(t){try{return AT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function sI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const iI=()=>sI().__FIREBASE_DEFAULTS__,aI=()=>{if(typeof process>"u"||typeof Ww>"u")return;const t=Ww.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},oI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&RT(t[1]);return e&&JSON.parse(e)},xp=()=>{try{return eI()||iI()||aI()||oI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},IT=t=>xp()?.emulatorHosts?.[t],jT=t=>{const e=IT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},DT=()=>xp()?.config,PT=t=>xp()?.[`_${t}`];class lI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function ll(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function mb(t){return(await fetch(t,{credentials:"include"})).ok}function MT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Lm(JSON.stringify(n)),Lm(JSON.stringify(u)),""].join(".")}const Cd={};function cI(){const t={prod:[],emulator:[]};for(const e of Object.keys(Cd))Cd[e]?t.emulator.push(e):t.prod.push(e);return t}function uI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Qw=!1;function pb(t,e){if(typeof window>"u"||typeof document>"u"||!ll(window.location.host)||Cd[t]===e||Cd[t]||Qw)return;Cd[t]=e;function n(x){return`__firebase__banner__${x}`}const r="__firebase__banner",o=cI().prod.length>0;function u(){const x=document.getElementById(r);x&&x.remove()}function h(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function f(x,C){x.setAttribute("width","24"),x.setAttribute("id",C),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function m(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{Qw=!0,u()},x}function v(x,C){x.setAttribute("id",C),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function b(){const x=uI(r),C=n("text"),R=document.getElementById(C)||document.createElement("span"),A=n("learnmore"),k=document.getElementById(A)||document.createElement("a"),L=n("preprendIcon"),U=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const I=x.element;h(I),v(k,A);const M=m();f(U,L),I.append(U,R,k,M),document.body.appendChild(I)}o?(R.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function _r(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_r())}function hI(){const t=xp()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function pI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gI(){const t=_r();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function vI(){return!hI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yI(){try{return typeof indexedDB=="object"}catch{return!1}}function bI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}const xI="FirebaseError";class pi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=xI,Object.setPrototypeOf(this,pi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sh.prototype.create)}}class sh{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],u=o?_I(o,r):"Error",h=`${this.serviceName}: ${u} (${i}).`;return new pi(i,h,r)}}function _I(t,e){return t.replace(wI,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const wI=/\{\$([^}]+)}/g;function EI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ji(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],u=e[i];if(Xw(o)&&Xw(u)){if(!Ji(o,u))return!1}else if(o!==u)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Xw(t){return t!==null&&typeof t=="object"}function Hc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function pd(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function gd(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function SI(t,e){const n=new TI(t,e);return n.subscribe.bind(n)}class TI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");CI(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=yy),i.error===void 0&&(i.error=yy),i.complete===void 0&&(i.complete=yy);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function yy(){}function at(t){return t&&t._delegate?t._delegate:t}class ao{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Go="[DEFAULT]";class kI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new lI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AI(e))try{this.getOrInitializeService({instanceIdentifier:Go})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Go){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Go){return this.instances.has(e)}getOptions(e=Go){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);r===h&&u.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:NI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Go){return this.component?this.component.multipleInstances?e:Go:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NI(t){return t===Go?void 0:t}function AI(t){return t.instantiationMode==="EAGER"}class RI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new kI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Mt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Mt||(Mt={}));const II={debug:Mt.DEBUG,verbose:Mt.VERBOSE,info:Mt.INFO,warn:Mt.WARN,error:Mt.ERROR,silent:Mt.SILENT},jI=Mt.INFO,DI={[Mt.DEBUG]:"log",[Mt.VERBOSE]:"log",[Mt.INFO]:"info",[Mt.WARN]:"warn",[Mt.ERROR]:"error"},PI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=DI[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let gb=class{constructor(e){this.name=e,this._logLevel=jI,this._logHandler=PI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Mt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?II[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Mt.DEBUG,...e),this._logHandler(this,Mt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Mt.VERBOSE,...e),this._logHandler(this,Mt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Mt.INFO,...e),this._logHandler(this,Mt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Mt.WARN,...e),this._logHandler(this,Mt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Mt.ERROR,...e),this._logHandler(this,Mt.ERROR,...e)}};const MI=(t,e)=>e.some(n=>t instanceof n);let Jw,Zw;function OI(){return Jw||(Jw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LI(){return Zw||(Zw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const OT=new WeakMap,u0=new WeakMap,LT=new WeakMap,by=new WeakMap,vb=new WeakMap;function VI(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",u)},o=()=>{n(Za(t.result)),i()},u=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&OT.set(n,t)}).catch(()=>{}),vb.set(e,t),e}function UI(t){if(u0.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",u),t.removeEventListener("abort",u)},o=()=>{n(),i()},u=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",u),t.addEventListener("abort",u)});u0.set(t,e)}let d0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return u0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||LT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Za(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function zI(t){d0=t(d0)}function BI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(xy(this),e,...n);return LT.set(r,e.sort?e.sort():[e]),Za(r)}:LI().includes(t)?function(...e){return t.apply(xy(this),e),Za(OT.get(this))}:function(...e){return Za(t.apply(xy(this),e))}}function FI(t){return typeof t=="function"?BI(t):(t instanceof IDBTransaction&&UI(t),MI(t,OI())?new Proxy(t,d0):t)}function Za(t){if(t instanceof IDBRequest)return VI(t);if(by.has(t))return by.get(t);const e=FI(t);return e!==t&&(by.set(t,e),vb.set(e,t)),e}const xy=t=>vb.get(t);function HI(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const u=indexedDB.open(t,e),h=Za(u);return r&&u.addEventListener("upgradeneeded",f=>{r(Za(u.result),f.oldVersion,f.newVersion,Za(u.transaction),f)}),n&&u.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),h.then(f=>{o&&f.addEventListener("close",()=>o()),i&&f.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const $I=["get","getKey","getAll","getAllKeys","count"],qI=["put","add","delete","clear"],_y=new Map;function eE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(_y.get(e))return _y.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=qI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||$I.includes(n)))return;const o=async function(u,...h){const f=this.transaction(u,i?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(h.shift())),(await Promise.all([m[n](...h),i&&f.done]))[0]};return _y.set(e,o),o}zI(t=>({...t,get:(e,n,r)=>eE(e,n)||t.get(e,n,r),has:(e,n)=>!!eE(e,n)||t.has(e,n)}));class GI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(YI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function YI(t){return t.getComponent()?.type==="VERSION"}const h0="@firebase/app",tE="0.14.6";const Zi=new gb("@firebase/app"),KI="@firebase/app-compat",WI="@firebase/analytics-compat",QI="@firebase/analytics",XI="@firebase/app-check-compat",JI="@firebase/app-check",ZI="@firebase/auth",ej="@firebase/auth-compat",tj="@firebase/database",nj="@firebase/data-connect",rj="@firebase/database-compat",sj="@firebase/functions",ij="@firebase/functions-compat",aj="@firebase/installations",oj="@firebase/installations-compat",lj="@firebase/messaging",cj="@firebase/messaging-compat",uj="@firebase/performance",dj="@firebase/performance-compat",hj="@firebase/remote-config",fj="@firebase/remote-config-compat",mj="@firebase/storage",pj="@firebase/storage-compat",gj="@firebase/firestore",vj="@firebase/ai",yj="@firebase/firestore-compat",bj="firebase",xj="12.6.0";const f0="[DEFAULT]",_j={[h0]:"fire-core",[KI]:"fire-core-compat",[QI]:"fire-analytics",[WI]:"fire-analytics-compat",[JI]:"fire-app-check",[XI]:"fire-app-check-compat",[ZI]:"fire-auth",[ej]:"fire-auth-compat",[tj]:"fire-rtdb",[nj]:"fire-data-connect",[rj]:"fire-rtdb-compat",[sj]:"fire-fn",[ij]:"fire-fn-compat",[aj]:"fire-iid",[oj]:"fire-iid-compat",[lj]:"fire-fcm",[cj]:"fire-fcm-compat",[uj]:"fire-perf",[dj]:"fire-perf-compat",[hj]:"fire-rc",[fj]:"fire-rc-compat",[mj]:"fire-gcs",[pj]:"fire-gcs-compat",[gj]:"fire-fst",[yj]:"fire-fst-compat",[vj]:"fire-vertex","fire-js":"fire-js",[bj]:"fire-js-all"};const Vm=new Map,wj=new Map,m0=new Map;function nE(t,e){try{t.container.addComponent(e)}catch(n){Zi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function tl(t){const e=t.name;if(m0.has(e))return Zi.debug(`There were multiple attempts to register component ${e}.`),!1;m0.set(e,t);for(const n of Vm.values())nE(n,t);for(const n of wj.values())nE(n,t);return!0}function _p(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function vn(t){return t==null?!1:t.settings!==void 0}const Ej={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},eo=new sh("app","Firebase",Ej);class Sj{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ao("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw eo.create("app-deleted",{appName:this._name})}}const cl=xj;function VT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:f0,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw eo.create("bad-app-name",{appName:String(i)});if(n||(n=DT()),!n)throw eo.create("no-options");const o=Vm.get(i);if(o){if(Ji(n,o.options)&&Ji(r,o.config))return o;throw eo.create("duplicate-app",{appName:i})}const u=new RI(i);for(const f of m0.values())u.addComponent(f);const h=new Sj(n,r,u);return Vm.set(i,h),h}function yb(t=f0){const e=Vm.get(t);if(!e&&t===f0&&DT())return VT();if(!e)throw eo.create("no-app",{appName:t});return e}function ii(t,e,n){let r=_j[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const u=[`Unable to register library "${r}" with version "${e}":`];i&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zi.warn(u.join(" "));return}tl(new ao(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const Tj="firebase-heartbeat-database",Cj=1,Md="firebase-heartbeat-store";let wy=null;function UT(){return wy||(wy=HI(Tj,Cj,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Md)}catch(n){console.warn(n)}}}}).catch(t=>{throw eo.create("idb-open",{originalErrorMessage:t.message})})),wy}async function kj(t){try{const n=(await UT()).transaction(Md),r=await n.objectStore(Md).get(zT(t));return await n.done,r}catch(e){if(e instanceof pi)Zi.warn(e.message);else{const n=eo.create("idb-get",{originalErrorMessage:e?.message});Zi.warn(n.message)}}}async function rE(t,e){try{const r=(await UT()).transaction(Md,"readwrite");await r.objectStore(Md).put(e,zT(t)),await r.done}catch(n){if(n instanceof pi)Zi.warn(n.message);else{const r=eo.create("idb-set",{originalErrorMessage:n?.message});Zi.warn(r.message)}}}function zT(t){return`${t.name}!${t.options.appId}`}const Nj=1024,Aj=30;class Rj{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new jj(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=sE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>Aj){const i=Dj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Zi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=sE(),{heartbeatsToSend:n,unsentEntries:r}=Ij(this._heartbeatsCache.heartbeats),i=Lm(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Zi.warn(e),""}}}function sE(){return new Date().toISOString().substring(0,10)}function Ij(t,e=Nj){const n=[];let r=t.slice();for(const i of t){const o=n.find(u=>u.agent===i.agent);if(o){if(o.dates.push(i.date),iE(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),iE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class jj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yI()?bI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await kj(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return rE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return rE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function iE(t){return Lm(JSON.stringify({version:2,heartbeats:t})).length}function Dj(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function Pj(t){tl(new ao("platform-logger",e=>new GI(e),"PRIVATE")),tl(new ao("heartbeat",e=>new Rj(e),"PRIVATE")),ii(h0,tE,t),ii(h0,tE,"esm2020"),ii("fire-js","")}Pj("");var Mj="firebase",Oj="12.6.0";ii(Mj,Oj,"app");const Lj={PHONE:"phone",TOTP:"totp"},Vj={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Uj={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},zj={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},Bj={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function Fj(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function BT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Hj=Fj,FT=BT,HT=new sh("auth","Firebase",BT()),$j={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_LOGIN_CREDENTIALS:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_PASSWORD:"auth/missing-password",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type",INVALID_HOSTING_LINK_DOMAIN:"auth/invalid-hosting-link-domain"};const Um=new gb("@firebase/auth");function qj(t,...e){Um.logLevel<=Mt.WARN&&Um.warn(`Auth (${cl}): ${t}`,...e)}function hm(t,...e){Um.logLevel<=Mt.ERROR&&Um.error(`Auth (${cl}): ${t}`,...e)}function Fr(t,...e){throw xb(t,...e)}function Cr(t,...e){return xb(t,...e)}function bb(t,e,n){const r={...FT(),[e]:n};return new sh("auth","Firebase",r).create(e,{appName:t.name})}function tr(t){return bb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $c(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Fr(t,"argument-error"),bb(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function xb(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return HT.create(t,...e)}function Me(t,e,...n){if(!t)throw xb(e,...n)}function si(t){const e="INTERNAL ASSERTION FAILED: "+t;throw hm(e),new Error(e)}function ea(t,e){t||si(e)}function Od(){return typeof self<"u"&&self.location?.href||""}function _b(){return aE()==="http:"||aE()==="https:"}function aE(){return typeof self<"u"&&self.location?.protocol||null}function Gj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_b()||mI()||"connection"in navigator)?navigator.onLine:!0}function Yj(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class ih{constructor(e,n){this.shortDelay=e,this.longDelay=n,ea(n>e,"Short delay should be less than long delay!"),this.isMobile=dI()||pI()}get(){return Gj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function wb(t,e){ea(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class $T{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;si("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;si("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;si("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Kj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Wj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Qj=new ih(3e4,6e4);function fn(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function mn(t,e,n,r,i={}){return qT(t,i,async()=>{let o={},u={};r&&(e==="GET"?u=r:o={body:JSON.stringify(r)});const h=Hc({key:t.config.apiKey,...u}).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const m={method:e,headers:f,...o};return fI()||(m.referrerPolicy="no-referrer"),t.emulatorConfig&&ll(t.emulatorConfig.host)&&(m.credentials="include"),$T.fetch()(await GT(t,t.config.apiHost,n,h),m)})}async function qT(t,e,n){t._canInitEmulator=!1;const r={...Kj,...e};try{const i=new Jj(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw vd(t,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const h=o.ok?u.errorMessage:u.error.message,[f,m]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw vd(t,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw vd(t,"email-already-in-use",u);if(f==="USER_DISABLED")throw vd(t,"user-disabled",u);const v=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw bb(t,v,m);Fr(t,v)}}catch(i){if(i instanceof pi)throw i;Fr(t,"network-request-failed",{message:String(i)})}}async function oa(t,e,n,r,i={}){const o=await mn(t,e,n,r,i);return"mfaPendingCredential"in o&&Fr(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function GT(t,e,n,r){const i=`${e}${n}?${r}`,o=t,u=o.config.emulator?wb(t.config,i):`${t.config.apiScheme}://${i}`;return Wj.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(u).toString():u}function Xj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Jj{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Cr(this.auth,"network-request-failed")),Qj.get())})}}function vd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Cr(t,e,r);return i.customData._tokenResponse=n,i}function oE(t){return t!==void 0&&t.getResponse!==void 0}function lE(t){return t!==void 0&&t.enterprise!==void 0}class YT{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Xj(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Zj(t){return(await mn(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function KT(t,e){return mn(t,"GET","/v2/recaptchaConfig",fn(t,e))}async function e9(t,e){return mn(t,"POST","/v1/accounts:delete",e)}async function t9(t,e){return mn(t,"POST","/v1/accounts:update",e)}async function zm(t,e){return mn(t,"POST","/v1/accounts:lookup",e)}function kd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function n9(t,e=!1){return at(t).getIdToken(e)}async function WT(t,e=!1){const n=at(t),r=await n.getIdToken(e),i=wp(r);Me(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,u=o?.sign_in_provider;return{claims:i,token:r,authTime:kd(Ey(i.auth_time)),issuedAtTime:kd(Ey(i.iat)),expirationTime:kd(Ey(i.exp)),signInProvider:u||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Ey(t){return Number(t)*1e3}function wp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return hm("JWT malformed, contained fewer than 3 sections"),null;try{const i=RT(n);return i?JSON.parse(i):(hm("Failed to decode base64 JWT payload"),null)}catch(i){return hm("Caught error parsing JWT payload as JSON",i?.toString()),null}}function cE(t){const e=wp(t);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ta(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof pi&&r9(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function r9({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class s9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class p0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=kd(this.lastLoginAt),this.creationTime=kd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ld(t){const e=t.auth,n=await t.getIdToken(),r=await ta(t,zm(e,{idToken:n}));Me(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const o=i.providerUserInfo?.length?XT(i.providerUserInfo):[],u=i9(t.providerData,o),h=t.isAnonymous,f=!(t.email&&i.passwordHash)&&!u?.length,m=h?f:!1,v={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:u,metadata:new p0(i.createdAt,i.lastLoginAt),isAnonymous:m};Object.assign(t,v)}async function QT(t){const e=at(t);await Ld(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function i9(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function XT(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function a9(t,e){const n=await qT(t,{},async()=>{const r=Hc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,u=await GT(t,i,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:h,body:r};return t.emulatorConfig&&ll(t.emulatorConfig.host)&&(f.credentials="include"),$T.fetch()(u,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function o9(t,e){return mn(t,"POST","/v2/accounts:revokeToken",fn(t,e))}class pc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const n=cE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await a9(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,u=new pc;return r&&(Me(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),i&&(Me(typeof i=="string","internal-error",{appName:e}),u.accessToken=i),o&&(Me(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pc,this.toJSON())}_performRefresh(){return si("not implemented")}}function $a(t,e){Me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class js{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new s9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new p0(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ta(this,this.stsTokenManager.getToken(this.auth,e));return Me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return WT(this,e)}reload(){return QT(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new js({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ld(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vn(this.auth.app))return Promise.reject(tr(this.auth));const e=await this.getIdToken();return await ta(this,e9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,u=n.photoURL??void 0,h=n.tenantId??void 0,f=n._redirectEventId??void 0,m=n.createdAt??void 0,v=n.lastLoginAt??void 0,{uid:b,emailVerified:x,isAnonymous:C,providerData:R,stsTokenManager:A}=n;Me(b&&A,e,"internal-error");const k=pc.fromJSON(this.name,A);Me(typeof b=="string",e,"internal-error"),$a(r,e.name),$a(i,e.name),Me(typeof x=="boolean",e,"internal-error"),Me(typeof C=="boolean",e,"internal-error"),$a(o,e.name),$a(u,e.name),$a(h,e.name),$a(f,e.name),$a(m,e.name),$a(v,e.name);const L=new js({uid:b,auth:e,email:i,emailVerified:x,displayName:r,isAnonymous:C,photoURL:u,phoneNumber:o,tenantId:h,stsTokenManager:k,createdAt:m,lastLoginAt:v});return R&&Array.isArray(R)&&(L.providerData=R.map(U=>({...U}))),f&&(L._redirectEventId=f),L}static async _fromIdTokenResponse(e,n,r=!1){const i=new pc;i.updateFromServerResponse(n);const o=new js({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ld(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Me(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?XT(i.providerUserInfo):[],u=!(i.email&&i.passwordHash)&&!o?.length,h=new pc;h.updateFromIdToken(r);const f=new js({uid:i.localId,auth:e,stsTokenManager:h,isAnonymous:u}),m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new p0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(f,m),f}}const uE=new Map;function qi(t){ea(t instanceof Function,"Expected a class definition");let e=uE.get(t);return e?(ea(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,uE.set(t,e),e)}class JT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}JT.type="NONE";const g0=JT;function fm(t,e,n){return`firebase:${t}:${e}:${n}`}class gc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=fm(this.userKey,i.apiKey,o),this.fullPersistenceKey=fm("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await zm(this.auth,{idToken:e}).catch(()=>{});return n?js._fromGetAccountInfoResponse(this.auth,n,e):null}return js._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new gc(qi(g0),e,r);const i=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=i[0]||qi(g0);const u=fm(r,e.config.apiKey,e.name);let h=null;for(const m of n)try{const v=await m._get(u);if(v){let b;if(typeof v=="string"){const x=await zm(e,{idToken:v}).catch(()=>{});if(!x)break;b=await js._fromGetAccountInfoResponse(e,x,v)}else b=js._fromJSON(e,v);m!==o&&(h=b),o=m;break}}catch{}const f=i.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new gc(o,e,r):(o=f[0],h&&await o._set(u,h.toJSON()),await Promise.all(n.map(async m=>{if(m!==o)try{await m._remove(u)}catch{}})),new gc(o,e,r))}}function dE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ZT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(sC(e))return"Blackberry";if(iC(e))return"Webos";if(eC(e))return"Safari";if((e.includes("chrome/")||tC(e))&&!e.includes("edge/"))return"Chrome";if(rC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function ZT(t=_r()){return/firefox\//i.test(t)}function eC(t=_r()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tC(t=_r()){return/crios\//i.test(t)}function nC(t=_r()){return/iemobile/i.test(t)}function rC(t=_r()){return/android/i.test(t)}function sC(t=_r()){return/blackberry/i.test(t)}function iC(t=_r()){return/webos/i.test(t)}function Eb(t=_r()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function l9(t=_r()){return Eb(t)&&!!window.navigator?.standalone}function c9(){return gI()&&document.documentMode===10}function aC(t=_r()){return Eb(t)||rC(t)||iC(t)||sC(t)||/windows phone/i.test(t)||nC(t)}function oC(t,e=[]){let n;switch(t){case"Browser":n=dE(_r());break;case"Worker":n=`${dE(_r())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${cl}/${r}`}class u9{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((u,h)=>{try{const f=e(o);u(f)}catch(f){h(f)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function d9(t,e={}){return mn(t,"GET","/v2/passwordPolicy",fn(t,e))}const h9=6;class f9{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??h9,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class m9{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hE(this),this.idTokenSubscription=new hE(this),this.beforeStateQueue=new u9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=HT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=qi(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await gc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await zm(this,{idToken:e}),r=await js._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(vn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,u=r?._redirectEventId,h=await this.tryRedirectSignIn(e);(!o||o===u)&&h?.user&&(r=h.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ld(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Yj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vn(this.app))return Promise.reject(tr(this));const n=e?at(e):null;return n&&Me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vn(this.app)?Promise.reject(tr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vn(this.app)?Promise.reject(tr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await d9(this),n=new f9(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new sh("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await o9(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&qi(e)||this._popupRedirectResolver;Me(n,this,"argument-error"),this.redirectPersistenceManager=await gc.create(this,[qi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(h,this,"internal-error"),h.then(()=>{u||o(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,r,i);return()=>{u=!0,f()}}else{const f=e.addObserver(n);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&qj(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Sn(t){return at(t)}class hE{constructor(e){this.auth=e,this.observer=null,this.addObserver=SI(n=>this.observer=n)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ah={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function p9(t){ah=t}function Sb(t){return ah.loadJS(t)}function g9(){return ah.recaptchaV2Script}function v9(){return ah.recaptchaEnterpriseScript}function y9(){return ah.gapiScript}function lC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const b9=500,x9=6e4,Yf=1e12;class _9{constructor(e){this.auth=e,this.counter=Yf,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new S9(e,this.auth.name,n||{})),this.counter++,r}reset(e){const n=e||Yf;this._widgets.get(n)?.delete(),this._widgets.delete(n)}getResponse(e){const n=e||Yf;return this._widgets.get(n)?.getResponse()||""}async execute(e){const n=e||Yf;return this._widgets.get(n)?.execute(),""}}class w9{constructor(){this.enterprise=new E9}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class E9{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class S9{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;Me(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=T9(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},x9)},b9))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function T9(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const C9="recaptcha-enterprise",Nd="NO_RECAPTCHA";class cC{constructor(e){this.type=C9,this.auth=Sn(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(u,h)=>{KT(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new YT(f);return o.tenantId==null?o._agentRecaptchaConfig=m:o._tenantRecaptchaConfigs[o.tenantId]=m,u(m.siteKey)}}).catch(f=>{h(f)})})}function i(o,u,h){const f=window.grecaptcha;lE(f)?f.enterprise.ready(()=>{f.enterprise.execute(o,{action:e}).then(m=>{u(m)}).catch(()=>{u(Nd)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new w9().execute("siteKey",{action:"verify"}):new Promise((o,u)=>{r(this.auth).then(h=>{if(!n&&lE(window.grecaptcha))i(h,o,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=v9();f.length!==0&&(f+=h),Sb(f).then(()=>{i(h,o,u)}).catch(m=>{u(m)})}}).catch(h=>{u(h)})})}}async function od(t,e,n,r=!1,i=!1){const o=new cC(t);let u;if(i)u=Nd;else try{u=await o.verify(n)}catch{u=await o.verify(n,!0)}const h={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const f=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const f=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function to(t,e,n,r,i){if(i==="EMAIL_PASSWORD_PROVIDER")if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await od(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await od(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(o)});else if(i==="PHONE_PROVIDER")if(t._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const o=await od(t,e,n);return r(t,o).catch(async u=>{if(t._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const h=await od(t,e,n,!1,!0);return r(t,h)}return Promise.reject(u)})}else{const o=await od(t,e,n,!1,!0);return r(t,o)}else return Promise.reject(i+" provider is not supported.")}async function uC(t){const e=Sn(t),n=await KT(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new YT(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new cC(e).verify()}function dC(t,e){const n=_p(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(Ji(o,e??{}))return i;Fr(i,"already-initialized")}return n.initialize({options:e})}function k9(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(qi);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function hC(t,e,n){const r=Sn(t);Me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!n?.disableWarnings,o=fC(e),{host:u,port:h}=N9(e),f=h===null?"":`:${h}`,m={url:`${o}//${u}${f}/`},v=Object.freeze({host:u,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Me(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Me(Ji(m,r.config.emulator)&&Ji(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,ll(u)?(mb(`${o}//${u}${f}`),pb("Auth",!0)):i||A9()}function fC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function N9(t){const e=fC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:fE(r.substr(o.length+1))}}else{const[o,u]=r.split(":");return{host:o,port:fE(u)}}}function fE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function A9(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class qc{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return si("not implemented")}_getIdTokenResponse(e){return si("not implemented")}_linkToIdToken(e,n){return si("not implemented")}_getReauthenticationResolver(e){return si("not implemented")}}async function mC(t,e){return mn(t,"POST","/v1/accounts:resetPassword",fn(t,e))}async function R9(t,e){return mn(t,"POST","/v1/accounts:update",e)}async function I9(t,e){return mn(t,"POST","/v1/accounts:signUp",e)}async function j9(t,e){return mn(t,"POST","/v1/accounts:update",fn(t,e))}async function D9(t,e){return oa(t,"POST","/v1/accounts:signInWithPassword",fn(t,e))}async function Ep(t,e){return mn(t,"POST","/v1/accounts:sendOobCode",fn(t,e))}async function P9(t,e){return Ep(t,e)}async function M9(t,e){return Ep(t,e)}async function O9(t,e){return Ep(t,e)}async function L9(t,e){return Ep(t,e)}async function V9(t,e){return oa(t,"POST","/v1/accounts:signInWithEmailLink",fn(t,e))}async function U9(t,e){return oa(t,"POST","/v1/accounts:signInWithEmailLink",fn(t,e))}class Sc extends qc{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Sc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Sc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return to(e,n,"signInWithPassword",D9,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return V9(e,{email:this._email,oobCode:this._password});default:Fr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return to(e,r,"signUpPassword",I9,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return U9(e,{idToken:n,email:this._email,oobCode:this._password});default:Fr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ki(t,e){return oa(t,"POST","/v1/accounts:signInWithIdp",fn(t,e))}const z9="http://localhost";class ui extends qc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ui(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Fr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=n;if(!r||!i)return null;const u=new ui(r,i);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return Ki(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ki(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ki(e,n)}buildRequest(){const e={requestUri:z9,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Hc(n)}return e}}async function mE(t,e){return mn(t,"POST","/v1/accounts:sendVerificationCode",fn(t,e))}async function B9(t,e){return oa(t,"POST","/v1/accounts:signInWithPhoneNumber",fn(t,e))}async function F9(t,e){const n=await oa(t,"POST","/v1/accounts:signInWithPhoneNumber",fn(t,e));if(n.temporaryProof)throw vd(t,"account-exists-with-different-credential",n);return n}const H9={USER_NOT_FOUND:"user-not-found"};async function $9(t,e){const n={...e,operation:"REAUTH"};return oa(t,"POST","/v1/accounts:signInWithPhoneNumber",fn(t,n),H9)}class no extends qc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new no({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new no({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return B9(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return F9(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return $9(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:o}=e;return!r&&!n&&!i&&!o?null:new no({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:o})}}function q9(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function G9(t){const e=pd(gd(t)).link,n=e?pd(gd(e)).deep_link_id:null,r=pd(gd(t)).deep_link_id;return(r?pd(gd(r)).link:null)||r||n||e||t}class Gc{constructor(e){const n=pd(gd(e)),r=n.apiKey??null,i=n.oobCode??null,o=q9(n.mode??null);Me(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=G9(e);try{return new Gc(n)}catch{return null}}}function Y9(t){return Gc.parseLink(t)}class la{constructor(){this.providerId=la.PROVIDER_ID}static credential(e,n){return Sc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Gc.parseLink(n);return Me(r,"argument-error"),Sc._fromEmailAndCode(e,r.code,r.tenantId)}}la.PROVIDER_ID="password";la.EMAIL_PASSWORD_SIGN_IN_METHOD="password";la.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ca{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Yc extends ca{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ad extends Yc{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return Me("providerId"in n&&"signInMethod"in n,"argument-error"),ui._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return Me(e.idToken||e.accessToken,"argument-error"),ui._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return Ad.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Ad.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:o,nonce:u,providerId:h}=e;if(!r&&!i&&!n&&!o||!h)return null;try{return new Ad(h)._credential({idToken:n,accessToken:r,nonce:u,pendingToken:o})}catch{return null}}}class Fi extends Yc{constructor(){super("facebook.com")}static credential(e){return ui._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fi.credential(e.oauthAccessToken)}catch{return null}}}Fi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fi.PROVIDER_ID="facebook.com";class Is extends Yc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ui._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Is.credential(n,r)}catch{return null}}}Is.GOOGLE_SIGN_IN_METHOD="google.com";Is.PROVIDER_ID="google.com";class Hi extends Yc{constructor(){super("github.com")}static credential(e){return ui._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hi.credentialFromTaggedObject(e)}static credentialFromError(e){return Hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hi.credential(e.oauthAccessToken)}catch{return null}}}Hi.GITHUB_SIGN_IN_METHOD="github.com";Hi.PROVIDER_ID="github.com";const K9="http://localhost";class Vd extends qc{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Ki(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ki(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ki(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:o}=n;return!r||!i||!o||r!==i?null:new Vd(r,o)}static _create(e,n){return new Vd(e,n)}buildRequest(){return{requestUri:K9,returnSecureToken:!0,pendingToken:this.pendingToken}}}const W9="saml.";class Bm extends ca{constructor(e){Me(e.startsWith(W9),"argument-error"),super(e)}static credentialFromResult(e){return Bm.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Bm.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Vd.fromJSON(e);return Me(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Vd._create(r,n)}catch{return null}}}class $i extends Yc{constructor(){super("twitter.com")}static credential(e,n){return ui._fromParams({providerId:$i.PROVIDER_ID,signInMethod:$i.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return $i.credentialFromTaggedObject(e)}static credentialFromError(e){return $i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return $i.credential(n,r)}catch{return null}}}$i.TWITTER_SIGN_IN_METHOD="twitter.com";$i.PROVIDER_ID="twitter.com";async function pC(t,e){return oa(t,"POST","/v1/accounts:signUp",fn(t,e))}class gs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await js._fromIdTokenResponse(e,r,i),u=pE(r);return new gs({user:o,providerId:u,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=pE(r);return new gs({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function pE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}async function Q9(t){if(vn(t.app))return Promise.reject(tr(t));const e=Sn(t);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new gs({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await pC(e,{returnSecureToken:!0}),r=await gs._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}class Fm extends pi{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Fm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Fm(e,n,r,i)}}function gC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Fm._fromErrorAndOperation(t,o,e,r):o})}function vC(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}async function X9(t,e){const n=at(t);await Sp(!0,n,e);const{providerUserInfo:r}=await t9(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=vC(r||[]);return n.providerData=n.providerData.filter(o=>i.has(o.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Tb(t,e,n=!1){const r=await ta(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return gs._forOperation(t,"link",r)}async function Sp(t,e,n){await Ld(e);const r=vC(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";Me(r.has(n)===t,e.auth,i)}async function yC(t,e,n=!1){const{auth:r}=t;if(vn(r.app))return Promise.reject(tr(r));const i="reauthenticate";try{const o=await ta(t,gC(r,i,e,t),n);Me(o.idToken,r,"internal-error");const u=wp(o.idToken);Me(u,r,"internal-error");const{sub:h}=u;return Me(t.uid===h,r,"user-mismatch"),gs._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Fr(r,"user-mismatch"),o}}async function bC(t,e,n=!1){if(vn(t.app))return Promise.reject(tr(t));const r="signIn",i=await gC(t,r,e),o=await gs._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function oh(t,e){return bC(Sn(t),e)}async function xC(t,e){const n=at(t);return await Sp(!1,n,e.providerId),Tb(n,e)}async function Cb(t,e){return yC(at(t),e)}async function J9(t,e){return oa(t,"POST","/v1/accounts:signInWithCustomToken",fn(t,e))}async function _C(t,e){if(vn(t.app))return Promise.reject(tr(t));const n=Sn(t),r=await J9(n,{token:e,returnSecureToken:!0}),i=await gs._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class lh{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?kb._fromServerResponse(e,n):"totpInfo"in n?Nb._fromServerResponse(e,n):Fr(e,"internal-error")}}class kb extends lh{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new kb(n)}}class Nb extends lh{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new Nb(n)}}function Tp(t,e,n){Me(n.url?.length>0,t,"invalid-continue-uri"),Me(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),Me(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Me(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(Me(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}async function Ab(t){const e=Sn(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Rb(t,e,n){const r=Sn(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&Tp(r,i,n),await to(r,i,"getOobCode",M9,"EMAIL_PASSWORD_PROVIDER")}async function Z9(t,e,n){await mC(at(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Ab(t),r})}async function e8(t,e){await j9(at(t),{oobCode:e})}async function wC(t,e){const n=at(t),r=await mC(n,{oobCode:e}),i=r.requestType;switch(Me(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Me(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Me(r.mfaInfo,n,"internal-error");default:Me(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=lh._fromServerResponse(Sn(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:o},operation:i}}async function t8(t,e){const{data:n}=await wC(at(t),e);return n.email}async function EC(t,e,n){if(vn(t.app))return Promise.reject(tr(t));const r=Sn(t),u=await to(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",pC,"EMAIL_PASSWORD_PROVIDER").catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&Ab(t),f}),h=await gs._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(h.user),h}function SC(t,e,n){return vn(t.app)?Promise.reject(tr(t)):oh(at(t),la.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Ab(t),r})}async function n8(t,e,n){const r=Sn(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function o(u,h){Me(h.handleCodeInApp,r,"argument-error"),h&&Tp(r,u,h)}o(i,n),await to(r,i,"getOobCode",O9,"EMAIL_PASSWORD_PROVIDER")}function r8(t,e){return Gc.parseLink(e)?.operation==="EMAIL_SIGNIN"}async function s8(t,e,n){if(vn(t.app))return Promise.reject(tr(t));const r=at(t),i=la.credentialWithLink(e,n||Od());return Me(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),oh(r,i)}async function i8(t,e){return mn(t,"POST","/v1/accounts:createAuthUri",fn(t,e))}async function a8(t,e){const n=_b()?Od():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await i8(at(t),r);return i||[]}async function v0(t,e){const n=at(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Tp(n.auth,i,e);const{email:o}=await P9(n.auth,i);o!==t.email&&await t.reload()}async function o8(t,e,n){const r=at(t),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Tp(r.auth,o,n);const{email:u}=await L9(r.auth,o);u!==t.email&&await t.reload()}async function l8(t,e){return mn(t,"POST","/v1/accounts:update",e)}async function TC(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=at(t),o={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},u=await ta(r,l8(r.auth,o));r.displayName=u.displayName||null,r.photoURL=u.photoUrl||null;const h=r.providerData.find(({providerId:f})=>f==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(u)}function c8(t,e){const n=at(t);return vn(n.auth.app)?Promise.reject(tr(n.auth)):kC(n,e,null)}function CC(t,e){return kC(at(t),null,e)}async function kC(t,e,n){const{auth:r}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(o.email=e),n&&(o.password=n);const u=await ta(t,R9(r,o));await t._updateTokensIfNecessary(u,!0)}function u8(t){if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},r=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&t?.idToken){const i=wp(t.idToken)?.firebase?.sign_in_provider;if(i){const o=i!=="anonymous"&&i!=="custom"?i:null;return new vc(r,o)}}if(!e)return null;switch(e){case"facebook.com":return new d8(r,n);case"github.com":return new h8(r,n);case"google.com":return new f8(r,n);case"twitter.com":return new m8(r,n,t.screenName||null);case"custom":case"anonymous":return new vc(r,null);default:return new vc(r,e,n)}}class vc{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class NC extends vc{constructor(e,n,r,i){super(e,n,r),this.username=i}}class d8 extends vc{constructor(e,n){super(e,"facebook.com",n)}}class h8 extends NC{constructor(e,n){super(e,"github.com",n,typeof n?.login=="string"?n?.login:null)}}class f8 extends vc{constructor(e,n){super(e,"google.com",n)}}class m8 extends NC{constructor(e,n,r){super(e,"twitter.com",n,r)}}function p8(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:u8(n)}function g8(t,e){return at(t).setPersistence(e)}function v8(t){return uC(t)}async function y8(t,e){return Sn(t).validatePassword(e)}function AC(t,e,n,r){return at(t).onIdTokenChanged(e,n,r)}function RC(t,e,n){return at(t).beforeAuthStateChanged(e,n)}function IC(t,e,n,r){return at(t).onAuthStateChanged(e,n,r)}function b8(t){at(t).useDeviceLanguage()}function x8(t,e){return at(t).updateCurrentUser(e)}function jC(t){return at(t).signOut()}function _8(t,e){return Sn(t).revokeAccessToken(e)}async function w8(t){return at(t).delete()}class Yo{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new Yo("enroll",e,n)}static _fromMfaPendingCredential(e){return new Yo("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){if(e?.multiFactorSession){if(e.multiFactorSession?.pendingCredential)return Yo._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(e.multiFactorSession?.idToken)return Yo._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Ib{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=Sn(e),i=n.customData._serverResponse,o=(i.mfaInfo||[]).map(h=>lh._fromServerResponse(r,h));Me(i.mfaPendingCredential,r,"internal-error");const u=Yo._fromMfaPendingCredential(i.mfaPendingCredential);return new Ib(u,o,async h=>{const f=await h._process(r,u);delete i.mfaInfo,delete i.mfaPendingCredential;const m={...i,idToken:f.idToken,refreshToken:f.refreshToken};switch(n.operationType){case"signIn":const v=await gs._fromIdTokenResponse(r,n.operationType,m);return await r._updateCurrentUser(v.user),v;case"reauthenticate":return Me(n.user,r,"internal-error"),gs._forOperation(n.user,n.operationType,m);default:Fr(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function E8(t,e){const n=at(t),r=e;return Me(e.customData.operationType,n,"argument-error"),Me(r.customData._serverResponse?.mfaPendingCredential,n,"argument-error"),Ib._fromError(n,r)}function gE(t,e){return mn(t,"POST","/v2/accounts/mfaEnrollment:start",fn(t,e))}function S8(t,e){return mn(t,"POST","/v2/accounts/mfaEnrollment:finalize",fn(t,e))}function T8(t,e){return mn(t,"POST","/v2/accounts/mfaEnrollment:start",fn(t,e))}function C8(t,e){return mn(t,"POST","/v2/accounts/mfaEnrollment:finalize",fn(t,e))}function k8(t,e){return mn(t,"POST","/v2/accounts/mfaEnrollment:withdraw",fn(t,e))}class jb{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>lh._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new jb(e)}async getSession(){return Yo._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),o=await ta(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(o),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await ta(this.user,k8(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:o})=>o!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const Sy=new WeakMap;function N8(t){const e=at(t);return Sy.has(e)||Sy.set(e,jb._fromUser(e)),Sy.get(e)}const Hm="__sak";class DC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Hm,"1"),this.storage.removeItem(Hm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const A8=1e3,R8=10;class PC extends DC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=aC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,h,f)=>{this.notifyListeners(u,f)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const u=this.storage.getItem(r);!n&&this.localCache[r]===u||this.notifyListeners(r,u)},o=this.storage.getItem(r);c9()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,R8):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},A8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}PC.type="LOCAL";const MC=PC;const I8=1e3;function Ty(t){const e=t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),n=RegExp(`${e}=([^;]+)`);return document.cookie.match(n)?.[1]??null}function Cy(t){return`${window.location.protocol==="http:"?"__dev_":"__HOST-"}FIREBASE_${t.split(":")[3]}`}class OC{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(typeof window===void 0)return e;const n=new URL(`${window.location.origin}/__cookies__`);return n.searchParams.set("finalTarget",e),n}async _isAvailable(){return typeof isSecureContext=="boolean"&&!isSecureContext||typeof navigator>"u"||typeof document>"u"?!1:navigator.cookieEnabled??!0}async _set(e,n){}async _get(e){if(!this._isAvailable())return null;const n=Cy(e);return window.cookieStore?(await window.cookieStore.get(n))?.value:Ty(n)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;const r=Cy(e);document.cookie=`${r}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,n){if(!this._isAvailable())return;const r=Cy(e);if(window.cookieStore){const h=(m=>{const v=m.changed.find(x=>x.name===r);v&&n(v.value),m.deleted.find(x=>x.name===r)&&n(null)}),f=()=>window.cookieStore.removeEventListener("change",h);return this.listenerUnsubscribes.set(n,f),window.cookieStore.addEventListener("change",h)}let i=Ty(r);const o=setInterval(()=>{const h=Ty(r);h!==i&&(n(h),i=h)},I8),u=()=>clearInterval(o);this.listenerUnsubscribes.set(n,u)}_removeListener(e,n){const r=this.listenerUnsubscribes.get(n);r&&(r(),this.listenerUnsubscribes.delete(n))}}OC.type="COOKIE";const j8=OC;class LC extends DC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}LC.type="SESSION";const Db=LC;function D8(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Cp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Cp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,u=this.handlersMap[i];if(!u?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const h=Array.from(u).map(async m=>m(n.origin,o)),f=await D8(h);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Cp.receivers=[];function kp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class P8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,u;return new Promise((h,f)=>{const m=kp("",20);i.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:i,onMessage(b){const x=b;if(x.data.eventId===m)switch(x.data.status){case"ack":clearTimeout(v),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(x.data.response);break;default:clearTimeout(v),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(u),i.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[i.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function Un(){return window}function M8(t){Un().location.href=t}function Pb(){return typeof Un().WorkerGlobalScope<"u"&&typeof Un().importScripts=="function"}async function O8(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function L8(){return navigator?.serviceWorker?.controller||null}function V8(){return Pb()?self:null}const VC="firebaseLocalStorageDb",U8=1,$m="firebaseLocalStorage",UC="fbase_key";class ch{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Np(t,e){return t.transaction([$m],e?"readwrite":"readonly").objectStore($m)}function z8(){const t=indexedDB.deleteDatabase(VC);return new ch(t).toPromise()}function y0(){const t=indexedDB.open(VC,U8);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore($m,{keyPath:UC})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains($m)?e(r):(r.close(),await z8(),e(await y0()))})})}async function vE(t,e,n){const r=Np(t,!0).put({[UC]:e,value:n});return new ch(r).toPromise()}async function B8(t,e){const n=Np(t,!1).get(e),r=await new ch(n).toPromise();return r===void 0?null:r.value}function yE(t,e){const n=Np(t,!0).delete(e);return new ch(n).toPromise()}const F8=800,H8=3;class zC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await y0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>H8)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Pb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Cp._getInstance(V8()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await O8(),!this.activeServiceWorker)return;this.sender=new P8(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||L8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await y0();return await vE(e,Hm,"1"),await yE(e,Hm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>vE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>B8(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>yE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Np(i,!1).getAll();return new ch(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),F8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zC.type="LOCAL";const BC=zC;function bE(t,e){return mn(t,"POST","/v2/accounts/mfaSignIn:start",fn(t,e))}function $8(t,e){return mn(t,"POST","/v2/accounts/mfaSignIn:finalize",fn(t,e))}function q8(t,e){return mn(t,"POST","/v2/accounts/mfaSignIn:finalize",fn(t,e))}const ky=lC("rcb"),G8=new ih(3e4,6e4);class Y8{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Un().grecaptcha?.render}load(e,n=""){return Me(K8(n),e,"argument-error"),this.shouldResolveImmediately(n)&&oE(Un().grecaptcha)?Promise.resolve(Un().grecaptcha):new Promise((r,i)=>{const o=Un().setTimeout(()=>{i(Cr(e,"network-request-failed"))},G8.get());Un()[ky]=()=>{Un().clearTimeout(o),delete Un()[ky];const h=Un().grecaptcha;if(!h||!oE(h)){i(Cr(e,"internal-error"));return}const f=h.render;h.render=(m,v)=>{const b=f(m,v);return this.counter++,b},this.hostLanguage=n,r(h)};const u=`${g9()}?${Hc({onload:ky,render:"explicit",hl:n})}`;Sb(u).catch(()=>{clearTimeout(o),i(Cr(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!Un().grecaptcha?.render&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function K8(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class W8{async load(e){return new _9(e)}clearedOneInstance(){}}const Rd="recaptcha",Q8={theme:"light",type:"image"};class X8{constructor(e,n,r={...Q8}){this.parameters=r,this.type=Rd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Sn(e),this.isInvisible=this.parameters.size==="invisible",Me(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;Me(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new W8:new Y8,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const o=u=>{u&&(this.tokenChangeListeners.delete(o),i(u))};this.tokenChangeListeners.add(o),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){Me(!this.parameters.sitekey,this.auth,"argument-error"),Me(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Me(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Un()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){Me(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Me(_b()&&!Pb(),this.auth,"internal-error"),await J8(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await Zj(this.auth);Me(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Me(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function J8(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}class Mb{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=no._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function Z8(t,e,n){if(vn(t.app))return Promise.reject(tr(t));const r=Sn(t),i=await Ap(r,e,at(n));return new Mb(i,o=>oh(r,o))}async function eD(t,e,n){const r=at(t);await Sp(!1,r,"phone");const i=await Ap(r.auth,e,at(n));return new Mb(i,o=>xC(r,o))}async function tD(t,e,n){const r=at(t);if(vn(r.auth.app))return Promise.reject(tr(r.auth));const i=await Ap(r.auth,e,at(n));return new Mb(i,o=>Cb(r,o))}async function Ap(t,e,n){if(!t._getRecaptchaConfig())try{await uC(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(typeof e=="string"?r={phoneNumber:e}:r=e,"session"in r){const i=r.session;if("phoneNumber"in r){Me(i.type==="enroll",t,"internal-error");const o={idToken:i.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await to(t,o,"mfaSmsEnrollment",async(m,v)=>{if(v.phoneEnrollmentInfo.captchaResponse===Nd){Me(n?.type===Rd,m,"argument-error");const b=await Ny(m,v,n);return gE(m,b)}return gE(m,v)},"PHONE_PROVIDER").catch(m=>Promise.reject(m))).phoneSessionInfo.sessionInfo}else{Me(i.type==="signin",t,"internal-error");const o=r.multiFactorHint?.uid||r.multiFactorUid;Me(o,t,"missing-multi-factor-info");const u={mfaPendingCredential:i.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await to(t,u,"mfaSmsSignIn",async(v,b)=>{if(b.phoneSignInInfo.captchaResponse===Nd){Me(n?.type===Rd,v,"argument-error");const x=await Ny(v,b,n);return bE(v,x)}return bE(v,b)},"PHONE_PROVIDER").catch(v=>Promise.reject(v))).phoneResponseInfo.sessionInfo}}else{const i={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await to(t,i,"sendVerificationCode",async(f,m)=>{if(m.captchaResponse===Nd){Me(n?.type===Rd,f,"argument-error");const v=await Ny(f,m,n);return mE(f,v)}return mE(f,m)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).sessionInfo}}finally{n?._reset()}}async function nD(t,e){const n=at(t);if(vn(n.auth.app))return Promise.reject(tr(n.auth));await Tb(n,e)}async function Ny(t,e,n){Me(n.type===Rd,t,"argument-error");const r=await n.verify();Me(typeof r=="string",t,"argument-error");const i={...e};if("phoneEnrollmentInfo"in i){const o=i.phoneEnrollmentInfo.phoneNumber,u=i.phoneEnrollmentInfo.captchaResponse,h=i.phoneEnrollmentInfo.clientType,f=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r,captchaResponse:u,clientType:h,recaptchaVersion:f}}),i}else if("phoneSignInInfo"in i){const o=i.phoneSignInInfo.captchaResponse,u=i.phoneSignInInfo.clientType,h=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:o,clientType:u,recaptchaVersion:h}}),i}else return Object.assign(i,{recaptchaToken:r}),i}class Qo{constructor(e){this.providerId=Qo.PROVIDER_ID,this.auth=Sn(e)}verifyPhoneNumber(e,n){return Ap(this.auth,e,at(n))}static credential(e,n){return no._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Qo.credentialFromTaggedObject(n)}static credentialFromError(e){return Qo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?no._fromTokenResponse(n,r):null}}Qo.PROVIDER_ID="phone";Qo.PHONE_SIGN_IN_METHOD="phone";function ul(t,e){return e?qi(e):(Me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Ob extends qc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ki(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ki(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ki(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function rD(t){return bC(t.auth,new Ob(t),t.bypassAuthState)}function sD(t){const{auth:e,user:n}=t;return Me(n,e,"internal-error"),yC(n,new Ob(t),t.bypassAuthState)}async function iD(t){const{auth:e,user:n}=t;return Me(n,e,"internal-error"),Tb(n,new Ob(t),t.bypassAuthState)}class FC{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:u,type:h}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rD;case"linkViaPopup":case"linkViaRedirect":return iD;case"reauthViaPopup":case"reauthViaRedirect":return sD;default:Fr(this.auth,"internal-error")}}resolve(e){ea(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ea(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const aD=new ih(2e3,1e4);async function HC(t,e,n){if(vn(t.app))return Promise.reject(Cr(t,"operation-not-supported-in-this-environment"));const r=Sn(t);$c(t,e,ca);const i=ul(r,n);return new Gi(r,"signInViaPopup",e,i).executeNotNull()}async function oD(t,e,n){const r=at(t);if(vn(r.auth.app))return Promise.reject(Cr(r.auth,"operation-not-supported-in-this-environment"));$c(r.auth,e,ca);const i=ul(r.auth,n);return new Gi(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function lD(t,e,n){const r=at(t);$c(r.auth,e,ca);const i=ul(r.auth,n);return new Gi(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Gi extends FC{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Gi.currentPopupAction&&Gi.currentPopupAction.cancel(),Gi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){ea(this.filter.length===1,"Popup operations only handle one event");const e=kp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Cr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Cr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gi.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Cr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,aD.get())};e()}}Gi.currentPopupAction=null;const cD="pendingRedirect",mm=new Map;class uD extends FC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=mm.get(this.auth._key());if(!e){try{const r=await dD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}mm.set(this.auth._key(),e)}return this.bypassAuthState||mm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function dD(t,e){const n=qC(e),r=$C(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function Lb(t,e){return $C(t)._set(qC(e),"true")}function hD(t,e){mm.set(t._key(),e)}function $C(t){return qi(t._redirectPersistence)}function qC(t){return fm(cD,t.config.apiKey,t.name)}function fD(t,e,n){return mD(t,e,n)}async function mD(t,e,n){if(vn(t.app))return Promise.reject(tr(t));const r=Sn(t);$c(t,e,ca),await r._initializationPromise;const i=ul(r,n);return await Lb(i,r),i._openRedirect(r,e,"signInViaRedirect")}function pD(t,e,n){return gD(t,e,n)}async function gD(t,e,n){const r=at(t);if($c(r.auth,e,ca),vn(r.auth.app))return Promise.reject(tr(r.auth));await r.auth._initializationPromise;const i=ul(r.auth,n);await Lb(i,r.auth);const o=await YC(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",o)}function vD(t,e,n){return yD(t,e,n)}async function yD(t,e,n){const r=at(t);$c(r.auth,e,ca),await r.auth._initializationPromise;const i=ul(r.auth,n);await Sp(!1,r,e.providerId),await Lb(i,r.auth);const o=await YC(r);return i._openRedirect(r.auth,e,"linkViaRedirect",o)}async function bD(t,e){return await Sn(t)._initializationPromise,GC(t,e,!1)}async function GC(t,e,n=!1){if(vn(t.app))return Promise.reject(tr(t));const r=Sn(t),i=ul(r,e),u=await new uD(r,i,n).execute();return u&&!n&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}async function YC(t){const e=kp(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}const xD=600*1e3;class _D{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!KC(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Cr(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xD&&this.cachedEventUids.clear(),this.cachedEventUids.has(xE(e))}saveEventToCache(e){this.cachedEventUids.add(xE(e)),this.lastProcessedEventTime=Date.now()}}function xE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function KC({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function wD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return KC(t);default:return!1}}async function ED(t,e={}){return mn(t,"GET","/v1/projects",e)}const SD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,TD=/^https?/;async function CD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ED(t);for(const n of e)try{if(kD(n))return}catch{}Fr(t,"unauthorized-domain")}function kD(t){const e=Od(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===r}if(!TD.test(n))return!1;if(SD.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const ND=new ih(3e4,6e4);function _E(){const t=Un().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function AD(t){return new Promise((e,n)=>{function r(){_E(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_E(),n(Cr(t,"network-request-failed"))},timeout:ND.get()})}if(Un().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Un().gapi?.load)r();else{const i=lC("iframefcb");return Un()[i]=()=>{gapi.load?r():n(Cr(t,"network-request-failed"))},Sb(`${y9()}?onload=${i}`).catch(o=>n(o))}}).catch(e=>{throw pm=null,e})}let pm=null;function RD(t){return pm=pm||AD(t),pm}const ID=new ih(5e3,15e3),jD="__/auth/iframe",DD="emulator/auth/iframe",PD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},MD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function OD(t){const e=t.config;Me(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?wb(e,DD):`https://${t.config.authDomain}/${jD}`,r={apiKey:e.apiKey,appName:t.name,v:cl},i=MD.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Hc(r).slice(1)}`}async function LD(t){const e=await RD(t),n=Un().gapi;return Me(n,t,"internal-error"),e.open({where:document.body,url:OD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:PD,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const u=Cr(t,"network-request-failed"),h=Un().setTimeout(()=>{o(u)},ID.get());function f(){Un().clearTimeout(h),i(r)}r.ping(f).then(f,()=>{o(u)})}))}const VD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},UD=500,zD=600,BD="_blank",FD="http://localhost";class wE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function HD(t,e,n,r=UD,i=zD){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const f={...VD,width:r.toString(),height:i.toString(),top:o,left:u},m=_r().toLowerCase();n&&(h=tC(m)?BD:n),ZT(m)&&(e=e||FD,f.scrollbars="yes");const v=Object.entries(f).reduce((x,[C,R])=>`${x}${C}=${R},`,"");if(l9(m)&&h!=="_self")return $D(e||"",h),new wE(null);const b=window.open(e||"",h,v);Me(b,t,"popup-blocked");try{b.focus()}catch{}return new wE(b)}function $D(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const qD="__/auth/handler",GD="emulator/auth/handler",YD=encodeURIComponent("fac");async function EE(t,e,n,r,i,o){Me(t.config.authDomain,t,"auth-domain-config-required"),Me(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:cl,eventId:i};if(e instanceof ca){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",EI(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,b]of Object.entries({}))u[v]=b}if(e instanceof Yc){const v=e.getScopes().filter(b=>b!=="");v.length>0&&(u.scopes=v.join(","))}t.tenantId&&(u.tid=t.tenantId);const h=u;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const f=await t._getAppCheckToken(),m=f?`#${YD}=${encodeURIComponent(f)}`:"";return`${KD(t)}?${Hc(h).slice(1)}${m}`}function KD({config:t}){return t.emulator?wb(t,GD):`https://${t.authDomain}/${qD}`}const Ay="webStorageSupport";class WD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Db,this._completeRedirectFn=GC,this._overrideRedirectResult=hD}async _openPopup(e,n,r,i){ea(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await EE(e,n,r,Od(),i);return HD(e,o,kp())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await EE(e,n,r,Od(),i);return M8(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(ea(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await LD(e),r=new _D(e);return n.register("authEvent",i=>(Me(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ay,{type:Ay},i=>{const o=i?.[0]?.[Ay];o!==void 0&&n(!!o),Fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=CD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return aC()||eC()||Eb()}}const WC=WD;class QC{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return si("unexpected MultiFactorSessionType")}}}class Vb extends QC{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Vb(e)}_finalizeEnroll(e,n,r){return S8(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return $8(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class XC{constructor(){}static assertion(e){return Vb._fromCredential(e)}}XC.FACTOR_ID="phone";class JC{static assertionForEnrollment(e,n){return Ud._fromSecret(e,n)}static assertionForSignIn(e,n){return Ud._fromEnrollmentId(e,n)}static async generateSecret(e){const n=e;Me(typeof n.user?.auth<"u","internal-error");const r=await T8(n.user.auth,{idToken:n.credential,totpEnrollmentInfo:{}});return Rp._fromStartTotpMfaEnrollmentResponse(r,n.user.auth)}}JC.FACTOR_ID="totp";class Ud extends QC{constructor(e,n,r){super("totp"),this.otp=e,this.enrollmentId=n,this.secret=r}static _fromSecret(e,n){return new Ud(n,void 0,e)}static _fromEnrollmentId(e,n){return new Ud(n,e)}async _finalizeEnroll(e,n,r){return Me(typeof this.secret<"u",e,"argument-error"),C8(e,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,n){Me(this.enrollmentId!==void 0&&this.otp!==void 0,e,"argument-error");const r={verificationCode:this.otp};return q8(e,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r})}}class Rp{constructor(e,n,r,i,o,u,h){this.sessionInfo=u,this.auth=h,this.secretKey=e,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=o}static _fromStartTotpMfaEnrollmentResponse(e,n){return new Rp(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,n){let r=!1;return(Kf(e)||Kf(n))&&(r=!0),r&&(Kf(e)&&(e=this.auth.currentUser?.email||"unknownuser"),Kf(n)&&(n=this.auth.name)),`otpauth://totp/${n}:${e}?secret=${this.secretKey}&issuer=${n}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function Kf(t){return typeof t>"u"||t?.length===0}var SE="@firebase/auth",TE="1.11.1";class QD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function XD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function JD(t){tl(new ao("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=r.options;Me(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oC(t)},m=new m9(r,i,o,f);return k9(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),tl(new ao("auth-internal",e=>{const n=Sn(e.getProvider("auth").getImmediate());return(r=>new QD(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ii(SE,TE,XD(t)),ii(SE,TE,"esm2020")}const ZD=300,eP=PT("authIdTokenMaxAge")||ZD;let CE=null;const tP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>eP)return;const i=n?.token;CE!==i&&(CE=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function ZC(t=yb()){const e=_p(t,"auth");if(e.isInitialized())return e.getImmediate();const n=dC(t,{popupRedirectResolver:WC,persistence:[BC,MC,Db]}),r=PT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const u=tP(o.toString());RC(n,u,()=>u(n.currentUser)),AC(n,h=>u(h))}}const i=IT("auth");return i&&hC(n,`http://${i}`),n}function nP(){return document.getElementsByTagName("head")?.[0]??document}p9({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=Cr("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",nP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});JD("Browser");const rP=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeOperation:Bj,ActionCodeURL:Gc,AuthCredential:qc,AuthErrorCodes:$j,EmailAuthCredential:Sc,EmailAuthProvider:la,FacebookAuthProvider:Fi,FactorId:Lj,GithubAuthProvider:Hi,GoogleAuthProvider:Is,OAuthCredential:ui,OAuthProvider:Ad,OperationType:zj,PhoneAuthCredential:no,PhoneAuthProvider:Qo,PhoneMultiFactorGenerator:XC,ProviderId:Vj,RecaptchaVerifier:X8,SAMLAuthProvider:Bm,SignInMethod:Uj,TotpMultiFactorGenerator:JC,TotpSecret:Rp,TwitterAuthProvider:$i,applyActionCode:e8,beforeAuthStateChanged:RC,browserCookiePersistence:j8,browserLocalPersistence:MC,browserPopupRedirectResolver:WC,browserSessionPersistence:Db,checkActionCode:wC,confirmPasswordReset:Z9,connectAuthEmulator:hC,createUserWithEmailAndPassword:EC,debugErrorMap:Hj,deleteUser:w8,fetchSignInMethodsForEmail:a8,getAdditionalUserInfo:p8,getAuth:ZC,getIdToken:n9,getIdTokenResult:WT,getMultiFactorResolver:E8,getRedirectResult:bD,inMemoryPersistence:g0,indexedDBLocalPersistence:BC,initializeAuth:dC,initializeRecaptchaConfig:v8,isSignInWithEmailLink:r8,linkWithCredential:xC,linkWithPhoneNumber:eD,linkWithPopup:lD,linkWithRedirect:vD,multiFactor:N8,onAuthStateChanged:IC,onIdTokenChanged:AC,parseActionCodeURL:Y9,prodErrorMap:FT,reauthenticateWithCredential:Cb,reauthenticateWithPhoneNumber:tD,reauthenticateWithPopup:oD,reauthenticateWithRedirect:pD,reload:QT,revokeAccessToken:_8,sendEmailVerification:v0,sendPasswordResetEmail:Rb,sendSignInLinkToEmail:n8,setPersistence:g8,signInAnonymously:Q9,signInWithCredential:oh,signInWithCustomToken:_C,signInWithEmailAndPassword:SC,signInWithEmailLink:s8,signInWithPhoneNumber:Z8,signInWithPopup:HC,signInWithRedirect:fD,signOut:jC,unlink:X9,updateCurrentUser:x8,updateEmail:c8,updatePassword:CC,updatePhoneNumber:nD,updateProfile:TC,useDeviceLanguage:b8,validatePassword:y8,verifyBeforeUpdateEmail:o8,verifyPasswordResetCode:t8},Symbol.toStringTag,{value:"Module"}));var kE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ro,ek;(function(){var t;function e(E,S){function j(){}j.prototype=S.prototype,E.F=S.prototype,E.prototype=new j,E.prototype.constructor=E,E.D=function(D,V,B){for(var P=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)P[ne-2]=arguments[ne];return S.prototype[V].apply(D,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,S,j){j||(j=0);const D=Array(16);if(typeof S=="string")for(var V=0;V<16;++V)D[V]=S.charCodeAt(j++)|S.charCodeAt(j++)<<8|S.charCodeAt(j++)<<16|S.charCodeAt(j++)<<24;else for(V=0;V<16;++V)D[V]=S[j++]|S[j++]<<8|S[j++]<<16|S[j++]<<24;S=E.g[0],j=E.g[1],V=E.g[2];let B=E.g[3],P;P=S+(B^j&(V^B))+D[0]+3614090360&4294967295,S=j+(P<<7&4294967295|P>>>25),P=B+(V^S&(j^V))+D[1]+3905402710&4294967295,B=S+(P<<12&4294967295|P>>>20),P=V+(j^B&(S^j))+D[2]+606105819&4294967295,V=B+(P<<17&4294967295|P>>>15),P=j+(S^V&(B^S))+D[3]+3250441966&4294967295,j=V+(P<<22&4294967295|P>>>10),P=S+(B^j&(V^B))+D[4]+4118548399&4294967295,S=j+(P<<7&4294967295|P>>>25),P=B+(V^S&(j^V))+D[5]+1200080426&4294967295,B=S+(P<<12&4294967295|P>>>20),P=V+(j^B&(S^j))+D[6]+2821735955&4294967295,V=B+(P<<17&4294967295|P>>>15),P=j+(S^V&(B^S))+D[7]+4249261313&4294967295,j=V+(P<<22&4294967295|P>>>10),P=S+(B^j&(V^B))+D[8]+1770035416&4294967295,S=j+(P<<7&4294967295|P>>>25),P=B+(V^S&(j^V))+D[9]+2336552879&4294967295,B=S+(P<<12&4294967295|P>>>20),P=V+(j^B&(S^j))+D[10]+4294925233&4294967295,V=B+(P<<17&4294967295|P>>>15),P=j+(S^V&(B^S))+D[11]+2304563134&4294967295,j=V+(P<<22&4294967295|P>>>10),P=S+(B^j&(V^B))+D[12]+1804603682&4294967295,S=j+(P<<7&4294967295|P>>>25),P=B+(V^S&(j^V))+D[13]+4254626195&4294967295,B=S+(P<<12&4294967295|P>>>20),P=V+(j^B&(S^j))+D[14]+2792965006&4294967295,V=B+(P<<17&4294967295|P>>>15),P=j+(S^V&(B^S))+D[15]+1236535329&4294967295,j=V+(P<<22&4294967295|P>>>10),P=S+(V^B&(j^V))+D[1]+4129170786&4294967295,S=j+(P<<5&4294967295|P>>>27),P=B+(j^V&(S^j))+D[6]+3225465664&4294967295,B=S+(P<<9&4294967295|P>>>23),P=V+(S^j&(B^S))+D[11]+643717713&4294967295,V=B+(P<<14&4294967295|P>>>18),P=j+(B^S&(V^B))+D[0]+3921069994&4294967295,j=V+(P<<20&4294967295|P>>>12),P=S+(V^B&(j^V))+D[5]+3593408605&4294967295,S=j+(P<<5&4294967295|P>>>27),P=B+(j^V&(S^j))+D[10]+38016083&4294967295,B=S+(P<<9&4294967295|P>>>23),P=V+(S^j&(B^S))+D[15]+3634488961&4294967295,V=B+(P<<14&4294967295|P>>>18),P=j+(B^S&(V^B))+D[4]+3889429448&4294967295,j=V+(P<<20&4294967295|P>>>12),P=S+(V^B&(j^V))+D[9]+568446438&4294967295,S=j+(P<<5&4294967295|P>>>27),P=B+(j^V&(S^j))+D[14]+3275163606&4294967295,B=S+(P<<9&4294967295|P>>>23),P=V+(S^j&(B^S))+D[3]+4107603335&4294967295,V=B+(P<<14&4294967295|P>>>18),P=j+(B^S&(V^B))+D[8]+1163531501&4294967295,j=V+(P<<20&4294967295|P>>>12),P=S+(V^B&(j^V))+D[13]+2850285829&4294967295,S=j+(P<<5&4294967295|P>>>27),P=B+(j^V&(S^j))+D[2]+4243563512&4294967295,B=S+(P<<9&4294967295|P>>>23),P=V+(S^j&(B^S))+D[7]+1735328473&4294967295,V=B+(P<<14&4294967295|P>>>18),P=j+(B^S&(V^B))+D[12]+2368359562&4294967295,j=V+(P<<20&4294967295|P>>>12),P=S+(j^V^B)+D[5]+4294588738&4294967295,S=j+(P<<4&4294967295|P>>>28),P=B+(S^j^V)+D[8]+2272392833&4294967295,B=S+(P<<11&4294967295|P>>>21),P=V+(B^S^j)+D[11]+1839030562&4294967295,V=B+(P<<16&4294967295|P>>>16),P=j+(V^B^S)+D[14]+4259657740&4294967295,j=V+(P<<23&4294967295|P>>>9),P=S+(j^V^B)+D[1]+2763975236&4294967295,S=j+(P<<4&4294967295|P>>>28),P=B+(S^j^V)+D[4]+1272893353&4294967295,B=S+(P<<11&4294967295|P>>>21),P=V+(B^S^j)+D[7]+4139469664&4294967295,V=B+(P<<16&4294967295|P>>>16),P=j+(V^B^S)+D[10]+3200236656&4294967295,j=V+(P<<23&4294967295|P>>>9),P=S+(j^V^B)+D[13]+681279174&4294967295,S=j+(P<<4&4294967295|P>>>28),P=B+(S^j^V)+D[0]+3936430074&4294967295,B=S+(P<<11&4294967295|P>>>21),P=V+(B^S^j)+D[3]+3572445317&4294967295,V=B+(P<<16&4294967295|P>>>16),P=j+(V^B^S)+D[6]+76029189&4294967295,j=V+(P<<23&4294967295|P>>>9),P=S+(j^V^B)+D[9]+3654602809&4294967295,S=j+(P<<4&4294967295|P>>>28),P=B+(S^j^V)+D[12]+3873151461&4294967295,B=S+(P<<11&4294967295|P>>>21),P=V+(B^S^j)+D[15]+530742520&4294967295,V=B+(P<<16&4294967295|P>>>16),P=j+(V^B^S)+D[2]+3299628645&4294967295,j=V+(P<<23&4294967295|P>>>9),P=S+(V^(j|~B))+D[0]+4096336452&4294967295,S=j+(P<<6&4294967295|P>>>26),P=B+(j^(S|~V))+D[7]+1126891415&4294967295,B=S+(P<<10&4294967295|P>>>22),P=V+(S^(B|~j))+D[14]+2878612391&4294967295,V=B+(P<<15&4294967295|P>>>17),P=j+(B^(V|~S))+D[5]+4237533241&4294967295,j=V+(P<<21&4294967295|P>>>11),P=S+(V^(j|~B))+D[12]+1700485571&4294967295,S=j+(P<<6&4294967295|P>>>26),P=B+(j^(S|~V))+D[3]+2399980690&4294967295,B=S+(P<<10&4294967295|P>>>22),P=V+(S^(B|~j))+D[10]+4293915773&4294967295,V=B+(P<<15&4294967295|P>>>17),P=j+(B^(V|~S))+D[1]+2240044497&4294967295,j=V+(P<<21&4294967295|P>>>11),P=S+(V^(j|~B))+D[8]+1873313359&4294967295,S=j+(P<<6&4294967295|P>>>26),P=B+(j^(S|~V))+D[15]+4264355552&4294967295,B=S+(P<<10&4294967295|P>>>22),P=V+(S^(B|~j))+D[6]+2734768916&4294967295,V=B+(P<<15&4294967295|P>>>17),P=j+(B^(V|~S))+D[13]+1309151649&4294967295,j=V+(P<<21&4294967295|P>>>11),P=S+(V^(j|~B))+D[4]+4149444226&4294967295,S=j+(P<<6&4294967295|P>>>26),P=B+(j^(S|~V))+D[11]+3174756917&4294967295,B=S+(P<<10&4294967295|P>>>22),P=V+(S^(B|~j))+D[2]+718787259&4294967295,V=B+(P<<15&4294967295|P>>>17),P=j+(B^(V|~S))+D[9]+3951481745&4294967295,E.g[0]=E.g[0]+S&4294967295,E.g[1]=E.g[1]+(V+(P<<21&4294967295|P>>>11))&4294967295,E.g[2]=E.g[2]+V&4294967295,E.g[3]=E.g[3]+B&4294967295}r.prototype.v=function(E,S){S===void 0&&(S=E.length);const j=S-this.blockSize,D=this.C;let V=this.h,B=0;for(;B<S;){if(V==0)for(;B<=j;)i(this,E,B),B+=this.blockSize;if(typeof E=="string"){for(;B<S;)if(D[V++]=E.charCodeAt(B++),V==this.blockSize){i(this,D),V=0;break}}else for(;B<S;)if(D[V++]=E[B++],V==this.blockSize){i(this,D),V=0;break}}this.h=V,this.o+=S},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var S=1;S<E.length-8;++S)E[S]=0;S=this.o*8;for(var j=E.length-8;j<E.length;++j)E[j]=S&255,S/=256;for(this.v(E),E=Array(16),S=0,j=0;j<4;++j)for(let D=0;D<32;D+=8)E[S++]=this.g[j]>>>D&255;return E};function o(E,S){var j=h;return Object.prototype.hasOwnProperty.call(j,E)?j[E]:j[E]=S(E)}function u(E,S){this.h=S;const j=[];let D=!0;for(let V=E.length-1;V>=0;V--){const B=E[V]|0;D&&B==S||(j[V]=B,D=!1)}this.g=j}var h={};function f(E){return-128<=E&&E<128?o(E,function(S){return new u([S|0],S<0?-1:0)}):new u([E|0],E<0?-1:0)}function m(E){if(isNaN(E)||!isFinite(E))return b;if(E<0)return k(m(-E));const S=[];let j=1;for(let D=0;E>=j;D++)S[D]=E/j|0,j*=4294967296;return new u(S,0)}function v(E,S){if(E.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(E.charAt(0)=="-")return k(v(E.substring(1),S));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const j=m(Math.pow(S,8));let D=b;for(let B=0;B<E.length;B+=8){var V=Math.min(8,E.length-B);const P=parseInt(E.substring(B,B+V),S);V<8?(V=m(Math.pow(S,V)),D=D.j(V).add(m(P))):(D=D.j(j),D=D.add(m(P)))}return D}var b=f(0),x=f(1),C=f(16777216);t=u.prototype,t.m=function(){if(A(this))return-k(this).m();let E=0,S=1;for(let j=0;j<this.g.length;j++){const D=this.i(j);E+=(D>=0?D:4294967296+D)*S,S*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(R(this))return"0";if(A(this))return"-"+k(this).toString(E);const S=m(Math.pow(E,6));var j=this;let D="";for(;;){const V=M(j,S).g;j=L(j,V.j(S));let B=((j.g.length>0?j.g[0]:j.h)>>>0).toString(E);if(j=V,R(j))return B+D;for(;B.length<6;)B="0"+B;D=B+D}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function R(E){if(E.h!=0)return!1;for(let S=0;S<E.g.length;S++)if(E.g[S]!=0)return!1;return!0}function A(E){return E.h==-1}t.l=function(E){return E=L(this,E),A(E)?-1:R(E)?0:1};function k(E){const S=E.g.length,j=[];for(let D=0;D<S;D++)j[D]=~E.g[D];return new u(j,~E.h).add(x)}t.abs=function(){return A(this)?k(this):this},t.add=function(E){const S=Math.max(this.g.length,E.g.length),j=[];let D=0;for(let V=0;V<=S;V++){let B=D+(this.i(V)&65535)+(E.i(V)&65535),P=(B>>>16)+(this.i(V)>>>16)+(E.i(V)>>>16);D=P>>>16,B&=65535,P&=65535,j[V]=P<<16|B}return new u(j,j[j.length-1]&-2147483648?-1:0)};function L(E,S){return E.add(k(S))}t.j=function(E){if(R(this)||R(E))return b;if(A(this))return A(E)?k(this).j(k(E)):k(k(this).j(E));if(A(E))return k(this.j(k(E)));if(this.l(C)<0&&E.l(C)<0)return m(this.m()*E.m());const S=this.g.length+E.g.length,j=[];for(var D=0;D<2*S;D++)j[D]=0;for(D=0;D<this.g.length;D++)for(let V=0;V<E.g.length;V++){const B=this.i(D)>>>16,P=this.i(D)&65535,ne=E.i(V)>>>16,oe=E.i(V)&65535;j[2*D+2*V]+=P*oe,U(j,2*D+2*V),j[2*D+2*V+1]+=B*oe,U(j,2*D+2*V+1),j[2*D+2*V+1]+=P*ne,U(j,2*D+2*V+1),j[2*D+2*V+2]+=B*ne,U(j,2*D+2*V+2)}for(E=0;E<S;E++)j[E]=j[2*E+1]<<16|j[2*E];for(E=S;E<2*S;E++)j[E]=0;return new u(j,0)};function U(E,S){for(;(E[S]&65535)!=E[S];)E[S+1]+=E[S]>>>16,E[S]&=65535,S++}function I(E,S){this.g=E,this.h=S}function M(E,S){if(R(S))throw Error("division by zero");if(R(E))return new I(b,b);if(A(E))return S=M(k(E),S),new I(k(S.g),k(S.h));if(A(S))return S=M(E,k(S)),new I(k(S.g),S.h);if(E.g.length>30){if(A(E)||A(S))throw Error("slowDivide_ only works with positive integers.");for(var j=x,D=S;D.l(E)<=0;)j=z(j),D=z(D);var V=H(j,1),B=H(D,1);for(D=H(D,2),j=H(j,2);!R(D);){var P=B.add(D);P.l(E)<=0&&(V=V.add(j),B=P),D=H(D,1),j=H(j,1)}return S=L(E,V.j(S)),new I(V,S)}for(V=b;E.l(S)>=0;){for(j=Math.max(1,Math.floor(E.m()/S.m())),D=Math.ceil(Math.log(j)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),B=m(j),P=B.j(S);A(P)||P.l(E)>0;)j-=D,B=m(j),P=B.j(S);R(B)&&(B=x),V=V.add(B),E=L(E,P)}return new I(V,E)}t.B=function(E){return M(this,E).h},t.and=function(E){const S=Math.max(this.g.length,E.g.length),j=[];for(let D=0;D<S;D++)j[D]=this.i(D)&E.i(D);return new u(j,this.h&E.h)},t.or=function(E){const S=Math.max(this.g.length,E.g.length),j=[];for(let D=0;D<S;D++)j[D]=this.i(D)|E.i(D);return new u(j,this.h|E.h)},t.xor=function(E){const S=Math.max(this.g.length,E.g.length),j=[];for(let D=0;D<S;D++)j[D]=this.i(D)^E.i(D);return new u(j,this.h^E.h)};function z(E){const S=E.g.length+1,j=[];for(let D=0;D<S;D++)j[D]=E.i(D)<<1|E.i(D-1)>>>31;return new u(j,E.h)}function H(E,S){const j=S>>5;S%=32;const D=E.g.length-j,V=[];for(let B=0;B<D;B++)V[B]=S>0?E.i(B+j)>>>S|E.i(B+j+1)<<32-S:E.i(B+j);return new u(V,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,ek=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=v,ro=u}).apply(typeof kE<"u"?kE:typeof self<"u"?self:typeof window<"u"?window:{});var Wf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var tk,yd,nk,gm,b0,rk,sk,ik;(function(){var t,e=Object.defineProperty;function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wf=="object"&&Wf];for(var _=0;_<p.length;++_){var N=p[_];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var r=n(this);function i(p,_){if(_)e:{var N=r;p=p.split(".");for(var F=0;F<p.length-1;F++){var ee=p[F];if(!(ee in N))break e;N=N[ee]}p=p[p.length-1],F=N[p],_=_(F),_!=F&&_!=null&&e(N,p,{configurable:!0,writable:!0,value:_})}}i("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(p){return p||function(_){var N=[],F;for(F in _)Object.prototype.hasOwnProperty.call(_,F)&&N.push([F,_[F]]);return N}});var o=o||{},u=this||self;function h(p){var _=typeof p;return _=="object"&&p!=null||_=="function"}function f(p,_,N){return p.call.apply(p.bind,arguments)}function m(p,_,N){return m=f,m.apply(null,arguments)}function v(p,_){var N=Array.prototype.slice.call(arguments,1);return function(){var F=N.slice();return F.push.apply(F,arguments),p.apply(this,F)}}function b(p,_){function N(){}N.prototype=_.prototype,p.Z=_.prototype,p.prototype=new N,p.prototype.constructor=p,p.Ob=function(F,ee,le){for(var ze=Array(arguments.length-2),wt=2;wt<arguments.length;wt++)ze[wt-2]=arguments[wt];return _.prototype[ee].apply(F,ze)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function C(p){const _=p.length;if(_>0){const N=Array(_);for(let F=0;F<_;F++)N[F]=p[F];return N}return[]}function R(p,_){for(let F=1;F<arguments.length;F++){const ee=arguments[F];var N=typeof ee;if(N=N!="object"?N:ee?Array.isArray(ee)?"array":N:"null",N=="array"||N=="object"&&typeof ee.length=="number"){N=p.length||0;const le=ee.length||0;p.length=N+le;for(let ze=0;ze<le;ze++)p[N+ze]=ee[ze]}else p.push(ee)}}class A{constructor(_,N){this.i=_,this.j=N,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function k(p){u.setTimeout(()=>{throw p},0)}function L(){var p=E;let _=null;return p.g&&(_=p.g,p.g=p.g.next,p.g||(p.h=null),_.next=null),_}class U{constructor(){this.h=this.g=null}add(_,N){const F=I.get();F.set(_,N),this.h?this.h.next=F:this.g=F,this.h=F}}var I=new A(()=>new M,p=>p.reset());class M{constructor(){this.next=this.g=this.h=null}set(_,N){this.h=_,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let z,H=!1,E=new U,S=()=>{const p=Promise.resolve(void 0);z=()=>{p.then(j)}};function j(){for(var p;p=L();){try{p.h.call(p.g)}catch(N){k(N)}var _=I;_.j(p),_.h<100&&(_.h++,p.next=_.g,_.g=p)}H=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(p,_){this.type=p,this.g=this.target=_,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var p=!1,_=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const N=()=>{};u.addEventListener("test",N,_),u.removeEventListener("test",N,_)}catch{}return p})();function P(p){return/^[\s\xa0]*$/.test(p)}function ne(p,_){V.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,_)}b(ne,V),ne.prototype.init=function(p,_){const N=this.type=p.type,F=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=_,_=p.relatedTarget,_||(N=="mouseover"?_=p.fromElement:N=="mouseout"&&(_=p.toElement)),this.relatedTarget=_,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&ne.Z.h.call(this)},ne.prototype.h=function(){ne.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var oe="closure_listenable_"+(Math.random()*1e6|0),G=0;function Z(p,_,N,F,ee){this.listener=p,this.proxy=null,this.src=_,this.type=N,this.capture=!!F,this.ha=ee,this.key=++G,this.da=this.fa=!1}function J(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Se(p,_,N){for(const F in p)_.call(N,p[F],F,p)}function Le(p,_){for(const N in p)_.call(void 0,p[N],N,p)}function $(p){const _={};for(const N in p)_[N]=p[N];return _}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function re(p,_){let N,F;for(let ee=1;ee<arguments.length;ee++){F=arguments[ee];for(N in F)p[N]=F[N];for(let le=0;le<Q.length;le++)N=Q[le],Object.prototype.hasOwnProperty.call(F,N)&&(p[N]=F[N])}}function he(p){this.src=p,this.g={},this.h=0}he.prototype.add=function(p,_,N,F,ee){const le=p.toString();p=this.g[le],p||(p=this.g[le]=[],this.h++);const ze=Ue(p,_,F,ee);return ze>-1?(_=p[ze],N||(_.fa=!1)):(_=new Z(_,this.src,le,!!F,ee),_.fa=N,p.push(_)),_};function Te(p,_){const N=_.type;if(N in p.g){var F=p.g[N],ee=Array.prototype.indexOf.call(F,_,void 0),le;(le=ee>=0)&&Array.prototype.splice.call(F,ee,1),le&&(J(_),p.g[N].length==0&&(delete p.g[N],p.h--))}}function Ue(p,_,N,F){for(let ee=0;ee<p.length;++ee){const le=p[ee];if(!le.da&&le.listener==_&&le.capture==!!N&&le.ha==F)return ee}return-1}var te="closure_lm_"+(Math.random()*1e6|0),Oe={};function Ie(p,_,N,F,ee){if(Array.isArray(_)){for(let le=0;le<_.length;le++)Ie(p,_[le],N,F,ee);return null}return N=K(N),p&&p[oe]?p.J(_,N,h(F)?!!F.capture:!1,ee):Xe(p,_,N,!1,F,ee)}function Xe(p,_,N,F,ee,le){if(!_)throw Error("Invalid event type");const ze=h(ee)?!!ee.capture:!!ee;let wt=Ve(p);if(wt||(p[te]=wt=new he(p)),N=wt.add(_,N,F,ze,le),N.proxy)return N;if(F=ke(),N.proxy=F,F.src=p,F.listener=N,p.addEventListener)B||(ee=ze),ee===void 0&&(ee=!1),p.addEventListener(_.toString(),F,ee);else if(p.attachEvent)p.attachEvent(dt(_.toString()),F);else if(p.addListener&&p.removeListener)p.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return N}function ke(){function p(N){return _.call(p.src,p.listener,N)}const _=ye;return p}function fe(p,_,N,F,ee){if(Array.isArray(_))for(var le=0;le<_.length;le++)fe(p,_[le],N,F,ee);else F=h(F)?!!F.capture:!!F,N=K(N),p&&p[oe]?(p=p.i,le=String(_).toString(),le in p.g&&(_=p.g[le],N=Ue(_,N,F,ee),N>-1&&(J(_[N]),Array.prototype.splice.call(_,N,1),_.length==0&&(delete p.g[le],p.h--)))):p&&(p=Ve(p))&&(_=p.g[_.toString()],p=-1,_&&(p=Ue(_,N,F,ee)),(N=p>-1?_[p]:null)&&Ae(N))}function Ae(p){if(typeof p!="number"&&p&&!p.da){var _=p.src;if(_&&_[oe])Te(_.i,p);else{var N=p.type,F=p.proxy;_.removeEventListener?_.removeEventListener(N,F,p.capture):_.detachEvent?_.detachEvent(dt(N),F):_.addListener&&_.removeListener&&_.removeListener(F),(N=Ve(_))?(Te(N,p),N.h==0&&(N.src=null,_[te]=null)):J(p)}}}function dt(p){return p in Oe?Oe[p]:Oe[p]="on"+p}function ye(p,_){if(p.da)p=!0;else{_=new ne(_,this);const N=p.listener,F=p.ha||p.src;p.fa&&Ae(p),p=N.call(F,_)}return p}function Ve(p){return p=p[te],p instanceof he?p:null}var De="__closure_events_fn_"+(Math.random()*1e9>>>0);function K(p){return typeof p=="function"?p:(p[De]||(p[De]=function(_){return p.handleEvent(_)}),p[De])}function ue(){D.call(this),this.i=new he(this),this.M=this,this.G=null}b(ue,D),ue.prototype[oe]=!0,ue.prototype.removeEventListener=function(p,_,N,F){fe(this,p,_,N,F)};function je(p,_){var N,F=p.G;if(F)for(N=[];F;F=F.G)N.push(F);if(p=p.M,F=_.type||_,typeof _=="string")_=new V(_,p);else if(_ instanceof V)_.target=_.target||p;else{var ee=_;_=new V(F,p),re(_,ee)}ee=!0;let le,ze;if(N)for(ze=N.length-1;ze>=0;ze--)le=_.g=N[ze],ee=me(le,F,!0,_)&&ee;if(le=_.g=p,ee=me(le,F,!0,_)&&ee,ee=me(le,F,!1,_)&&ee,N)for(ze=0;ze<N.length;ze++)le=_.g=N[ze],ee=me(le,F,!1,_)&&ee}ue.prototype.N=function(){if(ue.Z.N.call(this),this.i){var p=this.i;for(const _ in p.g){const N=p.g[_];for(let F=0;F<N.length;F++)J(N[F]);delete p.g[_],p.h--}}this.G=null},ue.prototype.J=function(p,_,N,F){return this.i.add(String(p),_,!1,N,F)},ue.prototype.K=function(p,_,N,F){return this.i.add(String(p),_,!0,N,F)};function me(p,_,N,F){if(_=p.i.g[String(_)],!_)return!0;_=_.concat();let ee=!0;for(let le=0;le<_.length;++le){const ze=_[le];if(ze&&!ze.da&&ze.capture==N){const wt=ze.listener,Tn=ze.ha||ze.src;ze.fa&&Te(p.i,ze),ee=wt.call(Tn,F)!==!1&&ee}}return ee&&!F.defaultPrevented}function Ne(p,_){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=m(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:u.setTimeout(p,_||0)}function xe(p){p.g=Ne(()=>{p.g=null,p.i&&(p.i=!1,xe(p))},p.l);const _=p.h;p.h=null,p.m.apply(null,_)}class X extends D{constructor(_,N){super(),this.m=_,this.l=N,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:xe(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function He(p){D.call(this),this.h=p,this.g={}}b(He,D);var ct=[];function on(p){Se(p.g,function(_,N){this.g.hasOwnProperty(N)&&Ae(_)},p),p.g={}}He.prototype.N=function(){He.Z.N.call(this),on(this)},He.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ee=u.JSON.stringify,$e=u.JSON.parse,lt=class{stringify(p){return u.JSON.stringify(p,void 0)}parse(p){return u.JSON.parse(p,void 0)}};function yt(){}function Vt(){}var kt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function nt(){V.call(this,"d")}b(nt,V);function Rt(){V.call(this,"c")}b(Rt,V);var Qt={},Fe=null;function Ce(){return Fe=Fe||new ue}Qt.Ia="serverreachability";function Ze(p){V.call(this,Qt.Ia,p)}b(Ze,V);function et(p){const _=Ce();je(_,new Ze(_))}Qt.STAT_EVENT="statevent";function bt(p,_){V.call(this,Qt.STAT_EVENT,p),this.stat=_}b(bt,V);function mt(p){const _=Ce();je(_,new bt(_,p))}Qt.Ja="timingevent";function At(p,_){V.call(this,Qt.Ja,p),this.size=_}b(At,V);function $t(p,_){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){p()},_)}function St(){this.g=!0}St.prototype.ua=function(){this.g=!1};function ln(p,_,N,F,ee,le){p.info(function(){if(p.g)if(le){var ze="",wt=le.split("&");for(let Gt=0;Gt<wt.length;Gt++){var Tn=wt[Gt].split("=");if(Tn.length>1){const pn=Tn[0];Tn=Tn[1];const as=pn.split("_");ze=as.length>=2&&as[1]=="type"?ze+(pn+"="+Tn+"&"):ze+(pn+"=redacted&")}}}else ze=null;else ze=le;return"XMLHTTP REQ ("+F+") [attempt "+ee+"]: "+_+`
`+N+`
`+ze})}function qn(p,_,N,F,ee,le,ze){p.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+ee+"]: "+_+`
`+N+`
`+le+" "+ze})}function qe(p,_,N,F){p.info(function(){return"XMLHTTP TEXT ("+_+"): "+qt(p,N)+(F?" "+F:"")})}function xt(p,_){p.info(function(){return"TIMEOUT: "+_})}St.prototype.info=function(){};function qt(p,_){if(!p.g)return _;if(!_)return null;try{const le=JSON.parse(_);if(le){for(p=0;p<le.length;p++)if(Array.isArray(le[p])){var N=le[p];if(!(N.length<2)){var F=N[1];if(Array.isArray(F)&&!(F.length<1)){var ee=F[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(let ze=1;ze<F.length;ze++)F[ze]=""}}}}return Ee(le)}catch{return _}}var nr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ha={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ou;function yo(){}b(yo,yt),yo.prototype.g=function(){return new XMLHttpRequest},ou=new yo;function yi(p){return encodeURIComponent(String(p))}function Sh(p){var _=1;p=p.split(":");const N=[];for(;_>0&&p.length;)N.push(p.shift()),_--;return p.length&&N.push(p.join(":")),N}function ys(p,_,N,F){this.j=p,this.i=_,this.l=N,this.S=F||1,this.V=new He(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new bs}function bs(){this.i=null,this.g="",this.h=!1}var Rn={},Xn={};function Vs(p,_,N){p.M=1,p.A=bo(jn(_)),p.u=N,p.R=!0,xl(p,null)}function xl(p,_){p.F=Date.now(),Us(p),p.B=jn(p.A);var N=p.B,F=p.S;Array.isArray(F)||(F=[String(F)]),Sl(N.i,"t",F),p.C=0,N=p.j.L,p.h=new bs,p.g=Uh(p.j,N?_:null,!p.u),p.P>0&&(p.O=new X(m(p.Y,p,p.g),p.P)),_=p.V,N=p.g,F=p.ba;var ee="readystatechange";Array.isArray(ee)||(ee&&(ct[0]=ee.toString()),ee=ct);for(let le=0;le<ee.length;le++){const ze=Ie(N,ee[le],F||_.handleEvent,!1,_.h||_);if(!ze)break;_.g[ze.key]=ze}_=p.J?$(p.J):{},p.u?(p.v||(p.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,_)):(p.v="GET",p.g.ea(p.B,p.v,null,_)),et(),ln(p.i,p.v,p.B,p.l,p.S,p.u)}ys.prototype.ba=function(p){p=p.target;const _=this.O;_&&ws(p)==3?_.j():this.Y(p)},ys.prototype.Y=function(p){try{if(p==this.g)e:{const wt=ws(this.g),Tn=this.g.ya(),Gt=this.g.ca();if(!(wt<3)&&(wt!=3||this.g&&(this.h.h||this.g.la()||rr(this.g)))){this.K||wt!=4||Tn==7||(Tn==8||Gt<=0?et(3):et(2)),zs(this);var _=this.g.ca();this.X=_;var N=yg(this);if(this.o=_==200,qn(this.i,this.v,this.B,this.l,this.S,wt,_),this.o){if(this.U&&!this.L){t:{if(this.g){var F,ee=this.g;if((F=ee.g?ee.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(F)){var le=F;break t}}le=null}if(p=le)qe(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Bs(this,p);else{this.o=!1,this.m=3,mt(12),$r(this),rs(this);break e}}if(this.R){p=!0;let pn;for(;!this.K&&this.C<N.length;)if(pn=Ch(this,N),pn==Xn){wt==4&&(this.m=4,mt(14),p=!1),qe(this.i,this.l,null,"[Incomplete Response]");break}else if(pn==Rn){this.m=4,mt(15),qe(this.i,this.l,N,"[Invalid Chunk]"),p=!1;break}else qe(this.i,this.l,pn,null),Bs(this,pn);if(Th(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||N.length!=0||this.h.h||(this.m=1,mt(16),p=!1),this.o=this.o&&p,!p)qe(this.i,this.l,N,"[Invalid Chunked Response]"),$r(this),rs(this);else if(N.length>0&&!this.W){this.W=!0;var ze=this.j;ze.g==this&&ze.aa&&!ze.P&&(ze.j.info("Great, no buffering proxy detected. Bytes received: "+N.length),wu(ze),ze.P=!0,mt(11))}}else qe(this.i,this.l,N,null),Bs(this,N);wt==4&&$r(this),this.o&&!this.K&&(wt==4?Mh(this.j,this):(this.o=!1,Us(this)))}else xi(this.g),_==400&&N.indexOf("Unknown SID")>0?(this.m=3,mt(12)):(this.m=0,mt(13)),$r(this),rs(this)}}}catch{}finally{}};function yg(p){if(!Th(p))return p.g.la();const _=rr(p.g);if(_==="")return"";let N="";const F=_.length,ee=ws(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return $r(p),rs(p),"";p.h.i=new u.TextDecoder}for(let le=0;le<F;le++)p.h.h=!0,N+=p.h.i.decode(_[le],{stream:!(ee&&le==F-1)});return _.length=0,p.h.g+=N,p.C=0,p.h.g}function Th(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function Ch(p,_){var N=p.C,F=_.indexOf(`
`,N);return F==-1?Xn:(N=Number(_.substring(N,F)),isNaN(N)?Rn:(F+=1,F+N>_.length?Xn:(_=_.slice(F,F+N),p.C=F+N,_)))}ys.prototype.cancel=function(){this.K=!0,$r(this)};function Us(p){p.T=Date.now()+p.H,_l(p,p.H)}function _l(p,_){if(p.D!=null)throw Error("WatchDog timer not null");p.D=$t(m(p.aa,p),_)}function zs(p){p.D&&(u.clearTimeout(p.D),p.D=null)}ys.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(xt(this.i,this.B),this.M!=2&&(et(),mt(17)),$r(this),this.m=2,rs(this)):_l(this,this.T-p)};function rs(p){p.j.I==0||p.K||Mh(p.j,p)}function $r(p){zs(p);var _=p.O;_&&typeof _.dispose=="function"&&_.dispose(),p.O=null,on(p.V),p.g&&(_=p.g,p.g=null,_.abort(),_.dispose())}function Bs(p,_){try{var N=p.j;if(N.I!=0&&(N.g==p||Hs(N.h,p))){if(!p.L&&Hs(N.h,p)&&N.I==3){try{var F=N.Ba.g.parse(_)}catch{F=null}if(Array.isArray(F)&&F.length==3){var ee=F;if(ee[0]==0){e:if(!N.v){if(N.g)if(N.g.F+3e3<p.F)Al(N),xa(N);else break e;Co(N),mt(18)}}else N.xa=ee[1],0<N.xa-N.K&&ee[2]<37500&&N.F&&N.A==0&&!N.C&&(N.C=$t(m(N.Va,N),6e3));Fs(N.h)<=1&&N.ta&&(N.ta=void 0)}else Ws(N,11)}else if((p.L||N.g==p)&&Al(N),!P(_))for(ee=N.Ba.g.parse(_),_=0;_<ee.length;_++){let Gt=ee[_];const pn=Gt[0];if(!(pn<=N.K))if(N.K=pn,Gt=Gt[1],N.I==2)if(Gt[0]=="c"){N.M=Gt[1],N.ba=Gt[2];const as=Gt[3];as!=null&&(N.ka=as,N.j.info("VER="+N.ka));const Qs=Gt[4];Qs!=null&&(N.za=Qs,N.j.info("SVER="+N.za));const Es=Gt[5];Es!=null&&typeof Es=="number"&&Es>0&&(F=1.5*Es,N.O=F,N.j.info("backChannelRequestTimeoutMs_="+F)),F=N;const Ss=p.g;if(Ss){const ko=Ss.g?Ss.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ko){var le=F.h;le.g||ko.indexOf("spdy")==-1&&ko.indexOf("quic")==-1&&ko.indexOf("h2")==-1||(le.j=le.l,le.g=new Set,le.h&&(uu(le,le.h),le.h=null))}if(F.G){const Rl=Ss.g?Ss.g.getResponseHeader("X-HTTP-Session-Id"):null;Rl&&(F.wa=Rl,Xt(F.J,F.G,Rl))}}N.I=3,N.l&&N.l.ra(),N.aa&&(N.T=Date.now()-p.F,N.j.info("Handshake RTT: "+N.T+"ms")),F=N;var ze=p;if(F.na=Vh(F,F.L?F.ba:null,F.W),ze.L){du(F.h,ze);var wt=ze,Tn=F.O;Tn&&(wt.H=Tn),wt.D&&(zs(wt),Us(wt)),F.g=ze}else Dh(F);N.i.length>0&&Ks(N)}else Gt[0]!="stop"&&Gt[0]!="close"||Ws(N,7);else N.I==3&&(Gt[0]=="stop"||Gt[0]=="close"?Gt[0]=="stop"?Ws(N,7):xu(N):Gt[0]!="noop"&&N.l&&N.l.qa(Gt),N.A=0)}}et(4)}catch{}}var In=class{constructor(p,_){this.g=p,this.map=_}};function lu(p){this.l=p||10,u.PerformanceNavigationTiming?(p=u.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function cu(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Fs(p){return p.h?1:p.g?p.g.size:0}function Hs(p,_){return p.h?p.h==_:p.g?p.g.has(_):!1}function uu(p,_){p.g?p.g.add(_):p.h=_}function du(p,_){p.h&&p.h==_?p.h=null:p.g&&p.g.has(_)&&p.g.delete(_)}lu.prototype.cancel=function(){if(this.i=hu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function hu(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let _=p.i;for(const N of p.g.values())_=_.concat(N.G);return _}return C(p.i)}var kh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wl(p,_){if(p){p=p.split("&");for(let N=0;N<p.length;N++){const F=p[N].indexOf("=");let ee,le=null;F>=0?(ee=p[N].substring(0,F),le=p[N].substring(F+1)):ee=p[N],_(ee,le?decodeURIComponent(le.replace(/\+/g," ")):"")}}}function qr(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;p instanceof qr?(this.l=p.l,Jn(this,p.j),this.o=p.o,this.g=p.g,fa(this,p.u),this.h=p.h,fu(this,Ih(p.i)),this.m=p.m):p&&(_=String(p).match(kh))?(this.l=!1,Jn(this,_[1]||"",!0),this.o=$s(_[2]||""),this.g=$s(_[3]||"",!0),fa(this,_[4]),this.h=$s(_[5]||"",!0),fu(this,_[6]||"",!0),this.m=$s(_[7]||"")):(this.l=!1,this.i=new pa(null,this.l))}qr.prototype.toString=function(){const p=[];var _=this.j;_&&p.push(xo(_,El,!0),":");var N=this.g;return(N||_=="file")&&(p.push("//"),(_=this.o)&&p.push(xo(_,El,!0),"@"),p.push(yi(N).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.u,N!=null&&p.push(":",String(N))),(N=this.h)&&(this.g&&N.charAt(0)!="/"&&p.push("/"),p.push(xo(N,N.charAt(0)=="/"?mu:Nh,!0))),(N=this.i.toString())&&p.push("?",N),(N=this.m)&&p.push("#",xo(N,Ah)),p.join("")},qr.prototype.resolve=function(p){const _=jn(this);let N=!!p.j;N?Jn(_,p.j):N=!!p.o,N?_.o=p.o:N=!!p.g,N?_.g=p.g:N=p.u!=null;var F=p.h;if(N)fa(_,p.u);else if(N=!!p.h){if(F.charAt(0)!="/")if(this.g&&!this.h)F="/"+F;else{var ee=_.h.lastIndexOf("/");ee!=-1&&(F=_.h.slice(0,ee+1)+F)}if(ee=F,ee==".."||ee==".")F="";else if(ee.indexOf("./")!=-1||ee.indexOf("/.")!=-1){F=ee.lastIndexOf("/",0)==0,ee=ee.split("/");const le=[];for(let ze=0;ze<ee.length;){const wt=ee[ze++];wt=="."?F&&ze==ee.length&&le.push(""):wt==".."?((le.length>1||le.length==1&&le[0]!="")&&le.pop(),F&&ze==ee.length&&le.push("")):(le.push(wt),F=!0)}F=le.join("/")}else F=ee}return N?_.h=F:N=p.i.toString()!=="",N?fu(_,Ih(p.i)):N=!!p.m,N&&(_.m=p.m),_};function jn(p){return new qr(p)}function Jn(p,_,N){p.j=N?$s(_,!0):_,p.j&&(p.j=p.j.replace(/:$/,""))}function fa(p,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);p.u=_}else p.u=null}function fu(p,_,N){_ instanceof pa?(p.i=_,Tl(p.i,p.l)):(N||(_=xo(_,ma)),p.i=new pa(_,p.l))}function Xt(p,_,N){p.i.set(_,N)}function bo(p){return Xt(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function $s(p,_){return p?_?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function xo(p,_,N){return typeof p=="string"?(p=encodeURI(p).replace(_,Rr),N&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Rr(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var El=/[#\/\?@]/g,Nh=/[#\?:]/g,mu=/[#\?]/g,ma=/[#\?@]/g,Ah=/#/g;function pa(p,_){this.h=this.g=null,this.i=p||null,this.j=!!_}function Ir(p){p.g||(p.g=new Map,p.h=0,p.i&&wl(p.i,function(_,N){p.add(decodeURIComponent(_.replace(/\+/g," ")),N)}))}t=pa.prototype,t.add=function(p,_){Ir(this),this.i=null,p=ga(this,p);let N=this.g.get(p);return N||this.g.set(p,N=[]),N.push(_),this.h+=1,this};function Rh(p,_){Ir(p),_=ga(p,_),p.g.has(_)&&(p.i=null,p.h-=p.g.get(_).length,p.g.delete(_))}function pu(p,_){return Ir(p),_=ga(p,_),p.g.has(_)}t.forEach=function(p,_){Ir(this),this.g.forEach(function(N,F){N.forEach(function(ee){p.call(_,ee,F,this)},this)},this)};function gu(p,_){Ir(p);let N=[];if(typeof _=="string")pu(p,_)&&(N=N.concat(p.g.get(ga(p,_))));else for(p=Array.from(p.g.values()),_=0;_<p.length;_++)N=N.concat(p[_]);return N}t.set=function(p,_){return Ir(this),this.i=null,p=ga(this,p),pu(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[_]),this.h+=1,this},t.get=function(p,_){return p?(p=gu(this,p),p.length>0?String(p[0]):_):_};function Sl(p,_,N){Rh(p,_),N.length>0&&(p.i=null,p.g.set(ga(p,_),C(N)),p.h+=N.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],_=Array.from(this.g.keys());for(let F=0;F<_.length;F++){var N=_[F];const ee=yi(N);N=gu(this,N);for(let le=0;le<N.length;le++){let ze=ee;N[le]!==""&&(ze+="="+yi(N[le])),p.push(ze)}}return this.i=p.join("&")};function Ih(p){const _=new pa;return _.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),_}function ga(p,_){return _=String(_),p.j&&(_=_.toLowerCase()),_}function Tl(p,_){_&&!p.j&&(Ir(p),p.i=null,p.g.forEach(function(N,F){const ee=F.toLowerCase();F!=ee&&(Rh(this,F),Sl(this,ee,N))},p)),p.j=_}function xs(p,_){const N=new St;if(u.Image){const F=new Image;F.onload=v(ss,N,"TestLoadImage: loaded",!0,_,F),F.onerror=v(ss,N,"TestLoadImage: error",!1,_,F),F.onabort=v(ss,N,"TestLoadImage: abort",!1,_,F),F.ontimeout=v(ss,N,"TestLoadImage: timeout",!1,_,F),u.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=p}else _(!1)}function vu(p,_){const N=new St,F=new AbortController,ee=setTimeout(()=>{F.abort(),ss(N,"TestPingServer: timeout",!1,_)},1e4);fetch(p,{signal:F.signal}).then(le=>{clearTimeout(ee),le.ok?ss(N,"TestPingServer: ok",!0,_):ss(N,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(ee),ss(N,"TestPingServer: error",!1,_)})}function ss(p,_,N,F,ee){try{ee&&(ee.onload=null,ee.onerror=null,ee.onabort=null,ee.ontimeout=null),F(N)}catch{}}function va(){this.g=new lt}function qs(p){this.i=p.Sb||null,this.h=p.ab||!1}b(qs,yt),qs.prototype.g=function(){return new _o(this.i,this.h)};function _o(p,_){ue.call(this),this.H=p,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(_o,ue),t=_o.prototype,t.open=function(p,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=_,this.readyState=1,_s(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(_.body=p),(this.H||u).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ya(this)),this.readyState=0},t.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,_s(this)),this.g&&(this.readyState=3,_s(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Cl(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function Cl(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}t.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var _=p.value?p.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!p.done}))&&(this.response=this.responseText+=_)}p.done?ya(this):_s(this),this.readyState==3&&Cl(this)}},t.Oa=function(p){this.g&&(this.response=this.responseText=p,ya(this))},t.Na=function(p){this.g&&(this.response=p,ya(this))},t.ga=function(){this.g&&ya(this)};function ya(p){p.readyState=4,p.l=null,p.j=null,p.B=null,_s(p)}t.setRequestHeader=function(p,_){this.A.append(p,_)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],_=this.h.entries();for(var N=_.next();!N.done;)N=N.value,p.push(N[0]+": "+N[1]),N=_.next();return p.join(`\r
`)};function _s(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(_o.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function is(p){let _="";return Se(p,function(N,F){_+=F,_+=":",_+=N,_+=`\r
`}),_}function wo(p,_,N){e:{for(F in N){var F=!1;break e}F=!0}F||(N=is(N),typeof p=="string"?N!=null&&yi(N):Xt(p,_,N))}function en(p){ue.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(en,ue);var Gs=/^https?$/i,yu=["POST","PUT"];t=en.prototype,t.Fa=function(p){this.H=p},t.ea=function(p,_,N,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);_=_?_.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ou.g(),this.g.onreadystatechange=x(m(this.Ca,this));try{this.B=!0,this.g.open(_,String(p),!0),this.B=!1}catch(le){Eo(this,le);return}if(p=N||"",N=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var ee in F)N.set(ee,F[ee]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const le of F.keys())N.set(le,F.get(le));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(N.keys()).find(le=>le.toLowerCase()=="content-type"),ee=u.FormData&&p instanceof u.FormData,!(Array.prototype.indexOf.call(yu,_,void 0)>=0)||F||ee||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[le,ze]of N)this.g.setRequestHeader(le,ze);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(le){Eo(this,le)}};function Eo(p,_){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=_,p.o=5,bu(p),bi(p)}function bu(p){p.A||(p.A=!0,je(p,"complete"),je(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,je(this,"complete"),je(this,"abort"),bi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bi(this,!0)),en.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?So(this):this.Xa())},t.Xa=function(){So(this)};function So(p){if(p.h&&typeof o<"u"){if(p.v&&ws(p)==4)setTimeout(p.Ca.bind(p),0);else if(je(p,"readystatechange"),ws(p)==4){p.h=!1;try{const le=p.ca();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var N;if(!(N=_)){var F;if(F=le===0){let ze=String(p.D).match(kh)[1]||null;!ze&&u.self&&u.self.location&&(ze=u.self.location.protocol.slice(0,-1)),F=!Gs.test(ze?ze.toLowerCase():"")}N=F}if(N)je(p,"complete"),je(p,"success");else{p.o=6;try{var ee=ws(p)>2?p.g.statusText:""}catch{ee=""}p.l=ee+" ["+p.ca()+"]",bu(p)}}finally{bi(p)}}}}function bi(p,_){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const N=p.g;p.g=null,_||je(p,"ready");try{N.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ws(p){return p.g?p.g.readyState:0}t.ca=function(){try{return ws(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(p){if(this.g){var _=this.g.responseText;return p&&_.indexOf(p)==0&&(_=_.substring(p.length)),$e(_)}};function rr(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function xi(p){const _={};p=(p.g&&ws(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<p.length;F++){if(P(p[F]))continue;var N=Sh(p[F]);const ee=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const le=_[ee]||[];_[ee]=le,le.push(N)}Le(_,function(F){return F.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ys(p,_,N){return N&&N.internalChannelParams&&N.internalChannelParams[p]||_}function ba(p){this.za=0,this.i=[],this.j=new St,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ys("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ys("baseRetryDelayMs",5e3,p),this.Za=Ys("retryDelaySeedMs",1e4,p),this.Ta=Ys("forwardChannelMaxRetries",2,p),this.va=Ys("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new lu(p&&p.concurrentRequestLimit),this.Ba=new va,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ba.prototype,t.ka=8,t.I=1,t.connect=function(p,_,N,F){mt(0),this.W=p,this.H=_||{},N&&F!==void 0&&(this.H.OSID=N,this.H.OAID=F),this.F=this.X,this.J=Vh(this,null,this.W),Ks(this)};function xu(p){if(kl(p),p.I==3){var _=p.V++,N=jn(p.J);if(Xt(N,"SID",p.M),Xt(N,"RID",_),Xt(N,"TYPE","terminate"),To(p,N),_=new ys(p,p.j,_),_.M=2,_.A=bo(jn(N)),N=!1,u.navigator&&u.navigator.sendBeacon)try{N=u.navigator.sendBeacon(_.A.toString(),"")}catch{}!N&&u.Image&&(new Image().src=_.A,N=!0),N||(_.g=Uh(_.j,null),_.g.ea(_.A)),_.F=Date.now(),Us(_)}Lh(p)}function xa(p){p.g&&(wu(p),p.g.cancel(),p.g=null)}function kl(p){xa(p),p.v&&(u.clearTimeout(p.v),p.v=null),Al(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&u.clearTimeout(p.m),p.m=null)}function Ks(p){if(!cu(p.h)&&!p.m){p.m=!0;var _=p.Ea;z||S(),H||(z(),H=!0),E.add(_,p),p.D=0}}function Nl(p,_){return Fs(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=_.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=$t(m(p.Ea,p,_),Oh(p,p.D)),p.D++,!0)}t.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const ee=new ys(this,this.j,p);let le=this.o;if(this.U&&(le?(le=$(le),re(le,this.U)):le=this.U),this.u!==null||this.R||(ee.J=le,le=null),this.S)e:{for(var _=0,N=0;N<this.i.length;N++){t:{var F=this.i[N];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(_+=F,_>4096){_=N;break e}if(_===4096||N===this.i.length-1){_=N+1;break e}}_=1e3}else _=1e3;_=jh(this,ee,_),N=jn(this.J),Xt(N,"RID",p),Xt(N,"CVER",22),this.G&&Xt(N,"X-HTTP-Session-Id",this.G),To(this,N),le&&(this.R?_="headers="+yi(is(le))+"&"+_:this.u&&wo(N,this.u,le)),uu(this.h,ee),this.Ra&&Xt(N,"TYPE","init"),this.S?(Xt(N,"$req",_),Xt(N,"SID","null"),ee.U=!0,Vs(ee,N,null)):Vs(ee,N,_),this.I=2}}else this.I==3&&(p?_u(this,p):this.i.length==0||cu(this.h)||_u(this))};function _u(p,_){var N;_?N=_.l:N=p.V++;const F=jn(p.J);Xt(F,"SID",p.M),Xt(F,"RID",N),Xt(F,"AID",p.K),To(p,F),p.u&&p.o&&wo(F,p.u,p.o),N=new ys(p,p.j,N,p.D+1),p.u===null&&(N.J=p.o),_&&(p.i=_.G.concat(p.i)),_=jh(p,N,1e3),N.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),uu(p.h,N),Vs(N,F,_)}function To(p,_){p.H&&Se(p.H,function(N,F){Xt(_,F,N)}),p.l&&Se({},function(N,F){Xt(_,F,N)})}function jh(p,_,N){N=Math.min(p.i.length,N);const F=p.l?m(p.l.Ka,p.l,p):null;e:{var ee=p.i;let wt=-1;for(;;){const Tn=["count="+N];wt==-1?N>0?(wt=ee[0].g,Tn.push("ofs="+wt)):wt=0:Tn.push("ofs="+wt);let Gt=!0;for(let pn=0;pn<N;pn++){var le=ee[pn].g;const as=ee[pn].map;if(le-=wt,le<0)wt=Math.max(0,ee[pn].g-100),Gt=!1;else try{le="req"+le+"_"||"";try{var ze=as instanceof Map?as:Object.entries(as);for(const[Qs,Es]of ze){let Ss=Es;h(Es)&&(Ss=Ee(Es)),Tn.push(le+Qs+"="+encodeURIComponent(Ss))}}catch(Qs){throw Tn.push(le+"type="+encodeURIComponent("_badmap")),Qs}}catch{F&&F(as)}}if(Gt){ze=Tn.join("&");break e}}ze=void 0}return p=p.i.splice(0,N),_.G=p,ze}function Dh(p){if(!p.g&&!p.v){p.Y=1;var _=p.Da;z||S(),H||(z(),H=!0),E.add(_,p),p.A=0}}function Co(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=$t(m(p.Da,p),Oh(p,p.A)),p.A++,!0)}t.Da=function(){if(this.v=null,Ph(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=$t(m(this.Wa,this),p)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,mt(10),xa(this),Ph(this))};function wu(p){p.B!=null&&(u.clearTimeout(p.B),p.B=null)}function Ph(p){p.g=new ys(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var _=jn(p.na);Xt(_,"RID","rpc"),Xt(_,"SID",p.M),Xt(_,"AID",p.K),Xt(_,"CI",p.F?"0":"1"),!p.F&&p.ia&&Xt(_,"TO",p.ia),Xt(_,"TYPE","xmlhttp"),To(p,_),p.u&&p.o&&wo(_,p.u,p.o),p.O&&(p.g.H=p.O);var N=p.g;p=p.ba,N.M=1,N.A=bo(jn(_)),N.u=null,N.R=!0,xl(N,p)}t.Va=function(){this.C!=null&&(this.C=null,xa(this),Co(this),mt(19))};function Al(p){p.C!=null&&(u.clearTimeout(p.C),p.C=null)}function Mh(p,_){var N=null;if(p.g==_){Al(p),wu(p),p.g=null;var F=2}else if(Hs(p.h,_))N=_.G,du(p.h,_),F=1;else return;if(p.I!=0){if(_.o)if(F==1){N=_.u?_.u.length:0,_=Date.now()-_.F;var ee=p.D;F=Ce(),je(F,new At(F,N)),Ks(p)}else Dh(p);else if(ee=_.m,ee==3||ee==0&&_.X>0||!(F==1&&Nl(p,_)||F==2&&Co(p)))switch(N&&N.length>0&&(_=p.h,_.i=_.i.concat(N)),ee){case 1:Ws(p,5);break;case 4:Ws(p,10);break;case 3:Ws(p,6);break;default:Ws(p,2)}}}function Oh(p,_){let N=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(N*=2),N*_}function Ws(p,_){if(p.j.info("Error code "+_),_==2){var N=m(p.bb,p),F=p.Ua;const ee=!F;F=new qr(F||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Jn(F,"https"),bo(F),ee?xs(F.toString(),N):vu(F.toString(),N)}else mt(2);p.I=0,p.l&&p.l.pa(_),Lh(p),kl(p)}t.bb=function(p){p?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function Lh(p){if(p.I=0,p.ja=[],p.l){const _=hu(p.h);(_.length!=0||p.i.length!=0)&&(R(p.ja,_),R(p.ja,p.i),p.h.i.length=0,C(p.i),p.i.length=0),p.l.oa()}}function Vh(p,_,N){var F=N instanceof qr?jn(N):new qr(N);if(F.g!="")_&&(F.g=_+"."+F.g),fa(F,F.u);else{var ee=u.location;F=ee.protocol,_=_?_+"."+ee.hostname:ee.hostname,ee=+ee.port;const le=new qr(null);F&&Jn(le,F),_&&(le.g=_),ee&&fa(le,ee),N&&(le.h=N),F=le}return N=p.G,_=p.wa,N&&_&&Xt(F,N,_),Xt(F,"VER",p.ka),To(p,F),F}function Uh(p,_,N){if(_&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=p.Aa&&!p.ma?new en(new qs({ab:N})):new en(p.ma),_.Fa(p.L),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function zh(){}t=zh.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function _a(){}_a.prototype.g=function(p,_){return new Er(p,_)};function Er(p,_){ue.call(this),this.g=new ba(_),this.l=p,this.h=_&&_.messageUrlParams||null,p=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(p?p["X-WebChannel-Content-Type"]=_.messageContentType:p={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(p?p["X-WebChannel-Client-Profile"]=_.sa:p={"X-WebChannel-Client-Profile":_.sa}),this.g.U=p,(p=_&&_.Qb)&&!P(p)&&(this.g.u=p),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!P(_)&&(this.g.G=_,p=this.h,p!==null&&_ in p&&(p=this.h,_ in p&&delete p[_])),this.j=new _i(this)}b(Er,ue),Er.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Er.prototype.close=function(){xu(this.g)},Er.prototype.o=function(p){var _=this.g;if(typeof p=="string"){var N={};N.__data__=p,p=N}else this.v&&(N={},N.__data__=Ee(p),p=N);_.i.push(new In(_.Ya++,p)),_.I==3&&Ks(_)},Er.prototype.N=function(){this.g.l=null,delete this.j,xu(this.g),delete this.g,Er.Z.N.call(this)};function Bh(p){nt.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var _=p.__sm__;if(_){e:{for(const N in _){p=N;break e}p=void 0}(this.i=p)&&(p=this.i,_=_!==null&&p in _?_[p]:void 0),this.data=_}else this.data=p}b(Bh,nt);function Fh(){Rt.call(this),this.status=1}b(Fh,Rt);function _i(p){this.g=p}b(_i,zh),_i.prototype.ra=function(){je(this.g,"a")},_i.prototype.qa=function(p){je(this.g,new Bh(p))},_i.prototype.pa=function(p){je(this.g,new Fh)},_i.prototype.oa=function(){je(this.g,"b")},_a.prototype.createWebChannel=_a.prototype.g,Er.prototype.send=Er.prototype.o,Er.prototype.open=Er.prototype.m,Er.prototype.close=Er.prototype.close,ik=function(){return new _a},sk=function(){return Ce()},rk=Qt,b0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},nr.NO_ERROR=0,nr.TIMEOUT=8,nr.HTTP_ERROR=6,gm=nr,ha.COMPLETE="complete",nk=ha,Vt.EventType=kt,kt.OPEN="a",kt.CLOSE="b",kt.ERROR="c",kt.MESSAGE="d",ue.prototype.listen=ue.prototype.J,yd=Vt,en.prototype.listenOnce=en.prototype.K,en.prototype.getLastError=en.prototype.Ha,en.prototype.getLastErrorCode=en.prototype.ya,en.prototype.getStatus=en.prototype.ca,en.prototype.getResponseJson=en.prototype.La,en.prototype.getResponseText=en.prototype.la,en.prototype.send=en.prototype.ea,en.prototype.setWithCredentials=en.prototype.Fa,tk=en}).apply(typeof Wf<"u"?Wf:typeof self<"u"?self:typeof window<"u"?window:{});const NE="@firebase/firestore",AE="4.9.2";let vr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};vr.UNAUTHENTICATED=new vr(null),vr.GOOGLE_CREDENTIALS=new vr("google-credentials-uid"),vr.FIRST_PARTY=new vr("first-party-uid"),vr.MOCK_USER=new vr("mock-user");let Kc="12.3.0";const nl=new gb("@firebase/firestore");function cc(){return nl.logLevel}function Ge(t,...e){if(nl.logLevel<=Mt.DEBUG){const n=e.map(Ub);nl.debug(`Firestore (${Kc}): ${t}`,...n)}}function na(t,...e){if(nl.logLevel<=Mt.ERROR){const n=e.map(Ub);nl.error(`Firestore (${Kc}): ${t}`,...n)}}function Tc(t,...e){if(nl.logLevel<=Mt.WARN){const n=e.map(Ub);nl.warn(`Firestore (${Kc}): ${t}`,...n)}}function Ub(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function ht(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,ak(t,r,n)}function ak(t,e,n){let r=`FIRESTORE (${Kc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw na(r),new Error(r)}function Wt(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||ak(e,i,r)}function vt(t,e){return t}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Be extends pi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Wi{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class ok{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(vr.UNAUTHENTICATED)))}shutdown(){}}class iP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class aP{constructor(e){this.t=e,this.currentUser=vr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Wt(this.o===void 0,42304);let r=this.i;const i=f=>this.i!==r?(r=this.i,n(f)):Promise.resolve();let o=new Wi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Wi,e.enqueueRetryable((()=>i(this.currentUser)))};const u=()=>{const f=o;e.enqueueRetryable((async()=>{await f.promise,await i(this.currentUser)}))},h=f=>{Ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>h(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(Ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Wi)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Wt(typeof r.accessToken=="string",31837,{l:r}),new ok(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Wt(e===null||typeof e=="string",2055,{h:e}),new vr(e)}}class oP{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=vr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class lP{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new oP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(vr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class RE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Wt(this.o===void 0,3512);const r=o=>{o.error!=null&&Ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.m;return this.m=o.token,Ge("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const i=o=>{Ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):Ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new RE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Wt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new RE(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function uP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class zb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=uP(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function Ot(t,e){return t<e?-1:t>e?1:0}function x0(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),o=e.charAt(r);if(i!==o)return Ry(i)===Ry(o)?Ot(i,o):Ry(i)?1:-1}return Ot(t.length,e.length)}const dP=55296,hP=57343;function Ry(t){const e=t.charCodeAt(0);return e>=dP&&e<=hP}function Cc(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}const IE="__name__";class ri{constructor(e,n,r){n===void 0?n=0:n>e.length&&ht(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ht(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ri.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ri?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=ri.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return Ot(e.length,n.length)}static compareSegments(e,n){const r=ri.isNumericId(e),i=ri.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?ri.extractNumericId(e).compare(ri.extractNumericId(n)):x0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ro.fromString(e.substring(4,e.length-2))}}class an extends ri{construct(e,n,r){return new an(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Be(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new an(n)}static emptyPath(){return new an([])}}const fP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hr extends ri{construct(e,n,r){return new hr(e,n,r)}static isValidIdentifier(e){return fP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===IE}static keyField(){return new hr([IE])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new Be(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let u=!1;for(;i<e.length;){const h=e[i];if(h==="\\"){if(i+1===e.length)throw new Be(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Be(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else h==="`"?(u=!u,i++):h!=="."||u?(r+=h,i++):(o(),i++)}if(o(),u)throw new Be(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hr(n)}static emptyPath(){return new hr([])}}class tt{constructor(e){this.path=e}static fromPath(e){return new tt(an.fromString(e))}static fromName(e){return new tt(an.fromString(e).popFirst(5))}static empty(){return new tt(an.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&an.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return an.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tt(new an(e.slice()))}}function lk(t,e,n){if(!n)throw new Be(pe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function mP(t,e,n,r){if(e===!0&&r===!0)throw new Be(pe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function jE(t){if(!tt.isDocumentKey(t))throw new Be(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function DE(t){if(tt.isDocumentKey(t))throw new Be(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ck(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Ip(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ht(12329,{type:typeof t})}function kr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Be(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ip(t);throw new Be(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function pP(t,e){if(e<=0)throw new Be(pe.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function Hn(t,e){const n={typeString:t};return e&&(n.value=e),n}function uh(t,e){if(!ck(t))throw new Be(pe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const u=t[r];if(i&&typeof u!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&u!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new Be(pe.INVALID_ARGUMENT,n);return!0}const PE=-62135596800,ME=1e6;class hn{static now(){return hn.fromMillis(Date.now())}static fromDate(e){return hn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*ME);return new hn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Be(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Be(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<PE)throw new Be(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Be(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ME}_compareTo(e){return this.seconds===e.seconds?Ot(this.nanoseconds,e.nanoseconds):Ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:hn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(uh(e,hn._jsonSchema))return new hn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-PE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}hn._jsonSchemaVersion="firestore/timestamp/1.0",hn._jsonSchema={type:Hn("string",hn._jsonSchemaVersion),seconds:Hn("number"),nanoseconds:Hn("number")};class pt{static fromTimestamp(e){return new pt(e)}static min(){return new pt(new hn(0,0))}static max(){return new pt(new hn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const zd=-1;function gP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=pt.fromTimestamp(r===1e9?new hn(n+1,0):new hn(n,r));return new oo(i,tt.empty(),e)}function vP(t){return new oo(t.readTime,t.key,zd)}class oo{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new oo(pt.min(),tt.empty(),zd)}static max(){return new oo(pt.max(),tt.empty(),zd)}}function yP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=tt.comparator(t.documentKey,e.documentKey),n!==0?n:Ot(t.largestBatchId,e.largestBatchId))}const bP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Wc(t){if(t.code!==pe.FAILED_PRECONDITION||t.message!==bP)throw t;Ge("LocalStore","Unexpectedly lost primary lease")}class we{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ht(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new we(((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof we?n:we.resolve(n)}catch(n){return we.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):we.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):we.reject(n)}static resolve(e){return new we(((n,r)=>{n(e)}))}static reject(e){return new we(((n,r)=>{r(e)}))}static waitFor(e){return new we(((n,r)=>{let i=0,o=0,u=!1;e.forEach((h=>{++i,h.next((()=>{++o,u&&o===i&&n()}),(f=>r(f)))})),u=!0,o===i&&n()}))}static or(e){let n=we.resolve(!1);for(const r of e)n=n.next((i=>i?we.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,o)=>{r.push(n.call(this,i,o))})),this.waitFor(r)}static mapArray(e,n){return new we(((r,i)=>{const o=e.length,u=new Array(o);let h=0;for(let f=0;f<o;f++){const m=f;n(e[m]).next((v=>{u[m]=v,++h,h===o&&r(u)}),(v=>i(v)))}}))}static doWhile(e,n){return new we(((r,i)=>{const o=()=>{e()===!0?n().next((()=>{o()}),i):r()};o()}))}}function _P(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Qc(t){return t.name==="IndexedDbTransactionError"}class jp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}jp.ce=-1;const Bb=-1;function Dp(t){return t==null}function qm(t){return t===0&&1/t==-1/0}function wP(t){return typeof t=="number"&&Number.isInteger(t)&&!qm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const uk="";function EP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=OE(e)),e=SP(t.get(n),e);return OE(e)}function SP(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case uk:n+="";break;default:n+=o}}return n}function OE(t){return t+uk+""}function LE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function go(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function dk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class xn{constructor(e,n){this.comparator=e,this.root=n||ur.EMPTY}insert(e,n){return new xn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ur.BLACK,null,null))}remove(e){return new xn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ur.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qf(this.root,e,this.comparator,!0)}}class Qf{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ur{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??ur.RED,this.left=i??ur.EMPTY,this.right=o??ur.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new ur(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ur.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ur.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ur.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ur.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ht(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ht(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ht(27949);return e+(this.isRed()?0:1)}}ur.EMPTY=null,ur.RED=!0,ur.BLACK=!1;ur.EMPTY=new class{constructor(){this.size=0}get key(){throw ht(57766)}get value(){throw ht(16141)}get color(){throw ht(16727)}get left(){throw ht(29726)}get right(){throw ht(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new ur(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Qn{constructor(e){this.comparator=e,this.data=new xn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new VE(this.data.getIterator())}getIteratorFrom(e){return new VE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Qn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Qn(this.comparator);return n.data=e,n}}class VE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ts{constructor(e){this.fields=e,e.sort(hr.comparator)}static empty(){return new ts([])}unionWith(e){let n=new Qn(hr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ts(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Cc(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class hk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class mr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new hk("Invalid base64 string: "+o):o}})(e);return new mr(n)}static fromUint8Array(e){const n=(function(i){let o="";for(let u=0;u<i.length;++u)o+=String.fromCharCode(i[u]);return o})(e);return new mr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mr.EMPTY_BYTE_STRING=new mr("");const TP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lo(t){if(Wt(!!t,39018),typeof t=="string"){let e=0;const n=TP.exec(t);if(Wt(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:An(t.seconds),nanos:An(t.nanos)}}function An(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function co(t){return typeof t=="string"?mr.fromBase64String(t):mr.fromUint8Array(t)}const fk="server_timestamp",mk="__type__",pk="__previous_value__",gk="__local_write_time__";function Pp(t){return(t?.mapValue?.fields||{})[mk]?.stringValue===fk}function Mp(t){const e=t.mapValue.fields[pk];return Pp(e)?Mp(e):e}function Bd(t){const e=lo(t.mapValue.fields[gk].timestampValue);return new hn(e.seconds,e.nanos)}class CP{constructor(e,n,r,i,o,u,h,f,m,v){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=v}}const Gm="(default)";class Fd{constructor(e,n){this.projectId=e,this.database=n||Gm}static empty(){return new Fd("","")}get isDefaultDatabase(){return this.database===Gm}isEqual(e){return e instanceof Fd&&e.projectId===this.projectId&&e.database===this.database}}const vk="__type__",kP="__max__",Xf={mapValue:{}},yk="__vector__",Ym="value";function uo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Pp(t)?4:AP(t)?9007199254740991:NP(t)?10:11:ht(28295,{value:t})}function di(t,e){if(t===e)return!0;const n=uo(t);if(n!==uo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Bd(t).isEqual(Bd(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const u=lo(i.timestampValue),h=lo(o.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return co(i.bytesValue).isEqual(co(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return An(i.geoPointValue.latitude)===An(o.geoPointValue.latitude)&&An(i.geoPointValue.longitude)===An(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return An(i.integerValue)===An(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const u=An(i.doubleValue),h=An(o.doubleValue);return u===h?qm(u)===qm(h):isNaN(u)&&isNaN(h)}return!1})(t,e);case 9:return Cc(t.arrayValue.values||[],e.arrayValue.values||[],di);case 10:case 11:return(function(i,o){const u=i.mapValue.fields||{},h=o.mapValue.fields||{};if(LE(u)!==LE(h))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(h[f]===void 0||!di(u[f],h[f])))return!1;return!0})(t,e);default:return ht(52216,{left:t})}}function Hd(t,e){return(t.values||[]).find((n=>di(n,e)))!==void 0}function kc(t,e){if(t===e)return 0;const n=uo(t),r=uo(e);if(n!==r)return Ot(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ot(t.booleanValue,e.booleanValue);case 2:return(function(o,u){const h=An(o.integerValue||o.doubleValue),f=An(u.integerValue||u.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1})(t,e);case 3:return UE(t.timestampValue,e.timestampValue);case 4:return UE(Bd(t),Bd(e));case 5:return x0(t.stringValue,e.stringValue);case 6:return(function(o,u){const h=co(o),f=co(u);return h.compareTo(f)})(t.bytesValue,e.bytesValue);case 7:return(function(o,u){const h=o.split("/"),f=u.split("/");for(let m=0;m<h.length&&m<f.length;m++){const v=Ot(h[m],f[m]);if(v!==0)return v}return Ot(h.length,f.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,u){const h=Ot(An(o.latitude),An(u.latitude));return h!==0?h:Ot(An(o.longitude),An(u.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return zE(t.arrayValue,e.arrayValue);case 10:return(function(o,u){const h=o.fields||{},f=u.fields||{},m=h[Ym]?.arrayValue,v=f[Ym]?.arrayValue,b=Ot(m?.values?.length||0,v?.values?.length||0);return b!==0?b:zE(m,v)})(t.mapValue,e.mapValue);case 11:return(function(o,u){if(o===Xf.mapValue&&u===Xf.mapValue)return 0;if(o===Xf.mapValue)return 1;if(u===Xf.mapValue)return-1;const h=o.fields||{},f=Object.keys(h),m=u.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let b=0;b<f.length&&b<v.length;++b){const x=x0(f[b],v[b]);if(x!==0)return x;const C=kc(h[f[b]],m[v[b]]);if(C!==0)return C}return Ot(f.length,v.length)})(t.mapValue,e.mapValue);default:throw ht(23264,{he:n})}}function UE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ot(t,e);const n=lo(t),r=lo(e),i=Ot(n.seconds,r.seconds);return i!==0?i:Ot(n.nanos,r.nanos)}function zE(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=kc(n[i],r[i]);if(o)return o}return Ot(n.length,r.length)}function Nc(t){return _0(t)}function _0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=lo(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return co(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return tt.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=_0(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const u of r)o?o=!1:i+=",",i+=`${u}:${_0(n.fields[u])}`;return i+"}"})(t.mapValue):ht(61005,{value:t})}function vm(t){switch(uo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mp(t);return e?16+vm(e):16;case 5:return 2*t.stringValue.length;case 6:return co(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,o)=>i+vm(o)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return go(r.fields,((o,u)=>{i+=o.length+vm(u)})),i})(t.mapValue);default:throw ht(13486,{value:t})}}function Km(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function w0(t){return!!t&&"integerValue"in t}function Fb(t){return!!t&&"arrayValue"in t}function BE(t){return!!t&&"nullValue"in t}function FE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ym(t){return!!t&&"mapValue"in t}function NP(t){return(t?.mapValue?.fields||{})[vk]?.stringValue===yk}function Id(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return go(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Id(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Id(t.arrayValue.values[n]);return e}return{...t}}function AP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===kP}class zr{constructor(e){this.value=e}static empty(){return new zr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ym(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Id(n)}setAll(e){let n=hr.emptyPath(),r={},i=[];e.forEach(((u,h)=>{if(!n.isImmediateParentOf(h)){const f=this.getFieldsMap(n);this.applyChanges(f,r,i),r={},i=[],n=h.popLast()}u?r[h.lastSegment()]=Id(u):i.push(h.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());ym(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return di(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ym(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){go(n,((i,o)=>e[i]=o));for(const i of r)delete e[i]}clone(){return new zr(Id(this.value))}}function bk(t){const e=[];return go(t.fields,((n,r)=>{const i=new hr([n]);if(ym(r)){const o=bk(r.mapValue).fields;if(o.length===0)e.push(i);else for(const u of o)e.push(i.child(u))}else e.push(i)})),new ts(e)}class br{constructor(e,n,r,i,o,u,h){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=u,this.documentState=h}static newInvalidDocument(e){return new br(e,0,pt.min(),pt.min(),pt.min(),zr.empty(),0)}static newFoundDocument(e,n,r,i){return new br(e,1,n,pt.min(),r,i,0)}static newNoDocument(e,n){return new br(e,2,n,pt.min(),pt.min(),zr.empty(),0)}static newUnknownDocument(e,n){return new br(e,3,n,pt.min(),pt.min(),zr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(pt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof br&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new br(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ac{constructor(e,n){this.position=e,this.inclusive=n}}function HE(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],u=t.position[i];if(o.field.isKeyField()?r=tt.comparator(tt.fromName(u.referenceValue),n.key):r=kc(u,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function $E(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!di(t.position[n],e.position[n]))return!1;return!0}class $d{constructor(e,n="asc"){this.field=e,this.dir=n}}function RP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class xk{}class Fn extends xk{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new jP(e,n,r):n==="array-contains"?new MP(e,r):n==="in"?new OP(e,r):n==="not-in"?new LP(e,r):n==="array-contains-any"?new VP(e,r):new Fn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new DP(e,r):new PP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(kc(n,this.value)):n!==null&&uo(this.value)===uo(n)&&this.matchesComparison(kc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ht(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Os extends xk{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Os(e,n)}matches(e){return _k(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function _k(t){return t.op==="and"}function wk(t){return IP(t)&&_k(t)}function IP(t){for(const e of t.filters)if(e instanceof Os)return!1;return!0}function E0(t){if(t instanceof Fn)return t.field.canonicalString()+t.op.toString()+Nc(t.value);if(wk(t))return t.filters.map((e=>E0(e))).join(",");{const e=t.filters.map((n=>E0(n))).join(",");return`${t.op}(${e})`}}function Ek(t,e){return t instanceof Fn?(function(r,i){return i instanceof Fn&&r.op===i.op&&r.field.isEqual(i.field)&&di(r.value,i.value)})(t,e):t instanceof Os?(function(r,i){return i instanceof Os&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((o,u,h)=>o&&Ek(u,i.filters[h])),!0):!1})(t,e):void ht(19439)}function Sk(t){return t instanceof Fn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Nc(n.value)}`})(t):t instanceof Os?(function(n){return n.op.toString()+" {"+n.getFilters().map(Sk).join(" ,")+"}"})(t):"Filter"}class jP extends Fn{constructor(e,n,r){super(e,n,r),this.key=tt.fromName(r.referenceValue)}matches(e){const n=tt.comparator(e.key,this.key);return this.matchesComparison(n)}}class DP extends Fn{constructor(e,n){super(e,"in",n),this.keys=Tk("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class PP extends Fn{constructor(e,n){super(e,"not-in",n),this.keys=Tk("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Tk(t,e){return(e.arrayValue?.values||[]).map((n=>tt.fromName(n.referenceValue)))}class MP extends Fn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Fb(n)&&Hd(n.arrayValue,this.value)}}class OP extends Fn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Hd(this.value.arrayValue,n)}}class LP extends Fn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Hd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Hd(this.value.arrayValue,n)}}class VP extends Fn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Fb(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Hd(this.value.arrayValue,r)))}}class UP{constructor(e,n=null,r=[],i=[],o=null,u=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=u,this.endAt=h,this.Te=null}}function qE(t,e=null,n=[],r=[],i=null,o=null,u=null){return new UP(t,e,n,r,i,o,u)}function Hb(t){const e=vt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>E0(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),Dp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Nc(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Nc(r))).join(",")),e.Te=n}return e.Te}function $b(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!RP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ek(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$E(t.startAt,e.startAt)&&$E(t.endAt,e.endAt)}function S0(t){return tt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class dl{constructor(e,n=null,r=[],i=[],o=null,u="F",h=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=u,this.startAt=h,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function zP(t,e,n,r,i,o,u,h){return new dl(t,e,n,r,i,o,u,h)}function Op(t){return new dl(t)}function GE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function qb(t){return t.collectionGroup!==null}function yc(t){const e=vt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new Qn(hr.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((m=>{m.isInequality()&&(h=h.add(m.field))}))})),h})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new $d(o,r))})),n.has(hr.keyField().canonicalString())||e.Ie.push(new $d(hr.keyField(),r))}return e.Ie}function ai(t){const e=vt(t);return e.Ee||(e.Ee=BP(e,yc(t))),e.Ee}function BP(t,e){if(t.limitType==="F")return qE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const o=i.dir==="desc"?"asc":"desc";return new $d(i.field,o)}));const n=t.endAt?new Ac(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ac(t.startAt.position,t.startAt.inclusive):null;return qE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function T0(t,e){const n=t.filters.concat([e]);return new dl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Wm(t,e,n){return new dl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Lp(t,e){return $b(ai(t),ai(e))&&t.limitType===e.limitType}function Ck(t){return`${Hb(ai(t))}|lt:${t.limitType}`}function uc(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>Sk(i))).join(", ")}]`),Dp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>Nc(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>Nc(i))).join(",")),`Target(${r})`})(ai(t))}; limitType=${t.limitType})`}function Vp(t,e){return e.isFoundDocument()&&(function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):tt.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(const o of yc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(u,h,f){const m=HE(u,h,f);return u.inclusive?m<=0:m<0})(r.startAt,yc(r),i)||r.endAt&&!(function(u,h,f){const m=HE(u,h,f);return u.inclusive?m>=0:m>0})(r.endAt,yc(r),i))})(t,e)}function FP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function kk(t){return(e,n)=>{let r=!1;for(const i of yc(t)){const o=HP(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function HP(t,e,n){const r=t.field.isKeyField()?tt.comparator(e.key,n.key):(function(o,u,h){const f=u.data.field(o),m=h.data.field(o);return f!==null&&m!==null?kc(f,m):ht(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ht(19790,{direction:t.dir})}}class hl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){go(this.inner,((n,r)=>{for(const[i,o]of r)e(i,o)}))}isEmpty(){return dk(this.inner)}size(){return this.innerSize}}const $P=new xn(tt.comparator);function ra(){return $P}const Nk=new xn(tt.comparator);function bd(...t){let e=Nk;for(const n of t)e=e.insert(n.key,n);return e}function Ak(t){let e=Nk;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Ko(){return jd()}function Rk(){return jd()}function jd(){return new hl((t=>t.toString()),((t,e)=>t.isEqual(e)))}const qP=new xn(tt.comparator),GP=new Qn(tt.comparator);function Lt(...t){let e=GP;for(const n of t)e=e.add(n);return e}const YP=new Qn(Ot);function KP(){return YP}function Gb(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qm(e)?"-0":e}}function Ik(t){return{integerValue:""+t}}function jk(t,e){return wP(e)?Ik(e):Gb(t,e)}class Up{constructor(){this._=void 0}}function WP(t,e,n){return t instanceof qd?(function(i,o){const u={fields:{[mk]:{stringValue:fk},[gk]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Pp(o)&&(o=Mp(o)),o&&(u.fields[pk]=o),{mapValue:u}})(n,e):t instanceof Rc?Pk(t,e):t instanceof Ic?Mk(t,e):(function(i,o){const u=Dk(i,o),h=YE(u)+YE(i.Ae);return w0(u)&&w0(i.Ae)?Ik(h):Gb(i.serializer,h)})(t,e)}function QP(t,e,n){return t instanceof Rc?Pk(t,e):t instanceof Ic?Mk(t,e):n}function Dk(t,e){return t instanceof Gd?(function(r){return w0(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class qd extends Up{}class Rc extends Up{constructor(e){super(),this.elements=e}}function Pk(t,e){const n=Ok(e);for(const r of t.elements)n.some((i=>di(i,r)))||n.push(r);return{arrayValue:{values:n}}}class Ic extends Up{constructor(e){super(),this.elements=e}}function Mk(t,e){let n=Ok(e);for(const r of t.elements)n=n.filter((i=>!di(i,r)));return{arrayValue:{values:n}}}class Gd extends Up{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function YE(t){return An(t.integerValue||t.doubleValue)}function Ok(t){return Fb(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class zp{constructor(e,n){this.field=e,this.transform=n}}function XP(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Rc&&i instanceof Rc||r instanceof Ic&&i instanceof Ic?Cc(r.elements,i.elements,di):r instanceof Gd&&i instanceof Gd?di(r.Ae,i.Ae):r instanceof qd&&i instanceof qd})(t.transform,e.transform)}class JP{constructor(e,n){this.version=e,this.transformResults=n}}class Nr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Nr}static exists(e){return new Nr(void 0,e)}static updateTime(e){return new Nr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Bp{}function Lk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Fp(t.key,Nr.none()):new dh(t.key,t.data,Nr.none());{const n=t.data,r=zr.empty();let i=new Qn(hr.comparator);for(let o of e.fields)if(!i.has(o)){let u=n.field(o);u===null&&o.length>1&&(o=o.popLast(),u=n.field(o)),u===null?r.delete(o):r.set(o,u),i=i.add(o)}return new vo(t.key,r,new ts(i.toArray()),Nr.none())}}function ZP(t,e,n){t instanceof dh?(function(i,o,u){const h=i.value.clone(),f=WE(i.fieldTransforms,o,u.transformResults);h.setAll(f),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(t,e,n):t instanceof vo?(function(i,o,u){if(!bm(i.precondition,o))return void o.convertToUnknownDocument(u.version);const h=WE(i.fieldTransforms,o,u.transformResults),f=o.data;f.setAll(Vk(i)),f.setAll(h),o.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(t,e,n):(function(i,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function Dd(t,e,n,r){return t instanceof dh?(function(o,u,h,f){if(!bm(o.precondition,u))return h;const m=o.value.clone(),v=QE(o.fieldTransforms,f,u);return m.setAll(v),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(t,e,n,r):t instanceof vo?(function(o,u,h,f){if(!bm(o.precondition,u))return h;const m=QE(o.fieldTransforms,f,u),v=u.data;return v.setAll(Vk(o)),v.setAll(m),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((b=>b.field)))})(t,e,n,r):(function(o,u,h){return bm(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(t,e,n)}function eM(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=Dk(r.transform,i||null);o!=null&&(n===null&&(n=zr.empty()),n.set(r.field,o))}return n||null}function KE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Cc(r,i,((o,u)=>XP(o,u)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class dh extends Bp{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class vo extends Bp{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Vk(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function WE(t,e,n){const r=new Map;Wt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const o=t[i],u=o.transform,h=e.data.field(o.field);r.set(o.field,QP(u,h,n[i]))}return r}function QE(t,e,n){const r=new Map;for(const i of t){const o=i.transform,u=n.data.field(i.field);r.set(i.field,WP(o,u,e))}return r}class Fp extends Bp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tM extends Bp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class nM{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&ZP(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Dd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Dd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Rk();return this.mutations.forEach((i=>{const o=e.get(i.key),u=o.overlayedDocument;let h=this.applyToLocalView(u,o.mutatedFields);h=n.has(i.key)?null:h;const f=Lk(u,h);f!==null&&r.set(i.key,f),u.isValidDocument()||u.convertToNoDocument(pt.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Lt())}isEqual(e){return this.batchId===e.batchId&&Cc(this.mutations,e.mutations,((n,r)=>KE(n,r)))&&Cc(this.baseMutations,e.baseMutations,((n,r)=>KE(n,r)))}}class Yb{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Wt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return qP})();const o=e.mutations;for(let u=0;u<o.length;u++)i=i.insert(o[u].key,r[u].version);return new Yb(e,n,r,i)}}class rM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class sM{constructor(e,n){this.count=e,this.unchangedNames=n}}var Ln,zt;function iM(t){switch(t){case pe.OK:return ht(64938);case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0;default:return ht(15467,{code:t})}}function Uk(t){if(t===void 0)return na("GRPC error has no .code"),pe.UNKNOWN;switch(t){case Ln.OK:return pe.OK;case Ln.CANCELLED:return pe.CANCELLED;case Ln.UNKNOWN:return pe.UNKNOWN;case Ln.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case Ln.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case Ln.INTERNAL:return pe.INTERNAL;case Ln.UNAVAILABLE:return pe.UNAVAILABLE;case Ln.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case Ln.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case Ln.NOT_FOUND:return pe.NOT_FOUND;case Ln.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case Ln.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case Ln.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case Ln.ABORTED:return pe.ABORTED;case Ln.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case Ln.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case Ln.DATA_LOSS:return pe.DATA_LOSS;default:return ht(39323,{code:t})}}(zt=Ln||(Ln={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";function aM(){return new TextEncoder}const oM=new ro([4294967295,4294967295],0);function XE(t){const e=aM().encode(t),n=new ek;return n.update(e),new Uint8Array(n.digest())}function JE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ro([n,r],0),new ro([i,o],0)]}class Kb{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new xd(`Invalid padding: ${n}`);if(r<0)throw new xd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new xd(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new xd(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ro.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(ro.fromNumber(r)));return i.compare(oM)===1&&(i=new ro([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=XE(e),[r,i]=JE(n);for(let o=0;o<this.hashCount;o++){const u=this.ye(r,i,o);if(!this.we(u))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new Kb(o,i,n);return r.forEach((h=>u.insert(h))),u}insert(e){if(this.ge===0)return;const n=XE(e),[r,i]=JE(n);for(let o=0;o<this.hashCount;o++){const u=this.ye(r,i,o);this.Se(u)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class xd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Hp{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,hh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Hp(pt.min(),i,new xn(Ot),ra(),Lt())}}class hh{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new hh(r,n,Lt(),Lt(),Lt())}}class xm{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class zk{constructor(e,n){this.targetId=e,this.Ce=n}}class Bk{constructor(e,n,r=mr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class ZE{constructor(){this.ve=0,this.Fe=eS(),this.Me=mr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Lt(),n=Lt(),r=Lt();return this.Fe.forEach(((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ht(38017,{changeType:o})}})),new hh(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=eS()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Wt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class lM{constructor(e){this.Ge=e,this.ze=new Map,this.je=ra(),this.Je=Jf(),this.He=Jf(),this.Ye=new xn(Ot)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ht(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const o=i.target;if(S0(o))if(r===0){const u=new tt(o.path);this.et(n,u,br.newNoDocument(u,pt.min()))}else Wt(r===1,20013,{expectedCount:r});else{const u=this._t(n);if(u!==r){const h=this.ut(e),f=h?this.ct(h,e,u):1;if(f!==0){this.it(n);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,m)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let u,h;try{u=co(r).toUint8Array()}catch(f){if(f instanceof hk)return Tc("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new Kb(u,i,o)}catch(f){return Tc(f instanceof xd?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.ge===0?null:h}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((o=>{const u=this.Ge.ht(),h=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(n,o,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((o,u)=>{const h=this.ot(u);if(h){if(o.current&&S0(h.target)){const f=new tt(h.target.path);this.It(f).has(u)||this.Et(u,f)||this.et(u,f,br.newNoDocument(f,e))}o.Be&&(n.set(u,o.ke()),o.qe())}}));let r=Lt();this.He.forEach(((o,u)=>{let h=!0;u.forEachWhile((f=>{const m=this.ot(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(o))})),this.je.forEach(((o,u)=>u.setReadTime(e)));const i=new Hp(e,n,this.Ye,this.je,r);return this.je=ra(),this.Je=Jf(),this.He=Jf(),this.Ye=new xn(Ot),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new ZE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Qn(Ot),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Qn(Ot),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ge("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ZE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Jf(){return new xn(tt.comparator)}function eS(){return new xn(tt.comparator)}const cM={asc:"ASCENDING",desc:"DESCENDING"},uM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dM={and:"AND",or:"OR"};class hM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function C0(t,e){return t.useProto3Json||Dp(e)?e:{value:e}}function Qm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Fk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function fM(t,e){return Qm(t,e.toTimestamp())}function oi(t){return Wt(!!t,49232),pt.fromTimestamp((function(n){const r=lo(n);return new hn(r.seconds,r.nanos)})(t))}function Wb(t,e){return k0(t,e).canonicalString()}function k0(t,e){const n=(function(i){return new an(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function Hk(t){const e=an.fromString(t);return Wt(Kk(e),10190,{key:e.toString()}),e}function N0(t,e){return Wb(t.databaseId,e.path)}function Iy(t,e){const n=Hk(e);if(n.get(1)!==t.databaseId.projectId)throw new Be(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Be(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new tt(qk(n))}function $k(t,e){return Wb(t.databaseId,e)}function mM(t){const e=Hk(t);return e.length===4?an.emptyPath():qk(e)}function A0(t){return new an(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function qk(t){return Wt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function tS(t,e,n){return{name:N0(t,e),fields:n.value.mapValue.fields}}function pM(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:ht(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(m,v){return m.useProto3Json?(Wt(v===void 0||typeof v=="string",58123),mr.fromBase64String(v||"")):(Wt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),mr.fromUint8Array(v||new Uint8Array))})(t,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&(function(m){const v=m.code===void 0?pe.UNKNOWN:Uk(m.code);return new Be(v,m.message||"")})(u);n=new Bk(r,i,o,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Iy(t,r.document.name),o=oi(r.document.updateTime),u=r.document.createTime?oi(r.document.createTime):pt.min(),h=new zr({mapValue:{fields:r.document.fields}}),f=br.newFoundDocument(i,o,u,h),m=r.targetIds||[],v=r.removedTargetIds||[];n=new xm(m,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Iy(t,r.document),o=r.readTime?oi(r.readTime):pt.min(),u=br.newNoDocument(i,o),h=r.removedTargetIds||[];n=new xm([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Iy(t,r.document),o=r.removedTargetIds||[];n=new xm([],o,i,null)}else{if(!("filter"in e))return ht(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,u=new sM(i,o),h=r.targetId;n=new zk(h,u)}}return n}function gM(t,e){let n;if(e instanceof dh)n={update:tS(t,e.key,e.value)};else if(e instanceof Fp)n={delete:N0(t,e.key)};else if(e instanceof vo)n={update:tS(t,e.key,e.data),updateMask:TM(e.fieldMask)};else{if(!(e instanceof tM))return ht(16599,{Vt:e.type});n={verify:N0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(o,u){const h=u.transform;if(h instanceof qd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Rc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Ic)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Gd)return{fieldPath:u.field.canonicalString(),increment:h.Ae};throw ht(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:fM(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ht(27497)})(t,e.precondition)),n}function vM(t,e){return t&&t.length>0?(Wt(e!==void 0,14353),t.map((n=>(function(i,o){let u=i.updateTime?oi(i.updateTime):oi(o);return u.isEqual(pt.min())&&(u=oi(o)),new JP(u,i.transformResults||[])})(n,e)))):[]}function yM(t,e){return{documents:[$k(t,e.path)]}}function bM(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$k(t,i);const o=(function(m){if(m.length!==0)return Yk(Os.create(m,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const u=(function(m){if(m.length!==0)return m.map((v=>(function(x){return{field:dc(x.field),direction:wM(x.dir)}})(v)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const h=C0(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:n,parent:i}}function xM(t){let e=mM(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Wt(r===1,65062);const v=n.from[0];v.allDescendants?i=v.collectionId:e=e.child(v.collectionId)}let o=[];n.where&&(o=(function(b){const x=Gk(b);return x instanceof Os&&wk(x)?x.getFilters():[x]})(n.where));let u=[];n.orderBy&&(u=(function(b){return b.map((x=>(function(R){return new $d(hc(R.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(x)))})(n.orderBy));let h=null;n.limit&&(h=(function(b){let x;return x=typeof b=="object"?b.value:b,Dp(x)?null:x})(n.limit));let f=null;n.startAt&&(f=(function(b){const x=!!b.before,C=b.values||[];return new Ac(C,x)})(n.startAt));let m=null;return n.endAt&&(m=(function(b){const x=!b.before,C=b.values||[];return new Ac(C,x)})(n.endAt)),zP(e,i,u,o,h,"F",f,m)}function _M(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ht(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Gk(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=hc(n.unaryFilter.field);return Fn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=hc(n.unaryFilter.field);return Fn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=hc(n.unaryFilter.field);return Fn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=hc(n.unaryFilter.field);return Fn.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ht(61313);default:return ht(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Fn.create(hc(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ht(58110);default:return ht(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Os.create(n.compositeFilter.filters.map((r=>Gk(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ht(1026)}})(n.compositeFilter.op))})(t):ht(30097,{filter:t})}function wM(t){return cM[t]}function EM(t){return uM[t]}function SM(t){return dM[t]}function dc(t){return{fieldPath:t.canonicalString()}}function hc(t){return hr.fromServerFormat(t.fieldPath)}function Yk(t){return t instanceof Fn?(function(n){if(n.op==="=="){if(FE(n.value))return{unaryFilter:{field:dc(n.field),op:"IS_NAN"}};if(BE(n.value))return{unaryFilter:{field:dc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(FE(n.value))return{unaryFilter:{field:dc(n.field),op:"IS_NOT_NAN"}};if(BE(n.value))return{unaryFilter:{field:dc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dc(n.field),op:EM(n.op),value:n.value}}})(t):t instanceof Os?(function(n){const r=n.getFilters().map((i=>Yk(i)));return r.length===1?r[0]:{compositeFilter:{op:SM(n.op),filters:r}}})(t):ht(54877,{filter:t})}function TM(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Kk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class Wa{constructor(e,n,r,i,o=pt.min(),u=pt.min(),h=mr.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new Wa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Wa(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class CM{constructor(e){this.yt=e}}function kM(t){const e=xM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Wm(e,e.limit,"L"):e}class NM{constructor(){this.Cn=new AM}addToCollectionParentIndex(e,n){return this.Cn.add(n),we.resolve()}getCollectionParents(e,n){return we.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return we.resolve()}deleteFieldIndex(e,n){return we.resolve()}deleteAllFieldIndexes(e){return we.resolve()}createTargetIndexes(e,n){return we.resolve()}getDocumentsMatchingTarget(e,n){return we.resolve(null)}getIndexType(e,n){return we.resolve(0)}getFieldIndexes(e,n){return we.resolve([])}getNextCollectionGroupToUpdate(e){return we.resolve(null)}getMinOffset(e,n){return we.resolve(oo.min())}getMinOffsetFromCollectionGroup(e,n){return we.resolve(oo.min())}updateCollectionGroup(e,n,r){return we.resolve()}updateIndexEntries(e,n){return we.resolve()}}class AM{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Qn(an.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Qn(an.comparator)).toArray()}}const nS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Wk=41943040;class Ur{static withCacheSize(e){return new Ur(e,Ur.DEFAULT_COLLECTION_PERCENTILE,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}Ur.DEFAULT_COLLECTION_PERCENTILE=10,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ur.DEFAULT=new Ur(Wk,Ur.DEFAULT_COLLECTION_PERCENTILE,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ur.DISABLED=new Ur(-1,0,0);class jc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new jc(0)}static cr(){return new jc(-1)}}const rS="LruGarbageCollector",RM=1048576;function sS([t,e],[n,r]){const i=Ot(t,n);return i===0?Ot(e,r):i}class IM{constructor(e){this.Ir=e,this.buffer=new Qn(sS),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();sS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class jM{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ge(rS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Qc(n)?Ge(rS,"Ignoring IndexedDB error during garbage collection: ",n):await Wc(n)}await this.Vr(3e5)}))}}class DM{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return we.resolve(jp.ce);const r=new IM(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ge("LruGarbageCollector","Garbage collection skipped; disabled"),we.resolve(nS)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nS):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,o,u,h,f,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(Ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),i=this.params.maximumSequenceNumbersToCollect):i=b,u=Date.now(),this.nthSequenceNumber(e,i)))).next((b=>(r=b,h=Date.now(),this.removeTargets(e,r,n)))).next((b=>(o=b,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((b=>(m=Date.now(),cc()<=Mt.DEBUG&&Ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${i} in `+(h-u)+`ms
	Removed ${o} targets in `+(f-h)+`ms
	Removed ${b} documents in `+(m-f)+`ms
Total Duration: ${m-v}ms`),we.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:b}))))}}function PM(t,e){return new DM(t,e)}class MM{constructor(){this.changes=new hl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,br.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?we.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class OM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class LM{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&Dd(r.mutation,i,ts.empty(),hn.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Lt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Lt()){const i=Ko();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((o=>{let u=bd();return o.forEach(((h,f)=>{u=u.insert(h,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const r=Ko();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Lt())))}populateOverlays(e,n,r){const i=[];return r.forEach((o=>{n.has(o)||i.push(o)})),this.documentOverlayCache.getOverlays(e,i).next((o=>{o.forEach(((u,h)=>{n.set(u,h)}))}))}computeViews(e,n,r,i){let o=ra();const u=jd(),h=(function(){return jd()})();return n.forEach(((f,m)=>{const v=r.get(m.key);i.has(m.key)&&(v===void 0||v.mutation instanceof vo)?o=o.insert(m.key,m):v!==void 0?(u.set(m.key,v.mutation.getFieldMask()),Dd(v.mutation,m,v.mutation.getFieldMask(),hn.now())):u.set(m.key,ts.empty())})),this.recalculateAndSaveOverlays(e,o).next((f=>(f.forEach(((m,v)=>u.set(m,v))),n.forEach(((m,v)=>h.set(m,new OM(v,u.get(m)??null)))),h)))}recalculateAndSaveOverlays(e,n){const r=jd();let i=new xn(((u,h)=>u-h)),o=Lt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const h of u)h.keys().forEach((f=>{const m=n.get(f);if(m===null)return;let v=r.get(f)||ts.empty();v=h.applyToLocalView(m,v),r.set(f,v);const b=(i.get(h.batchId)||Lt()).add(f);i=i.insert(h.batchId,b)}))})).next((()=>{const u=[],h=i.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),m=f.key,v=f.value,b=Rk();v.forEach((x=>{if(!o.has(x)){const C=Lk(n.get(x),r.get(x));C!==null&&b.set(x,C),o=o.add(x)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,b))}return we.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(u){return tt.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):qb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((o=>{const u=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):we.resolve(Ko());let h=zd,f=o;return u.next((m=>we.forEach(m,((v,b)=>(h<b.largestBatchId&&(h=b.largestBatchId),o.get(v)?we.resolve():this.remoteDocumentCache.getEntry(e,v).next((x=>{f=f.insert(v,x)}))))).next((()=>this.populateOverlays(e,m,o))).next((()=>this.computeViews(e,f,m,Lt()))).next((v=>({batchId:h,changes:Ak(v)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new tt(n)).next((r=>{let i=bd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let u=bd();return this.indexManager.getCollectionParents(e,o).next((h=>we.forEach(h,(f=>{const m=(function(b,x){return new dl(x,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(n,f.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,r,i).next((v=>{v.forEach(((b,x)=>{u=u.insert(b,x)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i)))).next((u=>{o.forEach(((f,m)=>{const v=m.getKey();u.get(v)===null&&(u=u.insert(v,br.newInvalidDocument(v)))}));let h=bd();return u.forEach(((f,m)=>{const v=o.get(f);v!==void 0&&Dd(v.mutation,m,ts.empty(),hn.now()),Vp(n,m)&&(h=h.insert(f,m))})),h}))}}class VM{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return we.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:oi(i.createTime)}})(n)),we.resolve()}getNamedQuery(e,n){return we.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:kM(i.bundledQuery),readTime:oi(i.readTime)}})(n)),we.resolve()}}class UM{constructor(){this.overlays=new xn(tt.comparator),this.qr=new Map}getOverlay(e,n){return we.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ko();return we.forEach(n,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,o)=>{this.St(e,n,o)})),we.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),we.resolve()}getOverlaysForCollection(e,n,r){const i=Ko(),o=n.length+1,u=new tt(n.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const f=h.getNext().value,m=f.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===o&&f.largestBatchId>r&&i.set(f.getKey(),f)}return we.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new xn(((m,v)=>m-v));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>r){let v=o.get(m.largestBatchId);v===null&&(v=Ko(),o=o.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const h=Ko(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((m,v)=>h.set(m,v))),!(h.size()>=i)););return we.resolve(h)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const u=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new rM(n,r));let o=this.qr.get(n);o===void 0&&(o=Lt(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}}class zM{constructor(){this.sessionToken=mr.EMPTY_BYTE_STRING}getSessionToken(e){return we.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,we.resolve()}}class Qb{constructor(){this.Qr=new Qn(er.$r),this.Ur=new Qn(er.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new er(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new er(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new tt(new an([])),r=new er(n,e),i=new er(n,e+1),o=[];return this.Ur.forEachInRange([r,i],(u=>{this.Gr(u),o.push(u.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new tt(new an([])),r=new er(n,e),i=new er(n,e+1);let o=Lt();return this.Ur.forEachInRange([r,i],(u=>{o=o.add(u.key)})),o}containsKey(e){const n=new er(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class er{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return tt.comparator(e.key,n.key)||Ot(e.Yr,n.Yr)}static Kr(e,n){return Ot(e.Yr,n.Yr)||tt.comparator(e.key,n.key)}}class BM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Qn(er.$r)}checkEmpty(e){return we.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new nM(o,n,r,i);this.mutationQueue.push(u);for(const h of i)this.Zr=this.Zr.add(new er(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return we.resolve(u)}lookupMutationBatch(e,n){return we.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),o=i<0?0:i;return we.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return we.resolve(this.mutationQueue.length===0?Bb:this.tr-1)}getAllMutationBatches(e){return we.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new er(n,0),i=new er(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],(u=>{const h=this.Xr(u.Yr);o.push(h)})),we.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Qn(Ot);return n.forEach((i=>{const o=new er(i,0),u=new er(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,u],(h=>{r=r.add(h.Yr)}))})),we.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;tt.isDocumentKey(o)||(o=o.child(""));const u=new er(new tt(o),0);let h=new Qn(Ot);return this.Zr.forEachWhile((f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===i&&(h=h.add(f.Yr)),!0)}),u),we.resolve(this.ti(h))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){Wt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return we.forEach(n.mutations,(i=>{const o=new er(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new er(n,0),i=this.Zr.firstAfterOrEqual(r);return we.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,we.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class FM{constructor(e){this.ri=e,this.docs=(function(){return new xn(tt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,u=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return we.resolve(r?r.document.mutableCopy():br.newInvalidDocument(n))}getEntries(e,n){let r=ra();return n.forEach((i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():br.newInvalidDocument(i))})),we.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=ra();const u=n.path,h=new tt(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:m,value:{document:v}}=f.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||yP(vP(v),r)<=0||(i.has(v.key)||Vp(n,v))&&(o=o.insert(v.key,v.mutableCopy()))}return we.resolve(o)}getAllFromCollectionGroup(e,n,r,i){ht(9500)}ii(e,n){return we.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new HM(this)}getSize(e){return we.resolve(this.size)}}class HM extends MM{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),we.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class $M{constructor(e){this.persistence=e,this.si=new hl((n=>Hb(n)),$b),this.lastRemoteSnapshotVersion=pt.min(),this.highestTargetId=0,this.oi=0,this._i=new Qb,this.targetCount=0,this.ai=jc.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),we.resolve()}getLastRemoteSnapshotVersion(e){return we.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return we.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),we.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),we.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new jc(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,we.resolve()}updateTargetData(e,n){return this.Pr(n),we.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,we.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.si.forEach(((u,h)=>{h.sequenceNumber<=n&&r.get(h.targetId)===null&&(this.si.delete(u),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)})),we.waitFor(o).next((()=>i))}getTargetCount(e){return we.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return we.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),we.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach((u=>{o.push(i.markPotentiallyOrphaned(e,u))})),we.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),we.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return we.resolve(r)}containsKey(e,n){return we.resolve(this._i.containsKey(n))}}class Qk{constructor(e,n){this.ui={},this.overlays={},this.ci=new jp(0),this.li=!1,this.li=!0,this.hi=new zM,this.referenceDelegate=e(this),this.Pi=new $M(this),this.indexManager=new NM,this.remoteDocumentCache=(function(i){return new FM(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new CM(n),this.Ii=new VM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new UM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new BM(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Ge("MemoryPersistence","Starting transaction:",e);const i=new qM(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((o=>this.referenceDelegate.di(i).next((()=>o)))).toPromise().then((o=>(i.raiseOnCommittedEvent(),o)))}Ai(e,n){return we.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class qM extends xP{constructor(e){super(),this.currentSequenceNumber=e}}class Xb{constructor(e){this.persistence=e,this.Ri=new Qb,this.Vi=null}static mi(e){return new Xb(e)}get fi(){if(this.Vi)return this.Vi;throw ht(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),we.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),we.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),we.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return we.forEach(this.fi,(r=>{const i=tt.fromPath(r);return this.gi(e,i).next((o=>{o||n.removeEntry(i,pt.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return we.or([()=>we.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Xm{constructor(e,n){this.persistence=e,this.pi=new hl((r=>EP(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=PM(this,n)}static mi(e,n){return new Xm(e,n)}Ei(){}di(e){return we.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return we.forEach(this.pi,((r,i)=>this.br(e,r,i).next((o=>o?we.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,(u=>this.br(e,u,n).next((h=>{h||(r++,o.removeEntry(u,pt.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),we.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),we.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),we.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),we.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=vm(e.data.value)),n}br(e,n,r){return we.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return we.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Jb{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=Lt(),i=Lt();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Jb(e,n.fromCache,r,i)}}class GM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class YM{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return vI()?8:_P(_r())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ys(e,n).next((u=>{o.result=u})).next((()=>{if(!o.result)return this.ws(e,n,i,r).next((u=>{o.result=u}))})).next((()=>{if(o.result)return;const u=new GM;return this.Ss(e,n,u).next((h=>{if(o.result=h,this.Vs)return this.bs(e,n,u,h.size)}))})).next((()=>o.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(cc()<=Mt.DEBUG&&Ge("QueryEngine","SDK will not create cache indexes for query:",uc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),we.resolve()):(cc()<=Mt.DEBUG&&Ge("QueryEngine","Query:",uc(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(cc()<=Mt.DEBUG&&Ge("QueryEngine","The SDK decides to create cache indexes for query:",uc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ai(n))):we.resolve())}ys(e,n){if(GE(n))return we.resolve(null);let r=ai(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=Wm(n,null,"F"),r=ai(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const u=Lt(...o);return this.ps.getDocuments(e,u).next((h=>this.indexManager.getMinOffset(e,r).next((f=>{const m=this.Ds(n,h);return this.Cs(n,m,u,f.readTime)?this.ys(e,Wm(n,null,"F")):this.vs(e,m,n,f)}))))})))))}ws(e,n,r,i){return GE(n)||i.isEqual(pt.min())?we.resolve(null):this.ps.getDocuments(e,r).next((o=>{const u=this.Ds(n,o);return this.Cs(n,u,r,i)?we.resolve(null):(cc()<=Mt.DEBUG&&Ge("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),uc(n)),this.vs(e,u,n,gP(i,zd)).next((h=>h)))}))}Ds(e,n){let r=new Qn(kk(e));return n.forEach(((i,o)=>{Vp(e,o)&&(r=r.add(o))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return cc()<=Mt.DEBUG&&Ge("QueryEngine","Using full collection scan to execute query:",uc(n)),this.ps.getDocumentsMatchingQuery(e,n,oo.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((o=>(n.forEach((u=>{o=o.insert(u.key,u)})),o)))}}const Zb="LocalStore",KM=3e8;class WM{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new xn(Ot),this.xs=new hl((o=>Hb(o)),$b),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LM(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function QM(t,e,n,r){return new WM(t,e,n,r)}async function Xk(t,e){const n=vt(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((o=>{const u=[],h=[];let f=Lt();for(const m of i){u.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}for(const m of o){h.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}return n.localDocuments.getDocuments(r,f).next((m=>({Ls:m,removedBatchIds:u,addedBatchIds:h})))}))}))}function XM(t,e){const n=vt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,f,m,v){const b=m.batch,x=b.keys();let C=we.resolve();return x.forEach((R=>{C=C.next((()=>v.getEntry(f,R))).next((A=>{const k=m.docVersions.get(R);Wt(k!==null,48541),A.version.compareTo(k)<0&&(b.applyToRemoteDocument(A,m),A.isValidDocument()&&(A.setReadTime(m.commitVersion),v.addEntry(A)))}))})),C.next((()=>h.mutationQueue.removeMutationBatch(f,b)))})(n,r,e,o).next((()=>o.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let f=Lt();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(f=f.add(h.batch.mutations[m].key));return f})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function Jk(t){const e=vt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function JM(t,e){const n=vt(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const u=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const h=[];e.targetChanges.forEach(((v,b)=>{const x=i.get(b);if(!x)return;h.push(n.Pi.removeMatchingKeys(o,v.removedDocuments,b).next((()=>n.Pi.addMatchingKeys(o,v.addedDocuments,b))));let C=x.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(b)!==null?C=C.withResumeToken(mr.EMPTY_BYTE_STRING,pt.min()).withLastLimboFreeSnapshotVersion(pt.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,r)),i=i.insert(b,C),(function(A,k,L){return A.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=KM?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(x,C,v)&&h.push(n.Pi.updateTargetData(o,C))}));let f=ra(),m=Lt();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,v))})),h.push(ZM(o,u,e.documentUpdates).next((v=>{f=v.ks,m=v.qs}))),!r.isEqual(pt.min())){const v=n.Pi.getLastRemoteSnapshotVersion(o).next((b=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));h.push(v)}return we.waitFor(h).next((()=>u.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,f,m))).next((()=>f))})).then((o=>(n.Ms=i,o)))}function ZM(t,e,n){let r=Lt(),i=Lt();return n.forEach((o=>r=r.add(o))),e.getEntries(t,r).next((o=>{let u=ra();return n.forEach(((h,f)=>{const m=o.get(h);f.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(h)),f.isNoDocument()&&f.version.isEqual(pt.min())?(e.removeEntry(h,f.readTime),u=u.insert(h,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),u=u.insert(h,f)):Ge(Zb,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",f.version)})),{ks:u,qs:i}}))}function eO(t,e){const n=vt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Bb),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function tO(t,e){const n=vt(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((o=>o?(i=o,we.resolve(i)):n.Pi.allocateTargetId(r).next((u=>(i=new Wa(e,u,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function R0(t,e,n){const r=vt(t),i=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Qc(u))throw u;Ge(Zb,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function iS(t,e,n){const r=vt(t);let i=pt.min(),o=Lt();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,m,v){const b=vt(f),x=b.xs.get(v);return x!==void 0?we.resolve(b.Ms.get(x)):b.Pi.getTargetData(m,v)})(r,u,ai(e)).next((h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(u,h.targetId).next((f=>{o=f}))})).next((()=>r.Fs.getDocumentsMatchingQuery(u,e,n?i:pt.min(),n?o:Lt()))).next((h=>(nO(r,FP(e),h),{documents:h,Qs:o})))))}function nO(t,e,n){let r=t.Os.get(e)||pt.min();n.forEach(((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),t.Os.set(e,r)}class aS{constructor(){this.activeTargetIds=KP()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rO{constructor(){this.Mo=new aS,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new aS,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class sO{Oo(e){}shutdown(){}}const oS="ConnectivityMonitor";class lS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ge(oS,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ge(oS,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Zf=null;function I0(){return Zf===null?Zf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Zf++,"0x"+Zf.toString(16)}const jy="RestConnection",iO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class aO{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Gm?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,o){const u=I0(),h=this.zo(e,n.toUriEncodedString());Ge(jy,`Sending RPC '${e}' ${u}:`,h,r);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,i,o);const{host:m}=new URL(h),v=ll(m);return this.Jo(e,h,f,r,v).then((b=>(Ge(jy,`Received RPC '${e}' ${u}: `,b),b)),(b=>{throw Tc(jy,`RPC '${e}' ${u} failed with error: `,b,"url: ",h,"request:",r),b}))}Ho(e,n,r,i,o,u){return this.Go(e,n,r,i,o)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Kc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,o)=>e[o]=i)),r&&r.headers.forEach(((i,o)=>e[o]=i))}zo(e,n){const r=iO[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class oO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const gr="WebChannelConnection";class lO extends aO{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){const u=I0();return new Promise(((h,f)=>{const m=new tk;m.setWithCredentials(!0),m.listenOnce(nk.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case gm.NO_ERROR:const b=m.getResponseJson();Ge(gr,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(b)),h(b);break;case gm.TIMEOUT:Ge(gr,`RPC '${e}' ${u} timed out`),f(new Be(pe.DEADLINE_EXCEEDED,"Request time out"));break;case gm.HTTP_ERROR:const x=m.getStatus();if(Ge(gr,`RPC '${e}' ${u} failed with status:`,x,"response text:",m.getResponseText()),x>0){let C=m.getResponseJson();Array.isArray(C)&&(C=C[0]);const R=C?.error;if(R&&R.status&&R.message){const A=(function(L){const U=L.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(U)>=0?U:pe.UNKNOWN})(R.status);f(new Be(A,R.message))}else f(new Be(pe.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new Be(pe.UNAVAILABLE,"Connection failed."));break;default:ht(9055,{l_:e,streamId:u,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{Ge(gr,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(i);Ge(gr,`RPC '${e}' ${u} sending request:`,i),m.send(n,"POST",v,r,15)}))}T_(e,n,r){const i=I0(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=ik(),h=sk(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,n,r),f.encodeInitMessageHeaders=!0;const v=o.join("");Ge(gr,`Creating RPC '${e}' stream ${i}: ${v}`,f);const b=u.createWebChannel(v,f);this.I_(b);let x=!1,C=!1;const R=new oO({Yo:k=>{C?Ge(gr,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(x||(Ge(gr,`Opening RPC '${e}' stream ${i} transport.`),b.open(),x=!0),Ge(gr,`RPC '${e}' stream ${i} sending:`,k),b.send(k))},Zo:()=>b.close()}),A=(k,L,U)=>{k.listen(L,(I=>{try{U(I)}catch(M){setTimeout((()=>{throw M}),0)}}))};return A(b,yd.EventType.OPEN,(()=>{C||(Ge(gr,`RPC '${e}' stream ${i} transport opened.`),R.o_())})),A(b,yd.EventType.CLOSE,(()=>{C||(C=!0,Ge(gr,`RPC '${e}' stream ${i} transport closed`),R.a_(),this.E_(b))})),A(b,yd.EventType.ERROR,(k=>{C||(C=!0,Tc(gr,`RPC '${e}' stream ${i} transport errored. Name:`,k.name,"Message:",k.message),R.a_(new Be(pe.UNAVAILABLE,"The operation could not be completed")))})),A(b,yd.EventType.MESSAGE,(k=>{if(!C){const L=k.data[0];Wt(!!L,16349);const U=L,I=U?.error||U[0]?.error;if(I){Ge(gr,`RPC '${e}' stream ${i} received error:`,I);const M=I.status;let z=(function(S){const j=Ln[S];if(j!==void 0)return Uk(j)})(M),H=I.message;z===void 0&&(z=pe.INTERNAL,H="Unknown error status: "+M+" with message "+I.message),C=!0,R.a_(new Be(z,H)),b.close()}else Ge(gr,`RPC '${e}' stream ${i} received:`,L),R.u_(L)}})),A(h,rk.STAT_EVENT,(k=>{k.stat===b0.PROXY?Ge(gr,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===b0.NOPROXY&&Ge(gr,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{R.__()}),0),R}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Dy(){return typeof document<"u"?document:null}function $p(t){return new hM(t,!0)}class Zk{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Ge("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const cS="PersistentStream";class eN{constructor(e,n,r,i,o,u,h,f){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Zk(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===pe.RESOURCE_EXHAUSTED?(na(n.toString()),na("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new Be(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ge(cS,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Ge(cS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class cO extends eN{constructor(e,n,r,i,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,u),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=pM(this.serializer,e),r=(function(o){if(!("targetChange"in o))return pt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?pt.min():u.readTime?oi(u.readTime):pt.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=A0(this.serializer),n.addTarget=(function(o,u){let h;const f=u.target;if(h=S0(f)?{documents:yM(o,f)}:{query:bM(o,f).ft},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=Fk(o,u.resumeToken);const m=C0(o,u.expectedCount);m!==null&&(h.expectedCount=m)}else if(u.snapshotVersion.compareTo(pt.min())>0){h.readTime=Qm(o,u.snapshotVersion.toTimestamp());const m=C0(o,u.expectedCount);m!==null&&(h.expectedCount=m)}return h})(this.serializer,e);const r=_M(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=A0(this.serializer),n.removeTarget=e,this.q_(n)}}class uO extends eN{constructor(e,n,r,i,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,u),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Wt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Wt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Wt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=vM(e.writeResults,e.commitTime),r=oi(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=A0(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>gM(this.serializer,r)))};this.q_(n)}}class dO{}class hO extends dO{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Be(pe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,u])=>this.connection.Go(e,k0(n,r),i,o,u))).catch((o=>{throw o.name==="FirebaseError"?(o.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Be(pe.UNKNOWN,o.toString())}))}Ho(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Ho(e,k0(n,r),i,u,h,o))).catch((u=>{throw u.name==="FirebaseError"?(u.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Be(pe.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class fO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(na(n),this.aa=!1):Ge("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const rl="RemoteStore";class mO{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((u=>{r.enqueueAndForget((async()=>{fl(this)&&(Ge(rl,"Restarting streams for network reachability change."),await(async function(f){const m=vt(f);m.Ea.add(4),await fh(m),m.Ra.set("Unknown"),m.Ea.delete(4),await qp(m)})(this))}))})),this.Ra=new fO(r,i)}}async function qp(t){if(fl(t))for(const e of t.da)await e(!0)}async function fh(t){for(const e of t.da)await e(!1)}function tN(t,e){const n=vt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),r1(n)?n1(n):Xc(n).O_()&&t1(n,e))}function e1(t,e){const n=vt(t),r=Xc(n);n.Ia.delete(e),r.O_()&&nN(n,e),n.Ia.size===0&&(r.O_()?r.L_():fl(n)&&n.Ra.set("Unknown"))}function t1(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Xc(t).Y_(e)}function nN(t,e){t.Va.Ue(e),Xc(t).Z_(e)}function n1(t){t.Va=new lM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Xc(t).start(),t.Ra.ua()}function r1(t){return fl(t)&&!Xc(t).x_()&&t.Ia.size>0}function fl(t){return vt(t).Ea.size===0}function rN(t){t.Va=void 0}async function pO(t){t.Ra.set("Online")}async function gO(t){t.Ia.forEach(((e,n)=>{t1(t,e)}))}async function vO(t,e){rN(t),r1(t)?(t.Ra.ha(e),n1(t)):t.Ra.set("Unknown")}async function yO(t,e,n){if(t.Ra.set("Online"),e instanceof Bk&&e.state===2&&e.cause)try{await(async function(i,o){const u=o.cause;for(const h of o.targetIds)i.Ia.has(h)&&(await i.remoteSyncer.rejectListen(h,u),i.Ia.delete(h),i.Va.removeTarget(h))})(t,e)}catch(r){Ge(rl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Jm(t,r)}else if(e instanceof xm?t.Va.Ze(e):e instanceof zk?t.Va.st(e):t.Va.tt(e),!n.isEqual(pt.min()))try{const r=await Jk(t.localStore);n.compareTo(r)>=0&&await(function(o,u){const h=o.Va.Tt(u);return h.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=o.Ia.get(m);v&&o.Ia.set(m,v.withResumeToken(f.resumeToken,u))}})),h.targetMismatches.forEach(((f,m)=>{const v=o.Ia.get(f);if(!v)return;o.Ia.set(f,v.withResumeToken(mr.EMPTY_BYTE_STRING,v.snapshotVersion)),nN(o,f);const b=new Wa(v.target,f,m,v.sequenceNumber);t1(o,b)})),o.remoteSyncer.applyRemoteEvent(h)})(t,n)}catch(r){Ge(rl,"Failed to raise snapshot:",r),await Jm(t,r)}}async function Jm(t,e,n){if(!Qc(e))throw e;t.Ea.add(1),await fh(t),t.Ra.set("Offline"),n||(n=()=>Jk(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Ge(rl,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await qp(t)}))}function sN(t,e){return e().catch((n=>Jm(t,n,e)))}async function Gp(t){const e=vt(t),n=ho(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Bb;for(;bO(e);)try{const i=await eO(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,xO(e,i)}catch(i){await Jm(e,i)}iN(e)&&aN(e)}function bO(t){return fl(t)&&t.Ta.length<10}function xO(t,e){t.Ta.push(e);const n=ho(t);n.O_()&&n.X_&&n.ea(e.mutations)}function iN(t){return fl(t)&&!ho(t).x_()&&t.Ta.length>0}function aN(t){ho(t).start()}async function _O(t){ho(t).ra()}async function wO(t){const e=ho(t);for(const n of t.Ta)e.ea(n.mutations)}async function EO(t,e,n){const r=t.Ta.shift(),i=Yb.from(r,e,n);await sN(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Gp(t)}async function SO(t,e){e&&ho(t).X_&&await(async function(r,i){if((function(u){return iM(u)&&u!==pe.ABORTED})(i.code)){const o=r.Ta.shift();ho(r).B_(),await sN(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i))),await Gp(r)}})(t,e),iN(t)&&aN(t)}async function uS(t,e){const n=vt(t);n.asyncQueue.verifyOperationInProgress(),Ge(rl,"RemoteStore received new credentials");const r=fl(n);n.Ea.add(3),await fh(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await qp(n)}async function TO(t,e){const n=vt(t);e?(n.Ea.delete(2),await qp(n)):e||(n.Ea.add(2),await fh(n),n.Ra.set("Unknown"))}function Xc(t){return t.ma||(t.ma=(function(n,r,i){const o=vt(n);return o.sa(),new cO(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:pO.bind(null,t),t_:gO.bind(null,t),r_:vO.bind(null,t),H_:yO.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),r1(t)?n1(t):t.Ra.set("Unknown")):(await t.ma.stop(),rN(t))}))),t.ma}function ho(t){return t.fa||(t.fa=(function(n,r,i){const o=vt(n);return o.sa(),new uO(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:_O.bind(null,t),r_:SO.bind(null,t),ta:wO.bind(null,t),na:EO.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Gp(t)):(await t.fa.stop(),t.Ta.length>0&&(Ge(rl,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class s1{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Wi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const u=Date.now()+r,h=new s1(e,n,u,i,o);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Be(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function i1(t,e){if(na("AsyncQueue",`${e}: ${t}`),Qc(t))return new Be(pe.UNAVAILABLE,`${e}: ${t}`);throw t}class bc{static emptySet(e){return new bc(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||tt.comparator(n.key,r.key):(n,r)=>tt.comparator(n.key,r.key),this.keyedMap=bd(),this.sortedSet=new xn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof bc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new bc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class dS{constructor(){this.ga=new xn(tt.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ht(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Dc{constructor(e,n,r,i,o,u,h,f,m){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,n,r,i,o){const u=[];return n.forEach((h=>{u.push({type:0,doc:h})})),new Dc(e,n,bc.emptySet(n),u,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class CO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class kO{constructor(){this.queries=hS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=vt(n),o=i.queries;i.queries=hS(),o.forEach(((u,h)=>{for(const f of h.Sa)f.onError(r)}))})(this,new Be(pe.ABORTED,"Firestore shutting down"))}}function hS(){return new hl((t=>Ck(t)),Lp)}async function a1(t,e){const n=vt(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new CO,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(u){const h=i1(u,`Initialization of query '${uc(e.query)}' failed`);return void e.onError(h)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&l1(n)}async function o1(t,e){const n=vt(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const u=o.Sa.indexOf(e);u>=0&&(o.Sa.splice(u,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function NO(t,e){const n=vt(t);let r=!1;for(const i of e){const o=i.query,u=n.queries.get(o);if(u){for(const h of u.Sa)h.Fa(i)&&(r=!0);u.wa=i}}r&&l1(n)}function AO(t,e,n){const r=vt(t),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(n);r.queries.delete(e)}function l1(t){t.Ca.forEach((e=>{e.next()}))}var j0,fS;(fS=j0||(j0={})).Ma="default",fS.Cache="cache";class c1{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Dc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Dc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==j0.Cache}}class oN{constructor(e){this.key=e}}class lN{constructor(e){this.key=e}}class RO{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Lt(),this.mutatedKeys=Lt(),this.eu=kk(e),this.tu=new bc(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new dS,i=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,u=i,h=!1;const f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((v,b)=>{const x=i.get(v),C=Vp(this.query,b)?b:null,R=!!x&&this.mutatedKeys.has(x.key),A=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let k=!1;x&&C?x.data.isEqual(C.data)?R!==A&&(r.track({type:3,doc:C}),k=!0):this.su(x,C)||(r.track({type:2,doc:C}),k=!0,(f&&this.eu(C,f)>0||m&&this.eu(C,m)<0)&&(h=!0)):!x&&C?(r.track({type:0,doc:C}),k=!0):x&&!C&&(r.track({type:1,doc:x}),k=!0,(f||m)&&(h=!0)),k&&(C?(u=u.add(C),o=A?o.add(v):o.delete(v)):(u=u.delete(v),o=o.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),o=o.delete(v.key),r.track({type:1,doc:v})}return{tu:u,iu:r,Cs:h,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,b)=>(function(C,R){const A=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ht(20277,{Rt:k})}};return A(C)-A(R)})(v.type,b.type)||this.eu(v.doc,b.doc))),this.ou(r),i=i??!1;const h=n&&!i?this._u():[],f=this.Xa.size===0&&this.current&&!i?1:0,m=f!==this.Za;return this.Za=f,u.length!==0||m?{snapshot:new Dc(this.query,e.tu,o,u,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new dS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Lt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new lN(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new oN(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Lt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Dc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const u1="SyncEngine";class IO{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class jO{constructor(e){this.key=e,this.hu=!1}}class DO{constructor(e,n,r,i,o,u){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new hl((h=>Ck(h)),Lp),this.Iu=new Map,this.Eu=new Set,this.du=new xn(tt.comparator),this.Au=new Map,this.Ru=new Qb,this.Vu={},this.mu=new Map,this.fu=jc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function PO(t,e,n=!0){const r=mN(t);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await cN(r,e,n,!0),i}async function MO(t,e){const n=mN(t);await cN(n,e,!0,!1)}async function cN(t,e,n,r){const i=await tO(t.localStore,ai(e)),o=i.targetId,u=t.sharedClientState.addLocalQueryTarget(o,n);let h;return r&&(h=await OO(t,e,o,u==="current",i.resumeToken)),t.isPrimaryClient&&n&&tN(t.remoteStore,i),h}async function OO(t,e,n,r,i){t.pu=(b,x,C)=>(async function(A,k,L,U){let I=k.view.ru(L);I.Cs&&(I=await iS(A.localStore,k.query,!1).then((({documents:E})=>k.view.ru(E,I))));const M=U&&U.targetChanges.get(k.targetId),z=U&&U.targetMismatches.get(k.targetId)!=null,H=k.view.applyChanges(I,A.isPrimaryClient,M,z);return pS(A,k.targetId,H.au),H.snapshot})(t,b,x,C);const o=await iS(t.localStore,e,!0),u=new RO(e,o.Qs),h=u.ru(o.documents),f=hh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),m=u.applyChanges(h,t.isPrimaryClient,f);pS(t,n,m.au);const v=new IO(e,n,u);return t.Tu.set(e,v),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),m.snapshot}async function LO(t,e,n){const r=vt(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter((u=>!Lp(u,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await R0(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&e1(r.remoteStore,i.targetId),D0(r,i.targetId)})).catch(Wc)):(D0(r,i.targetId),await R0(r.localStore,i.targetId,!0))}async function VO(t,e){const n=vt(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),e1(n.remoteStore,r.targetId))}async function UO(t,e,n){const r=GO(t);try{const i=await(function(u,h){const f=vt(u),m=hn.now(),v=h.reduce(((C,R)=>C.add(R.key)),Lt());let b,x;return f.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let R=ra(),A=Lt();return f.Ns.getEntries(C,v).next((k=>{R=k,R.forEach(((L,U)=>{U.isValidDocument()||(A=A.add(L))}))})).next((()=>f.localDocuments.getOverlayedDocuments(C,R))).next((k=>{b=k;const L=[];for(const U of h){const I=eM(U,b.get(U.key).overlayedDocument);I!=null&&L.push(new vo(U.key,I,bk(I.value.mapValue),Nr.exists(!0)))}return f.mutationQueue.addMutationBatch(C,m,L,h)})).next((k=>{x=k;const L=k.applyToLocalDocumentSet(b,A);return f.documentOverlayCache.saveOverlays(C,k.batchId,L)}))})).then((()=>({batchId:x.batchId,changes:Ak(b)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(u,h,f){let m=u.Vu[u.currentUser.toKey()];m||(m=new xn(Ot)),m=m.insert(h,f),u.Vu[u.currentUser.toKey()]=m})(r,i.batchId,n),await mh(r,i.changes),await Gp(r.remoteStore)}catch(i){const o=i1(i,"Failed to persist write");n.reject(o)}}async function uN(t,e){const n=vt(t);try{const r=await JM(n.localStore,e);e.targetChanges.forEach(((i,o)=>{const u=n.Au.get(o);u&&(Wt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?u.hu=!0:i.modifiedDocuments.size>0?Wt(u.hu,14607):i.removedDocuments.size>0&&(Wt(u.hu,42227),u.hu=!1))})),await mh(n,r,e)}catch(r){await Wc(r)}}function mS(t,e,n){const r=vt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((o,u)=>{const h=u.view.va(e);h.snapshot&&i.push(h.snapshot)})),(function(u,h){const f=vt(u);f.onlineState=h;let m=!1;f.queries.forEach(((v,b)=>{for(const x of b.Sa)x.va(h)&&(m=!0)})),m&&l1(f)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function zO(t,e,n){const r=vt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),o=i&&i.key;if(o){let u=new xn(tt.comparator);u=u.insert(o,br.newNoDocument(o,pt.min()));const h=Lt().add(o),f=new Hp(pt.min(),new Map,new xn(Ot),u,h);await uN(r,f),r.du=r.du.remove(o),r.Au.delete(e),d1(r)}else await R0(r.localStore,e,!1).then((()=>D0(r,e,n))).catch(Wc)}async function BO(t,e){const n=vt(t),r=e.batch.batchId;try{const i=await XM(n.localStore,e);hN(n,r,null),dN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await mh(n,i)}catch(i){await Wc(i)}}async function FO(t,e,n){const r=vt(t);try{const i=await(function(u,h){const f=vt(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return f.mutationQueue.lookupMutationBatch(m,h).next((b=>(Wt(b!==null,37113),v=b.keys(),f.mutationQueue.removeMutationBatch(m,b)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,h))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>f.localDocuments.getDocuments(m,v)))}))})(r.localStore,e);hN(r,e,n),dN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await mh(r,i)}catch(i){await Wc(i)}}function dN(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function hN(t,e,n){const r=vt(t);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function D0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||fN(t,r)}))}function fN(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(e1(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),d1(t))}function pS(t,e,n){for(const r of n)r instanceof oN?(t.Ru.addReference(r.key,e),HO(t,r)):r instanceof lN?(Ge(u1,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||fN(t,r.key)):ht(19791,{wu:r})}function HO(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Ge(u1,"New document in limbo: "+n),t.Eu.add(r),d1(t))}function d1(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new tt(an.fromString(e)),r=t.fu.next();t.Au.set(r,new jO(n)),t.du=t.du.insert(n,r),tN(t.remoteStore,new Wa(ai(Op(n.path)),r,"TargetPurposeLimboResolution",jp.ce))}}async function mh(t,e,n){const r=vt(t),i=[],o=[],u=[];r.Tu.isEmpty()||(r.Tu.forEach(((h,f)=>{u.push(r.pu(f,e,n).then((m=>{if((m||n)&&r.isPrimaryClient){const v=m?!m.fromCache:n?.targetChanges.get(f.targetId)?.current;r.sharedClientState.updateQueryState(f.targetId,v?"current":"not-current")}if(m){i.push(m);const v=Jb.As(f.targetId,m);o.push(v)}})))})),await Promise.all(u),r.Pu.H_(i),await(async function(f,m){const v=vt(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>we.forEach(m,(x=>we.forEach(x.Es,(C=>v.persistence.referenceDelegate.addReference(b,x.targetId,C))).next((()=>we.forEach(x.ds,(C=>v.persistence.referenceDelegate.removeReference(b,x.targetId,C)))))))))}catch(b){if(!Qc(b))throw b;Ge(Zb,"Failed to update sequence numbers: "+b)}for(const b of m){const x=b.targetId;if(!b.fromCache){const C=v.Ms.get(x),R=C.snapshotVersion,A=C.withLastLimboFreeSnapshotVersion(R);v.Ms=v.Ms.insert(x,A)}}})(r.localStore,o))}async function $O(t,e){const n=vt(t);if(!n.currentUser.isEqual(e)){Ge(u1,"User change. New user:",e.toKey());const r=await Xk(n.localStore,e);n.currentUser=e,(function(o,u){o.mu.forEach((h=>{h.forEach((f=>{f.reject(new Be(pe.CANCELLED,u))}))})),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await mh(n,r.Ls)}}function qO(t,e){const n=vt(t),r=n.Au.get(e);if(r&&r.hu)return Lt().add(r.key);{let i=Lt();const o=n.Iu.get(e);if(!o)return i;for(const u of o){const h=n.Tu.get(u);i=i.unionWith(h.view.nu)}return i}}function mN(t){const e=vt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=uN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zO.bind(null,e),e.Pu.H_=NO.bind(null,e.eventManager),e.Pu.yu=AO.bind(null,e.eventManager),e}function GO(t){const e=vt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FO.bind(null,e),e}class Zm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$p(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return QM(this.persistence,new YM,e.initialUser,this.serializer)}Cu(e){return new Qk(Xb.mi,this.serializer)}Du(e){return new rO}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zm.provider={build:()=>new Zm};class YO extends Zm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Wt(this.persistence.referenceDelegate instanceof Xm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new jM(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ur.withCacheSize(this.cacheSizeBytes):Ur.DEFAULT;return new Qk((r=>Xm.mi(r,n)),this.serializer)}}class P0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>mS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$O.bind(null,this.syncEngine),await TO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new kO})()}createDatastore(e){const n=$p(e.databaseInfo.databaseId),r=(function(o){return new lO(o)})(e.databaseInfo);return(function(o,u,h,f){return new hO(o,u,h,f)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,o,u,h){return new mO(r,i,o,u,h)})(this.localStore,this.datastore,e.asyncQueue,(n=>mS(this.syncEngine,n,0)),(function(){return lS.v()?new lS:new sO})())}createSyncEngine(e,n){return(function(i,o,u,h,f,m,v){const b=new DO(i,o,u,h,f,m);return v&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=vt(n);Ge(rl,"RemoteStore shutting down."),r.Ea.add(5),await fh(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}P0.provider={build:()=>new P0};class h1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):na("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const fo="FirestoreClient";class KO{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=vr.UNAUTHENTICATED,this.clientId=zb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async u=>{Ge(fo,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(Ge(fo,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=i1(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Py(t,e){t.asyncQueue.verifyOperationInProgress(),Ge(fo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await Xk(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function gS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await WO(t);Ge(fo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>uS(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>uS(e.remoteStore,i))),t._onlineComponents=e}async function WO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ge(fo,"Using user provided OfflineComponentProvider");try{await Py(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===pe.FAILED_PRECONDITION||i.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Tc("Error using user provided cache. Falling back to memory cache: "+n),await Py(t,new Zm)}}else Ge(fo,"Using default OfflineComponentProvider"),await Py(t,new YO(void 0));return t._offlineComponents}async function pN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ge(fo,"Using user provided OnlineComponentProvider"),await gS(t,t._uninitializedComponentsProvider._online)):(Ge(fo,"Using default OnlineComponentProvider"),await gS(t,new P0))),t._onlineComponents}function QO(t){return pN(t).then((e=>e.syncEngine))}async function ep(t){const e=await pN(t),n=e.eventManager;return n.onListen=PO.bind(null,e.syncEngine),n.onUnlisten=LO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=MO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=VO.bind(null,e.syncEngine),n}function XO(t,e,n={}){const r=new Wi;return t.asyncQueue.enqueueAndForget((async()=>(function(o,u,h,f,m){const v=new h1({next:x=>{v.Nu(),u.enqueueAndForget((()=>o1(o,b)));const C=x.docs.has(h);!C&&x.fromCache?m.reject(new Be(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&x.fromCache&&f&&f.source==="server"?m.reject(new Be(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(x)},error:x=>m.reject(x)}),b=new c1(Op(h.path),v,{includeMetadataChanges:!0,qa:!0});return a1(o,b)})(await ep(t),t.asyncQueue,e,n,r))),r.promise}function JO(t,e,n={}){const r=new Wi;return t.asyncQueue.enqueueAndForget((async()=>(function(o,u,h,f,m){const v=new h1({next:x=>{v.Nu(),u.enqueueAndForget((()=>o1(o,b))),x.fromCache&&f.source==="server"?m.reject(new Be(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(x)},error:x=>m.reject(x)}),b=new c1(h,v,{includeMetadataChanges:!0,qa:!0});return a1(o,b)})(await ep(t),t.asyncQueue,e,n,r))),r.promise}function gN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const vS=new Map;const vN="firestore.googleapis.com",yS=!0;class bS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Be(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vN,this.ssl=yS}else this.host=e.host,this.ssl=e.ssl??yS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Wk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<RM)throw new Be(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gN(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Be(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Be(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Be(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Be(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Be(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new sP;switch(r.type){case"firstParty":return new lP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Be(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=vS.get(n);r&&(Ge("ComponentProvider","Removing Datastore"),vS.delete(n),r.terminate())})(this),Promise.resolve()}}function ZO(t,e,n,r={}){t=kr(t,Yp);const i=ll(e),o=t._getSettings(),u={...o,emulatorOptions:t._getEmulatorOptions()},h=`${e}:${n}`;i&&(mb(`https://${h}`),pb("Firestore",!0)),o.host!==vN&&o.host!==h&&Tc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...o,host:h,ssl:i,emulatorOptions:r};if(!Ji(f,u)&&(t._setSettings(f),r.mockUserToken)){let m,v;if(typeof r.mockUserToken=="string")m=r.mockUserToken,v=vr.MOCK_USER;else{m=MT(r.mockUserToken,t._app?.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new Be(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new vr(b)}t._authCredentials=new iP(new ok(m,v))}}class gi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new gi(this.firestore,e,this._query)}}class En{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new so(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new En(this.firestore,e,this._key)}toJSON(){return{type:En._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(uh(n,En._jsonSchema))return new En(e,r||null,new tt(an.fromString(n.referencePath)))}}En._jsonSchemaVersion="firestore/documentReference/1.0",En._jsonSchema={type:Hn("string",En._jsonSchemaVersion),referencePath:Hn("string")};class so extends gi{constructor(e,n,r){super(e,n,Op(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new En(this.firestore,null,new tt(e))}withConverter(e){return new so(this.firestore,e,this._path)}}function _t(t,e,...n){if(t=at(t),lk("collection","path",e),t instanceof Yp){const r=an.fromString(e,...n);return DE(r),new so(t,null,r)}{if(!(t instanceof En||t instanceof so))throw new Be(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(an.fromString(e,...n));return DE(r),new so(t.firestore,null,r)}}function Re(t,e,...n){if(t=at(t),arguments.length===1&&(e=zb.newId()),lk("doc","path",e),t instanceof Yp){const r=an.fromString(e,...n);return jE(r),new En(t,null,new tt(r))}{if(!(t instanceof En||t instanceof so))throw new Be(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(an.fromString(e,...n));return jE(r),new En(t.firestore,t instanceof so?t.converter:null,new tt(r))}}const xS="AsyncQueue";class _S{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Zk(this,"async_queue_retry"),this._c=()=>{const r=Dy();r&&Ge(xS,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Dy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Dy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Wi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Qc(e))throw e;Ge(xS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,na("INTERNAL UNHANDLED ERROR: ",wS(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=s1.createAndSchedule(this,e,n,r,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&ht(47125,{Pc:wS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function wS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function ES(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}class hi extends Yp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new _S,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _S(e),this._firestoreClient=void 0,await e}}}function e7(t,e){const n=typeof t=="object"?t:yb(),r=typeof t=="string"?t:Gm,i=_p(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=jT("firestore");o&&ZO(i,...o)}return i}function ph(t){if(t._terminated)throw new Be(pe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||t7(t),t._firestoreClient}function t7(t){const e=t._freezeSettings(),n=(function(i,o,u,h){return new CP(i,o,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,gN(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new KO(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(t._componentsProvider))}class ps{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ps(mr.fromBase64String(e))}catch(n){throw new Be(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ps(mr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ps._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(uh(e,ps._jsonSchema))return ps.fromBase64String(e.bytes)}}ps._jsonSchemaVersion="firestore/bytes/1.0",ps._jsonSchema={type:Hn("string",ps._jsonSchemaVersion),bytes:Hn("string")};class gh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Be(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ml{constructor(e){this._methodName=e}}class li{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Be(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Be(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ot(this._lat,e._lat)||Ot(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:li._jsonSchemaVersion}}static fromJSON(e){if(uh(e,li._jsonSchema))return new li(e.latitude,e.longitude)}}li._jsonSchemaVersion="firestore/geoPoint/1.0",li._jsonSchema={type:Hn("string",li._jsonSchemaVersion),latitude:Hn("number"),longitude:Hn("number")};class ci{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ci._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(uh(e,ci._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ci(e.vectorValues);throw new Be(pe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ci._jsonSchemaVersion="firestore/vectorValue/1.0",ci._jsonSchema={type:Hn("string",ci._jsonSchemaVersion),vectorValues:Hn("object")};const n7=/^__.*__$/;class r7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new vo(e,this.data,this.fieldMask,n,this.fieldTransforms):new dh(e,this.data,n,this.fieldTransforms)}}class yN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new vo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function bN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ht(40011,{Ac:t})}}class Kp{constructor(e,n,r,i,o,u){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Kp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return tp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(bN(this.Ac)&&n7.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class s7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||$p(e)}Cc(e,n,r,i=!1){return new Kp({Ac:e,methodName:n,Dc:r,path:hr.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jc(t){const e=t._freezeSettings(),n=$p(t._databaseId);return new s7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function f1(t,e,n,r,i,o={}){const u=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);y1("Data must be an object, but it was:",u,r);const h=SN(r,u);let f,m;if(o.merge)f=new ts(u.fieldMask),m=u.fieldTransforms;else if(o.mergeFields){const v=[];for(const b of o.mergeFields){const x=M0(e,b,n);if(!u.contains(x))throw new Be(pe.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);CN(v,x)||v.push(x)}f=new ts(v),m=u.fieldTransforms.filter((b=>f.covers(b.field)))}else f=null,m=u.fieldTransforms;return new r7(new zr(h),f,m)}class vh extends ml{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vh}}function xN(t,e,n){return new Kp({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class m1 extends ml{_toFieldTransform(e){return new zp(e.path,new qd)}isEqual(e){return e instanceof m1}}class p1 extends ml{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=xN(this,e,!0),r=this.vc.map((o=>pl(o,n))),i=new Rc(r);return new zp(e.path,i)}isEqual(e){return e instanceof p1&&Ji(this.vc,e.vc)}}class g1 extends ml{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=xN(this,e,!0),r=this.vc.map((o=>pl(o,n))),i=new Ic(r);return new zp(e.path,i)}isEqual(e){return e instanceof g1&&Ji(this.vc,e.vc)}}class v1 extends ml{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new Gd(e.serializer,jk(e.serializer,this.Fc));return new zp(e.path,n)}isEqual(e){return e instanceof v1&&this.Fc===e.Fc}}function _N(t,e,n,r){const i=t.Cc(1,e,n);y1("Data must be an object, but it was:",i,r);const o=[],u=zr.empty();go(r,((f,m)=>{const v=b1(e,f,n);m=at(m);const b=i.yc(v);if(m instanceof vh)o.push(v);else{const x=pl(m,b);x!=null&&(o.push(v),u.set(v,x))}}));const h=new ts(o);return new yN(u,h,i.fieldTransforms)}function wN(t,e,n,r,i,o){const u=t.Cc(1,e,n),h=[M0(e,r,n)],f=[i];if(o.length%2!=0)throw new Be(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<o.length;x+=2)h.push(M0(e,o[x])),f.push(o[x+1]);const m=[],v=zr.empty();for(let x=h.length-1;x>=0;--x)if(!CN(m,h[x])){const C=h[x];let R=f[x];R=at(R);const A=u.yc(C);if(R instanceof vh)m.push(C);else{const k=pl(R,A);k!=null&&(m.push(C),v.set(C,k))}}const b=new ts(m);return new yN(v,b,u.fieldTransforms)}function EN(t,e,n,r=!1){return pl(n,t.Cc(r?4:3,e))}function pl(t,e){if(TN(t=at(t)))return y1("Unsupported field value:",e,t),SN(t,e);if(t instanceof ml)return(function(r,i){if(!bN(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const o=[];let u=0;for(const h of r){let f=pl(h,i.wc(u));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),u++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=at(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jk(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=hn.fromDate(r);return{timestampValue:Qm(i.serializer,o)}}if(r instanceof hn){const o=new hn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qm(i.serializer,o)}}if(r instanceof li)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ps)return{bytesValue:Fk(i.serializer,r._byteString)};if(r instanceof En){const o=i.databaseId,u=r.firestore._databaseId;if(!u.isEqual(o))throw i.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Wb(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ci)return(function(u,h){return{mapValue:{fields:{[vk]:{stringValue:yk},[Ym]:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw h.Sc("VectorValues must only contain numeric values.");return Gb(h.serializer,m)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Ip(r)}`)})(t,e)}function SN(t,e){const n={};return dk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):go(t,((r,i)=>{const o=pl(i,e.mc(r));o!=null&&(n[r]=o)})),{mapValue:{fields:n}}}function TN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof hn||t instanceof li||t instanceof ps||t instanceof En||t instanceof ml||t instanceof ci)}function y1(t,e,n){if(!TN(n)||!ck(n)){const r=Ip(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function M0(t,e,n){if((e=at(e))instanceof gh)return e._internalPath;if(typeof e=="string")return b1(t,e);throw tp("Field path arguments must be of type string or ",t,!1,void 0,n)}const i7=new RegExp("[~\\*/\\[\\]]");function b1(t,e,n){if(e.search(i7)>=0)throw tp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new gh(...e.split("."))._internalPath}catch{throw tp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function tp(t,e,n,r,i){const o=r&&!r.isEmpty(),u=i!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(o||u)&&(f+=" (found",o&&(f+=` in field ${r}`),u&&(f+=` in document ${i}`),f+=")"),new Be(pe.INVALID_ARGUMENT,h+t+f)}function CN(t,e){return t.some((n=>n.isEqual(e)))}class x1{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new En(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new a7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Wp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class a7 extends x1{data(){return super.data()}}function Wp(t,e){return typeof e=="string"?b1(t,e):e instanceof gh?e._internalPath:e._delegate._internalPath}function kN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Be(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _1{}class Qp extends _1{}function Br(t,e,...n){let r=[];e instanceof _1&&r.push(e),r=r.concat(n),(function(o){const u=o.filter((f=>f instanceof w1)).length,h=o.filter((f=>f instanceof Xp)).length;if(u>1||u>0&&h>0)throw new Be(pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class Xp extends Qp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Xp(e,n,r)}_apply(e){const n=this._parse(e);return NN(e._query,n),new gi(e.firestore,e.converter,T0(e._query,n))}_parse(e){const n=Jc(e.firestore);return(function(o,u,h,f,m,v,b){let x;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Be(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){TS(b,v);const R=[];for(const A of b)R.push(SS(f,o,A));x={arrayValue:{values:R}}}else x=SS(f,o,b)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||TS(b,v),x=EN(h,u,b,v==="in"||v==="not-in");return Fn.create(m,v,x)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function zi(t,e,n){const r=e,i=Wp("where",t);return Xp._create(i,r,n)}class w1 extends _1{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new w1(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Os.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let u=i;const h=o.getFlattenedFilters();for(const f of h)NN(u,f),u=T0(u,f)})(e._query,n),new gi(e.firestore,e.converter,T0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class E1 extends Qp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new E1(e,n)}_apply(e){const n=(function(i,o,u){if(i.startAt!==null)throw new Be(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Be(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $d(o,u)})(e._query,this._field,this._direction);return new gi(e.firestore,e.converter,(function(i,o){const u=i.explicitOrderBy.concat([o]);return new dl(i.path,i.collectionGroup,u,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}}function np(t,e="asc"){const n=e,r=Wp("orderBy",t);return E1._create(r,n)}class S1 extends Qp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new S1(e,n,r)}_apply(e){return new gi(e.firestore,e.converter,Wm(e._query,this._limit,this._limitType))}}function O0(t){return pP("limit",t),S1._create("limit",t,"F")}class T1 extends Qp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new T1(e,n,r)}_apply(e){const n=l7(e,this.type,this._docOrFields,this._inclusive);return new gi(e.firestore,e.converter,(function(i,o){return new dl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)})(e._query,n))}}function o7(...t){return T1._create("startAfter",t,!1)}function l7(t,e,n,r){if(n[0]=at(n[0]),n[0]instanceof x1)return(function(o,u,h,f,m){if(!f)throw new Be(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const v=[];for(const b of yc(o))if(b.field.isKeyField())v.push(Km(u,f.key));else{const x=f.data.field(b.field);if(Pp(x))throw new Be(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(x===null){const C=b.field.canonicalString();throw new Be(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${C}' (used as the orderBy) does not exist.`)}v.push(x)}return new Ac(v,m)})(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Jc(t.firestore);return(function(u,h,f,m,v,b){const x=u.explicitOrderBy;if(v.length>x.length)throw new Be(pe.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const C=[];for(let R=0;R<v.length;R++){const A=v[R];if(x[R].field.isKeyField()){if(typeof A!="string")throw new Be(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof A}`);if(!qb(u)&&A.indexOf("/")!==-1)throw new Be(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${A}' contains a slash.`);const k=u.path.child(an.fromString(A));if(!tt.isDocumentKey(k))throw new Be(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${k}' is not because it contains an odd number of segments.`);const L=new tt(k);C.push(Km(h,L))}else{const k=EN(f,m,A);C.push(k)}}return new Ac(C,b)})(t._query,t.firestore._databaseId,i,e,n,r)}}function SS(t,e,n){if(typeof(n=at(n))=="string"){if(n==="")throw new Be(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qb(e)&&n.indexOf("/")!==-1)throw new Be(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(an.fromString(n));if(!tt.isDocumentKey(r))throw new Be(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Km(t,new tt(r))}if(n instanceof En)return Km(t,n._key);throw new Be(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ip(n)}.`)}function TS(t,e){if(!Array.isArray(t)||t.length===0)throw new Be(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function NN(t,e){const n=(function(i,o){for(const u of i)for(const h of u.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Be(pe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Be(pe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class c7{convertValue(e,n="none"){switch(uo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return An(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(co(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ht(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return go(e,((i,o)=>{r[i]=this.convertValue(o,n)})),r}convertVectorValue(e){const n=e.fields?.[Ym].arrayValue?.values?.map((r=>An(r.doubleValue)));return new ci(n)}convertGeoPoint(e){return new li(An(e.latitude),An(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Mp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Bd(e));default:return null}}convertTimestamp(e){const n=lo(e);return new hn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=an.fromString(e);Wt(Kk(r),9688,{name:e});const i=new Fd(r.get(1),r.get(3)),o=new tt(r.popFirst(5));return i.isEqual(n)||na(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}function C1(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class _d{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xo extends x1{constructor(e,n,r,i,o,u){super(e,n,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new _m(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Wp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Be(pe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Xo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Xo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xo._jsonSchema={type:Hn("string",Xo._jsonSchemaVersion),bundleSource:Hn("string","DocumentSnapshot"),bundleName:Hn("string"),bundle:Hn("string")};class _m extends Xo{data(e={}){return super.data(e)}}class Jo{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new _d(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new _m(this._firestore,this._userDataWriter,r.key,r,new _d(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Be(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let u=0;return i._snapshot.docChanges.map((h=>{const f=new _m(i._firestore,i._userDataWriter,h.doc.key,h.doc,new _d(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((h=>o||h.type!==3)).map((h=>{const f=new _m(i._firestore,i._userDataWriter,h.doc.key,h.doc,new _d(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);let m=-1,v=-1;return h.type!==0&&(m=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),v=u.indexOf(h.doc.key)),{type:u7(h.type),doc:f,oldIndex:m,newIndex:v}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Be(pe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Jo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=zb.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function u7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ht(61501,{type:t})}}function Zc(t){t=kr(t,En);const e=kr(t.firestore,hi);return XO(ph(e),t._key).then((n=>AN(e,t,n)))}Jo._jsonSchemaVersion="firestore/querySnapshot/1.0",Jo._jsonSchema={type:Hn("string",Jo._jsonSchemaVersion),bundleSource:Hn("string","QuerySnapshot"),bundleName:Hn("string"),bundle:Hn("string")};class k1 extends c7{constructor(e){super(),this.firestore=e}convertBytes(e){return new ps(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new En(this.firestore,null,n)}}function fi(t){t=kr(t,gi);const e=kr(t.firestore,hi),n=ph(e),r=new k1(e);return kN(t._query),JO(n,t._query).then((i=>new Jo(e,r,t,i)))}function dr(t,e,n){t=kr(t,En);const r=kr(t.firestore,hi),i=C1(t.converter,e,n);return yh(r,[f1(Jc(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Nr.none())])}function it(t,e,n,...r){t=kr(t,En);const i=kr(t.firestore,hi),o=Jc(i);let u;return u=typeof(e=at(e))=="string"||e instanceof gh?wN(o,"updateDoc",t._key,e,n,r):_N(o,"updateDoc",t._key,e),yh(i,[u.toMutation(t._key,Nr.exists(!0))])}function ns(t){return yh(kr(t.firestore,hi),[new Fp(t._key,Nr.none())])}function Kn(t,e){const n=kr(t.firestore,hi),r=Re(t),i=C1(t.converter,e);return yh(n,[f1(Jc(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Nr.exists(!1))]).then((()=>r))}function Tr(t,...e){t=at(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||ES(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(ES(e[r])){const f=e[r];e[r]=f.next?.bind(f),e[r+1]=f.error?.bind(f),e[r+2]=f.complete?.bind(f)}let o,u,h;if(t instanceof En)u=kr(t.firestore,hi),h=Op(t._key.path),o={next:f=>{e[r]&&e[r](AN(u,t,f))},error:e[r+1],complete:e[r+2]};else{const f=kr(t,gi);u=kr(f.firestore,hi),h=f._query;const m=new k1(u);o={next:v=>{e[r]&&e[r](new Jo(u,m,f,v))},error:e[r+1],complete:e[r+2]},kN(t._query)}return(function(m,v,b,x){const C=new h1(x),R=new c1(v,C,b);return m.asyncQueue.enqueueAndForget((async()=>a1(await ep(m),R))),()=>{C.Nu(),m.asyncQueue.enqueueAndForget((async()=>o1(await ep(m),R)))}})(ph(u),h,i,o)}function yh(t,e){return(function(r,i){const o=new Wi;return r.asyncQueue.enqueueAndForget((async()=>UO(await QO(r),i,o))),o.promise})(ph(t),e)}function AN(t,e,n){const r=n.docs.get(e._key),i=new k1(t);return new Xo(t,i,e._key,r,new _d(n.hasPendingWrites,n.fromCache),e.converter)}class d7{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Jc(e)}set(e,n,r){this._verifyNotCommitted();const i=My(e,this._firestore),o=C1(i.converter,n,r),u=f1(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(u.toMutation(i._key,Nr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=My(e,this._firestore);let u;return u=typeof(n=at(n))=="string"||n instanceof gh?wN(this._dataReader,"WriteBatch.update",o._key,n,r,i):_N(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(u.toMutation(o._key,Nr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=My(e,this._firestore);return this._mutations=this._mutations.concat(new Fp(n._key,Nr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Be(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function My(t,e){if((t=at(t)).firestore!==e)throw new Be(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function CS(){return new vh("deleteField")}function ft(){return new m1("serverTimestamp")}function bh(...t){return new p1("arrayUnion",t)}function Yd(...t){return new g1("arrayRemove",t)}function Bi(t){return new v1("increment",t)}function kS(t){return ph(t=kr(t,hi)),new d7(t,(e=>yh(t,e)))}(function(e,n=!0){(function(i){Kc=i})(cl),tl(new ao("firestore",((r,{instanceIdentifier:i,options:o})=>{const u=r.getProvider("app").getImmediate(),h=new hi(new aP(r.getProvider("auth-internal")),new cP(u,r.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Be(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fd(m.options.projectId,v)})(u,i),u);return o={useFetchStreams:n,...o},h._setSettings(o),h}),"PUBLIC").setMultipleInstances(!0)),ii(NE,AE,e),ii(NE,AE,"esm2020")})();const RN="firebasestorage.googleapis.com",h7="storageBucket",f7=120*1e3,m7=600*1e3;class vi extends pi{constructor(e,n,r=0){super(Oy(e),`Firebase Storage: ${n} (${Oy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,vi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Oy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var mi;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(mi||(mi={}));function Oy(t){return"storage/"+t}function p7(){const t="An unknown error occurred, please check the error payload for server response.";return new vi(mi.UNKNOWN,t)}function g7(){return new vi(mi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function v7(){return new vi(mi.CANCELED,"User canceled the upload/download.")}function y7(t){return new vi(mi.INVALID_URL,"Invalid URL '"+t+"'.")}function b7(t){return new vi(mi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function NS(t){return new vi(mi.INVALID_ARGUMENT,t)}function IN(){return new vi(mi.APP_DELETED,"The Firebase app was deleted.")}function x7(t){return new vi(mi.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class Ds{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ds.makeFromUrl(e,n)}catch{return new Ds(e,"")}if(r.path==="")return r;throw b7(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(M){M.path.charAt(M.path.length-1)==="/"&&(M.path_=M.path_.slice(0,-1))}const u="(/(.*))?$",h=new RegExp("^gs://"+i+u,"i"),f={bucket:1,path:3};function m(M){M.path_=decodeURIComponent(M.path)}const v="v[A-Za-z0-9_]+",b=n.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",C=new RegExp(`^https?://${b}/${v}/b/${i}/o${x}`,"i"),R={bucket:1,path:3},A=n===RN?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",L=new RegExp(`^https?://${A}/${i}/${k}`,"i"),I=[{regex:h,indices:f,postModify:o},{regex:C,indices:R,postModify:m},{regex:L,indices:{bucket:1,path:2},postModify:m}];for(let M=0;M<I.length;M++){const z=I[M],H=z.regex.exec(e);if(H){const E=H[z.indices.bucket];let S=H[z.indices.path];S||(S=""),r=new Ds(E,S),z.postModify(r);break}}if(r==null)throw y7(e);return r}}class _7{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function w7(t,e,n){let r=1,i=null,o=null,u=!1,h=0;function f(){return h===2}let m=!1;function v(...k){m||(m=!0,e.apply(null,k))}function b(k){i=setTimeout(()=>{i=null,t(C,f())},k)}function x(){o&&clearTimeout(o)}function C(k,...L){if(m){x();return}if(k){x(),v.call(null,k,...L);return}if(f()||u){x(),v.call(null,k,...L);return}r<64&&(r*=2);let I;h===1?(h=2,I=0):I=(r+Math.random())*1e3,b(I)}let R=!1;function A(k){R||(R=!0,x(),!m&&(i!==null?(k||(h=2),clearTimeout(i),b(0)):k||(h=1)))}return b(0),o=setTimeout(()=>{u=!0,A(!0)},n),A}function E7(t){t(!1)}function S7(t){return t!==void 0}function AS(t,e,n,r){if(r<e)throw NS(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw NS(`Invalid value for '${t}'. Expected ${n} or less.`)}function T7(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var rp;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(rp||(rp={}));function C7(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}class k7{constructor(e,n,r,i,o,u,h,f,m,v,b,x=!0,C=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=f,this.timeout_=m,this.progressCallback_=v,this.connectionFactory_=b,this.retry=x,this.isUsingEmulator=C,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,A)=>{this.resolve_=R,this.reject_=A,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new em(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const u=h=>{const f=h.loaded,m=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,m)};this.progressCallback_!==null&&o.addUploadProgressListener(u),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(u),this.pendingConnection_=null;const h=o.getErrorCode()===rp.NO_ERROR,f=o.getStatus();if(!h||C7(f,this.additionalRetryCodes_)&&this.retry){const v=o.getErrorCode()===rp.ABORT;r(!1,new em(!1,null,v));return}const m=this.successCodes_.indexOf(f)!==-1;r(!0,new em(m,o))})},n=(r,i)=>{const o=this.resolve_,u=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(h,h.getResponse());S7(f)?o(f):o()}catch(f){u(f)}else if(h!==null){const f=p7();f.serverResponse=h.getErrorText(),this.errorCallback_?u(this.errorCallback_(h,f)):u(f)}else if(i.canceled){const f=this.appDelete_?IN():v7();u(f)}else{const f=g7();u(f)}};this.canceled_?n(!1,new em(!1,null,!0)):this.backoffId_=w7(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&E7(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class em{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function N7(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function A7(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function R7(t,e){e&&(t["X-Firebase-GMPID"]=e)}function I7(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function j7(t,e,n,r,i,o,u=!0,h=!1){const f=T7(t.urlParams),m=t.url+f,v=Object.assign({},t.headers);return R7(v,e),N7(v,n),A7(v,o),I7(v,r),new k7(m,t.method,v,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,u,h)}function D7(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function P7(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}class sp{constructor(e,n){this._service=e,n instanceof Ds?this._location=n:this._location=Ds.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new sp(e,n)}get root(){const e=new Ds(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return P7(this._location.path)}get storage(){return this._service}get parent(){const e=D7(this._location.path);if(e===null)return null;const n=new Ds(this._location.bucket,e);return new sp(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw x7(e)}}function RS(t,e){const n=e?.[h7];return n==null?null:Ds.makeFromBucketSpec(n,t)}function M7(t,e,n,r={}){t.host=`${e}:${n}`;const i=ll(e);i&&(mb(`https://${t.host}/b`),pb("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(t._overrideAuthToken=typeof o=="string"?o:MT(o,t.app.options.projectId))}class O7{constructor(e,n,r,i,o,u=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=u,this._bucket=null,this._host=RN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=f7,this._maxUploadRetryTime=m7,this._requests=new Set,i!=null?this._bucket=Ds.makeFromBucketSpec(i,this._host):this._bucket=RS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ds.makeFromBucketSpec(this._url,e):this._bucket=RS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){AS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){AS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new sp(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new _7(IN());{const u=j7(e,this._appId,r,i,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const IS="@firebase/storage",jS="0.14.0";const jN="storage";function L7(t=yb(),e){t=at(t);const r=_p(t,jN).getImmediate({identifier:e}),i=jT("storage");return i&&V7(r,...i),r}function V7(t,e,n,r={}){M7(t,e,n,r)}function U7(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new O7(n,r,i,e,cl)}function z7(){tl(new ao(jN,U7,"PUBLIC").setMultipleInstances(!0)),ii(IS,jS,""),ii(IS,jS,"esm2020")}z7();const B7={apiKey:"AIzaSyAaaBO8Nw49Xsyo4QG1ropL0UYWeY2zrlU",authDomain:"meydan-academy.firebaseapp.com",projectId:"meydan-academy",storageBucket:"meydan-academy.firebasestorage.app",messagingSenderId:"267697346186",appId:"1:267697346186:web:d53b7d91fe0fabf8d37f73"},N1=VT(B7),Ns=ZC(N1),ce=e7(N1);L7(N1);var Pc;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Pc||(Pc={}));class Ly extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const F7=t=>{var e,n;return t?.androidBridge?"android":!((n=(e=t?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},H7=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},i=()=>e!==null?e.name:F7(t),o=()=>i()!=="web",u=b=>{const x=m.get(b);return!!(x?.platforms.has(i())||h(b))},h=b=>{var x;return(x=n.PluginHeaders)===null||x===void 0?void 0:x.find(C=>C.name===b)},f=b=>t.console.error(b),m=new Map,v=(b,x={})=>{const C=m.get(b);if(C)return console.warn(`Capacitor plugin "${b}" already registered. Cannot register plugins twice.`),C.proxy;const R=i(),A=h(b);let k;const L=async()=>(!k&&R in x?k=typeof x[R]=="function"?k=await x[R]():k=x[R]:e!==null&&!k&&"web"in x&&(k=typeof x.web=="function"?k=await x.web():k=x.web),k),U=(S,j)=>{var D,V;if(A){const B=A?.methods.find(P=>j===P.name);if(B)return B.rtype==="promise"?P=>n.nativePromise(b,j.toString(),P):(P,ne)=>n.nativeCallback(b,j.toString(),P,ne);if(S)return(D=S[j])===null||D===void 0?void 0:D.bind(S)}else{if(S)return(V=S[j])===null||V===void 0?void 0:V.bind(S);throw new Ly(`"${b}" plugin is not implemented on ${R}`,Pc.Unimplemented)}},I=S=>{let j;const D=(...V)=>{const B=L().then(P=>{const ne=U(P,S);if(ne){const oe=ne(...V);return j=oe?.remove,oe}else throw new Ly(`"${b}.${S}()" is not implemented on ${R}`,Pc.Unimplemented)});return S==="addListener"&&(B.remove=async()=>j()),B};return D.toString=()=>`${S.toString()}() { [capacitor code] }`,Object.defineProperty(D,"name",{value:S,writable:!1,configurable:!1}),D},M=I("addListener"),z=I("removeListener"),H=(S,j)=>{const D=M({eventName:S},j),V=async()=>{const P=await D;z({eventName:S,callbackId:P},j)},B=new Promise(P=>D.then(()=>P({remove:V})));return B.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await V()},B},E=new Proxy({},{get(S,j){switch(j){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return A?H:M;case"removeListener":return z;default:return I(j)}}});return r[b]=E,m.set(b,{name:b,proxy:E,platforms:new Set([...Object.keys(x),...A?[R]:[]])}),E};return n.convertFileSrc||(n.convertFileSrc=b=>b),n.getPlatform=i,n.handleError=f,n.isNativePlatform=o,n.isPluginAvailable=u,n.registerPlugin=v,n.Exception=Ly,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},$7=t=>t.Capacitor=H7(t),sa=$7(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),xh=sa.registerPlugin;class A1{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const o=this.windowListeners[e];o&&!o.registered&&this.addWindowListener(o),r&&this.sendRetainedArgumentsForEvent(e);const u=async()=>this.removeListener(e,n);return Promise.resolve({remove:u})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const i=this.listeners[e];if(!i){if(r){let o=this.retainedEventArguments[e];o||(o=[]),o.push(n),this.retainedEventArguments[e]=o}return}i.forEach(o=>o(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new sa.Exception(e,Pc.Unimplemented)}unavailable(e="not available"){return new sa.Exception(e,Pc.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const i=r.indexOf(n);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const DS=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),PS=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class q7 extends A1{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,o]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=PS(i).trim(),o=PS(o).trim(),n[i]=o}),n}async setCookie(e){try{const n=DS(e.key),r=DS(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,o=(e.path||"/").replace("path=",""),u=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${i}; path=${o}; ${u};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}xh("CapacitorCookies",{web:()=>new q7});const G7=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>n(i),r.readAsDataURL(t)}),Y7=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(i=>i.toLocaleLowerCase()).reduce((i,o,u)=>(i[o]=t[e[u]],i),{})},K7=(t,e=!0)=>t?Object.entries(t).reduce((r,i)=>{const[o,u]=i;let h,f;return Array.isArray(u)?(f="",u.forEach(m=>{h=e?encodeURIComponent(m):m,f+=`${o}=${h}&`}),f.slice(0,-1)):(h=e?encodeURIComponent(u):u,f=`${o}=${h}`),`${r}&${f}`},"").substr(1):null,W7=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),i=Y7(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(i.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[u,h]of Object.entries(t.data||{}))o.set(u,h);n.body=o.toString()}else if(i.includes("multipart/form-data")||t.data instanceof FormData){const o=new FormData;if(t.data instanceof FormData)t.data.forEach((h,f)=>{o.append(f,h)});else for(const h of Object.keys(t.data))o.append(h,t.data[h]);n.body=o;const u=new Headers(n.headers);u.delete("content-type"),n.headers=u}else(i.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class Q7 extends A1{async request(e){const n=W7(e,e.webFetchExtra),r=K7(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,o=await fetch(i,n),u=o.headers.get("content-type")||"";let{responseType:h="text"}=o.ok?e:{};u.includes("application/json")&&(h="json");let f,m;switch(h){case"arraybuffer":case"blob":m=await o.blob(),f=await G7(m);break;case"json":f=await o.json();break;case"document":case"text":default:f=await o.text()}const v={};return o.headers.forEach((b,x)=>{v[x]=b}),{data:f,headers:v,status:o.status,url:o.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}xh("CapacitorHttp",{web:()=>new Q7});var MS;(function(t){t.Dark="DARK",t.Light="LIGHT",t.Default="DEFAULT"})(MS||(MS={}));var OS;(function(t){t.StatusBar="StatusBar",t.NavigationBar="NavigationBar"})(OS||(OS={}));class X7 extends A1{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}xh("SystemBars",{web:()=>new X7});const J7="modulepreload",Z7=function(t,e){return new URL(t,e).href},LS={},DN=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let m=function(v){return Promise.all(v.map(b=>Promise.resolve(b).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};const u=document.getElementsByTagName("link"),h=document.querySelector("meta[property=csp-nonce]"),f=h?.nonce||h?.getAttribute("nonce");i=m(n.map(v=>{if(v=Z7(v,r),v in LS)return;LS[v]=!0;const b=v.endsWith(".css"),x=b?'[rel="stylesheet"]':"";if(r)for(let R=u.length-1;R>=0;R--){const A=u[R];if(A.href===v&&(!b||A.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${v}"]${x}`))return;const C=document.createElement("link");if(C.rel=b?"stylesheet":J7,b||(C.as="script"),C.crossOrigin="",C.href=v,f&&C.setAttribute("nonce",f),document.head.appendChild(C),b)return new Promise((R,A)=>{C.addEventListener("load",R),C.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${v}`)))})}))}function o(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return i.then(u=>{for(const h of u||[])h.status==="rejected"&&o(h.reason);return e().catch(o)})},PN=xh("GoogleAuth",{web:()=>DN(()=>import("./web-BHtYetpi.js"),[],import.meta.url).then(t=>new t.GoogleAuthWeb)}),MN=w.createContext({}),yn=()=>{const t=w.useContext(MN);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},eL=({children:t})=>{const[e,n]=w.useState(null),[r,i]=w.useState(null),[o,u]=w.useState(!0),h=async(A,k=!0)=>{if(A)try{await dr(Re(ce,"users",A),{isOnline:k,lastSeen:ft()},{merge:!0})}catch(L){console.error("Presence update failed:",L)}};w.useEffect(()=>{let A=null;const k=IC(Ns,async L=>{A&&(A(),A=null),n(L),L?(A=Tr(Re(ce,"users",L.uid),U=>{U.exists()&&i({id:U.id,...U.data()})},U=>console.error("[AuthContext] Profile listener error:",U)),h(L.uid).catch(()=>{}),u(!1)):(i(null),u(!1))});return()=>{k(),A&&A()}},[]);const R={currentUser:e,userProfile:r,register:async(A,k,L)=>{const U=await EC(Ns,A,k);try{await v0(U.user)}catch(I){console.error("Error sending verification email:",I)}return await dr(Re(ce,"users",U.user.uid),{displayName:L,email:A,role:"member",createdAt:ft(),isOnline:!0,lastSeen:ft(),isUsernameSet:!0}),U},login:async(A,k)=>{const L=await SC(Ns,A,k);return await h(L.user.uid,!0),L},logout:async()=>{if(e)try{await h(e.uid,!1)}catch{console.log("[AuthContext] Final presence update skipped or failed during logout")}return jC(Ns)},signInWithGoogle:async()=>{let A;try{if(sa.isNativePlatform()){console.log("[GoogleAuth] Starting native sign-in...");const L=await PN.signIn();console.log("[GoogleAuth] Got Google user:",JSON.stringify(L,null,2));const U=Is.credential(L.authentication.idToken);console.log("[GoogleAuth] Created Firebase credential, signing in..."),A=await oh(Ns,U),console.log("[GoogleAuth] Firebase sign-in successful!")}else{const L=new Is;A=await HC(Ns,L)}return(await Zc(Re(ce,"users",A.user.uid))).exists()?await h(A.user.uid,!0):await dr(Re(ce,"users",A.user.uid),{displayName:A.user.displayName,email:A.user.email,photoURL:A.user.photoURL,role:"member",createdAt:ft(),isOnline:!0,lastSeen:ft(),isUsernameSet:!1}),A}catch(k){throw console.error("[GoogleAuth] ERROR:",k),console.error("[GoogleAuth] Error code:",k.code),console.error("[GoogleAuth] Error message:",k.message),console.error("[GoogleAuth] Full error:",JSON.stringify(k,Object.getOwnPropertyNames(k),2)),k}},resetPassword:A=>Rb(Ns,A),resendVerification:async()=>{let A=Ns.currentUser||e;if(!A)throw new Error("No user currently signed in.");if(A.email||(await A.reload(),A=Ns.currentUser),!A.email)throw new Error("No email associated with this account. Please sign in again.");return v0(A)}};return c.jsx(MN.Provider,{value:R,children:!o&&t})};let Vy=null;const tL=()=>(Vy||(Vy=new(window.AudioContext||window.webkitAudioContext)),Vy),L0=()=>{try{const t=tL(),e=t.currentTime,n=t.createOscillator(),r=t.createGain();n.connect(r),r.connect(t.destination),n.frequency.value=880,n.type="sine",r.gain.setValueAtTime(0,e),r.gain.linearRampToValueAtTime(.2,e+.01),r.gain.linearRampToValueAtTime(0,e+.1),n.start(e),n.stop(e+.1);const i=t.createOscillator(),o=t.createGain();i.connect(o),o.connect(t.destination),i.frequency.value=660,i.type="sine",o.gain.setValueAtTime(0,e+.08),o.gain.linearRampToValueAtTime(.2,e+.09),o.gain.linearRampToValueAtTime(0,e+.25),i.start(e+.08),i.stop(e+.25)}catch(t){console.error("Error playing notification sound:",t)}},nL=(t,e)=>!t||!e?!1:/@everyone\b/i.test(t)?!0:new RegExp(`@${e}\\b`,"i").test(t),ON=w.createContext(),ua=()=>{const t=w.useContext(ON);if(!t)throw new Error("useData must be used within DataProvider");return t},rL=({children:t})=>{const{currentUser:e}=yn(),[n,r]=w.useState([]),[i,o]=w.useState([]),[u,h]=w.useState(null),[f,m]=w.useState([]),[v,b]=w.useState(null),[x,C]=w.useState({}),[R,A]=w.useState({}),[k,L]=w.useState([]),U=w.useRef({}),I=w.useRef(!0);w.useEffect(()=>{if(r([]),!u)return;const E=Tr(_t(ce,"servers",u,"members"),async D=>{const V=[],B=[],P=new Map;if(D.docChanges().forEach(ne=>{const oe=ne.doc.data();ne.type==="added"&&(V.push(oe.userId),P.set(oe.userId,oe.role)),ne.type==="removed"&&B.push(oe.userId),ne.type==="modified"&&P.set(oe.userId,oe.role)}),n.length===0&&V.length>0){const ne=new Map;D.docs.forEach(Z=>{ne.set(Z.data().userId,Z.data().role||"member")});const oe=Array.from(ne.keys()),G=[];for(let Z=0;Z<oe.length;Z+=10){const J=oe.slice(Z,Z+10),Se=Br(_t(ce,"users"),zi("__name__","in",J));(await fi(Se)).forEach($=>{G.push({id:$.id,...$.data(),serverRole:ne.get($.id)})})}r(G);return}if(V.length>0&&n.length>0){const ne=[];for(let oe=0;oe<V.length;oe+=10){const G=V.slice(oe,oe+10),Z=Br(_t(ce,"users"),zi("__name__","in",G));(await fi(Z)).forEach(Se=>{ne.push({id:Se.id,...Se.data(),serverRole:P.get(Se.id)})})}r(oe=>[...oe,...ne])}B.length>0&&r(ne=>ne.filter(oe=>!B.includes(oe.id))),D.docChanges().some(ne=>ne.type==="modified")&&r(ne=>ne.map(oe=>P.has(oe.id)?{...oe,serverRole:P.get(oe.id)}:oe))}),S=Br(_t(ce,"users"),zi("servers","array-contains",u),zi("isOnline","==",!0)),j=Tr(S,D=>{r(V=>{const B=new Map;return D.forEach(P=>{const ne=P.data();B.set(P.id,{presence:ne.presence,isOnline:ne.isOnline,status:ne.status,lastSeen:ne.lastSeen,displayName:ne.displayName,photoUrl:ne.photoUrl||ne.photoURL,bio:ne.bio,role:ne.role})}),V.map(P=>{const ne=B.get(P.id);return ne?{...P,...ne}:{...P,isOnline:!1,presence:"offline",status:null}})})});return()=>{E(),j()}},[u]);const[M,z]=w.useState([]);w.useEffect(()=>{if(!e){o([]),h(null),z([]);return}return Tr(Re(ce,"users",e.uid),S=>{if(!S.exists())return;const j=S.data(),D=j?.servers||[],V=j?.unreadMentions||{};Object.keys(V).forEach(B=>{const P=U.current[B]||0;(V[B]?.count||0)>P&&B!==u&&L0()}),U.current=Object.fromEntries(Object.entries(V).map(([B,P])=>[B,P.count])),C(V),A(j?.unreadDms||{}),z(B=>JSON.stringify(B)!==JSON.stringify(D)?D:B),h(B=>{const P=j?.currentServer;return B?B==="home"||D.includes(B)?B:D.length>0?D[0]:"home":P&&(P==="home"||D.includes(P))?P:D.length>0?D[0]:"home"})})},[e]),w.useEffect(()=>{if(o(S=>S.filter(j=>M.includes(j.id))),M.length===0){o([]);return}const E=[];for(let S=0;S<M.length;S+=10){const j=M.slice(S,S+10),D=Br(_t(ce,"servers"),zi("__name__","in",j)),V=Tr(D,B=>{const P=[];B.forEach(ne=>{P.push({id:ne.id,...ne.data()})}),o(ne=>[...ne.filter(Z=>!j.includes(Z.id)),...P].sort((Z,J)=>M.indexOf(Z.id)-M.indexOf(J.id)))});E.push(V)}return()=>{E.forEach(S=>S())}},[M]),w.useEffect(()=>{if(!e){L([]);return}I.current=!0;const E=Br(_t(ce,"dms"),zi("participants","array-contains",e.uid)),S=Tr(E,j=>{const D=[];j.forEach(B=>{D.push({id:B.id,...B.data()})}),D.sort((B,P)=>{const ne=B.updatedAt?.toMillis()||0;return(P.updatedAt?.toMillis()||0)-ne});const V=D.filter(B=>!B.hiddenFor||!B.hiddenFor.includes(e.uid));L(V),I.current||j.docChanges().forEach(B=>{if(B.type==="modified"||B.type==="added"){const P=B.doc.data();if(P.lastMessage&&P.lastMessage.userId!==e.uid){const ne=Date.now(),oe=P.lastMessage.timestamp?.toMillis()||0;ne-oe<3e4&&L0()}}}),I.current=!1});return()=>S()},[e]),w.useEffect(()=>{if(!u){m([]),b(null);return}const E=i.find(j=>j.id===u);b(E||null);const S=Tr(_t(ce,"servers",u,"channels"),j=>{const D=[];j.forEach(V=>{D.push({id:V.id,...V.data()})}),m(D.sort((V,B)=>V.position-B.position))});return()=>{S()}},[u,i]);const H={users:n,servers:i,currentServer:u,setCurrentServer:h,channels:f,server:v,dms:k,unreadMentions:x,unreadDms:R};return c.jsx(ON.Provider,{value:H,children:t})};var LN={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},VS=ve.createContext&&ve.createContext(LN),sL=["attr","size","title"];function iL(t,e){if(t==null)return{};var n=aL(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function aL(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ip(){return ip=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ip.apply(this,arguments)}function US(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ap(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?US(Object(n),!0).forEach(function(r){oL(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):US(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oL(t,e,n){return e=lL(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lL(t){var e=cL(t,"string");return typeof e=="symbol"?e:e+""}function cL(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function VN(t){return t&&t.map((e,n)=>ve.createElement(e.tag,ap({key:n},e.attr),VN(e.child)))}function Pe(t){return e=>ve.createElement(uL,ip({attr:ap({},t.attr)},e),VN(t.child))}function uL(t){var e=n=>{var{attr:r,size:i,title:o}=t,u=iL(t,sL),h=i||n.size||"1em",f;return n.className&&(f=n.className),t.className&&(f=(f?f+" ":"")+t.className),ve.createElement("svg",ip({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,u,{className:f,style:ap(ap({color:t.color||n.color},n.style),t.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),o&&ve.createElement("title",null,o),t.children)};return VS!==void 0?ve.createElement(VS.Consumer,null,n=>e(n)):e(LN)}function UN(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6z"},child:[]},{tag:"path",attr:{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12zm0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17z"},child:[]}]})(t)}function zN(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m17.6 9.48 1.84-3.18c.16-.31.04-.69-.26-.85a.637.637 0 0 0-.83.22l-1.88 3.24a11.463 11.463 0 0 0-8.94 0L5.65 5.67a.643.643 0 0 0-.87-.2c-.28.18-.37.54-.22.83L6.4 9.48A10.78 10.78 0 0 0 1 18h22a10.78 10.78 0 0 0-5.4-8.52zM7 15.25a1.25 1.25 0 1 1 0-2.5 1.25 1.25 0 0 1 0 2.5zm10 0a1.25 1.25 0 1 1 0-2.5 1.25 1.25 0 0 1 0 2.5z"},child:[]}]})(t)}function dL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"},child:[]}]})(t)}function hL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"},child:[]}]})(t)}function Qi(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(t)}function fL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10.09 15.59 11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5a2 2 0 0 0-2 2v4h2V5h14v14H5v-4H3v4a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"},child:[]}]})(t)}function mL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 3a9 9 0 0 0-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42A8.954 8.954 0 0 0 13 21a9 9 0 0 0 0-18zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"},child:[]}]})(t)}function op(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"},child:[]}]})(t)}function pL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"},child:[]}]})(t)}function gL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"},child:[]}]})(t)}function Jp(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 19H5V5h7V3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"},child:[]}]})(t)}function sl(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9.19 6.35c-2.04 2.29-3.44 5.58-3.57 5.89L2 10.69l4.05-4.05c.47-.47 1.15-.68 1.81-.55l1.33.26zM11.17 17s3.74-1.55 5.89-3.7c5.4-5.4 4.5-9.62 4.21-10.57-.95-.3-5.17-1.19-10.57 4.21C8.55 9.09 7 12.83 7 12.83L11.17 17zm6.48-2.19c-2.29 2.04-5.58 3.44-5.89 3.57L13.31 22l4.05-4.05c.47-.47.68-1.15.55-1.81l-.26-1.33zM9 18c0 .83-.34 1.58-.88 2.12C6.94 21.3 2 22 2 22s.7-4.94 1.88-6.12A2.996 2.996 0 0 1 9 18zm4-9c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2z"},child:[]}]})(t)}function R1(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"},child:[]}]})(t)}function Zp(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(t)}function vL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m23 12-2.44-2.79.34-3.69-3.61-.82-1.89-3.2L12 2.96 8.6 1.5 6.71 4.69 3.1 5.5l.34 3.7L1 12l2.44 2.79-.34 3.7 3.61.82L8.6 22.5l3.4-1.47 3.4 1.46 1.89-3.19 3.61-.82-.34-3.69L23 12zm-12.91 4.72-3.8-3.81 1.48-1.48 2.32 2.33 5.85-5.87 1.48 1.48-7.33 7.35z"},child:[]}]})(t)}function yL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"},child:[]}]})(t)}function bL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"},child:[]}]})(t)}function V0(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28zm-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18l5.98 5.99zM4.27 3 3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73 4.27 3z"},child:[]}]})(t)}function U0(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"},child:[]}]})(t)}function BN(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM9.5 16.5v-9l7 4.5-7 4.5z"},child:[]}]})(t)}function xL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 6h12v12H6z"},child:[]}]})(t)}function z0(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m21 6.5-4 4V7c0-.55-.45-1-1-1H9.82L21 17.18V6.5zM3.27 2 2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.54-.18L19.73 21 21 19.73 3.27 2z"},child:[]}]})(t)}function Kd(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"},child:[]}]})(t)}function _L(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 9v6h4l5 5V4l-5 5H7z"},child:[]}]})(t)}function zS(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16.5 12A4.5 4.5 0 0 0 14 7.97v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51A8.796 8.796 0 0 0 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06a8.99 8.99 0 0 0 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4 9.91 6.09 12 8.18V4z"},child:[]}]})(t)}function BS(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3A4.5 4.5 0 0 0 14 7.97v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"},child:[]}]})(t)}function Uy(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.7.28-.28 0-.53-.11-.71-.29L.29 13.08a.956.956 0 0 1-.29-.7c0-.28.11-.53.29-.71C3.34 8.78 7.46 7 12 7s8.66 1.78 11.71 4.67c.18.18.29.43.29.71 0 .28-.11.53-.29.71l-2.48 2.48c-.18.18-.43.29-.71.29-.27 0-.52-.11-.7-.28a11.27 11.27 0 0 0-2.67-1.85.996.996 0 0 1-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z"},child:[]}]})(t)}function wL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20.01 15.38c-1.23 0-2.42-.2-3.53-.56a.977.977 0 0 0-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"},child:[]}]})(t)}function EL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"},child:[]}]})(t)}function SL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"},child:[]}]})(t)}function lp(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M20 18c1.1 0 1.99-.9 1.99-2L22 6a2 2 0 0 0-2-2H4c-1.11 0-2 .89-2 2v10a2 2 0 0 0 2 2H0v2h24v-2h-4zm-7-3.53v-2.19c-2.78 0-4.61.85-6 2.72.56-2.67 2.11-5.33 6-5.87V7l4 3.73-4 3.74z"},child:[]}]})(t)}function TL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m21.22 18.02 2 2H24v-2h-2.78zm.77-2 .01-10a2 2 0 0 0-2-2H7.22l5.23 5.23c.18-.04.36-.07.55-.1V7.02l4 3.73-1.58 1.47 5.54 5.54c.61-.33 1.03-.99 1.03-1.74zM2.39 1.73 1.11 3l1.54 1.54c-.4.36-.65.89-.65 1.48v10a2 2 0 0 0 2 2H0v2h18.13l2.71 2.71 1.27-1.27L2.39 1.73zM7 15.02c.31-1.48.92-2.95 2.07-4.06l1.59 1.59c-1.54.38-2.7 1.18-3.66 2.47z"},child:[]}]})(t)}function FS(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"},child:[]}]})(t)}function Zo(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(t)}function FN(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(t)}function xc(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M16 9V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3z"},child:[]}]})(t)}function CL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"},child:[]}]})(t)}function HS(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"},child:[]}]})(t)}function HN(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 10V8h-4V4h-2v4h-4V4H8v4H4v2h4v4H4v2h4v4h2v-4h4v4h2v-4h4v-2h-4v-4h4zm-6 4h-4v-4h4v4z"},child:[]}]})(t)}function cp(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 18h2V6H7v12zm4 4h2V2h-2v20zm-8-8h2v-4H3v4zm12 4h2V6h-2v12zm4-8v4h2v-4h-2z"},child:[]}]})(t)}function kL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 9H4v2h16V9zM4 15h16v-2H4v2z"},child:[]}]})(t)}function $N(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"},child:[]}]})(t)}function B0(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zm0-10h4v6h6v-6h4l-7-7-7 7z"},child:[]}]})(t)}function NL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 3H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h6v2H8v2h8v-2h-2v-2h6c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"},child:[]}]})(t)}function AL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M12 4c3.87 0 7 3.13 7 7v2h-2.92L21 17.92V11a9 9 0 0 0-9-9c-1.95 0-3.76.62-5.23 1.68l1.44 1.44A6.914 6.914 0 0 1 12 4zM2.27 1.72 1 3l3.33 3.32A8.899 8.899 0 0 0 3 11v7c0 1.66 1.34 3 3 3h3v-8H5v-2c0-1.17.29-2.26.79-3.22L15 17v4h3c.3 0 .59-.06.86-.14L21 23l1.27-1.27-20-20.01z"},child:[]}]})(t)}function RL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"},child:[]}]})(t)}function IL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2V8zm0 3h2v2h-2v-2zM8 8h2v2H8V8zm0 3h2v2H8v-2zm-1 2H5v-2h2v2zm0-3H5V8h2v2zm9 7H8v-2h8v2zm0-4h-2v-2h2v2zm0-3h-2V8h2v2zm3 3h-2v-2h2v2zm0-3h-2V8h2v2z"},child:[]},{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0z"},child:[]}]})(t)}function jL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"},child:[]}]})(t)}function DL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 7v2.99s-1.99.01-2 0V7h-3s.01-1.99 0-2h3V2h2v3h3v2h-3zm-3 4V8h-3V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8h-3zM5 19l3-4 2 3 3-4 4 5H5z"},child:[]}]})(t)}function PL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m19 9 1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25L19 9zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12l-5.5-2.5zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25L19 15z"},child:[]}]})(t)}function _c(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},child:[]}]})(t)}function up(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"},child:[]}]})(t)}function ML(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"},child:[]}]})(t)}function OL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10a2.5 2.5 0 0 0 2.5-2.5c0-.61-.23-1.2-.64-1.67a.528.528 0 0 1-.13-.33c0-.28.22-.5.5-.5H16c3.31 0 6-2.69 6-6 0-4.96-4.49-9-10-9zm5.5 11c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm-3-4c-.83 0-1.5-.67-1.5-1.5S13.67 6 14.5 6s1.5.67 1.5 1.5S15.33 9 14.5 9zM5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S7.33 13 6.5 13 5 12.33 5 11.5zm6-4c0 .83-.67 1.5-1.5 1.5S8 8.33 8 7.5 8.67 6 9.5 6s1.5.67 1.5 1.5z"},child:[]}]})(t)}function LL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 11h-1V3c0-1.1-.9-2-2-2h-2c-1.1 0-2 .9-2 2v8H8c-2.76 0-5 2.24-5 5v7h18v-7c0-2.76-2.24-5-5-5zm3 10h-2v-3c0-.55-.45-1-1-1s-1 .45-1 1v3h-2v-3c0-.55-.45-1-1-1s-1 .45-1 1v3H9v-3c0-.55-.45-1-1-1s-1 .45-1 1v3H5v-5c0-1.65 1.35-3 3-3h8c1.65 0 3 1.35 3 3v5z"},child:[]}]})(t)}function VL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.16 3h-.32L9.21 8.25h5.58zM16.46 8.25h5.16L19 3h-5.16zM21.38 9.75h-8.63V20.1zM11.25 20.1V9.75H2.62zM7.54 8.25 10.16 3H5L2.38 8.25z"},child:[]}]})(t)}function il(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"},child:[]}]})(t)}function $n(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(t)}function UL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"},child:[]}]})(t)}function zL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"},child:[]}]})(t)}function $S(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"},child:[]}]})(t)}function BL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(t)}function FL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"},child:[]}]})(t)}function HL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 12.22C21 6.73 16.74 3 12 3c-4.69 0-9 3.65-9 9.28-.6.34-1 .98-1 1.72v2c0 1.1.9 2 2 2h1v-6.1c0-3.87 3.13-7 7-7s7 3.13 7 7V19h-8v2h8c1.1 0 2-.9 2-2v-1.22c.59-.31 1-.92 1-1.64v-2.3c0-.7-.41-1.31-1-1.62z"},child:[]},{tag:"circle",attr:{cx:"9",cy:"13",r:"1"},child:[]},{tag:"circle",attr:{cx:"15",cy:"13",r:"1"},child:[]},{tag:"path",attr:{d:"M18 11.03A6.04 6.04 0 0 0 12.05 6c-3.03 0-6.29 2.51-6.03 6.45a8.075 8.075 0 0 0 4.86-5.89c1.31 2.63 4 4.44 7.12 4.47z"},child:[]}]})(t)}function $L(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 1.01 7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14zm-1-6h-3V8h-2v5H8l4 4 4-4z"},child:[]}]})(t)}function qL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 11V3H5c-1.1 0-2 .9-2 2v6h8zm2 0h8V5c0-1.1-.9-2-2-2h-6v8zm-2 2H3v6c0 1.1.9 2 2 2h6v-8zm2 0v8h6c1.1 0 2-.9 2-2v-6h-8z"},child:[]}]})(t)}function qS(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 9V7h-2V2.84A9.929 9.929 0 0 0 11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12c0-1.05-.17-2.05-.47-3H18zm-2.5-1c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5.67-1.5 1.5-1.5zm-7 0c.83 0 1.5.67 1.5 1.5S9.33 11 8.5 11 7 10.33 7 9.5 7.67 8 8.5 8zm3.5 9.5c-2.33 0-4.31-1.46-5.11-3.5h10.22c-.8 2.04-2.78 3.5-5.11 3.5zM22 3h2v2h-2v2h-2V5h-2V3h2V1h2v2z"},child:[]}]})(t)}function qN(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM8.5 8c.83 0 1.5.67 1.5 1.5S9.33 11 8.5 11 7 10.33 7 9.5 7.67 8 8.5 8zM12 18c-2.28 0-4.22-1.66-5-4h10c-.78 2.34-2.72 4-5 4zm3.5-7c-.83 0-1.5-.67-1.5-1.5S14.67 8 15.5 8s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"},child:[]}]})(t)}function GL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 22c1.1 0 2-.9 2-2h-4a2 2 0 0 0 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"},child:[]}]})(t)}function I1(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"},child:[]}]})(t)}function YL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"},child:[]}]})(t)}function KL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"},child:[]}]})(t)}function j1(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"},child:[]}]})(t)}function WL(t){return Pe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"},child:[]}]})(t)}const GN=w.createContext(),Hr=()=>{const t=w.useContext(GN);if(!t)throw new Error("useToast must be used within ToastProvider");return t},QL=({children:t})=>{const[e,n]=w.useState([]),r=w.useCallback((m,v="info")=>{const b=Date.now();n(x=>[...x,{id:b,message:m,type:v}]),setTimeout(()=>{n(x=>x.filter(C=>C.id!==b))},4e3)},[]),i=w.useCallback(m=>{n(v=>v.filter(b=>b.id!==m))},[]),o=w.useCallback(m=>r(m,"success"),[r]),u=w.useCallback(m=>r(m,"error"),[r]),h=w.useCallback(m=>r(m,"info"),[r]),f=w.useCallback(m=>r(m,"warning"),[r]);return c.jsxs(GN.Provider,{value:{success:o,error:u,info:h,warning:f},children:[t,c.jsx(XL,{toasts:e,removeToast:i})]})},XL=({toasts:t,removeToast:e})=>c.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(n=>c.jsx(JL,{toast:n,onClose:()=>e(n.id)},n.id))}),JL=({toast:t,onClose:e})=>{const n={success:c.jsx(dL,{size:20}),error:c.jsx(yL,{size:20}),warning:c.jsx(bL,{size:20}),info:c.jsx(op,{size:20})},r={success:"bg-green-600 border-green-500",error:"bg-red-600 border-red-500",warning:"bg-yellow-600 border-yellow-500",info:"bg-blue-600 border-blue-500"};return c.jsxs("div",{className:`${r[t.type]} border-l-4 text-white px-4 py-3 rounded-lg shadow-lg 
                  flex items-center gap-3 min-w-[300px] max-w-md animate-slide-in`,children:[c.jsx("div",{className:"flex-shrink-0",children:n[t.type]}),c.jsx("div",{className:"flex-1 text-sm font-medium",children:t.message}),c.jsx("button",{onClick:e,className:"flex-shrink-0 hover:bg-white/20 rounded p-1 transition-colors",children:c.jsx($n,{size:18})})]})};function YN(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=YN(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function ZL(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=YN(t))&&(r&&(r+=" "),r+=e);return r}const eV=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},tV=(t,e)=>({classGroupId:t,validator:e}),KN=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),dp="-",GS=[],nV="arbitrary..",rV=t=>{const e=iV(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:u=>{if(u.startsWith("[")&&u.endsWith("]"))return sV(u);const h=u.split(dp),f=h[0]===""&&h.length>1?1:0;return WN(h,f,e)},getConflictingClassGroupIds:(u,h)=>{if(h){const f=r[u],m=n[u];return f?m?eV(m,f):f:m||GS}return n[u]||GS}}},WN=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const i=t[e],o=n.nextPart.get(i);if(o){const m=WN(t,e+1,o);if(m)return m}const u=n.validators;if(u===null)return;const h=e===0?t.join(dp):t.slice(e).join(dp),f=u.length;for(let m=0;m<f;m++){const v=u[m];if(v.validator(h))return v.classGroupId}},sV=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?nV+r:void 0})(),iV=t=>{const{theme:e,classGroups:n}=t;return aV(n,e)},aV=(t,e)=>{const n=KN();for(const r in t){const i=t[r];D1(i,n,r,e)}return n},D1=(t,e,n,r)=>{const i=t.length;for(let o=0;o<i;o++){const u=t[o];oV(u,e,n,r)}},oV=(t,e,n,r)=>{if(typeof t=="string"){lV(t,e,n);return}if(typeof t=="function"){cV(t,e,n,r);return}uV(t,e,n,r)},lV=(t,e,n)=>{const r=t===""?e:QN(e,t);r.classGroupId=n},cV=(t,e,n,r)=>{if(dV(t)){D1(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(tV(n,t))},uV=(t,e,n,r)=>{const i=Object.entries(t),o=i.length;for(let u=0;u<o;u++){const[h,f]=i[u];D1(f,QN(e,h),n,r)}},QN=(t,e)=>{let n=t;const r=e.split(dp),i=r.length;for(let o=0;o<i;o++){const u=r[o];let h=n.nextPart.get(u);h||(h=KN(),n.nextPart.set(u,h)),n=h}return n},dV=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,hV=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const i=(o,u)=>{n[o]=u,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(o){let u=n[o];if(u!==void 0)return u;if((u=r[o])!==void 0)return i(o,u),u},set(o,u){o in n?n[o]=u:i(o,u)}}},F0="!",YS=":",fV=[],KS=(t,e,n,r,i)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:i}),mV=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=i=>{const o=[];let u=0,h=0,f=0,m;const v=i.length;for(let A=0;A<v;A++){const k=i[A];if(u===0&&h===0){if(k===YS){o.push(i.slice(f,A)),f=A+1;continue}if(k==="/"){m=A;continue}}k==="["?u++:k==="]"?u--:k==="("?h++:k===")"&&h--}const b=o.length===0?i:i.slice(f);let x=b,C=!1;b.endsWith(F0)?(x=b.slice(0,-1),C=!0):b.startsWith(F0)&&(x=b.slice(1),C=!0);const R=m&&m>f?m-f:void 0;return KS(o,C,x,R)};if(e){const i=e+YS,o=r;r=u=>u.startsWith(i)?o(u.slice(i.length)):KS(fV,!1,u,void 0,!0)}if(n){const i=r;r=o=>n({className:o,parseClassName:i})}return r},pV=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let i=[];for(let o=0;o<n.length;o++){const u=n[o],h=u[0]==="[",f=e.has(u);h||f?(i.length>0&&(i.sort(),r.push(...i),i=[]),r.push(u)):i.push(u)}return i.length>0&&(i.sort(),r.push(...i)),r}},gV=t=>({cache:hV(t.cacheSize),parseClassName:mV(t),sortModifiers:pV(t),...rV(t)}),vV=/\s+/,yV=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:o}=e,u=[],h=t.trim().split(vV);let f="";for(let m=h.length-1;m>=0;m-=1){const v=h[m],{isExternal:b,modifiers:x,hasImportantModifier:C,baseClassName:R,maybePostfixModifierPosition:A}=n(v);if(b){f=v+(f.length>0?" "+f:f);continue}let k=!!A,L=r(k?R.substring(0,A):R);if(!L){if(!k){f=v+(f.length>0?" "+f:f);continue}if(L=r(R),!L){f=v+(f.length>0?" "+f:f);continue}k=!1}const U=x.length===0?"":x.length===1?x[0]:o(x).join(":"),I=C?U+F0:U,M=I+L;if(u.indexOf(M)>-1)continue;u.push(M);const z=i(L,k);for(let H=0;H<z.length;++H){const E=z[H];u.push(I+E)}f=v+(f.length>0?" "+f:f)}return f},bV=(...t)=>{let e=0,n,r,i="";for(;e<t.length;)(n=t[e++])&&(r=XN(n))&&(i&&(i+=" "),i+=r);return i},XN=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=XN(t[r]))&&(n&&(n+=" "),n+=e);return n},xV=(t,...e)=>{let n,r,i,o;const u=f=>{const m=e.reduce((v,b)=>b(v),t());return n=gV(m),r=n.cache.get,i=n.cache.set,o=h,h(f)},h=f=>{const m=r(f);if(m)return m;const v=yV(f,n);return i(f,v),v};return o=u,(...f)=>o(bV(...f))},_V=[],Yn=t=>{const e=n=>n[t]||_V;return e.isThemeGetter=!0,e},JN=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,ZN=/^\((?:(\w[\w-]*):)?(.+)\)$/i,wV=/^\d+\/\d+$/,EV=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,SV=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,TV=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,CV=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,kV=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ac=t=>wV.test(t),Nt=t=>!!t&&!Number.isNaN(Number(t)),qa=t=>!!t&&Number.isInteger(Number(t)),zy=t=>t.endsWith("%")&&Nt(t.slice(0,-1)),Li=t=>EV.test(t),NV=()=>!0,AV=t=>SV.test(t)&&!TV.test(t),eA=()=>!1,RV=t=>CV.test(t),IV=t=>kV.test(t),jV=t=>!Ke(t)&&!We(t),DV=t=>eu(t,rA,eA),Ke=t=>JN.test(t),Ho=t=>eu(t,sA,AV),By=t=>eu(t,VV,Nt),WS=t=>eu(t,tA,eA),PV=t=>eu(t,nA,IV),tm=t=>eu(t,iA,RV),We=t=>ZN.test(t),ld=t=>tu(t,sA),MV=t=>tu(t,UV),QS=t=>tu(t,tA),OV=t=>tu(t,rA),LV=t=>tu(t,nA),nm=t=>tu(t,iA,!0),eu=(t,e,n)=>{const r=JN.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},tu=(t,e,n=!1)=>{const r=ZN.exec(t);return r?r[1]?e(r[1]):n:!1},tA=t=>t==="position"||t==="percentage",nA=t=>t==="image"||t==="url",rA=t=>t==="length"||t==="size"||t==="bg-size",sA=t=>t==="length",VV=t=>t==="number",UV=t=>t==="family-name",iA=t=>t==="shadow",zV=()=>{const t=Yn("color"),e=Yn("font"),n=Yn("text"),r=Yn("font-weight"),i=Yn("tracking"),o=Yn("leading"),u=Yn("breakpoint"),h=Yn("container"),f=Yn("spacing"),m=Yn("radius"),v=Yn("shadow"),b=Yn("inset-shadow"),x=Yn("text-shadow"),C=Yn("drop-shadow"),R=Yn("blur"),A=Yn("perspective"),k=Yn("aspect"),L=Yn("ease"),U=Yn("animate"),I=()=>["auto","avoid","all","avoid-page","page","left","right","column"],M=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],z=()=>[...M(),We,Ke],H=()=>["auto","hidden","clip","visible","scroll"],E=()=>["auto","contain","none"],S=()=>[We,Ke,f],j=()=>[ac,"full","auto",...S()],D=()=>[qa,"none","subgrid",We,Ke],V=()=>["auto",{span:["full",qa,We,Ke]},qa,We,Ke],B=()=>[qa,"auto",We,Ke],P=()=>["auto","min","max","fr",We,Ke],ne=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],oe=()=>["start","end","center","stretch","center-safe","end-safe"],G=()=>["auto",...S()],Z=()=>[ac,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...S()],J=()=>[t,We,Ke],Se=()=>[...M(),QS,WS,{position:[We,Ke]}],Le=()=>["no-repeat",{repeat:["","x","y","space","round"]}],$=()=>["auto","cover","contain",OV,DV,{size:[We,Ke]}],Q=()=>[zy,ld,Ho],re=()=>["","none","full",m,We,Ke],he=()=>["",Nt,ld,Ho],Te=()=>["solid","dashed","dotted","double"],Ue=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],te=()=>[Nt,zy,QS,WS],Oe=()=>["","none",R,We,Ke],Ie=()=>["none",Nt,We,Ke],Xe=()=>["none",Nt,We,Ke],ke=()=>[Nt,We,Ke],fe=()=>[ac,"full",...S()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Li],breakpoint:[Li],color:[NV],container:[Li],"drop-shadow":[Li],ease:["in","out","in-out"],font:[jV],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Li],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Li],shadow:[Li],spacing:["px",Nt],text:[Li],"text-shadow":[Li],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ac,Ke,We,k]}],container:["container"],columns:[{columns:[Nt,Ke,We,h]}],"break-after":[{"break-after":I()}],"break-before":[{"break-before":I()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:z()}],overflow:[{overflow:H()}],"overflow-x":[{"overflow-x":H()}],"overflow-y":[{"overflow-y":H()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:j()}],"inset-x":[{"inset-x":j()}],"inset-y":[{"inset-y":j()}],start:[{start:j()}],end:[{end:j()}],top:[{top:j()}],right:[{right:j()}],bottom:[{bottom:j()}],left:[{left:j()}],visibility:["visible","invisible","collapse"],z:[{z:[qa,"auto",We,Ke]}],basis:[{basis:[ac,"full","auto",h,...S()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Nt,ac,"auto","initial","none",Ke]}],grow:[{grow:["",Nt,We,Ke]}],shrink:[{shrink:["",Nt,We,Ke]}],order:[{order:[qa,"first","last","none",We,Ke]}],"grid-cols":[{"grid-cols":D()}],"col-start-end":[{col:V()}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":D()}],"row-start-end":[{row:V()}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":P()}],"auto-rows":[{"auto-rows":P()}],gap:[{gap:S()}],"gap-x":[{"gap-x":S()}],"gap-y":[{"gap-y":S()}],"justify-content":[{justify:[...ne(),"normal"]}],"justify-items":[{"justify-items":[...oe(),"normal"]}],"justify-self":[{"justify-self":["auto",...oe()]}],"align-content":[{content:["normal",...ne()]}],"align-items":[{items:[...oe(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...oe(),{baseline:["","last"]}]}],"place-content":[{"place-content":ne()}],"place-items":[{"place-items":[...oe(),"baseline"]}],"place-self":[{"place-self":["auto",...oe()]}],p:[{p:S()}],px:[{px:S()}],py:[{py:S()}],ps:[{ps:S()}],pe:[{pe:S()}],pt:[{pt:S()}],pr:[{pr:S()}],pb:[{pb:S()}],pl:[{pl:S()}],m:[{m:G()}],mx:[{mx:G()}],my:[{my:G()}],ms:[{ms:G()}],me:[{me:G()}],mt:[{mt:G()}],mr:[{mr:G()}],mb:[{mb:G()}],ml:[{ml:G()}],"space-x":[{"space-x":S()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":S()}],"space-y-reverse":["space-y-reverse"],size:[{size:Z()}],w:[{w:[h,"screen",...Z()]}],"min-w":[{"min-w":[h,"screen","none",...Z()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[u]},...Z()]}],h:[{h:["screen","lh",...Z()]}],"min-h":[{"min-h":["screen","lh","none",...Z()]}],"max-h":[{"max-h":["screen","lh",...Z()]}],"font-size":[{text:["base",n,ld,Ho]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,We,By]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",zy,Ke]}],"font-family":[{font:[MV,Ke,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,We,Ke]}],"line-clamp":[{"line-clamp":[Nt,"none",We,By]}],leading:[{leading:[o,...S()]}],"list-image":[{"list-image":["none",We,Ke]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",We,Ke]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:J()}],"text-color":[{text:J()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Te(),"wavy"]}],"text-decoration-thickness":[{decoration:[Nt,"from-font","auto",We,Ho]}],"text-decoration-color":[{decoration:J()}],"underline-offset":[{"underline-offset":[Nt,"auto",We,Ke]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",We,Ke]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",We,Ke]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Se()}],"bg-repeat":[{bg:Le()}],"bg-size":[{bg:$()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},qa,We,Ke],radial:["",We,Ke],conic:[qa,We,Ke]},LV,PV]}],"bg-color":[{bg:J()}],"gradient-from-pos":[{from:Q()}],"gradient-via-pos":[{via:Q()}],"gradient-to-pos":[{to:Q()}],"gradient-from":[{from:J()}],"gradient-via":[{via:J()}],"gradient-to":[{to:J()}],rounded:[{rounded:re()}],"rounded-s":[{"rounded-s":re()}],"rounded-e":[{"rounded-e":re()}],"rounded-t":[{"rounded-t":re()}],"rounded-r":[{"rounded-r":re()}],"rounded-b":[{"rounded-b":re()}],"rounded-l":[{"rounded-l":re()}],"rounded-ss":[{"rounded-ss":re()}],"rounded-se":[{"rounded-se":re()}],"rounded-ee":[{"rounded-ee":re()}],"rounded-es":[{"rounded-es":re()}],"rounded-tl":[{"rounded-tl":re()}],"rounded-tr":[{"rounded-tr":re()}],"rounded-br":[{"rounded-br":re()}],"rounded-bl":[{"rounded-bl":re()}],"border-w":[{border:he()}],"border-w-x":[{"border-x":he()}],"border-w-y":[{"border-y":he()}],"border-w-s":[{"border-s":he()}],"border-w-e":[{"border-e":he()}],"border-w-t":[{"border-t":he()}],"border-w-r":[{"border-r":he()}],"border-w-b":[{"border-b":he()}],"border-w-l":[{"border-l":he()}],"divide-x":[{"divide-x":he()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":he()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Te(),"hidden","none"]}],"divide-style":[{divide:[...Te(),"hidden","none"]}],"border-color":[{border:J()}],"border-color-x":[{"border-x":J()}],"border-color-y":[{"border-y":J()}],"border-color-s":[{"border-s":J()}],"border-color-e":[{"border-e":J()}],"border-color-t":[{"border-t":J()}],"border-color-r":[{"border-r":J()}],"border-color-b":[{"border-b":J()}],"border-color-l":[{"border-l":J()}],"divide-color":[{divide:J()}],"outline-style":[{outline:[...Te(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Nt,We,Ke]}],"outline-w":[{outline:["",Nt,ld,Ho]}],"outline-color":[{outline:J()}],shadow:[{shadow:["","none",v,nm,tm]}],"shadow-color":[{shadow:J()}],"inset-shadow":[{"inset-shadow":["none",b,nm,tm]}],"inset-shadow-color":[{"inset-shadow":J()}],"ring-w":[{ring:he()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:J()}],"ring-offset-w":[{"ring-offset":[Nt,Ho]}],"ring-offset-color":[{"ring-offset":J()}],"inset-ring-w":[{"inset-ring":he()}],"inset-ring-color":[{"inset-ring":J()}],"text-shadow":[{"text-shadow":["none",x,nm,tm]}],"text-shadow-color":[{"text-shadow":J()}],opacity:[{opacity:[Nt,We,Ke]}],"mix-blend":[{"mix-blend":[...Ue(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ue()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Nt]}],"mask-image-linear-from-pos":[{"mask-linear-from":te()}],"mask-image-linear-to-pos":[{"mask-linear-to":te()}],"mask-image-linear-from-color":[{"mask-linear-from":J()}],"mask-image-linear-to-color":[{"mask-linear-to":J()}],"mask-image-t-from-pos":[{"mask-t-from":te()}],"mask-image-t-to-pos":[{"mask-t-to":te()}],"mask-image-t-from-color":[{"mask-t-from":J()}],"mask-image-t-to-color":[{"mask-t-to":J()}],"mask-image-r-from-pos":[{"mask-r-from":te()}],"mask-image-r-to-pos":[{"mask-r-to":te()}],"mask-image-r-from-color":[{"mask-r-from":J()}],"mask-image-r-to-color":[{"mask-r-to":J()}],"mask-image-b-from-pos":[{"mask-b-from":te()}],"mask-image-b-to-pos":[{"mask-b-to":te()}],"mask-image-b-from-color":[{"mask-b-from":J()}],"mask-image-b-to-color":[{"mask-b-to":J()}],"mask-image-l-from-pos":[{"mask-l-from":te()}],"mask-image-l-to-pos":[{"mask-l-to":te()}],"mask-image-l-from-color":[{"mask-l-from":J()}],"mask-image-l-to-color":[{"mask-l-to":J()}],"mask-image-x-from-pos":[{"mask-x-from":te()}],"mask-image-x-to-pos":[{"mask-x-to":te()}],"mask-image-x-from-color":[{"mask-x-from":J()}],"mask-image-x-to-color":[{"mask-x-to":J()}],"mask-image-y-from-pos":[{"mask-y-from":te()}],"mask-image-y-to-pos":[{"mask-y-to":te()}],"mask-image-y-from-color":[{"mask-y-from":J()}],"mask-image-y-to-color":[{"mask-y-to":J()}],"mask-image-radial":[{"mask-radial":[We,Ke]}],"mask-image-radial-from-pos":[{"mask-radial-from":te()}],"mask-image-radial-to-pos":[{"mask-radial-to":te()}],"mask-image-radial-from-color":[{"mask-radial-from":J()}],"mask-image-radial-to-color":[{"mask-radial-to":J()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":M()}],"mask-image-conic-pos":[{"mask-conic":[Nt]}],"mask-image-conic-from-pos":[{"mask-conic-from":te()}],"mask-image-conic-to-pos":[{"mask-conic-to":te()}],"mask-image-conic-from-color":[{"mask-conic-from":J()}],"mask-image-conic-to-color":[{"mask-conic-to":J()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Se()}],"mask-repeat":[{mask:Le()}],"mask-size":[{mask:$()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",We,Ke]}],filter:[{filter:["","none",We,Ke]}],blur:[{blur:Oe()}],brightness:[{brightness:[Nt,We,Ke]}],contrast:[{contrast:[Nt,We,Ke]}],"drop-shadow":[{"drop-shadow":["","none",C,nm,tm]}],"drop-shadow-color":[{"drop-shadow":J()}],grayscale:[{grayscale:["",Nt,We,Ke]}],"hue-rotate":[{"hue-rotate":[Nt,We,Ke]}],invert:[{invert:["",Nt,We,Ke]}],saturate:[{saturate:[Nt,We,Ke]}],sepia:[{sepia:["",Nt,We,Ke]}],"backdrop-filter":[{"backdrop-filter":["","none",We,Ke]}],"backdrop-blur":[{"backdrop-blur":Oe()}],"backdrop-brightness":[{"backdrop-brightness":[Nt,We,Ke]}],"backdrop-contrast":[{"backdrop-contrast":[Nt,We,Ke]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Nt,We,Ke]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Nt,We,Ke]}],"backdrop-invert":[{"backdrop-invert":["",Nt,We,Ke]}],"backdrop-opacity":[{"backdrop-opacity":[Nt,We,Ke]}],"backdrop-saturate":[{"backdrop-saturate":[Nt,We,Ke]}],"backdrop-sepia":[{"backdrop-sepia":["",Nt,We,Ke]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":S()}],"border-spacing-x":[{"border-spacing-x":S()}],"border-spacing-y":[{"border-spacing-y":S()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",We,Ke]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Nt,"initial",We,Ke]}],ease:[{ease:["linear","initial",L,We,Ke]}],delay:[{delay:[Nt,We,Ke]}],animate:[{animate:["none",U,We,Ke]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[A,We,Ke]}],"perspective-origin":[{"perspective-origin":z()}],rotate:[{rotate:Ie()}],"rotate-x":[{"rotate-x":Ie()}],"rotate-y":[{"rotate-y":Ie()}],"rotate-z":[{"rotate-z":Ie()}],scale:[{scale:Xe()}],"scale-x":[{"scale-x":Xe()}],"scale-y":[{"scale-y":Xe()}],"scale-z":[{"scale-z":Xe()}],"scale-3d":["scale-3d"],skew:[{skew:ke()}],"skew-x":[{"skew-x":ke()}],"skew-y":[{"skew-y":ke()}],transform:[{transform:[We,Ke,"","none","gpu","cpu"]}],"transform-origin":[{origin:z()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:fe()}],"translate-x":[{"translate-x":fe()}],"translate-y":[{"translate-y":fe()}],"translate-z":[{"translate-z":fe()}],"translate-none":["translate-none"],accent:[{accent:J()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:J()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",We,Ke]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",We,Ke]}],fill:[{fill:["none",...J()]}],"stroke-w":[{stroke:[Nt,ld,Ho,By]}],stroke:[{stroke:["none",...J()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},BV=xV(zV);function Ht(...t){return BV(ZL(t))}function eg(t){if(!t)return"";const e=t.toDate?t.toDate():new Date(t),r=new Date-e;return r<6e4?"Just now":r<36e5?`${Math.floor(r/6e4)}m ago`:r<864e5?`${Math.floor(r/36e5)}h ago`:r<6048e5?`${Math.floor(r/864e5)}d ago`:e.toLocaleDateString()}function FV(t){switch(t){case"admin":return"bg-admin/20 text-admin border-admin/30";case"moderator":return"bg-moderator/20 text-moderator border-moderator/30";default:return"bg-member/20 text-member border-member/30"}}const bn=({label:t,error:e,className:n,containerClassName:r,...i})=>c.jsxs("div",{className:Ht("flex flex-col gap-1.5",r),children:[t&&c.jsx("label",{className:"text-sm font-medium text-dark-text",children:t}),c.jsx("input",{className:Ht("bg-dark-input text-dark-text px-4 py-2.5 rounded-md","border border-transparent focus:border-brand-primary","outline-none transition-colors duration-200","placeholder:text-dark-muted",e&&"border-admin",n),...i}),e&&c.jsx("span",{className:"text-sm text-admin",children:e})]}),st=({children:t,variant:e="primary",size:n="md",className:r,disabled:i,...o})=>{const u="font-medium rounded-md transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",h={primary:"bg-brand-primary hover:bg-brand-hover text-white",secondary:"bg-dark-input hover:bg-dark-hover text-dark-text",danger:"bg-admin hover:bg-admin/80 text-white",ghost:"hover:bg-dark-hover text-dark-text"},f={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};return c.jsx("button",{className:Ht(u,h[e],f[n],r),disabled:i,...o,children:t})},HV=({isOpen:t,onClose:e})=>{const[n,r]=w.useState(""),[i,o]=w.useState(!1),[u,h]=w.useState(!1),{success:f,error:m}=Hr(),v=async b=>{b.preventDefault(),o(!0);try{await Rb(Ns,n),h(!0),f("Password reset email sent! Check your inbox."),setTimeout(()=>{e(),h(!1),r("")},3e3)}catch(x){console.error("Password reset error:",x),x.code==="auth/user-not-found"?m("No account found with this email address."):x.code==="auth/invalid-email"?m("Invalid email address."):m("Failed to send reset email. Please try again.")}finally{o(!1)}};return t?c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-dark-sidebar rounded-lg shadow-2xl w-full max-w-md p-6 relative",children:[c.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-dark-muted hover:text-dark-text transition-colors",children:c.jsx($n,{size:24})}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-dark-text mb-2",children:"Reset Password"}),c.jsx("p",{className:"text-dark-muted text-sm",children:"Enter your email address and we'll send you a link to reset your password."})]}),u?c.jsx("div",{className:"bg-green-500/10 border border-green-500/30 text-green-400 px-4 py-3 rounded-md text-sm text-center",children:" Reset email sent successfully! Check your inbox."}):c.jsxs("form",{onSubmit:v,className:"space-y-4",children:[c.jsx(bn,{label:"Email Address",type:"email",placeholder:"your@email.com",value:n,onChange:b=>r(b.target.value),required:!0,autoFocus:!0}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx(st,{type:"button",variant:"secondary",onClick:e,className:"flex-1",children:"Cancel"}),c.jsx(st,{type:"submit",variant:"primary",className:"flex-1",disabled:i||!n,children:i?"Sending...":"Send Reset Link"})]})]})]})}):null},$V=({onSwitchToRegister:t,onSwitchToReset:e,onSwitchToSSOTest:n})=>{const{login:r,signInWithGoogle:i}=yn(),[o,u]=w.useState({email:"",password:""}),[h,f]=w.useState(""),[m,v]=w.useState(!1),[b,x]=w.useState(!1),[C,R]=w.useState(!1),A=async L=>{L.preventDefault(),f(""),v(!0);try{await r(o.email,o.password)}catch(U){f(U.message||"Failed to login")}finally{v(!1)}},k=async()=>{f(""),x(!0);try{await i()}catch(L){f(L.message||"Failed to sign in with Google")}finally{x(!1)}};return c.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-dark-bg p-4",children:[c.jsxs("div",{className:"w-full max-w-md bg-dark-sidebar rounded-lg shadow-2xl p-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-dark-text mb-2",children:"Welcome Back!"}),c.jsx("p",{className:"text-dark-muted",children:"Login to Lumo"})]}),c.jsxs("form",{onSubmit:A,className:"space-y-4",children:[c.jsx(bn,{label:"Email",type:"email",placeholder:"Enter your email",value:o.email,onChange:L=>u({...o,email:L.target.value}),required:!0}),c.jsxs("div",{children:[c.jsx(bn,{label:"Password",type:"password",placeholder:"Enter your password",value:o.password,onChange:L=>u({...o,password:L.target.value}),required:!0}),c.jsx("div",{className:"mt-2 text-right",children:c.jsx("button",{type:"button",onClick:()=>R(!0),className:"text-sm text-brand-primary hover:underline",children:"Forgot Password?"})})]}),h&&c.jsx("div",{className:"bg-admin/10 border border-admin/30 text-admin px-4 py-3 rounded-md text-sm",children:h}),c.jsx(st,{type:"submit",variant:"primary",className:"w-full",disabled:m,children:m?"Logging in...":"Login"})]}),c.jsxs("div",{className:"mt-6 flex items-center",children:[c.jsx("div",{className:"flex-1 border-t border-dark-border"}),c.jsx("span",{className:"px-4 text-dark-muted text-sm",children:"or"}),c.jsx("div",{className:"flex-1 border-t border-dark-border"})]}),c.jsx("div",{className:"mt-6",children:c.jsxs("button",{type:"button",onClick:k,disabled:b||m,className:"w-full flex items-center justify-center gap-3 bg-white hover:bg-gray-50 text-gray-700 font-medium py-3 px-4 rounded-md border border-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[c.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),b?"Signing in...":"Sign in with Google"]})}),c.jsx("div",{className:"mt-6 text-center",children:c.jsxs("div",{className:"text-dark-muted text-sm",children:["Don't have an account?"," ",c.jsx("button",{onClick:t,className:"text-brand-primary hover:underline",children:"Register"})]})})]}),c.jsx(HV,{isOpen:C,onClose:()=>R(!1)})]})},qV=({onSwitchToLogin:t})=>{const{register:e}=yn(),[n,r]=w.useState({displayName:"",email:"",password:"",confirmPassword:""}),[i,o]=w.useState(""),[u,h]=w.useState(""),[f,m]=w.useState(!1),[v,b]=w.useState([]);w.useEffect(()=>{(async()=>{try{const R=_t(ce,"users"),A=await fi(R),k=[];A.forEach(L=>{const U=L.data().displayName;U&&k.push(U.toLowerCase())}),b(k)}catch(R){console.error("Error loading usernames:",R)}})()},[]),w.useEffect(()=>{const C=n.displayName;if(C){if(C.length<3){h("Username must be at least 3 characters");return}if(!/^[a-zA-Z0-9-_]+$/.test(C)){h("Only letters, numbers, hyphens (-) and underscores (_) allowed");return}const R=C.toLowerCase();v.includes(R)?h("This username is already taken"):h("")}else h("")},[n.displayName,v]);const x=async C=>{if(C.preventDefault(),o(""),u){o(u);return}if(n.password!==n.confirmPassword){o("Passwords do not match");return}if(n.password.length<6){o("Password must be at least 6 characters");return}m(!0);try{await e(n.email,n.password,n.displayName)}catch(R){o(R.message||"Failed to register")}finally{m(!1)}};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-bg p-4",children:c.jsxs("div",{className:"w-full max-w-md bg-dark-sidebar rounded-lg shadow-2xl p-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-dark-text mb-2",children:"Create Account"}),c.jsx("p",{className:"text-dark-muted",children:"Join Lumo"})]}),c.jsxs("form",{onSubmit:x,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx(bn,{label:"Display Name",type:"text",placeholder:"Enter your display name",value:n.displayName,onChange:C=>r({...n,displayName:C.target.value}),required:!0}),u&&c.jsx("p",{className:"text-xs text-admin mt-1",children:u}),n.displayName&&!u&&c.jsx("p",{className:"text-xs text-green-500 mt-1",children:" Username available"})]}),c.jsx(bn,{label:"Email",type:"email",placeholder:"Enter your email",value:n.email,onChange:C=>r({...n,email:C.target.value}),required:!0}),c.jsx(bn,{label:"Password",type:"password",placeholder:"Enter your password",value:n.password,onChange:C=>r({...n,password:C.target.value}),required:!0}),c.jsx(bn,{label:"Confirm Password",type:"password",placeholder:"Confirm your password",value:n.confirmPassword,onChange:C=>r({...n,confirmPassword:C.target.value}),required:!0}),i&&c.jsx("div",{className:"bg-admin/10 border border-admin/30 text-admin px-4 py-3 rounded-md text-sm",children:i}),c.jsx(st,{type:"submit",variant:"primary",className:"w-full",disabled:f||!!u,children:f?"Creating account...":"Register"})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsxs("div",{className:"text-dark-muted text-sm",children:["Already have an account?"," ",c.jsx("button",{onClick:t,className:"text-brand-primary hover:underline",children:"Login"})]})})]})})},GV=({onSwitchToLogin:t})=>{const{resetPassword:e}=yn(),[n,r]=w.useState(""),[i,o]=w.useState(""),[u,h]=w.useState(!1),[f,m]=w.useState(!1),v=async b=>{b.preventDefault(),o(""),h(!1),m(!0);try{await e(n),h(!0)}catch(x){o(x.message||"Failed to send reset email")}finally{m(!1)}};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-bg p-4",children:c.jsxs("div",{className:"w-full max-w-md bg-dark-sidebar rounded-lg shadow-2xl p-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-dark-text mb-2",children:"Reset Password"}),c.jsx("p",{className:"text-dark-muted",children:"Enter your email to receive a reset link"})]}),c.jsxs("form",{onSubmit:v,className:"space-y-4",children:[c.jsx(bn,{label:"Email",type:"email",placeholder:"Enter your email",value:n,onChange:b=>r(b.target.value),required:!0}),i&&c.jsx("div",{className:"bg-admin/10 border border-admin/30 text-admin px-4 py-3 rounded-md text-sm",children:i}),u&&c.jsx("div",{className:"bg-green-500/10 border border-green-500/30 text-green-500 px-4 py-3 rounded-md text-sm",children:"Password reset email sent! Check your inbox."}),c.jsx(st,{type:"submit",variant:"primary",className:"w-full",disabled:f,children:f?"Sending...":"Send Reset Link"})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsx("button",{onClick:t,className:"text-brand-primary hover:underline text-sm",children:"Back to Login"})})]})})},YV=({onBack:t})=>{const{currentUser:e}=yn(),[n,r]=w.useState(!1),[i,o]=w.useState(null),[u,h]=w.useState(null),f="https://lumobuildvercel.vercel.app/api/sso-token",m=async()=>{r(!0),o(null),h(null);try{if(!e)throw new Error("nce Google ile giri yapn!");console.log(" Testing SSO Backend..."),console.log("User:",e.email);const v=await e.getIdToken();console.log(" Google ID Token alnd"),console.log(" Backend'e istek gnderiliyor:",f);const b=await fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({googleIdToken:v,email:e.email})});console.log(" Response status:",b.status);const x=await b.json();if(console.log(" Response data:",x),x.success)o({success:!0,customToken:x.customToken,user:x.user,message:" Backend alyor! Custom token baaryla oluturuldu."});else throw new Error(x.message||x.error||"Bilinmeyen hata")}catch(v){console.error(" Test failed:",v),h(v.message)}finally{r(!1)}};return c.jsx("div",{className:"min-h-screen bg-dark-bg p-8",children:c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-dark-text",children:" SSO Backend Test"}),t&&c.jsx("button",{onClick:t,className:"px-4 py-2 bg-dark-sidebar hover:bg-dark-border text-dark-text rounded-md transition-colors",children:" Back to Login"})]}),c.jsxs("div",{className:"bg-dark-sidebar rounded-lg p-6 mb-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-dark-text mb-4",children:"Kullanc Bilgileri"}),e?c.jsxs("div",{className:"space-y-2 text-dark-muted",children:[c.jsx("p",{children:" Giri yapld"}),c.jsxs("p",{children:[c.jsx("strong",{children:"Email:"})," ",e.email]}),c.jsxs("p",{children:[c.jsx("strong",{children:"UID:"})," ",e.uid]})]}):c.jsxs("div",{className:"bg-yellow-900/20 border border-yellow-500/30 rounded p-4",children:[c.jsx("p",{className:"text-yellow-500 mb-3",children:" Giri yapmanz gerekiyor"}),c.jsx("p",{className:"text-dark-muted text-sm mb-3",children:"SSO backend'i test etmek iin nce Google ile giri yapmalsnz."}),t?c.jsx("button",{onClick:t,className:"w-full bg-brand-primary hover:bg-brand-primary/80 text-white font-medium py-2 px-4 rounded-md transition-colors",children:"Login Sayfasna Git"}):c.jsx("p",{className:"text-sm text-dark-muted",children:"Ltfen ana sayfaya gidip Google ile giri yapn."})]})]}),c.jsxs("div",{className:"bg-dark-sidebar rounded-lg p-6 mb-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-dark-text mb-4",children:"Backend Testi"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-dark-muted mb-2",children:"Vercel API URL:"}),c.jsx("input",{type:"text",value:f,readOnly:!0,className:"w-full bg-dark-input text-dark-text px-4 py-2 rounded-md border border-dark-border"}),c.jsx("p",{className:"text-sm text-dark-muted mt-2",children:" Yukardaki URL'i kendi Vercel project URL'iniz ile deitirin"})]}),c.jsx("button",{onClick:m,disabled:!e||n,className:"w-full bg-brand-primary hover:bg-brand-primary/80 text-white font-medium py-3 px-6 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n?c.jsxs("span",{className:"flex items-center justify-center gap-2",children:[c.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Test ediliyor..."]}):" Backend'i Test Et"})]}),i&&c.jsxs("div",{className:"bg-green-900/20 border border-green-500 rounded-lg p-6 mb-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-green-500 mb-4",children:i.message}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-dark-muted mb-1",children:"User Info:"}),c.jsx("pre",{className:"bg-dark-bg p-3 rounded text-sm text-dark-text overflow-x-auto",children:JSON.stringify(i.user,null,2)})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-dark-muted mb-1",children:"Custom Token:"}),c.jsx("pre",{className:"bg-dark-bg p-3 rounded text-sm text-dark-text overflow-x-auto break-all",children:i.customToken})]}),c.jsxs("div",{className:"bg-green-900/30 p-4 rounded",children:[c.jsx("p",{className:"text-green-400 font-medium mb-2",children:" Test Baarl!"}),c.jsxs("ul",{className:"text-sm text-dark-muted space-y-1",children:[c.jsx("li",{children:" Backend API eriilebilir"}),c.jsx("li",{children:" Google ID token doruland"}),c.jsx("li",{children:" Custom token oluturuldu"}),c.jsx("li",{children:" SSO sistemi alyor!"})]})]})]})]}),u&&c.jsxs("div",{className:"bg-red-900/20 border border-red-500 rounded-lg p-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-red-500 mb-4",children:" Test Baarsz"}),c.jsx("p",{className:"text-dark-text mb-4",children:u}),c.jsxs("div",{className:"bg-red-900/30 p-4 rounded",children:[c.jsx("p",{className:"text-red-400 font-medium mb-2",children:"Olas Sorunlar:"}),c.jsxs("ul",{className:"text-sm text-dark-muted space-y-1",children:[c.jsx("li",{children:" Vercel URL yanl olabilir"}),c.jsx("li",{children:" Environment variables eksik olabilir"}),c.jsx("li",{children:" CORS hatas olabilir"}),c.jsx("li",{children:" Backend deploy edilmemi olabilir"})]})]})]}),c.jsxs("div",{className:"bg-dark-sidebar rounded-lg p-6 mt-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-dark-text mb-4",children:" Nasl Test Edilir?"}),c.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-dark-muted",children:[c.jsx("li",{children:"Google ile giri yapn (ana sayfadan)"}),c.jsx("li",{children:"Yukardaki URL'i kendi Vercel project URL'iniz ile deitirin"}),c.jsx("li",{children:`"Backend'i Test Et" butonuna tklayn`}),c.jsx("li",{children:"Sonucu bekleyin"})]}),c.jsxs("div",{className:"mt-4 p-4 bg-dark-bg rounded",children:[c.jsx("p",{className:"text-sm text-dark-muted mb-2",children:c.jsx("strong",{children:"Vercel URL'inizi bulmak iin:"})}),c.jsxs("ol",{className:"text-sm text-dark-muted space-y-1 ml-4",children:[c.jsx("li",{children:"1. Vercel Dashboard'a gidin"}),c.jsx("li",{children:"2. Projenizi sein"}),c.jsx("li",{children:`3. "Visit" butonunun yanndaki URL'i kopyalayn`}),c.jsxs("li",{children:["4. Sonuna ",c.jsx("code",{className:"bg-dark-input px-1 rounded",children:"/api/sso-token"})," ekleyin"]})]})]})]}),c.jsxs("div",{className:"bg-dark-sidebar rounded-lg p-6 mt-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-dark-text mb-4",children:" Debug"}),c.jsx("p",{className:"text-dark-muted mb-2",children:"Detayl loglar iin tarayc console'unu an (F12)"}),c.jsx("p",{className:"text-sm text-dark-muted",children:"Test srasnda tm admlar console'a yazdrlacak."})]})]})})};function fr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ia(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function H0({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function P1(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function aA(t,e,n="/"){return KV(t,e,n,!1)}function KV(t,e,n,r){let i=typeof e=="string"?P1(e):e,o=mo(i.pathname||"/",n);if(o==null)return null;let u=oA(t);WV(u);let h=null;for(let f=0;h==null&&f<u.length;++f){let m=aU(o);h=sU(u[f],m,r)}return h}function oA(t,e=[],n=[],r="",i=!1){let o=(u,h,f=i,m)=>{let v={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(r)&&f)return;fr(v.relativePath.startsWith(r),`Absolute route path "${v.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(r.length)}let b=Xi([r,v.relativePath]),x=n.concat(v);u.children&&u.children.length>0&&(fr(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),oA(u.children,e,x,b,f)),!(u.path==null&&!u.index)&&e.push({path:b,score:nU(b,u.index),routesMeta:x})};return t.forEach((u,h)=>{if(u.path===""||!u.path?.includes("?"))o(u,h);else for(let f of lA(u.path))o(u,h,!0,f)}),e}function lA(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let u=lA(r.join("/")),h=[];return h.push(...u.map(f=>f===""?o:[o,f].join("/"))),i&&h.push(...u),h.map(f=>t.startsWith("/")&&f===""?"/":f)}function WV(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:rU(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var QV=/^:[\w-]+$/,XV=3,JV=2,ZV=1,eU=10,tU=-2,XS=t=>t==="*";function nU(t,e){let n=t.split("/"),r=n.length;return n.some(XS)&&(r+=tU),e&&(r+=JV),n.filter(i=>!XS(i)).reduce((i,o)=>i+(QV.test(o)?XV:o===""?ZV:eU),r)}function rU(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function sU(t,e,n=!1){let{routesMeta:r}=t,i={},o="/",u=[];for(let h=0;h<r.length;++h){let f=r[h],m=h===r.length-1,v=o==="/"?e:e.slice(o.length)||"/",b=hp({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},v),x=f.route;if(!b&&m&&n&&!r[r.length-1].route.index&&(b=hp({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},v)),!b)return null;Object.assign(i,b.params),u.push({params:i,pathname:Xi([o,b.pathname]),pathnameBase:uU(Xi([o,b.pathnameBase])),route:x}),b.pathnameBase!=="/"&&(o=Xi([o,b.pathnameBase]))}return u}function hp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=iU(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],u=o.replace(/(.)\/+$/,"$1"),h=i.slice(1);return{params:r.reduce((m,{paramName:v,isOptional:b},x)=>{if(v==="*"){let R=h[x]||"";u=o.slice(0,o.length-R.length).replace(/(.)\/+$/,"$1")}const C=h[x];return b&&!C?m[v]=void 0:m[v]=(C||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:u,pattern:t}}function iU(t,e=!1,n=!0){ia(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,f)=>(r.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function aU(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ia(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function mo(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var oU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function lU(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?P1(t):t,o;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?o=JS(n.substring(1),"/"):o=JS(n,e)):o=e,{pathname:o,search:dU(r),hash:hU(i)}}function JS(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Fy(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function cU(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function cA(t){let e=cU(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function uA(t,e,n,r=!1){let i;typeof t=="string"?i=P1(t):(i={...t},fr(!i.pathname||!i.pathname.includes("?"),Fy("?","pathname","search",i)),fr(!i.pathname||!i.pathname.includes("#"),Fy("#","pathname","hash",i)),fr(!i.search||!i.search.includes("#"),Fy("#","search","hash",i)));let o=t===""||i.pathname==="",u=o?"/":i.pathname,h;if(u==null)h=n;else{let b=e.length-1;if(!r&&u.startsWith("..")){let x=u.split("/");for(;x[0]==="..";)x.shift(),b-=1;i.pathname=x.join("/")}h=b>=0?e[b]:"/"}let f=lU(i,h),m=u&&u!=="/"&&u.endsWith("/"),v=(o||u===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(m||v)&&(f.pathname+="/"),f}var Xi=t=>t.join("/").replace(/\/\/+/g,"/"),uU=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),dU=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,hU=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,fU=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function mU(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function pU(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var dA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function hA(t,e){let n=t;if(typeof n!="string"||!oU.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(dA)try{let o=new URL(window.location.href),u=n.startsWith("//")?new URL(o.protocol+n):new URL(n),h=mo(u.pathname,e);u.origin===o.origin&&h!=null?n=h+u.search+u.hash:i=!0}catch{ia(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var fA=["POST","PUT","PATCH","DELETE"];new Set(fA);var gU=["GET",...fA];new Set(gU);var nu=w.createContext(null);nu.displayName="DataRouter";var tg=w.createContext(null);tg.displayName="DataRouterState";var vU=w.createContext(!1),mA=w.createContext({isTransitioning:!1});mA.displayName="ViewTransition";var yU=w.createContext(new Map);yU.displayName="Fetchers";var bU=w.createContext(null);bU.displayName="Await";var Ls=w.createContext(null);Ls.displayName="Navigation";var M1=w.createContext(null);M1.displayName="Location";var da=w.createContext({outlet:null,matches:[],isDataRoute:!1});da.displayName="Route";var O1=w.createContext(null);O1.displayName="RouteError";var pA="REACT_ROUTER_ERROR",xU="REDIRECT",_U="ROUTE_ERROR_RESPONSE";function wU(t){if(t.startsWith(`${pA}:${xU}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function EU(t){if(t.startsWith(`${pA}:${_U}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new fU(e.status,e.statusText,e.data)}catch{}}function SU(t,{relative:e}={}){fr(ng(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=w.useContext(Ls),{hash:i,pathname:o,search:u}=_h(t,{relative:e}),h=o;return n!=="/"&&(h=o==="/"?n:Xi([n,o])),r.createHref({pathname:h,search:u,hash:i})}function ng(){return w.useContext(M1)!=null}function gl(){return fr(ng(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(M1).location}var gA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function vA(t){w.useContext(Ls).static||w.useLayoutEffect(t)}function yA(){let{isDataRoute:t}=w.useContext(da);return t?LU():TU()}function TU(){fr(ng(),"useNavigate() may be used only in the context of a <Router> component.");let t=w.useContext(nu),{basename:e,navigator:n}=w.useContext(Ls),{matches:r}=w.useContext(da),{pathname:i}=gl(),o=JSON.stringify(cA(r)),u=w.useRef(!1);return vA(()=>{u.current=!0}),w.useCallback((f,m={})=>{if(ia(u.current,gA),!u.current)return;if(typeof f=="number"){n.go(f);return}let v=uA(f,JSON.parse(o),i,m.relative==="path");t==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Xi([e,v.pathname])),(m.replace?n.replace:n.push)(v,m.state,m)},[e,n,o,i,t])}w.createContext(null);function _h(t,{relative:e}={}){let{matches:n}=w.useContext(da),{pathname:r}=gl(),i=JSON.stringify(cA(n));return w.useMemo(()=>uA(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function CU(t,e,n,r,i){fr(ng(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=w.useContext(Ls),{matches:u}=w.useContext(da),h=u[u.length-1],f=h?h.params:{},m=h?h.pathname:"/",v=h?h.pathnameBase:"/",b=h&&h.route;{let U=b&&b.path||"";xA(m,!b||U.endsWith("*")||U.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${U}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${U}"> to <Route path="${U==="/"?"*":`${U}/*`}">.`)}let x=gl(),C;C=x;let R=C.pathname||"/",A=R;if(v!=="/"){let U=v.replace(/^\//,"").split("/");A="/"+R.replace(/^\//,"").split("/").slice(U.length).join("/")}let k=aA(t,{pathname:A});return ia(b||k!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),ia(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),IU(k&&k.map(U=>Object.assign({},U,{params:Object.assign({},f,U.params),pathname:Xi([v,o.encodeLocation?o.encodeLocation(U.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?v:Xi([v,o.encodeLocation?o.encodeLocation(U.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathnameBase])})),u,n,r,i)}function kU(){let t=OU(),e=mU(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",t),u=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:o},"ErrorBoundary")," or"," ",w.createElement("code",{style:o},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),n?w.createElement("pre",{style:i},n):null,u)}var NU=w.createElement(kU,null),bA=class extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=EU(t.digest);n&&(t=n)}let e=t!==void 0?w.createElement(da.Provider,{value:this.props.routeContext},w.createElement(O1.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?w.createElement(AU,{error:t},e):e}};bA.contextType=vU;var Hy=new WeakMap;function AU({children:t,error:e}){let{basename:n}=w.useContext(Ls);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=wU(e.digest);if(r){let i=Hy.get(e);if(i)throw i;let o=hA(r.location,n);if(dA&&!Hy.get(e))if(o.isExternal||r.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const u=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:r.replace}));throw Hy.set(e,u),u}return w.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return t}function RU({routeContext:t,match:e,children:n}){let r=w.useContext(nu);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),w.createElement(da.Provider,{value:t},n)}function IU(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,u=n?.errors;if(u!=null){let v=o.findIndex(b=>b.route.id&&u?.[b.route.id]!==void 0);fr(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,v+1))}let h=!1,f=-1;if(n)for(let v=0;v<o.length;v++){let b=o[v];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(f=v),b.route.id){let{loaderData:x,errors:C}=n,R=b.route.loader&&!x.hasOwnProperty(b.route.id)&&(!C||C[b.route.id]===void 0);if(b.route.lazy||R){h=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}let m=n&&r?(v,b)=>{r(v,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:pU(n.matches),errorInfo:b})}:void 0;return o.reduceRight((v,b,x)=>{let C,R=!1,A=null,k=null;n&&(C=u&&b.route.id?u[b.route.id]:void 0,A=b.route.errorElement||NU,h&&(f<0&&x===0?(xA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,k=null):f===x&&(R=!0,k=b.route.hydrateFallbackElement||null)));let L=e.concat(o.slice(0,x+1)),U=()=>{let I;return C?I=A:R?I=k:b.route.Component?I=w.createElement(b.route.Component,null):b.route.element?I=b.route.element:I=v,w.createElement(RU,{match:b,routeContext:{outlet:v,matches:L,isDataRoute:n!=null},children:I})};return n&&(b.route.ErrorBoundary||b.route.errorElement||x===0)?w.createElement(bA,{location:n.location,revalidation:n.revalidation,component:A,error:C,children:U(),routeContext:{outlet:null,matches:L,isDataRoute:!0},onError:m}):U()},null)}function L1(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jU(t){let e=w.useContext(nu);return fr(e,L1(t)),e}function DU(t){let e=w.useContext(tg);return fr(e,L1(t)),e}function PU(t){let e=w.useContext(da);return fr(e,L1(t)),e}function V1(t){let e=PU(t),n=e.matches[e.matches.length-1];return fr(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function MU(){return V1("useRouteId")}function OU(){let t=w.useContext(O1),e=DU("useRouteError"),n=V1("useRouteError");return t!==void 0?t:e.errors?.[n]}function LU(){let{router:t}=jU("useNavigate"),e=V1("useNavigate"),n=w.useRef(!1);return vA(()=>{n.current=!0}),w.useCallback(async(i,o={})=>{ia(n.current,gA),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...o}))},[t,e])}var ZS={};function xA(t,e,n){!e&&!ZS[t]&&(ZS[t]=!0,ia(!1,n))}w.memo(VU);function VU({routes:t,future:e,state:n,onError:r}){return CU(t,void 0,n,r,e)}var wm="get",Em="application/x-www-form-urlencoded";function rg(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function UU(t){return rg(t)&&t.tagName.toLowerCase()==="button"}function zU(t){return rg(t)&&t.tagName.toLowerCase()==="form"}function BU(t){return rg(t)&&t.tagName.toLowerCase()==="input"}function FU(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function HU(t,e){return t.button===0&&(!e||e==="_self")&&!FU(t)}var rm=null;function $U(){if(rm===null)try{new FormData(document.createElement("form"),0),rm=!1}catch{rm=!0}return rm}var qU=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function $y(t){return t!=null&&!qU.has(t)?(ia(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Em}"`),null):t}function GU(t,e){let n,r,i,o,u;if(zU(t)){let h=t.getAttribute("action");r=h?mo(h,e):null,n=t.getAttribute("method")||wm,i=$y(t.getAttribute("enctype"))||Em,o=new FormData(t)}else if(UU(t)||BU(t)&&(t.type==="submit"||t.type==="image")){let h=t.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=t.getAttribute("formaction")||h.getAttribute("action");if(r=f?mo(f,e):null,n=t.getAttribute("formmethod")||h.getAttribute("method")||wm,i=$y(t.getAttribute("formenctype"))||$y(h.getAttribute("enctype"))||Em,o=new FormData(h,t),!$U()){let{name:m,type:v,value:b}=t;if(v==="image"){let x=m?`${m}.`:"";o.append(`${x}x`,"0"),o.append(`${x}y`,"0")}else m&&o.append(m,b)}}else{if(rg(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=wm,r=null,i=Em,u=t}return o&&i==="text/plain"&&(u=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function U1(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function YU(t,e,n,r){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&mo(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function KU(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function WU(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function QU(t,e,n){let r=await Promise.all(t.map(async i=>{let o=e.routes[i.route.id];if(o){let u=await KU(o,n);return u.links?u.links():[]}return[]}));return ez(r.flat(1).filter(WU).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function e4(t,e,n,r,i,o){let u=(f,m)=>n[m]?f.route.id!==n[m].route.id:!0,h=(f,m)=>n[m].pathname!==f.pathname||n[m].route.path?.endsWith("*")&&n[m].params["*"]!==f.params["*"];return o==="assets"?e.filter((f,m)=>u(f,m)||h(f,m)):o==="data"?e.filter((f,m)=>{let v=r.routes[f.route.id];if(!v||!v.hasLoader)return!1;if(u(f,m)||h(f,m))return!0;if(f.route.shouldRevalidate){let b=f.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function XU(t,e,{includeHydrateFallback:n}={}){return JU(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function JU(t){return[...new Set(t)]}function ZU(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function ez(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let o=JSON.stringify(ZU(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}function _A(){let t=w.useContext(nu);return U1(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function tz(){let t=w.useContext(tg);return U1(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var z1=w.createContext(void 0);z1.displayName="FrameworkContext";function wA(){let t=w.useContext(z1);return U1(t,"You must render this element inside a <HydratedRouter> element"),t}function nz(t,e){let n=w.useContext(z1),[r,i]=w.useState(!1),[o,u]=w.useState(!1),{onFocus:h,onBlur:f,onMouseEnter:m,onMouseLeave:v,onTouchStart:b}=e,x=w.useRef(null);w.useEffect(()=>{if(t==="render"&&u(!0),t==="viewport"){let A=L=>{L.forEach(U=>{u(U.isIntersecting)})},k=new IntersectionObserver(A,{threshold:.5});return x.current&&k.observe(x.current),()=>{k.disconnect()}}},[t]),w.useEffect(()=>{if(r){let A=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(A)}}},[r]);let C=()=>{i(!0)},R=()=>{i(!1),u(!1)};return n?t!=="intent"?[o,x,{}]:[o,x,{onFocus:cd(h,C),onBlur:cd(f,R),onMouseEnter:cd(m,C),onMouseLeave:cd(v,R),onTouchStart:cd(b,C)}]:[!1,x,{}]}function cd(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function rz({page:t,...e}){let{router:n}=_A(),r=w.useMemo(()=>aA(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?w.createElement(iz,{page:t,matches:r,...e}):null}function sz(t){let{manifest:e,routeModules:n}=wA(),[r,i]=w.useState([]);return w.useEffect(()=>{let o=!1;return QU(t,e,n).then(u=>{o||i(u)}),()=>{o=!0}},[t,e,n]),r}function iz({page:t,matches:e,...n}){let r=gl(),{future:i,manifest:o,routeModules:u}=wA(),{basename:h}=_A(),{loaderData:f,matches:m}=tz(),v=w.useMemo(()=>e4(t,e,m,o,r,"data"),[t,e,m,o,r]),b=w.useMemo(()=>e4(t,e,m,o,r,"assets"),[t,e,m,o,r]),x=w.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let A=new Set,k=!1;if(e.forEach(U=>{let I=o.routes[U.route.id];!I||!I.hasLoader||(!v.some(M=>M.route.id===U.route.id)&&U.route.id in f&&u[U.route.id]?.shouldRevalidate||I.hasClientLoader?k=!0:A.add(U.route.id))}),A.size===0)return[];let L=YU(t,h,i.unstable_trailingSlashAwareDataRequests,"data");return k&&A.size>0&&L.searchParams.set("_routes",e.filter(U=>A.has(U.route.id)).map(U=>U.route.id).join(",")),[L.pathname+L.search]},[h,i.unstable_trailingSlashAwareDataRequests,f,r,o,v,e,t,u]),C=w.useMemo(()=>XU(b,o),[b,o]),R=sz(b);return w.createElement(w.Fragment,null,x.map(A=>w.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...n})),C.map(A=>w.createElement("link",{key:A,rel:"modulepreload",href:A,...n})),R.map(({key:A,link:k})=>w.createElement("link",{key:A,nonce:n.nonce,...k,crossOrigin:k.crossOrigin??n.crossOrigin})))}function az(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var oz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{oz&&(window.__reactRouterVersion="7.13.0")}catch{}var EA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,SA=w.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:u,state:h,target:f,to:m,preventScrollReset:v,viewTransition:b,unstable_defaultShouldRevalidate:x,...C},R){let{basename:A,unstable_useTransitions:k}=w.useContext(Ls),L=typeof m=="string"&&EA.test(m),U=hA(m,A);m=U.to;let I=SU(m,{relative:i}),[M,z,H]=nz(r,C),E=dz(m,{replace:u,state:h,target:f,preventScrollReset:v,relative:i,viewTransition:b,unstable_defaultShouldRevalidate:x,unstable_useTransitions:k});function S(D){e&&e(D),D.defaultPrevented||E(D)}let j=w.createElement("a",{...C,...H,href:U.absoluteURL||I,onClick:U.isExternal||o?e:S,ref:az(R,z),target:f,"data-discover":!L&&n==="render"?"true":void 0});return M&&!L?w.createElement(w.Fragment,null,j,w.createElement(rz,{page:I})):j});SA.displayName="Link";var lz=w.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:u,viewTransition:h,children:f,...m},v){let b=_h(u,{relative:m.relative}),x=gl(),C=w.useContext(tg),{navigator:R,basename:A}=w.useContext(Ls),k=C!=null&&gz(b)&&h===!0,L=R.encodeLocation?R.encodeLocation(b).pathname:b.pathname,U=x.pathname,I=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;n||(U=U.toLowerCase(),I=I?I.toLowerCase():null,L=L.toLowerCase()),I&&A&&(I=mo(I,A)||I);const M=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let z=U===L||!i&&U.startsWith(L)&&U.charAt(M)==="/",H=I!=null&&(I===L||!i&&I.startsWith(L)&&I.charAt(L.length)==="/"),E={isActive:z,isPending:H,isTransitioning:k},S=z?e:void 0,j;typeof r=="function"?j=r(E):j=[r,z?"active":null,H?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let D=typeof o=="function"?o(E):o;return w.createElement(SA,{...m,"aria-current":S,className:j,ref:v,style:D,to:u,viewTransition:h},typeof f=="function"?f(E):f)});lz.displayName="NavLink";var cz=w.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:o,method:u=wm,action:h,onSubmit:f,relative:m,preventScrollReset:v,viewTransition:b,unstable_defaultShouldRevalidate:x,...C},R)=>{let{unstable_useTransitions:A}=w.useContext(Ls),k=mz(),L=pz(h,{relative:m}),U=u.toLowerCase()==="get"?"get":"post",I=typeof h=="string"&&EA.test(h),M=z=>{if(f&&f(z),z.defaultPrevented)return;z.preventDefault();let H=z.nativeEvent.submitter,E=H?.getAttribute("formmethod")||u,S=()=>k(H||z.currentTarget,{fetcherKey:e,method:E,navigate:n,replace:i,state:o,relative:m,preventScrollReset:v,viewTransition:b,unstable_defaultShouldRevalidate:x});A&&n!==!1?w.startTransition(()=>S()):S()};return w.createElement("form",{ref:R,method:U,action:L,onSubmit:r?f:M,...C,"data-discover":!I&&t==="render"?"true":void 0})});cz.displayName="Form";function uz(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function TA(t){let e=w.useContext(nu);return fr(e,uz(t)),e}function dz(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:u,unstable_defaultShouldRevalidate:h,unstable_useTransitions:f}={}){let m=yA(),v=gl(),b=_h(t,{relative:o});return w.useCallback(x=>{if(HU(x,e)){x.preventDefault();let C=n!==void 0?n:H0(v)===H0(b),R=()=>m(t,{replace:C,state:r,preventScrollReset:i,relative:o,viewTransition:u,unstable_defaultShouldRevalidate:h});f?w.startTransition(()=>R()):R()}},[v,m,b,n,r,e,t,i,o,u,h,f])}var hz=0,fz=()=>`__${String(++hz)}__`;function mz(){let{router:t}=TA("useSubmit"),{basename:e}=w.useContext(Ls),n=MU(),r=t.fetch,i=t.navigate;return w.useCallback(async(o,u={})=>{let{action:h,method:f,encType:m,formData:v,body:b}=GU(o,e);if(u.navigate===!1){let x=u.fetcherKey||fz();await r(x,n,u.action||h,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:v,body:b,formMethod:u.method||f,formEncType:u.encType||m,flushSync:u.flushSync})}else await i(u.action||h,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:v,body:b,formMethod:u.method||f,formEncType:u.encType||m,replace:u.replace,state:u.state,fromRouteId:n,flushSync:u.flushSync,viewTransition:u.viewTransition})},[r,i,e,n])}function pz(t,{relative:e}={}){let{basename:n}=w.useContext(Ls),r=w.useContext(da);fr(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={..._h(t||".",{relative:e})},u=gl();if(t==null){o.search=u.search;let h=new URLSearchParams(o.search),f=h.getAll("index");if(f.some(v=>v==="")){h.delete("index"),f.filter(b=>b).forEach(b=>h.append("index",b));let v=h.toString();o.search=v?`?${v}`:""}}return(!t||t===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Xi([n,o.pathname])),H0(o)}function gz(t,{relative:e}={}){let n=w.useContext(mA);fr(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=TA("useViewTransitionState"),i=_h(t,{relative:e});if(!n.isTransitioning)return!1;let o=mo(n.currentLocation.pathname,r)||n.currentLocation.pathname,u=mo(n.nextLocation.pathname,r)||n.nextLocation.pathname;return hp(i.pathname,u)!=null||hp(i.pathname,o)!=null}const vz=({onBackToLogin:t})=>{const{currentUser:e}=yn(),[n,r]=w.useState("idle"),[i,o]=w.useState(""),u=yA();w.useEffect(()=>{const f=new URLSearchParams(window.location.search),m=f.get("sso_token")||f.get("sso");m?h(m):u("/login")},[]);const h=async f=>{try{r("processing");const v=new URLSearchParams(window.location.search).get("sso_token");let b=f;if(v){console.log(" Exchanging Google ID token for custom token...");const k=await(await fetch("https://lumobuild.vercel.app/api/sso-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({googleIdToken:f})})).json();if(!k.success)throw new Error(k.message||"Failed to exchange token");b=k.customToken,console.log(" Custom token received from backend")}console.log(" Logging in with custom token...");const x=await _C(Ns,b);console.log(" SSO Login successful:",x.user.email);const C=Re(ce,"users",x.user.uid);(await Zc(C)).exists()?await dr(C,{isOnline:!0,lastSeen:ft()},{merge:!0}):(console.log("Creating new user profile for SSO user..."),await dr(C,{displayName:x.user.displayName||"User",email:x.user.email||null,photoURL:x.user.photoURL||null,role:"member",createdAt:ft(),isOnline:!0,lastSeen:ft(),isUsernameSet:!1})),r("success"),setTimeout(()=>{window.location.reload()},1500)}catch(m){console.error(" SSO Login failed:",m),r("error"),m.code==="auth/invalid-custom-token"?o("Invalid or expired token. Please try again."):m.code==="auth/network-request-failed"?o("Network error. Please check your connection."):o(m.message||"Login failed. Please try again.")}};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-bg p-4",children:c.jsx("div",{className:"max-w-md w-full bg-dark-sidebar rounded-lg shadow-2xl p-8",children:c.jsxs("div",{className:"text-center",children:[n==="processing"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-brand-primary mx-auto mb-4"}),c.jsx("h2",{className:"text-2xl font-bold text-dark-text mb-2",children:"Logging you in..."}),c.jsx("p",{className:"text-dark-muted",children:"Please wait while we verify your credentials"})]}),n==="success"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("h2",{className:"text-2xl font-bold text-green-500 mb-2",children:"Welcome to Lumo!"}),c.jsx("p",{className:"text-dark-muted",children:"Redirecting to your dashboard..."})]}),n==="error"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("h2",{className:"text-2xl font-bold text-red-500 mb-2",children:"Login Failed"}),c.jsx("p",{className:"text-dark-text mb-4",children:i}),c.jsx("button",{onClick:()=>u("/login"),className:"bg-brand-primary hover:bg-brand-primary/80 text-white font-medium py-2 px-6 rounded-md transition-colors",children:"Go to Login"})]})]})})})},yz=({onSwipeLeft:t,onSwipeRight:e,minSwipeDistance:n=50})=>{const r=w.useRef(null),i=w.useRef(null);return{onTouchStart:f=>{i.current=null,r.current=f.targetTouches[0].clientX},onTouchMove:f=>{i.current=f.targetTouches[0].clientX},onTouchEnd:()=>{if(!r.current||!i.current)return;const f=r.current-i.current,m=f>n,v=f<-n;m&&t&&t(),v&&e&&e()}}},bz=()=>{const[t,e]=w.useState({camera:"unknown",microphone:"unknown",notifications:"unknown"});return w.useEffect(()=>{if(sa.getPlatform()!=="android")return;const r=setTimeout(async()=>{console.log("[AndroidPermissions] Requesting permissions on Android startup...");try{(await navigator.mediaDevices.getUserMedia({video:!0,audio:!0})).getTracks().forEach(o=>o.stop()),e(o=>({...o,camera:"granted",microphone:"granted"})),console.log("[AndroidPermissions] Camera and microphone permissions granted")}catch(i){console.log("[AndroidPermissions] Camera/microphone permission result:",i.name),i.name==="NotAllowedError"&&e(o=>({...o,camera:"denied",microphone:"denied"}))}if("Notification"in window&&Notification.permission==="default")try{const i=await Notification.requestPermission();e(o=>({...o,notifications:i})),console.log("[AndroidPermissions] Notification permission:",i)}catch(i){console.log("[AndroidPermissions] Notification permission error:",i)}},1e3);return()=>clearTimeout(r)},[]),t};function xz(t){return Pe({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111.1 8 0 119.1 0 256s111.1 248 248 248 248-111.1 248-248S384.9 8 248 8zm100.7 364.9c-4.2 0-6.8-1.3-10.7-3.6-62.4-37.6-135-39.2-206.7-24.5-3.9 1-9 2.6-11.9 2.6-9.7 0-15.8-7.7-15.8-15.8 0-10.3 6.1-15.2 13.6-16.8 81.9-18.1 165.6-16.5 237 26.2 6.1 3.9 9.7 7.4 9.7 16.5s-7.1 15.4-15.2 15.4zm26.9-65.6c-5.2 0-8.7-2.3-12.3-4.2-62.5-37-155.7-51.9-238.6-29.4-4.8 1.3-7.4 2.6-11.9 2.6-10.7 0-19.4-8.7-19.4-19.4s5.2-17.8 15.5-20.7c27.8-7.8 56.2-13.6 97.8-13.6 64.9 0 127.6 16.1 177 45.5 8.1 4.8 11.3 11 11.3 19.7-.1 10.8-8.5 19.5-19.4 19.5zm31-76.2c-5.2 0-8.4-1.3-12.9-3.9-71.2-42.5-198.5-52.7-280.9-29.7-3.6 1-8.1 2.6-12.9 2.6-13.2 0-23.3-10.3-23.3-23.6 0-13.6 8.4-21.3 17.4-23.9 35.2-10.3 74.6-15.2 117.5-15.2 73 0 149.5 15.2 205.4 47.8 7.8 4.5 12.9 10.7 12.9 22.6 0 13.6-11 23.3-23.2 23.3z"},child:[]}]})(t)}function t4(t){return Pe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(t)}function _z(t){return Pe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(t)}function n4(t){return Pe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(t)}function wz(t){return Pe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function B1(t){return Pe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"},child:[]}]})(t)}function CA(t){return Pe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function sg(t){return Pe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M440.667 182.109l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l14.623-81.891C377.123 38.754 371.468 32 363.997 32h-40.632a12 12 0 0 0-11.813 9.891L296.175 128H197.54l14.623-81.891C213.477 38.754 207.822 32 200.35 32h-40.632a12 12 0 0 0-11.813 9.891L132.528 128H53.432a12 12 0 0 0-11.813 9.891l-7.143 40C33.163 185.246 38.818 192 46.289 192h74.81L98.242 320H19.146a12 12 0 0 0-11.813 9.891l-7.143 40C-1.123 377.246 4.532 384 12.003 384h74.81L72.19 465.891C70.877 473.246 76.532 480 84.003 480h40.632a12 12 0 0 0 11.813-9.891L151.826 384h98.634l-14.623 81.891C234.523 473.246 240.178 480 247.65 480h40.632a12 12 0 0 0 11.813-9.891L315.472 384h79.096a12 12 0 0 0 11.813-9.891l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l22.857-128h79.096a12 12 0 0 0 11.813-9.891zM261.889 320h-98.634l22.857-128h98.634l-22.857 128z"},child:[]}]})(t)}function Ez(t){return Pe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.52 32 0 146.496 0 288v48a32 32 0 0 0 17.689 28.622l14.383 7.191C34.083 431.903 83.421 480 144 480h24c13.255 0 24-10.745 24-24V280c0-13.255-10.745-24-24-24h-24c-31.342 0-59.671 12.879-80 33.627V288c0-105.869 86.131-192 192-192s192 86.131 192 192v1.627C427.671 268.879 399.342 256 368 256h-24c-13.255 0-24 10.745-24 24v176c0 13.255 10.745 24 24 24h24c60.579 0 109.917-48.098 111.928-108.187l14.382-7.191A32 32 0 0 0 512 336v-48c0-141.479-114.496-256-256-256z"},child:[]}]})(t)}function F1(t){return Pe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M633.82 458.1l-157.8-121.96C488.61 312.13 496 285.01 496 256v-48c0-8.84-7.16-16-16-16h-16c-8.84 0-16 7.16-16 16v48c0 17.92-3.96 34.8-10.72 50.2l-26.55-20.52c3.1-9.4 5.28-19.22 5.28-29.67V96c0-53.02-42.98-96-96-96s-96 42.98-96 96v45.36L45.47 3.37C38.49-2.05 28.43-.8 23.01 6.18L3.37 31.45C-2.05 38.42-.8 48.47 6.18 53.9l588.36 454.73c6.98 5.43 17.03 4.17 22.46-2.81l19.64-25.27c5.41-6.97 4.16-17.02-2.82-22.45zM400 464h-56v-33.77c11.66-1.6 22.85-4.54 33.67-8.31l-50.11-38.73c-6.71.4-13.41.87-20.35.2-55.85-5.45-98.74-48.63-111.18-101.85L144 241.31v6.85c0 89.64 63.97 169.55 152 181.69V464h-56c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function Sz(t){return Pe({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M176 352c53.02 0 96-42.98 96-96V96c0-53.02-42.98-96-96-96S80 42.98 80 96v160c0 53.02 42.98 96 96 96zm160-160h-16c-8.84 0-16 7.16-16 16v48c0 74.8-64.49 134.82-140.79 127.38C96.71 376.89 48 317.11 48 250.3V208c0-8.84-7.16-16-16-16H16c-8.84 0-16 7.16-16 16v40.16c0 89.64 63.97 169.55 152 181.69V464H96c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16h-56v-33.77C285.71 418.47 352 344.9 352 256v-48c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function Tz(t){return Pe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M268.2 381.4l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48c-10.7 4.6-16.5 16.1-13.9 27.5l24 104c2.5 10.8 12.1 18.6 23.4 18.6 100.7 0 193.7-32.4 269.7-86.9l-80-61.8c-10.9 6.5-22.1 12.7-33.6 18.1zm365.6 76.7L475.1 335.5C537.9 256.4 576 156.9 576 48c0-11.2-7.7-20.9-18.6-23.4l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-12.2 26.1-27.9 50.3-46 72.8L45.5 3.4C38.5-2 28.5-.8 23 6.2L3.4 31.4c-5.4 7-4.2 17 2.8 22.4l588.4 454.7c7 5.4 17 4.2 22.5-2.8l19.6-25.3c5.4-6.8 4.1-16.9-2.9-22.3z"},child:[]}]})(t)}function r4(t){return Pe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(t)}function Cz(t){return Pe({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function kz(t){return Pe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M633.8 458.1L362.3 248.3C412.1 230.7 448 183.8 448 128 448 57.3 390.7 0 320 0c-67.1 0-121.5 51.8-126.9 117.4L45.5 3.4C38.5-2 28.5-.8 23 6.2L3.4 31.4c-5.4 7-4.2 17 2.8 22.4l588.4 454.7c7 5.4 17 4.2 22.5-2.8l19.6-25.3c5.4-6.8 4.1-16.9-2.9-22.3zM96 422.4V464c0 26.5 21.5 48 48 48h350.2L207.4 290.3C144.2 301.3 96 356 96 422.4z"},child:[]}]})(t)}function Nz(t){return Pe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M633.8 458.1l-55-42.5c15.4-1.4 29.2-13.7 29.2-31.1v-257c0-25.5-29.1-40.4-50.4-25.8L448 177.3v137.2l-32-24.7v-178c0-26.4-21.4-47.8-47.8-47.8H123.9L45.5 3.4C38.5-2 28.5-.8 23 6.2L3.4 31.4c-5.4 7-4.2 17 2.8 22.4L42.7 82 416 370.6l178.5 138c7 5.4 17 4.2 22.5-2.8l19.6-25.3c5.5-6.9 4.2-17-2.8-22.4zM32 400.2c0 26.4 21.4 47.8 47.8 47.8h288.4c11.2 0 21.4-4 29.6-10.5L32 154.7v245.5z"},child:[]}]})(t)}function kA(t){return Pe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M336.2 64H47.8C21.4 64 0 85.4 0 111.8v288.4C0 426.6 21.4 448 47.8 448h288.4c26.4 0 47.8-21.4 47.8-47.8V111.8c0-26.4-21.4-47.8-47.8-47.8zm189.4 37.7L416 177.3v157.4l109.6 75.5c21.2 14.6 50.4-.3 50.4-25.8V127.5c0-25.4-29.1-40.4-50.4-25.8z"},child:[]}]})(t)}function NA(t){return Pe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zm233.32-51.08c-11.17-7.33-26.18-4.24-33.51 6.95-7.34 11.17-4.22 26.18 6.95 33.51 66.27 43.49 105.82 116.6 105.82 195.58 0 78.98-39.55 152.09-105.82 195.58-11.17 7.32-14.29 22.34-6.95 33.5 7.04 10.71 21.93 14.56 33.51 6.95C528.27 439.58 576 351.33 576 256S528.27 72.43 448.35 19.97zM480 256c0-63.53-32.06-121.94-85.77-156.24-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36 6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.54 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z"},child:[]}]})(t)}const Ps=({isOpen:t,onClose:e,title:n,children:r,size:i="md",showCloseButton:o=!0})=>{if(w.useEffect(()=>{const h=f=>{f.key==="Escape"&&t&&e()};return t?(document.body.style.overflow="hidden",document.addEventListener("keydown",h)):document.body.style.overflow="unset",()=>{document.body.style.overflow="unset",document.removeEventListener("keydown",h)}},[t,e]),!t)return null;const u={sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl"};return c.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center",children:[c.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:e}),c.jsxs("div",{className:Ht("relative bg-dark-sidebar rounded-lg shadow-2xl","w-full mx-4 max-h-[90vh] overflow-y-auto",u[i]),children:[(n||o)&&c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-dark-hover",children:[c.jsx("h2",{className:"text-xl font-semibold text-dark-text",children:n}),o&&c.jsx("button",{onClick:e,className:"text-dark-muted hover:text-dark-text transition-colors",children:c.jsx($n,{size:24})})]}),c.jsx("div",{className:"p-6",children:r})]})]})},H1={premium:{id:"premium",label:"Premium Member",description:"Premium Member",icon:sl,color:"#F47FFF"},admin:{id:"admin",label:"Admin",description:"Server Administrator",icon:UN,color:"#f23f42"},verified:{id:"verified",label:"Verified",description:"Verified Member",icon:vL,color:"#3ba55c"},developer:{id:"developer",label:"Developer",description:"App Developer",icon:hL,color:"#5865F2"}},Az=t=>H1[t];class Rz{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const n of this._parts)e.push(n);return Iz(e).buffer}}function Iz(t){let e=0;for(const i of t)e+=i.byteLength;const n=new Uint8Array(e);let r=0;for(const i of t){const o=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);n.set(o,r),r+=i.byteLength}return n}function AA(t){return new jz(t).unpack()}function RA(t){const e=new Dz,n=e.pack(t);return n instanceof Promise?n.then(()=>e.getBuffer()):e.getBuffer()}class jz{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let n;if((n=e^160)<=15)return this.unpack_raw(n);if((n=e^176)<=15)return this.unpack_string(n);if((n=e^144)<=15)return this.unpack_array(n);if((n=e^128)<=15)return this.unpack_map(n);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),n=(e[0]&255)*256+(e[1]&255);return this.index+=2,n}unpack_uint32(){const e=this.read(4),n=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,n}unpack_uint64(){const e=this.read(8),n=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,n}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,n}unpack_string(e){const n=this.read(e);let r=0,i="",o,u;for(;r<e;)o=n[r],o<160?(u=o,r++):(o^192)<32?(u=(o&31)<<6|n[r+1]&63,r+=2):(o^224)<16?(u=(o&15)<<12|(n[r+1]&63)<<6|n[r+2]&63,r+=3):(u=(o&7)<<18|(n[r+1]&63)<<12|(n[r+2]&63)<<6|n[r+3]&63,r+=4),i+=String.fromCodePoint(u);return this.index+=e,i}unpack_array(e){const n=new Array(e);for(let r=0;r<e;r++)n[r]=this.unpack();return n}unpack_map(e){const n={};for(let r=0;r<e;r++){const i=this.unpack();n[i]=this.unpack()}return n}unpack_float(){const e=this.unpack_uint32(),n=e>>31,r=(e>>23&255)-127,i=e&8388607|8388608;return(n===0?1:-1)*i*2**(r-23)}unpack_double(){const e=this.unpack_uint32(),n=this.unpack_uint32(),r=e>>31,i=(e>>20&2047)-1023,u=(e&1048575|1048576)*2**(i-20)+n*2**(i-52);return(r===0?1:-1)*u}read(e){const n=this.index;if(n+e<=this.length)return this.dataView.subarray(n,n+e);throw new Error("BinaryPackFailure: read index out of range")}}class Dz{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const n=e.constructor;if(e instanceof Array){const r=this.pack_array(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const r=e;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const r=this.pack_object(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const n=e.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const n=this._textEncoder.encode(e),r=n.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(e){const n=e.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const r=i=>{if(i<n){const o=this.pack(e[i]);return o instanceof Promise?o.then(()=>r(i+1)):r(i+1)}};return r(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let n=0;e<0&&(n=1,e=-e);const r=Math.floor(Math.log(e)/Math.LN2),i=e/2**r-1,o=Math.floor(i*2**52),u=2**32,h=n<<31|r+1023<<20|o/u&1048575,f=o%u;this._bufferBuilder.append(203),this.pack_int32(h),this.pack_int32(f)}pack_object(e){const n=Object.keys(e),r=n.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const i=o=>{if(o<n.length){const u=n[o];if(e.hasOwnProperty(u)){this.pack(u);const h=this.pack(e[u]);if(h instanceof Promise)return h.then(()=>i(o+1))}return i(o+1)}};return i(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const n=e&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(e){const n=e/4294967296,r=e%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const n=Math.floor(e/4294967296),r=e%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new Rz,this._textEncoder=new TextEncoder}}let IA=!0,jA=!0;function wd(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseFloat(r[n],10)}function vl(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(u,h){if(u!==e)return i.apply(this,arguments);const f=m=>{const v=n(m);v&&(h.handleEvent?h.handleEvent(v):h(v))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(h,f),i.apply(this,[u,f])};const o=r.removeEventListener;r.removeEventListener=function(u,h){if(u!==e||!this._eventMap||!this._eventMap[e])return o.apply(this,arguments);if(!this._eventMap[e].has(h))return o.apply(this,arguments);const f=this._eventMap[e].get(h);return this._eventMap[e].delete(h),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[u,f])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(u){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),u&&this.addEventListener(e,this["_on"+e]=u)},enumerable:!0,configurable:!0})}function Pz(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(IA=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function Mz(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(jA=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function DA(){if(typeof window=="object"){if(IA)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function $1(t,e){jA&&console.warn(t+" is deprecated, please use "+e+" instead.")}function Oz(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=parseInt(wd(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(wd(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(wd(n.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=wd(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function s4(t){return Object.prototype.toString.call(t)==="[object Object]"}function PA(t){return s4(t)?Object.keys(t).reduce(function(e,n){const r=s4(t[n]),i=r?PA(t[n]):t[n],o=r&&!Object.keys(i).length;return i===void 0||o?e:Object.assign(e,{[n]:i})},{}):t}function $0(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?$0(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(i=>{$0(t,t.get(i),n)})}))}function i4(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;const o=[];return t.forEach(u=>{u.type==="track"&&u.trackIdentifier===e.id&&o.push(u)}),o.forEach(u=>{t.forEach(h=>{h.type===r&&h.trackId===u.id&&$0(t,h,i)})}),i}const a4=DA;function MA(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(h){if(typeof h!="object"||h.mandatory||h.optional)return h;const f={};return Object.keys(h).forEach(m=>{if(m==="require"||m==="advanced"||m==="mediaSource")return;const v=typeof h[m]=="object"?h[m]:{ideal:h[m]};v.exact!==void 0&&typeof v.exact=="number"&&(v.min=v.max=v.exact);const b=function(x,C){return x?x+C.charAt(0).toUpperCase()+C.slice(1):C==="deviceId"?"sourceId":C};if(v.ideal!==void 0){f.optional=f.optional||[];let x={};typeof v.ideal=="number"?(x[b("min",m)]=v.ideal,f.optional.push(x),x={},x[b("max",m)]=v.ideal,f.optional.push(x)):(x[b("",m)]=v.ideal,f.optional.push(x))}v.exact!==void 0&&typeof v.exact!="number"?(f.mandatory=f.mandatory||{},f.mandatory[b("",m)]=v.exact):["min","max"].forEach(x=>{v[x]!==void 0&&(f.mandatory=f.mandatory||{},f.mandatory[b(x,m)]=v[x])})}),h.advanced&&(f.optional=(f.optional||[]).concat(h.advanced)),f},i=function(h,f){if(e.version>=61)return f(h);if(h=JSON.parse(JSON.stringify(h)),h&&typeof h.audio=="object"){const m=function(v,b,x){b in v&&!(x in v)&&(v[x]=v[b],delete v[b])};h=JSON.parse(JSON.stringify(h)),m(h.audio,"autoGainControl","googAutoGainControl"),m(h.audio,"noiseSuppression","googNoiseSuppression"),h.audio=r(h.audio)}if(h&&typeof h.video=="object"){let m=h.video.facingMode;m=m&&(typeof m=="object"?m:{ideal:m});const v=e.version<66;if(m&&(m.exact==="user"||m.exact==="environment"||m.ideal==="user"||m.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!v)){delete h.video.facingMode;let b;if(m.exact==="environment"||m.ideal==="environment"?b=["back","rear"]:(m.exact==="user"||m.ideal==="user")&&(b=["front"]),b)return n.mediaDevices.enumerateDevices().then(x=>{x=x.filter(R=>R.kind==="videoinput");let C=x.find(R=>b.some(A=>R.label.toLowerCase().includes(A)));return!C&&x.length&&b.includes("back")&&(C=x[x.length-1]),C&&(h.video.deviceId=m.exact?{exact:C.deviceId}:{ideal:C.deviceId}),h.video=r(h.video),a4("chrome: "+JSON.stringify(h)),f(h)})}h.video=r(h.video)}return a4("chrome: "+JSON.stringify(h)),f(h)},o=function(h){return e.version>=64?h:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[h.name]||h.name,message:h.message,constraint:h.constraint||h.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},u=function(h,f,m){i(h,v=>{n.webkitGetUserMedia(v,f,b=>{m&&m(o(b))})})};if(n.getUserMedia=u.bind(n),n.mediaDevices.getUserMedia){const h=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(f){return i(f,m=>h(m).then(v=>{if(m.audio&&!v.getAudioTracks().length||m.video&&!v.getVideoTracks().length)throw v.getTracks().forEach(b=>{b.stop()}),new DOMException("","NotFoundError");return v},v=>Promise.reject(o(v))))}}}function OA(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function LA(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(h=>h.track&&h.track.id===i.track.id):o={track:i.track};const u=new Event("track");u.track=i.track,u.receiver=o,u.transceiver={receiver:o},u.streams=[r.stream],this.dispatchEvent(u)}),r.stream.getTracks().forEach(i=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(h=>h.track&&h.track.id===i.id):o={track:i};const u=new Event("track");u.track=i,u.receiver=o,u.transceiver={receiver:o},u.streams=[r.stream],this.dispatchEvent(u)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else vl(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function VA(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(i,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=i.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:i}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(h,f){let m=i.apply(this,arguments);return m||(m=e(this,h),this._senders.push(m)),m};const o=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(h){o.apply(this,arguments);const f=this._senders.indexOf(h);f!==-1&&this._senders.splice(f,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],n.apply(this,[o]),o.getTracks().forEach(u=>{this._senders.push(e(this,u))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],r.apply(this,[o]),o.getTracks().forEach(u=>{const h=this._senders.find(f=>f.track===u);h&&this._senders.splice(this._senders.indexOf(h),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function UA(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const o=n.apply(this,[]);return o.forEach(u=>u._pc=this),o});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const o=r.apply(this,arguments);return o._pc=this,o}),t.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(u=>i4(u,o.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(o=>o._pc=this),i}),vl(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(o=>i4(o,i.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let i,o,u;return this.getSenders().forEach(h=>{h.track===r&&(i?u=!0:i=h)}),this.getReceivers().forEach(h=>(h.track===r&&(o?u=!0:o=h),h.track===r)),u||i&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function zA(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(u=>this._shimmedLocalStreams[u][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(u,h){if(!h)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const f=e.apply(this,arguments);return this._shimmedLocalStreams[h.id]?this._shimmedLocalStreams[h.id].indexOf(f)===-1&&this._shimmedLocalStreams[h.id].push(f):this._shimmedLocalStreams[h.id]=[h,f],f};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(u){this._shimmedLocalStreams=this._shimmedLocalStreams||{},u.getTracks().forEach(m=>{if(this.getSenders().find(b=>b.track===m))throw new DOMException("Track already exists.","InvalidAccessError")});const h=this.getSenders();n.apply(this,arguments);const f=this.getSenders().filter(m=>h.indexOf(m)===-1);this._shimmedLocalStreams[u.id]=[u].concat(f)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[u.id],r.apply(this,arguments)};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},u&&Object.keys(this._shimmedLocalStreams).forEach(h=>{const f=this._shimmedLocalStreams[h].indexOf(u);f!==-1&&this._shimmedLocalStreams[h].splice(f,1),this._shimmedLocalStreams[h].length===1&&delete this._shimmedLocalStreams[h]}),i.apply(this,arguments)}}function BA(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return zA(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const v=n.apply(this);return this._reverseStreams=this._reverseStreams||{},v.map(b=>this._reverseStreams[b.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(v){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},v.getTracks().forEach(b=>{if(this.getSenders().find(C=>C.track===b))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[v.id]){const b=new t.MediaStream(v.getTracks());this._streams[v.id]=b,this._reverseStreams[b.id]=v,v=b}r.apply(this,[v])};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(v){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[v.id]||v]),delete this._reverseStreams[this._streams[v.id]?this._streams[v.id].id:v.id],delete this._streams[v.id]},t.RTCPeerConnection.prototype.addTrack=function(v,b){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const x=[].slice.call(arguments,1);if(x.length!==1||!x[0].getTracks().find(A=>A===v))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(A=>A.track===v))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const R=this._streams[b.id];if(R)R.addTrack(v),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const A=new t.MediaStream([v]);this._streams[b.id]=A,this._reverseStreams[A.id]=b,this.addStream(A)}return this.getSenders().find(A=>A.track===v)};function o(m,v){let b=v.sdp;return Object.keys(m._reverseStreams||[]).forEach(x=>{const C=m._reverseStreams[x],R=m._streams[C.id];b=b.replace(new RegExp(R.id,"g"),C.id)}),new RTCSessionDescription({type:v.type,sdp:b})}function u(m,v){let b=v.sdp;return Object.keys(m._reverseStreams||[]).forEach(x=>{const C=m._reverseStreams[x],R=m._streams[C.id];b=b.replace(new RegExp(C.id,"g"),R.id)}),new RTCSessionDescription({type:v.type,sdp:b})}["createOffer","createAnswer"].forEach(function(m){const v=t.RTCPeerConnection.prototype[m],b={[m](){const x=arguments;return arguments.length&&typeof arguments[0]=="function"?v.apply(this,[R=>{const A=o(this,R);x[0].apply(null,[A])},R=>{x[1]&&x[1].apply(null,R)},arguments[2]]):v.apply(this,arguments).then(R=>o(this,R))}};t.RTCPeerConnection.prototype[m]=b[m]});const h=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?h.apply(this,arguments):(arguments[0]=u(this,arguments[0]),h.apply(this,arguments))};const f=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const m=f.get.apply(this);return m.type===""?m:o(this,m)}}),t.RTCPeerConnection.prototype.removeTrack=function(v){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!v._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(v._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let x;Object.keys(this._streams).forEach(C=>{this._streams[C].getTracks().find(A=>v.track===A)&&(x=this._streams[C])}),x&&(x.getTracks().length===1?this.removeStream(this._reverseStreams[x.id]):x.removeTrack(v.track),this.dispatchEvent(new Event("negotiationneeded")))}}function q0(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=i[n]})}function FA(t,e){vl(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const o4=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:FA,shimAddTrackRemoveTrack:BA,shimAddTrackRemoveTrackWithNative:zA,shimGetSendersWithDtmf:VA,shimGetUserMedia:MA,shimMediaStream:OA,shimOnTrack:LA,shimPeerConnection:q0,shimSenderReceiverGetStats:UA},Symbol.toStringTag,{value:"Module"}));function HA(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(i,o,u){$1("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(o,u)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(u,h,f){h in u&&!(f in u)&&(u[f]=u[h],delete u[h])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(u){return typeof u=="object"&&typeof u.audio=="object"&&(u=JSON.parse(JSON.stringify(u)),i(u.audio,"autoGainControl","mozAutoGainControl"),i(u.audio,"noiseSuppression","mozNoiseSuppression")),o(u)},r&&r.prototype.getSettings){const u=r.prototype.getSettings;r.prototype.getSettings=function(){const h=u.apply(this,arguments);return i(h,"mozAutoGainControl","autoGainControl"),i(h,"mozNoiseSuppression","noiseSuppression"),h}}if(r&&r.prototype.applyConstraints){const u=r.prototype.applyConstraints;r.prototype.applyConstraints=function(h){return this.kind==="audio"&&typeof h=="object"&&(h=JSON.parse(JSON.stringify(h)),i(h,"autoGainControl","mozAutoGainControl"),i(h,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[h])}}}}function Lz(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function $A(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function G0(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const o=t.RTCPeerConnection.prototype[i],u={[i](){return arguments[0]=new(i==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};t.RTCPeerConnection.prototype[i]=u[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[o,u,h]=arguments;return r.apply(this,[o||null]).then(f=>{if(e.version<53&&!u)try{f.forEach(m=>{m.type=n[m.type]||m.type})}catch(m){if(m.name!=="TypeError")throw m;f.forEach((v,b)=>{f.set(b,Object.assign({},v,{type:n[v.type]||v.type}))})}return f}).then(u,h)}}function qA(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(o=>o._pc=this),i});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function GA(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r}),vl(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function YA(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){$1("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function KA(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function WA(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(u=>{if("rid"in u&&!/^[a-z0-9]{0,16}$/i.test(u.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in u&&!(parseFloat(u.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in u&&!(parseFloat(u.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=e.apply(this,arguments);if(i){const{sender:u}=o,h=u.getParameters();(!("encodings"in h)||h.encodings.length===1&&Object.keys(h.encodings[0]).length===0)&&(h.encodings=r,u.sendEncodings=r,this.setParametersPromises.push(u.setParameters(h).then(()=>{delete u.sendEncodings}).catch(()=>{delete u.sendEncodings})))}return o})}function QA(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function XA(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function JA(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const l4=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:WA,shimCreateAnswer:JA,shimCreateOffer:XA,shimGetDisplayMedia:Lz,shimGetParameters:QA,shimGetUserMedia:HA,shimOnTrack:$A,shimPeerConnection:G0,shimRTCDataChannel:KA,shimReceiverGetStats:GA,shimRemoveStream:YA,shimSenderGetStats:qA},Symbol.toStringTag,{value:"Module"}));function ZA(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>e.call(this,i,r)),r.getVideoTracks().forEach(i=>e.call(this,i,r))},t.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(o=>{this._localStreams?this._localStreams.includes(o)||this._localStreams.push(o):this._localStreams=[o]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(o=>{i.includes(o.track)&&this.removeTrack(o)})})}}function eR(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const o=new Event("addstream");o.stream=i,this.dispatchEvent(o)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(o=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(o)>=0)return;r._remoteStreams.push(o);const u=new Event("addstream");u.stream=o,r.dispatchEvent(u)})}),e.apply(r,arguments)}}}function tR(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,o=e.setRemoteDescription,u=e.addIceCandidate;e.createOffer=function(m,v){const b=arguments.length>=2?arguments[2]:arguments[0],x=n.apply(this,[b]);return v?(x.then(m,v),Promise.resolve()):x},e.createAnswer=function(m,v){const b=arguments.length>=2?arguments[2]:arguments[0],x=r.apply(this,[b]);return v?(x.then(m,v),Promise.resolve()):x};let h=function(f,m,v){const b=i.apply(this,[f]);return v?(b.then(m,v),Promise.resolve()):b};e.setLocalDescription=h,h=function(f,m,v){const b=o.apply(this,[f]);return v?(b.then(m,v),Promise.resolve()):b},e.setRemoteDescription=h,h=function(f,m,v){const b=u.apply(this,[f]);return v?(b.then(m,v),Promise.resolve()):b},e.addIceCandidate=h}function nR(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=i=>r(rR(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,i,o){e.mediaDevices.getUserMedia(r).then(i,o)}).bind(e))}function rR(t){return t&&t.video!==void 0?Object.assign({},t,{video:PA(t.video)}):t}function sR(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const o=[];for(let u=0;u<r.iceServers.length;u++){let h=r.iceServers[u];h.urls===void 0&&h.url?($1("RTCIceServer.url","RTCIceServer.urls"),h=JSON.parse(JSON.stringify(h)),h.urls=h.url,delete h.url,o.push(h)):o.push(r.iceServers[u])}r.iceServers=o}return new e(r,i)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function iR(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function aR(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(u=>u.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const o=this.getTransceivers().find(u=>u.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):r.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function oR(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const c4=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:oR,shimCallbacksAPI:tR,shimConstraints:rR,shimCreateOfferLegacy:aR,shimGetUserMedia:nR,shimLocalStreamsAPI:ZA,shimRTCIceServerUrls:sR,shimRemoteStreamsAPI:eR,shimTrackEventTransceiver:iR},Symbol.toStringTag,{value:"Module"}));var qy={exports:{}},u4;function Vz(){return u4||(u4=1,(function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(n){return n.split(`
m=`).map((i,o)=>(o>0?"m="+i:i).trim()+`\r
`)},e.getDescription=function(n){const r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){const r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(i=>i.indexOf(r)===0)},e.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let o=8;o<r.length;o+=2)switch(r[o]){case"raddr":i.relatedAddress=r[o+1];break;case"rport":i.relatedPort=parseInt(r[o+1],10);break;case"tcptype":i.tcpType=r[o+1];break;case"ufrag":i.ufrag=r[o+1],i.usernameFragment=r[o+1];break;default:i[r[o]]===void 0&&(i[r[o]]=r[o+1]);break}return i},e.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const o=n.type;return r.push("typ"),r.push(o),o!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},e.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},e.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const r={};let i;const o=n.substring(n.indexOf(" ")+1).split(";");for(let u=0;u<o.length;u++)i=o[u].trim().split("="),r[i[0].trim()]=i[1];return r},e.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const o=[];Object.keys(n.parameters).forEach(u=>{n.parameters[u]!==void 0?o.push(u+"="+n.parameters[u]):o.push(u)}),r+="a=fmtp:"+i+" "+o.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(o=>{r+="a=rtcp-fb:"+i+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},o=n.indexOf(":",r);return o>-1?(i.attribute=n.substring(r+1,o),i.value=n.substring(o+1)):i.attribute=n.substring(r+1),i},e.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},e.getMid=function(n){const r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:e.matchPrefix(n+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(o=>{i+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),i},e.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){return e.matchPrefix(n+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,r){const i=e.matchPrefix(n+r,"a=ice-ufrag:")[0],o=e.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&o?{usernameFragment:i.substring(12),password:o.substring(10)}:null},e.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},o=e.splitLines(n)[0].split(" ");r.profile=o[2];for(let h=3;h<o.length;h++){const f=o[h],m=e.matchPrefix(n,"a=rtpmap:"+f+" ")[0];if(m){const v=e.parseRtpMap(m),b=e.matchPrefix(n,"a=fmtp:"+f+" ");switch(v.parameters=b.length?e.parseFmtp(b[0]):{},v.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+f+" ").map(e.parseRtcpFb),r.codecs.push(v),v.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(v.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(h=>{r.headerExtensions.push(e.parseExtmap(h))});const u=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(h=>{u.forEach(f=>{h.rtcpFeedback.find(v=>v.type===f.type&&v.parameter===f.parameter)||h.rtcpFeedback.push(f)})}),r},e.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(u=>u.preferredPayloadType!==void 0?u.preferredPayloadType:u.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(u=>{i+=e.writeRtpMap(u),i+=e.writeFmtp(u),i+=e.writeRtcpFb(u)});let o=0;return r.codecs.forEach(u=>{u.maxptime>o&&(o=u.maxptime)}),o>0&&(i+="a=maxptime:"+o+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(u=>{i+=e.writeExtmap(u)}),i},e.parseRtpEncodingParameters=function(n){const r=[],i=e.parseRtpParameters(n),o=i.fecMechanisms.indexOf("RED")!==-1,u=i.fecMechanisms.indexOf("ULPFEC")!==-1,h=e.matchPrefix(n,"a=ssrc:").map(x=>e.parseSsrcMedia(x)).filter(x=>x.attribute==="cname"),f=h.length>0&&h[0].ssrc;let m;const v=e.matchPrefix(n,"a=ssrc-group:FID").map(x=>x.substring(17).split(" ").map(R=>parseInt(R,10)));v.length>0&&v[0].length>1&&v[0][0]===f&&(m=v[0][1]),i.codecs.forEach(x=>{if(x.name.toUpperCase()==="RTX"&&x.parameters.apt){let C={ssrc:f,codecPayloadType:parseInt(x.parameters.apt,10)};f&&m&&(C.rtx={ssrc:m}),r.push(C),o&&(C=JSON.parse(JSON.stringify(C)),C.fec={ssrc:f,mechanism:u?"red+ulpfec":"red"},r.push(C))}}),r.length===0&&f&&r.push({ssrc:f});let b=e.matchPrefix(n,"b=");return b.length&&(b[0].indexOf("b=TIAS:")===0?b=parseInt(b[0].substring(7),10):b[0].indexOf("b=AS:")===0?b=parseInt(b[0].substring(5),10)*1e3*.95-2e3*8:b=void 0,r.forEach(x=>{x.maxBitrate=b})),r},e.parseRtcpParameters=function(n){const r={},i=e.matchPrefix(n,"a=ssrc:").map(h=>e.parseSsrcMedia(h)).filter(h=>h.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const o=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=o.length>0,r.compound=o.length===0;const u=e.matchPrefix(n,"a=rtcp-mux");return r.mux=u.length>0,r},e.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},e.parseMsid=function(n){let r;const i=e.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const o=e.matchPrefix(n,"a=ssrc:").map(u=>e.parseSsrcMedia(u)).filter(u=>u.attribute==="msid");if(o.length>0)return r=o[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){const r=e.parseMLine(n),i=e.matchPrefix(n,"a=max-message-size:");let o;i.length>0&&(o=parseInt(i[0].substring(19),10)),isNaN(o)&&(o=65536);const u=e.matchPrefix(n,"a=sctp-port:");if(u.length>0)return{port:parseInt(u[0].substring(12),10),protocol:r.fmt,maxMessageSize:o};const h=e.matchPrefix(n,"a=sctpmap:");if(h.length>0){const f=h[0].substring(10).split(" ");return{port:parseInt(f[0],10),protocol:f[1],maxMessageSize:o}}},e.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,r,i){let o;const u=r!==void 0?r:2;return n?o=n:o=e.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+o+" "+u+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,r){const i=e.splitLines(n);for(let o=0;o<i.length;o++)switch(i[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[o].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const i=e.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},e.parseOLine=function(n){const i=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=e.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},t.exports=e})(qy)),qy.exports}var lR=Vz();const wc=rh(lR),Uz=H5({__proto__:null,default:wc},[lR]);function Sm(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new e(r),o=wc.parseCandidate(r.candidate);for(const u in o)u in i||Object.defineProperty(i,u,{value:o[u]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,vl(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Y0(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||vl(t,"icecandidate",e=>{if(e.candidate){const n=wc.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function Tm(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(h){if(!h||!h.sdp)return!1;const f=wc.splitSections(h.sdp);return f.shift(),f.some(m=>{const v=wc.parseMLine(m);return v&&v.kind==="application"&&v.protocol.indexOf("SCTP")!==-1})},r=function(h){const f=h.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(f===null||f.length<2)return-1;const m=parseInt(f[1],10);return m!==m?-1:m},i=function(h){let f=65536;return e.browser==="firefox"&&(e.version<57?h===-1?f=16384:f=2147483637:e.version<60?f=e.version===57?65535:65536:f=2147483637),f},o=function(h,f){let m=65536;e.browser==="firefox"&&e.version===57&&(m=65535);const v=wc.matchPrefix(h.sdp,"a=max-message-size:");return v.length>0?m=parseInt(v[0].substring(19),10):e.browser==="firefox"&&f!==-1&&(m=2147483637),m},u=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:f}=this.getConfiguration();f==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const f=r(arguments[0]),m=i(f),v=o(arguments[0],f);let b;m===0&&v===0?b=Number.POSITIVE_INFINITY:m===0||v===0?b=Math.max(m,v):b=Math.min(m,v);const x={};Object.defineProperty(x,"maxMessageSize",{get(){return b}}),this._sctp=x}return u.apply(this,arguments)}}function Cm(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,i){const o=r.send;r.send=function(){const h=arguments[0],f=h.length||h.size||h.byteLength;if(r.readyState==="open"&&i.sctp&&f>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return o.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return e(i,this),i},vl(t,"datachannel",r=>(e(r.channel,r.target),r))}function K0(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const o=i.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const u=new Event("connectionstatechange",i);o.dispatchEvent(u)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function W0(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=i.sdp.split(`
`).filter(u=>u.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&i instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:i.type,sdp:o}):i.sdp=o}return n.apply(this,arguments)}}function km(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Nm(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(u=>n.apply(this,[u]))})}const zz=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:W0,shimAddIceCandidateNullOrEmpty:km,shimConnectionState:K0,shimMaxMessageSize:Tm,shimParameterlessSetLocalDescription:Nm,shimRTCIceCandidate:Sm,shimRTCIceCandidateRelayProtocol:Y0,shimSendThrowTypeError:Cm},Symbol.toStringTag,{value:"Module"}));function Bz({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=DA,r=Oz(t),i={browserDetails:r,commonShim:zz,extractVersion:wd,disableLog:Pz,disableWarnings:Mz,sdp:Uz};switch(r.browser){case"chrome":if(!o4||!q0||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=o4,km(t,r),Nm(t),MA(t,r),OA(t),q0(t,r),LA(t),BA(t,r),VA(t),UA(t),FA(t,r),Sm(t),Y0(t),K0(t),Tm(t,r),Cm(t),W0(t,r);break;case"firefox":if(!l4||!G0||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=l4,km(t,r),Nm(t),HA(t,r),G0(t,r),$A(t),YA(t),qA(t),GA(t),KA(t),WA(t),QA(t),XA(t),JA(t),Sm(t),K0(t),Tm(t,r),Cm(t);break;case"safari":if(!c4||!e.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=c4,km(t,r),Nm(t),sR(t),aR(t),tR(t),ZA(t),eR(t),iR(t),nR(t),oR(t),Sm(t),Y0(t),Tm(t,r),Cm(t),W0(t,r);break;default:n("Unsupported browser!");break}return i}const d4=Bz({window:typeof window>"u"?void 0:window});function yl(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}class cR{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const n=[],r=e.byteLength,i=Math.ceil(r/this.chunkedMTU);let o=0,u=0;for(;u<r;){const h=Math.min(r,u+this.chunkedMTU),f=e.slice(u,h),m={__peerData:this._dataCount,n:o,data:f,total:i};n.push(m),u=h,o++}return this._dataCount++,n}}}function Fz(t){let e=0;for(const i of t)e+=i.byteLength;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.byteLength;return n}const Gy=d4.default||d4,ud=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const t=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(t)?t==="chrome"?e>=this.minChromeVersion:t==="firefox"?e>=this.minFirefoxVersion:t==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return Gy.browserDetails.browser}getVersion(){return Gy.browserDetails.version||0}isUnifiedPlanSupported(){const t=this.getBrowser(),e=Gy.browserDetails.version||0;if(t==="chrome"&&e<this.minChromeVersion)return!1;if(t==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch{}finally{n&&n.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},Hz=t=>!t||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(t),uR=()=>Math.random().toString(36).slice(2),h4={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class $z extends cR{noop(){}blobToArrayBuffer(e,n){const r=new FileReader;return r.onload=function(i){i.target&&n(i.target.result)},r.readAsArrayBuffer(e),r}binaryStringToArrayBuffer(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=h4,this.browser=ud.getBrowser(),this.browserVersion=ud.getVersion(),this.pack=RA,this.unpack=AA,this.supports=(function(){const n={browser:ud.isBrowserSupported(),webRTC:ud.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let r;try{r=new RTCPeerConnection(h4),n.audioVideo=!0;let i;try{i=r.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!i.ordered;try{i.binaryType="blob",n.binaryBlob=!ud.isIOS}catch{}}catch{}finally{i&&i.close()}}catch{}finally{r&&r.close()}return n})(),this.validateId=Hz,this.randomToken=uR}}const Vr=new $z,qz="PeerJS: ";class Gz{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...n){const r=[qz,...n];for(const i in r)r[i]instanceof Error&&(r[i]="("+r[i].name+") "+r[i].message);e>=3?console.log(...r):e>=2?console.warn("WARNING",...r):e>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var Qe=new Gz,q1={},Yz=Object.prototype.hasOwnProperty,Ar="~";function Wd(){}Object.create&&(Wd.prototype=Object.create(null),new Wd().__proto__||(Ar=!1));function Kz(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function dR(t,e,n,r,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var o=new Kz(n,r||t,i),u=Ar?Ar+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],o]:t._events[u].push(o):(t._events[u]=o,t._eventsCount++),t}function Am(t,e){--t._eventsCount===0?t._events=new Wd:delete t._events[e]}function wr(){this._events=new Wd,this._eventsCount=0}wr.prototype.eventNames=function(){var e=[],n,r;if(this._eventsCount===0)return e;for(r in n=this._events)Yz.call(n,r)&&e.push(Ar?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(n)):e};wr.prototype.listeners=function(e){var n=Ar?Ar+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,u=new Array(o);i<o;i++)u[i]=r[i].fn;return u};wr.prototype.listenerCount=function(e){var n=Ar?Ar+e:e,r=this._events[n];return r?r.fn?1:r.length:0};wr.prototype.emit=function(e,n,r,i,o,u){var h=Ar?Ar+e:e;if(!this._events[h])return!1;var f=this._events[h],m=arguments.length,v,b;if(f.fn){switch(f.once&&this.removeListener(e,f.fn,void 0,!0),m){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,n),!0;case 3:return f.fn.call(f.context,n,r),!0;case 4:return f.fn.call(f.context,n,r,i),!0;case 5:return f.fn.call(f.context,n,r,i,o),!0;case 6:return f.fn.call(f.context,n,r,i,o,u),!0}for(b=1,v=new Array(m-1);b<m;b++)v[b-1]=arguments[b];f.fn.apply(f.context,v)}else{var x=f.length,C;for(b=0;b<x;b++)switch(f[b].once&&this.removeListener(e,f[b].fn,void 0,!0),m){case 1:f[b].fn.call(f[b].context);break;case 2:f[b].fn.call(f[b].context,n);break;case 3:f[b].fn.call(f[b].context,n,r);break;case 4:f[b].fn.call(f[b].context,n,r,i);break;default:if(!v)for(C=1,v=new Array(m-1);C<m;C++)v[C-1]=arguments[C];f[b].fn.apply(f[b].context,v)}}return!0};wr.prototype.on=function(e,n,r){return dR(this,e,n,r,!1)};wr.prototype.once=function(e,n,r){return dR(this,e,n,r,!0)};wr.prototype.removeListener=function(e,n,r,i){var o=Ar?Ar+e:e;if(!this._events[o])return this;if(!n)return Am(this,o),this;var u=this._events[o];if(u.fn)u.fn===n&&(!i||u.once)&&(!r||u.context===r)&&Am(this,o);else{for(var h=0,f=[],m=u.length;h<m;h++)(u[h].fn!==n||i&&!u[h].once||r&&u[h].context!==r)&&f.push(u[h]);f.length?this._events[o]=f.length===1?f[0]:f:Am(this,o)}return this};wr.prototype.removeAllListeners=function(e){var n;return e?(n=Ar?Ar+e:e,this._events[n]&&Am(this,n)):(this._events=new Wd,this._eventsCount=0),this};wr.prototype.off=wr.prototype.removeListener;wr.prototype.addListener=wr.prototype.on;wr.prefixed=Ar;wr.EventEmitter=wr;q1=wr;var bl={};yl(bl,"ConnectionType",()=>io);yl(bl,"PeerErrorType",()=>Vn);yl(bl,"BaseConnectionErrorType",()=>Q0);yl(bl,"DataConnectionErrorType",()=>G1);yl(bl,"SerializationType",()=>ig);yl(bl,"SocketEventType",()=>Qa);yl(bl,"ServerMessageType",()=>yr);var io=(function(t){return t.Data="data",t.Media="media",t})({}),Vn=(function(t){return t.BrowserIncompatible="browser-incompatible",t.Disconnected="disconnected",t.InvalidID="invalid-id",t.InvalidKey="invalid-key",t.Network="network",t.PeerUnavailable="peer-unavailable",t.SslUnavailable="ssl-unavailable",t.ServerError="server-error",t.SocketError="socket-error",t.SocketClosed="socket-closed",t.UnavailableID="unavailable-id",t.WebRTC="webrtc",t})({}),Q0=(function(t){return t.NegotiationFailed="negotiation-failed",t.ConnectionClosed="connection-closed",t})({}),G1=(function(t){return t.NotOpenYet="not-open-yet",t.MessageToBig="message-too-big",t})({}),ig=(function(t){return t.Binary="binary",t.BinaryUTF8="binary-utf8",t.JSON="json",t.None="raw",t})({}),Qa=(function(t){return t.Message="message",t.Disconnected="disconnected",t.Error="error",t.Close="close",t})({}),yr=(function(t){return t.Heartbeat="HEARTBEAT",t.Candidate="CANDIDATE",t.Offer="OFFER",t.Answer="ANSWER",t.Open="OPEN",t.Error="ERROR",t.IdTaken="ID-TAKEN",t.InvalidKey="INVALID-KEY",t.Leave="LEAVE",t.Expire="EXPIRE",t})({});const hR="1.5.5";class Wz extends q1.EventEmitter{constructor(e,n,r,i,o,u=5e3){super(),this.pingInterval=u,this._disconnected=!0,this._messagesQueue=[];const h=e?"wss://":"ws://";this._baseUrl=h+n+":"+r+i+"peerjs?key="+o}start(e,n){this._id=e;const r=`${this._baseUrl}&id=${e}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+hR),this._disconnected=!1,this._socket.onmessage=i=>{let o;try{o=JSON.parse(i.data),Qe.log("Server message received:",o)}catch{Qe.log("Invalid server message",i.data);return}this.emit(Qa.Message,o)},this._socket.onclose=i=>{this._disconnected||(Qe.log("Socket closed.",i),this._cleanup(),this._disconnected=!0,this.emit(Qa.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),Qe.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){Qe.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:yr.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const n of e)this.send(n)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(Qa.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(e);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class fR{constructor(e){this.connection=e}startConnection(e){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===io.Media&&e._stream&&this._addTracksToConnection(e._stream,n),e.originator){const r=this.connection,i={ordered:!!e.reliable},o=n.createDataChannel(r.label,i);r._initializeDataChannel(o),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){Qe.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const n=this.connection.peer,r=this.connection.connectionId,i=this.connection.type,o=this.connection.provider;Qe.log("Listening for ICE candidates."),e.onicecandidate=u=>{!u.candidate||!u.candidate.candidate||(Qe.log(`Received ICE candidates for ${n}:`,u.candidate),o.socket.send({type:yr.Candidate,payload:{candidate:u.candidate,type:i,connectionId:r},dst:n}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":Qe.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(Q0.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":Qe.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(Q0.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":Qe.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},Qe.log("Listening for data channel"),e.ondatachannel=u=>{Qe.log("Received data channel");const h=u.channel;o.getConnection(n,r)._initializeDataChannel(h)},Qe.log("Listening for remote stream"),e.ontrack=u=>{Qe.log("Received remote stream");const h=u.streams[0],f=o.getConnection(n,r);if(f.type===io.Media){const m=f;this._addStreamToMediaConnection(h,m)}}}cleanup(){Qe.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const n=e.signalingState!=="closed";let r=!1;const i=this.connection.dataChannel;i&&(r=!!i.readyState&&i.readyState!=="closed"),(n||r)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,n=this.connection.provider;try{const r=await e.createOffer(this.connection.options.constraints);Qe.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),Qe.log("Set localDescription:",r,`for:${this.connection.peer}`);let i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===io.Data){const o=this.connection;i={...i,label:o.label,reliable:o.reliable,serialization:o.serialization}}n.socket.send({type:yr.Offer,payload:i,dst:this.connection.peer})}catch(i){i!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(Vn.WebRTC,i),Qe.log("Failed to setLocalDescription, ",i))}}catch(r){n.emitError(Vn.WebRTC,r),Qe.log("Failed to createOffer, ",r)}}async _makeAnswer(){const e=this.connection.peerConnection,n=this.connection.provider;try{const r=await e.createAnswer();Qe.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),Qe.log("Set localDescription:",r,`for:${this.connection.peer}`),n.socket.send({type:yr.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(i){n.emitError(Vn.WebRTC,i),Qe.log("Failed to setLocalDescription, ",i)}}catch(r){n.emitError(Vn.WebRTC,r),Qe.log("Failed to create answer, ",r)}}async handleSDP(e,n){n=new RTCSessionDescription(n);const r=this.connection.peerConnection,i=this.connection.provider;Qe.log("Setting remote description",n);const o=this;try{await r.setRemoteDescription(n),Qe.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await o._makeAnswer()}catch(u){i.emitError(Vn.WebRTC,u),Qe.log("Failed to setRemoteDescription, ",u)}}async handleCandidate(e){Qe.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),Qe.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(Vn.WebRTC,n),Qe.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(e,n){if(Qe.log(`add tracks from stream ${e.id} to peer connection`),!n.addTrack)return Qe.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(r=>{n.addTrack(r,e)})}_addStreamToMediaConnection(e,n){Qe.log(`add stream ${e.id} to media connection ${n.connectionId}`),n.addStream(e)}}class mR extends q1.EventEmitter{emitError(e,n){Qe.error("Error:",n),this.emit("error",new Qz(`${e}`,n))}}class Qz extends Error{constructor(e,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=e}}class pR extends mR{get open(){return this._open}constructor(e,n,r){super(),this.peer=e,this.provider=n,this.options=r,this._open=!1,this.metadata=r.metadata}}class fp extends pR{static#e=this.ID_PREFIX="mc_";get type(){return io.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,n,r){super(e,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||fp.ID_PREFIX+Vr.randomToken(),this._negotiator=new fR(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{Qe.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{Qe.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){Qe.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const n=e.type,r=e.payload;switch(e.type){case yr.Answer:this._negotiator.handleSDP(n,r.sdp),this._open=!0;break;case yr.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:Qe.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(e,n={}){if(this._localStream){Qe.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const r=this.provider._getMessages(this.connectionId);for(const i of r)this.handleMessage(i);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class Xz{constructor(e){this._options=e}_buildRequest(e){const n=this._options.secure?"https":"http",{host:r,port:i,path:o,key:u}=this._options,h=new URL(`${n}://${r}:${i}${o}${u}/${e}`);return h.searchParams.set("ts",`${Date.now()}${Math.random()}`),h.searchParams.set("version",hR),fetch(h.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){Qe.error("Error retrieving ID",e);let n="";throw this._options.path==="/"&&this._options.host!==Vr.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let n="";throw this._options.host===Vr.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw Qe.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}class mp extends pR{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return io.Data}constructor(e,n,r){super(e,n,r),this.connectionId=this.options.connectionId||mp.ID_PREFIX+uR(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new fR(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{Qe.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{Qe.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{Qe.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,n=!1){if(!this.open){this.emitError(G1.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,n)}async handleMessage(e){const n=e.payload;switch(e.type){case yr.Answer:await this._negotiator.handleSDP(e.type,n.sdp);break;case yr.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:Qe.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}}class Y1 extends mp{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>mp.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(n){return Qe.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Yy extends Y1{close(e){super.close(e),this._chunkedData={}}constructor(e,n,r){super(e,n,r),this.chunker=new cR,this.serialization=ig.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const n=AA(e),r=n.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(e){const n=e.__peerData,r=this._chunkedData[n]||{data:[],count:0,total:e.total};if(r.data[e.n]=new Uint8Array(e.data),r.count++,this._chunkedData[n]=r,r.total===r.count){delete this._chunkedData[n];const i=Fz(r.data);this._handleDataMessage({data:i})}}_send(e,n){const r=RA(e);if(r instanceof Promise)return this._send_blob(r);if(!n&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(e){const n=await e;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(e){const n=this.chunker.chunk(e);Qe.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const r of n)this.send(r,!0)}}class Jz extends Y1{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,n){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=ig.None}}class Zz extends Y1{_handleDataMessage({data:e}){const n=this.parse(this.decoder.decode(e)),r=n.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",n)}_send(e,n){const r=this.encoder.encode(this.stringify(e));if(r.byteLength>=Vr.chunkedMTU){this.emitError(G1.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...e){super(...e),this.serialization=ig.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class K1 extends mR{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[n,r]of this._connections)e[n]=r;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,n){super(),this._serializers={raw:Jz,json:Zz,binary:Yy,"binary-utf8":Yy,default:Yy},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(e&&e.constructor==Object?n=e:e&&(r=e.toString()),n={debug:0,host:Vr.CLOUD_HOST,port:Vr.CLOUD_PORT,path:"/",key:K1.DEFAULT_KEY,token:Vr.randomToken(),config:Vr.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Vr.CLOUD_HOST?this._options.secure=Vr.isSecure():this._options.host==Vr.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&Qe.setLogFunction(this._options.logFunction),Qe.logLevel=this._options.debug||0,this._api=new Xz(n),this._socket=this._createServerConnection(),!Vr.supports.audioVideo&&!Vr.supports.data){this._delayedAbort(Vn.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!Vr.validateId(r)){this._delayedAbort(Vn.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(i=>this._initialize(i)).catch(i=>this._abort(Vn.ServerError,i))}_createServerConnection(){const e=new Wz(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(Qa.Message,n=>{this._handleMessage(n)}),e.on(Qa.Error,n=>{this._abort(Vn.SocketError,n)}),e.on(Qa.Disconnected,()=>{this.disconnected||(this.emitError(Vn.Network,"Lost connection to server."),this.disconnect())}),e.on(Qa.Close,()=>{this.disconnected||this._abort(Vn.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const n=e.type,r=e.payload,i=e.src;switch(n){case yr.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case yr.Error:this._abort(Vn.ServerError,r.msg);break;case yr.IdTaken:this._abort(Vn.UnavailableID,`ID "${this.id}" is taken`);break;case yr.InvalidKey:this._abort(Vn.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case yr.Leave:Qe.log(`Received leave message from ${i}`),this._cleanupPeer(i),this._connections.delete(i);break;case yr.Expire:this.emitError(Vn.PeerUnavailable,`Could not connect to peer ${i}`);break;case yr.Offer:{const o=r.connectionId;let u=this.getConnection(i,o);if(u&&(u.close(),Qe.warn(`Offer received for existing Connection ID:${o}`)),r.type===io.Media){const f=new fp(i,this,{connectionId:o,_payload:r,metadata:r.metadata});u=f,this._addConnection(i,u),this.emit("call",f)}else if(r.type===io.Data){const f=new this._serializers[r.serialization](i,this,{connectionId:o,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});u=f,this._addConnection(i,u),this.emit("connection",f)}else{Qe.warn(`Received malformed connection type:${r.type}`);return}const h=this._getMessages(o);for(const f of h)u.handleMessage(f);break}default:{if(!r){Qe.warn(`You received a malformed message from ${i} of type ${n}`);return}const o=r.connectionId,u=this.getConnection(i,o);u&&u.peerConnection?u.handleMessage(e):o?this._storeMessage(o,e):Qe.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,n){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(n)}_getMessages(e){const n=this._lostMessages.get(e);return n?(this._lostMessages.delete(e),n):[]}connect(e,n={}){if(n={serialization:"default",...n},this.disconnected){Qe.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(Vn.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[n.serialization](e,this,n);return this._addConnection(e,r),r}call(e,n,r={}){if(this.disconnected){Qe.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(Vn.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){Qe.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const i=new fp(e,this,{...r,_stream:n});return this._addConnection(e,i),i}_addConnection(e,n){Qe.log(`add connection ${n.type}:${n.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(n)}_removeConnection(e){const n=this._connections.get(e.peer);if(n){const r=n.indexOf(e);r!==-1&&n.splice(r,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,n){const r=this._connections.get(e);if(!r)return null;for(const i of r)if(i.connectionId===n)return i;return null}_delayedAbort(e,n){setTimeout(()=>{this._abort(e,n)},0)}_abort(e,n){Qe.error("Aborting!"),this.emitError(e,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(Qe.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const n=this._connections.get(e);if(n)for(const r of n)r.close()}disconnect(){if(this.disconnected)return;const e=this.id;Qe.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)Qe.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)Qe.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=n=>{}){this._api.listAllPeers().then(n=>e(n)).catch(n=>this._abort(Vn.ServerError,n))}}var gR=K1;let Ky=null,Qd=[],pp=[];const vR=()=>(Ky||(Ky=new(window.AudioContext||window.webkitAudioContext)),Ky),Xd=()=>{Qd.forEach(t=>{try{t.stop(),t.disconnect()}catch{}}),Qd=[],pp.forEach(t=>{try{t.disconnect()}catch{}}),pp=[]},eB=()=>{try{const t=vR();t.state==="suspended"&&t.resume(),Xd();const e=t.createOscillator(),n=t.createGain();e.type="sine",e.frequency.value=440,e.connect(n),n.connect(t.destination);const r=t.currentTime;let i=!0;const o=()=>{if(!i)return;const h=t.createOscillator(),f=t.createGain();h.connect(f),f.connect(t.destination),h.frequency.value=425,h.type="sine";const m=t.currentTime,v=t.createOscillator();v.type="sine",v.frequency.value=20;const b=t.createGain();b.gain.value=500,v.connect(b),b.connect(h.frequency),v.start(m),v.stop(m+2),f.gain.setValueAtTime(0,m),f.gain.linearRampToValueAtTime(.1,m+.1),f.gain.setValueAtTime(.1,m+1.8),f.gain.linearRampToValueAtTime(0,m+2),h.start(m),h.stop(m+2),Qd.push(h),Qd.push(v),pp.push(f)};o();const u=setInterval(o,4e3);return()=>{i=!1,clearInterval(u),Xd()}}catch(t){return console.error("Error playing outgoing ring:",t),()=>{}}},tB=()=>{try{const t=vR();t.state==="suspended"&&t.resume(),Xd();let e=!0;const n=()=>{if(!e)return;const i=t.currentTime,o=(u,h)=>{const f=t.createOscillator(),m=t.createGain();f.connect(m),m.connect(t.destination),f.frequency.value=h,f.type="square",m.gain.setValueAtTime(0,u),m.gain.linearRampToValueAtTime(.1,u+.05),m.gain.setValueAtTime(.1,u+.2),m.gain.linearRampToValueAtTime(0,u+.25),f.start(u),f.stop(u+.3),Qd.push(f),pp.push(m)};o(i,880),o(i+.4,880),o(i+.8,880)};n();const r=setInterval(n,3e3);return()=>{e=!1,clearInterval(r),Xd()}}catch(t){return console.error("Error playing incoming ring:",t),()=>{}}},f4=()=>{Xd()},Yi={SCREEN_SHARE:"screen_share",HIGH_QUALITY:"high_quality"},nB={admin:[Yi.SCREEN_SHARE,Yi.HIGH_QUALITY],moderator:[Yi.SCREEN_SHARE],member:[]},rB={premium:[Yi.SCREEN_SHARE,Yi.HIGH_QUALITY],developer:[Yi.SCREEN_SHARE,Yi.HIGH_QUALITY],verified:[]},yR=(t,e)=>{if(!t)return!1;const n=t.role||"member";if((nB[n]||[]).includes(e))return!0;const i=t.badges||[];for(const o of i)if((rB[o]||[]).includes(e))return!0;return!1},Ec=t=>t?!!(t.role==="admin"||t.role==="premium"||t.badges?.includes("premium")||t.badges?.includes("developer")||t.plan==="premium"||t.roles?.includes("premium")||t.roles?.includes("admin")):!1,bR=w.createContext(),Wy=10,m4=300,W1=()=>{const t=w.useContext(bR);if(!t)throw new Error("useSoundboard must be used within SoundboardProvider");return t},sB=({children:t})=>{const{error:e}=Hr(),[n,r]=w.useState(()=>{try{const h=localStorage.getItem("dss_custom_sounds");return h?JSON.parse(h):[]}catch{return[]}});w.useEffect(()=>{localStorage.setItem("dss_custom_sounds",JSON.stringify(n))},[n]);const u={customSounds:n,addSound:async(h,f)=>n.length>=Wy?(e(`Maximum ${Wy} sounds allowed.`),!1):f.size>m4*1024?(e(`File too large. Max ${m4}KB.`),!1):new Promise(m=>{const v=new FileReader;v.onload=b=>{const x={id:Date.now().toString(),name:h.trim()||"Sound",src:b.target.result};r(C=>[...C,x]),m(!0)},v.readAsDataURL(f)}),removeSound:h=>{r(f=>f.filter(m=>m.id!==h))},MAX_SOUNDS:Wy};return c.jsx(bR.Provider,{value:u,children:t})},xR=w.createContext(),ru=()=>{const t=w.useContext(xR);if(!t)throw new Error("useCall must be used within CallProvider");return t},iB=({children:t})=>{const{currentUser:e,userProfile:n}=yn(),{error:r}=Hr(),[i,o]=w.useState(null),[u,h]=w.useState(null),[f,m]=w.useState("idle"),[v,b]=w.useState(null),[x,C]=w.useState(null),[R,A]=w.useState(null),[k,L]=w.useState(null),[U,I]=w.useState(null),[M,z]=w.useState(null),{customSounds:H,addSound:E,removeSound:S}=W1(),[j,D]=w.useState(!1),[V,B]=w.useState(!1),[P,ne]=w.useState(!1),[oe,G]=w.useState({audioInputs:[],videoInputs:[],audioOutputs:[]}),[Z,J]=w.useState(""),[Se,Le]=w.useState(""),$=me=>{if(P)return;const Ne=H.find(X=>X.id===me);if(!Ne)return;const xe=new Audio(Ne.src);xe.volume=.5,Te.current.push(xe),xe.onended=()=>{Te.current=Te.current.filter(X=>X!==xe)},xe.play().catch(X=>console.error("Error playing sound:",X)),M&&M.open?(console.log("Sending sound effect:",Ne.name),M.send({type:"SOUND_EFFECT",payload:{src:Ne.src,name:Ne.name}})):console.warn("Cannot send sound effect. Data connection missing or closed.")};w.useRef(null),w.useRef(null);const Q=w.useRef(null),re=w.useRef(null),he=w.useRef(null),Te=w.useRef([]),Ue=()=>{Te.current.forEach(me=>{me.pause(),me.currentTime=0}),Te.current=[]},te=w.useRef(null);w.useEffect(()=>{re.current=k},[k]),w.useEffect(()=>{he.current=R},[R]),w.useEffect(()=>(te.current&&(te.current(),te.current=null),f4(),f==="incoming"?P||(te.current=tB()):f==="outgoing"&&(P||(te.current=eB())),()=>{te.current&&te.current(),f4()}),[f]),w.useEffect(()=>{if(!e)return;const me=new gR;return me.on("open",Ne=>{console.log("My Peer ID is:",Ne),h(Ne),o(me)}),me.on("call",Ne=>{console.log("Receiving PeerJS call connection..."),he.current&&he.current.peer===Ne.peer&&(console.log("Replacing existing call (upgrade/renegotiation detected)"),he.current.removeAllListeners&&he.current.removeAllListeners("close"),he.current.close());const xe=re.current||De.current;xe?(console.log("Answering call with local stream"),Ne.answer(xe)):(console.warn("No local stream found when answering! Answering audio-only or empty."),Ne.answer()),Ne.on("stream",X=>{console.log("Received remote stream"),I(X)}),Ne.on("close",()=>{fe()}),A(Ne),m("connected")}),me.on("error",Ne=>{console.error("PeerJS Error:",Ne),Ne.type}),me.on("connection",Ne=>{console.log("Data connection received from peer:",Ne.peer),Ne.on("open",()=>{console.log("Data connection open event fired."),z(Ne)}),Ne.on("data",xe=>{if(xe&&xe.type==="SOUND_EFFECT"&&xe.payload?.src){if(P)return;console.log("Received sound effect:",xe.payload.name);const X=new Audio(xe.payload.src);X.volume=.5,Te.current.push(X),X.onended=()=>{Te.current=Te.current.filter(He=>He!==X)},X.play().catch(He=>console.error("Error playing remote sound:",He))}}),Ne.on("close",()=>{console.log("Data connection closed."),z(null)}),Ne.on("error",xe=>console.error("Data connection error:",xe)),Ne.open&&(console.log("Data connection already open."),z(Ne))}),()=>{me.destroy()}},[e]),w.useEffect(()=>{if(!e)return;const me=Br(_t(ce,"users",e.uid,"incomingCalls"),zi("status","==","pending")),Ne=Tr(me,xe=>{xe.docChanges().forEach(X=>{if(X.type==="added"){const He=X.doc.data();b({id:X.doc.id,...He}),m("incoming")}X.type==="removed"&&b(He=>He&&He.id===X.doc.id?(m(ct=>(ct!=="connected"&&fe(!1),ct)),null):He)})});return()=>Ne()},[e]);const Oe=async()=>{if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return console.warn("mediaDevices API not available"),{audioInputs:[],videoInputs:[],audioOutputs:[]};try{const me=await navigator.mediaDevices.enumerateDevices(),Ne=me.filter(He=>He.kind==="audioinput"),xe=me.filter(He=>He.kind==="videoinput"),X=me.filter(He=>He.kind==="audiooutput");return G({audioInputs:Ne,videoInputs:xe,audioOutputs:X}),!Z&&Ne.length>0&&J(Ne[0].deviceId),!Se&&xe.length>0&&Le(xe[0].deviceId),console.log("Devices enumerated:",{audioInputs:Ne.length,videoInputs:xe.length}),{audioInputs:Ne,videoInputs:xe,audioOutputs:X}}catch(me){return console.error("Failed to enumerate devices:",me),{audioInputs:[],videoInputs:[],audioOutputs:[]}}};w.useEffect(()=>{if(!navigator.mediaDevices){console.warn("mediaDevices API not available - skipping device enumeration");return}return Oe(),navigator.mediaDevices.addEventListener("devicechange",Oe),()=>navigator.mediaDevices.removeEventListener("devicechange",Oe)},[]);const Ie=async(me=!0)=>{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return console.error("mediaDevices API not available - requires HTTPS or localhost"),r("Kamera/mikrofon iin HTTPS veya localhost gerekli"),null;try{oe.audioInputs.length===0&&await Oe();const Ne={echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,channelCount:1,sampleRate:48e3,sampleSize:16,...Z&&{deviceId:{exact:Z}}},xe=me?{width:1280,height:720,...Se&&{deviceId:{exact:Se}}}:!1,X=await navigator.mediaDevices.getUserMedia({video:xe,audio:Ne});return console.log("Media stream acquired with selected devices"),L(X),X}catch(Ne){return console.error("Failed to get local stream",Ne),r("Could not access camera/microphone"),null}},Xe=async(me,Ne="video")=>{if(!i||!u){r("Connection not ready. Please wait a moment.");return}if(C(me),m("outgoing"),!await Ie(Ne==="video")){m("idle");return}B(Ne==="voice");try{const X=e.displayName||n?.displayName||"Unknown",He=e.photoURL||n?.photoURL||n?.photoUrl||null,ct=await Kn(_t(ce,"users",me.id,"incomingCalls"),{callerId:e.uid,callerName:X,callerPhotoUrl:He,peerId:u,type:Ne,status:"pending",timestamp:ft()});Q.current=ct.id;const on=Tr(Re(ce,"users",me.id,"incomingCalls",ct.id),Ee=>{const $e=Q.current===ct.id;if(!Ee.exists())$e&&f==="outgoing"&&(r("Call ended or declined"),fe(!1)),on();else{const lt=Ee.data();lt.status==="accepted"?$e&&m("connected"):lt.status==="rejected"&&$e&&(r("Call declined"),fe(!0))}},Ee=>{console.warn("Call snapshot error:",Ee),Q.current===ct.id&&(r("Call declined"),fe(!1))})}catch(X){console.error("Signaling failed:",X),r("Failed to direct call"),fe()}};w.useEffect(()=>{if(!R||!R.peerConnection)return;const me=()=>{const Ne=R.peerConnection.connectionState,xe=R.peerConnection.iceConnectionState;console.log(`Connection State: ${Ne}, ICE State: ${xe}`),(xe==="disconnected"||xe==="failed"||xe==="closed")&&(console.warn("Peer connection lost/failed. Ending call..."),xe==="failed"||xe==="closed"?fe():xe==="disconnected"&&he.current===R&&setTimeout(()=>{he.current&&he.current.peerConnection.iceConnectionState==="disconnected"&&(console.log("Connection still disconnected after timeout. Ending."),fe())},3e3))};return R.peerConnection.addEventListener("iceconnectionstatechange",me),R.peerConnection.addEventListener("connectionstatechange",me),()=>{R&&R.peerConnection&&(R.peerConnection.removeEventListener("iceconnectionstatechange",me),R.peerConnection.removeEventListener("connectionstatechange",me))}},[R]);const ke=async()=>{if(!v||!i)return;m("connected");const me=v.type==="video",Ne=await Ie(me);if(!Ne){console.error("Stream failed, rejecting call signal.");try{await it(Re(ce,"users",e.uid,"incomingCalls",v.id),{status:"rejected"})}catch{}fe(!1);return}if(me||B(!0),console.log("Connecting to peer:",v.peerId),(!i||i.disconnected)&&(r("Peer connection lost. Reconnecting..."),i?.reconnect(),await new Promise(xe=>setTimeout(xe,1e3)),!i||i.disconnected)){r("Could not establish P2P connection."),fe();return}try{const xe=i.call(v.peerId,Ne);if(!xe){r("Call failed to initialize."),fe();return}xe.on("stream",X=>{I(X)}),xe.on("close",()=>{fe()}),xe.on("error",X=>{console.error("Call error:",X),fe()}),A(xe);try{await it(Re(ce,"users",e.uid,"incomingCalls",v.id),{status:"accepted"})}catch(X){console.error("Error updating signal doc",X)}}catch(xe){console.error("Error calling peer:",xe),r("Failed to connect to peer."),fe()}try{console.log("Establishing data connection to caller:",v.peerId);const xe=i.connect(v.peerId);xe.on("open",()=>{console.log("Data connection opened (Callee side)!"),z(xe)}),xe.on("data",X=>{if(X&&X.type==="SOUND_EFFECT"&&X.payload?.src){if(P)return;const He=new Audio(X.payload.src);He.volume=.5,Te.current.push(He),He.onended=()=>{Te.current=Te.current.filter(ct=>ct!==He)},He.play().catch(ct=>console.error(ct))}}),xe.on("close",()=>z(null)),xe.on("error",X=>console.error("Data connection error (Callee):",X))}catch(xe){console.error("Failed to establish data connection",xe)}},fe=async(me=!0)=>{console.log("[CallContext] Ending call - starting cleanup..."),Ve.current&&(Ve.current.getTracks().forEach(xe=>{xe.stop(),console.log("[CallContext] Stopped screen track:",xe.kind)}),Ve.current=null),De.current=null;const Ne=re.current;if(Ne&&Ne.getTracks().forEach(xe=>{xe.stop(),console.log("[CallContext] Stopped local track:",xe.kind)}),k&&k.getTracks().forEach(xe=>{xe.stop(),console.log("[CallContext] Stopped local stream track (backup):",xe.kind)}),L(null),re.current=null,R&&(R.close(),A(null)),U&&U.getTracks().forEach(xe=>{xe.stop(),console.log("[CallContext] Stopped remote track:",xe.kind)}),I(null),m("idle"),b(null),C(null),D(!1),B(!1),ne(!1),M&&(M.close(),z(null)),Ue(),console.log("[CallContext] Call cleanup complete"),Q.current&&me&&x)try{await ns(Re(ce,"users",x.id,"incomingCalls",Q.current))}catch{}if(v&&me)try{f==="incoming"?await it(Re(ce,"users",e.uid,"incomingCalls",v.id),{status:"rejected"}):await ns(Re(ce,"users",e.uid,"incomingCalls",v.id))}catch{}Q.current=null},Ae=()=>{if(k){const me=k.getAudioTracks()[0];me&&(me.enabled=!me.enabled,D(!me.enabled))}},dt=()=>{if(k){const me=k.getVideoTracks()[0];me&&(me.enabled=!me.enabled,B(!me.enabled))}},ye=()=>{const me=!P;ne(me),U&&U.getAudioTracks().forEach(Ne=>{Ne.enabled=!me}),j||Ae()};w.useEffect(()=>{U&&U.getAudioTracks().forEach(me=>{me.enabled=!P})},[U,P]);const Ve=w.useRef(null),De=w.useRef(null),K=async(me=null)=>{if(Ve.current){await ue();return}try{console.log("Requesting display media...",me);let Ne={},xe=me?.width||1280,X=me?.height||720,He=me?.frameRate||30;me||yR(n,Yi.HIGH_QUALITY)&&(xe=1920,X=1080,He=60);let ct;if(me?.sourceId&&window.require){console.log("Using Electron getUserMedia with sourceId:",me.sourceId);try{ct=await navigator.mediaDevices.getUserMedia({audio:{mandatory:{chromeMediaSource:"desktop"}},video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:me.sourceId,maxWidth:xe,maxHeight:X,maxFrameRate:He}}})}catch(Vt){throw console.error("Electron getUserMedia failed:",Vt),Vt}}else{const Vt={video:{width:{ideal:xe},height:{ideal:X},frameRate:{ideal:He},displaySurface:me?.displaySurface},audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!1}};console.log("Using Web getDisplayMedia with constraints:",Vt),ct=await navigator.mediaDevices.getDisplayMedia(Vt)}const on=ct.getVideoTracks()[0];B(!1),console.log("Display media obtained:",on.label);const Ee=ct.getAudioTracks()[0];let $e=null;if(Ee){console.log("System audio captured! Mixing with microphone...");let Vt=k;if(!Vt&&oe.audioInputs.length>0)try{Vt=await navigator.mediaDevices.getUserMedia({audio:!0})}catch{console.warn("Failed to get mic for mixing")}if(Vt&&Vt.getAudioTracks().length>0){const kt=Vt.getAudioTracks()[0],nt=new(window.AudioContext||window.webkitAudioContext),Rt=nt.createMediaStreamDestination(),Qt=nt.createMediaStreamSource(new MediaStream([kt])),Fe=nt.createMediaStreamSource(new MediaStream([Ee])),Ce=nt.createGain(),Ze=nt.createGain();Ce.gain.value=1,Ze.gain.value=1,Qt.connect(Ce).connect(Rt),Fe.connect(Ze).connect(Rt),$e=Rt.stream.getAudioTracks()[0],Ve.currentAudioContext=nt}else $e=Ee}k&&!De.current&&(De.current=k),on.onended=()=>{console.log("Screen track ended by user/browser UI"),ue()},Ve.current=ct;const lt=$e?[$e]:k?k.getAudioTracks():[],yt=new MediaStream([on,...lt]);if(L(yt),R&&R.peerConnection){const Vt=R.peerConnection.getSenders(),kt=Vt.find(nt=>nt.track&&nt.track.kind==="video");if(kt&&await kt.replaceTrack(on),$e){const nt=Vt.find(Rt=>Rt.track&&Rt.track.kind==="audio");nt&&(console.log("Replacing audio sender with mixed track..."),await nt.replaceTrack($e))}if(!kt){console.log("Audio-only -> Screen Share upgrade. Renegotiating...");const nt=R.peer;if(i&&nt){R.removeAllListeners("close");const Rt=i.call(nt,yt);Rt.on("stream",Qt=>I(Qt)),Rt.on("close",()=>fe()),Rt.on("error",()=>fe()),A(Rt)}}}}catch(Ne){console.error("Error starting screen share:",Ne),r("Failed to start screen share")}},ue=async()=>{if(Ve.current)if(console.log("Stopping screen share..."),Ve.currentAudioContext&&(Ve.currentAudioContext.close(),Ve.currentAudioContext=null),Ve.current.getTracks().forEach(me=>me.stop()),Ve.current=null,De.current){console.log("Reverting to previous stream state...");const me=De.current.getVideoTracks()[0],Ne=De.current.getAudioTracks();if(R&&R.peerConnection){const xe=R.peerConnection.getSenders(),X=xe.find(ct=>ct.track&&ct.track.kind==="video");if(me&&X)try{await X.replaceTrack(me)}catch{}const He=xe.find(ct=>ct.track&&ct.track.kind==="audio");He&&Ne.length>0&&(console.log("Reverting audio sender to original mic..."),await He.replaceTrack(Ne[0]))}L(De.current),De.current=null}else{console.log("No stored camera stream, requesting new user media...");try{const me=await Ie(!0);if(me&&R&&R.peerConnection){const Ne=me.getVideoTracks()[0],xe=R.peerConnection.getSenders().find(X=>X.track&&X.track.kind==="video");xe&&await xe.replaceTrack(Ne)}}catch(me){console.error("Failed to restore camera:",me)}}},je={startCall:Xe,answerCall:ke,endCall:fe,toggleAudio:Ae,toggleVideo:dt,callStatus:f,incomingCall:v,outgoingCallUser:x,localStream:k,remoteStream:U,isMuted:j,isVideoOff:V,activeCall:R,isScreenSharing:!!Ve.current,toggleScreenShare:K,availableDevices:oe,selectedMicId:Z,selectedCameraId:Se,setSelectedMicId:J,setSelectedCameraId:Le,playSound:$,customSounds:H,isDeafened:P,toggleDeafen:ye,addSound:E,removeSound:S};return c.jsx(xR.Provider,{value:je,children:t})},aB=240*1e3,oB=t=>{const e=w.useRef(null);w.useEffect(()=>{if(!t)return;const n=async()=>{try{await dr(Re(ce,"users",t),{lastSeen:ft(),isOnline:!0},{merge:!0})}catch(i){console.error("Error updating presence:",i)}};n(),e.current=setInterval(n,aB);const r=()=>{navigator.sendBeacon&&n()};return window.addEventListener("beforeunload",r),()=>{e.current&&clearInterval(e.current),window.removeEventListener("beforeunload",r)}},[t])},_R=(t,e=10)=>{if(!t)return!1;const n=t.toMillis?t.toMillis():new Date(t).getTime(),r=Date.now(),i=e*60*1e3;return r-n<i},Q1=({user:t,isOpen:e,onClose:n,onMessage:r})=>{if(!t)return null;const i=t.presence!=="invisible"&&_R(t.lastSeen),o=f=>({admin:"#f23f42",moderator:"#faa81a",member:"#80848e"})[f]||"#80848e",{startCall:u}=ru(),{currentUser:h}=yn();return c.jsx(Ps,{isOpen:e,onClose:n,title:"",size:"sm",showCloseButton:!1,children:c.jsxs("div",{className:"relative overflow-hidden rounded-lg -m-6 min-h-[400px] flex flex-col",children:[c.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-colors",style:{backgroundColor:t.themeColor||"#6366f1",backgroundImage:t.bannerUrl?`url(${t.bannerUrl})`:`linear-gradient(to bottom right, ${t.themeColor||"#6366f1"}, #000)`}}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/95 via-black/50 to-transparent"}),c.jsx("button",{onClick:n,className:"absolute top-4 right-4 p-2 bg-black/40 hover:bg-black/60 rounded-full text-white/80 hover:text-white transition-colors z-20 backdrop-blur-sm",children:c.jsxs("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{fill:"none",d:"M0 0h24v24H0z"}),c.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 17.59 13.41 12z"})]})}),c.jsxs("div",{className:"relative z-10 p-6 mt-auto flex flex-col items-center text-center",children:[c.jsxs("div",{className:"relative group mb-4",children:[t.photoUrl?c.jsx("img",{src:t.photoUrl,alt:t.displayName,className:"w-32 h-32 rounded-full border-4 object-cover shadow-2xl",style:{borderColor:t.themeColor||"#1e1f22"},onError:f=>{f.target.style.display="none",f.target.nextSibling.style.display="flex"}},t.photoUrl):null,c.jsx("div",{className:"w-32 h-32 rounded-full border-4 flex items-center justify-center text-white font-bold text-5xl shadow-2xl",style:{display:t.photoUrl?"none":"flex",borderColor:t.themeColor||"#1e1f22",backgroundColor:t.themeColor||"#6366f1"},children:t.displayName?.[0]?.toUpperCase()||"U"})]}),c.jsxs("div",{className:"space-y-1 w-full",children:[c.jsxs("h2",{className:"text-3xl font-bold text-white flex items-center justify-center gap-2 drop-shadow-md",children:[t.displayName||"Unknown",(t.role==="admin"||t.role==="premium")&&c.jsx("div",{className:"text-brand-primary drop-shadow-none",title:"Premium Member",children:c.jsx(sl,{size:24,color:t.themeColor||"#6366f1"})})]}),c.jsx("div",{className:"flex justify-center mt-2",children:c.jsx("span",{className:"px-4 py-1.5 rounded-full text-sm font-semibold border backdrop-blur-md shadow-lg",style:{backgroundColor:`${o(t.role)}30`,color:"#fff",borderColor:`${o(t.role)}80`},children:t.role?.charAt(0).toUpperCase()+t.role?.slice(1)})})]}),c.jsx("div",{className:"flex justify-center gap-2 mt-4 flex-wrap",children:(()=>{const f=new Set(t.badges||[]);t.role==="admin"&&f.add("admin");const m=Array.from(f).map(v=>H1[v]).filter(Boolean);return m.length===0?null:c.jsx("div",{className:"p-1.5 rounded-xl bg-black/40 backdrop-blur-md border border-white/10 flex gap-2",children:m.map(v=>{const b=v.icon;return c.jsxs("div",{className:"relative group cursor-help p-1 hover:bg-white/10 rounded transition-colors",children:[c.jsx(b,{size:20,color:v.color}),c.jsxs("div",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 px-2 py-1 bg-black text-white text-xs rounded shadow-lg whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-50",children:[c.jsx("div",{className:"font-bold",children:v.label}),v.description&&c.jsx("div",{className:"text-gray-300 font-normal text-[10px]",children:v.description}),c.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-black"})]})]},v.id)})})})()}),c.jsxs("div",{className:"flex items-center gap-3 mt-4 bg-black/30 px-4 py-2 rounded-full backdrop-blur-sm border border-white/5",children:[c.jsx("div",{className:Ht("w-3 h-3 rounded-full shadow-lg shadow-white/20",i&&(t.presence==="online"||!t.presence)?"bg-green-500":i&&t.presence==="idle"?"bg-yellow-500":i&&t.presence==="dnd"?"bg-red-500":"bg-gray-500")}),t.status?c.jsxs("span",{className:"text-sm text-gray-200 flex gap-2",children:[c.jsx("span",{children:t.status.emoji}),c.jsx("span",{children:t.status.text})]}):c.jsx("span",{className:"text-sm text-gray-300",children:i?t.presence==="idle"?"Idle":t.presence==="dnd"?"Do Not Disturb":"Online":"Offline"})]}),t.id!==h?.uid&&c.jsxs("div",{className:"flex gap-4 justify-center mt-6 w-full max-w-xs",children:[c.jsxs("button",{onClick:()=>r&&r(t),className:"flex-1 py-3 bg-white text-black font-bold rounded-xl hover:bg-gray-200 transition-colors shadow-lg flex items-center justify-center gap-2",children:[c.jsx(EL,{size:20})," Message"]}),c.jsx("button",{onClick:()=>u(t,"voice"),className:"p-3 bg-black/50 text-white rounded-xl hover:bg-black/70 border border-white/10 transition-colors backdrop-blur-sm",title:"Voice Call",children:c.jsx(SL,{size:22})}),c.jsx("button",{onClick:()=>u(t,"video"),className:"p-3 bg-black/50 text-white rounded-xl hover:bg-black/70 border border-white/10 transition-colors backdrop-blur-sm",title:"Video Call",children:c.jsx(Kd,{size:22})})]}),t.bio&&c.jsxs("div",{className:"mt-6 w-full text-left bg-black/20 p-4 rounded-xl backdrop-blur-sm border border-white/5",children:[c.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase mb-2 tracking-wider",children:"About Me"}),c.jsx("p",{className:"text-gray-200 text-sm leading-relaxed whitespace-pre-wrap",children:t.bio})]}),c.jsxs("div",{className:"mt-4 text-xs text-gray-500 font-medium uppercase tracking-widest",children:["Member since ",t.createdAt?new Date(t.createdAt.seconds*1e3).toLocaleDateString("en-US",{month:"short",year:"numeric"}):"Unknown"]})]})]})})},Mc=({isOpen:t,onClose:e,onConfirm:n,title:r="Confirm Action",message:i="Are you sure you want to proceed?",confirmText:o="Confirm",cancelText:u="Cancel",variant:h="danger"})=>{const f=()=>{n(),e()};return c.jsx(Ps,{isOpen:t,onClose:e,title:r,size:"sm",children:c.jsxs("div",{className:"space-y-6",children:[c.jsx("p",{className:"text-dark-text",children:i}),c.jsxs("div",{className:"flex gap-3 justify-end",children:[c.jsx(st,{variant:"secondary",onClick:e,children:u}),c.jsx(st,{variant:h,onClick:f,children:o})]})]})})},lB=()=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let n=0;n<8;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},cB=({isOpen:t,onClose:e,serverId:n})=>{const[r,i]=w.useState(""),[o,u]=w.useState(!1),[h,f]=w.useState(!1),[m,v]=w.useState(!1),{success:b,error:x}=Hr(),C=async()=>{u(!0);try{const A=lB();await dr(Re(ce,"inviteCodes",A),{serverId:n,createdAt:ft(),expiresAt:new Date(Date.now()+(m?365*24*60*60*1e3:1440*60*1e3)),maxUses:m?-1:1,uses:0,isActive:!0,isUnlimited:m}),i(A),b("Invite code generated!")}catch(A){console.error("Error generating invite:",A),x("Failed to generate invite code")}finally{u(!1)}},R=()=>{navigator.clipboard.writeText(r),f(!0),b("Copied to clipboard!"),setTimeout(()=>f(!1),2e3)};return c.jsx(Ps,{isOpen:t,onClose:e,title:"Invite Code",size:"sm",children:c.jsx("div",{className:"space-y-4",children:r?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-dark-bg p-4 rounded-lg text-center",children:[c.jsx("div",{className:"text-3xl font-mono font-bold text-brand-primary mb-2",children:r}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(st,{variant:"secondary",onClick:R,className:"flex-1 flex items-center justify-center gap-2",children:h?c.jsxs(c.Fragment,{children:[c.jsx(il,{size:20}),"Copied!"]}):c.jsxs(c.Fragment,{children:[c.jsx(FN,{size:20}),"Copy Code"]})}),c.jsx(st,{variant:"secondary",onClick:()=>{i(""),f(!1),v(!1)},className:"flex items-center justify-center gap-2 px-4",title:"Generate new code",children:c.jsx(FL,{size:20})})]})]}),c.jsxs("div",{className:"text-xs text-dark-muted space-y-1",children:[c.jsxs("div",{children:[" ",m?"Expires in 1 year":"Expires in 24 hours"]}),c.jsxs("div",{children:[" ",m?"Unlimited uses":"One-time use only"]}),c.jsx("div",{children:" Share with trusted users"})]}),c.jsx(st,{variant:"secondary",onClick:e,className:"w-full",children:"Close"})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"text-dark-text text-sm",children:"Generate an invite code for this server."}),c.jsxs("label",{className:"flex items-center gap-2 p-3 rounded bg-dark-bg cursor-pointer hover:bg-opacity-80 transition-colors",children:[c.jsx("input",{type:"checkbox",checked:m,onChange:A=>v(A.target.checked),className:"w-4 h-4 rounded border-gray-600 bg-dark-bg text-brand-primary focus:ring-brand-primary"}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-white text-sm font-medium",children:"Unlimited Uses"}),c.jsx("span",{className:"text-dark-muted text-xs",children:"Code will not expire after one use"})]})]})]}),c.jsx(st,{variant:"primary",onClick:C,disabled:o,className:"w-full",children:o?"Generating...":"Generate Invite Code"})]})})})},uB=[{emoji:"",text:"Gaming",type:"gaming"},{emoji:"",text:"Working",type:"working"},{emoji:"",text:"Listening to music",type:"music"},{emoji:"",text:"Watching",type:"watching"},{emoji:"",text:"Eating",type:"eating"},{emoji:"",text:"AFK",type:"afk"},{emoji:"",text:"Focusing",type:"focusing"},{emoji:"",text:"Studying",type:"studying"}],p4={online:{color:"bg-green-500",label:"Online",icon:""},idle:{color:"bg-yellow-500",label:"Idle",icon:""},dnd:{color:"bg-red-500",label:"Do Not Disturb",icon:""},invisible:{color:"bg-gray-500",label:"Invisible",icon:""},offline:{color:"bg-gray-500",label:"Offline",icon:""}},dB=t=>p4[t]||p4.offline,wR=({status:t,size:e="md",className:n})=>{const r=dB(t),i={sm:"w-2.5 h-2.5",md:"w-3 h-3",lg:"w-4 h-4"};return t==="invisible"?null:c.jsx("div",{className:Ht("rounded-full border-2 border-dark-bg",r.color,i[e]||i.md,n),title:r.label})},hB=({dm:t,currentUserId:e,isSelected:n,unreadCount:r,onClick:i,onContextMenu:o})=>{const u=t.participants.find(m=>m!==e),[h,f]=w.useState(null);return w.useEffect(()=>{(async()=>{if(u)try{const v=await Zc(Re(ce,"users",u));v.exists()&&f({id:v.id,...v.data()})}catch(v){console.error("Error fetching DM user:",v)}})()},[u]),h?c.jsxs("button",{onClick:i,onContextMenu:o,className:Ht("w-full flex items-center gap-3 px-2 py-2 rounded mb-1 group relative","text-dark-muted hover:bg-dark-hover hover:text-dark-text","transition-colors duration-150",n&&"bg-dark-hover text-dark-text"),children:[c.jsxs("div",{className:"relative",children:[h.photoUrl?c.jsx("img",{src:h.photoUrl,alt:h.displayName,className:"w-8 h-8 rounded-full object-cover"}):c.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white text-sm font-bold",children:h.displayName?.[0]?.toUpperCase()}),r>0&&c.jsx("div",{className:"absolute -top-1 -right-1 min-w-4 h-4 bg-red-500 rounded-full flex items-center justify-center border-2 border-dark-sidebar pointer-events-none z-10",children:c.jsx("span",{className:"text-white text-[9px] font-bold px-0.5",children:r>9?"9+":r})})]}),c.jsxs("div",{className:"flex-1 text-left overflow-hidden",children:[c.jsxs("div",{className:"text-sm font-medium truncate flex justify-between items-center",children:[c.jsx("span",{children:h.displayName}),t.updatedAt&&c.jsx("span",{className:"text-[10px] text-gray-500 hidden group-hover:block",children:eg(t.updatedAt)})]}),c.jsx("div",{className:"text-xs truncate opacity-70",children:t.lastMessage?.text||"Start a conversation"})]})]}):null},fB=({dms:t,unreadDms:e={},selectedDmId:n,onSelectDm:r})=>{const{currentUser:i}=yn(),[o,u]=w.useState(null),[h,f]=w.useState([]),m=(x,C)=>{x.preventDefault(),u({x:x.pageX,y:x.pageY,dmId:C.id})},v=async x=>{if(f(C=>[...C,x]),u(null),!!i)try{const C=Re(ce,"dms",x);await it(C,{hiddenFor:bh(i.uid)}),n===x&&r(null)}catch(C){console.error("Error deleting DM:",C),f(R=>R.filter(A=>A!==x))}};w.useEffect(()=>{const x=()=>u(null);return window.addEventListener("click",x),()=>window.removeEventListener("click",x)},[]);const b=t?.filter(x=>!h.includes(x.id))||[];return b.length===0?c.jsxs("div",{className:"px-4 py-8 text-center text-dark-muted text-sm",children:[c.jsx("p",{children:"No conversations yet."}),c.jsx("p",{className:"mt-2",children:"Start a DM from the friends list!"})]}):c.jsxs("div",{className:"flex-1 overflow-y-auto py-3",children:[c.jsxs("div",{className:"px-2",children:[c.jsx("div",{className:"text-xs font-semibold text-dark-muted uppercase px-2 mb-2 flex justify-between items-center",children:c.jsx("span",{children:"Direct Messages"})}),c.jsx("div",{className:"space-y-0.5",children:b.map(x=>c.jsx(hB,{dm:x,currentUserId:i.uid,isSelected:n===x.id,unreadCount:e[x.id]?.count||0,onClick:()=>r(x),onContextMenu:C=>m(C,x)},x.id))})]}),o&&c.jsx("div",{className:"fixed bg-dark-sidebar border border-dark-hover shadow-xl rounded-md z-50 py-1 min-w-[160px]",style:{top:o.y,left:o.x},children:c.jsxs("button",{onClick:()=>v(o.dmId),className:"w-full text-left px-4 py-2 hover:bg-red-500/10 text-red-400 hover:text-red-500 text-sm flex items-center gap-2 transition-colors",children:[c.jsx(Qi,{size:16}),"Delete Conversation"]})})]})};let Qy=null;const ag=()=>(Qy||(Qy=new(window.AudioContext||window.webkitAudioContext)),Qy),Oc=async(t,e,n="sine",r=.3)=>{try{const i=ag();i.state==="suspended"&&await i.resume();const o=i.createOscillator(),u=i.createGain();o.connect(u),u.connect(i.destination),o.frequency.value=t,o.type=n,u.gain.setValueAtTime(r,i.currentTime),u.gain.exponentialRampToValueAtTime(.01,i.currentTime+e),o.start(i.currentTime),o.stop(i.currentTime+e)}catch(i){console.warn("[VoiceSound] Failed to play tone:",i)}},g4=()=>{ag(),setTimeout(()=>Oc(440,.1,"sine",.2),0),setTimeout(()=>Oc(554,.15,"sine",.25),80)},v4=()=>{ag(),setTimeout(()=>Oc(554,.1,"sine",.2),0),setTimeout(()=>Oc(440,.15,"sine",.15),80)},Xy=()=>{ag(),setTimeout(()=>Oc(880,.08,"sine",.2),0),setTimeout(()=>Oc(1100,.12,"sine",.25),60)},X1=(t,e={})=>{const[n,r]=w.useState(!1),i=w.useRef(null),o=w.useRef(null),u=w.useRef(null),h=e.threshold??30,f=e.interval??100;return w.useEffect(()=>{const m=()=>{if(u.current&&(clearInterval(u.current),u.current=null),i.current){const x=i.current;x.state!=="closed"&&x.close().catch(C=>console.warn("Error closing AudioContext:",C)),i.current=null}o.current=null,r(!1)};if(!t){m();return}const v=t.getAudioTracks();if(v.length===0){m();return}const b=v[0];if(!b.enabled||b.muted){m();return}try{const x=window.AudioContext||window.webkitAudioContext,C=new x,R=C.createAnalyser();R.fftSize=256,R.smoothingTimeConstant=.5,C.createMediaStreamSource(t).connect(R),i.current=C,o.current=R,C.state==="suspended"&&C.resume().then(()=>{console.log("[useSpeakingIndicator] AudioContext resumed")}).catch(L=>console.error("[useSpeakingIndicator] Failed to resume AudioContext:",L));const k=new Uint8Array(R.frequencyBinCount);u.current=setInterval(()=>{if(!o.current)return;o.current.getByteFrequencyData(k);let L=0;for(let M=0;M<k.length;M++)L+=k[M];const I=L/k.length>h;r(I)},f)}catch(x){console.error("[useSpeakingIndicator] Error initializing audio analysis:",x),m()}return m},[t,h,f]),n},ER=w.createContext(),su=()=>{const t=w.useContext(ER);if(!t)throw new Error("useVoiceChannel must be used within VoiceChannelProvider");return t},mB=({children:t})=>{const{currentUser:e,userProfile:n}=yn(),{currentServer:r,channels:i}=ua(),[o,u]=w.useState(null),[h,f]=w.useState(null),[m,v]=w.useState([]),[b,x]=w.useState(null),[C,R]=w.useState(null),[A,k]=w.useState(new Map),[L,U]=w.useState(new Map),[I,M]=w.useState([]),[z,H]=w.useState(null),[E,S]=w.useState([]),[j,D]=w.useState(null),[V,B]=w.useState(new Map),[P,ne]=w.useState(null),[oe,G]=w.useState(!1),[Z,J]=w.useState(!1),[Se,Le]=w.useState(!1),[$,Q]=w.useState(!1),[re,he]=w.useState(!1),Te=w.useRef(null),Ue=w.useRef(null),te=w.useRef(null),Oe=w.useRef(null),Ie=w.useRef(new Map),Xe=w.useRef(new Map),ke=w.useRef([]),fe=w.useRef(null),Ae=w.useRef(null),dt=w.useRef(null),ye=w.useRef(null),Ve=w.useRef(null),De=w.useRef([]);w.useEffect(()=>{ye.current=o},[o]),w.useEffect(()=>{Ve.current=h},[h]);const K=w.useCallback(Fe=>{if(Fe&&Fe.type==="SOUND_EFFECT"&&Fe.payload?.src){console.log("[VoiceChannel] Received sound effect:",Fe.payload.name);const Ce=new Audio(Fe.payload.src);Ce.volume=.5,ke.current.push(Ce),Ce.onended=()=>{ke.current=ke.current.filter(Ze=>Ze!==Ce)},Ce.play().catch(Ze=>console.error("[VoiceChannel] Error playing sound:",Ze))}},[]);w.useEffect(()=>{if(!e)return;const Fe=new gR;return Fe.on("open",Ce=>{console.log("[VoiceChannel] My Peer ID:",Ce),Ue.current=Ce,Te.current=Fe}),Fe.on("connection",Ce=>{console.log("[VoiceChannel] Incoming data connection from:",Ce.peer),Ce.on("open",()=>{Xe.current.set(Ce.peer,Ce)}),Ce.on("data",K),Ce.on("close",()=>{Xe.current.delete(Ce.peer)})}),Fe.on("call",Ce=>{console.log("[VoiceChannel] Incoming call from:",Ce.peer);const Ze=te.current;Ze?Ce.answer(Ze):Ce.answer(),Ce.on("stream",et=>{console.log("[VoiceChannel] Received remote stream from:",Ce.peer),U(bt=>new Map(bt).set(Ce.peer,et))}),Ce.on("close",()=>{U(et=>{const bt=new Map(et);return bt.delete(Ce.peer),bt})}),Ie.current.set(Ce.peer,Ce)}),Fe.on("error",Ce=>{if(console.error("[VoiceChannel] Peer error details:",{type:Ce.type,message:Ce.message,targetPeer:Ce.peer}),Ce.type==="peer-unavailable"||Ce.message?.includes("Could not connect to peer")){let Ze=Ce.peer;if(!Ze){const et=Ce.message.match(/peer\s+([a-zA-Z0-9-]+)/);et&&(Ze=et[1])}Ze&&ye.current&&Ve.current&&(console.log("[VoiceChannel] Proactively removing ghost peer:",Ze),v(et=>{const bt=et.find(mt=>mt.peerId===Ze);if(bt&&bt.odaId){console.log("[VoiceChannel] Cleaning up Firestore for ghost:",bt.displayName);const mt=Re(ce,"servers",Ve.current,"channels",ye.current,"voiceParticipants",bt.odaId);ns(mt).catch(()=>{})}return et.filter(mt=>mt.peerId!==Ze)}))}}),()=>{ke.current.forEach(Ce=>{try{Ce.pause(),Ce.currentTime=0}catch{}}),ke.current=[],Fe.destroy(),Te.current=null,Ue.current=null}},[e]);const ue=w.useCallback(async()=>{if(!navigator.mediaDevices){console.log("[VoiceChannel] mediaDevices API not available - skipping device enumeration");return}try{const Fe=await navigator.mediaDevices.enumerateDevices(),Ce=Fe.filter(et=>et.kind==="audioinput"),Ze=Fe.filter(et=>et.kind==="videoinput");M(Ce),S(Ze),!z&&Ce.length>0&&H(Ce[0].deviceId),!j&&Ze.length>0&&D(Ze[0].deviceId)}catch(Fe){console.error("[VoiceChannel] Failed to refresh devices:",Fe)}},[z,j]);w.useEffect(()=>{if(!navigator.mediaDevices){console.log("[VoiceChannel] mediaDevices API not available - skipping device enumeration");return}return ue(),navigator.mediaDevices.ondevicechange=ue,()=>{navigator.mediaDevices&&(navigator.mediaDevices.ondevicechange=null)}},[ue]);const me=X1(!oe&&re&&b?b:null,{threshold:15,interval:50});w.useEffect(()=>{if(!te.current||!re||oe)return;const Fe=te.current.getAudioTracks()[0];Fe&&(me?Fe.enabled||(Fe.enabled=!0,console.log("[VAD] Audio enabled - speaking detected")):Fe.enabled&&(Fe.enabled=!1,console.log("[VAD] Audio disabled - silence detected")))},[me,re,oe]);const Ne=w.useCallback(async Fe=>{if(H(Fe),!(!o||!te.current))try{const Ce=await navigator.mediaDevices.getUserMedia({audio:{deviceId:{exact:Fe}},video:Se});te.current&&te.current.getTracks().forEach(et=>et.stop()),te.current=Ce,x(Ce);const Ze=Ce.getAudioTracks()[0];Ze&&(Ze.enabled=!oe),Ie.current.forEach((et,bt)=>{const mt=Te.current.call(bt,Ce);mt&&(mt.on("stream",At=>{U($t=>new Map($t).set(bt,At))}),Ie.current.set(bt,mt))}),console.log("[VoiceChannel] Switched to audio device:",Fe)}catch(Ce){console.error("[VoiceChannel] Failed to switch audio device:",Ce)}},[o,Se,oe]),xe=w.useCallback(async Fe=>{if(D(Fe),!(!o||!te.current||!Se))try{const Ze=(await navigator.mediaDevices.getUserMedia({audio:z?{deviceId:{exact:z}}:!0,video:{deviceId:{exact:Fe}}})).getVideoTracks()[0];if(Ze){const et=te.current.getVideoTracks()[0];et&&et.stop(),et&&te.current.removeTrack(et),te.current.addTrack(Ze),x(new MediaStream(te.current.getTracks())),Ie.current.forEach((bt,mt)=>{const At=Te.current.call(mt,te.current);At&&(At.on("stream",$t=>{U(St=>new Map(St).set(mt,$t))}),Ie.current.set(mt,At))})}console.log("[VoiceChannel] Switched to video device:",Fe)}catch(Ce){console.error("[VoiceChannel] Failed to switch video device:",Ce)}},[o,Se,z]),X=w.useRef([]),He=w.useRef(new Set);w.useEffect(()=>{if(!o||!h){v([]),X.current=[],He.current=new Set;return}const Fe=_t(ce,"servers",h,"channels",o,"voiceParticipants"),Ce=Br(Fe,np("joinedAt","asc")),Ze=Tr(Ce,et=>{const bt=[];et.forEach(qe=>{bt.push({odaId:qe.id,...qe.data()})});const mt=new Set(X.current.map(qe=>qe.odaId)),At=new Set(bt.map(qe=>qe.odaId));bt.forEach(qe=>{!mt.has(qe.odaId)&&qe.odaId!==e?.uid&&g4()}),X.current.forEach(qe=>{!At.has(qe.odaId)&&qe.odaId!==e?.uid&&v4()});const $t=new Set(bt.filter(qe=>qe.isScreenSharing).map(qe=>qe.odaId));$t.forEach(qe=>{!He.current.has(qe)&&qe!==e?.uid&&Xy()}),X.current=bt,He.current=$t;const St=Date.now(),ln=bt.filter(qe=>{if(qe.odaId===e?.uid)return!0;const xt=qe.lastHeartbeat?.toMillis?qe.lastHeartbeat.toMillis():qe.lastHeartbeat||(qe.joinedAt?.toMillis?qe.joinedAt.toMillis():Date.now());if(St-xt>3e4){console.log("[VoiceChannel] Filtering ghost participant locally (no activity):",qe.displayName);const nr=Re(ce,"servers",h,"channels",o,"voiceParticipants",qe.odaId);return ns(nr).catch(()=>{}),!1}return!0});U(qe=>{const xt=new Map(qe);for(const[qt]of qe)ln.some(ha=>ha.peerId===qt||ha.odaId===qt)||xt.delete(qt);return xt}),ln.forEach(qe=>{if(qe.odaId!==e?.uid&&qe.peerId&&!Ie.current.has(qe.peerId)&&Te.current&&te.current){console.log("[VoiceChannel] Calling peer:",qe.peerId);const xt=Te.current.call(qe.peerId,te.current);if(xt&&(xt.on("stream",qt=>{U(nr=>new Map(nr).set(qe.peerId,qt))}),xt.on("close",()=>{U(qt=>{const nr=new Map(qt);return nr.delete(qe.peerId),nr})}),Ie.current.set(qe.peerId,xt)),!Xe.current.has(qe.peerId)){const qt=Te.current.connect(qe.peerId);qt&&(qt.on("open",()=>{Xe.current.set(qe.peerId,qt)}),qt.on("data",K),qt.on("close",()=>{Xe.current.delete(qe.peerId)}))}}});const qn=new Set(ln.map(qe=>qe.peerId));Ie.current.forEach((qe,xt)=>{if(!qn.has(xt)){qe.close(),Ie.current.delete(xt);const qt=Xe.current.get(xt);qt&&(qt.close(),Xe.current.delete(xt))}}),v(ln),X.current=ln,De.current=bt});return()=>Ze()},[o,h,e,K]);const ct=w.useCallback(async Fe=>{if(!e||!r||!Te.current||!Ue.current){console.error("[VoiceChannel] Cannot join: missing requirements");return}try{const Ce=await navigator.mediaDevices.getUserMedia({audio:z?{deviceId:{exact:z}}:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0},video:!1});x(Ce),te.current=Ce;const Ze=Re(ce,"servers",r,"channels",Fe,"voiceParticipants",e.uid);await dr(Ze,{odaId:e.uid,peerId:Ue.current,displayName:n?.displayName||e.displayName||"User",photoUrl:n?.photoUrl||n?.photoURL||null,joinedAt:ft(),isMuted:!1,isVideoOn:!1,isScreenSharing:!1});const et=async()=>{if(o&&e&&h)try{const At=Re(ce,"servers",h,"channels",o,"voiceParticipants",e.uid);await dr(At,{lastHeartbeat:ft()},{merge:!0})}catch(At){console.error("[VoiceChannel] Heartbeat failed:",At)}};await et(),fe.current=setInterval(et,5e3),console.log("[VoiceChannel] Heartbeat started");const bt=async()=>{if(!ye.current||!Ve.current)return;const At=Date.now(),$t=De.current;$t.length>0&&console.log(`[VoiceChannel] Ghost Monitor: checking ${$t.length} total entries...`),De.current.forEach(St=>{if(St.odaId===e?.uid)return;const ln=St.lastHeartbeat||St.joinedAt,qn=ln?.toMillis?ln.toMillis():ln||0;if(qn===0)return;const qe=At-qn;if(qe>2e4){console.log("[VoiceChannel] Interval cleanup removing ghost:",St.displayName,`(${Math.round(qe/1e3)}s idle)`);const xt=Re(ce,"servers",Ve.current,"channels",ye.current,"voiceParticipants",St.odaId);ns(xt).catch(qt=>console.error("[VoiceChannel] Failed to delete ghost:",qt)),v(qt=>qt.filter(nr=>nr.odaId!==St.odaId))}})};dt.current=setInterval(bt,1e4),console.log("[VoiceChannel] Global cleanup interval started");const mt=async()=>{if(!Ie.current.size){ne(null);return}let At=0,$t=0;const St=Array.from(Ie.current.values()).map(async ln=>{if(ln.peerConnection)try{const qn=await ln.peerConnection.getStats();let qe=!1;qn.forEach(xt=>{xt.type==="candidate-pair"&&xt.state==="succeeded"&&(qe=!0,xt.currentRoundTripTime!==void 0?(At+=Math.round(xt.currentRoundTripTime*1e3),$t++):xt.roundTripTime!==void 0&&(At+=Math.round(xt.roundTripTime*1e3),$t++))}),qe||qn.forEach(xt=>{if(xt.type==="candidate-pair"&&(xt.currentRoundTripTime||xt.roundTripTime)){const qt=xt.currentRoundTripTime||xt.roundTripTime;At+=Math.round(qt*1e3),$t++}})}catch(qn){console.warn("[VoiceChannel] Stats error:",qn)}});if(await Promise.all(St),$t>0){const ln=Math.round(At/$t);ne(ln)}};Ae.current=setInterval(mt,2e3),u(Fe),f(r),G(!1),Le(!1),Q(!1),g4(),console.log("[VoiceChannel] Joined channel:",Fe)}catch(Ce){console.error("[VoiceChannel] Failed to join:",Ce)}},[e,r,n,z]),on=w.useRef(!1),Ee=w.useCallback(async()=>{if(!(on.current||!o||!e||!h))try{on.current=!0,fe.current&&(clearInterval(fe.current),fe.current=null,console.log("[VoiceChannel] Heartbeat stopped")),dt.current&&(clearInterval(dt.current),dt.current=null),Ae.current&&(clearInterval(Ae.current),Ae.current=null);const Fe=Re(ce,"servers",h,"channels",o,"voiceParticipants",e.uid);await ns(Fe),te.current&&(te.current.getTracks().forEach(Ce=>{Ce.stop(),console.log("[VoiceChannel] Stopped track:",Ce.kind)}),te.current=null,x(null)),Oe.current&&(Oe.current.getTracks().forEach(Ce=>{Ce.stop(),console.log("[VoiceChannel] Stopped screen track:",Ce.kind)}),Oe.current=null,R(null)),Ie.current.forEach(Ce=>Ce.close()),Ie.current.clear(),Xe.current.forEach(Ce=>Ce.close()),Xe.current.clear(),U(new Map),u(null),f(null),v([]),Le(!1),Q(!1),G(!1),J(!1),ke.current.length>0&&(console.log("[VoiceChannel] Stopping",ke.current.length,"active sounds"),ke.current.forEach(Ce=>{try{Ce.pause(),Ce.currentTime=0}catch(Ze){console.error("[VoiceChannel] Error stopping sound:",Ze)}}),ke.current=[]),v4(),console.log("[VoiceChannel] Left channel - all media stopped")}catch(Fe){console.error("[VoiceChannel] Failed to leave:",Fe)}finally{setTimeout(()=>{on.current=!1},500)}},[o,e,h]);w.useEffect(()=>{const Fe=()=>{o&&Ee()};return window.addEventListener("beforeunload",Fe),()=>window.removeEventListener("beforeunload",Fe)},[o,Ee]);const $e=w.useCallback(()=>{if(te.current){const Fe=te.current.getAudioTracks()[0];if(Fe){const Ce=!oe;if(G(Ce),Ce?Fe.enabled=!1:re||(Fe.enabled=!0),o&&e&&h){const Ze=Re(ce,"servers",h,"channels",o,"voiceParticipants",e.uid);dr(Ze,{isMuted:Ce},{merge:!0})}}}},[o,e,h,oe,re]),lt=w.useCallback(()=>{J(Fe=>{const Ce=!Fe;return Ce?oe||$e():oe&&$e(),L.forEach(Ze=>{Ze.getAudioTracks().forEach(et=>{et.enabled=!Ce})}),Ce})},[L,oe,$e]),yt=w.useCallback(async()=>{if(!(!te.current||!o))try{if(Se){const Fe=te.current.getVideoTracks()[0];Fe&&(Fe.stop(),te.current.removeTrack(Fe)),Le(!1)}else{const Ce=(await navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0];te.current.addTrack(Ce),x(new MediaStream(te.current.getTracks())),Le(!0),Ie.current.forEach((Ze,et)=>{const bt=Te.current.call(et,te.current);bt&&(bt.on("stream",mt=>{U(At=>new Map(At).set(et,mt))}),Ie.current.set(et,bt))})}if(e&&h){const Fe=Re(ce,"servers",h,"channels",o,"voiceParticipants",e.uid);dr(Fe,{isVideoOn:!Se},{merge:!0})}}catch(Fe){console.error("[VoiceChannel] Failed to toggle video:",Fe)}},[Se,o,e,h]),Vt=w.useCallback(async(Fe=null)=>{if(o)try{if($||Fe===null&&Oe.current){if(Oe.current&&(Oe.current.getTracks().forEach(St=>St.stop()),Oe.current=null),Q(!1),R(null),e&&h){const St=Re(ce,"servers",h,"channels",o,"voiceParticipants",e.uid);dr(St,{isScreenSharing:!1},{merge:!0})}return}let Ce;const Ze={width:Fe?.width||960,height:Fe?.height||540,frameRate:Fe?.frameRate||15};console.log("[VoiceChannel] Screen share starting with constraints:",Ze),Fe?.sourceId?Ce=await navigator.mediaDevices.getUserMedia({audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:Fe.sourceId,maxWidth:Ze.width,maxHeight:Ze.height,maxFrameRate:Ze.frameRate}}}):Ce=await navigator.mediaDevices.getDisplayMedia({video:{width:{ideal:Ze.width},height:{ideal:Ze.height},frameRate:{ideal:Ze.frameRate},cursor:"always"},audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!1}});const et=Ce.getVideoTracks()[0],bt=Ce.getAudioTracks()[0],mt=te.current?.getAudioTracks()[0];let At=null;if(mt&&bt){console.log("[VoiceChannel] Mixing microphone and system audio");try{const St=new(window.AudioContext||window.webkitAudioContext),ln=St.createMediaStreamDestination(),qn=St.createMediaStreamSource(new MediaStream([mt])),qe=St.createMediaStreamSource(new MediaStream([bt])),xt=St.createGain(),qt=St.createGain();xt.gain.value=1,qt.gain.value=.5,qn.connect(xt),qe.connect(qt),xt.connect(ln),qt.connect(ln),At=ln.stream.getAudioTracks()[0]}catch(St){console.error("[VoiceChannel] Audio mixing failed, using mic only:",St),At=mt}}else mt?(console.log("[VoiceChannel] Using microphone audio only"),At=mt):bt&&(console.log("[VoiceChannel] Using system audio only"),At=bt);const $t=new MediaStream([et]);if(At&&$t.addTrack(At),Oe.current=$t,et.onended=()=>{if(Q(!1),R(null),Oe.current=null,e&&h&&o){const St=Re(ce,"servers",h,"channels",o,"voiceParticipants",e.uid);dr(St,{isScreenSharing:!1},{merge:!0})}},Ie.current.forEach((St,ln)=>{const qn=Te.current.call(ln,$t);qn&&qn.on("stream",qe=>{U(xt=>new Map(xt).set(ln,qe))})}),Q(!0),R($t),Xy(),e&&h){const St=Re(ce,"servers",h,"channels",o,"voiceParticipants",e.uid);dr(St,{isScreenSharing:!0},{merge:!0})}}catch(Ce){console.error("[VoiceChannel] Failed to toggle screen share:",Ce)}},[$,o,e,h,te,Oe,Ie,Xe,L,U,Q,R,Xy]),kt=i?.filter(Fe=>Fe.type==="voice")||[];w.useEffect(()=>()=>{o&&Ee()},[o,h]);const{customSounds:nt}=W1(),Rt=w.useCallback(Fe=>{const Ce=nt.find(et=>et.id===Fe);if(!Ce)return;const Ze=new Audio(Ce.src);Ze.volume=.5,ke.current.push(Ze),Ze.onended=()=>{ke.current=ke.current.filter(et=>et!==Ze)},Ze.play().catch(et=>console.error("[VoiceChannel] Error playing sound locally:",et)),Xe.current.forEach((et,bt)=>{et.open&&(console.log("[VoiceChannel] Broadcasting sound to:",bt),et.send({type:"SOUND_EFFECT",payload:{src:Ce.src,name:Ce.name}}))})},[nt]),Qt={currentVoiceChannel:o,connectedServerId:h,participants:m,localStream:b,screenStream:C,remoteStreams:L,voiceChannels:kt,currentPing:P,isMuted:oe,isDeafened:Z,isVideoOn:Se,isScreenSharing:$,audioDevices:I,selectedAudioDeviceId:z,vadEnabled:re,joinVoiceChannel:ct,leaveVoiceChannel:Ee,toggleMute:$e,toggleDeafen:lt,toggleVideo:yt,toggleScreenShare:Vt,changeAudioDevice:Ne,videoDevices:E,selectedVideoDeviceId:j,changeVideoDevice:xe,refreshDevices:ue,userVolumes:V,setUserVolume:(Fe,Ce)=>{B(Ze=>{const et=new Map(Ze);return et.set(Fe,Ce),et})},playSound:Rt,toggleVAD:()=>he(Fe=>!Fe)};return c.jsxs(ER.Provider,{value:Qt,children:[t,c.jsx(pB,{remoteStreams:L,isDeafened:Z,participants:m,userVolumes:V})]})},pB=({remoteStreams:t,isDeafened:e,participants:n,userVolumes:r})=>c.jsx("div",{style:{display:"none"},children:Array.from(t.entries()).map(([i,o])=>{const h=n.find(m=>m.peerId===i)?.odaId,f=h?r.get(h)??1:1;return c.jsx(gB,{stream:o,muted:e,volume:f},i)})}),gB=({stream:t,muted:e,volume:n})=>{const r=w.useRef(null);return w.useEffect(()=>{r.current&&t&&(r.current.srcObject=t,r.current.play().catch(i=>{console.log("[VoiceChannel] Audio autoplay blocked:",i)}))},[t]),w.useEffect(()=>{r.current&&(r.current.muted=e)},[e]),w.useEffect(()=>{r.current&&(r.current.volume=n)},[n]),c.jsx("audio",{ref:r,autoPlay:!0,playsInline:!0})},SR=({participant:t,position:e,onClose:n,channelId:r,serverId:i})=>{const{userVolumes:o,setUserVolume:u}=su(),{userProfile:h}=yn(),f=h?.role==="admin",m=Math.round((o.get(t.odaId)??1)*100),v=x=>{const C=parseInt(x.target.value)/100;u(t.odaId,C)},b=async()=>{if(console.log("[Admin] Kick attempt:",{isAdmin:f,channelId:r,serverId:i,participantId:t.odaId,participantName:t.displayName}),!f){console.error("[Admin] Not an admin, cannot kick");return}if(!r||!i){console.error("[Admin] Missing channel or server ID");return}try{const x=Re(ce,"servers",i,"channels",r,"voiceParticipants",t.odaId);console.log("[Admin] Deleting participant:",x.path),await ns(x),console.log("[Admin] Successfully kicked user from voice:",t.displayName),n()}catch(x){console.error("[Admin] Failed to kick user:",x)}};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40",onClick:n,onContextMenu:x=>{x.preventDefault(),n()}}),c.jsxs("div",{className:"fixed bg-[#111214] border border-[#1e1f22] rounded-lg shadow-xl py-3 z-50 w-64 px-3",style:{top:e.y,left:e.x},onClick:x=>x.stopPropagation(),children:[c.jsxs("div",{className:"text-xs font-bold text-[#949ba4] uppercase mb-3 px-1",children:[t.displayName," SETTINGS"]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between text-sm text-[#dbdee1] font-medium mb-1 px-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(NA,{size:14,className:"text-[#949ba4]"}),c.jsx("span",{children:"User Volume"})]}),c.jsxs("span",{className:"text-xs font-bold text-brand-primary",children:[m,"%"]})]}),c.jsx("input",{type:"range",min:"0",max:"100",value:m,onChange:v,className:"volume-slider",style:{background:`linear-gradient(to right, #ef9f64 0%, #ef9f64 ${m}%, #1e1f22 ${m}%, #1e1f22 100%)`}})]}),c.jsx("div",{className:"mt-4 border-t border-[#1e1f22] pt-2",children:c.jsx("div",{className:"text-[11px] text-[#949ba4] px-1 italic",children:"This setting only affects the audio heard by you."})}),f&&c.jsx("div",{className:"mt-3 border-t border-[#1e1f22] pt-3",children:c.jsxs("button",{onClick:b,className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-red-400 hover:bg-red-500/10 rounded transition-colors",children:[c.jsx(kz,{size:14}),c.jsx("span",{children:"Kick from Voice Channel"})]})})]})]})},vB=({channel:t})=>{const{currentVoiceChannel:e,joinVoiceChannel:n,participants:r,remoteStreams:i,localStream:o}=su(),{currentServer:u}=ua(),{currentUser:h}=yn(),[f,m]=w.useState([]),[v,b]=w.useState(null),x=e===t.id;w.useEffect(()=>{if(!u||!t.id)return;const R=_t(ce,"servers",u,"channels",t.id,"voiceParticipants"),A=Tr(R,L=>{const U=Date.now(),I=[];L.forEach(z=>{I.push({odaId:z.id,...z.data()})});const M=I.filter(z=>{if(z.odaId===h?.uid)return!0;const H=z.lastHeartbeat||z.joinedAt,E=H?.toMillis?H.toMillis():H||0;if(E===0)return!0;if(U-E>3e4){console.log("[VoiceChannel] Passive sidebar cleanup purging ghost:",z.displayName);const j=Re(ce,"servers",u,"channels",t.id,"voiceParticipants",z.odaId);return ns(j).catch(()=>{}),!1}return!0});m(M)}),k=setInterval(()=>{const L=Date.now();m(U=>U.filter(I=>{if(I.odaId===h?.uid)return!0;const M=I.lastHeartbeat||I.joinedAt,z=M?.toMillis?M.toMillis():M||0;if(z===0)return!0;if(L-z>3e4){console.log("[VoiceChannel] Periodic sidebar cleanup purging ghost:",I.displayName);const H=Re(ce,"servers",u,"channels",t.id,"voiceParticipants",I.odaId);return ns(H).catch(()=>{}),!1}return!0}))},15e3);return()=>{A(),clearInterval(k)}},[u,t.id,h]);const C=()=>{x||n(t.id)};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:`w-full flex items-center gap-2 px-2 py-1.5 rounded cursor-pointer transition-colors duration-150 ${x?"bg-dark-hover text-dark-text":"text-dark-muted hover:bg-dark-hover hover:text-dark-text"}`,onClick:C,children:[c.jsx(NA,{className:"flex-shrink-0"}),c.jsx("span",{className:"truncate text-sm flex-1 text-left",children:t.name})]}),f.length>0&&c.jsx("div",{className:"voice-participants",children:f.map(R=>c.jsx(yB,{participant:R,isLocal:R.odaId===h?.uid,remoteStreams:i,localStream:o,onContextMenu:A=>{R.odaId!==h?.uid&&(A.preventDefault(),b({participant:R,x:A.clientX,y:A.clientY}))}},R.odaId))}),v&&c.jsx(SR,{participant:v.participant,position:{x:v.x,y:v.y},onClose:()=>b(null),channelId:t.id,serverId:u})]})},yB=({participant:t,isLocal:e,remoteStreams:n,localStream:r,onContextMenu:i})=>{const o=e?r:n.get(t.peerId),u=X1(t.isMuted||!o?null:o,{threshold:15});return c.jsxs("div",{className:`voice-participant ${u?"speaking":""}`,onContextMenu:i,children:[c.jsx("div",{className:"participant-avatar",children:t.photoUrl?c.jsx("img",{src:t.photoUrl,alt:""}):c.jsx("div",{className:"avatar-placeholder",children:t.displayName?.charAt(0)?.toUpperCase()||"?"})}),c.jsx("span",{className:"participant-name",children:t.displayName}),c.jsxs("div",{className:"participant-status",children:[t.isMuted&&c.jsx(F1,{className:"status-icon muted"}),t.isVideoOn&&c.jsx(kA,{className:"status-icon video"}),t.isScreenSharing&&c.jsx(B1,{className:"status-icon screen"})]})]})},bB=()=>{const{voiceChannels:t}=su();return!t||t.length===0?null:c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-xs font-semibold text-dark-muted uppercase px-2 mb-1 mt-4",children:"VOICE CHANNELS"}),c.jsx("div",{className:"voice-channel-list",children:t.map(e=>c.jsx(vB,{channel:e},e.id))})]})},xB=({onClose:t})=>{const{participants:e,localStream:n,screenStream:r,remoteStreams:i,isMuted:o,isScreenSharing:u}=su(),{currentUser:h}=yn(),[f,m]=w.useState(null),[v,b]=w.useState(null),x=e.length,C=x<=1?"grid-1":x<=2?"grid-2":x<=4?"grid-4":x<=6?"grid-6":x<=9?"grid-9":"grid-many",R=()=>u&&r?r:n,A=k=>k.odaId===h?.uid?R():i.get(k.peerId);return c.jsxs("div",{className:"voice-grid-overlay",children:[c.jsxs("div",{className:"voice-grid-modal",children:[c.jsxs("div",{className:"voice-grid-header",children:[c.jsx("h3",{children:"Voice Channel"}),c.jsx("button",{className:"close-btn",onClick:t,children:c.jsx(Cz,{})})]}),c.jsx("div",{className:`voice-grid ${C}`,children:e.map(k=>c.jsx(wB,{participant:k,stream:A(k),isLocal:k.odaId===h?.uid,isMuted:k.odaId===h?.uid?o:k.isMuted,onExpand:()=>m(k),isFocused:!1,onContextMenu:L=>{k.odaId!==h?.uid&&(L.preventDefault(),b({participant:k,x:L.clientX,y:L.clientY}))}},k.odaId))})]}),v&&c.jsx(SR,{participant:v.participant,position:{x:v.x,y:v.y},onClose:()=>b(null)}),f&&c.jsx("div",{className:"voice-fullscreen-overlay",onClick:()=>m(null),children:c.jsx("div",{className:"voice-fullscreen-container",onClick:k=>k.stopPropagation(),children:c.jsx(_B,{stream:A(f),participant:f,isLocal:f.odaId===h?.uid,onClose:()=>m(null)})})})]})},_B=({stream:t,participant:e,isLocal:n,onClose:r})=>{const i=w.useRef(null);return w.useEffect(()=>{i.current&&t&&(i.current.srcObject=t)},[t]),c.jsxs("div",{className:"fullscreen-video-wrapper",children:[c.jsx("video",{ref:i,autoPlay:!0,playsInline:!0,muted:n,className:"fullscreen-video"}),c.jsxs("div",{className:"fullscreen-overlay",children:[c.jsxs("span",{className:"fullscreen-label",children:[e.displayName,n&&" (You)"]}),c.jsx("button",{className:"fullscreen-close-btn",onClick:r,children:c.jsx(wz,{})})]})]})},wB=({participant:t,stream:e,isLocal:n,isMuted:r,onExpand:i,isFocused:o,onContextMenu:u})=>{const h=w.useRef(null),f=X1(r?null:e,{threshold:5});w.useEffect(()=>{h.current&&e&&(h.current.srcObject=e)},[e]);const m=e?.getVideoTracks()?.length>0&&e.getVideoTracks()[0].enabled;return c.jsxs("div",{className:`video-tile ${n?"local":""} ${o?"focused":""} ${f?"speaking":""}`,onClick:()=>m&&i&&i(),onContextMenu:u,children:[m?c.jsx("video",{ref:h,autoPlay:!0,playsInline:!0,muted:n,className:"video-feed"}):c.jsx("div",{className:"video-placeholder",children:t.photoUrl?c.jsx("img",{src:t.photoUrl,alt:"",className:"avatar-large"}):c.jsx("div",{className:"avatar-placeholder-large",children:t.displayName?.charAt(0)?.toUpperCase()||"?"})}),c.jsxs("div",{className:"tile-overlay",children:[c.jsxs("span",{className:"participant-label",children:[t.displayName,n&&" (You)"]}),c.jsxs("div",{className:"tile-status",children:[r&&c.jsx(F1,{className:"status-muted"}),t.isScreenSharing&&c.jsx(B1,{className:"status-screen"}),m&&c.jsx(CA,{className:"status-expand",onClick:v=>{v.stopPropagation(),i&&i()},title:"Full Screen"})]})]})]})},y4=()=>{if(window.electron&&window.electron.desktopCapturer)return window.electron.desktopCapturer;if(window.require)try{return window.require("electron").desktopCapturer}catch{return null}return null},TR=({isOpen:t,onClose:e,onConfirm:n})=>{const[r,i]=w.useState(720),[o,u]=w.useState(30),[h,f]=w.useState("screens"),[m,v]=w.useState({screens:[],windows:[]}),[b,x]=w.useState(null),[C,R]=w.useState(!1),A=!!y4();w.useEffect(()=>{if(t&&A){k();const U=setInterval(k,3e3);return()=>clearInterval(U)}},[t,A]);const k=async()=>{const U=y4();if(U)try{const I=await U.getSources({types:["window","screen"],thumbnailSize:{width:300,height:200}}),M=I.filter(H=>H.id.startsWith("screen:")),z=I.filter(H=>!H.id.startsWith("screen:"));v({screens:M,windows:z}),!b&&M.length>0&&x(M[0].id)}catch(I){console.error("Error loading sources:",I)}};if(!t)return null;const L=()=>{let U,I;r===1080?(U=1920,I=1080):(U=1280,I=720),n({width:U,height:I,frameRate:o,sourceId:b,displaySurface:h==="screens"?"monitor":"window"}),e()};return c.jsx("div",{className:"fixed inset-0 bg-black/80 z-[100] flex items-center justify-center animate-fade-in",children:c.jsxs("div",{className:"bg-dark-elem w-full max-w-2xl rounded-2xl shadow-2xl border border-dark-hover overflow-hidden transform transition-all scale-100 p-6 relative flex flex-col max-h-[90vh]",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6 shrink-0",children:[c.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[c.jsx(lp,{className:"text-brand-primary"}),"Screen Share"]}),c.jsx("button",{onClick:e,className:"p-1 hover:bg-dark-hover rounded-full transition-colors text-dark-muted hover:text-white",children:c.jsx($n,{size:24})})]}),c.jsxs("div",{className:"flex gap-6 overflow-hidden flex-1",children:[c.jsxs("div",{className:"w-64 flex flex-col gap-6 shrink-0 border-r border-dark-hover pr-6",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-xs font-bold text-dark-muted uppercase tracking-wider mb-3",children:"Resolution"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsx("button",{onClick:()=>i(720),className:`p-2 rounded-lg border text-xs font-bold ${r===720?"border-brand-primary bg-brand-primary/10 text-white":"border-dark-hover bg-dark-input text-gray-400"}`,children:"720p"}),c.jsx("button",{onClick:()=>i(1080),className:`p-2 rounded-lg border text-xs font-bold ${r===1080?"border-brand-primary bg-brand-primary/10 text-white":"border-dark-hover bg-dark-input text-gray-400"}`,children:"1080p"})]})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs font-bold text-dark-muted uppercase tracking-wider mb-3",children:"Frame Rate"}),c.jsx("div",{className:"grid grid-cols-3 gap-2",children:[15,30,60].map(U=>c.jsx("button",{onClick:()=>u(U),className:`p-2 rounded-lg border text-xs font-bold ${o===U?"border-brand-primary bg-brand-primary/10 text-white":"border-dark-hover bg-dark-input text-gray-400"}`,children:U},U))})]})]}),c.jsx("div",{className:"flex-1 flex flex-col min-h-0",children:A?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex gap-4 border-b border-dark-hover mb-4 shrink-0",children:[c.jsxs("button",{onClick:()=>f("screens"),className:`pb-2 text-sm font-bold flex items-center gap-2 transition-colors ${h==="screens"?"text-brand-primary border-b-2 border-brand-primary":"text-gray-400 hover:text-white"}`,children:[c.jsx(NL,{size:18})," Screens"]}),c.jsxs("button",{onClick:()=>f("windows"),className:`pb-2 text-sm font-bold flex items-center gap-2 transition-colors ${h==="windows"?"text-brand-primary border-b-2 border-brand-primary":"text-gray-400 hover:text-white"}`,children:[c.jsx(qL,{size:18})," Windows"]})]}),c.jsx("div",{className:"grid grid-cols-2 gap-3 overflow-y-auto pr-2 custom-scrollbar content-start",children:(h==="screens"?m.screens:m.windows).map(U=>c.jsxs("button",{onClick:()=>x(U.id),className:`group relative rounded-lg overflow-hidden border-2 transition-all text-left ${b===U.id?"border-brand-primary ring-2 ring-brand-primary/20":"border-transparent hover:border-gray-600 bg-black/40"}`,children:[c.jsxs("div",{className:"aspect-video bg-black relative",children:[c.jsx("img",{src:U.thumbnail.toDataURL(),alt:U.name,className:"w-full h-full object-contain"}),b===U.id&&c.jsx("div",{className:"absolute inset-0 bg-brand-primary/10 flex items-center justify-center",children:c.jsx(il,{className:"text-brand-primary drop-shadow-lg",size:48})})]}),c.jsx("div",{className:"p-2 bg-dark-input truncate text-xs font-medium text-gray-300 group-hover:text-white",children:U.name})]},U.id))})]}):c.jsx("div",{className:"flex items-center justify-center h-full text-center text-gray-500",children:c.jsxs("div",{className:"max-w-xs",children:[c.jsx(lp,{size:48,className:"mx-auto mb-4 opacity-50"}),c.jsxs("p",{className:"text-sm",children:["Browser limits source selection here.",c.jsx("br",{}),'Click "Go Live" to pick a screen or window.']})]})})})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-dark-hover mt-4 shrink-0",children:[c.jsx(st,{variant:"ghost",onClick:e,className:"text-dark-text hover:text-white",children:"Cancel"}),c.jsx(st,{variant:"primary",onClick:L,className:"px-8 shadow-lg shadow-brand-primary/20",disabled:A&&!b,children:"Go Live"})]})]})})},EB=()=>{const{currentVoiceChannel:t,participants:e,isMuted:n,isDeafened:r,isVideoOn:i,isScreenSharing:o,toggleMute:u,toggleDeafen:h,toggleVideo:f,toggleScreenShare:m,leaveVoiceChannel:v,audioDevices:b,selectedAudioDeviceId:x,changeAudioDevice:C,videoDevices:R,selectedVideoDeviceId:A,changeVideoDevice:k,refreshDevices:L,playSound:U,currentPing:I}=su(),{customSounds:M,addSound:z,removeSound:H}=W1(),{userProfile:E}=yn(),{info:S}=Hr(),j=Ec(E),{channels:D}=ua(),[V,B]=w.useState(!1),[P,ne]=w.useState(!1),[oe,G]=w.useState(!1),[Z,J]=w.useState(!1),[Se,Le]=w.useState(!1),$=w.useRef(null),Q=w.useRef(null),re=w.useRef(null),he=w.useRef(null);w.useEffect(()=>{const fe=Ae=>{$.current&&!$.current.contains(Ae.target)&&G(!1),Q.current&&!Q.current.contains(Ae.target)&&J(!1)};return(oe||Z)&&document.addEventListener("mousedown",fe),()=>{document.removeEventListener("mousedown",fe)}},[oe,Z]),w.useEffect(()=>{const fe=Ae=>{re.current&&!re.current.contains(Ae.target)&&Le(!1)};return Se&&document.addEventListener("mousedown",fe),()=>{document.removeEventListener("mousedown",fe)}},[Se]);const[Te,Ue]=w.useState(!1),te=fe=>!fe&&fe!==0?"unknown":fe<100?"good":fe<250?"fair":"poor",Oe=()=>{if(o)m(null);else{if(!j){S("Screen sharing is a Premium feature!");return}ne(!0)}},Ie=fe=>{ne(!1),m(fe)};if(!t)return null;const Xe=D?.find(fe=>fe.id===t),ke=async fe=>{const Ae=fe.target.files[0];if(!Ae)return;const dt=Ae.name.split(".")[0].slice(0,15);await z(dt,Ae),he.current&&(he.current.value="")};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"voice-channel-bar",children:[c.jsx("div",{className:"voice-bar-header",children:c.jsx("div",{className:"voice-bar-info",children:c.jsxs("div",{className:"voice-bar-status relative",children:[c.jsxs("div",{className:`voice-connection-status ${te(I)}`,onMouseEnter:()=>Ue(!0),onMouseLeave:()=>Ue(!1),children:[c.jsx("div",{className:"signal-bar bar-1"}),c.jsx("div",{className:"signal-bar bar-2"}),c.jsx("div",{className:"signal-bar bar-3"})]}),Te&&c.jsxs("div",{className:"ping-stats-panel",children:[c.jsxs("div",{className:"ping-value",children:[I||"--"," ms"]}),c.jsx("div",{className:"ping-label",children:"Latency"})]}),c.jsx("span",{className:"voice-bar-channel",children:Xe?.name||"Voice Channel"})]})})}),c.jsxs("div",{className:"voice-bar-controls",children:[c.jsxs("div",{className:"control-group",children:[c.jsx("button",{className:`voice-control-btn ${n?"active":""}`,onClick:u,title:n?"Unmute":"Mute",children:n?c.jsx(F1,{}):c.jsx(Sz,{})}),c.jsxs("div",{className:"voice-settings-wrapper",ref:$,children:[c.jsx("button",{className:`voice-control-btn arrow-btn ${oe?"active":""}`,onClick:fe=>{fe.stopPropagation(),oe||L(),G(!oe)},title:"Input Devices",children:c.jsx(n4,{size:10})}),oe&&c.jsxs("div",{className:"voice-device-menu",children:[c.jsx("div",{className:"menu-header",children:"Input Device"}),c.jsx("div",{className:"menu-list",children:b.length>0?b.map(fe=>c.jsxs("div",{className:`menu-item ${x===fe.deviceId?"active":""}`,onClick:()=>{C(fe.deviceId),G(!1)},children:[c.jsx("span",{className:"truncate",children:fe.label||`Microphone ${fe.deviceId.slice(0,5)}`}),x===fe.deviceId&&c.jsx("div",{className:"active-dot"})]},fe.deviceId)):c.jsx("div",{className:"menu-item disabled",children:"No microphone found"})})]})]}),c.jsx("button",{className:`voice-control-btn ${r?"active":""}`,onClick:h,title:r?"Undeafen":"Deafen",children:r?c.jsx(AL,{}):c.jsx(Ez,{})})]}),c.jsxs("div",{className:"control-group",children:[c.jsx("button",{className:`voice-control-btn ${i?"active":""}`,onClick:f,title:i?"Turn Off Camera":"Turn On Camera",children:i?c.jsx(kA,{}):c.jsx(Nz,{})}),c.jsxs("div",{className:"voice-settings-wrapper",ref:Q,children:[c.jsx("button",{className:`voice-control-btn arrow-btn ${Z?"active":""}`,onClick:fe=>{fe.stopPropagation(),Z||L(),J(!Z)},title:"Video Settings",children:c.jsx(n4,{size:10})}),Z&&c.jsxs("div",{className:"voice-device-menu",children:[c.jsx("div",{className:"menu-header",children:"Camera Device"}),c.jsx("div",{className:"menu-list",children:R.length>0?R.map(fe=>c.jsxs("div",{className:`menu-item ${A===fe.deviceId?"active":""}`,onClick:()=>{k(fe.deviceId),J(!1)},children:[c.jsx("span",{className:"truncate",children:fe.label||`Camera ${fe.deviceId.slice(0,5)}`}),A===fe.deviceId&&c.jsx("div",{className:"active-dot"})]},fe.deviceId)):c.jsx("div",{className:"menu-item disabled",children:"No camera found"})})]})]}),c.jsx("button",{className:`voice-control-btn ${o?"active":""}`,onClick:Oe,title:o?"Stop Sharing":"Share Screen",children:c.jsx(B1,{})})]}),c.jsxs("div",{className:"control-group",children:[c.jsxs("div",{className:"voice-settings-wrapper",ref:re,children:[c.jsx("button",{className:`voice-control-btn ${Se?"active":""}`,onClick:fe=>{fe.stopPropagation(),Le(!Se)},title:"Soundboard",children:c.jsx(cp,{})}),Se&&c.jsxs("div",{className:"voice-device-menu soundboard-menu",children:[c.jsxs("div",{className:"menu-header",children:[c.jsx("span",{children:"Soundboard"}),c.jsxs("span",{className:"text-[10px] opacity-50",children:[M.length,"/10"]})]}),c.jsx("div",{className:"menu-list soundboard-list",children:M.length===0?c.jsx("div",{className:"menu-item disabled",children:"No sounds added yet"}):M.map(fe=>c.jsxs("div",{className:"soundboard-item-wrapper group",children:[c.jsxs("div",{className:"menu-item soundboard-item",onClick:()=>{j&&U(fe.id)},children:[c.jsx("span",{className:"truncate flex-1",children:fe.name}),c.jsx("span",{className:"text-xs opacity-50",children:""})]}),c.jsx("button",{className:"sound-delete-btn",onClick:Ae=>{Ae.stopPropagation(),H(fe.id)},children:c.jsx(Qi,{size:14})})]},fe.id))}),M.length<10&&c.jsxs("div",{className:"menu-footer",children:[c.jsxs("button",{className:"add-sound-btn",onClick:()=>he.current?.click(),children:[c.jsx(Zo,{size:14}),c.jsx("span",{children:"Add Sound"})]}),c.jsx("input",{type:"file",ref:he,className:"hidden",accept:"audio/mp3,audio/wav",onChange:ke})]}),!j&&c.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center rounded-lg p-4 text-center z-[60]",children:c.jsx("div",{children:c.jsx("p",{className:"text-orange-400 font-bold mb-1",children:"Premium Only"})})})]})]}),e.length>0&&c.jsx("button",{className:"voice-control-btn",onClick:()=>B(!0),title:"Expand Grid",children:c.jsx(CA,{})})]}),c.jsx("div",{className:"control-group no-bg",children:c.jsx("button",{className:"voice-control-btn disconnect",onClick:v,title:"Disconnect",children:c.jsx(Tz,{})})})]})]}),V&&c.jsx(xB,{onClose:()=>B(!1)}),c.jsx(TR,{isOpen:P,onClose:()=>ne(!1),onConfirm:Ie})]})},b4=({server:t,channels:e,selectedChannel:n,onSelectChannel:r,onOpenSettings:i,onOpenAdmin:o,onLogout:u,userProfile:h,serverId:f,userRole:m,userId:v,dms:b,unreadDms:x,selectedDm:C,onSelectDm:R})=>{const[A,k]=w.useState(!1),[L,U]=w.useState(!1),[I,M]=w.useState(!1),z=()=>{U(!1),u()};return c.jsxs("div",{className:"w-60 bg-dark-sidebar flex flex-col h-full",children:[c.jsxs("div",{className:"h-12 md:h-12 pt-safe-top md:pt-0 px-4 flex items-center justify-between border-b border-dark-hover shadow-md box-content",children:[c.jsx("h2",{className:"font-semibold text-dark-text truncate",children:t?.name||"Lumo"}),c.jsxs("div",{className:"flex items-center gap-1",children:[f&&m==="admin"&&c.jsx("button",{onClick:()=>M(!0),className:"p-1.5 hover:bg-dark-hover rounded transition-colors",title:"Generate Invite",children:c.jsx(YL,{className:"text-green-500",size:20})}),h?.role==="admin"&&c.jsx("button",{onClick:o,className:"p-1.5 hover:bg-dark-hover rounded transition-colors",title:"Admin Panel",children:c.jsx(UN,{className:"text-admin",size:20})})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto py-3",children:f==="home"?c.jsx(fB,{dms:b,unreadDms:x,selectedDmId:C?.id,onSelectDm:R}):c.jsxs("div",{className:"px-2",children:[c.jsx("div",{className:"text-xs font-semibold text-dark-muted uppercase px-2 mb-1",children:"Text Channels"}),e.filter(H=>H.type!=="voice").map(H=>c.jsxs("button",{onClick:()=>r(H),className:Ht("w-full flex items-center gap-2 px-2 py-1.5 rounded","text-dark-muted hover:bg-dark-hover hover:text-dark-text","transition-colors duration-150",n?.id===H.id&&"bg-dark-hover text-dark-text"),children:[c.jsx(sg,{className:"flex-shrink-0"}),c.jsx("span",{className:"truncate text-sm flex-1 text-left",children:H.name}),H.locked&&c.jsx(pL,{className:"flex-shrink-0 text-yellow-500",size:14,title:"Locked channel"})]},H.id)),c.jsx(bB,{})]})}),c.jsx(EB,{}),c.jsx("div",{className:"px-2 pb-2 -ml-[72px] w-[calc(100%+72px)] relative z-10",children:c.jsxs("div",{className:"h-[60px] bg-[#1e1f22] px-3 flex items-center gap-2 rounded-lg shadow-lg border border-[#3f4147]",children:[c.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1 cursor-pointer hover:bg-dark-hover rounded p-1 transition-colors",onClick:()=>k(!0),children:[c.jsxs("div",{className:"relative flex-shrink-0",children:[h?.photoUrl?c.jsx("img",{src:h.photoUrl,alt:h.displayName,className:"w-8 h-8 rounded-full object-cover",onError:H=>{H.target.style.display="none",H.target.nextSibling.style.display="flex"}},h.photoUrl):null,c.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold text-sm",style:{display:h?.photoUrl?"none":"flex"},children:h?.displayName?.[0]?.toUpperCase()||"U"},`fallback-${h?.photoUrl}`),c.jsx("div",{className:"absolute -bottom-0.5 -right-0.5",children:c.jsx(wR,{status:h?.presence||"online",size:"sm"})})]}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsx("div",{className:"text-sm font-medium text-dark-text truncate leading-tight",children:h?.displayName||"User"}),c.jsx("div",{className:"text-[11px] text-dark-muted truncate leading-tight",children:h?.presence==="online"?"Online":h?.presence==="idle"?"Idle":h?.presence==="dnd"?"Do Not Disturb":h?.presence==="offline"?"Invisible":"Online"})]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("button",{onClick:i,className:"p-2 hover:bg-dark-hover rounded transition-colors",title:"User Settings",children:c.jsx(Zp,{className:"text-dark-muted hover:text-dark-text",size:20})}),c.jsx("button",{onClick:()=>U(!0),className:"p-2 hover:bg-dark-hover rounded transition-colors",title:"Logout",children:c.jsx(gL,{className:"text-dark-muted hover:text-red-400",size:20})})]})]})}),c.jsx(Q1,{user:h,isOpen:A,onClose:()=>k(!1)}),c.jsx(Mc,{isOpen:L,onClose:()=>U(!1),onConfirm:z,title:"Logout",message:"Are you sure you want to logout?",confirmText:"Logout",variant:"danger"}),c.jsx(cB,{isOpen:I,onClose:()=>M(!1),serverId:f})]})},SB=(t,e)=>{if(e===0)return"0 KB/s";const n=t/e;return n>1024*1024?`${(n/(1024*1024)).toFixed(1)} MB/s`:`${(n/1024).toFixed(0)} KB/s`},Jd=(t,e)=>new Promise((n,r)=>{const i="5c1c5b7cae2edd508a2f35f98c4eec96",o=new FormData;o.append("image",t);const u=new XMLHttpRequest;u.open("POST",`https://api.imgbb.com/1/upload?key=${i}`);const h=Date.now();u.upload.onprogress=f=>{if(f.lengthComputable){const m=f.loaded/f.total*100,v=(Date.now()-h)/1e3,b=SB(f.loaded,v);e&&e(m,b)}},u.onload=()=>{if(u.status===200)try{const f=JSON.parse(u.responseText);f.success?n(f.data.url):r(new Error(f.error?.message||"Failed to upload image"))}catch{r(new Error("Invalid response from ImgBB"))}else r(new Error(`Upload failed with status ${u.status}`))},u.onerror=()=>r(new Error("Network error during upload")),u.send(o)}),TB=({server:t,onClose:e,onDelete:n,position:r,userRole:i,userId:o})=>{const[u,h]=w.useState(!1),[f,m]=w.useState(t.name),[v,b]=w.useState(!1),[x,C]=w.useState(!1),[R,A]=w.useState(t.icon||null),[k,L]=w.useState(null),[U,I]=w.useState({progress:0,speed:""}),[M,z]=w.useState(!1),[H,E]=w.useState(!1),S=w.useRef(null),{success:j,error:D}=Hr(),V=async()=>{if(!f.trim()){D("Server name is required");return}b(!0);try{await it(Re(ce,"servers",t.id),{name:f.trim()}),j("Server updated!"),h(!1),e()}catch(G){console.error("Error updating server:",G),D("Failed to update server")}finally{b(!1)}},B=async()=>{try{const G=_t(ce,"servers",t.id,"members"),Z=await fi(G),J=[];Z.forEach(Se=>{const Le=Se.data().userId;J.push(it(Re(ce,"users",Le),{servers:Yd(t.id),...Se.data().currentServer===t.id?{currentServer:null}:{}}))}),await Promise.all(J),await ns(Re(ce,"servers",t.id)),j("Server deleted"),z(!1),n(),e()}catch(G){console.error("Error deleting server:",G),D("Failed to delete server"),z(!1)}},P=async()=>{try{await it(Re(ce,"users",o),{servers:Yd(t.id),currentServer:null}),await ns(Re(ce,"servers",t.id,"members",o)),await it(Re(ce,"servers",t.id),{memberCount:Bi(-1)}),j("Left server"),E(!1),e()}catch(G){console.error("Error leaving server:",G),E(!1),e()}},ne=G=>{const Z=G.target.files?.[0];if(Z){if(!Z.type.startsWith("image/")){D("Please select an image file");return}if(Z.size>10*1024*1024){D("Image size must be less than 10MB");return}L(Z),A(URL.createObjectURL(Z))}},oe=async()=>{if(!k){D("Please select an image first");return}b(!0);try{const G=await Jd(k,(Z,J)=>{I({progress:Z,speed:J})});await it(Re(ce,"servers",t.id),{icon:G}),j("Server icon updated!"),C(!1),e()}catch(G){console.error("Error updating icon:",G),D("Failed to update icon")}finally{b(!1),I({progress:0,speed:""})}};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40",onClick:e}),c.jsx("div",{className:"fixed bg-dark-sidebar border border-dark-hover rounded-lg shadow-xl py-2 z-50 w-64",style:{top:r.y,left:r.x},children:u?c.jsxs("div",{className:"px-3 py-2 space-y-2",children:[c.jsx(bn,{value:f,onChange:G=>m(G.target.value),placeholder:"Server name",autoFocus:!0}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(st,{variant:"secondary",onClick:()=>h(!1),className:"flex-1 text-xs py-1",children:"Cancel"}),c.jsx(st,{variant:"primary",onClick:V,disabled:v,className:"flex-1 text-xs py-1",children:v?"Saving...":"Save"})]})]}):x?c.jsxs("div",{className:"px-3 py-2 space-y-3",children:[c.jsx("input",{type:"file",ref:S,onChange:ne,accept:"image/*",className:"hidden"}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("button",{onClick:()=>S.current?.click(),className:"w-16 h-16 rounded-full bg-dark-hover border-2 border-dashed border-dark-muted hover:border-brand-primary flex items-center justify-center transition-colors overflow-hidden",children:R?c.jsx("img",{src:R,alt:"Preview",className:"w-full h-full object-cover"}):c.jsx(B0,{size:24,className:"text-dark-muted"})}),c.jsx("span",{className:"text-xs text-dark-muted mt-2",children:"Click to select image"})]}),v&&U.progress>0&&c.jsxs("div",{className:"text-xs text-center text-dark-muted",children:[Math.round(U.progress),"% (",U.speed,")"]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(st,{variant:"secondary",onClick:()=>{C(!1),L(null),A(t.icon||null)},className:"flex-1 text-xs py-1",children:"Cancel"}),c.jsx(st,{variant:"primary",onClick:oe,disabled:v||!k,className:"flex-1 text-xs py-1",children:v?"Uploading...":"Save"})]})]}):c.jsx(c.Fragment,{children:i==="admin"?c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>h(!0),className:"w-full px-4 py-2 text-left text-sm text-dark-text hover:bg-dark-hover transition-colors flex items-center gap-2",children:[c.jsx(_c,{size:16}),"Edit Server Name"]}),c.jsxs("button",{onClick:()=>C(!0),className:"w-full px-4 py-2 text-left text-sm text-dark-text hover:bg-dark-hover transition-colors flex items-center gap-2",children:[c.jsx(B0,{size:16}),"Change Icon"]}),c.jsxs("button",{onClick:()=>z(!0),className:"w-full px-4 py-2 text-left text-sm text-admin hover:bg-dark-hover transition-colors flex items-center gap-2",children:[c.jsx(Qi,{size:16}),"Delete Server"]})]}):c.jsxs("button",{onClick:()=>E(!0),className:"w-full px-4 py-2 text-left text-sm text-orange-500 hover:bg-dark-hover transition-colors flex items-center gap-2",children:[c.jsx(fL,{size:16}),"Leave Server"]})})}),c.jsx(Mc,{isOpen:M,onClose:()=>z(!1),onConfirm:B,title:"Delete Server",message:`Are you sure you want to delete "${t.name}"? This action cannot be undone!`,confirmText:"Delete",confirmVariant:"danger"}),c.jsx(Mc,{isOpen:H,onClose:()=>E(!1),onConfirm:P,title:"Leave Server",message:`Are you sure you want to leave "${t.name}"?`,confirmText:"Leave",confirmVariant:"warning"})]})},CB=""+new URL("lumo-logo-DYOsjf-q.png",import.meta.url).href,x4=({servers:t,currentServerId:e,onServerChange:n,onCreateServer:r,onJoinServer:i,userRole:o,userId:u,unreadMentions:h={},unreadDms:f={}})=>{const[m,v]=w.useState(!1),[b,x]=w.useState(null),C=Object.values(f).reduce((A,k)=>A+(k.count||0),0),R=(A,k)=>{A.preventDefault(),x({server:k,position:{x:A.clientX,y:A.clientY}})};return c.jsxs("div",{className:"w-20 bg-dark-bg h-full flex flex-col items-center pt-safe-top md:pt-0 box-content",children:[c.jsx("div",{className:"flex flex-col items-center",children:c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>n("home"),className:Ht("w-16 h-16 flex items-center justify-center transition-all duration-200 overflow-hidden",e==="home"||!e?"rounded-xl":"rounded-2xl hover:rounded-xl"),children:c.jsx("img",{src:CB,alt:"Home",className:"w-full h-full object-cover"})}),C>0&&c.jsx("div",{className:"absolute top-0 right-0 min-w-5 h-5 bg-red-500 rounded-full flex items-center justify-center border-2 border-dark-bg pointer-events-none",children:c.jsx("span",{className:"text-white text-xs font-bold px-1",children:C>99?"99+":C})})]})}),c.jsx("div",{className:"w-8 h-0.5 bg-dark-hover my-2"}),c.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1 overflow-y-auto",children:[t.map(A=>c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>n(A.id),onContextMenu:k=>R(k,A),className:Ht("w-12 h-12 rounded-2xl flex items-center justify-center transition-all duration-200","hover:rounded-xl",e===A.id?"bg-brand-primary text-white rounded-xl":"bg-dark-sidebar text-dark-text hover:bg-brand-primary hover:text-white"),title:A.name,children:A.icon?c.jsx("img",{src:A.icon,alt:A.name,className:"w-full h-full rounded-2xl object-cover"}):c.jsx("span",{className:"text-xl font-bold",children:A.name.charAt(0).toUpperCase()})}),h[A.id]?.count>0&&c.jsx("div",{className:"absolute -top-1 -right-1 min-w-5 h-5 bg-red-500 rounded-full flex items-center justify-center border-2 border-dark-bg pointer-events-none",children:c.jsx("span",{className:"text-white text-xs font-bold px-1",children:h[A.id].count>99?"99+":h[A.id].count})})]},A.id)),c.jsx("div",{className:"w-8 h-0.5 bg-dark-hover my-1"}),c.jsxs("div",{className:"relative pb-2",children:[c.jsx("button",{id:"add-server-btn",onClick:A=>{const k=A.currentTarget.getBoundingClientRect();document.documentElement.style.setProperty("--btn-top",`${k.top}px`),v(!m)},className:"w-12 h-12 rounded-2xl bg-dark-sidebar text-green-500 flex items-center justify-center hover:bg-green-500 hover:text-white hover:rounded-xl transition-all duration-200",title:"Add Server",children:c.jsx(Zo,{size:28})}),m&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-50",onClick:()=>v(!1)}),c.jsxs("div",{className:"fixed left-[80px] bg-dark-sidebar border border-dark-hover rounded-lg shadow-lg py-2 z-50 w-48",style:{top:"var(--btn-top)"},children:[o==="admin"&&c.jsx("button",{onClick:()=>{r(),v(!1)},className:"w-full px-4 py-2 text-left text-sm text-dark-text hover:bg-dark-hover transition-colors",children:"Create Server"}),c.jsx("button",{onClick:()=>{i(),v(!1)},className:"w-full px-4 py-2 text-left text-sm text-dark-text hover:bg-dark-hover transition-colors",children:"Join Server"})]})]})]})]}),b&&c.jsx(TB,{server:b.server,position:b.position,userRole:o,userId:u,onClose:()=>x(null),onDelete:()=>{x(null)}})]})},_4=({users:t,currentUserId:e,onStartDm:n})=>{const{currentServer:r}=ua(),[i,o]=w.useState(null),[u,h]=w.useState([]);w.useEffect(()=>{if(!r||r==="home"){h([]);return}const k=Br(_t(ce,"servers",r,"roles"));return Tr(k,U=>{const I=[];U.forEach(M=>{I.push({id:M.id,...M.data()})}),h(I)})},[r]);const f=k=>k.presence==="invisible"?!1:_R(k.lastSeen),m=t.filter(k=>f(k)),v=t.filter(k=>!f(k)),b=m.reduce((k,L)=>{const U=L.serverRole||L.role||"member";return k[U]||(k[U]=[]),k[U].push(L),k},{}),R=[...[{name:"admin",position:-3},{name:"moderator",position:-2},{name:"member",position:-1}],...u.map(k=>({name:k.name,position:k.position??999}))].sort((k,L)=>k.position-L.position).map(k=>k.name).filter(k=>b[k]?.length>0),A=k=>{const L=f(k);return c.jsxs("div",{onClick:()=>o(k),className:Ht("flex items-center gap-2 px-2 py-1.5 rounded cursor-pointer","hover:bg-dark-hover transition-colors",k.id===e&&"bg-dark-hover/50",!L&&"opacity-50"),children:[c.jsxs("div",{className:"relative flex-shrink-0",children:[k.photoUrl?c.jsx("img",{src:k.photoUrl,alt:k.displayName,className:"w-8 h-8 rounded-full object-cover",onError:U=>{U.target.style.display="none",U.target.nextSibling.style.display="flex"}}):null,c.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold text-sm",style:{display:k.photoUrl?"none":"flex"},children:k.displayName?.[0]?.toUpperCase()||"U"}),c.jsx("div",{className:"absolute bottom-0 right-0",children:c.jsx(wR,{status:L?k.presence||"online":"offline",size:"sm"})})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-sm text-dark-text truncate",children:k.displayName||"Unknown"}),k.badges&&k.badges.length>0&&c.jsx("div",{className:"flex items-center gap-0.5",children:k.badges.slice(0,3).map(U=>{const I=Az(U);if(!I)return null;const M=I.icon;return c.jsx(M,{size:14,style:{color:I.color},title:I.label,className:"flex-shrink-0"},U)})})]}),k.status&&c.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[c.jsx("span",{className:"text-xs",children:k.status.emoji}),c.jsx("span",{className:"text-xs text-dark-muted truncate",children:k.status.text})]})]})]},k.id)};return c.jsxs("div",{className:"w-60 bg-dark-sidebar h-full overflow-y-auto py-3",children:[c.jsxs("div",{className:"px-2",children:[R.map(k=>{const L=b[k]||[];return L.length===0?null:c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"text-xs font-semibold text-dark-muted uppercase px-2 mb-2",children:[k.charAt(0).toUpperCase()+k.slice(1),"s  ",L.length]}),L.map(A)]},k)}),v.length>0&&c.jsxs("div",{className:"mt-4",children:[c.jsxs("div",{className:"text-xs font-semibold text-gray-500 uppercase px-2 mb-2",children:["Offline  ",v.length]}),v.map(A)]})]}),c.jsx(Q1,{user:i,isOpen:!!i,onClose:()=>o(null),onMessage:k=>{n&&n(k),o(null)}})]})},kB=({isOpen:t,onClose:e,onConfirm:n,url:r})=>{const[i,o]=w.useState(!1),u=()=>{i&&localStorage.setItem("dontAskExternalLinks","true"),n(),e()};return c.jsx(Ps,{isOpen:t,onClose:e,title:"External Link Warning",size:"sm",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:c.jsxs("p",{className:"text-dark-text text-sm",children:[c.jsx("span",{className:"font-semibold text-yellow-500",children:" Security Warning"}),c.jsx("br",{}),c.jsx("br",{}),"You are about to open an external link. External links may lead to harmful or malicious websites. Please ensure you trust the source before proceeding."]})}),c.jsxs("div",{className:"bg-dark-bg p-3 rounded-lg",children:[c.jsx("p",{className:"text-xs text-dark-muted mb-1",children:"Link:"}),c.jsx("p",{className:"text-dark-text text-sm break-all font-mono",children:r})]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:i,onChange:h=>o(h.target.checked),className:`w-4 h-4 rounded border-dark-hover bg-dark-input text-brand-primary 
                       focus:ring-2 focus:ring-brand-primary cursor-pointer`}),c.jsx("span",{className:"text-sm text-dark-text",children:"Don't ask me again"})]}),c.jsxs("div",{className:"flex gap-3 justify-end pt-2",children:[c.jsx(st,{variant:"secondary",onClick:e,children:"Cancel"}),c.jsx(st,{variant:"primary",onClick:u,children:"Open Link"})]})]})})},NB=t=>{if(!t)return t;let e=t;return e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=e.replace(/```([^`]+)```/g,'<pre class="bg-dark-input text-dark-text p-2 rounded my-1 overflow-x-auto"><code>$1</code></pre>'),e=e.replace(/`([^`]+)`/g,'<code class="bg-dark-input text-dark-text px-1 py-0.5 rounded text-sm">$1</code>'),e=e.replace(/\*\*([^*]+)\*\*/g,'<strong class="font-bold">$1</strong>'),e=e.replace(/\*([^*]+)\*/g,'<em class="italic">$1</em>'),e=e.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer" class="text-brand-primary hover:underline">$1</a>'),e=e.replace(/@(everyone|[a-zA-Z0-9_]+)\b/g,'<span class="text-brand-primary font-medium cursor-pointer hover:underline" data-mention="$1">$1</span>'),e=e.replace(/\n/g,"<br>"),e},CR=({children:t,onMentionClick:e})=>{const n=NB(t),r=i=>{const o=i.target.getAttribute("data-mention");o&&e&&e(o)};return c.jsx("div",{dangerouslySetInnerHTML:{__html:n},className:"markdown-content",onClick:r})},AB=["","","","","","","","","",""],w4=({onSelect:t,onClose:e})=>c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40",onClick:e}),c.jsx("div",{className:"absolute left-0 bottom-full mb-2 bg-dark-sidebar border border-dark-hover rounded-lg shadow-lg p-2 z-50",children:c.jsx("div",{className:"flex gap-1",children:AB.map(n=>c.jsx("button",{onClick:()=>t(n),className:"w-8 h-8 flex items-center justify-center text-lg hover:bg-dark-hover rounded transition-colors",title:n,children:n},n))})})]}),RB=({message:t,currentUserId:e,serverId:n,channelId:r,users:i})=>{const[o,u]=w.useState(!1),h=t.poll;if(!h)return null;const f=t.userId===e,m=h.ended===!0,v=h.options.reduce((A,k,L)=>A+(h.votes?.[`option_${L}`]?.length||0),0),b=h.options.map((A,k)=>h.votes?.[`option_${k}`]?.includes(e)?k:-1).filter(A=>A!==-1);b.length>0;const x=async A=>{if(!(o||m)){u(!0);try{const k=`poll.votes.option_${A}`,L=Re(ce,"servers",n,"channels",r,"messages",t.id);if(h.votes?.[`option_${A}`]?.includes(e))await it(L,{[k]:Yd(e)});else{if(!h.multipleChoice&&b.length>0)for(const I of b)await it(L,{[`poll.votes.option_${I}`]:Yd(e)});await it(L,{[k]:bh(e)})}}catch(k){console.error("Error voting:",k)}finally{u(!1)}}},C=async()=>{if(!(!f||m))try{const A=Re(ce,"servers",n,"channels",r,"messages",t.id);await it(A,{"poll.ended":!0})}catch(A){console.error("Error ending poll:",A)}},R=A=>h.anonymous?null:(h.votes?.[`option_${A}`]||[]).map(L=>i?.find(U=>U.id===L)?.displayName||"Unknown").join(", ");return c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4 mt-2 border border-dark-hover max-w-md",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx(j1,{className:"text-brand-primary",size:20}),c.jsx("span",{className:"text-xs text-dark-muted uppercase tracking-wide font-semibold",children:"Poll"}),h.multipleChoice&&c.jsx("span",{className:"text-xs text-dark-muted bg-dark-hover px-2 py-0.5 rounded",children:"Multiple Choice"}),m&&c.jsx("span",{className:"text-xs text-red-400 bg-red-400/10 px-2 py-0.5 rounded",children:"Ended"})]}),c.jsx("h3",{className:"text-dark-text font-semibold mb-4",children:h.question}),c.jsx("div",{className:"space-y-2",children:h.options.map((A,k)=>{const L=h.votes?.[`option_${k}`]?.length||0,U=v>0?Math.round(L/v*100):0,I=b.includes(k),M=R(k);return c.jsxs("button",{onClick:()=>x(k),disabled:o||m,className:`w-full text-left p-3 rounded-lg relative overflow-hidden transition-all group ${I?"bg-brand-primary/20 border-2 border-brand-primary":"bg-dark-sidebar border border-dark-hover hover:border-dark-muted"} ${m?"cursor-not-allowed opacity-80":""}`,children:[v>0&&c.jsx("div",{className:`absolute inset-0 transition-all duration-500 ${I?"bg-brand-primary/30":"bg-dark-hover/50"}`,style:{width:`${U}%`}}),c.jsxs("div",{className:"relative flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[I&&c.jsx("div",{className:"w-5 h-5 bg-brand-primary rounded-full flex items-center justify-center",children:c.jsx(il,{className:"text-white",size:14})}),c.jsx("span",{className:`text-sm ${I?"text-dark-text font-medium":"text-dark-muted"}`,children:A})]}),v>0&&c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("span",{className:"text-xs text-dark-muted",children:[L," vote",L!==1?"s":""]}),c.jsxs("span",{className:"text-sm font-semibold text-dark-text",children:[U,"%"]})]})]}),M&&L>0&&c.jsx("div",{className:"text-xs text-dark-muted mt-1 truncate opacity-0 group-hover:opacity-100 transition-opacity",children:M})]},k)})}),c.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-dark-hover",children:[c.jsxs("div",{className:"flex items-center gap-1 text-xs text-dark-muted",children:[c.jsx(I1,{size:14}),c.jsxs("span",{children:[v," total vote",v!==1?"s":""]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[h.anonymous&&c.jsx("span",{className:"text-xs text-dark-muted",children:"Anonymous"}),f&&!m&&c.jsxs("button",{onClick:C,className:"flex items-center gap-1.5 text-xs font-medium text-red-400 bg-red-400/10 hover:bg-red-400/20 px-3 py-1.5 rounded transition-all border border-red-400/20 hover:border-red-400/30",children:[c.jsx(xL,{size:14}),"End Poll"]})]})]})]})},J1=({isOpen:t,onClose:e,mediaUrl:n,mediaType:r="image"})=>{if(!n)return null;const i=()=>{const u=document.createElement("a");u.href=n,u.download=n.split("/").pop()||"download",document.body.appendChild(u),u.click(),document.body.removeChild(u)},o=()=>{window.electron&&window.electron.shell?window.electron.shell.openExternal(n):window.open(n,"_blank","noopener,noreferrer")};return c.jsx(Ps,{isOpen:t,onClose:e,title:"",size:"full",showCloseButton:!1,children:c.jsxs("div",{className:"fixed inset-0 bg-black/95 flex flex-col z-50",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 bg-black/50 backdrop-blur-sm",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:i,className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-white",title:"Download",children:c.jsx($N,{size:24})}),c.jsx("button",{onClick:o,className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-white",title:"Open in new window",children:c.jsx(Jp,{size:24})})]}),c.jsx("button",{onClick:e,className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-white",title:"Close (Esc)",children:c.jsx($n,{size:24})})]}),c.jsx("div",{className:"flex-1 flex items-center justify-center p-4 overflow-auto",onClick:e,children:r==="image"?c.jsx("img",{src:n,alt:"Full size",className:"max-w-full max-h-full object-contain cursor-zoom-out",onClick:u=>u.stopPropagation()}):r==="video"?c.jsx("video",{src:n,controls:!0,autoPlay:!0,className:"max-w-full max-h-full",onClick:u=>u.stopPropagation()}):null})]})})},kR=/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:watch\?v=|embed\/|shorts\/)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,NR=/(?:https?:\/\/)?(?:open\.)?spotify\.com\/(track|album|playlist|artist|episode|show)\/([a-zA-Z0-9]+)/,AR=/(?:https?:\/\/)?(?:www\.)?(?:twitter\.com|x\.com)\/(\w+)\/status\/(\d+)/,IB=/\.(jpg|jpeg|png|gif|webp|bmp|svg)(\?.*)?$/i,jB=/\.(mp4|webm|ogg|mov)(\?.*)?$/i,DB=/\.(mp3|wav|ogg|m4a)(\?.*)?$/i,PB=t=>{const e=t.match(kR);return e?e[1]:null},MB=t=>{const e=t.match(NR);return e?{type:e[1],id:e[2]}:null},OB=t=>{const e=t.match(AR);return e?{user:e[1],id:e[2]}:null},RR=t=>kR.test(t)?"youtube":NR.test(t)?"spotify":AR.test(t)?"twitter":IB.test(t)?"image":jB.test(t)?"video":DB.test(t)?"audio":t.includes("/raw/upload/")||/\.(zip|rar|7z|exe|pdf|docx|xlsx|txt|iso|yml|json|xml|csv)$/i.test(t)?"file":"generic",IR=t=>{const e=/(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/g;return t.match(e)||[]},LB=({url:t})=>{const e=PB(t),[n,r]=w.useState(!1);if(!e)return null;const i=`https://img.youtube.com/vi/${e}/mqdefault.jpg`;return c.jsxs("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar",children:[c.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border-b border-dark-hover",children:[c.jsx(_z,{className:"text-red-500",size:18}),c.jsx("span",{className:"text-xs text-dark-muted font-medium",children:"YouTube"})]}),n?c.jsx("div",{className:"relative pt-[56.25%]",children:c.jsx("iframe",{className:"absolute inset-0 w-full h-full",src:`https://www.youtube.com/embed/${e}?autoplay=1&origin=${window.location.origin}`,title:"YouTube video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):c.jsxs("div",{className:"relative cursor-pointer group",onClick:()=>r(!0),children:[c.jsx("img",{src:i,alt:"YouTube thumbnail",className:"w-full h-auto",onError:o=>{o.target.src=`https://img.youtube.com/vi/${e}/default.jpg`}}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 group-hover:bg-black/50 transition-colors",children:c.jsx(BN,{className:"text-white/90 group-hover:text-white group-hover:scale-110 transition-all",size:64})})]}),c.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[c.jsx("span",{className:"text-xs text-dark-muted truncate",children:t}),c.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-dark-muted hover:text-brand-primary transition-colors",onClick:o=>o.stopPropagation(),children:c.jsx(Jp,{size:16})})]})]})},VB=({url:t})=>{const e=MB(t);if(!e)return null;const r={track:152,album:352,playlist:352,artist:352,episode:232,show:232}[e.type]||152;return c.jsxs("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar",children:[c.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border-b border-dark-hover",children:[c.jsx(xz,{className:"text-green-500",size:18}),c.jsxs("span",{className:"text-xs text-dark-muted font-medium",children:["Spotify ",e.type]})]}),c.jsx("iframe",{src:`https://open.spotify.com/embed/${e.type}/${e.id}?utm_source=generator&theme=0`,width:"100%",height:r,frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",className:"bg-transparent"}),c.jsxs("div",{className:"px-3 py-2 flex items-center justify-between border-t border-dark-hover",children:[c.jsx("span",{className:"text-xs text-dark-muted truncate",children:t}),c.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-dark-muted hover:text-green-500 transition-colors",children:c.jsx(Jp,{size:16})})]})]})},UB=({url:t})=>{const[e,n]=w.useState(!1);return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar",children:c.jsx("div",{className:"block cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>n(!0),children:c.jsx("img",{src:t,alt:"Attachment",className:"w-full h-auto max-h-[400px] object-contain bg-black/50",loading:"lazy",onError:r=>{r.target.style.display="none"}})})}),c.jsx(J1,{isOpen:e,onClose:()=>n(!1),mediaUrl:t,mediaType:"image"})]})},zB=({url:t})=>{const e=w.useRef(null),[n,r]=w.useState(!1),[i,o]=w.useState(!1);w.useEffect(()=>{if(window.twttr)u();else{const h=document.createElement("script");h.src="https://platform.twitter.com/widgets.js",h.async=!0,h.onload=()=>{window.twttr&&e.current&&u()},h.onerror=()=>o(!0),document.body.appendChild(h)}},[t]);const u=()=>{window.twttr&&e.current&&(e.current.innerHTML="",window.twttr.widgets.createTweet(OB(t)?.id,e.current,{theme:"dark",conversation:"none"}).then(h=>{r(!!h),h||o(!0)}).catch(()=>o(!0)))};return i?c.jsx("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar p-3",children:c.jsxs("div",{className:"flex items-center gap-2 text-dark-muted",children:[c.jsx(t4,{className:"text-sky-400",size:18}),c.jsx("span",{className:"text-sm",children:"Tweet could not be loaded"}),c.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"ml-auto text-brand-primary hover:underline text-sm",children:"View on X"})]})}):c.jsxs("div",{className:"mt-2 max-w-md",children:[!n&&c.jsx("div",{className:"rounded-lg border border-dark-hover bg-dark-sidebar p-4 animate-pulse",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(t4,{className:"text-sky-400",size:18}),c.jsx("span",{className:"text-sm text-dark-muted",children:"Loading tweet..."})]})}),c.jsx("div",{ref:e,className:n?"":"hidden"})]})},BB=({url:t})=>{const[e,n]=w.useState(!1);return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"mt-2 max-w-md rounded-lg overflow-hidden border border-dark-hover bg-dark-sidebar",children:c.jsxs("div",{className:"cursor-pointer",onClick:()=>n(!0),children:[c.jsx("video",{src:t,className:"w-full max-h-[400px] bg-black pointer-events-none"}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 hover:bg-black/50 transition-colors",children:c.jsx(BN,{className:"text-white/90 hover:text-white",size:64})})]})}),c.jsx(J1,{isOpen:e,onClose:()=>n(!1),mediaUrl:t,mediaType:"video"})]})},FB=({url:t})=>c.jsxs("div",{className:"mt-2 max-w-md rounded-lg border border-dark-hover bg-dark-sidebar p-3 flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-primary/20 flex items-center justify-center flex-shrink-0",children:c.jsx(ML,{className:"text-brand-primary",size:24})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-xs text-dark-muted mb-1 truncate",children:t.split("/").pop()}),c.jsx("audio",{src:t,controls:!0,className:"w-full h-8"})]})]}),HB=({url:t})=>{const e=t.split("/").pop().split("?")[0]||"file",n=e.split(".").pop();return c.jsxs("div",{className:"mt-2 max-w-md rounded-lg border border-dark-hover bg-dark-sidebar p-3 flex items-center gap-3 hover:bg-dark-hover transition-colors",children:[c.jsx("div",{className:"w-12 h-12 rounded bg-dark-input flex items-center justify-center flex-shrink-0",children:c.jsx("span",{className:"text-xs font-bold text-dark-text uppercase",children:n.length<5?n:"FILE"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium text-dark-text truncate",children:e}),c.jsx("div",{className:"text-xs text-dark-muted",children:"Attachment"})]}),c.jsx("a",{href:t,download:!0,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-full hover:bg-white/10 text-dark-muted hover:text-white transition-colors",title:"Download",children:c.jsx($N,{size:20})})]})},$B=({url:t})=>{let e="";try{e=new URL(t).hostname.replace("www.","")}catch{e=t}return c.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"mt-2 flex items-center gap-3 max-w-md rounded-lg border border-dark-hover bg-dark-sidebar p-3 hover:bg-dark-hover transition-colors group",children:[c.jsx("div",{className:"w-10 h-10 rounded-lg bg-brand-primary/20 flex items-center justify-center",children:c.jsx(Jp,{className:"text-brand-primary",size:20})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium text-dark-text truncate group-hover:text-brand-primary transition-colors",children:e}),c.jsx("div",{className:"text-xs text-dark-muted truncate",children:t})]})]})},qB=({url:t})=>{switch(RR(t)){case"youtube":return c.jsx(LB,{url:t});case"spotify":return c.jsx(VB,{url:t});case"twitter":return c.jsx(zB,{url:t});case"image":return c.jsx(UB,{url:t});case"video":return c.jsx(BB,{url:t});case"audio":return c.jsx(FB,{url:t});case"file":return c.jsx(HB,{url:t});default:return c.jsx($B,{url:t})}},GB=({text:t})=>{const n=IR(t).slice(0,3);return n.length===0?null:c.jsx("div",{className:"space-y-2",children:n.map((r,i)=>c.jsx(qB,{url:r},`${r}-${i}`))})},jR=({serverId:t,channelId:e,users:n,currentUserId:r,userRole:i,onReply:o,onMessagesChange:u})=>{const[h,f]=w.useState([]),[m,v]=w.useState(null),[b,x]=w.useState(null),[C,R]=w.useState(null),[A,k]=w.useState(null),[L,U]=w.useState(""),[I,M]=w.useState(null),[z,H]=w.useState("bottom"),[E,S]=w.useState(null),[j,D]=w.useState(!0),[V,B]=w.useState(!1),[P,ne]=w.useState(null),[oe,G]=w.useState(null),Z=w.useRef(null),J=w.useRef(null),Se=w.useRef(0),Le=w.useRef(!0),$=w.useRef(n);w.useEffect(()=>{$.current=n},[n]);const{success:Q,error:re}=Hr(),he=()=>{Z.current?.scrollIntoView({behavior:"smooth"})};w.useEffect(()=>{if(!e||!e)return;const Ve=Br(t?_t(ce,"servers",t,"channels",e,"messages"):_t(ce,"dms",e,"messages"),np("timestamp","desc"),O0(20)),De=Tr(Ve,K=>{const ue=[];if(K.forEach(je=>{ue.push({id:je.id,...je.data()})}),ue.reverse(),!Le.current&&ue.length>Se.current&&r){const je=$.current?.find(me=>me.id===r);if(je?.displayName){const me=ue.slice(Se.current),Ne=me.some(X=>X.userId!==r&&nL(X.text,je.displayName)),xe=me.some(X=>{const He=X.userId!==r&&X.replyTo?.userId===r;return He&&console.log("Reply notification:",X),He});(Ne||xe)&&(console.log("Playing notification sound",{hasMention:Ne,hasReply:xe}),L0())}}Se.current=ue.length,f(ue),Le.current&&(Le.current=!1),ue.length>0&&ne(ue[0]),D(ue.length===20),u&&u(ue),setTimeout(he,100)});return()=>{De(),Le.current=!0}},[e,t,r,u]);const Te=async()=>{if(!e||!P||V||!j)return;B(!0);const ye=J.current,Ve=ye?.scrollHeight||0;try{const De=Br(t?_t(ce,"servers",t,"channels",e,"messages"):_t(ce,"dms",e,"messages"),np("timestamp","desc"),o7(P.timestamp),O0(20)),K=await fi(De),ue=[];K.forEach(je=>{ue.push({id:je.id,...je.data()})}),ue.length>0?(ue.reverse(),f(je=>[...ue,...je]),ne(ue[0]),D(ue.length===20),setTimeout(()=>{ye&&(ye.scrollTop=ye.scrollHeight-Ve)},0)):D(!1)}catch(De){console.error("Error loading more messages:",De),re("Failed to load more messages")}finally{B(!1)}},Ue=ye=>n.find(Ve=>Ve.id===ye)||{displayName:"Unknown",role:"member"},te=ye=>r===ye||i==="admin",Oe=ye=>{if(ye.userId!==r)return!1;if(!ye.timestamp)return!0;const Ve=ye.timestamp.toDate();return(new Date-Ve)/1e3/60<15},Ie=async()=>{if(m)try{const ye=n.find(De=>De.id===m.userId),Ve=t?Re(ce,"servers",t,"channels",e,"messages",m.id):Re(ce,"dms",e,"messages",m.id);await ns(Ve),await Kn(_t(ce,"adminLogs"),{type:"message_delete",channelId:e,messageId:m.id,userId:r,deletedText:m.text||"(empty)",originalUserId:m.userId,originalUserName:ye?.displayName||"Unknown User",timestamp:ft()}),Q("Message deleted successfully")}catch(ye){console.error("Error deleting message:",ye),re("Failed to delete message")}finally{v(null)}},Xe=ye=>{k(ye.id),U(ye.text)},ke=()=>{k(null),U("")},fe=async()=>{if(!A)return;if(!L.trim()){re("Message cannot be empty");return}const ye=A,Ve=L.trim(),K=h.find(ue=>ue.id===ye)?.text||"";k(null),U("");try{const ue=t?Re(ce,"servers",t,"channels",e,"messages",ye):Re(ce,"dms",e,"messages",ye);await it(ue,{text:Ve,edited:!0,editedAt:ft()}),await Kn(_t(ce,"adminLogs"),{type:"message_edit",channelId:e,messageId:ye,userId:r,originalText:K,newText:Ve,timestamp:ft()}),Q("Message updated successfully")}catch(ue){console.error("Error editing message:",ue),ue.code==="resource-exhausted"?re("Quota exceeded. Please try again tomorrow."):re("Failed to edit message")}},Ae=async(ye,Ve)=>{try{const De=h.find(me=>me.id===ye);if(!De)return;const K={...De.reactions},ue=K[Ve]||[];if(ue.includes(r)){const me=ue.filter(Ne=>Ne!==r);me.length===0?delete K[Ve]:K[Ve]=me}else K[Ve]=[...ue,r];const je=t?Re(ce,"servers",t,"channels",e,"messages",ye):Re(ce,"dms",e,"messages",ye);await it(je,{reactions:K})}catch(De){console.error("Error toggling reaction:",De),re("Failed to update reaction")}},dt=async ye=>{if(i!=="admin"&&i!=="moderator"){re("Only admins and moderators can pin messages");return}try{const Ve=!ye.pinned,De=t?Re(ce,"servers",t,"channels",e,"messages",ye.id):Re(ce,"dms",e,"messages",ye.id);await it(De,{pinned:Ve,pinnedBy:Ve?r:null,pinnedAt:Ve?ft():null}),await Kn(_t(ce,"adminLogs"),{type:Ve?"message_pin":"message_unpin",channelId:e,messageId:ye.id,userId:r,messageText:ye.text,timestamp:ft()}),Q(Ve?"Message pinned":"Message unpinned")}catch(Ve){console.error("Error toggling pin:",Ve),re("Failed to pin message")}};return c.jsxs("div",{ref:J,className:"flex-1 overflow-y-auto px-4 py-4 space-y-4",children:[j&&h.length>0&&c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx("button",{onClick:Te,disabled:V,className:"px-4 py-2 bg-brand-primary hover:bg-brand-primary/80 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:V?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Loading..."]}):"Load More Messages"})}),h.length===0?c.jsx("div",{className:"text-center text-dark-muted py-8",children:"No messages yet. Start the conversation!"}):h.map(ye=>{const Ve=Ue(ye.userId);return c.jsxs("div",{id:`message-${ye.id}`,className:"flex gap-3 hover:bg-dark-hover/30 px-2 py-1 rounded group transition-colors",children:[c.jsxs("div",{className:"relative flex-shrink-0",children:[Ve.photoUrl?c.jsx("img",{src:Ve.photoUrl,alt:Ve.displayName,onClick:()=>R(Ve),className:"w-10 h-10 rounded-full object-cover cursor-pointer hover:opacity-80 transition-opacity",onError:De=>{De.target.style.display="none",De.target.nextSibling.style.display="flex"}}):null,c.jsx("div",{onClick:()=>R(Ve),className:"w-10 h-10 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold cursor-pointer hover:opacity-80 transition-opacity",style:{display:Ve.photoUrl?"none":"flex"},children:Ve.displayName?.[0]?.toUpperCase()||"U"})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("span",{className:"font-semibold text-dark-text hover:underline cursor-pointer",onClick:()=>R(Ve),children:Ve.displayName||"Unknown"}),c.jsx("span",{className:Ht("text-xs px-1.5 py-0.5 rounded border",FV(Ve.role)),children:Ve.role?.charAt(0).toUpperCase()+Ve.role?.slice(1)}),c.jsx("span",{className:"text-xs text-dark-muted",children:eg(ye.timestamp)}),ye.edited&&c.jsx("span",{className:"text-xs text-dark-muted italic",children:"(edited)"}),A!==ye.id&&c.jsxs("div",{className:"ml-auto relative z-50",children:[c.jsx("button",{onClick:De=>{const K=De.clientY,ue=window.innerHeight,je=K<ue/2;H(je?"bottom":"top"),M(I===ye.id?null:ye.id)},className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-dark-hover rounded transition-all",title:"More options",children:c.jsx(BL,{size:18,className:"text-dark-muted"})}),I===ye.id&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>M(null)}),c.jsxs("div",{className:`absolute right-0 ${z==="top"?"bottom-full mb-1":"top-full mt-1"} bg-dark-sidebar border border-dark-hover rounded-lg shadow-lg py-1 z-50 min-w-[120px]`,children:[c.jsxs("button",{onClick:()=>{o&&o(ye),M(null)},className:"w-full px-3 py-2 text-left text-sm text-dark-text hover:bg-dark-hover flex items-center gap-2",children:[c.jsx(CL,{size:16,className:"text-green-400"}),"Reply"]}),Oe(ye)&&c.jsxs("button",{onClick:()=>{Xe(ye),M(null)},className:"w-full px-3 py-2 text-left text-sm text-dark-text hover:bg-dark-hover flex items-center gap-2",children:[c.jsx(_c,{size:16,className:"text-blue-400"}),"Edit"]}),(i==="admin"||i==="moderator")&&c.jsxs("button",{onClick:()=>{dt(ye),M(null)},className:"w-full px-3 py-2 text-left text-sm text-dark-text hover:bg-dark-hover flex items-center gap-2",children:[c.jsx(xc,{size:16,className:"text-blue-400"}),ye.pinned?"Unpin":"Pin"]}),te(ye.userId)&&c.jsxs("button",{onClick:()=>{v({id:ye.id,text:ye.text,userId:ye.userId}),M(null)},className:"w-full px-3 py-2 text-left text-sm text-admin hover:bg-dark-hover flex items-center gap-2",children:[c.jsx(Qi,{size:16}),"Delete"]})]})]})]})]}),A===ye.id?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"text",value:L,onChange:De=>U(De.target.value),onKeyDown:De=>{De.key==="Enter"&&fe(),De.key==="Escape"&&ke()},className:`flex-1 bg-dark-input text-dark-text px-3 py-1.5 rounded
                                 border border-brand-primary outline-none`,autoFocus:!0}),c.jsx("button",{onClick:fe,className:"text-green-500 hover:text-green-400 transition-colors",title:"Save (Enter)",children:c.jsx(il,{size:20})}),c.jsx("button",{onClick:ke,className:"text-admin hover:text-admin/80 transition-colors",title:"Cancel (Esc)",children:c.jsx($n,{size:20})})]}):c.jsxs(c.Fragment,{children:[ye.replyTo&&c.jsxs("div",{className:"mb-2 ml-2 pl-3 border-l-2 border-green-400 text-sm bg-dark-sidebar/30 rounded py-1",children:[c.jsxs("div",{className:"text-xs text-green-400 font-semibold",children:["Replying to ",Ue(ye.replyTo.userId).displayName]}),c.jsx("div",{className:"text-dark-muted italic truncate",children:ye.replyTo.text})]}),ye.pinned&&c.jsxs("div",{className:"flex items-center gap-1 text-xs text-blue-400 mb-1",children:[c.jsx(xc,{size:14}),c.jsx("span",{children:"Pinned"})]}),ye.type!=="sticker"&&(()=>{const De=IR(ye.text);let K=ye.text;return De.filter(je=>{const me=RR(je);return["youtube","spotify","twitter","image","video","audio","file"].includes(me)}).forEach(je=>{K=K.replace(je,"")}),K=K.trim(),K.length>0&&c.jsx("div",{className:"text-dark-text whitespace-pre-wrap break-words select-text",children:c.jsx(CR,{onMentionClick:je=>{const me=n.find(Ne=>Ne.displayName?.toLowerCase()===je.toLowerCase());me&&R(me)},children:K})})})(),ye.type==="sticker"&&c.jsx("div",{className:"mt-1 mb-1",children:c.jsx("img",{src:ye.text,alt:"Sticker",className:"w-40 h-40 object-contain drop-shadow-md hover:scale-110 transition-transform origin-bottom-left select-none cursor-pointer",onClick:()=>G({url:ye.text,type:"image"})})}),ye.type!=="sticker"&&c.jsx(GB,{text:ye.text}),ye.type==="poll"&&c.jsx(RB,{message:ye,currentUserId:r,serverId:t,channelId:e,users:n}),ye.reactions&&Object.keys(ye.reactions).length>0&&c.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[Object.entries(ye.reactions).map(([De,K])=>c.jsxs("button",{onClick:()=>Ae(ye.id,De),className:Ht("px-2 py-1 rounded-full text-sm flex items-center gap-1 transition-colors",K.includes(r)?"bg-brand-primary/20 border border-brand-primary text-brand-primary":"bg-dark-hover border border-dark-hover text-dark-text hover:border-dark-muted"),title:`${K.map(ue=>Ue(ue).displayName).join(", ")}`,children:[c.jsx("span",{children:De}),c.jsx("span",{className:"text-xs",children:K.length})]},De)),c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>S(E===ye.id?null:ye.id),className:"px-2 py-1 rounded-full text-sm bg-dark-hover border border-dark-hover hover:border-dark-muted transition-colors",title:"Add reaction",children:c.jsx(qS,{size:16,className:"text-dark-muted"})}),E===ye.id&&c.jsx(w4,{onSelect:De=>{Ae(ye.id,De),S(null)},onClose:()=>S(null)})]})]}),(!ye.reactions||Object.keys(ye.reactions).length===0)&&c.jsxs("div",{className:"relative mt-2",children:[c.jsxs("button",{onClick:()=>S(E===ye.id?null:ye.id),className:"opacity-0 group-hover:opacity-100 px-2 py-1 rounded text-xs bg-dark-hover hover:bg-dark-input transition-all flex items-center gap-1",title:"Add reaction",children:[c.jsx(qS,{size:14}),c.jsx("span",{className:"text-dark-muted",children:"Add reaction"})]}),E===ye.id&&c.jsx(w4,{onSelect:De=>{Ae(ye.id,De),S(null)},onClose:()=>S(null)})]})]})]})]},ye.id)}),c.jsx("div",{ref:Z}),c.jsx(Mc,{isOpen:!!m,onClose:()=>v(null),onConfirm:Ie,title:"Delete Message",message:"Are you sure you want to delete this message? This action cannot be undone.",confirmText:"Delete",variant:"danger"}),c.jsx(kB,{isOpen:!!b,onClose:()=>x(null),onConfirm:()=>window.open(b?.url,"_blank","noopener,noreferrer"),url:b?.url}),c.jsx(Q1,{user:C,isOpen:!!C,onClose:()=>R(null)}),c.jsx(J1,{isOpen:!!oe,onClose:()=>G(null),mediaUrl:oe?.url,mediaType:oe?.type})]})},E4={smileys:{name:"Smileys & People",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},animals:{name:"Animals & Nature",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},food:{name:"Food & Drink",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},activities:{name:"Activities",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},travel:{name:"Travel & Places",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},objects:{name:"Objects",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},symbols:{name:"Symbols",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","0","1","2","3","4","5","6","7","8","9","","","#","*","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},flags:{name:"Flags",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]}},YB=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],KB=({onSelect:t,onClose:e})=>{const[n,r]=w.useState("smileys");return c.jsxs("div",{className:"absolute bottom-full right-0 mb-2 bg-dark-sidebar border border-dark-hover rounded-lg shadow-xl w-80 z-50",children:[c.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-dark-hover",children:[c.jsx("span",{className:"text-sm font-semibold text-dark-text",children:"Emoji Picker"}),c.jsx("button",{onClick:e,className:"text-dark-muted hover:text-dark-text transition-colors",children:c.jsx($n,{size:18})})]}),c.jsxs("div",{className:"p-3 border-b border-dark-hover",children:[c.jsx("div",{className:"text-xs text-dark-muted mb-2 font-semibold",children:"POPULAR"}),c.jsx("div",{className:"grid grid-cols-10 gap-1",children:YB.map((i,o)=>c.jsx("button",{onClick:()=>t(i),className:"text-2xl hover:bg-dark-hover rounded p-1 transition-colors",title:i,children:i},o))})]}),c.jsx("div",{className:"flex gap-1 p-2 border-b border-dark-hover overflow-x-auto",children:Object.entries(E4).map(([i,o])=>c.jsx("button",{onClick:()=>r(i),className:`text-xl p-2 rounded transition-colors ${n===i?"bg-brand-primary/20 text-brand-primary":"hover:bg-dark-hover text-dark-muted"}`,title:o.name,children:o.icon},i))}),c.jsx("div",{className:"p-3 h-64 overflow-y-auto",children:c.jsx("div",{className:"grid grid-cols-8 gap-1",children:E4[n].emojis.map((i,o)=>c.jsx("button",{onClick:()=>t(i),className:"text-2xl hover:bg-dark-hover rounded p-1 transition-colors",title:i,children:i},o))})})]})};let sm;const WB=new Uint8Array(16);function QB(){if(!sm&&(sm=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!sm))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return sm(WB)}const lr=[];for(let t=0;t<256;++t)lr.push((t+256).toString(16).slice(1));function XB(t,e=0){return lr[t[e+0]]+lr[t[e+1]]+lr[t[e+2]]+lr[t[e+3]]+"-"+lr[t[e+4]]+lr[t[e+5]]+"-"+lr[t[e+6]]+lr[t[e+7]]+"-"+lr[t[e+8]]+lr[t[e+9]]+"-"+lr[t[e+10]]+lr[t[e+11]]+lr[t[e+12]]+lr[t[e+13]]+lr[t[e+14]]+lr[t[e+15]]}const JB=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),S4={randomUUID:JB};function ZB(t,e,n){if(S4.randomUUID&&!t)return S4.randomUUID();t=t||{};const r=t.random||(t.rng||QB)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,XB(r)}var eF=Object.defineProperty,tF=Object.defineProperties,nF=Object.getOwnPropertyDescriptors,T4=Object.getOwnPropertySymbols,rF=Object.prototype.hasOwnProperty,sF=Object.prototype.propertyIsEnumerable,C4=(t,e,n)=>e in t?eF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Z1=(t,e)=>{for(var n in e||(e={}))rF.call(e,n)&&C4(t,n,e[n]);if(T4)for(var n of T4(e))sF.call(e,n)&&C4(t,n,e[n]);return t},iF=(t,e)=>tF(t,nF(e)),cr={ENABLED:typeof window<"u"&&typeof location<"u"&&location.search.indexOf("giphy-debug")!==-1,LEVEL:0,PREFIX:"GiphyJS",debug:(...t)=>{cr.ENABLED&&cr.LEVEL<=0&&console.debug(cr.PREFIX,...t)},info:(...t)=>{cr.ENABLED&&cr.LEVEL<=1&&console.info(cr.PREFIX,...t)},warn:(...t)=>{cr.ENABLED&&cr.LEVEL<=2&&console.warn(cr.PREFIX,...t)},error:(...t)=>{cr.ENABLED&&cr.LEVEL<=3&&console.error(cr.PREFIX,...t)}},aF=(t,e,n)=>{let r=1/0,i;return n.forEach(o=>{const u=o.width/t,h=o.height/e,f=u*h,m=Math.abs(1-f);m<r&&(r=m,i=o)}),i},oF=50;function lF(t,e,n,r=oF){let[i]=t;const o=t.filter(u=>(u.width*u.height>i.width*i.height&&(i=u),e-u.width<=r&&n-u.height<=r));return o.length===0?i:aF(e,n,o)}var DR=lF;function cF(t,e=0){return t.slice(0,e)}function uF(t,e){return t.filter(n=>e.indexOf(n)===-1)}function X0(t,e){const n={};return e.forEach(r=>{t[r]!==void 0&&(n[r]=t[r])}),n}var dF=t=>{let e=0,n=0;const r=t.offsetWidth,i=t.offsetHeight;do e+=t.offsetLeft,n+=t.offsetTop,t=t.offsetParent;while(t);const o={left:e,top:n,width:r,height:i,right:e+r,bottom:n+i,x:e,y:n};return iF(Z1({},o),{toJSON:()=>JSON.stringify(o)})},hF=dF,$o="",PR=16,MR=()=>{let t="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=e.length;for(let r=0;r<PR;r++)t+=e.charAt(Math.floor(Math.random()*n));return t},fF=()=>{if(!$o){try{$o=sessionStorage.getItem("giphyPingbackId")}catch{}if(!$o){const t=new Date().getTime().toString(16);try{$o=`${t}${ZB().replace(/-/g,"")}`.substring(0,PR)}catch{$o=MR()}try{sessionStorage.setItem("giphyPingbackId",$o)}catch{}}}return $o},ex=fF,im=null;new Promise(t=>{typeof Image>"u"&&t(!1);const e=new Image;e.onload=()=>{im=!0,t(im)},e.onerror=()=>{im=!1,t(im)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"});var k4=(t,e,n)=>{let r=t?.assets;if(r){r=Z1({},r),delete r.source;const i=Object.values(r).sort((o,u)=>o.width-u.width);return DR(i,e,n)}},mF=(t,e,n,r)=>{const i=X0(t,["original","fixed_width","fixed_height","fixed_width_small","fixed_height_small"]),o=Object.entries(i).map(([u,h])=>Z1({renditionName:u},h));return DR(o,e,n,r)},og=({images:t},e)=>{const{fixed_width:n}=t;if(n){const{width:r,height:i}=n,o=r/i;return Math.round(e/o)}return 0},pF=({images:t},e)=>{const{fixed_width:n}=t;if(n){const{width:r,height:i}=n,o=r/i;return Math.round(e*o)}return 0},gF=({alt_text:t,user:e,tags:n=[],is_sticker:r=!1,title:i=""})=>{if(t)return t;if(i)return i;const o=e&&e.username||"",u=cF(uF(n,["transparent"]),o?4:5);return`${o?`${o} `:""}${u.join(" ")} ${r?"Sticker":"GIF"}`},Ed=(typeof window<"u"?window:global)||{};Ed._GIPHY_SDK_HEADERS_=Ed._GIPHY_SDK_HEADERS_||(Ed.Headers?new Ed.Headers({"X-GIPHY-SDK-PLATFORM":"web"}):void 0);var tx=()=>Ed._GIPHY_SDK_HEADERS_,J0=(t,e)=>{var n;return(n=tx())==null?void 0:n.set(t,e)},vF=Object.defineProperty,yF=Object.defineProperties,bF=Object.getOwnPropertyDescriptors,xF=Object.getOwnPropertyNames,N4=Object.getOwnPropertySymbols,_F=Object.prototype.hasOwnProperty,wF=Object.prototype.propertyIsEnumerable,A4=(t,e,n)=>e in t?vF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ni=(t,e)=>{for(var n in e||(e={}))_F.call(e,n)&&A4(t,n,e[n]);if(N4)for(var n of N4(e))wF.call(e,n)&&A4(t,n,e[n]);return t},Jy=(t,e)=>yF(t,bF(e)),EF=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,n)=>(typeof require<"u"?require:e)[n]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')}),SF=(t,e)=>function(){return e||(0,t[xF(t)[0]])((e={exports:{}}).exports,e),e.exports},OR=(t,e,n)=>new Promise((r,i)=>{var o=f=>{try{h(n.next(f))}catch(m){i(m)}},u=f=>{try{h(n.throw(f))}catch(m){i(m)}},h=f=>f.done?r(f.value):Promise.resolve(f.value).then(o,u);h((n=n.apply(t,e)).next())}),TF=SF({"package.json"(t,e){e.exports={scripts:{lint:"run -T eslint . --ext .ts,.tsx",clean:"rm -rf ./dist",dev:"parcel public/test.html",docs:"typedoc src/index.ts",build:"run -T tsup src/index.ts --format cjs,esm --dts && run -T publint",prepublish:"npm run clean && npm run build",test:"run -T jest --config ./jestconfig.js","test:watch":"run -T jest --config ./jestconfig.js --watchAll"},name:"@giphy/js-fetch-api",version:"5.7.0",description:"Javascript API to fetch gifs and stickers from the GIPHY API.",homepage:"https://github.com/Giphy/giphy-js/tree/master/packages/fetch-api",main:"dist/index.cjs",types:"dist/index.d.ts",module:"dist/index.js",type:"module",sideEffects:!1,exports:{".":{types:"./dist/index.d.ts",import:"./dist/index.js",require:"./dist/index.cjs"},"./package.json":"./package.json"},files:["dist/","src/**/*"],license:"MIT",publishConfig:{access:"public"},dependencies:{"@giphy/js-types":"*","@giphy/js-util":"*"},devDependencies:{"jest-fetch-mock":"^3.0.3","parcel-bundler":"latest",typedoc:"^0.20.37","typedoc-thunder-theme":"^0.0.3",typescript:"^5.0.4"}}}}),CF=["is_anonymous","is_community","is_featured","is_hidden","is_indexable","is_preserve_size","is_realtime","is_removed","is_sticker","is_dynamic"],kF=["suppress_chrome","is_public","is_verified"],R4=t=>e=>t[e]=!!t[e],NF=t=>typeof t=="string"?t:t.text,LR=(t,e="")=>{const n=ni({},t);n.id=String(n.id),n.tags=(n.tags||[]).map(NF),n.bottle_data||(n.bottle_data={}),n.response_id=e,CF.forEach(R4(n)),Object.keys(n.images||{}).forEach(i=>{const o=n.images[i];o.width=parseInt(o.width),o.height=parseInt(o.height)});const{user:r}=n;if(r){const i=ni({},r);kF.forEach(R4(i)),n.user=i}return n},I4=t=>{const{response_id:e}=t.meta;return t.data=LR(t.data,e),t},Vi=t=>{const{response_id:e}=t.meta;return t.data=t.data.map(n=>LR(n,e)),t},AF=(typeof window<"u"?window:global)||{},RF=AF.GIPHY_API_URL||"https://api.giphy.com/v1/",VR=class extends Error{constructor(e,n,r=0,i=""){super(e),this.url=n,this.status=r,this.statusText=i}},IF=class extends VR{},j4=VR,jF="@giphy/js-fetch-api: ",DF="Error fetching",PF=t=>t,As={},MF=6e4,OF=6e3,LF=()=>{const t=Date.now();Object.keys(As).forEach(e=>{const n=As[e].isError?OF:MF;t-As[e].ts>=n&&delete As[e]})};function VF(t,e={}){const{apiVersion:n=1,noCache:r=!1,normalizer:i=PF}=e,o=RF.replace(/\/v\d+\/$/,`/v${n}/`);if(LF(),!As[t]||r){const u=`${o}${t}`,h=()=>OR(this,null,function*(){var f,m;let v;try{const b=yield fetch(u,{method:"get"});if(b.ok){const x=yield b.json();if((f=x.meta)!=null&&f.response_id)return i(x);throw{message:"synthetic response"}}else{let x=DF;try{const R=yield b.json();R.message&&(x=R.message),(m=R.meta)!=null&&m.msg&&(x=R.meta.msg)}catch{}As[t]&&(As[t].isError=!0);let C=j4;x==="This content is not available in your location"&&(C=IF),v=new C(`${jF}${x}`,u,b.status,b.statusText)}}catch(b){v=new j4(b.message,u),As[t]&&(As[t].isError=!0)}throw v});As[t]={request:h(),ts:Date.now()}}return As[t].request}var Lr=VF,Zy=t=>t&&t.type?t.type:"gifs",UF=class{constructor(t,e={}){this.getQS=(n={})=>new URLSearchParams(ni(Jy(ni({},n),{api_key:this.apiKey,pingback_id:ex()}),this.qsParams)).toString(),this.apiKey=t,this.qsParams=e}categories(t){return Lr(`gifs/categories?${this.getQS(t)}`)}gif(t,e){const n=e?.internal?"internal/":"";return Lr(`${n}gifs/${t}?${this.getQS()}`,{normalizer:I4})}gifs(t,e){return Array.isArray(t)?Lr(`gifs?${this.getQS({ids:t.join(",")})}`,{normalizer:Vi}):Lr(`gifs/categories/${t}/${e}?${this.getQS()}`,{normalizer:Vi})}emoji(t){return Lr(`emoji?${this.getQS(t)}`,{normalizer:Vi})}emojiDefaultVariations(t){return Lr(`emoji?${this.getQS(t)}`,{apiVersion:2,normalizer:Vi})}emojiVariations(t){return Lr(`emoji/${t}/variations?${this.getQS()}`,{apiVersion:2,normalizer:Vi})}animate(t,e={}){const n=this.getQS(Jy(ni({},e),{m:t}));return Lr(`text/animate?${n}`,{normalizer:Vi})}search(t,e={}){const n=e.channel?`@${e.channel} ${t}`:t;let r;e.type==="text"&&(r=!0);const i=this.getQS(Jy(ni({rating:"pg-13"},e),{q:n,excludeDynamicResults:r}));return Lr(`${Zy(e)}/search?${i}`,{normalizer:Vi})}subcategories(t,e){return Lr(`gifs/categories/${t}?${this.getQS(e)}`)}trending(t={}){return Lr(`${Zy(t)}/trending?${this.getQS(ni({rating:"pg-13"},t))}`,{normalizer:Vi})}random(t){return Lr(`${Zy(t)}/random?${this.getQS(ni({rating:"pg-13"},t))}`,{noCache:!0,normalizer:I4})}related(t,e={}){const{type:n="gifs"}=e;return Lr(`${n}/related?${this.getQS(ni({gif_id:t,rating:"pg-13"},e))}`,{normalizer:Vi})}channels(t,e={}){return Lr(`channels/search?${this.getQS(ni({q:t,rating:"pg-13"},e))}`)}},UR=UF,zF=Symbol("has inivisible gifs"),zR=(t,e=[])=>{let n=[...e],r=e.map(u=>u.id),i=e.length,o=!1;return u=>OR(void 0,null,function*(){if(u&&(n=u,r=u.map(b=>b.id)),o)return n;const h=yield t(i),{pagination:f,data:m}=h;i=f.count+f.offset,o=i===f.total_count,m.forEach(b=>{const{id:x}=b;r.includes(x)||(n.push(b),r.push(x))});const v=[...n];return f.hasMoreGifs&&(v.skipCountCheck=zF),v})},D4;if(typeof EF<"u"){const{version:t}=TF();(D4=tx())!=null&&D4.get("X-GIPHY-SDK-NAME")||(J0("X-GIPHY-SDK-NAME","FetchAPI"),J0("X-GIPHY-SDK-VERSION",t))}var Z0=function(t,e){return Z0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Z0(t,e)};function BR(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Z0(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var xr=function(){return xr=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},xr.apply(this,arguments)};function FR(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function HR(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var h=t.length-1;h>=0;h--)(u=t[h])&&(o=(i<3?u(o):i>3?u(e,n,o):u(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o}function $R(t,e){return function(n,r){e(n,r,t)}}function qR(t,e,n,r,i,o){function u(L){if(L!==void 0&&typeof L!="function")throw new TypeError("Function expected");return L}for(var h=r.kind,f=h==="getter"?"get":h==="setter"?"set":"value",m=!e&&t?r.static?t:t.prototype:null,v=e||(m?Object.getOwnPropertyDescriptor(m,r.name):{}),b,x=!1,C=n.length-1;C>=0;C--){var R={};for(var A in r)R[A]=A==="access"?{}:r[A];for(var A in r.access)R.access[A]=r.access[A];R.addInitializer=function(L){if(x)throw new TypeError("Cannot add initializers after decoration has completed");o.push(u(L||null))};var k=(0,n[C])(h==="accessor"?{get:v.get,set:v.set}:v[f],R);if(h==="accessor"){if(k===void 0)continue;if(k===null||typeof k!="object")throw new TypeError("Object expected");(b=u(k.get))&&(v.get=b),(b=u(k.set))&&(v.set=b),(b=u(k.init))&&i.unshift(b)}else(b=u(k))&&(h==="field"?i.unshift(b):v[f]=b)}m&&Object.defineProperty(m,r.name,v),x=!0}function GR(t,e,n){for(var r=arguments.length>2,i=0;i<e.length;i++)n=r?e[i].call(t,n):e[i].call(t);return r?n:void 0}function YR(t){return typeof t=="symbol"?t:"".concat(t)}function KR(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function WR(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function QR(t,e,n,r){function i(o){return o instanceof n?o:new n(function(u){u(o)})}return new(n||(n=Promise))(function(o,u){function h(v){try{m(r.next(v))}catch(b){u(b)}}function f(v){try{m(r.throw(v))}catch(b){u(b)}}function m(v){v.done?o(v.value):i(v.value).then(h,f)}m((r=r.apply(t,e||[])).next())})}function XR(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=h(0),u.throw=h(1),u.return=h(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(m){return function(v){return f([m,v])}}function f(m){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){n.label=m[1];break}if(m[0]===6&&n.label<o[1]){n.label=o[1],o=m;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(m);break}o[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(v){m=[6,v],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}var lg=Object.create?(function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]});function JR(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&lg(e,t,n)}function gp(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function nx(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],u;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(h){u={error:h}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return o}function ZR(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(nx(arguments[e]));return t}function e3(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],u=0,h=o.length;u<h;u++,i++)r[i]=o[u];return r}function al(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function Lc(t){return this instanceof Lc?(this.v=t,this):new Lc(t)}function t3(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",u),i[Symbol.asyncIterator]=function(){return this},i;function u(C){return function(R){return Promise.resolve(R).then(C,b)}}function h(C,R){r[C]&&(i[C]=function(A){return new Promise(function(k,L){o.push([C,A,k,L])>1||f(C,A)})},R&&(i[C]=R(i[C])))}function f(C,R){try{m(r[C](R))}catch(A){x(o[0][3],A)}}function m(C){C.value instanceof Lc?Promise.resolve(C.value.v).then(v,b):x(o[0][2],C)}function v(C){f("next",C)}function b(C){f("throw",C)}function x(C,R){C(R),o.shift(),o.length&&f(o[0][0],o[0][1])}}function n3(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,o){e[i]=t[i]?function(u){return(n=!n)?{value:Lc(t[i](u)),done:!1}:o?o(u):u}:o}}function r3(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof gp=="function"?gp(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(u){return new Promise(function(h,f){u=t[o](u),i(h,f,u.done,u.value)})}}function i(o,u,h,f){Promise.resolve(f).then(function(m){o({value:m,done:h})},u)}}function s3(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var BF=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},eb=function(t){return eb=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},eb(t)};function i3(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=eb(t),r=0;r<n.length;r++)n[r]!=="default"&&lg(e,t,n[r]);return BF(e,t),e}function a3(t){return t&&t.__esModule?t:{default:t}}function o3(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function l3(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n}function c3(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function u3(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var FF=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function d3(t){function e(o){t.error=t.hasError?new FF(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var n,r=0;function i(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(i);if(n.dispose){var o=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(o).then(i,function(u){return e(u),i()})}else r|=1}catch(u){e(u)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function h3(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,i,o,u){return r?e?".jsx":".js":i&&(!o||!u)?n:i+o+"."+u.toLowerCase()+"js"}):t}const HF={__extends:BR,__assign:xr,__rest:FR,__decorate:HR,__param:$R,__esDecorate:qR,__runInitializers:GR,__propKey:YR,__setFunctionName:KR,__metadata:WR,__awaiter:QR,__generator:XR,__createBinding:lg,__exportStar:JR,__values:gp,__read:nx,__spread:ZR,__spreadArrays:e3,__spreadArray:al,__await:Lc,__asyncGenerator:t3,__asyncDelegator:n3,__asyncValues:r3,__makeTemplateObject:s3,__importStar:i3,__importDefault:a3,__classPrivateFieldGet:o3,__classPrivateFieldSet:l3,__classPrivateFieldIn:c3,__addDisposableResource:u3,__disposeResources:d3,__rewriteRelativeImportExtension:h3},$F=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:u3,get __assign(){return xr},__asyncDelegator:n3,__asyncGenerator:t3,__asyncValues:r3,__await:Lc,__awaiter:QR,__classPrivateFieldGet:o3,__classPrivateFieldIn:c3,__classPrivateFieldSet:l3,__createBinding:lg,__decorate:HR,__disposeResources:d3,__esDecorate:qR,__exportStar:JR,__extends:BR,__generator:XR,__importDefault:a3,__importStar:i3,__makeTemplateObject:s3,__metadata:WR,__param:$R,__propKey:YR,__read:nx,__rest:FR,__rewriteRelativeImportExtension:h3,__runInitializers:GR,__setFunctionName:KR,__spread:ZR,__spreadArray:al,__spreadArrays:e3,__values:gp,default:HF},Symbol.toStringTag,{value:"Module"}));var dn="-ms-",Pd="-moz-",Kt="-webkit-",f3="comm",cg="rule",rx="decl",qF="@import",GF="@namespace",m3="@keyframes",YF="@layer",p3=Math.abs,sx=String.fromCharCode,tb=Object.assign;function KF(t,e){return Wn(t,0)^45?(((e<<2^Wn(t,0))<<2^Wn(t,1))<<2^Wn(t,2))<<2^Wn(t,3):0}function g3(t){return t.trim()}function Ui(t,e){return(t=e.exec(t))?t[0]:t}function Ct(t,e,n){return t.replace(e,n)}function Rm(t,e,n){return t.indexOf(e,n)}function Wn(t,e){return t.charCodeAt(e)|0}function ol(t,e,n){return t.slice(e,n)}function Rs(t){return t.length}function v3(t){return t.length}function Sd(t,e){return e.push(t),t}function WF(t,e){return t.map(e).join("")}function P4(t,e){return t.filter(function(n){return!Ui(n,e)})}var ug=1,Vc=1,y3=0,vs=0,Bn=0,iu="";function dg(t,e,n,r,i,o,u,h){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:ug,column:Vc,length:u,return:"",siblings:h}}function Ka(t,e){return tb(dg("",null,null,"",null,null,0,t.siblings),t,{length:-t.length},e)}function oc(t){for(;t.root;)t=Ka(t.root,{children:[t]});Sd(t,t.siblings)}function QF(){return Bn}function XF(){return Bn=vs>0?Wn(iu,--vs):0,Vc--,Bn===10&&(Vc=1,ug--),Bn}function Ms(){return Bn=vs<y3?Wn(iu,vs++):0,Vc++,Bn===10&&(Vc=1,ug++),Bn}function Xa(){return Wn(iu,vs)}function Im(){return vs}function hg(t,e){return ol(iu,t,e)}function Zd(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function JF(t){return ug=Vc=1,y3=Rs(iu=t),vs=0,[]}function ZF(t){return iu="",t}function e0(t){return g3(hg(vs-1,nb(t===91?t+2:t===40?t+1:t)))}function eH(t){for(;(Bn=Xa())&&Bn<33;)Ms();return Zd(t)>2||Zd(Bn)>3?"":" "}function tH(t,e){for(;--e&&Ms()&&!(Bn<48||Bn>102||Bn>57&&Bn<65||Bn>70&&Bn<97););return hg(t,Im()+(e<6&&Xa()==32&&Ms()==32))}function nb(t){for(;Ms();)switch(Bn){case t:return vs;case 34:case 39:t!==34&&t!==39&&nb(Bn);break;case 40:t===41&&nb(t);break;case 92:Ms();break}return vs}function nH(t,e){for(;Ms()&&t+Bn!==57;)if(t+Bn===84&&Xa()===47)break;return"/*"+hg(e,vs-1)+"*"+sx(t===47?t:Ms())}function rH(t){for(;!Zd(Xa());)Ms();return hg(t,vs)}function sH(t){return ZF(jm("",null,null,null,[""],t=JF(t),0,[0],t))}function jm(t,e,n,r,i,o,u,h,f){for(var m=0,v=0,b=u,x=0,C=0,R=0,A=1,k=1,L=1,U=0,I="",M=i,z=o,H=r,E=I;k;)switch(R=U,U=Ms()){case 40:if(R!=108&&Wn(E,b-1)==58){Rm(E+=Ct(e0(U),"&","&\f"),"&\f",p3(m?h[m-1]:0))!=-1&&(L=-1);break}case 34:case 39:case 91:E+=e0(U);break;case 9:case 10:case 13:case 32:E+=eH(R);break;case 92:E+=tH(Im()-1,7);continue;case 47:switch(Xa()){case 42:case 47:Sd(iH(nH(Ms(),Im()),e,n,f),f),(Zd(R||1)==5||Zd(Xa()||1)==5)&&Rs(E)&&ol(E,-1,void 0)!==" "&&(E+=" ");break;default:E+="/"}break;case 123*A:h[m++]=Rs(E)*L;case 125*A:case 59:case 0:switch(U){case 0:case 125:k=0;case 59+v:L==-1&&(E=Ct(E,/\f/g,"")),C>0&&(Rs(E)-b||A===0&&R===47)&&Sd(C>32?O4(E+";",r,n,b-1,f):O4(Ct(E," ","")+";",r,n,b-2,f),f);break;case 59:E+=";";default:if(Sd(H=M4(E,e,n,m,v,i,h,I,M=[],z=[],b,o),o),U===123)if(v===0)jm(E,e,H,H,M,o,b,h,z);else{switch(x){case 99:if(Wn(E,3)===110)break;case 108:if(Wn(E,2)===97)break;default:v=0;case 100:case 109:case 115:}v?jm(t,H,H,r&&Sd(M4(t,H,H,0,0,i,h,I,i,M=[],b,z),z),i,z,b,h,r?M:z):jm(E,H,H,H,[""],z,0,h,z)}}m=v=C=0,A=L=1,I=E="",b=u;break;case 58:b=1+Rs(E),C=R;default:if(A<1){if(U==123)--A;else if(U==125&&A++==0&&XF()==125)continue}switch(E+=sx(U),U*A){case 38:L=v>0?1:(E+="\f",-1);break;case 44:h[m++]=(Rs(E)-1)*L,L=1;break;case 64:Xa()===45&&(E+=e0(Ms())),x=Xa(),v=b=Rs(I=E+=rH(Im())),U++;break;case 45:R===45&&Rs(E)==2&&(A=0)}}return o}function M4(t,e,n,r,i,o,u,h,f,m,v,b){for(var x=i-1,C=i===0?o:[""],R=v3(C),A=0,k=0,L=0;A<r;++A)for(var U=0,I=ol(t,x+1,x=p3(k=u[A])),M=t;U<R;++U)(M=g3(k>0?C[U]+" "+I:Ct(I,/&\f/g,C[U])))&&(f[L++]=M);return dg(t,e,n,i===0?cg:h,f,m,v,b)}function iH(t,e,n,r){return dg(t,e,n,f3,sx(QF()),ol(t,2,-2),0,r)}function O4(t,e,n,r,i){return dg(t,e,n,rx,ol(t,0,r),ol(t,r+1,-1),r,i)}function b3(t,e,n){switch(KF(t,e)){case 5103:return Kt+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:case 6391:case 5879:case 5623:case 6135:case 4599:return Kt+t+t;case 4855:return Kt+t.replace("add","source-over").replace("substract","source-out").replace("intersect","source-in").replace("exclude","xor")+t;case 4789:return Pd+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Kt+t+Pd+t+dn+t+t;case 5936:switch(Wn(t,e+11)){case 114:return Kt+t+dn+Ct(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Kt+t+dn+Ct(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Kt+t+dn+Ct(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return Kt+t+dn+t+t;case 6165:return Kt+t+dn+"flex-"+t+t;case 5187:return Kt+t+Ct(t,/(\w+).+(:[^]+)/,Kt+"box-$1$2"+dn+"flex-$1$2")+t;case 5443:return Kt+t+dn+"flex-item-"+Ct(t,/flex-|-self/g,"")+(Ui(t,/flex-|baseline/)?"":dn+"grid-row-"+Ct(t,/flex-|-self/g,""))+t;case 4675:return Kt+t+dn+"flex-line-pack"+Ct(t,/align-content|flex-|-self/g,"")+t;case 5548:return Kt+t+dn+Ct(t,"shrink","negative")+t;case 5292:return Kt+t+dn+Ct(t,"basis","preferred-size")+t;case 6060:return Kt+"box-"+Ct(t,"-grow","")+Kt+t+dn+Ct(t,"grow","positive")+t;case 4554:return Kt+Ct(t,/([^-])(transform)/g,"$1"+Kt+"$2")+t;case 6187:return Ct(Ct(Ct(t,/(zoom-|grab)/,Kt+"$1"),/(image-set)/,Kt+"$1"),t,"")+t;case 5495:case 3959:return Ct(t,/(image-set\([^]*)/,Kt+"$1$`$1");case 4968:return Ct(Ct(t,/(.+:)(flex-)?(.*)/,Kt+"box-pack:$3"+dn+"flex-pack:$3"),/space-between/,"justify")+Kt+t+t;case 4200:if(!Ui(t,/flex-|baseline/))return dn+"grid-column-align"+ol(t,e)+t;break;case 2592:case 3360:return dn+Ct(t,"template-","")+t;case 4384:case 3616:return n&&n.some(function(r,i){return e=i,Ui(r.props,/grid-\w+-end/)})?~Rm(t+(n=n[e].value),"span",0)?t:dn+Ct(t,"-start","")+t+dn+"grid-row-span:"+(~Rm(n,"span",0)?Ui(n,/\d+/):+Ui(n,/\d+/)-+Ui(t,/\d+/))+";":dn+Ct(t,"-start","")+t;case 4896:case 4128:return n&&n.some(function(r){return Ui(r.props,/grid-\w+-start/)})?t:dn+Ct(Ct(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return Ct(t,/(.+)-inline(.+)/,Kt+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Rs(t)-1-e>6)switch(Wn(t,e+1)){case 109:if(Wn(t,e+4)!==45)break;case 102:return Ct(t,/(.+:)(.+)-([^]+)/,"$1"+Kt+"$2-$3$1"+Pd+(Wn(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~Rm(t,"stretch",0)?b3(Ct(t,"stretch","fill-available"),e,n)+t:t}break;case 5152:case 5920:return Ct(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,i,o,u,h,f,m){return dn+i+":"+o+m+(u?dn+i+"-span:"+(h?f:+f-+o)+m:"")+t});case 4949:if(Wn(t,e+6)===121)return Ct(t,":",":"+Kt)+t;break;case 6444:switch(Wn(t,Wn(t,14)===45?18:11)){case 120:return Ct(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Kt+(Wn(t,14)===45?"inline-":"")+"box$3$1"+Kt+"$2$3$1"+dn+"$2box$3")+t;case 100:return Ct(t,":",":"+dn)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return Ct(t,"scroll-","scroll-snap-")+t}return t}function vp(t,e){for(var n="",r=0;r<t.length;r++)n+=e(t[r],r,t,e)||"";return n}function aH(t,e,n,r){switch(t.type){case YF:if(t.children.length)break;case qF:case GF:case rx:return t.return=t.return||t.value;case f3:return"";case m3:return t.return=t.value+"{"+vp(t.children,r)+"}";case cg:if(!Rs(t.value=t.props.join(",")))return""}return Rs(n=vp(t.children,r))?t.return=t.value+"{"+n+"}":""}function oH(t){var e=v3(t);return function(n,r,i,o){for(var u="",h=0;h<e;h++)u+=t[h](n,r,i,o)||"";return u}}function lH(t){return function(e){e.root||(e=e.return)&&t(e)}}function cH(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case rx:t.return=b3(t.value,t.length,n);return;case m3:return vp([Ka(t,{value:Ct(t.value,"@","@"+Kt)})],r);case cg:if(t.length)return WF(n=t.props,function(i){switch(Ui(i,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":oc(Ka(t,{props:[Ct(i,/:(read-\w+)/,":"+Pd+"$1")]})),oc(Ka(t,{props:[i]})),tb(t,{props:P4(n,r)});break;case"::placeholder":oc(Ka(t,{props:[Ct(i,/:(plac\w+)/,":"+Kt+"input-$1")]})),oc(Ka(t,{props:[Ct(i,/:(plac\w+)/,":"+Pd+"$1")]})),oc(Ka(t,{props:[Ct(i,/:(plac\w+)/,dn+"input-$1")]})),oc(Ka(t,{props:[i]})),tb(t,{props:P4(n,r)});break}return""})}}var uH={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},es={},Uc=typeof process<"u"&&es!==void 0&&(es.REACT_APP_SC_ATTR||es.SC_ATTR)||"data-styled",x3="active",_3="data-styled-version",fg="6.3.8",ix=`/*!sc*/
`,yp=typeof window<"u"&&typeof document<"u",zc=ve.createContext===void 0,dH=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&es!==void 0&&es.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&es.REACT_APP_SC_DISABLE_SPEEDY!==""?es.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&es.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&es!==void 0&&es.SC_DISABLE_SPEEDY!==void 0&&es.SC_DISABLE_SPEEDY!==""&&es.SC_DISABLE_SPEEDY!=="false"&&es.SC_DISABLE_SPEEDY),mg=Object.freeze([]),Bc=Object.freeze({});function hH(t,e,n){return n===void 0&&(n=Bc),t.theme!==n.theme&&t.theme||e||n.theme}var w3=new Set(["a","abbr","address","area","article","aside","audio","b","bdi","bdo","blockquote","body","button","br","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","map","mark","menu","meter","nav","object","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","slot","small","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","switch","symbol","text","textPath","tspan","use"]),fH=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,mH=/(^-|-$)/g;function L4(t){return t.replace(fH,"-").replace(mH,"")}var pH=/(a)(d)/gi,V4=function(t){return String.fromCharCode(t+(t>25?39:97))};function rb(t){var e,n="";for(e=Math.abs(t);e>52;e=e/52|0)n=V4(e%52)+n;return(V4(e%52)+n).replace(pH,"$1-$2")}var t0,fc=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},E3=function(t){return fc(5381,t)};function S3(t){return rb(E3(t)>>>0)}function gH(t){return t.displayName||t.name||"Component"}function n0(t){return typeof t=="string"&&!0}var T3=typeof Symbol=="function"&&Symbol.for,C3=T3?Symbol.for("react.memo"):60115,vH=T3?Symbol.for("react.forward_ref"):60112,yH={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},bH={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},k3={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},xH=((t0={})[vH]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},t0[C3]=k3,t0);function U4(t){return("type"in(e=t)&&e.type.$$typeof)===C3?k3:"$$typeof"in t?xH[t.$$typeof]:yH;var e}var _H=Object.defineProperty,wH=Object.getOwnPropertyNames,z4=Object.getOwnPropertySymbols,EH=Object.getOwnPropertyDescriptor,SH=Object.getPrototypeOf,B4=Object.prototype;function N3(t,e,n){if(typeof e!="string"){if(B4){var r=SH(e);r&&r!==B4&&N3(t,r,n)}var i=wH(e);z4&&(i=i.concat(z4(e)));for(var o=U4(t),u=U4(e),h=0;h<i.length;++h){var f=i[h];if(!(f in bH||n&&n[f]||u&&f in u||o&&f in o)){var m=EH(e,f);try{_H(t,f,m)}catch{}}}}return t}function Fc(t){return typeof t=="function"}function ax(t){return typeof t=="object"&&"styledComponentId"in t}function Wo(t,e){return t&&e?"".concat(t," ").concat(e):t||e||""}function sb(t,e){if(t.length===0)return"";for(var n=t[0],r=1;r<t.length;r++)n+=t[r];return n}function eh(t){return t!==null&&typeof t=="object"&&t.constructor.name===Object.name&&!("props"in t&&t.$$typeof)}function ib(t,e,n){if(n===void 0&&(n=!1),!n&&!eh(t)&&!Array.isArray(t))return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)t[r]=ib(t[r],e[r]);else if(eh(e))for(var r in e)t[r]=ib(t[r],e[r]);return t}function ox(t,e){Object.defineProperty(t,"toString",{value:e})}function wh(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(t," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var TH=(function(){function t(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return t.prototype.indexOfGroup=function(e){for(var n=0,r=0;r<e;r++)n+=this.groupSizes[r];return n},t.prototype.insertRules=function(e,n){if(e>=this.groupSizes.length){for(var r=this.groupSizes,i=r.length,o=i;e>=o;)if((o<<=1)<0)throw wh(16,"".concat(e));this.groupSizes=new Uint32Array(o),this.groupSizes.set(r),this.length=o;for(var u=i;u<o;u++)this.groupSizes[u]=0}for(var h=this.indexOfGroup(e+1),f=(u=0,n.length);u<f;u++)this.tag.insertRule(h,n[u])&&(this.groupSizes[e]++,h++)},t.prototype.clearGroup=function(e){if(e<this.length){var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n;this.groupSizes[e]=0;for(var o=r;o<i;o++)this.tag.deleteRule(r)}},t.prototype.getGroup=function(e){var n="";if(e>=this.length||this.groupSizes[e]===0)return n;for(var r=this.groupSizes[e],i=this.indexOfGroup(e),o=i+r,u=i;u<o;u++)n+="".concat(this.tag.getRule(u)).concat(ix);return n},t})(),Dm=new Map,bp=new Map,Pm=1,Td=function(t){if(Dm.has(t))return Dm.get(t);for(;bp.has(Pm);)Pm++;var e=Pm++;return Dm.set(t,e),bp.set(e,t),e},CH=function(t,e){Pm=e+1,Dm.set(t,e),bp.set(e,t)},kH="style[".concat(Uc,"][").concat(_3,'="').concat(fg,'"]'),NH=new RegExp("^".concat(Uc,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),AH=function(t,e,n){for(var r,i=n.split(","),o=0,u=i.length;o<u;o++)(r=i[o])&&t.registerName(e,r)},RH=function(t,e){for(var n,r=((n=e.textContent)!==null&&n!==void 0?n:"").split(ix),i=[],o=0,u=r.length;o<u;o++){var h=r[o].trim();if(h){var f=h.match(NH);if(f){var m=0|parseInt(f[1],10),v=f[2];m!==0&&(CH(v,m),AH(t,v,f[3]),t.getTag().insertRules(m,i)),i.length=0}else i.push(h)}}},F4=function(t){for(var e=document.querySelectorAll(kH),n=0,r=e.length;n<r;n++){var i=e[n];i&&i.getAttribute(Uc)!==x3&&(RH(t,i),i.parentNode&&i.parentNode.removeChild(i))}};function IH(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var A3=function(t){var e=document.head,n=t||e,r=document.createElement("style"),i=(function(h){var f=Array.from(h.querySelectorAll("style[".concat(Uc,"]")));return f[f.length-1]})(n),o=i!==void 0?i.nextSibling:null;r.setAttribute(Uc,x3),r.setAttribute(_3,fg);var u=IH();return u&&r.setAttribute("nonce",u),n.insertBefore(r,o),r},jH=(function(){function t(e){this.element=A3(e),this.element.appendChild(document.createTextNode("")),this.sheet=(function(n){if(n.sheet)return n.sheet;for(var r=document.styleSheets,i=0,o=r.length;i<o;i++){var u=r[i];if(u.ownerNode===n)return u}throw wh(17)})(this.element),this.length=0}return t.prototype.insertRule=function(e,n){try{return this.sheet.insertRule(n,e),this.length++,!0}catch{return!1}},t.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.prototype.getRule=function(e){var n=this.sheet.cssRules[e];return n&&n.cssText?n.cssText:""},t})(),DH=(function(){function t(e){this.element=A3(e),this.nodes=this.element.childNodes,this.length=0}return t.prototype.insertRule=function(e,n){if(e<=this.length&&e>=0){var r=document.createTextNode(n);return this.element.insertBefore(r,this.nodes[e]||null),this.length++,!0}return!1},t.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},t})(),PH=(function(){function t(e){this.rules=[],this.length=0}return t.prototype.insertRule=function(e,n){return e<=this.length&&(this.rules.splice(e,0,n),this.length++,!0)},t.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},t})(),H4=yp,MH={isServer:!yp,useCSSOMInjection:!dH},R3=(function(){function t(e,n,r){e===void 0&&(e=Bc),n===void 0&&(n={});var i=this;this.options=xr(xr({},MH),e),this.gs=n,this.names=new Map(r),this.server=!!e.isServer,!this.server&&yp&&H4&&(H4=!1,F4(this)),ox(this,function(){return(function(o){for(var u=o.getTag(),h=u.length,f="",m=function(b){var x=(function(L){return bp.get(L)})(b);if(x===void 0)return"continue";var C=o.names.get(x),R=u.getGroup(b);if(C===void 0||!C.size||R.length===0)return"continue";var A="".concat(Uc,".g").concat(b,'[id="').concat(x,'"]'),k="";C!==void 0&&C.forEach(function(L){L.length>0&&(k+="".concat(L,","))}),f+="".concat(R).concat(A,'{content:"').concat(k,'"}').concat(ix)},v=0;v<h;v++)m(v);return f})(i)})}return t.registerId=function(e){return Td(e)},t.prototype.rehydrate=function(){!this.server&&yp&&F4(this)},t.prototype.reconstructWithOptions=function(e,n){return n===void 0&&(n=!0),new t(xr(xr({},this.options),e),this.gs,n&&this.names||void 0)},t.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.prototype.getTag=function(){return this.tag||(this.tag=(e=(function(n){var r=n.useCSSOMInjection,i=n.target;return n.isServer?new PH(i):r?new jH(i):new DH(i)})(this.options),new TH(e)));var e},t.prototype.hasNameForId=function(e,n){return this.names.has(e)&&this.names.get(e).has(n)},t.prototype.registerName=function(e,n){if(Td(e),this.names.has(e))this.names.get(e).add(n);else{var r=new Set;r.add(n),this.names.set(e,r)}},t.prototype.insertRules=function(e,n,r){this.registerName(e,n),this.getTag().insertRules(Td(e),r)},t.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.prototype.clearRules=function(e){this.getTag().clearGroup(Td(e)),this.clearNames(e)},t.prototype.clearTag=function(){this.tag=void 0},t})(),OH=/&/g,mc=47;function $4(t){if(t.indexOf("}")===-1)return!1;for(var e=t.length,n=0,r=0,i=!1,o=0;o<e;o++){var u=t.charCodeAt(o);if(r!==0||i||u!==mc||t.charCodeAt(o+1)!==42)if(i)u===42&&t.charCodeAt(o+1)===mc&&(i=!1,o++);else if(u!==34&&u!==39||o!==0&&t.charCodeAt(o-1)===92){if(r===0){if(u===123)n++;else if(u===125&&--n<0)return!0}}else r===0?r=u:r===u&&(r=0);else i=!0,o++}return n!==0||r!==0}function I3(t,e){return t.map(function(n){return n.type==="rule"&&(n.value="".concat(e," ").concat(n.value),n.value=n.value.replaceAll(",",",".concat(e," ")),n.props=n.props.map(function(r){return"".concat(e," ").concat(r)})),Array.isArray(n.children)&&n.type!=="@keyframes"&&(n.children=I3(n.children,e)),n})}function LH(t){var e,n,r,i=Bc,o=i.options,u=o===void 0?Bc:o,h=i.plugins,f=h===void 0?mg:h,m=function(x,C,R){return R.startsWith(n)&&R.endsWith(n)&&R.replaceAll(n,"").length>0?".".concat(e):x},v=f.slice();v.push(function(x){x.type===cg&&x.value.includes("&")&&(x.props[0]=x.props[0].replace(OH,n).replace(r,m))}),u.prefix&&v.push(cH),v.push(aH);var b=function(x,C,R,A){C===void 0&&(C=""),R===void 0&&(R=""),A===void 0&&(A="&"),e=A,n=C,r=new RegExp("\\".concat(n,"\\b"),"g");var k=(function(I){if(!$4(I))return I;for(var M=I.length,z="",H=0,E=0,S=0,j=!1,D=0;D<M;D++){var V=I.charCodeAt(D);if(S!==0||j||V!==mc||I.charCodeAt(D+1)!==42)if(j)V===42&&I.charCodeAt(D+1)===mc&&(j=!1,D++);else if(V!==34&&V!==39||D!==0&&I.charCodeAt(D-1)===92){if(S===0)if(V===123)E++;else if(V===125){if(--E<0){for(var B=D+1;B<M;){var P=I.charCodeAt(B);if(P===59||P===10)break;B++}B<M&&I.charCodeAt(B)===59&&B++,E=0,D=B-1,H=B;continue}E===0&&(z+=I.substring(H,D+1),H=D+1)}else V===59&&E===0&&(z+=I.substring(H,D+1),H=D+1)}else S===0?S=V:S===V&&(S=0);else j=!0,D++}if(H<M){var ne=I.substring(H);$4(ne)||(z+=ne)}return z})((function(I){if(I.indexOf("//")===-1)return I;for(var M=I.length,z=[],H=0,E=0,S=0,j=0;E<M;){var D=I.charCodeAt(E);if(D!==34&&D!==39||E!==0&&I.charCodeAt(E-1)===92)if(S===0)if(D===40&&E>=3&&(32|I.charCodeAt(E-1))==108&&(32|I.charCodeAt(E-2))==114&&(32|I.charCodeAt(E-3))==117)j=1,E++;else if(j>0)D===41?j--:D===40&&j++,E++;else if(D===mc&&E+1<M&&I.charCodeAt(E+1)===mc){for(E>H&&z.push(I.substring(H,E));E<M&&I.charCodeAt(E)!==10;)E++;H=E}else E++;else E++;else S===0?S=D:S===D&&(S=0),E++}return H===0?I:(H<M&&z.push(I.substring(H)),z.join(""))})(x)),L=sH(R||C?"".concat(R," ").concat(C," { ").concat(k," }"):k);u.namespace&&(L=I3(L,u.namespace));var U=[];return vp(L,oH(v.concat(lH(function(I){return U.push(I)})))),U};return b.hash=f.length?f.reduce(function(x,C){return C.name||wh(15),fc(x,C.name)},5381).toString():"",b}var VH=new R3,ab=LH(),ob={shouldForwardProp:void 0,styleSheet:VH,stylis:ab},j3=zc?{Provider:function(t){return t.children},Consumer:function(t){return(0,t.children)(ob)}}:ve.createContext(ob);j3.Consumer;zc||ve.createContext(void 0);function q4(){return zc?ob:ve.useContext(j3)}var D3=(function(){function t(e,n){var r=this;this.inject=function(i,o){o===void 0&&(o=ab);var u=r.name+o.hash;i.hasNameForId(r.id,u)||i.insertRules(r.id,u,o(r.rules,u,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=n,ox(this,function(){throw wh(12,String(r.name))})}return t.prototype.getName=function(e){return e===void 0&&(e=ab),this.name+e.hash},t})();function UH(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e!="number"||e===0||t in uH||t.startsWith("--")?String(e).trim():"".concat(e,"px")}var zH=function(t){return t>="A"&&t<="Z"};function G4(t){for(var e="",n=0;n<t.length;n++){var r=t[n];if(n===1&&r==="-"&&t[0]==="-")return t;zH(r)?e+="-"+r.toLowerCase():e+=r}return e.startsWith("ms-")?"-"+e:e}var P3=function(t){return t==null||t===!1||t===""},M3=function(t){var e=[];for(var n in t){var r=t[n];t.hasOwnProperty(n)&&!P3(r)&&(Array.isArray(r)&&r.isCss||Fc(r)?e.push("".concat(G4(n),":"),r,";"):eh(r)?e.push.apply(e,al(al(["".concat(n," {")],M3(r),!1),["}"],!1)):e.push("".concat(G4(n),": ").concat(UH(n,r),";")))}return e};function el(t,e,n,r){if(P3(t))return[];if(ax(t))return[".".concat(t.styledComponentId)];if(Fc(t)){if(!Fc(o=t)||o.prototype&&o.prototype.isReactComponent||!e)return[t];var i=t(e);return el(i,e,n,r)}var o;return t instanceof D3?n?(t.inject(n,r),[t.getName(r)]):[t]:eh(t)?M3(t):Array.isArray(t)?Array.prototype.concat.apply(mg,t.map(function(u){return el(u,e,n,r)})):[t.toString()]}function BH(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(Fc(n)&&!ax(n))return!1}return!0}var FH=E3(fg),HH=(function(){function t(e,n,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&BH(e),this.componentId=n,this.baseHash=fc(FH,n),this.baseStyle=r,R3.registerId(n)}return t.prototype.generateAndInjectStyles=function(e,n,r){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,n,r).className:"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(this.componentId,this.staticRulesId))i=Wo(i,this.staticRulesId);else{var o=sb(el(this.rules,e,n,r)),u=rb(fc(this.baseHash,o)>>>0);if(!n.hasNameForId(this.componentId,u)){var h=r(o,".".concat(u),void 0,this.componentId);n.insertRules(this.componentId,u,h)}i=Wo(i,u),this.staticRulesId=u}else{for(var f=fc(this.baseHash,r.hash),m="",v=0;v<this.rules.length;v++){var b=this.rules[v];if(typeof b=="string")m+=b;else if(b){var x=sb(el(b,e,n,r));f=fc(f,x+v),m+=x}}if(m){var C=rb(f>>>0);if(!n.hasNameForId(this.componentId,C)){var R=r(m,".".concat(C),void 0,this.componentId);n.insertRules(this.componentId,C,R)}i=Wo(i,C)}}return{className:i,css:typeof window>"u"?n.getTag().getGroup(Td(this.componentId)):""}},t})(),O3=zc?{Provider:function(t){return t.children},Consumer:function(t){return(0,t.children)(void 0)}}:ve.createContext(void 0);O3.Consumer;var r0={};function $H(t,e,n){var r=ax(t),i=t,o=!n0(t),u=e.attrs,h=u===void 0?mg:u,f=e.componentId,m=f===void 0?(function(M,z){var H=typeof M!="string"?"sc":L4(M);r0[H]=(r0[H]||0)+1;var E="".concat(H,"-").concat(S3(fg+H+r0[H]));return z?"".concat(z,"-").concat(E):E})(e.displayName,e.parentComponentId):f,v=e.displayName,b=v===void 0?(function(M){return n0(M)?"styled.".concat(M):"Styled(".concat(gH(M),")")})(t):v,x=e.displayName&&e.componentId?"".concat(L4(e.displayName),"-").concat(e.componentId):e.componentId||m,C=r&&i.attrs?i.attrs.concat(h).filter(Boolean):h,R=e.shouldForwardProp;if(r&&i.shouldForwardProp){var A=i.shouldForwardProp;if(e.shouldForwardProp){var k=e.shouldForwardProp;R=function(M,z){return A(M,z)&&k(M,z)}}else R=A}var L=new HH(n,x,r?i.componentStyle:void 0);function U(M,z){return(function(H,E,S){var j=H.attrs,D=H.componentStyle,V=H.defaultProps,B=H.foldedComponentIds,P=H.styledComponentId,ne=H.target,oe=zc?void 0:ve.useContext(O3),G=q4(),Z=H.shouldForwardProp||G.shouldForwardProp,J=hH(E,oe,V)||Bc,Se=(function(Oe,Ie,Xe){for(var ke,fe=xr(xr({},Ie),{className:void 0,theme:Xe}),Ae=0;Ae<Oe.length;Ae+=1){var dt=Fc(ke=Oe[Ae])?ke(fe):ke;for(var ye in dt)ye==="className"?fe.className=Wo(fe.className,dt[ye]):ye==="style"?fe.style=xr(xr({},fe.style),dt[ye]):fe[ye]=dt[ye]}return"className"in Ie&&typeof Ie.className=="string"&&(fe.className=Wo(fe.className,Ie.className)),fe})(j,E,J),Le=Se.as||ne,$={};for(var Q in Se)Se[Q]===void 0||Q[0]==="$"||Q==="as"||Q==="theme"&&Se.theme===J||(Q==="forwardedAs"?$.as=Se.forwardedAs:Z&&!Z(Q,Le)||($[Q]=Se[Q]));var re=(function(Oe,Ie){var Xe=q4(),ke=Oe.generateAndInjectStyles(Ie,Xe.styleSheet,Xe.stylis);return ke})(D,Se),he=re.className,Te=re.css,Ue=Wo(B,P);he&&(Ue+=" "+he),Se.className&&(Ue+=" "+Se.className),$[n0(Le)&&!w3.has(Le)?"class":"className"]=Ue,S&&($.ref=S);var te=w.createElement(Le,$);return zc&&Te?ve.createElement(ve.Fragment,null,ve.createElement("style",{precedence:"styled-components",href:"sc-".concat(P,"-").concat(he),children:Te}),te):te})(I,M,z)}U.displayName=b;var I=ve.forwardRef(U);return I.attrs=C,I.componentStyle=L,I.displayName=b,I.shouldForwardProp=R,I.foldedComponentIds=r?Wo(i.foldedComponentIds,i.styledComponentId):"",I.styledComponentId=x,I.target=r?i.target:t,Object.defineProperty(I,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(M){this._foldedDefaultProps=r?(function(z){for(var H=[],E=1;E<arguments.length;E++)H[E-1]=arguments[E];for(var S=0,j=H;S<j.length;S++)ib(z,j[S],!0);return z})({},i.defaultProps,M):M}}),ox(I,function(){return".".concat(I.styledComponentId)}),o&&N3(I,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),I}function Y4(t,e){for(var n=[t[0]],r=0,i=e.length;r<i;r+=1)n.push(e[r],t[r+1]);return n}var K4=function(t){return Object.assign(t,{isCss:!0})};function pg(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Fc(t)||eh(t))return K4(el(Y4(mg,al([t],e,!0))));var r=t;return e.length===0&&r.length===1&&typeof r[0]=="string"?el(r):K4(el(Y4(r,e)))}function lb(t,e,n){if(n===void 0&&(n=Bc),!e)throw wh(1,e);var r=function(i){for(var o=[],u=1;u<arguments.length;u++)o[u-1]=arguments[u];return t(e,n,pg.apply(void 0,al([i],o,!1)))};return r.attrs=function(i){return lb(t,e,xr(xr({},n),{attrs:Array.prototype.concat(n.attrs,i).filter(Boolean)}))},r.withConfig=function(i){return lb(t,e,xr(xr({},n),i))},r}var L3=function(t){return lb($H,t)},ot=L3;w3.forEach(function(t){ot[t]=L3(t)});function Eh(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=sb(pg.apply(void 0,al([t],e,!1))),i=S3(r);return new D3(i,r)}var cb="#121212",V3="#212121",qH="#3e3e3e",GH="#4a4a4a",U3="#a6a6a6",YH="#ececec",Mm="#ffffff",lx="#00ccff",z3="#00ff99",B3="#9933ff",F3="#ff6666",H3="#fff35c",KH="#6157ff";function W4(t,e,n,r){var i,o=!1,u=0;function h(){i&&clearTimeout(i)}function f(){h(),o=!0}typeof e!="boolean"&&(r=n,n=e,e=void 0);function m(){for(var v=arguments.length,b=new Array(v),x=0;x<v;x++)b[x]=arguments[x];var C=this,R=Date.now()-u;if(o)return;function A(){u=Date.now(),n.apply(C,b)}function k(){i=void 0}r&&!i&&A(),h(),r===void 0&&R>t?A():e!==!0&&(i=setTimeout(r?k:A,r===void 0?t-R:t))}return m.cancel=f,m}function cx(t,e,n){return n===void 0?W4(t,e,!1):W4(t,n,e!==!1)}var Q4={},X4;function WH(){return X4||(X4=1,(function(){if(typeof window!="object")return;if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});return}function t(I){try{return I.defaultView&&I.defaultView.frameElement||null}catch{return null}}var e=(function(I){for(var M=I,z=t(M);z;)M=z.ownerDocument,z=t(M);return M})(window.document),n=[],r=null,i=null;function o(I){this.time=I.time,this.target=I.target,this.rootBounds=R(I.rootBounds),this.boundingClientRect=R(I.boundingClientRect),this.intersectionRect=R(I.intersectionRect||C()),this.isIntersecting=!!I.intersectionRect;var M=this.boundingClientRect,z=M.width*M.height,H=this.intersectionRect,E=H.width*H.height;z?this.intersectionRatio=Number((E/z).toFixed(4)):this.intersectionRatio=this.isIntersecting?1:0}function u(I,M){var z=M||{};if(typeof I!="function")throw new Error("callback must be a function");if(z.root&&z.root.nodeType!=1&&z.root.nodeType!=9)throw new Error("root must be a Document or Element");this._checkForIntersections=f(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=I,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(z.rootMargin),this.thresholds=this._initThresholds(z.threshold),this.root=z.root||null,this.rootMargin=this._rootMarginValues.map(function(H){return H.value+H.unit}).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}u.prototype.THROTTLE_TIMEOUT=100,u.prototype.POLL_INTERVAL=null,u.prototype.USE_MUTATION_OBSERVER=!0,u._setupCrossOriginUpdater=function(){return r||(r=function(I,M){!I||!M?i=C():i=A(I,M),n.forEach(function(z){z._checkForIntersections()})}),r},u._resetCrossOriginUpdater=function(){r=null,i=null},u.prototype.observe=function(I){var M=this._observationTargets.some(function(z){return z.element==I});if(!M){if(!(I&&I.nodeType==1))throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:I,entry:null}),this._monitorIntersections(I.ownerDocument),this._checkForIntersections()}},u.prototype.unobserve=function(I){this._observationTargets=this._observationTargets.filter(function(M){return M.element!=I}),this._unmonitorIntersections(I.ownerDocument),this._observationTargets.length==0&&this._unregisterInstance()},u.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},u.prototype.takeRecords=function(){var I=this._queuedEntries.slice();return this._queuedEntries=[],I},u.prototype._initThresholds=function(I){var M=I||[0];return Array.isArray(M)||(M=[M]),M.sort().filter(function(z,H,E){if(typeof z!="number"||isNaN(z)||z<0||z>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return z!==E[H-1]})},u.prototype._parseRootMargin=function(I){var M=I||"0px",z=M.split(/\s+/).map(function(H){var E=/^(-?\d*\.?\d+)(px|%)$/.exec(H);if(!E)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(E[1]),unit:E[2]}});return z[1]=z[1]||z[0],z[2]=z[2]||z[0],z[3]=z[3]||z[1],z},u.prototype._monitorIntersections=function(I){var M=I.defaultView;if(M&&this._monitoringDocuments.indexOf(I)==-1){var z=this._checkForIntersections,H=null,E=null;this.POLL_INTERVAL?H=M.setInterval(z,this.POLL_INTERVAL):(m(M,"resize",z,!0),m(I,"scroll",z,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in M&&(E=new M.MutationObserver(z),E.observe(I,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))),this._monitoringDocuments.push(I),this._monitoringUnsubscribes.push(function(){var D=I.defaultView;D&&(H&&D.clearInterval(H),v(D,"resize",z,!0)),v(I,"scroll",z,!0),E&&E.disconnect()});var S=this.root&&(this.root.ownerDocument||this.root)||e;if(I!=S){var j=t(I);j&&this._monitorIntersections(j.ownerDocument)}}},u.prototype._unmonitorIntersections=function(I){var M=this._monitoringDocuments.indexOf(I);if(M!=-1){var z=this.root&&(this.root.ownerDocument||this.root)||e,H=this._observationTargets.some(function(j){var D=j.element.ownerDocument;if(D==I)return!0;for(;D&&D!=z;){var V=t(D);if(D=V&&V.ownerDocument,D==I)return!0}return!1});if(!H){var E=this._monitoringUnsubscribes[M];if(this._monitoringDocuments.splice(M,1),this._monitoringUnsubscribes.splice(M,1),E(),I!=z){var S=t(I);S&&this._unmonitorIntersections(S.ownerDocument)}}}},u.prototype._unmonitorAllIntersections=function(){var I=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var M=0;M<I.length;M++)I[M]()},u.prototype._checkForIntersections=function(){if(!(!this.root&&r&&!i)){var I=this._rootIsInDom(),M=I?this._getRootRect():C();this._observationTargets.forEach(function(z){var H=z.element,E=x(H),S=this._rootContainsTarget(H),j=z.entry,D=I&&S&&this._computeTargetAndRootIntersection(H,E,M),V=null;this._rootContainsTarget(H)?(!r||this.root)&&(V=M):V=C();var B=z.entry=new o({time:h(),target:H,boundingClientRect:E,rootBounds:V,intersectionRect:D});j?I&&S?this._hasCrossedThreshold(j,B)&&this._queuedEntries.push(B):j&&j.isIntersecting&&this._queuedEntries.push(B):this._queuedEntries.push(B)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},u.prototype._computeTargetAndRootIntersection=function(I,M,z){if(window.getComputedStyle(I).display!="none"){for(var H=M,E=L(I),S=!1;!S&&E;){var j=null,D=E.nodeType==1?window.getComputedStyle(E):{};if(D.display=="none")return null;if(E==this.root||E.nodeType==9)if(S=!0,E==this.root||E==e)r&&!this.root?!i||i.width==0&&i.height==0?(E=null,j=null,H=null):j=i:j=z;else{var V=L(E),B=V&&x(V),P=V&&this._computeTargetAndRootIntersection(V,B,z);B&&P?(E=V,j=A(B,P)):(E=null,H=null)}else{var ne=E.ownerDocument;E!=ne.body&&E!=ne.documentElement&&D.overflow!="visible"&&(j=x(E))}if(j&&(H=b(j,H)),!H)break;E=E&&L(E)}return H}},u.prototype._getRootRect=function(){var I;if(this.root&&!U(this.root))I=x(this.root);else{var M=U(this.root)?this.root:e,z=M.documentElement,H=M.body;I={top:0,left:0,right:z.clientWidth||H.clientWidth,width:z.clientWidth||H.clientWidth,bottom:z.clientHeight||H.clientHeight,height:z.clientHeight||H.clientHeight}}return this._expandRectByRootMargin(I)},u.prototype._expandRectByRootMargin=function(I){var M=this._rootMarginValues.map(function(H,E){return H.unit=="px"?H.value:H.value*(E%2?I.width:I.height)/100}),z={top:I.top-M[0],right:I.right+M[1],bottom:I.bottom+M[2],left:I.left-M[3]};return z.width=z.right-z.left,z.height=z.bottom-z.top,z},u.prototype._hasCrossedThreshold=function(I,M){var z=I&&I.isIntersecting?I.intersectionRatio||0:-1,H=M.isIntersecting?M.intersectionRatio||0:-1;if(z!==H)for(var E=0;E<this.thresholds.length;E++){var S=this.thresholds[E];if(S==z||S==H||S<z!=S<H)return!0}},u.prototype._rootIsInDom=function(){return!this.root||k(e,this.root)},u.prototype._rootContainsTarget=function(I){var M=this.root&&(this.root.ownerDocument||this.root)||e;return k(M,I)&&(!this.root||M==I.ownerDocument)},u.prototype._registerInstance=function(){n.indexOf(this)<0&&n.push(this)},u.prototype._unregisterInstance=function(){var I=n.indexOf(this);I!=-1&&n.splice(I,1)};function h(){return window.performance&&performance.now&&performance.now()}function f(I,M){var z=null;return function(){z||(z=setTimeout(function(){I(),z=null},M))}}function m(I,M,z,H){typeof I.addEventListener=="function"?I.addEventListener(M,z,H):typeof I.attachEvent=="function"&&I.attachEvent("on"+M,z)}function v(I,M,z,H){typeof I.removeEventListener=="function"?I.removeEventListener(M,z,H):typeof I.detachEvent=="function"&&I.detachEvent("on"+M,z)}function b(I,M){var z=Math.max(I.top,M.top),H=Math.min(I.bottom,M.bottom),E=Math.max(I.left,M.left),S=Math.min(I.right,M.right),j=S-E,D=H-z;return j>=0&&D>=0&&{top:z,bottom:H,left:E,right:S,width:j,height:D}||null}function x(I){var M;try{M=I.getBoundingClientRect()}catch{}return M?(M.width&&M.height||(M={top:M.top,right:M.right,bottom:M.bottom,left:M.left,width:M.right-M.left,height:M.bottom-M.top}),M):C()}function C(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function R(I){return!I||"x"in I?I:{top:I.top,y:I.top,bottom:I.bottom,left:I.left,x:I.left,right:I.right,width:I.width,height:I.height}}function A(I,M){var z=M.top-I.top,H=M.left-I.left;return{top:z,left:H,height:M.height,width:M.width,bottom:z+M.height,right:H+M.width}}function k(I,M){for(var z=M;z;){if(z==I)return!0;z=L(z)}return!1}function L(I){var M=I.parentNode;return I.nodeType==9&&I!=e?t(I):(M&&M.assignedSlot&&(M=M.assignedSlot.parentNode),M&&M.nodeType==11&&M.host?M.host:M)}function U(I){return I&&I.nodeType===9}window.IntersectionObserver=u,window.IntersectionObserverEntry=o})()),Q4}WH();var QH=Object.defineProperty,J4=Object.getOwnPropertySymbols,XH=Object.prototype.hasOwnProperty,JH=Object.prototype.propertyIsEnumerable,Z4=(t,e,n)=>e in t?QH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dd=(t,e)=>{for(var n in e||(e={}))XH.call(e,n)&&Z4(t,n,e[n]);if(J4)for(var n of J4(e))JH.call(e,n)&&Z4(t,n,e[n]);return t},ZH=(t,e,n)=>{const r=X0(t,[n]),i=X0(e,[n]);return r[n]&&i[n]?dd(dd(dd({},t),e),{[n]:r[n]+", "+i[n]}):dd(dd({},t),e)},e$=ZH,ux=(typeof window<"u"?window:global)||{},eT,t$=((eT=ux)==null?void 0:eT.GIPHY_PINGBACK_URL)||"https://pingback.giphy.com",n$=`${t$}/v2/pingback?apikey=l0HlIwPWyBBUDAUgM`,r$=t=>{const e=tx();return e?.set("Content-Type","application/json"),cr.debug("Pingback session",t),t.length?fetch(n$,{method:"POST",body:JSON.stringify({events:t}),headers:e}).catch(n=>{cr.warn(`pingbacks failing to post ${n}`)}):new Promise(n=>n())},ub=[];ux.giphyRandomId=ex();var am="";function dx(){const t=[...ub];ub=[],r$(t)}var s$=cx(1e3,dx),tT,nT;(nT=(tT=ux).addEventListener)==null||nT.call(tT,"beforeunload",dx);var i$=({userId:t,eventType:e,actionType:n,attributes:r,queueEvents:i=!0,analyticsResponsePayload:o})=>{am=t?String(t):am;const u={ts:Date.now(),attributes:r,action_type:n,user_id:ex(),analytics_response_payload:o};am&&(u.logged_in_user_id=am),u.analytics_response_payload&&(u.analytics_response_payload=`${u.analytics_response_payload}${cr.ENABLED?"&mode=verification":""}`),e&&(u.event_type=e),ub.push(u),i?s$():dx()},hx=i$;const a$=$5($F);var om={},rT;function o$(){if(rT)return om;rT=1,Object.defineProperty(om,"__esModule",{value:!0});var t=po();function e(n,r){r===void 0&&(r=0);var i=t.useRef(!1),o=t.useRef(),u=t.useRef(n),h=t.useCallback(function(){return i.current},[]),f=t.useCallback(function(){i.current=!1,o.current&&clearTimeout(o.current),o.current=setTimeout(function(){i.current=!0,u.current()},r)},[r]),m=t.useCallback(function(){i.current=null,o.current&&clearTimeout(o.current)},[]);return t.useEffect(function(){u.current=n},[n]),t.useEffect(function(){return f(),m},[r]),[h,m,f]}return om.default=e,om}var l$=o$();const c$=rh(l$);var lm={},cm={},Zr={},sT;function u$(){if(sT)return Zr;sT=1,Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.isNavigator=Zr.isBrowser=Zr.off=Zr.on=Zr.noop=void 0;var t=function(){};Zr.noop=t;function e(r){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];r&&r.addEventListener&&r.addEventListener.apply(r,i)}Zr.on=e;function n(r){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];r&&r.removeEventListener&&r.removeEventListener.apply(r,i)}return Zr.off=n,Zr.isBrowser=typeof window<"u",Zr.isNavigator=typeof navigator<"u",Zr}var iT;function d$(){if(iT)return cm;iT=1,Object.defineProperty(cm,"__esModule",{value:!0});var t=po(),e=u$(),n=e.isBrowser?t.useLayoutEffect:t.useEffect;return cm.default=n,cm}var aT;function h$(){if(aT)return lm;aT=1,Object.defineProperty(lm,"__esModule",{value:!0});var t=a$,e=po(),n=t.__importDefault(d$()),r=function(i,o){i===void 0&&(i=1e12),o===void 0&&(o=0);var u=e.useState(0),h=u[0],f=u[1];return n.default(function(){var m,v,b,x=function(){var k=Math.min(1,(Date.now()-b)/i);f(k),C()},C=function(){m=requestAnimationFrame(x)},R=function(){v=setTimeout(function(){cancelAnimationFrame(m),f(1)},i),b=Date.now(),C()},A=setTimeout(R,o);return function(){clearTimeout(v),clearTimeout(A),cancelAnimationFrame(m)}},[i,o]),h};return lm.default=r,lm}var f$=h$();const m$=rh(f$);var p$=Object.defineProperty,g$=Object.defineProperties,v$=Object.getOwnPropertyDescriptors,oT=Object.getOwnPropertySymbols,y$=Object.prototype.hasOwnProperty,b$=Object.prototype.propertyIsEnumerable,lT=(t,e,n)=>e in t?p$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,aa=(t,e)=>{for(var n in e||(e={}))y$.call(e,n)&&lT(t,n,e[n]);if(oT)for(var n of oT(e))b$.call(e,n)&&lT(t,n,e[n]);return t},fx=(t,e)=>g$(t,v$(e)),mx=(t,e,n)=>new Promise((r,i)=>{var o=f=>{try{h(n.next(f))}catch(m){i(m)}},u=f=>{try{h(n.throw(f))}catch(m){i(m)}},h=f=>f.done?r(f.value):Promise.resolve(f.value).then(o,u);h((n=n.apply(t,e)).next())}),x$=t=>{var e,n;if(!t)return"";const r=(n=(e=t?.split("."))==null?void 0:e.pop())==null?void 0:n.toLowerCase();return t.replace(`.${r}`,`/80h.${r}`)},_$=ot.img`
    object-fit: cover;
    width: 32px;
    height: 32px;
    margin-right: 8px;
`,w$=({user:t,className:e=""})=>{const n=w.useRef(Math.floor(Math.random()*5)+1),r=t.avatar_url?x$(t.avatar_url):`https://media.giphy.com/avatars/default${n.current}.gif`;return ve.createElement(_$,{src:r,className:e})},gg=w$,th=({className:t="",size:e=17,fill:n="#15CDFF"})=>ve.createElement("svg",{className:[th.className,t].join(" "),height:e,width:"19px",viewBox:"0 0 19 17"},ve.createElement("path",{className:th.checkMarkClassName,d:"M9.32727273,9.44126709 L9.32727273,3.03016561 L6.55027155,3.03016561 L6.55027155,10.8150746 L6.55027155,12.188882 L12.1042739,12.188882 L12.1042739,9.44126709 L9.32727273,9.44126709 Z",fill:cb,transform:"translate(9.327273, 7.609524) scale(-1, 1) rotate(-45.000000) translate(-9.327273, -7.609524) "}),ve.createElement("g",{transform:"translate(-532.000000, -466.000000)",fill:n},ve.createElement("g",{transform:"translate(141.000000, 235.000000)"},ve.createElement("g",{transform:"translate(264.000000, 0.000000)"},ve.createElement("g",{transform:"translate(10.000000, 224.000000)"},ve.createElement("g",{transform:"translate(114.000000, 2.500000)"},ve.createElement("path",{d:"M15.112432,4.80769231 L16.8814194,6.87556817 L19.4157673,7.90116318 L19.6184416,10.6028916 L21.0594951,12.9065042 L19.6184416,15.2101168 L19.4157673,17.9118452 L16.8814194,18.9374402 L15.112432,21.0053161 L12.4528245,20.3611511 L9.79321699,21.0053161 L8.02422954,18.9374402 L5.48988167,17.9118452 L5.28720734,15.2101168 L3.84615385,12.9065042 L5.28720734,10.6028916 L5.48988167,7.90116318 L8.02422954,6.87556817 L9.79321699,4.80769231 L12.4528245,5.4518573 L15.112432,4.80769231 Z M17.8163503,10.8991009 L15.9282384,9.01098901 L11.5681538,13.3696923 L9.68115218,11.4818515 L7.81302031,13.3499833 L9.7011322,15.2380952 L11.5892441,17.1262071 L17.8163503,10.8991009 Z"})))))));th.className="giphy-verified-badge";th.checkMarkClassName="giphy-verified-checkmark";var db=th,E$=ot.div`
    color: white;
    font-size: 16px;
    font-weight: 700;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    -webkit-font-smoothing: antialiased;
`,S$=ot(db)`
    margin-left: 4px;
    flex-shrink: 0;
`,T$=ot.div`
    display: flex;
    align-items: center;
    min-width: 0;
`,C$=({user:t})=>{const{display_name:e,username:n}=t;return ve.createElement(T$,null,ve.createElement(E$,null,e||`@${n}`),t.is_verified?ve.createElement(S$,{size:14}):null)},$3=C$,k$=ot.div`
    display: flex;
    align-items: center;
    font-family: interface, helvetica, arial;
`,N$=ot(gg)`
    flex-shrink: 0;
`,px=({gif:t,className:e,onClick:n})=>{const{user:r}=t;return!r?.username&&!r?.display_name?null:ve.createElement(k$,{className:[px.className,e].join(" "),onClick:i=>{if(i.preventDefault(),i.stopPropagation(),n)n(t);else{const o=r.profile_url;o&&window.open(o,"_blank")}}},ve.createElement(N$,{user:r}),ve.createElement($3,{user:t.user}))};px.className="giphy-attribution";var A$=px,R$=ot.div`
    background: linear-gradient(rgba(0, 0, 0, 0), rgba(18, 18, 18, 0.6));
    cursor: default;
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 75px;
    pointer-events: none;
`,I$=ot(A$)`
    position: absolute;
    bottom: 10px;
    left: 10px;
    right: 10px;
`,j$=ot.div`
    transition: opacity 150ms ease-in;
`,D$=({gif:t,isHovered:e,onClick:n})=>{const r=w.useRef(e);return e&&(r.current=!0),t.user&&r.current?ve.createElement(j$,{style:{opacity:e?1:0}},ve.createElement(R$,null),ve.createElement(I$,{gif:t,onClick:n})):null},P$=D$,M$=({children:t,className:e,onVisibleChange:n,config:r})=>{const i=w.useRef(null);return w.useEffect(()=>{let o;return i.current&&(o=new IntersectionObserver(([u])=>{n&&n(u.isIntersecting)},r),o.observe(i.current)),()=>o?.disconnect()},[n,i,r]),ve.createElement("div",{ref:i,className:e},t)},q3=M$,G3=t=>(e,n,r,i={})=>{e.analytics_response_payload&&hx({analyticsResponsePayload:e.analytics_response_payload,userId:n,actionType:t,attributes:aa({position:JSON.stringify(hF(r))},i)})},O$=(t,e,n,r={})=>{t.analytics_response_payload&&hx({analyticsResponsePayload:t.analytics_response_payload,userId:e,actionType:"SEEN",attributes:aa({position:JSON.stringify(n)},r)})},L$=G3("CLICK"),V$=G3("HOVER");function U$(t){return t=t.replace("%%CACHEBUSTER%%",MR()),t=t.replace("%%TIMESTAMP%%",`${Date.now()}`),t=t.replace("%%APPBUNDLE%%","web"),typeof window<"u"&&(t=t.replace("%%APP_WINDOW_SIZE%%",`${window.innerWidth},${window.innerHeight}`),t=t.replace("%%DEVICE_LANGUAGE%%",`${navigator.language}`)),t}function z$({src:t}){const e=w.useRef(U$(t)),[n,r]=w.useState(!1);return w.useEffect(()=>{r(!0)},[]),n?ve.createElement("img",{src:e.current,width:0,height:0}):null}var B$=z$,hb=w.createContext({}),F$=({attributes:t,children:e})=>{const{attributes:n={}}=w.useContext(hb);return ve.createElement(hb.Provider,{value:{attributes:e$(n,t,"layout_type")}},e)},Y3=F$,H$=ot.div`
    position: relative;
    display: block;
    picture {
        display: block;
        width: 100%;
        height: 100%;
    }
    img {
        display: block;
    }
    .${db.className} {
        g {
            fill: white;
        }
    }
    .${db.checkMarkClassName} {
        opacity: 0;
    }
`,cT=[lx,z3,B3,F3,H3],$$=()=>cT[Math.round(Math.random()*(cT.length-1))],q$=200,uT="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",G$=!!(typeof window<"u"&&window.document&&window.document.createElement),lc=()=>{},Y$=({children:t})=>{const[e,n]=w.useState(!1);return w.useEffect(()=>{n(!0)},[]),e?ve.createElement(ve.Fragment,null,t):null},Ja=({gif:t,gif:{bottle_data:e={}},width:n,percentWidth:r,percentHeight:i,height:o,onGifRightClick:u=lc,className:h="",onGifClick:f=lc,onGifKeyPress:m=lc,onGifSeen:v=lc,onGifVisible:b=lc,user:x={},backgroundColor:C,overlay:R,hideAttribution:A=!1,noLink:k=!1,borderRadius:L=4,style:U,tabIndex:I,lazyLoad:M=!0})=>{var z;const[H,E]=w.useState(!1),[S,j]=w.useState(!1),[D,V]=w.useState(!G$||!M),[B,P]=w.useState(""),ne=w.useRef($$()),oe=w.useRef(null),G=w.useRef(null),Z=w.useRef(),J=w.useRef(),Se=w.useRef(),Le=w.useRef(lc),$=Object.keys(e).length>0,{attributes:Q}=w.useContext(hb);let re=R;!re&&!A&&(re=P$);const he=De=>{clearTimeout(Se.current),De.persist(),j(!0),Se.current=window.setTimeout(()=>{V$(t,x?.id,De.target,Q)},q$)},Te=()=>{clearTimeout(Se.current),j(!1)},Ue=De=>{L$(t,x?.id,De.target,Q),f(t,De)},te=De=>{m(t,De)};Le.current=De=>{E(!0),cr.debug(`GIF ${t.id} seen. ${t.title}`),O$(t,x?.id,De.boundingClientRect,Q),v?.(t,De.boundingClientRect),J.current&&J.current.disconnect()};const Oe=()=>{J.current||(J.current=new IntersectionObserver(([De])=>{De.isIntersecting&&Le.current(De)},{threshold:[.99]})),!H&&oe.current&&J.current&&J.current.observe(oe.current)},Ie=De=>{Oe(),b(t,De),P(Ja.imgLoadedClassName)};w.useEffect(()=>{var De,K;(De=G.current)!=null&&De.complete&&(Oe(),b(t)),(K=J.current)==null||K.disconnect(),E(!1)},[t.id]),w.useEffect(()=>(Z.current=new IntersectionObserver(([De])=>{const{isIntersecting:K}=De;V(K),!K&&J.current&&J.current.disconnect()}),Z.current.observe(oe.current),()=>{Z.current&&Z.current.disconnect(),J.current&&J.current.disconnect(),Se.current&&clearTimeout(Se.current)}),[]);const Xe=og(t,n);let ke=o;!U?.aspectRatio&&!o&&(ke=Xe);const fe=mF(t.images,n,o||Xe);if(!fe)return t.images?console.error(`no rendition for ${t.id}, rendition names: ${Object.keys(t.images).join(", ")}`):console.error(`no rendition for ${t.id} - no images`),null;const Ae=t.images[fe.renditionName],ye=B===Ja.imgLoadedClassName&&!t.is_sticker?"unset":C||(t.is_sticker?"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4AQMAAACSSKldAAAABlBMVEUhIiIWFhYoSqvJAAAAGElEQVQY02MAAv7///8PWxqIPwDZw5UGABtgwz2xhFKxAAAAAElFTkSuQmCC') 0 0":ne.current),Ve=L?"hidden":"unset";return ve.createElement(H$,{as:k?"div":"a",href:k?void 0:t.url,"data-giphy-id":t.id,"data-giphy-is-sticker":t.is_sticker,style:aa({width:r||n,height:i||ke,overflow:Ve,borderRadius:L},U),className:[Ja.className,h].join(" "),onMouseOver:he,onMouseLeave:Te,onClick:Ue,onContextMenu:De=>u(t,De),onKeyPress:te,tabIndex:I,ref:oe},ve.createElement("picture",null,ve.createElement("source",{type:"image/webp",srcSet:D?Ae.webp:uT,suppressHydrationWarning:!0}),ve.createElement("img",{ref:G,suppressHydrationWarning:!0,className:[Ja.imgClassName,B].join(" "),src:D?Ae.url:uT,style:{background:ye},width:"100%",height:"100%",alt:gF(t),onLoad:D?Ie:()=>{}})),$&&((z=e?.tags)==null?void 0:z.map((De,K)=>ve.createElement(B$,{src:De,key:K}))),re&&ve.createElement(Y$,null,D&&ve.createElement(re,{gif:t,isHovered:S,width:n,height:ke})))};Ja.className="giphy-gif";Ja.imgClassName="giphy-gif-img";Ja.imgLoadedClassName="giphy-img-loaded";var nh=Ja,K$=ot.div`
    -webkit-overflow-scrolling: touch;
    overflow-x: auto;
    overflow-y: hidden;
    white-space: nowrap;
    position: relative;
`,W$=ot(nh)`
    position: relative;
    display: inline-block;
    list-style: none;
    margin-left: ${t=>t.$ml}px;
    /* make sure gifs are fully visible with a scrollbar */
    margin-bottom: 1px;

    &:first-of-type {
        margin-left: 0;
    }
    .${nh.imgClassName} {
        position: absolute;
        top: 0;
        left: 0;
    }
`,Q$=ot(q3)`
    display: inline-block;
`,X$=ot.div`
    width: 30px;
    display: inline-block;
    opacity: ${t=>t.$isFirstLoad?0:1};
    height: ${t=>t.$height}px;
`,J$=Object.freeze({gutter:6,user:{},initialGifs:[]}),Z$=Object.freeze({isFetching:!1,gifs:[],isLoaderVisible:!1,isDoneFetching:!1}),K3=class W3 extends w.PureComponent{constructor(){super(...arguments),this.state=fx(aa({},Z$),{gifs:this.props.initialGifs||[]}),this.unmounted=!1,this.paginator=zR(this.props.fetchGifs,this.state.gifs),this.onLoaderVisible=e=>{this.unmounted||this.setState({isLoaderVisible:e},this.onFetch)},this.onFetch=cx(100,()=>mx(this,null,function*(){if(this.unmounted)return;const{isFetching:e,isLoaderVisible:n,gifs:r}=this.state;if(!e&&n){this.setState({isFetching:!0});let i;try{i=yield this.paginator()}catch{this.setState({isFetching:!1})}if(i)if(!!!i?.skipCountCheck&&r.length===i.length)this.setState({isDoneFetching:!0});else{this.setState({gifs:i,isFetching:!1});const{onGifsFetched:u}=this.props;u&&u(i),this.onFetch()}}}))}componentDidMount(){this.unmounted=!1,this.onFetch()}componentWillUnmount(){this.unmounted=!0}render(){const{onGifVisible:e,onGifRightClick:n,gifHeight:r,gifWidth:i,gutter:o,className:u=W3.className,onGifSeen:h,onGifClick:f,onGifKeyPress:m,user:v,overlay:b,hideAttribution:x,noLink:C,noResultsMessage:R,backgroundColor:A,borderRadius:k,tabIndex:L=0,loaderConfig:U}=this.props,{gifs:I,isDoneFetching:M}=this.state,z=!M,H=I.length===0;return ve.createElement(Y3,{attributes:{layout_type:"CAROUSEL"}},ve.createElement(K$,{className:u},I.map(E=>ve.createElement(W$,{gif:E,key:E.id,tabIndex:L,width:i||pF(E,r),height:r,onGifClick:f,onGifKeyPress:m,onGifSeen:h,onGifVisible:e,onGifRightClick:n,user:v,$ml:o,overlay:b,hideAttribution:x,noLink:C,borderRadius:k,backgroundColor:A})),!z&&I.length===0&&R,z&&ve.createElement(Q$,{onVisibleChange:this.onLoaderVisible,config:U},ve.createElement(X$,{$isFirstLoad:H,$height:r}))))}};K3.className="giphy-carousel";K3.defaultProps=J$;var eq=ot.div`
    color: ${U3};
    display: flex;
    justify-content: center;
    margin: 30px 0;
    font-family: interface, Helvetica Neue, helvetica, sans-serif;
    font-size: 16px;
    font-weight: 600;
    a {
        color: ${lx};
        cursor: pointer;
        &:hover {
            color: white;
        }
    }
`,tq=({onClick:t})=>ve.createElement(eq,null,"Error loading GIFs.",ve.createElement("a",{onClick:t},"Try again?")),nq=tq,rq=.75;ot.div`
    align-items: center;
    background-color: ${({$backgroundColor:t})=>t};
    border-radius: 16px;
    display: flex;
    max-width: fit-content;
    overflow: hidden;
    padding: 4px 5px 5px 6px;
`;ot.div`
    overflow-x: auto;
    overflow-y: hidden;
    position: relative;
    -webkit-overflow-scrolling: touch;
`;ot.div`
    display: inline-flex;
    justify-content: space-between;
    overflow: hidden;
    white-space: nowrap;
    width: ${({$width:t})=>`${t}px`};
`;ot.div`
    background-color: ${({$color:t})=>t};
    box-sizing: border-box;
    height: ${({$gifHeight:t})=>`${Math.round(t*rq)}px`};
    margin: ${({$gutter:t})=>`0 ${t}px`};
    width: 2px;
`;ot(nh)`
    display: inline-block;
    flex-shrink: 0;
    list-style: none;
    /* make sure gifs are fully visible with a scrollbar */
    margin-bottom: 1px;
    position: relative;

    .${nh.imgClassName} {
        position: absolute;
        top: 0;
        left: 0;
    }
`;var sq=Eh`
     to {
    transform: scale(1.75) translateY(-20px);
  }
`,Q3=52,iq=ot.div`
    display: flex;
    align-items: center;
    height: ${Q3}px;
    margin: 0 auto;
    text-align: center;
    justify-content: center;
    animation: pulse 0.8s ease-in-out 0s infinite alternate backwards;
`,hd=ot.div`
    display: inline-block;
    height: 10px;
    width: 10px;
    margin: ${Q3}px 10px 10px 10px;
    position: relative;
    box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.3);
    animation: ${sq} cubic-bezier(0.455, 0.03, 0.515, 0.955) 0.75s infinite alternate;
    background: ${t=>t.$color};
    animation-delay: ${t=>t.$delay};
`,aq=({className:t=""})=>ve.createElement(iq,{className:t},ve.createElement(hd,{$color:z3,$delay:"0"}),ve.createElement(hd,{$color:lx,$delay:".1s"}),ve.createElement(hd,{$color:B3,$delay:".2s"}),ve.createElement(hd,{$color:F3,$delay:".3s"}),ve.createElement(hd,{$color:H3,$delay:".4s"})),oq=aq,lq=ot.div`
    opacity: ${t=>t.$isFirstLoad?0:1};
`;function dT(t,e,n=[]){return Array.apply(null,Array(t)).map((r,i)=>n[i]||e)}function cq(t,e,n,r){const i=dT(t,[]),o=dT(t,0,e);return n.forEach(u=>{const h=o.indexOf(Math.min(...o));i[h]=[...i[h],u],o[h]+=og(u,r)}),i}var uq=Object.freeze({gutter:6,user:{},initialGifs:[]}),dq=Object.freeze({isFetching:!1,isError:!1,gifs:[],isLoaderVisible:!1,isDoneFetching:!1}),au=class Om extends w.PureComponent{constructor(){super(...arguments),this.state=fx(aa({},dq),{gifs:this.props.initialGifs||[]}),this.unmounted=!1,this.paginator=zR(this.props.fetchGifs,this.state.gifs),this.onLoaderVisible=e=>{this.unmounted||this.setState({isLoaderVisible:e},this.onFetch)},this.onFetch=cx(Om.fetchDebounce,()=>mx(this,null,function*(){if(this.unmounted)return;const{isFetching:e,isLoaderVisible:n}=this.state,{externalGifs:r}=this.props,i=(r||this.state.gifs).length;if(!e&&n){this.setState({isFetching:!0,isError:!1});let o;try{if(o=yield this.paginator(r),this.unmounted)return}catch(u){if(this.unmounted)return;this.setState({isFetching:!1,isError:!0});const{onGifsFetchError:h}=this.props;h&&h(u)}if(o)if(!!!o?.skipCountCheck&&i===o.length)this.setState({isDoneFetching:!0});else{this.setState({gifs:o,isFetching:!1});const{onGifsFetched:h}=this.props;h&&h(o),this.onFetch()}}}))}componentDidMount(){this.unmounted=!1,this.onFetch()}componentWillUnmount(){this.unmounted=!0}render(){const{onGifVisible:e,onGifRightClick:n,className:r=Om.className,onGifSeen:i,onGifClick:o,onGifKeyPress:u,user:h,overlay:f,hideAttribution:m,noLink:v,borderRadius:b,noResultsMessage:x,columns:C,width:R,gutter:A,percentWidth:k,columnOffsets:L,backgroundColor:U,loaderConfig:I,tabIndex:M=0,layoutType:z="GRID",loader:H=oq,eagerIds:E}=this.props,{gifs:S,isError:j,isDoneFetching:D}=this.state,V=!D,B=S.length===0,P=A*(C-1),ne=(R-P)/C,oe=cq(C,L,S,ne);return ve.createElement(Y3,{attributes:{layout_type:z}},ve.createElement("div",{className:r},ve.createElement("div",{style:{width:k||R,display:"flex",gap:A}},oe.map((G=[],Z)=>ve.createElement("div",{key:Z,style:{display:"flex",flexDirection:"column",gap:A,width:k?"100%":ne,marginTop:L?.[Z]}},G.map(J=>ve.createElement(nh,{style:{aspectRatio:J.images.original.width/J.images.original.height},gif:J,tabIndex:M,key:J.id,width:ne,percentWidth:k?"100%":void 0,onGifClick:o,onGifKeyPress:u,onGifSeen:i,onGifVisible:e,onGifRightClick:n,user:h,overlay:f,backgroundColor:U,hideAttribution:m,noLink:v,borderRadius:b,lazyLoad:!E?.includes(J.id)}))))),!V&&S.length===0&&x,j?ve.createElement(nq,{onClick:this.onFetch}):V&&ve.createElement(q3,{onVisibleChange:this.onLoaderVisible,config:I},ve.createElement(lq,{$isFirstLoad:B},ve.createElement(H,{className:Om.loaderClassName})))))}};au.className="giphy-grid";au.loaderClassName="loader";au.fetchDebounce=250;au.defaultProps=uq;au.getDerivedStateFromProps=({externalGifs:t},e)=>t&&t!==e.gifs?{gifs:t}:null;var hq=au,X3=hq,zn={searchbarHeight:"--searchbar-height",bgColor:"--searchbar-bg-color",bgColor2:"--searchbar-bg-color-2",fgColor:"--searchbar-fg-color",cancelButtonDisplay:"--searchbar-cancel-button-display"};ot.div`
    ${zn.searchbarHeight}: ${t=>t.$searchbarHeight||42}px;
    @media (${t=>t.$mobileMediaQuery}) {
        ${zn.searchbarHeight}: ${t=>t.$mobileSearchbarHeight||35}px;
    }
    ${zn.bgColor}: ${Mm};
    ${zn.bgColor2}: ${Mm};
    ${zn.fgColor}: ${cb};
    ${t=>t.$darkMode&&pg`
            ${zn.fgColor}: ${Mm};
            ${zn.bgColor}: ${cb};
            ${zn.bgColor2}: ${GH};
        `}
    ${zn.cancelButtonDisplay}: ${t=>t.$hideCancelButton?"none":"block"};
`;w.createContext({});w.createContext({});ot.svg`
    position: relative;
    right: 10px;
    margin-left: 5px;
    cursor: pointer;
    display: var(${zn.cancelButtonDisplay});
`;var J3=6,gx=`calc(var(${zn.searchbarHeight}) - ${J3*2}px)`,fq=Eh`
to {
    width: ${gx};
}
`;ot(gg)`
    height: ${gx};
    margin: 0;
    width: 0;
    animation: ${fq} 100ms ease-in-out forwards;
`;ot.div`
    background: var(${zn.bgColor2});
    display: flex;
    align-items: center;
    padding-left: ${J3}px;
`;ot.div`
    background: ${YH};
    display: flex;
    padding: 0 4px;
    color: ${qH};
    font-family: interface, Helvetica Neue, helvetica, sans-serif;
    font-weight: 600;
    font-size: 12px;
    align-items: center;
    height: ${gx};
    @media (max-width: 480px) {
        display: none;
    }
`;var mq=({className:t=""})=>ve.createElement("svg",{viewBox:"0 0 30 30",version:"1.1",className:t},ve.createElement("defs",null,ve.createElement("path",{d:"M11.5482521,20.4090671 L4.24727698,28.2009189 C3.68084207,28.8054377 2.73159653,28.8363108 2.12707771,28.2698759 C1.5225589,27.703441 1.4916858,26.7541954 2.0581207,26.1496766 L9.40599838,18.3077689 C7.95982241,16.4371424 7.0978836,14.0789715 7.0978836,11.5181818 C7.0978836,5.44914339 11.9392549,0.518181818 17.9252787,0.518181818 C23.9113026,0.518181818 28.7526738,5.44914339 28.7526738,11.5181818 C28.7526738,17.5872202 23.9113026,22.5181818 17.9252787,22.5181818 C15.539851,22.5181818 13.3361963,21.7351359 11.5482521,20.4090671 Z M17.9252787,19.5181818 C22.242011,19.5181818 25.7526738,15.9425536 25.7526738,11.5181818 C25.7526738,7.09381 22.242011,3.51818182 17.9252787,3.51818182 C13.6085464,3.51818182 10.0978836,7.09381 10.0978836,11.5181818 C10.0978836,15.9425536 13.6085464,19.5181818 17.9252787,19.5181818 Z",id:"giphy-search-icon-path-1"})),ve.createElement("g",{id:"search",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},ve.createElement("g",{id:"icons/search"},ve.createElement("mask",{id:"giphy-search-icon-mask-2",fill:"white"},ve.createElement("use",{xlinkHref:"#giphy-search-icon-path-1"})),ve.createElement("use",{id:"Mask",fill:"#FFFFFF",fillRule:"nonzero",xlinkHref:"#giphy-search-icon-path-1"}),ve.createElement("g",{mask:"url(#giphy-search-icon-mask-2)"},ve.createElement("g",{transform:"translate(0.250000, 0.250000)"},ve.createElement("g",null)))))),pq=mq,gq="2s",s0="#E646B6",hT="#FF6666",Z3="cubic-bezier(0.920, 0.240, 0.185, 0.730)",vq=Eh`
    0% {
      transform: rotate(34deg) translate(-10px, 80px);
    };
    
    100% {
      transform: rotate(34deg) translate(-10px, -20px);
    }
`,yq=Eh`
    0% { 
      transform: translate(0px, 0px);
      opacity: 0;
    }
    50% {
      opacity: 1;
    }
    100% {
      transform: translate(10px, -17px);
      opacity: 0;
    }
`,bq=Eh`
    0% {
      opacity: 0;
      transform: translateX(-400%);
    }
    50% {
      opacity: 1;
    }
    100% {
      opacity: 0;
      transform: translateX(0);
    }
`;ot.div`
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    cursor: pointer;
    @media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {
        display: none;
    }
    height: var(${zn.searchbarHeight});
    width: var(${zn.searchbarHeight});
`;ot.div`
    position: absolute;
    height: 100%;
    width: 100%;
    background: linear-gradient(45deg, ${s0} 0%, ${hT} 100%);
    border-radius: 0 4px 4px 0;
    overflow: hidden;
    &:before {
        animation: ${bq} ${gq} linear 0s infinite;
        background-image: linear-gradient(45deg, ${s0} 0%, ${hT} 50%, ${s0} 100%);
        background-size: 400%;
        background-position: 0% 100%;
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        width: 400%;
    }
`;ot.div`
    width: 100%;
    height: 100%;
    position: absolute;
    overflow: hidden;
    &::after {
        content: '+';
        color: white;
        font-family: 'SS Standard';
        font-size: 8px;
        position: absolute;
        top: 65%;
        left: 66%;
        animation: ${yq} 1s ${Z3} 0s 1 forwards;
    }
`;ot.div`
    position: absolute;
    width: 200%;
    height: 20px;
    background: rgba(255, 255, 255, 0.5);
    transform: rotate(34deg) translate(-10px, -20px);
    animation: ${vq} 1s ${Z3} 0s 1;
    filter: blur(1px);
`;ot(pq)`
    z-index: 1;
    display: flex;
    width: 50%;
    height: 50%;
`;ot.div`
    display: flex;
    background: white;
    align-items: center;
    border-radius: 4px;
    height: var(${zn.searchbarHeight});
    background: var(${zn.bgColor2});
`;ot.input`
    background: inherit;
    box-sizing: border-box;
    border: 0;
    appearance: none;
    font-weight: normal;
    font-family: interface, Helvetica Neue, helvetica, sans-serif;
    outline: 0;
    font-size: 15px;
    padding: 0 10px;
    border-radius: 0;
    text-overflow: ellipsis;
    color: var(${zn.fgColor});
    &::placeholder {
        color: ${U3};
    }
    min-width: 150px;
    flex: 1;
    ${t=>t.$isUsernameSearch&&pg`
            color: ${KH};
        `}
`;var xq=({size:t=18,className:e})=>ve.createElement("svg",{width:t,height:t,viewBox:"0 0 18 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:e},ve.createElement("g",{id:"trending",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},ve.createElement("g",null,ve.createElement("rect",{id:"Rectangle",stroke:"#979797",fill:"#D8D8D8",opacity:"0",x:"0.5",y:"0.5",width:"17",height:"17"}),ve.createElement("path",{d:"M12.6093329,3.12057664 L15.156896,3.12057664 L9.64199318,9.04253019 L6.88133868,6.8175119 C6.7544587,6.67603813 6.56616874,6.60087259 6.38404017,6.61897279 C6.2490402,6.63288422 6.11891631,6.69661171 6.02063992,6.79697337 C2.21226835,10.5943119 0.308082561,12.4929812 0.308082561,12.4929812 C0.308082561,12.4929812 0.527106106,12.8074292 0.710953088,13.0215425 C0.833517743,13.1642848 0.975497751,13.3098497 1.13689311,13.4582373 L6.47329888,8.13191205 L9.16381134,10.2953038 C9.40800276,10.5710787 9.68933701,10.7021044 10.019278,10.4570223 L16.0239805,4.04474473 C16.0239805,5.87956383 16.0239805,6.79697337 16.0239805,6.79697337 C16.0239805,6.79697337 16.4320205,6.79697337 17.2481004,6.79697337 L17.2481004,1.80604505 C14.1555887,1.80604505 12.6093329,1.80604505 12.6093329,1.80604505 C12.6093329,1.80604505 12.6093329,2.24422225 12.6093329,3.12057664 Z",id:"Shape",stroke:"#00CCFF",strokeWidth:"0.4",fill:"#00CCFF",fillRule:"nonzero",transform:"translate(8.778091, 7.632141) rotate(-2.000000) translate(-8.778091, -7.632141) "})))),_q=xq,e6=9;ot.div`
    background: ${V3};
    display: flex;
    padding-right: 4px;
    align-items: center;
    margin-right: ${e6}px;
    cursor: pointer;
`;ot.div`
    background: ${V3};
    display: flex;
    padding: 14px;
    align-items: center;
    margin-right: ${e6}px;
    white-space: nowrap;
    cursor: pointer;
    font-style: italic;
    border-radius: 20px;
`;ot(gg)`
    height: var(${zn.searchbarHeight});
    width: var(${zn.searchbarHeight});
`;ot(_q)`
    margin-right: 2px;
`;ot.div`
    display: flex;
    color: white;
    flex-direction: row;
    font-family: 'interface';
    font-weight: 600;
    font-size: 14px;
    -webkit-overflow-scrolling: touch;
    overflow-x: auto;
    overflow-y: hidden;
    padding-bottom: 10px;
    height: var(${zn.searchbarHeight});
`;var wq=({onClick:t})=>ve.createElement("svg",{width:"66px",height:"13px",viewBox:"0 0 66 13",onClick:t},ve.createElement("g",{stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},ve.createElement("g",{transform:"translate(-1060.000000, -462.000000)",fill:"#FFFFFF",fillRule:"nonzero"},ve.createElement("g",{transform:"translate(931.000000, 286.375671)"},ve.createElement("g",{transform:"translate(86.000000, 136.124329)"},ve.createElement("path",{d:"M47.968,49.1962322 C49.588,49.1962322 51.052,48.6202322 51.58,47.5522322 L51.58,43.8202322 L47.476,43.8202322 L47.476,45.6802322 L49.6,45.6802322 L49.6,46.7602322 C49.12,47.1082322 48.424,47.1922322 47.98,47.1922322 C46.288,47.1922322 45.724,45.8602322 45.724,44.7802322 C45.724,43.1362322 46.612,42.3202322 47.98,42.3202322 C48.544,42.3202322 49.288,42.4762322 49.9,43.0522322 L51.28,41.6842322 C50.176,40.5682322 49.144,40.3282322 47.98,40.3282322 C44.824,40.3282322 43.384,42.5842322 43.384,44.7802322 C43.384,46.9762322 44.644,49.1962322 47.968,49.1962322 Z M54.928,48.9682322 L54.928,40.5682322 L52.564,40.5682322 L52.564,48.9682322 L54.928,48.9682322 Z M58.648,48.9682322 L58.648,46.7002322 L60.352,46.7002322 C62.596,46.6762322 63.724,45.3442322 63.724,43.6282322 C63.724,41.9842322 62.608,40.5682322 60.352,40.5682322 L56.272,40.5682322 L56.272,48.9682322 L58.648,48.9682322 Z M60.352,44.6962322 L58.648,44.6962322 L58.648,42.6082322 L60.352,42.6082322 C61,42.6082322 61.348,43.1122322 61.348,43.6642322 C61.348,44.2162322 61.012,44.6962322 60.352,44.6962322 Z M66.796,48.9802322 L66.796,45.8002322 L69.82,45.8002322 L69.82,48.9802322 L72.172,48.9802322 L72.172,40.5802322 L69.82,40.5802322 L69.82,43.7722322 L66.796,43.7722322 L66.796,40.5802322 L64.42,40.5802322 L64.42,48.9802322 L66.796,48.9802322 Z M78.16,48.9682322 L78.16,45.6202322 L81.496,40.6762322 L81.496,40.5682322 L78.82,40.5682322 L77.008,43.4482322 L75.268,40.5682322 L72.592,40.5682322 L72.592,40.6642322 L75.784,45.6202322 L75.784,48.9682322 L78.16,48.9682322 Z M87.796,49.1362322 C88.972,49.1362322 90.088,48.7402322 90.952,47.8882322 L90.028,46.9642322 C89.44,47.5522322 88.576,47.8762322 87.796,47.8762322 C85.624,47.8762322 84.712,46.3522322 84.7,44.8162322 C84.688,43.2682322 85.66,41.6962322 87.796,41.6962322 C88.576,41.6962322 89.368,41.9722322 89.968,42.5602322 L90.868,41.6962322 C90.016,40.8442322 88.924,40.4242322 87.796,40.4242322 C84.796,40.4242322 83.356,42.6202322 83.3679256,44.8282322 C83.38,47.0362322 84.748,49.1362322 87.796,49.1362322 Z M93.028,48.9682322 L93.028,40.5802322 L91.792,40.5802322 L91.792,48.9682322 L93.028,48.9682322 Z M94.252,41.3122322 C94.252,42.3322322 95.788,42.3322322 95.788,41.3122322 C95.788,40.3042322 94.252,40.3042322 94.252,41.3122322 Z M95.632,48.9682322 L95.632,43.0282322 L94.396,43.0282322 L94.396,48.9682322 L95.632,48.9682322 Z M98.188,51.7162322 L98.188,48.1042322 C98.632,48.8362322 99.556,49.1002322 100.276,49.1002322 C102.112,49.1002322 103.264,47.8042322 103.264,46.0162322 C103.264,44.2282322 102.04,42.9442322 100.276,42.9322322 C99.484,42.9322322 98.644,43.2922322 98.188,44.0122322 L98.116,43.0522322 L96.952,43.0522322 L96.952,51.7162322 L98.188,51.7162322 Z M100.156,47.9002322 C99.076,47.9002322 98.296,47.0722322 98.296,46.0162322 C98.296,44.9602322 99.016,44.1322322 100.156,44.1322322 C101.284,44.1322322 102.028,44.9002322 102.028,46.0162322 C102.028,47.1202322 101.236,47.9002322 100.156,47.9002322 Z M106.456,49.1482322 C107.992,49.1482322 108.964,48.3802322 108.976,47.2762322 C108.988,45.7522322 107.56,45.5122322 106.468,45.4162322 C105.712,45.3442322 105.196,45.1522322 105.184,44.6602322 C105.184,44.1922322 105.688,43.9402322 106.444,43.9522322 C107.032,43.9522322 107.536,44.0722322 108.004,44.5042322 L108.7,43.6882322 C108.04,43.1002322 107.332,42.8962322 106.42,42.8962322 C105.316,42.8962322 103.96,43.3882322 103.96,44.6962322 C103.972,46.0042322 105.256,46.3642322 106.372,46.4722322 C107.248,46.5562322 107.752,46.7602322 107.74,47.2882322 C107.728,47.8402322 107.068,48.0562322 106.48,48.0562322 C105.784,48.0442322 104.956,47.7922322 104.404,47.1802322 L103.756,48.0562322 C104.536,48.9322322 105.496,49.1482322 106.456,49.1482322 Z",id:"GIPHYClips"})))))),Eq=wq,Sq=ot.div`
    display: flex;
    align-items: center;
    font-family: interface, helvetica, arial;
    cursor: pointer;
`,Tq=ot(gg)`
    flex-shrink: 0;
`,Cq=ot.div`
    display: flex;
    flex-direction: column;
`,vx=({gif:t,className:e,onClick:n})=>{const{user:r}=t;return!r?.username&&!r?.display_name?null:ve.createElement(Sq,{className:[vx.className,e].join(" "),onClick:i=>{if(i.preventDefault(),i.stopPropagation(),n)n(t);else{const o=r.profile_url;o&&window.open(o,"_blank")}}},ve.createElement(Tq,{user:r}),ve.createElement(Cq,null,ve.createElement(Eq,{onClick:i=>{i.preventDefault(),i.stopPropagation(),n?n(t):t.url&&window.open(t.url,"_blank")}}),ve.createElement($3,{user:r})))};vx.className="giphy-attribution";var kq=vx,t6=25,Nq=({size:t=t6,onClick:e=()=>{}})=>ve.createElement("svg",{width:t,height:t,viewBox:"0 0 26 23",onClick:e},ve.createElement("g",{stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},ve.createElement("g",{transform:"translate(1.000000, 0.000000)",fill:"#FFF",fillRule:"nonzero"},ve.createElement("path",{d:"M11.9625091,0.572584405 L11.9625091,22.2272644 C11.9625091,22.4856644 11.8466091,22.6635044 11.6151891,22.7611644 C11.3480491,22.8413444 11.1390491,22.7968844 10.9878091,22.6277844 L4.8732291,15.9143244 L0.573909096,15.9143244 C0.413549096,15.9143244 0.277509096,15.8588444 0.166549096,15.7475044 C0.0573082348,15.6406091 -0.00292164572,15.4933347 -1.77635684e-15,15.3405244 L-1.77635684e-15,7.45058441 C-1.77635684e-15,7.29022441 0.0555890961,7.15456441 0.167309096,7.04322441 C0.278269096,6.93226441 0.414309096,6.87640441 0.573909096,6.87640441 L4.8732291,6.87640441 L10.9874291,0.172064405 C11.1390491,0.00296440549 11.3484291,-0.0414955945 11.6151891,0.0386844055 C11.8466091,0.136344405 11.9621291,0.314564405 11.9621291,0.572584405 L11.9625091,0.572584405 Z"}),ve.createElement("path",{d:"M15.7579491,16.0914044 L14.6798891,13.6594044 C15.5739159,13.2635547 16.1503537,12.3776671 16.1501091,11.3999244 C16.150386,10.4242626 15.5763999,9.53983269 14.6852091,9.14272441 L15.7697291,6.71376441 C17.6193585,7.53872062 18.810518,9.37466359 18.8101092,11.3999244 C18.8105521,13.4298903 17.6139475,15.2691931 15.7579491,16.0914044 L15.7579491,16.0914044 Z"}),ve.createElement("path",{d:"M18.3647491,20.2619044 L17.2863091,17.8299044 C19.8302925,16.7031661 21.4705725,14.1822599 21.4701091,11.3999244 C21.4701091,8.59818441 19.8167291,6.09892441 17.3022691,4.97678441 L18.3864091,2.54782441 C21.8804724,4.10607079 24.1307363,7.57414217 24.1301093,11.3999244 C24.1308375,15.2343934 21.8705556,18.7086904 18.3647491,20.2619044 Z"})))),Aq=({size:t=t6,onClick:e=()=>{}})=>ve.createElement("svg",{onClick:e,height:t,width:t,viewBox:"0 0 26 23",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},ve.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},ve.createElement("g",{id:"Group",transform:"translate(1.000000, 0.000000)",fill:"#FFFFFF",fillRule:"nonzero"},ve.createElement("path",{d:"M11.9625091,0.572584405 L11.9625091,22.2272644 C11.9625091,22.4856644 11.8466091,22.6635044 11.6151891,22.7611644 C11.3480491,22.8413444 11.1390491,22.7968844 10.9878091,22.6277844 L4.8732291,15.9143244 L0.573909096,15.9143244 C0.413549096,15.9143244 0.277509096,15.8588444 0.166549096,15.7475044 C0.0573082348,15.6406091 -0.00292164572,15.4933347 0,15.3405244 L0,7.45058441 C0,7.29022441 0.0555890961,7.15456441 0.167309096,7.04322441 C0.278269096,6.93226441 0.414309096,6.87640441 0.573909096,6.87640441 L4.8732291,6.87640441 L10.9874291,0.172064405 C11.1390491,0.00296440549 11.3484291,-0.0414955945 11.6151891,0.0386844055 C11.8466091,0.136344405 11.9621291,0.314564405 11.9621291,0.572584405 L11.9625091,0.572584405 Z",id:"Path"})),ve.createElement("g",{id:"Group",transform:"translate(14.887009, 6.947630)",fill:"#FFFFFF",fillRule:"nonzero"},ve.createElement("path",{d:"M7.88199149,6.27905236 C7.94693088,6.35707599 7.94693088,6.47033309 7.88199149,6.54835671 L6.54835671,7.88199149 C6.47033309,7.94693088 6.35707599,7.94693088 6.27905236,7.88199149 L3.96534802,5.56828715 L1.65164367,7.88199149 C1.57362004,7.94693088 1.46036294,7.94693088 1.38233932,7.88199149 L0.0487045381,6.54835671 C-0.016234846,6.47033309 -0.016234846,6.35707599 0.0487045381,6.27905236 L2.36240889,3.96534802 L0.0487045381,1.65164367 C-0.016234846,1.57362004 -0.016234846,1.46036294 0.0487045381,1.38233932 L1.38233932,0.0487045381 C1.46036294,-0.016234846 1.57362004,-0.016234846 1.65164367,0.0487045381 L3.96534802,2.36240889 L6.27905236,0.0487045381 C6.35707599,-0.016234846 6.47033309,-0.016234846 6.54835671,0.0487045381 L7.88199149,1.38233932 C7.94693088,1.46036294 7.94693088,1.57362004 7.88199149,1.65164367 L5.56828715,3.96534802 L7.88199149,6.27905236 Z",id:"Shape"})))),Rq=ot.div`
    background: ${Mm};
    height: ${t=>t.$barHeight}px;
    position: absolute;
    width: 5px;
    bottom: 0;
    left: 0;
    opacity: 0.95;
`,Iq=({videoEl:t})=>{m$(2147483647,100);const e=t?.currentTime||0,n=t?.duration||0,r=e/n;let i=Math.round(r*100),o=5;return t?.height<200?o=3:t?.height<300&&(o=4),i=n<10&&i>98?100:i,ve.createElement(Rq,{style:{width:`${i}%`},$barHeight:o,className:"hide-in-percy"})},jq=Iq,Dq=(t,e="")=>{switch(t){case 1:return"Aborted. The fetching process for the media resource was aborted by the user agent at the user's request.";case 2:return"Network Error. A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.";case 3:return"Decode Error. An error of some description occurred while decoding the media resource, after the resource was established to be usable.";case 4:return`Can not play a video of type "${e.split(".").pop()}" on this platform.`;default:return""}},Pq=(t,e,n,r,i)=>{const o=i+t;return!r.has(o)&&n>0&&e>n*t?(r.add(o),!0):!1},Mq=[.25,.5,.75],n6="giphy-video",Oq={IDLE:1},r6=({muted:t,ccEnabled:e=!1,ccLanguage:n="en",loop:r=!0,onStateChange:i,onTimeUpdate:o,onCanPlay:u,onFirstPlay:h,onWaiting:f,onMuted:m,onError:v,onEnded:b,onLoop:x,onQuartile:C,onEndFullscreen:R,setVideoEl:A,gif:k,width:L,percentWidth:U,height:I,volume:M=.7,className:z=n6,isInPlayer:H})=>{var E,S,j;const D=I||og(k,L);let V;U&&(V=`${Math.round(D/L*100)}%`);const[B,P]=w.useState(k4(k.video,L,D)),ne=w.useRef(0);B||console.warn(`GiphyJS No video content for id: ${k.id}`);const oe=w.useRef(Date.now()),G=w.useRef(!1),Z=w.useRef(0),J=w.useRef(0),Se=w.useRef(new Set);w.useEffect(()=>{oe.current=Date.now(),G.current=!1,Z.current=1,J.current=0,Se.current=new Set},[k.id]);const Le=w.useRef(null);w.useEffect(()=>{const ke=k4(k.video,L,D);Le.current&&B?.url&&ke.url!==B.url&&(B.url.indexOf(String(k.id))!==-1&&(ne.current=Le.current.currentTime),P(ke))},[L,I,k.video,D,B?.url,k.id]),w.useEffect(()=>{Le.current&&B?.url&&ne.current&&(Le.current.currentTime=ne.current,ne.current=0)},[B?.url,ne]);const $=w.useCallback(()=>{var ke;const fe=Le.current,Ae=(ke=fe?.error)==null?void 0:ke.code;if(Ae&&fe?.src){const dt=Dq(Ae,fe?.src);console.error(dt),v?.(Ae)}},[v]),Q=w.useCallback(()=>{i?.("playing"),G.current||(G.current=!0,k.analytics_response_payload&&hx({actionType:"START",analyticsResponsePayload:k.analytics_response_payload}),h?.(Date.now()-oe.current))},[h,i,k]),re=w.useCallback(()=>i?.("paused"),[i]),he=w.useCallback(()=>{const ke=Le.current;if(ke){const fe=ke.currentTime;Mq.some(Ae=>Pq(Ae,fe,ke.duration,Se.current,Z.current)?(C?.(Ae),!0):!1),o?.(fe||0)}},[C,o]),Te=w.useCallback(()=>u?.(),[u]),Ue=w.useCallback(()=>{const ke=Le.current;ke?.currentTime!==0&&ke?.networkState!==Oq.IDLE&&f?.(++J.current)},[f]),te=w.useCallback(()=>{r&&Le.current&&Le.current.play(),x?.(Z.current),Z.current=Z.current+1,G.current&&b?.()},[b,r,x]),Oe=w.useCallback(()=>R?.(),[R]),Ie=w.useCallback(ke=>mx(void 0,null,function*(){if(ke){const fe=ke.play();if(fe!==void 0)try{yield fe,m?.(!1)}catch{ke.muted=!0,m?.(!0),ke.play()}}}),[m]);w.useEffect(()=>{const ke=Le.current;ke&&(Ie(ke),A?.(ke),isNaN(M)||(ke.volume=M))},[]),w.useEffect(()=>{const ke=Le.current;return ke&&(ke.addEventListener("play",Q),ke.addEventListener("pause",re),ke.addEventListener("error",$),ke.addEventListener("timeupdate",he),ke.addEventListener("canplay",Te),ke.addEventListener("ended",te),ke.addEventListener("waiting",Ue),ke.addEventListener("webkitendfullscreen",Oe)),()=>{ke&&(ke.removeEventListener("play",Q),ke.removeEventListener("pause",re),ke.removeEventListener("error",$),ke.removeEventListener("timeupdate",he),ke.removeEventListener("canplay",Te),ke.removeEventListener("ended",te),ke.removeEventListener("waiting",Ue),ke.removeEventListener("webkitendfullscreen",Oe))}},[Q,re,$,he,Te,te,Ue,Oe]);const Xe=(j=(S=(E=k.video)==null?void 0:E.captions)==null?void 0:S[n])==null?void 0:j.vtt;return B?.url?ve.createElement("video",{crossOrigin:"anonymous",draggable:!0,className:z,width:H?"100%":U||L,height:H?"100%":V||D,muted:t,autoPlay:!0,playsInline:!0,ref:Le,src:B?.url,"data-giphy-id":k.id},e&&Xe&&ve.createElement("track",{label:"English",kind:"subtitles",srcLang:n,src:Xe,default:!0})):null};r6.className=n6;var s6=r6,Lq=ot.div`
    position: relative;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: black;
    font-family: interface, helvetica, arial;
    -webkit-font-smoothing: antialiased;
`,Vq=ot.div`
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    cursor: pointer;
`,Uq=ot.div`
    position: absolute;
    top: 10px;
    right: 10px;
    left: 10px;
    bottom: 0;
    display: flex;
    justify-content: space-between;
    opacity: ${t=>t.$isHovered?1:0};
    transition: opacity ease-out 250ms;
    align-items: flex-start;
`,zq=ot.div`
    font-size: 22px;
    color: white;
    margin-bottom: 5px;
    font-weight: bold;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    user-select: none;
    cursor: pointer;
`,Bq=ot.div`
    position: relative;
    min-width: 0;
`,Fq=ot.div`
    &:before {
        background: linear-gradient(rgba(18, 18, 18, 0.6), rgba(0, 0, 0, 0));
        content: '';
        height: ${t=>t.$isLargePlayer?125:75}px;
        left: 0;
        pointer-events: none;
        position: absolute;
        top: 0;
        width: 100%;
    }
    &:after {
        background: linear-gradient(rgba(0, 0, 0, 0), rgba(18, 18, 18, 0.6));
        content: '';
        height: ${t=>t.$isLargePlayer?125:75}px;
        left: 0;
        pointer-events: none;
        position: absolute;
        bottom: 0;
        width: 100%;
    }
`,Hq=300,$q=4e3,qq=t=>{const{style:e,width:n,percentWidth:r,hideMute:i,hideAttribution:o,hideProgressBar:u,hideTitle:h,className:f,persistentControls:m,gif:v,overlay:b}=t,[x,C]=w.useState(!1),[R,A]=w.useState(null),[k,L]=w.useState(t.muted),[U,I]=w.useState(!1),{setVideoEl:M,onMuted:z,onUserMuted:H}=t,E=t.height||og(v,n);let S;r&&(S=`${Math.round(E/n*100)}%`);const[,j,D]=c$(()=>{C(!1)},$q),V=w.useCallback(G=>{z?.(G),I(G)},[I,z]),B=w.useCallback(G=>{M?.(G),A(G)},[M,A]),P=()=>{U?(I(!1),L(!1)):L(!k)};w.useEffect(()=>{L(t.muted)},[t.muted]);const ne=m||x,oe=E>=Hq;return w.useEffect(()=>(ne?D():j(),()=>j()),[ne,j,D]),ve.createElement(Lq,{className:f,style:aa({width:r||n,height:S||E},e),onMouseOver:()=>C(!0),onMouseLeave:()=>C(!1),onMouseMove:()=>{C(!0),D()},onClick:G=>{H?.(!(k||U)),R?.play(),G.preventDefault(),P()}},ve.createElement(s6,fx(aa({},t),{isInPlayer:!0,onMuted:V,setVideoEl:B,muted:k})),ne&&ve.createElement(Fq,{$isLargePlayer:oe}),ve.createElement(Uq,{$isHovered:ne},ve.createElement(Bq,null,!h&&oe&&ve.createElement(zq,{onClick:G=>{G.preventDefault(),G.stopPropagation(),window.open(v.url,"_blank")}},v.title),R&&!o?ve.createElement(kq,{gif:v}):null),!i&&ve.createElement(Vq,null,k||U?ve.createElement(Aq,null):ve.createElement(Nq,null))),ne&&!u&&R?ve.createElement(jq,{videoEl:R}):null,b&&ve.createElement(b,{gif:v,isHovered:x,width:n,height:E}))},Gq=t=>(t.overlay&&!t.controls&&console.warn(`${cr.PREFIX}: Overlays only work when controls are enabled`),t.controls?ve.createElement(qq,aa({},t)):ve.createElement(s6,aa({},t))),Yq=Gq;ot.div`
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    height: 100%;
    width: 100%;
`;ot(Yq)`
    height: 100%;
    display: inline-block;
    object-fit: fill;
    pointer-events: none;
    background: rgb(0, 0, 0, 0);
`;ot.div`
    position: absolute;
    top: 6px;
    right: 6px;
    cursor: pointer;
    opacity: ${t=>t.$isHovered?1:.8};
    transition: opacity ease-out 800ms;
`;J0("X-GIPHY-SDK-NAME","ReactSDK");const Kq="9S3bPWJJTZZdynuLXHFSBstNA5B6tes9",fT=new UR(Kq),Wq=({onSelect:t})=>{const[e,n]=w.useState(""),[r,i]=w.useState(400),o=w.useRef(null);w.useEffect(()=>{o.current&&i(o.current.offsetWidth)},[]);const u=h=>e?fT.search(e,{offset:h,limit:10}):fT.trending({offset:h,limit:10});return c.jsxs("div",{className:"w-full h-full flex flex-col bg-dark-sidebar rounded-lg overflow-hidden border border-dark-hover",children:[c.jsx("div",{className:"p-3 border-b border-dark-hover",children:c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",placeholder:"Search GIFs...",value:e,onChange:h=>n(h.target.value),className:"w-full bg-dark-input text-dark-text px-4 py-2 pl-10 rounded outline-none border border-transparent focus:border-brand-primary transition-all",autoFocus:!0}),c.jsx(R1,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-dark-muted",size:20})]})}),c.jsx("div",{ref:o,className:"flex-1 overflow-y-auto overflow-x-hidden p-2 custom-scrollbar",children:r>0&&c.jsx(X3,{width:r-20,columns:3,fetchGifs:u,onGifClick:(h,f)=>{f.preventDefault(),t(h.images.original.url)},noLink:!0,hideAttribution:!0,gutter:6},e)})]})},Qq="9S3bPWJJTZZdynuLXHFSBstNA5B6tes9",mT=new UR(Qq),Xq=({onSelect:t})=>{const[e,n]=w.useState(""),[r,i]=w.useState(400),o=w.useRef(null);w.useEffect(()=>{o.current&&i(o.current.offsetWidth)},[]);const u=h=>e?mT.search(e,{offset:h,limit:10,type:"stickers"}):mT.trending({offset:h,limit:10,type:"stickers"});return c.jsxs("div",{className:"w-full h-full flex flex-col bg-dark-sidebar rounded-lg overflow-hidden border border-dark-hover",children:[c.jsx("div",{className:"p-3 border-b border-dark-hover bg-brand-primary/10",children:c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",placeholder:"Search Premium Stickers...",value:e,onChange:h=>n(h.target.value),className:"w-full bg-dark-input text-dark-text px-4 py-2 pl-10 rounded outline-none border border-transparent focus:border-brand-primary transition-all placeholder:text-dark-muted",autoFocus:!0}),c.jsx(R1,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-dark-muted",size:20})]})}),c.jsx("div",{className:"px-3 py-1 bg-brand-primary/5 text-[10px] text-brand-primary text-center font-bold tracking-wider uppercase",children:"Premium Stickers"}),c.jsx("div",{ref:o,className:"flex-1 overflow-y-auto overflow-x-hidden p-2 custom-scrollbar",children:r>0&&c.jsx(X3,{width:r-20,columns:3,fetchGifs:u,onGifClick:(h,f)=>{f.preventDefault(),t(h.images.original.url)},noLink:!0,hideAttribution:!0,gutter:6},e)})]})},Jq=({onSubmit:t,onClose:e})=>{const[n,r]=w.useState(""),[i,o]=w.useState(["",""]),[u,h]=w.useState(!1),[f,m]=w.useState(!1),v=()=>{i.length<10&&o([...i,""])},b=A=>{i.length>2&&o(i.filter((k,L)=>L!==A))},x=(A,k)=>{const L=[...i];L[A]=k,o(L)},C=()=>{const A=i.filter(k=>k.trim()!=="");n.trim()&&A.length>=2&&(t({question:n.trim(),options:A,multipleChoice:u,anonymous:f}),e())},R=n.trim()&&i.filter(A=>A.trim()).length>=2;return c.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-dark-sidebar rounded-lg w-full max-w-md mx-4 shadow-2xl animate-fadeIn",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-hover",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(j1,{className:"text-brand-primary",size:24}),c.jsx("h2",{className:"text-lg font-semibold text-dark-text",children:"Create Poll"})]}),c.jsx("button",{onClick:e,className:"p-1 hover:bg-dark-hover rounded transition-colors",children:c.jsx($n,{className:"text-dark-muted",size:20})})]}),c.jsxs("div",{className:"p-4 space-y-4 max-h-[60vh] overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-dark-muted mb-2",children:"Question"}),c.jsx("input",{type:"text",value:n,onChange:A=>r(A.target.value),placeholder:"Ask a question...",maxLength:300,className:`w-full bg-dark-input text-dark-text px-4 py-3 rounded-lg
                         border border-transparent focus:border-brand-primary
                         outline-none transition-colors`,autoFocus:!0}),c.jsxs("div",{className:"text-xs text-dark-muted mt-1 text-right",children:[n.length,"/300"]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-dark-muted mb-2",children:"Options"}),c.jsx("div",{className:"space-y-2",children:i.map((A,k)=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("span",{className:"text-dark-muted text-sm w-6",children:[k+1,"."]}),c.jsx("input",{type:"text",value:A,onChange:L=>x(k,L.target.value),placeholder:`Option ${k+1}`,maxLength:100,className:`flex-1 bg-dark-input text-dark-text px-3 py-2 rounded
                               border border-transparent focus:border-brand-primary
                               outline-none transition-colors text-sm`}),i.length>2&&c.jsx("button",{onClick:()=>b(k),className:"p-1 hover:bg-red-500/20 text-red-400 rounded transition-colors",children:c.jsx($n,{size:18})})]},k))}),i.length<10&&c.jsxs("button",{onClick:v,className:"mt-2 flex items-center gap-1 text-sm text-brand-primary hover:text-brand-primary/80 transition-colors",children:[c.jsx(Zo,{size:18}),"Add Option"]})]}),c.jsxs("div",{className:"space-y-3 pt-2 border-t border-dark-hover",children:[c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[c.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${u?"bg-brand-primary border-brand-primary":"border-dark-muted group-hover:border-dark-text"}`,children:u&&c.jsx(il,{size:14,className:"text-white"})}),c.jsx("span",{className:"text-dark-text text-sm",children:"Allow multiple selections"}),c.jsx("input",{type:"checkbox",checked:u,onChange:A=>h(A.target.checked),className:"sr-only"})]}),c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[c.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${f?"bg-brand-primary border-brand-primary":"border-dark-muted group-hover:border-dark-text"}`,children:f&&c.jsx(il,{size:14,className:"text-white"})}),c.jsx("span",{className:"text-dark-text text-sm",children:"Anonymous voting"}),c.jsx("input",{type:"checkbox",checked:f,onChange:A=>m(A.target.checked),className:"sr-only"})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t border-dark-hover",children:[c.jsx(st,{variant:"secondary",onClick:e,children:"Cancel"}),c.jsx(st,{variant:"primary",onClick:C,disabled:!R,children:"Create Poll"})]})]})})},Zq=(t,e)=>{if(e===0)return"0 KB/s";const n=t/e;return n>1024*1024?`${(n/(1024*1024)).toFixed(1)} MB/s`:`${(n/1024).toFixed(0)} KB/s`},eG=t=>t.type.startsWith("image/")?"image":t.type.startsWith("video/")||t.type.startsWith("audio/")?"video":"auto",tG=(t,e)=>new Promise((n,r)=>{const i="dcqipv1hn",o="lumo_upload",u=eG(t),h=`https://api.cloudinary.com/v1_1/${i}/${u}/upload`,f=new FormData;f.append("file",t),f.append("upload_preset",o);const m=t.name.replace(/\.[^/.]+$/,"").replace(/[^a-zA-Z0-9_-]/g,"_");f.append("public_id",m);const v=new XMLHttpRequest;v.open("POST",h);const b=Date.now();v.upload.onprogress=x=>{if(x.lengthComputable){const C=x.loaded/x.total*100,R=(Date.now()-b)/1e3,A=Zq(x.loaded,R);e&&e(C,A)}},v.onload=()=>{if(v.status===200)try{const x=JSON.parse(v.responseText);n({url:x.secure_url,name:x.original_filename||t.name,type:x.resource_type,format:x.format,bytes:x.bytes})}catch{r(new Error("Invalid response from Cloudinary"))}else try{const x=JSON.parse(v.responseText);r(new Error(x.error?.message||`Upload failed with status ${v.status}`))}catch{r(new Error(`Upload failed with status ${v.status}`))}},v.onerror=()=>r(new Error("Network error during upload")),v.send(f)}),i6=({serverId:t,channelId:e,channel:n,userId:r,userProfile:i,userRole:o,users:u,replyingTo:h,onCancelReply:f})=>{const[m,v]=w.useState(""),[b,x]=w.useState(!1),[C,R]=w.useState(!1),[A,k]=w.useState(""),[L,U]=w.useState(0),[I,M]=w.useState(!1),[z,H]=w.useState(!1),[E,S]=w.useState(!1),[j,D]=w.useState(!1),[V,B]=w.useState(!1),[P,ne]=w.useState({uploading:!1,progress:0,speed:""}),[oe,G]=w.useState(null),[Z,J]=w.useState(null),[Se,Le]=w.useState(""),[$,Q]=w.useState(!1),re=w.useRef(0),he=w.useRef(null),Te=w.useRef(null),{warning:Ue,error:te,info:Oe}=Hr(),Ie=["owner","admin","moderator"].includes(o),Xe=!n?.locked||Ie,ke="This channel is locked. Only staff can send messages.",fe=Ee=>{const $e=Te.current?.selectionStart||m.length,lt=m.slice(0,$e)+Ee+m.slice($e);v(lt),M(!1),Te.current?.focus()},Ae=async Ee=>{if(H(!1),!(!m.trim()&&!Xe))try{x(!0);const $e={text:Ee,userId:r,timestamp:ft(),mentions:[],replyTo:null};if(t)await Kn(_t(ce,"servers",t,"channels",e,"messages"),$e);else{await Kn(_t(ce,"dms",e,"messages"),$e),await it(Re(ce,"dms",e),{lastMessage:{text:"GIF",userId:r,timestamp:ft()},updatedAt:ft(),hiddenFor:[]});const lt=u.find(yt=>yt.id!==r);lt&&await it(Re(ce,"users",lt.id),{[`unreadDms.${e}.count`]:Bi(1),[`unreadDms.${e}.lastMessageAt`]:ft(),[`unreadDms.${e}.text`]:"GIF"}).catch(yt=>console.error("Error updating unread DM count:",yt))}}catch($e){console.error("Error sending GIF:",$e),te("Failed to send GIF")}finally{x(!1)}},dt=async Ee=>{if(S(!1),!Ec(i)){te("Stickers are for Premium members only!");return}try{x(!0);const $e={type:"sticker",text:Ee,userId:r,timestamp:ft(),mentions:[],replyTo:null};if(t)await Kn(_t(ce,"servers",t,"channels",e,"messages"),$e);else{await Kn(_t(ce,"dms",e,"messages"),$e),await it(Re(ce,"dms",e),{lastMessage:{text:" Sticker",userId:r,timestamp:ft()},updatedAt:ft(),hiddenFor:[]});const lt=u.find(yt=>yt.id!==r);lt&&await it(Re(ce,"users",lt.id),{[`unreadDms.${e}.count`]:Bi(1),[`unreadDms.${e}.lastMessageAt`]:ft(),[`unreadDms.${e}.text`]:" Sticker"}).catch(yt=>console.error("Error updating unread DM count:",yt))}}catch($e){console.error("Error sending Sticker:",$e),te("Failed to send Sticker")}finally{x(!1)}},ye=async Ee=>{if(Xe)try{x(!0);const $e={type:"poll",text:Ee.question,poll:{question:Ee.question,options:Ee.options,votes:{},multipleChoice:Ee.multipleChoice,anonymous:Ee.anonymous},userId:r,timestamp:ft(),mentions:[]};if(t)await Kn(_t(ce,"servers",t,"channels",e,"messages"),$e);else{await Kn(_t(ce,"dms",e,"messages"),$e),await it(Re(ce,"dms",e),{lastMessage:{text:` Poll: ${Ee.question}`,userId:r,timestamp:ft()},updatedAt:ft(),hiddenFor:[]});const lt=u.find(yt=>yt.id!==r);lt&&await it(Re(ce,"users",lt.id),{[`unreadDms.${e}.count`]:Bi(1),[`unreadDms.${e}.lastMessageAt`]:ft(),[`unreadDms.${e}.text`]:` Poll: ${Ee.question}`}).catch(yt=>console.error("Error updating unread DM count:",yt))}}catch($e){console.error("Error creating poll:",$e),te("Failed to create poll")}finally{x(!1)}},Ve=Ee=>{if(!Ee)return;const $e=Ec(i),lt=$e?200*1024*1024:10*1024*1024;if(Ee.size>lt){te(`File too large! The limit is ${$e?"200MB":"10MB"}. ${$e?"":"Upgrade to Premium for larger uploads."}`);return}let yt=null;(Ee.type.startsWith("image/")||Ee.type.startsWith("video/"))&&(yt=URL.createObjectURL(Ee)),G(Ee),J(yt),Le(""),D(!1),he.current&&(he.current.value="")},De=Ee=>{Ve(Ee.target.files?.[0])},K=()=>document.querySelector('[role="dialog"]')!==null||document.querySelector(".modal-overlay")!==null||document.body.style.overflow==="hidden",ue=Ee=>{if(Ee.preventDefault(),Ee.stopPropagation(),K())return;re.current++,Ee.dataTransfer.types&&Array.from(Ee.dataTransfer.types).includes("Files")&&Q(!0)},je=Ee=>{Ee.preventDefault(),Ee.stopPropagation(),re.current--,re.current===0&&Q(!1)},me=Ee=>{Ee.preventDefault(),Ee.stopPropagation()},Ne=Ee=>{if(Ee.preventDefault(),Ee.stopPropagation(),Q(!1),re.current=0,K())return;const $e=Ee.dataTransfer.files;$e&&$e.length>0&&Ve($e[0])};w.useEffect(()=>(window.addEventListener("dragenter",ue),window.addEventListener("dragleave",je),window.addEventListener("dragover",me),window.addEventListener("drop",Ne),()=>{window.removeEventListener("dragenter",ue),window.removeEventListener("dragleave",je),window.removeEventListener("dragover",me),window.removeEventListener("drop",Ne)}),[]);const xe=()=>{Z&&URL.revokeObjectURL(Z),G(null),J(null),Le("")},X=async()=>{if(oe)try{ne({uploading:!0,progress:0,speed:"0 KB/s"});let Ee,$e;if(oe.type.startsWith("image/"))Ee=await Jd(oe,(kt,nt)=>{ne({uploading:!0,progress:kt,speed:nt})});else{const Vt=await tG(oe,(kt,nt)=>{ne({uploading:!0,progress:kt,speed:nt})});Ee=Vt.url,$e=Vt}const yt={text:Se.trim()?`${Ee}
${Se}`:Ee,userId:r,timestamp:ft(),mentions:[],replyTo:null};if(t)await Kn(_t(ce,"servers",t,"channels",e,"messages"),yt);else{await Kn(_t(ce,"dms",e,"messages"),yt),await it(Re(ce,"dms",e),{lastMessage:{text:oe.type.startsWith("image/")?" Image":" Attachment",userId:r,timestamp:ft()},updatedAt:ft(),hiddenFor:[]});const Vt=u.find(kt=>kt.id!==r);Vt&&await it(Re(ce,"users",Vt.id),{[`unreadDms.${e}.count`]:Bi(1),[`unreadDms.${e}.lastMessageAt`]:ft(),[`unreadDms.${e}.text`]:oe.type.startsWith("image/")?" Image":" Attachment"}).catch(kt=>console.error("Error updating unread DM count:",kt))}xe()}catch(Ee){console.error("Error uploading file:",Ee),te("Failed to upload file")}finally{ne({uploading:!1,progress:0,speed:""})}};w.useEffect(()=>{const Ee=m.length,$e=m.slice(0,Ee),lt=$e.lastIndexOf("@");if(lt!==-1){const yt=$e.slice(lt+1);if(!yt.includes(" ")){k(yt.toLowerCase()),U(lt),R(!0);return}}R(!1)},[m]);const He=()=>{const Ee=[];return t&&("everyone".startsWith(A.toLowerCase())&&Ee.push({id:"everyone",displayName:"everyone",type:"special"}),["admin","moderator","member"].forEach(lt=>{lt.startsWith(A.toLowerCase())&&Ee.push({id:`role-${lt}`,displayName:lt,type:"role"})})),u&&u.filter(lt=>lt.id!==r&&lt.displayName.toLowerCase().startsWith(A.toLowerCase())).forEach(lt=>{Ee.push({...lt,type:"user"})}),Ee.slice(0,8)},ct=Ee=>{const $e=m.slice(0,L),lt=m.slice(L+A.length+1),yt=`${$e}@${Ee.displayName} ${lt}`;v(yt),R(!1)};w.useEffect(()=>{const Ee=$e=>{document.activeElement!==Te.current&&(document.activeElement?.tagName==="INPUT"||document.activeElement?.tagName==="TEXTAREA"||$e.ctrlKey||$e.metaKey||$e.altKey||["Escape","Tab","Enter","Backspace","Delete"].includes($e.key)||document.querySelector('[role="dialog"]')||$e.key.length===1&&Te.current?.focus())};return window.addEventListener("keydown",Ee),()=>window.removeEventListener("keydown",Ee)},[]);const on=async Ee=>{if(Ee.preventDefault(),!!m.trim()&&!(!e||!r)){i?.isMuted&&Ue("You are muted and cannot send messages"),x(!0);try{const $e=/@(\w+)/g,lt=[];let yt;for(;(yt=$e.exec(m))!==null;){const kt=yt[1].toLowerCase();if(kt==="everyone")u.forEach(nt=>{nt.id!==r&&lt.push(nt.id)});else if(["admin","moderator","member"].includes(kt))u.forEach(nt=>{nt.role===kt&&nt.id!==r&&lt.push(nt.id)});else{const nt=u.find(Rt=>Rt.displayName.toLowerCase()===kt);nt&&nt.id!==r&&lt.push(nt.id)}}const Vt={text:m.trim(),userId:r,timestamp:ft(),mentions:[...new Set(lt)],replyTo:h?{messageId:h.id,userId:h.userId,text:h.text.substring(0,100)}:null};if(t){if(await Kn(_t(ce,"servers",t,"channels",e,"messages"),Vt),lt.length>0){const kt=lt.map(Rt=>it(Re(ce,"users",Rt),{[`unreadMentions.${t}.count`]:Bi(1),[`unreadMentions.${t}.lastMentionAt`]:ft(),[`unreadMentions.${t}.lastMentionText`]:m.trim().substring(0,50)}).catch(Qt=>{console.error("Error updating mention for user:",Rt,Qt)}));await Promise.all(kt),fetch("/api/send-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({targetUserIds:lt,title:"New Mention",body:`${i?.displayName||"Someone"} mentioned you in ${n?.name||"a channel"}`,data:{serverId:t,channelId:e}})}).catch(Rt=>console.error("Failed to send push for mention:",Rt))}}else{await Kn(_t(ce,"dms",e,"messages"),Vt),await it(Re(ce,"dms",e),{lastMessage:{text:m.trim().substring(0,100),userId:r,timestamp:ft()},updatedAt:ft(),hiddenFor:[]});const kt=u.find(nt=>nt.id!==r);kt&&(await it(Re(ce,"users",kt.id),{[`unreadDms.${e}.count`]:Bi(1),[`unreadDms.${e}.lastMessageAt`]:ft(),[`unreadDms.${e}.text`]:m.trim().substring(0,50)}).catch(Rt=>console.error("Error updating unread DM count:",Rt)),fetch("/api/send-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({targetUserIds:[kt.id],title:`New Message from ${i?.displayName}`,body:m.trim().substring(0,100),data:{dmId:e}})}).catch(Rt=>console.error("Failed to send push for DM:",Rt)))}v(""),f&&f()}catch($e){console.error("Error sending message:",$e),te("Failed to send message")}finally{x(!1)}}};return c.jsxs("div",{className:"px-4 pb-6 relative",children:[h&&c.jsxs("div",{className:"mb-2 bg-dark-sidebar border-l-4 border-green-400 p-3 rounded flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"text-xs text-green-400 font-semibold mb-1",children:["Replying to ",u.find(Ee=>Ee.id===h.userId)?.displayName||"Unknown"]}),c.jsx("div",{className:"text-sm text-dark-muted truncate",children:h.text})]}),c.jsx("button",{onClick:f,className:"ml-2 text-dark-muted hover:text-dark-text transition-colors",title:"Cancel reply",children:c.jsx($n,{size:18})})]}),C&&c.jsx("div",{className:"absolute bottom-full left-4 right-4 mb-2 bg-dark-sidebar rounded-lg shadow-lg border border-dark-hover max-h-48 overflow-y-auto",children:He().map(Ee=>c.jsx("button",{onClick:()=>ct(Ee),className:"w-full px-4 py-2 text-left hover:bg-dark-hover transition-colors flex items-center gap-2",children:Ee.type==="special"||Ee.type==="role"?c.jsxs("span",{className:"text-dark-text font-medium",children:["@",Ee.displayName,Ee.type==="role"&&c.jsx("span",{className:"ml-2 text-xs text-dark-muted",children:"(role)"})]}):c.jsxs(c.Fragment,{children:[Ee.photoUrl?c.jsx("img",{src:Ee.photoUrl,alt:Ee.displayName,className:"w-8 h-8 rounded-full object-cover",onError:$e=>{$e.target.style.display="none",$e.target.nextSibling.style.display="flex"}}):null,c.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold text-sm",style:{display:Ee.photoUrl?"none":"flex"},children:Ee.displayName[0].toUpperCase()}),c.jsxs("span",{className:"text-dark-text",children:["@",Ee.displayName]})]})},Ee.id))}),c.jsxs("form",{onSubmit:on,className:"relative",children:[I&&c.jsx(KB,{onSelect:fe,onClose:()=>M(!1)}),P.uploading&&c.jsxs("div",{className:"absolute -top-12 left-0 right-0 bg-dark-sidebar border border-dark-hover rounded-lg p-2 shadow-lg animate-fade-in-up z-50",children:[c.jsxs("div",{className:"flex items-center justify-between text-xs text-dark-text mb-1",children:[c.jsx("span",{className:"font-semibold",children:"Uploading Image..."}),c.jsxs("span",{className:"text-dark-muted",children:[Math.round(P.progress),"%  ",P.speed]})]}),c.jsx("div",{className:"h-1.5 bg-dark-hover rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-brand-primary transition-all duration-200 ease-out",style:{width:`${P.progress}%`}})})]}),oe&&c.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-dark-bg border border-dark-hover rounded-lg shadow-2xl max-w-lg w-full overflow-hidden flex flex-col p-4",children:[c.jsxs("h3",{className:"text-dark-text font-semibold mb-4 flex items-center gap-2",children:[c.jsx(up,{className:"text-brand-primary"}),"Upload Attachment"]}),c.jsx("div",{className:"flex-1 w-full bg-black/50 rounded-lg overflow-hidden flex items-center justify-center mb-4 border border-dark-hover min-h-[200px] max-h-[400px]",children:Z?c.jsx("img",{src:Z,alt:"Preview",className:"max-w-full max-h-full object-contain"}):c.jsxs("div",{className:"flex flex-col items-center gap-2 text-dark-muted",children:[c.jsx("div",{className:"text-6xl",children:""}),c.jsx("div",{className:"text-sm font-medium text-dark-text max-w-xs truncate px-4",children:oe.name}),c.jsxs("div",{className:"text-xs",children:[(oe.size/1024/1024).toFixed(2)," MB"]})]})}),c.jsx("input",{type:"text",value:Se,onChange:Ee=>Le(Ee.target.value),placeholder:"Add a caption... (optional)",className:"w-full bg-dark-input text-dark-text px-4 py-2 rounded-lg border border-dark-hover focus:border-brand-primary outline-none mb-4",onKeyDown:Ee=>{Ee.key==="Enter"&&!P.uploading&&X()}}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("button",{onClick:xe,className:"px-4 py-2 text-dark-text hover:text-dark-muted transition-colors font-medium",disabled:P.uploading,children:"Cancel"}),c.jsx("button",{onClick:X,className:"px-6 py-2 bg-brand-primary hover:bg-brand-secondary text-white rounded-md transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",disabled:P.uploading,children:P.uploading?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Uploading..."]}):c.jsxs(c.Fragment,{children:[c.jsx(HS,{size:18}),"Send"]})})]}),P.uploading&&c.jsxs("div",{className:"mt-4",children:[c.jsxs("div",{className:"flex justify-between text-xs text-dark-muted mb-1",children:[c.jsx("span",{children:P.speed}),c.jsxs("span",{children:[Math.round(P.progress),"%"]})]}),c.jsx("div",{className:"h-1 bg-dark-hover rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-brand-primary transition-all duration-200",style:{width:`${P.progress}%`}})})]})]})}),E&&c.jsxs("div",{className:"absolute bottom-full right-0 mb-4 w-[85vw] max-w-[400px] h-[450px] shadow-2xl rounded-lg z-50 animate-fade-in-up",children:[c.jsx("div",{className:"fixed inset-0 z-[-1]",onClick:()=>S(!1)}),c.jsx(Xq,{onSelect:dt})]}),z&&c.jsxs("div",{className:"absolute bottom-full right-0 mb-4 w-[85vw] max-w-[400px] h-[450px] shadow-2xl rounded-lg z-50",children:[c.jsx("div",{className:"fixed inset-0 z-[-1]",onClick:()=>H(!1)}),c.jsx(Wq,{onSelect:Ae})]}),c.jsx("input",{ref:Te,type:"text",value:m,onChange:Ee=>v(Ee.target.value),onKeyDown:Ee=>{if(Ee.key==="Tab"&&C){Ee.preventDefault();const $e=He();$e.length>0&&ct($e[0])}},onPaste:async Ee=>{const $e=Ee.clipboardData.items;for(let lt=0;lt<$e.length;lt++)for(let yt=0;yt<$e.length;yt++)if($e[yt].kind==="file"){Ee.preventDefault(),Ve($e[yt].getAsFile());break}},placeholder:Xe?i?.isMuted?"You are muted":"Type a message...":ke,disabled:b||i?.isMuted||!Xe||oe!==null,className:`w-full bg-dark-input text-dark-text px-12 py-3 pr-48 rounded-lg
                     border border-transparent focus:border-brand-primary
                     outline-none transition-colors duration-200
                     placeholder:text-dark-muted
                     disabled:opacity-50 disabled:cursor-not-allowed select-text`}),$&&c.jsxs("div",{className:"fixed inset-0 z-[200] bg-brand-primary/90 flex flex-col items-center justify-center animate-fade-in pointer-events-none",children:[c.jsx("div",{className:"bg-white/10 p-8 rounded-full mb-6",children:c.jsx(FS,{size:64,className:"text-white animate-bounce"})}),c.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Drop your file here"}),c.jsx("p",{className:"text-white/80",children:"to upload instantly"})]}),c.jsxs("div",{className:"absolute left-3 top-0 bottom-0 flex items-center plus-menu-container",children:[" ",c.jsx("button",{type:"button",onClick:()=>D(!j),className:`text-dark-muted hover:text-brand-primary transition-colors flex items-center justify-center ${j?"text-brand-primary":""}`,title:"Add attachment",disabled:!Xe,children:c.jsx(FS,{size:26})}),j&&c.jsxs("div",{className:"absolute bottom-full left-0 mb-2 w-48 bg-dark-sidebar border border-dark-hover rounded-lg shadow-xl overflow-hidden z-50 animate-fade-in-up",children:[c.jsxs("button",{type:"button",onClick:()=>{he.current?.click(),D(!1)},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-dark-hover text-left transition-colors",children:[c.jsx(up,{className:"text-green-400",size:20}),c.jsx("span",{className:"text-sm text-dark-text font-medium",children:"Upload File"})]}),c.jsxs("button",{type:"button",onClick:()=>{B(!0),D(!1)},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-dark-hover text-left transition-colors",disabled:!t,children:[c.jsx(j1,{className:"text-brand-primary",size:20}),c.jsx("span",{className:"text-sm text-dark-text font-medium",children:"Create Poll"})]})]})]}),c.jsx("input",{type:"file",ref:he,onChange:De,className:"hidden"}),c.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[c.jsx("button",{type:"button",onClick:()=>H(!z),className:`text-dark-muted hover:text-brand-primary
                        transition-colors border-2 border-current rounded px-1 text-[10px] font-bold h-6 flex items-center justify-center mr-1`,title:"Add GIF",children:"GIF"}),Ec(i)&&c.jsx("button",{type:"button",onClick:()=>S(!E),className:`transition-colors ${E?"text-brand-primary":"text-dark-muted hover:text-brand-primary"}`,title:"Premium Stickers",children:c.jsx(PL,{size:24})}),c.jsx("button",{type:"button",onClick:()=>M(!I),className:`text-dark-muted hover:text-brand-primary
                       transition-colors`,title:"Add emoji",children:c.jsx(qN,{size:24})}),c.jsx("button",{type:"submit",disabled:!m.trim()||b||i?.isMuted||!Xe,className:`text-dark-muted hover:text-brand-primary
                       transition-colors disabled:opacity-50 disabled:cursor-not-allowed ml-1`,children:c.jsx(HS,{size:24})})]})]}),V&&c.jsx(Jq,{onSubmit:ye,onClose:()=>B(!1)})]})},a6=({messages:t,users:e,onResultClick:n})=>{const[r,i]=w.useState(""),[o,u]=w.useState([]),[h,f]=w.useState(!1),m=b=>{if(i(b),!b.trim()){u([]);return}const x=t.filter(C=>C.text.toLowerCase().includes(b.toLowerCase())).slice(0,20);u(x)},v=b=>e.find(x=>x.id===b)||{displayName:"Unknown"};return h?c.jsxs("div",{className:"relative flex-1 max-w-md",children:[c.jsx("input",{type:"text",value:r,onChange:b=>m(b.target.value),placeholder:"Search messages...",autoFocus:!0,className:`w-full bg-dark-input text-dark-text px-4 py-2 pr-10 rounded-lg
                   border border-transparent focus:border-brand-primary
                   outline-none transition-colors placeholder:text-dark-muted`}),c.jsx("button",{onClick:()=>{f(!1),i(""),u([])},className:"absolute right-2 top-1/2 -translate-y-1/2 text-dark-muted hover:text-dark-text",children:c.jsx($n,{size:20})}),o.length>0&&c.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-dark-sidebar border border-dark-hover rounded-lg shadow-xl max-h-96 overflow-y-auto z-50",children:o.map(b=>c.jsxs("button",{onClick:()=>{n&&n(b),f(!1),i(""),u([])},className:"w-full px-4 py-3 text-left hover:bg-dark-hover transition-colors border-b border-dark-hover last:border-b-0",children:[c.jsx("div",{className:"text-xs text-brand-primary font-semibold mb-1",children:v(b.userId).displayName}),c.jsx("div",{className:"text-sm text-dark-text line-clamp-2",children:b.text})]},b.id))})]}):c.jsx("button",{onClick:()=>f(!0),className:"p-2 hover:bg-dark-hover rounded transition-colors",title:"Search messages",children:c.jsx(R1,{size:20,className:"text-dark-muted"})})},nG=({messages:t,users:e,onClose:n,onJumpToMessage:r})=>{const i=t.filter(u=>u.pinned),o=u=>e.find(h=>h.id===u)||{displayName:"Unknown"};return i.length===0?c.jsxs("div",{className:"w-80 bg-dark-sidebar border-l border-dark-hover h-full flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-hover",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(xc,{className:"text-blue-400",size:20}),c.jsx("h3",{className:"font-semibold text-dark-text",children:"Pinned Messages"})]}),c.jsx("button",{onClick:n,className:"text-dark-muted hover:text-dark-text transition-colors",children:c.jsx($n,{size:20})})]}),c.jsx("div",{className:"flex-1 flex items-center justify-center text-dark-muted text-sm",children:"No pinned messages"})]}):c.jsxs("div",{className:"w-80 bg-dark-sidebar border-l border-dark-hover h-full flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-hover",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(xc,{className:"text-blue-400",size:20}),c.jsx("h3",{className:"font-semibold text-dark-text",children:"Pinned Messages"}),c.jsxs("span",{className:"text-xs text-dark-muted",children:["(",i.length,")"]})]}),c.jsx("button",{onClick:n,className:"text-dark-muted hover:text-dark-text transition-colors",children:c.jsx($n,{size:20})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:i.map(u=>{const h=o(u.userId);return c.jsx("div",{onClick:()=>r(u.id),className:"bg-dark-bg p-3 rounded-lg cursor-pointer hover:bg-dark-hover transition-colors border border-transparent hover:border-brand-primary",children:c.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[h.photoUrl?c.jsx("img",{src:h.photoUrl,alt:h.displayName,className:"w-8 h-8 rounded-full object-cover",onError:f=>{f.target.style.display="none",f.target.nextSibling.style.display="flex"}}):null,c.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold text-sm",style:{display:h.photoUrl?"none":"flex"},children:h.displayName?.[0]?.toUpperCase()||"U"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-semibold text-dark-text text-sm",children:h.displayName}),c.jsx("span",{className:"text-xs text-dark-muted",children:eg(u.timestamp)})]}),c.jsx("div",{className:"text-dark-text text-sm mt-1 line-clamp-3",children:c.jsx(CR,{children:u.text})}),u.pinnedBy&&c.jsxs("div",{className:"text-xs text-blue-400 mt-2 flex items-center gap-1",children:[c.jsx(xc,{size:12}),c.jsxs("span",{children:["Pinned by ",o(u.pinnedBy).displayName]})]})]})]})},u.id)})})]})},rG=({currentStatus:t,onStatusChange:e,onClose:n})=>{const[r,i]=w.useState(!1),[o,u]=w.useState(""),[h,f]=w.useState(""),m=x=>{e(x),n()},v=()=>{h.trim()&&(e({emoji:o,text:h.trim(),type:"custom"}),n())},b=()=>{e(null),n()};return c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-dark-sidebar rounded-lg p-6 w-96 max-w-full mx-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-dark-text",children:"Set Status"}),c.jsx("button",{onClick:n,className:"text-dark-muted hover:text-dark-text transition-colors",children:c.jsx($n,{size:24})})]}),r?c.jsx(c.Fragment,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm text-dark-muted mb-2 block",children:"Emoji"}),c.jsx("input",{type:"text",value:o,onChange:x=>u(x.target.value.slice(0,2)),className:"w-full bg-dark-input text-dark-text px-4 py-2 rounded-lg text-2xl text-center",placeholder:"",maxLength:2})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm text-dark-muted mb-2 block",children:"Status Text"}),c.jsx("input",{type:"text",value:h,onChange:x=>f(x.target.value),className:"w-full bg-dark-input text-dark-text px-4 py-2 rounded-lg",placeholder:"What's on your mind?",maxLength:50,autoFocus:!0}),c.jsxs("div",{className:"text-xs text-dark-muted mt-1 text-right",children:[h.length,"/50"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>i(!1),className:"flex-1 px-4 py-2 rounded-lg bg-dark-bg hover:bg-dark-hover transition-colors text-dark-text",children:"Back"}),c.jsx("button",{onClick:v,disabled:!h.trim(),className:"flex-1 px-4 py-2 rounded-lg bg-brand-primary hover:bg-brand-primary/80 transition-colors text-white font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Set Status"})]})]})}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"space-y-2 mb-4",children:uB.map(x=>c.jsxs("button",{onClick:()=>m(x),className:"w-full px-4 py-3 rounded-lg bg-dark-bg hover:bg-dark-hover transition-colors text-left flex items-center gap-3",children:[c.jsx("span",{className:"text-2xl",children:x.emoji}),c.jsx("span",{className:"text-dark-text",children:x.text})]},x.type))}),c.jsx("button",{onClick:()=>i(!0),className:"w-full px-4 py-3 rounded-lg bg-brand-primary hover:bg-brand-primary/80 transition-colors text-white font-medium",children:" Custom Status"}),t&&c.jsx("button",{onClick:b,className:"w-full mt-2 px-4 py-2 rounded-lg bg-dark-bg hover:bg-dark-hover transition-colors text-admin text-sm",children:"Clear Status"})]})]})})},sG=()=>{const t=[{name:"Screen Sharing",free:"",premium:"1080p 60fps"},{name:"Profile Badge",free:"",premium:""},{name:"Custom Backgrounds",free:"",premium:""},{name:"Upload Limit",free:"10MB",premium:"200MB"},{name:"GIF Avatar",free:"",premium:""},{name:"Animated Banner",free:"",premium:""},{name:"Profile Themes",free:"",premium:""},{name:"Exclusive Stickers",free:"",premium:""},{name:"Soundboard",free:"",premium:""}];return c.jsxs("div",{className:"bg-dark-sidebar/50 rounded-xl overflow-hidden border border-dark-hover",children:[c.jsxs("div",{className:"grid grid-cols-3 bg-dark-hover/50 p-4 text-sm font-bold text-dark-text uppercase tracking-wider",children:[c.jsx("div",{children:"Feature"}),c.jsx("div",{className:"text-center text-dark-muted",children:"Free"}),c.jsx("div",{className:"text-center text-brand-primary",children:"Premium"})]}),c.jsx("div",{className:"divide-y divide-dark-hover",children:t.map((e,n)=>c.jsxs("div",{className:"grid grid-cols-3 p-4 text-sm hover:bg-white/5 transition-colors",children:[c.jsx("div",{className:"font-medium text-dark-text",children:e.name}),c.jsx("div",{className:"text-center text-dark-muted",children:e.free}),c.jsx("div",{className:"text-center font-bold text-white",children:e.premium})]},n))})]})},iG=({question:t,answer:e})=>{const[n,r]=w.useState(!1);return c.jsxs("div",{className:"",children:[c.jsxs("button",{className:"w-full flex items-center justify-between p-5 text-left font-medium text-dark-text hover:text-white transition-colors",onClick:()=>r(!n),children:[c.jsx("span",{children:t}),c.jsx(RL,{className:`transform transition-transform duration-300 ${n?"rotate-180":""}`,size:20})]}),c.jsx("div",{className:`overflow-hidden transition-all duration-300 ${n?"max-h-40 opacity-100":"max-h-0 opacity-0"}`,children:c.jsx("p",{className:"text-sm text-dark-muted leading-relaxed px-5 pb-5 pt-0",children:e})})]})},aG=()=>{const{info:t}=Hr(),e=[{icon:lp,title:"HD Screen Sharing",description:"Share your screen in 1080p 60fps quality with friends.",color:"text-blue-400",bg:"bg-blue-400/10"},{icon:VL,title:"Exclusive Profile Badge",description:"Stand out with the shiny Premium badge on your profile.",color:"text-purple-400",bg:"bg-purple-400/10"},{icon:WL,title:"Custom Profile Backgrounds",description:"Personalize your profile with custom banner images.",color:"text-yellow-400",bg:"bg-yellow-400/10"},{icon:qN,title:"Exclusive Stickers",description:"Access a library of premium stickers and custom emojis.",color:"text-orange-400",bg:"bg-orange-400/10"},{icon:cp,title:"Soundboard",description:"Play fun sound effects in voice channels.",color:"text-pink-400",bg:"bg-pink-400/10"},{icon:HL,title:"Priority Support",description:"Get faster responses for all your support tickets.",color:"text-green-400",bg:"bg-green-400/10"}],n=[{q:"Can I cancel anytime?",a:"Yes, you can cancel your subscription at any time from your account settings. Your benefits will continue until the end of the billing period."},{q:"Is payment secure?",a:"Absolutely. We use Stripe for payment processing, which is the industry standard for security. We never store your card details."},{q:"Do benefits apply to all servers?",a:"Yes! Your Premium benefits travel with you to any server you join on Lumo Chat."}];return c.jsxs("div",{className:"animate-fade-in pb-10",children:[c.jsx("style",{children:`
        @keyframes shine {
          0% { transform: translateX(-100%); }
          100% { transform: translateX(100%); }
        }
        @keyframes float {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-10px); }
        }
        .shine-effect::after {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          width: 50%;
          height: 100%;
          background: linear-gradient(to right, transparent, rgba(255,255,255,0.3), transparent);
          transform: skewX(-20deg) translateX(-150%);
          animation: shine 3s infinite;
        }
        .float-animation {
          animation: float 6s ease-in-out infinite;
        }
      `}),c.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-600 p-8 text-white shadow-2xl transform transition-all hover:scale-[1.005] mb-8",children:[c.jsx("div",{className:"absolute top-0 right-0 -mr-16 -mt-16 w-80 h-80 rounded-full bg-white/10 blur-3xl animate-pulse"}),c.jsx("div",{className:"absolute bottom-0 left-0 -ml-16 -mb-16 w-64 h-64 rounded-full bg-black/20 blur-3xl animate-pulse",style:{animationDelay:"1s"}}),c.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center gap-6",children:[c.jsx("div",{className:"float-animation p-5 bg-white/10 backdrop-blur-md rounded-full shadow-inner ring-4 ring-white/20 shrink-0",children:c.jsx(sl,{size:56,className:"text-white drop-shadow-[0_0_15px_rgba(255,255,255,0.5)]"})}),c.jsxs("div",{className:"text-center md:text-left",children:[c.jsxs("h1",{className:"text-4xl font-extrabold tracking-tight mb-2 drop-shadow-md",children:["Release the ",c.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 to-orange-300",children:"Boost!"})]}),c.jsx("p",{className:"text-indigo-100 font-medium text-lg leading-relaxed max-w-2xl",children:"Unlock the full potential of Lumo Chat. Get special perks, enhanced quality, and support the development."})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-xl font-bold text-dark-text mb-6 flex items-center gap-2",children:[c.jsx("span",{className:"w-1 h-6 bg-brand-primary rounded-full box-shadow-glow"}),"Premium Perks"]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:e.map((r,i)=>c.jsxs("div",{className:"group relative overflow-hidden p-5 rounded-xl bg-dark-sidebar border border-dark-hover hover:border-brand-primary/50 transition-all duration-300 hover:shadow-xl hover:shadow-brand-primary/10 hover:-translate-y-1",style:{animationDelay:`${i*100}ms`},children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700 ease-in-out pointer-events-none"}),c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:`p-3 rounded-lg ${r.bg} group-hover:scale-110 transition-transform duration-300`,children:c.jsx(r.icon,{size:28,className:`${r.color} drop-shadow-sm`})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-dark-text mb-1 group-hover:text-white transition-colors text-lg",children:r.title}),c.jsx("p",{className:"text-sm text-dark-muted leading-relaxed group-hover:text-gray-300",children:r.description})]})]})]},i))})]}),c.jsxs("div",{className:"bg-dark-bg rounded-2xl p-1 border-2 border-brand-primary/30 group hover:border-brand-primary/60 transition-colors relative overflow-hidden shadow-2xl",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 opacity-20 group-hover:opacity-40 transition-opacity"}),c.jsxs("div",{className:"bg-dark-sidebar/90 backdrop-blur-xl rounded-xl p-8 flex flex-col sm:flex-row items-center justify-between gap-6 relative z-10",children:[c.jsxs("div",{children:[c.jsx("div",{className:"inline-block px-3 py-1 rounded-full bg-gradient-to-r from-indigo-500 to-pink-500 text-[10px] font-bold text-white uppercase tracking-widest mb-3 shadow-lg",children:"BEST VALUE"}),c.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:"Monthly"}),c.jsxs("p",{className:"text-dark-muted text-sm flex items-center gap-2",children:[c.jsx(il,{size:16,className:"text-green-500"})," Secure payment"]})]}),c.jsxs("div",{className:"flex flex-col items-center gap-4",children:[c.jsxs("div",{className:"text-4xl font-extrabold text-white",children:["$4.99",c.jsx("span",{className:"text-sm text-dark-muted font-normal ml-1",children:"/mo"})]}),c.jsx("button",{className:"relative overflow-hidden px-10 py-4 bg-gradient-to-r from-indigo-600 to-pink-600 hover:from-indigo-500 hover:to-pink-500 rounded-xl text-white font-bold shadow-lg transform transition-all hover:scale-105 active:scale-95 shine-effect whitespace-nowrap",onClick:()=>t("deme sistemi u anda bakmda."),children:c.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["Subscribe Now ",c.jsx(sl,{})]})})]})]})]})]}),c.jsx("div",{className:"space-y-8",children:c.jsxs("div",{children:[c.jsxs("h2",{className:"text-xl font-bold text-dark-text mb-6 flex items-center gap-2",children:[c.jsx("span",{className:"w-1 h-6 bg-purple-500 rounded-full box-shadow-glow"}),"Why Go Premium?"]}),c.jsx(sG,{})]})})]}),c.jsxs("div",{className:"mt-12",children:[c.jsxs("h2",{className:"text-xl font-bold text-dark-text mb-6 flex items-center gap-2",children:[c.jsx("span",{className:"w-1 h-6 bg-gray-500 rounded-full"}),"Common Questions"]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map((r,i)=>c.jsx("div",{className:"bg-dark-sidebar rounded-xl border border-dark-hover overflow-hidden",children:c.jsx(iG,{question:r.q,answer:r.a})},i))})]})]})},o6=w.createContext(),l6=()=>{const t=w.useContext(o6);if(!t)throw new Error("useHotkeys must be used within HotkeyProvider");return t},oG=({children:t})=>{const[e,n]=w.useState(()=>{const u=localStorage.getItem("user_hotkeys");return u?JSON.parse(u):{toggleMute:"",toggleDeafen:""}});w.useEffect(()=>{localStorage.setItem("user_hotkeys",JSON.stringify(e))},[e]);const o={hotkeys:e,updateHotkey:(u,h)=>{n(f=>({...f,[u]:h}))},resetToDefaults:()=>{n({toggleMute:"",toggleDeafen:""})}};return c.jsx(o6.Provider,{value:o,children:t})},pT=({label:t,currentValue:e,onChange:n})=>{const[r,i]=w.useState(!1),[o,u]=w.useState(new Set),h=w.useRef(null);w.useEffect(()=>{if(!r)return;const m=b=>{b.preventDefault(),b.stopPropagation();const x=b.key;u(C=>{const R=new Set(C);return R.add(x),R})},v=b=>{r&&(b.preventDefault(),b.stopPropagation())};return window.addEventListener("keydown",m),window.addEventListener("keyup",v),()=>{window.removeEventListener("keydown",m),window.removeEventListener("keyup",v)}},[r]);const f=()=>{i(!0),u(new Set)};return w.useEffect(()=>{if(!r)return;const m=v=>{if(v.preventDefault(),v.stopPropagation(),v.key==="Escape"){i(!1);return}if(["Control","Shift","Alt","Meta"].includes(v.key))return;const x=[];v.ctrlKey&&x.push("Control"),v.shiftKey&&x.push("Shift"),v.altKey&&x.push("Alt"),v.metaKey&&x.push("Meta");let C=v.key;C.length===1&&(C=C.toUpperCase()),x.push(C);const R=x.join("+");n(R),i(!1)};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[r,n]),c.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-sidebar rounded-lg border border-dark-hover",children:[c.jsx("span",{className:"text-dark-text font-medium",children:t}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{ref:h,onClick:f,className:`
               min-w-[120px] px-4 py-2 rounded-lg font-mono text-sm border transition-colors
               ${r?"bg-brand-primary text-white border-brand-primary animate-pulse":"bg-dark-input text-dark-text border-dark-hover hover:border-dark-muted"}
             `,children:r?"Press Keys...":e||"No Keybind"}),e&&c.jsx("button",{onClick:()=>n(""),className:"p-2 text-dark-muted hover:text-red-400 transition-colors",title:"Clear Keybind",children:c.jsx($n,{size:20})})]})]})},lG=({currentUser:t})=>{const[e,n]=w.useState(!1),[r,i]=w.useState(null),[o,u]=w.useState(null),h="https://lumobuild.vercel.app/api/sso-token",f=async()=>{n(!0),i(null),u(null);try{if(!t)throw new Error("No user logged in");console.log(" Testing SSO Backend..."),console.log("User:",t.email);const m=await t.getIdToken();console.log(" Google ID Token obtained"),console.log(" Sending request to:",h);const v=await fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({googleIdToken:m,email:t.email})});console.log(" Response status:",v.status);const b=await v.json();if(console.log(" Response data:",b),b.success)i({success:!0,customToken:b.customToken,user:b.user,googleIdToken:m});else throw new Error(b.message||b.error||"Unknown error")}catch(m){console.error(" Test failed:",m),u(m.message)}finally{n(!1)}};return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-dark-muted text-sm mb-3",children:"Test the SSO backend to verify it's working correctly."}),c.jsx(st,{onClick:f,disabled:!t||e,variant:"primary",children:e?c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Testing..."]}):" Test SSO Backend"})]}),r&&c.jsxs("div",{className:"bg-green-900/20 border border-green-500 rounded-lg p-4",children:[c.jsx("h4",{className:"text-green-500 font-semibold mb-3",children:" Backend Working!"}),c.jsxs("div",{className:"space-y-3 text-sm",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-dark-muted mb-1",children:"User Info:"}),c.jsx("pre",{className:"bg-dark-sidebar p-3 rounded text-xs text-dark-text overflow-x-auto",children:JSON.stringify(r.user,null,2)})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-dark-muted mb-1",children:"Custom Token:"}),c.jsxs("pre",{className:"bg-dark-sidebar p-3 rounded text-xs text-dark-text overflow-x-auto break-all",children:[r.customToken.substring(0,100),"..."]})]}),c.jsxs("div",{className:"mt-4 pt-4 border-t border-green-500/30",children:[c.jsx("p",{className:"text-dark-muted mb-2",children:" SSO Test URL (for MeydanApp testing):"}),c.jsxs("div",{className:"bg-dark-sidebar p-3 rounded text-xs",children:[c.jsx("p",{className:"text-dark-text font-mono break-all mb-2",children:`${window.location.origin}/?sso_token=${r.googleIdToken}`}),c.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/?sso_token=${r.googleIdToken}`),alert("SSO URL copied to clipboard!")},className:"text-green-500 hover:text-green-400 text-xs underline",children:" Copy URL"})]})]})]})]}),o&&c.jsxs("div",{className:"bg-red-900/20 border border-red-500 rounded-lg p-4",children:[c.jsx("h4",{className:"text-red-500 font-semibold mb-2",children:" Test Failed"}),c.jsx("p",{className:"text-dark-text text-sm mb-3",children:o}),c.jsxs("div",{className:"bg-red-900/30 p-3 rounded text-xs text-dark-muted",children:[c.jsx("p",{className:"font-medium mb-1",children:"Possible issues:"}),c.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[c.jsx("li",{children:"Environment variables not set in Vercel"}),c.jsx("li",{children:"Backend not deployed"}),c.jsx("li",{children:"CORS configuration issue"})]})]})]}),c.jsxs("div",{className:"bg-dark-sidebar rounded p-3 text-xs",children:[c.jsx("p",{className:"text-dark-muted mb-1",children:"API Endpoint:"}),c.jsx("p",{className:"text-dark-text font-mono break-all",children:h})]})]})},cG=[{id:"premium",label:"Premium",icon:sl,category:"User Settings"},{id:"account",label:"My Account",icon:KL,category:"User Settings"},{id:"keybinds",label:"Keybinds",icon:IL,category:"App Settings"},{id:"security",label:"Privacy & Security",icon:jL,category:"User Settings"},{id:"about",label:"About",icon:op,category:"App Settings"},{id:"debug",label:" Debug",icon:op,category:"Developer"}],uG=({isOpen:t,onClose:e})=>{const{currentUser:n,userProfile:r}=yn(),{success:i,error:o,info:u}=Hr(),[h,f]=w.useState("account"),[m,v]=w.useState(r?.photoUrl||""),[b,x]=w.useState(r?.bannerUrl||""),[C,R]=w.useState(r?.themeColor||"#6366f1"),[A,k]=w.useState(r?.bio||""),[L,U]=w.useState(!1),[I,M]=w.useState(!1),[z,H]=w.useState({progress:0,speed:""}),[E,S]=w.useState(!1),[j,D]=w.useState({progress:0,speed:""}),V=w.useRef(null),B=w.useRef(null),[P,ne]=w.useState(!1),[oe,G]=w.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[Z,J]=w.useState(!1),{hotkeys:Se,updateHotkey:Le,resetToDefaults:$}=l6(),Q=Ec(r);w.useEffect(()=>{v(r?.photoUrl||""),x(r?.bannerUrl||""),R(r?.themeColor||"#6366f1"),k(r?.bio||"")},[r]),w.useEffect(()=>{const X=He=>{He.key==="Escape"&&t&&e()};return t&&(document.addEventListener("keydown",X),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",X),document.body.style.overflow="unset"}},[t,e]);const[re,he]=w.useState(r?.displayName||""),[Te,Ue]=w.useState(!1),[te,Oe]=w.useState(""),[Ie,Xe]=w.useState(!1);w.useEffect(()=>{r?.displayName&&he(r.displayName)},[r]),w.useEffect(()=>{if(!Te||re===r?.displayName){Oe("");return}const He=setTimeout(async()=>{if(!re){Oe("");return}if(re.length<3){Oe("Username must be at least 3 characters");return}if(!/^[a-zA-Z0-9-_]+$/.test(re)){Oe("Only letters, numbers, hyphens (-) and underscores (_) allowed");return}Xe(!0);try{const ct=_t(ce,"users"),on=Br(ct,zi("displayName","==",re)),Ee=await fi(ct);let $e=!1;const lt=re.toLowerCase();Ee.forEach(yt=>{if(yt.id===n.uid)return;const Vt=yt.data().displayName;Vt&&Vt.toLowerCase()===lt&&($e=!0)}),Oe($e?"This username is already taken":"")}catch(ct){console.error("Error checking username:",ct)}finally{Xe(!1)}},500);return()=>clearTimeout(He)},[re,Te,r,n]);const ke=async()=>{if(!(!n||te||Ie)){if(re===r?.displayName){Ue(!1);return}U(!0);try{DN(()=>Promise.resolve().then(()=>rP),[],import.meta.url).then(async({updateProfile:X})=>{await X(n,{displayName:re})}),await it(Re(ce,"users",n.uid),{displayName:re}),i("Username updated successfully"),Ue(!1)}catch(X){console.error("Error updating username:",X),o("Failed to update username")}finally{U(!1)}}},fe=async X=>{if(!(!X||!n)){if(!X.type.startsWith("image/")){o("Please select an image file");return}if(X.type==="image/gif"&&!Q){o("Animated GIF avatars are for Premium members only!");return}if(X.size>10*1024*1024){o("Image size must be less than 10MB");return}M(!0);try{const He=await Jd(X,(ct,on)=>{H({progress:ct,speed:on})});await it(Re(ce,"users",n.uid),{photoUrl:He}),v(He),i("Profile photo updated successfully!")}catch(He){console.error("Error uploading photo:",He),o("Failed to upload photo")}finally{M(!1),H({progress:0,speed:""}),V.current&&(V.current.value="")}}},Ae=async X=>{if(!(!X||!n)){if(!Q){u("Custom banners are a Premium feature. Upgrade to unlock!");return}if(!X.type.startsWith("image/")){o("Please select an image file");return}if(X.size>10*1024*1024){o("Image size must be less than 10MB");return}S(!0);try{const He=await Jd(X,(ct,on)=>{D({progress:ct,speed:on})});await it(Re(ce,"users",n.uid),{bannerUrl:He}),x(He),i("Banner updated successfully!")}catch(He){console.error("Error uploading banner:",He),o("Failed to upload banner")}finally{S(!1),D({progress:0,speed:""}),B.current&&(B.current.value="")}}},dt=async X=>{const He=X.target.value;R(He)},ye=async()=>{if(n){if(!Q){u("Custom themes are a Premium feature!"),R(r?.themeColor||"#6366f1");return}U(!0);try{await it(Re(ce,"users",n.uid),{themeColor:C}),i("Appearance updated!")}catch(X){console.error("Error updating appearance:",X),o("Failed to update appearance")}finally{U(!1)}}},Ve=async()=>{if(n){U(!0);try{await it(Re(ce,"users",n.uid),{bio:A.trim()}),i("Bio updated successfully")}catch(X){console.error("Error updating bio:",X),o("Failed to update bio")}finally{U(!1)}}},De=async()=>{if(!(!n||!n.email)){if(!oe.currentPassword||!oe.newPassword||!oe.confirmPassword){o("Please fill in all password fields");return}if(oe.newPassword.length<6){o("New password must be at least 6 characters");return}if(oe.newPassword!==oe.confirmPassword){o("New passwords do not match");return}J(!0);try{const X=la.credential(n.email,oe.currentPassword);await Cb(n,X),await CC(n,oe.newPassword),i("Password changed successfully"),G({currentPassword:"",newPassword:"",confirmPassword:""})}catch(X){console.error("Error changing password:",X),X.code==="auth/wrong-password"?o("Current password is incorrect"):X.code==="auth/weak-password"?o("New password is too weak"):o("Failed to change password")}finally{J(!1)}}},K=async X=>{if(n)try{await it(Re(ce,"users",n.uid),{status:X}),i(X?"Status updated":"Status cleared")}catch(He){console.error("Error updating status:",He),o("Failed to update status")}},ue=async X=>{if(n)try{await it(Re(ce,"users",n.uid),{presence:X}),i(`Status set to ${X}`)}catch{o("Failed to update status")}};if(!t)return null;const je=r?.role==="admin",Ne=cG.filter(X=>X.id==="debug"?je:!0).reduce((X,He)=>(X[He.category]||(X[He.category]=[]),X[He.category].push(He),X),{}),xe=()=>{switch(h){case"premium":return c.jsx(aG,{});case"account":return c.jsxs("div",{className:"space-y-8",children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"My Account"}),c.jsxs("div",{className:"rounded-lg overflow-hidden border border-dark-hover relative min-h-[300px]",style:{borderColor:C},children:[c.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-colors",style:{backgroundColor:C,backgroundImage:b?`url(${b})`:`linear-gradient(to bottom right, ${C}, #000)`}}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent"}),b?.endsWith(".gif")&&c.jsx("div",{className:"absolute top-2 right-2 px-2 py-1 bg-black/50 text-white text-[10px] rounded backdrop-blur-sm font-bold z-10",children:"GIF"}),c.jsxs("div",{className:"relative z-10 p-6 flex flex-col items-center justify-end h-full min-h-[300px] text-center mt-auto",children:[c.jsxs("div",{className:"relative group mb-4",children:[m?c.jsx("img",{src:m,alt:"Profile",className:"w-28 h-28 rounded-full object-cover border-4",style:{borderColor:C},onError:X=>{X.target.style.display="none",X.target.nextSibling.style.display="flex"}},m):null,c.jsx("div",{className:"w-28 h-28 rounded-full flex items-center justify-center text-white font-bold text-4xl border-4",style:{display:m?"none":"flex",backgroundColor:C,borderColor:C},children:r?.displayName?.[0]?.toUpperCase()||"U"}),c.jsx("div",{className:"absolute inset-0 rounded-full bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer border-4 border-transparent",onClick:()=>V.current?.click(),children:c.jsx(up,{className:"text-white",size:32})})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center justify-center gap-2 shadow-black drop-shadow-md",children:[r?.displayName,Q&&c.jsx(sl,{className:"text-brand-primary",title:"Premium Member"})]}),c.jsx("p",{className:"text-gray-200 text-sm font-medium shadow-black drop-shadow-md",children:n?.email}),c.jsx("div",{className:"flex justify-center gap-2 mt-3",children:c.jsx("span",{className:"text-xs px-3 py-1 rounded-full bg-black/40 backdrop-blur-md border border-white/20 text-white capitalize font-medium",children:r?.role||"member"})})]})]})]}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Profile Photo"}),c.jsx("input",{type:"file",ref:V,onChange:X=>fe(X.target.files?.[0]),accept:"image/*",className:"hidden"}),c.jsx("div",{className:"flex gap-3 mb-4",children:c.jsx("button",{onClick:()=>V.current?.click(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-dark-sidebar hover:bg-dark-hover border border-dark-hover text-dark-text rounded-lg transition-colors disabled:opacity-50",disabled:I,children:I?c.jsxs("span",{className:"text-sm",children:["Uploading ",Math.round(z.progress),"%..."]}):c.jsxs(c.Fragment,{children:[c.jsx(B0,{size:20}),"Upload New Photo"]})})})]}),c.jsxs("div",{className:`rounded-lg p-4 relative ${Q?"bg-dark-bg":"bg-dark-bg/50"}`,children:[!Q&&c.jsxs("div",{className:"absolute inset-0 z-10 bg-black/60 backdrop-blur-[1px] rounded-lg flex flex-col items-center justify-center text-center p-4",children:[c.jsx(sl,{size:32,className:"text-brand-primary mb-2 animate-bounce"}),c.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:"Unlock Profile Appearance"}),c.jsx("p",{className:"text-sm text-dark-muted mb-4 max-w-xs",children:"Customize your banner, theme colors, and use animated GIFs with Premium."}),c.jsx(st,{variant:"primary",onClick:()=>f("premium"),children:"View Premium Plans"})]}),c.jsxs("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-6 flex items-center gap-2",children:[c.jsx(OL,{})," Profile Appearance ",c.jsx("span",{className:"text-xs normal-case px-2 py-0.5 bg-brand-primary/20 text-brand-primary rounded",children:"Premium"})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-sm font-medium text-dark-text mb-2",children:"Profile Banner"}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("input",{type:"file",ref:B,onChange:X=>Ae(X.target.files?.[0]),accept:"image/*",className:"hidden"}),c.jsx("button",{onClick:()=>B.current?.click(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-8 border-2 border-dashed border-dark-hover hover:border-brand-primary rounded-lg text-dark-muted hover:text-brand-primary transition-colors disabled:opacity-50",disabled:E,children:E?c.jsxs("span",{children:["Uploading ",Math.round(j.progress),"%..."]}):c.jsxs("div",{className:"text-center",children:[c.jsx(up,{size:24,className:"mx-auto mb-1"}),c.jsx("div",{children:"Upload Banner Image"}),c.jsx("div",{className:"text-xs opacity-70",children:"JPG, PNG, GIF"})]})}),b&&c.jsxs("div",{className:"w-32 h-24 rounded-lg overflow-hidden relative group shrink-0",children:[c.jsx("img",{src:b,className:"w-full h-full object-cover"}),c.jsx("button",{onClick:()=>{x(""),it(Re(ce,"users",n.uid),{bannerUrl:""})},className:"absolute inset-0 bg-black/60 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity text-red-500 font-bold",children:"Remove"})]})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-sm font-medium text-dark-text mb-2",children:"Theme Color"}),c.jsxs("div",{className:"flex gap-4 items-center",children:[c.jsx("input",{type:"color",value:C,onChange:dt,className:"w-16 h-16 rounded-lg cursor-pointer bg-transparent border-0 p-0"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-dark-text font-mono bg-dark-input px-3 py-1 rounded border border-dark-hover",children:C}),c.jsx("div",{className:"text-xs text-dark-muted mt-1",children:"Select a color to accent your profile."})]}),c.jsx("div",{className:"flex-1 text-right",children:c.jsx(st,{onClick:ye,disabled:C===r?.themeColor,children:"Save Color"})})]})]})]}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Online Status"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[{key:"online",label:"Online",color:"bg-green-500",desc:"Visible"},{key:"idle",label:"Idle",color:"bg-yellow-500",desc:"Away"},{key:"dnd",label:"Do Not Disturb",color:"bg-red-500",desc:"No notifications"},{key:"invisible",label:"Invisible",color:"bg-gray-500",desc:"Hidden"}].map(X=>c.jsxs("button",{onClick:()=>ue(X.key),className:`p-3 rounded-lg border transition-all text-left flex items-center gap-3 ${r?.presence===X.key||!r?.presence&&X.key==="online"?"border-brand-primary bg-brand-primary/10":"border-dark-hover hover:border-dark-muted bg-dark-sidebar"}`,children:[c.jsx("span",{className:`w-3 h-3 rounded-full ${X.color}`}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-medium text-dark-text",children:X.label}),c.jsx("div",{className:"text-[10px] text-dark-muted",children:X.desc})]})]},X.key))})]}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Custom Status"}),r?.status?c.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-sidebar rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-2xl",children:r.status.emoji}),c.jsx("span",{className:"text-dark-text",children:r.status.text})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(st,{variant:"secondary",onClick:()=>ne(!0),children:"Edit"}),c.jsx(st,{variant:"danger",onClick:()=>K(null),children:"Clear"})]})]}):c.jsxs("div",{className:"text-center py-4 border border-dashed border-dark-hover rounded-lg",children:[c.jsx("p",{className:"text-dark-muted text-sm mb-3",children:"No custom status set"}),c.jsx(st,{variant:"primary",size:"sm",onClick:()=>ne(!0),children:"Set a Status"})]})]}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"About Me"}),c.jsx("textarea",{placeholder:"Tell others about yourself...",value:A,onChange:X=>k(X.target.value),maxLength:190,rows:4,className:`w-full bg-dark-input text-dark-text px-4 py-3 rounded-lg
                           border border-transparent focus:border-brand-primary
                           outline-none transition-colors duration-200
                           placeholder:text-dark-muted resize-none`}),c.jsxs("div",{className:"flex justify-between items-center mt-2",children:[c.jsxs("span",{className:"text-xs text-dark-muted",children:[A.length,"/190"]}),c.jsx(st,{variant:"primary",onClick:Ve,disabled:L||A===r?.bio,children:L?"Updating...":"Save"})]})]}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Account Info"}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"flex justify-between items-center py-2 border-b border-dark-hover",children:c.jsxs("div",{className:"w-full",children:[c.jsx("div",{className:"text-xs text-dark-muted uppercase mb-1",children:"Display Name"}),Te?c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx(bn,{value:re,onChange:X=>he(X.target.value),placeholder:"Enter new username",className:te?"!border-red-500":Ie?"!border-yellow-500":"!border-green-500"}),te&&c.jsx("p",{className:"text-xs text-red-500 mt-1",children:te}),!te&&re&&re!==r?.displayName&&!Ie&&c.jsx("p",{className:"text-xs text-green-500 mt-1",children:" Username available"}),Ie&&c.jsx("p",{className:"text-xs text-yellow-500 mt-1",children:"Checking availability..."})]}),c.jsxs("div",{className:"flex gap-1 mt-1",children:[c.jsx(st,{size:"sm",variant:"primary",onClick:ke,disabled:!!te||Ie||!re||L,children:"Save"}),c.jsx(st,{size:"sm",variant:"secondary",onClick:()=>{Ue(!1),he(r?.displayName||""),Oe("")},children:"Cancel"})]})]}):c.jsxs("div",{className:"flex justify-between items-center group",children:[c.jsx("div",{className:"text-dark-text font-medium text-lg",children:r?.displayName}),c.jsx(st,{size:"sm",variant:"secondary",className:"opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>Ue(!0),children:"Edit"})]})]})}),c.jsx("div",{className:"flex justify-between items-center py-2 border-b border-dark-hover",children:c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-dark-muted uppercase",children:"Email"}),c.jsx("div",{className:"text-dark-text font-medium",children:n?.email})]})}),c.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-dark-hover",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-dark-text font-medium",children:"Desktop Notifications"}),c.jsx("div",{className:"text-xs text-dark-muted",children:"Show popup notifications on desktop"})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:r?.settings?.notificationsEnabled!==!1,onChange:async X=>{const He=X.target.checked;try{await it(Re(ce,"users",n.uid),{"settings.notificationsEnabled":He})}catch(ct){console.error("Failed to update notification settings",ct)}}}),c.jsx("div",{className:"w-11 h-6 bg-dark-input peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-brand-primary"})]})]}),c.jsx("div",{className:"flex justify-between items-center py-2 border-b border-dark-hover",children:c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-dark-muted uppercase",children:"Role"}),c.jsx("div",{className:"text-dark-text font-medium capitalize",children:r?.role})]})}),c.jsx("div",{className:"flex justify-between items-center py-2",children:c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-dark-muted uppercase",children:"Role"}),c.jsx("div",{className:"text-dark-text font-medium capitalize",children:r?.role||"member"})]})})]})]})]});case"keybinds":return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Keybinds"}),c.jsx(st,{variant:"secondary",size:"sm",onClick:$,children:"Reset Defaults"})]}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4 space-y-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-2",children:"Voice & Video"}),c.jsx(pT,{label:"Toggle Mute",currentValue:Se.toggleMute,onChange:X=>Le("toggleMute",X)}),c.jsx(pT,{label:"Toggle Deafen",currentValue:Se.toggleDeafen,onChange:X=>Le("toggleDeafen",X)}),c.jsx("p",{className:"text-xs text-dark-muted mt-4",children:"Keybinds are active while the application window is focused."})]})]});case"security":return c.jsxs("div",{className:"space-y-8",children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Privacy & Security"}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Change Password"}),c.jsxs("div",{className:"space-y-4 max-w-md",children:[c.jsx(bn,{label:"Current Password",type:"password",placeholder:"Enter current password",value:oe.currentPassword,onChange:X=>G({...oe,currentPassword:X.target.value})}),c.jsx(bn,{label:"New Password",type:"password",placeholder:"Enter new password (min 6 characters)",value:oe.newPassword,onChange:X=>G({...oe,newPassword:X.target.value})}),c.jsx(bn,{label:"Confirm New Password",type:"password",placeholder:"Confirm new password",value:oe.confirmPassword,onChange:X=>G({...oe,confirmPassword:X.target.value})}),c.jsx(st,{variant:"primary",onClick:De,disabled:Z||!oe.currentPassword||!oe.newPassword||!oe.confirmPassword,children:Z?"Changing Password...":"Change Password"})]})]})]});case"about":return c.jsxs("div",{className:"space-y-8",children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"About"}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-6",children:[c.jsx("h2",{className:"text-xl font-bold text-dark-text mb-2",children:"Lumo Chat"}),c.jsxs("div",{className:"space-y-4 text-dark-muted text-sm",children:[c.jsx("p",{children:"A modern real-time chat application built for seamless communication."}),c.jsxs("div",{children:[c.jsx("div",{className:"font-semibold text-dark-text",children:"Version"}),c.jsx("div",{children:"2.0.14"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"font-semibold text-dark-text",children:"Developer"}),c.jsx("div",{children:"Dazlakss"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"font-semibold text-dark-text",children:"Tech Stack"}),c.jsx("div",{children:"React, Firebase, TailwindCSS, Electron"})]})]})]}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Acknowledgments"}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"flex items-center gap-4 p-3 bg-dark-sidebar rounded-lg border border-dark-hover",children:c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"text-dark-text font-medium",children:"GIPHY"}),c.jsx("div",{className:"text-xs text-dark-muted",children:"We use GIPHY for finding and sharing GIFs."}),c.jsx("a",{href:"https://giphy.com",target:"_blank",rel:"noopener noreferrer",className:"mt-2 text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500 block w-fit hover:opacity-80 transition-opacity",children:"Powered by GIPHY"})]})}),c.jsx("div",{className:"flex items-center gap-4 p-3 bg-dark-sidebar rounded-lg border border-dark-hover",children:c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"text-dark-text font-medium",children:"Cloudinary"}),c.jsx("div",{className:"text-xs text-dark-muted",children:"Robust cloud storage and delivery for images and files."}),c.jsx("a",{href:"https://cloudinary.com",target:"_blank",rel:"noopener noreferrer",className:"mt-2 text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-sky-400 block w-fit hover:opacity-80 transition-opacity",children:"Powered by Cloudinary"})]})}),c.jsx("div",{className:"flex items-center gap-4 p-3 bg-dark-sidebar rounded-lg border border-dark-hover",children:c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"text-dark-text font-medium",children:"ImgBB"}),c.jsx("div",{className:"text-xs text-dark-muted",children:"Simple and fast image hosting service."}),c.jsx("a",{href:"https://imgbb.com",target:"_blank",rel:"noopener noreferrer",className:"mt-2 text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-gray-200 to-gray-400 block w-fit hover:opacity-80 transition-opacity",children:"Powered by ImgBB"})]})})]})]})]});case"debug":return c.jsxs("div",{className:"space-y-8",children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:" Debug Tools"}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-dark-text mb-4",children:"SSO Backend Test"}),c.jsx(lG,{currentUser:n})]})]});default:return null}};return c.jsxs("div",{className:"fixed inset-0 bg-black/80 z-50 flex flex-col md:flex-row pt-safe-top md:pt-0",role:"dialog","aria-modal":"true",children:[c.jsx("div",{className:"w-full md:w-56 bg-dark-sidebar flex flex-col shrink-0 border-b md:border-b-0 md:border-r border-dark-hover",children:c.jsx("div",{className:"flex md:flex-col overflow-x-auto md:overflow-y-auto py-2 md:py-4 px-2 gap-2 md:gap-0 no-scrollbar",children:Object.entries(Ne).map(([X,He])=>c.jsxs("div",{className:"mb-0 md:mb-4 flex md:block gap-2 md:gap-0 shrink-0",children:[c.jsx("div",{className:"hidden md:block px-3 py-2 text-xs font-semibold text-dark-muted uppercase tracking-wide",children:X}),He.map(ct=>{const on=ct.icon;return c.jsxs("button",{onClick:()=>f(ct.id),className:`whitespace-nowrap flex items-center gap-2 md:gap-3 px-3 py-2 rounded-md text-left transition-colors ${h===ct.id?"bg-dark-hover text-dark-text":"text-dark-muted hover:text-dark-text hover:bg-dark-hover/50"}`,children:[c.jsx(on,{size:18}),c.jsx("span",{className:"text-sm",children:ct.label})]},ct.id)})]},X))})}),c.jsxs("div",{className:"flex-1 flex flex-col bg-dark-bg overflow-hidden min-w-0",children:[c.jsx("div",{className:"flex justify-end p-4 shrink-0",children:c.jsx("button",{onClick:e,className:"p-2 hover:bg-dark-hover rounded-full transition-colors group",title:"Close",children:c.jsx($n,{size:24,className:"text-dark-muted group-hover:text-dark-text"})})}),c.jsx("div",{className:"flex-1 overflow-y-auto px-4 md:px-10 pb-10",children:c.jsx("div",{className:h==="premium"?"w-full":"max-w-2xl mx-auto md:mx-0",children:xe()})})]}),P&&c.jsx(rG,{currentStatus:r?.status,onStatusChange:K,onClose:()=>ne(!1)})]})},dG=()=>{const[t,e]=w.useState([]),{channels:n}=ua();w.useEffect(()=>{const i=Br(_t(ce,"adminLogs"),np("timestamp","desc"),O0(100));return Tr(i,u=>{const h=[];u.forEach(f=>{h.push({id:f.id,...f.data()})}),e(h)})},[]);const r=i=>{const o=n.find(u=>u.id===i);return o?`#${o.name}`:"Unknown Channel"};return c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold text-dark-text mb-6",children:"Admin Logs"}),c.jsx("div",{className:"space-y-3 max-h-[520px] overflow-y-auto pr-2",children:t.length===0?c.jsx("div",{className:"text-center text-dark-muted py-8",children:"No logs yet"}):t.map(i=>c.jsxs("div",{className:"bg-dark-bg p-5 rounded-xl hover:bg-dark-hover transition-colors",children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsx("div",{className:"flex items-center gap-2",children:i.type==="message_delete"?c.jsxs(c.Fragment,{children:[c.jsx(Qi,{className:"text-admin",size:20}),c.jsx("span",{className:"font-semibold text-dark-text",children:"Message Deleted"})]}):i.type==="message_edit"?c.jsxs(c.Fragment,{children:[c.jsx(_c,{className:"text-blue-400",size:20}),c.jsx("span",{className:"font-semibold text-dark-text",children:"Message Edited"})]}):c.jsx("span",{className:"font-semibold text-dark-text",children:i.type})}),c.jsx("span",{className:"text-xs text-dark-muted",children:i.timestamp&&eg(i.timestamp)})]}),c.jsxs("div",{className:"space-y-1 text-sm",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx("span",{className:"text-dark-muted",children:"Channel:"}),c.jsx("span",{className:"text-dark-text font-medium",children:r(i.channelId)})]}),i.type==="message_delete"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx("span",{className:"text-dark-muted",children:"Original Author:"}),c.jsx("span",{className:"text-dark-text",children:i.originalAuthorName||i.originalUserName||"Unknown"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("span",{className:"text-dark-muted",children:"Message:"}),c.jsxs("span",{className:"text-dark-text italic",children:['"',i.messageText||i.deletedText||"(empty message)",'"']})]})]}),i.type==="message_edit"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx("span",{className:"text-dark-muted",children:"Before:"}),c.jsxs("span",{className:"text-dark-text italic",children:['"',i.originalText,'"']})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("span",{className:"text-dark-muted",children:"After:"}),c.jsxs("span",{className:"text-blue-400 italic",children:['"',i.newText,'"']})]})]})]})]},i.id))})]})},hG=[{id:"users",label:"Users",icon:I1,category:"Moderation"},{id:"roles",label:"Roles",icon:HN,category:"Moderation"},{id:"channels",label:"Channels",icon:sg,category:"Server Settings"},{id:"server",label:"Overview",icon:op,category:"Server Settings"},{id:"logs",label:"Audit Log",icon:mL,category:"Server Settings"},{id:"notifications",label:"Notifications",icon:GL,category:"Maintenance"},{id:"cleanup",label:"Cleanup",icon:LL,category:"Maintenance"}],fG=({isOpen:t,onClose:e})=>{const{userProfile:n}=yn(),{users:r,channels:i,server:o,currentServer:u}=ua(),[h,f]=w.useState("users"),[m,v]=w.useState(null),[b,x]=w.useState(""),[C,R]=w.useState(""),[A,k]=w.useState("text"),[L,U]=w.useState(null),[I,M]=w.useState([]),[z,H]=w.useState(null),[E,S]=w.useState({name:"",color:"#5865f2"}),[j,D]=w.useState(null),[V,B]=w.useState(null),{success:P,error:ne}=Hr(),[oe,G]=w.useState(0),[Z,J]=w.useState(!1),[Se,Le]=w.useState(null);w.useEffect(()=>{const K=ue=>{ue.key==="Escape"&&t&&e()};return t&&(document.addEventListener("keydown",K),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",K),document.body.style.overflow="unset"}},[t,e]),w.useEffect(()=>{if(!u||u==="home")return;const K=Br(_t(ce,"servers",u,"roles"));return Tr(K,je=>{const me=[];je.forEach(Ne=>{me.push({id:Ne.id,...Ne.data()})}),M(me)})},[u]),w.useEffect(()=>{if(h!=="cleanup")return;(async()=>{try{const ue=await fi(_t(ce,"inviteCodes")),je=new Date;let me=0;ue.forEach(Ne=>{const xe=Ne.data(),X=xe.expiresAt?.toDate()<je,He=!xe.isActive||xe.uses>=xe.maxUses;(X||He)&&me++}),G(me)}catch(ue){console.error("Error fetching cleanup stats:",ue)}})()},[h]);const $=async()=>{J(!0);try{const K=await fi(_t(ce,"inviteCodes")),ue=new Date,je=kS(ce);let me=0;K.forEach(Ne=>{const xe=Ne.data(),X=xe.expiresAt?.toDate()<ue,He=!xe.isActive||xe.uses>=xe.maxUses;(X||He)&&(je.delete(Re(ce,"inviteCodes",Ne.id)),me++)}),me>0?(await je.commit(),P(`${me} expired invite code(s) deleted`),G(0)):P("No expired invite codes to delete")}catch(K){console.error("Error cleaning invite codes:",K),ne("Failed to clean invite codes")}finally{J(!1),Le(null)}};if(!t||n?.role!=="admin")return null;const Q=async(K,ue)=>{try{await it(Re(ce,"users",K),{role:ue}),u&&await it(Re(ce,"servers",u,"members",K),{role:ue}),P(`Role updated to ${ue}`),v(null)}catch(je){console.error("Error updating user role:",je),ne(`Failed to update role: ${je.message}`)}},re=async(K,ue)=>{try{await it(Re(ce,"users",K),{isMuted:!ue})}catch(je){console.error("Error toggling mute:",je)}},he=async(K,ue)=>{try{await it(Re(ce,"users",K),{isBanned:!ue})}catch(je){console.error("Error toggling ban:",je)}},Te=async()=>{if(!(!b.trim()||!u))try{await Kn(_t(ce,"servers",u,"channels"),{name:b.trim(),type:A,description:A==="text"?C.trim():"",position:i.length,createdAt:ft()}),x(""),R(""),k("text"),P(`${A==="voice"?"Sesli":"Yaz"} kanal oluturuldu!`)}catch(K){console.error("Error creating channel:",K),ne("Kanal oluturulamad")}},Ue=async(K,ue)=>{try{await it(Re(ce,"servers",u,"channels",K),ue),U(null)}catch(je){console.error("Error updating channel:",je)}},te=async()=>{if(!(!V?.data||!u))try{await ns(Re(ce,"servers",u,"channels",V.data))}catch(K){console.error("Error deleting channel:",K)}},Oe=async(K,ue)=>{if(u)try{await it(Re(ce,"servers",u,"channels",K),{locked:!ue})}catch(je){console.error("Error toggling channel lock:",je)}},Ie=async()=>{if(E.name.trim())try{const K=I.reduce((ue,je)=>Math.max(ue,je.position||0),0);u&&await Kn(_t(ce,"servers",u,"roles"),{name:E.name.trim(),color:E.color,position:K+1,createdAt:ft()}),S({name:"",color:"#5865f2"})}catch(K){console.error("Error creating role:",K)}},Xe=async(K,ue)=>{if(u)try{await it(Re(ce,"servers",u,"roles",K),ue),H(null)}catch(je){console.error("Error updating role:",je)}},ke=async()=>{if(!V?.data)return;const K=V.data;try{const ue=I.find(xe=>xe.id===K);if(!ue)return;const je=ue.name,me=kS(ce),Ne=r.filter(xe=>(xe.serverRole||xe.role)===je);if(Ne.forEach(xe=>{if(xe.role===je){const X=Re(ce,"users",xe.id);me.update(X,{role:"member"})}if(u){const X=Re(ce,"servers",u,"members",xe.id);me.update(X,{role:"member"})}}),u){const xe=Re(ce,"servers",u,"roles",K);me.delete(xe),await me.commit(),P(`Role '${je}' deleted and ${Ne.length} users reassigned to Member`)}}catch(ue){console.error("Error deleting role:",ue),ne(`Failed to delete role: ${ue.message}`)}},fe=[{id:"admin",name:"admin",color:"#f23f42",isDefault:!0,position:-3},{id:"moderator",name:"moderator",color:"#faa81a",isDefault:!0,position:-2},{id:"member",name:"member",color:"#80848e",isDefault:!0,position:-1},...I].sort((K,ue)=>(K.position??999)-(ue.position??999)),Ae=(K,ue)=>{D(ue),K.dataTransfer.effectAllowed="move"},dt=K=>{K.preventDefault(),K.dataTransfer.dropEffect="move"},ye=async(K,ue)=>{if(K.preventDefault(),!j||j===ue){D(null);return}const je=fe.find(Ne=>Ne.id===j),me=fe.find(Ne=>Ne.id===ue);if(je?.isDefault||me?.isDefault){D(null);return}try{const Ne=je.position??0,xe=me.position??0;u&&(await it(Re(ce,"servers",u,"roles",j),{position:xe}),await it(Re(ce,"servers",u,"roles",ue),{position:Ne}))}catch(Ne){console.error("Error reordering roles:",Ne)}D(null)},Ve=hG.reduce((K,ue)=>(K[ue.category]||(K[ue.category]=[]),K[ue.category].push(ue),K),{}),De=()=>{switch(h){case"users":return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"User Management"}),c.jsx("p",{className:"text-dark-muted",children:"Manage server members, assign roles, and moderate users."}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[c.jsxs("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:["Members  ",r.length]}),c.jsx("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:r.map(K=>c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-dark-hover transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-primary flex items-center justify-center text-white font-semibold",children:K.displayName?.[0]?.toUpperCase()||"U"}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-medium text-dark-text",children:K.displayName}),c.jsx("span",{className:"text-xs px-2 py-0.5 rounded",style:{backgroundColor:`${fe.find(ue=>ue.name===(K.serverRole||K.role))?.color}20`,color:fe.find(ue=>ue.name===(K.serverRole||K.role))?.color},children:K.serverRole||K.role}),K.isMuted&&c.jsx("span",{className:"text-xs text-yellow-500",children:"MUTED"}),K.isBanned&&c.jsx("span",{className:"text-xs text-red-500",children:"BANNED"})]}),c.jsx("div",{className:"text-sm text-dark-muted",children:K.email})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(st,{size:"sm",variant:K.isMuted?"warning":"secondary",onClick:()=>re(K.id,K.isMuted),children:K.isMuted?"Unmute":"Mute"}),c.jsx(st,{size:"sm",variant:K.isBanned?"danger":"secondary",onClick:()=>he(K.id,K.isBanned),children:K.isBanned?"Unban":"Ban"}),c.jsx(st,{size:"sm",variant:"ghost",onClick:()=>v(K),children:c.jsx(_c,{size:16})})]})]},K.id))})]})]});case"roles":return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Roles"}),c.jsx("p",{className:"text-dark-muted mt-1",children:"Use roles to organize your members and customize permissions."})]}),c.jsxs("div",{className:"bg-dark-bg rounded-xl p-6 border border-dark-hover",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-primary/20 flex items-center justify-center",children:c.jsx(Zo,{className:"text-brand-primary",size:24})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-dark-text",children:"Create New Role"}),c.jsx("p",{className:"text-sm text-dark-muted",children:"Add a custom role with a unique color"})]})]}),c.jsxs("div",{className:"flex gap-4 items-end",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-xs font-medium text-dark-muted uppercase tracking-wide mb-2",children:"Role Name"}),c.jsx(bn,{placeholder:"e.g. VIP, Helper, Supporter...",value:E.name,onChange:K=>S({...E,name:K.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-dark-muted uppercase tracking-wide mb-2",children:"Color"}),c.jsx("div",{className:"relative",children:c.jsx("input",{type:"color",value:E.color,onChange:K=>S({...E,color:K.target.value}),className:"w-14 h-10 rounded-lg cursor-pointer border-2 border-dark-hover hover:border-brand-primary transition-colors",style:{backgroundColor:E.color}})})]}),c.jsxs(st,{onClick:Ie,disabled:!E.name.trim(),className:"px-6",children:[c.jsx(Zo,{size:18,className:"mr-1"}),"Create Role"]})]})]}),c.jsxs("div",{className:"bg-dark-bg rounded-xl border border-dark-hover overflow-hidden",children:[c.jsxs("div",{className:"px-6 py-4 border-b border-dark-hover flex items-center justify-between",children:[c.jsxs("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide",children:["Roles  ",fe.length]}),c.jsx("span",{className:"text-xs text-dark-muted",children:"Drag custom roles to reorder hierarchy"})]}),c.jsxs("div",{className:"divide-y divide-dark-hover",children:[fe.map((K,ue)=>c.jsxs("div",{draggable:!K.isDefault,onDragStart:je=>Ae(je,K.id),onDragOver:dt,onDrop:je=>ye(je,K.id),className:Ht("group flex items-center justify-between px-6 py-4 transition-colors",!K.isDefault&&"cursor-grab active:cursor-grabbing hover:bg-dark-sidebar/50",K.isDefault&&"opacity-70",j===K.id&&"opacity-50 bg-brand-primary/10"),children:[c.jsxs("div",{className:"flex items-center gap-4",children:[!K.isDefault&&c.jsx("div",{className:"text-dark-muted opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(kL,{size:20})}),c.jsx("div",{className:"w-5 h-5 rounded-full ring-2 ring-offset-2 ring-offset-dark-bg",style:{backgroundColor:K.color,ringColor:K.color}}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-semibold text-dark-text",style:{color:K.color},children:K.name}),K.isDefault&&c.jsx("span",{className:"text-[10px] px-2 py-0.5 bg-dark-hover text-dark-muted rounded-full uppercase font-medium",children:"System"})]}),c.jsx("p",{className:"text-xs text-dark-muted mt-0.5",children:K.isDefault?"Default system role":`Position: ${K.position??0}`})]})]}),!K.isDefault&&c.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>H(K),className:"p-2 rounded-lg hover:bg-dark-hover text-dark-muted hover:text-brand-primary transition-colors",title:"Edit Role",children:c.jsx(_c,{size:18})}),c.jsx("button",{onClick:()=>B({type:"role",data:K.id,name:K.name}),className:"p-2 rounded-lg hover:bg-red-500/20 text-dark-muted hover:text-red-500 transition-colors",title:"Delete Role",children:c.jsx(Qi,{size:18})})]})]},K.id)),fe.length===0&&c.jsxs("div",{className:"px-6 py-12 text-center",children:[c.jsx(HN,{className:"mx-auto text-dark-muted mb-3",size:40}),c.jsx("p",{className:"text-dark-muted",children:"No roles created yet"}),c.jsx("p",{className:"text-xs text-dark-muted mt-1",children:"Create your first role above!"})]})]})]})]});case"channels":return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Channels"}),c.jsx("p",{className:"text-dark-muted",children:"Create and manage server channels."}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:"Create New Channel"}),c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsxs("div",{className:"flex gap-2 mb-2",children:[c.jsx("button",{onClick:()=>k("text"),className:`flex-1 py-2 px-4 rounded-lg border transition-colors ${A==="text"?"border-brand-primary bg-brand-primary/20 text-brand-primary":"border-dark-hover text-dark-muted hover:border-dark-muted"}`,children:"# Yaz Kanal"}),c.jsx("button",{onClick:()=>k("voice"),className:`flex-1 py-2 px-4 rounded-lg border transition-colors ${A==="voice"?"border-green-500 bg-green-500/20 text-green-500":"border-dark-hover text-dark-muted hover:border-dark-muted"}`,children:" Sesli Kanal"})]}),c.jsx(bn,{placeholder:"Channel name",value:b,onChange:K=>x(K.target.value)}),A==="text"&&c.jsx(bn,{placeholder:"Channel topic/description (Optional)",value:C,onChange:K=>R(K.target.value)})]}),c.jsxs(st,{onClick:Te,className:"h-fit mt-auto",children:[c.jsx(Zo,{size:20}),"Create"]})]})]}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-4",children:[c.jsxs("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide mb-4",children:["Text Channels  ",i.length]}),c.jsx("div",{className:"space-y-2",children:i.map(K=>c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-dark-hover transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(sg,{className:"text-dark-muted"}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-medium text-dark-text",children:K.name}),K.description&&c.jsx("span",{className:"text-xs text-dark-muted ml-2 truncate max-w-[200px]",children:K.description}),K.locked&&c.jsxs("span",{className:"text-xs px-2 py-0.5 rounded bg-yellow-500/20 text-yellow-500 flex items-center gap-1",children:[c.jsx(Zp,{size:12}),"LOCKED"]})]}),c.jsx("div",{className:"text-xs text-dark-muted",children:K.locked?"Only admins can send messages":"Everyone can send messages"})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(st,{size:"sm",variant:"ghost",onClick:()=>U(K),children:c.jsx(_c,{size:16})}),c.jsx(st,{size:"sm",variant:K.locked?"warning":"secondary",onClick:()=>Oe(K.id,K.locked),children:K.locked?"Unlock":"Lock"}),c.jsx(st,{size:"sm",variant:"danger",onClick:()=>B({type:"channel",data:K.id,name:K.name}),children:c.jsx(Qi,{size:16})})]})]},K.id))})]})]});case"server":return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Server Overview"}),c.jsx("p",{className:"text-dark-muted",children:"View server statistics and information."}),c.jsxs("div",{className:"bg-dark-bg rounded-lg p-6",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("div",{className:"text-xs text-dark-muted uppercase tracking-wide mb-1",children:"Server Name"}),c.jsx("div",{className:"text-2xl font-bold text-dark-text",children:o?.name||"Unknown"})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{className:"bg-dark-sidebar p-4 rounded-lg text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-brand-primary mb-1",children:r.length}),c.jsx("div",{className:"text-sm text-dark-muted",children:"Members"})]}),c.jsxs("div",{className:"bg-dark-sidebar p-4 rounded-lg text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-green-500 mb-1",children:i.length}),c.jsx("div",{className:"text-sm text-dark-muted",children:"Channels"})]}),c.jsxs("div",{className:"bg-dark-sidebar p-4 rounded-lg text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-purple-500 mb-1",children:fe.length}),c.jsx("div",{className:"text-sm text-dark-muted",children:"Roles"})]})]})]})]});case"logs":return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Audit Log"}),c.jsx("p",{className:"text-dark-muted",children:"View server activity and moderation history."}),c.jsx(dG,{})]});case"notifications":return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Push Notifications"}),c.jsx("p",{className:"text-dark-muted",children:"View and copy user FCM tokens for manual testing."}),c.jsxs("div",{className:"bg-dark-bg rounded-lg border border-dark-hover overflow-hidden",children:[c.jsx("div",{className:"px-6 py-4 border-b border-dark-hover",children:c.jsxs("h3",{className:"text-sm font-semibold text-dark-muted uppercase tracking-wide",children:["Registered Devices  ",r.filter(K=>K.fcmTokens).length," / ",r.length]})}),c.jsx("div",{className:"divide-y divide-dark-hover max-h-[600px] overflow-y-auto",children:r.map(K=>c.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-dark-sidebar/50 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-primary flex items-center justify-center text-white shrink-0",children:K.displayName?.[0]?.toUpperCase()||"U"}),c.jsxs("div",{className:"overflow-hidden",children:[c.jsx("div",{className:"font-medium text-dark-text truncate",children:K.displayName}),c.jsx("div",{className:"text-xs font-mono text-dark-muted truncate max-w-[400px]",children:K.fcmTokens||"No token registered"})]})]}),c.jsx("div",{className:"flex items-center gap-2",children:K.fcmTokens?c.jsxs(st,{size:"sm",variant:"secondary",onClick:()=>{navigator.clipboard.writeText(K.fcmTokens),P("Token copied to clipboard!")},children:[c.jsx(FN,{size:16,className:"mr-1"}),"Copy"]}):c.jsx("span",{className:"text-xs text-dark-muted italic px-2",children:"Offline/No Device"})})]},K.id))})]})]});case"cleanup":return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Database Cleanup"}),c.jsx("p",{className:"text-dark-muted",children:"Remove unused data to keep your database clean and reduce storage costs."}),c.jsx("div",{className:"grid gap-4",children:c.jsxs("div",{className:"bg-dark-bg rounded-lg p-6 border border-dark-hover",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-dark-text",children:"Expired Invite Codes"}),c.jsx("p",{className:"text-sm text-dark-muted mt-1",children:"Expired, used, or deactivated invite codes that are no longer valid."})]}),c.jsx("div",{className:"text-3xl font-bold text-yellow-500",children:oe})]}),c.jsxs(st,{variant:"warning",onClick:()=>Le("invites"),disabled:oe===0||Z,className:"w-full",children:[c.jsx(Qi,{size:20}),Z?"Cleaning...":"Clean Invite Codes"]})]})}),c.jsxs("div",{className:"text-xs text-dark-muted bg-dark-sidebar p-4 rounded-lg",children:[c.jsx("strong",{children:"Note:"})," These actions are irreversible. Deleted data cannot be recovered. Running cleanup periodically helps keep your Firestore quota usage low."]})]});default:return null}};return c.jsxs("div",{className:"fixed inset-0 bg-black/80 z-[100] flex flex-col md:flex-row pt-safe-top md:pt-0",children:[c.jsx("div",{className:"w-full md:w-56 bg-dark-sidebar flex flex-col shrink-0 border-b md:border-b-0 md:border-r border-dark-hover",children:c.jsx("div",{className:"flex md:flex-col overflow-x-auto md:overflow-y-auto py-2 md:py-4 px-2 gap-2 md:gap-0 no-scrollbar",children:Object.entries(Ve).map(([K,ue])=>c.jsxs("div",{className:"mb-0 md:mb-4 flex md:block gap-2 md:gap-0 shrink-0",children:[c.jsx("div",{className:"hidden md:block px-3 py-2 text-xs font-semibold text-dark-muted uppercase tracking-wide",children:K}),ue.map(je=>{const me=je.icon;return c.jsxs("button",{onClick:()=>f(je.id),className:Ht("whitespace-nowrap flex items-center gap-2 md:gap-3 px-3 py-2 rounded-md text-left transition-colors",h===je.id?"bg-dark-hover text-dark-text":"text-dark-muted hover:text-dark-text hover:bg-dark-hover/50"),children:[c.jsx(me,{size:18}),c.jsx("span",{className:"text-sm",children:je.label})]},je.id)})]},K))})}),c.jsxs("div",{className:"flex-1 flex flex-col bg-dark-bg overflow-hidden min-w-0",children:[c.jsx("div",{className:"flex justify-end p-4 shrink-0",children:c.jsx("button",{onClick:e,className:"p-2 hover:bg-dark-hover rounded-full transition-colors group",title:"Close (ESC)",children:c.jsx($n,{size:24,className:"text-dark-muted group-hover:text-dark-text"})})}),c.jsx("div",{className:"flex-1 overflow-y-auto px-4 md:px-10 pb-10",children:c.jsx("div",{className:"max-w-3xl mx-auto md:mx-0",children:De()})})]}),m&&(()=>{const K=r.find(ue=>ue.id===m.id)||m;return c.jsx(Ps,{isOpen:!!m,onClose:()=>v(null),title:"Edit User Role",size:"sm",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-dark-muted mb-1",children:"User"}),c.jsx("div",{className:"font-medium text-dark-text",children:K.displayName})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-dark-muted mb-2",children:"Select Role"}),c.jsx("div",{className:"space-y-2",children:fe.map(ue=>c.jsxs("button",{onClick:()=>Q(m.id,ue.name),className:Ht("w-full px-3 py-2 rounded-lg border text-left transition-all flex items-center gap-3",(K.serverRole||K.role)===ue.name?"border-brand-primary bg-brand-primary/20":"border-dark-hover hover:bg-dark-hover"),children:[c.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:ue.color}}),c.jsx("span",{className:"text-dark-text",children:ue.name})]},ue.id))})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-dark-muted mb-2",children:"Badges"}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.values(H1).map(ue=>{const je=K.badges?.includes(ue.id),me=ue.icon;return c.jsxs("button",{onClick:async()=>{try{await it(Re(ce,"users",m.id),{badges:je?Yd(ue.id):bh(ue.id)}),P(je?`${ue.label} badge removed`:`${ue.label} badge granted`)}catch{ne("Failed to update badge")}},className:Ht("flex items-center gap-2 px-3 py-2 rounded-lg border text-left transition-all",je?"border-brand-primary bg-brand-primary/20":"border-dark-hover hover:bg-dark-hover"),children:[c.jsx(me,{size:16,style:{color:ue.color}}),c.jsx("span",{className:"text-dark-text text-sm",children:ue.label})]},ue.id)})})]})]})})})(),z&&c.jsx(Ps,{isOpen:!!z,onClose:()=>H(null),title:"Edit Role",size:"sm",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx(bn,{label:"Role Name",value:z.name,onChange:K=>H({...z,name:K.target.value})}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-dark-text mb-2 block",children:"Role Color"}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("input",{type:"color",value:z.color,onChange:K=>H({...z,color:K.target.value}),className:"w-14 h-10 rounded cursor-pointer"}),c.jsx(bn,{value:z.color,onChange:K=>H({...z,color:K.target.value}),className:"flex-1"})]})]}),c.jsx(st,{variant:"primary",className:"w-full",onClick:()=>Xe(z.id,{name:z.name,color:z.color}),children:"Save Changes"})]})}),L&&c.jsx(Ps,{isOpen:!!L,onClose:()=>U(null),title:"Edit Channel",size:"sm",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx(bn,{label:"Channel Name",value:L.name,onChange:K=>U({...L,name:K.target.value})}),c.jsx(bn,{label:"Channel Topic / Description",value:L.description||"",onChange:K=>U({...L,description:K.target.value})}),c.jsx(st,{variant:"primary",className:"w-full",onClick:()=>Ue(L.id,{name:L.name,description:L.description}),children:"Save Changes"})]})}),c.jsx(Mc,{isOpen:!!V,onClose:()=>B(null),onConfirm:V?.type==="channel"?te:ke,title:`Delete ${V?.type==="channel"?"Channel":"Role"}`,message:`Are you sure you want to delete "${V?.name}"? This cannot be undone.`,confirmText:"Delete",variant:"danger"}),c.jsx(Mc,{isOpen:!!Se,onClose:()=>Le(null),onConfirm:$,title:"Clean Invite Codes",message:`Are you sure you want to delete ${oe} expired/used invite code(s)? This action cannot be undone.`,confirmText:"Clean",variant:"danger"})]})},mG=({isOpen:t,onClose:e,userId:n,onSuccess:r})=>{const[i,o]=w.useState(""),[u,h]=w.useState(null),[f,m]=w.useState(null),[v,b]=w.useState(!1),[x,C]=w.useState({progress:0,speed:""}),R=w.useRef(null),{success:A,error:k}=Hr(),L=I=>{const M=I.target.files?.[0];if(M){if(!M.type.startsWith("image/")){k("Please select an image file");return}if(M.size>10*1024*1024){k("Image size must be less than 10MB");return}h(M),m(URL.createObjectURL(M))}},U=async()=>{if(!i.trim()){k("Server name is required");return}b(!0);try{let I=null;u&&(I=await Jd(u,(z,H)=>{C({progress:z,speed:H})}));const M=await Kn(_t(ce,"servers"),{name:i.trim(),icon:I,ownerId:n,createdAt:ft(),isDefault:!1,memberCount:1});await dr(Re(ce,"servers",M.id,"members",n),{userId:n,joinedAt:ft(),role:"admin"}),await Kn(_t(ce,"servers",M.id,"channels"),{name:"general",type:"text",description:"General discussion",position:0,createdAt:ft()}),await it(Re(ce,"users",n),{servers:bh(M.id),currentServer:M.id}),A("Server created successfully!"),o(""),h(null),f&&URL.revokeObjectURL(f),m(null),r&&r(M.id),e()}catch(I){console.error("Error creating server:",I),k("Failed to create server")}finally{b(!1),C({progress:0,speed:""})}};return c.jsx(Ps,{isOpen:t,onClose:e,title:"Create Server",size:"sm",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("input",{type:"file",ref:R,onChange:L,accept:"image/*",className:"hidden"}),c.jsx("button",{onClick:()=>R.current?.click(),className:"w-20 h-20 rounded-full bg-dark-hover border-2 border-dashed border-dark-muted hover:border-brand-primary flex items-center justify-center transition-colors overflow-hidden",children:f?c.jsx("img",{src:f,alt:"Preview",className:"w-full h-full object-cover"}):c.jsx(DL,{size:32,className:"text-dark-muted"})}),c.jsx("span",{className:"text-xs text-dark-muted mt-2",children:"Server Icon (Optional)"})]}),v&&u&&x.progress>0&&c.jsxs("div",{className:"text-xs text-dark-muted text-center",children:["Uploading icon: ",Math.round(x.progress),"% (",x.speed,")"]}),c.jsx(bn,{label:"Server Name",placeholder:"My Awesome Server",value:i,onChange:I=>o(I.target.value),maxLength:50,autoFocus:!0}),c.jsxs("div",{className:"text-xs text-dark-muted",children:[i.length,"/50 characters"]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(st,{variant:"secondary",onClick:e,className:"flex-1",children:"Cancel"}),c.jsx(st,{variant:"primary",onClick:U,disabled:!i.trim()||v,className:"flex-1",children:v?"Creating...":"Create Server"})]})]})})},pG=({isOpen:t,onClose:e,userId:n,onSuccess:r})=>{const[i,o]=w.useState(""),[u,h]=w.useState(!1),{success:f,error:m}=Hr(),v=async()=>{if(!i.trim()){m("Invite code is required");return}h(!0);try{const b=i.trim().toUpperCase(),x=Re(ce,"inviteCodes",b),C=await Zc(x);if(!C.exists()){m("Invalid invite code");return}const R=C.data();if(!R.isActive){m("This invite code has already been used");return}const A=R.isUnlimited===!0||R.maxUses===-1;if(!A&&R.uses>=R.maxUses){m("This invite code has reached its usage limit");return}if(R.expiresAt.toDate()<new Date){m("This invite code has expired");return}await dr(Re(ce,"servers",R.serverId,"members",n),{userId:n,joinedAt:ft(),role:"member"}),await it(Re(ce,"users",n),{servers:bh(R.serverId),currentServer:R.serverId});const k={uses:Bi(1)};A||(k.isActive=!1),await it(x,k),await it(Re(ce,"servers",R.serverId),{memberCount:Bi(1)}),f("Successfully joined server!"),o(""),r&&r(R.serverId),e()}catch(b){console.error("Error joining server:",b),console.error("Error code:",b.code),console.error("Error message:",b.message),b.code!=="permission-denied"?b.code==="not-found"?m("Server not found"):m(`Failed to join server: ${b.message}`):e()}finally{h(!1)}};return c.jsx(Ps,{isOpen:t,onClose:e,title:"Join Server",size:"sm",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx(bn,{label:"Invite Code",placeholder:"ABC12XYZ",value:i,onChange:b=>o(b.target.value.toUpperCase()),maxLength:8,autoFocus:!0}),c.jsx("div",{className:"text-xs text-dark-muted",children:"Enter the 8-character invite code"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(st,{variant:"secondary",onClick:e,className:"flex-1",children:"Cancel"}),c.jsx(st,{variant:"primary",onClick:v,disabled:i.length!==8||u,className:"flex-1",children:u?"Joining...":"Join Server"})]})]})})},gG=({isOpen:t,onClose:e})=>{const{availableDevices:n,selectedMicId:r,setSelectedMicId:i,selectedCameraId:o,setSelectedCameraId:u}=ru();return t?c.jsx("div",{className:"fixed inset-0 bg-black/80 z-[100] flex items-center justify-center animate-fade-in",children:c.jsxs("div",{className:"bg-dark-elem w-full max-w-md rounded-2xl shadow-2xl border border-dark-hover overflow-hidden p-6 relative",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[c.jsx(Zp,{size:28,className:"text-brand-primary"}),"Device Settings"]}),c.jsx("button",{onClick:e,className:"p-1 hover:bg-dark-hover rounded-full transition-colors text-dark-muted hover:text-white",children:c.jsx($n,{size:24})})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-xs font-bold text-dark-muted uppercase tracking-wider mb-2 flex items-center gap-2",children:[c.jsx(U0,{size:16})," Microphone"]}),c.jsxs("select",{className:"w-full bg-dark-input border border-dark-hover rounded-lg p-3 text-white focus:ring-2 focus:ring-brand-primary outline-none transition-all",value:r,onChange:h=>i(h.target.value),children:[n.audioInputs.map(h=>c.jsx("option",{value:h.deviceId,children:h.label||`Microphone ${h.deviceId.slice(0,5)}...`},h.deviceId)),n.audioInputs.length===0&&c.jsx("option",{value:"",children:"No microphone found"})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-xs font-bold text-dark-muted uppercase tracking-wider mb-2 flex items-center gap-2",children:[c.jsx(Kd,{size:16})," Camera"]}),c.jsxs("select",{className:"w-full bg-dark-input border border-dark-hover rounded-lg p-3 text-white focus:ring-2 focus:ring-brand-primary outline-none transition-all",value:o,onChange:h=>u(h.target.value),children:[n.videoInputs.map(h=>c.jsx("option",{value:h.deviceId,children:h.label||`Camera ${h.deviceId.slice(0,5)}...`},h.deviceId)),n.videoInputs.length===0&&c.jsx("option",{value:"",children:"No camera found"})]})]}),c.jsx("div",{className:"pt-4 border-t border-dark-hover flex justify-end",children:c.jsx(st,{variant:"primary",onClick:e,children:"Done"})})]})]})}):null};var fd={exports:{}},i0={},a0={exports:{}},o0,gT;function vG(){if(gT)return o0;gT=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return o0=t,o0}var l0,vT;function yG(){if(vT)return l0;vT=1;var t=vG();function e(){}function n(){}return n.resetWarningCache=e,l0=function(){function r(u,h,f,m,v,b){if(b!==t){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}r.isRequired=r;function i(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return o.PropTypes=o,o},l0}var yT;function c6(){return yT||(yT=1,a0.exports=yG()()),a0.exports}var um={exports:{}},bT;function bG(){if(bT)return um.exports;bT=1;function t(n){var r,i,o="";if(typeof n=="string"||typeof n=="number")o+=n;else if(typeof n=="object")if(Array.isArray(n)){var u=n.length;for(r=0;r<u;r++)n[r]&&(i=t(n[r]))&&(o&&(o+=" "),o+=i)}else for(i in n)n[i]&&(o&&(o+=" "),o+=i);return o}function e(){for(var n,r,i=0,o="",u=arguments.length;i<u;i++)(n=arguments[i])&&(r=t(n))&&(o&&(o+=" "),o+=r);return o}return um.exports=e,um.exports.clsx=e,um.exports}var Nn={},Ga={},xT;function vg(){if(xT)return Ga;xT=1,Object.defineProperty(Ga,"__esModule",{value:!0}),Ga.dontSetMe=i,Ga.findInArray=t,Ga.int=r,Ga.isFunction=e,Ga.isNum=n;function t(o,u){for(let h=0,f=o.length;h<f;h++)if(u.apply(u,[o[h],h,o]))return o[h]}function e(o){return typeof o=="function"||Object.prototype.toString.call(o)==="[object Function]"}function n(o){return typeof o=="number"&&!isNaN(o)}function r(o){return parseInt(o,10)}function i(o,u,h){if(o[u])return new Error(`Invalid prop ${u} passed to ${h} - do not set this, set it on the child.`)}return Ga}var Ya={},_T;function xG(){if(_T)return Ya;_T=1,Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.browserPrefixToKey=n,Ya.browserPrefixToStyle=r,Ya.default=void 0,Ya.getPrefix=e;const t=["Moz","Webkit","O","ms"];function e(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const u=window.document?.documentElement?.style;if(!u||o in u)return"";for(let h=0;h<t.length;h++)if(n(o,t[h])in u)return t[h];return""}function n(o,u){return u?`${u}${i(o)}`:o}function r(o,u){return u?`-${u.toLowerCase()}-${o}`:o}function i(o){let u="",h=!0;for(let f=0;f<o.length;f++)h?(u+=o[f].toUpperCase(),h=!1):o[f]==="-"?h=!0:u+=o[f];return u}return Ya.default=e(),Ya}var wT;function yx(){if(wT)return Nn;wT=1,Object.defineProperty(Nn,"__esModule",{value:!0}),Nn.addClassName=z,Nn.addEvent=u,Nn.addUserSelectStyles=U,Nn.createCSSTransform=C,Nn.createSVGTransform=R,Nn.getTouch=k,Nn.getTouchIdentifier=L,Nn.getTranslation=A,Nn.innerHeight=v,Nn.innerWidth=b,Nn.matchesSelector=i,Nn.matchesSelectorAndParentsTo=o,Nn.offsetXYFromParent=x,Nn.outerHeight=f,Nn.outerWidth=m,Nn.removeClassName=H,Nn.removeEvent=h,Nn.scheduleRemoveUserSelectStyles=I;var t=vg(),e=n(xG());function n(E,S){if(typeof WeakMap=="function")var j=new WeakMap,D=new WeakMap;return(n=function(V,B){if(!B&&V&&V.__esModule)return V;var P,ne,oe={__proto__:null,default:V};if(V===null||typeof V!="object"&&typeof V!="function")return oe;if(P=B?D:j){if(P.has(V))return P.get(V);P.set(V,oe)}for(const G in V)G!=="default"&&{}.hasOwnProperty.call(V,G)&&((ne=(P=Object.defineProperty)&&Object.getOwnPropertyDescriptor(V,G))&&(ne.get||ne.set)?P(oe,G,ne):oe[G]=V[G]);return oe})(E,S)}let r="";function i(E,S){return r||(r=(0,t.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(j){return(0,t.isFunction)(E[j])})),(0,t.isFunction)(E[r])?E[r](S):!1}function o(E,S,j){let D=E;do{if(i(D,S))return!0;if(D===j)return!1;D=D.parentNode}while(D);return!1}function u(E,S,j,D){if(!E)return;const V={capture:!0,...D};E.addEventListener?E.addEventListener(S,j,V):E.attachEvent?E.attachEvent("on"+S,j):E["on"+S]=j}function h(E,S,j,D){if(!E)return;const V={capture:!0,...D};E.removeEventListener?E.removeEventListener(S,j,V):E.detachEvent?E.detachEvent("on"+S,j):E["on"+S]=null}function f(E){let S=E.clientHeight;const j=E.ownerDocument.defaultView.getComputedStyle(E);return S+=(0,t.int)(j.borderTopWidth),S+=(0,t.int)(j.borderBottomWidth),S}function m(E){let S=E.clientWidth;const j=E.ownerDocument.defaultView.getComputedStyle(E);return S+=(0,t.int)(j.borderLeftWidth),S+=(0,t.int)(j.borderRightWidth),S}function v(E){let S=E.clientHeight;const j=E.ownerDocument.defaultView.getComputedStyle(E);return S-=(0,t.int)(j.paddingTop),S-=(0,t.int)(j.paddingBottom),S}function b(E){let S=E.clientWidth;const j=E.ownerDocument.defaultView.getComputedStyle(E);return S-=(0,t.int)(j.paddingLeft),S-=(0,t.int)(j.paddingRight),S}function x(E,S,j){const V=S===S.ownerDocument.body?{left:0,top:0}:S.getBoundingClientRect(),B=(E.clientX+S.scrollLeft-V.left)/j,P=(E.clientY+S.scrollTop-V.top)/j;return{x:B,y:P}}function C(E,S){const j=A(E,S,"px");return{[(0,e.browserPrefixToKey)("transform",e.default)]:j}}function R(E,S){return A(E,S,"")}function A(E,S,j){let{x:D,y:V}=E,B=`translate(${D}${j},${V}${j})`;if(S){const P=`${typeof S.x=="string"?S.x:S.x+j}`,ne=`${typeof S.y=="string"?S.y:S.y+j}`;B=`translate(${P}, ${ne})`+B}return B}function k(E,S){return E.targetTouches&&(0,t.findInArray)(E.targetTouches,j=>S===j.identifier)||E.changedTouches&&(0,t.findInArray)(E.changedTouches,j=>S===j.identifier)}function L(E){if(E.targetTouches&&E.targetTouches[0])return E.targetTouches[0].identifier;if(E.changedTouches&&E.changedTouches[0])return E.changedTouches[0].identifier}function U(E){if(!E)return;let S=E.getElementById("react-draggable-style-el");S||(S=E.createElement("style"),S.type="text/css",S.id="react-draggable-style-el",S.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,S.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,E.getElementsByTagName("head")[0].appendChild(S)),E.body&&z(E.body,"react-draggable-transparent-selection")}function I(E){window.requestAnimationFrame?window.requestAnimationFrame(()=>{M(E)}):M(E)}function M(E){if(E)try{if(E.body&&H(E.body,"react-draggable-transparent-selection"),E.selection)E.selection.empty();else{const S=(E.defaultView||window).getSelection();S&&S.type!=="Caret"&&S.removeAllRanges()}}catch{}}function z(E,S){E.classList?E.classList.add(S):E.className.match(new RegExp(`(?:^|\\s)${S}(?!\\S)`))||(E.className+=` ${S}`)}function H(E,S){E.classList?E.classList.remove(S):E.className=E.className.replace(new RegExp(`(?:^|\\s)${S}(?!\\S)`,"g"),"")}return Nn}var ti={},ET;function u6(){if(ET)return ti;ET=1,Object.defineProperty(ti,"__esModule",{value:!0}),ti.canDragX=i,ti.canDragY=o,ti.createCoreData=h,ti.createDraggableData=f,ti.getBoundPosition=n,ti.getControlPosition=u,ti.snapToGrid=r;var t=vg(),e=yx();function n(b,x,C){if(!b.props.bounds)return[x,C];let{bounds:R}=b.props;R=typeof R=="string"?R:m(R);const A=v(b);if(typeof R=="string"){const{ownerDocument:k}=A,L=k.defaultView;let U;if(R==="parent"?U=A.parentNode:U=A.getRootNode().querySelector(R),!(U instanceof L.HTMLElement))throw new Error('Bounds selector "'+R+'" could not find an element.');const I=U,M=L.getComputedStyle(A),z=L.getComputedStyle(I);R={left:-A.offsetLeft+(0,t.int)(z.paddingLeft)+(0,t.int)(M.marginLeft),top:-A.offsetTop+(0,t.int)(z.paddingTop)+(0,t.int)(M.marginTop),right:(0,e.innerWidth)(I)-(0,e.outerWidth)(A)-A.offsetLeft+(0,t.int)(z.paddingRight)-(0,t.int)(M.marginRight),bottom:(0,e.innerHeight)(I)-(0,e.outerHeight)(A)-A.offsetTop+(0,t.int)(z.paddingBottom)-(0,t.int)(M.marginBottom)}}return(0,t.isNum)(R.right)&&(x=Math.min(x,R.right)),(0,t.isNum)(R.bottom)&&(C=Math.min(C,R.bottom)),(0,t.isNum)(R.left)&&(x=Math.max(x,R.left)),(0,t.isNum)(R.top)&&(C=Math.max(C,R.top)),[x,C]}function r(b,x,C){const R=Math.round(x/b[0])*b[0],A=Math.round(C/b[1])*b[1];return[R,A]}function i(b){return b.props.axis==="both"||b.props.axis==="x"}function o(b){return b.props.axis==="both"||b.props.axis==="y"}function u(b,x,C){const R=typeof x=="number"?(0,e.getTouch)(b,x):null;if(typeof x=="number"&&!R)return null;const A=v(C),k=C.props.offsetParent||A.offsetParent||A.ownerDocument.body;return(0,e.offsetXYFromParent)(R||b,k,C.props.scale)}function h(b,x,C){const R=!(0,t.isNum)(b.lastX),A=v(b);return R?{node:A,deltaX:0,deltaY:0,lastX:x,lastY:C,x,y:C}:{node:A,deltaX:x-b.lastX,deltaY:C-b.lastY,lastX:b.lastX,lastY:b.lastY,x,y:C}}function f(b,x){const C=b.props.scale;return{node:x.node,x:b.state.x+x.deltaX/C,y:b.state.y+x.deltaY/C,deltaX:x.deltaX/C,deltaY:x.deltaY/C,lastX:b.state.x,lastY:b.state.y}}function m(b){return{left:b.left,top:b.top,right:b.right,bottom:b.bottom}}function v(b){const x=b.findDOMNode();if(!x)throw new Error("<DraggableCore>: Unmounted during event!");return x}return ti}var md={},dm={},ST;function d6(){if(ST)return dm;ST=1,Object.defineProperty(dm,"__esModule",{value:!0}),dm.default=t;function t(){}return dm}var TT;function _G(){if(TT)return md;TT=1,Object.defineProperty(md,"__esModule",{value:!0}),md.default=void 0;var t=f(po()),e=h(c6()),n=h(fb()),r=yx(),i=u6(),o=vg(),u=h(d6());function h(A){return A&&A.__esModule?A:{default:A}}function f(A,k){if(typeof WeakMap=="function")var L=new WeakMap,U=new WeakMap;return(f=function(I,M){if(!M&&I&&I.__esModule)return I;var z,H,E={__proto__:null,default:I};if(I===null||typeof I!="object"&&typeof I!="function")return E;if(z=M?U:L){if(z.has(I))return z.get(I);z.set(I,E)}for(const S in I)S!=="default"&&{}.hasOwnProperty.call(I,S)&&((H=(z=Object.defineProperty)&&Object.getOwnPropertyDescriptor(I,S))&&(H.get||H.set)?z(E,S,H):E[S]=I[S]);return E})(A,k)}function m(A,k,L){return(k=v(k))in A?Object.defineProperty(A,k,{value:L,enumerable:!0,configurable:!0,writable:!0}):A[k]=L,A}function v(A){var k=b(A,"string");return typeof k=="symbol"?k:k+""}function b(A,k){if(typeof A!="object"||!A)return A;var L=A[Symbol.toPrimitive];if(L!==void 0){var U=L.call(A,k);if(typeof U!="object")return U;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(A)}const x={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let C=x.mouse,R=class extends t.Component{constructor(){super(...arguments),m(this,"dragging",!1),m(this,"lastX",NaN),m(this,"lastY",NaN),m(this,"touchIdentifier",null),m(this,"mounted",!1),m(this,"handleDragStart",k=>{if(this.props.onMouseDown(k),!this.props.allowAnyClick&&typeof k.button=="number"&&k.button!==0)return!1;const L=this.findDOMNode();if(!L||!L.ownerDocument||!L.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:U}=L;if(this.props.disabled||!(k.target instanceof U.defaultView.Node)||this.props.handle&&!(0,r.matchesSelectorAndParentsTo)(k.target,this.props.handle,L)||this.props.cancel&&(0,r.matchesSelectorAndParentsTo)(k.target,this.props.cancel,L))return;k.type==="touchstart"&&!this.props.allowMobileScroll&&k.preventDefault();const I=(0,r.getTouchIdentifier)(k);this.touchIdentifier=I;const M=(0,i.getControlPosition)(k,I,this);if(M==null)return;const{x:z,y:H}=M,E=(0,i.createCoreData)(this,z,H);(0,u.default)("DraggableCore: handleDragStart: %j",E),(0,u.default)("calling",this.props.onStart),!(this.props.onStart(k,E)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,r.addUserSelectStyles)(U),this.dragging=!0,this.lastX=z,this.lastY=H,(0,r.addEvent)(U,C.move,this.handleDrag),(0,r.addEvent)(U,C.stop,this.handleDragStop))}),m(this,"handleDrag",k=>{const L=(0,i.getControlPosition)(k,this.touchIdentifier,this);if(L==null)return;let{x:U,y:I}=L;if(Array.isArray(this.props.grid)){let H=U-this.lastX,E=I-this.lastY;if([H,E]=(0,i.snapToGrid)(this.props.grid,H,E),!H&&!E)return;U=this.lastX+H,I=this.lastY+E}const M=(0,i.createCoreData)(this,U,I);if((0,u.default)("DraggableCore: handleDrag: %j",M),this.props.onDrag(k,M)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const E=document.createEvent("MouseEvents");E.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(E)}return}this.lastX=U,this.lastY=I}),m(this,"handleDragStop",k=>{if(!this.dragging)return;const L=(0,i.getControlPosition)(k,this.touchIdentifier,this);if(L==null)return;let{x:U,y:I}=L;if(Array.isArray(this.props.grid)){let E=U-this.lastX||0,S=I-this.lastY||0;[E,S]=(0,i.snapToGrid)(this.props.grid,E,S),U=this.lastX+E,I=this.lastY+S}const M=(0,i.createCoreData)(this,U,I);if(this.props.onStop(k,M)===!1||this.mounted===!1)return!1;const H=this.findDOMNode();H&&this.props.enableUserSelectHack&&(0,r.scheduleRemoveUserSelectStyles)(H.ownerDocument),(0,u.default)("DraggableCore: handleDragStop: %j",M),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,H&&((0,u.default)("DraggableCore: Removing handlers"),(0,r.removeEvent)(H.ownerDocument,C.move,this.handleDrag),(0,r.removeEvent)(H.ownerDocument,C.stop,this.handleDragStop))}),m(this,"onMouseDown",k=>(C=x.mouse,this.handleDragStart(k))),m(this,"onMouseUp",k=>(C=x.mouse,this.handleDragStop(k))),m(this,"onTouchStart",k=>(C=x.touch,this.handleDragStart(k))),m(this,"onTouchEnd",k=>(C=x.touch,this.handleDragStop(k)))}componentDidMount(){this.mounted=!0;const k=this.findDOMNode();k&&(0,r.addEvent)(k,x.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const k=this.findDOMNode();if(k){const{ownerDocument:L}=k;(0,r.removeEvent)(L,x.mouse.move,this.handleDrag),(0,r.removeEvent)(L,x.touch.move,this.handleDrag),(0,r.removeEvent)(L,x.mouse.stop,this.handleDragStop),(0,r.removeEvent)(L,x.touch.stop,this.handleDragStop),(0,r.removeEvent)(k,x.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,r.scheduleRemoveUserSelectStyles)(L)}}findDOMNode(){return this.props?.nodeRef?this.props?.nodeRef?.current:n.default.findDOMNode(this)}render(){return t.cloneElement(t.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};return md.default=R,m(R,"displayName","DraggableCore"),m(R,"propTypes",{allowAnyClick:e.default.bool,allowMobileScroll:e.default.bool,children:e.default.node.isRequired,disabled:e.default.bool,enableUserSelectHack:e.default.bool,offsetParent:function(A,k){if(A[k]&&A[k].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:e.default.arrayOf(e.default.number),handle:e.default.string,cancel:e.default.string,nodeRef:e.default.object,onStart:e.default.func,onDrag:e.default.func,onStop:e.default.func,onMouseDown:e.default.func,scale:e.default.number,className:o.dontSetMe,style:o.dontSetMe,transform:o.dontSetMe}),m(R,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),md}var CT;function wG(){return CT||(CT=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return f.default}}),t.default=void 0;var e=b(po()),n=v(c6()),r=v(fb()),i=bG(),o=yx(),u=u6(),h=vg(),f=v(_G()),m=v(d6());function v(L){return L&&L.__esModule?L:{default:L}}function b(L,U){if(typeof WeakMap=="function")var I=new WeakMap,M=new WeakMap;return(b=function(z,H){if(!H&&z&&z.__esModule)return z;var E,S,j={__proto__:null,default:z};if(z===null||typeof z!="object"&&typeof z!="function")return j;if(E=H?M:I){if(E.has(z))return E.get(z);E.set(z,j)}for(const D in z)D!=="default"&&{}.hasOwnProperty.call(z,D)&&((S=(E=Object.defineProperty)&&Object.getOwnPropertyDescriptor(z,D))&&(S.get||S.set)?E(j,D,S):j[D]=z[D]);return j})(L,U)}function x(){return x=Object.assign?Object.assign.bind():function(L){for(var U=1;U<arguments.length;U++){var I=arguments[U];for(var M in I)({}).hasOwnProperty.call(I,M)&&(L[M]=I[M])}return L},x.apply(null,arguments)}function C(L,U,I){return(U=R(U))in L?Object.defineProperty(L,U,{value:I,enumerable:!0,configurable:!0,writable:!0}):L[U]=I,L}function R(L){var U=A(L,"string");return typeof U=="symbol"?U:U+""}function A(L,U){if(typeof L!="object"||!L)return L;var I=L[Symbol.toPrimitive];if(I!==void 0){var M=I.call(L,U);if(typeof M!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(U==="string"?String:Number)(L)}class k extends e.Component{static getDerivedStateFromProps(U,I){let{position:M}=U,{prevPropsPosition:z}=I;return M&&(!z||M.x!==z.x||M.y!==z.y)?((0,m.default)("Draggable: getDerivedStateFromProps %j",{position:M,prevPropsPosition:z}),{x:M.x,y:M.y,prevPropsPosition:{...M}}):null}constructor(U){super(U),C(this,"onDragStart",(I,M)=>{if((0,m.default)("Draggable: onDragStart: %j",M),this.props.onStart(I,(0,u.createDraggableData)(this,M))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),C(this,"onDrag",(I,M)=>{if(!this.state.dragging)return!1;(0,m.default)("Draggable: onDrag: %j",M);const z=(0,u.createDraggableData)(this,M),H={x:z.x,y:z.y,slackX:0,slackY:0};if(this.props.bounds){const{x:S,y:j}=H;H.x+=this.state.slackX,H.y+=this.state.slackY;const[D,V]=(0,u.getBoundPosition)(this,H.x,H.y);H.x=D,H.y=V,H.slackX=this.state.slackX+(S-H.x),H.slackY=this.state.slackY+(j-H.y),z.x=H.x,z.y=H.y,z.deltaX=H.x-this.state.x,z.deltaY=H.y-this.state.y}if(this.props.onDrag(I,z)===!1)return!1;this.setState(H)}),C(this,"onDragStop",(I,M)=>{if(!this.state.dragging||this.props.onStop(I,(0,u.createDraggableData)(this,M))===!1)return!1;(0,m.default)("Draggable: onDragStop: %j",M);const H={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:S,y:j}=this.props.position;H.x=S,H.y=j}this.setState(H)}),this.state={dragging:!1,dragged:!1,x:U.position?U.position.x:U.defaultPosition.x,y:U.position?U.position.y:U.defaultPosition.y,prevPropsPosition:{...U.position},slackX:0,slackY:0,isElementSVG:!1},U.position&&!(U.onDrag||U.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){return this.props?.nodeRef?.current??r.default.findDOMNode(this)}render(){const{axis:U,bounds:I,children:M,defaultPosition:z,defaultClassName:H,defaultClassNameDragging:E,defaultClassNameDragged:S,position:j,positionOffset:D,scale:V,...B}=this.props;let P={},ne=null;const G=!!!j||this.state.dragging,Z=j||z,J={x:(0,u.canDragX)(this)&&G?this.state.x:Z.x,y:(0,u.canDragY)(this)&&G?this.state.y:Z.y};this.state.isElementSVG?ne=(0,o.createSVGTransform)(J,D):P=(0,o.createCSSTransform)(J,D);const Se=(0,i.clsx)(M.props.className||"",H,{[E]:this.state.dragging,[S]:this.state.dragged});return e.createElement(f.default,x({},B,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(M),{className:Se,style:{...M.props.style,...P},transform:ne}))}}t.default=k,C(k,"displayName","Draggable"),C(k,"propTypes",{...f.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:h.dontSetMe,style:h.dontSetMe,transform:h.dontSetMe}),C(k,"defaultProps",{...f.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(i0)),i0}var kT;function EG(){if(kT)return fd.exports;kT=1;const{default:t,DraggableCore:e}=wG();return fd.exports=t,fd.exports.default=t,fd.exports.DraggableCore=e,fd.exports}var SG=EG();const h6=rh(SG),TG=()=>{const{callStatus:t,incomingCall:e,outgoingCallUser:n,answerCall:r,endCall:i,localStream:o,remoteStream:u,toggleAudio:h,toggleVideo:f,isMuted:m,isVideoOff:v,activeCall:b,isScreenSharing:x,toggleScreenShare:C,availableDevices:R,selectedMicId:A,selectedCameraId:k,setSelectedMicId:L,setSelectedCameraId:U,playSound:I,customSounds:M,addSound:z,removeSound:H}=ru(),E=w.useRef(null),S=w.useRef(null),j=w.useRef(null),[D,V]=w.useState(!1),[B,P]=w.useState(!1),[ne,oe]=w.useState(100),[G,Z]=w.useState(!1),[J,Se]=w.useState(!1),[Le,$]=w.useState(!1),[Q,re]=w.useState(!1),[he,Te]=w.useState(!1),{userProfile:Ue}=yn(),te=Ec(Ue),Oe=yR(Ue,Yi.SCREEN_SHARE),Ie=w.useRef(null),Xe=async Ae=>{const dt=Ae.target.files[0];if(!dt)return;const ye=dt.name.split(".")[0].slice(0,10);await z(ye,dt),Ie.current&&(Ie.current.value="")},[ke,fe]=w.useState(!1);return w.useEffect(()=>{E.current&&o&&(E.current.srcObject=o)},[o,t]),w.useEffect(()=>{S.current&&u&&(S.current.srcObject=u)},[u,t]),w.useEffect(()=>{if(u){const Ae=u.getVideoTracks()[0];if(Ae){const dt=!Ae.muted&&Ae.readyState==="live";fe(dt);const ye=()=>fe(!1),Ve=()=>fe(!0),De=()=>fe(!1);return Ae.addEventListener("mute",ye),Ae.addEventListener("unmute",Ve),Ae.addEventListener("ended",De),()=>{Ae.removeEventListener("mute",ye),Ae.removeEventListener("unmute",Ve),Ae.removeEventListener("ended",De)}}else fe(!1)}else fe(!1)},[u]),w.useEffect(()=>{S.current&&(S.current.volume=ne/100)},[ne,u]),w.useEffect(()=>{t==="idle"&&(V(!1),Te(!1),Se(!1),re(!1),Z(!1),$(!1))},[t]),t==="idle"?null:t==="incoming"?c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in",role:"dialog","aria-modal":"true",children:c.jsxs("div",{className:"bg-dark-sidebar p-6 rounded-2xl shadow-2xl w-80 text-center border border-dark-hover",children:[c.jsxs("div",{className:"w-24 h-24 mx-auto mb-4 relative",children:[e?.callerPhotoUrl?c.jsx("img",{src:e.callerPhotoUrl,alt:"Caller",className:"w-full h-full rounded-full object-cover border-4 border-dark-bg"}):c.jsx("div",{className:"w-full h-full rounded-full bg-brand-primary flex items-center justify-center text-3xl font-bold text-white border-4 border-dark-bg",children:e?.callerName?.[0]?.toUpperCase()}),c.jsx("div",{className:"absolute -bottom-1 -right-1 bg-green-500 rounded-full p-2 animate-bounce",children:c.jsx(r4,{size:16,className:"text-white"})})]}),c.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:e?.callerName}),c.jsxs("p",{className:"text-dark-muted mb-6",children:["Incoming ",e?.type," call..."]}),c.jsxs("div",{className:"flex gap-4 justify-center",children:[c.jsx("button",{onClick:()=>i(!0),className:"w-12 h-12 rounded-full bg-red-500 flex items-center justify-center text-white hover:bg-red-600 transition-colors",children:c.jsx(Uy,{size:24})}),c.jsx("button",{onClick:r,className:"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center text-white hover:bg-green-600 transition-colors",children:c.jsx(r4,{size:20})})]})]})}):c.jsx(h6,{nodeRef:j,disabled:!D,bounds:"body",onStart:()=>P(!0),onStop:()=>P(!1),children:c.jsxs("div",{role:"dialog","aria-modal":"true",ref:j,style:D?void 0:{transform:"none !important"},className:Ht("fixed z-[100] bg-gray-900 shadow-2xl overflow-hidden border border-gray-700 group",!B&&"transition-all duration-300",D?"bottom-4 right-4 w-64 h-48 rounded-lg cursor-move":"inset-0 flex flex-col !transform-none"),children:[c.jsxs("div",{className:Ht("absolute top-0 left-0 right-0 p-4 z-50 flex justify-between items-start bg-gradient-to-b from-black/80 to-transparent transition-opacity duration-200 opacity-100"),children:[c.jsx("div",{className:"flex gap-2",children:c.jsxs("div",{className:"bg-black/40 backdrop-blur px-3 py-1 rounded-full flex items-center gap-2",children:[c.jsx("span",{className:Ht("w-2 h-2 rounded-full",b?"bg-green-500":"bg-yellow-500 animate-pulse")}),c.jsx("span",{className:"text-xs text-white font-medium",children:b?"Connected":"Calling..."})]})}),c.jsx("button",{onClick:()=>V(!D),className:"p-2 rounded-full bg-black/40 hover:bg-white/10 text-white backdrop-blur transition-colors",title:D?"Maximize":"Minimize",children:D?c.jsx(zL,{size:20}):c.jsx(UL,{size:20})})]}),c.jsxs("div",{className:"relative flex-1 bg-black flex items-center justify-center w-full h-full",children:[c.jsx("video",{ref:S,autoPlay:!0,playsInline:!0,className:Ht("w-full h-full object-contain",(!u||!ke)&&"hidden")}),(!u||!ke)&&c.jsxs("div",{className:"text-center absolute inset-0 flex flex-col items-center justify-center z-10",children:[c.jsx("div",{className:"w-32 h-32 mx-auto mb-4 rounded-full bg-gray-800 flex items-center justify-center text-6xl font-bold text-gray-500 animate-pulse",children:n?.displayName?.[0]||b?.metadata?.name?.[0]||"?"}),c.jsx("p",{className:"text-xl text-white font-medium",children:t==="outgoing"?"Calling...":t==="connected"?"No Video / Audio Only":"Connecting..."}),c.jsx("p",{className:"text-gray-400 text-sm mt-1",children:n?.displayName})]}),!D&&o&&c.jsx(CG,{})]}),c.jsxs("div",{className:Ht("absolute bottom-4 md:bottom-8 left-1/2 -translate-x-1/2 z-50 flex flex-wrap justify-center items-center gap-2 md:gap-4 p-2 md:p-3 bg-gray-900/80 backdrop-blur-md rounded-xl md:rounded-2xl border border-gray-700 shadow-xl transition-opacity duration-300 hover:opacity-100 w-[95%] md:w-auto max-w-screen-sm",D&&"hidden"),children:[c.jsx("button",{onClick:h,className:Ht("p-3 rounded-xl transition-all hover:scale-110 active:scale-95",m?"bg-red-500/20 text-red-500":"bg-gray-700/50 text-white hover:bg-gray-600"),title:m?"Unmute":"Mute",children:m?c.jsx(V0,{size:22}):c.jsx(U0,{size:22})}),c.jsx("button",{onClick:f,className:Ht("p-3 rounded-xl transition-all hover:scale-110 active:scale-95",v?"bg-red-500/20 text-red-500":"bg-gray-700/50 text-white hover:bg-gray-600"),title:v?"Turn Video On":"Turn Video Off",children:v?c.jsx(z0,{size:22}):c.jsx(Kd,{size:22})}),!sa.isNativePlatform()&&c.jsxs("div",{className:"relative",onMouseEnter:()=>$(!0),onMouseLeave:()=>$(!1),children:[c.jsx("button",{onClick:()=>{x?C():re(!0)},disabled:!b||!Oe,className:Ht("p-3 rounded-xl transition-all hover:scale-110 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",x?"bg-green-500 text-white":Oe?"bg-gray-700/50 text-white hover:bg-gray-600":"bg-gray-800 text-gray-500 cursor-not-allowed"),title:Oe?x?"Stop Sharing":"Share Screen":void 0,children:x?c.jsx(TL,{size:22}):c.jsx(lp,{size:22})}),!Oe&&c.jsxs("div",{className:Ht("absolute bottom-full mb-2 left-1/2 -translate-x-1/2 px-2 py-1 bg-black text-rose-500 text-xs font-bold rounded shadow-lg whitespace-nowrap transition-opacity pointer-events-none z-50",Le?"opacity-100":"opacity-0"),children:["Requires Premium ",c.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-black"})]})]}),c.jsx("div",{className:"w-px h-8 bg-gray-700 mx-2"}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>Z(!G),onDoubleClick:()=>oe(ne>0?0:100),className:Ht("p-3 rounded-xl transition-all hover:scale-110 active:scale-95",ne===0?"bg-red-500/20 text-red-500":"bg-gray-700/50 text-white hover:bg-gray-600"),title:`Volume: ${ne}% (click to show slider, double-click to mute)`,children:ne===0?c.jsx(zS,{size:22}):ne<50?c.jsx(_L,{size:22}):c.jsx(BS,{size:22})}),G&&c.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-3 p-3 bg-gray-900/95 backdrop-blur-md rounded-xl border border-gray-700 shadow-xl",children:c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsxs("span",{className:"text-xs text-gray-400 font-medium",children:[ne,"%"]}),c.jsx("input",{type:"range",min:"0",max:"100",value:ne,onChange:Ae=>oe(Number(Ae.target.value)),className:`w-24 h-2 appearance-none bg-gray-700 rounded-full cursor-pointer accent-brand-primary
                     [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 
                     [&::-webkit-slider-thumb]:bg-brand-primary [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer
                     [&::-webkit-slider-thumb]:shadow-lg [&::-webkit-slider-thumb]:hover:scale-110 [&::-webkit-slider-thumb]:transition-transform`,style:{background:`linear-gradient(to right, rgb(88, 101, 242) ${ne}%, rgb(55, 65, 81) ${ne}%)`}}),c.jsx("span",{className:"text-[10px] text-gray-500",children:"Remote Volume"})]})})]}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>Te(!he),className:Ht("p-3 rounded-xl transition-all hover:scale-110 active:scale-95",he?"bg-brand-primary/20 text-brand-primary":"bg-gray-700/50 text-white hover:bg-gray-600"),title:"Soundboard",children:c.jsx(cp,{size:22})}),he&&c.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-3 w-64 bg-gray-900/95 backdrop-blur-md border border-gray-700 rounded-xl shadow-2xl p-4 animate-fade-in-up z-50",children:[c.jsxs("h4",{className:"text-white text-sm font-semibold mb-3 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(cp,{className:"text-brand-primary"}),"Soundboard"]}),c.jsxs("span",{className:"text-[10px] text-gray-400",children:[M.length,"/10"]})]}),c.jsxs("div",{className:"flex flex-col gap-1 mb-3 max-h-48 overflow-y-auto custom-scrollbar",children:[M.length===0&&c.jsx("div",{className:"text-center text-gray-500 text-xs py-4 italic",children:"No sounds added yet."}),M.map(Ae=>c.jsxs("div",{className:"relative group flex items-center gap-2",children:[c.jsxs("button",{onClick:()=>{te&&I(Ae.id)},className:"flex-1 bg-gray-800 hover:bg-gray-700 text-white text-xs py-2 px-3 rounded-lg transition-colors border border-gray-700 hover:border-brand-primary flex items-center gap-3 active:scale-95",children:[c.jsx("span",{className:"text-sm",children:""}),c.jsx("span",{className:"text-xs font-medium truncate flex-1 text-left",children:Ae.name})]}),c.jsx("button",{onClick:dt=>{dt.stopPropagation(),H(Ae.id)},className:"bg-red-500/10 hover:bg-red-500 text-red-500 hover:text-white rounded-lg p-2 transition-colors opacity-0 group-hover:opacity-100",title:"Remove sound",children:c.jsx(Qi,{size:14})})]},Ae.id))]}),M.length<10&&c.jsxs("button",{onClick:()=>Ie.current?.click(),className:"w-full py-2 border border-dashed border-gray-600 text-gray-400 rounded-lg hover:border-brand-primary hover:text-brand-primary transition-colors flex items-center justify-center gap-2 text-xs",children:[c.jsx(Zo,{size:14})," Add Sound (MP3/WAV)"]}),c.jsx("input",{type:"file",ref:Ie,className:"hidden",accept:"audio/mp3,audio/wav,audio/mpeg",onChange:Xe}),!te&&c.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center rounded-xl p-4 text-center",children:c.jsxs("div",{children:[c.jsx("p",{className:"text-brand-primary font-bold mb-1",children:"Premium Only"}),c.jsx("p",{className:"text-white text-xs",children:"Unlock Soundboard with Premium!"})]})})]})]}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>Se(!J),className:Ht("p-3 rounded-xl transition-all hover:scale-110 active:scale-95",J?"bg-brand-primary/20 text-brand-primary":"bg-gray-700/50 text-white hover:bg-gray-600"),title:"Audio/Video Settings",children:c.jsx(Zp,{size:22})}),J&&c.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-3 p-4 bg-gray-900/95 backdrop-blur-md rounded-xl border border-gray-700 shadow-xl w-64",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"text-sm font-semibold text-white mb-3",children:"Device Settings"}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Microphone"}),c.jsx("select",{value:A,onChange:Ae=>L(Ae.target.value),className:"w-full bg-gray-800 text-white text-sm rounded-lg px-3 py-2 border border-gray-700 focus:border-brand-primary outline-none cursor-pointer",children:R.audioInputs.map(Ae=>c.jsx("option",{value:Ae.deviceId,children:Ae.label||`Microphone ${Ae.deviceId.slice(0,8)}...`},Ae.deviceId))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Camera"}),c.jsx("select",{value:k,onChange:Ae=>U(Ae.target.value),className:"w-full bg-gray-800 text-white text-sm rounded-lg px-3 py-2 border border-gray-700 focus:border-brand-primary outline-none cursor-pointer",children:R.videoInputs.map(Ae=>c.jsx("option",{value:Ae.deviceId,children:Ae.label||`Camera ${Ae.deviceId.slice(0,8)}...`},Ae.deviceId))})]}),c.jsx("p",{className:"text-[10px] text-gray-500 mt-2",children:"Changes apply on next call"})]})})]}),c.jsx("div",{className:"w-px h-8 bg-gray-700 mx-2"}),c.jsx("button",{onClick:()=>i(!0),className:"p-3 rounded-xl bg-red-600 text-white hover:bg-red-700 transition-all hover:scale-110 active:scale-95 shadow-lg shadow-red-900/20",title:"End Call",children:c.jsx(Uy,{size:24})})]}),D&&c.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 flex justify-center gap-2 bg-gradient-to-t from-black/90 to-transparent opacity-0 group-hover:opacity-100 transition-opacity z-50",children:[c.jsx("button",{onMouseDown:Ae=>Ae.stopPropagation(),onClick:h,className:Ht("p-1.5 rounded-full text-white hover:bg-white/20",m&&"bg-red-500/50 text-red-100"),title:"Mute",children:m?c.jsx(V0,{size:16}):c.jsx(U0,{size:16})}),c.jsx("button",{onMouseDown:Ae=>Ae.stopPropagation(),onClick:f,className:Ht("p-1.5 rounded-full text-white hover:bg-white/20",v&&"bg-red-500/50 text-red-100"),title:"Camera",children:v?c.jsx(z0,{size:16}):c.jsx(Kd,{size:16})}),c.jsx("button",{onMouseDown:Ae=>Ae.stopPropagation(),onClick:()=>oe(ne===0?100:0),className:Ht("p-1.5 rounded-full text-white hover:bg-white/20",ne===0&&"bg-red-500/50 text-red-100"),title:"Volume Toggle",children:ne===0?c.jsx(zS,{size:16}):c.jsx(BS,{size:16})}),c.jsx("button",{onMouseDown:Ae=>Ae.stopPropagation(),onClick:()=>i(!0),className:"p-1.5 rounded-full bg-red-600/80 text-white hover:bg-red-600",title:"End Call",children:c.jsx(Uy,{size:16})})]}),J&&c.jsx(gG,{isOpen:J,onClose:()=>Se(!1)}),c.jsx(TR,{isOpen:Q,onClose:()=>re(!1),onConfirm:Ae=>C(Ae)})]})})},CG=()=>{const t=w.useRef(null),{localStream:e,isMuted:n,isVideoOff:r}=ru(),i=w.useRef(null);return w.useEffect(()=>{i.current&&e&&(i.current.srcObject=e)},[e]),c.jsx(h6,{bounds:"parent",nodeRef:t,children:c.jsxs("div",{ref:t,className:"absolute bottom-24 right-4 w-48 h-36 bg-gray-800 rounded-lg overflow-hidden shadow-lg border border-gray-700 cursor-move hover:scale-105 transition-transform z-50",children:[c.jsx("video",{ref:i,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),c.jsxs("div",{className:"absolute bottom-2 left-2 flex gap-1",children:[n&&c.jsx("div",{className:"bg-red-500/80 p-1 rounded",children:c.jsx(V0,{size:12,className:"text-white"})}),r&&c.jsx("div",{className:"bg-red-500/80 p-1 rounded",children:c.jsx(z0,{size:12,className:"text-white"})})]})]})})},kG=()=>{const{currentUser:t,logout:e,resendVerification:n}=yn(),[r,i]=w.useState(!1),[o,u]=w.useState(""),h=async()=>{i(!0);try{await n(),u("Verification email sent! Check your inbox.")}catch(m){u("Error sending email: "+m.message)}finally{i(!1)}},f=async()=>{i(!0);try{await t.reload(),t.emailVerified?window.location.reload():u("Email is not verified yet. Please check your inbox.")}catch(m){console.error(m)}finally{i(!1)}};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-bg p-4",children:c.jsxs("div",{className:"w-full max-w-md bg-dark-sidebar rounded-lg shadow-2xl p-8 text-center space-y-6",children:[c.jsx("div",{className:"bg-brand-primary/10 w-16 h-16 rounded-full flex items-center justify-center mx-auto text-3xl",children:""}),c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Verify Your Email"}),c.jsxs("p",{className:"text-dark-muted",children:["We've sent a verification email to ",c.jsx("br",{}),c.jsx("span",{className:"font-semibold text-white",children:t?.email})]}),c.jsxs("div",{className:"bg-yellow-500/10 text-yellow-500 p-3 rounded-md text-sm",children:[" Please check your ",c.jsx("b",{children:"Spam/Junk"})," folder if you don't see the email in your inbox."]}),c.jsx("p",{className:"text-sm text-dark-muted",children:"You must verify your email address to access Lumo. To prevent spam, unverified accounts are restricted."}),o&&c.jsx("div",{className:"p-3 bg-brand-primary/20 text-brand-primary rounded-md text-sm",children:o}),c.jsxs("div",{className:"space-y-3 pt-4",children:[c.jsx(st,{onClick:f,className:"w-full",disabled:r,children:"I've Verified My Email"}),c.jsx(st,{onClick:h,variant:"secondary",className:"w-full",disabled:r,children:"Resend Verification Email"}),c.jsx("button",{onClick:e,className:"text-sm text-dark-muted hover:text-dark-text underline mt-4",children:"Logout"})]})]})})},NG=()=>{const{unreadMentions:t,unreadDms:e}=ua(),{userProfile:n}=yn(),{info:r}=Hr(),i=w.useRef({}),o=w.useRef({}),u=w.useRef(!1);w.useEffect(()=>{"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},[]);const h=()=>n?.settings?.notificationsEnabled!==!1,f=(m,v)=>{if(h()&&(r(`${m}: ${v}`),"Notification"in window))if(Notification.permission==="granted"){const b=()=>{try{new Notification(m,{body:v,icon:"/vite.svg"})}catch(x){console.error("Notification trigger failed:",x)}};document.hidden,b()}else console.log("Notification permission not granted:",Notification.permission)};return w.useEffect(()=>{if(!u.current){i.current=t||{},o.current=e||{},u.current=!0;return}t&&(Object.keys(t).forEach(m=>{const v=i.current[m]?.count||0;(t[m]?.count||0)>v&&f("New Mention","You were mentioned in a channel.")}),i.current=t),e&&(Object.keys(e).forEach(m=>{const v=o.current[m]?.count||0;(e[m]?.count||0)>v&&f("New Message","You received a direct message.")}),o.current=e)},[t,e]),null},AG=({dmId:t,dms:e})=>{const{currentUser:n,userProfile:r}=yn(),{users:i}=ua(),{startCall:o}=ru(),[u,h]=w.useState(null),[f,m]=w.useState(null),[v,b]=w.useState([]),x=e.find(A=>A.id===t),C=x?.participants.find(A=>A!==n?.uid);w.useEffect(()=>{(async()=>{if(C)try{const k=await Zc(Re(ce,"users",C));k.exists()&&h({id:k.id,...k.data()})}catch(k){console.error("Error fetching DM user:",k)}})()},[C]);const R=w.useMemo(()=>[{id:n.uid,displayName:n.displayName||r?.displayName||"User",photoUrl:n.photoURL||r?.photoUrl,role:r?.role},u].filter(Boolean),[n,r,u]);return x?c.jsxs("div",{className:"flex-1 flex flex-col h-full bg-dark-bg",children:[c.jsxs("div",{className:"h-12 px-4 flex items-center justify-between border-b border-dark-hover shadow-sm bg-dark-bg",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"relative",children:u?.photoUrl?c.jsx("img",{src:u.photoUrl,alt:u.displayName,className:"w-8 h-8 rounded-full object-cover"}):c.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-primary flex items-center justify-center text-white text-sm font-bold",children:u?.displayName?.[0]?.toUpperCase()||"?"})}),c.jsx("span",{className:"font-semibold text-dark-text",children:u?.displayName||"Loading..."})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>o(u,"voice"),className:"text-dark-muted hover:text-dark-text transition-colors p-1 rounded hover:bg-dark-hover",title:"Start Voice Call",disabled:!u,children:c.jsx(wL,{size:22})}),c.jsx("button",{onClick:()=>o(u,"video"),className:"text-dark-muted hover:text-dark-text transition-colors p-1 rounded hover:bg-dark-hover",title:"Start Video Call",disabled:!u,children:c.jsx(Kd,{size:22})}),c.jsx("div",{className:"w-px h-6 bg-dark-hover mx-1"}),c.jsx(a6,{messages:v,users:R,onResultClick:A=>document.getElementById(`message-${A.id}`)?.scrollIntoView({behavior:"smooth",block:"center"})})]})]}),c.jsx(jR,{serverId:null,channelId:t,users:R,currentUserId:n?.uid,userRole:r?.role,onReply:m,onMessagesChange:b}),c.jsx(i6,{serverId:null,channelId:t,channel:{id:t,name:u?.displayName},userId:n?.uid,userProfile:r,userRole:r?.role,users:R,replyingTo:f,onCancelReply:()=>m(null)})]}):c.jsx("div",{className:"flex-1 flex items-center justify-center text-dark-muted",children:"Select a conversation"})},RG="lumo",IG="2.0.14",jG="module",DG="electron/main.cjs",PG={dev:"vite",build:"vite build",lint:"eslint .",preview:"vite preview",predeploy:"npm run build",deploy:"gh-pages -d dist","electron:dev":'concurrently -k "npm run dev" "wait-on tcp:3000 && electron ."',"electron:build":"vite build && electron-builder","build:electron":"npm run electron:build"},MG={"@capacitor-community/safe-area":"^7.0.0-beta.8","@capacitor-firebase/authentication":"^8.0.1","@capacitor/android":"^8.0.0","@capacitor/cli":"^8.0.0","@capacitor/core":"^8.0.0","@capacitor/push-notifications":"^8.0.0","@capacitor/status-bar":"^8.0.0","@codetrix-studio/capacitor-google-auth":"^3.4.0-rc.4","@giphy/js-fetch-api":"^5.7.0","@giphy/react-components":"^10.1.0",clsx:"^2.1.1","date-fns":"^4.1.0","electron-log":"^5.4.3","electron-updater":"^6.6.2","emoji-picker-react":"^4.16.1",firebase:"^12.6.0","firebase-admin":"^13.6.0",peerjs:"^1.5.5",react:"^19.2.3","react-color":"^2.19.3","react-dom":"^19.2.3","react-draggable":"^4.5.0","react-icons":"^5.5.0","react-router-dom":"^7.10.0","simple-peer":"^9.11.1","string-similarity":"^4.0.4","styled-components":"^6.3.8","tailwind-merge":"^3.4.0","vosk-browser":"^0.0.8"},OG="Lumo - Modern Chat Application",LG="Hasan",VG={appId:"com.hasan.lumoapp",productName:"Lumo",files:["dist/**/*","electron/**/*","public/**/*"],directories:{output:"dist"},win:{target:"nsis",icon:"public/lumo-logo.png",artifactName:"LumoSetup_win-${version}.${ext}"},mac:{target:"dmg",icon:"public/lumo-logo.png",category:"public.app-category.social-networking",extendInfo:{NSCameraUsageDescription:"Lumo needs access to your camera for video calls.",NSMicrophoneUsageDescription:"Lumo needs access to your microphone for voice and video calls.",NSScreenCaptureUsageDescription:"Lumo needs access to share your screen."},artifactName:"LumoSetup_mac-${version}.${ext}"},linux:{target:"AppImage",icon:"public/lumo-logo.png",category:"Network",artifactName:"LumoSetup_linux-${version}.${ext}"},publish:[{provider:"github",owner:"opsdazlakss",repo:"lumobuild"}]},UG={type:"git",url:"https://github.com/opsdazlakss/lumobuild.git"},zG={"@capacitor/assets":"^3.0.5","@eslint/js":"^9.39.1","@types/react":"^19.2.5","@types/react-dom":"^19.2.3","@vitejs/plugin-react":"^5.1.1",autoprefixer:"^10.4.22","baseline-browser-mapping":"^2.9.19",concurrently:"^9.2.1",electron:"^39.2.6","electron-builder":"^26.0.12",eslint:"^9.39.1","eslint-plugin-react-hooks":"^7.0.1","eslint-plugin-react-refresh":"^0.4.24","gh-pages":"^6.3.0",globals:"^16.5.0",postcss:"^8.5.6",tailwindcss:"^3.4.18",typescript:"^5.9.3",vite:"^7.2.4","wait-on":"^9.0.3"},c0={name:RG,private:!0,version:IG,type:jG,main:DG,scripts:PG,dependencies:MG,description:OG,author:LG,build:VG,repository:UG,devDependencies:zG},BG=({isOpen:t,onClose:e,version:n,downloadUrl:r,forceUpdate:i})=>c.jsx(Ps,{isOpen:t,onClose:i?()=>{}:e,title:"Update Available",size:"sm",children:c.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[c.jsx("div",{className:"w-16 h-16 bg-brand-primary/20 rounded-full flex items-center justify-center animate-bounce",children:c.jsx($L,{size:32,className:"text-brand-primary"})}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-white",children:["New Version ",n," Available!"]}),c.jsx("p",{className:"text-dark-muted text-sm mt-2",children:"A new version of Lumo is available. Please update to get the latest features and fixes."})]}),c.jsxs("div",{className:"w-full space-y-2 pt-2",children:[c.jsxs(st,{variant:"primary",className:"w-full flex items-center justify-center gap-2",onClick:()=>{window.open(r,"_system")},children:[c.jsx(zN,{size:20}),"Download Update"]}),!i&&c.jsx(st,{variant:"secondary",className:"w-full",onClick:e,children:"Update Later"})]})]})}),FG=()=>{const{hotkeys:t}=l6(),{toggleAudio:e,toggleDeafen:n,callStatus:r}=ru(),{toggleMute:i,toggleDeafen:o,currentVoiceChannel:u}=su();return w.useEffect(()=>{const h=f=>{["INPUT","TEXTAREA","SELECT"].includes(document.activeElement?.tagName)||document.activeElement?.contentEditable,f.ctrlKey||f.altKey||f.metaKey;const m=[];f.ctrlKey&&m.push("Control"),f.shiftKey&&m.push("Shift"),f.altKey&&m.push("Alt"),f.metaKey&&m.push("Meta");let v=f.key;v.length===1&&(v=v.toUpperCase()),["Control","Shift","Alt","Meta"].includes(v)||m.push(v);const b=[...new Set(m)].join("+"),x=b===t.toggleMute,C=b===t.toggleDeafen;if(x||C){const R=["INPUT","TEXTAREA","SELECT"].includes(document.activeElement?.tagName)||document.activeElement?.contentEditable==="true",A=f.ctrlKey||f.altKey||f.metaKey;(!R||A)&&f.preventDefault(),x?u?i():e():u?o():n()}};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[t,e,n,i,o,u]),null},HG=()=>{const{currentUser:t,userProfile:e,logout:n}=yn(),{users:r,channels:i,server:o,servers:u,currentServer:h,setCurrentServer:f,unreadMentions:m,unreadDms:v,dms:b}=ua();bz(),oB(t?.uid);const[x,C]=w.useState(null),[R,A]=w.useState(null),[k,L]=w.useState(!1),[U,I]=w.useState(!1),[M,z]=w.useState(!1),[H,E]=w.useState(!1),[S,j]=w.useState(!1),D=yz({onSwipeLeft:()=>{if(H){E(!1);return}h!=="home"&&j(!0)},onSwipeRight:()=>{if(S){j(!1);return}E(!0)}}),[V,B]=w.useState(!1),[P,ne]=w.useState(!1),[oe,G]=w.useState(null),[Z,J]=w.useState([]),[Se,Le]=w.useState(!1),[$,Q]=w.useState(null),[re,he]=w.useState("idle");w.useEffect(()=>{if(!sa.isNativePlatform())return;(async()=>{he("checking");const Oe=Date.now();try{const Ie=Re(ce,"system","app_version"),Xe=await Zc(Ie);let ke=!1,fe=null;if(Xe.exists()){const dt=Xe.data(),ye=c0.version,Ve=dt.android;if(Ve&&Ve!==ye){const De=ye.split(".").map(Number),K=Ve.split(".").map(Number);for(let ue=0;ue<Math.max(De.length,K.length);ue++){const je=De[ue]||0,me=K[ue]||0;if(me>je){ke=!0;break}else if(me<je)break}ke&&(fe={version:Ve,downloadUrl:dt.downloadUrl,forceUpdate:dt.forceUpdate||!1})}}const Ae=Date.now()-Oe;Ae<1500&&await new Promise(dt=>setTimeout(dt,1500-Ae)),ke?(Q(fe),he("available"),Le(!0)):(he("uptodate"),setTimeout(()=>{he("idle")},1500))}catch(Ie){console.error("Failed to check for updates:",Ie),he("idle")}})()},[]),w.useEffect(()=>{!t||!h||!m||m[h]?.count>0&&it(Re(ce,"users",t.uid),{[`unreadMentions.${h}`]:CS()}).catch(te=>{console.error("Error clearing unread mentions:",te)})},[h,t,m]),w.useEffect(()=>{!t||!R||!v||v[R.id]?.count>0&&it(Re(ce,"users",t.uid),{[`unreadDms.${R.id}`]:CS()}).catch(te=>{console.error("Error clearing unread DM count:",te)})},[R,t,v]),w.useEffect(()=>{const te=()=>{window.innerWidth<768&&!x&&!R&&E(!0)};return window.innerWidth<768&&E(!0),window.addEventListener("resize",te),()=>window.removeEventListener("resize",te)},[x,R]),w.useEffect(()=>{i.length>0?C(i[0]):C(null)},[h,i]);const Te=async te=>{if(f(te),t)try{await it(Re(ce,"users",t.uid),{currentServer:te})}catch(Oe){console.error("Failed to persist server selection:",Oe)}},Ue=async te=>{if(!(!t||!te))try{let Oe=b.find(Ie=>Ie.participants.includes(te.id)&&Ie.participants.includes(t.uid));if(!Oe){const Ie=Br(_t(ce,"dms"),zi("participants","array-contains",t.uid)),ke=(await fi(Ie)).docs.find(fe=>fe.data().participants.includes(te.id));ke&&(Oe={id:ke.id,...ke.data()})}if(Oe)Oe.hiddenFor?.includes(t.uid)&&await it(Re(ce,"dms",Oe.id),{hiddenFor:Oe.hiddenFor.filter(Ie=>Ie!==t.uid)}),A(Oe);else{const Ie={participants:[t.uid,te.id],createdAt:ft(),updatedAt:ft(),lastMessage:null,hiddenFor:[]},Xe=await Kn(_t(ce,"dms"),Ie);A({id:Xe.id,...Ie})}Te("home")}catch(Oe){console.error("Error starting DM:",Oe)}};return t&&t.email&&!t.emailVerified?c.jsx(kG,{}):c.jsx(sB,{children:c.jsx(mB,{children:c.jsx(oG,{children:c.jsxs(iB,{children:[c.jsx(FG,{}),c.jsx(NG,{}),c.jsxs("div",{className:"flex h-screen bg-dark-bg overflow-hidden",...D,children:[c.jsxs("div",{className:"hidden md:flex h-full",children:[c.jsx(x4,{servers:u,currentServerId:h,onServerChange:Te,onCreateServer:()=>B(!0),onJoinServer:()=>ne(!0),userRole:e?.role,userId:t?.uid,unreadMentions:m,unreadDms:v}),c.jsx(b4,{server:o,channels:i,selectedChannel:x,onSelectChannel:C,onOpenSettings:()=>L(!0),onOpenAdmin:()=>I(!0),onLogout:n,userProfile:e,serverId:h,userRole:e?.role,userId:t?.uid,dms:b,unreadDms:v,selectedDm:R,onSelectDm:A})]}),H&&c.jsxs("div",{className:"fixed inset-0 z-50 flex md:hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>E(!1)}),c.jsxs("div",{className:"relative flex h-full animate-slide-in-left bg-dark-bg",children:[c.jsx(x4,{servers:u,currentServerId:h,onServerChange:te=>Te(te),onCreateServer:()=>B(!0),onJoinServer:()=>ne(!0),userRole:e?.role,userId:t?.uid,unreadMentions:m,unreadDms:v}),c.jsx(b4,{server:o,channels:i,selectedChannel:x,onSelectChannel:te=>{C(te),E(!1)},onOpenSettings:()=>{L(!0),E(!1)},onOpenAdmin:()=>{I(!0),E(!1)},onLogout:n,userProfile:e,serverId:h,userRole:e?.role,userId:t?.uid,dms:b,unreadDms:v,selectedDm:R,onSelectDm:te=>{A(te),E(!1)}}),c.jsx("button",{onClick:()=>E(!1),className:"absolute top-2 right-2 p-2 bg-dark-bg/50 rounded-full text-white md:hidden",style:{right:"-3rem"},children:c.jsx($n,{size:24})})]})]}),c.jsx("div",{className:"flex-1 flex flex-col",children:h==="home"?R?c.jsx(AG,{dmId:R.id,dms:b}):c.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-dark-muted relative",children:[c.jsx("button",{onClick:()=>E(!0),className:"absolute top-4 left-4 md:hidden p-2 text-dark-muted hover:text-dark-text",children:c.jsx($S,{size:32})}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"mb-2 text-lg",children:" Welcome!"}),c.jsx("p",{children:"Select a conversation to start chatting"})]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"h-12 md:h-12 pt-safe-top md:pt-0 px-4 flex items-center justify-between border-b border-dark-hover shadow-sm bg-dark-bg box-content",children:[c.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[c.jsx("button",{onClick:()=>E(!0),className:"md:hidden p-1 mr-1 text-dark-muted hover:text-dark-text",children:c.jsx($S,{size:24})}),c.jsx(sg,{className:"text-dark-muted flex-shrink-0"}),c.jsxs("h2",{className:"font-semibold text-dark-text flex items-center min-w-0",children:[c.jsx("span",{className:"truncate",children:x?.name||"Select a channel"}),x?.description&&c.jsx("span",{className:"hidden md:block ml-4 text-sm text-dark-muted font-normal border-l border-dark-muted/30 pl-4 truncate max-w-md",children:x.description})]})]}),c.jsx("div",{className:"flex items-center gap-3",children:x&&c.jsxs(c.Fragment,{children:[Z.filter(te=>te.pinned).length>0&&c.jsxs("button",{onClick:()=>z(!M),className:`hidden sm:flex items-center gap-2 px-3 py-1.5 rounded transition-colors ${M?"bg-brand-primary text-white":"bg-dark-hover text-dark-text hover:bg-dark-input"}`,children:[c.jsx(xc,{size:16}),c.jsxs("span",{className:"text-sm font-medium",children:[Z.filter(te=>te.pinned).length," Pinned"]})]}),c.jsx("div",{className:"hidden sm:block",children:c.jsx(a6,{messages:Z,users:r,onResultClick:te=>console.log("Scroll to:",te)})}),h!=="home"&&c.jsx("button",{onClick:()=>j(!0),className:"lg:hidden p-2 text-dark-muted hover:text-dark-text",children:c.jsx(I1,{size:24})})]})})]}),x?c.jsxs(c.Fragment,{children:[c.jsx(jR,{serverId:h,channelId:x.id,users:r,currentUserId:t?.uid,userRole:e?.role,onReply:G,onMessagesChange:J}),c.jsx(i6,{serverId:h,channelId:x.id,channel:x,userId:t?.uid,userProfile:e,userRole:e?.role,users:r,replyingTo:oe,onCancelReply:()=>G(null)})]}):c.jsx("div",{className:"flex-1 flex items-center justify-center text-dark-muted",children:"Select a channel to start chatting"})]})}),c.jsx("div",{className:"hidden lg:block h-full",children:h!=="home"&&c.jsx(_4,{users:r,currentUserId:t?.uid,onStartDm:Ue})}),S&&h!=="home"&&c.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end lg:hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>j(!1)}),c.jsxs("div",{className:"relative h-full bg-dark-sidebar shadow-xl w-64 animate-slide-in-right pt-safe-top",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-hover",children:[c.jsx("h3",{className:"font-semibold text-dark-text",children:"Members"}),c.jsx("button",{onClick:()=>j(!1),children:c.jsx($n,{size:24,className:"text-dark-muted"})})]}),c.jsx("div",{className:"h-[calc(100%-60px)]",children:c.jsx(_4,{users:r,currentUserId:t?.uid,onStartDm:te=>{Ue(te),j(!1)}})})]})]}),M&&x&&c.jsx(nG,{messages:Z,users:r,onClose:()=>z(!1),onJumpToMessage:te=>{const Oe=document.getElementById(`message-${te}`);Oe&&(Oe.scrollIntoView({behavior:"smooth",block:"center"}),Oe.classList.add("bg-brand-primary/10"),setTimeout(()=>{Oe.classList.remove("bg-brand-primary/10")},2e3)),z(!1)}}),c.jsx(TG,{}),c.jsx(uG,{isOpen:k,onClose:()=>L(!1),onOpenAdmin:()=>I(!0)}),c.jsx(fG,{isOpen:U,onClose:()=>I(!1)}),c.jsx(mG,{isOpen:V,onClose:()=>B(!1),userId:t?.uid,onSuccess:te=>f(te)}),c.jsx(pG,{isOpen:P,onClose:()=>ne(!1),userId:t?.uid,onSuccess:te=>f(te)}),Se&&c.jsx(BG,{isOpen:Se,onClose:()=>!$?.forceUpdate&&Le(!1),version:$?.version,downloadUrl:$?.downloadUrl,forceUpdate:$?.forceUpdate}),["checking","uptodate"].includes(re)&&c.jsxs("div",{className:"fixed inset-0 z-[60] bg-dark-bg flex flex-col items-center justify-center text-white transition-opacity duration-300",children:[re==="checking"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-brand-primary mb-6"}),c.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Checking for updates..."}),c.jsxs("p",{className:"text-dark-muted font-mono text-sm",children:["v",c0.version]})]}),re==="uptodate"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"rounded-full bg-green-500/20 p-4 mb-6",children:c.jsx(zN,{size:48,className:"text-green-500"})}),c.jsx("h2",{className:"text-xl font-semibold mb-2 text-green-400",children:"You are up to date!"}),c.jsxs("p",{className:"text-dark-muted font-mono text-sm",children:["v",c0.version]})]})]})]})]})})})})},$G=()=>{const{currentUser:t,userProfile:e,logout:n}=yn(),[r,i]=w.useState(e?.displayName||""),[o,u]=w.useState(!1),[h,f]=w.useState(""),[m,v]=w.useState(!1),[b,x]=w.useState(!1);w.useEffect(()=>{const A=setTimeout(async()=>{if(!r||r.length<3){x(!1),f("");return}if(!/^[a-zA-Z0-9-_]+$/.test(r)){f("Only letters, numbers, hyphens (-) and underscores (_) allowed"),x(!1);return}v(!0),f("");try{const k=_t(ce,"users"),L=await fi(k);let U=!1;const I=r.toLowerCase();L.forEach(M=>{if(M.id===t.uid)return;const z=M.data().displayName;z&&z.toLowerCase()===I&&(U=!0)}),U?(f("This username is already taken"),x(!1)):x(!0)}catch(k){console.error(k),f("Error checking username availability")}finally{v(!1)}},500);return()=>clearTimeout(A)},[r,t]);const C=async R=>{if(R.preventDefault(),!(!b||h||o)){u(!0);try{await TC(t,{displayName:r}),await it(Re(ce,"users",t.uid),{displayName:r,isUsernameSet:!0})}catch(A){console.error(A),f("Failed to save username")}finally{u(!1)}}};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-bg p-4",children:c.jsxs("div",{className:"w-full max-w-md bg-dark-sidebar rounded-lg shadow-2xl p-8 space-y-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-2xl font-bold text-dark-text",children:"Choose Your Username"}),c.jsx("p",{className:"text-dark-muted mt-2",children:"Welcome to Lumo! Please choose a unique username found across the platform."})]}),c.jsxs("form",{onSubmit:C,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx(bn,{label:"Username",value:r,onChange:R=>i(R.target.value),placeholder:"e.g. awesome_user",className:h?"!border-red-500":b?"!border-green-500":""}),m&&c.jsx("p",{className:"text-xs text-yellow-500 mt-1",children:"Checking availability..."}),h&&c.jsx("p",{className:"text-xs text-red-500 mt-1",children:h}),!h&&b&&!m&&c.jsx("p",{className:"text-xs text-green-500 mt-1",children:"Username available!"})]}),c.jsx(st,{type:"submit",className:"w-full",disabled:o||!b||!!h||m,children:o?"Setting up...":"Start Using Lumo"})]}),c.jsx("div",{className:"text-center",children:c.jsx("button",{onClick:n,className:"text-sm text-dark-muted hover:text-white transition-colors",children:"Logout"})})]})})};class qG extends ve.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n),this.setState({errorInfo:n})}render(){return this.state.hasError?c.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-8 flex flex-col items-center justify-center text-center",children:[c.jsx("h1",{className:"text-2xl font-bold text-red-500 mb-4",children:"Something went wrong"}),c.jsxs("div",{className:"bg-gray-800 p-4 rounded overflow-auto max-w-full text-left font-mono text-xs",children:[c.jsx("p",{className:"font-bold text-yellow-400 mb-2",children:this.state.error&&this.state.error.toString()}),c.jsx("pre",{className:"text-gray-400 whitespace-pre-wrap",children:this.state.errorInfo&&this.state.errorInfo.componentStack})]}),c.jsx("button",{className:"mt-6 px-4 py-2 bg-blue-600 rounded hover:bg-blue-700",onClick:()=>window.location.reload(),children:"Reload App"})]}):this.props.children}}const qo=xh("PushNotifications",{}),GG=()=>{const{currentUser:t}=yn();w.useEffect(()=>{let e,n,r,i;return sa.getPlatform()!=="web"&&t&&(async()=>{console.log("PushNotifications hook: Initializing for user",t.uid);let u=await qo.checkPermissions();if(u.receive==="prompt"&&(u=await qo.requestPermissions()),u.receive!=="granted"){console.warn("PushNotifications hook: User denied permissions!");return}e=await qo.addListener("registration",async h=>{console.log("Push registration success, token: "+h.value);try{const f=Re(ce,"users",t.uid);await dr(f,{fcmTokens:h.value},{merge:!0}),console.log("FCM Token saved to Firestore for user:",t.uid)}catch(f){console.error("Error saving FCM token to Firestore:",f)}}),n=await qo.addListener("registrationError",h=>{console.error("Error on registration: "+JSON.stringify(h))}),r=await qo.addListener("pushNotificationReceived",h=>{console.log("Push received: "+JSON.stringify(h))}),i=await qo.addListener("pushNotificationActionPerformed",h=>{console.log("Push action performed: "+JSON.stringify(h))}),console.log("PushNotifications hook: Requesting registration..."),await qo.register()})(),()=>{e&&e.remove(),n&&n.remove(),r&&r.remove(),i&&i.remove()}},[t])};function YG(){const{currentUser:t,userProfile:e,loading:n}=yn();GG();const[r,i]=w.useState("login");return w.useEffect(()=>{const o=new URLSearchParams(window.location.search);(o.get("sso")||o.get("sso_token"))&&!t&&i("sso-login")},[t]),n?c.jsx("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center",children:c.jsx("div",{className:"text-dark-text text-xl",children:"Loading..."})}):t&&e?.isBanned?c.jsx("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-dark-sidebar p-8 rounded-xl max-w-md w-full text-center border border-admin",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("h1",{className:"text-2xl font-bold text-dark-text mb-2",children:"Account Banned"}),c.jsx("p",{className:"text-dark-muted mb-6",children:"Your account has been banned from this server. Please contact an administrator if you believe this is a mistake."}),c.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-hover transition-colors",children:"Refresh"})]})}):(t&&e&&console.log("[AuthRouter] Checking Username Setup:",{isUsernameSet:e.isUsernameSet,displayName:e.displayName}),t&&e&&!e.isUsernameSet?(console.log("[AuthRouter] Redirecting to UsernameSetupScreen"),c.jsx($G,{})):t&&!e?c.jsx("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center",children:c.jsx("div",{className:"text-dark-text text-xl",children:"Loading Profile..."})}):t?c.jsx(rL,{children:c.jsx(HG,{})}):c.jsxs(c.Fragment,{children:[r==="login"&&c.jsx($V,{onSwitchToRegister:()=>i("register"),onSwitchToReset:()=>i("reset"),onSwitchToSSOTest:()=>i("sso-test")}),r==="register"&&c.jsx(qV,{onSwitchToLogin:()=>i("login")}),r==="reset"&&c.jsx(GV,{onSwitchToLogin:()=>i("login")}),r==="sso-test"&&c.jsx(YV,{onBack:()=>i("login")}),r==="sso-login"&&c.jsx(vz,{onBackToLogin:()=>i("login")})]}))}function KG(){return c.jsx(QL,{children:c.jsx(qG,{children:c.jsx(eL,{children:c.jsx(YG,{})})})})}sa.isNativePlatform()&&PN.initialize({clientId:"267697346186-ortie4deqdkbqvrj4q6an18gv8idtnbj.apps.googleusercontent.com",scopes:["profile","email"],grantOfflineAccess:!0});Z5.createRoot(document.getElementById("root")).render(c.jsx(w.StrictMode,{children:c.jsx(KG,{})}));export{A1 as W};
